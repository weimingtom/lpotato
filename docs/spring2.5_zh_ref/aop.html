<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;6.&nbsp;&#20351;&#29992;Spring&#36827;&#34892;&#38754;&#21521;&#20999;&#38754;&#32534;&#31243;&#65288;AOP&#65289;</title><link rel="stylesheet" href="html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.60.1"><link rel="home" href="index.html" title="Spring Framework &#24320;&#21457;&#21442;&#32771;&#25163;&#20876;"><link rel="up" href="spring-core.html" title="Part&nbsp;I.&nbsp;&#26680;&#24515;&#25216;&#26415;"><link rel="previous" href="validation.html" title="Chapter&nbsp;5.&nbsp;&#26657;&#39564;&#65292;&#25968;&#25454;&#32465;&#23450;&#65292;BeanWrapper&#65292;&#19982;&#23646;&#24615;&#32534;&#36753;&#22120;"><link rel="next" href="aop-api.html" title="Chapter&nbsp;7.&nbsp;Spring AOP APIs"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div xmlns="http://www.w3.org/TR/xhtml1/transitional" style="background-color:white;border:none;height:73px;border:1px solid black;"><a style="border:none;" href="http://www.springframework.org/" title="The Spring Framework"><img style="border:none;" src="images/xdev-spring_logo.jpg"></a><a style="border:none;" href="http://www.springsource.com/" title="SpringSource"><img style="border:none;position:absolute;padding-top:5px;right:42px;" src="images/springsource-banner-rhs.png"></a></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="aop"></a>Chapter&nbsp;6.&nbsp;&#20351;&#29992;Spring&#36827;&#34892;&#38754;&#21521;&#20999;&#38754;&#32534;&#31243;&#65288;AOP&#65289;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="aop-introduction"></a>6.1.&nbsp;&#31616;&#20171;</h2></div></div><div></div></div><p><span class="emphasis"><em>&#38754;&#21521;&#20999;&#38754;&#32534;&#31243;</em></span>&#65288;AOP&#65289;&#36890;&#36807;&#25552;&#20379;&#21478;&#22806;&#19968;&#31181;&#24605;&#32771;&#31243;&#24207;&#32467;&#26500;&#30340;&#36884;&#32463;&#26469;&#24357;&#34917;&#38754;&#21521;&#23545;&#35937;&#32534;&#31243;&#65288;OOP&#65289;&#30340;&#19981;&#36275;&#12290;&#22312;OOP&#20013;&#27169;&#22359;&#21270;&#30340;&#20851;&#38190;&#21333;&#20803;&#26159;&#31867;&#65288;classes&#65289;&#65292;&#32780;&#22312;AOP&#20013;&#27169;&#22359;&#21270;&#30340;&#21333;&#20803;&#21017;&#26159;<span class="emphasis"><em>&#20999;&#38754;</em></span>&#12290;&#20999;&#38754;&#33021;&#23545;&#20851;&#27880;&#28857;&#36827;&#34892;&#27169;&#22359;&#21270;&#65292;&#20363;&#22914;&#27178;&#20999;&#22810;&#20010;&#31867;&#22411;&#21644;&#23545;&#35937;&#30340;&#20107;&#21153;&#31649;&#29702;&#12290;&#65288;&#22312;AOP&#26415;&#35821;&#20013;&#36890;&#24120;&#31216;&#20316;<span class="emphasis"><em>&#27178;&#20999;&#65288;crosscutting&#65289;</em></span>&#20851;&#27880;&#28857;&#12290;&#65289;</p><p><span class="emphasis"><em>AOP&#26694;&#26550;</em></span>&#26159;Spring&#30340;&#19968;&#20010;&#37325;&#35201;&#32452;&#25104;&#37096;&#20998;&#12290;&#20294;&#26159;Spring IoC&#23481;&#22120;&#24182;&#19981;&#20381;&#36182;&#20110;AOP&#65292;&#36825;&#24847;&#21619;&#30528;&#20320;&#26377;&#26435;&#21033;&#36873;&#25321;&#26159;&#21542;&#20351;&#29992;AOP&#65292;AOP&#20570;&#20026;Spring IoC&#23481;&#22120;&#30340;&#19968;&#20010;&#34917;&#20805;,&#20351;&#23427;&#25104;&#20026;&#19968;&#20010;&#24378;&#22823;&#30340;&#20013;&#38388;&#20214;&#35299;&#20915;&#26041;&#26696;&#12290;
		</p><div class="sidebar"><p class="title"><b>Spring 2.0&#30340;AOP</b></p><p>Spring 2.0&#20801;&#35768;&#29992;&#25143;&#36873;&#25321;&#20351;&#29992;&#26356;&#31616;&#21333;&#12289;&#26356;&#24378;&#22823;&#30340;<a href="aop.html#aop-schema" title="6.3.&nbsp;&#22522;&#20110;Schema&#30340;AOP&#25903;&#25345;">&#22522;&#20110;&#27169;&#24335;</a>&#25110;<a href="aop.html#aop-ataspectj" title="6.2.&nbsp;@AspectJ&#25903;&#25345;">@AspectJ&#27880;&#35299;</a>&#30340;&#26041;&#24335;&#26469;&#33258;&#23450;&#20041;&#20999;&#38754;&#12290;&#36825;&#20004;&#31181;&#39118;&#26684;&#37117;&#25903;&#25345;&#25152;&#26377;&#31867;&#22411;&#30340;&#36890;&#30693;(advice)&#21644;AspectJ&#30340;&#20999;&#20837;&#28857;&#35821;&#35328;&#65292;&#34429;&#28982;&#23454;&#38469;&#19978;&#20173;&#28982;&#20351;&#29992;Spring AOP&#36827;&#34892;&#32455;&#20837;&#65288;Weaving&#65289;&#12290;
			</p><p>
			&#26412;&#31456;&#20027;&#35201;&#35752;&#35770;Spring 2.0&#23545;&#22522;&#20110;&#27169;&#24335;&#21644;&#22522;&#20110;@AspectJ&#30340;AOP&#25903;&#25345;&#12290;Spring 2.0&#23436;&#20840;&#20445;&#30041;&#20102;&#23545;Spring 1.2&#30340;&#21521;&#19979;&#20860;&#23481;&#65292;<a href="aop-api.html" title="Chapter&nbsp;7.&nbsp;Spring AOP APIs">&#19979;&#19968;&#31456;</a>&#23558;&#35752;&#35770;Spring 1.2 API&#25152;&#25552;&#20379;&#30340;&#24213;&#23618;&#30340;AOP&#25903;&#25345;&#12290;
			</p></div><p>AOP&#22312;Spring Framework&#20013;&#30340;&#20316;&#29992;</p><div class="itemizedlist"><ul type="disc"><li><p>&#25552;&#20379;&#22768;&#26126;&#24335;&#20225;&#19994;&#26381;&#21153;&#65292;&#29305;&#21035;&#26159;&#20026;&#20102;&#26367;&#20195;EJB&#22768;&#26126;&#24335;&#26381;&#21153;&#12290;&#26368;&#37325;&#35201;&#30340;&#26381;&#21153;&#26159;<a href="transaction.html#transaction-declarative" title="9.5.&nbsp;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;"><span class="emphasis"><em>&#22768;&#26126;&#24615;&#20107;&#21153;&#31649;&#29702;</em></span></a>&#12290;</p></li><li><p>&#20801;&#35768;&#29992;&#25143;&#23454;&#29616;&#33258;&#23450;&#20041;&#20999;&#38754;&#65292;&#29992;AOP&#26469;&#23436;&#21892;OOP&#30340;&#20351;&#29992;&#12290;</p></li></ul></div><i><span class="remark"><p>
		&#22914;&#26524;&#20320;&#21482;&#25171;&#31639;&#20351;&#29992;&#36890;&#29992;&#30340;&#22768;&#26126;&#24335;&#26381;&#21153;&#25110;&#32773;&#23553;&#35013;&#22909;&#30340;&#22768;&#26126;&#24335;&#20013;&#38388;&#20214;&#26381;&#21153;&#65292;&#20363;&#22914;&#32531;&#20914;&#27744;&#65288;pooling&#65289;&#65292;&#37027;&#20040;&#20320;&#19981;&#24517;&#19982;Spring AOP&#30452;&#25509;&#25171;&#20132;&#36947;&#65292;&#24182;&#19988;&#26412;&#31456;&#30340;&#22823;&#37096;&#20998;&#20869;&#23481;&#21487;&#20197;&#36339;&#36807;&#20102;&#12290;
		</p></span></i><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-introduction-defn"></a>6.1.1.&nbsp;AOP&#27010;&#24565;</h3></div></div><div></div></div><p>
			&#39318;&#20808;&#35753;&#25105;&#20204;&#20174;&#19968;&#20123;&#37325;&#35201;&#30340;AOP&#27010;&#24565;&#21644;&#26415;&#35821;&#24320;&#22987;&#12290;&#36825;&#20123;&#26415;&#35821;&#19981;&#26159;Spring&#29305;&#26377;&#30340;&#12290;&#19981;&#36807;AOP&#26415;&#35821;&#24182;&#19981;&#26159;&#29305;&#21035;&#30340;&#30452;&#35266;&#65292;&#22914;&#26524;Spring&#20351;&#29992;&#33258;&#24049;&#30340;&#26415;&#35821;&#65292;&#23558;&#20250;&#21464;&#24471;&#26356;&#21152;&#20196;&#20154;&#22256;&#24785;&#12290;
			</p><div class="itemizedlist"><ul type="disc"><li><p>
          <span class="emphasis"><em>&#20999;&#38754;&#65288;Aspect&#65289;</em></span>&#65306;&#19968;&#20010;&#20851;&#27880;&#28857;&#30340;&#27169;&#22359;&#21270;&#65292;&#36825;&#20010;&#20851;&#27880;&#28857;&#21487;&#33021;&#20250;&#27178;&#20999;&#22810;&#20010;&#23545;&#35937;&#12290;&#20107;&#21153;&#31649;&#29702;&#26159;J2EE&#24212;&#29992;&#20013;&#19968;&#20010;&#20851;&#20110;&#27178;&#20999;&#20851;&#27880;&#28857;&#30340;&#24456;&#22909;&#30340;&#20363;&#23376;&#12290;&#22312;Spring AOP&#20013;&#65292;&#20999;&#38754;&#21487;&#20197;&#20351;&#29992;<a href="aop.html#aop-schema" title="6.3.&nbsp;&#22522;&#20110;Schema&#30340;AOP&#25903;&#25345;">&#22522;&#20110;&#27169;&#24335;</a>&#65289;&#25110;&#32773;&#22522;&#20110;<a href="aop.html#aop-ataspectj" title="6.2.&nbsp;@AspectJ&#25903;&#25345;">@Aspect&#27880;&#35299;</a>&#30340;&#26041;&#24335;&#26469;&#23454;&#29616;&#12290;
				  </p></li><li><p><span class="emphasis"><em>&#36830;&#25509;&#28857;&#65288;Joinpoint&#65289;</em></span>&#65306;&#22312;&#31243;&#24207;&#25191;&#34892;&#36807;&#31243;&#20013;&#26576;&#20010;&#29305;&#23450;&#30340;&#28857;&#65292;&#27604;&#22914;&#26576;&#26041;&#27861;&#35843;&#29992;&#30340;&#26102;&#20505;&#25110;&#32773;&#22788;&#29702;&#24322;&#24120;&#30340;&#26102;&#20505;&#12290;&#22312;Spring AOP&#20013;&#65292;&#19968;&#20010;&#36830;&#25509;&#28857;<span class="emphasis"><em>&#24635;&#26159;</em></span>&#34920;&#31034;&#19968;&#20010;&#26041;&#27861;&#30340;&#25191;&#34892;&#12290;</p></li><li><p><span class="emphasis"><em>&#36890;&#30693;&#65288;Advice&#65289;</em></span>&#65306;&#22312;&#20999;&#38754;&#30340;&#26576;&#20010;&#29305;&#23450;&#30340;&#36830;&#25509;&#28857;&#19978;&#25191;&#34892;&#30340;&#21160;&#20316;&#12290;&#20854;&#20013;&#21253;&#25324;&#20102;&#8220;around&#8221;&#12289;&#8220;before&#8221;&#21644;&#8220;after&#8221;&#31561;&#19981;&#21516;&#31867;&#22411;&#30340;&#36890;&#30693;&#65288;&#36890;&#30693;&#30340;&#31867;&#22411;&#23558;&#22312;&#21518;&#38754;&#37096;&#20998;&#36827;&#34892;&#35752;&#35770;&#65289;&#12290;&#35768;&#22810;AOP&#26694;&#26550;&#65288;&#21253;&#25324;Spring&#65289;&#37117;&#26159;&#20197;<span class="emphasis"><em>&#25318;&#25130;&#22120;</em></span>&#20570;&#36890;&#30693;&#27169;&#22411;&#65292;&#24182;&#32500;&#25252;&#19968;&#20010;&#20197;&#36830;&#25509;&#28857;&#20026;&#20013;&#24515;&#30340;&#25318;&#25130;&#22120;&#38142;&#12290;
					</p></li><li><p><span class="emphasis"><em>&#20999;&#20837;&#28857;&#65288;Pointcut&#65289;</em></span>&#65306;&#21305;&#37197;&#36830;&#25509;&#28857;&#30340;&#26029;&#35328;&#12290;&#36890;&#30693;&#21644;&#19968;&#20010;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#20851;&#32852;&#65292;&#24182;&#22312;&#28385;&#36275;&#36825;&#20010;&#20999;&#20837;&#28857;&#30340;&#36830;&#25509;&#28857;&#19978;&#36816;&#34892;&#65288;&#20363;&#22914;&#65292;&#24403;&#25191;&#34892;&#26576;&#20010;&#29305;&#23450;&#21517;&#31216;&#30340;&#26041;&#27861;&#26102;&#65289;&#12290;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#22914;&#20309;&#21644;&#36830;&#25509;&#28857;&#21305;&#37197;&#26159;AOP&#30340;&#26680;&#24515;&#65306;Spring&#32570;&#30465;&#20351;&#29992;AspectJ&#20999;&#20837;&#28857;&#35821;&#27861;&#12290;
					</p></li><li><p><span class="emphasis"><em>&#24341;&#20837;&#65288;Introduction&#65289;</em></span>&#65306;&#29992;&#26469;&#32473;&#19968;&#20010;&#31867;&#22411;&#22768;&#26126;&#39069;&#22806;&#30340;&#26041;&#27861;&#25110;&#23646;&#24615;&#65288;&#20063;&#34987;&#31216;&#20026;&#36830;&#25509;&#31867;&#22411;&#22768;&#26126;&#65288;inter-type declaration&#65289;&#65289;&#12290;Spring&#20801;&#35768;&#24341;&#20837;&#26032;&#30340;&#25509;&#21475;&#65288;&#20197;&#21450;&#19968;&#20010;&#23545;&#24212;&#30340;&#23454;&#29616;&#65289;&#21040;&#20219;&#20309;&#34987;&#20195;&#29702;&#30340;&#23545;&#35937;&#12290;&#20363;&#22914;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;&#24341;&#20837;&#26469;&#20351;&#19968;&#20010;bean&#23454;&#29616;<tt class="literal">IsModified</tt>&#25509;&#21475;&#65292;&#20197;&#20415;&#31616;&#21270;&#32531;&#23384;&#26426;&#21046;&#12290;
					</p></li><li><p><span class="emphasis"><em>&#30446;&#26631;&#23545;&#35937;&#65288;Target Object&#65289;</em></span>&#65306;
					&#34987;&#19968;&#20010;&#25110;&#32773;&#22810;&#20010;&#20999;&#38754;&#25152;&#36890;&#30693;&#30340;&#23545;&#35937;&#12290;&#20063;&#34987;&#31216;&#20570;<span class="emphasis"><em>&#34987;&#36890;&#30693;&#65288;advised&#65289;</em></span>&#23545;&#35937;&#12290;
					&#26082;&#28982;Spring AOP&#26159;&#36890;&#36807;&#36816;&#34892;&#26102;&#20195;&#29702;&#23454;&#29616;&#30340;&#65292;&#36825;&#20010;&#23545;&#35937;&#27704;&#36828;&#26159;&#19968;&#20010;<span class="emphasis"><em>&#34987;&#20195;&#29702;&#65288;proxied&#65289;</em></span>&#23545;&#35937;&#12290;
					</p></li><li><p><span class="emphasis"><em>AOP&#20195;&#29702;&#65288;AOP Proxy&#65289;</em></span>&#65306;AOP&#26694;&#26550;&#21019;&#24314;&#30340;&#23545;&#35937;&#65292;&#29992;&#26469;&#23454;&#29616;&#20999;&#38754;&#22865;&#32422;&#65288;&#20363;&#22914;&#36890;&#30693;&#26041;&#27861;&#25191;&#34892;&#31561;&#31561;&#65289;&#12290;&#22312;Spring&#20013;&#65292;AOP&#20195;&#29702;&#21487;&#20197;&#26159;JDK&#21160;&#24577;&#20195;&#29702;&#25110;&#32773;CGLIB&#20195;&#29702;&#12290;
					</p></li><li><p><span class="emphasis"><em>&#32455;&#20837;&#65288;Weaving&#65289;</em></span>&#65306;&#25226;&#20999;&#38754;&#36830;&#25509;&#21040;&#20854;&#23427;&#30340;&#24212;&#29992;&#31243;&#24207;&#31867;&#22411;&#25110;&#32773;&#23545;&#35937;&#19978;&#65292;&#24182;&#21019;&#24314;&#19968;&#20010;&#34987;&#36890;&#30693;&#30340;&#23545;&#35937;&#12290;&#36825;&#20123;&#21487;&#20197;&#22312;&#32534;&#35793;&#26102;&#65288;&#20363;&#22914;&#20351;&#29992;AspectJ&#32534;&#35793;&#22120;&#65289;&#65292;&#31867;&#21152;&#36733;&#26102;&#21644;&#36816;&#34892;&#26102;&#23436;&#25104;&#12290;Spring&#21644;&#20854;&#20182;&#32431;Java AOP&#26694;&#26550;&#19968;&#26679;&#65292;&#22312;&#36816;&#34892;&#26102;&#23436;&#25104;&#32455;&#20837;&#12290;
					</p></li></ul></div><p>&#36890;&#30693;&#31867;&#22411;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><span class="emphasis"><em>&#21069;&#32622;&#36890;&#30693;&#65288;Before advice&#65289;</em></span>&#65306;&#22312;&#26576;&#36830;&#25509;&#28857;&#20043;&#21069;&#25191;&#34892;&#30340;&#36890;&#30693;&#65292;&#20294;&#36825;&#20010;&#36890;&#30693;&#19981;&#33021;&#38459;&#27490;&#36830;&#25509;&#28857;&#20043;&#21069;&#30340;&#25191;&#34892;&#27969;&#31243;&#65288;&#38500;&#38750;&#23427;&#25243;&#20986;&#19968;&#20010;&#24322;&#24120;&#65289;&#12290;
					</p></li><li><p><span class="emphasis"><em>&#21518;&#32622;&#36890;&#30693;&#65288;After returning advice&#65289;</em></span>&#65306;&#22312;&#26576;&#36830;&#25509;&#28857;&#27491;&#24120;&#23436;&#25104;&#21518;&#25191;&#34892;&#30340;&#36890;&#30693;&#65306;&#20363;&#22914;&#65292;&#19968;&#20010;&#26041;&#27861;&#27809;&#26377;&#25243;&#20986;&#20219;&#20309;&#24322;&#24120;&#65292;&#27491;&#24120;&#36820;&#22238;&#12290;
					</p></li><li><p><span class="emphasis"><em>&#24322;&#24120;&#36890;&#30693;&#65288;After throwing advice&#65289;</em></span>&#65306;&#22312;&#26041;&#27861;&#25243;&#20986;&#24322;&#24120;&#36864;&#20986;&#26102;&#25191;&#34892;&#30340;&#36890;&#30693;&#12290;
					</p></li><li><p><span class="emphasis"><em>&#26368;&#32456;&#36890;&#30693;&#65288;After (finally) advice&#65289;</em></span>&#65306;&#24403;&#26576;&#36830;&#25509;&#28857;&#36864;&#20986;&#30340;&#26102;&#20505;&#25191;&#34892;&#30340;&#36890;&#30693;&#65288;&#19981;&#35770;&#26159;&#27491;&#24120;&#36820;&#22238;&#36824;&#26159;&#24322;&#24120;&#36864;&#20986;&#65289;&#12290;
		  		</p></li><li><p><span class="emphasis"><em>&#29615;&#32469;&#36890;&#30693;&#65288;Around Advice&#65289;</em></span>&#65306;&#21253;&#22260;&#19968;&#20010;&#36830;&#25509;&#28857;&#30340;&#36890;&#30693;&#65292;&#22914;&#26041;&#27861;&#35843;&#29992;&#12290;&#36825;&#26159;&#26368;&#24378;&#22823;&#30340;&#19968;&#31181;&#36890;&#30693;&#31867;&#22411;&#12290;&#29615;&#32469;&#36890;&#30693;&#21487;&#20197;&#22312;&#26041;&#27861;&#35843;&#29992;&#21069;&#21518;&#23436;&#25104;&#33258;&#23450;&#20041;&#30340;&#34892;&#20026;&#12290;&#23427;&#20063;&#20250;&#36873;&#25321;&#26159;&#21542;&#32487;&#32493;&#25191;&#34892;&#36830;&#25509;&#28857;&#25110;&#30452;&#25509;&#36820;&#22238;&#23427;&#33258;&#24049;&#30340;&#36820;&#22238;&#20540;&#25110;&#25243;&#20986;&#24322;&#24120;&#26469;&#32467;&#26463;&#25191;&#34892;&#12290;
		  		</p></li></ul></div><p>&#29615;&#32469;&#36890;&#30693;&#26159;&#26368;&#24120;&#29992;&#30340;&#36890;&#30693;&#31867;&#22411;&#12290;&#21644;AspectJ&#19968;&#26679;&#65292;Spring&#25552;&#20379;&#25152;&#26377;&#31867;&#22411;&#30340;&#36890;&#30693;&#65292;&#25105;&#20204;&#25512;&#33616;&#20320;&#20351;&#29992;&#23613;&#21487;&#33021;&#31616;&#21333;&#30340;&#36890;&#30693;&#31867;&#22411;&#26469;&#23454;&#29616;&#38656;&#35201;&#30340;&#21151;&#33021;&#12290;&#20363;&#22914;&#65292;&#22914;&#26524;&#20320;&#21482;&#26159;&#38656;&#35201;&#19968;&#20010;&#26041;&#27861;&#30340;&#36820;&#22238;&#20540;&#26469;&#26356;&#26032;&#32531;&#23384;&#65292;&#26368;&#22909;&#20351;&#29992;&#21518;&#32622;&#36890;&#30693;&#32780;&#19981;&#26159;&#29615;&#32469;&#36890;&#30693;&#65292;&#23613;&#31649;&#29615;&#32469;&#36890;&#30693;&#20063;&#33021;&#23436;&#25104;&#21516;&#26679;&#30340;&#20107;&#24773;&#12290;&#29992;&#26368;&#21512;&#36866;&#30340;&#36890;&#30693;&#31867;&#22411;&#21487;&#20197;&#20351;&#24471;&#32534;&#31243;&#27169;&#22411;&#21464;&#24471;&#31616;&#21333;&#65292;&#24182;&#19988;&#33021;&#22815;&#36991;&#20813;&#24456;&#22810;&#28508;&#22312;&#30340;&#38169;&#35823;&#12290;&#27604;&#22914;&#65292;&#20320;&#19981;&#38656;&#35201;&#22312;<tt class="interfacename">JoinPoint</tt>&#19978;&#35843;&#29992;&#29992;&#20110;&#29615;&#32469;&#36890;&#30693;&#30340;<tt class="literal">proceed()</tt>&#26041;&#27861;&#65292;&#23601;&#19981;&#20250;&#26377;&#35843;&#29992;&#30340;&#38382;&#39064;&#12290;
			</p><p>&#22312;Spring 2.0&#20013;&#65292;&#25152;&#26377;&#30340;&#36890;&#30693;&#21442;&#25968;&#37117;&#26159;&#38745;&#24577;&#31867;&#22411;&#65292;&#22240;&#27492;&#20320;&#21487;&#20197;&#20351;&#29992;&#21512;&#36866;&#30340;&#31867;&#22411;&#65288;&#20363;&#22914;&#19968;&#20010;&#26041;&#27861;&#25191;&#34892;&#21518;&#30340;&#36820;&#22238;&#20540;&#31867;&#22411;&#65289;&#20316;&#20026;&#36890;&#30693;&#30340;&#21442;&#25968;&#32780;&#19981;&#26159;&#20351;&#29992;<tt class="classname">Object</tt>&#25968;&#32452;&#12290;
			</p><p> &#36890;&#36807;&#20999;&#20837;&#28857;&#21305;&#37197;&#36830;&#25509;&#28857;&#30340;&#27010;&#24565;&#26159;AOP&#30340;&#20851;&#38190;&#65292;&#36825;&#20351;&#24471;AOP&#19981;&#21516;&#20110;&#20854;&#23427;&#20165;&#20165;&#25552;&#20379;&#25318;&#25130;&#21151;&#33021;&#30340;&#26087;&#25216;&#26415;&#12290; &#20999;&#20837;&#28857;&#20351;&#24471;&#36890;&#30693;&#21487;&#20197;&#29420;&#31435;&#23545;&#24212;&#21040;&#38754;&#21521;&#23545;&#35937;&#30340;&#23618;&#27425;&#32467;&#26500;&#20013;&#12290;&#20363;&#22914;&#65292;&#19968;&#20010;&#25552;&#20379;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;			&#30340;&#29615;&#32469;&#36890;&#30693;&#21487;&#20197;&#34987;&#24212;&#29992;&#21040;&#19968;&#32452;&#27178;&#36328;&#22810;&#20010;&#23545;&#35937;&#30340;&#26041;&#27861;&#19978;&#65288;&#20363;&#22914;&#26381;&#21153;&#23618;&#30340;&#25152;&#26377;&#19994;&#21153;&#25805;&#20316;&#65289;&#12290;
	  </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-introduction-spring-defn"></a>6.1.2.&nbsp;Spring AOP&#30340;&#21151;&#33021;&#21644;&#30446;&#26631;</h3></div></div><div></div></div><p>
			Spring AOP&#20351;&#29992;&#32431;Java&#23454;&#29616;&#12290;&#23427;&#19981;&#38656;&#35201;&#19987;&#38376;&#30340;&#32534;&#35793;&#36807;&#31243;&#12290;Spring AOP&#19981;&#38656;&#35201;&#25511;&#21046;&#31867;&#35013;&#36733;&#22120;&#23618;&#27425;&#65292;&#22240;&#27492;&#23427;&#36866;&#29992;&#20110;J2EE web&#23481;&#22120;&#25110;&#24212;&#29992;&#26381;&#21153;&#22120;&#12290;
	  	</p><p>
			Spring&#30446;&#21069;&#20165;&#25903;&#25345;&#20351;&#29992;&#26041;&#27861;&#35843;&#29992;&#20316;&#20026;&#36830;&#25509;&#28857;&#65288;join point&#65289;&#65288;&#22312;Spring bean&#19978;&#36890;&#30693;&#26041;&#27861;&#30340;&#25191;&#34892;&#65289;&#12290;&#34429;&#28982;&#21487;&#20197;&#22312;&#19981;&#24433;&#21709;&#21040;Spring AOP&#26680;&#24515;API&#30340;&#24773;&#20917;&#19979;&#21152;&#20837;&#23545;&#25104;&#21592;&#21464;&#37327;&#25318;&#25130;&#22120;&#25903;&#25345;&#65292;&#20294;Spring&#24182;&#27809;&#26377;&#23454;&#29616;&#25104;&#21592;&#21464;&#37327;&#25318;&#25130;&#22120;&#12290;&#22914;&#26524;&#20320;&#38656;&#35201;&#25226;&#23545;&#25104;&#21592;&#21464;&#37327;&#30340;&#35775;&#38382;&#21644;&#26356;&#26032;&#20063;&#20316;&#20026;&#36890;&#30693;&#30340;&#36830;&#25509;&#28857;&#65292;&#21487;&#20197;&#32771;&#34385;&#20854;&#23427;&#30340;&#35821;&#35328;&#65292;&#22914;AspectJ&#12290;
	  	</p><p>
			Spring&#23454;&#29616;AOP&#30340;&#26041;&#27861;&#36319;&#20854;&#20182;&#30340;&#26694;&#26550;&#19981;&#21516;&#12290;Spring&#24182;&#19981;&#26159;&#35201;&#25552;&#20379;&#26368;&#23436;&#25972;&#30340;AOP&#23454;&#29616;&#65288;&#23613;&#31649;Spring AOP&#26377;&#36825;&#20010;&#33021;&#21147;&#65289;&#65292;&#30456;&#21453;&#30340;&#65292;&#23427;&#20854;&#23454;&#20391;&#37325;&#20110;&#25552;&#20379;&#19968;&#31181;AOP&#23454;&#29616;&#21644;Spring IoC&#23481;&#22120;&#20043;&#38388;&#30340;&#25972;&#21512;&#65292;&#29992;&#20110;&#24110;&#21161;&#35299;&#20915;&#22312;&#20225;&#19994;&#32423;&#24320;&#21457;&#20013;&#30340;&#24120;&#35265;&#38382;&#39064;&#12290;
			</p><p>&#22240;&#27492;&#65292;Spring&#30340;AOP&#21151;&#33021;&#36890;&#24120;&#37117;&#21644;Spring IoC&#23481;&#22120;&#19968;&#36215;&#20351;&#29992;&#12290;&#20999;&#38754;&#20351;&#29992;&#26222;&#36890;&#30340;bean&#23450;&#20041;&#35821;&#27861;&#26469;&#37197;&#32622;&#65288;&#23613;&#31649;Spring&#25552;&#20379;&#20102;&#24378;&#22823;&#30340;"&#33258;&#21160;&#20195;&#29702;&#65288;autoproxying&#65289;"&#21151;&#33021;&#65289;&#65306;&#19982;&#20854;&#20182;AOP&#23454;&#29616;&#30456;&#27604;&#36825;&#26159;&#19968;&#20010;&#26174;&#33879;&#30340;&#21306;&#21035;&#12290;&#26377;&#20123;&#20107;&#20351;&#29992;Spring AOP&#26159;&#26080;&#27861;&#36731;&#26494;&#25110;&#32773;&#39640;&#25928;&#23436;&#25104;&#30340;&#65292;&#27604;&#22914;&#35828;&#36890;&#30693;&#19968;&#20010;&#32454;&#31890;&#24230;&#30340;&#23545;&#35937;&#65288;&#20363;&#22914;&#20856;&#22411;&#30340;&#22495;&#23545;&#35937;&#65289;&#65306;&#36825;&#31181;&#26102;&#20505;&#65292;&#20351;&#29992;AspectJ&#26159;&#26368;&#22909;&#30340;&#36873;&#25321;&#12290;&#19981;&#36807;&#32463;&#39564;&#21578;&#35785;&#25105;&#20204;&#65292;&#23545;&#20110;&#22823;&#22810;&#25968;&#22312;J2EE&#24212;&#29992;&#20013;&#36866;&#21512;&#29992;AOP&#26469;&#35299;&#20915;&#30340;&#38382;&#39064;&#65292;Spring AOP&#37117;&#25552;&#20379;&#20102;&#19968;&#20010;&#38750;&#24120;&#22909;&#30340;&#35299;&#20915;&#26041;&#26696;&#12290;
			</p><p>Spring AOP&#20174;&#26469;&#27809;&#26377;&#25171;&#31639;&#36890;&#36807;&#25552;&#20379;&#19968;&#31181;&#20840;&#38754;&#30340;AOP&#35299;&#20915;&#26041;&#26696;&#26469;&#19982;AspectJ&#31454;&#20105;&#12290;&#25105;&#20204;&#30456;&#20449;&#26080;&#35770;&#26159;&#22522;&#20110;&#20195;&#29702;&#65288;proxy-based&#65289;&#30340;&#26694;&#26550;&#22914;Spring AOP&#25110;&#32773;&#26159;&#25104;&#29087;&#30340;&#26694;&#26550;&#22914;AspectJ&#37117;&#26159;&#24456;&#26377;&#20215;&#20540;&#30340;&#65292;&#20182;&#20204;&#20043;&#38388;&#24212;&#35813;&#26159;&#20114;&#34917;&#32780;&#19981;&#26159;&#31454;&#20105;&#30340;&#20851;&#31995;&#12290;Spring 2.0&#21487;&#20197;&#26080;&#32541;&#30340;&#25972;&#21512;Spring AOP&#65292;IoC&#21644;AspectJ&#65292;&#20351;&#24471;&#25152;&#26377;&#30340;AOP&#24212;&#29992;&#23436;&#20840;&#34701;&#20837;&#22522;&#20110;Spring&#30340;&#24212;&#29992;&#20307;&#31995;&#12290;&#36825;&#26679;&#30340;&#38598;&#25104;&#19981;&#20250;&#24433;&#21709;Spring AOP API&#25110;&#32773;AOP Alliance API&#65307;Spring AOP&#20445;&#25345;&#20102;&#21521;&#19979;&#20860;&#23481;&#24615;&#12290;<a href="aop-api.html" title="Chapter&nbsp;7.&nbsp;Spring AOP APIs">&#19979;&#19968;&#31456;</a>&#20250;&#35814;&#32454;&#35752;&#35770;Spring AOP&#30340;API&#12290;
			</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/admons/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>Spring Framework&#19968;&#20010;&#37325;&#35201;&#30340;&#21407;&#21017;&#23601;&#26159;<span class="emphasis"><em>&#26080;&#20405;&#20837;&#24615;&#65288;non-invasiveness&#65289;</em></span>; &#36825;&#20010;&#24605;&#24819;&#25351;&#20320;&#19981;&#24212;&#24403;&#34987;&#36843;&#24341;&#20837;&#26694;&#26550;&#29305;&#23450;&#30340;&#31867;&#21644;&#25509;&#21475;&#21040;&#20320;&#30340;&#19994;&#21153;/&#39046;&#22495;&#27169;&#22411;&#20013;&#12290;&#28982;&#32780;&#65292;Spring Framework&#22312;&#26576;&#20123;&#22320;&#26041;&#32473;&#20320;&#19968;&#20010;&#26159;&#21542;&#24341;&#20837;Spring&#26694;&#26550;&#29305;&#23450;&#20381;&#36182;&#21040;&#20320;&#30340;&#20195;&#30721;&#30340;&#36873;&#39033;&#65306; &#32473;&#20320;&#36825;&#20010;&#36873;&#39033;&#30340;&#29702;&#30001;&#26159;&#22240;&#20026;&#22312;&#29305;&#23450;&#30340;&#22330;&#26223;&#20013;&#23427;&#21487;&#33021;&#20165;&#20165;&#26159;&#23481;&#26131;&#38405;&#35835;&#25110;&#29992;&#36825;&#31181;&#26041;&#27861;&#32534;&#20889;&#29305;&#23450;&#30340;&#21151;&#33021;&#22359;&#12290;Spring Framework&#65288;&#20960;&#20046;&#65289;&#19968;&#30452;&#20250;&#20026;&#20320;&#25552;&#20379;&#36825;&#31181;&#36873;&#25321;&#65306;&#20174;&#32780;&#20351;&#20320;&#33021;&#20570;&#20986;&#19968;&#20010;&#26126;&#26234;&#30340;&#20915;&#23450;&#65292;&#20351;&#23427;&#26368;&#36866;&#24212;&#20320;&#30340;&#29305;&#23450;&#29992;&#20363;&#25110;&#22330;&#26223;&#12290;</p><p>&#20320;&#21487;&#20197;&#36873;&#25321;AspectJ&#25110;&#32773;Spring AOP&#65292;&#20197;&#21450;&#36873;&#25321;&#26159;&#20351;&#29992;@AspectJ&#27880;&#35299;&#39118;&#26684;&#36824;&#26159;Spring XML&#37197;&#32622;&#39118;&#26684;&#12290;&#20107;&#23454;&#19978;&#26412;&#31456;&#36873;&#25321;&#20808;&#20171;&#32461;@AspectJ&#39118;&#26684;&#30340;&#26041;&#27861;&#19981;&#24212;&#24403;&#34987;&#30475;&#20316;&#26159;&#36825;&#26679;&#19968;&#20010;&#26263;&#31034;&#65306;Spring&#23567;&#32452;&#21916;&#27426;@AspectJ&#27880;&#35299;&#39118;&#26684;&#26356;&#32988;&#20110;Spring XML&#37197;&#32622;&#12290;</p><p>&#22312;<a href="aop.html#aop-choosing" title="6.4.&nbsp;AOP&#22768;&#26126;&#39118;&#26684;&#30340;&#36873;&#25321;">Section&nbsp;6.4, &#8220;AOP&#22768;&#26126;&#39118;&#26684;&#30340;&#36873;&#25321;&#8221;</a>&#19968;&#31456;&#26377;&#23545;&#20351;&#29992;&#21508;&#20010;&#39118;&#26684;&#29702;&#30001;&#30340;&#19968;&#20010;&#26356;&#20840;&#38754;&#30340;&#35752;&#35770;&#12290;</p></td></tr></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-introduction-proxies"></a>6.1.3.&nbsp;AOP&#20195;&#29702;</h3></div></div><div></div></div><p>Spring&#32570;&#30465;&#20351;&#29992;J2SE <span class="emphasis"><em>&#21160;&#24577;&#20195;&#29702;&#65288;dynamic proxies&#65289;</em></span>&#26469;&#20316;&#20026;AOP&#30340;&#20195;&#29702;&#12290;
      &#36825;&#26679;&#20219;&#20309;&#25509;&#21475;&#65288;&#25110;&#32773;&#25509;&#21475;&#38598;&#65289;&#37117;&#21487;&#20197;&#34987;&#20195;&#29702;&#12290;</p><p>
			Spring&#20063;&#21487;&#20197;&#20351;&#29992;CGLIB&#20195;&#29702;. &#23545;&#20110;&#38656;&#35201;&#20195;&#29702;&#31867;&#32780;&#19981;&#26159;&#20195;&#29702;&#25509;&#21475;&#30340;&#26102;&#20505;CGLIB&#20195;&#29702;&#26159;&#24456;&#26377;&#24517;&#35201;&#30340;&#12290;&#22914;&#26524;&#19968;&#20010;&#19994;&#21153;&#23545;&#35937;&#24182;&#27809;&#26377;&#23454;&#29616;&#19968;&#20010;&#25509;&#21475;&#65292;&#40664;&#35748;&#23601;&#20250;&#20351;&#29992;CGLIB&#12290;&#20316;&#20026;&#38754;&#21521;&#25509;&#21475;&#32534;&#31243;&#30340;&#26368;&#20339;&#23454;&#36341;&#65292;&#19994;&#21153;&#23545;&#35937;&#36890;&#24120;&#37117;&#20250;&#23454;&#29616;&#19968;&#20010;&#25110;&#22810;&#20010;&#25509;&#21475;&#12290;&#20294;&#20063;&#26377;&#21487;&#33021;&#20250;<a href="aop.html#aop-autoproxy-force-CGLIB">&#24378;&#21046;&#20351;&#29992;CGLIB</a>&#65292;&#22312;&#36825;&#31181;&#24773;&#20917;&#65288;&#24076;&#26395;&#19981;&#24120;&#26377;&#65289;&#19979;&#65292;&#20320;&#21487;&#33021;&#38656;&#35201;&#36890;&#30693;&#19968;&#20010;&#27809;&#26377;&#22312;&#25509;&#21475;&#20013;&#22768;&#26126;&#30340;&#26041;&#27861;&#65292;&#25110;&#32773;&#38656;&#35201;&#20256;&#20837;&#19968;&#20010;&#20195;&#29702;&#23545;&#35937;&#32473;&#26041;&#27861;&#20316;&#20026;&#20855;&#20307;&#31867;&#22411;</p><p>&#20026;&#20102;&#26126;&#30333;Spring AOP&#26159;<span class="emphasis"><em>&#22522;&#20110;&#20195;&#29702;&#65288;proxy-based&#65289;</em></span>&#30340;&#20107;&#23454;&#65292;&#35831;&#21442;&#38405;<a href="aop.html#aop-understanding-aop-proxies" title="6.6.1.&nbsp;&#29702;&#35299;AOP&#20195;&#29702;">Section&nbsp;6.6.1, &#8220;&#29702;&#35299;AOP&#20195;&#29702;&#8221;</a>&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="aop-ataspectj"></a>6.2.&nbsp;@AspectJ&#25903;&#25345;</h2></div></div><div></div></div><p>@AspectJ&#20351;&#29992;&#20102;Java 5&#30340;&#27880;&#35299;&#65292;&#21487;&#20197;&#23558;&#20999;&#38754;&#22768;&#26126;&#20026;&#26222;&#36890;&#30340;Java&#31867;&#12290;@AspectJ&#26679;&#24335;&#22312;AspectJ 5&#21457;&#24067;&#30340;<a href="http://www.eclipse.org/aspectj" target="_top">AspectJ project</a>&#37096;&#20998;&#20013;&#34987;&#24341;&#20837;&#12290;Spring 2.0&#20351;&#29992;&#20102;&#21644;AspectJ 5&#19968;&#26679;&#30340;&#27880;&#35299;&#65292;&#24182;&#20351;&#29992;AspectJ&#26469;&#20570;&#20999;&#20837;&#28857;&#35299;&#26512;&#21644;&#21305;&#37197;&#12290;&#20294;&#26159;&#65292;AOP&#22312;&#36816;&#34892;&#26102;&#20173;&#26087;&#26159;&#32431;&#30340;Spring AOP&#65292;&#24182;&#19981;&#20381;&#36182;&#20110;AspectJ&#30340;&#32534;&#35793;&#22120;&#25110;&#32773;&#32455;&#20837;&#22120;&#65288;weaver&#65289;&#12290;
		</p><i><span class="remark">&#20351;&#29992;AspectJ&#30340;&#32534;&#35793;&#22120;&#25110;&#32773;&#32455;&#20837;&#22120;&#30340;&#35805;&#23601;&#21487;&#20197;&#20351;&#29992;&#23436;&#25972;&#30340;AspectJ&#35821;&#35328;&#65292;&#25105;&#20204;&#23558;&#22312;<a href="aop.html#aop-using-aspectj" title="6.8.&nbsp;&#22312;Spring&#24212;&#29992;&#20013;&#20351;&#29992;AspectJ">Section&nbsp;6.8, &#8220;&#22312;Spring&#24212;&#29992;&#20013;&#20351;&#29992;AspectJ&#8221;</a>&#20013;&#35752;&#35770;&#36825;&#20010;&#38382;&#39064;&#12290;</span></i><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-aspectj-support"></a>6.2.1.&nbsp;&#21551;&#29992;@AspectJ&#25903;&#25345;</h3></div></div><div></div></div><p>&#20026;&#20102;&#22312;Spring&#37197;&#32622;&#20013;&#20351;&#29992;@AspectJ&#20999;&#38754;&#65292;&#20320;&#39318;&#20808;&#24517;&#39035;&#21551;&#29992;Spring&#23545;@AspectJ&#20999;&#38754;&#37197;&#32622;&#30340;&#25903;&#25345;&#65292;&#24182;&#30830;&#20445;<span class="emphasis"><em>&#33258;&#21160;&#20195;&#29702;&#65288;autoproxying&#65289;</em></span>&#30340;bean&#26159;&#21542;&#33021;&#34987;&#36825;&#20123;&#20999;&#38754;&#36890;&#30693;&#12290;&#33258;&#21160;&#20195;&#29702;&#26159;&#25351;Spring&#20250;&#21028;&#26029;&#19968;&#20010;bean&#26159;&#21542;&#20351;&#29992;&#20102;&#19968;&#20010;&#25110;&#22810;&#20010;&#20999;&#38754;&#36890;&#30693;&#65292;&#24182;&#25454;&#27492;&#33258;&#21160;&#29983;&#25104;&#30456;&#24212;&#30340;&#20195;&#29702;&#20197;&#25318;&#25130;&#20854;&#26041;&#27861;&#35843;&#29992;&#65292;&#24182;&#19988;&#30830;&#20445;&#36890;&#30693;&#22312;&#38656;&#35201;&#26102;&#25191;&#34892;&#12290;
			</p><p>&#36890;&#36807;&#22312;&#20320;&#30340;Spring&#30340;&#37197;&#32622;&#20013;&#24341;&#20837;&#19979;&#21015;&#20803;&#32032;&#26469;&#21551;&#29992;Spring&#23545;@AspectJ&#30340;&#25903;&#25345;&#65306;</p><pre class="programlisting">&lt;aop:aspectj-autoproxy/&gt;</pre><p>&#25105;&#20204;&#20551;&#23450;&#20320;&#27491;&#22312;&#20351;&#29992;<a href="xsd-config.html" title="Appendix&nbsp;A.&nbsp;XML Schema-based configuration">Appendix&nbsp;A, <i>XML Schema-based configuration</i></a>&#25152;&#25551;&#36848;&#30340;schema&#25903;&#25345;&#12290;&#20851;&#20110;&#22914;&#20309;&#22312;aop&#30340;&#21629;&#21517;&#31354;&#38388;&#20013;&#24341;&#20837;&#36825;&#20123;&#26631;&#31614;&#65292;&#35831;&#21442;&#35265;<a href="xsd-config.html#xsd-config-body-schemas-aop" title="A.2.7.&nbsp;The aop schema">Section&nbsp;A.2.7, &#8220;The aop schema&#8221;</a>
			</p><p>&#22914;&#26524;&#20320;&#27491;&#22312;&#20351;&#29992;DTD&#65292;&#20320;&#20173;&#28982;&#21487;&#20197;&#36890;&#36807;&#22312;&#20320;&#30340;application context&#20013;&#28155;&#21152;&#22914;&#19979;&#23450;&#20041;&#26469;&#21551;&#29992;@AspectJ&#25903;&#25345;&#65306;</p><pre class="programlisting">&lt;bean class="org.springframework.aop.aspectj.annotation.AnnotationAwareAspectJAutoProxyCreator" /&gt;</pre><p>&#20320;&#38656;&#35201;&#22312;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#30340;classpath&#20013;&#24341;&#20837;&#20004;&#20010;AspectJ&#24211;&#65306;<tt class="filename">aspectjweaver.jar</tt>&#21644;<tt class="filename">aspectjrt.jar</tt>&#12290;&#36825;&#20123;&#24211;&#21487;&#20197;&#22312;AspectJ&#30340;&#23433;&#35013;&#21253;&#65288;1.5.1&#25110;&#32773;&#20043;&#21518;&#30340;&#29256;&#26412;&#65289;&#30340;<tt class="filename">'lib'</tt>&#30446;&#24405;&#37324;&#25214;&#21040;&#65292;&#25110;&#32773;&#20063;&#21487;&#20197;&#22312;Spring-with-dependencies&#21457;&#24067;&#21253;&#30340;<tt class="filename">'lib/aspectj'</tt>&#30446;&#24405;&#19979;&#25214;&#21040;&#12290;
			</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-at-aspectj"></a>6.2.2.&nbsp;&#22768;&#26126;&#19968;&#20010;&#20999;&#38754;</h3></div></div><div></div></div><p>&#21551;&#29992;@AspectJ&#25903;&#25345;&#21518;&#65292;&#22312;application context&#20013;&#23450;&#20041;&#30340;&#20219;&#24847;&#24102;&#26377;&#19968;&#20010;@Aspect&#20999;&#38754;&#65288;&#25317;&#26377;<tt class="interfacename">@Aspect</tt>&#27880;&#35299;&#65289;&#30340;bean&#37117;&#23558;&#34987;Spring&#33258;&#21160;&#35782;&#21035;&#24182;&#29992;&#20110;&#37197;&#32622;Spring AOP&#12290;&#20197;&#19979;&#20363;&#23376;&#23637;&#31034;&#20102;&#20026;&#23436;&#25104;&#19968;&#20010;&#19981;&#26159;&#38750;&#24120;&#26377;&#29992;&#30340;&#20999;&#38754;&#25152;&#38656;&#35201;&#30340;&#26368;&#23567;&#23450;&#20041;&#65306;
			</p><p>application context&#20013;&#19968;&#20010;&#24120;&#35265;&#30340;bean&#23450;&#20041;&#65292;&#23427;&#25351;&#21521;&#19968;&#20010;&#20351;&#29992;&#20102;<tt class="interfacename">@Aspect</tt>&#27880;&#35299;&#30340;bean&#31867;&#65306;</p><pre class="programlisting">&lt;bean id="myAspect" class="org.xyz.NotVeryUsefulAspect"&gt;
         <i class="lineannotation"><span class="lineannotation">&lt;!-- configure properties of aspect here as normal --&gt;</span></i>
      &lt;/bean&gt;
      </pre><p>&#20197;&#21450;<tt class="classname">NotVeryUsefulAspect</tt>&#31867;&#30340;&#23450;&#20041;&#65292;&#20351;&#29992;&#20102;
      <tt class="interfacename">org.aspectj.lang.annotation.Aspect</tt>&#27880;&#35299;&#12290;</p><pre class="programlisting">package org.xyz;
import org.aspectj.lang.annotation.Aspect;

@Aspect
public class NotVeryUsefulAspect {

}</pre><p>&#20999;&#38754;&#65288;&#29992;<tt class="interfacename">@Aspect</tt>&#27880;&#35299;&#30340;&#31867;&#65289;&#21644;&#20854;&#20182;&#31867;&#19968;&#26679;&#26377;&#26041;&#27861;&#21644;&#23383;&#27573;&#23450;&#20041;&#12290;&#20182;&#20204;&#20063;&#21487;&#33021;&#21253;&#25324;&#20999;&#20837;&#28857;&#65292;&#36890;&#30693;&#21644;&#24341;&#20837;&#65288;inter-type&#65289;&#22768;&#26126;&#12290;
			</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: &#36890;&#30693;&#20999;&#38754;"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/admons/note.png"></td><th align="left">&#36890;&#30693;&#20999;&#38754;</th></tr><tr><td colspan="2" align="left" valign="top"><p>&#22312;Spring AOP&#20013;&#65292;&#25317;&#26377;&#20999;&#38754;&#30340;&#31867;&#26412;&#36523;<span class="emphasis"><em>&#19981;</em></span>&#21487;&#33021;&#26159;&#20854;&#23427;&#20999;&#38754;&#20013;&#36890;&#30693;&#30340;&#30446;&#26631;&#12290;&#19968;&#20010;&#31867;&#19978;&#38754;&#30340;<span class="emphasis"><em>@Aspect</em></span>&#27880;&#35299;&#26631;&#35782;&#23427;&#20026;&#19968;&#20010;&#20999;&#38754;&#65292;&#24182;&#19988;&#20174;&#33258;&#21160;&#20195;&#29702;&#20013;&#25490;&#38500;&#23427;&#12290;</p></td></tr></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-pointcuts"></a>6.2.3.&nbsp;&#22768;&#26126;&#19968;&#20010;&#20999;&#20837;&#28857;&#65288;pointcut&#65289;</h3></div></div><div></div></div><p>&#22312;&#21069;&#38754;&#25105;&#20204;&#25552;&#21040;&#65292;&#20999;&#20837;&#28857;&#20915;&#23450;&#20102;&#36830;&#25509;&#28857;&#20851;&#27880;&#30340;&#20869;&#23481;&#65292;&#20351;&#24471;&#25105;&#20204;&#21487;&#20197;&#25511;&#21046;&#36890;&#30693;&#20160;&#20040;&#26102;&#20505;&#25191;&#34892;&#12290;<span class="emphasis"><em>Spring AOP&#21482;&#25903;&#25345;Spring bean&#30340;&#26041;&#27861;&#25191;&#34892;&#36830;&#25509;&#28857;</em></span>&#12290;&#25152;&#20197;&#20320;&#21487;&#20197;&#25226;&#20999;&#20837;&#28857;&#30475;&#20570;&#26159;Spring bean&#19978;&#26041;&#27861;&#25191;&#34892;&#30340;&#21305;&#37197;&#12290;&#19968;&#20010;&#20999;&#20837;&#28857;&#22768;&#26126;&#26377;&#20004;&#20010;&#37096;&#20998;&#65306;&#19968;&#20010;&#21253;&#21547;&#21517;&#23383;&#21644;&#20219;&#24847;&#21442;&#25968;&#30340;&#31614;&#21517;&#65292;&#36824;&#26377;&#19968;&#20010;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#65292;&#35813;&#34920;&#36798;&#24335;&#20915;&#23450;&#20102;&#25105;&#20204;&#20851;&#27880;&#37027;&#20010;&#26041;&#27861;&#30340;&#25191;&#34892;&#12290;&#22312;@AspectJ&#27880;&#35299;&#39118;&#26684;&#30340;AOP&#20013;&#65292;&#19968;&#20010;&#20999;&#20837;&#28857;&#31614;&#21517;&#36890;&#36807;&#19968;&#20010;&#26222;&#36890;&#30340;&#26041;&#27861;&#23450;&#20041;&#26469;&#25552;&#20379;&#65292;&#24182;&#19988;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#20351;&#29992;<tt class="interfacename">@Pointcut</tt>&#27880;&#35299;&#26469;&#34920;&#31034;&#65288;&#20316;&#20026;&#20999;&#20837;&#28857;&#31614;&#21517;&#30340;&#26041;&#27861;&#24517;&#39035;&#36820;&#22238;<tt class="literal">void</tt> &#31867;&#22411;&#65289;&#12290;
			</p><p>&#29992;&#19968;&#20010;&#20363;&#23376;&#33021;&#24110;&#25105;&#20204;&#28165;&#26970;&#30340;&#21306;&#20998;&#20999;&#20837;&#28857;&#31614;&#21517;&#21644;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#20043;&#38388;&#30340;&#24046;&#21035;&#65292;&#19979;&#38754;&#30340;&#20363;&#23376;&#23450;&#20041;&#20102;&#19968;&#20010;&#20999;&#20837;&#28857;<tt class="literal">'anyOldTransfer'</tt>&#65292;&#36825;&#20010;&#20999;&#20837;&#28857;&#23558;&#21305;&#37197;&#20219;&#20309;&#21517;&#20026; "transfer" &#30340;&#26041;&#27861;&#30340;&#25191;&#34892;&#65306;</p><pre class="programlisting">@Pointcut&#65288;"execution&#65288;* transfer&#65288;..&#65289;&#65289;"&#65289;<i class="lineannotation"><span class="lineannotation">// the pointcut expression</span></i>
private void anyOldTransfer&#65288;&#65289; {}<i class="lineannotation"><span class="lineannotation">// the pointcut signature</span></i></pre><p>&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#65292;&#20063;&#23601;&#26159;&#32452;&#25104;<tt class="interfacename">@Pointcut</tt>&#27880;&#35299;&#30340;&#20540;&#65292;&#26159;&#27491;&#35268;&#30340;AspectJ 5&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#12290;&#22914;&#26524;&#20320;&#24819;&#35201;&#26356;&#22810;&#20102;&#35299;AspectJ&#30340;&#20999;&#20837;&#28857;&#35821;&#35328;&#65292;&#35831;&#21442;&#35265;<a href="http://www.eclipse.org/aspectj/doc/released/progguide/index.html" target="_top">AspectJ&#32534;&#31243;&#25351;&#21335;</a>&#65288;&#22914;&#26524;&#35201;&#20102;&#35299;&#22522;&#20110;Java 5&#30340;&#25193;&#23637;&#35831;&#21442;&#38405;<a href="http://www.eclipse.org/aspectj/doc/released/adk15notebook/index.html" target="_top">AspectJ 5 &#24320;&#21457;&#25163;&#20876;</a>&#65289;&#25110;&#32773;&#20854;&#20182;&#20154;&#20889;&#30340;&#20851;&#20110;AspectJ&#30340;&#20070;&#65292;&#20363;&#22914;Colyer et. al.&#33879;&#30340;&#8220;<span class="quote">Eclipse AspectJ</span>&#8221;&#25110;&#32773;Ramnivas Laddad&#33879;&#30340;&#8220;<span class="quote">AspectJ in Action</span>&#8221;&#12290;
			</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-pointcuts-designators"></a>6.2.3.1.&nbsp;&#20999;&#20837;&#28857;&#25351;&#31034;&#31526;&#65288;PCD&#65289;&#30340;&#25903;&#25345;</h4></div></div><div></div></div><p>Spring AOP&#25903;&#25345;&#22312;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#20013;&#20351;&#29992;&#22914;&#19979;&#30340;AspectJ&#20999;&#20837;&#28857;&#25351;&#31034;&#31526;&#65306;</p><div class="sidebar"><p class="title"><b>&#20854;&#20182;&#30340;&#20999;&#20837;&#28857;&#31867;&#22411;</b></p><p>&#23436;&#25972;&#30340;AspectJ&#20999;&#20837;&#28857;&#35821;&#35328;&#25903;&#25345;&#39069;&#22806;&#30340;&#20999;&#20837;&#28857;&#25351;&#31034;&#31526;&#65292;&#20294;&#26159;Spring&#24182;&#19981;&#25903;&#25345;&#12290;&#23427;&#20204;&#20998;&#21035;&#26159;<tt class="literal">call, get, set, preinitialization, staticinitialization,          initialization, handler, adviceexecution, withincode, cflow,cflowbelow, if, @this</tt>&#21644;<tt class="literal">@withincode</tt>&#12290;&#22312;Spring AOP&#20013;&#20351;&#29992;&#36825;&#20123;&#25351;&#31034;&#31526;&#23558;&#20250;&#23548;&#33268;&#25243;&#20986;<tt class="classname">IllegalArgumentException</tt>&#24322;&#24120;&#12290;
					</p><p>Spring AOP&#25903;&#25345;&#30340;&#20999;&#20837;&#28857;&#25351;&#31034;&#31526;&#21487;&#33021;&#20250;&#22312;&#23558;&#26469;&#30340;&#29256;&#26412;&#20013;&#24471;&#21040;&#25193;&#23637;&#65292;&#20174;&#32780;&#25903;&#25345;&#26356;&#22810;&#30340;AspectJ&#20999;&#20837;&#28857;&#25351;&#31034;&#31526;&#12290;
					</p></div><div class="itemizedlist"><ul type="disc"><li><p>
							<span class="emphasis"><em>execution</em></span> - &#21305;&#37197;&#26041;&#27861;&#25191;&#34892;&#30340;&#36830;&#25509;&#28857;&#65292;&#36825;&#26159;&#20320;&#23558;&#20250;&#29992;&#21040;&#30340;Spring&#30340;&#26368;&#20027;&#35201;&#30340;&#20999;&#20837;&#28857;&#25351;&#31034;&#31526;&#12290;
						</p></li><li><p>
							<span class="emphasis"><em>within</em></span> - &#38480;&#23450;&#21305;&#37197;&#29305;&#23450;&#31867;&#22411;&#30340;&#36830;&#25509;&#28857;&#65288;&#22312;&#20351;&#29992;Spring AOP&#30340;&#26102;&#20505;&#65292;&#22312;&#21305;&#37197;&#30340;&#31867;&#22411;&#20013;&#23450;&#20041;&#30340;&#26041;&#27861;&#30340;&#25191;&#34892;&#65289;&#12290; 
						</p></li><li><p>
							<span class="emphasis"><em>this</em></span> - &#38480;&#23450;&#21305;&#37197;&#29305;&#23450;&#30340;&#36830;&#25509;&#28857;&#65288;&#20351;&#29992;Spring AOP&#30340;&#26102;&#20505;&#26041;&#27861;&#30340;&#25191;&#34892;&#65289;&#65292;&#20854;&#20013;bean reference&#65288;Spring AOP &#20195;&#29702;&#65289;&#26159;&#25351;&#23450;&#31867;&#22411;&#30340;&#23454;&#20363;&#12290;
						</p></li><li><p>
							<span class="emphasis"><em>target</em></span> - &#38480;&#23450;&#21305;&#37197;&#29305;&#23450;&#30340;&#36830;&#25509;&#28857;&#65288;&#20351;&#29992;Spring AOP&#30340;&#26102;&#20505;&#26041;&#27861;&#30340;&#25191;&#34892;&#65289;&#65292;&#20854;&#20013;&#30446;&#26631;&#23545;&#35937;&#65288;&#34987;&#20195;&#29702;&#30340;&#24212;&#29992;&#23545;&#35937;&#65289;&#26159;&#25351;&#23450;&#31867;&#22411;&#30340;&#23454;&#20363;&#12290;
						</p></li><li><p>
							<span class="emphasis"><em>args</em></span> - &#38480;&#23450;&#21305;&#37197;&#29305;&#23450;&#30340;&#36830;&#25509;&#28857;&#65288;&#20351;&#29992;Spring AOP&#30340;&#26102;&#20505;&#26041;&#27861;&#30340;&#25191;&#34892;&#65289;&#65292;&#20854;&#20013;&#21442;&#25968;&#26159;&#25351;&#23450;&#31867;&#22411;&#30340;&#23454;&#20363;&#12290;
						</p></li><li><p><span class="emphasis"><em><tt class="interfacename">@target</tt></em></span> -  &#38480;&#23450;&#21305;&#37197;&#29305;&#23450;&#30340;&#36830;&#25509;&#28857;&#65288;&#20351;&#29992;Spring AOP&#30340;&#26102;&#20505;&#26041;&#27861;&#30340;&#25191;&#34892;&#65289;&#65292;&#20854;&#20013;&#27491;&#25191;&#34892;&#23545;&#35937;&#30340;&#31867;&#25345;&#26377;&#25351;&#23450;&#31867;&#22411;&#30340;&#27880;&#35299;&#12290;
		  				</p></li><li><p><span class="emphasis"><em><tt class="interfacename">@args</tt></em></span> - &#38480;&#23450;&#21305;&#37197;&#29305;&#23450;&#30340;&#36830;&#25509;&#28857;&#65288;&#20351;&#29992;Spring AOP&#30340;&#26102;&#20505;&#26041;&#27861;&#30340;&#25191;&#34892;&#65289;&#65292;&#20854;&#20013;&#23454;&#38469;&#20256;&#20837;&#21442;&#25968;&#30340;&#36816;&#34892;&#26102;&#31867;&#22411;&#25345;&#26377;&#25351;&#23450;&#31867;&#22411;&#30340;&#27880;&#35299;&#12290;
						</p></li><li><p><span class="emphasis"><em><tt class="interfacename">@within</tt></em></span> - &#38480;&#23450;&#21305;&#37197;&#29305;&#23450;&#30340;&#36830;&#25509;&#28857;&#65292;&#20854;&#20013;&#36830;&#25509;&#28857;&#25152;&#22312;&#31867;&#22411;&#24050;&#25351;&#23450;&#27880;&#35299;&#65288;&#22312;&#20351;&#29992;Spring AOP&#30340;&#26102;&#20505;&#65292;&#25152;&#25191;&#34892;&#30340;&#26041;&#27861;&#25152;&#22312;&#31867;&#22411;&#24050;&#25351;&#23450;&#27880;&#35299;&#65289;&#12290;
						</p></li><li><p><span class="emphasis"><em>@annotation</em></span> - &#38480;&#23450;&#21305;&#37197;&#29305;&#23450;&#30340;&#36830;&#25509;&#28857;&#65288;&#20351;&#29992;Spring AOP&#30340;&#26102;&#20505;&#26041;&#27861;&#30340;&#25191;&#34892;&#65289;&#65292;&#20854;&#20013;&#36830;&#25509;&#28857;&#30340;&#20027;&#39064;&#25345;&#26377;&#25351;&#23450;&#30340;&#27880;&#35299;&#12290;
						</p></li></ul></div><p>&#21478;&#22806;,Spring AOP&#36824;&#25552;&#20379;&#20102;&#19968;&#20010;&#21517;&#20026;'<tt class="literal">bean</tt>'&#30340;PCD&#12290;&#36825;&#20010;PCD&#20801;&#35768;&#20320;&#38480;&#23450;&#21305;&#37197;&#36830;&#25509;&#28857;&#21040;&#19968;&#20010;&#29305;&#23450;&#21517;&#31216;&#30340;Spring bean&#65292;&#25110;&#32773;&#21040;&#19968;&#20010;&#29305;&#23450;&#21517;&#31216;Spring bean&#30340;&#38598;&#21512;&#65288;&#24403;&#20351;&#29992;&#36890;&#37197;&#31526;&#26102;&#65289;&#12290;'<tt class="literal">bean</tt>' PCD&#20855;&#26377;&#19979;&#21015;&#30340;&#26684;&#24335;:</p><pre class="programlisting">bean&#65288;idOrNameOfBean&#65289;</pre><p>'<tt class="literal">idOrNameOfBean</tt>'&#26631;&#35760;&#21487;&#20197;&#26159;&#20219;&#20309;Spring bean&#30340;&#21517;&#23383;&#65306;&#38480;&#23450;&#36890;&#37197;&#31526;&#20351;&#29992;'<tt class="literal">*</tt>'&#26469;&#25552;&#20379;&#65292;&#22914;&#26524;&#20320;&#20026;Spring bean&#21046;&#23450;&#19968;&#20123;&#21629;&#21517;&#32422;&#23450;&#65292;&#20320;&#21487;&#20197;&#38750;&#24120;&#23481;&#26131;&#22320;&#32534;&#20889;&#19968;&#20010;'<tt class="literal">bean</tt>' PCD&#34920;&#36798;&#24335;&#23558;&#23427;&#20204;&#36873;&#20986;&#26469;&#12290;&#21644;&#20854;&#23427;&#36830;&#25509;&#28857;&#25351;&#31034;&#31526;&#19968;&#26679;&#65292;'<tt class="literal">bean</tt>' PCD&#20063;&#25903;&#25345;&amp;&amp;, ||&#21644; !&#36923;&#36753;&#25805;&#20316;&#31526;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/admons/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>&#35831;&#27880;&#24847;'<tt class="literal">bean</tt>' PCD<span class="emphasis"><em>&#20165;&#20165; </em></span>&#34987;Spring AOP&#25903;&#25345;&#32780;<span class="emphasis"><em>&#19981;&#26159;</em></span>AspectJ. &#36825;&#26159;Spring&#23545;AspectJ&#20013;&#23450;&#20041;&#30340;&#26631;&#20934;PCD&#30340;&#19968;&#20010;&#29305;&#23450;&#25193;&#23637;&#12290;</p><p>'<tt class="literal">bean</tt>' PCD&#19981;&#20165;&#20165;&#21487;&#20197;&#22312;&#31867;&#22411;&#32423;&#21035;&#65288;&#34987;&#38480;&#21046;&#22312;&#22522;&#20110;&#32455;&#20837;AOP&#19978;&#65289;&#19978;&#25805;&#20316;&#32780;&#36824;&#21487;&#20197;&#22312;<span class="emphasis"><em>&#23454;&#20363;</em></span>&#32423;&#21035;&#65288;&#22522;&#20110;Spring bean&#30340;&#27010;&#24565;&#65289;&#19978;&#25805;&#20316;&#12290;</p></td></tr></table></div><i><span class="remark">&#22240;&#20026;Spring AOP&#38480;&#21046;&#20102;&#36830;&#25509;&#28857;&#24517;&#39035;&#26159;&#26041;&#27861;&#25191;&#34892;&#32423;&#21035;&#30340;&#65292;&#19978;&#25991;pointcut&#25351;&#31034;&#31526;&#20013;&#30340;&#35752;&#35770;&#20063;&#32473;&#20986;&#20102;&#19968;&#20010;&#23450;&#20041;&#65292;&#36825;&#20010;&#23450;&#20041;&#21644;AspectJ&#30340;&#32534;&#31243;&#25351;&#21335;&#20013;&#30340;&#23450;&#20041;&#30456;&#27604;&#26174;&#24471;&#26356;&#21152;&#29421;&#31364;&#12290;&#38500;&#27492;&#20043;&#22806;&#65292;AspectJ&#23427;&#26412;&#36523;&#26377;&#22522;&#20110;&#31867;&#22411;&#30340;&#35821;&#20041;&#65292;&#22312;&#25191;&#34892;&#30340;&#36830;&#25509;&#28857;'this'&#21644;'target'&#37117;&#26159;&#25351;&#21516;&#19968;&#20010;&#23545;&#35937;&#65292;&#20063;&#23601;&#26159;&#25191;&#34892;&#26041;&#27861;&#30340;&#23545;&#35937;&#12290;Spring AOP&#26159;&#19968;&#20010;&#22522;&#20110;&#20195;&#29702;&#30340;&#31995;&#32479;&#65292;&#24182;&#19988;&#20005;&#26684;&#21306;&#20998;&#20195;&#29702;&#23545;&#35937;&#26412;&#36523;&#65288;&#23545;&#24212;&#20110;'this'&#65289;&#21644;&#32972;&#21518;&#30340;&#30446;&#26631;&#23545;&#35937;&#65288;&#23545;&#24212;&#20110;'target'&#65289;
				</span></i></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-pointcuts-combining"></a>6.2.3.2.&nbsp;&#32452;&#21512;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;</h4></div></div><div></div></div><p>&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#21487;&#20197;&#20351;&#29992;'&amp;', '||' &#21644;  '!'&#26469;&#32452;&#21512;&#12290;&#36824;&#21487;&#20197;&#36890;&#36807;&#21517;&#23383;&#26469;&#25351;&#21521;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#12290;&#20197;&#19979;&#30340;&#20363;&#23376;&#23637;&#31034;&#20102;&#19977;&#31181;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#65306;				<tt class="literal">anyPublicOperation</tt>&#65288;&#22312;&#19968;&#20010;&#26041;&#27861;&#25191;&#34892;&#36830;&#25509;&#28857;&#20195;&#34920;&#20102;&#20219;&#24847;public&#26041;&#27861;&#30340;&#25191;&#34892;&#26102;&#21305;&#37197;&#65289;&#65307;<tt class="literal">inTrading</tt>&#65288;&#22312;&#19968;&#20010;&#20195;&#34920;&#20102;&#22312;&#20132;&#26131;&#27169;&#22359;&#20013;&#30340;&#20219;&#24847;&#30340;&#26041;&#27861;&#25191;&#34892;&#26102;&#21305;&#37197;&#65289;&#21644; <tt class="literal">tradingOperation</tt>&#65288;&#22312;&#19968;&#20010;&#20195;&#34920;&#20102;&#22312;&#20132;&#26131;&#27169;&#22359;&#20013;&#30340;&#20219;&#24847;&#30340;&#20844;&#20849;&#26041;&#27861;&#25191;&#34892;&#26102;&#21305;&#37197;&#65289;&#12290;
				</p><pre class="programlisting">
@Pointcut&#65288;"execution&#65288;public * *&#65288;..&#65289;&#65289;"&#65289;
private void anyPublicOperation&#65288;&#65289; {}

@Pointcut&#65288;"within&#65288;com.xyz.someapp.trading..*"&#65289;
private void inTrading&#65288;&#65289; {}

@Pointcut&#65288;"anyPublicOperation&#65288;&#65289; &amp;&amp; inTrading&#65288;&#65289;"&#65289;
private void tradingOperation&#65288;&#65289; {}
        </pre><p>&#22914;&#19978;&#25152;&#31034;&#65292;&#29992;&#26356;&#23569;&#30340;&#21629;&#21517;&#32452;&#20214;&#26469;&#26500;&#24314;&#26356;&#21152;&#22797;&#26434;&#30340;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#26159;&#19968;&#31181;&#26368;&#20339;&#23454;&#36341;&#12290;&#24403;&#29992;&#21517;&#23383;&#26469;&#25351;&#23450;&#20999;&#20837;&#28857;&#26102;&#20351;&#29992;&#30340;&#26159;&#24120;&#35265;&#30340;Java&#25104;&#21592;&#21487;&#35270;&#24615;&#35775;&#38382;&#35268;&#21017;&#12290;&#65288;&#27604;&#22914;&#35828;&#65292;&#20320;&#21487;&#20197;&#22312;&#21516;&#19968;&#31867;&#22411;&#20013;&#35775;&#38382;&#31169;&#26377;&#30340;&#20999;&#20837;&#28857;&#65292;&#22312;&#32487;&#25215;&#20851;&#31995;&#20013;&#35775;&#38382;&#21463;&#20445;&#25252;&#30340;&#20999;&#20837;&#28857;&#65292;&#21487;&#20197;&#22312;&#20219;&#24847;&#22320;&#26041;&#35775;&#38382;&#20844;&#20849;&#20999;&#20837;&#28857;&#65289;&#12290;&#25104;&#21592;&#21487;&#35270;&#24615;&#35775;&#38382;&#35268;&#21017;&#19981;&#24433;&#21709;&#21040;&#20999;&#20837;&#28857;&#30340;<span class="emphasis"><em>&#21305;&#37197;</em></span>&#12290;
				</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-common-pointcuts"></a>6.2.3.3.&nbsp;&#20849;&#20139;&#36890;&#29992;&#20999;&#20837;&#28857;&#23450;&#20041;</h4></div></div><div></div></div><p>
				&#24403;&#24320;&#21457;&#20225;&#19994;&#32423;&#24212;&#29992;&#30340;&#26102;&#20505;&#65292;&#20320;&#36890;&#24120;&#20250;&#24819;&#35201;&#20174;&#20960;&#20010;&#20999;&#38754;&#26469;&#24341;&#29992;&#27169;&#22359;&#21270;&#30340;&#24212;&#29992;&#21644;&#29305;&#23450;&#25805;&#20316;&#30340;&#38598;&#21512;&#12290;&#25105;&#20204;&#25512;&#33616;&#23450;&#20041;&#19968;&#20010;&#8220;SystemArchitecture&#8221;&#20999;&#38754;&#26469;&#25429;&#25417;&#36890;&#29992;&#30340;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#12290;&#19968;&#20010;&#20856;&#22411;&#30340;&#36890;&#29992;&#20999;&#38754;&#30475;&#36215;&#26469;&#21487;&#33021;&#20687;&#19979;&#38754;&#36825;&#26679;&#65306;
				</p><pre class="programlisting">package com.xyz.someapp;

import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Pointcut;

@Aspect
public class SystemArchitecture {

  <i class="lineannotation"><span class="lineannotation">/**
   * A join point is in the web layer if the method is defined
   * in a type in the com.xyz.someapp.web package or any sub-package
   * under that.
   */</span></i>
  @Pointcut&#65288;"within&#65288;com.xyz.someapp.web..*&#65289;"&#65289;
  public void inWebLayer&#65288;&#65289; {}

  <i class="lineannotation"><span class="lineannotation">/**
   * A join point is in the service layer if the method is defined
   * in a type in the <tt class="literal">com.xyz.someapp.service</tt> package or any sub-package
   * under that.
   */</span></i>
  @Pointcut&#65288;"within&#65288;com.xyz.someapp.service..*&#65289;"&#65289;
  public void inServiceLayer&#65288;&#65289; {}

  <i class="lineannotation"><span class="lineannotation">/**
   * A join point is in the data access layer if the method is defined
   * in a type in the <tt class="literal">com.xyz.someapp.dao</tt> package or any sub-package
   * under that.
   */</span></i>
  @Pointcut&#65288;"within&#65288;com.xyz.someapp.dao..*&#65289;"&#65289;
  public void inDataAccessLayer&#65288;&#65289; {}

  <i class="lineannotation"><span class="lineannotation">/**
   * A business service is the execution of any method defined on a service
   * interface. This definition assumes that interfaces are placed in the
   * "service" package, and that implementation types are in sub-packages.
   * 
   * If you group service interfaces by functional area &#65288;for example, 
   * in packages <tt class="literal">com.xyz.someapp.abc.service</tt> and <tt class="literal">com.xyz.def.service</tt>&#65289; then
   * the pointcut expression "<tt class="literal">execution&#65288;* com.xyz.someapp..service.*.*&#65288;..&#65289;&#65289;</tt>"
   * could be used instead.
   *
   * Alternatively, you can write the expression using the '<tt class="literal">bean</tt>'
   * PCD, like so "<tt class="literal">bean&#65288;*Service&#65289;</tt>". &#65288;This assumes that you have
   * named your Spring service beans in a consistent fashion.&#65289;
   */</span></i>
  @Pointcut&#65288;"execution&#65288;* com.xyz.someapp.service.*.*&#65288;..&#65289;&#65289;"&#65289;
  public void businessService&#65288;&#65289; {}
  
  <i class="lineannotation"><span class="lineannotation">/**
   * A data access operation is the execution of any method defined on a 
   * dao interface. This definition assumes that interfaces are placed in the
   * "<tt class="literal">dao</tt>" package, and that implementation types are in sub-packages.
   */</span></i>
  @Pointcut&#65288;"execution&#65288;* com.xyz.someapp.dao.*.*&#65288;..&#65289;&#65289;"&#65289;
  public void dataAccessOperation&#65288;&#65289; {}

}</pre><p>&#31034;&#20363;&#20013;&#30340;&#20999;&#20837;&#28857;&#23450;&#20041;&#20102;&#19968;&#20010;&#20320;&#21487;&#20197;&#22312;&#20219;&#20309;&#38656;&#35201;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#30340;&#22320;&#26041;&#21487;&#24341;&#29992;&#30340;&#20999;&#38754;&#12290;&#27604;&#22914;&#65292;&#20026;&#20102;&#20351;service&#23618;&#20107;&#21153;&#21270;&#65292;&#20320;&#21487;&#20197;&#20889;&#25104;&#65306;
				</p><pre class="programlisting">&lt;aop:config&gt;
  &lt;aop:advisor 
      pointcut="com.xyz.someapp.SystemArchitecture.businessService&#65288;&#65289;"
      advice-ref="tx-advice"/&gt;
&lt;/aop:config&gt;

&lt;tx:advice id="tx-advice"&gt;
  &lt;tx:attributes&gt;
    &lt;tx:method name="*" propagation="REQUIRED"/&gt;
  &lt;/tx:attributes&gt;
&lt;/tx:advice&gt;</pre><p>&#25105;&#20204;&#23558;&#22312;<a href="aop.html#aop-schema" title="6.3.&nbsp;&#22522;&#20110;Schema&#30340;AOP&#25903;&#25345;">Section&nbsp;6.3, &#8220;&#22522;&#20110;Schema&#30340;AOP&#25903;&#25345;&#8221;</a>&#20013;&#35752;&#35770; <tt class="literal">&lt;aop:config&gt;</tt>&#21644;<tt class="literal">&lt;aop:advisor&gt;</tt>&#26631;&#31614;&#12290;&#22312;<a href="transaction.html" title="Chapter&nbsp;9.&nbsp;&#20107;&#21153;&#31649;&#29702;">Chapter&nbsp;9, <i>&#20107;&#21153;&#31649;&#29702;</i></a>&#20013;&#35752;&#35770;&#20107;&#21153;&#26631;&#31614;&#12290;
				</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-pointcuts-examples"></a>6.2.3.4.&nbsp;&#31034;&#20363;</h4></div></div><div></div></div><p>Spring AOP &#29992;&#25143;&#21487;&#33021;&#20250;&#32463;&#24120;&#20351;&#29992; <tt class="literal">execution</tt>&#20999;&#20837;&#28857;&#25351;&#31034;&#31526;&#12290;&#25191;&#34892;&#34920;&#36798;&#24335;&#30340;&#26684;&#24335;&#22914;&#19979;&#65306;</p><pre class="programlisting">execution&#65288;modifiers-pattern? ret-type-pattern declaring-type-pattern? name-pattern&#65288;param-pattern&#65289;
          throws-pattern?&#65289;</pre><p>&#38500;&#20102;&#36820;&#22238;&#31867;&#22411;&#27169;&#24335;&#65288;&#19978;&#38754;&#20195;&#30721;&#29255;&#26029;&#20013;&#30340;ret-type-pattern&#65289;&#65292;&#21517;&#23383;&#27169;&#24335;&#21644;&#21442;&#25968;&#27169;&#24335;&#20197;&#22806;&#65292;
      	 &#25152;&#26377;&#30340;&#37096;&#20998;&#37117;&#26159;&#21487;&#36873;&#30340;&#12290;&#36820;&#22238;&#31867;&#22411;&#27169;&#24335;&#20915;&#23450;&#20102;&#26041;&#27861;&#30340;&#36820;&#22238;&#31867;&#22411;&#24517;&#39035;&#20381;&#27425;&#21305;&#37197;&#19968;&#20010;&#36830;&#25509;&#28857;&#12290;
      	 &#20320;&#20250;&#20351;&#29992;&#30340;&#26368;&#39057;&#32321;&#30340;&#36820;&#22238;&#31867;&#22411;&#27169;&#24335;&#26159;<tt class="literal">*</tt>&#65292;&#23427;&#20195;&#34920;&#20102;&#21305;&#37197;&#20219;&#24847;&#30340;&#36820;&#22238;&#31867;&#22411;&#12290;
      	 &#19968;&#20010;&#20840;&#38480;&#23450;&#30340;&#31867;&#22411;&#21517;&#23558;&#21482;&#20250;&#21305;&#37197;&#36820;&#22238;&#32473;&#23450;&#31867;&#22411;&#30340;&#26041;&#27861;&#12290;&#21517;&#23383;&#27169;&#24335;&#21305;&#37197;&#30340;&#26159;&#26041;&#27861;&#21517;&#12290;
      	 &#20320;&#21487;&#20197;&#20351;&#29992;<tt class="literal">*</tt>&#36890;&#37197;&#31526;&#20316;&#20026;&#25152;&#26377;&#25110;&#32773;&#37096;&#20998;&#21629;&#21517;&#27169;&#24335;&#12290;
      	 &#21442;&#25968;&#27169;&#24335;&#31245;&#24494;&#26377;&#28857;&#22797;&#26434;&#65306;<tt class="literal">()</tt>&#21305;&#37197;&#20102;&#19968;&#20010;&#19981;&#25509;&#21463;&#20219;&#20309;&#21442;&#25968;&#30340;&#26041;&#27861;&#65292;
      	 &#32780;<tt class="literal">(..)</tt>&#21305;&#37197;&#20102;&#19968;&#20010;&#25509;&#21463;&#20219;&#24847;&#25968;&#37327;&#21442;&#25968;&#30340;&#26041;&#27861;&#65288;&#38646;&#25110;&#32773;&#26356;&#22810;&#65289;&#12290;
      	 &#27169;&#24335;<tt class="literal">(*)</tt>&#21305;&#37197;&#20102;&#19968;&#20010;&#25509;&#21463;&#19968;&#20010;&#20219;&#20309;&#31867;&#22411;&#30340;&#21442;&#25968;&#30340;&#26041;&#27861;&#12290;
      	 &#27169;&#24335;<tt class="literal">(*,String)</tt>&#21305;&#37197;&#20102;&#19968;&#20010;&#25509;&#21463;&#20004;&#20010;&#21442;&#25968;&#30340;&#26041;&#27861;&#65292;&#31532;&#19968;&#20010;&#21487;&#20197;&#26159;&#20219;&#24847;&#31867;&#22411;&#65292;
      	 &#31532;&#20108;&#20010;&#21017;&#24517;&#39035;&#26159;String&#31867;&#22411;&#12290;&#26356;&#22810;&#30340;&#20449;&#24687;&#35831;&#21442;&#38405;AspectJ&#32534;&#31243;&#25351;&#21335;&#20013;<a href="http://www.eclipse.org/aspectj/doc/released/progguide/semantics-pointcuts.html" target="_top">
      	 &#35821;&#35328;&#35821;&#20041;</a>&#30340;&#37096;&#20998;&#12290;
      	 </p><p>&#19979;&#38754;&#32473;&#20986;&#19968;&#20123;&#36890;&#29992;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#30340;&#20363;&#23376;&#12290;</p><div class="itemizedlist"><ul type="disc"><li><p>&#20219;&#24847;&#20844;&#20849;&#26041;&#27861;&#30340;&#25191;&#34892;&#65306;</p><pre class="programlisting">execution&#65288;public * *&#65288;..&#65289;&#65289;</pre></li><li><p>&#20219;&#20309;&#19968;&#20010;&#21517;&#23383;&#20197;&#8220;set&#8221;&#24320;&#22987;&#30340;&#26041;&#27861;&#30340;&#25191;&#34892;&#65306;</p><pre class="programlisting">execution&#65288;* set*&#65288;..&#65289;&#65289;</pre></li><li><p><tt class="interfacename">AccountService</tt>&#25509;&#21475;&#23450;&#20041;&#30340;&#20219;&#24847;&#26041;&#27861;&#30340;&#25191;&#34892;&#65306;</p><pre class="programlisting">execution&#65288;* com.xyz.service.AccountService.*&#65288;..&#65289;&#65289;</pre></li><li><p>&#22312;service&#21253;&#20013;&#23450;&#20041;&#30340;&#20219;&#24847;&#26041;&#27861;&#30340;&#25191;&#34892;&#65306;</p><pre class="programlisting">execution&#65288;* com.xyz.service.*.*&#65288;..&#65289;&#65289;</pre></li><li><p>&#22312;service&#21253;&#25110;&#20854;&#23376;&#21253;&#20013;&#23450;&#20041;&#30340;&#20219;&#24847;&#26041;&#27861;&#30340;&#25191;&#34892;&#65306;</p><pre class="programlisting">execution&#65288;* com.xyz.service..*.*&#65288;..&#65289;&#65289;</pre></li><li><p>&#22312;service&#21253;&#20013;&#30340;&#20219;&#24847;&#36830;&#25509;&#28857;&#65288;&#22312;Spring AOP&#20013;&#21482;&#26159;&#26041;&#27861;&#25191;&#34892;&#65289;&#65306;</p><pre class="programlisting">within&#65288;com.xyz.service.*&#65289;</pre></li><li><p>&#22312;service&#21253;&#25110;&#20854;&#23376;&#21253;&#20013;&#30340;&#20219;&#24847;&#36830;&#25509;&#28857;&#65288;&#22312;Spring AOP&#20013;&#21482;&#26159;&#26041;&#27861;&#25191;&#34892;&#65289;&#65306;</p><pre class="programlisting">within&#65288;com.xyz.service..*&#65289;</pre></li><li><p>&#23454;&#29616;&#20102;<tt class="interfacename">AccountService</tt>&#25509;&#21475;&#30340;&#20195;&#29702;&#23545;&#35937;&#30340;&#20219;&#24847;&#36830;&#25509;&#28857;
            &#65288;&#22312;Spring AOP&#20013;&#21482;&#26159;&#26041;&#27861;&#25191;&#34892;&#65289;&#65306;</p><pre class="programlisting">this&#65288;com.xyz.service.AccountService&#65289;</pre><i><span class="remark"><p>'this'&#22312;&#32465;&#23450;&#34920;&#21333;&#20013;&#26356;&#21152;&#24120;&#29992;&#65306;- 
            &#35831;&#21442;&#35265;&#21518;&#38754;&#30340;&#36890;&#30693;&#19968;&#33410;&#20013;&#20102;&#35299;&#22914;&#20309;&#20351;&#24471;&#20195;&#29702;&#23545;&#35937;&#22312;&#36890;&#30693;&#20307;&#20869;&#21487;&#29992;&#12290;</p></span></i></li><li><p>&#23454;&#29616;<tt class="interfacename">AccountService</tt>&#25509;&#21475;&#30340;&#30446;&#26631;&#23545;&#35937;&#30340;&#20219;&#24847;&#36830;&#25509;&#28857;
            &#65288;&#22312;Spring AOP&#20013;&#21482;&#26159;&#26041;&#27861;&#25191;&#34892;&#65289;&#65306;</p><pre class="programlisting">target&#65288;com.xyz.service.AccountService&#65289;</pre><i><span class="remark"><p>'target'&#22312;&#32465;&#23450;&#34920;&#21333;&#20013;&#26356;&#21152;&#24120;&#29992;&#65306;- 
            &#35831;&#21442;&#35265;&#21518;&#38754;&#30340;&#36890;&#30693;&#19968;&#33410;&#20013;&#20102;&#35299;&#22914;&#20309;&#20351;&#24471;&#30446;&#26631;&#23545;&#35937;&#22312;&#36890;&#30693;&#20307;&#20869;&#21487;&#29992;&#12290;</p></span></i></li><li><p>&#20219;&#20309;&#19968;&#20010;&#21482;&#25509;&#21463;&#19968;&#20010;&#21442;&#25968;&#65292;&#24182;&#19988;&#36816;&#34892;&#26102;&#25152;&#20256;&#20837;&#30340;&#21442;&#25968;&#26159;<tt class="interfacename">Serializable</tt>
            &#25509;&#21475;&#30340;&#36830;&#25509;&#28857;&#65288;&#22312;Spring AOP&#20013;&#21482;&#26159;&#26041;&#27861;&#25191;&#34892;&#65289;</p><pre class="programlisting">args&#65288;java.io.Serializable&#65289;</pre><i><span class="remark">'args'&#22312;&#32465;&#23450;&#34920;&#21333;&#20013;&#26356;&#21152;&#24120;&#29992;&#65306;- 
            &#35831;&#21442;&#35265;&#21518;&#38754;&#30340;&#36890;&#30693;&#19968;&#33410;&#20013;&#20102;&#35299;&#22914;&#20309;&#20351;&#24471;&#26041;&#27861;&#21442;&#25968;&#22312;&#36890;&#30693;&#20307;&#20869;&#21487;&#29992;&#12290;</span></i><p>&#35831;&#27880;&#24847;&#22312;&#20363;&#23376;&#20013;&#32473;&#20986;&#30340;&#20999;&#20837;&#28857;&#19981;&#21516;&#20110; <tt class="literal">execution(* *(java.io.Serializable))</tt>&#65306;
			args&#29256;&#26412;&#21482;&#26377;&#22312;&#21160;&#24577;&#36816;&#34892;&#26102;&#20505;&#20256;&#20837;&#21442;&#25968;&#26159;Serializable&#26102;&#25165;&#21305;&#37197;&#65292;&#32780;execution&#29256;&#26412;&#22312;&#26041;&#27861;&#31614;&#21517;&#20013;&#22768;&#26126;&#21482;&#26377;&#19968;&#20010;
			<tt class="interfacename">Serializable</tt>&#31867;&#22411;&#30340;&#21442;&#25968;&#26102;&#20505;&#21305;&#37197;&#12290;</p></li><li><p>&#30446;&#26631;&#23545;&#35937;&#20013;&#26377;&#19968;&#20010; <tt class="interfacename">@Transactional</tt> &#27880;&#35299;&#30340;&#20219;&#24847;&#36830;&#25509;&#28857;
            &#65288;&#22312;Spring AOP&#20013;&#21482;&#26159;&#26041;&#27861;&#25191;&#34892;&#65289;</p><pre class="programlisting">@target&#65288;org.springframework.transaction.annotation.Transactional&#65289;</pre><i><span class="remark"><p>'@target'&#22312;&#32465;&#23450;&#34920;&#21333;&#20013;&#26356;&#21152;&#24120;&#29992;&#65306;- 
            &#35831;&#21442;&#35265;&#21518;&#38754;&#30340;&#36890;&#30693;&#19968;&#33410;&#20013;&#20102;&#35299;&#22914;&#20309;&#20351;&#24471;&#27880;&#35299;&#23545;&#35937;&#22312;&#36890;&#30693;&#20307;&#20869;&#21487;&#29992;&#12290;</p></span></i></li><li><p>&#20219;&#20309;&#19968;&#20010;&#30446;&#26631;&#23545;&#35937;&#22768;&#26126;&#30340;&#31867;&#22411;&#26377;&#19968;&#20010; <tt class="interfacename">@Transactional</tt> &#27880;&#35299;&#30340;&#36830;&#25509;&#28857;
            &#65288;&#22312;Spring AOP&#20013;&#21482;&#26159;&#26041;&#27861;&#25191;&#34892;&#65289;&#65306;</p><pre class="programlisting">@within&#65288;org.springframework.transaction.annotation.Transactional&#65289;</pre><i><span class="remark"><p>'@within'&#22312;&#32465;&#23450;&#34920;&#21333;&#20013;&#26356;&#21152;&#24120;&#29992;&#65306;- 
            &#35831;&#21442;&#35265;&#21518;&#38754;&#30340;&#36890;&#30693;&#19968;&#33410;&#20013;&#20102;&#35299;&#22914;&#20309;&#20351;&#24471;&#27880;&#35299;&#23545;&#35937;&#22312;&#36890;&#30693;&#20307;&#20869;&#21487;&#29992;&#12290;</p></span></i></li><li><p>&#20219;&#20309;&#19968;&#20010;&#25191;&#34892;&#30340;&#26041;&#27861;&#26377;&#19968;&#20010; <tt class="interfacename">@Transactional</tt> &#27880;&#35299;&#30340;&#36830;&#25509;&#28857;
            &#65288;&#22312;Spring AOP&#20013;&#21482;&#26159;&#26041;&#27861;&#25191;&#34892;&#65289;</p><pre class="programlisting">@annotation&#65288;org.springframework.transaction.annotation.Transactional&#65289;</pre><i><span class="remark"><p>'@annotation'&#22312;&#32465;&#23450;&#34920;&#21333;&#20013;&#26356;&#21152;&#24120;&#29992;&#65306;- 
            &#35831;&#21442;&#35265;&#21518;&#38754;&#30340;&#36890;&#30693;&#19968;&#33410;&#20013;&#20102;&#35299;&#22914;&#20309;&#20351;&#24471;&#27880;&#35299;&#23545;&#35937;&#22312;&#36890;&#30693;&#20307;&#20869;&#21487;&#29992;&#12290;</p></span></i></li><li><p>&#20219;&#20309;&#19968;&#20010;&#21482;&#25509;&#21463;&#19968;&#20010;&#21442;&#25968;&#65292;&#24182;&#19988;&#36816;&#34892;&#26102;&#25152;&#20256;&#20837;&#30340;&#21442;&#25968;&#31867;&#22411;&#20855;&#26377;<tt class="interfacename">@Classified</tt>
            &#27880;&#35299;&#30340;&#36830;&#25509;&#28857;&#65288;&#22312;Spring AOP&#20013;&#21482;&#26159;&#26041;&#27861;&#25191;&#34892;&#65289;</p><pre class="programlisting">@args&#65288;com.xyz.security.Classified&#65289;</pre><i><span class="remark"><p>'@args'&#22312;&#32465;&#23450;&#34920;&#21333;&#20013;&#26356;&#21152;&#24120;&#29992;&#65306;- 
            &#35831;&#21442;&#35265;&#21518;&#38754;&#30340;&#36890;&#30693;&#19968;&#33410;&#20013;&#20102;&#35299;&#22914;&#20309;&#20351;&#24471;&#27880;&#35299;&#23545;&#35937;&#22312;&#36890;&#30693;&#20307;&#20869;&#21487;&#29992;&#12290;</p></span></i></li><li><p>&#20219;&#20309;&#19968;&#20010;&#22312;&#21517;&#20026;'<tt class="literal">tradeService</tt>'&#30340;Spring bean&#20043;&#19978;&#30340;&#36830;&#25509;&#28857;
            &#65288;&#22312;Spring AOP&#20013;&#21482;&#26159;&#26041;&#27861;&#25191;&#34892;&#65289;&#65306;</p><pre class="programlisting">bean&#65288;tradeService&#65289;</pre></li><li><p>&#20219;&#20309;&#19968;&#20010;&#22312;&#21517;&#23383;&#21305;&#37197;&#36890;&#37197;&#31526;&#34920;&#36798;&#24335;'<tt class="literal">*Service</tt>'&#30340;Spring bean&#20043;&#19978;&#30340;&#36830;&#25509;&#28857;
            &#65288;&#22312;Spring AOP&#20013;&#21482;&#26159;&#26041;&#27861;&#25191;&#34892;&#65289;&#65306;</p><pre class="programlisting">bean&#65288;*Service&#65289;</pre></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-advice"></a>6.2.4.&nbsp;&#22768;&#26126;&#36890;&#30693;</h3></div></div><div></div></div><p>&#36890;&#30693;&#26159;&#36319;&#19968;&#20010;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#20851;&#32852;&#36215;&#26469;&#30340;&#65292;&#24182;&#19988;&#22312;&#20999;&#20837;&#28857;&#21305;&#37197;&#30340;&#26041;&#27861;&#25191;&#34892;&#20043;&#21069;&#25110;&#32773;&#20043;&#21518;&#25110;&#32773;&#21069;&#21518;&#36816;&#34892;&#12290;
			&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#21487;&#33021;&#26159;&#25351;&#21521;&#24050;&#21629;&#21517;&#30340;&#20999;&#20837;&#28857;&#30340;&#31616;&#21333;&#24341;&#29992;&#25110;&#32773;&#26159;&#19968;&#20010;&#24050;&#32463;&#22768;&#26126;&#36807;&#30340;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#12290;
	   	</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-advice-before"></a>6.2.4.1.&nbsp;&#21069;&#32622;&#36890;&#30693;</h4></div></div><div></div></div><p>&#19968;&#20010;&#20999;&#38754;&#37324;&#20351;&#29992; <tt class="interfacename">@Before</tt> &#27880;&#35299;&#22768;&#26126;&#21069;&#32622;&#36890;&#30693;&#65306;</p><pre class="programlisting">import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Before;

@Aspect
public class BeforeExample {

  @Before&#65288;"com.xyz.myapp.SystemArchitecture.dataAccessOperation&#65288;&#65289;"&#65289;
  public void doAccessCheck&#65288;&#65289; {
    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
  }

}</pre><p>&#22914;&#26524;&#20351;&#29992;&#19968;&#20010;in-place &#30340;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#65292;&#25105;&#20204;&#21487;&#20197;&#25226;&#19978;&#38754;&#30340;&#20363;&#23376;&#25442;&#20010;&#20889;&#27861;&#65306;</p><pre class="programlisting">import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Before;

@Aspect
public class BeforeExample {

  @Before&#65288;"execution&#65288;* com.xyz.myapp.dao.*.*&#65288;..&#65289;&#65289;"&#65289;
  public void doAccessCheck&#65288;&#65289; {
    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
  }

}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-advice-after-returning"></a>6.2.4.2.&nbsp;&#21518;&#32622;&#36890;&#30693;&#65288;After returning advice&#65289;</h4></div></div><div></div></div><p>&#36820;&#22238;&#21518;&#36890;&#30693;&#36890;&#24120;&#22312;&#19968;&#20010;&#21305;&#37197;&#30340;&#26041;&#27861;&#36820;&#22238;&#30340;&#26102;&#20505;&#25191;&#34892;&#12290;&#20351;&#29992; <tt class="interfacename">@AfterReturning</tt>
        &#27880;&#35299;&#26469;&#22768;&#26126;&#65306;</p><pre class="programlisting">import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.AfterReturning;

@Aspect
public class AfterReturningExample {

  @AfterReturning&#65288;"com.xyz.myapp.SystemArchitecture.dataAccessOperation&#65288;&#65289;"&#65289;
  public void doAccessCheck&#65288;&#65289; {
    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
  }

}</pre><i><span class="remark">&#35828;&#26126;&#65306;&#20320;&#21487;&#20197;&#22312;&#30456;&#21516;&#30340;&#20999;&#38754;&#37324;&#23450;&#20041;&#22810;&#20010;&#36890;&#30693;&#65292;&#25110;&#32773;&#20854;&#20182;&#25104;&#21592;&#12290;
        &#25105;&#20204;&#21482;&#26159;&#22312;&#23637;&#31034;&#22914;&#20309;&#23450;&#20041;&#19968;&#20010;&#31616;&#21333;&#30340;&#36890;&#30693;&#12290;&#36825;&#20123;&#20363;&#23376;&#20027;&#35201;&#30340;&#20391;&#37325;&#28857;&#26159;&#27491;&#22312;&#35752;&#35770;&#30340;&#38382;&#39064;&#12290;
				</span></i><p>&#26377;&#26102;&#20505;&#20320;&#38656;&#35201;&#22312;&#36890;&#30693;&#20307;&#20869;&#24471;&#21040;&#36820;&#22238;&#30340;&#20540;&#12290;&#20320;&#21487;&#20197;&#20351;&#29992;<tt class="interfacename">@AfterReturning</tt>
				&#25509;&#21475;&#30340;&#24418;&#24335;&#26469;&#32465;&#23450;&#36820;&#22238;&#20540;&#65306;</p><pre class="programlisting">import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.AfterReturning;

@Aspect
public class AfterReturningExample {

  @AfterReturning&#65288;
    pointcut="com.xyz.myapp.SystemArchitecture.dataAccessOperation&#65288;&#65289;",
    returning="retVal"&#65289;
  public void doAccessCheck&#65288;Object retVal&#65289; {
    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
  }
  
}</pre><p>&#22312; <tt class="literal">returning</tt>&#23646;&#24615;&#20013;&#20351;&#29992;&#30340;&#21517;&#23383;&#24517;&#39035;&#23545;&#24212;&#20110;&#36890;&#30693;&#26041;&#27861;&#20869;&#30340;&#19968;&#20010;&#21442;&#25968;&#21517;&#12290;
				&#24403;&#19968;&#20010;&#26041;&#27861;&#25191;&#34892;&#36820;&#22238;&#21518;&#65292;&#36820;&#22238;&#20540;&#20316;&#20026;&#30456;&#24212;&#30340;&#21442;&#25968;&#20540;&#20256;&#20837;&#36890;&#30693;&#26041;&#27861;&#12290;
				&#19968;&#20010;<tt class="literal">returning</tt>&#23376;&#21477;&#20063;&#38480;&#21046;&#20102;&#21482;&#33021;&#21305;&#37197;&#21040;&#36820;&#22238;&#25351;&#23450;&#31867;&#22411;&#20540;&#30340;&#26041;&#27861;&#12290;
				&#65288;&#22312;&#26412;&#20363;&#23376;&#20013;&#65292;&#36820;&#22238;&#20540;&#26159;<tt class="classname">Object</tt>&#31867;&#65292;&#20063;&#23601;&#26159;&#35828;&#36820;&#22238;&#20219;&#24847;&#31867;&#22411;&#37117;&#20250;&#21305;&#37197;&#65289;
				</p><p>&#35831;&#27880;&#24847;&#24403;&#20351;&#29992;&#21518;&#32622;&#36890;&#30693;&#26102;<span class="emphasis"><em>&#19981;</em></span>&#20801;&#35768;&#36820;&#22238;&#19968;&#20010;&#23436;&#20840;&#19981;&#21516;&#30340;&#24341;&#29992;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-advice-after-throwing"></a>6.2.4.3.&nbsp;&#24322;&#24120;&#36890;&#30693;&#65288;After throwing advice&#65289;</h4></div></div><div></div></div><p>&#25243;&#20986;&#24322;&#24120;&#36890;&#30693;&#22312;&#19968;&#20010;&#26041;&#27861;&#25243;&#20986;&#24322;&#24120;&#21518;&#25191;&#34892;&#12290;&#20351;&#29992;<tt class="interfacename">@AfterThrowing</tt>&#27880;&#35299;&#26469;&#22768;&#26126;&#65306;</p><pre class="programlisting">import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.AfterThrowing;

@Aspect
public class AfterThrowingExample {

  @AfterThrowing&#65288;"com.xyz.myapp.SystemArchitecture.dataAccessOperation&#65288;&#65289;"&#65289;
  public void doRecoveryActions&#65288;&#65289; {
    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
  }

}</pre><p>&#20320;&#36890;&#24120;&#20250;&#24819;&#35201;&#38480;&#21046;&#36890;&#30693;&#21482;&#22312;&#26576;&#31181;&#29305;&#27530;&#30340;&#24322;&#24120;&#34987;&#25243;&#20986;&#30340;&#26102;&#20505;&#21305;&#37197;&#65292;&#20320;&#36824;&#24076;&#26395;&#21487;&#20197;&#22312;&#36890;&#30693;&#20307;&#20869;&#24471;&#21040;&#34987;&#25243;&#20986;&#30340;&#24322;&#24120;&#12290;
				&#20351;&#29992;<tt class="literal">throwing</tt>&#23646;&#24615;&#19981;&#20165;&#21487;&#20197;&#38480;&#21046;&#21305;&#37197;&#30340;&#24322;&#24120;&#31867;&#22411;&#65288;&#22914;&#26524;&#20320;&#19981;&#24819;&#38480;&#21046;&#65292;&#35831;&#20351;&#29992;
				<tt class="interfacename">Throwable</tt>&#20316;&#20026;&#24322;&#24120;&#31867;&#22411;&#65289;&#65292;&#36824;&#21487;&#20197;&#23558;&#25243;&#20986;&#30340;&#24322;&#24120;&#32465;&#23450;&#21040;&#36890;&#30693;&#30340;&#19968;&#20010;&#21442;&#25968;&#19978;&#12290;
</p><pre class="programlisting">import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.AfterThrowing;

@Aspect
public class AfterThrowingExample {

  @AfterThrowing&#65288;
    pointcut="com.xyz.myapp.SystemArchitecture.dataAccessOperation&#65288;&#65289;",
    throwing="ex"&#65289;
  public void doRecoveryActions&#65288;DataAccessException ex&#65289; {
    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
  }

}</pre><p>&#22312;<tt class="literal">throwing</tt>&#23646;&#24615;&#20013;&#20351;&#29992;&#30340;&#21517;&#23383;&#24517;&#39035;&#19982;&#36890;&#30693;&#26041;&#27861;&#20869;&#30340;&#19968;&#20010;&#21442;&#25968;&#23545;&#24212;&#12290;
				&#24403;&#19968;&#20010;&#26041;&#27861;&#22240;&#25243;&#20986;&#19968;&#20010;&#24322;&#24120;&#32780;&#20013;&#27490;&#21518;&#65292;&#36825;&#20010;&#24322;&#24120;&#23558;&#20250;&#20316;&#20026;&#37027;&#20010;&#23545;&#24212;&#30340;&#21442;&#25968;&#36865;&#33267;&#36890;&#30693;&#26041;&#27861;&#12290;
				<tt class="literal">throwing</tt> &#23376;&#21477;&#20063;&#38480;&#21046;&#20102;&#21482;&#33021;&#21305;&#37197;&#21040;&#25243;&#20986;&#25351;&#23450;&#24322;&#24120;&#31867;&#22411;&#30340;&#26041;&#27861;
				&#65288;&#19978;&#38754;&#30340;&#31034;&#20363;&#20026;<tt class="classname">DataAccessException</tt>&#65289;&#12290;
				</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-advice-after-finally"></a>6.2.4.4.&nbsp;&#26368;&#32456;&#36890;&#30693;&#65288;After (finally) advice&#65289;</h4></div></div><div></div></div><p>&#19981;&#35770;&#19968;&#20010;&#26041;&#27861;&#26159;&#22914;&#20309;&#32467;&#26463;&#30340;&#65292;&#26368;&#32456;&#36890;&#30693;&#37117;&#20250;&#36816;&#34892;&#12290;&#20351;&#29992;<tt class="interfacename">@After</tt>
        &#27880;&#35299;&#26469;&#22768;&#26126;&#12290;&#26368;&#32456;&#36890;&#30693;&#24517;&#39035;&#20934;&#22791;&#22788;&#29702;&#27491;&#24120;&#36820;&#22238;&#21644;&#24322;&#24120;&#36820;&#22238;&#20004;&#31181;&#24773;&#20917;&#12290;&#36890;&#24120;&#29992;&#23427;&#26469;&#37322;&#25918;&#36164;&#28304;&#12290;</p><pre class="programlisting">import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.After;

@Aspect
public class AfterFinallyExample {

  @After&#65288;"com.xyz.myapp.SystemArchitecture.dataAccessOperation&#65288;&#65289;"&#65289;
  public void doReleaseLock&#65288;&#65289; {
    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
  }

}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-ataspectj-around-advice"></a>6.2.4.5.&nbsp;&#29615;&#32469;&#36890;&#30693;</h4></div></div><div></div></div><p>&#26368;&#21518;&#19968;&#31181;&#36890;&#30693;&#26159;&#29615;&#32469;&#36890;&#30693;&#12290;&#29615;&#32469;&#36890;&#30693;&#22312;&#19968;&#20010;&#26041;&#27861;&#25191;&#34892;&#20043;&#21069;&#21644;&#20043;&#21518;&#25191;&#34892;&#12290;&#23427;&#20351;&#24471;&#36890;&#30693;&#26377;&#26426;&#20250;
        &#22312;&#19968;&#20010;&#26041;&#27861;&#25191;&#34892;&#20043;&#21069;&#21644;&#25191;&#34892;&#20043;&#21518;&#36816;&#34892;&#12290;&#32780;&#19988;&#23427;&#21487;&#20197;&#20915;&#23450;&#36825;&#20010;&#26041;&#27861;&#22312;&#20160;&#20040;&#26102;&#20505;&#25191;&#34892;&#65292;&#22914;&#20309;&#25191;&#34892;&#65292;&#29978;&#33267;&#26159;&#21542;&#25191;&#34892;&#12290;
				&#29615;&#32469;&#36890;&#30693;&#32463;&#24120;&#22312;&#26576;&#32447;&#31243;&#23433;&#20840;&#30340;&#29615;&#22659;&#19979;&#65292;&#20320;&#38656;&#35201;&#22312;&#19968;&#20010;&#26041;&#27861;&#25191;&#34892;&#20043;&#21069;&#21644;&#20043;&#21518;&#20849;&#20139;&#26576;&#31181;&#29366;&#24577;&#30340;&#26102;&#20505;&#20351;&#29992;&#12290;
				&#35831;&#23613;&#37327;&#20351;&#29992;&#26368;&#31616;&#21333;&#30340;&#28385;&#36275;&#20320;&#38656;&#27714;&#30340;&#36890;&#30693;&#12290;&#65288;&#27604;&#22914;&#22914;&#26524;&#31616;&#21333;&#30340;&#21069;&#32622;&#36890;&#30693;&#20063;&#21487;&#20197;&#36866;&#29992;&#30340;&#24773;&#20917;&#19979;&#19981;&#35201;&#20351;&#29992;&#29615;&#32469;&#36890;&#30693;&#65289;&#12290;
				</p><p>&#29615;&#32469;&#36890;&#30693;&#20351;&#29992;<tt class="interfacename">@Around</tt>&#27880;&#35299;&#26469;&#22768;&#26126;&#12290;&#36890;&#30693;&#30340;&#31532;&#19968;&#20010;&#21442;&#25968;&#24517;&#39035;&#26159;
				<tt class="interfacename">ProceedingJoinPoint</tt>&#31867;&#22411;&#12290;&#22312;&#36890;&#30693;&#20307;&#20869;&#65292;&#35843;&#29992;
				<tt class="interfacename">ProceedingJoinPoint</tt>&#30340;<tt class="literal">proceed()</tt>&#26041;&#27861;&#20250;&#23548;&#33268;
				&#21518;&#21488;&#30340;&#36830;&#25509;&#28857;&#26041;&#27861;&#25191;&#34892;&#12290;<tt class="literal">proceed</tt> &#26041;&#27861;&#20063;&#21487;&#33021;&#20250;&#34987;&#35843;&#29992;&#24182;&#19988;&#20256;&#20837;&#19968;&#20010;
				<tt class="classname">Object[]</tt>&#23545;&#35937;-&#35813;&#25968;&#32452;&#20013;&#30340;&#20540;&#23558;&#34987;&#20316;&#20026;&#26041;&#27861;&#25191;&#34892;&#26102;&#30340;&#21442;&#25968;&#12290;</p><i><span class="remark">
				&#24403;&#20256;&#20837;&#19968;&#20010;<tt class="classname">Object[]</tt>&#23545;&#35937;&#30340;&#26102;&#20505;&#65292;&#22788;&#29702;&#30340;&#26041;&#27861;&#19982;&#36890;&#36807;AspectJ&#32534;&#35793;&#22120;&#22788;&#29702;&#29615;&#32469;&#36890;&#30693;&#30053;&#26377;&#19981;&#21516;&#12290;
			  &#23545;&#20110;&#20351;&#29992;&#20256;&#32479;AspectJ&#35821;&#35328;&#20889;&#30340;&#29615;&#32469;&#36890;&#30693;&#26469;&#35828;&#65292;&#20256;&#20837;&#21442;&#25968;&#30340;&#25968;&#37327;&#24517;&#39035;&#21644;&#20256;&#36882;&#32473;&#29615;&#32469;&#36890;&#30693;&#30340;&#21442;&#25968;&#25968;&#37327;&#21305;&#37197;
			 &#65288;&#19981;&#26159;&#21518;&#21488;&#30340;&#36830;&#25509;&#28857;&#25509;&#21463;&#30340;&#21442;&#25968;&#25968;&#37327;&#65289;&#65292;&#24182;&#19988;&#29305;&#23450;&#39034;&#24207;&#30340;&#20256;&#20837;&#21442;&#25968;&#20195;&#26367;&#20102;&#23558;&#35201;&#32465;&#23450;&#32473;&#36830;&#25509;&#28857;&#30340;&#21407;&#22987;&#20540;
		   &#65288;&#22914;&#26524;&#20320;&#30475;&#19981;&#25026;&#19981;&#29992;&#25285;&#24515;&#65289;&#12290;Spring&#37319;&#29992;&#30340;&#26041;&#27861;&#26356;&#21152;&#31616;&#21333;&#24182;&#19988;&#33021;&#26356;&#22909;&#21305;&#37197;&#23427;&#22522;&#20110;&#20195;&#29702;&#65288;proxy-based&#65289;&#30340;&#25191;&#34892;&#35821;&#27861;&#65292;
				&#22914;&#26524;&#20320;&#20351;&#29992;AspectJ&#30340;&#32534;&#35793;&#22120;&#21644;&#32534;&#32455;&#22120;&#26469;&#32534;&#35793;&#20026;Spring&#32780;&#20889;&#30340;@AspectJ&#20999;&#38754;&#21644;&#22788;&#29702;&#21442;&#25968;&#65292;&#20320;&#21482;&#38656;&#35201;&#30693;&#36947;&#36825;&#19968;&#21306;&#21035;&#21363;&#21487;&#12290;
				&#26377;&#19968;&#31181;&#26041;&#27861;&#21487;&#20197;&#35753;&#20320;&#20889;&#20986;100%&#20860;&#23481;Spring AOP&#21644;AspectJ&#30340;&#34920;&#36798;&#24335;&#65292;&#25105;&#20204;&#23558;&#20250;&#22312;&#21518;&#32493;&#30340;&#36890;&#30693;&#21442;&#25968;&#30340;&#31456;&#33410;&#20013;&#35752;&#35770;&#23427;&#12290;</span></i><pre class="programlisting">import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Around;
import org.aspectj.lang.ProceedingJoinPoint;

@Aspect
public class AroundExample {

  @Around&#65288;"com.xyz.myapp.SystemArchitecture.businessService&#65288;&#65289;"&#65289;
  public Object doBasicProfiling&#65288;ProceedingJoinPoint pjp&#65289; throws Throwable {
    // start stopwatch
    Object retVal = pjp.proceed&#65288;&#65289;;
    // stop stopwatch
    return retVal;
  }

}</pre><p>&#26041;&#27861;&#30340;&#35843;&#29992;&#32773;&#24471;&#21040;&#30340;&#36820;&#22238;&#20540;&#23601;&#26159;&#29615;&#32469;&#36890;&#30693;&#36820;&#22238;&#30340;&#20540;&#12290;
				&#20363;&#22914;&#65306;&#19968;&#20010;&#31616;&#21333;&#30340;&#32531;&#23384;&#20999;&#38754;&#65292;&#22914;&#26524;&#32531;&#23384;&#20013;&#26377;&#20540;&#65292;&#23601;&#36820;&#22238;&#35813;&#20540;&#65292;&#21542;&#21017;&#35843;&#29992;proceed()&#26041;&#27861;&#12290;
				&#35831;&#27880;&#24847;proceed&#21487;&#33021;&#22312;&#36890;&#30693;&#20307;&#20869;&#37096;&#34987;&#35843;&#29992;&#19968;&#27425;&#65292;&#35768;&#22810;&#27425;&#65292;&#25110;&#32773;&#26681;&#26412;&#19981;&#34987;&#35843;&#29992;&#65292;&#25152;&#26377;&#36825;&#20123;&#37117;&#26159;&#21512;&#27861;&#30340;&#12290;
				</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-ataspectj-advice-params"></a>6.2.4.6.&nbsp;&#36890;&#30693;&#21442;&#25968;&#65288;Advice parameters&#65289;</h4></div></div><div></div></div><p>Spring 2.0 &#25552;&#20379;&#20102;&#23436;&#25972;&#30340;&#36890;&#30693;&#31867;&#22411; - &#36825;&#24847;&#21619;&#30528;&#20320;&#21487;&#20197;&#22312;&#36890;&#30693;&#31614;&#21517;&#20013;&#22768;&#26126;&#25152;&#38656;&#30340;&#21442;&#25968;&#65292;
        &#65288;&#23601;&#20687;&#25105;&#20204;&#22312;&#21069;&#38754;&#30475;&#21040;&#30340;&#21518;&#32622;&#21644;&#24322;&#24120;&#36890;&#30693;&#19968;&#26679;&#65289;&#32780;&#19981;&#24635;&#26159;&#20351;&#29992;Object[]&#12290;
        &#25105;&#20204;&#23558;&#20250;&#30475;&#21040;&#22914;&#20309;&#20351;&#24471;&#21442;&#25968;&#21644;&#20854;&#20182;&#19978;&#19979;&#25991;&#20540;&#23545;&#36890;&#30693;&#20307;&#21487;&#29992;&#12290;
        &#39318;&#20808;&#35753;&#25105;&#20204;&#30475;&#20197;&#19979;&#22914;&#20309;&#32534;&#20889;&#26222;&#36890;&#30340;&#36890;&#30693;&#20197;&#25214;&#20986;&#27491;&#22312;&#34987;&#36890;&#30693;&#30340;&#26041;&#27861;&#12290;
				</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="aop-ataspectj-advice-params-the-joinpoint"></a>6.2.4.6.1.&nbsp;&#35775;&#38382;&#24403;&#21069;&#30340;<tt class="interfacename">&#36830;&#25509;&#28857;</tt></h5></div></div><div></div></div><p>&#20219;&#20309;&#36890;&#30693;&#26041;&#27861;&#21487;&#20197;&#23558;&#31532;&#19968;&#20010;&#21442;&#25968;&#23450;&#20041;&#20026;<tt class="interfacename">org.aspectj.lang.JoinPoint</tt>&#31867;&#22411;
					&#65288;&#29615;&#32469;&#36890;&#30693;&#38656;&#35201;&#23450;&#20041;&#31532;&#19968;&#20010;&#21442;&#25968;&#20026;<tt class="interfacename">ProceedingJoinPoint</tt>&#31867;&#22411;&#65292;
					&#23427;&#26159; <tt class="interfacename">JoinPoint</tt> &#30340;&#19968;&#20010;&#23376;&#31867;&#65289;&#12290;<tt class="interfacename">JoinPoint</tt>
					&#25509;&#21475;&#25552;&#20379;&#20102;&#19968;&#31995;&#21015;&#26377;&#29992;&#30340;&#26041;&#27861;&#65292;&#27604;&#22914; <tt class="literal">getArgs()</tt>&#65288;&#36820;&#22238;&#26041;&#27861;&#21442;&#25968;&#65289;&#12289;
					<tt class="literal">getThis()</tt>&#65288;&#36820;&#22238;&#20195;&#29702;&#23545;&#35937;&#65289;&#12289;<tt class="literal">getTarget()</tt>&#65288;&#36820;&#22238;&#30446;&#26631;&#65289;&#12289;
					<tt class="literal">getSignature()</tt>&#65288;&#36820;&#22238;&#27491;&#22312;&#34987;&#36890;&#30693;&#30340;&#26041;&#27861;&#30456;&#20851;&#20449;&#24687;&#65289;&#21644; <tt class="literal">toString()</tt>
					&#65288;&#25171;&#21360;&#20986;&#27491;&#22312;&#34987;&#36890;&#30693;&#30340;&#26041;&#27861;&#30340;&#26377;&#29992;&#20449;&#24687;&#65289;&#12290;&#35814;&#32454;&#30340;&#20869;&#23481;&#35831;&#21442;&#32771;JavaDoc&#12290;
					</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="aop-ataspectj-advice-params-passing"></a>6.2.4.6.2.&nbsp;&#20256;&#36882;&#21442;&#25968;&#32473;&#36890;&#30693;</h5></div></div><div></div></div><p>
					&#25105;&#20204;&#24050;&#32463;&#30475;&#21040;&#20102;&#22914;&#20309;&#32465;&#23450;&#36820;&#22238;&#20540;&#25110;&#32773;&#24322;&#24120;&#65288;&#20351;&#29992;&#21518;&#32622;&#36890;&#30693;&#21644;&#24322;&#24120;&#36890;&#30693;&#65289;&#12290;&#20026;&#20102;&#21487;&#20197;&#22312;&#36890;&#30693;&#20307;&#20869;&#35775;&#38382;&#21442;&#25968;&#65292;
					&#20320;&#21487;&#20197;&#20351;&#29992;<tt class="literal">args</tt>&#26469;&#32465;&#23450;&#12290;&#22914;&#26524;&#22312;&#19968;&#20010;args&#34920;&#36798;&#24335;&#20013;&#24212;&#35813;&#20351;&#29992;&#31867;&#22411;&#21517;&#23383;&#30340;&#22320;&#26041;
				  &#20351;&#29992;&#19968;&#20010;&#21442;&#25968;&#21517;&#23383;&#65292;&#37027;&#20040;&#24403;&#36890;&#30693;&#25191;&#34892;&#30340;&#26102;&#20505;&#23545;&#24212;&#30340;&#21442;&#25968;&#20540;&#23558;&#20250;&#34987;&#20256;&#36882;&#36827;&#26469;&#12290;&#29992;&#19968;&#20010;&#20363;&#23376;&#24212;&#35813;&#20250;&#20351;&#23427;&#21464;&#24471;&#28165;&#26224;&#12290;
				  &#20551;&#20351;&#20320;&#24819;&#35201;&#36890;&#30693;&#20197;&#19968;&#20010;Account&#23545;&#35937;&#20316;&#20026;&#31532;&#19968;&#20010;&#21442;&#25968;&#30340;DAO&#25805;&#20316;&#30340;&#25191;&#34892;&#65292;
				  &#20320;&#24819;&#35201;&#22312;&#36890;&#30693;&#20307;&#20869;&#20063;&#33021;&#35775;&#38382;account&#23545;&#35937;&#65292;&#21487;&#20197;&#32534;&#20889;&#22914;&#19979;&#30340;&#20195;&#30721;&#65306;
					</p><pre class="programlisting">@Before&#65288;"com.xyz.myapp.SystemArchitecture.dataAccessOperation&#65288;&#65289; &amp;&amp;" + 
        "args&#65288;account,..&#65289;"&#65289;
public void validateAccount&#65288;Account account&#65289; {
  <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><p>&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#30340; <tt class="literal">args(account,..)</tt> &#37096;&#20998;&#26377;&#20004;&#20010;&#30446;&#30340;&#65306;&#39318;&#20808;&#23427;&#20445;&#35777;&#20102;
					&#21482;&#20250;&#21305;&#37197;&#37027;&#20123;&#25509;&#21463;&#33267;&#23569;&#19968;&#20010;&#21442;&#25968;&#30340;&#26041;&#27861;&#30340;&#25191;&#34892;&#65292;&#32780;&#19988;&#20256;&#20837;&#30340;&#21442;&#25968;&#24517;&#39035;&#26159;<tt class="classname">Account</tt>&#31867;&#22411;&#30340;&#23454;&#20363;&#65292;
					&#20854;&#27425;&#23427;&#20351;&#24471;&#22312;&#36890;&#30693;&#20307;&#20869;&#21487;&#20197;&#36890;&#36807;<tt class="literal">account</tt> &#21442;&#25968;&#35775;&#38382;&#23454;&#38469;&#30340;<tt class="classname">Account</tt>&#23545;&#35937;&#12290;
					</p><p>&#21478;&#22806;&#19968;&#20010;&#21150;&#27861;&#26159;&#23450;&#20041;&#19968;&#20010;&#20999;&#20837;&#28857;&#65292;&#36825;&#20010;&#20999;&#20837;&#28857;&#22312;&#21305;&#37197;&#26576;&#20010;&#36830;&#25509;&#28857;&#30340;&#26102;&#20505;&#8220;&#25552;&#20379;&#8221;&#20102;
          <tt class="classname">Account</tt>&#23545;&#35937;&#30340;&#20540;&#65292;&#28982;&#21518;&#30452;&#25509;&#20174;&#36890;&#30693;&#20013;&#35775;&#38382;&#37027;&#20010;&#21629;&#21517;&#20999;&#20837;&#28857;&#12290;&#30475;&#36215;&#26469;&#21644;&#19979;&#38754;&#30340;&#31034;&#20363;&#19968;&#26679;&#65306;
					</p><pre class="programlisting">@Pointcut&#65288;"com.xyz.myapp.SystemArchitecture.dataAccessOperation&#65288;&#65289; &amp;&amp;" + 
          "args&#65288;account,..&#65289;"&#65289;
private void accountDataAccessOperation&#65288;Account account&#65289; {}

@Before&#65288;"accountDataAccessOperation&#65288;account&#65289;"&#65289;
public void validateAccount&#65288;Account account&#65289; {
  <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><p>&#26377;&#20852;&#36259;&#30340;&#35835;&#32773;&#35831;&#21442;&#38405; AspectJ &#32534;&#31243;&#25351;&#21335;&#20102;&#35299;&#26356;&#35814;&#32454;&#30340;&#20869;&#23481;&#12290;</p><p>&#20195;&#29702;&#23545;&#35937;&#65288;<tt class="literal">this</tt>&#65289;&#12289;&#30446;&#26631;&#23545;&#35937;&#65288;<tt class="literal">target</tt>&#65289;
					&#21644;&#27880;&#35299;&#65288;<tt class="literal">@within, @target, @annotation, @args</tt>&#65289;&#37117;&#21487;&#20197;&#29992;&#19968;&#31181;&#31867;&#20284;&#30340;&#26684;&#24335;&#26469;&#32465;&#23450;&#12290;
					&#20197;&#19979;&#30340;&#20363;&#23376;&#23637;&#31034;&#20102;&#22914;&#20309;&#20351;&#29992; <tt class="interfacename">@Auditable</tt>&#27880;&#35299;&#26469;&#21305;&#37197;&#26041;&#27861;&#25191;&#34892;&#65292;&#24182;&#25552;&#21462;Audit&#20195;&#30721;&#12290;
					</p><p>&#39318;&#20808;&#26159;<tt class="interfacename">@Auditable</tt>&#27880;&#35299;&#30340;&#23450;&#20041;&#65306;</p><pre class="programlisting">@Retention&#65288;RetentionPolicy.RUNTIME&#65289;
@Target&#65288;ElementType.METHOD&#65289;
public @interface Auditable {
	AuditCode value&#65288;&#65289;;
}</pre><p>&#28982;&#21518;&#26159;&#21305;&#37197;<tt class="interfacename">@Auditable</tt>&#26041;&#27861;&#25191;&#34892;&#30340;&#36890;&#30693;&#65306;</p><pre class="programlisting">@Before&#65288;"com.xyz.lib.Pointcuts.anyPublicMethod&#65288;&#65289; &amp;&amp; " + 
        "@annotation&#65288;auditable&#65289;"&#65289;
public void audit&#65288;Auditable auditable&#65289; {
  AuditCode code = auditable.value&#65288;&#65289;;
  <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="aop-ataspectj-advice-params-names"></a>6.2.4.6.3.&nbsp;&#30830;&#23450;&#21442;&#25968;&#21517;</h5></div></div><div></div></div><p>&#32465;&#23450;&#22312;&#36890;&#30693;&#19978;&#30340;&#21442;&#25968;&#20381;&#36182;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#30340;&#21305;&#37197;&#21517;&#65292;&#24182;&#20511;&#27492;&#22312;&#65288;&#36890;&#30693;&#21644;&#20999;&#20837;&#28857;&#65289;&#30340;&#26041;&#27861;&#31614;&#21517;&#20013;&#22768;&#26126;&#21442;&#25968;&#21517;&#12290;
					&#21442;&#25968;&#21517;<span class="emphasis"><em>&#26080;&#27861;</em></span> &#36890;&#36807;Java&#21453;&#23556;&#26469;&#33719;&#21462;&#65292;&#25152;&#20197;Spring AOP&#20351;&#29992;&#22914;&#19979;&#30340;&#31574;&#30053;&#26469;&#30830;&#23450;&#21442;&#25968;&#21517;&#23383;&#65306;
					</p><div class="orderedlist"><ol type="1"><li><p>&#22914;&#26524;&#21442;&#25968;&#21517;&#23383;&#24050;&#32463;&#34987;&#29992;&#25143;&#26126;&#30830;&#25351;&#23450;&#65292;&#21017;&#20351;&#29992;&#25351;&#23450;&#30340;&#21442;&#25968;&#21517;&#65306;
							&#36890;&#30693;&#21644;&#20999;&#20837;&#28857;&#27880;&#35299;&#26377;&#19968;&#20010;&#39069;&#22806;&#30340;"argNames"&#23646;&#24615;&#65292;&#35813;&#23646;&#24615;&#29992;&#26469;&#25351;&#23450;&#25152;&#27880;&#35299;&#30340;&#26041;&#27861;&#30340;&#21442;&#25968;&#21517; - 
							&#36825;&#20123;&#21442;&#25968;&#21517;&#22312;&#36816;&#34892;&#26102;&#26159;<span class="emphasis"><em>&#21487;&#20197;</em></span> &#35775;&#38382;&#30340;&#12290;&#20363;&#23376;&#22914;&#19979;&#65306;</p><pre class="programlisting">@Before&#65288;
   value="com.xyz.lib.Pointcuts.anyPublicMethod&#65288;&#65289; &amp;&amp; target&#65288;bean&#65289; &amp;&amp; @annotation&#65288;auditable&#65289;",
   argNames="bean,auditable"&#65289;
public void audit&#65288;Object bean, Auditable auditable&#65289; {
  AuditCode code = auditable.value&#65288;&#65289;;
  <i class="lineannotation"><span class="lineannotation">// ... use code and bean</span></i>
}</pre><p>&#22914;&#26524;&#31532;&#19968;&#20010;&#21442;&#25968;&#26159;<tt class="interfacename">JoinPoint</tt>&#65292;
              <tt class="interfacename">ProceedingJoinPoint</tt>&#65292;
              &#25110;&#32773;<tt class="interfacename">JoinPoint.StaticPart</tt>&#31867;&#22411;&#65292;
              &#20320;&#21487;&#20197;&#22312;&#8220;argNames&#8221;&#23646;&#24615;&#30340;&#20540;&#20013;&#30465;&#21435;&#21442;&#25968;&#30340;&#21517;&#23383;&#12290;&#20363;&#22914;&#65292;&#22914;&#26524;&#20320;&#20462;&#25913;&#21069;&#38754;&#30340;&#36890;&#30693;&#26469;&#33719;&#21462;&#36830;&#25509;&#28857;&#23545;&#35937;&#65292;
              "argNames"&#23646;&#24615;&#23601;&#19981;&#24517;&#21253;&#21547;&#23427;&#65306;</p><pre class="programlisting">@Before&#65288;
   value="com.xyz.lib.Pointcuts.anyPublicMethod&#65288;&#65289; &amp;&amp; target&#65288;bean&#65289; &amp;&amp; @annotation&#65288;auditable&#65289;",
   argNames="bean,auditable"&#65289;
public void audit&#65288;JoinPoint jp, Object bean, Auditable auditable&#65289; {
  AuditCode code = auditable.value&#65288;&#65289;;
  <i class="lineannotation"><span class="lineannotation">// ... use code, bean, and jp</span></i>
}</pre><p>&#23545;&#20110;&#31532;&#19968;&#20010;<tt class="interfacename">JoinPoint</tt>&#65292;
              <tt class="interfacename">ProceedingJoinPoint</tt>&#65292;&#21644;
              <tt class="interfacename">JoinPoint.StaticPart</tt>&#31867;&#22411;&#30340;&#21442;&#25968;&#29305;&#27530;&#22788;&#29702;&#29305;&#21035;&#36866;&#21512;
              &#27809;&#26377;&#38598;&#21512;&#20854;&#23427;&#36830;&#25509;&#19978;&#19979;&#25991;&#30340;&#36890;&#30693;&#12290;&#22312;&#36825;&#31181;&#24773;&#37096;&#19979;&#65292;&#20320;&#21487;&#20197;&#31616;&#21333;&#30340;&#30465;&#30053;&#8220;argNames&#8221;&#23646;&#24615;&#12290;
              &#20363;&#22914;&#65292;&#19979;&#38754;&#30340;&#36890;&#30693;&#19981;&#38656;&#35201;&#22768;&#26126;&#8220;argNames&#8221;&#23646;&#24615;&#65306;</p><pre class="programlisting">@Before&#65288;
   "com.xyz.lib.Pointcuts.anyPublicMethod&#65288;&#65289;"&#65289;
public void audit&#65288;JoinPoint jp&#65289; {
  <i class="lineannotation"><span class="lineannotation">// ... use jp</span></i>
}</pre></li><li><p>&#20351;&#29992;<tt class="literal">'argNames'</tt>&#23646;&#24615;&#26377;&#19968;&#28857;&#31528;&#25305;&#65292;&#25152;&#20197;&#22914;&#26524;<tt class="literal">'argNames'</tt>
              &#23646;&#24615;&#27809;&#26377;&#34987;&#25351;&#23450;&#65292;Spring AOP&#23558;&#26597;&#30475;&#31867;&#30340;debug&#20449;&#24687;&#24182;&#23581;&#35797;&#20174;&#26412;&#22320;&#30340;&#21464;&#37327;&#34920;&#30830;&#23450;&#21442;&#25968;&#21517;&#12290;&#21482;&#35201;&#31867;&#32534;&#35793;&#26102;&#26377;debug&#20449;&#24687;&#65292;
              &#65288;&#26368;&#23569;&#35201;&#26377;<tt class="literal">'-g:vars'</tt>&#65289;&#36825;&#20010;&#20449;&#24687;&#23558;&#20250;&#20986;&#29616;&#12290;&#25171;&#24320;&#36825;&#20010;&#26631;&#24535;&#32534;&#35793;&#30340;&#32467;&#26524;&#26159;&#65306;
              &#65288;1&#65289;&#20320;&#30340;&#20195;&#30721;&#31245;&#24494;&#23481;&#26131;&#29702;&#35299;&#65288;&#21453;&#21521;&#24037;&#31243;&#65289;&#65292;
              &#65288;2&#65289;class&#25991;&#20214;&#30340;&#22823;&#23567;&#31245;&#24494;&#26377;&#20123;&#22823;&#65288;&#36890;&#24120;&#19981;&#37325;&#35201;&#65289;&#65292;
              &#65288;3&#65289;&#20320;&#30340;&#32534;&#35793;&#22120;&#23558;&#19981;&#20250;&#24212;&#29992;&#20248;&#21270;&#21435;&#31227;&#38500;&#26410;&#20351;&#29992;&#30340;&#26412;&#22320;&#21464;&#37327;&#12290;&#25442;&#21477;&#35805;&#35828;&#65292;&#25171;&#24320;&#36825;&#20010;&#26631;&#24535;&#21019;&#24314;&#26102;&#20320;&#24212;&#24403;&#19981;&#20250;&#36935;&#21040;&#22256;&#38590;&#12290;</p><i><span class="remark">&#22914;&#26524;&#19968;&#20010;@AspectJ&#20999;&#38754;&#24050;&#32463;&#34987;AspectJ&#32534;&#35793;&#22120;&#65288;ajc&#65289;&#32534;&#35793;&#36807;&#65292;&#21363;&#20351;&#27809;&#26377;debug&#20449;&#24687;&#65292;
							&#20063;&#19981;&#38656;&#35201;&#28155;&#21152;<tt class="literal">argNames</tt>&#21442;&#25968;&#65292;&#22240;&#20026;&#32534;&#35793;&#22120;&#20250;&#20445;&#30041;&#24517;&#38656;&#30340;&#20449;&#24687;&#12290;
							</span></i></li><li><p>
							&#22914;&#26524;&#19981;&#21152;&#19978;&#24517;&#35201;&#30340;debug&#20449;&#24687;&#26469;&#32534;&#35793;&#30340;&#35805;&#65292;Spring AOP&#23558;&#20250;&#23581;&#35797;&#25512;&#26029;&#32465;&#23450;&#21464;&#37327;&#21040;&#21442;&#25968;&#30340;&#37197;&#23545;&#12290;
							&#65288;&#20363;&#22914;&#65292;&#35201;&#26159;&#21482;&#26377;&#19968;&#20010;&#21464;&#37327;&#34987;&#32465;&#23450;&#21040;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#65292;&#36890;&#30693;&#26041;&#27861;&#21482;&#25509;&#21463;&#19968;&#20010;&#21442;&#25968;&#65292; &#37197;&#23545;&#26159;&#26174;&#32780;&#26131;&#35265;&#30340;&#65289;&#12290;
							&#22914;&#26524;&#21464;&#37327;&#30340;&#32465;&#23450;&#19981;&#26126;&#30830;&#65292;&#23558;&#20250;&#25243;&#20986;&#19968;&#20010;<tt class="classname">AmbiguousBindingException</tt>&#24322;&#24120;&#12290;
							</p></li><li><p>&#22914;&#26524;&#20197;&#19978;&#25152;&#26377;&#31574;&#30053;&#37117;&#22833;&#36133;&#20102;&#65292;&#23558;&#20250;&#25243;&#20986;&#19968;&#20010;<tt class="classname">IllegalArgumentException</tt>&#24322;&#24120;&#12290;</p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="aop-ataspectj-advice-proceeding-with-the-call"></a>6.2.4.6.4.&nbsp;&#22788;&#29702;&#21442;&#25968;</h5></div></div><div></div></div><p>&#25105;&#20204;&#20043;&#21069;&#25552;&#36807;&#25105;&#20204;&#23558;&#20250;&#35752;&#35770;&#22914;&#20309;&#32534;&#20889;&#19968;&#20010;<span class="emphasis"><em>&#24102;&#21442;&#25968;&#30340;</em></span>&#30340;proceed()&#35843;&#29992;&#65292;
          &#20351;&#24471;&#22312;Spring AOP&#21644;AspectJ&#20013;&#37117;&#33021;&#27491;&#24120;&#24037;&#20316;&#12290;&#35299;&#20915;&#26041;&#27861;&#26159;&#20165;&#20165;&#30830;&#20445;&#36890;&#30693;&#31614;&#21517;&#25353;&#39034;&#24207;&#32465;&#23450;&#26041;&#27861;&#21442;&#25968;&#12290;&#20363;&#22914;&#65306;
					</p><pre class="programlisting">@Around&#65288;"execution&#65288;List&lt;Account&gt; find*&#65288;..&#65289;&#65289; &amp;&amp;" +
        "com.xyz.myapp.SystemArchitecture.inDataAccessLayer&#65288;&#65289; &amp;&amp; " +
        "args&#65288;accountHolderNamePattern&#65289;"&#65289;		
public Object preProcessQueryPattern&#65288;ProceedingJoinPoint pjp, String accountHolderNamePattern&#65289;
throws Throwable {
  String newPattern = preProcess&#65288;accountHolderNamePattern&#65289;;
  return pjp.proceed&#65288;new Object[] {newPattern}&#65289;;
}        
</pre><p>&#22823;&#22810;&#25968;&#24773;&#20917;&#19979;&#20320;&#37117;&#20250;&#36825;&#26679;&#32465;&#23450;&#65288;&#23601;&#20687;&#19978;&#38754;&#30340;&#20363;&#23376;&#37027;&#26679;&#65289;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-ataspectj-advice-ordering"></a>6.2.4.7.&nbsp;&#36890;&#30693;&#39034;&#24207;</h4></div></div><div></div></div><p>
				&#22914;&#26524;&#26377;&#22810;&#20010;&#36890;&#30693;&#24819;&#35201;&#22312;&#21516;&#19968;&#36830;&#25509;&#28857;&#36816;&#34892;&#20250;&#21457;&#29983;&#20160;&#20040;&#65311;Spring AOP&#36981;&#24490;&#36319;AspectJ&#19968;&#26679;&#30340;&#20248;&#20808;&#35268;&#21017;&#26469;&#30830;&#23450;&#36890;&#30693;&#25191;&#34892;&#30340;&#39034;&#24207;&#12290;
				&#22312;&#8220;&#36827;&#20837;&#8221;&#36830;&#25509;&#28857;&#30340;&#24773;&#20917;&#19979;&#65292;&#26368;&#39640;&#20248;&#20808;&#32423;&#30340;&#36890;&#30693;&#20250;&#20808;&#25191;&#34892;&#65288;&#25152;&#20197;&#32473;&#23450;&#30340;&#20004;&#20010;&#21069;&#32622;&#36890;&#30693;&#20013;&#65292;&#20248;&#20808;&#32423;&#39640;&#30340;&#37027;&#20010;&#20250;&#20808;&#25191;&#34892;&#65289;&#12290;
				&#22312;&#8220;&#36864;&#20986;&#8221;&#36830;&#25509;&#28857;&#30340;&#24773;&#20917;&#19979;&#65292;&#26368;&#39640;&#20248;&#20808;&#32423;&#30340;&#36890;&#30693;&#20250;&#26368;&#21518;&#25191;&#34892;&#12290;&#65288;&#25152;&#20197;&#32473;&#23450;&#30340;&#20004;&#20010;&#21518;&#32622;&#36890;&#30693;&#20013;&#65292;
			  &#20248;&#20808;&#32423;&#39640;&#30340;&#37027;&#20010;&#20250;&#31532;&#20108;&#20010;&#25191;&#34892;&#65289;&#12290;</p><p>&#24403;&#23450;&#20041;&#22312;<span class="emphasis"><em>&#19981;&#21516;&#30340;</em></span>&#20999;&#38754;&#37324;&#30340;&#20004;&#20010;&#36890;&#30693;&#37117;&#38656;&#35201;&#22312;&#19968;&#20010;&#30456;&#21516;&#30340;&#36830;&#25509;&#28857;&#20013;&#36816;&#34892;&#65292;
        &#37027;&#20040;&#38500;&#38750;&#20320;&#25351;&#23450;&#65292;&#21542;&#21017;&#25191;&#34892;&#30340;&#39034;&#24207;&#26159;&#26410;&#30693;&#30340;&#12290;&#20320;&#21487;&#20197;&#36890;&#36807;&#25351;&#23450;&#20248;&#20808;&#32423;&#26469;&#25511;&#21046;&#25191;&#34892;&#39034;&#24207;&#12290;
        &#22312;&#26631;&#20934;&#30340;Spring&#26041;&#27861;&#20013;&#21487;&#20197;&#22312;&#20999;&#38754;&#31867;&#20013;&#23454;&#29616;<tt class="interfacename">org.springframework.core.Ordered</tt>
        &#25509;&#21475;&#25110;&#32773;&#29992;<tt class="interfacename">Order</tt>&#27880;&#35299;&#20570;&#21040;&#36825;&#19968;&#28857;&#12290;&#22312;&#20004;&#20010;&#20999;&#38754;&#20013;&#65292;
        <tt class="literal">Ordered.getValue()</tt>&#26041;&#27861;&#36820;&#22238;&#20540;&#65288;&#25110;&#32773;&#27880;&#35299;&#20540;&#65289;&#36739;&#20302;&#30340;&#37027;&#20010;&#26377;&#26356;&#39640;&#30340;&#20248;&#20808;&#32423;&#12290;
				</p><p>&#24403;&#23450;&#20041;&#22312;<span class="emphasis"><em>&#30456;&#21516;&#30340;</em></span>&#20999;&#38754;&#37324;&#30340;&#20004;&#20010;&#36890;&#30693;&#37117;&#38656;&#35201;&#22312;&#19968;&#20010;&#30456;&#21516;&#30340;&#36830;&#25509;&#28857;&#20013;&#36816;&#34892;&#65292;
        &#25191;&#34892;&#30340;&#39034;&#24207;&#26159;&#26410;&#30693;&#30340;&#65288;&#22240;&#20026;&#36825;&#37324;&#27809;&#26377;&#26041;&#27861;&#36890;&#36807;&#21453;&#23556;javac&#32534;&#35793;&#30340;&#31867;&#26469;&#33719;&#21462;&#22768;&#26126;&#39034;&#24207;&#65289;&#12290;
        &#32771;&#34385;&#22312;&#27599;&#20010;&#20999;&#38754;&#31867;&#20013;&#25353;&#36830;&#25509;&#28857;&#21387;&#32553;&#36825;&#20123;&#36890;&#30693;&#26041;&#27861;&#21040;&#19968;&#20010;&#36890;&#30693;&#26041;&#27861;&#65292;&#25110;&#32773;&#37325;&#26500;&#36890;&#30693;&#30340;&#29255;&#27573;&#21040;&#21508;&#33258;&#30340;&#20999;&#38754;&#31867;&#20013; - 
        &#23427;&#33021;&#22312;&#20999;&#38754;&#32423;&#21035;&#36827;&#34892;&#25490;&#24207;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-introductions"></a>6.2.5.&nbsp;&#24341;&#20837;&#65288;Introduction&#65289;</h3></div></div><div></div></div><p>&#24341;&#20837;&#65288;&#22312;AspectJ&#20013;&#34987;&#31216;&#20026;inter-type&#22768;&#26126;&#65289;&#20351;&#24471;&#19968;&#20010;&#20999;&#38754;&#21487;&#20197;&#23450;&#20041;&#34987;&#36890;&#30693;&#23545;&#35937;&#23454;&#29616;&#32473;&#23450;&#30340;&#25509;&#21475;&#65292;
      &#24182;&#19988;&#21487;&#20197;&#20026;&#37027;&#20123;&#23545;&#35937;&#25552;&#20379;&#20855;&#20307;&#30340;&#23454;&#29616;&#12290;
			</p><p>&#20351;&#29992;<tt class="interfacename">@DeclareParents</tt>&#27880;&#35299;&#26469;&#23450;&#20041;&#24341;&#20837;&#12290;&#36825;&#20010;&#27880;&#35299;&#29992;&#26469;&#23450;&#20041;&#21305;&#37197;&#30340;&#31867;&#22411;
      &#25317;&#26377;&#19968;&#20010;&#26032;&#30340;&#29238;&#31867;&#65288;&#25152;&#20197;&#26377;&#20102;&#36825;&#20010;&#21517;&#23383;&#65289;&#12290;&#27604;&#22914;&#65292;&#32473;&#23450;&#19968;&#20010;&#25509;&#21475;<tt class="interfacename">UsageTracked</tt>&#65292;
			&#21644;&#25509;&#21475;&#30340;&#20855;&#20307;&#23454;&#29616;<tt class="classname">DefaultUsageTracked</tt>&#31867;&#65292;
			&#25509;&#19979;&#26469;&#30340;&#20999;&#38754;&#22768;&#26126;&#20102;&#25152;&#26377;&#30340;service&#25509;&#21475;&#30340;&#23454;&#29616;&#37117;&#23454;&#29616;&#20102;<tt class="interfacename">UsageTracked</tt>&#25509;&#21475;&#12290;
			&#65288;&#27604;&#22914;&#20026;&#20102;&#36890;&#36807;JMX&#36755;&#20986;&#32479;&#35745;&#20449;&#24687;&#65289;&#12290;
			</p><pre class="programlisting">@Aspect
public class UsageTracking {

  @DeclareParents&#65288;value="com.xzy.myapp.service.*+",
                  defaultImpl=DefaultUsageTracked.class&#65289;
  public static UsageTracked mixin;
  
  @Before&#65288;"com.xyz.myapp.SystemArchitecture.businessService&#65288;&#65289; &amp;&amp;" +
          "this&#65288;usageTracked&#65289;"&#65289;
  public void recordUsage&#65288;UsageTracked usageTracked&#65289; {
    usageTracked.incrementUseCount&#65288;&#65289;;
  }
  
}</pre><p>&#23454;&#29616;&#30340;&#25509;&#21475;&#36890;&#36807;&#34987;&#27880;&#35299;&#30340;&#23383;&#27573;&#31867;&#22411;&#26469;&#20915;&#23450;&#12290;<tt class="interfacename">@DeclareParents</tt>&#27880;&#35299;&#30340;
      <tt class="literal">value</tt>&#23646;&#24615;&#26159;&#19968;&#20010;AspectJ&#30340;&#31867;&#22411;&#27169;&#24335;&#65306;- &#20219;&#20309;&#21305;&#37197;&#31867;&#22411;&#30340;bean&#37117;&#20250;&#23454;&#29616;
			<tt class="interfacename">UsageTracked</tt>&#25509;&#21475;&#12290;&#35831;&#27880;&#24847;&#65292;&#22312;&#19978;&#38754;&#30340;&#21069;&#32622;&#36890;&#30693;&#30340;&#20363;&#23376;&#20013;&#65292;service beans
			&#21487;&#20197;&#30452;&#25509;&#29992;&#20316;<tt class="interfacename">UsageTracked</tt>&#25509;&#21475;&#30340;&#23454;&#29616;&#12290;&#22914;&#26524;&#38656;&#35201;&#32534;&#31243;&#24335;&#30340;&#26469;&#35775;&#38382;&#19968;&#20010;bean&#65292;
			&#20320;&#21487;&#20197;&#36825;&#26679;&#20889;&#65306;</p><pre class="programlisting">UsageTracked usageTracked = &#65288;UsageTracked&#65289; context.getBean&#65288;"myService"&#65289;;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-instantiation-models"></a>6.2.6.&nbsp;&#20999;&#38754;&#23454;&#20363;&#21270;&#27169;&#22411;</h3></div></div><div></div></div><i><span class="remark">&#65288;&#36825;&#26159;&#19968;&#20010;&#39640;&#32423;&#20027;&#39064;&#65292;&#25152;&#20197;&#22914;&#26524;&#20320;&#21018;&#24320;&#22987;&#23398;&#20064;AOP&#20320;&#21487;&#20197;&#36339;&#36807;&#23427;&#21040;&#21518;&#38754;&#30340;&#31456;&#33410;&#65289;</span></i><p>&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#22312;application context&#20013;&#27599;&#19968;&#20010;&#20999;&#38754;&#37117;&#20250;&#26377;&#19968;&#20010;&#23454;&#20363;&#12290;AspectJ&#25226;&#36825;&#20010;&#21483;&#20570;&#21333;&#20363;&#21270;&#27169;&#22411;&#12290;
			&#20063;&#21487;&#20197;&#29992;&#20854;&#20182;&#30340;&#29983;&#21629;&#21608;&#26399;&#26469;&#23450;&#20041;&#20999;&#38754;&#65306;Spring&#25903;&#25345;AspectJ&#30340; <tt class="literal">perthis</tt>
			&#21644;<tt class="literal">pertarget</tt>&#23454;&#20363;&#21270;&#27169;&#22411;&#65288;&#29616;&#22312;&#36824;&#19981;&#25903;&#25345;<tt class="literal">percflow&#12289;percflowbelow</tt>
			&#21644;<tt class="literal">pertypewithin</tt>&#65289;&#12290;
	    </p><p>&#19968;&#20010;"perthis" &#20999;&#38754;&#36890;&#36807;&#22312;<tt class="interfacename">@Aspect</tt>&#27880;&#35299;&#20013;&#25351;&#23450;<tt class="literal">perthis</tt>
      &#23376;&#21477;&#26469;&#22768;&#26126;&#12290;&#35753;&#25105;&#20204;&#20808;&#26469;&#30475;&#19968;&#20010;&#20363;&#23376;&#65292;&#28982;&#21518;&#35299;&#37322;&#23427;&#26159;&#22914;&#20309;&#36816;&#20316;&#30340;&#65306;
	    </p><pre class="programlisting">@Aspect&#65288;"perthis&#65288;com.xyz.myapp.SystemArchitecture.businessService&#65288;&#65289;&#65289;"&#65289;
public class MyAspect {

  private int someState;
	
  @Before&#65288;com.xyz.myapp.SystemArchitecture.businessService&#65288;&#65289;&#65289;
  public void recordServiceUsage&#65288;&#65289; {
    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
  }
  	
}</pre><p>&#36825;&#20010;<tt class="literal">'perthis'</tt>&#23376;&#21477;&#30340;&#25928;&#26524;&#26159;&#27599;&#20010;&#29420;&#31435;&#30340;service&#23545;&#35937;&#25191;&#34892;&#19968;&#20010;&#19994;&#21153;&#26102;&#37117;&#20250;
		  &#21019;&#24314;&#19968;&#20010;&#20999;&#38754;&#23454;&#20363;&#65288;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#25152;&#21305;&#37197;&#30340;&#36830;&#25509;&#28857;&#19978;&#30340;&#27599;&#19968;&#20010;&#29420;&#31435;&#30340;&#23545;&#35937;&#37117;&#20250;&#32465;&#23450;&#21040;'this'&#19978;&#65289;&#12290;
			&#22312;service&#23545;&#35937;&#19978;&#31532;&#19968;&#27425;&#35843;&#29992;&#26041;&#27861;&#30340;&#26102;&#20505;&#65292;&#20999;&#38754;&#23454;&#20363;&#23558;&#34987;&#21019;&#24314;&#12290;&#20999;&#38754;&#22312;service&#23545;&#35937;&#22833;&#25928;&#30340;&#21516;&#26102;&#22833;&#25928;&#12290;
			&#22312;&#20999;&#38754;&#23454;&#20363;&#34987;&#21019;&#24314;&#21069;&#65292;&#25152;&#26377;&#30340;&#36890;&#30693;&#37117;&#19981;&#20250;&#34987;&#25191;&#34892;&#65292;&#19968;&#26086;&#20999;&#38754;&#23545;&#35937;&#21019;&#24314;&#23436;&#25104;&#65292;
		  &#23450;&#20041;&#30340;&#36890;&#30693;&#23558;&#20250;&#22312;&#21305;&#37197;&#30340;&#36830;&#25509;&#28857;&#19978;&#25191;&#34892;&#65292;&#20294;&#26159;&#21482;&#26377;&#24403;service&#23545;&#35937;&#26159;&#21644;&#20999;&#38754;&#20851;&#32852;&#30340;&#25165;&#21487;&#20197;&#12290;
			&#35831;&#21442;&#38405; AspectJ &#32534;&#31243;&#25351;&#21335;&#20102;&#35299;&#26356;&#22810;&#20851;&#20110;per-clauses&#30340;&#20449;&#24687;&#12290;
			</p><p><tt class="literal">'pertarget'</tt>&#23454;&#20363;&#27169;&#22411;&#30340;&#36319;&#8220;perthis&#8221;&#23436;&#20840;&#19968;&#26679;&#65292;&#21482;&#19981;&#36807;&#26159;&#20026;&#27599;&#20010;&#21305;&#37197;&#20110;&#36830;&#25509;&#28857;
      &#30340;&#29420;&#31435;&#30446;&#26631;&#23545;&#35937;&#21019;&#24314;&#19968;&#20010;&#20999;&#38754;&#23454;&#20363;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-ataspectj-example"></a>6.2.7.&nbsp;&#20363;&#23376;</h3></div></div><div></div></div><p>&#29616;&#22312;&#20320;&#24050;&#32463;&#30475;&#21040;&#20102;&#27599;&#20010;&#29420;&#31435;&#30340;&#37096;&#20998;&#26159;&#22914;&#20309;&#36816;&#20316;&#30340;&#20102;&#65292;&#26159;&#26102;&#20505;&#25226;&#20182;&#20204;&#25918;&#21040;&#19968;&#36215;&#20570;&#19968;&#20123;&#26377;&#29992;&#30340;&#20107;&#24773;&#20102;&#65281;</p><p>&#22240;&#20026;&#24182;&#21457;&#30340;&#38382;&#39064;&#65292;&#26377;&#26102;&#20505;&#19994;&#21153;&#26381;&#21153;&#65288;business services&#65289;&#21487;&#33021;&#20250;&#22833;&#36133;&#65288;&#20363;&#22914;&#65292;&#27515;&#38145;&#22833;&#36133;&#65289;&#12290;&#22914;&#26524;&#37325;&#26032;&#23581;&#35797;&#19968;&#19979;&#65292;
			&#24456;&#26377;&#21487;&#33021;&#23601;&#20250;&#25104;&#21151;&#12290;&#23545;&#20110;&#19994;&#21153;&#26381;&#21153;&#26469;&#35828;&#65292;&#37325;&#35797;&#20960;&#27425;&#26159;&#24456;&#27491;&#24120;&#30340;&#65288;Idempotent&#25805;&#20316;&#19981;&#38656;&#35201;&#29992;&#25143;&#21442;&#19982;&#65292;&#21542;&#21017;&#20250;&#24471;&#20986;&#30683;&#30462;&#30340;&#32467;&#35770;&#65289;
			&#25105;&#20204;&#21487;&#33021;&#38656;&#35201;&#36879;&#26126;&#30340;&#37325;&#35797;&#25805;&#20316;&#20197;&#36991;&#20813;&#23458;&#25143;&#30475;&#21040;&#19968;&#20010;<tt class="classname">PessimisticLockingFailureException</tt>&#24322;&#24120;&#12290; 
			&#24456;&#26126;&#26174;&#65292;&#22312;&#19968;&#20010;&#27178;&#20999;&#22810;&#23618;&#30340;&#24773;&#20917;&#19979;&#65292;&#36825;&#26159;&#38750;&#24120;&#26377;&#24517;&#35201;&#30340;&#65292;&#22240;&#27492;&#36890;&#36807;&#20999;&#38754;&#26469;&#23454;&#29616;&#26159;&#24456;&#29702;&#24819;&#30340;&#12290;
			</p><p>&#22240;&#20026;&#25105;&#20204;&#24819;&#35201;&#37325;&#35797;&#25805;&#20316;&#65292;&#25105;&#20204;&#20250;&#38656;&#35201;&#20351;&#29992;&#21040;&#29615;&#32469;&#36890;&#30693;&#65292;&#36825;&#26679;&#25105;&#20204;&#23601;&#21487;&#20197;&#22810;&#27425;&#35843;&#29992;proceed()&#26041;&#27861;&#12290;
			&#19979;&#38754;&#26159;&#31616;&#21333;&#30340;&#20999;&#38754;&#23454;&#29616;&#65306;</p><pre class="programlisting">@Aspect
public class ConcurrentOperationExecutor implements Ordered {
   
   private static final int DEFAULT_MAX_RETRIES = 2;

   private int maxRetries = DEFAULT_MAX_RETRIES;
   private int order = 1;

   public void setMaxRetries&#65288;int maxRetries&#65289; {
      this.maxRetries = maxRetries;
   }
   
   public int getOrder&#65288;&#65289; {
      return this.order;
   }
   
   public void setOrder&#65288;int order&#65289; {
      this.order = order;
   }
   
   @Around&#65288;"com.xyz.myapp.SystemArchitecture.businessService&#65288;&#65289;"&#65289;
   public Object doConcurrentOperation&#65288;ProceedingJoinPoint pjp&#65289; throws Throwable { 
      int numAttempts = 0;
      PessimisticLockingFailureException lockFailureException;
      do {
         numAttempts++;
         try { 
            return pjp.proceed&#65288;&#65289;;
         }
         catch&#65288;PessimisticLockingFailureException ex&#65289; {
            lockFailureException = ex;
         }
      }
      while&#65288;numAttempts &lt;= this.maxRetries&#65289;;
      throw lockFailureException;
   }

}</pre><p>
			&#35831;&#27880;&#24847;&#20999;&#38754;&#23454;&#29616;&#20102; <tt class="interfacename">Ordered</tt> &#25509;&#21475;&#65292;&#36825;&#26679;&#25105;&#20204;&#23601;&#21487;&#20197;&#25226;&#20999;&#38754;&#30340;&#20248;&#20808;&#32423;&#35774;&#23450;&#20026;&#39640;&#20110;&#20107;&#21153;&#36890;&#30693;
			&#65288;&#25105;&#20204;&#27599;&#27425;&#37325;&#35797;&#30340;&#26102;&#20505;&#37117;&#24819;&#35201;&#22312;&#19968;&#20010;&#20840;&#26032;&#30340;&#20107;&#21153;&#20013;&#36827;&#34892;&#65289;&#12290;<tt class="literal">maxRetries</tt>&#21644;<tt class="literal">order</tt>
			&#23646;&#24615;&#37117;&#21487;&#20197;&#22312;Spring&#20013;&#37197;&#32622;&#12290;&#20027;&#35201;&#30340;&#21160;&#20316;&#22312;<tt class="literal">doConcurrentOperation</tt>&#36825;&#20010;&#29615;&#32469;&#36890;&#30693;&#26041;&#27861;&#20013;&#21457;&#29983;&#12290;
			&#35831;&#27880;&#24847;&#36825;&#20010;&#26102;&#20505;&#25105;&#20204;&#25152;&#26377;&#30340;<tt class="literal">businessService()</tt>&#26041;&#27861;&#37117;&#20250;&#20351;&#29992;&#36825;&#20010;&#37325;&#35797;&#31574;&#30053;&#12290;
			&#25105;&#20204;&#39318;&#20808;&#20250;&#23581;&#35797;&#22788;&#29702;&#65292;&#22914;&#26524;&#24471;&#21040;&#19968;&#20010;<tt class="classname">PessimisticLockingFailureException</tt>&#24322;&#24120;&#65292;
			&#25105;&#20204;&#20165;&#20165;&#37325;&#35797;&#30452;&#21040;&#32791;&#23613;&#25152;&#26377;&#39044;&#35774;&#30340;&#37325;&#35797;&#27425;&#25968;&#12290;
			</p><p>&#23545;&#24212;&#30340;Spring&#37197;&#32622;&#22914;&#19979;&#65306;</p><pre class="programlisting">&lt;aop:aspectj-autoproxy/&gt;

&lt;bean id="concurrentOperationExecutor"
  class="com.xyz.myapp.service.impl.ConcurrentOperationExecutor"&gt;
     &lt;property name="maxRetries" value="3"/&gt;
     &lt;property name="order" value="100"/&gt;  
&lt;/bean&gt;</pre><p>&#20026;&#25913;&#36827;&#20999;&#38754;&#65292;&#20351;&#20043;&#20165;&#20165;&#37325;&#35797;idempotent&#25805;&#20316;&#65292;&#25105;&#20204;&#21487;&#20197;&#23450;&#20041;&#19968;&#20010;
      <tt class="interfacename">Idempotent</tt>&#27880;&#35299;&#65306;</p><pre class="programlisting">@Retention&#65288;RetentionPolicy.RUNTIME&#65289;
public @interface Idempotent {
  <i class="lineannotation"><span class="lineannotation">// marker annotation</span></i>
}</pre><p>&#24182;&#19988;&#23545;service&#25805;&#20316;&#30340;&#23454;&#29616;&#36827;&#34892;&#27880;&#35299;&#12290;&#20026;&#20102;&#21482;&#37325;&#35797;idempotent&#25805;&#20316;&#65292;&#20999;&#38754;&#30340;&#20462;&#25913;&#21482;&#38656;&#35201;&#25913;&#20889;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#65292;
			&#20351;&#24471;&#21482;&#21305;&#37197;<tt class="interfacename">@Idempotent</tt>&#25805;&#20316;&#65306;
			</p><pre class="programlisting">@Around&#65288;"com.xyz.myapp.SystemArchitecture.businessService&#65288;&#65289; &amp;&amp; " + 
        "@annotation&#65288;com.xyz.myapp.service.Idempotent&#65289;"&#65289;
public Object doConcurrentOperation&#65288;ProceedingJoinPoint pjp&#65289; throws Throwable { 
  ...	
}</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="aop-schema"></a>6.3.&nbsp;&#22522;&#20110;Schema&#30340;AOP&#25903;&#25345;</h2></div></div><div></div></div>

    
&#12288;&#12288;<p>&#22914;&#26524;&#20320;&#26080;&#27861;&#20351;&#29992;Java 5&#65292;&#25110;&#32773;&#20320;&#27604;&#36739;&#21916;&#27426;&#20351;&#29992;XML&#26684;&#24335;&#65292;Spring2.0&#20063;&#25552;&#20379;&#20102;&#20351;&#29992;&#26032;&#30340;"aop"&#21629;&#21517;&#31354;&#38388;&#26469;&#23450;&#20041;&#19968;&#20010;&#20999;&#38754;&#12290;
	  &#21644;&#20351;&#29992;@AspectJ&#39118;&#26684;&#23436;&#20840;&#19968;&#26679;&#65292;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#21644;&#36890;&#30693;&#31867;&#22411;&#21516;&#26679;&#24471;&#21040;&#20102;&#25903;&#25345;&#65292;&#22240;&#27492;&#22312;&#36825;&#19968;&#33410;&#20013;&#25105;&#20204;&#23558;&#30528;&#37325;&#20171;&#32461;&#26032;&#30340;
	  <span class="emphasis"><em>&#35821;&#27861;</em></span>&#24182;&#22238;&#39038;&#21069;&#19968;&#33410;&#65288;<a href="aop.html#aop-ataspectj" title="6.2.&nbsp;@AspectJ&#25903;&#25345;">Section&nbsp;6.2, &#8220;@AspectJ&#25903;&#25345;&#8221;</a>)&#23545;&#32534;&#20889;&#19968;&#20010;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#21644;&#32465;&#23450;&#36890;&#30693;&#21442;&#25968;&#30340;&#35752;&#35770;&#12290;
	  </p>
   
&#12288;&#12288;<p>&#20351;&#29992;&#26412;&#31456;&#25152;&#20171;&#32461;&#30340;aop&#21629;&#21517;&#31354;&#38388;&#26631;&#31614;&#65292;&#20320;&#38656;&#35201;&#24341;&#20837;<a href="xsd-config.html" title="Appendix&nbsp;A.&nbsp;XML Schema-based configuration">Appendix&nbsp;A, <i>XML Schema-based configuration</i></a>&#20013;&#25552;&#21450;&#30340;spring-aop schema&#12290;
	  &#21442;&#35265;<a href="xsd-config.html#xsd-config-body-schemas-aop" title="A.2.7.&nbsp;The aop schema">Section&nbsp;A.2.7, &#8220;The aop schema&#8221;</a>&#20102;&#35299;&#22914;&#20309;&#22312;aop&#21629;&#21517;&#31354;&#38388;&#20013;&#24341;&#20837;&#26631;&#31614;&#12290;
	  </p>
    
&#12288;&#12288;<p>&#22312;Spring&#30340;&#37197;&#32622;&#25991;&#20214;&#20013;&#65292;&#25152;&#26377;&#30340;&#20999;&#38754;&#21644;&#36890;&#30693;&#37117;&#24517;&#39035;&#23450;&#20041;&#22312;<tt class="literal">&lt;aop:config&gt;</tt>&#20803;&#32032;&#20869;&#37096;&#12290;
		&#65288;&#19968;&#20010;application context&#21487;&#20197;&#21253;&#21547;&#22810;&#20010; <tt class="literal">&lt;aop:config&gt;</tt>&#65289;&#12290;
		&#19968;&#20010;<tt class="literal">&lt;aop:config&gt;</tt>&#21487;&#20197;&#21253;&#21547;pointcut&#65292;advisor&#21644;aspect&#20803;&#32032;
		&#65288;&#27880;&#24847;&#36825;&#19977;&#20010;&#20803;&#32032;&#24517;&#39035;&#25353;&#29031;&#36825;&#20010;&#39034;&#24207;&#36827;&#34892;&#22768;&#26126;&#65289;&#12290;
	</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="../images/admons/warning.png"></td><th align="left">Warning</th></tr><tr><td colspan="2" align="left" valign="top"><p><tt class="literal">&lt;aop:config&gt;</tt>&#39118;&#26684;&#30340;&#37197;&#32622;&#20351;&#24471;Spring
      <a href="aop-api.html#aop-autoproxy" title="7.9.&nbsp;&#20351;&#29992;&#8220;&#33258;&#21160;&#20195;&#29702;&#65288;autoproxy&#65289;&#8221;&#21151;&#33021;">auto-proxying</a>&#26426;&#21046;&#30340;&#20351;&#29992;&#21464;&#24471;&#24456;&#31528;&#37325;&#12290;&#22914;&#26524;&#20320;&#24050;&#32463;&#36890;&#36807;
      <tt class="classname">BeanNameAutoProxyCreator</tt>&#25110;&#31867;&#20284;&#30340;&#19996;&#35199;&#26174;&#24335;&#20351;&#29992;auto-proxying&#65292;&#23427;&#21487;&#33021;&#20250;&#23548;&#33268;&#38382;&#39064;
      &#65288;&#20363;&#22914;&#36890;&#30693;&#27809;&#26377;&#34987;&#32455;&#20837;&#65289;&#12290; &#25512;&#33616;&#30340;&#20351;&#29992;&#27169;&#24335;&#26159;&#20165;&#20165;&#20351;&#29992;<tt class="literal">&lt;aop:config&gt;</tt>&#39118;&#26684;&#65292;
      &#25110;&#32773;&#20165;&#20165;&#20351;&#29992;<tt class="interfacename">AutoProxyCreator</tt>&#39118;&#26684;&#12290;</p></td></tr></table></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-schema-declaring-an-aspect"></a>6.3.1.&nbsp;&#22768;&#26126;&#19968;&#20010;&#20999;&#38754;</h3></div></div><div></div></div>

&#12288;&#12288;&#12288;<p>&#26377;&#20102;schema&#30340;&#25903;&#25345;&#65292;&#20999;&#38754;&#23601;&#21644;&#24120;&#35268;&#30340;Java&#23545;&#35937;&#19968;&#26679;&#34987;&#23450;&#20041;&#25104;application context&#20013;&#30340;&#19968;&#20010;bean&#12290;
	&#12288;  &#23545;&#35937;&#30340;&#23383;&#27573;&#21644;&#26041;&#27861;&#25552;&#20379;&#20102;&#29366;&#24577;&#21644;&#34892;&#20026;&#20449;&#24687;&#65292;XML&#25991;&#20214;&#21017;&#25552;&#20379;&#20102;&#20999;&#20837;&#28857;&#21644;&#36890;&#30693;&#20449;&#24687;&#12290;</p>
	&#12288;  <p>&#20999;&#38754;&#20351;&#29992;&lt;aop:aspect&gt;&#26469;&#22768;&#26126;&#65292;backing bean&#65288;&#25903;&#25345;bean&#65289;&#36890;&#36807; <tt class="literal">ref</tt> &#23646;&#24615;&#26469;&#24341;&#29992;&#65306;</p><pre class="programlisting">&lt;aop:config&gt;
  &lt;aop:aspect id="myAspect" ref="aBean"&gt;
    ...
  &lt;/aop:aspect&gt;
&lt;/aop:config&gt;

&lt;bean id="aBean" class="..."&gt;
  ...
&lt;/bean&gt;</pre><p>&#20999;&#38754;&#30340;&#25903;&#25345;bean&#65288;&#19978;&#20363;&#20013;&#30340;"<tt class="literal">aBean</tt>"&#65289;&#21487;&#20197;&#35937;&#20854;&#20182;Spring bean&#19968;&#26679;&#34987;&#23481;&#22120;&#31649;&#29702;&#37197;&#32622;&#20197;&#21450;&#20381;&#36182;&#27880;&#20837;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-schema-pointcuts"></a>6.3.2.&nbsp;&#22768;&#26126;&#19968;&#20010;&#20999;&#20837;&#28857;</h3></div></div><div></div></div>

&#12288;&#12288;&#12288;<p>&#19968;&#20010;&#21629;&#21517;&#20999;&#20837;&#28857;&#21487;&#20197;&#22312;&lt;aop:config&gt;&#20803;&#32032;&#20013;&#23450;&#20041;&#65292;&#36825;&#26679;&#22810;&#20010;&#20999;&#38754;&#21644;&#36890;&#30693;&#23601;&#21487;&#20197;&#20849;&#20139;&#35813;&#20999;&#20837;&#28857;&#12290;</p>
	&#12288;  <p>&#19968;&#20010;&#25551;&#36848;service&#23618;&#20013;&#25152;&#26377;service&#25191;&#34892;&#30340;&#20999;&#20837;&#28857;&#21487;&#20197;&#23450;&#20041;&#22914;&#19979;&#65306;</p><pre class="programlisting">&lt;aop:config&gt;

  &lt;aop:pointcut id="businessService" 
        expression="execution&#65288;* com.xyz.myapp.service.*.*&#65288;..&#65289;&#65289;"/&gt;

&lt;/aop:config&gt;</pre>

&#12288;&#12288;&#12288;<p>&#27880;&#24847;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#26412;&#36523;&#20351;&#29992;&#20102;&#19982;<a href="aop.html#aop-ataspectj" title="6.2.&nbsp;@AspectJ&#25903;&#25345;">Section&nbsp;6.2, &#8220;@AspectJ&#25903;&#25345;&#8221;</a>&#20013;&#25551;&#36848;&#30340;&#30456;&#21516;&#30340;AspectJ&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#35821;&#35328;&#12290;
	&#12288;  &#22914;&#26524;&#20320;&#22312;Java 5&#29615;&#22659;&#19979;&#20351;&#29992;&#22522;&#20110;schema&#30340;&#22768;&#26126;&#39118;&#26684;&#65292;&#21487;&#21442;&#32771;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#31867;&#22411;&#65288;@Aspects&#65289;&#20013;&#23450;&#20041;&#30340;&#21629;&#21517;&#20999;&#20837;&#28857;&#65292;
	&#12288;  &#19981;&#36807;&#36825;&#20010;&#29305;&#24615;&#22312;JDK1.4&#21450;&#20197;&#19979;&#29256;&#26412;&#20013;&#26159;&#19981;&#21487;&#29992;&#30340;&#65288;&#22240;&#20026;&#20381;&#36182;&#20110;Java 5&#20013;&#30340;AspectJ&#21453;&#23556;API&#65289;&#12290;&#25152;&#20197;&#22312;JDK 1.5&#20013;&#65292;
	&#12288;  &#19978;&#38754;&#30340;&#20999;&#20837;&#28857;&#30340;&#21478;&#22806;&#19968;&#31181;&#23450;&#20041;&#24418;&#24335;&#22914;&#19979;&#65306;
	&#12288;  </p><pre class="programlisting">&lt;aop:config&gt;

  &lt;aop:pointcut id="businessService" 
        expression="com.xyz.myapp.SystemArchitecture.businessService&#65288;&#65289;"/&gt;

&lt;/aop:config&gt;</pre><p>&#20551;&#23450;&#20320;&#26377;&#19968;&#20010;&#22312;<a href="aop.html#aop-common-pointcuts" title="6.2.3.3.&nbsp;&#20849;&#20139;&#36890;&#29992;&#20999;&#20837;&#28857;&#23450;&#20041;">Section&nbsp;6.2.3.3, &#8220;&#20849;&#20139;&#36890;&#29992;&#20999;&#20837;&#28857;&#23450;&#20041;&#8221;</a>&#20013;
      &#25551;&#36848;&#30340;<tt class="literal">SystemArchitecture</tt>&#20999;&#38754;&#12290;</p><p>&#22312;&#20999;&#38754;&#37324;&#38754;&#22768;&#26126;&#19968;&#20010;&#20999;&#20837;&#28857;&#21644;&#22768;&#26126;&#19968;&#20010;&#39030;&#32423;&#30340;&#20999;&#20837;&#28857;&#38750;&#24120;&#31867;&#20284;&#65306;</p><pre class="programlisting">&lt;aop:config&gt;

  &lt;aop:aspect id="myAspect" ref="aBean"&gt;

    &lt;aop:pointcut id="businessService" 
          expression="execution&#65288;* com.xyz.myapp.service.*.*&#65288;..&#65289;&#65289;"/&gt;
          
    ...
    
  &lt;/aop:aspect&gt;

&lt;/aop:config&gt;</pre><p>&#20960;&#20046;&#21644;@AspectJ&#20999;&#38754;&#20013;&#30340;&#19968;&#26679;&#65292;&#20351;&#29992;&#22522;&#20110;schema&#23450;&#20041;&#39118;&#26684;&#22768;&#26126;&#30340;&#20999;&#20837;&#28857;&#21487;&#20197;&#25910;&#38598;(collect)
      &#36830;&#25509;&#28857;&#19978;&#19979;&#25991;&#12290;&#20363;&#22914;&#65292;&#19979;&#38754;&#30340;&#20999;&#20837;&#28857;&#25910;&#38598;'this'&#23545;&#35937;&#20316;&#20026;&#36830;&#25509;&#28857;&#19978;&#19979;&#25991;&#24182;&#20256;&#36882;&#23427;&#32473;&#36890;&#30693;&#65306;</p><pre class="programlisting">&lt;aop:config&gt;

  &lt;aop:aspect id="myAspect" ref="aBean"&gt;

    &lt;aop:pointcut id="businessService" 
          expression="execution&#65288;* com.xyz.myapp.service.*.*&#65288;..&#65289;&#65289; &amp;amp;&amp;amp; this&#65288;service&#65289;"/&gt;
    &lt;aop:before pointcut-ref="businessService" method="monitor"/&gt;
    ...
    
  &lt;/aop:aspect&gt;

&lt;/aop:config&gt;</pre>

&#12288;&#12288;&#12288;<p>&#36890;&#36807;&#21253;&#21547;&#21305;&#37197;&#21517;&#23383;&#30340;&#21442;&#25968;&#65292;&#36890;&#30693;&#34987;&#22768;&#26126;&#26469;&#25509;&#25910;&#25910;&#38598;&#30340;&#36830;&#25509;&#28857;&#19978;&#19979;&#25991;&#65306;</p><pre class="programlisting">public void monitor&#65288;Object service&#65289; {
    ...
}</pre>

&#12288;&#12288;&#12288;<p>&#24403;&#38656;&#35201;&#36830;&#25509;&#23376;&#34920;&#36798;&#24335;&#30340;&#26102;&#20505;&#65292;'&amp;&amp;'&#22312;XML&#20013;&#29992;&#36215;&#26469;&#38750;&#24120;&#19981;&#26041;&#20415;&#65292;&#25152;&#20197;&#20851;&#38190;&#23383;'and', 'or' &#21644; 'not'&#21487;&#20197;&#20998;&#21035;&#29992;&#26469;&#20195;&#26367;'&amp;&amp;', '||' &#21644; '!'&#12290;&#20363;&#22914;&#65292;&#19978;&#38754;&#20999;&#20837;&#28857;&#26356;&#22909;&#30340;&#20889;&#27861;&#22914;&#19979;&#65306;</p><pre class="programlisting">&lt;aop:config&gt;

  &lt;aop:aspect id="myAspect" ref="aBean"&gt;

    &lt;aop:pointcut id="businessService" 
          expression="execution&#65288;* com.xyz.myapp.service.*.*&#65288;..&#65289;&#65289; <span class="bold"><b>and</b></span> this&#65288;service&#65289;"/&gt;
    &lt;aop:before pointcut-ref="businessService" method="monitor"/&gt;
    ...
    
  &lt;/aop:aspect&gt;

&lt;/aop:config&gt;</pre><p>&#27880;&#24847;&#36825;&#31181;&#26041;&#24335;&#23450;&#20041;&#30340;&#20999;&#20837;&#28857;&#36890;&#36807;XML id&#26469;&#26597;&#25214;&#65292;&#24182;&#19988;&#19981;&#33021;&#23450;&#20041;&#20999;&#20837;&#28857;&#21442;&#25968;&#12290;&#22312;&#22522;&#20110;schema&#30340;&#23450;&#20041;&#39118;&#26684;&#20013;
      &#21629;&#21517;&#20999;&#20837;&#28857;&#25903;&#25345;&#36739;&#20043;@AspectJ&#39118;&#26684;&#21463;&#21040;&#20102;&#24456;&#22810;&#30340;&#38480;&#21046;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-schema-advice"></a>6.3.3.&nbsp;&#22768;&#26126;&#36890;&#30693;</h3></div></div><div></div></div>

    &#12288;<p>&#21644;@AspectJ&#39118;&#26684;&#19968;&#26679;&#65292;&#22522;&#20110;schema&#30340;&#39118;&#26684;&#20063;&#25903;&#25345;5&#31181;&#36890;&#30693;&#31867;&#22411;&#24182;&#19988;&#20004;&#32773;&#20855;&#26377;&#21516;&#26679;&#30340;&#35821;&#20041;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-schema-advice-before"></a>6.3.3.1.&nbsp;&#21069;&#32622;&#36890;&#30693;</h4></div></div><div></div></div>
&#12288;&#12288;&#12288;&#12288;<p>&#21069;&#32622;&#36890;&#30693;&#22312;&#21305;&#37197;&#26041;&#27861;&#25191;&#34892;&#21069;&#36816;&#34892;&#12290;&#22312;<tt class="literal">&lt;aop:aspect&gt;</tt>&#20013;&#20351;&#29992;&lt;aop:before&gt;
		    &#20803;&#32032;&#26469;&#22768;&#26126;&#23427;&#12290;</p><pre class="programlisting">&lt;aop:aspect id="beforeExample" ref="aBean"&gt;

    &lt;aop:before 
      pointcut-ref="dataAccessOperation" 
      method="doAccessCheck"/&gt;
          
    ...
    
&lt;/aop:aspect&gt;</pre>

&#12288;&#12288;&#12288;&#12288;<p>&#36825;&#37324;<tt class="literal">dataAccessOperation</tt>&#26159;&#19968;&#20010;&#39030;&#32423;&#65288;<tt class="literal">&lt;aop:config&gt;</tt>&#65289;&#20999;&#20837;&#28857;&#30340;id&#12290;
&#12288;&#12288;&#12288;&#12288;&#32780;&#35201;&#23450;&#20041;&#20869;&#32622;&#20999;&#20837;&#28857;&#65292;&#38656;&#23558;<tt class="literal">pointcut-ref</tt>&#23646;&#24615;&#26367;&#25442;&#20026;<tt class="literal">pointcut</tt>&#23646;&#24615;&#65306;
		    </p><pre class="programlisting">&lt;aop:aspect id="beforeExample" ref="aBean"&gt;

    &lt;aop:before 
      pointcut="execution&#65288;* com.xyz.myapp.dao.*.*&#65288;..&#65289;&#65289;" 
      method="doAccessCheck"/&gt;
          
    ...
    
&lt;/aop:aspect&gt;</pre>

&#12288;&#12288;&#12288;&#12288;<p>&#27491;&#22914;&#25105;&#20204;&#22312;@AspectJ&#39118;&#26684;&#31456;&#33410;&#20013;&#35752;&#35770;&#36807;&#30340;&#65292;&#20351;&#29992;&#21629;&#21517;&#20999;&#20837;&#28857;&#33021;&#22815;&#26126;&#26174;&#30340;&#25552;&#39640;&#20195;&#30721;&#30340;&#21487;&#35835;&#24615;&#12290;</p><p>Method&#23646;&#24615;&#26631;&#35782;&#20102;&#25552;&#20379;&#36890;&#30693;&#20027;&#20307;&#30340;&#26041;&#27861;&#65288;<tt class="literal">doAccessCheck</tt>&#65289;&#12290;
        &#36825;&#20010;&#26041;&#27861;&#24517;&#39035;&#23450;&#20041;&#22312;&#21253;&#21547;&#36890;&#30693;&#30340;&#20999;&#38754;&#20803;&#32032;&#25152;&#24341;&#29992;&#30340;bean&#20013;&#12290;&#22312;&#19968;&#20010;&#25968;&#25454;&#35775;&#38382;&#25805;&#20316;&#25191;&#34892;&#20043;&#21069;
    		&#65288;&#19968;&#20010;&#26041;&#27861;&#25191;&#34892;&#30001;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#25152;&#21305;&#37197;&#30340;&#36830;&#25509;&#28857;&#65289;&#65292;&#20999;&#38754;&#20013;&#30340;"doAccessCheck"&#20250;&#34987;&#35843;&#29992;&#12290;
    		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-schema-advice-after-returning"></a>6.3.3.2.&nbsp;&#21518;&#32622;&#36890;&#30693;</h4></div></div><div></div></div><p>&#21518;&#32622;&#36890;&#30693;&#22312;&#21305;&#37197;&#30340;&#26041;&#27861;&#23436;&#20840;&#25191;&#34892;&#21518;&#36816;&#34892;&#12290;&#21644;&#21069;&#32622;&#36890;&#30693;&#19968;&#26679;&#65292;&#21487;&#20197;&#22312;<tt class="literal">&lt;aop:aspect&gt;</tt>
        &#37324;&#38754;&#22768;&#26126;&#23427;&#12290;&#20363;&#22914;&#65306;</p><pre class="programlisting">&lt;aop:aspect id="afterReturningExample" ref="aBean"&gt;

    &lt;aop:after-returning 
      pointcut-ref="dataAccessOperation" 
      method="doAccessCheck"/&gt;
          
    ...
    
&lt;/aop:aspect&gt;</pre><p>&#21644;@AspectJ&#39118;&#26684;&#19968;&#26679;&#65292;&#36890;&#30693;&#20027;&#20307;&#21487;&#20197;&#24471;&#21040;&#36820;&#22238;&#20540;&#12290;&#20351;&#29992;returning&#23646;&#24615;&#26469;&#25351;&#23450;&#20256;&#36882;&#36820;&#22238;&#20540;&#30340;&#21442;&#25968;&#21517;&#65306;</p><pre class="programlisting">&lt;aop:aspect id="afterReturningExample" ref="aBean"&gt;

    &lt;aop:after-returning 
      pointcut-ref="dataAccessOperation"
      returning="retVal" 
      method="doAccessCheck"/&gt;
          
    ...
    
&lt;/aop:aspect&gt;</pre><p>doAccessCheck&#26041;&#27861;&#24517;&#39035;&#22768;&#26126;&#19968;&#20010;&#21517;&#23383;&#21483; <tt class="literal">retVal</tt> &#30340;&#21442;&#25968;&#12290;
		    &#21442;&#25968;&#30340;&#31867;&#22411;&#20381;&#29031;@AfterReturning&#25152;&#25551;&#36848;&#30340;&#26041;&#27861;&#24378;&#21046;&#21305;&#37197;&#12290;&#20363;&#22914;&#65292;&#26041;&#27861;&#31614;&#21517;&#21487;&#20197;&#36825;&#26679;&#22768;&#26126;&#65306;
		    </p><pre class="programlisting">public void doAccessCheck&#65288;Object retVal&#65289; {...</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-schema-advice-after-throwing"></a>6.3.3.3.&nbsp;&#24322;&#24120;&#36890;&#30693;</h4></div></div><div></div></div><p>&#24322;&#24120;&#36890;&#30693;&#22312;&#21305;&#37197;&#26041;&#27861;&#25243;&#20986;&#24322;&#24120;&#36864;&#20986;&#26102;&#25191;&#34892;&#12290;&#22312;<tt class="literal">&lt;aop:aspect&gt;</tt>&#20013;&#20351;&#29992;
        after-throwing&#20803;&#32032;&#26469;&#22768;&#26126;&#65306;</p><pre class="programlisting">&lt;aop:aspect id="afterThrowingExample" ref="aBean"&gt;

    &lt;aop:after-throwing
      pointcut-ref="dataAccessOperation" 
      method="doRecoveryActions"/&gt;
          
    ...
    
&lt;/aop:aspect&gt;</pre><p>&#21644;@AspectJ&#39118;&#26684;&#19968;&#26679;&#65292;&#36890;&#30693;&#20027;&#20307;&#21487;&#20197;&#24471;&#21040;&#25243;&#20986;&#30340;&#24322;&#24120;&#12290;&#20351;&#29992;throwing&#23646;&#24615;&#26469;&#25351;&#23450;&#20256;&#36882;&#24322;&#24120;&#30340;&#21442;&#25968;&#21517;&#65306;</p><pre class="programlisting">&lt;aop:aspect id="afterThrowingExample" ref="aBean"&gt;

    &lt;aop:after-throwing 
      pointcut-ref="dataAccessOperation"
      throwing="dataAccessEx" 
      method="doRecoveryActions"/&gt;
          
    ...
    
&lt;/aop:aspect&gt;</pre><p>doRecoveryActions&#26041;&#27861;&#24517;&#39035;&#22768;&#26126;&#19968;&#20010;&#21517;&#23383;&#20026;<tt class="literal">dataAccessEx</tt>&#30340;&#21442;&#25968;&#12290;
        &#21442;&#25968;&#30340;&#31867;&#22411;&#20381;&#29031;@AfterThrowing&#25152;&#25551;&#36848;&#30340;&#26041;&#27861;&#24378;&#21046;&#21305;&#37197;&#12290;&#20363;&#22914;&#65306;&#26041;&#27861;&#31614;&#21517;&#21487;&#20197;&#22914;&#19979;&#36825;&#33324;&#22768;&#26126;&#65306;</p><pre class="programlisting">public void doRecoveryActions&#65288;DataAccessException dataAccessEx&#65289; {...</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-schema-advice-after-finally"></a>6.3.3.4.&nbsp;&#26368;&#32456;&#36890;&#30693;</h4></div></div><div></div></div><p>&#26368;&#32456;&#36890;&#30693;&#26080;&#35770;&#22914;&#20309;&#37117;&#20250;&#22312;&#21305;&#37197;&#26041;&#27861;&#36864;&#20986;&#21518;&#25191;&#34892;&#12290;&#20351;&#29992;<tt class="literal">after</tt>&#20803;&#32032;&#26469;&#22768;&#26126;&#23427;&#65306;</p><pre class="programlisting">&lt;aop:aspect id="afterFinallyExample" ref="aBean"&gt;

    &lt;aop:after
      pointcut-ref="dataAccessOperation" 
      method="doReleaseLock"/&gt;
          
    ...
    
&lt;/aop:aspect&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-schema-advice-around"></a>6.3.3.5.&nbsp;&#29615;&#32469;&#36890;&#30693;</h4></div></div><div></div></div><p>&#29615;&#32469;&#36890;&#30693;&#26159;&#26368;&#21518;&#19968;&#31181;&#36890;&#30693;&#31867;&#22411;&#12290;&#29615;&#32469;&#36890;&#30693;&#22312;&#21305;&#37197;&#26041;&#27861;&#36816;&#34892;&#26399;&#30340;&#8220;&#21608;&#22260;&#8221;&#25191;&#34892;&#12290;
        &#23427;&#26377;&#26426;&#20250;&#22312;&#30446;&#26631;&#26041;&#27861;&#30340;&#21069;&#38754;&#21644;&#21518;&#38754;&#25191;&#34892;&#65292;&#24182;&#20915;&#23450;&#20160;&#20040;&#26102;&#20505;&#36816;&#34892;&#65292;&#24590;&#20040;&#36816;&#34892;&#65292;&#29978;&#33267;&#26159;&#21542;&#36816;&#34892;&#12290;
        &#29615;&#32469;&#36890;&#30693;&#32463;&#24120;&#22312;&#38656;&#35201;&#22312;&#19968;&#20010;&#26041;&#27861;&#25191;&#34892;&#21069;&#21518;&#20849;&#20139;&#29366;&#24577;&#20449;&#24687;&#65292;&#24182;&#19988;&#26159;&#22312;&#32447;&#31243;&#23433;&#20840;&#30340;&#24773;&#20917;&#19979;&#20351;&#29992;
        &#65288;&#21551;&#21160;&#21644;&#20572;&#27490;&#19968;&#20010;&#35745;&#26102;&#22120;&#23601;&#26159;&#19968;&#20010;&#20363;&#23376;&#65289;&#12290;&#27880;&#24847;&#36873;&#25321;&#33021;&#28385;&#36275;&#20320;&#38656;&#27714;&#30340;&#26368;&#31616;&#21333;&#30340;&#36890;&#30693;&#31867;&#22411;&#65307;
        &#22914;&#26524;&#31616;&#21333;&#30340;&#21069;&#32622;&#36890;&#30693;&#33021;&#20570;&#30340;&#20107;&#24773;&#23601;&#32477;&#23545;&#19981;&#35201;&#20351;&#29992;&#29615;&#32469;&#36890;&#30693;&#12290;</p><p>Around&#36890;&#30693;&#20351;&#29992;<tt class="literal">aop:around</tt>&#20803;&#32032;&#26469;&#22768;&#26126;&#12290;&#36890;&#30693;&#26041;&#27861;&#30340;&#31532;&#19968;&#20010;&#21442;&#25968;&#30340;&#31867;&#22411;&#24517;&#39035;&#26159;
        <tt class="interfacename">ProceedingJoinPoint</tt>&#31867;&#22411;&#12290;&#22312;&#36890;&#30693;&#30340;&#20027;&#20307;&#20013;&#65292;&#35843;&#29992;
        <tt class="interfacename">ProceedingJoinPoint</tt>&#30340;<tt class="literal">proceed()</tt>&#26041;&#27861;&#26469;&#25191;&#34892;&#30495;&#27491;&#30340;&#26041;&#27861;&#12290;
        <tt class="literal">proceed</tt>&#26041;&#27861;&#20063;&#21487;&#33021;&#20250;&#34987;&#35843;&#29992;&#24182;&#19988;&#20256;&#20837;&#19968;&#20010;<tt class="classname">Object[]</tt>&#23545;&#35937; - 
        &#35813;&#25968;&#32452;&#23558;&#20316;&#20026;&#26041;&#27861;&#25191;&#34892;&#26102;&#20505;&#30340;&#21442;&#25968;&#12290;&#21442;&#35265;<a href="aop.html#aop-ataspectj-around-advice" title="6.2.4.5.&nbsp;&#29615;&#32469;&#36890;&#30693;">Section&nbsp;6.2.4.5, &#8220;&#29615;&#32469;&#36890;&#30693;&#8221;</a>&#20013;&#35843;&#29992;&#20855;&#26377;
        <tt class="classname">Object[]</tt>&#30340;proceed&#26041;&#27861;&#12290;</p><pre class="programlisting">&lt;aop:aspect id="aroundExample" ref="aBean"&gt;

    &lt;aop:around
      pointcut-ref="businessService" 
      method="doBasicProfiling"/&gt;
          
    ...
    
&lt;/aop:aspect&gt;</pre><p><tt class="literal">doBasicProfiling</tt>&#36890;&#30693;&#30340;&#23454;&#29616;&#21644;@AspectJ&#20013;&#30340;&#20363;&#23376;&#23436;&#20840;&#19968;&#26679;&#65288;&#24403;&#28982;&#35201;&#21435;&#25481;&#27880;&#35299;&#65289;&#65306;</p><pre class="programlisting">public Object doBasicProfiling&#65288;ProceedingJoinPoint pjp&#65289; throws Throwable {
    <i class="lineannotation"><span class="lineannotation">// start stopwatch</span></i>
    Object retVal = pjp.proceed&#65288;&#65289;;
    <i class="lineannotation"><span class="lineannotation">// stop stopwatch</span></i>
    return retVal;
}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-schema-params"></a>6.3.3.6.&nbsp;&#36890;&#30693;&#21442;&#25968;</h4></div></div><div></div></div><p>Schema-based&#22768;&#26126;&#39118;&#26684;&#21644;@AspectJ&#19968;&#26679;&#65292;&#25903;&#25345;&#22810;&#31181;&#31867;&#22411;&#30340;&#36890;&#30693;&#65306;&#36890;&#36807;&#36890;&#30693;&#26041;&#27861;&#21442;&#25968;&#21517;&#23383;&#26469;&#21305;&#37197;&#20999;&#20837;&#28857;&#21442;&#25968;&#12290;
        &#21442;&#35265;<a href="aop.html#aop-ataspectj-advice-params" title="6.2.4.6.&nbsp;&#36890;&#30693;&#21442;&#25968;&#65288;Advice parameters&#65289;">Section&nbsp;6.2.4.6, &#8220;&#36890;&#30693;&#21442;&#25968;&#65288;Advice parameters&#65289;&#8221;</a>&#33719;&#21462;&#35814;&#32454;&#20449;&#24687;&#12290;&#22914;&#26524;&#20320;&#24076;&#26395;&#26174;&#24335;&#25351;&#23450;&#36890;&#30693;&#26041;&#27861;&#30340;&#21442;&#25968;&#21517;
        &#65288;&#32780;&#19981;&#26159;&#20381;&#38752;&#20808;&#21069;&#25552;&#21450;&#30340;&#20390;&#27979;&#31574;&#30053;&#65289;&#65292;&#21487;&#20197;&#36890;&#36807;&#36890;&#30693;&#20803;&#32032;&#30340;<tt class="literal">arg-names</tt>&#23646;&#24615;&#26469;&#23454;&#29616;&#65292;&#23427;&#30340;&#22788;&#29702;&#21644;
        &#22312;<a href="aop.html#aop-ataspectj-advice-params-names" title="6.2.4.6.3.&nbsp;&#30830;&#23450;&#21442;&#25968;&#21517;">Section&nbsp;6.2.4.6.3, &#8220;&#30830;&#23450;&#21442;&#25968;&#21517;&#8221;</a>&#20013;&#25152;&#25551;&#36848;&#30340;&#23545;&#36890;&#30693;&#27880;&#35299;&#20013;"argNames"&#23646;&#24615;&#30340;&#22788;&#29702;&#26041;&#24335;&#19968;&#26679;&#12290;
        &#31034;&#20363;&#22914;&#19979;&#65306;</p><pre class="programlisting">&lt;aop:before
  pointcut="com.xyz.lib.Pointcuts.anyPublicMethod&#65288;&#65289; and @annotation&#65288;auditable&#65289;"
  method="audit"
  arg-names="auditable"/&gt;</pre><p><tt class="literal">arg-names</tt>&#23646;&#24615;&#25509;&#21463;&#30001;&#36887;&#21495;&#20998;&#21106;&#30340;&#21442;&#25968;&#21517;&#21015;&#34920;&#12290;</p><p>&#19979;&#38754;&#26159;&#20010;&#31245;&#24494;&#22797;&#26434;&#30340;&#22522;&#20110;XSD&#30340;&#20363;&#23376;&#65292;&#23427;&#23637;&#31034;&#20102;&#20851;&#32852;&#20102;&#22810;&#20010;&#24378;&#31867;&#22411;&#21442;&#25968;&#30340;&#29615;&#32469;&#36890;&#30693;&#30340;&#20351;&#29992;&#12290;</p><pre class="programlisting">package x.y.service;

public interface FooService {

   Foo getFoo&#65288;String fooName, int age&#65289;;
}

public class DefaultFooService implements FooService {

   public Foo getFoo&#65288;String name, int age&#65289; {
      return new Foo&#65288;name, age&#65289;;
   }
}</pre><p>&#25509;&#19979;&#26469;&#30475;&#20999;&#38754;&#12290;&#27880;&#24847;<tt class="methodname">profile&#65288;..&#65289;</tt>&#26041;&#27861;&#25509;&#21463;&#22810;&#20010;&#24378;&#31867;&#22411;&#21442;&#25968;&#65292;
        &#39318;&#20808;&#36830;&#25509;&#28857;&#22312;&#26041;&#27861;&#35843;&#29992;&#26102;&#25191;&#34892;&#65292;&#36825;&#20010;&#21442;&#25968;&#25351;&#26126;<tt class="methodname">profile&#65288;..&#65289;</tt>&#20250;&#34987;&#29992;&#20316;
        <tt class="literal">&#29615;&#32469;</tt>&#36890;&#30693;&#65306;</p><pre class="programlisting">package x.y;

import org.aspectj.lang.ProceedingJoinPoint;
import org.springframework.util.StopWatch;

public class SimpleProfiler {

   public Object profile&#65288;ProceedingJoinPoint call, String name, int age&#65289; throws Throwable {
      StopWatch clock = new StopWatch&#65288;
            "Profiling for '" + name + "' and '" + age + "'"&#65289;;
      try {
         clock.start&#65288;call.toShortString&#65288;&#65289;&#65289;;
         return call.proceed&#65288;&#65289;;
      } finally {
         clock.stop&#65288;&#65289;;
         System.out.println&#65288;clock.prettyPrint&#65288;&#65289;&#65289;;
      }
   }
}</pre><p>&#26368;&#21518;&#36825;&#37324;&#26159;&#20351;&#24471;&#19978;&#38754;&#30340;&#36890;&#30693;&#38024;&#23545;&#19968;&#20010;&#29305;&#23450;&#36830;&#25509;&#28857;&#32780;&#25191;&#34892;&#25152;&#24517;&#38656;&#30340;XML&#37197;&#32622;&#65306;</p><pre class="programlisting">&lt;beans xmlns="http://www.springframework.org/schema/beans"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:aop="http://www.springframework.org/schema/aop"
      xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd"&gt;

   <i class="lineannotation"><span class="lineannotation">&lt;!-- this is the object that will be proxied by Spring's AOP infrastructure --&gt;</span></i>
   &lt;bean id="fooService" class="x.y.service.DefaultFooService"/&gt;

   <i class="lineannotation"><span class="lineannotation">&lt;!-- this is the actual advice itself --&gt;</span></i>
   &lt;bean id="profiler" class="x.y.SimpleProfiler"/&gt;

   &lt;aop:config&gt;
      &lt;aop:aspect ref="profiler"&gt;

         &lt;aop:pointcut id="theExecutionOfSomeFooServiceMethod"
                    expression="execution&#65288;* x.y.service.FooService.getFoo&#65288;String,int&#65289;&#65289;
                    and args&#65288;name, age&#65289;"/&gt;

         &lt;aop:around pointcut-ref="theExecutionOfSomeFooServiceMethod"
                  method="profile"/&gt;

      &lt;/aop:aspect&gt;
   &lt;/aop:config&gt;

&lt;/beans&gt;</pre><p>&#22914;&#26524;&#25105;&#20204;&#26377;&#19979;&#38754;&#30340;&#39537;&#21160;&#33050;&#26412;&#65292;&#25105;&#20204;&#23558;&#22312;&#26631;&#20934;&#36755;&#20986;&#19978;&#24471;&#21040;&#22914;&#19979;&#30340;&#36755;&#20986;&#65306;</p><pre class="programlisting">import org.springframework.beans.factory.BeanFactory;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import x.y.service.FooService;

public final class Boot {

   public static void main&#65288;final String[] args&#65289; throws Exception {
      BeanFactory ctx = new ClassPathXmlApplicationContext&#65288;"x/y/plain.xml"&#65289;;
      FooService foo = &#65288;FooService&#65289; ctx.getBean&#65288;"fooService"&#65289;;
      foo.getFoo&#65288;"Pengo", 12&#65289;;
   }
}</pre><pre class="programlisting">StopWatch 'Profiling for 'Pengo' and '12'': running time &#65288;millis&#65289; = 0
-----------------------------------------
ms     %     Task name
-----------------------------------------
00000  ?  execution&#65288;getFoo&#65289;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-ordering"></a>6.3.3.7.&nbsp;&#36890;&#30693;&#39034;&#24207;</h4></div></div><div></div></div><p>&#24403;&#21516;&#19968;&#20010;&#20999;&#20837;&#28857;&#65288;&#25191;&#34892;&#26041;&#27861;&#65289;&#19978;&#26377;&#22810;&#20010;&#36890;&#30693;&#38656;&#35201;&#25191;&#34892;&#26102;&#65292;&#25191;&#34892;&#39034;&#24207;&#30340;&#35268;&#21017;&#22914;
        <a href="aop.html#aop-ataspectj-advice-ordering" title="6.2.4.7.&nbsp;&#36890;&#30693;&#39034;&#24207;">Section&nbsp;6.2.4.7, &#8220;&#36890;&#30693;&#39034;&#24207;&#8221;</a>&#25152;&#36848;&#12290;&#20999;&#38754;&#30340;&#20248;&#20808;&#32423;&#36890;&#36807;&#32473;&#20999;&#38754;&#30340;&#25903;&#25345;bean&#22686;&#21152;
        <tt class="interfacename">Order</tt>&#27880;&#35299;&#25110;&#32773;&#20351;&#20999;&#38754;&#30340;&#25903;&#25345;bean&#23454;&#29616;
        <tt class="interfacename">Ordered</tt>&#25509;&#21475;&#26469;&#20915;&#23450;&#12290;
	&#12288;&#12288;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-schema-introductions"></a>6.3.4.&nbsp;&#24341;&#20837;</h3></div></div><div></div></div><p>&#24341;&#20837;&#65288;&#22312;AspectJ&#20013;&#31216;&#20026;inter-type&#22768;&#26126;&#65289;&#20801;&#35768;&#19968;&#20010;&#20999;&#38754;&#22768;&#26126;&#19968;&#20010;&#36890;&#30693;&#23545;&#35937;&#23454;&#29616;&#25351;&#23450;&#25509;&#21475;&#65292;
      &#24182;&#19988;&#25552;&#20379;&#20102;&#19968;&#20010;&#25509;&#21475;&#23454;&#29616;&#31867;&#26469;&#20195;&#34920;&#36825;&#20123;&#23545;&#35937;&#12290;</p><p>&#24341;&#20837;&#30340;&#23450;&#20041;&#20351;&#29992;<tt class="literal">aop:aspect</tt>&#20013;&#30340;<tt class="literal">aop:declare-parents</tt>&#20803;&#32032;&#12290;
			&#35813;&#20803;&#32032;&#29992;&#20110;&#22768;&#26126;&#25152;&#21305;&#37197;&#30340;&#31867;&#22411;&#26377;&#19968;&#20010;&#26032;&#30340;&#29238;&#31867;&#22411;&#65288;&#25152;&#20197;&#26377;&#20102;&#36825;&#20010;&#21517;&#23383;&#65289;&#12290;
			&#20363;&#22914;&#65292;&#32473;&#23450;&#25509;&#21475;<tt class="interfacename">UsageTracked</tt>&#65292;
			&#20197;&#21450;&#36825;&#20010;&#25509;&#21475;&#30340;&#19968;&#20010;&#23454;&#29616;&#31867; <tt class="classname">DefaultUsageTracked</tt>&#65292;
		  &#19979;&#38754;&#30340;&#20999;&#38754;&#22768;&#26126;&#25152;&#26377;&#23454;&#29616;service&#25509;&#21475;&#30340;&#31867;&#21516;&#26102;&#23454;&#29616; <tt class="interfacename">UsageTracked</tt>
		  &#25509;&#21475;&#12290;&#65288;&#27604;&#22914;&#20026;&#20102;&#36890;&#36807;JMX&#36755;&#20986;&#32479;&#35745;&#20449;&#24687;&#65289;
			</p><pre class="programlisting">&lt;aop:aspect id="usageTrackerAspect" ref="usageTracking"&gt;

  &lt;aop:declare-parents
      types-matching="com.xzy.myapp.service.*+"
      implement-interface="com.xyz.myapp.service.tracking.UsageTracked"
      default-impl="com.xyz.myapp.service.tracking.DefaultUsageTracked"/&gt;
  
  &lt;aop:before
    pointcut="com.xyz.myapp.SystemArchitecture.businessService&#65288;&#65289;
              and this&#65288;usageTracked&#65289;"
    method="recordUsage"/&gt;
  
&lt;/aop:aspect&gt;</pre><p><tt class="literal">usageTracking</tt> bean&#30340;&#25903;&#25345;&#31867;&#21487;&#20197;&#21253;&#21547;&#19979;&#38754;&#30340;&#26041;&#27861;&#65306;</p><pre class="programlisting">public void recordUsage&#65288;UsageTracked usageTracked&#65289; {
    usageTracked.incrementUseCount&#65288;&#65289;;
}</pre><p>&#35201;&#23454;&#29616;&#30340;&#25509;&#21475;&#30001;<tt class="literal">implement-interface</tt>&#23646;&#24615;&#26469;&#25351;&#23450;&#12290;
	&#12288;<tt class="literal">types-matching</tt>&#23646;&#24615;&#30340;&#20540;&#26159;&#19968;&#20010;AspectJ&#31867;&#22411;&#27169;&#24335;&#65306;&#20219;&#20309;&#21305;&#37197;&#31867;&#22411;&#30340;bean&#37117;&#20250;&#23454;&#29616;
	&#12288;<tt class="interfacename">UsageTracked</tt> &#25509;&#21475;&#12290;&#27880;&#24847;&#22312;&#19978;&#38754;&#21069;&#32622;&#36890;&#30693;&#30340;&#20363;&#23376;&#20013;&#65292;
	  serevice bean&#21487;&#20197;&#30452;&#25509;&#29992;&#20316;<tt class="interfacename">UsageTracked</tt>&#25509;&#21475;&#30340;&#23454;&#29616;&#12290;
	  &#22914;&#26524;&#20197;&#32534;&#31243;&#24418;&#24335;&#35775;&#38382;&#19968;&#20010;bean&#65292;&#20320;&#21487;&#20197;&#36825;&#26679;&#26469;&#20889;&#65306;
	  </p><pre class="programlisting">UsageTracked usageTracked = &#65288;UsageTracked&#65289; context.getBean&#65288;"myService"&#65289;;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-schema-instatiation-models"></a>6.3.5.&nbsp;&#20999;&#38754;&#23454;&#20363;&#21270;&#27169;&#22411;</h3></div></div><div></div></div><p>&#37319;&#29992;Schema&#39118;&#26684;&#26469;&#23450;&#20041;&#20999;&#38754;&#20165;&#25903;&#25345;&#19968;&#31181;&#23454;&#20363;&#21270;&#27169;&#22411;&#23601;&#26159;singlton&#27169;&#22411;&#12290;&#20854;&#20182;&#30340;&#23454;&#20363;&#21270;&#27169;&#22411;&#25110;&#35768;&#20197;&#21518;&#30340;&#29256;&#26412;&#20250;&#25903;&#25345;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-schema-advisors"></a>6.3.6.&nbsp;Advisor</h3></div></div><div></div></div><p>"advisor"&#36825;&#20010;&#27010;&#24565;&#26469;&#33258;Spring1.2&#23545;AOP&#30340;&#25903;&#25345;&#65292;&#32780;&#22312;AspectJ&#20013;&#27809;&#26377;&#31561;&#20215;&#30340;&#27010;&#24565;&#12290;
      advisor&#23601;&#20687;&#19968;&#20010;&#23567;&#30340;&#33258;&#21253;&#21547;&#30340;&#20999;&#38754;&#65292;&#36825;&#20010;&#20999;&#38754;&#21482;&#26377;&#19968;&#20010;&#36890;&#30693;&#12290;&#20999;&#38754;&#33258;&#36523;&#36890;&#36807;&#19968;&#20010;bean&#34920;&#31034;&#65292;
      &#24182;&#19988;&#24517;&#39035;&#23454;&#29616;&#19968;&#20010;&#22312;<a href="aop-api.html#aop-api-advice-types" title="7.3.2.&nbsp;Spring&#37324;&#30340;&#36890;&#30693;&#31867;&#22411;">Section&nbsp;7.3.2, &#8220;Spring&#37324;&#30340;&#36890;&#30693;&#31867;&#22411;&#8221;</a>&#20013;&#25551;&#36848;&#30340;&#36890;&#30693;&#25509;&#21475;&#12290;
      Advisor&#21487;&#20197;&#24456;&#22909;&#30340;&#21033;&#29992;AspectJ&#30340;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#12290;
	&#12288;  </p><p>Spring 2.0&#36890;&#36807;<tt class="literal">&lt;aop:advisor&gt;</tt>&#20803;&#32032;&#26469;&#25903;&#25345;advisor&#27010;&#24565;&#12290;
      &#20320;&#23558;&#20250;&#21457;&#29616;&#22823;&#22810;&#25968;&#24773;&#20917;&#19979;&#23427;&#20250;&#21644;transactional advice&#19968;&#36215;&#20351;&#29992;&#65292;&#22312;Spring 2.0&#20013;&#23427;&#26377;&#33258;&#24049;&#30340;&#21629;&#21517;&#31354;&#38388;&#12290;&#20854;&#26684;&#24335;&#22914;&#19979;&#65306;
	&#12288;  </p><pre class="programlisting">&lt;aop:config&gt;

  &lt;aop:pointcut id="businessService"
        expression="execution&#65288;* com.xyz.myapp.service.*.*&#65288;..&#65289;&#65289;"/&gt;

  &lt;aop:advisor 
      pointcut-ref="businessService"
      advice-ref="tx-advice"/&gt;
      
&lt;/aop:config&gt;

&lt;tx:advice id="tx-advice"&gt;
  &lt;tx:attributes&gt;
    &lt;tx:method name="*" propagation="REQUIRED"/&gt;
  &lt;/tx:attributes&gt;
&lt;/tx:advice&gt;</pre></div><p>&#21644;&#19978;&#38754;&#25152;&#20351;&#29992;&#30340;<tt class="literal">pointcut-ref</tt>&#23646;&#24615;&#19968;&#26679;&#65292;&#20320;&#36824;&#21487;&#20197;&#20351;&#29992;<tt class="literal">pointcut</tt>
    &#23646;&#24615;&#26469;&#23450;&#20041;&#19968;&#20010;&#20869;&#32852;&#30340;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#12290;</p><p>&#20026;&#20102;&#23450;&#20041;&#19968;&#20010;advisor&#30340;&#20248;&#20808;&#32423;&#20197;&#20415;&#35753;&#36890;&#30693;&#20855;&#26377;&#27425;&#24207;&#65292;&#20351;&#29992;<tt class="literal">order</tt>&#23646;&#24615;&#26469;&#23450;&#20041;advisor&#20013;
	  <tt class="literal">Ordered</tt>&#30340;&#20540; &#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-schema-example"></a>6.3.7.&nbsp;&#20363;&#23376;</h3></div></div><div></div></div><p>&#35753;&#25105;&#20204;&#30475;&#30475;<a href="aop.html#aop-ataspectj-example" title="6.2.7.&nbsp;&#20363;&#23376;">Section&nbsp;6.2.7, &#8220;&#20363;&#23376;&#8221;</a>&#20013;&#24182;&#21457;&#38145;&#22833;&#36133;&#37325;&#35797;&#30340;&#20363;&#23376;&#65292;
      &#24403;&#20351;&#29992;schema&#37325;&#20889;&#23427;&#26102;&#26159;&#20160;&#20040;&#26679;&#23376;&#12290;</p><p>&#22240;&#20026;&#24182;&#21457;&#30340;&#38382;&#39064;&#65292;&#26377;&#26102;&#20505;business services&#21487;&#33021;&#20250;&#22833;&#36133;&#65288;&#20363;&#22914;&#65292;&#27515;&#38145;&#22833;&#36133;&#65289;&#12290;&#22914;&#26524;&#37325;&#35797;&#25805;&#20316;&#65292;&#19979;&#19968;&#27425;&#24456;&#21487;&#33021;&#23601;&#20250;&#25104;&#21151;&#12290;
	&#12288;  &#23545;&#20110;business services&#26469;&#35828;&#65292;&#36825;&#31181;&#24773;&#20917;&#19979;&#37325;&#35797;&#26159;&#24456;&#27491;&#24120;&#30340;&#65288;Idempotent&#25805;&#20316;&#19981;&#38656;&#35201;&#29992;&#25143;&#21442;&#19982;&#65292;&#21542;&#21017;&#20250;&#24471;&#20986;&#30683;&#30462;&#30340;&#32467;&#35770;&#65289;
&#12288;&#12288;&#12288;&#25105;&#20204;&#21487;&#33021;&#38656;&#35201;&#36879;&#26126;&#30340;&#37325;&#35797;&#25805;&#20316;&#20197;&#36991;&#20813;&#23458;&#25143;&#30475;&#21040;&#19968;&#20010;<tt class="classname">OptimisticLockingFailureException</tt>
	&#12288;  &#24322;&#24120;&#12290;&#24456;&#26126;&#26174;&#65292;&#22312;&#19968;&#20010;&#27178;&#20999;&#22810;&#23618;&#30340;&#24773;&#20917;&#19979;&#65292;&#36825;&#26159;&#38750;&#24120;&#26377;&#24517;&#35201;&#30340;&#65292;&#22240;&#27492;&#36890;&#36807;&#20999;&#38754;&#26469;&#23454;&#29616;&#26159;&#24456;&#29702;&#24819;&#30340;&#12290;
	&#12288;  </p><p>&#22240;&#20026;&#24819;&#35201;&#37325;&#35797;&#25805;&#20316;&#65292;&#25105;&#20204;&#38656;&#35201;&#20351;&#29992;&#29615;&#32469;&#36890;&#30693;&#65292;&#36825;&#26679;&#23601;&#21487;&#20197;&#22810;&#27425;&#35843;&#29992;proceed()&#26041;&#27861;&#12290;
      &#19979;&#38754;&#26159;&#31616;&#21333;&#30340;&#20999;&#38754;&#23454;&#29616;&#65288;&#21482;&#26159;&#19968;&#20010;schema&#25903;&#25345;&#30340;&#26222;&#36890;Java &#31867;&#65289;&#65306;</p><pre class="programlisting">public class ConcurrentOperationExecutor implements Ordered {
   
   private static final int DEFAULT_MAX_RETRIES = 2;

   private int maxRetries = DEFAULT_MAX_RETRIES;
   private int order = 1;

   public void setMaxRetries&#65288;int maxRetries&#65289; {
      this.maxRetries = maxRetries;
   }
   
   public int getOrder&#65288;&#65289; {
      return this.order;
   }
   
   public void setOrder&#65288;int order&#65289; {
      this.order = order;
   }
   
   public Object doConcurrentOperation&#65288;ProceedingJoinPoint pjp&#65289; throws Throwable { 
      int numAttempts = 0;
      PessimisticLockingFailureException lockFailureException;
      do {
         numAttempts++;
         try { 
            return pjp.proceed&#65288;&#65289;;
         }
         catch&#65288;PessimisticLockingFailureException ex&#65289; {
            lockFailureException = ex;
         }
      }
      while&#65288;numAttempts &lt;= this.maxRetries&#65289;;
      throw lockFailureException;
   }

}</pre><p>&#35831;&#27880;&#24847;&#20999;&#38754;&#23454;&#29616;&#20102;<tt class="interfacename">Ordered</tt>&#25509;&#21475;&#65292;&#36825;&#26679;&#25105;&#20204;&#23601;&#21487;&#20197;&#25226;&#20999;&#38754;&#30340;&#20248;&#20808;&#32423;&#35774;&#23450;&#20026;
      &#39640;&#20110;&#20107;&#21153;&#36890;&#30693;&#65288;&#25105;&#20204;&#27599;&#27425;&#37325;&#35797;&#30340;&#26102;&#20505;&#37117;&#24819;&#35201;&#22312;&#19968;&#20010;&#20840;&#26032;&#30340;&#20107;&#21153;&#20013;&#36827;&#34892;&#65289;&#12290;
      <tt class="literal">maxRetries</tt> &#21644; <tt class="literal">order</tt> &#23646;&#24615;&#37117;&#21487;&#20197;&#22312;Spring&#20013;&#37197;&#32622;&#12290;
      &#20027;&#35201;&#30340;&#21160;&#20316;&#22312;<tt class="literal">doConcurrentOperation</tt> &#36825;&#20010;&#29615;&#32469;&#36890;&#30693;&#26041;&#27861;&#20013;&#21457;&#29983;&#12290;
      &#25105;&#20204;&#39318;&#20808;&#20250;&#23581;&#35797;&#22788;&#29702;&#65292;&#22914;&#26524;&#24471;&#21040;&#19968;&#20010;<tt class="classname">OptimisticLockingFailureException</tt>
      &#24322;&#24120;&#65292;&#25105;&#20204;&#20165;&#20165;&#37325;&#35797;&#30452;&#21040;&#32791;&#23613;&#25152;&#26377;&#39044;&#35774;&#30340;&#37325;&#35797;&#27425;&#25968;&#12290;</p><i><span class="remark">&#36825;&#20010;&#31867;&#36319;&#25105;&#20204;&#22312;@AspectJ&#30340;&#20363;&#23376;&#20013;&#20351;&#29992;&#30340;&#26159;&#30456;&#21516;&#30340;&#65292;&#21482;&#26159;&#27809;&#26377;&#20351;&#29992;&#27880;&#35299;&#12290;</span></i>
	&#12288;  <p>&#23545;&#24212;&#30340;Spring&#37197;&#32622;&#22914;&#19979;&#65306;</p><pre class="programlisting">&lt;aop:config&gt;

  &lt;aop:aspect id="concurrentOperationRetry" ref="concurrentOperationExecutor"&gt;

    &lt;aop:pointcut id="idempotentOperation"
        expression="execution&#65288;* com.xyz.myapp.service.*.*&#65288;..&#65289;&#65289;"/&gt;
       
    &lt;aop:around
       pointcut-ref="idempotentOperation"
       method="doConcurrentOperation"/&gt;
  
  &lt;/aop:aspect&gt;

&lt;/aop:config&gt;

&lt;bean id="concurrentOperationExecutor"
  class="com.xyz.myapp.service.impl.ConcurrentOperationExecutor"&gt;
     &lt;property name="maxRetries" value="3"/&gt;
     &lt;property name="order" value="100"/&gt;  
&lt;/bean&gt;</pre><p>&#35831;&#27880;&#24847;&#25105;&#20204;&#29616;&#22312;&#20551;&#35774;&#25152;&#26377;&#30340;bussiness services&#37117;&#26159;idempotent&#12290;&#22914;&#26524;&#19981;&#26159;&#36825;&#26679;&#65292;&#25105;&#20204;&#21487;&#20197;&#25913;&#20889;&#20999;&#38754;&#65292;
      &#36890;&#36807;&#24341;&#20837;&#19968;&#20010;<tt class="interfacename">Idempotent</tt>&#27880;&#35299;&#65292;&#35753;&#23427;&#21482;&#35843;&#29992;idempotent&#65306;</p><pre class="programlisting">@Retention&#65288;RetentionPolicy.RUNTIME&#65289;
public @interface Idempotent {
  <i class="lineannotation"><span class="lineannotation">// marker annotation</span></i>
}</pre><p>&#24182;&#19988;&#23545;service&#25805;&#20316;&#30340;&#23454;&#29616;&#36827;&#34892;&#27880;&#35299;&#12290;&#36825;&#26102;&#22914;&#26524;&#20320;&#21482;&#24076;&#26395;&#25913;&#21464;&#20999;&#38754;&#37325;&#35797;idempotent&#25805;&#20316;&#65292;
      &#20320;&#21482;&#38656;&#35201;&#25913;&#20889;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#65292;&#35753;&#20854;&#21482;&#21305;&#37197;<tt class="interfacename">@Idempotent</tt>&#25805;&#20316;&#65306;
			</p><pre class="programlisting">  &lt;aop:pointcut id="idempotentOperation"
        expression="execution&#65288;* com.xyz.myapp.service.*.*&#65288;..&#65289;&#65289; and
                    @annotation&#65288;com.xyz.myapp.service.Idempotent&#65289;"/&gt;</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="aop-choosing"></a>6.4.&nbsp;AOP&#22768;&#26126;&#39118;&#26684;&#30340;&#36873;&#25321;</h2></div></div><div></div></div><p>
            &#24403;&#20320;&#30830;&#23450;&#20999;&#38754;&#26159;&#23454;&#29616;&#19968;&#20010;&#32473;&#23450;&#38656;&#27714;&#30340;&#26368;&#20339;&#26041;&#27861;&#26102;&#65292;&#20320;&#22914;&#20309;&#36873;&#25321;&#26159;&#20351;&#29992;Spring AOP&#36824;&#26159;AspectJ&#65292;&#20197;&#21450;&#36873;&#25321;
            Aspect&#35821;&#35328;&#65288;&#20195;&#30721;&#65289;&#39118;&#26684;&#12289;@AspectJ&#22768;&#26126;&#39118;&#26684;&#25110;XML&#39118;&#26684;&#65311;&#36825;&#20010;&#20915;&#23450;&#20250;&#21463;&#21040;&#22810;&#20010;&#22240;&#32032;&#30340;&#24433;&#21709;&#65292;&#21253;&#25324;&#24212;&#29992;&#30340;&#38656;&#27714;&#12289;
            &#24320;&#21457;&#24037;&#20855;&#21644;&#23567;&#32452;&#23545;AOP&#30340;&#31934;&#36890;&#31243;&#24230;&#12290; 
        </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-spring-or-aspectj"></a>6.4.1.&nbsp;Spring AOP&#36824;&#26159;&#23436;&#20840;&#29992;AspectJ&#65311;</h3></div></div><div></div></div><p>
                &#20570;&#33021;&#36215;&#20316;&#29992;&#30340;&#26368;&#31616;&#21333;&#30340;&#20107;&#12290;Spring AOP&#27604;&#23436;&#20840;&#20351;&#29992;AspectJ&#26356;&#21152;&#31616;&#21333;&#65292;
                &#22240;&#20026;&#23427;&#19981;&#38656;&#35201;&#24341;&#20837;AspectJ&#30340;&#32534;&#35793;&#22120;&#65295;&#32455;&#20837;&#22120;&#21040;&#20320;&#24320;&#21457;&#21644;&#26500;&#24314;&#36807;&#31243;&#20013;&#12290;
                &#22914;&#26524;&#20320;&#20165;&#20165;&#38656;&#35201;&#22312;Spring bean&#19978;&#36890;&#30693;&#25191;&#34892;&#25805;&#20316;&#65292;&#37027;&#20040;Spring AOP&#26159;&#21512;&#36866;&#30340;&#36873;&#25321;&#12290;
                &#22914;&#26524;&#20320;&#38656;&#35201;&#36890;&#30693;domain&#23545;&#35937;&#25110;&#20854;&#23427;&#27809;&#26377;&#22312;Spring&#23481;&#22120;&#20013;&#31649;&#29702;&#30340;&#20219;&#24847;&#23545;&#35937;&#65292;&#37027;&#20040;&#20320;&#38656;&#35201;&#20351;&#29992;AspectJ&#12290;
                &#22914;&#26524;&#20320;&#24819;&#36890;&#30693;&#38500;&#20102;&#31616;&#21333;&#30340;&#26041;&#27861;&#25191;&#34892;&#20043;&#22806;&#30340;&#36830;&#25509;&#28857;&#65288;&#22914;&#65306;&#35843;&#29992;&#36830;&#25509;&#28857;&#12289;&#23383;&#27573;get&#25110;set&#30340;&#36830;&#25509;&#28857;&#31561;&#31561;&#65289;&#65292;
                &#20063;&#38656;&#35201;&#20351;&#29992;AspectJ&#12290;
            </p><p>
               &#24403;&#20351;&#29992;AspectJ&#26102;&#65292;&#20320;&#21487;&#20197;&#36873;&#25321;&#20351;&#29992;AspectJ&#35821;&#35328;&#65288;&#20063;&#31216;&#20026;&#8220;&#20195;&#30721;&#39118;&#26684;&#8221;&#65289;&#25110;@AspectJ&#27880;&#35299;&#39118;&#26684;&#12290;
               &#24456;&#26174;&#28982;&#65292;&#22914;&#26524;&#20320;&#29992;&#30340;&#19981;&#26159;Java 5+&#37027;&#20040;&#32467;&#35770;&#26159;&#20320;&#21482;&#33021;&#20351;&#29992;&#20195;&#30721;&#39118;&#26684;&#12290;
               &#22914;&#26524;&#20999;&#38754;&#22312;&#20320;&#30340;&#35774;&#35745;&#20013;&#25198;&#28436;&#19968;&#20010;&#24456;&#22823;&#30340;&#35282;&#33394;&#65292;&#24182;&#19988;&#20320;&#33021;&#22312;Eclipse&#20013;&#20351;&#29992;<a href="http://www.eclipse.org/ajdt/" target="_top">AspectJ Development Tools (AJDT)</a>&#65292;
               &#37027;&#20040;&#39318;&#36873;AspectJ&#35821;&#35328; :- &#22240;&#20026;&#35813;&#35821;&#35328;&#19987;&#38376;&#34987;&#35774;&#35745;&#29992;&#26469;&#32534;&#20889;&#20999;&#38754;&#65292;&#25152;&#20197;&#20250;&#26356;&#28165;&#26224;&#12289;&#26356;&#31616;&#21333;&#12290;&#22914;&#26524;&#20320;&#27809;&#26377;&#20351;&#29992;
               Eclipse&#65292;&#25110;&#32773;&#22312;&#20320;&#30340;&#24212;&#29992;&#20013;&#21482;&#26377;&#24456;&#23569;&#30340;&#20999;&#38754;&#24182;&#27809;&#26377;&#20316;&#20026;&#19968;&#20010;&#20027;&#35201;&#30340;&#35282;&#33394;&#65292;&#20320;&#25110;&#35768;&#24212;&#35813;&#32771;&#34385;&#20351;&#29992;@AspectJ&#39118;&#26684;
               &#24182;&#22312;&#20320;&#30340;IDE&#20013;&#38468;&#21152;&#19968;&#20010;&#26222;&#36890;&#30340;Java&#32534;&#36753;&#22120;&#65292;&#24182;&#19988;&#22312;&#20320;&#30340;&#26500;&#24314;&#33050;&#26412;&#20013;&#22686;&#21152;&#20999;&#38754;&#32455;&#20837;&#65288;&#38142;&#25509;&#65289;&#30340;&#27573;&#33853;&#12290;
            </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-ataspectj-or-xml"></a>6.4.2.&nbsp;Spring AOP&#20013;&#20351;&#29992;@AspectJ&#36824;&#26159;XML&#65311;</h3></div></div><div></div></div><p>
              &#22914;&#26524;&#20320;&#36873;&#25321;&#20351;&#29992;Spring AOP&#65292;&#37027;&#20040;&#20320;&#21487;&#20197;&#36873;&#25321;@AspectJ&#25110;&#32773;XML&#39118;&#26684;&#12290;&#26174;&#28982;&#22914;&#26524;&#20320;&#19981;&#26159;&#36816;&#34892;
              &#22312;Java 5&#19978;&#65292;XML&#39118;&#26684;&#26159;&#26368;&#20339;&#36873;&#25321;&#12290;&#23545;&#20110;&#20351;&#29992;Java 5&#30340;&#39033;&#30446;&#65292;&#38656;&#35201;&#32771;&#34385;&#22810;&#26041;&#38754;&#30340;&#25240;&#34935;&#12290;
            </p><p>
              XML&#39118;&#26684;&#23545;&#29616;&#26377;&#30340;Spring&#29992;&#25143;&#26469;&#35828;&#26356;&#21152;&#20064;&#24815;&#12290;&#23427;&#21487;&#20197;&#20351;&#29992;&#22312;&#20219;&#20309;Java&#32423;&#21035;&#20013;
              &#65288;&#21442;&#32771;&#36830;&#25509;&#28857;&#34920;&#36798;&#24335;&#20869;&#37096;&#30340;&#21629;&#21517;&#36830;&#25509;&#28857;&#65292;&#34429;&#28982;&#23427;&#20063;&#38656;&#35201;Java 5+&#65289;
              &#24182;&#19988;&#36890;&#36807;&#32431;&#31929;&#30340;POJO&#26469;&#25903;&#25345;&#12290;&#24403;&#20351;&#29992;AOP&#20316;&#20026;&#24037;&#20855;&#26469;&#37197;&#32622;&#20225;&#19994;&#26381;&#21153;&#26102;XML&#20250;&#26159;&#19968;&#20010;&#24456;&#22909;&#30340;&#36873;&#25321;&#12290;
              &#65288;&#19968;&#20010;&#22909;&#30340;&#20363;&#23376;&#26159;&#24403;&#20320;&#35748;&#20026;&#36830;&#25509;&#28857;&#34920;&#36798;&#24335;&#26159;&#20320;&#30340;&#37197;&#32622;&#20013;&#30340;&#19968;&#37096;&#20998;&#26102;&#65292;&#20320;&#21487;&#33021;&#24819;&#21333;&#29420;&#26356;&#25913;&#23427;&#65289;
              &#23545;&#20110;XML&#39118;&#26684;&#65292;&#20174;&#20320;&#30340;&#37197;&#32622;&#20013;&#21487;&#20197;&#28165;&#26224;&#30340;&#34920;&#26126;&#22312;&#31995;&#32479;&#20013;&#23384;&#22312;&#37027;&#20123;&#20999;&#38754;&#12290;
            </p><p>
              XML&#39118;&#26684;&#26377;&#20004;&#20010;&#32570;&#28857;&#12290;&#31532;&#19968;&#26159;&#23427;&#19981;&#33021;&#23436;&#20840;&#23558;&#38656;&#27714;&#23454;&#29616;&#30340;&#22320;&#26041;&#23553;&#35013;&#21040;&#19968;&#20010;&#20301;&#32622;&#12290;
              DRY&#21407;&#21017;&#20013;&#35828;&#31995;&#32479;&#20013;&#30340;&#27599;&#19968;&#39033;&#30693;&#35782;&#37117;&#24517;&#39035;&#20855;&#26377;&#21333;&#19968;&#12289;&#26080;&#27495;&#20041;&#12289;&#26435;&#23041;&#30340;&#34920;&#31034;&#12290;
              &#24403;&#20351;&#29992;XML&#39118;&#26684;&#26102;&#65292;&#22914;&#20309;&#23454;&#29616;&#19968;&#20010;&#38656;&#27714;&#30340;&#30693;&#35782;&#34987;&#20998;&#21106;&#21040;&#25903;&#25745;&#31867;&#30340;&#22768;&#26126;&#20013;&#20197;&#21450;XML&#37197;&#32622;&#25991;&#20214;&#20013;&#12290;
              &#24403;&#20351;&#29992;@AspectJ&#39118;&#26684;&#26102;&#23601;&#21482;&#26377;&#19968;&#20010;&#21333;&#29420;&#30340;&#27169;&#22359; -&#20999;&#38754;- &#20449;&#24687;&#34987;&#23553;&#35013;&#20102;&#36215;&#26469;&#12290;
              &#31532;&#20108;&#26159;XML&#39118;&#26684;&#21516;@AspectJ&#39118;&#26684;&#25152;&#33021;&#34920;&#36798;&#30340;&#20869;&#23481;&#30456;&#27604;&#26377;&#26356;&#22810;&#30340;&#38480;&#21046;&#65306;&#20165;&#20165;&#25903;&#25345;"singleton"&#20999;&#38754;&#23454;&#20363;&#27169;&#22411;&#65292;
              &#24182;&#19988;&#19981;&#33021;&#22312;XML&#20013;&#32452;&#21512;&#21629;&#21517;&#36830;&#25509;&#28857;&#30340;&#22768;&#26126;&#12290;&#20363;&#22914;&#65292;&#22312;@AspectJ&#39118;&#26684;&#20013;&#25105;&#20204;&#21487;&#20197;&#32534;&#20889;&#22914;&#19979;&#30340;&#20869;&#23481;&#65306;
            </p><pre class="programlisting">@Pointcut(execution(* get*()))
                public void propertyAccess() {}
                
                @Pointcut(execution(org.xyz.Account+ *(..))
                public void operationReturningAnAccount() {}
                
                @Pointcut(propertyAccess() &amp;&amp; operationReturningAnAccount())
            public void accountPropertyAccess() {}</pre><p>&#22312;XML&#39118;&#26684;&#20013;&#33021;&#22768;&#26126;&#24320;&#22836;&#30340;&#20004;&#20010;&#36830;&#25509;&#28857;&#65306;</p><pre class="programlisting">  &lt;aop:pointcut id="propertyAccess"
                expression="execution(* get*())"/&gt;
                
                &lt;aop:pointcut id="operationReturningAnAccount"
            expression="execution(org.xyz.Account+ *(..))"/&gt;</pre><p>&#20294;&#26159;&#19981;&#33021;&#36890;&#36807;&#32452;&#21512;&#36825;&#20123;&#26469;&#23450;&#20041;<tt class="literal">accountPropertyAccess</tt>&#36830;&#25509;&#28857;</p><p>
              @AspectJ&#39118;&#26684;&#25903;&#25345;&#20854;&#23427;&#30340;&#23454;&#20363;&#27169;&#22411;&#20197;&#21450;&#26356;&#20016;&#23500;&#30340;&#36830;&#25509;&#28857;&#32452;&#21512;&#12290;&#23427;&#20855;&#26377;&#23558;&#20999;&#38754;&#20445;&#25345;&#20026;&#19968;&#20010;&#27169;&#22359;&#21333;&#20803;&#30340;&#20248;&#28857;&#12290;
              &#36824;&#26377;&#19968;&#20010;&#20248;&#28857;&#23601;&#26159;@AspectJ&#20999;&#38754;&#33021;&#34987;Spring AOP&#21644;AspectJ&#20004;&#32773;&#37117;&#29702;&#35299; - 
              &#25152;&#20197;&#22914;&#26524;&#31245;&#21518;&#20320;&#35748;&#20026;&#20320;&#38656;&#35201;AspectJ&#30340;&#33021;&#21147;&#21435;&#23454;&#29616;&#38468;&#21152;&#30340;&#38656;&#27714;&#65292;&#37027;&#20040;&#20320;&#38750;&#24120;&#23481;&#26131;&#36801;&#31227;&#21040;&#22522;&#20110;AspectJ&#30340;&#36884;&#24452;&#12290;
              &#24635;&#32780;&#35328;&#20043;&#65292;&#25105;&#20204;&#26356;&#21916;&#27426;@AspectJ&#39118;&#26684;&#21482;&#35201;&#20320;&#26377;&#20999;&#38754;&#21435;&#20570;&#36229;&#20986;&#31616;&#21333;&#30340;&#8220;&#37197;&#32622;&#8221;&#20225;&#19994;&#26381;&#21153;&#20043;&#22806;&#30340;&#20107;&#24773;&#12290;
            </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="aop-mixing-styles"></a>6.5.&nbsp;&#28151;&#21512;&#20999;&#38754;&#31867;&#22411;</h2></div></div><div></div></div><p>
            &#25105;&#20204;&#23436;&#20840;&#21487;&#20197;&#28151;&#21512;&#20351;&#29992;&#20197;&#19979;&#20960;&#31181;&#39118;&#26684;&#30340;&#20999;&#38754;&#23450;&#20041;&#65306;&#20351;&#29992;&#33258;&#21160;&#20195;&#29702;&#30340;@AspectJ&#39118;&#26684;&#30340;&#20999;&#38754;&#65292;
            schema-defined <tt class="literal">&lt;aop:aspect&gt;</tt>&#30340;&#20999;&#38754;&#65292;&#21644;&#29992; 
            <tt class="literal">&lt;aop:advisor&gt;</tt>&#22768;&#26126;&#30340;advisor&#65292;&#29978;&#33267;&#26159;&#20351;&#29992;Spring 1.2&#39118;&#26684;&#30340;&#20195;&#29702;&#21644;&#25318;&#25130;&#22120;&#12290;
            &#30001;&#20110;&#20197;&#19978;&#20960;&#31181;&#39118;&#26684;&#30340;&#20999;&#38754;&#23450;&#20041;&#30340;&#37117;&#20351;&#29992;&#20102;&#30456;&#21516;&#30340;&#24213;&#23618;&#26426;&#21046;&#65292;&#22240;&#27492;&#21487;&#20197;&#24456;&#22909;&#30340;&#20849;&#23384;&#12290;
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="aop-proxying"></a>6.6.&nbsp;&#20195;&#29702;&#26426;&#21046;</h2></div></div><div></div></div><p>Spring AOP&#37096;&#20998;&#20351;&#29992;JDK&#21160;&#24577;&#20195;&#29702;&#25110;&#32773;CGLIB&#26469;&#20026;&#30446;&#26631;&#23545;&#35937;&#21019;&#24314;&#20195;&#29702;&#12290;&#65288;&#24314;&#35758;&#20248;&#20808;&#20351;&#29992;JDK&#30340;&#21160;&#24577;&#20195;&#29702;&#65289;</p><p>
          &#22914;&#26524;&#34987;&#20195;&#29702;&#30340;&#30446;&#26631;&#23545;&#35937;&#23454;&#29616;&#20102;&#33267;&#23569;&#19968;&#20010;&#25509;&#21475;&#65292;&#21017;&#20250;&#20351;&#29992;JDK&#21160;&#24577;&#20195;&#29702;&#12290;&#25152;&#26377;&#35813;&#30446;&#26631;&#31867;&#22411;&#23454;&#29616;&#30340;&#25509;&#21475;&#37117;&#23558;&#34987;&#20195;&#29702;&#12290;
          &#33509;&#35813;&#30446;&#26631;&#23545;&#35937;&#27809;&#26377;&#23454;&#29616;&#20219;&#20309;&#25509;&#21475;&#65292;&#21017;&#21019;&#24314;&#19968;&#20010;CGLIB&#20195;&#29702;&#12290;
        </p><p>&#22914;&#26524;&#20320;&#24076;&#26395;&#24378;&#21046;&#20351;&#29992;CGLIB&#20195;&#29702;&#65292;&#65288;&#20363;&#22914;&#65306;&#24076;&#26395;&#20195;&#29702;&#30446;&#26631;&#23545;&#35937;&#30340;&#25152;&#26377;&#26041;&#27861;&#65292;&#32780;&#19981;&#21482;&#26159;&#23454;&#29616;&#33258;&#25509;&#21475;&#30340;&#26041;&#27861;&#65289;
          &#37027;&#20063;&#21487;&#20197;&#12290;&#20294;&#26159;&#38656;&#35201;&#32771;&#34385;&#20197;&#19979;&#38382;&#39064;:
        </p><div class="itemizedlist"><ul type="disc"><li><p>&#26080;&#27861;&#36890;&#30693;&#65288;advise&#65289;<tt class="literal">Final</tt>&#26041;&#27861;&#65292;&#22240;&#20026;&#20182;&#20204;&#19981;&#33021;&#34987;&#35206;&#20889;&#12290;</p></li><li><p>&#20320;&#38656;&#35201;&#23558;CGLIB 2&#20108;&#36827;&#21046;&#21457;&#34892;&#21253;&#25918;&#22312;classpath&#19979;&#38754;&#65292;&#19982;&#20043;&#30456;&#36739;JDK&#26412;&#36523;&#23601;&#25552;&#20379;&#20102;&#21160;&#24577;&#20195;&#29702;&#12290;
                &#24403;&#38656;&#35201;CGLIB&#32780;&#22312;classpath&#19979;&#21448;&#27809;&#26377;&#25214;&#21040;CGLIB&#31867;&#24211;&#30340;&#35805;&#65292;Spring&#20250;&#33258;&#21160;&#25552;&#37266;&#12290;</p></li><li><p>&#20195;&#29702;&#23545;&#35937;&#30340;&#26500;&#36896;&#22120;&#20250;&#34987;&#35843;&#29992;&#20004;&#27425;&#12290;&#36825;&#26159;&#24456;&#33258;&#28982;&#30340;&#32467;&#26524;&#22240;&#20026;&#22312;CGLIB&#20195;&#29702;&#27169;&#24335;&#19979;&#27599;&#19968;&#20010;&#20195;&#29702;&#23545;&#35937;&#37117;&#20250;
                &#20135;&#29983;&#19968;&#20010;&#23376;&#31867;&#12290;&#27599;&#19968;&#20010;&#20195;&#29702;&#23454;&#20363;&#20250;&#29983;&#25104;&#20004;&#20010;&#23545;&#35937;&#65306;&#23454;&#38469;&#20195;&#29702;&#23545;&#35937;&#21644;&#23427;&#30340;&#19968;&#20010;&#23454;&#29616;&#20102;&#36890;&#30693;&#30340;&#23376;&#31867;&#23454;&#20363;
                &#32780;&#26159;&#29992;JDK&#20195;&#29702;&#26102;&#19981;&#20250;&#20986;&#29616;&#36825;&#26679;&#30340;&#34892;&#20026;&#12290;&#36890;&#24120;&#24773;&#20917;&#19979;&#65292;&#35843;&#29992;&#20195;&#29702;&#31867;&#22411;&#30340;&#26500;&#36896;&#22120;&#20004;&#27425;&#24182;&#19981;&#26159;&#38382;&#39064;&#65292;
                &#22240;&#20026;&#38500;&#20102;&#20250;&#21457;&#29983;&#25351;&#27966;&#22806;&#27809;&#26377;&#20219;&#20309;&#30495;&#27491;&#30340;&#36923;&#36753;&#34987;&#23454;&#29616;&#12290;</p></li></ul></div><p><a name="aop-autoproxy-force-CGLIB"></a>
        &#24378;&#21046;&#20351;&#29992;CGLIB&#20195;&#29702;&#38656;&#35201;&#23558;<tt class="literal">&lt;aop:config&gt;</tt>&#30340;<tt class="literal">proxy-target-class</tt>
        &#23646;&#24615;&#35774;&#20026;true:</p><pre class="programlisting">&lt;aop:config <span class="bold"><b>proxy-target-class="true"</b></span>&gt;
            <i class="lineannotation"><span class="lineannotation">&lt;!-- other beans defined here... --&gt;</span></i>
        &lt;/aop:config&gt;</pre><p>&#24403;&#20351;&#29992;@AspectJ&#33258;&#21160;&#20195;&#29702;&#26102;&#35201;&#24378;&#21046;&#20351;&#29992;CGLIB&#65292;&#35831;&#23558;<tt class="literal">&lt;aop:aspectj-autoproxy&gt;</tt>
        &#30340;<tt class="literal">proxy-target-class</tt>&#23646;&#24615;&#35774;&#32622;&#20026;<tt class="literal">true</tt>:</p><pre class="programlisting">&lt;aop:aspectj-autoproxy <span class="bold"><b>proxy-target-class="true"</b></span>/&gt;</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/admons/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>
                &#22810;&#20010;<tt class="literal">&lt;aop:config/&gt;</tt>&#29255;&#27573;&#22312;&#36816;&#34892;&#26102;&#34987;&#21253;&#21547;&#21040;&#19968;&#20010;&#32479;&#19968;&#30340;&#33258;&#21160;&#20195;&#29702;&#26500;&#36896;&#22120;&#20013;&#65292;
                &#23427;&#20026;&#20219;&#20309;<tt class="literal">&lt;aop:config/&gt;</tt>&#29255;&#27573;&#65288;&#19968;&#33324;&#26469;&#33258;&#19981;&#21516;&#30340;XML bean&#23450;&#20041;&#25991;&#20214;&#65289;&#20013;&#25351;&#23450;&#30340;&#20869;&#23481;&#24212;&#29992;
                <span class="emphasis"><em>&#26368;&#24378;</em></span>&#30340;&#20195;&#29702;&#35774;&#32622;&#12290;&#27492;&#35774;&#32622;&#21516;&#26679;&#20063;&#36866;&#29992;&#20110;<tt class="literal">&lt;tx:annotation-driven/&gt;</tt>
                &#21644;<tt class="literal">&lt;aop:aspectj-autoproxy/&gt;</tt>&#20803;&#32032;&#12290;
            </p><p>
                &#28165;&#26970;&#22320;&#35762;&#65292;&#22312;<tt class="literal">&lt;tx:annotation-driven/&gt;</tt>&#12289;
                <tt class="literal">&lt;aop:aspectj-autoproxy/&gt;</tt>&#25110;&#32773;<tt class="literal">&lt;aop:config/&gt;</tt>
                &#20803;&#32032;&#19978;&#20351;&#29992;'<tt class="literal">proxy-target-class="true"</tt>'&#20250;&#23548;&#33268;&#23558;CGLIB&#20195;&#29702;&#24212;&#29992;&#20110;&#27492;&#19977;&#32773;&#20043;&#19978;&#12290;
            </p></td></tr></table></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-understanding-aop-proxies"></a>6.6.1.&nbsp;&#29702;&#35299;AOP&#20195;&#29702;</h3></div></div><div></div></div><p>
                Spring AOP&#26159;<span class="emphasis"><em>&#22522;&#20110;&#20195;&#29702;&#26426;&#21046;</em></span>&#30340;&#12290;&#23454;&#38469;&#19978;&#22312;&#20320;&#32534;&#20889;&#33258;&#24049;&#30340;&#20999;&#38754;&#25110;&#32773;
                &#20351;&#29992;&#20219;&#20309;&#30001;Spring&#26694;&#26550;&#25552;&#20379;&#30340;&#22522;&#20110;Spring AOP&#20999;&#38754;&#20043;&#21069;&#65292;&#28145;&#21051;&#39046;&#20250;&#36825;&#19968;&#21477;&#30340;&#24847;&#24605;&#26159;&#38750;&#24120;&#37325;&#35201;&#30340;&#12290;
            </p><p>
                &#32771;&#34385;&#22914;&#19979;&#22330;&#26223;&#65292;&#24403;&#20320;&#25343;&#21040;&#19968;&#20010;&#26080;&#20195;&#29702;&#30340;&#12289;&#26080;&#20219;&#20309;&#29305;&#27530;&#20043;&#22788;&#30340;POJO&#23545;&#35937;&#24341;&#29992;&#26102;&#65292;&#22914;&#20197;&#19979;&#20195;&#30721;&#27573;&#25152;&#31034;
            </p><pre class="programlisting">public class SimplePojo implements Pojo {
                
                public void foo() {
                <i class="lineannotation"><span class="lineannotation">// this next method invocation is a <span class="bold"><b>direct</b></span> call on the 'this' reference</span></i>
                this.bar();
                }
                
                public void bar() {
                <i class="lineannotation"><span class="lineannotation">// some logic...</span></i>
                }
            }</pre><p>
                &#24403;&#20320;&#35843;&#29992;&#19968;&#20010;&#23545;&#35937;&#24341;&#29992;&#30340;&#26041;&#27861;&#26102;&#65292;&#27492;&#23545;&#35937;&#24341;&#29992;&#19978;&#30340;&#26041;&#27861;<span class="emphasis"><em>&#30452;&#25509;</em></span>&#34987;&#35843;&#29992;&#65292;&#22914;&#19979;&#25152;&#31034;
            </p><div class="mediaobject" align="center"><img src="images/aop-proxy-plain-pojo-call.png" align="middle"></div><pre class="programlisting">public class Main {
                
                public static void main(String[] args) {
                
                Pojo pojo = new SimplePojo();
                
                <i class="lineannotation"><span class="lineannotation">// this is a <span class="bold"><b>direct</b></span> method call on the 'pojo' reference</span></i>
                pojo.foo();
                }
            }</pre><p>
                &#24403;&#23458;&#25143;&#20195;&#30721;&#25152;&#25345;&#26377;&#30340;&#24341;&#29992;&#26159;&#19968;&#20010;&#20195;&#29702;&#30340;&#26102;&#20505;&#21017;&#30053;&#26377;&#19981;&#21516;&#20102;&#12290;&#35831;&#32771;&#34385;&#22914;&#19979;&#22270;&#31034;&#21644;&#20195;&#30721;&#27573;&#29255;&#26029;
            </p><div class="mediaobject" align="center"><img src="images/aop-proxy-call.png" align="middle"></div><pre class="programlisting">public class Main {
                
                public static void main(String[] args) {
                
                ProxyFactory factory = new ProxyFactory(new SimplePojo());
                factory.addInterface(Pojo.class);
                factory.addAdvice(new RetryAdvice());
                
                Pojo pojo = (Pojo) factory.getProxy();
                
                <i class="lineannotation"><span class="lineannotation">// this is a method call <span class="bold"><b>on the proxy!</b></span></span></i>
                pojo.foo();
                }
            }</pre><p>
                &#29702;&#35299;&#27492;&#22788;&#30340;&#20851;&#38190;&#26159;<tt class="classname">Main</tt>&#31867;<tt class="methodname">main(..)</tt>&#26041;&#27861;&#20013;&#30340;&#23458;&#25143;&#20195;&#30721;
                <span class="emphasis"><em>&#25317;&#26377;&#19968;&#20010;&#20195;&#29702;&#30340;&#24341;&#29992;</em></span>&#12290;&#36825;&#24847;&#21619;&#30528;&#23545;&#36825;&#20010;&#23545;&#35937;&#24341;&#29992;&#20013;&#26041;&#27861;&#30340;&#35843;&#29992;&#23601;&#26159;&#23545;&#20195;&#29702;&#30340;&#35843;&#29992;&#65292;
                &#32780;&#36825;&#20010;&#20195;&#29702;&#33021;&#22815;&#20195;&#29702;&#25152;&#26377;&#36319;&#29305;&#23450;&#26041;&#27861;&#35843;&#29992;&#30456;&#20851;&#30340;&#25318;&#25130;&#22120;&#12290;&#19981;&#36807;&#65292;&#19968;&#26086;&#35843;&#29992;&#26368;&#32456;&#25269;&#36798;&#20102;&#30446;&#26631;&#23545;&#35937;
                &#65288;&#27492;&#22788;&#20026;<tt class="classname">SimplePojo</tt>&#31867;&#30340;&#24341;&#29992;&#65289;&#65292;&#20219;&#20309;&#23545;&#33258;&#36523;&#30340;&#35843;&#29992;&#20363;&#22914;
                <tt class="methodname">this.bar()</tt>&#25110;&#32773;<tt class="methodname">this.foo()</tt>
                &#23558;&#23545;<span class="emphasis"><em><tt class="literal">this</tt></em></span>&#24341;&#29992;&#36827;&#34892;&#35843;&#29992;&#32780;&#38750;&#20195;&#29702;&#12290;&#36825;&#19968;&#28857;&#24847;&#20041;&#37325;&#22823;&#65292;
                &#23427;&#24847;&#21619;&#30528;&#33258;&#25105;&#35843;&#29992;&#23558;<span class="emphasis"><em>&#19981;</em></span>&#20250;&#23548;&#33268;&#21644;&#26041;&#27861;&#35843;&#29992;&#20851;&#32852;&#30340;&#36890;&#30693;&#24471;&#21040;&#25191;&#34892;&#30340;&#26426;&#20250;&#12290;
            </p><p>
              &#37027;&#22909;&#65292;&#20026;&#27492;&#35201;&#24590;&#20040;&#21150;&#21602;&#65311;&#26368;&#22909;&#30340;&#21150;&#27861;&#65288;&#36825;&#37324;&#20351;&#29992;&#26368;&#22909;&#36825;&#20010;&#26415;&#35821;&#19981;&#29978;&#31934;&#30830;&#65289;&#23601;&#26159;&#37325;&#26500;&#20320;&#30340;&#20195;&#30721;&#20351;&#33258;&#25105;&#35843;&#29992;&#19981;&#20250;&#20986;&#29616;&#12290;
              &#24403;&#28982;&#65292;&#36825;&#30340;&#30830;&#38656;&#35201;&#20320;&#20570;&#19968;&#20123;&#24037;&#20316;&#65292;&#20294;&#21364;&#26159;&#26368;&#22909;&#30340;&#65292;&#26368;&#23569;&#20405;&#20837;&#24615;&#30340;&#26041;&#27861;&#12290;&#21478;&#19968;&#20010;&#26041;&#27861;&#21017;&#24456;&#21487;&#24597;&#65292;
              &#20063;&#27491;&#22240;&#20026;&#22914;&#27492;&#25105;&#20960;&#20046;&#19981;&#24895;&#25351;&#20986;&#36825;&#31181;&#26041;&#27861;&#12290;&#20320;&#21487;&#20197;&#35937;&#22914;&#19979;&#36825;&#26679;&#23436;&#20840;&#25226;&#19994;&#21153;&#36923;&#36753;&#20889;&#22312;&#20320;&#30340;Spring AOP&#31867;&#20013;&#65306;
            </p><pre class="programlisting">public class SimplePojo implements Pojo {
                
                public void foo() {
                <i class="lineannotation"><span class="lineannotation">// this works, but... gah!</span></i>
                ((Pojo) AopContext.currentProxy()).bar();
                }
                
                public void bar() {
                <i class="lineannotation"><span class="lineannotation">// some logic...</span></i>
                }
            }</pre><p>
                &#36825;&#26679;&#23436;&#20840;&#23558;&#20320;&#30340;&#20195;&#30721;&#20132;&#32473;&#20102;Spring AOP&#65292;<span class="emphasis"><em>&#24182;&#19988;</em></span>&#35753;&#31867;&#26412;&#36523;&#30693;&#36947;&#23427;&#27491;&#34987;&#29992;&#20110;&#19968;&#20010;AOP&#30340;&#19978;&#19979;&#25991;&#20013;&#65292;
                &#32780;&#23427;&#20854;&#20013;&#30340;&#25991;&#20214;&#30452;&#25509;&#38754;&#23545;AOP&#12290;&#24403;&#20195;&#29702;&#22312;&#34987;&#21019;&#24314;&#26102;&#20063;&#38656;&#35201;&#19968;&#20123;&#39069;&#22806;&#30340;&#37197;&#32622;&#65306;
            </p><pre class="programlisting">public class Main {
                
                public static void main(String[] args) {
                
                ProxyFactory factory = new ProxyFactory(new SimplePojo());
                factory.adddInterface(Pojo.class);
                factory.addAdvice(new RetryAdvice());
                <i class="lineannotation"><span class="lineannotation"><span class="bold"><b>factory.setExposeProxy(true);</b></span></span></i>
                
                Pojo pojo = (Pojo) factory.getProxy();
                
                <i class="lineannotation"><span class="lineannotation">// this is a method call <span class="bold"><b>on the proxy!</b></span></span></i>
                pojo.foo();
                }
            }</pre><p>
                &#26368;&#21518;&#65292;&#24517;&#39035;&#27880;&#24847;AspectJ&#19981;&#23384;&#22312;&#36825;&#31181;&#33258;&#25105;&#35843;&#29992;&#30340;&#38382;&#39064;&#65292;&#22240;&#20026;&#23427;&#24182;&#19981;&#26159;&#19968;&#20010;&#22522;&#20110;&#20195;&#29702;&#30340;AOP&#26694;&#26550;&#12290;
            </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="aop-aspectj-programmatic"></a>6.7.&nbsp;&#20197;&#32534;&#31243;&#26041;&#24335;&#21019;&#24314;@AspectJ&#20195;&#29702;</h2></div></div><div></div></div><p>
            &#38500;&#20102;&#22312;&#37197;&#32622;&#25991;&#20214;&#20013;&#20351;&#29992;&lt;aop:config&gt;&#25110;&#32773;&lt;aop:aspectj-autoproxy&gt;&#26469;&#22768;&#26126;&#20999;&#38754;&#12290;
            &#21516;&#26679;&#21487;&#20197;&#36890;&#36807;&#32534;&#31243;&#26041;&#24335;&#26469;&#21019;&#24314;&#20195;&#29702;&#26469;&#36890;&#30693;&#30446;&#26631;&#23545;&#35937;&#12290;&#20851;&#20110;Spring AOP API&#30340;&#35814;&#32454;&#20171;&#32461;&#65292;
            &#35831;&#21442;&#30475;&#19979;&#19968;&#31456;&#12290;&#36825;&#37324;&#25105;&#20204;&#37325;&#28857;&#20171;&#32461;&#33258;&#21160;&#21019;&#24314;&#20195;&#29702;&#12290;
        </p><p>
            &#31867;<tt class="classname">org.springframework.aop.aspectj.annotation.AspectJProxyFactory</tt>&#21487;&#20197;&#20026;&#19968;&#20010;&#25110;&#22810;&#20010;
            @AspectJ&#20999;&#38754;&#36890;&#30693;&#30340;&#30446;&#26631;&#23545;&#35937;&#21019;&#24314;&#19968;&#20010;&#20195;&#29702;&#12290;&#35813;&#31867;&#30340;&#22522;&#26412;&#29992;&#27861;&#38750;&#24120;&#31616;&#21333;&#65292;&#31034;&#20363;&#22914;&#19979;&#12290;&#35831;&#21442;&#38405;Javadoc&#33719;&#21462;&#26356;&#35814;&#32454;&#30340;&#20449;&#24687;&#12290;
        </p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">// create a factory that can generate a proxy for the given target object</span></i>
            AspectJProxyFactory factory = new AspectJProxyFactory(targetObject); 
            
            <i class="lineannotation"><span class="lineannotation">// add an aspect, the class must be an @AspectJ aspect
            // you can call this as many times as you need with different aspects</span></i>
            factory.addAspect(SecurityManager.class);
            
            <i class="lineannotation"><span class="lineannotation">// you can also add existing aspect instances, the type of the object supplied must be an @AspectJ aspect</span></i>
            factory.addAspect(usageTracker);	
            
            <i class="lineannotation"><span class="lineannotation">// now get the proxy object...</span></i>
        MyInterfaceType proxy = factory.getProxy();</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="aop-using-aspectj"></a>6.8.&nbsp;&#22312;Spring&#24212;&#29992;&#20013;&#20351;&#29992;AspectJ</h2></div></div><div></div></div><p>
            &#21040;&#30446;&#21069;&#20026;&#27490;&#26412;&#31456;&#35752;&#35770;&#30340;&#19968;&#30452;&#26159;&#32431;Spring AOP&#12290;&#22312;&#36825;&#19968;&#33410;&#37324;&#38754;&#25105;&#20204;&#23558;&#20171;&#32461;&#22914;&#20309;&#20351;&#29992;AspectJ compiler/weaver
            &#26469;&#20195;&#26367;Spring AOP&#25110;&#32773;&#20316;&#20026;&#23427;&#30340;&#34917;&#20805;&#65292;&#22240;&#20026;&#26377;&#20123;&#26102;&#20505;Spring AOP&#21333;&#29420;&#25552;&#20379;&#30340;&#21151;&#33021;&#20063;&#35768;&#24182;&#19981;&#33021;&#28385;&#36275;&#20320;&#30340;&#38656;&#35201;&#12290;
        </p><p>
            Spring&#25552;&#20379;&#20102;&#19968;&#20010;&#23567;&#24039;&#30340;AspectJ aspect library&#65292;&#20320;&#21487;&#20197;&#22312;&#31243;&#24207;&#21457;&#34892;&#29256;&#26412;&#20013;&#21333;&#29420;&#20351;&#29992;
            <tt class="literal">spring-aspects.jar</tt>&#25991;&#20214;&#65292;&#24182;&#23558;&#20854;&#21152;&#20837;&#21040;classpath&#19979;&#20197;&#20351;&#29992;&#20854;&#20013;&#30340;&#20999;&#38754;&#12290;
            <a href="aop.html#aop-atconfigurable" title="6.8.1.&nbsp;&#22312;Spring&#20013;&#20351;&#29992;AspectJ&#36827;&#34892;domain object&#30340;&#20381;&#36182;&#27880;&#20837;">Section&nbsp;6.8.1, &#8220;&#22312;Spring&#20013;&#20351;&#29992;AspectJ&#36827;&#34892;domain object&#30340;&#20381;&#36182;&#27880;&#20837;&#8221;</a>&#21644;<a href="aop.html#aop-ajlib-other" title="6.8.2.&nbsp;Spring&#20013;&#20854;&#20182;&#30340;AspectJ&#20999;&#38754;">Section&nbsp;6.8.2, &#8220;Spring&#20013;&#20854;&#20182;&#30340;AspectJ&#20999;&#38754;&#8221;</a> &#35752;&#35770;&#20102;&#35813;&#24211;&#20197;&#21450;&#22914;&#20309;&#20351;&#29992;&#35813;&#24211;&#12290;
            <a href="aop.html#aop-aj-configure" title="6.8.3.&nbsp;&#20351;&#29992;Spring IoC&#26469;&#37197;&#32622;AspectJ&#30340;&#20999;&#38754;">Section&nbsp;6.8.3, &#8220;&#20351;&#29992;Spring IoC&#26469;&#37197;&#32622;AspectJ&#30340;&#20999;&#38754;&#8221;</a>&#35752;&#35770;&#20102;&#22914;&#20309;&#23545;&#36890;&#36807;AspectJ compiler&#32455;&#20837;&#30340;AspectJ&#20999;&#38754;&#36827;&#34892;&#20381;&#36182;&#27880;&#20837;&#12290;
            &#26368;&#21518;<a href="aop.html#aop-aj-ltw" title="6.8.4.&nbsp;&#22312;Spring&#24212;&#29992;&#20013;&#20351;&#29992;AspectJ&#21152;&#36733;&#26102;&#32455;&#20837;&#65288;LTW&#65289;">Section&nbsp;6.8.4, &#8220;&#22312;Spring&#24212;&#29992;&#20013;&#20351;&#29992;AspectJ&#21152;&#36733;&#26102;&#32455;&#20837;&#65288;LTW&#65289;&#8221;</a>&#20171;&#32461;&#20102;&#20351;&#29992;AspectJ&#30340;Spring&#24212;&#29992;&#31243;&#24207;&#22914;&#20309;&#36827;&#34892;&#21152;&#36733;&#26399;&#32455;&#20837;&#65288;load-time weaving&#65289;&#12290;
        </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-atconfigurable"></a>6.8.1.&nbsp;&#22312;Spring&#20013;&#20351;&#29992;AspectJ&#36827;&#34892;domain object&#30340;&#20381;&#36182;&#27880;&#20837;</h3></div></div><div></div></div><p>
                Spring&#23481;&#22120;&#23545;application context&#20013;&#23450;&#20041;&#30340;bean&#36827;&#34892;&#23454;&#20363;&#21270;&#21644;&#37197;&#32622;&#12290;&#21516;&#26679;&#20063;&#21487;&#20197;&#36890;&#36807;bean factory
                &#26469;&#20026;&#19968;&#20010;<span class="emphasis"><em>&#24050;&#32463;&#23384;&#22312;</em></span>&#19988;&#24050;&#32463;&#23450;&#20041;&#20026;spring bean&#30340;&#23545;&#35937;&#24212;&#29992;&#25152;&#21253;&#21547;&#30340;&#37197;&#32622;&#20449;&#24687;&#12290;
                <tt class="filename">spring-aspects.jar</tt>&#20013;&#21253;&#21547;&#20102;&#19968;&#20010;annotation-driven&#30340;&#20999;&#38754;&#65292;
                &#25552;&#20379;&#20102;&#33021;&#20026;<span class="emphasis"><em>&#20219;&#20309;&#23545;&#35937;</em></span>&#36827;&#34892;&#20381;&#36182;&#27880;&#20837;&#30340;&#33021;&#21147;&#12290;&#36825;&#26679;&#30340;&#25903;&#25345;&#26088;&#22312;&#20026;
                <span class="emphasis"><em>&#33073;&#31163;&#23481;&#22120;&#31649;&#29702;</em></span>&#32780;&#21019;&#24314;&#30340;&#23545;&#35937;&#36827;&#34892;&#20381;&#36182;&#27880;&#20837;&#12290;&#39046;&#22495;&#23545;&#35937;&#32463;&#24120;&#22788;&#20110;&#36825;&#26679;&#30340;&#24773;&#24418;&#65306;
                &#23427;&#20204;&#21487;&#33021;&#26159;&#36890;&#36807;<tt class="literal">new</tt>&#25805;&#20316;&#31526;&#21019;&#24314;&#30340;&#23545;&#35937;&#65292;&#20063;&#21487;&#33021;&#26159;&#30001;ORM&#24037;&#20855;&#26597;&#35810;&#25968;&#25454;&#24211;&#25152;&#36820;&#22238;&#30340;&#32467;&#26524;&#12290;
            </p><p>
              <tt class="interfacename">@Configurable</tt>&#27880;&#35299;&#26631;&#35760;&#20102;&#19968;&#20010;&#31867;&#21487;&#20197;&#36890;&#36807;Spring-driven&#26041;&#24335;&#26469;&#37197;&#32622;&#12290;
              &#22312;&#26368;&#31616;&#21333;&#30340;&#24773;&#20917;&#19979;&#65292;&#25105;&#20204;&#21482;&#25226;&#23427;&#24403;&#20316;&#26631;&#35760;&#27880;&#35299;&#65306;
            </p><pre class="programlisting">package com.xyz.myapp.domain;
                
                import org.springframework.beans.factory.annotation.Configurable;
                
                @Configurable
                public class Account {
                <i class="lineannotation"><span class="lineannotation">// ...</span></i>
            }</pre><p>
              &#24403;&#21482;&#26159;&#31616;&#21333;&#22320;&#20316;&#20026;&#19968;&#20010;&#26631;&#35760;&#25509;&#21475;&#26469;&#20351;&#29992;&#30340;&#26102;&#20505;&#65292;Spring&#23558;&#37319;&#29992;&#21644;&#35813;&#24050;&#27880;&#35299;&#30340;&#31867;&#22411;
             &#65288;&#27604;&#22914;<tt class="classname">Account</tt>&#31867;&#65289;&#20840;&#21517;&#65288;<tt class="classname">com.xyz.myapp.domain.Account</tt>&#65289;
              &#19968;&#33268;&#30340;bean&#21407;&#22411;&#23450;&#20041;&#26469;&#37197;&#32622;&#19968;&#20010;&#26032;&#23454;&#20363;&#12290;&#30001;&#20110;&#19968;&#20010;bean&#40664;&#35748;&#30340;&#21517;&#23383;&#23601;&#26159;&#23427;&#30340;&#20840;&#21517;&#65292;
              &#25152;&#20197;&#19968;&#20010;&#27604;&#36739;&#26041;&#20415;&#30340;&#21150;&#27861;&#23601;&#26159;&#30465;&#30053;&#23450;&#20041;&#20013;&#30340;<tt class="literal">id</tt>&#23646;&#24615;&#65306;
            </p><pre class="programlisting">&lt;bean class="com.xyz.myapp.domain.Account" scope="prototype"&gt;
                &lt;property name="fundsTransferService" ref="fundsTransferService"/&gt;
            &lt;/bean&gt;</pre><p>&#22914;&#26524;&#20320;&#24076;&#26395;&#26126;&#30830;&#30340;&#25351;&#23450;bean&#21407;&#22411;&#23450;&#20041;&#30340;&#21517;&#23383;&#65292;&#20320;&#21487;&#20197;&#22312;&#27880;&#35299;&#20013;&#30452;&#25509;&#23450;&#20041;&#65306;</p><pre class="programlisting">package com.xyz.myapp.domain;
                
                import org.springframework.beans.factory.annotation.Configurable;
                
                @Configurable("account")
                public class Account {
                <i class="lineannotation"><span class="lineannotation">// ...</span></i>
            }</pre><p>Spring&#20250;&#26597;&#25214;&#21517;&#23383;&#20026;"account"&#30340;bean&#23450;&#20041;&#65292;&#24182;&#20351;&#29992;&#23427;&#20316;&#23450;&#20041;&#26469;&#37197;&#32622;&#19968;&#20010;&#26032;&#30340;
            <tt class="classname">Account</tt>&#23454;&#20363;&#12290;</p><p>
              &#20320;&#20063;&#21487;&#20197;&#20351;&#29992;&#33258;&#21160;&#35013;&#37197;&#26469;&#36991;&#20813;&#25163;&#24037;&#25351;&#23450;&#21407;&#22411;&#23450;&#20041;&#30340;&#21517;&#23383;&#12290;&#21482;&#35201;&#35774;&#32622;<tt class="interfacename">@Configurable</tt>
              &#27880;&#35299;&#20013;&#30340;<tt class="literal">autowire</tt>&#23646;&#24615;&#23601;&#21487;&#20197;&#35753;Spring&#36827;&#34892;&#33258;&#21160;&#35013;&#37197;&#65306;
              &#25351;&#23450;<tt class="literal">@Configurable(autowire=Autowire.BY_TYPE)</tt>&#25110;&#32773;
              <tt class="literal">@Configurable(autowire=Autowire.BY_NAME</tt>&#21487;&#20197;&#35753;&#33258;&#21160;&#35013;&#37197;&#20998;&#21035;&#25353;&#29031;&#31867;&#22411;&#25110;&#21517;&#23383;&#36827;&#34892;&#12290;
              &#20316;&#20026;&#21478;&#22806;&#19968;&#31181;&#36873;&#25321;&#65292;&#22312;Spring2.5&#20013;&#26368;&#22909;&#26159;&#22312;&#22495;&#25110;&#26041;&#27861;&#32423;&#20351;&#29992;<tt class="interfacename">@Autowired</tt>&#21644;
              <tt class="interfacename">@Resource</tt>&#20026;&#20320;&#30340;<tt class="interfacename">@Configurable</tt> beans&#25351;&#23450;
              &#26126;&#30830;&#30340;&#12289;&#27880;&#35299;&#39537;&#21160;&#30340;&#20381;&#36182;&#27880;&#20837;&#12290;&#65288;&#35814;&#24773;&#35831;&#21442;&#30475;<a href="beans.html#beans-annotation-config" title="3.11.&nbsp;&#22522;&#20110;&#27880;&#35299;&#65288;Annotation-based&#65289;&#30340;&#37197;&#32622;">Section&nbsp;3.11, &#8220;&#22522;&#20110;&#27880;&#35299;&#65288;Annotation-based&#65289;&#30340;&#37197;&#32622;&#8221;</a>&#65289;</p><p>
              &#26368;&#21518;&#65292;&#20320;&#21487;&#20197;&#36890;&#36807;&#20351;&#29992;<tt class="literal">dependencyCheck</tt> &#23646;&#24615;&#65292;&#35753;Spring&#23545;&#26032;&#21019;&#24314;&#21644;&#37197;&#32622;&#30340;&#23545;&#35937;&#30340;&#23545;&#35937;&#24341;&#29992;&#36827;&#34892;
              &#20381;&#36182;&#26816;&#26597;&#65288;&#20363;&#22914;&#65306;<tt class="literal">@Configurable(autowire=Autowire.BY_NAME,dependencyCheck=true)</tt>&#65289;&#12290;
              &#22914;&#26524;&#36825;&#20010;&#23646;&#24615;&#35774;&#32622;&#20026;true&#65292;Spring&#20250;&#22312;&#37197;&#32622;&#32467;&#26463;&#21518;&#26657;&#39564;&#65288;&#38500;&#20102;primitives&#21644;collections&#31867;&#22411;&#65289;
              &#25152;&#26377;&#30340;&#23646;&#24615;&#26159;&#21542;&#37117;&#34987;&#35774;&#32622;&#12290;
            </p><p>
              &#20165;&#20165;&#20351;&#29992;&#27880;&#35299;&#24182;&#27809;&#26377;&#20570;&#20219;&#20309;&#20107;&#24773;&#12290;&#20294;&#26159;<tt class="filename">spring-aspects.jar</tt>
              &#20013;&#30340;<tt class="literal">AnnotationBeanConfigurerAspect</tt>&#20250;&#22312;&#27880;&#35299;&#23384;&#22312;&#26102;&#36215;&#20316;&#29992;&#12290;&#23454;&#36136;&#19978;&#20999;&#38754;&#25351;&#26126;&#65306;
              &#8220;&#22312;&#21021;&#22987;&#21270;&#19968;&#20010;&#30001;<tt class="interfacename">@Configurable</tt> &#27880;&#35299;&#30340;&#26032;&#23545;&#35937;&#26102;&#65292;
              Spring&#25353;&#29031;&#27880;&#35299;&#20013;&#30340;&#23646;&#24615;&#26469;&#37197;&#32622;&#36825;&#20010;&#26032;&#21019;&#24314;&#30340;&#23545;&#35937;&#8221;&#12290;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;<span class="emphasis"><em>initialization</em></span>
              &#25351;&#26032;&#21021;&#22987;&#21270;&#30340;&#65288;&#27604;&#22914;&#29992;<tt class="literal">new</tt>&#21021;&#22987;&#21270;&#65289;&#30340;&#23545;&#35937;&#20197;&#21450;&#33021;&#36827;&#34892;&#21453;&#24207;&#21015;&#21270;&#30340;
              <tt class="interfacename">Serializable</tt>&#23545;&#35937;&#65288;&#20363;&#22914;&#36890;&#36807;
              <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/io/Serializable.html" target="_top">readResolve()</a>&#26041;&#27861;&#65289;&#12290;
            </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/admons/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>
                  &#22312;&#19978;&#19968;&#27573;&#20013;&#19968;&#20010;&#20851;&#38190;&#30340;&#38454;&#27573;&#23601;&#26159;&#8220;<span class="emphasis"><em>inessence</em></span>&#8221;&#12290;&#22810;&#25968;&#24773;&#20917;&#19979;&#65292;&#8220;
                  <span class="emphasis"><em>&#24403;&#20174;&#19968;&#20010;&#26032;&#23545;&#35937;&#21021;&#22987;&#21270;&#36820;&#22238;&#20043;&#21518;</em></span>&#8221;&#30340;&#31934;&#30830;&#35821;&#20041;&#24456;&#19981;&#38169;...&#36825;&#31181;&#35821;&#22659;&#19979;&#65292;
                  &#8220;&#21021;&#22987;&#21270;&#20043;&#21518;&#8221;&#30340;&#24847;&#24605;&#26159;&#20381;&#36182;&#23558;&#22312;&#23545;&#35937;&#34987;&#26500;&#36896;<span class="emphasis"><em>&#20043;&#21518;</em></span>&#27880;&#20837; - 
                  &#36825;&#24847;&#21619;&#30528;&#22312;&#31867;&#30340;&#26500;&#36896;&#22120;&#22359;&#20013;&#20381;&#36182;&#23558;&#19981;&#21487;&#29992;&#12290;&#22914;&#26524;&#20320;&#24076;&#26395;&#23427;&#33021;&#22312;&#26500;&#36896;&#22120;&#20195;&#30721;&#22359;&#25191;&#34892;
                  <span class="emphasis"><em>&#20043;&#21069;</em></span>&#34987;&#27880;&#20837;&#65292;&#24182;&#20174;&#32780;&#22312;&#26500;&#36896;&#22120;&#20013;&#20351;&#29992;&#23427;&#65292;
                  &#37027;&#20040;&#20320;&#38656;&#35201;&#22312;<tt class="interfacename">@Configurable</tt>&#25509;&#21475;&#22768;&#26126;&#19978;&#20570;&#31867;&#20284;&#30340;&#23450;&#20041;&#65306;
                </p><pre class="programlisting">@Configurable(preConstruction=true)</pre><p>
                  &#20320;&#21487;&#20197;&#22312;<a href="http://www.eclipse.org/aspectj/doc/next/progguide/index.html" target="_top">
                  AspectJ Programming Guide</a>&#19968;&#20070;&#30340;<a href="http://www.eclipse.org/aspectj/doc/next/progguide/semantics-joinPoints.html" target="_top">&#38468;&#24405;&#20013;</a>
                  &#25214;&#21040;&#26356;&#22810;&#26377;&#20851;&#22312;AspectJ&#20013;&#21508;&#31181;&#20999;&#38754;&#31867;&#22411;&#30340;&#35821;&#20041;&#20449;&#24687;&#12290;
                </p></td></tr></table></div><p>
               &#35201;&#23454;&#29616;&#19978;&#36848;&#30340;&#25805;&#20316;&#65292;&#24050;&#27880;&#35299;&#30340;&#31867;&#22411;&#24517;&#39035;&#30001;AspectJ weaver&#26469;&#32455;&#20837; - &#20320;&#21487;&#20197;&#20351;&#29992;&#19968;&#20010;&#26500;&#24314;&#26102;&#30340;ant/maven&#20219;&#21153;&#26469;&#23436;&#25104;
               &#65288;&#21442;&#35265;<a href="http://www.eclipse.org/aspectj/doc/released/devguide/antTasks.html" target="_top">AspectJ Development Environment Guide</a>&#65289;&#25110;&#32773;&#20351;&#29992;&#21152;&#36733;&#26102;&#32455;&#20837;&#65288;&#21442;&#35265; <a href="aop.html#aop-aj-ltw" title="6.8.4.&nbsp;&#22312;Spring&#24212;&#29992;&#20013;&#20351;&#29992;AspectJ&#21152;&#36733;&#26102;&#32455;&#20837;&#65288;LTW&#65289;">Section&nbsp;6.8.4, &#8220;&#22312;Spring&#24212;&#29992;&#20013;&#20351;&#29992;AspectJ&#21152;&#36733;&#26102;&#32455;&#20837;&#65288;LTW&#65289;&#8221;</a>&#65289;&#12290;
               &#31867;<tt class="classname">AnnotationBeanConfigurerAspect</tt>&#26412;&#36523;&#20063;&#38656;&#35201;Spring&#26469;&#37197;&#32622;&#65288;&#33719;&#24471;bean factory&#30340;&#24341;&#29992;&#65292;&#20351;&#29992;bean factory&#37197;&#32622;&#26032;&#30340;&#23545;&#35937;&#65289;&#12290;&#20026;&#27492;Spring&#30340;
               <a href="xsd-config.html#xsd-config-body-schemas-context" title="A.2.8.&nbsp;The context schema"><tt class="literal">context</tt>&#21629;&#21517;&#31354;&#38388;</a>
               &#23450;&#20041;&#20102;&#19968;&#20010;&#38750;&#24120;&#26041;&#20415;&#30340;&#26631;&#31614;&#12290;&#21482;&#35201;&#31616;&#21333;&#30340;&#22312;application context&#37197;&#32622;&#20013;&#21253;&#21547;&#19979;&#38754;&#30340;&#20869;&#23481;&#12290;</p><pre class="programlisting">&lt;context:spring-configured/&gt;</pre><p>&#22914;&#26524;&#20320;&#20351;&#29992;DTD&#20195;&#26367;Schema&#65292;&#23545;&#24212;&#30340;&#23450;&#20041;&#22914;&#19979;&#65306;</p><pre class="programlisting">&lt;bean 
                class="org.springframework.beans.factory.aspectj.AnnotationBeanConfigurerAspect"
            factory-method="aspectOf"/&gt;</pre><p>
                &#22312;&#20999;&#38754;&#37197;&#32622;&#23436;&#25104;<span class="emphasis"><em>&#20043;&#21069;</em></span>&#21019;&#24314;&#30340;<tt class="interfacename">@Configurable</tt>
                &#23545;&#35937;&#23454;&#20363;&#20250;&#23548;&#33268;&#22312;log&#20013;&#30041;&#19979;&#19968;&#20010;warning&#65292;&#24182;&#19988;&#20219;&#20309;&#23545;&#20110;&#35813;&#23545;&#35937;&#30340;&#37197;&#32622;&#37117;&#19981;&#20250;&#29983;&#25928;&#12290;
                &#20030;&#19968;&#20010;&#20363;&#23376;&#65292;&#19968;&#20010;Spring&#31649;&#29702;&#37197;&#32622;&#30340;bean&#22312;&#34987;Spring&#21021;&#22987;&#21270;&#30340;&#26102;&#20505;&#21019;&#24314;&#20102;&#19968;&#20010;domain object&#12290;
                &#23545;&#20110;&#36825;&#26679;&#30340;&#24773;&#20917;&#65292;&#20320;&#38656;&#35201;&#23450;&#20041;bean&#23646;&#24615;&#20013;&#30340;"depends-on"&#23646;&#24615;&#26469;&#25163;&#21160;&#25351;&#23450;&#35813;bean&#20381;&#36182;&#20110;configuration&#20999;&#38754;&#12290;
            </p><pre class="programlisting">&lt;bean id="myService"
                class="com.xzy.myapp.service.MyService"
                depends-on="org.springframework.beans.factory.aspectj.AnnotationBeanConfigurerAspect"&gt;
                
                <i class="lineannotation"><span class="lineannotation">&lt;!-- ... --&gt;</span></i>
                
            &lt;/bean&gt;</pre><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-configurable-testing"></a>6.8.1.1.&nbsp;<tt class="interfacename">@Configurable</tt>&#23545;&#35937;&#30340;&#21333;&#20803;&#27979;&#35797;</h4></div></div><div></div></div><p>
                   &#25552;&#20379;<tt class="interfacename">@Configurable</tt>&#25903;&#25345;&#30340;&#19968;&#20010;&#30446;&#30340;&#23601;&#26159;&#20351;&#24471;domain object&#30340;&#21333;&#20803;&#27979;&#35797;
                   &#21487;&#20197;&#29420;&#31435;&#36827;&#34892;&#65292;&#19981;&#38656;&#35201;&#36890;&#36807;&#30828;&#32534;&#30721;&#26597;&#25214;&#21508;&#31181;&#20506;&#36182;&#20851;&#31995;&#12290;&#22914;&#26524;<tt class="interfacename">@Configurable</tt>
                   &#31867;&#22411;&#27809;&#26377;&#36890;&#36807;AspectJ&#32455;&#20837;&#65292;&#21017;&#22312;&#21333;&#20803;&#27979;&#35797;&#36807;&#31243;&#20013;&#27880;&#35299;&#19981;&#20250;&#36215;&#21040;&#20219;&#20309;&#20316;&#29992;&#65292;
                   &#27979;&#35797;&#20013;&#20320;&#21487;&#20197;&#31616;&#21333;&#30340;&#20026;&#23545;&#35937;&#30340;mock&#25110;&#32773;stub&#23646;&#24615;&#36171;&#20540;&#65292;&#24182;&#19988;&#21644;&#27491;&#24120;&#24773;&#20917;&#19968;&#26679;&#21435;&#20351;&#29992;&#35813;&#23545;&#35937;&#12290;
                   &#22914;&#26524;<tt class="interfacename">@Configurable</tt>&#31867;&#22411;&#36890;&#36807;AspectJ&#32455;&#20837;&#65292;
                   &#25105;&#20204;&#20381;&#28982;&#21487;&#20197;&#33073;&#31163;&#23481;&#22120;&#36827;&#34892;&#21333;&#20803;&#27979;&#35797;&#65292;&#19981;&#36807;&#27599;&#27425;&#21019;&#24314;&#19968;&#20010;&#26032;&#30340;<tt class="interfacename">@Configurable</tt>
                   &#23545;&#35937;&#26102;&#37117;&#20250;&#30475;&#21040;&#19968;&#20010;warning&#65292;&#26631;&#31034;&#35813;&#23545;&#35937;&#27809;&#26377;&#34987;Spring&#37197;&#32622;&#12290;
                </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-configurable-container"></a>6.8.1.2.&nbsp;Working with multiple application contexts</h4></div><div><h4 class="title"><a name="aop-configurable-container"></a>6.8.1.2.&nbsp;Working with multiple application contexts</h4></div></div><div></div></div><p>
                    <tt class="literal">AnnotationBeanConfigurerAspect</tt>&#36890;&#36807;&#19968;&#20010;AspectJ singleton&#20999;&#38754;&#26469;&#23454;&#29616;&#23545;
                    <tt class="interfacename">@Configurable</tt>&#30340;&#25903;&#25345;&#12290;&#19968;&#20010;singleton&#20999;&#38754;&#30340;&#20316;&#29992;&#22495;&#21644;&#19968;&#20010;
                    &#38745;&#24577;&#21464;&#37327;&#30340;&#20316;&#29992;&#22495;&#26159;&#19968;&#26679;&#30340;&#65292;&#37027;&#23601;&#26159;&#35828;&#65292;&#23545;&#20110;&#27599;&#19968;&#20010;classloader&#26377;&#19968;&#20010;&#20999;&#38754;&#26469;&#23450;&#20041;&#31867;&#22411;&#12290;
                    &#36825;&#23601;&#24847;&#21619;&#30528;&#22914;&#26524;&#20320;&#22312;&#19968;&#20010;classloader&#23618;&#27425;&#32467;&#26500;&#20013;&#23450;&#20041;&#20102;&#22810;&#20010;application context&#30340;&#26102;&#20505;&#23601;&#38656;&#35201;&#32771;&#34385;
                    &#22312;&#21738;&#37324;&#23450;&#20041;<tt class="literal">&lt;aop:spring-configured/&gt;</tt> bean&#21644;&#22312;&#21738;&#20010;classpath&#19979;
                    &#25918;&#32622;<tt class="filename">spring-aspects.jar</tt>&#12290;
                </p><p>
                    &#32771;&#34385;&#19968;&#19979;&#20856;&#22411;&#30340;Spring web&#39033;&#30446;&#65292;&#19968;&#33324;&#37117;&#26159;&#30001;&#19968;&#20010;&#29238;application context&#23450;&#20041;&#22823;&#37096;&#20998;business service&#21644;
                    &#25152;&#38656;&#35201;&#30340;&#20854;&#20182;&#36164;&#28304;&#65292;&#28982;&#21518;&#27599;&#19968;&#20010;servlet&#25317;&#26377;&#19968;&#20010;&#23376;application context&#23450;&#20041;&#12290;&#25152;&#26377;&#36825;&#20123;context&#20849;&#23384;&#20110;
                    &#21516;&#19968;&#20010;classloader&#20307;&#31995;&#19979;&#65292;&#22240;&#27492;<tt class="literal">AnnotationBeanConfigurerAspect</tt>&#20165;&#20445;&#25345;
                    &#19968;&#20010;&#23545;context&#30340;&#24341;&#29992;&#12290;&#22312;&#36825;&#26679;&#30340;&#24773;&#20917;&#19979;&#65292;&#25105;&#20204;&#25512;&#33616;&#22312;&#29238;application context&#20013;&#23450;&#20041;
                    <tt class="literal">&lt;aop:spring-configured/&gt;</tt> bean&#65306;&#36825;&#37324;&#25152;&#23450;&#20041;&#30340;service&#21487;&#33021;&#26159;
                    &#20320;&#24076;&#26395;&#27880;&#20837;domain object&#30340;&#12290;&#36825;&#26679;&#20570;&#30340;&#32467;&#26524;&#26159;&#20320;&#19981;&#33021;&#20026;&#23376;application context&#20013;
                    &#20351;&#29992;@Configurable&#30340;domain object&#37197;&#32622;bean&#24341;&#29992;&#65288;&#21487;&#33021;&#20320;&#20063;&#26681;&#26412;&#23601;&#19981;&#24076;&#26395;&#37027;&#20040;&#20570;&#65281;&#65289;&#12290;
                </p><p> 
                   &#24403;&#22312;&#19968;&#20010;&#23481;&#22120;&#20013;&#37096;&#32626;&#22810;&#20010;web-app&#30340;&#26102;&#20505;&#65292;&#35831;&#30830;&#20445;&#27599;&#19968;&#20010;web-application&#20351;&#29992;&#33258;&#24049;&#30340;classloader
                   &#26469;&#21152;&#36733;spring-aspects.jar&#20013;&#30340;&#31867;&#65288;&#20363;&#22914;&#23558;spring-aspects.jar&#25918;&#22312;WEB-INF/lib&#30446;&#24405;&#19979;&#65289;&#12290;
                   &#22914;&#26524;spring-aspects.jar&#34987;&#25918;&#22312;&#20102;&#23481;&#22120;&#30340;classpath&#19979;&#65288;&#22240;&#27492;&#20063;&#34987;&#29238;classloader&#21152;&#36733;&#65289;&#65292;&#21017;&#25152;&#26377;&#30340;
                   web application&#23558;&#20849;&#20139;&#19968;&#20010;aspect&#23454;&#20363;&#65292;&#36825;&#21487;&#33021;&#24182;&#19981;&#26159;&#20320;&#25152;&#24819;&#35201;&#30340;&#12290;
                </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-ajlib-other"></a>6.8.2.&nbsp;Spring&#20013;&#20854;&#20182;&#30340;AspectJ&#20999;&#38754;</h3></div></div><div></div></div><p>
                &#38500;&#20102;<tt class="interfacename">@Configurable</tt>&#20999;&#38754;&#65292;
                <tt class="filename">spring-aspects.jar</tt>&#21253;&#21547;&#20102;&#19968;&#20010;AspectJ&#20999;&#38754;&#21487;&#20197;&#29992;&#26469;&#20026;
                &#37027;&#20123;&#20351;&#29992;&#20102;<tt class="interfacename">@Transactional</tt>&#27880;&#35299;&#30340;&#31867;&#22411;&#21644;&#26041;&#27861;&#39537;&#21160;Spring&#20107;&#21153;&#31649;&#29702;&#12290;
                &#25552;&#20379;&#36825;&#20010;&#30340;&#20027;&#35201;&#30446;&#30340;&#26159;&#26377;&#20123;&#29992;&#25143;&#24076;&#26395;&#33073;&#31163;Spring&#23481;&#22120;&#20351;&#29992;Spring&#30340;&#20107;&#21153;&#31649;&#29702;&#12290;
            </p><p>&#35299;&#26512;<tt class="interfacename">@Transactional</tt>&#27880;&#35299;&#30340;&#20999;&#38754;&#26159;
              <tt class="classname">AnnotationTransactionAspect</tt>&#12290;&#24403;&#20351;&#29992;&#36825;&#20010;&#20999;&#38754;&#26102;&#65292;
              &#20320;&#24517;&#39035;&#27880;&#35299;&#36825;&#20010;<span class="emphasis"><em>&#23454;&#29616;&#31867;</em></span>&#65288;&#21644;/&#25110;&#36825;&#20010;&#31867;&#20013;&#30340;&#26041;&#27861;&#65289;&#65292;&#32780;<span class="emphasis"><em>&#19981;&#26159;</em></span>
              &#36825;&#20010;&#31867;&#23454;&#29616;&#30340;&#25509;&#21475;&#65288;&#22914;&#26524;&#26377;&#65289;&#12290;AspectJ&#20801;&#35768;&#22312;&#25509;&#21475;&#19978;&#27880;&#35299;&#30340;Java&#35268;&#21017; <span class="emphasis"><em>&#19981;&#34987;&#32487;&#25215;</em></span>&#12290;
            </p><p>
                &#31867;&#20043;&#19978;&#30340;&#19968;&#20010;<tt class="interfacename">@Transactional</tt>&#27880;&#35299;&#20026;&#35813;&#31867;&#20013;&#20219;&#20309;
                <span class="emphasis"><em>public</em></span>&#25805;&#20316;&#30340;&#25191;&#34892;&#25351;&#23450;&#20102;&#40664;&#35748;&#30340;&#20107;&#21153;&#35821;&#20041;&#12290;
            </p><p>
                &#31867;&#20869;&#37096;&#26041;&#27861;&#19978;&#30340;&#19968;&#20010;<tt class="interfacename">@Transactional</tt>&#27880;&#35299;&#20250;&#35206;&#30422;&#31867;&#27880;&#35299;&#65288;&#22914;&#26524;&#23384;&#22312;&#65289;
                &#25152;&#32473;&#23450;&#30340;&#40664;&#35748;&#30340;&#20107;&#21153;&#35821;&#20041;&#12290;&#20855;&#26377;public&#12289;protected&#21644;default&#20462;&#39280;&#31526;&#30340;&#26041;&#27861;&#37117;&#21487;&#20197;&#34987;&#27880;&#35299;&#12290;
                &#30452;&#25509;&#27880;&#35299;protected&#21644;default&#26041;&#27861;&#26159;&#35753;&#36825;&#20010;&#25805;&#20316;&#30340;&#25191;&#34892;&#33719;&#24471;&#20107;&#21153;&#21010;&#20998;&#30340;&#21807;&#19968;&#36884;&#24452;&#12290;
            </p><p>
                &#23545;&#20110;AspectJ&#31243;&#24207;&#21592;&#65292;&#24076;&#26395;&#20351;&#29992;Spring&#31649;&#29702;&#37197;&#32622;&#21644;&#20107;&#21153;&#31649;&#29702;&#25903;&#25345;&#65292;&#19981;&#36807;&#20182;&#20204;&#19981;&#24819;&#65288;&#25110;&#32773;&#19981;&#33021;&#65289;&#20351;&#29992;&#27880;&#35299;&#65292;
                <tt class="filename">spring-aspects.jar</tt>&#20063;&#21253;&#21547;&#20102;&#19968;&#20123;<tt class="literal">&#25277;&#35937;</tt>
                &#20999;&#38754;&#20379;&#20320;&#32487;&#25215;&#26469;&#25552;&#20379;&#20320;&#33258;&#24049;&#30340;&#20999;&#20837;&#28857;&#23450;&#20041;&#12290;&#21442;&#35265;<tt class="literal">AbstractBeanConfigurerAspect</tt>
                &#21644;<tt class="literal">AbstractTransactionAspect</tt>&#30340;Javadoc&#33719;&#21462;&#26356;&#22810;&#20449;&#24687;&#12290;
                &#20316;&#20026;&#19968;&#20010;&#20363;&#23376;&#65292;&#19979;&#38754;&#30340;&#20195;&#30721;&#29255;&#26029;&#23637;&#31034;&#20102;&#22914;&#20309;&#32534;&#20889;&#19968;&#20010;&#20999;&#38754;&#65292;&#28982;&#21518;&#36890;&#36807;&#21644;&#31867;&#20840;&#21517;&#21305;&#37197;&#30340;bean&#21407;&#22411;&#23450;&#20041;&#26469;
                &#37197;&#32622;domian object&#20013;&#23450;&#20041;&#30340;&#25152;&#26377;&#23454;&#20363;&#65306;
            </p><pre class="programlisting">public aspect DomainObjectConfiguration extends AbstractBeanConfigurerAspect {
                
                public DomainObjectConfiguration() {
                setBeanWiringInfoResolver(new ClassNameBeanWiringInfoResolver());
                }
                
                <i class="lineannotation"><span class="lineannotation">// the creation of a new bean (any object in the domain model)</span></i>
                protected pointcut beanCreation(Object beanInstance) :
                initialization(new(..)) &amp;&amp;
                SystemArchitecture.inDomainModel() &amp;&amp; 
                this(beanInstance);
                
            }</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-aj-configure"></a>6.8.3.&nbsp;&#20351;&#29992;Spring IoC&#26469;&#37197;&#32622;AspectJ&#30340;&#20999;&#38754;</h3></div></div><div></div></div><p>
                &#24403;&#22312;Spring application&#20013;&#20351;&#29992;AspectJ&#30340;&#26102;&#20505;&#65292;&#24456;&#33258;&#28982;&#30340;&#20250;&#24819;&#21040;&#29992;Spring&#26469;&#31649;&#29702;&#36825;&#20123;&#20999;&#38754;&#12290;
                AspectJ runtime&#33258;&#36523;&#36127;&#36131;&#20999;&#38754;&#30340;&#21019;&#24314;&#65292;&#36825;&#24847;&#21619;&#30528;&#36890;&#36807;Spring&#26469;&#31649;&#29702;AspectJ
                &#21019;&#24314;&#20999;&#38754;&#20381;&#36182;&#20110;&#20999;&#38754;&#25152;&#20351;&#29992;&#30340;AspectJ instantiation model(per-clause)&#12290;
            </p><p>
                &#22823;&#22810;&#25968;AspectJ&#20999;&#38754;&#37117;&#26159;<span class="emphasis"><em>singleton</em></span>&#20999;&#38754;&#12290;&#31649;&#29702;&#36825;&#20123;&#20999;&#38754;&#38750;&#24120;&#23481;&#26131;&#65292;
                &#21644;&#36890;&#24120;&#19968;&#26679;&#21019;&#24314;&#19968;&#20010;bean&#23450;&#20041;&#24341;&#29992;&#35813;&#20999;&#38754;&#31867;&#22411;&#23601;&#21487;&#20197;&#20102;&#65292;&#24182;&#19988;&#22312;bean&#23450;&#20041;&#20013;&#21253;&#21547;
                <tt class="literal">'factory-method="aspectOf"'</tt>&#36825;&#20010;&#23646;&#24615;&#12290;
                &#36825;&#30830;&#20445;Spring&#20174;AspectJ&#33719;&#21462;&#20999;&#38754;&#23454;&#20363;&#32780;&#19981;&#26159;&#23581;&#35797;&#33258;&#24049;&#21435;&#21019;&#24314;&#35813;&#23454;&#20363;&#12290;&#31034;&#20363;&#22914;&#19979;&#65306;
            </p><pre class="programlisting">&lt;bean id="profiler" class="com.xyz.profiler.Profiler"
                <span class="bold"><b>factory-method="aspectOf"</b></span>&gt;
                &lt;property name="profilingStrategy" ref="jamonProfilingStrategy"/&gt;
            &lt;/bean&gt;</pre><p>
                non-singleton&#20999;&#38754;&#30340;&#37197;&#32622;&#31245;&#38590;&#19968;&#28857;&#65292;&#28982;&#32780;&#23427;&#21487;&#20197;&#36890;&#36807;&#23450;&#20041;&#19968;&#20010;bean&#21407;&#22411;&#23450;&#20041;&#24182;&#19988;&#20351;&#29992;
                <tt class="filename">spring-aspects.jar</tt>&#20013;&#30340;@Configurable&#25903;&#25345;&#65292;
                &#24403;&#20999;&#38754;&#23454;&#20363;&#30001;AspectJ runtime&#21019;&#24314;&#21518;&#36827;&#34892;&#37197;&#32622;&#12290;
            </p><p>
                &#22914;&#26524;&#20320;&#24076;&#26395;&#19968;&#20123;@AspectJ&#20999;&#38754;&#20351;&#29992;AspectJ&#26469;&#32455;&#20837;&#65288;&#20363;&#22914;&#20351;&#29992;load-time&#32455;&#20837;domain object&#65289;
                &#32780;&#21478;&#19968;&#20123;@AspectJ&#20999;&#38754;&#20351;&#29992;Spring AOP&#65292;&#24182;&#19988;&#36825;&#20123;&#20999;&#38754;&#37117;&#30001;Spring&#26469;&#31649;&#29702;&#65292;&#37027;&#20320;&#23601;&#38656;&#35201;&#21578;&#35785;Spring AOP 
                @AspectJ&#33258;&#21160;&#20195;&#29702;&#25903;&#25345;&#37027;&#20123;&#20999;&#38754;&#38656;&#35201;&#34987;&#33258;&#21160;&#20195;&#29702;&#12290;&#20320;&#21487;&#20197;&#36890;&#36807;&#22312;
                <tt class="literal">&lt;aop:aspectj-autoproxy&gt;</tt>&#22768;&#26126;&#20013;&#20351;&#29992;&#19968;&#20010;&#25110;&#22810;&#20010;
                <tt class="literal">&lt;include/&gt;</tt>&#20803;&#32032;&#12290;&#27599;&#20010;&#20803;&#32032;&#25351;&#23450;&#20102;&#19968;&#31181;&#21629;&#21517;&#26684;&#24335;&#65292;
                &#21482;&#26377;bean&#21629;&#21517;&#33267;&#23569;&#31526;&#21512;&#20854;&#20013;&#19968;&#31181;&#24773;&#20917;&#19979;&#25165;&#20250;&#20351;&#29992;Spring AOP&#33258;&#21160;&#20195;&#29702;&#37197;&#32622;&#65306;
            </p><pre class="programlisting">&lt;aop:aspectj-autoproxy&gt;
                &lt;aop:include name="thisBean"/&gt;
                &lt;aop:include name="thatBean"/&gt;
            &lt;/aop:aspectj-autoproxy&gt;</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/admons/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>
                    &#19981;&#35201;&#34987;<tt class="literal">&lt;aop:aspectj-autoproxy/&gt;</tt>&#20803;&#32032;&#30340;&#21517;&#23383;&#25152;&#35823;&#23548;&#65306;
                    &#29992;&#23427;&#20250;&#23548;&#33268;<span class="emphasis"><em>Spring AOP &#20195;&#29702;</em></span>&#30340;&#21019;&#24314;&#12290;&#22312;&#36825;&#20013;&#21482;&#26159;&#20351;&#29992;@AspectJ
                    &#31867;&#22411;&#30340;&#20999;&#38754;&#22768;&#26126;&#65292;&#20294;&#24182;&#19981;&#20250;&#28041;&#21450;AspectJ&#36816;&#34892;&#26102;&#12290;
                </p></td></tr></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-aj-ltw"></a>6.8.4.&nbsp;&#22312;Spring&#24212;&#29992;&#20013;&#20351;&#29992;AspectJ&#21152;&#36733;&#26102;&#32455;&#20837;&#65288;LTW&#65289;</h3></div></div><div></div></div><p>
              &#21152;&#36733;&#26102;&#32455;&#20837;&#65288;Load-time weaving&#65288;LTW&#65289;&#65289;&#25351;&#30340;&#26159;&#22312;&#34394;&#25311;&#26426;&#36733;&#20837;&#23383;&#33410;&#30721;&#25991;&#20214;&#26102;&#21160;&#24577;&#32455;&#20837;AspectJ&#20999;&#38754;&#12290;
              &#26412;
&#33410;&#20851;&#27880;&#20110;&#22312;Spring Framework&#20013;&#29305;&#30340;&#23450;context&#19979;&#37197;&#32622;&#21644;&#20351;&#29992;LTW&#65306;&#24182;&#27809;&#26377;LTW&#30340;&#20171;&#32461;&#12290;
              &#20851;&#20110;LTW&#21644;&#20165;&#20351;&#29992;AspectJ&#37197;&#32622;LTW&#30340;&#35814;&#32454;&#20449;&#24687;&#65288;&#26681;&#26412;&#19981;&#28041;&#21450;Spring&#65289;&#65292;&#35831;&#26597;&#30475;
              <a href="http://www.eclipse.org/aspectj/doc/released/devguide/ltw.html" target="_top">
              LTW
 section of the AspectJ Development Environment Guide</a>&#12290;
            </p><p>Spring&#26694;&#26550;&#30340;&#20540;&#28155;&#21152;&#20026;AspectJ LTW&#22312;&#21160;&#24577;&#32455;&#20837;&#36807;&#31243;&#20013;&#25552;&#20379;&#20102;&#26356;&#32454;&#31890;&#24230;&#30340;&#25511;&#21046;&#12290;&#20351;&#29992;Java&#65288;5+&#65289;&#30340;&#20195;&#29702;
            &#33021;&#20351;&#29992;&#19968;&#20010;&#21483;&#8216;Vanilla&#8217;&#30340;AspectJ LTW&#65292;&#36825;&#38656;&#35201;&#22312;&#21551;&#21160;JVM&#30340;&#26102;&#20505;&#23558;&#26576;&#20010;VM&#21442;&#25968;&#35774;&#32622;&#20026;&#24320;&#12290;
            &#36825;&#31181;JVM&#33539;&#22260;&#30340;&#35774;&#32622;&#22312;&#19968;&#20123;&#24773;&#20917;&#19979;&#25110;&#35768;&#19981;&#38169;&#65292;&#20294;&#36890;&#24120;&#24773;&#20917;&#19979;&#26174;&#24471;&#26377;&#20123;&#31895;&#39063;&#31890;&#12290;&#32780;&#29992;Spring&#30340;LTW&#33021;&#35753;&#20320;&#22312;
            <span class="emphasis"><em>per-<tt class="classname">ClassLoader</tt></em></span>&#30340;&#22522;&#30784;&#19978;&#25171;&#24320;LTW&#65292;
            &#36825;&#26174;&#28982;&#26356;&#21152;&#32454;&#31890;&#24230;&#24182;&#19988;&#23545;&#8220;&#21333;JVM&#22810;&#24212;&#29992;&#8221;&#30340;&#29615;&#22659;&#26356;&#20855;&#24847;&#20041;&#65288;&#20363;&#22914;&#22312;&#19968;&#20010;&#20856;&#22411;&#24212;&#29992;&#26381;&#21153;&#22120;&#29615;&#22659;&#20013;&#19968;&#26679;&#65289;&#12290;</p><p>&#21478;&#22806;&#65292;<a href="aop.html#aop-aj-ltw-environments" title="6.8.4.6.&nbsp;&#29305;&#23450;&#29615;&#22659;&#30340;&#37197;&#32622;">&#22312;&#26576;&#20123;&#29615;&#22659;&#19979;</a>&#65292;&#36825;&#33021;&#35753;&#20320;&#20351;&#29992;LTW&#32780;
            <span class="emphasis"><em>&#19981;&#23545;&#24212;&#29992;&#26381;&#21153;&#22120;&#30340;&#21551;&#21160;&#33050;&#26412;&#20570;&#20219;&#20309;&#25913;&#21160;</em></span>&#65292;&#19981;&#28982;&#21017;&#38656;&#35201;&#28155;&#21152;
            -javaagent:path/to/aspectjweaver.jar&#25110;&#32773;(&#20197;&#19979;&#23558;&#20250;&#25552;&#21450;&#30340;)-javaagent:path/to/spring-agent.jar&#12290;
            &#24320;&#21457;&#20154;&#21592;&#21482;&#38656;&#31616;&#21333;&#20462;&#25913;&#24212;&#29992;&#19978;&#19979;&#25991;&#30340;&#19968;&#20010;&#25110;&#20960;&#20010;&#25991;&#20214;&#23601;&#33021;&#20351;&#29992;LTW&#65292;&#32780;&#19981;&#38656;&#20381;&#38752;&#37027;&#20123;&#31649;&#29702;&#30528;&#37096;&#32626;&#37197;&#32622;
            &#27604;&#22914;&#21551;&#21160;&#33050;&#26412;&#30340;&#31995;&#32479;&#31649;&#29702;&#21592;&#12290;</p><p>&#32463;&#36807;&#20197;&#19978;&#35762;&#35299;&#20043;&#21518;&#65292;&#20808;&#35753;&#25105;&#20204;&#26469;&#36807;&#19968;&#36941;&#19968;&#20010;&#20351;&#29992;Spring&#30340;AspectJ LTW&#30340;&#24555;&#36895;&#31034;&#20363;&#65292;&#25509;&#30528;&#26159;&#19968;&#20010;
            &#26377;&#23545;&#20803;&#32032;&#35814;&#32454;&#35762;&#35299;&#30340;&#31034;&#20363;&#12290;&#22914;&#26524;&#24819;&#35201;&#19968;&#20010;&#23436;&#25972;&#30340;&#31034;&#20363;&#65292;&#35831;&#21442;&#30475;Petclinic&#65288;&#23456;&#29289;&#35786;&#25152;&#65289;&#30340;&#24212;&#29992;&#23454;&#20363;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-aj-ltw-first-example"></a>6.8.4.1.&nbsp;&#31532;&#19968;&#20010;&#20363;&#23376;</h4></div></div><div></div></div><p>&#20551;&#35774;&#20320;&#26159;&#19968;&#20010;&#24212;&#29992;&#24320;&#20154;&#21592;&#65292;&#34987;&#25351;&#27966;&#35786;&#26029;&#19968;&#20010;&#31995;&#32479;&#30340;&#33509;&#24178;&#24615;&#33021;&#38382;&#39064;&#12290;&#19982;&#20854;&#25343;&#20986;&#24615;&#33021;&#20998;&#26512;&#24037;&#20855;&#65292;
                &#25105;&#20204;&#19981;&#22914;&#24320;&#21551;&#19968;&#20010;&#31616;&#21333;&#30340;&#20998;&#26512;&#20999;&#38754;&#65292;&#20351;&#25105;&#20204;&#33021;&#24456;&#24555;&#22320;&#24471;&#21040;&#19968;&#20123;&#24615;&#33021;&#25351;&#26631;&#65292;&#36825;&#26679;&#25105;&#20204;&#23601;&#33021;&#39532;&#19978;
                &#38024;&#23545;&#29305;&#23450;&#21306;&#22495;&#20351;&#29992;&#19968;&#20123;&#36739;&#32454;&#31890;&#24230;&#30340;&#20998;&#26512;&#24037;&#20855;&#12290;</p><p>&#36825;&#23601;&#26159;&#19968;&#20010;&#20998;&#26512;&#20999;&#38754;&#12290;&#27809;&#20160;&#20040;&#29305;&#21035;&#30340;&#65292;&#21482;&#26159;&#19968;&#20010;&#24555;&#39184;&#24335;&#30340;&#22522;&#20110;&#26102;&#38388;&#30340;&#27169;&#25311;&#20998;&#26512;&#22120;&#65292;
                &#20351;&#29992;&#31867;@AspectJ&#39118;&#26684;&#30340;&#20999;&#38754;&#22768;&#26126;&#12290;</p><pre class="programlisting">package foo;
                    
                    import org.aspectj.lang.ProceedingJoinPoint;
                    import org.aspectj.lang.annotation.Aspect;
                    import org.aspectj.lang.annotation.Around;
                    import org.aspectj.lang.annotation.Pointcut;
                    import org.springframework.util.StopWatch;
                    import org.springframework.core.annotation.Order;
                    
                    @Aspect
                    public class ProfilingAspect {
                    
                    @Around("methodsToBeProfiled()")
                    public Object profile(ProceedingJoinPoint pjp) throws Throwable {
                    StopWatch sw = new StopWatch(getClass().getSimpleName());
                    try {
                    sw.start(pjp.getSignature().getName());
                    return pjp.proceed();
                    } finally {
                    sw.stop();
                    System.out.println(sw.prettyPrint());
                    }
                    }
                    
                    @Pointcut("execution(public * foo..*.*(..))")
                    public void methodsToBeProfiled(){}
                    }
                </pre><p>&#25105;&#20204;&#36824;&#38656;&#35201;&#21019;&#24314;&#19968;&#20010;&#8220;<tt class="filename">META-INF/aop.xml</tt>&#8221;&#25991;&#20214;&#65292;&#20197;&#21578;&#30693;AspectJ weaver
                &#25105;&#20204;&#35201;&#25226;<tt class="classname">ProfilingAspect</tt>&#32455;&#20837;&#21040;&#31867;&#20013;&#12290;&#36825;&#20010;&#25991;&#20214;&#24815;&#20363;&#65292;&#21363;&#22312;Java classpath&#20013;
                &#20986;&#29616;&#19968;&#20010;&#25991;&#20214;&#31216;&#20316;&#8220;<tt class="filename">META-INF/aop.xml</tt>&#8221;&#26159;&#26631;&#20934;&#30340;AspectJ&#12290;</p><pre class="programlisting">&lt;!DOCTYPE aspectj PUBLIC
                    "-//AspectJ//DTD//EN" "http://www.eclipse.org/aspectj/dtd/aspectj.dtd"&gt;
                    &lt;aspectj&gt;
                    
                    &lt;weaver&gt;
                    
                    <i class="lineannotation"><span class="lineannotation">&lt;!-- only weave classes in our application-specific packages --&gt;</span></i>
                    &lt;include within="foo.*"/&gt;
                    
                    &lt;/weaver&gt;
                    
                    &lt;aspects&gt;
                    
                    <i class="lineannotation"><span class="lineannotation">&lt;!-- weave in just this aspect --&gt;</span></i>        
                    &lt;aspect name="foo.ProfilingAspect"/&gt;
                    
                    &lt;/aspects&gt;
                    
                &lt;/aspectj&gt;</pre><p>&#29616;&#22312;&#26469;&#30475;Spring&#29305;&#23450;&#30340;&#37197;&#32622;&#37096;&#20998;&#12290;&#25105;&#20204;&#38656;&#35201;&#37197;&#32622;&#19968;&#20010;<tt class="interfacename">LoadTimeWeaver</tt>
                &#65288;&#31245;&#21518;&#20250;&#26377;&#35299;&#37322;&#65292;&#26242;&#26102;&#19981;&#22810;&#28145;&#31350;&#65289;&#12290;&#24403;&#23558;&#19968;&#20010;&#25110;&#22810;&#20010;&#8220;<tt class="filename">META-INF/aop.xml</tt>&#8221;&#25991;&#20214;&#20013;&#30340;&#20999;&#38754;
                &#37197;&#32622;&#32455;&#20837;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#30340;&#31867;&#20013;&#26102;&#65292;&#36825;&#20010;&#21152;&#36733;&#26102;&#32455;&#20837;&#22120;&#26159;&#24517;&#39035;&#30340;&#12290;&#36825;&#26679;&#30340;&#22909;&#22788;&#26159;&#19981;&#38656;&#35201;&#24456;&#22810;&#30340;&#37197;&#32622;&#65292;
                &#27491;&#22914;&#19979;&#38754;&#20320;&#30475;&#21040;&#30340;&#19968;&#26679;&#65288;&#36824;&#26377;&#21478;&#22806;&#19968;&#20123;&#21442;&#25968;&#20379;&#20320;&#25351;&#23450;&#65292;&#25105;&#20204;&#23558;&#22312;&#21518;&#38754;&#35814;&#32454;&#20171;&#32461;&#65289;&#12290;</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
                    &lt;beans xmlns="http://www.springframework.org/schema/beans"
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                    xmlns:context="http://www.springframework.org/schema/context"
                    xsi:schemaLocation="
                    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
                    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd"&gt;
                    
                    <i class="lineannotation"><span class="lineannotation">&lt;!-- a service object; we will be profiling it's methods --&gt;</span></i>
                    &lt;bean id="entitlementCalculationService"
                    class="foo.StubEntitlementCalculationService"/&gt;
                    
                    <i class="lineannotation"><span class="lineannotation">&lt;!-- this switches on the load-time weaving --&gt;</span></i>
                    <span class="bold"><b>&lt;context:load-time-weaver/&gt;</b></span>
                    
                &lt;/beans&gt;</pre><p>&#29616;&#22312;&#19975;&#20107;&#20465;&#22791; - &#20999;&#38754;&#65292;<tt class="filename">META-INF/aop.xml</tt>&#25991;&#20214;&#65292;&#20197;&#21450;Spring&#30340;&#37197;&#32622; - 
                &#35753;&#25105;&#20204;&#21019;&#24314;&#19968;&#20010;&#24102;&#26377;<tt class="methodname">main(..)</tt>&#26041;&#27861;&#30340;&#31616;&#21333;&#39537;&#21160;&#31867;&#26469;&#28436;&#31034;LTW&#30340;&#20316;&#29992;&#21543;&#12290;</p><pre class="programlisting">package foo;
                    
                    import org.springframework.context.support.ClassPathXmlApplicationContext;
                    
                    public final class Main {
                    
                    public static void main(String[] args) {
                    
                    ApplicationContext ctx = new ClassPathXmlApplicationContext("beans.xml", Main.class);
                    
                    EntitlementCalculationService entitlementCalculationService
                    = (EntitlementCalculationService) ctx.getBean("entitlementCalculationService");
                    
                    <i class="lineannotation"><span class="lineannotation">// the profiling aspect is 'woven' around this method execution</span></i>
                    entitlementCalculationService.calculateEntitlement();
                    }
                }</pre><p>&#26368;&#21518;&#36824;&#26377;&#19968;&#20214;&#20107;&#35201;&#20570;&#12290;&#27492;&#33410;&#20043;&#21069;&#30340;&#20171;&#32461;&#35828;&#36807;&#21487;&#20197;&#26377;&#36873;&#25321;&#24615;&#30340;&#22522;&#20110;Spring&#30340;
                per-<tt class="classname">ClassLoader</tt>&#26469;&#21551;&#21160;LTW&#65292;&#32780;&#19988;&#30340;&#30830;&#22914;&#27492;&#12290;&#19981;&#36807;&#65292;&#23545;&#27492;&#20363;&#26469;&#35828;&#65292;
                &#25105;&#20204;&#23558;&#20351;&#29992;Java&#20195;&#29702;&#65288;&#30001;Spring&#25552;&#20379;&#65289;&#26469;&#21551;&#21160;LTW&#12290;&#36825;&#20010;&#23601;&#26159;&#29992;&#20197;&#36816;&#34892;&#19978;&#38754;<tt class="classname">Main</tt>
                &#31867;&#30340;&#21629;&#20196;&#34892;&#35821;&#21477;&#65306;</p><pre class="programlisting">java -javaagent:C:/projects/foo/lib/global/spring-agent.jar foo.Main</pre><p><tt class="literal">-javaagent</tt>&#26159;&#19968;&#20010;Java 5+&#26631;&#35760;&#65292;&#29992;&#26469;&#25351;&#23450;&#21644;&#28608;&#27963;
                <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/instrument/package-summary.html" target="_top">
                &#20351;JVM&#19978;&#30340;&#31243;&#24207;&#36816;&#34892;&#30340;&#20195;&#29702;</a>&#12290;Spring&#26694;&#26550;&#35013;&#36733;&#20102;&#19968;&#20010;<tt class="classname">InstrumentationSavingAgent</tt>
                &#20195;&#29702;&#65292;&#22312;&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#34987;&#20316;&#20026;&#20102;<tt class="literal">-javaagent</tt>&#21442;&#25968;&#30340;&#20540;&#25171;&#21253;&#22312;
                <tt class="filename">spring-agent.jar</tt>&#20013;&#12290;
                </p><p><tt class="classname">Main</tt>&#31243;&#24207;&#36816;&#34892;&#30340;&#36755;&#20986;&#22914;&#19979;&#25152;&#31034;&#12290;&#65288;&#25105;&#24050;&#32463;&#22312;
                <tt class="methodname">calculateEntitlement()</tt>&#30340;&#23454;&#29616;&#20013;&#25554;&#20837;&#20102;<tt class="methodname">Thread.sleep(..)</tt>
                &#35821;&#21477;&#65292;&#20197;&#20813;&#35753;&#27169;&#25311;&#20998;&#26512;&#22120;&#33719;&#21462;0&#27627;&#31186; - &#36825;&#37324;&#30340;<tt class="literal">01234</tt>&#27627;&#31186;&#24182;&#38750;&#26159;AOP&#24341;&#20837;&#30340;&#31995;&#32479;&#24320;&#38144;&#12290;&#65289;</p><pre class="programlisting">Calculating entitlement
                    
                    StopWatch 'ProfilingAspect': running time (millis) = 1234
                    ------ ----- ----------------------------
                    ms     %     Task name
                    ------ ----- ----------------------------
                01234  100%  calculateEntitlement</pre><p>
                  &#22240;&#20026;&#36825;&#20010;LTW&#20351;&#29992;&#25104;&#29087;&#30340;AspectJ&#65292;&#25105;&#20204;&#24182;&#19981;&#23616;&#38480;&#20110;&#36890;&#30693;Spring beans&#30340;&#26041;&#27861;&#65307;&#25509;&#19979;&#26469;&#36825;&#20010;&#31245;&#26377;&#21464;&#21270;&#30340;
                  <tt class="classname">Main</tt>&#31243;&#24207;&#23558;&#29983;&#25104;&#21516;&#26679;&#30340;&#32467;&#26524;&#12290;
                </p><pre class="programlisting">package foo;
                    
                    import org.springframework.context.support.ClassPathXmlApplicationContext;
                    
                    public final class Main {
                    
                    public static void main(String[] args) {
                    
                    new ClassPathXmlApplicationContext("beans.xml", Main.class);
                    
                    EntitlementCalculationService entitlementCalculationService =
                    new StubEntitlementCalculationService();
                    
                    <i class="lineannotation"><span class="lineannotation">// the profiling aspect will be 'woven' around this method execution</span></i>
                    entitlementCalculationService.calculateEntitlement();
                    }
                }</pre><p>&#27880;&#24847;&#20197;&#19978;&#31243;&#24207;&#25105;&#20204;&#21482;&#26159;&#24341;&#23548;&#20102;Spring&#23481;&#22120;&#65292;&#28982;&#21518;&#23436;&#20840;&#22312;Spring&#19978;&#19979;&#25991;&#20043;&#22806;&#21019;&#24314;&#20102;&#19968;&#20010;
                <tt class="classname">StubEntitlementCalculationService</tt>&#30340;&#23454;&#20363;...&#20998;&#26512;&#36890;&#30693;&#20173;&#28982;&#24471;&#21040;&#32455;&#20837;&#12290;</p><p>&#19978;&#38754;&#30340;&#20363;&#23376;&#34429;&#28982;&#31616;&#21333;&#20102;&#20123;&#65292;&#20294;Spring&#20013;&#22522;&#26412;&#30340;LTW&#25903;&#25345;&#37117;&#24050;&#20171;&#32461;&#23436;&#20102;&#65292;
                &#27492;&#33410;&#20313;&#19979;&#20869;&#23481;&#23558;&#23545;&#20351;&#29992;&#36825;&#20123;&#37197;&#32622;&#21644;&#29992;&#27861;&#32972;&#21518;&#30340;&#29702;&#30001;&#20316;&#35814;&#32454;&#35299;&#37322;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/admons/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>
                        &#31867;<tt class="classname">ProfilingAspect</tt>&#22312;&#27492;&#20363;&#20013;&#34429;&#28982;&#22522;&#26412;&#20294;&#26159;&#39047;&#20026;&#26377;&#29992;&#12290;&#36825;&#26159;&#19968;&#20010;&#24456;&#22909;&#30340;&#24320;&#21457;&#26102;&#20999;&#38754;&#30340;&#20363;&#23376;&#65292;&#24320;&#21457;&#32773;&#21487;&#20197;&#22312;&#24320;&#21457;&#36807;&#31243;&#20013;&#20351;&#29992;&#23427;&#65288;&#24223;&#35805;&#65289;&#65292;
                        &#28982;&#21518;&#20063;&#33021;&#20174;&#24050;&#37096;&#32626;&#21040;UAT&#25110;&#32773;&#29983;&#20135;&#29615;&#22659;&#30340;&#24212;&#29992;&#20013;&#36731;&#26131;&#30340;&#33073;&#31163;&#12290;
                    </p></td></tr></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-aj-ltw-the-aspects"></a>6.8.4.2.&nbsp;&#20999;&#38754;</h4></div></div><div></div></div><p>&#20320;&#22312;LTW&#20013;&#20351;&#29992;&#30340;&#20999;&#38754;&#24517;&#39035;&#26159;AspectJ&#20999;&#38754;&#12290;&#20320;&#21487;&#20197;&#20351;&#29992;AspectJ&#35821;&#35328;&#25110;&#32773;&#31867;@AspectJ&#39118;&#26684;&#26469;&#32534;&#20889;&#20320;&#30340;&#20999;&#38754;&#12290;
                &#21518;&#19968;&#31181;&#26041;&#24335;&#24403;&#28982;&#21482;&#33021;&#22312;Java 5+&#20013;&#20351;&#29992;&#65292;&#20294;&#23427;&#35828;&#26126;&#20102;&#20320;&#30340;&#20999;&#38754;&#21487;&#20197;&#21516;&#26102;&#23545;AspectJ&#21644;Spring AOP&#20999;&#38754;&#26377;&#25928;&#12290;
                &#27492;&#22806;&#65292;&#32534;&#35793;&#21518;&#30340;&#20999;&#38754;&#31867;&#38656;&#35201;&#34987;&#27880;&#20876;&#21040;classpath&#19979;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-aj-ltw-aop_dot_xml"></a>6.8.4.3.&nbsp;'<tt class="filename">META-INF/aop.xml</tt>'</h4></div></div><div></div></div><p>AspectJ LTW&#30340;&#22522;&#30784;&#35774;&#26045;&#26159;&#29992;&#19968;&#20010;&#25110;&#22810;&#20010;&#20301;&#20110;Java classpath&#19978;&#30340;&#65288;&#21487;&#20197;&#26159;&#30452;&#25509;&#30340;&#25991;&#20214;&#24418;&#24335;&#65292;
                &#20063;&#21487;&#20197;&#26159;&#26356;&#20856;&#22411;&#30340;jar&#21253;&#24418;&#24335;&#65289;<tt class="filename">META-INF/aop.xml</tt>&#25991;&#20214;&#37197;&#32622;&#36215;&#26469;&#30340;&#12290;</p><p>
                  &#26377;&#20851;&#25991;&#20214;&#30340;&#32467;&#26500;&#21644;&#20869;&#23481;&#37117;&#22312;AspectJ&#30340;&#21442;&#32771;&#25991;&#26723;&#20013;&#26377;&#35814;&#32454;&#20171;&#32461;&#65292;&#26377;&#20852;&#36259;&#30340;&#35835;&#32773;
                  <a href="http://www.eclipse.org/aspectj/doc/released/devguide/ltw-configuration.html" target="_top">
                  &#35831;&#21442;&#32771;&#36825;&#20123;&#36164;&#28304;</a>&#12290;&#65288;&#24456;&#24198;&#24184;&#36825;&#19968;&#33410;&#27604;&#36739;&#31616;&#30701;&#65292;&#20294;<tt class="filename">aop.xml</tt>&#25991;&#20214;
                  &#26159;100% AspectJ&#30340; - &#27809;&#26377;&#20219;&#20309;&#20351;&#29992;Spring&#29305;&#23450;&#30340;&#20449;&#24687;&#25110;&#35821;&#20041;&#65292;&#22240;&#27492;&#25105;&#20063;&#27809;&#26377;&#20160;&#20040;&#21487;&#36129;&#29486;&#30340;&#12290;
                  &#19982;&#20854;&#37325;&#20889;&#36825;&#20123;&#24050;&#30001;AspectJ&#24320;&#21457;&#32773;&#25552;&#20379;&#30340;&#20196;&#20154;&#28385;&#24847;&#30340;&#31456;&#33410;&#65292;&#25105;&#19981;&#22914;&#39046;&#20320;&#21040;&#36825;&#37324;&#12290;&#65289;
                </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-aj-ltw-libraries"></a>6.8.4.4.&nbsp;&#30456;&#20851;&#31867;&#24211;&#65288;JARS&#65289;</h4></div></div><div></div></div><p>&#20320;&#33267;&#23569;&#38656;&#35201;&#20197;&#19979;&#31867;&#24211;&#26469;&#35753;Spring&#26694;&#26550;&#25903;&#25345;AspectJ LTW&#65306;</p><div class="orderedlist"><ol type="1"><li><p><tt class="filename">spring.jar</tt>&#65288;2.5&#25110;&#26356;&#39640;&#29256;&#26412;&#65289;</p></li><li><p><tt class="filename">aspectjrt.jar</tt>
                        &#65288;1.5&#25110;&#26356;&#39640;&#29256;&#26412;&#65289;</p></li><li><p><tt class="filename">aspectjweaver.jar</tt>
                        &#65288;1.5&#25110;&#26356;&#39640;&#29256;&#26412;&#65289;</p></li></ol></div><p>&#22914;&#26524;&#20320;&#27491;&#22312;&#20351;&#29992;<a href="aop.html#aop-aj-ltw-environment-generic" title="6.8.4.6.1.&nbsp;&#36890;&#29992;Java&#24212;&#29992;">
                &#30001;Spring&#25552;&#20379;&#30340;&#20195;&#29702;&#26469;&#28608;&#27963;&#26816;&#27979;&#65288;instrumentation&#65289;&#21151;&#33021;</a>&#65292;&#20320;&#20250;&#38656;&#35201;&#65306;</p><div class="orderedlist"><ol type="1"><li><p><tt class="filename">spring-agent.jar</tt>
                        </p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-aj-ltw-spring"></a>6.8.4.5.&nbsp;Spring&#37197;&#32622;</h4></div></div><div></div></div><p>
                  Spring LTW&#21151;&#33021;&#30340;&#20851;&#38190;&#32452;&#20214;&#26159;<tt class="interfacename">LoadTimeWeaver</tt>&#25509;&#21475;
                  &#65288;&#22312;<tt class="literal">org.springframework.instrument.classloading</tt>&#21253;&#20013;&#65289;&#65292;
                  &#20197;&#21450;Spring&#20998;&#21457;&#21253;&#20013;&#22823;&#37327;&#30340;&#23454;&#29616;&#12290;<tt class="interfacename">LoadTimeWeaver</tt>&#30340;&#23454;&#29616;&#36127;&#36131;
                  &#22312;&#36816;&#34892;&#26102;&#25226;&#19968;&#20010;&#25110;&#22810;&#20010;<tt class="classname">java.lang.instrument.ClassFileTransformers</tt>&#31867;&#28155;&#21152;&#21040;
                  <tt class="classname">ClassLoader</tt>&#20013;&#65292;&#36825;&#33021;&#20135;&#29983;&#21508;&#31181;&#21508;&#26679;&#26377;&#36259;&#30340;&#24212;&#29992;&#65292;LTW&#20999;&#38754;&#24688;&#22909;&#20415;&#26159;&#20854;&#20013;&#20043;&#19968;&#12290;
                </p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="../images/admons/tip.png"></td><th align="left">Tip</th></tr><tr><td colspan="2" align="left" valign="top"><p>
                        &#22914;&#26524;&#20320;&#23545;&#36816;&#34892;&#26102;&#31867;&#25991;&#20214;&#21464;&#25442;&#30340;&#24605;&#24819;&#36824;&#19981;&#29087;&#24713;&#65292;&#25512;&#33616;&#20320;&#22312;&#32487;&#32493;&#20043;&#21069;&#38405;&#35835;
                        <tt class="literal">java.lang.instrument</tt>&#21253;&#30340;Javadoc API&#25991;&#26723;&#12290;
                        &#36825;&#20854;&#23454;&#24182;&#19981;&#38590;-&#21453;&#32780;&#26377;&#20123;&#24700;&#20154;-&#22240;&#20026;&#26377;&#29992;&#30340;&#25991;&#20214;&#24182;&#19981;&#22810;...&#20851;&#38190;&#30340;&#25509;&#21475;&#21644;&#31867;&#37117;&#23558;&#20250;&#22312;&#27492;&#33410;&#21576;&#29616;&#32473;&#20320;&#12290;
                    </p></td></tr></table></div><p>
                    &#29992;XML&#20026;<tt class="interfacename">ApplicationContext</tt>&#37197;&#32622;&#19968;&#20010;
                    <tt class="interfacename">LoadTimeWeaver</tt>&#31616;&#21333;&#24471;&#21482;&#38656;&#35201;&#28155;&#21152;&#19968;&#34892;&#12290;
                    &#65288;&#35831;&#27880;&#24847;&#20960;&#20046;&#32943;&#23450;&#20320;&#38656;&#35201;&#20351;&#29992;<tt class="interfacename">ApplicationContext</tt>&#20316;&#20026;&#20320;&#30340;
                    Spring&#23481;&#22120; - &#19968;&#33324;&#26469;&#35828;&#21482;&#26377;<tt class="interfacename">BeanFactory</tt>&#26159;&#19981;&#22815;&#30340;&#65292;
                    &#22240;&#20026;LTW&#21151;&#33021;&#38656;&#35201;&#29992;&#21040;<tt class="interfacename">BeanFactoryPostProcessors</tt>&#12290;&#65289;
                </p><p>
                    &#24403;&#35201;&#20351;&#29992;Spring&#26694;&#26550;&#30340;LTW&#21151;&#33021;&#26102;&#65292;&#20320;&#38656;&#35201;&#37197;&#32622;&#19968;&#20010;<tt class="interfacename">LoadTimeWeaver</tt>&#65292;
                    &#19968;&#33324;&#21487;&#20197;&#29992;<tt class="literal">&lt;context:load-time-weaver/&gt;</tt>&#20803;&#32032;&#26469;&#23436;&#25104;&#12290;
                    &#19979;&#38754;&#20026;&#19968;&#20010;&#26377;&#25928;&#30340;&#20351;&#29992;&#40664;&#35748;&#35774;&#32622;&#30340;<tt class="literal">&lt;context:load-time-weaver/&gt;</tt>&#23450;&#20041;&#12290;
                </p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
                    &lt;beans xmlns="http://www.springframework.org/schema/beans"
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                    xmlns:context="http://www.springframework.org/schema/context"
                    xsi:schemaLocation="
                    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
                    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd"&gt;
                    
                    &lt;context:load-time-weaver/&gt;
                    
                &lt;/beans&gt;</pre><p>
                    &#19978;&#38754;<tt class="literal">&lt;context:load-time-weaver/&gt;</tt> bean&#30340;&#23450;&#20041;&#20250;&#33258;&#21160;&#20026;&#20320;&#23450;&#20041;&#21644;&#27880;&#20876;&#33509;&#24178;
                    &#29305;&#23450;LTW&#30340;&#22522;&#30784;&#35774;&#26045;beans&#65292;&#27604;&#22914;&#19968;&#20010;<tt class="interfacename">LoadTimeWeaver</tt>
                    &#21644;&#19968;&#20010;<tt class="classname">AspectJWeavingEnabler</tt>&#12290;&#35831;&#27880;&#24847;
                    <tt class="literal">&lt;context:load-time-weaver/&gt;</tt>&#26159;&#24590;&#26679;&#22312;<tt class="literal">context</tt>
                    &#21629;&#21517;&#31354;&#38388;&#19979;&#34987;&#23450;&#20041;&#30340;&#65307;&#36824;&#35201;&#27880;&#24847;&#34987;&#24341;&#29992;&#30340;XML Schema&#25991;&#20214;&#21482;&#22312;Spring 2.5&#25110;&#26356;&#39640;&#29256;&#26412;&#20013;&#25165;&#21487;&#29992;&#12290;
                </p><p>
                    &#19978;&#38754;&#30340;&#37197;&#32622;&#20026;&#20320;&#23450;&#20041;&#24182;&#27880;&#20876;&#20102;&#19968;&#20010;&#40664;&#35748;&#30340;<tt class="interfacename">LoadTimeWeaver</tt> bean&#12290;
                    &#40664;&#35748;&#30340;<tt class="interfacename">LoadTimeWeaver</tt>&#26159;&#19968;&#20010;
                    <tt class="classname">DefaultContextLoadTimeWeaver</tt>&#31867;&#65292;&#23427;&#26356;&#20542;&#21521;&#20110;&#21435;&#35013;&#39280;&#19968;&#20010;&#33021;&#33258;&#21160;&#26816;&#27979;&#30340;<tt class="interfacename">LoadTimeWeaver</tt>&#31867;&#65306;<tt class="interfacename">LoadTimeWeaver</tt>
                    &#30340;&#30830;&#20999;&#31867;&#22411;&#20250;&#26681;&#25454;&#20320;&#30340;&#36816;&#34892;&#26102;&#29615;&#22659;&#8220;&#33258;&#21160;&#26816;&#27979;&#8221;&#20986;&#26469;&#65288;&#27010;&#36848;&#22914;&#19979;&#34920;&#65289;&#12290;
                </p><div class="table"><a name="aop-aj-ltw-spring-env-impls"></a><p class="title"><b>Table&nbsp;6.1.&nbsp;<tt class="classname">DefaultContextLoadTimeWeaver</tt>
                    <tt class="interfacename">LoadTimeWeavers</tt><tt class="classname">DefaultContextLoadTimeWeaver</tt>&#31867;&#21644;<tt class="interfacename">LoadTimeWeavers</tt>&#25509;&#21475;</b></p><table summary="DefaultContextLoadTimeWeaver&#xA;                    LoadTimeWeavers" width="100%" border="1"><colgroup><col align="left"><col></colgroup><thead><tr><th align="left">&#36816;&#34892;&#26102;&#29615;&#22659;</th><th><tt class="interfacename">LoadTimeWeaver</tt>&#30340;&#25509;&#21475;&#23454;&#29616;</th></tr></thead><tbody><tr><td align="left"><p><a href="http://www.bea.com/framework.jsp?CNT=index.htm&amp;                                 FP=/content/products/weblogic/server" target="_top">BEA's Weblogic 10</a>&#29615;&#22659;&#19979;</p></td><td><p><tt class="classname">WebLogicLoadTimeWeaver</tt></p></td></tr><tr><td align="left"><p><a href="http://www.oracle.com/technology/products/oc4j/index.html" target="_top">
                                Oracle's OC4J</a>&#29615;&#22659;&#19979;</p></td><td><p><tt class="classname">OC4JLoadTimeWeaver</tt></p></td></tr><tr><td align="left"><p><a href="http://glassfish.dev.java.net/" target="_top">GlassFish</a>&#29615;&#22659;&#19979;</p></td><td><p><tt class="classname">GlassFishLoadTimeWeaver</tt></p></td></tr><tr><td align="left"><p>&#20197;Spring<tt class="classname">InstrumentationSavingAgent</tt></p>&#21551;&#21160;&#30340;JVM&#20013;
                                    <p><span class="emphasis"><em><tt class="literal">(java
                                -javaagent:path/to/spring-agent.jar)</tt></em></span></p></td><td><p><tt class="classname">InstrumentationLoadTimeWeaver</tt></p></td></tr><tr><td align="left"><p>&#19981;&#36807;&#65292;&#25105;&#20204;&#26356;&#24076;&#26395;&#36825;&#20123;&#31867;&#21152;&#36733;&#22120;&#33021;&#36981;&#24490;&#20849;&#21516;&#30340;&#35268;&#33539;
                                (&#20363;&#22914;&#36866;&#29992;<tt class="classname">TomcatInstrumentableClassLoader</tt>&#21644;Resin)</p></td><td><p><tt class="classname">ReflectiveLoadTimeWeaver</tt></p></td></tr></tbody></table></div><p>
                    &#35831;&#27880;&#24847;&#24403;&#20351;&#29992;<tt class="classname">DefaultContextLoadTimeWeaver</tt>&#26102;&#21482;&#26377;
                    <tt class="interfacename">LoadTimeWeavers</tt>&#23454;&#29616;&#31867;&#33021;&#36827;&#34892;&#33258;&#21160;&#26816;&#27979;&#65306;
                    &#24403;&#28982;&#65292;&#20320;&#20063;&#21487;&#20197;&#36890;&#36807;&#25351;&#23450;&#23558;&#31867;&#30340;&#23436;&#20840;&#38480;&#23450;&#21517;&#20316;&#20026;<tt class="literal">&lt;context:load-time-weaver/&gt;</tt>
                    &#20803;&#32032;&#20013;<tt class="literal">weaver-class</tt>&#23646;&#24615;&#30340;&#20540;
                    &#26469;&#25351;&#23450;&#31350;&#31455;&#24819;&#20351;&#29992;&#21738;&#20010;<tt class="interfacename">LoadTimeWeaver</tt>&#30340;&#23454;&#29616;&#12290;&#22914;&#19979;&#20363;&#65306;
                </p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
                    &lt;beans xmlns="http://www.springframework.org/schema/beans"
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                    xmlns:context="http://www.springframework.org/schema/context"
                    xsi:schemaLocation="
                    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
                    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd"&gt;
                    
                    &lt;context:load-time-weaver
                    <span class="bold"><b>weaver-class="org.springframework.instrument.classloading.ReflectiveLoadTimeWeaver"</b></span>/&gt;
                    
                &lt;/beans&gt;</pre><p>
                    &#22312;<tt class="literal">&lt;context:load-time-weaver/&gt;</tt>&#20803;&#32032;&#19978;&#23450;&#20041;&#21644;&#27880;&#20876;&#30340;
                    <tt class="interfacename">LoadTimeWeaver</tt>&#25509;&#21475;&#21487;&#20197;&#22312;Spring&#23481;&#22120;&#20013;&#20197;
                    <tt class="literal">loadTimeWeaver</tt>&#21517;&#23383;&#25214;&#21040;&#12290;
                    &#35760;&#20303;<tt class="interfacename">LoadTimeWeaver</tt>&#25509;&#21475;&#21482;&#26159;&#20316;&#20026;Spring LTW&#22522;&#30784;&#35774;&#26045;&#30340;&#19968;&#20010;&#26426;&#21046;
                    &#29992;&#26469;&#28155;&#21152;&#19968;&#20010;&#25110;&#22810;&#20010;<tt class="interfacename">ClassFileTransformers</tt>&#30340;&#12290;
                    <tt class="classname">ClassFileTransformer</tt>&#31867;&#23454;&#38469;&#26159;&#21033;&#29992;
                    <tt class="classname">ClassPreProcessorAgentAdapter</tt>&#31867;&#65288;&#21253;&#21547;&#22312;
                    <tt class="literal">org.aspectj.weaver.loadtime</tt>&#20013;&#65289;&#26469;&#36827;&#34892;LTW&#30340;&#12290;
                    &#26377;&#20851;<tt class="classname">ClassPreProcessorAgentAdapter</tt>&#30340;&#32454;&#33410;&#35831;&#21442;&#35265;
                    &#31867;&#32423;&#21035;&#30340;javadoc&#65292;&#32455;&#20837;&#23454;&#38469;&#24590;&#26679;&#29983;&#25928;&#30340;&#20855;&#20307;&#20869;&#23481;&#24050;&#32463;&#36229;&#20986;&#26412;&#33410;&#35752;&#35770;&#33539;&#22260;&#12290;
                </p><p>
                    &#35753;&#25105;&#20204;&#26469;&#35752;&#35770;<tt class="literal">&lt;context:load-time-weaver/&gt;</tt>&#30340;&#26368;&#21518;&#19968;&#20010;&#23646;&#24615;&#65306;
                    <tt class="literal">aspectj-weaving</tt>&#12290; &#36825;&#26159;&#19968;&#20010;&#31616;&#21333;&#30340;LTW&#24320;&#20851;&#65292;&#23601;&#36825;&#20040;&#31616;&#21333;&#12290;
                    &#23427;&#21487;&#20197;&#25509;&#21463;&#22914;&#19979;&#25152;&#36848;&#30340;&#19977;&#31181;&#20540;&#65292;&#22914;&#26524;&#19981;&#26174;&#31034;&#35774;&#32622;&#27492;&#23646;&#24615;&#21017;&#20854;&#40664;&#35748;&#20540;&#20026;<tt class="literal">autodetect</tt>
                </p><div class="table"><a name="aop-aj-ltw-ltw-tag-attrs"></a><p class="title"><b>Table&nbsp;6.2.&nbsp;<tt class="literal">aspectj-weaving</tt>&#23646;&#24615;&#20540;</b></p><table summary="aspectj-weaving&#23646;&#24615;&#20540;" width="100%" border="1"><colgroup><col align="left"><col></colgroup><thead><tr><th align="left">&#23646;&#24615;&#20540;</th><th>&#27880;&#37322;</th></tr></thead><tbody><tr><td align="left"><p><tt class="literal">on</tt></p></td><td><p>AspectJ&#32455;&#20837;&#21151;&#33021;&#24320;&#21551;&#65292;&#20999;&#38754;&#23558;&#20250;&#22312;&#21152;&#36733;&#26102;&#36866;&#24403;&#26102;&#26426;&#34987;&#32455;&#20837;&#12290;</p></td></tr><tr><td align="left"><p><tt class="literal">off</tt></p></td><td><p>LTW&#21151;&#33021;&#20851;&#38381;...&#19981;&#20250;&#22312;&#21152;&#36733;&#26102;&#32455;&#20837;&#20999;&#38754;&#12290;
                                </p></td></tr><tr><td align="left"><p><tt class="literal">autodetect</tt></p></td><td><p>
                                        &#22914;&#26524;Spring LTW&#22522;&#30784;&#35774;&#26045;&#33021;&#25214;&#21040;&#33267;&#23569;&#19968;&#20010;<tt class="filename">META-INF/aop.xml</tt>
                                        &#25991;&#20214;&#65292;&#37027;&#20040;AspectJ&#32455;&#20837;&#23558;&#20250;&#24320;&#21551;&#65292;&#21542;&#21017;&#20851;&#38381;&#12290;&#27492;&#20026;&#40664;&#35748;&#20540;&#12290;
                                    </p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-aj-ltw-environments"></a>6.8.4.6.&nbsp;&#29305;&#23450;&#29615;&#22659;&#30340;&#37197;&#32622;</h4></div></div><div></div></div><p>
                    &#36825;&#26368;&#21518;&#19968;&#33410;&#21253;&#25324;&#25152;&#26377;&#20320;&#22312;&#35832;&#22914;&#24212;&#29992;&#26381;&#21153;&#22120;&#21644;web&#23481;&#22120;&#20013;&#20351;&#29992;Spring&#30340;LTW&#21151;&#33021;&#26102;&#38656;&#35201;&#30340;&#39069;&#22806;&#35774;&#32622;&#21644;&#37197;&#32622;&#12290;
                </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="aop-aj-ltw-environment-generic"></a>6.8.4.6.1.&nbsp;&#36890;&#29992;Java&#24212;&#29992;</h5></div></div><div></div></div><p>
                      &#20320;&#21487;&#33021;&#22312;&#21508;&#31181;Java&#24212;&#29992;&#20013;&#36890;&#36807;&#20351;&#29992;&#30001;Spring&#25552;&#20379;&#30340;&#26816;&#27979;&#20195;&#29702;&#21551;&#29992;Spring&#30340;LTW&#21151;&#33021;
                      &#65288;&#29420;&#31435;&#24212;&#29992;&#25110;&#32773;&#22522;&#20110;&#24212;&#29992;&#26381;&#21153;&#22120;&#30340;&#24212;&#29992;&#65289;&#12290;&#36825;&#26679;&#30340;&#35805;&#65292;&#21487;&#20197;&#36890;&#36807;&#25351;&#23450;
                       <tt class="literal">-javaagent:path/to/spring-agent.jar</tt>&#36873;&#39033;&#26469;&#21551;&#21160;&#34394;&#25311;&#26426;&#12290;
                       &#35831;&#27880;&#24847;&#36825;&#38656;&#35201;&#20462;&#25913;&#34394;&#25311;&#26426;&#30340;&#21551;&#21160;&#33050;&#26412;&#65292;&#20294;&#22312;&#26576;&#20123;&#24212;&#29992;&#26381;&#21153;&#22120;&#29615;&#22659;&#19979;&#26159;&#31105;&#27490;&#36825;&#20040;&#20570;&#30340;
                      &#65288;&#36825;&#21462;&#20915;&#20110;&#20320;&#30340;&#25805;&#20316;&#31574;&#30053;&#65289;&#12290;
                    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="aop-aj-ltw-environment-tomcat"></a>6.8.4.6.2.&nbsp;Tomcat</h5></div></div><div></div></div><p>
                        &#23545;&#20110;&#37096;&#32626;&#22312;Apache Tomcat 5.0&#25110;&#26356;&#39640;&#29256;&#26412;&#19978;&#30340;web&#24212;&#29992;&#65292;Spring&#23558;&#19968;&#20010;
                        <tt class="classname">TomcatInstrumentableClassLoader</tt>&#27880;&#20876;&#25104;&#20026;web&#24212;&#29992;&#30340;&#31867;&#21152;&#36733;&#22120;&#12290;
                        &#24517;&#39035;&#30340;Tomcat&#35774;&#32622;&#22914;&#19979;&#25152;&#31034;&#65292;&#20320;&#21487;&#20197;&#25226;&#23427;&#25918;&#22312;Tomcat WAR&#21253;&#26681;&#30446;&#24405;&#19979;&#30340;&#26680;&#24515;&#25991;&#20214;
                        <tt class="literal">server.xml</tt>&#20013;&#25110;&#25918;&#21040;&#24212;&#29992;&#29305;&#23450;&#30340;<tt class="literal">META-INF/context.xml</tt>&#25991;&#20214;&#20013;&#12290;
                        Spring&#30340;<tt class="literal">spring-tomcat-weaver.jar</tt>&#38656;&#35201;&#34987;&#21253;&#21547;&#21040;Tomcat
                        &#30340;common lib&#36335;&#24452;&#19979;&#20197;&#30830;&#20445;&#35774;&#32622;&#29983;&#25928;&#12290;
                    </p><pre class="programlisting">&lt;Context path="/myWebApp" docBase="/my/webApp/location"&gt;
                        &lt;Loader loaderClass="org.springframework.instrument.classloading.tomcat.TomcatInstrumentableClassLoader"
                        useSystemClassLoaderAsParent="false"/&gt;
                        &lt;/Context&gt;
                    </pre><p>
                        &#27880;&#24847;&#65306;<span class="emphasis"><em>&#24403;&#20351;&#29992;LTW&#26102;&#65292;&#25105;&#20204;&#19968;&#33324;&#25512;&#33616;&#20351;&#29992;Tomcat 5.5.20&#25110;&#26356;&#39640;&#29256;&#26412;&#12290;</em></span>
                        &#20808;&#21069;&#30340;&#29256;&#26412;&#23545;&#23450;&#21046;&#30340;<tt class="classname">ClassLoader</tt>&#35774;&#32622;&#20250;&#20135;&#29983;&#38382;&#39064;&#12290;
                    </p><p>
                       &#21478;&#22806;&#65292;&#35831;&#32771;&#34385;&#20351;&#29992;&#22312;Tomcat&#21551;&#21160;&#33050;&#26412;&#20013;&#65288;&#35265;&#19978;&#38754;&#65289;&#25351;&#23450;&#30001;Spring&#25552;&#20379;&#30340;&#36890;&#29992;&#34394;&#25311;&#26426;&#20195;&#29702;&#12290;
                       &#36825;&#26679;&#25165;&#33021;&#20351;&#26816;&#27979;&#21151;&#33021;&#22312;&#25152;&#26377;&#24050;&#37096;&#32626;&#30340;web&#24212;&#29992;&#20013;&#21487;&#29992;&#65292;&#26080;&#35770;&#20854;&#19978;&#36816;&#34892;&#30340;&#26159;&#21738;&#31181;&#31867;&#21152;&#36733;&#22120;&#12290;
                    </p><p>
                        &#26377;&#20851;&#26356;&#22810;&#22522;&#20110;Tomcat&#32455;&#20837;&#35774;&#32622;&#30340;&#35814;&#32454;&#35752;&#35770;&#65292;&#35831;&#21442;&#32771;&#35752;&#35770;&#21508;&#31181;&#19981;&#21516;Tomcat&#29256;&#26412;&#20869;&#23481;&#30340;
                        <a href="orm.html#orm-jpa-setup-lcemfb-tomcat" title="12.6.1.3.1.&nbsp;Tomcat&#65288;5.0&#20197;&#19978;&#65289;&#21152;&#36733;&#26102;&#30340;&#32455;&#20837;&#37197;&#32622;">Section&nbsp;12.6.1.3.1, &#8220;Tomcat&#65288;5.0&#20197;&#19978;&#65289;&#21152;&#36733;&#26102;&#30340;&#32455;&#20837;&#37197;&#32622;&#8221;</a>&#19968;&#33410;&#12290;&#34429;&#28982;&#26412;&#33410;&#20027;&#35201;&#20851;&#27880;&#20110;
                        JPA persistence&#25552;&#20379;&#32773;&#30340;&#35774;&#32622;&#65292;&#20294;&#20063;&#35848;&#21040;&#20102;Tomcat&#21508;&#31181;&#29305;&#23450;&#35774;&#32622;&#36866;&#29992;&#20110;&#19968;&#33324;&#21152;&#36733;&#26102;&#32455;&#20837;&#30340;&#24773;&#20917;&#12290;
                    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="aop-aj-ltw-environments-weblogic-oc4j-resin-glassfish"></a>6.8.4.6.3.&nbsp;WebLogic, OC4J, Resin, GlassFish</h5></div></div><div></div></div><p>
                        BEA WebLogic&#65288;&#29256;&#26412;10&#25110;&#26356;&#39640;&#65289;&#65292;Oracle&#30340;JavaEE&#23481;&#22120;&#65288;OC4J 10.1.3.1&#25110;&#26356;&#39640;&#65289;&#20197;&#21450;
                        Resin&#65288;&#29256;&#26412;3.1&#25110;&#26356;&#39640;&#65289;&#25552;&#20379;&#20855;&#26377;&#26412;&#22320;&#26816;&#27979;&#33021;&#21147;&#30340;&#31867;&#21152;&#36733;&#22120;&#12290;
                        Srping&#30340;&#21407;&#29983;LTW&#21033;&#29992;&#36825;&#20123;&#31867;&#21152;&#36733;&#22120;&#26469;&#28608;&#27963;AspectJ&#32455;&#20837;&#12290;&#20320;&#21487;&#20197;&#36890;&#36807;&#31616;&#21333;&#22320;&#28608;&#27963;&#20043;&#21069;&#25552;&#21040;&#30340;
                        <tt class="literal">context:load-time-weaver</tt>&#26469;&#21551;&#21160;LTW&#21151;&#33021;&#12290;&#20855;&#20307;&#26469;&#35828;&#65292;&#21363;&#20320;
                        <span class="emphasis"><em>&#19981;</em></span>&#38656;&#35201;&#36890;&#36807;&#20462;&#25913;&#21551;&#21160;&#33050;&#26412;&#26469;&#28155;&#21152;
                        <tt class="literal">-javaagent:path/to/spring-agent.jar</tt>&#12290;
                    </p><p>
                       GlassFish&#21516;&#26679;&#20063;&#25552;&#20379;&#20102;&#26816;&#27979;&#33021;&#21147;&#30340;&#31867;&#21152;&#36733;&#22120;&#65292;&#19981;&#36807;&#21482;&#33021;&#22312;&#23427;&#30340;EAR&#29615;&#22659;&#19979;&#20351;&#29992;&#12290;
                       &#23545;&#20110;GlassFish&#30340;web&#24212;&#29992;&#65292;&#21487;&#20197;&#20351;&#29992;&#36319;&#19978;&#38754;tomcat&#30456;&#21516;&#30340;&#35774;&#32622;&#12290;
                    </p></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="aop-resources"></a>6.9.&nbsp;&#26356;&#22810;&#36164;&#28304;</h2></div></div><div></div></div><p>&#26356;&#22810;&#20851;&#20110;AspectJ&#30340;&#20449;&#24687;&#21487;&#20197;&#26597;&#30475; <a href="http://www.eclipse.org/aspectj" target="_top">AspectJ website</a>&#12290;
        </p><p>
          <span class="emphasis"><em>Eclipse AspectJ</em></span> Adrian Colyer&#31561;&#20154;&#32534;&#33879;(Addison-Wesley, 2005)
          &#19968;&#20070;&#25552;&#20379;&#20102;&#38024;&#23545;AspectJ&#35821;&#35328;&#20840;&#38754;&#30340;&#20171;&#32461;&#21644;&#21442;&#32771;&#12290;</p><p>
        <span class="emphasis"><em>AspectJ in Action</em></span> Ramnivas Laddad&#32534;&#33879;(Manning, 2003)&#26159;&#19968;&#26412;&#38750;&#24120;&#20986;&#33394;&#20171;&#32461;AOP&#30340;&#20070;&#31821;&#65307;
        &#20840;&#20070;&#30528;&#37325;&#20171;&#32461;&#20102;AspectJ&#65292;&#20294;&#20063;&#23545;&#19968;&#20123;&#36890;&#29992;&#30340;AOP&#22330;&#26223;&#36827;&#34892;&#20102;&#27604;&#36739;&#28145;&#20837;&#30340;&#30740;&#31350;&#12290;</p></div></div><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="validation.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="aop-api.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;5.&nbsp;&#26657;&#39564;&#65292;&#25968;&#25454;&#32465;&#23450;&#65292;BeanWrapper&#65292;&#19982;&#23646;&#24615;&#32534;&#36753;&#22120;&nbsp;</td><td width="20%" align="center"><span style="color:white;font-size:90%;"><a href="http://www.springsource.com/" title="SpringSource">Sponsored by SpringSource</a></span></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;7.&nbsp;Spring AOP APIs</td></tr></table></div></body></html>