<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Spring Framework &#24320;&#21457;&#21442;&#32771;&#25163;&#20876;</title><link rel="stylesheet" href="html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.60.1"></head><body link="#0000ff" text="black" vlink="#840084" alink="#0000ff" bgcolor="white"><div class="book" lang="en"><div class="titlepage"><div><div><h1 class="title"><a name="d0e1"></a>Spring Framework &#24320;&#21457;&#21442;&#32771;&#25163;&#20876;</h1></div><div><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="authorgroup"><h2>Authors</h2><p></p><span class="author"><span xmlns="" class="firstname">Rod</span> <span xmlns="" class="surname">Johnson</span></span>, <span class="author"><span xmlns="" class="firstname">Juergen</span> <span xmlns="" class="surname">Hoeller</span></span>, <span class="author"><span xmlns="" class="firstname">Alef</span> <span xmlns="" class="surname">Arendsen</span></span>, <span class="author"><span xmlns="" class="firstname">Colin</span> <span xmlns="" class="surname">Sampaleanu</span></span>, <span class="author"><span xmlns="" class="firstname">Rob</span> <span xmlns="" class="surname">Harrop</span></span>, <span class="author"><span xmlns="" class="firstname">Thomas</span> <span xmlns="" class="surname">Risberg</span></span>, <span class="author"><span xmlns="" class="firstname">Darren</span> <span xmlns="" class="surname">Davison</span></span>, <span class="author"><span xmlns="" class="firstname">Dmitriy</span> <span xmlns="" class="surname">Kopylenko</span></span>, <span class="author"><span xmlns="" class="firstname">Mark</span> <span xmlns="" class="surname">Pollack</span></span>, <span class="author"><span xmlns="" class="firstname">Thierry</span> <span xmlns="" class="surname">Templier</span></span>, <span class="author"><span xmlns="" class="firstname">Erwin</span> <span xmlns="" class="surname">Vervaet</span></span>, <span class="author"><span xmlns="" class="firstname">Portia</span> <span xmlns="" class="surname">Tung</span></span>, <span class="author"><span xmlns="" class="firstname">Ben</span> <span xmlns="" class="surname">Hale</span></span>, <span class="author"><span xmlns="" class="firstname">Adrian</span> <span xmlns="" class="surname">Colyer</span></span>, <span class="author"><span xmlns="" class="firstname">John</span> <span xmlns="" class="surname">Lewis</span></span>, <span class="author"><span xmlns="" class="firstname">Costin</span> <span xmlns="" class="surname">Leau</span></span>, <span class="author"><span xmlns="" class="firstname">Mark</span> <span xmlns="" class="surname">Fisher</span></span>, <span class="author"><span xmlns="" class="firstname">Sam</span> <span xmlns="" class="surname">Brannen</span></span>, <span class="author"><span xmlns="" class="firstname">Ramnivas</span> <span xmlns="" class="surname">Laddad</span></span></div></div><div><p class="releaseinfo">2.5.2</p></div><div><div class="legalnotice"><p>Copies of this document may be made for your own use and for
			distribution to others, provided that you do not charge any
			fee for such copies and further provided that each copy
			contains this Copyright Notice, whether distributed in print
			or electronically.
			</p></div></div></div><div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><a href="#preface">&#21069;&#35328;</a></dt><dt>1. <a href="#introduction">&#31616;&#20171;</a></dt><dd><dl><dt>1.1. <a href="#introduction-overview">&#27010;&#35272;</a></dt><dd><dl><dt>1.1.1. <a href="#overview-usagescenarios">&#20351;&#29992;&#22330;&#26223;</a></dt></dl></dd></dl></dd><dt>2. <a href="#new-in-2">Spring 2.0&#21644; 2.5&#30340;&#26032;&#29305;&#24615;</a></dt><dd><dl><dt>2.1. <a href="#new-in-2-intro">&#31616;&#20171;</a></dt><dt>2.2. <a href="#new-in-2-ioc">&#25511;&#21046;&#21453;&#36716;(IoC)&#23481;&#22120;</a></dt><dd><dl><dt>2.2.1. <a href="#new-in-2-ioc-scopes">&#26032;&#30340;bean&#20316;&#29992;&#22495;</a></dt><dt>2.2.2. <a href="#new-in-2-ioc-configuration">&#26356;&#31616;&#21333;&#30340;XML&#37197;&#32622;</a></dt><dt>2.2.3. <a href="#new-in-2-ioc-custom-configuration">&#21487;&#25193;&#23637;&#30340;XML&#32534;&#20889;</a></dt><dt>2.2.4. <a href="#new-in-2-ioc-annotations">Annotation(&#27880;&#35299;)&#39537;&#21160;&#37197;&#32622;</a></dt><dt>2.2.5. <a href="#new-in-2-ioc-component-scanning">&#22312;classpath&#20013;&#33258;&#21160;&#25628;&#32034;&#32452;&#20214;</a></dt></dl></dd><dt>2.3. <a href="#new-in-2-aop">&#38754;&#21521;&#20999;&#38754;&#32534;&#31243;(AOP)</a></dt><dd><dl><dt>2.3.1. <a href="#new-in-2-aop-configuration">&#26356;&#21152;&#31616;&#21333;&#30340;AOP XML&#37197;&#32622;</a></dt><dt>2.3.2. <a href="#new-in-2-aop-aspectj">&#23545;@AspectJ &#20999;&#38754;&#30340;&#25903;&#25345;</a></dt><dt>2.3.3. <a href="#new-in-2-aop-bean-pointcuts">&#23545;bean&#21629;&#21517;pointcut( bean name pointcut element)&#30340;&#25903;&#25345;</a></dt><dt>2.3.4. <a href="#new-in-2-aop-load-time-weaving">&#23545;AspectJ&#35013;&#36733;&#26102;&#32455;&#20837;&#65288;AspectJ load-time weaving&#65289;&#30340;&#25903;&#25345;</a></dt></dl></dd><dt>2.4. <a href="#new-in-2-middle-tier">&#20013;&#38388;&#23618;</a></dt><dd><dl><dt>2.4.1. <a href="#new-in-2-middle-tier-transaction-configuration">&#22312;XML&#37324;&#26356;&#20026;&#31616;&#21333;&#30340;&#22768;&#26126;&#24615;&#20107;&#21153;&#37197;&#32622;</a></dt><dt>2.4.2. <a href="#new-in-2-middle-tier-websphere">&#23545;Websphere &#20107;&#21153;&#31649;&#29702;&#30340;&#23436;&#25972;&#25903;&#25345;</a></dt><dt>2.4.3. <a href="#new-in-2-middle-tier-jpa">JPA</a></dt><dt>2.4.4. <a href="#new-in-2-middle-tier-async-jms">&#24322;&#27493;&#30340;JMS</a></dt><dt>2.4.5. <a href="#new-in-2-middle-tier-jdbc">JDBC</a></dt></dl></dd><dt>2.5. <a href="#new-in-2-web">Web&#23618;</a></dt><dd><dl><dt>2.5.1. <a href="#new-in-2-web-convention">Spring MVC&#21512;&#29702;&#30340;&#40664;&#35748;&#20540;</a></dt><dt>2.5.2. <a href="#new-in-2-web-portlet">Portlet &#26694;&#26550;</a></dt><dt>2.5.3. <a href="#new-in-2-web-annotations">&#22522;&#20110;Annotation&#30340;&#25511;&#21046;&#22120;</a></dt><dt>2.5.4. <a href="#new-in-2-web-form-tags">Spring MVC&#30340;&#34920;&#21333;&#26631;&#31614;&#24211;</a></dt><dt>2.5.5. <a href="#new-in-2-web-tiles2">&#23545;Tiles 2 &#25903;&#25345;</a></dt><dt>2.5.6. <a href="#new-in-2-web-jsf12">&#23545;JSF 1.2&#25903;&#25345;</a></dt><dt>2.5.7. <a href="#new-in-2-web-jaxws">JAX-WS&#25903;&#25345;</a></dt></dl></dd><dt>2.6. <a href="#new-in-2-other">&#20854;&#20182;</a></dt><dd><dl><dt>2.6.1. <a href="#new-in-2-other-dynamic-language-support">&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;</a></dt><dt>2.6.2. <a href="#new-in-2-other-testing">&#22686;&#24378;&#30340;&#27979;&#35797;&#25903;&#25345;</a></dt><dt>2.6.3. <a href="#new-in-2-other-jmx">JMX &#25903;&#25345;</a></dt><dt>2.6.4. <a href="#new-in-2-other-jca">&#23558;Spring &#24212;&#29992;&#31243;&#24207;&#19978;&#19979;&#25991;&#37096;&#32626;&#20026;JCA adapter</a></dt><dt>2.6.5. <a href="#new-in-2-other-taskexecutor">&#35745;&#21010;&#20219;&#21153;</a></dt><dt>2.6.6. <a href="#new-in-2-other-java5">&#23545;Java 5 (Tiger) &#25903;&#25345;</a></dt></dl></dd><dt>2.7. <a href="#new-in-2-migrating">&#31227;&#26893;&#21040;Spring 2.5</a></dt><dd><dl><dt>2.7.1. <a href="#new-in-2-migrating-changes">&#25913;&#21464;</a></dt><dd><dl><dt>2.7.1.1. <a href="#new-in-2-migrating-jdk">&#25903;&#25345;&#30340;JDK&#29256;&#26412;</a></dt><dt>2.7.1.2. <a href="#new-in-2-migrating-packaging">Spring 2.5&#30340;Jar&#25171;&#21253;</a></dt><dt>2.7.1.3. <a href="#new-in-2-migrating-xml-configuration">XML&#37197;&#32622;</a></dt><dt>2.7.1.4. <a href="#new-in-2-migrating-deprecated">Deprecated&#65288;&#28120;&#27760;&#65289;&#30340;&#31867;&#21644;&#26041;&#27861;</a></dt><dt>2.7.1.5. <a href="#new-in-2-migrating-ojb">Apache OJB</a></dt><dt>2.7.1.6. <a href="#new-in-2-migrating-ibatis">iBATIS</a></dt><dt>2.7.1.7. <a href="#new-in-2-migrating-hibernate">Hibernate</a></dt><dt>2.7.1.8. <a href="#new-in-2-migrating-jdo">JDO</a></dt><dt>2.7.1.9. <a href="#new-in-2-migrating-UrlFilenameViewController">UrlFilenameViewController</a></dt></dl></dd></dl></dd><dt>2.8. <a href="#new-in-2-other-applications">&#26356;&#26032;&#30340;&#26679;&#20363;&#24212;&#29992;</a></dt><dt>2.9. <a href="#new-in-2-other-documentation">&#25913;&#36827;&#30340;&#25991;&#26723;</a></dt></dl></dd><dt>I. <a href="#spring-core">&#26680;&#24515;&#25216;&#26415;</a></dt><dd><dl><dt>3. <a href="#beans">IoC(&#25511;&#21046;&#21453;&#36716;)&#23481;&#22120;</a></dt><dd><dl><dt>3.1. <a href="#beans-introduction">&#31616;&#20171;</a></dt><dt>3.2. <a href="#beans-basics">&#22522;&#26412;&#21407;&#29702; - &#23481;&#22120;&#21644;bean</a></dt><dd><dl><dt>3.2.1. <a href="#beans-factory">&#23481;&#22120;</a></dt><dd><dl><dt>3.2.1.1. <a href="#beans-factory-metadata">&#37197;&#32622;&#20803;&#25968;&#25454;</a></dt></dl></dd><dt>3.2.2. <a href="#beans-factory-instantiation">&#23454;&#20363;&#21270;&#23481;&#22120;</a></dt><dd><dl><dt>3.2.2.1. <a href="#beans-factory-xml-import">XML&#37197;&#32622;&#20803;&#25968;&#25454;&#30340;&#32467;&#26500;</a></dt></dl></dd><dt>3.2.3. <a href="#beans-definition">&#22810;&#31181;bean</a></dt><dd><dl><dt>3.2.3.1. <a href="#beans-beanname">bean&#30340;&#21629;&#21517;</a></dt><dt>3.2.3.2. <a href="#beans-factory-class">&#23454;&#20363;&#21270;bean</a></dt></dl></dd><dt>3.2.4. <a href="#beans-factory-client">&#20351;&#29992;&#23481;&#22120;</a></dt></dl></dd><dt>3.3. <a href="#beans-dependencies">&#20381;&#36182;</a></dt><dd><dl><dt>3.3.1. <a href="#beans-factory-collaborators">&#27880;&#20837;&#20381;&#36182;</a></dt><dd><dl><dt>3.3.1.1. <a href="#beans-constructor-injection">&#26500;&#36896;&#22120;&#27880;&#20837;</a></dt><dt>3.3.1.2. <a href="#beans-setter-injection">Setter&#27880;&#20837;</a></dt><dt>3.3.1.3. <a href="#beans-some-examples">&#19968;&#20123;&#20363;&#23376;</a></dt></dl></dd><dt>3.3.2. <a href="#beans-factory-properties-detailed">&#20381;&#36182;&#37197;&#32622;&#35814;&#35299;</a></dt><dd><dl><dt>3.3.2.1. <a href="#beans-value-element">&#30452;&#25509;&#21464;&#37327;(&#22522;&#26412;&#31867;&#22411;&#12289;Strings&#31867;&#22411;&#31561;&#12290;)</a></dt><dt>3.3.2.2. <a href="#beans-ref-element">&#24341;&#29992;&#20854;&#23427;&#30340;bean&#65288;&#21327;&#20316;&#32773;&#65289;</a></dt><dt>3.3.2.3. <a href="#beans-inner-beans">&#20869;&#37096;bean</a></dt><dt>3.3.2.4. <a href="#beans-collection-elements">&#38598;&#21512;</a></dt><dt>3.3.2.5. <a href="#beans-null-element">Nulls</a></dt><dt>3.3.2.6. <a href="#xml-config-shortcuts">XML&#37197;&#32622;&#25991;&#20214;&#30340;&#31616;&#20889;&#21450;&#20854;&#20182;</a></dt><dt>3.3.2.7. <a href="#beans-compound-property-names">&#32452;&#21512;&#23646;&#24615;&#21517;&#31216;</a></dt></dl></dd><dt>3.3.3. <a href="#beans-factory-dependson">&#20351;&#29992;depends-on</a></dt><dt>3.3.4. <a href="#beans-factory-lazy-init">&#24310;&#36831;&#21021;&#22987;&#21270;bean</a></dt><dt>3.3.5. <a href="#beans-factory-autowire">&#33258;&#21160;&#35013;&#37197;&#65288;autowire&#65289;&#21327;&#20316;&#32773;</a></dt><dd><dl><dt>3.3.5.1. <a href="#beans-factory-autowire-candidate">&#23558;bean&#25490;&#38500;&#22312;&#33258;&#21160;&#35013;&#37197;&#20043;&#22806;</a></dt></dl></dd><dt>3.3.6. <a href="#beans-factory-dependencies">&#20381;&#36182;&#26816;&#26597;</a></dt><dt>3.3.7. <a href="#beans-factory-method-injection">&#26041;&#27861;&#27880;&#20837;</a></dt><dd><dl><dt>3.3.7.1. <a href="#beans-factory-lookup-method-injection">Lookup&#26041;&#27861;&#27880;&#20837;</a></dt><dt>3.3.7.2. <a href="#beans-factory-arbitrary-method-replacement">&#33258;&#23450;&#20041;&#26041;&#27861;&#30340;&#26367;&#20195;&#26041;&#26696;</a></dt></dl></dd></dl></dd><dt>3.4. <a href="#beans-factory-scopes">Bean&#30340;&#20316;&#29992;&#22495;</a></dt><dd><dl><dt>3.4.1. <a href="#beans-factory-scopes-singleton">Singleton&#20316;&#29992;&#22495;</a></dt><dt>3.4.2. <a href="#beans-factory-scopes-prototype">Prototype&#20316;&#29992;&#22495;</a></dt><dt>3.4.3. <a href="#beans-factory-scopes-sing-prot-interaction">Singleton beans&#21644;prototype-bean&#30340;&#20381;&#36182;</a></dt><dt>3.4.4. <a href="#beans-factory-scopes-other">&#20854;&#20182;&#20316;&#29992;&#22495;</a></dt><dd><dl><dt>3.4.4.1. <a href="#beans-factory-scopes-other-web-configuration">&#21021;&#22987;&#21270;web&#37197;&#32622;</a></dt><dt>3.4.4.2. <a href="#beans-factory-scopes-request">Request&#20316;&#29992;&#22495;</a></dt><dt>3.4.4.3. <a href="#beans-factory-scopes-session">Session&#20316;&#29992;&#22495;</a></dt><dt>3.4.4.4. <a href="#beans-factory-scopes-global-session">global session&#20316;&#29992;&#22495;</a></dt><dt>3.4.4.5. <a href="#beans-factory-scopes-other-injection">&#20316;&#29992;&#22495;bean&#19982;&#20381;&#36182;</a></dt></dl></dd><dt>3.4.5. <a href="#beans-factory-scopes-custom">&#33258;&#23450;&#20041;&#20316;&#29992;&#22495;</a></dt><dd><dl><dt>3.4.5.1. <a href="#beans-factory-scopes-custom-creating">&#21019;&#24314;&#33258;&#23450;&#20041;&#20316;&#29992;&#22495;</a></dt><dt>3.4.5.2. <a href="#beans-factory-scopes-custom-using">&#20351;&#29992;&#33258;&#23450;&#20041;&#20316;&#29992;&#22495;</a></dt></dl></dd></dl></dd><dt>3.5. <a href="#beans-factory-nature">&#23450;&#21046;bean&#29305;&#24615;</a></dt><dd><dl><dt>3.5.1. <a href="#beans-factory-lifecycle">&#29983;&#21629;&#21608;&#26399;&#22238;&#35843;</a></dt><dd><dl><dt>3.5.1.1. <a href="#beans-factory-lifecycle-initializingbean">&#21021;&#22987;&#21270;&#22238;&#35843;</a></dt><dt>3.5.1.2. <a href="#beans-factory-lifecycle-disposablebean">&#26512;&#26500;&#22238;&#35843;</a></dt><dt>3.5.1.3. <a href="#beans-factory-lifecycle-default-init-destroy-methods">&#32570;&#30465;&#30340;&#21021;&#22987;&#21270;&#21644;&#26512;&#26500;&#26041;&#27861;</a></dt><dt>3.5.1.4. <a href="#beans-factory-lifecycle-combined-effects">&#32452;&#21512;&#29983;&#21629;&#21608;&#26399;&#26426;&#21046;</a></dt><dt>3.5.1.5. <a href="#beans-factory-shutdown">&#22312;&#38750;web&#24212;&#29992;&#20013;&#20248;&#38597;&#22320;&#20851;&#38381;Spring IoC&#23481;&#22120;</a></dt></dl></dd><dt>3.5.2. <a href="#beans-factory-aware">&#20102;&#35299;&#33258;&#24049;</a></dt><dd><dl><dt>3.5.2.1. <a href="#beans-factory-aware-beanfactoryaware">
					BeanFactoryAware
				</a></dt><dt>3.5.2.2. <a href="#beans-factory-aware-beannameaware">
					BeanNameAware
				</a></dt></dl></dd></dl></dd><dt>3.6. <a href="#beans-child-bean-definitions">bean&#23450;&#20041;&#30340;&#32487;&#25215;</a></dt><dt>3.7. <a href="#beans-factory-extension">&#23481;&#22120;&#25193;&#23637;&#28857;</a></dt><dd><dl><dt>3.7.1. <a href="#beans-factory-extension-bpp">&#29992;BeanPostProcessor&#23450;&#21046;bean</a></dt><dd><dl><dt>3.7.1.1. <a href="#beans-factory-extension-bpp-examples-hw">&#20351;&#29992;BeanPostProcessor&#30340;Hello World&#31034;&#20363;</a></dt><dt>3.7.1.2. <a href="#beans-factory-extension-bpp-examples-rabpp">RequiredAnnotationBeanPostProcessor&#31034;&#20363;</a></dt></dl></dd><dt>3.7.2. <a href="#beans-factory-extension-factory-postprocessors">&#29992;BeanFactoryPostProcessor&#23450;&#21046;&#37197;&#32622;&#20803;&#25968;&#25454;</a></dt><dd><dl><dt>3.7.2.1. <a href="#beans-factory-placeholderconfigurer">PropertyPlaceholderConfigurer&#31034;&#20363;</a></dt><dt>3.7.2.2. <a href="#beans-factory-overrideconfigurer">PropertyOverrideConfigurer&#31034;&#20363;</a></dt></dl></dd><dt>3.7.3. <a href="#beans-factory-extension-factorybean">&#20351;&#29992;FactoryBean&#23450;&#21046;&#23454;&#20363;&#21270;&#36923;&#36753;</a></dt></dl></dd><dt>3.8. <a href="#context-introduction">The ApplicationContext</a></dt><dd><dl><dt>3.8.1. <a href="#context-introduction-ctx-vs-beanfactory">BeanFactory &#36824;&#26159;
      ApplicationContext?</a></dt><dt>3.8.2. <a href="#context-functionality-messagesource">&#21033;&#29992;MessageSource&#23454;&#29616;&#22269;&#38469;&#21270;</a></dt><dt>3.8.3. <a href="#context-functionality-events">&#20107;&#20214;</a></dt><dt>3.8.4. <a href="#context-functionality-resources">&#24213;&#23618;&#36164;&#28304;&#30340;&#35775;&#38382;</a></dt><dt>3.8.5. <a href="#context-create">ApplicationContext&#22312;WEB&#24212;&#29992;&#20013;&#30340;&#23454;&#20363;&#21270;</a></dt></dl></dd><dt>3.9. <a href="#beans-glue-code-and-singletons">&#31896;&#21512;&#20195;&#30721;&#21644;&#21487;&#24597;&#30340;singleton</a></dt><dt>3.10. <a href="#beans-rar-deployment">&#20197;J2EE RAR&#25991;&#20214;&#30340;&#24418;&#24335;&#37096;&#32626;Spring ApplicationContext</a></dt><dt>3.11. <a href="#beans-annotation-config">&#22522;&#20110;&#27880;&#35299;&#65288;Annotation-based&#65289;&#30340;&#37197;&#32622;</a></dt><dd><dl><dt>3.11.1. <a href="#beans-autowired-annotation">@Autowired</a></dt><dt>3.11.2. <a href="#beans-autowired-annotation-qualifiers">&#22522;&#20110;&#27880;&#35299;&#30340;&#33258;&#21160;&#36830;&#25509;&#24494;&#35843;</a></dt><dt>3.11.3. <a href="#beans-custom-autowire-configurer">CustomAutowireConfigurer</a></dt><dt>3.11.4. <a href="#beans-resource-annotation">@Resource</a></dt><dt>3.11.5. <a href="#beans-postconstruct-and-predestroy-annotations">@PostConstruct &#19982; @PreDestroy</a></dt></dl></dd><dt>3.12. <a href="#beans-classpath-scanning">&#23545;&#21463;&#31649;&#32452;&#20214;&#30340;Classpath&#25195;&#25551;</a></dt><dd><dl><dt>3.12.1. <a href="#beans-stereotype-annotations">@Component&#21644;&#26356;&#22810;&#20856;&#22411;&#21270;&#27880;&#35299;</a></dt><dt>3.12.2. <a href="#beans-scanning-autodetection">&#33258;&#21160;&#26816;&#27979;&#32452;&#20214;</a></dt><dt>3.12.3. <a href="#beans-scanning-filters">&#20351;&#29992;&#36807;&#28388;&#22120;&#33258;&#23450;&#20041;&#25195;&#25551;</a></dt><dt>3.12.4. <a href="#beans-scanning-name-generator">&#33258;&#21160;&#26816;&#27979;&#32452;&#20214;&#30340;&#21629;&#21517;</a></dt><dt>3.12.5. <a href="#beans-scanning-scope-resolver">&#20026;&#33258;&#21160;&#26816;&#27979;&#30340;&#32452;&#20214;&#25552;&#20379;&#19968;&#20010;&#20316;&#29992;&#22495;</a></dt><dt>3.12.6. <a href="#beans-scanning-qualifiers">&#29992;&#27880;&#35299;&#25552;&#20379;&#38480;&#23450;&#31526;&#20803;&#25968;&#25454;</a></dt></dl></dd><dt>3.13. <a href="#context-load-time-weaver">&#27880;&#20876;&#19968;&#20010;LoadTimeWeaver</a></dt></dl></dd><dt>4. <a href="#resources">&#36164;&#28304;</a></dt><dd><dl><dt>4.1. <a href="#resources-introduction">&#31616;&#20171;</a></dt><dt>4.2. <a href="#resources-resource">Resource&#25509;&#21475;</a></dt><dt>4.3. <a href="#resources-implementations">&#20869;&#32622; Resource &#23454;&#29616;</a></dt><dd><dl><dt>4.3.1. <a href="#resources-implementations-urlresource">
				UrlResource
			</a></dt><dt>4.3.2. <a href="#resources-implementations-classpathresource">ClassPathResource</a></dt><dt>4.3.3. <a href="#resources-implementations-filesystemresource">FileSystemResource</a></dt><dt>4.3.4. <a href="#resources-implementations-servletcontextresource">
				ServletContextResource
			</a></dt><dt>4.3.5. <a href="#resources-implementations-inputstreamresource">InputStreamResource</a></dt><dt>4.3.6. <a href="#resources-implementations-bytearrayresource">ByteArrayResource</a></dt></dl></dd><dt>4.4. <a href="#resources-resourceloader">ResourceLoader&#25509;&#21475;</a></dt><dt>4.5. <a href="#resources-resourceloaderaware">ResourceLoaderAware &#25509;&#21475;</a></dt><dt>4.6. <a href="#resources-as-dependencies">&#25226;Resource&#20316;&#20026;&#23646;&#24615;&#26469;&#37197;&#32622;</a></dt><dt>4.7. <a href="#resources-app-ctx">Application context &#21644;Resource &#36335;&#24452;</a></dt><dd><dl><dt>4.7.1. <a href="#resources-app-ctx-construction">&#26500;&#36896;application context</a></dt><dd><dl><dt>4.7.1.1. <a href="#resources-app-ctx-classpathxml">&#21019;&#24314; ClassPathXmlApplicationContext &#23454;&#20363; - &#31616;&#20171;</a></dt></dl></dd><dt>4.7.2. <a href="#resources-app-ctx-wildcards-in-resource-paths">Application context&#26500;&#36896;&#22120;&#20013;&#36164;&#28304;&#36335;&#24452;&#30340;&#36890;&#37197;&#31526;</a></dt><dd><dl><dt>4.7.2.1. <a href="#resources-app-ctx-ant-patterns-in-paths">Ant&#39118;&#26684;&#30340;pattern</a></dt><dt>4.7.2.2. <a href="#resources-classpath-wildcards">classpath*: &#21069;&#32512;</a></dt><dt>4.7.2.3. <a href="#resources-wildcards-in-path-other-stuff">&#20854;&#20182;&#20851;&#20110;&#36890;&#37197;&#31526;&#30340;&#35828;&#26126;</a></dt></dl></dd><dt>4.7.3. <a href="#resources-filesystemresource-caveats">FileSystemResource &#35828;&#26126;</a></dt></dl></dd></dl></dd><dt>5. <a href="#validation">&#26657;&#39564;&#65292;&#25968;&#25454;&#32465;&#23450;&#65292;BeanWrapper&#65292;&#19982;&#23646;&#24615;&#32534;&#36753;&#22120;</a></dt><dd><dl><dt>5.1. <a href="#validation-introduction">&#31616;&#20171;</a></dt><dt>5.2. <a href="#validator">&#20351;&#29992;Spring&#30340;Validator&#25509;&#21475;&#36827;&#34892;&#26657;&#39564;</a></dt><dt>5.3. <a href="#validation-conversion">&#20174;&#38169;&#35823;&#20195;&#30721;&#21040;&#38169;&#35823;&#20449;&#24687;</a></dt><dt>5.4. <a href="#beans-beans">Bean&#22788;&#29702;&#21644;BeanWrapper</a></dt><dd><dl><dt>5.4.1. <a href="#beans-beans-conventions">&#35774;&#32622;&#21644;&#33719;&#21462;&#23646;&#24615;&#20540;&#20197;&#21450;&#23884;&#22871;&#23646;&#24615;</a></dt><dt>5.4.2. <a href="#beans-beans-conversion">&#20869;&#24314;&#30340;PropertyEditor&#23454;&#29616;</a></dt><dd><dl><dt>5.4.2.1. <a href="#beans-beans-conversion-customeditor-registration">&#27880;&#20876;&#29992;&#25143;&#33258;&#23450;&#20041;&#30340;PropertyEditor</a></dt></dl></dd></dl></dd></dl></dd><dt>6. <a href="#aop">&#20351;&#29992;Spring&#36827;&#34892;&#38754;&#21521;&#20999;&#38754;&#32534;&#31243;&#65288;AOP&#65289;</a></dt><dd><dl><dt>6.1. <a href="#aop-introduction">&#31616;&#20171;</a></dt><dd><dl><dt>6.1.1. <a href="#aop-introduction-defn">AOP&#27010;&#24565;</a></dt><dt>6.1.2. <a href="#aop-introduction-spring-defn">Spring AOP&#30340;&#21151;&#33021;&#21644;&#30446;&#26631;</a></dt><dt>6.1.3. <a href="#aop-introduction-proxies">AOP&#20195;&#29702;</a></dt></dl></dd><dt>6.2. <a href="#aop-ataspectj">@AspectJ&#25903;&#25345;</a></dt><dd><dl><dt>6.2.1. <a href="#aop-aspectj-support">&#21551;&#29992;@AspectJ&#25903;&#25345;</a></dt><dt>6.2.2. <a href="#aop-at-aspectj">&#22768;&#26126;&#19968;&#20010;&#20999;&#38754;</a></dt><dt>6.2.3. <a href="#aop-pointcuts">&#22768;&#26126;&#19968;&#20010;&#20999;&#20837;&#28857;&#65288;pointcut&#65289;</a></dt><dd><dl><dt>6.2.3.1. <a href="#aop-pointcuts-designators">&#20999;&#20837;&#28857;&#25351;&#31034;&#31526;&#65288;PCD&#65289;&#30340;&#25903;&#25345;</a></dt><dt>6.2.3.2. <a href="#aop-pointcuts-combining">&#32452;&#21512;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;</a></dt><dt>6.2.3.3. <a href="#aop-common-pointcuts">&#20849;&#20139;&#36890;&#29992;&#20999;&#20837;&#28857;&#23450;&#20041;</a></dt><dt>6.2.3.4. <a href="#aop-pointcuts-examples">&#31034;&#20363;</a></dt></dl></dd><dt>6.2.4. <a href="#aop-advice">&#22768;&#26126;&#36890;&#30693;</a></dt><dd><dl><dt>6.2.4.1. <a href="#aop-advice-before">&#21069;&#32622;&#36890;&#30693;</a></dt><dt>6.2.4.2. <a href="#aop-advice-after-returning">&#21518;&#32622;&#36890;&#30693;&#65288;After returning advice&#65289;</a></dt><dt>6.2.4.3. <a href="#aop-advice-after-throwing">&#24322;&#24120;&#36890;&#30693;&#65288;After throwing advice&#65289;</a></dt><dt>6.2.4.4. <a href="#aop-advice-after-finally">&#26368;&#32456;&#36890;&#30693;&#65288;After (finally) advice&#65289;</a></dt><dt>6.2.4.5. <a href="#aop-ataspectj-around-advice">&#29615;&#32469;&#36890;&#30693;</a></dt><dt>6.2.4.6. <a href="#aop-ataspectj-advice-params">&#36890;&#30693;&#21442;&#25968;&#65288;Advice parameters&#65289;</a></dt><dt>6.2.4.7. <a href="#aop-ataspectj-advice-ordering">&#36890;&#30693;&#39034;&#24207;</a></dt></dl></dd><dt>6.2.5. <a href="#aop-introductions">&#24341;&#20837;&#65288;Introduction&#65289;</a></dt><dt>6.2.6. <a href="#aop-instantiation-models">&#20999;&#38754;&#23454;&#20363;&#21270;&#27169;&#22411;</a></dt><dt>6.2.7. <a href="#aop-ataspectj-example">&#20363;&#23376;</a></dt></dl></dd><dt>6.3. <a href="#aop-schema">&#22522;&#20110;Schema&#30340;AOP&#25903;&#25345;</a></dt><dd><dl><dt>6.3.1. <a href="#aop-schema-declaring-an-aspect">&#22768;&#26126;&#19968;&#20010;&#20999;&#38754;</a></dt><dt>6.3.2. <a href="#aop-schema-pointcuts">&#22768;&#26126;&#19968;&#20010;&#20999;&#20837;&#28857;</a></dt><dt>6.3.3. <a href="#aop-schema-advice">&#22768;&#26126;&#36890;&#30693;</a></dt><dd><dl><dt>6.3.3.1. <a href="#aop-schema-advice-before">&#21069;&#32622;&#36890;&#30693;</a></dt><dt>6.3.3.2. <a href="#aop-schema-advice-after-returning">&#21518;&#32622;&#36890;&#30693;</a></dt><dt>6.3.3.3. <a href="#aop-schema-advice-after-throwing">&#24322;&#24120;&#36890;&#30693;</a></dt><dt>6.3.3.4. <a href="#aop-schema-advice-after-finally">&#26368;&#32456;&#36890;&#30693;</a></dt><dt>6.3.3.5. <a href="#aop-schema-advice-around">&#29615;&#32469;&#36890;&#30693;</a></dt><dt>6.3.3.6. <a href="#aop-schema-params">&#36890;&#30693;&#21442;&#25968;</a></dt><dt>6.3.3.7. <a href="#aop-ordering">&#36890;&#30693;&#39034;&#24207;</a></dt></dl></dd><dt>6.3.4. <a href="#aop-schema-introductions">&#24341;&#20837;</a></dt><dt>6.3.5. <a href="#aop-schema-instatiation-models">&#20999;&#38754;&#23454;&#20363;&#21270;&#27169;&#22411;</a></dt><dt>6.3.6. <a href="#aop-schema-advisors">Advisor</a></dt><dt>6.3.7. <a href="#aop-schema-example">&#20363;&#23376;</a></dt></dl></dd><dt>6.4. <a href="#aop-choosing">AOP&#22768;&#26126;&#39118;&#26684;&#30340;&#36873;&#25321;</a></dt><dd><dl><dt>6.4.1. <a href="#aop-spring-or-aspectj">Spring AOP&#36824;&#26159;&#23436;&#20840;&#29992;AspectJ&#65311;</a></dt><dt>6.4.2. <a href="#aop-ataspectj-or-xml">Spring AOP&#20013;&#20351;&#29992;@AspectJ&#36824;&#26159;XML&#65311;</a></dt></dl></dd><dt>6.5. <a href="#aop-mixing-styles">&#28151;&#21512;&#20999;&#38754;&#31867;&#22411;</a></dt><dt>6.6. <a href="#aop-proxying">&#20195;&#29702;&#26426;&#21046;</a></dt><dd><dl><dt>6.6.1. <a href="#aop-understanding-aop-proxies">&#29702;&#35299;AOP&#20195;&#29702;</a></dt></dl></dd><dt>6.7. <a href="#aop-aspectj-programmatic">&#20197;&#32534;&#31243;&#26041;&#24335;&#21019;&#24314;@AspectJ&#20195;&#29702;</a></dt><dt>6.8. <a href="#aop-using-aspectj">&#22312;Spring&#24212;&#29992;&#20013;&#20351;&#29992;AspectJ</a></dt><dd><dl><dt>6.8.1. <a href="#aop-atconfigurable">&#22312;Spring&#20013;&#20351;&#29992;AspectJ&#36827;&#34892;domain object&#30340;&#20381;&#36182;&#27880;&#20837;</a></dt><dd><dl><dt>6.8.1.1. <a href="#aop-configurable-testing">@Configurable&#23545;&#35937;&#30340;&#21333;&#20803;&#27979;&#35797;</a></dt><dt>6.8.1.2. <a href="#aop-configurable-container">Working with multiple application contexts</a></dt></dl></dd><dt>6.8.2. <a href="#aop-ajlib-other">Spring&#20013;&#20854;&#20182;&#30340;AspectJ&#20999;&#38754;</a></dt><dt>6.8.3. <a href="#aop-aj-configure">&#20351;&#29992;Spring IoC&#26469;&#37197;&#32622;AspectJ&#30340;&#20999;&#38754;</a></dt><dt>6.8.4. <a href="#aop-aj-ltw">&#22312;Spring&#24212;&#29992;&#20013;&#20351;&#29992;AspectJ&#21152;&#36733;&#26102;&#32455;&#20837;&#65288;LTW&#65289;</a></dt><dd><dl><dt>6.8.4.1. <a href="#aop-aj-ltw-first-example">&#31532;&#19968;&#20010;&#20363;&#23376;</a></dt><dt>6.8.4.2. <a href="#aop-aj-ltw-the-aspects">&#20999;&#38754;</a></dt><dt>6.8.4.3. <a href="#aop-aj-ltw-aop_dot_xml">'META-INF/aop.xml'</a></dt><dt>6.8.4.4. <a href="#aop-aj-ltw-libraries">&#30456;&#20851;&#31867;&#24211;&#65288;JARS&#65289;</a></dt><dt>6.8.4.5. <a href="#aop-aj-ltw-spring">Spring&#37197;&#32622;</a></dt><dt>6.8.4.6. <a href="#aop-aj-ltw-environments">&#29305;&#23450;&#29615;&#22659;&#30340;&#37197;&#32622;</a></dt></dl></dd></dl></dd><dt>6.9. <a href="#aop-resources">&#26356;&#22810;&#36164;&#28304;</a></dt></dl></dd><dt>7. <a href="#aop-api">Spring AOP APIs</a></dt><dd><dl><dt>7.1. <a href="#aop-api-introduction">&#31616;&#20171;</a></dt><dt>7.2. <a href="#aop-api-pointcuts">Spring&#20013;&#30340;&#20999;&#20837;&#28857;API</a></dt><dd><dl><dt>7.2.1. <a href="#aop-api-concepts">&#27010;&#24565;</a></dt><dt>7.2.2. <a href="#aop-api-pointcut-ops">&#20999;&#20837;&#28857;&#36816;&#31639;</a></dt><dt>7.2.3. <a href="#aop-api-pointcuts-aspectj">AspectJ&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;</a></dt><dt>7.2.4. <a href="#aop-api-pointcuts-impls">&#20415;&#21033;&#30340;&#20999;&#20837;&#28857;&#23454;&#29616;</a></dt><dd><dl><dt>7.2.4.1. <a href="#aop-api-pointcuts-static">&#38745;&#24577;&#20999;&#20837;&#28857;</a></dt><dt>7.2.4.2. <a href="#aop-api-pointcuts-dynamic">&#21160;&#24577;&#20999;&#20837;&#28857;</a></dt></dl></dd><dt>7.2.5. <a href="#aop-api-pointcuts-superclasses">&#20999;&#20837;&#28857;&#30340;&#36229;&#31867;</a></dt><dt>7.2.6. <a href="#aop-api-pointcuts-custom">&#33258;&#23450;&#20041;&#20999;&#20837;&#28857;</a></dt></dl></dd><dt>7.3. <a href="#aop-api-advice">Spring&#30340;&#36890;&#30693;API</a></dt><dd><dl><dt>7.3.1. <a href="#aop-api-advice-lifecycle">&#36890;&#30693;&#30340;&#29983;&#21629;&#21608;&#26399;</a></dt><dt>7.3.2. <a href="#aop-api-advice-types">Spring&#37324;&#30340;&#36890;&#30693;&#31867;&#22411;</a></dt><dd><dl><dt>7.3.2.1. <a href="#aop-api-advice-around">&#25318;&#25130;&#29615;&#32469;&#36890;&#30693;</a></dt><dt>7.3.2.2. <a href="#aop-api-advice-before">&#21069;&#32622;&#36890;&#30693;</a></dt><dt>7.3.2.3. <a href="#aop-api-advice-throws">&#24322;&#24120;&#36890;&#30693;</a></dt><dt>7.3.2.4. <a href="#aop-api-advice-after-returning">&#21518;&#32622;&#36890;&#30693;</a></dt><dt>7.3.2.5. <a href="#aop-api-advice-introduction">&#24341;&#20837;&#36890;&#30693;</a></dt></dl></dd></dl></dd><dt>7.4. <a href="#aop-api-advisor">Spring&#37324;&#30340;Advisor API</a></dt><dt>7.5. <a href="#aop-pfb">&#20351;&#29992;ProxyFactoryBean&#21019;&#24314;AOP&#20195;&#29702;</a></dt><dd><dl><dt>7.5.1. <a href="#aop-pfb-1">&#22522;&#30784;</a></dt><dt>7.5.2. <a href="#aop-pfb-2">JavaBean&#23646;&#24615;</a></dt><dt>7.5.3. <a href="#aop-pfb-proxy-types">&#22522;&#20110;JDK&#21644;CGLIB&#30340;&#20195;&#29702;</a></dt><dt>7.5.4. <a href="#aop-api-proxying-intf">&#23545;&#25509;&#21475;&#36827;&#34892;&#20195;&#29702;</a></dt><dt>7.5.5. <a href="#aop-api-proxying-class">&#23545;&#31867;&#36827;&#34892;&#20195;&#29702;</a></dt><dt>7.5.6. <a href="#aop-global-advisors">&#20351;&#29992;&#8220;&#20840;&#23616;&#8221;&#36890;&#30693;&#22120;</a></dt></dl></dd><dt>7.6. <a href="#aop-concise-proxy">&#31616;&#21270;&#20195;&#29702;&#23450;&#20041;</a></dt><dt>7.7. <a href="#aop-prog">&#20351;&#29992;ProxyFactory&#36890;&#36807;&#32534;&#31243;&#21019;&#24314;AOP&#20195;&#29702;</a></dt><dt>7.8. <a href="#aop-api-advised">&#25805;&#20316;&#34987;&#36890;&#30693;&#23545;&#35937;</a></dt><dt>7.9. <a href="#aop-autoproxy">&#20351;&#29992;&#8220;&#33258;&#21160;&#20195;&#29702;&#65288;autoproxy&#65289;&#8221;&#21151;&#33021;</a></dt><dd><dl><dt>7.9.1. <a href="#aop-autoproxy-choices">&#33258;&#21160;&#20195;&#29702;bean&#23450;&#20041;</a></dt><dd><dl><dt>7.9.1.1. <a href="#aop-api-autoproxy">BeanNameAutoProxyCreator</a></dt><dt>7.9.1.2. <a href="#aop-api-autoproxy-default">DefaultAdvisorAutoProxyCreator</a></dt><dt>7.9.1.3. <a href="#aop-api-autoproxy-abstract">AbstractAdvisorAutoProxyCreator</a></dt></dl></dd><dt>7.9.2. <a href="#aop-autoproxy-metadata">&#20351;&#29992;&#20803;&#25968;&#25454;&#39537;&#21160;&#30340;&#33258;&#21160;&#20195;&#29702;</a></dt></dl></dd><dt>7.10. <a href="#aop-targetsource">&#20351;&#29992;TargetSource</a></dt><dd><dl><dt>7.10.1. <a href="#aop-ts-swap">&#28909;&#20132;&#25442;&#30446;&#26631;&#28304;</a></dt><dt>7.10.2. <a href="#aop-ts-pool">&#27744;&#21270;&#30446;&#26631;&#28304;</a></dt><dt>7.10.3. <a href="#aop-ts-prototype">&#21407;&#22411;&#30446;&#26631;&#28304;</a></dt><dt>7.10.4. <a href="#aop-ts-threadlocal">ThreadLocal&#30446;&#26631;&#28304;</a></dt></dl></dd><dt>7.11. <a href="#aop-extensibility">&#23450;&#20041;&#26032;&#30340;Advice&#31867;&#22411;</a></dt><dt>7.12. <a href="#aop-api-resources">&#26356;&#22810;&#36164;&#28304;</a></dt></dl></dd><dt>8. <a href="#testing">&#27979;&#35797;</a></dt><dd><dl><dt>8.1. <a href="#testing-introduction">&#31616;&#20171;</a></dt><dt>8.2. <a href="#unit-testing">&#21333;&#20803;&#27979;&#35797;</a></dt><dd><dl><dt>8.2.1. <a href="#mock-objects">Mock&#23545;&#35937;</a></dt><dd><dl><dt>8.2.1.1. <a href="#mock-objects-jndi">JNDI</a></dt><dt>8.2.1.2. <a href="#mock-objects-servlet">Servlet API</a></dt><dt>8.2.1.3. <a href="#mock-objects-portlet">Portlet API</a></dt></dl></dd><dt>8.2.2. <a href="#unit-testing-support-classes">&#21333;&#20803;&#27979;&#35797;&#25903;&#25345;&#31867;</a></dt><dd><dl><dt>8.2.2.1. <a href="#unit-testing-utilities">&#36890;&#29992;&#24037;&#20855;&#31867;</a></dt><dt>8.2.2.2. <a href="#unit-testing-spring-mvc">Spring MVC</a></dt></dl></dd></dl></dd><dt>8.3. <a href="#integration-testing">&#38598;&#25104;&#27979;&#35797;</a></dt><dd><dl><dt>8.3.1. <a href="#integration-testing-overview">&#27010;&#35272;</a></dt><dt>8.3.2. <a href="#integration-testing-which-framework">&#20351;&#29992;&#21738;&#20010;&#25903;&#25345;&#26694;&#26550;</a></dt><dt>8.3.3. <a href="#integration-testing-common-goals">&#36890;&#29992;&#30446;&#26631;</a></dt><dd><dl><dt>8.3.3.1. <a href="#testing-ctx-management">&#19978;&#19979;&#25991;&#31649;&#29702;&#21450;&#32531;&#23384;</a></dt><dt>8.3.3.2. <a href="#testing-fixture-di">&#27979;&#35797;fixtures&#20381;&#36182;&#27880;&#20837;</a></dt><dt>8.3.3.3. <a href="#testing-tx">&#20107;&#21153;&#31649;&#29702;</a></dt><dt>8.3.3.4. <a href="#testing-support-classes">&#38598;&#25104;&#27979;&#35797;&#25903;&#25345;&#31867;</a></dt></dl></dd><dt>8.3.4. <a href="#integration-testing-support-jdbc">JDBC&#27979;&#35797;&#25903;&#25345;</a></dt><dt>8.3.5. <a href="#integration-testing-common-annotations">&#24120;&#29992;&#27880;&#35299;</a></dt><dt>8.3.6. <a href="#junit38-legacy-support">JUnit 3.8&#36951;&#30041;&#25903;&#25345;</a></dt><dd><dl><dt>8.3.6.1. <a href="#junit38-legacy-ctx-management">&#19978;&#19979;&#25991;&#31649;&#29702;&#21450;&#32531;&#23384;</a></dt><dt>8.3.6.2. <a href="#junit38-legacy-fixture-di">&#27979;&#35797;fixture&#20381;&#36182;&#27880;&#20837;</a></dt><dt>8.3.6.3. <a href="#junit38-legacy-tx">&#20107;&#21153;&#31649;&#29702;</a></dt><dt>8.3.6.4. <a href="#junit38-legacy-support-classes">JUnit 3.8 &#36951;&#30041;&#25903;&#25345;&#31867;</a></dt><dt>8.3.6.5. <a href="#junit38-legacy-java5-support">Java 5+ &#19987;&#26377;&#25903;&#25345;</a></dt></dl></dd><dt>8.3.7. <a href="#testcontext-framework">Spring TestContext Framework</a></dt><dd><dl><dt>8.3.7.1. <a href="#testcontext-key-abstractions">&#20027;&#35201;&#30340;&#25277;&#35937;</a></dt><dt>8.3.7.2. <a href="#testcontext-ctx-management">&#19978;&#19979;&#25991;&#31649;&#29702;&#21644;&#32531;&#23384;</a></dt><dt>8.3.7.3. <a href="#testcontext-fixture-di">&#27979;&#35797;fixture&#30340;&#20381;&#36182;&#27880;&#20837;</a></dt><dt>8.3.7.4. <a href="#testcontext-tx">&#20107;&#21153;&#31649;&#29702;</a></dt><dt>8.3.7.5. <a href="#testcontext-support-classes">TestContext&#25903;&#25345;&#31867;</a></dt><dt>8.3.7.6. <a href="#testcontext-annotations">TestContext&#26694;&#26550;&#27880;&#35299;&#25903;&#25345;</a></dt></dl></dd><dt>8.3.8. <a href="#testing-examples-petclinic">PetClinic&#31034;&#20363;</a></dt></dl></dd><dt>8.4. <a href="#testing-resources">&#26356;&#22810;&#36164;&#28304;</a></dt></dl></dd></dl></dd><dt>II. <a href="#spring-middle-tier">&#20013;&#38388;&#23618;&#25968;&#25454;&#35775;&#38382;</a></dt><dd><dl><dt>9. <a href="#transaction">&#20107;&#21153;&#31649;&#29702;</a></dt><dd><dl><dt>9.1. <a href="#transaction-intro">&#31616;&#20171;</a></dt><dt>9.2. <a href="#transaction-motivation">&#21160;&#26426;</a></dt><dt>9.3. <a href="#transaction-strategies">&#20851;&#38190;&#25277;&#35937;</a></dt><dt>9.4. <a href="#tx-resource-synchronization">&#20351;&#29992;&#36164;&#28304;&#21516;&#27493;&#30340;&#20107;&#21153;</a></dt><dd><dl><dt>9.4.1. <a href="#tx-resource-synchronization-high">&#39640;&#23618;&#27425;&#26041;&#26696;</a></dt><dt>9.4.2. <a href="#tx-resource-synchronization-low">&#20302;&#23618;&#27425;&#26041;&#26696;</a></dt><dt>9.4.3. <a href="#tx-resource-synchronization-tadsp">
				TransactionAwareDataSourceProxy
			</a></dt></dl></dd><dt>9.5. <a href="#transaction-declarative">&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;</a></dt><dd><dl><dt>9.5.1. <a href="#tx-decl-explained">&#29702;&#35299;Spring&#30340;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;&#23454;&#29616;</a></dt><dt>9.5.2. <a href="#transaction-declarative-first-example">&#31532;&#19968;&#20010;&#20363;&#23376;</a></dt><dt>9.5.3. <a href="#transaction-declarative-rolling-back">&#22238;&#28378;</a></dt><dt>9.5.4. <a href="#transaction-declarative-diff-tx">&#20026;&#19981;&#21516;&#30340;bean&#37197;&#32622;&#19981;&#21516;&#30340;&#20107;&#21153;&#35821;&#20041;</a></dt><dt>9.5.5. <a href="#transaction-declarative-txadvice-settings">&lt;tx:advice/&gt; &#26377;&#20851;&#30340;&#35774;&#32622;</a></dt><dt>9.5.6. <a href="#transaction-declarative-annotations">&#20351;&#29992; @Transactional</a></dt><dd><dl><dt>9.5.6.1. <a href="#transaction-declarative-attransactional-settings">@Transactional &#26377;&#20851;&#30340;&#35774;&#32622;</a></dt></dl></dd><dt>9.5.7. <a href="#tx-propagation">&#20107;&#21153;&#20256;&#25773;</a></dt><dd><dl><dt>9.5.7.1. <a href="#tx-propagation-required">required</a></dt><dt>9.5.7.2. <a href="#tx-propagation-requires_new">RequiresNew</a></dt><dt>9.5.7.3. <a href="#tx-propagation-nested">Nested</a></dt></dl></dd><dt>9.5.8. <a href="#transaction-declarative-applying-more-than-just-tx-advice">&#36890;&#30693;&#20107;&#21153;&#25805;&#20316;</a></dt><dt>9.5.9. <a href="#transaction-declarative-aspectj">&#32467;&#21512;AspectJ&#20351;&#29992; @Transactional</a></dt></dl></dd><dt>9.6. <a href="#transaction-programmatic">&#32534;&#31243;&#24335;&#20107;&#21153;&#31649;&#29702;</a></dt><dd><dl><dt>9.6.1. <a href="#tx-prog-template">&#20351;&#29992;TransactionTemplate</a></dt><dd><dl><dt>9.6.1.1. <a href="#tx-prog-template-settings">&#25351;&#23450;&#20107;&#21153;&#35774;&#32622;</a></dt></dl></dd><dt>9.6.2. <a href="#transaction-programmatic-ptm">&#20351;&#29992;PlatformTransactionManager</a></dt></dl></dd><dt>9.7. <a href="#tx-decl-vs-prog">&#36873;&#25321;&#32534;&#31243;&#24335;&#20107;&#21153;&#31649;&#29702;&#36824;&#26159;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;</a></dt><dt>9.8. <a href="#transaction-application-server-integration">&#19982;&#29305;&#23450;&#24212;&#29992;&#26381;&#21153;&#22120;&#38598;&#25104;</a></dt><dd><dl><dt>9.8.1. <a href="#transaction-application-server-integration-websphere">IBM WebSphere</a></dt><dt>9.8.2. <a href="#transaction-application-server-integration-weblogic">BEA WebLogic</a></dt><dt>9.8.3. <a href="#transaction-application-server-integration-oc4j">Oracle OC4J</a></dt></dl></dd><dt>9.9. <a href="#transaction-solutions-to-common-problems">&#24120;&#35265;&#38382;&#39064;&#30340;&#35299;&#20915;&#26041;&#27861;</a></dt><dd><dl><dt>9.9.1. <a href="#transaction-solutions-to-common-problems-wrong-ptm">&#23545;&#19968;&#20010;&#29305;&#23450;&#30340; DataSource &#20351;&#29992;&#20102;&#38169;&#35823;&#30340;&#20107;&#21153;&#31649;&#29702;&#22120;</a></dt></dl></dd><dt>9.10. <a href="#transaction-resources">&#26356;&#22810;&#30340;&#36164;&#28304;</a></dt></dl></dd><dt>10. <a href="#dao">DAO&#25903;&#25345;</a></dt><dd><dl><dt>10.1. <a href="#dao-introduction">&#31616;&#20171;</a></dt><dt>10.2. <a href="#dao-exceptions">&#19968;&#33268;&#30340;&#24322;&#24120;&#23618;&#27425;</a></dt><dt>10.3. <a href="#dao-abstract-superclasses">&#19968;&#33268;&#30340;DAO&#25903;&#25345;&#25277;&#35937;&#31867;</a></dt></dl></dd><dt>11. <a href="#jdbc">&#20351;&#29992;JDBC&#36827;&#34892;&#25968;&#25454;&#35775;&#38382;</a></dt><dd><dl><dt>11.1. <a href="#jdbc-introduction">&#31616;&#20171;</a></dt><dd><dl><dt>11.1.1. <a href="#jdbc-choose-style">&#36873;&#25321;&#19968;&#31181;&#24037;&#20316;&#27169;&#24335;</a></dt><dt>11.1.2. <a href="#jdbc-packages">Spring JDBC&#21253;&#32467;&#26500;</a></dt></dl></dd><dt>11.2. <a href="#jdbc-core">&#21033;&#29992;JDBC&#26680;&#24515;&#31867;&#25511;&#21046;JDBC&#30340;&#22522;&#26412;&#25805;&#20316;&#21644;&#38169;&#35823;&#22788;&#29702;</a></dt><dd><dl><dt>11.2.1. <a href="#jdbc-JdbcTemplate">JdbcTemplate&#31867;</a></dt><dd><dl><dt>11.2.1.1. <a href="#jdbc-JdbcTemplate-examples">&#19968;&#20123;&#31034;&#20363;</a></dt><dt>11.2.1.2. <a href="#jdbc-JdbcTemplate-idioms">JdbcTemplate &#30340;&#26368;&#20339;&#23454;&#36341;</a></dt></dl></dd><dt>11.2.2. <a href="#jdbc-NamedParameterJdbcTemplate">NamedParameterJdbcTemplate&#31867;</a></dt><dt>11.2.3. <a href="#jdbc-SimpleJdbcTemplate">SimpleJdbcTemplate&#31867;</a></dt><dt>11.2.4. <a href="#jdbc-datasource">DataSource&#25509;&#21475;</a></dt><dt>11.2.5. <a href="#jdbc-SQLExceptionTranslator">SQLExceptionTranslator&#25509;&#21475;</a></dt><dt>11.2.6. <a href="#jdbc-statements-executing">&#25191;&#34892;SQL&#35821;&#21477;</a></dt><dt>11.2.7. <a href="#jdbc-statements-querying">&#25191;&#34892;&#26597;&#35810;</a></dt><dt>11.2.8. <a href="#jdbc-updates">&#26356;&#26032;&#25968;&#25454;&#24211;</a></dt><dt>11.2.9. <a href="#jdbc-auto-genereted-keys">&#33719;&#21462;&#33258;&#21160;&#29983;&#25104;&#30340;&#20027;&#38190;</a></dt></dl></dd><dt>11.3. <a href="#jdbc-connections">&#25511;&#21046;&#25968;&#25454;&#24211;&#36830;&#25509;</a></dt><dd><dl><dt>11.3.1. <a href="#jdbc-DataSourceUtils">DataSourceUtils&#31867;</a></dt><dt>11.3.2. <a href="#jdbc-SmartDataSource">SmartDataSource&#25509;&#21475;</a></dt><dt>11.3.3. <a href="#jdbc-AbstractDataSource">AbstractDataSource&#31867;</a></dt><dt>11.3.4. <a href="#jdbc-SingleConnectionDataSource">SingleConnectionDataSource&#31867;</a></dt><dt>11.3.5. <a href="#jdbc-DriverManagerDataSource">DriverManagerDataSource&#31867;</a></dt><dt>11.3.6. <a href="#jdbc-TransactionAwareDataSourceProxy">TransactionAwareDataSourceProxy&#31867;</a></dt><dt>11.3.7. <a href="#jdbc-DataSourceTransactionManager">DataSourceTransactionManager&#31867;</a></dt><dt>11.3.8. <a href="#jdbc-NativeJdbcExtractor">NativeJdbcExtractor</a></dt></dl></dd><dt>11.4. <a href="#jdbc-advanced-jdbc">JDBC&#25209;&#37327;&#25805;&#20316;</a></dt><dd><dl><dt>11.4.1. <a href="#jdbc-advanced-classic">&#20351;&#29992;JdbcTemplate&#36827;&#34892;&#25209;&#37327;&#25805;&#20316;</a></dt><dt>11.4.2. <a href="#jdbc-advanced-simple">&#20351;&#29992;SimpleJdbcTemplate&#36827;&#34892;&#25209;&#37327;&#25805;&#20316;</a></dt></dl></dd><dt>11.5. <a href="#jdbc-simple-jdbc">&#36890;&#36807;&#20351;&#29992;SimpleJdbc&#31867;&#31616;&#21270;JDBC&#25805;&#20316;</a></dt><dd><dl><dt>11.5.1. <a href="#jdbc-simple-jdbc-insert-1">&#20351;&#29992;SimpleJdbcInsert&#25554;&#20837;&#25968;&#25454;</a></dt><dt>11.5.2. <a href="#jdbc-simple-jdbc-insert-2">&#20351;&#29992;SimpleJdbcInsert&#26469;&#33719;&#21462;&#33258;&#21160;&#29983;&#25104;&#30340;&#20027;&#38190;</a></dt><dt>11.5.3. <a href="#jdbc-simple-jdbc-insert-3">&#25351;&#23450;SimpleJdbcInsert&#25152;&#20351;&#29992;&#30340;&#23383;&#27573;</a></dt><dt>11.5.4. <a href="#jdbc-simple-jdbc-parameters">&#20351;&#29992;SqlParameterSource&#25552;&#20379;&#21442;&#25968;&#20540;</a></dt><dt>11.5.5. <a href="#jdbc-simple-jdbc-call-1">&#20351;&#29992;SimpleJdbcCall&#35843;&#29992;&#23384;&#20648;&#36807;&#31243;</a></dt><dt>11.5.6. <a href="#jdbc-simple-jdbc-call-2">&#22768;&#26126;SimpleJdbcCall&#20351;&#29992;&#30340;&#21442;&#25968;</a></dt><dt>11.5.7. <a href="#jdbc-params">&#22914;&#20309;&#23450;&#20041;SqlParameters</a></dt><dt>11.5.8. <a href="#jdbc-simple-jdbc-call-3">&#20351;&#29992;SimpleJdbcCall&#35843;&#29992;&#20869;&#32622;&#20989;&#25968;</a></dt><dt>11.5.9. <a href="#jdbc-simple-jdbc-call-4">&#20351;&#29992;SimpleJdbcCall&#36820;&#22238;&#30340;ResultSet/REF Cursor</a></dt></dl></dd><dt>11.6. <a href="#jdbc-object">&#29992;Java&#23545;&#35937;&#26469;&#34920;&#36798;JDBC&#25805;&#20316;</a></dt><dd><dl><dt>11.6.1. <a href="#jdbc-SqlQuery">SqlQuery&#31867;</a></dt><dt>11.6.2. <a href="#jdbc-MappingSqlQuery">MappingSqlQuery&#31867;</a></dt><dt>11.6.3. <a href="#jdbc-SqlUpdate">SqlUpdate&#31867;</a></dt><dt>11.6.4. <a href="#jdbc-StoredProcedure">StoredProcedure&#31867;</a></dt><dt>11.6.5. <a href="#jdbc-SqlFunction">SqlFunction&#31867;</a></dt></dl></dd><dt>11.7. <a href="#jdbc-parameter-handling">&#21442;&#25968;&#21644;&#25968;&#25454;&#22788;&#29702;&#30340;&#22522;&#26412;&#21407;&#21017;</a></dt><dd><dl><dt>11.7.1. <a href="#jdbc-type-information">&#20026;&#21442;&#25968;&#35774;&#32622;SQL&#31867;&#22411;&#20449;&#24687;</a></dt><dt>11.7.2. <a href="#jdbc-lob">&#22788;&#29702;BLOB &#21644; CLOB&#23545;&#35937;</a></dt><dt>11.7.3. <a href="#jdbc-in-clause">&#22312;IN&#35821;&#21477;&#20013;&#20256;&#20837;&#19968;&#32452;&#21442;&#25968;&#20540;</a></dt><dt>11.7.4. <a href="#jdbc-complex-types">&#22788;&#29702;&#22797;&#26434;&#31867;&#22411;&#30340;&#23384;&#20648;&#36807;&#31243;&#35843;&#29992;</a></dt></dl></dd></dl></dd><dt>12. <a href="#orm">&#20351;&#29992;ORM&#24037;&#20855;&#36827;&#34892;&#25968;&#25454;&#35775;&#38382;</a></dt><dd><dl><dt>12.1. <a href="#orm-introduction">&#31616;&#20171;</a></dt><dt>12.2. <a href="#orm-hibernate">Hibernate</a></dt><dd><dl><dt>12.2.1. <a href="#orm-resource-mngmnt">&#36164;&#28304;&#31649;&#29702;</a></dt><dt>12.2.2. <a href="#orm-session-factory-setup">&#22312;Spring&#23481;&#22120;&#20013;&#21019;&#24314; SessionFactory</a></dt><dt>12.2.3. <a href="#orm-hibernate-template">The HibernateTemplate</a></dt><dt>12.2.4. <a href="#orm-hibernate-daos">&#19981;&#20351;&#29992;&#22238;&#35843;&#30340;&#22522;&#20110;Spring&#30340;DAO&#23454;&#29616;</a></dt><dt>12.2.5. <a href="#orm-hibernate-straight">&#22522;&#20110;Hibernate3&#30340;&#21407;&#29983;API&#23454;&#29616;DAO</a></dt><dt>12.2.6. <a href="#orm-hibernate-tx-programmatic">&#32534;&#31243;&#24335;&#30340;&#20107;&#21153;&#21010;&#20998;</a></dt><dt>12.2.7. <a href="#orm-hibernate-tx-declarative">&#22768;&#26126;&#24335;&#30340;&#20107;&#21153;&#21010;&#20998;</a></dt><dt>12.2.8. <a href="#orm-hibernate-tx-strategies">&#20107;&#21153;&#31649;&#29702;&#31574;&#30053;</a></dt><dt>12.2.9. <a href="#orm-hibernate-resources">&#23481;&#22120;&#36164;&#28304; vs &#26412;&#22320;&#36164;&#28304;</a></dt><dt>12.2.10. <a href="#orm-hibernate-invalid-jdbc-access-error">&#22312;&#24212;&#29992;&#26381;&#21153;&#22120;&#20013;&#20351;&#29992;Hibernate&#30340;&#27880;&#24847;&#20107;&#39033;</a></dt></dl></dd><dt>12.3. <a href="#orm-jdo">JDO</a></dt><dd><dl><dt>12.3.1. <a href="#orm-jdo-setup">&#24314;&#31435;PersistenceManagerFactory
      </a></dt><dt>12.3.2. <a href="#orm-jdo-template">JdoTemplate&#21644;JdoDaoSupport</a></dt><dt>12.3.3. <a href="#orm-jdo-daos-straight">
      
      &#22522;&#20110;&#21407;&#29983;&#30340;JDO API&#23454;&#29616;DAO
      </a></dt><dt>12.3.4. <a href="#orm-jdo-tx">&#20107;&#21153;&#31649;&#29702;</a></dt><dt>12.3.5. <a href="#orm-jdo-dialect">JdoDialect</a></dt></dl></dd><dt>12.4. <a href="#orm-toplink">Oracle TopLink</a></dt><dd><dl><dt>12.4.1. <a href="#orm-toplink-abstraction">SessionFactory &#25277;&#35937;&#23618;</a></dt><dt>12.4.2. <a href="#orm-toplink-template">TopLinkTemplate and
      TopLinkDaoSupport</a></dt><dt>12.4.3. <a href="#orm-toplink-straight">&#22522;&#20110;&#21407;&#29983;&#30340;TopLink API&#30340;DAO&#23454;&#29616;</a></dt><dt>12.4.4. <a href="#orm-toplink-tx">&#20107;&#21153;&#31649;&#29702;</a></dt></dl></dd><dt>12.5. <a href="#orm-ibatis">iBATIS SQL Maps</a></dt><dd><dl><dt>12.5.1. <a href="#orm-ibatis-setup">
      
      &#21019;&#24314;SqlMapClient
      </a></dt><dt>12.5.2. <a href="#orm-ibatis-template">
      
      	&#20351;&#29992; SqlMapClientTemplate &#21644; SqlMapClientDaoSupport
      </a></dt><dt>12.5.3. <a href="#orm-ibatis-straight">&#22522;&#20110;&#21407;&#29983;&#30340;iBATIS API&#30340;DAO&#23454;&#29616;</a></dt></dl></dd><dt>12.6. <a href="#orm-jpa">JPA</a></dt><dd><dl><dt>12.6.1. <a href="#orm-jpa-setup">&#22312;Spring&#29615;&#22659;&#20013;&#24314;&#31435;JPA</a></dt><dd><dl><dt>12.6.1.1. <a href="#orm-jpa-setup-lemfb">LocalEntityManagerFactoryBean</a></dt><dt>12.6.1.2. <a href="#orm-jpa-setup-jndi">&#20174;JNDI&#20013;&#33719;&#21462; EntityManagerFactory </a></dt><dt>12.6.1.3. <a href="#orm-jpa-setup-lcemfb">LocalContainerEntityManagerFactoryBean</a></dt><dt>12.6.1.4. <a href="#orm-jpa-multiple-pu">&#22788;&#29702;&#22810;&#25345;&#20037;&#21270;&#21333;&#20803;</a></dt></dl></dd><dt>12.6.2. <a href="#orm-jpa-template">JpaTemplate &#21644; JpaDaoSupport</a></dt><dt>12.6.3. <a href="#orm-jpa-straight">&#22522;&#20110;&#21407;&#29983;&#30340;JPA&#23454;&#29616;DAO</a></dt><dt>12.6.4. <a href="#orm-jpa-exceptions">&#24322;&#24120;&#36716;&#21270;</a></dt></dl></dd><dt>12.7. <a href="#orm-jpa-tx">&#20107;&#21153;&#31649;&#29702;</a></dt><dt>12.8. <a href="#orm-jpa-dialect">JpaDialect</a></dt></dl></dd></dl></dd><dt>III. <a href="#spring-web">The Web</a></dt><dd><dl><dt>13. <a href="#mvc">Web MVC framework Web&#26694;&#26550;</a></dt><dd><dl><dt>13.1. <a href="#mvc-introduction">&#27010;&#36848;</a></dt><dd><dl><dt>13.1.1. <a href="#mvc-introduction-pluggability">&#19982;&#20854;&#20182;MVC&#23454;&#29616;&#26694;&#26550;&#30340;&#38598;&#25104;</a></dt><dt>13.1.2. <a href="#mvc-features">Spring Web MVC&#26694;&#26550;&#30340;&#29305;&#28857;</a></dt></dl></dd><dt>13.2. <a href="#mvc-servlet">DispatcherServlet</a></dt><dt>13.3. <a href="#mvc-controller">&#25511;&#21046;&#22120;</a></dt><dd><dl><dt>13.3.1. <a href="#mvc-controller-abstractcontroller">AbstractController &#21644; WebContentGenerator</a></dt><dt>13.3.2. <a href="#mvc-controller-othersimplecontrollers">&#20854;&#23427;&#30340;&#31616;&#21333;&#25511;&#21046;&#22120;</a></dt><dt>13.3.3. <a href="#mvc-controller-multiaction">MultiActionController</a></dt><dt>13.3.4. <a href="#mvc-controller-command">&#21629;&#20196;&#25511;&#21046;&#22120;</a></dt></dl></dd><dt>13.4. <a href="#mvc-handlermapping">&#22788;&#29702;&#22120;&#26144;&#23556;&#65288;handler mapping&#65289;</a></dt><dd><dl><dt>13.4.1. <a href="#mvc-handlermapping-beanname">BeanNameUrlHandlerMapping</a></dt><dt>13.4.2. <a href="#mvc-handlermapping-urlhandlermapping">SimpleUrlHandlerMapping</a></dt><dt>13.4.3. <a href="#mvc-handlermapping-interceptor">&#25318;&#25130;&#22120;&#65288;HandlerInterceptor&#65289;</a></dt></dl></dd><dt>13.5. <a href="#mvc-viewresolver">&#35270;&#22270;&#19982;&#35270;&#22270;&#35299;&#26512;</a></dt><dd><dl><dt>13.5.1. <a href="#mvc-viewresolver-resolver">&#35270;&#22270;&#35299;&#26512;&#22120;&#65288;ViewResolver&#65289;</a></dt><dt>13.5.2. <a href="#mvc-viewresolver-chaining">&#35270;&#22270;&#35299;&#26512;&#38142;</a></dt><dt>13.5.3. <a href="#mvc-redirecting">&#37325;&#23450;&#21521;&#65288;Rediret&#65289;&#21040;&#21478;&#19968;&#20010;&#35270;&#22270;</a></dt><dd><dl><dt>13.5.3.1. <a href="#mvc-redirecting-redirect-view">RedirectView</a></dt><dt>13.5.3.2. <a href="#mvc-redirecting-redirect-prefix">redirect:&#21069;&#32512;</a></dt><dt>13.5.3.3. <a href="#mvc-redirecting-forward-prefix">forward:&#21069;&#32512;</a></dt></dl></dd></dl></dd><dt>13.6. <a href="#mvc-localeresolver">&#26412;&#22320;&#21270;&#35299;&#26512;&#22120;</a></dt><dd><dl><dt>13.6.1. <a href="#mvc-localeresolver-acceptheader">AcceptHeaderLocaleResolver</a></dt><dt>13.6.2. <a href="#mvc-localeresolver-cookie">CookieLocaleResolver</a></dt><dt>13.6.3. <a href="#mvc-localeresolver-session">SessionLocaleResolver</a></dt><dt>13.6.4. <a href="#mvc-localeresolver-interceptor">LocaleChangeInterceptor</a></dt></dl></dd><dt>13.7. <a href="#mvc-themeresolver">&#20351;&#29992;&#20027;&#39064;</a></dt><dd><dl><dt>13.7.1. <a href="#mvc-themeresolver-introduction">&#31616;&#20171;</a></dt><dt>13.7.2. <a href="#mvc-themeresolver-defining">&#22914;&#20309;&#23450;&#20041;&#20027;&#39064;</a></dt><dt>13.7.3. <a href="#mvc-themeresolver-resolving">&#20027;&#39064;&#35299;&#26512;&#22120;</a></dt></dl></dd><dt>13.8. <a href="#mvc-multipart">Spring&#23545;&#20998;&#27573;&#25991;&#20214;&#19978;&#20256;&#65288;multipart file upload&#65289;&#30340;&#25903;&#25345;</a></dt><dd><dl><dt>13.8.1. <a href="#mvc-multipart-introduction">&#20171;&#32461;</a></dt><dt>13.8.2. <a href="#mvc-multipart-resolver">&#20351;&#29992;MultipartResolver</a></dt><dt>13.8.3. <a href="#mvc-multipart-forms">&#22312;&#34920;&#21333;&#20013;&#22788;&#29702;&#20998;&#27573;&#25991;&#20214;&#19978;&#20256;</a></dt></dl></dd><dt>13.9. <a href="#mvc-formtaglib">&#20351;&#29992;Spring&#30340;&#34920;&#21333;&#26631;&#31614;&#24211;</a></dt><dd><dl><dt>13.9.1. <a href="#mvc-formtaglib-configuration">&#37197;&#32622;</a></dt><dt>13.9.2. <a href="#mvc-formtaglib-formtag">form&#26631;&#31614;</a></dt><dt>13.9.3. <a href="#mvc-formtaglib-inputtag">input&#26631;&#31614;</a></dt><dt>13.9.4. <a href="#mvc-formtaglib-checkboxtag">checkbox&#26631;&#31614;</a></dt><dt>13.9.5. <a href="#mvc-formtaglib-checkboxestag">checkboxes&#26631;&#31614;</a></dt><dt>13.9.6. <a href="#mvc-formtaglib-radiobuttontag">radiobutton&#26631;&#31614;</a></dt><dt>13.9.7. <a href="#mvc-formtaglib-radiobuttonstag">radiobuttons&#26631;&#31614;</a></dt><dt>13.9.8. <a href="#mvc-formtaglib-passwordtag">password&#26631;&#31614;</a></dt><dt>13.9.9. <a href="#mvc-formtaglib-selecttag">select&#26631;&#31614;</a></dt><dt>13.9.10. <a href="#mvc-formtaglib-optiontag">option&#26631;&#31614;</a></dt><dt>13.9.11. <a href="#mvc-formtaglib-optionstag">options&#26631;&#31614;</a></dt><dt>13.9.12. <a href="#mvc-formtaglib-textAreatag">textarea&#26631;&#31614;</a></dt><dt>13.9.13. <a href="#mvc-formtaglib-hiddeninputtag">hidden&#26631;&#31614;</a></dt><dt>13.9.14. <a href="#mvc-formtaglib-errorstag">errors&#26631;&#31614;</a></dt></dl></dd><dt>13.10. <a href="#mvc-exceptionhandlers">&#22788;&#29702;&#24322;&#24120;</a></dt><dt>13.11. <a href="#mvc-coc">&#24815;&#20363;&#20248;&#20808;&#21407;&#21017;&#65288;convention over configuration&#65289;</a></dt><dd><dl><dt>13.11.1. <a href="#mvc-coc-ccnhm">&#23545;&#25511;&#21046;&#22120;&#30340;&#25903;&#25345;&#65306;ControllerClassNameHandlerMapping</a></dt><dt>13.11.2. <a href="#mvc-coc-modelmap">&#23545;&#27169;&#22411;&#30340;&#25903;&#25345;&#65306;ModelMap&#65288;ModelAndView&#65289;</a></dt><dt>13.11.3. <a href="#mvc-coc-r2vnt">&#23545;&#35270;&#22270;&#30340;&#25903;&#25345;&#65306;RequestToViewNameTranslator</a></dt></dl></dd><dt>13.12. <a href="#mvc-annotation">&#22522;&#20110;&#27880;&#35299;&#30340;&#25511;&#21046;&#22120;&#37197;&#32622;</a></dt><dd><dl><dt>13.12.1. <a href="#mvc-ann-setup">&#24314;&#31435;dispatcher&#23454;&#29616;&#27880;&#35299;&#25903;&#25345;</a></dt><dt>13.12.2. <a href="#mvc-ann-controller">&#20351;&#29992;@Controller&#23450;&#20041;&#19968;&#20010;&#25511;&#21046;&#22120;</a></dt><dt>13.12.3. <a href="#mvc-ann-requestmapping">&#20351;&#29992;@RequestMapping&#26144;&#23556;&#35831;&#27714;</a></dt><dt>13.12.4. <a href="#mvc-ann-requestparam">&#20351;&#29992;@RequestParam&#32465;&#23450;&#35831;&#27714;&#21442;&#25968;&#21040;&#26041;&#27861;&#21442;&#25968;</a></dt><dt>13.12.5. <a href="#mvc-ann-modelattrib">&#20351;&#29992;@ModelAttribute&#25552;&#20379;&#19968;&#20010;&#20174;&#27169;&#22411;&#21040;&#25968;&#25454;&#30340;&#38142;&#25509;</a></dt><dt>13.12.6. <a href="#mvc-ann-sessionattrib">&#20351;&#29992;@SessionAttributes&#25351;&#23450;&#23384;&#20648;&#22312;&#20250;&#35805;&#20013;&#30340;&#23646;&#24615;</a></dt><dt>13.12.7. <a href="#mvc-ann-webdatabinder">&#33258;&#23450;&#20041;WebDataBinder&#21021;&#22987;&#21270;</a></dt><dd><dl><dt>13.12.7.1. <a href="#mvc-ann-initbinder">&#20351;&#29992;@InitBinder&#33258;&#23450;&#20041;&#25968;&#25454;&#32465;&#23450;</a></dt><dt>13.12.7.2. <a href="#mvc-ann-webbindinginitializer">&#37197;&#32622;&#19968;&#20010;&#23450;&#21046;&#30340;WebBindingInitializer</a></dt></dl></dd></dl></dd><dt>13.13. <a href="#mvc-resources">&#26356;&#22810;&#36164;&#28304;</a></dt></dl></dd><dt>14. <a href="#view">&#38598;&#25104;&#35270;&#22270;&#25216;&#26415;</a></dt><dd><dl><dt>14.1. <a href="#view-introduction">&#31616;&#20171;</a></dt><dt>14.2. <a href="#view-jsp">JSP&#21644;JSTL</a></dt><dd><dl><dt>14.2.1. <a href="#view-jsp-resolver">&#35270;&#22270;&#35299;&#26512;&#22120;</a></dt><dt>14.2.2. <a href="#view-jsp-jstl">
				'Plain-old' JSPs versus JSTL 'Plain-old' JSP&#19982;JSTL
			</a></dt><dt>14.2.3. <a href="#view-jsp-tags">&#24110;&#21161;&#31616;&#21270;&#24320;&#21457;&#30340;&#39069;&#22806;&#30340;&#26631;&#31614;</a></dt></dl></dd><dt>14.3. <a href="#view-tiles">Tiles</a></dt><dd><dl><dt>14.3.1. <a href="#view-tiles-dependencies">&#38656;&#35201;&#30340;&#36164;&#28304;</a></dt><dt>14.3.2. <a href="#view-tiles-integrate">&#22914;&#20309;&#38598;&#25104;Tiles</a></dt><dd><dl><dt>14.3.2.1. <a href="#view-tiles-url">
					UrlBasedViewResolver&#31867;
				</a></dt><dt>14.3.2.2. <a href="#view-tiles-resource">
					ResourceBundleViewResolver&#31867;
				</a></dt><dt>14.3.2.3. <a href="#view-tiles-preparer">
					SimpleSpringPreparerFactory
					&#21644;
					SpringBeanPreparerFactory
				</a></dt></dl></dd></dl></dd><dt>14.4. <a href="#view-velocity">Velocity&#21644;FreeMarker</a></dt><dd><dl><dt>14.4.1. <a href="#view-velocity-dependencies">&#38656;&#35201;&#30340;&#36164;&#28304;</a></dt><dt>14.4.2. <a href="#view-velocity-contextconfig">Context &#37197;&#32622;</a></dt><dt>14.4.3. <a href="#view-velocity-createtemplates">&#21019;&#24314;&#27169;&#26495;</a></dt><dt>14.4.4. <a href="#view-velocity-advancedconfig">&#39640;&#32423;&#37197;&#32622;</a></dt><dd><dl><dt>14.4.4.1. <a href="#view-velocity-example-velocityproperties">velocity.properties</a></dt><dt>14.4.4.2. <a href="#views-freemarker">FreeMarker</a></dt></dl></dd><dt>14.4.5. <a href="#view-velocity-forms">&#32465;&#23450;&#25903;&#25345;&#21644;&#34920;&#21333;&#22788;&#29702;</a></dt><dd><dl><dt>14.4.5.1. <a href="#view-bind-macros">&#29992;&#20110;&#32465;&#23450;&#30340;&#23439;</a></dt><dt>14.4.5.2. <a href="#view-simple-binding">&#31616;&#21333;&#32465;&#23450;</a></dt><dt>14.4.5.3. <a href="#views-form-macros">&#34920;&#21333;&#36755;&#20837;&#29983;&#25104;&#23439;</a></dt><dt>14.4.5.4. <a href="#d0e27354">&#37325;&#36733;HTML&#36716;&#30721;&#34892;&#20026;&#24182;&#20351;&#20320;&#30340;&#26631;&#31614;&#31526;&#21512;XHTML</a></dt></dl></dd></dl></dd><dt>14.5. <a href="#view-xslt">XSLT</a></dt><dd><dl><dt>14.5.1. <a href="#view-xslt-firstwords">&#20889;&#22312;&#27573;&#39318;</a></dt><dd><dl><dt>14.5.1.1. <a href="#view-xslt-beandefs">Bean &#23450;&#20041;</a></dt><dt>14.5.1.2. <a href="#view-xslt-controllercode">&#26631;&#20934;MVC&#25511;&#21046;&#22120;&#20195;&#30721;</a></dt><dt>14.5.1.3. <a href="#view-xslt-subclassing">&#25226;&#27169;&#22411;&#25968;&#25454;&#36716;&#21270;&#20026;XML</a></dt><dt>14.5.1.4. <a href="#view-xslt-viewdefinitions">&#23450;&#20041;&#35270;&#22270;&#23646;&#24615;</a></dt><dt>14.5.1.5. <a href="#view-xslt-transforming">&#25991;&#26723;&#36716;&#25442;</a></dt></dl></dd><dt>14.5.2. <a href="#view-xslt-summary">&#23567;&#32467;</a></dt></dl></dd><dt>14.6. <a href="#view-document">&#25991;&#26723;&#35270;&#22270;&#65288;PDF/Excel&#65289;</a></dt><dd><dl><dt>14.6.1. <a href="#view-document-intro">&#31616;&#20171;</a></dt><dt>14.6.2. <a href="#view-document-config">&#37197;&#32622;&#21644;&#23433;&#35013;</a></dt><dd><dl><dt>14.6.2.1. <a href="#view-document-configviews">&#25991;&#26723;&#35270;&#22270;&#23450;&#20041;</a></dt><dt>14.6.2.2. <a href="#view-document-configcontroller">Controller &#20195;&#30721;</a></dt><dt>14.6.2.3. <a href="#view-document-configsubclasses">Excel&#35270;&#22270;&#23376;&#31867;</a></dt><dt>14.6.2.4. <a href="#view-document-configsubclasspdf">PDF&#35270;&#22270;&#23376;&#31867;</a></dt></dl></dd></dl></dd><dt>14.7. <a href="#view-jasper-reports">JasperReports</a></dt><dd><dl><dt>14.7.1. <a href="#view-jasper-reports-dependencies">&#20381;&#36182;&#30340;&#36164;&#28304;</a></dt><dt>14.7.2. <a href="#view-jasper-reports-configuration">&#37197;&#32622;</a></dt><dd><dl><dt>14.7.2.1. <a href="#view-jasper-reports-configuration-resolver">
					&#37197;&#32622;ViewResolver
				</a></dt><dt>14.7.2.2. <a href="#view-jasper-reports-configuration-views">
					&#37197;&#32622;View
				</a></dt><dt>14.7.2.3. <a href="#view-jasper-reports-configuration-report-files">&#20851;&#20110;&#25253;&#34920;&#25991;&#20214;</a></dt><dt>14.7.2.4. <a href="#view-jasper-reports-configuration-multiformat-view">
					&#20351;&#29992;
					JasperReportsMultiFormatView
				</a></dt></dl></dd><dt>14.7.3. <a href="#view-jasper-reports-model">
				&#26500;&#36896;ModelAndView
			</a></dt><dt>14.7.4. <a href="#view-jasper-reports-subreports">&#20351;&#29992;&#23376;&#25253;&#34920;</a></dt><dd><dl><dt>14.7.4.1. <a href="#view-jasper-reports-subreports-config-reports">&#37197;&#32622;&#23376;&#25253;&#34920;&#25991;&#20214;</a></dt><dt>14.7.4.2. <a href="#view-jasper-reports-subreports-config-datasources">&#37197;&#32622;&#23376;&#25253;&#34920;&#25968;&#25454;&#28304;</a></dt></dl></dd><dt>14.7.5. <a href="#view-jasper-reports-exporter-parameters">&#37197;&#32622;Exporter&#30340;&#21442;&#25968;</a></dt></dl></dd></dl></dd><dt>15. <a href="#webintegration">&#38598;&#25104;&#20854;&#23427;Web&#26694;&#26550;</a></dt><dd><dl><dt>15.1. <a href="#intro">&#31616;&#20171;</a></dt><dt>15.2. <a href="#webintegration-common">&#36890;&#29992;&#37197;&#32622;</a></dt><dt>15.3. <a href="#jsf">JavaServer Faces</a></dt><dd><dl><dt>15.3.1. <a href="#jsf-delegatingvariableresolver">DelegatingVariableResolver</a></dt><dt>15.3.2. <a href="#jsf-facescontextutils">FacesContextUtils</a></dt></dl></dd><dt>15.4. <a href="#struts">Struts</a></dt><dd><dl><dt>15.4.1. <a href="#struts-contextloaderplugin">ContextLoaderPlugin</a></dt><dd><dl><dt>15.4.1.1. <a href="#struts-delegatingrequestprocessor">DelegatingRequestProcessor</a></dt><dt>15.4.1.2. <a href="#struts-delegatingactionproxy">DelegatingActionProxy</a></dt></dl></dd><dt>15.4.2. <a href="#struts-actionsupport">ActionSupport Classes</a></dt></dl></dd><dt>15.5. <a href="#view-tapestry">Tapestry</a></dt><dd><dl><dt>15.5.1. <a href="#view-tapestry-di">&#27880;&#20837; Spring &#25176;&#31649;&#30340; beans</a></dt><dd><dl><dt>15.5.1.1. <a href="#view-tapestry-pre40-style-di">&#23558; Spring Beans &#27880;&#20837;&#21040; Tapestry &#39029;&#38754;&#20013;</a></dt><dt>15.5.1.2. <a href="#view-tapestry-componentdefs">&#32452;&#20214;&#23450;&#20041;&#25991;&#20214;</a></dt><dt>15.5.1.3. <a href="#view-tapestry-getters">&#28155;&#21152;&#25277;&#35937;&#35775;&#38382;&#26041;&#27861;</a></dt><dt>15.5.1.4. <a href="#view-tapestry-40-style-di">&#23558; Spring Beans &#27880;&#20837;&#21040; Tapestry &#39029;&#38754;&#20013; - Tapestry 4.0+ &#39118;&#26684;</a></dt></dl></dd></dl></dd><dt>15.6. <a href="#webwork">WebWork</a></dt><dt>15.7. <a href="#webintegration-resources">&#26356;&#22810;&#36164;&#28304;</a></dt></dl></dd><dt>16. <a href="#portlet">Portlet MVC&#26694;&#26550;</a></dt><dd><dl><dt>16.1. <a href="#portlet-introduction">&#20171;&#32461;</a></dt><dd><dl><dt>16.1.1. <a href="#portlet-introduction-controller">&#25511;&#21046;&#22120; - MVC&#20013;&#30340;C</a></dt><dt>16.1.2. <a href="#portlet-introduction-view">&#35270;&#22270; - MVC&#20013;&#30340;V</a></dt><dt>16.1.3. <a href="#portlet-introduction-scope">Web&#20316;&#29992;&#33539;&#22260;&#30340;Bean</a></dt></dl></dd><dt>16.2. <a href="#portlet-dispatcher">
			DispatcherPortlet
		</a></dt><dt>16.3. <a href="#portlet-viewservlet">ViewRendererServlet</a></dt><dt>16.4. <a href="#portlet-controller">&#25511;&#21046;&#22120;</a></dt><dd><dl><dt>16.4.1. <a href="#portlet-controller-abstractcontroller">AbstractController &#21644; PortletContentGenerator</a></dt><dt>16.4.2. <a href="#portlet-controller-simple">&#20854;&#23427;&#31616;&#21333;&#30340;&#25511;&#21046;&#22120;</a></dt><dt>16.4.3. <a href="#portlet-controller-command">Command&#25511;&#21046;&#22120;</a></dt><dt>16.4.4. <a href="#portlet-controller-wrapping">PortletWrappingController</a></dt></dl></dd><dt>16.5. <a href="#portlet-handlermapping">&#22788;&#29702;&#22120;&#26144;&#23556;</a></dt><dd><dl><dt>16.5.1. <a href="#portlet-handlermapping-portletmode">PortletModeHandlerMapping</a></dt><dt>16.5.2. <a href="#portlet-handlermapping-parameter">ParameterHandlerMapping</a></dt><dt>16.5.3. <a href="#portlet-handlermapping-portletmodeparameter">PortletModeParameterHandlerMapping</a></dt><dt>16.5.4. <a href="#portlet-handlermapping-interceptor">&#22686;&#21152; HandlerInterceptors</a></dt><dt>16.5.5. <a href="#portlet-handlermapping-interceptoradapter">HandlerInterceptorAdapter</a></dt><dt>16.5.6. <a href="#portlet-handlermapping-parameterinterceptor">ParameterMappingInterceptor</a></dt></dl></dd><dt>16.6. <a href="#portlet-viewresolver">&#35270;&#22270;&#21644;&#23427;&#20204;&#30340;&#35299;&#26512;</a></dt><dt>16.7. <a href="#portlet-multipart">Multipart&#25991;&#20214;&#19978;&#20256;&#25903;&#25345;</a></dt><dd><dl><dt>16.7.1. <a href="#portlet-multipart-resolver">&#20351;&#29992; PortletMultipartResolver</a></dt><dt>16.7.2. <a href="#portlet-multipart-forms">&#22788;&#29702;&#34920;&#21333;&#37324;&#30340;&#25991;&#20214;&#19978;&#20256;</a></dt></dl></dd><dt>16.8. <a href="#portlet-exceptionresolver">&#24322;&#24120;&#22788;&#29702;</a></dt><dt>16.9. <a href="#portlet-deployment">Portlet&#24212;&#29992;&#30340;&#37096;&#32626;</a></dt></dl></dd></dl></dd><dt>IV. <a href="#spring-integration">&#25972;&#21512;</a></dt><dd><dl><dt>17. <a href="#remoting">&#20351;&#29992;Spring&#36827;&#34892;&#36828;&#31243;&#35775;&#38382;&#19982;Web&#26381;&#21153;</a></dt><dd><dl><dt>17.1. <a href="#remoting-introduction">&#31616;&#20171;</a></dt><dt>17.2. <a href="#remoting-rmi">&#20351;&#29992;RMI&#26292;&#38706;&#26381;&#21153;</a></dt><dd><dl><dt>17.2.1. <a href="#remoting-rmi-server">&#20351;&#29992;RmiServiceExporter&#26292;&#38706;&#26381;&#21153;</a></dt><dt>17.2.2. <a href="#remoting-rmi-client">&#22312;&#23458;&#25143;&#31471;&#38142;&#25509;&#26381;&#21153;</a></dt></dl></dd><dt>17.3. <a href="#remoting-caucho-protocols">&#20351;&#29992;Hessian&#25110;&#32773;Burlap&#36890;&#36807;HTTP&#36828;&#31243;&#35843;&#29992;&#26381;&#21153;</a></dt><dd><dl><dt>17.3.1. <a href="#remoting-caucho-protocols-hessian">&#20026;Hessian&#21644;co.&#37197;&#32622;DispatcherServlet</a></dt><dt>17.3.2. <a href="#remoting-caucho-protocols-hessian-server">&#20351;&#29992;HessianServiceExporter&#26292;&#38706;&#20320;&#30340;bean</a></dt><dt>17.3.3. <a href="#remoting-caucho-protocols-hessian-client">&#22312;&#23458;&#25143;&#31471;&#36830;&#25509;&#26381;&#21153;</a></dt><dt>17.3.4. <a href="#remoting-caucho-protocols-burlap">&#20351;&#29992;Burlap</a></dt><dt>17.3.5. <a href="#remoting-caucho-protocols-security">&#23545;&#36890;&#36807;Hessian&#25110;Burlap&#26292;&#38706;&#30340;&#26381;&#21153;&#20351;&#29992;HTTP Basic&#35748;&#35777;</a></dt></dl></dd><dt>17.4. <a href="#remoting-httpinvoker">&#20351;&#29992;HTTP&#35843;&#29992;&#22120;&#26292;&#38706;&#26381;&#21153;</a></dt><dd><dl><dt>17.4.1. <a href="#remoting-httpinvoker-server">Exposing the service object</a></dt><dt>17.4.2. <a href="#remoting-httpinvoker-client">&#22312;&#23458;&#25143;&#31471;&#36830;&#25509;&#26381;&#21153;</a></dt></dl></dd><dt>17.5. <a href="#remoting-web-services">Web Services</a></dt><dd><dl><dt>17.5.1. <a href="#remoting-web-services-jaxrpc-export">&#20351;&#29992;JAX-RPC&#26292;&#38706;&#22522;&#20110;servlet&#30340;web&#26381;&#21153;</a></dt><dt>17.5.2. <a href="#remoting-web-services-jaxrpc-access">&#20351;&#29992;JAX-RPC&#35775;&#38382;web&#26381;&#21153;</a></dt><dt>17.5.3. <a href="#remoting-web-services-jaxrpc-mapping-registration">&#27880;&#20876;JAX-RPC Bean&#26144;&#23556;</a></dt><dt>17.5.4. <a href="#remoting-web-services-jaxrpc-handler-registration">&#27880;&#20876;&#33258;&#24049;&#30340;JAX-RPC &#22788;&#29702;&#22120;</a></dt><dt>17.5.5. <a href="#remoting-web-services-jaxws-export-servlet">&#20351;&#29992;JAX-WS&#26292;&#38706;&#22522;&#20110;servlet&#30340;web&#26381;&#21153;</a></dt><dt>17.5.6. <a href="#remoting-web-services-jaxws-export-standalone">&#20351;&#29992;JAX-WS&#26292;&#38706;&#21333;&#29420;web&#26381;&#21153;</a></dt><dt>17.5.7. <a href="#remoting-web-services-jaxws-export-ri">&#20351;&#29992;Spring&#25903;&#25345;&#30340;JAX-WS RI&#26469;&#26292;&#38706;&#26381;&#21153;</a></dt><dt>17.5.8. <a href="#remoting-web-services-jaxws-access">&#20351;&#29992;JAX-WS&#35775;&#38382;web&#26381;&#21153;</a></dt><dt>17.5.9. <a href="#remoting-web-services-xfire">&#20351;&#29992;XFire&#26469;&#26292;&#38706;Web&#26381;&#21153;</a></dt></dl></dd><dt>17.6. <a href="#remoting-jms">JMS</a></dt><dd><dl><dt>17.6.1. <a href="#remoting-jms-server">&#26381;&#21153;&#31471;&#37197;&#32622;</a></dt><dt>17.6.2. <a href="#remoting-jms-client">&#23458;&#25143;&#31471;&#37197;&#32622;</a></dt></dl></dd><dt>17.7. <a href="#remoting-autodection-remote-interfaces">&#23545;&#36828;&#31243;&#25509;&#21475;&#19981;&#25552;&#20379;&#33258;&#21160;&#25506;&#27979;&#23454;&#29616;</a></dt><dt>17.8. <a href="#remoting-considerations">&#22312;&#36873;&#25321;&#36825;&#20123;&#25216;&#26415;&#26102;&#30340;&#19968;&#20123;&#32771;&#34385;</a></dt></dl></dd><dt>18. <a href="#ejb">Enterprise Java Beans (EJB) &#38598;&#25104;</a></dt><dd><dl><dt>18.1. <a href="#ejb-introduction">&#31616;&#20171;</a></dt><dt>18.2. <a href="#ejb-access">&#35775;&#38382;EJB</a></dt><dd><dl><dt>18.2.1. <a href="#ejb-access-concepts">&#27010;&#24565;</a></dt><dt>18.2.2. <a href="#ejb-access-local">&#35775;&#38382;&#26412;&#22320;&#30340;&#26080;&#29366;&#24577;Session Bean(SLSB)</a></dt><dt>18.2.3. <a href="#ejb-access-remote">&#35775;&#38382;&#36828;&#31243;SLSB</a></dt><dt>18.2.4. <a href="#ejb-access-ejb2-ejb3">Accessing EJB 2.x SLSBs versus EJB 3 SLSBs</a></dt></dl></dd><dt>18.3. <a href="#ejb-implementation">&#20351;&#29992;Spring&#25552;&#20379;&#30340;&#36741;&#21161;&#31867;&#23454;&#29616;EJB&#32452;&#20214;</a></dt><dd><dl><dt>18.3.1. <a href="#ejb-implementation-ejb2">EJB 2.x base classes</a></dt><dt>18.3.2. <a href="#ejb-implementation-ejb3">EJB 3 &#27880;&#20837;&#25318;&#25130;</a></dt></dl></dd></dl></dd><dt>19. <a href="#jms">JMS (Java Message Service)</a></dt><dd><dl><dt>19.1. <a href="#jms-introduction">&#31616;&#20171;</a></dt><dt>19.2. <a href="#jms-using">&#20351;&#29992;Spring JMS</a></dt><dd><dl><dt>19.2.1. <a href="#d0e31311">JmsTemplate</a></dt><dt>19.2.2. <a href="#jms-connections">&#36830;&#25509;&#24037;&#21378;</a></dt><dt>19.2.3. <a href="#jms-destinations">&#30446;&#30340;&#22320;&#31649;&#29702;</a></dt><dt>19.2.4. <a href="#jms-mdp">&#28040;&#24687;&#20390;&#21548;&#23481;&#22120;</a></dt><dd><dl><dt>19.2.4.1. <a href="#jms-mdp-simple">SimpleMessageListenerContainer</a></dt><dt>19.2.4.2. <a href="#jms-mdp-default">DefaultMessageListenerContainer</a></dt><dt>19.2.4.3. <a href="#jms-mdp-server-session">ServerSessionMessageListenerContainer</a></dt></dl></dd><dt>19.2.5. <a href="#jms-tx">&#20107;&#21153;&#31649;&#29702;</a></dt></dl></dd><dt>19.3. <a href="#jms-sending">&#21457;&#36865;&#28040;&#24687;</a></dt><dd><dl><dt>19.3.1. <a href="#jms-msg-conversion">&#20351;&#29992;&#28040;&#24687;&#36716;&#25442;&#22120;</a></dt><dt>19.3.2. <a href="#jms-callbacks">SessionCallback &#21644; ProducerCallback</a></dt></dl></dd><dt>19.4. <a href="#jms-receiving">&#25509;&#25910;&#28040;&#24687;</a></dt><dd><dl><dt>19.4.1. <a href="#jms-receiving-sync">&#21516;&#27493;&#25509;&#25910;</a></dt><dt>19.4.2. <a href="#jms-asynchronousMessageReception">&#24322;&#27493;&#25509;&#25910; - &#28040;&#24687;&#39537;&#21160;&#30340;POJO</a></dt><dt>19.4.3. <a href="#jms-receiving-async-session-aware-message-listener">SessionAwareMessageListener&#25509;&#21475;</a></dt><dt>19.4.4. <a href="#jms-receiving-async-message-listener-adapter">MessageListenerAdapter</a></dt><dt>19.4.5. <a href="#jms-tx-participation">&#20107;&#21153;&#20013;&#30340;&#28040;&#24687;&#22788;&#29702;</a></dt></dl></dd><dt>19.5. <a href="#jms-jca-message-endpoint-manager">JCA&#28040;&#24687;&#31471;&#28857;&#30340;&#25903;&#25345;</a></dt><dt>19.6. <a href="#jms-namespace">JMS&#21629;&#21517;&#31354;&#38388;&#25903;&#25345;</a></dt></dl></dd><dt>20. <a href="#jmx">JMX</a></dt><dd><dl><dt>20.1. <a href="#jmx-introduction">&#20171;&#32461;</a></dt><dt>20.2. <a href="#jmx-exporting">&#23558;Bean&#26292;&#38706;&#20026;JMX</a></dt><dd><dl><dt>20.2.1. <a href="#jmx-exporting-mbeanserver">&#21019;&#24314;MBeanServer</a></dt><dt>20.2.2. <a href="#jmx-mbean-server">&#37325;&#29992;&#21407;&#26377;&#30340;MBeanServer</a></dt><dt>20.2.3. <a href="#jmx-exporting-lazy">&#24310;&#36831;&#21021;&#22987;&#21270;&#30340;MBean</a></dt><dt>20.2.4. <a href="#jmx-exporting-auto">MBean&#30340;&#33258;&#21160;&#27880;&#20876;</a></dt><dt>20.2.5. <a href="#jmx-exporting-registration-behavior">&#25511;&#21046;&#27880;&#20876;&#34892;&#20026;</a></dt></dl></dd><dt>20.3. <a href="#jmx-interface">&#25511;&#21046;Bean&#30340;&#31649;&#29702;&#25509;&#21475;</a></dt><dd><dl><dt>20.3.1. <a href="#jmx-interface-assembler">MBeanInfoAssembler&#25509;&#21475;</a></dt><dt>20.3.2. <a href="#jmx-interface-metadata">&#20351;&#29992;&#28304;&#30721;&#32423;&#20803;&#25968;&#25454;</a></dt><dt>20.3.3. <a href="#jmx-interface-annotations">&#20351;&#29992;JDK 5.0&#30340;&#27880;&#35299;</a></dt><dt>20.3.4. <a href="#jmx-interface-metadata-types">&#28304;&#20195;&#30721;&#32423;&#30340;&#20803;&#25968;&#25454;&#31867;&#22411;</a></dt><dt>20.3.5. <a href="#jmx-interface-autodetect">AutodetectCapableMBeanInfoAssembler&#25509;&#21475;</a></dt><dt>20.3.6. <a href="#jmx-interface-java">&#29992;Java&#25509;&#21475;&#23450;&#20041;&#31649;&#29702;&#25509;&#21475;</a></dt><dt>20.3.7. <a href="#jmx-interface-methodnames">&#20351;&#29992;MethodNameBasedMBeanInfoAssembler</a></dt></dl></dd><dt>20.4. <a href="#jmx-naming">&#25511;&#21046;Bean&#30340;ObjectName</a></dt><dd><dl><dt>20.4.1. <a href="#jmx-naming-properties">&#20174;Properties&#35835;&#21462;Properties</a></dt><dt>20.4.2. <a href="#jmx-naming-metadata">&#20351;&#29992;MetadataNamingStrategy</a></dt><dt>20.4.3. <a href="#jmx-context-mbeanexport">&lt;context:mbean-export/&gt;&#20803;&#32032;</a></dt></dl></dd><dt>20.5. <a href="#jmx-jsr160">JSR-160&#36830;&#25509;&#22120;</a></dt><dd><dl><dt>20.5.1. <a href="#jmx-jsr160-server">&#26381;&#21153;&#22120;&#31471;&#36830;&#25509;&#22120;</a></dt><dt>20.5.2. <a href="#jmx-jsr160-client">&#23458;&#25143;&#31471;&#36830;&#25509;&#22120;</a></dt><dt>20.5.3. <a href="#jmx-jsr160-protocols">&#22522;&#20110;Burlap/Hessian/SOAP&#30340;JMX</a></dt></dl></dd><dt>20.6. <a href="#jmx-proxy">&#36890;&#36807;&#20195;&#29702;&#35775;&#38382;MBean</a></dt><dt>20.7. <a href="#jmx-notifications">&#36890;&#30693;</a></dt><dd><dl><dt>20.7.1. <a href="#jmx-notifications-listeners">&#20026;&#36890;&#30693;&#27880;&#20876;&#30417;&#21548;&#22120;</a></dt><dt>20.7.2. <a href="#jmx-notifications-publishing">&#21457;&#24067;&#36890;&#30693;</a></dt></dl></dd><dt>20.8. <a href="#jmx-resources">&#26356;&#22810;&#36164;&#28304;</a></dt></dl></dd><dt>21. <a href="#cci">JCA CCI</a></dt><dd><dl><dt>21.1. <a href="#cci-introduction">&#31616;&#20171;</a></dt><dt>21.2. <a href="#cci-config">&#37197;&#32622;CCI</a></dt><dd><dl><dt>21.2.1. <a href="#cci-config-connector">&#36830;&#25509;&#22120;&#37197;&#32622;</a></dt><dt>21.2.2. <a href="#cci-config-connectionfactory">&#22312;Spring&#20013;&#37197;&#32622;ConnectionFactory</a></dt><dt>21.2.3. <a href="#cci-config-cci-connections">&#37197;&#32622;CCI&#36830;&#25509;</a></dt><dt>21.2.4. <a href="#cci-config-single-connection">&#20351;&#29992;&#19968;&#20010; CCI &#21333;&#36830;&#25509;</a></dt></dl></dd><dt>21.3. <a href="#cci-using">&#20351;&#29992;Spring&#30340; CCI&#35775;&#38382;&#25903;&#25345;</a></dt><dd><dl><dt>21.3.1. <a href="#cci-record-creator">&#35760;&#24405;&#36716;&#25442;</a></dt><dt>21.3.2. <a href="#cci-using-template">CciTemplate&#31867;</a></dt><dt>21.3.3. <a href="#cci-using-dao">DAO&#25903;&#25345;</a></dt><dt>21.3.4. <a href="#automatic-output-generation">&#33258;&#21160;&#36755;&#20986;&#35760;&#24405;&#29983;&#25104;</a></dt><dt>21.3.5. <a href="#template-summary">&#24635;&#32467;</a></dt><dt>21.3.6. <a href="#cci-straight">&#30452;&#25509;&#20351;&#29992;&#19968;&#20010;CCI Connection&#25509;&#21475;&#21644;Interaction&#25509;&#21475;</a></dt><dt>21.3.7. <a href="#cci-template-example">CciTemplate &#20351;&#29992;&#31034;&#20363;</a></dt></dl></dd><dt>21.4. <a href="#cci-object">&#24314;&#27169;CCI&#35775;&#38382;&#20026;&#25805;&#20316;&#23545;&#35937;</a></dt><dd><dl><dt>21.4.1. <a href="#cci-object-mapping-record">MappingRecordOperation</a></dt><dt>21.4.2. <a href="#cci-object-mapping-comm-area">MappingCommAreaOperation</a></dt><dt>21.4.3. <a href="#cci-automatic-record-gen">&#33258;&#21160;&#29983;&#25104;&#36755;&#20986;&#35760;&#24405;</a></dt><dt>21.4.4. <a href="#cci-object-summary">&#24635;&#32467;</a></dt><dt>21.4.5. <a href="#cci-objects-mappring-record-example">MappingRecordOperation &#20351;&#29992;&#31034;&#20363;</a></dt><dt>21.4.6. <a href="#cci-objects-mapping-comm-area-example">MappingCommAreaOperation &#20351;&#29992;&#31034;&#20363;</a></dt></dl></dd><dt>21.5. <a href="#cci-tx">&#20107;&#21153;</a></dt></dl></dd><dt>22. <a href="#mail">Spring&#37038;&#20214;&#25277;&#35937;&#23618;</a></dt><dd><dl><dt>22.1. <a href="#mail-introduction">&#31616;&#20171;</a></dt><dt>22.2. <a href="#mail-usage">&#20351;&#29992;Spring&#37038;&#20214;&#25277;&#35937;</a></dt><dd><dl><dt>22.2.1. <a href="#mail-usage-simple">MailSender &#21644; SimpleMailMessage &#30340;&#22522;&#26412;&#29992;&#27861;</a></dt><dt>22.2.2. <a href="#mail-usage-mime">&#20351;&#29992; JavaMailSender &#21644; MimeMessagePreparator</a></dt></dl></dd><dt>22.3. <a href="#mail-javamail-mime">&#20351;&#29992;MimeMessageHelper</a></dt><dd><dl><dt>22.3.1. <a href="#mail-javamail-mime-attachments">&#21457;&#36865;&#38468;&#20214;&#21644;&#23884;&#20837;&#24335;&#36164;&#28304;(inline resources)</a></dt><dd><dl><dt>22.3.1.1. <a href="#mail-javamail-mime-attachments-attachment">&#38468;&#20214;</a></dt><dt>22.3.1.2. <a href="#mail-javamail-mime-attachments-inline">&#20869;&#23884;&#36164;&#28304;</a></dt></dl></dd><dt>22.3.2. <a href="#mail-templates">&#20351;&#29992;&#27169;&#26495;&#26469;&#21019;&#24314;&#37038;&#20214;&#20869;&#23481;</a></dt><dd><dl><dt>22.3.2.1. <a href="#mail-templates-example">&#19968;&#20010;&#22522;&#20110;Velocity&#30340;&#31034;&#20363;</a></dt></dl></dd></dl></dd></dl></dd><dt>23. <a href="#scheduling">Spring&#20013;&#30340;&#23450;&#26102;&#35843;&#24230;(Scheduling)&#21644;&#32447;&#31243;&#27744;(Thread Pooling)</a></dt><dd><dl><dt>23.1. <a href="#scheduling-introduction">&#31616;&#20171;</a></dt><dt>23.2. <a href="#scheduling-quartz">&#20351;&#29992;OpenSymphony Quartz &#35843;&#24230;&#22120;</a></dt><dd><dl><dt>23.2.1. <a href="#scheduling-quartz-jobdetail">&#20351;&#29992;JobDetailBean</a></dt><dt>23.2.2. <a href="#scheduling-quartz-method-invoking-job">&#20351;&#29992; MethodInvokingJobDetailFactoryBean</a></dt><dt>23.2.3. <a href="#scheduling-quartz-cron">&#20351;&#29992;triggers&#21644;SchedulerFactoryBean&#26469;&#21253;&#35013;&#20219;&#21153;</a></dt></dl></dd><dt>23.3. <a href="#scheduling-jdk-timer">&#20351;&#29992;JDK Timer&#25903;&#25345;&#31867;</a></dt><dd><dl><dt>23.3.1. <a href="#scheduling-jdk-timer-creating">&#21019;&#24314;&#23450;&#21046;&#30340;timers</a></dt><dt>23.3.2. <a href="#scheduling-jdk-timer-method-invoking-task">&#20351;&#29992; MethodInvokingTimerTaskFactoryBean&#31867;</a></dt><dt>23.3.3. <a href="#scheduling-jdk-timer-factory-bean">&#26368;&#21518;&#65306;&#20351;&#29992;TimerFactoryBean&#26469;&#35774;&#32622;&#20219;&#21153;</a></dt></dl></dd><dt>23.4. <a href="#scheduling-task-executor">SpringTaskExecutor&#25277;&#35937;</a></dt><dd><dl><dt>23.4.1. <a href="#scheduling-task-executor-interface">TaskExecutor&#25509;&#21475;</a></dt><dt>23.4.2. <a href="#scheduling-task-executor-types">TaskExecutor&#31867;&#22411;</a></dt><dt>23.4.3. <a href="#scheduling-task-executor-usage">&#20351;&#29992;TaskExecutor</a></dt></dl></dd></dl></dd><dt>24. <a href="#dynamic-language">&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;</a></dt><dd><dl><dt>24.1. <a href="#dynamic-language-introduction">&#20171;&#32461;</a></dt><dt>24.2. <a href="#dynamic-language-a-first-example">&#31532;&#19968;&#20010;&#31034;&#20363;</a></dt><dt>24.3. <a href="#dynamic-language-beans">&#23450;&#20041;&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;&#30340;bean</a></dt><dd><dl><dt>24.3.1. <a href="#dynamic-language-beans-concepts">&#20844;&#20849;&#27010;&#24565;</a></dt><dd><dl><dt>24.3.1.1. <a href="#dynamic-language-beans-concepts-xml-language-element">&lt;lang:language/&gt; &#20803;&#32032;</a></dt><dt>24.3.1.2. <a href="#dynamic-language-refreshable-beans">Refreshable bean</a></dt><dt>24.3.1.3. <a href="#dynamic-language-beans-inline">&#20869;&#32622;&#21160;&#24577;&#35821;&#35328;&#28304;&#25991;&#20214;</a></dt><dt>24.3.1.4. <a href="#dynamic-language-beans-ctor-injection">&#29702;&#35299;dynamic-language-backed bean&#19978;&#19979;&#25991;&#20013;&#30340;&#26500;&#36896;&#22120;&#27880;&#20837;</a></dt></dl></dd><dt>24.3.2. <a href="#dynamic-language-beans-jruby">JRuby beans</a></dt><dt>24.3.3. <a href="#dynamic-language-beans-groovy">Groovy beans</a></dt><dd><dl><dt>24.3.3.1. <a href="#dynamic-language-beans-groovy-customizer">&#36890;&#36807;&#22238;&#35843;&#23450;&#21046;Groovy&#23545;&#35937;</a></dt></dl></dd><dt>24.3.4. <a href="#dynamic-language-beans-bsh">BeanShell beans</a></dt></dl></dd><dt>24.4. <a href="#dynamic-language-scenarios">&#22330;&#26223;</a></dt><dd><dl><dt>24.4.1. <a href="#dynamic-language-scenarios-controllers">Spring MVC&#25511;&#21046;&#22120;&#30340;&#33050;&#26412;&#21270;</a></dt><dt>24.4.2. <a href="#dynamic-language-scenarios-validators">Validator&#30340;&#33050;&#26412;&#21270;</a></dt></dl></dd><dt>24.5. <a href="#dynamic-language-final-notes">Bits and bobs</a></dt><dd><dl><dt>24.5.1. <a href="#dynamic-language-final-notes-aop">AOP - &#36890;&#30693;&#33050;&#26412;&#21270;bean</a></dt><dt>24.5.2. <a href="#dynamic-language-final-notes-scopes">&#20316;&#29992;&#22495;</a></dt></dl></dd><dt>24.6. <a href="#dynamic-language-resources">&#26356;&#22810;&#30340;&#36164;&#28304;</a></dt></dl></dd><dt>25. <a href="#metadata">&#27880;&#35299;&#21644;&#28304;&#20195;&#30721;&#32423;&#30340;&#20803;&#25968;&#25454;&#25903;&#25345;</a></dt><dd><dl><dt>25.1. <a href="#metadata-introduction">&#31616;&#20171;</a></dt><dt>25.2. <a href="#metadata-spring">Spring&#30340;&#20803;&#25968;&#25454;&#25903;&#25345;</a></dt><dt>25.3. <a href="#metadata-annotations">&#27880;&#35299;</a></dt><dd><dl><dt>25.3.1. <a href="#metadata-annotations-required">@Required</a></dt><dt>25.3.2. <a href="#metadata-annotations-other">Spring&#20013;&#30340;&#20854;&#23427;@Annotations</a></dt></dl></dd><dt>25.4. <a href="#metadata-commons">Jakarta Commons Attributes&#38598;&#25104;</a></dt><dt>25.5. <a href="#metadata-uses">&#20803;&#25968;&#25454;&#21644;Spring AOP&#33258;&#21160;&#20195;&#29702;</a></dt><dd><dl><dt>25.5.1. <a href="#metadata-fundamentals">&#22522;&#26412;&#21407;&#29702;</a></dt><dt>25.5.2. <a href="#metadata-tx">&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;</a></dt></dl></dd></dl></dd></dl></dd><dt>V. <a href="#spring-samples">&#31034;&#20363;&#31243;&#24207;</a></dt><dd><dl><dt>26. <a href="#showcases">&#28436;&#31034;&#26696;&#20363;</a></dt><dd><dl><dt>26.1. <a href="#showcases-introduction">&#20171;&#32461;</a></dt><dt>26.2. <a href="#showcases-dynamvc">&#20351;&#29992;&#21160;&#24577;&#35821;&#35328;&#23454;&#29616;&#30340;Spring MVC&#25511;&#21046;&#22120;</a></dt><dd><dl><dt>26.2.1. <a href="#showcases-dynamvc-build">&#26500;&#24314;&#19982;&#37096;&#32626;</a></dt></dl></dd><dt>26.3. <a href="#showcases-java5-dao">&#20351;&#29992;SimpleJdbcTemplate&#21644;@Repository&#23454;&#29616;DAO</a></dt><dd><dl><dt>26.3.1. <a href="#showcases-java5-dao-the-domain">&#22495;&#23545;&#35937;</a></dt><dt>26.3.2. <a href="#showcases-java5-dao-the-daos">Data Access Object</a></dt><dt>26.3.3. <a href="#showcases-java5-dao-build">&#26500;&#24314;</a></dt></dl></dd></dl></dd></dl></dd><dt>A. <a href="#xsd-config">XML Schema-based configuration</a></dt><dd><dl><dt>A.1. <a href="#xsd-config-introduction">Introduction</a></dt><dt>A.2. <a href="#xsd-config-body">XML Schema-based configuration</a></dt><dd><dl><dt>A.2.1. <a href="#xsd-config-body-referencing">Referencing the schemas</a></dt><dt>A.2.2. <a href="#xsd-config-body-schemas-util">The util schema</a></dt><dd><dl><dt>A.2.2.1. <a href="#xsd-config-body-schemas-util-constant">&lt;util:constant/&gt;</a></dt><dt>A.2.2.2. <a href="#xsd-config-body-schemas-util-property-path">&lt;util:property-path/&gt;</a></dt><dt>A.2.2.3. <a href="#xsd-config-body-schemas-util-properties">&lt;util:properties/&gt;</a></dt><dt>A.2.2.4. <a href="#xsd-config-body-schemas-util-list">&lt;util:list/&gt;</a></dt><dt>A.2.2.5. <a href="#xsd-config-body-schemas-util-map">&lt;util:map/&gt;</a></dt><dt>A.2.2.6. <a href="#xsd-config-body-schemas-util-set">&lt;util:set/&gt;</a></dt></dl></dd><dt>A.2.3. <a href="#xsd-config-body-schemas-jee">The jee schema</a></dt><dd><dl><dt>A.2.3.1. <a href="#xsd-config-body-schemas-jee-jndi-lookup">&lt;jee:jndi-lookup/&gt; (simple)</a></dt><dt>A.2.3.2. <a href="#xsd-config-body-schemas-jee-jndi-lookup-environment-single">&lt;jee:jndi-lookup/&gt; (with single JNDI environment setting)</a></dt><dt>A.2.3.3. <a href="#xsd-config-body-schemas-jee-jndi-lookup-evironment-multiple">&lt;jee:jndi-lookup/&gt; (with multiple JNDI environment settings)</a></dt><dt>A.2.3.4. <a href="#xsd-config-body-schemas-jee-jndi-lookup-complex">&lt;jee:jndi-lookup/&gt; (complex)</a></dt><dt>A.2.3.5. <a href="#xsd-config-body-schemas-jee-local-slsb">&lt;jee:local-slsb/&gt; (simple)</a></dt><dt>A.2.3.6. <a href="#xsd-config-body-schemas-jee-local-slsb-complex">&lt;jee:local-slsb/&gt; (complex)</a></dt><dt>A.2.3.7. <a href="#xsd-config-body-schemas-jee-remote-slsb">&lt;jee:remote-slsb/&gt;</a></dt></dl></dd><dt>A.2.4. <a href="#xsd-config-body-schemas-lang">The lang schema</a></dt><dt>A.2.5. <a href="#xsd-config-body-schemas-jms">The jms schema</a></dt><dt>A.2.6. <a href="#xsd-config-body-schemas-tx">The tx (transaction) schema</a></dt><dt>A.2.7. <a href="#xsd-config-body-schemas-aop">The aop schema</a></dt><dt>A.2.8. <a href="#xsd-config-body-schemas-context">The context schema</a></dt><dd><dl><dt>A.2.8.1. <a href="#xsd-config-body-schemas-context-pphc">&lt;property-placeholder/&gt;</a></dt><dt>A.2.8.2. <a href="#xsd-config-body-schemas-context-ac">&lt;annotation-config/&gt;</a></dt><dt>A.2.8.3. <a href="#xsd-config-body-schemas-context-component-scan">&lt;component-scan/&gt;</a></dt><dt>A.2.8.4. <a href="#xsd-config-body-schemas-context-ltw">&lt;load-time-weaver/&gt;</a></dt><dt>A.2.8.5. <a href="#xsd-config-body-schemas-context-sc">&lt;spring-configured/&gt;</a></dt><dt>A.2.8.6. <a href="#xsd-config-body-schemas-context-mbe">&lt;mbean-export/&gt;</a></dt></dl></dd><dt>A.2.9. <a href="#xsd-config-body-schemas-tool">The tool schema</a></dt><dt>A.2.10. <a href="#xsd-config-body-schemas-beans">The beans schema</a></dt></dl></dd><dt>A.3. <a href="#xsd-config-setup">Setting up your IDE</a></dt><dd><dl><dt>A.3.1. <a href="#xsd-config-setup-eclipse">Setting up Eclipse</a></dt><dt>A.3.2. <a href="#xsd-config-setup-idea">Setting up IntelliJ IDEA</a></dt><dt>A.3.3. <a href="#xsd-config-integration">Integration issues</a></dt><dd><dl><dt>A.3.3.1. <a href="#xsd-config-integration-resin">XML parsing errors in the Resin v.3 application server</a></dt></dl></dd></dl></dd></dl></dd><dt>B. <a href="#extensible-xml">Extensible XML authoring</a></dt><dd><dl><dt>B.1. <a href="#extensible-xml-introduction">Introduction</a></dt><dt>B.2. <a href="#extensible-xml-schema">Authoring the schema</a></dt><dt>B.3. <a href="#extensible-xml-namespacehandler">Coding a NamespaceHandler</a></dt><dt>B.4. <a href="#extensible-xml-parser">Coding a BeanDefinitionParser</a></dt><dt>B.5. <a href="#extensible-xml-registration">Registering the handler and the schema</a></dt><dd><dl><dt>B.5.1. <a href="#extensible-xml-registration-spring-handlers">'META-INF/spring.handlers'</a></dt><dt>B.5.2. <a href="#extensible-xml-registration-spring-schemas">'META-INF/spring.schemas'</a></dt></dl></dd><dt>B.6. <a href="#extensible-xml-using">Using a custom extension in your Spring XML configuration</a></dt><dt>B.7. <a href="#extensible-xml-meat">Meatier examples</a></dt><dd><dl><dt>B.7.1. <a href="#extensible-xml-custom-nested">Nesting custom tags within custom tags</a></dt><dt>B.7.2. <a href="#extensible-xml-custom-just-attributes">Custom attributes on 'normal' elements</a></dt></dl></dd><dt>B.8. <a href="#extensible-xml-resources">Further Resources</a></dt></dl></dd><dt>C. <a href="#springbeansdtd">spring-beans-2.0.dtd</a></dt><dt>D. <a href="#spring.tld">spring.tld</a></dt><dd><dl><dt>D.1. <a href="#spring.tld-intro">Introduction</a></dt><dt>D.2. <a href="#spring.tld.bind">The bind tag</a></dt><dt>D.3. <a href="#spring.tld.escapeBody">The escapeBody tag</a></dt><dt>D.4. <a href="#spring.tld.hasBindErrors">The hasBindErrors tag</a></dt><dt>D.5. <a href="#spring.tld.htmlEscape">The htmlEscape tag</a></dt><dt>D.6. <a href="#spring.tld.message">The message tag</a></dt><dt>D.7. <a href="#spring.tld.nestedPath">The nestedPath tag</a></dt><dt>D.8. <a href="#spring.tld.theme">The theme tag</a></dt><dt>D.9. <a href="#spring.tld.transform">The transform tag</a></dt></dl></dd><dt>E. <a href="#spring-form.tld">spring-form.tld</a></dt><dd><dl><dt>E.1. <a href="#spring-form.tld-intro">Introduction</a></dt><dt>E.2. <a href="#spring-form.tld.checkbox">The checkbox tag</a></dt><dt>E.3. <a href="#spring-form.tld.checkboxes">The checkboxes tag</a></dt><dt>E.4. <a href="#spring-form.tld.errors">The errors tag</a></dt><dt>E.5. <a href="#spring-form.tld.form">The form tag</a></dt><dt>E.6. <a href="#spring-form.tld.hidden">The hidden tag</a></dt><dt>E.7. <a href="#spring-form.tld.input">The input tag</a></dt><dt>E.8. <a href="#spring-form.tld.label">The label tag</a></dt><dt>E.9. <a href="#spring-form.tld.option">The option tag</a></dt><dt>E.10. <a href="#spring-form.tld.options">The options tag</a></dt><dt>E.11. <a href="#spring-form.tld.password">The password tag</a></dt><dt>E.12. <a href="#spring-form.tld.radiobutton">The radiobutton tag</a></dt><dt>E.13. <a href="#spring-form.tld.radiobuttons">The radiobuttons tag</a></dt><dt>E.14. <a href="#spring-form.tld.select">The select tag</a></dt><dt>E.15. <a href="#spring-form.tld.textarea">The textarea tag</a></dt></dl></dd><dt>F. <a href="#translator">Spring 2.5&#24320;&#21457;&#25163;&#20876;&#20013;&#25991;&#21270;&#39033;&#30446;</a></dt><dd><dl><dt>F.1. <a href="#d0e44906">&#22768;&#26126;</a></dt><dt>F.2. <a href="#d0e44917">&#33268;&#35874;</a></dt><dt>F.3. <a href="#d0e44922">&#21442;&#19982;&#20154;&#21592;</a></dt><dt>F.4. <a href="#d0e45081">&#39033;&#30446;&#21382;&#31243;</a></dt></dl></dd></dl></div><div class="preface" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="preface"></a>&#21069;&#35328;</h2></div></div><div></div></div><p>&#21363;&#20351;&#26377;&#22909;&#24037;&#20855;&#21644;&#22909;&#25216;&#26415;&#65292;&#24320;&#21457;&#36719;&#20214;&#20173;&#28982;&#26159;&#27604;&#36739;&#22256;&#38590;&#30340;&#12290;&#26377;&#19968;&#20123;&#24179;&#21488;&#65292;&#23427;&#20204;&#21253;&#25171;&#22825;&#19979;&#65292;
  &#20294;&#23454;&#38469;&#19978;&#24456;&#27785;&#37325;&#12289;&#38590;&#20197;&#25511;&#21046;&#65292;&#22312;&#24320;&#21457;&#36807;&#31243;&#20013;&#25928;&#29575;&#19981;&#39640;&#65292;&#21364;&#35753;&#24320;&#21457;&#36719;&#20214;&#21464;&#24471;&#26356;&#21152;&#22256;&#38590;&#12290;
  Spring&#20026;&#32534;&#20889;&#20225;&#19994;&#24212;&#29992;&#31243;&#24207;&#25552;&#20379;&#20102;&#36731;&#37327;&#30340;&#35299;&#20915;&#26041;&#26696;&#65292;&#21516;&#26102;&#20173;&#28982;&#25903;&#25345;&#20351;&#29992;&#22768;&#26126;&#24335;&#20107;&#21153;&#12289;
  &#29992;RMI&#25110;web service&#36828;&#31243;&#35843;&#29992;&#12289;&#20197;&#21450;&#20351;&#29992;&#22810;&#31181;&#26041;&#24335;&#26469;&#23558;&#25968;&#25454;&#25345;&#20037;&#21270;&#21040;&#25968;&#25454;&#24211;&#12290;Spring&#25552;&#20379;&#20102;&#20840;&#21151;&#33021;&#30340;
  <a href="#mvc-introduction" title="13.1.&nbsp;&#27010;&#36848;">MVC framework</a>&#65292;
  &#20197;&#21450;&#36879;&#26126;&#38598;&#25104;<a href="#aop-introduction" title="6.1.&nbsp;&#31616;&#20171;">AOP</a>&#21040;&#20320;&#30340;&#36719;&#20214;&#20013;&#30340;&#33021;&#21147;&#12290;</p><p>Spring&#21487;&#33021;&#26159;&#20320;&#30340;&#20225;&#19994;&#24212;&#29992;&#31243;&#24207;&#25152;&#38656;&#35201;&#30340;&#19968;&#31449;&#24335;&#35299;&#20915;&#26041;&#26696;&#65292;
  &#20294;Spring&#20173;&#28982;&#26159;&#27169;&#22359;&#21270;&#30340;&#65292;&#20801;&#35768;&#20320;&#21482;&#20351;&#29992;&#20320;&#25152;&#38656;&#30340;&#21738;&#20123;&#37096;&#20998;&#65292;&#32780;&#26080;&#38656;&#38468;&#21152;&#19978;&#20854;&#20182;&#37096;&#20998;&#12290;
  &#20320;&#21487;&#20197;&#20351;&#29992; IoC&#23481;&#22120;&#65292;&#22312;&#20854;&#19978;&#20351;&#29992;Struts&#65292;&#20294;&#26159;&#20320;&#20063;&#21487;&#20197;&#36873;&#25321;&#20351;&#29992;
  <a href="#orm-hibernate" title="12.2.&nbsp;Hibernate">Hibernate &#25972;&#21512;&#20195;&#30721;</a>&#25110;&#32773;
  <a href="#jdbc-introduction" title="11.1.&nbsp;&#31616;&#20171;">JDBC &#25277;&#35937;&#23618;</a>&#12290;
  &#25105;&#20204;&#23558;Spring&#35774;&#35745;&#20026;&#38750;&#20405;&#20837;&#24335;&#30340;&#65288;&#24182;&#19988;&#20197;&#21518;&#20063;&#26159;&#22914;&#27492;&#65289;&#65292;&#36825;&#24847;&#21619;&#30528;&#24212;&#29992;&#22522;&#26412;&#19978;&#19981;&#38656;&#35201;&#20381;&#36182;&#26694;&#26550;&#26412;&#36523;
  &#65288;&#25110;&#32773;&#32943;&#23450;&#26159;&#26368;&#23567;&#30340;&#65292;&#21462;&#20915;&#20110;&#25152;&#20351;&#29992;&#30340;&#37096;&#20998;&#65289;&#12290;
  </p><p>&#36825;&#20221;&#25163;&#20876;&#25552;&#20379;Spring&#30340;&#21151;&#33021;&#21442;&#32771;&#25351;&#21335;&#12290;&#30001;&#20110;&#26412;&#25991;&#26723;&#20063;&#38656;&#35201;&#22823;&#37327;&#30340;&#24037;&#20316;&#65292;&#22914;&#26524;&#20320;&#26377;&#20219;&#20309;&#35201;&#27714;&#25110;&#32773;&#24847;&#35265;&#65292;
  &#35831;&#21457;&#36865;&#21040;&#29992;&#25143;&#37038;&#20214;&#21015;&#34920;&#65292;&#25110;&#32773;&#25552;&#20132;&#21040;<a href="http://forum.springframework.org/" target="_top">http://forum.springframework.org/</a>&#25903;&#25345;&#35770;&#22363;&#12290;</p><p>&#21478;&#22806;&#65292;&#24517;&#39035;&#24863;&#35874;Christian Bauer(&#26469;&#33258;<a href="http://www.hibernate.org/" target="_top">Hibernate</a>&#22242;&#38431;)
  &#65292;&#20182;&#25913;&#20889;&#20102;DocBook-XSL&#36719;&#20214;&#26469;&#21019;&#24314;Hibernate&#21442;&#32771;&#25163;&#20876;&#65292;&#25105;&#20204;&#25165;&#24471;&#20197;&#21019;&#24314;&#36825;&#20221;&#25991;&#26723;&#12290;
  &#20063;&#38656;&#35201;&#24863;&#35874;Russell Healy&#20026;&#26412;&#25163;&#20876;&#30340;&#37096;&#20998;&#20869;&#23481;&#36827;&#34892;&#30340;&#35814;&#32454;&#32780;&#26497;&#23500;&#20215;&#20540;&#30340;&#23457;&#26680;&#12290;</p></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="introduction"></a>Chapter&nbsp;1.&nbsp;&#31616;&#20171;</h2></div></div><div></div></div><div class="sidebar"><a name="background-ioc"></a><p class="title"><b>&#32972;&#26223;</b></p><p>&#26089;&#22312;2004&#24180;&#21021;&#65292;Martin Fowler&#22312;&#20182;&#30340;&#31449;&#28857;&#19978;&#38382;&#35835;&#32773;&#65306;&#24403;&#35848;&#35770;&#25511;&#21046;&#21453;&#36716;&#26102;&#65306;
		&#8220;<span class="quote"><span class="emphasis"><em>&#38382;&#39064;&#22312;&#20110;&#65292;&#23427;&#20204;&#36716;&#21464;&#30340;&#26159;&#20160;&#20040;&#26041;&#38754;&#30340;&#25511;&#21046;&#65311;</em></span></span>&#8221;&#12290;
		Fowler&#24314;&#35758;&#37325;&#21629;&#21517;&#35813;&#21407;&#21017;&#65288;&#25110;&#33267;&#23569;&#32473;&#23427;&#19968;&#20010;&#26356;&#21152;&#26126;&#30830;&#30340;&#21517;&#31216;&#65289;&#65292;&#24182;&#24320;&#22987;&#20351;&#29992; <i class="firstterm">&#20381;&#36182;&#27880;&#20837;</i>&#36825;&#20010;&#26415;&#35821;&#12290;
		&#24182;&#19988;&#65292;&#22312;&#20182;&#30340;&#25991;&#31456;&#20013;&#36827;&#19968;&#27493;&#35299;&#37322;&#20102;&#25511;&#21046;&#21453;&#36716;&#65288;<span class="acronym">IoC</span>&#65289;&#21644;&#20381;&#36182;&#27880;&#20837;&#65288;<span class="acronym">DI</span>&#65289;&#30340;&#21407;&#21017;&#24605;&#24819;&#12290;</p><p>&#22914;&#26524;&#24744;&#24819;&#23545;&#25511;&#21046;&#21453;&#36716;&#21644;&#20381;&#36182;&#27880;&#20837;&#26377;&#26356;&#28145;&#20837;&#30340;&#29702;&#35299;&#65292;&#35831;&#21442;&#38405;&#19978;&#36848;&#25991;&#31456;&#65306;<a href="http://martinfowler.com/articles/injection.html" target="_top">http://martinfowler.com/articles/injection.html</a>&#12290;</p></div><p>Java&#24212;&#29992;&#65288;&#20174;applets&#30340;&#23567;&#33539;&#22260;&#21040;&#20840;&#22871;n&#23618;&#26381;&#21153;&#31471;&#20225;&#19994;&#24212;&#29992;&#65289;&#26159;&#19968;&#31181;&#20856;&#22411;&#30340;&#20381;&#36182;&#22411;&#24212;&#29992;&#65292;&#23427;&#23601;&#26159;&#30001;&#19968;&#20123;&#20114;&#30456;&#36866;&#24403;&#22320;&#21327;&#20316;&#30340;&#23545;&#35937;&#26500;&#25104;&#30340;&#12290;&#22240;&#27492;&#65292;&#25105;&#20204;&#35828;&#36825;&#20123;&#23545;&#35937;&#38388;&#23384;&#22312;<span class="emphasis"><em>&#20381;&#36182;&#20851;&#31995;</em></span>&#12290;</p><p>Java
&#35821;&#35328;&#21644;java&#24179;&#21488;&#22312;&#26550;&#26500;&#24212;&#29992;&#19982;&#24314;&#31435;&#24212;&#29992;&#26041;&#38754;&#65292;&#25552;&#20379;&#30528;&#20016;&#23500;&#30340;&#21151;&#33021;&#12290;&#20174;&#38750;&#24120;&#22522;&#30784;&#30340;&#22522;&#26412;&#25968;&#25454;&#31867;&#22411;&#21644;Class&#65288;&#21363;&#23450;&#20041;&#26032;&#31867;&#65289;&#32452;&#25104;&#30340;&#31243;&#24207;&#22359;&#65292;&#21040;&#24314;&#31435;&#20855;&#26377;&#20016;&#23500;&#30340;&#29305;
&#24615;&#30340;&#24212;&#29992;&#26381;&#21153;&#22120;&#21644;web&#26694;&#26550;&#37117;&#26377;&#30528;&#24456;&#22810;&#30340;&#26041;&#27861;&#12290;&#19968;&#26041;&#38754;&#65292;&#21487;&#20197;&#36890;&#36807;&#25277;&#35937;&#30340;&#26174;&#33879;&#29305;&#24615;&#35753;&#22522;&#30784;&#30340;&#31243;&#24207;&#22359;&#32452;&#25104;&#22312;&#19968;&#36215;&#25104;&#20026;&#19968;&#20010;&#36830;&#36143;&#30340;&#25972;&#20307;&#12290;&#36825;&#26679;&#65292;&#26500;&#24314;&#19968;&#20010;&#24212;&#29992;&#65288;&#25110;&#32773;&#22810;
&#20010;&#24212;&#29992;&#65289;&#30340;&#24037;&#20316;&#23601;&#21487;&#20197;&#20132;&#32473;&#26550;&#26500;&#24072;&#25110;&#32773;&#24320;&#21457;&#20154;&#21592;&#21435;&#20570;&#12290;&#22240;&#27492;&#65292;&#25105;&#20204;&#23601;&#21487;&#20197;&#28165;&#26224;&#30340;&#30693;&#36947;&#21738;&#20123;&#19994;&#21153;&#38656;&#35201;&#21738;&#20123;Classes&#21644;&#23545;&#35937;&#32452;&#25104;&#65292;&#21738;&#20123;&#35774;&#35745;&#27169;&#24335;&#21487;&#20197;&#24212;&#29992;&#22312;&#21738;&#20123;&#19994;
&#21153;&#19978;&#38754;&#12290; &#20363;&#22914;&#65306;<i class="firstterm">Factory</i>&#12289;<i class="firstterm">Abstract Factory</i>&#12289;<i class="firstterm">Builder</i>&#12289;<i class="firstterm">Decorator</i> &#21644; <i class="firstterm">Service Locator</i> &#36825;&#20123;&#27169;&#24335;&#65288;&#21015;&#20030;&#30340;&#21482;&#26159;&#23569;&#25968;&#65289;&#22312;&#36719;&#20214;&#24320;&#21457;&#34892;&#19994;&#34987;&#26222;&#36941;&#35748;&#21487;&#21644;&#32943;&#23450;&#65288;&#25110;&#35768;&#36825;&#23601;&#26159;&#20026;&#20160;&#20040;&#36825;&#20123;&#27169;&#24335;&#34987;&#23450;&#22411;&#30340;&#21407;&#22240;&#65289;&#12290;
		&#36825;&#22266;&#28982;&#26159;&#20214;&#22909;&#20107;&#65292;&#19981;&#36807;&#36825;&#20123;&#27169;&#24335;&#21482;&#26159;&#19968;&#20010;&#26377;&#21517;&#23383;&#30340;&#65292;&#26377;&#35828;&#26126;&#30340;&#65292;&#30693;&#36947;&#26368;&#22909;&#29992;&#22312;&#20160;&#20040;&#22320;&#26041;&#30340;&#65292;&#35299;&#20915;&#24212;&#29992;&#20013;&#20160;&#20040;&#38382;&#39064;&#30340;&#26368;&#20339;&#23454;&#36341;&#32780;&#24050;&#12290;
		&#22312;&#26412;&#31456;&#33410;&#30340;&#26368;&#21518;&#65292;&#29992;&#8220;<span class="quote">... <span class="emphasis"><em>&#35828;&#26126;</em></span> ...</span>&#8221;&#32473;&#20986;&#20102;&#27169;&#24335;&#35828;&#26126;&#12290;
		&#36890;&#24120;&#65292;&#27169;&#24335;&#20070;&#31821;&#19982;wikis&#36890;&#24120;&#37117;&#21015;&#20986;&#20102;&#20320;&#21487;&#20197;&#33719;&#24471;&#30340;&#26368;&#20339;&#23454;&#36341;&#65292;&#19981;&#36807;&#65292;&#24076;&#26395;&#20320;&#24605;&#32771;&#20043;&#21518;&#65292;&#22312;&#20320;&#33258;&#24049;&#30340;&#24212;&#29992;&#20013; <span class="emphasis"><em>&#23454;&#29616;&#33258;&#24049;&#30340;&#27169;&#24335;</em></span>&#12290;</p><p>Spring
&#30340;IoC&#25511;&#20214;&#20027;&#35201;&#19987;&#27880;&#20110;&#22914;&#20309;&#21033;&#29992;classes&#12289;&#23545;&#35937;&#21644;&#26381;&#21153;&#21435;&#32452;&#25104;&#19968;&#20010;&#20225;&#19994;&#32423;&#24212;&#29992;&#65292;&#36890;&#36807;&#35268;&#33539;&#30340;&#26041;&#24335;&#65292;&#23558;&#21508;&#31181;&#19981;&#21516;&#30340;&#25511;&#20214;&#25972;&#21512;&#25104;&#19968;&#20010;&#23436;&#25972;&#30340;&#24212;&#29992;&#12290;Spring
&#20013;&#20351;&#29992;&#20102;&#24456;&#22810;&#34987;&#23454;&#36341;&#35777;&#26126;&#30340;&#26368;&#20339;&#23454;&#36341;&#21644;&#27491;&#35268;&#30340;&#35774;&#35745;&#27169;&#24335;&#65292;&#24182;&#19988;&#36827;&#34892;&#20102;&#32534;&#30721;&#23454;&#29616;&#12290;&#22914;&#26524;&#20320;&#26159;&#19968;&#20010;&#65292;&#26500;&#26550;&#24072;&#25110;&#32773;&#24320;&#21457;&#20154;&#21592;&#23436;&#20840;&#21487;&#20197;&#21462;&#20986;&#23427;&#20204;&#38598;&#25104;&#21040;&#20320;&#33258;&#24049;&#30340;&#24212;&#29992;&#20043;&#20013;&#12290;&#36825;
&#23545;&#20110;&#37027;&#20123;&#20351;&#29992;&#20102;Spring
Framework&#30340;&#32452;&#32455;&#21644;&#26426;&#26500;&#26469;&#35828;&#65292;&#22312;spring&#22522;&#30784;&#19978;&#23454;&#29616;&#24212;&#29992;&#19981;&#20165;&#21487;&#20197;&#26500;&#24314;&#20248;&#31168;&#30340;&#65292;&#21487;&#32500;&#25252;&#30340;&#24212;&#29992;&#24182;&#23545;Spring&#30340;&#35774;&#35745;&#36827;&#34892;&#39564;&#35777;&#65292;<i class="firstterm">&#30830;&#23454;&#26159;&#19968;&#20214;&#22909;&#20107;&#24773;</i>&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="introduction-overview"></a>1.1.&nbsp;&#27010;&#35272;</h2></div></div><div></div></div><p>Spring&#26694;&#26550;&#21253;&#21547;&#35768;&#22810;&#29305;&#24615;&#65292;&#24182;&#34987;&#24456;&#22909;&#22320;&#32452;&#32455;&#22312;&#19979;&#22270;&#25152;&#31034;&#30340;&#20845;&#20010;&#27169;&#22359;&#20013;&#12290;&#26412;&#33410;&#23558;&#20381;&#27425;&#20171;&#32461;&#27599;&#20010;&#27169;&#22359;&#12290;</p><div class="mediaobject" align="center"><img src="spring-overview.png" align="middle"><div class="caption"><p>Spring&#26694;&#26550;&#27010;&#36848;</p></div></div><p><span class="emphasis"><em>Core</em></span> &#23553;&#35013;&#21253;&#26159;&#26694;&#26550;&#30340;&#26368;&#22522;&#30784;&#37096;&#20998;&#65292;&#25552;&#20379;IoC&#21644;&#20381;&#36182;&#27880;&#20837;&#29305;&#24615;&#12290;&#36825;&#37324;&#30340;&#22522;&#30784;&#27010;&#24565;&#26159;<tt class="classname">BeanFactory</tt>&#65292;&#23427;&#25552;&#20379;&#23545;Factory&#27169;&#24335;&#30340;&#32463;&#20856;&#23454;&#29616;&#26469;&#28040;&#38500;&#23545;&#31243;&#24207;&#24615;&#21333;&#20363;&#27169;&#24335;&#30340;&#38656;&#35201;&#65292;&#24182;&#30495;&#27491;&#22320;&#20801;&#35768;&#20320;&#20174;&#31243;&#24207;&#36923;&#36753;&#20013;&#20998;&#31163;&#20986;&#20381;&#36182;&#20851;&#31995;&#21644;&#37197;&#32622;&#12290;</p><p><a href="#context-introduction" title="3.8.&nbsp;The ApplicationContext"><span class="emphasis"><em>Context(&#19978;&#19979;&#25991;)</em></span></a> &#23553;&#35013;&#21253;&#26500;&#31569;&#20110;<a href="#beans-introduction" title="3.1.&nbsp;&#31616;&#20171;"><span class="emphasis"><em>Core</em></span></a>&#23553;
&#35013;&#21253;&#30340;&#22362;&#22266;&#22522;&#30784;&#19978;:&#23427;&#25552;&#20379;&#20102;&#29992;&#19968;&#31181;&#26694;&#26550;&#39118;&#26684;&#30340;&#26041;&#24335;&#26469;&#35775;&#38382;&#23545;&#35937;&#65292;&#26377;&#20123;&#20687;JNDI&#27880;&#20876;&#34920;&#12290;Context&#23553;&#35013;&#21253;&#32487;&#25215;&#20102;beans&#21253;&#30340;&#21151;&#33021;&#65292;&#36824;&#22686;&#21152;&#20102;&#22269;&#38469;&#21270;
&#65288;I18N&#65289;&#65288;&#29992;&#20110;&#35268;&#33539;resource bundle&#65289;,&#20107;&#20214;&#20256;&#25773;&#65292;&#36164;&#28304;&#35013;&#36733;&#65292;&#20197;&#21450;&#36879;&#26126;&#21019;&#24314;&#19978;&#19979;&#25991;&#65292;&#20363;&#22914;&#36890;&#36807;servlet&#23481;&#22120;&#12290;</p><p><a href="#dao-introduction" title="10.1.&nbsp;&#31616;&#20171;"><span class="emphasis"><em>DAO</em></span></a> &#25552;&#20379;&#20102;JDBC&#30340;&#25277;&#35937;&#23618;&#65292;&#23427;&#21487;&#28040;&#38500;&#20887;&#38271;&#30340;JDBC&#32534;&#30721;&#21644;&#35299;&#26512;&#25968;&#25454;&#24211;&#21378;&#21830;&#29305;&#26377;&#30340;&#38169;&#35823;&#20195;&#30721;&#12290;
		&#24182;&#19988;&#65292;<a href="#jdbc-introduction" title="11.1.&nbsp;&#31616;&#20171;">JDBC</a> &#23553;&#35013;&#21253;&#36824;&#25552;&#20379;&#20102;&#19968;&#31181;&#27604;&#32534;&#31243;&#24615;&#26356;&#22909;&#30340;&#22768;&#26126;&#24615;&#20107;&#21153;&#31649;&#29702;&#26041;&#27861;&#65292;&#19981;&#20165;&#20165;&#26159;&#23454;&#29616;&#20102;&#29305;&#23450;&#25509;&#21475;&#65292;&#32780;&#19988;&#23545;<span class="emphasis"><em>&#25152;&#26377;&#30340;POJOs&#65288;plain old Java objects&#65289;</em></span>&#37117;&#36866;&#29992;&#12290;
		</p><p><a href="#orm-introduction" title="12.1.&nbsp;&#31616;&#20171;"><span class="emphasis"><em>ORM</em></span></a> &#23553;&#35013;&#21253;&#25552;&#20379;&#20102;&#24120;&#29992;&#30340;&#8220;&#23545;&#35937;/&#20851;&#31995;&#8221;&#26144;&#23556;APIs&#30340;&#38598;&#25104;&#23618;&#12290;
		&#20854;&#20013;&#21253;&#25324;<a href="#orm-jpa" title="12.6.&nbsp;JPA">JPA</a>&#12289;<a href="#orm-jdo" title="12.3.&nbsp;JDO">JDO</a>&#12289;<a href="#orm-hibernate" title="12.2.&nbsp;Hibernate">Hibernate</a> &#21644; <a href="#orm-ibatis" title="12.5.&nbsp;iBATIS SQL Maps">iBatis</a> &#12290;&#21033;&#29992;ORM&#23553;&#35013;&#21253;&#65292;&#21487;&#20197;&#28151;&#21512;&#20351;&#29992;&#25152;&#26377;Spring&#25552;&#20379;&#30340;&#29305;&#24615;&#36827;&#34892;&#8220;&#23545;&#35937;/&#20851;&#31995;&#8221;&#26144;&#23556;&#65292;&#22914;&#21069;&#36793;&#25552;&#21040;&#30340;&#31616;&#21333;&#22768;&#26126;&#24615;&#20107;&#21153;&#31649;&#29702;&#12290;</p><p>Spring&#30340; <a href="#aop-introduction" title="6.1.&nbsp;&#31616;&#20171;"><span class="emphasis"><em>AOP</em></span></a> &#23553;&#35013;&#21253;&#25552;&#20379;&#20102;&#31526;&#21512; <span class="emphasis"><em>AOP Alliance</em></span>&#35268;
&#33539;&#30340;&#38754;&#21521;&#26041;&#38754;&#30340;&#32534;&#31243;&#65288;aspect-oriented
programming&#65289;&#23454;&#29616;&#65292;&#35753;&#20320;&#21487;&#20197;&#23450;&#20041;&#65292;&#20363;&#22914;&#26041;&#27861;&#25318;&#25130;&#22120;&#65288;method-interceptors&#65289;&#21644;&#20999;&#28857;&#65288;pointcuts&#65289;&#65292;&#20174;&#36923;&#36753;&#19978;&#35762;&#65292;&#20174;
&#32780;&#20943;&#24369;&#20195;&#30721;&#30340;&#21151;&#33021;&#32806;&#21512;&#65292;&#28165;&#26224;&#30340;&#34987;&#20998;&#31163;&#24320;&#12290;&#32780;&#19988;&#65292;&#21033;&#29992;source-level&#30340;&#20803;&#25968;&#25454;&#21151;&#33021;&#65292;&#36824;&#21487;&#20197;&#23558;&#21508;&#31181;&#34892;&#20026;&#20449;&#24687;&#21512;&#24182;&#21040;&#20320;&#30340;&#20195;&#30721;&#20013;&#65292;&#36825;&#26377;&#28857;&#35937;.Net&#30340;
attribute&#30340;&#27010;&#24565;&#12290;</p><p>Spring&#20013;&#30340; <span class="emphasis"><em>Web</em></span>
&#21253;&#25552;&#20379;&#20102;&#22522;&#30784;&#30340;&#38024;&#23545;Web&#24320;&#21457;&#30340;&#38598;&#25104;&#29305;&#24615;&#65292;&#20363;&#22914;&#22810;&#26041;&#25991;&#20214;&#19978;&#20256;&#65292;&#21033;&#29992;Servlet
listeners&#36827;&#34892;IoC&#23481;&#22120;&#21021;&#22987;&#21270;&#21644;&#38024;&#23545;Web&#30340;application
context&#12290;&#24403;&#19982;WebWork&#25110;Struts&#19968;&#36215;&#20351;&#29992;Spring&#26102;&#65292;&#36825;&#20010;&#21253;&#20351;Spring&#21487;&#19982;&#20854;&#20182;&#26694;&#26550;&#32467;&#21512;&#12290;</p><p>Spring&#20013;&#30340; <a href="#mvc-introduction" title="13.1.&nbsp;&#27010;&#36848;"><span class="emphasis"><em>MVC</em></span></a> &#23553;&#35013;&#21253;&#25552;&#20379;&#20102;Web&#24212;&#29992;&#30340;Model-View-Controller&#65288;MVC&#65289;&#23454;&#29616;&#12290;Spring&#30340;MVC&#26694;&#26550;&#24182;&#19981;&#26159;&#20165;&#20165;&#25552;&#20379;&#19968;&#31181;&#20256;&#32479;&#30340;&#23454;&#29616;&#65292;&#23427;&#25552;&#20379;&#20102;&#19968;&#31181; <span class="emphasis"><em>&#28165;&#26224;&#30340;</em></span> &#20998;&#31163;&#27169;&#22411;&#65292;&#22312;&#39046;&#22495;&#27169;&#22411;&#20195;&#30721;&#21644;web form&#20043;&#38388;&#12290;&#24182;&#19988;&#65292;&#36824;&#21487;&#20197;&#20511;&#21161;Spring&#26694;&#26550;&#30340;&#20854;&#20182;&#29305;&#24615;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="overview-usagescenarios"></a>1.1.1.&nbsp;&#20351;&#29992;&#22330;&#26223;</h3></div></div><div></div></div><p>&#20511;&#21161;&#25645;&#31215;&#26408;&#26041;&#24335;&#26469;&#35299;&#37322;&#19968;&#19979;&#21508;&#31181;&#24773;&#26223;&#19979;&#20351;&#29992;Spring&#30340;&#24773;&#20917;&#65292;&#20174;&#31616;&#21333;&#30340;Applet&#19968;&#30452;&#21040;&#23436;&#25972;&#30340;&#20351;&#29992;Spring&#30340;&#20107;&#21153;&#31649;&#29702;&#21151;&#33021;&#21644;Web&#26694;&#26550;&#30340;&#20225;&#19994;&#24212;&#29992;&#12290;</p><div class="mediaobject" align="center"><img src="full.gif" align="middle"><div class="caption"><p>&#20856;&#22411;&#30340;&#23436;&#25972;Spring Web&#24212;&#29992;</p></div></div><p>&#36890;&#36807;&#29992;Spring&#30340; <a href="#transaction-declarative" title="9.5.&nbsp;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;">&#22768;&#26126;&#20107;&#21153;&#31649;&#29702;&#29305;&#24615;</a>&#65292;Web&#24212;&#29992;&#21487;&#20197;&#20570;&#21040;&#23436;&#20840;&#20107;&#21153;&#24615;&#65292;&#23601;&#20687;&#20351;&#29992;EJB&#25552;&#20379;&#30340;&#37027;&#31181;&#23481;&#22120;&#31649;&#29702;&#30340;&#20107;&#21153;&#19968;&#26679;&#12290;
			&#25152;&#26377;&#33258;&#23450;&#20041;&#30340;&#19994;&#21153;&#36923;&#36753;&#21487;&#20197;&#36890;&#36807;&#31616;&#21333;&#30340;POJO&#26469;&#23454;&#29616;&#65292;&#24182;&#21033;&#29992;Spring&#30340;IoC&#23481;&#22120;&#36827;&#34892;&#31649;&#29702;&#12290;&#23545;&#20110;&#20854;&#20182;&#30340;&#26381;&#21153;&#65292;&#27604;&#22914;&#21457;&#36865;email&#21644;&#19981;&#20381;&#36182;web&#23618;&#30340;&#26657;&#39564;&#20449;&#24687;&#65292;&#36824;&#21487;&#20197;&#35753;&#20320;&#33258;&#24049;&#20915;&#23450;&#22312;&#21738;&#37324;&#25191;&#34892;&#26657;&#39564;&#35268;&#21017;&#12290;
			Spring&#26412;&#36523;&#30340;ORM&#25903;&#25345;&#21487;&#20197;&#21644;JPA&#12289;Hibernate&#12289;JDO&#20197;&#21450;iBatis&#38598;&#25104;&#36215;&#26469;&#65292;&#20363;&#22914;&#20351;&#29992;Hibernate&#65292;&#20320;&#21487;&#22797;&#29992;&#24050;&#32463;&#23384;&#22312;&#30340;&#26144;&#23556;&#25991;&#20214;&#19982;&#26631;&#20934;&#30340;Hibernate <tt class="interfacename">SessionFactory</tt> &#37197;&#32622;&#12290;&#29992;&#25511;&#21046;&#22120;&#21435;&#26080;&#32541;&#25972;&#21512;web&#23618;&#21644;&#39046;&#22495;&#27169;&#22411;&#65292;&#28040;&#38500;&#23545; <tt class="classname">ActionForms</tt> &#30340;&#20381;&#36182;&#65292;&#25110;&#32773;&#36991;&#20813;&#20102;&#20854;&#20182;class&#20026;&#39046;&#22495;&#27169;&#22411;&#36716;&#25442;HTTP&#21442;&#25968;&#30340;&#38656;&#35201;&#12290;</p><div class="mediaobject" align="center"><img src="thirdparty-web.gif" align="middle"><div class="caption"><p>&#20351;&#29992;&#20102;&#31532;&#19977;&#26041;&#26694;&#26550;&#30340;Spring&#20013;&#38388;&#23618;</p></div></div><p>&#26377;&#30340;&#26102;&#20505;&#65292;&#29616;&#26377;&#24773;&#20917;&#19981;&#20801;&#35768;&#20320;&#24443;&#24213;&#22320;&#20174;&#19968;&#31181;&#26694;&#26550;&#20999;&#25442;&#21040;&#21478;&#19968;&#31181;&#26694;&#26550;&#12290;&#28982;&#32780;&#65292;Spring&#21364; <span class="emphasis"><em>&#19981;&#38656;&#35201;</em></span> &#24378;&#21046;&#20320;&#20351;&#29992;&#23427;&#30340;&#20840;&#37096;&#65292;Spring&#19981;&#26159;&#19968;&#31181; <span class="emphasis"><em>&#20840;&#26377;&#20840;&#26080;</em></span> &#30340;&#35299;&#20915;&#26041;&#26696;&#12290;
			&#22914;&#26524;&#65292;&#29616;&#26377;&#30340;&#24212;&#29992;&#20351;&#29992;&#20102;WebWork&#12289;Struts&#12289;Tapestry&#25110;&#20854;&#20182;&#30340;UI&#26694;&#26550;&#20316;&#20026;&#21069;&#31471;&#31243;&#24207;&#65292;&#23436;&#20840;&#21487;&#20197;&#21482;&#19982;Spring&#30340;&#20107;&#21153;&#29305;&#24615;&#36827;&#34892;&#38598;&#25104;&#12290;
			&#21482;&#38656;&#35201;&#20351;&#29992; <tt class="classname">ApplicationContext</tt> &#26469;&#25346;&#25509;&#20320;&#30340;&#19994;&#21153;&#36923;&#36753;&#21644;&#36890;&#36807; <tt class="classname">WebApplicationContext</tt> &#26469;&#38598;&#25104;&#20320;&#30340;web&#23618;&#21069;&#31471;&#31243;&#24207;&#12290;</p><div class="mediaobject" align="center"><img src="remoting.gif" align="middle"><div class="caption"><p>&#36828;&#31243;&#20351;&#29992;&#22330;&#26223;</p></div></div><p>&#24403;&#20320;&#38656;&#35201;&#36890;&#36807;WebService&#26469;&#35775;&#38382;&#20320;&#30340;&#29616;&#26377;&#20195;&#30721;&#26102;&#65292;&#20320;&#21487;&#20351;&#29992;Spring&#25552;&#20379;&#30340; <tt class="literal">Hessian-</tt>&#12289;<tt class="literal">Burlap-</tt>&#12289;<tt class="literal">Rmi-</tt> &#20026;&#21069;&#32512;&#30340;&#25509;&#21475;&#25110;&#32773; <tt class="classname">JaxRpcProxyFactory</tt> &#36825;&#20010;&#20195;&#29702;&#31867;&#12290;&#20320;&#20250;&#21457;&#29616;&#65292;&#36828;&#31243;&#35775;&#38382;&#29616;&#26377;&#24212;&#29992;&#31243;&#24207;&#19981;&#20877;&#37027;&#20040;&#22256;&#38590;&#20102;&#12290;</p><div class="mediaobject" align="center"><img src="ejb.gif" align="middle"><div class="caption"><p>EJBs-&#21253;&#35013;&#29616;&#26377;&#30340;POJOs</p></div></div><p>Spring&#36824;&#20026;EJB&#25552;&#20379;&#20102; <a href="#ejb" title="Chapter&nbsp;18.&nbsp;Enterprise Java Beans (EJB) &#38598;&#25104;">&#25968;&#25454;&#35775;&#38382;&#21644;&#25277;&#35937;&#23618;</a>&#65292;&#35753;&#20320;&#21487;&#20197;&#22797;&#29992;&#24050;&#23384;&#22312;&#30340;POJO&#24182;&#23558;&#20182;&#20204;&#21253;&#35013;&#22312;&#26080;&#29366;&#24577;SessionBean&#20013;&#65292;&#20197;&#20415;&#22312;&#21487;&#33021;&#38656;&#35201;&#22768;&#26126;&#24335;&#23433;&#20840;&#65288;EJB&#20013;&#30340;&#23433;&#20840;&#31649;&#29702;&#65292;&#35793;&#32773;&#27880;&#65289;&#30340;&#38750;&#23433;&#20840;&#30340;Web&#24212;&#29992;&#20013;&#20351;&#29992;&#12290;</p></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="new-in-2"></a>Chapter&nbsp;2.&nbsp;Spring 2.0&#21644; 2.5&#30340;&#26032;&#29305;&#24615;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="new-in-2-intro"></a>2.1.&nbsp;&#31616;&#20171;</h2></div></div><div></div></div><p>&#22914;&#26524;&#20320;&#24050;&#32463;&#29992;&#20102;&#19968;&#27573;&#26102;&#38388;&#30340;Spring Framework&#65292;&#37027;&#20320;&#23558;&#21457;&#29616;Spring&#32463;&#21382;&#20102;&#20004;&#27425;&#22823;&#30340;&#20462;&#35746;: &#19968;&#27425;&#26159;2006&#24180;10&#26376;&#21457;&#24067;&#30340;Spring 2.0, &#21478;&#19968;&#27425;&#26159;2007&#24180;11&#26376;&#21457;&#24067; Spring 2.5 &#12290;</p><div class="sidebar"><a name="new-in-2-intro-java"></a><p class="title"><b>Java SE &#19982; Java EE &#25903;&#25345;</b></p><p>Spring Framework&#32487;&#32493;&#20445;&#25345;&#19982;&#25152;&#26377;Java&#29256;&#26412;&#30340;&#20860;&#23481;&#24615; - &#20174;Java 1.4.2&#24320;&#22987;(&#21253;&#25324;1.4.2)&#12290;&#36825;&#24847;&#21619;&#30528;spring&#23545;Java1.4.2,Java 5&#21644; Java 6&#37117;&#25903;&#25345;&#65292;
      &#20294;&#26159;Spring Framework&#30340;&#19968;&#20123;&#39640;&#32423;&#21151;&#33021;&#26080;&#27861;&#22312;1.4.2&#20013;&#20351;&#29992;&#12290;&#20174;Spring 2.5&#36215;,Spring&#26694;&#26550;&#23436;&#20840;&#25903;&#25345;Java 6&#65292;&#32780;Spring 2.0&#21017;&#23545;Java 5&#25903;&#25345;&#27604;&#36739;&#22909;&#12290;</p><p>&#27492;
&#22806;&#65292;Spring&#24310;&#32493;&#20102;&#23545;J2EE 1.3&#21450;&#26356;&#39640;&#29256;&#26412;&#30340;&#20860;&#23481;&#24615;&#65292;&#21516;&#26102;&#23545;Java EE
5&#25552;&#20379;&#23436;&#20840;&#25903;&#25345;&#12290;&#20063;&#23601;&#26159;&#35828;&#65292;Spring&#21487;&#20197;&#32487;&#32493;&#22312;&#24212;&#29992;&#26381;&#21153;&#22120;&#20013;&#36816;&#34892;&#65292;&#21253;&#25324; BEA WebLogic 8.1, 9.0, 9.2 &#21644; 10,
IBM WebSphere 5.1, 6.0 &#21644; 6.1, Oracle OC4J 10.1.3 &#21644; 11, JBoss 3.2, 4.0 &#21644;
4.2, &#20197;&#21450; Tomcat 4.1, 5.0, 5.5 &#21644; 6.0, Jetty 4.2, 5.1 &#21644; 6.1, Resin 2.1,
3.0 &#21644; 3.1 &#36824;&#26377; GlassFish V1 &#21644; V2.</p></div><p>&#26412;&#31456;&#26159;&#23545;Spring 2.0&#19982;2.5&#26032;&#29305;&#24615;&#19982;&#25913;&#36827;&#29305;&#24615;&#30340;&#21521;&#23548;&#12290;&#25105;&#20204;&#24076;&#26395;&#25552;&#20379;&#19968;&#20010;&#39640;&#38454;&#30340;&#27010;&#36848;&#20351;&#37027;&#20123;&#26377;&#32463;&#39564;&#30340;Spring&#26550;&#26500;&#24072;&#19982;&#24320;&#21457;&#20154;&#21592;&#33021;&#24456;&#24555;&#29087;&#24713;Spring 2.x&#30340;&#26032;&#21151;&#33021;&#12290;
		&#22914;&#26524;&#24819;&#20102;&#35299;&#20851;&#20110;&#29305;&#24615;&#26356;&#22810;&#26356;&#28145;&#23618;&#30340;&#20449;&#24687;&#65292;&#35831;&#21442;&#32771;&#22312;&#26412;&#31456;&#37324;&#36229;&#38142;&#25509;&#30340;&#30456;&#24212;&#37096;&#20998;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="new-in-2-ioc"></a>2.2.&nbsp;&#25511;&#21046;&#21453;&#36716;(IoC)&#23481;&#22120;</h2></div></div><div></div></div><p>Spring 2.0 &#30456;&#24403;&#22823;&#30340;&#25913;&#36827;&#20043;&#19968;&#23601;&#26159;Spring&#30340;IoC&#23481;&#22120;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="new-in-2-ioc-scopes"></a>2.2.1.&nbsp;&#26032;&#30340;bean&#20316;&#29992;&#22495;</h3></div></div><div></div></div><p>Spring
&#19978;&#20010;&#29256;&#26412;&#30340;IoC&#23481;&#22120;&#25903;&#25345;&#20004;&#20010;&#19981;&#21516;&#30340;bean&#20316;&#29992;&#22495;&#65288;&#21333;&#20363;&#19982;&#21407;&#22411;&#65289;&#12290;Spring
2.0&#25913;&#36827;&#20102;&#36825;&#19968;&#28857;&#65292;&#19981;&#20165;&#25552;&#20379;&#20102;&#19968;&#20123;&#20381;&#36182;&#20110;Spring&#37096;&#32626;&#29615;&#22659;&#65288;&#27604;&#22914;&#35828;&#65292;&#22312;web&#29615;&#22659;&#20013;&#30340;request&#21644;session&#20316;&#29992;&#22495;bean&#65289;&#30340;&#39069;&#22806;&#30340;&#20316;&#29992;
&#22495;,&#32780;&#19988;&#25552;&#20379;&#20102;&#25152;&#35859;&#30340;'&#38057;&#23376;'&#65288;'hooks'&#65289;&#65288;&#22240;&#20026;&#25214;&#19981;&#21040;&#26356;&#22909;&#30340;&#34920;&#36798;&#65289;&#20351;Spring&#29992;&#25143;&#21487;&#20197;&#21019;&#36896;&#33258;&#24049;&#30340;&#20316;&#29992;&#22495;&#12290;</p><p>&#24212;&#35813;&#27880;&#24847;&#30340;&#26159;&#65292;&#21363;&#20351;&#21333;&#20363;&#19982;&#21407;&#22411;&#20316;&#29992;&#22495;beans&#30340;&#22522;&#26412;&#65288;&#20869;&#22312;&#65289;&#23454;&#29616;&#21457;&#29983;&#20102;&#21464;&#21270;&#65292;&#19978;&#36848;&#21464;&#21270;&#23545;&#26368;&#32456;&#29992;&#25143;&#26469;&#35828;&#26159;&#36879;&#26126;&#30340;...&#29616;&#26377;&#30340;&#37197;&#32622;&#19981;&#38656;&#35201;&#25913;&#21464;&#25110;&#25918;&#24323;&#12290;</p><p>&#22312;&#26631;&#39064;&#20026; <a href="#beans-factory-scopes" title="3.4.&nbsp;Bean&#30340;&#20316;&#29992;&#22495;">Section&nbsp;3.4, &#8220;Bean&#30340;&#20316;&#29992;&#22495;&#8221;</a> &#30340;&#37096;&#20998;&#26377;&#23545;&#26032;&#22686;&#30340;&#20316;&#29992;&#22495;&#19982;&#21407;&#26377;&#20316;&#29992;&#22495;&#30340;&#35814;&#32454;&#25551;&#36848;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="new-in-2-ioc-configuration"></a>2.2.2.&nbsp;&#26356;&#31616;&#21333;&#30340;XML&#37197;&#32622;</h3></div></div><div></div></div><p>&#22810;&#20111;&#20102;&#26032;&#30340;&#22522;&#20110;XML Schema&#30340;XML&#37197;&#32622;&#35821;&#27861;&#30340;&#20135;&#29983;&#65292;Spring&#30340;XML&#37197;&#32622;&#21464;&#30340;&#26356;&#21152;&#31616;&#21333;&#20102;&#12290;&#22914;&#26524;&#20320;&#24819;&#20805;&#20998;&#21033;&#29992;Spring&#25552;&#20379;&#30340;&#26032;&#26631;&#31614;&#65288;Spring&#22242;&#38431;&#24403;&#28982;&#24314;&#35758;&#20320;&#36825;&#20040;&#20570;&#65292;&#22240;&#20026;&#20182;&#20204;&#20351;&#37197;&#32622;&#21464;&#30340;&#19981;&#20877;&#32321;&#29712;&#65292;&#26356;&#21152;&#26131;&#20110;&#38405;&#35835;&#65289;&#65292;&#35831;&#38405;&#35835;&#26631;&#39064;&#20026; <a href="#xsd-config" title="Appendix&nbsp;A.&nbsp;XML Schema-based configuration">Appendix&nbsp;A, <i>XML Schema-based configuration</i></a> &#30340;&#37096;&#20998;&#12290;</p><p>&#30456;&#20851;&#25552;&#31034;&#65292;&#26377;&#19968;&#20010;&#26032;&#30340;&#26356;&#26032;&#36807;&#30340;Spring 2.0&#30340;DTD&#12290;&#22914;&#26524;&#20320;&#19981;&#33021;&#20351;&#29992;&#22522;&#20110;Schema&#30340;XML&#37197;&#32622;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;&#23427;&#12290;&#19979;&#38754;&#32473;&#20986;&#20102;DOCTYPE&#22768;&#26126;&#65292;&#22914;&#26524;&#26377;&#20852;&#36259;&#30340;&#35835;&#32773;&#21487;&#20197;&#35814;&#32454;&#38405;&#35835;Spring 2.0&#21457;&#24067;&#21253;&#30340;
			<tt class="filename">'dist/resources'</tt>&#30446;&#24405;&#20013;&#30340;<tt class="filename">'spring-beans-2.0.dtd'</tt> DTD&#12290;</p><pre class="programlisting">&lt;!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN 2.0//EN"
			  "http://www.springframework.org/dtd/spring-beans-2.0.dtd"&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="new-in-2-ioc-custom-configuration"></a>2.2.3.&nbsp;&#21487;&#25193;&#23637;&#30340;XML&#32534;&#20889;</h3></div></div><div></div></div><p>XML&#37197;&#32622;&#19981;&#20165;&#26356;&#21152;&#26131;&#20110;&#20070;&#20889;&#65292;&#32780;&#19988;&#20063;&#20855;&#26377;&#21487;&#25193;&#23637;&#24615;&#12290;</p><p>&#36825;
&#37324;'&#21487;&#25193;&#23637;&#24615;'&#30340;&#21547;&#20041;&#26159;&#65292;&#20316;&#20026;&#19968;&#20010;&#24212;&#29992;&#31243;&#24207;&#24320;&#21457;&#20154;&#21592;&#65292;&#25110;&#30528;&#65288;&#26356;&#21487;&#33021;&#65289;&#20316;&#20026;&#31532;&#19977;&#26041;&#26694;&#26550;&#25110;&#20135;&#21697;&#30340;&#20379;&#24212;&#21830;&#65292;&#21487;&#20197;&#24320;&#21457;&#33258;&#23450;&#20041;&#26631;&#31614;&#65292;&#20379;&#20854;&#20182;&#24320;&#21457;&#20154;&#21592;&#25226;&#36825;&#20123;&#26631;&#31614;&#23884;&#20837;&#21040;
&#33258;&#24049;&#30340;Spring&#37197;&#32622;&#25991;&#20214;&#37324;&#12290;&#20320;&#21487;&#20197;&#22312;&#32452;&#20214;&#30340;&#29305;&#23450;&#37197;&#32622;&#20013;&#23450;&#20041;&#20320;&#33258;&#24049;&#30340;DSL&#65288;domain specific
language&#65292;&#36825;&#20010;&#35789;&#22312;&#36825;&#37324;&#29992;&#24471;&#27604;&#36739;&#23485;&#27867;&#65289;&#12290;</p><p>&#23545;&#20110;&#24320;&#21457;&#20154;&#21592;&#25110;&#32773;&#22312;&#39033;&#30446;&#20013;&#36816;&#29992;Spring&#30340;&#20225;&#19994;&#26550;&#26500;&#24072;&#26469;&#35828;&#65292;&#23454;&#29616;&#33258;&#23450;&#20041;Spring&#26631;&#31614;&#21487;&#33021;&#19981;&#26159;&#27599;&#20010;&#20154;&#37117;&#24863;&#20852;&#36259;&#30340;&#12290;&#25105;&#20204;&#26399;&#24453;&#30528;&#31532;&#19977;&#26041;&#20379;&#24212;&#21830;&#33021;&#22815;&#23545;&#24320;&#21457;&#22312;Spring&#37197;&#32622;&#25991;&#20214;&#37324;&#20351;&#29992;&#30340;&#33258;&#23450;&#20041;&#37197;&#32622;&#26631;&#31614;&#20104;&#20110;&#36275;&#22815;&#30340;&#20851;&#27880;&#12290;</p><p>&#21487;&#25193;&#23637;&#30340;&#37197;&#32622;&#26426;&#21046;&#22312; <a href="#extensible-xml" title="Appendix&nbsp;B.&nbsp;Extensible XML authoring">Appendix&nbsp;B, <i>Extensible XML authoring</i></a> &#37324;&#26377;&#26356;&#20805;&#20998;&#30340;&#25551;&#36848;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="new-in-2-ioc-annotations"></a>2.2.4.&nbsp;Annotation(&#27880;&#35299;)&#39537;&#21160;&#37197;&#32622;</h3></div></div><div></div></div><p>Spring 2.0 &#24341;&#20837;&#20102;&#19968;&#20123;&#29992;&#20110;&#37197;&#32622;&#30340;annotation, &#21253;&#25324; <tt class="interfacename">@Transactional</tt>,
      <tt class="interfacename">@Required</tt> and <tt class="interfacename">@PersistenceContext</tt>
      /<tt class="interfacename">@PersistenceUnit</tt>.</p><p>Spring 2.5 &#24341;&#20837;&#20102;&#29992;&#20110;&#37197;&#32622;&#30340;&#23436;&#25972;&#30340;Annotation&#38598;&#21512;: <tt class="interfacename">@Autowired</tt>&#65292;&#20197;&#21450;&#23545;JSR-250&#27880;&#35299;<tt class="interfacename">@Resource</tt>,
      <tt class="interfacename">@PostConstruct</tt> and <tt class="interfacename">@PreDestroy</tt>&#30340;&#25903;&#25345;&#12290;
      </p><p>Annotation&#39537;&#21160;&#30340;bean &#37197;&#32622;&#22312;<a href="#beans-annotation-config" title="3.11.&nbsp;&#22522;&#20110;&#27880;&#35299;&#65288;Annotation-based&#65289;&#30340;&#37197;&#32622;">Section&nbsp;3.11, &#8220;&#22522;&#20110;&#27880;&#35299;&#65288;Annotation-based&#65289;&#30340;&#37197;&#32622;&#8221;</a>&#20013;&#35752;&#35770;&#12290;&#20063;&#35831;&#26597;&#38405;&#23545;Spring MVC&#30340;annotation&#30340;&#25903;&#25345;<a href="#new-in-2-web-annotations" title="2.5.3.&nbsp;&#22522;&#20110;Annotation&#30340;&#25511;&#21046;&#22120;">Section&nbsp;2.5.3, &#8220;&#22522;&#20110;Annotation&#30340;&#25511;&#21046;&#22120;&#8221;</a>&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="new-in-2-ioc-component-scanning"></a>2.2.5.&nbsp;&#22312;classpath&#20013;&#33258;&#21160;&#25628;&#32034;&#32452;&#20214;</h3></div></div><div></div></div><p>Spring2.5 &#24341;&#20837;&#20102;&#32452;&#20214;&#25628;&#32034;&#21151;&#33021;&#65306;&#22312;classpath&#20013;&#33258;&#21160;&#25628;&#32034;&#24102;&#26377;annotation&#30340;&#32452;&#20214;&#12290;&#20856;&#22411;&#30340;&#65292;&#19979;&#21015;&#32452;&#20214;&#31867;&#20250;&#27880;&#35299;&#20026;stereotype: <tt class="interfacename">@Component</tt>,
      <tt class="interfacename">@Repository</tt>, <tt class="interfacename">@Service</tt>,
      <tt class="interfacename">@Controller</tt>. &#21462;&#20915;&#20110;&#31243;&#24207;&#30340;&#19978;&#19979;&#25991;&#37197;&#32622;&#65292;&#36825;&#20123;&#32452;&#20214;&#20250;&#34987;&#33258;&#21160;&#25628;&#32034;&#21040;&#65292;&#24182;&#19988;&#36716;&#21464;&#20026;Spring bean&#23450;&#20041;&#65292;&#32780;&#19981;&#38656;&#35201;&#20026;&#27599;&#20010;&#31867;&#37117;&#36827;&#34892;&#26126;&#30830;&#30340;&#37197;&#32622;&#12290;</p><p>Annotation-driven bean configuration is discussed in <a href="#beans-stereotype-annotations" title="3.12.1.&nbsp;@Component&#21644;&#26356;&#22810;&#20856;&#22411;&#21270;&#27880;&#35299;">Section&nbsp;3.12.1, &#8220;@Component&#21644;&#26356;&#22810;&#20856;&#22411;&#21270;&#27880;&#35299;&#8221;</a>.</p><p>Annotation&#39537;&#21160;&#30340;bean&#37197;&#32622;&#22312;<a href="#beans-stereotype-annotations" title="3.12.1.&nbsp;@Component&#21644;&#26356;&#22810;&#20856;&#22411;&#21270;&#27880;&#35299;">Section&nbsp;3.12.1, &#8220;@Component&#21644;&#26356;&#22810;&#20856;&#22411;&#21270;&#27880;&#35299;&#8221;</a>&#35752;&#35770;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="new-in-2-aop"></a>2.3.&nbsp;&#38754;&#21521;&#20999;&#38754;&#32534;&#31243;(AOP)</h2></div></div><div></div></div><p>Spring 2.0&#22312;AOP&#19978;&#26377;&#24456;&#22823;&#30340;&#25913;&#36827;&#12290;Spring AOP&#26694;&#26550;&#26412;&#36523;&#23601;&#21313;&#20998;&#26131;&#20110;&#29992;XML&#37197;&#32622;&#65292;&#19981;&#20877;&#37027;&#20040;&#32321;&#29712;&#65307;Spring 2.0&#38598;&#25104;&#20102;AspectJ &#20999;&#20837;&#28857;&#65288;pointcut&#65289;&#35821;&#35328;&#21644; @AspectJ &#20999;&#38754;&#65288;aspect&#65289;&#22768;&#26126;&#31867;&#22411;&#12290;
		&#26631;&#39064;&#20026; <a href="#aop" title="Chapter&nbsp;6.&nbsp;&#20351;&#29992;Spring&#36827;&#34892;&#38754;&#21521;&#20999;&#38754;&#32534;&#31243;&#65288;AOP&#65289;">Chapter&nbsp;6, <i>&#20351;&#29992;Spring&#36827;&#34892;&#38754;&#21521;&#20999;&#38754;&#32534;&#31243;&#65288;AOP&#65289;</i></a> &#30340;&#37096;&#20998;&#19987;&#38376;&#25551;&#36848;&#36825;&#20010;&#26032;&#25903;&#25345;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="new-in-2-aop-configuration"></a>2.3.1.&nbsp;&#26356;&#21152;&#31616;&#21333;&#30340;AOP XML&#37197;&#32622;</h3></div></div><div></div></div><p>Spring 2.0&#24341;&#20837;&#20102;&#26032;&#30340;&#27169;&#24335;&#65292;&#25903;&#25345;&#23450;&#20041;&#20174;&#24120;&#35268;Java&#23545;&#35937;&#20013;&#21457;&#23637;&#20013;&#26469;&#30340;&#20999;&#38754;&#12290;
      &#27492;&#25903;&#25345;&#20805;&#20998;&#21033;&#29992;&#20102;AspectJ&#20999;&#20837;&#28857;&#35821;&#35328;&#65292;&#25552;&#20379;&#20102;&#23436;&#25972;&#31867;&#22411;&#30340;&#36890;&#30693;&#65288;advice&#65289;&#65288;&#20063;&#23601;&#26159;&#27809;&#26377;&#22810;&#20313;&#36716;&#25442;&#21644; <tt class="literal">Object[]</tt> &#21442;&#25968;&#25805;&#20316;&#65289;&#12290;
      &#26631;&#39064;&#20026; <a href="#aop-schema" title="6.3.&nbsp;&#22522;&#20110;Schema&#30340;AOP&#25903;&#25345;">Section&nbsp;6.3, &#8220;&#22522;&#20110;Schema&#30340;AOP&#25903;&#25345;&#8221;</a> &#30340;&#37096;&#20998;&#35814;&#32454;&#25551;&#36848;&#20102;&#35813;&#25903;&#25345;&#30340;&#32454;&#33410;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="new-in-2-aop-aspectj"></a>2.3.2.&nbsp;&#23545;@AspectJ &#20999;&#38754;&#30340;&#25903;&#25345;</h3></div></div><div></div></div><p>Spring 2.0&#21516;&#26679;&#25903;&#25345;&#20351;&#29992;@AspectJ&#27880;&#35299;&#23450;&#20041;&#30340;&#20999;&#38754;&#12290;&#36825;&#20123;&#20999;&#38754;&#21487;&#20197;&#22312;AspectJ&#19982;Spring AOP&#20013;&#20849;&#20139;&#65292;&#20165;&#20165;&#38656;&#35201;&#65288;&#32769;&#23454;&#35828;!&#65289;&#19968;&#20123;&#31616;&#21333;&#30340;&#37197;&#32622;&#12290;
			&#22312;&#26631;&#39064;&#20026; <a href="#aop-ataspectj" title="6.2.&nbsp;@AspectJ&#25903;&#25345;">Section&nbsp;6.2, &#8220;@AspectJ&#25903;&#25345;&#8221;</a> &#30340;&#37096;&#20998;&#35752;&#35770;&#20102;&#23545;@AspectJ&#20999;&#38754;&#30340;&#25903;&#25345;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="new-in-2-aop-bean-pointcuts"></a>2.3.3.&nbsp;&#23545;bean&#21629;&#21517;pointcut( bean name pointcut element)&#30340;&#25903;&#25345;</h3></div></div><div></div></div><p>Spring 2.5 &#21152;&#20837;&#20102;&#23545;<tt class="literal">bean(...)</tt>pointcut &#20803;&#32032;&#30340;&#25903;&#25345;&#65292;&#22312; spring&#23450;&#20041;&#30340;bean&#21629;&#21517;&#20013;&#23545;&#25351;&#23450;&#30340;&#21629;&#21517;&#36827;&#34892;&#21305;&#37197;&#12290;&#32454;&#33410;&#35831;&#21442;&#38405; <a href="#aop-pointcuts-designators" title="6.2.3.1.&nbsp;&#20999;&#20837;&#28857;&#25351;&#31034;&#31526;&#65288;PCD&#65289;&#30340;&#25903;&#25345;">Section&nbsp;6.2.3.1, &#8220;&#20999;&#20837;&#28857;&#25351;&#31034;&#31526;&#65288;PCD&#65289;&#30340;&#25903;&#25345;&#8221;</a> &#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="new-in-2-aop-load-time-weaving"></a>2.3.4.&nbsp;&#23545;AspectJ&#35013;&#36733;&#26102;&#32455;&#20837;&#65288;AspectJ load-time weaving&#65289;&#30340;&#25903;&#25345;</h3></div></div><div></div></div><p>Spring 2.5&#25903;&#25345;&#23545;AspectJ&#35013;&#36733;&#26102;&#32455;&#20837;&#30340;&#26174;&#24335;&#25903;&#25345;&#65292;&#20316;&#20026;&#22522;&#20110;proxy&#30340;AOP&#26694;&#26550;&#30340;&#34917;&#20805;&#12290;&#26032;&#30340;<tt class="literal">context:load-time-weaver</tt>&#37197;&#32622;&#20803;&#32032;&#33258;&#21160;&#28608;&#27963;&#23450;&#20041;&#22312;AspectJ&#30340;<tt class="literal">META-INF/aop.xml</tt>&#37197;&#32622;&#25991;&#20214;&#20013;&#30340;AspectJ&#26041;&#38754;&#65292;&#36890;&#36807;&#22312;&#24213;&#23618;ClassLoader&#20013;&#27880;&#20876;&#30340;&#19968;&#20010;&#36716;&#25442;&#22120;&#65292;&#25226;&#23427;&#20204;&#24212;&#29992;&#20110;&#24403;&#21069;&#24212;&#29992;&#31243;&#24207;&#19978;&#19979;&#25991;&#20013;&#12290;&#27880;&#24847;&#36825;&#20165;&#22312;&#25903;&#25345;&#31867;&#36716;&#25442;&#22120;(class transformation)&#30340;&#29615;&#22659;&#20013;&#25165;&#33021;&#36816;&#20316;&#12290; &#21442;&#38405;<a href="#aop-aj-ltw" title="6.8.4.&nbsp;&#22312;Spring&#24212;&#29992;&#20013;&#20351;&#29992;AspectJ&#21152;&#36733;&#26102;&#32455;&#20837;&#65288;LTW&#65289;">Section&nbsp;6.8.4, &#8220;&#22312;Spring&#24212;&#29992;&#20013;&#20351;&#29992;AspectJ&#21152;&#36733;&#26102;&#32455;&#20837;&#65288;LTW&#65289;&#8221;</a>&#65292;&#26377;&#23545;&#20854;&#33021;&#21147;&#21644;&#38480;&#21046;&#30340;&#25551;&#36848;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="new-in-2-middle-tier"></a>2.4.&nbsp;&#20013;&#38388;&#23618;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="new-in-2-middle-tier-transaction-configuration"></a>2.4.1.&nbsp;&#22312;XML&#37324;&#26356;&#20026;&#31616;&#21333;&#30340;&#22768;&#26126;&#24615;&#20107;&#21153;&#37197;&#32622;</h3></div></div><div></div></div><p>Spring 2.0&#20851;&#20110;&#20107;&#21153;&#30340;&#37197;&#32622;&#26041;&#24335;&#21457;&#29983;&#20102;&#37325;&#22823;&#30340;&#21464;&#21270;&#12290;&#26089;&#20808;&#30340;1.2.x&#29256;&#26412;&#30340;&#37197;&#32622;&#26041;&#24335;&#20173;&#28982;&#26377;&#25928;&#65288;&#24182;&#19988;&#21463;&#25903;&#25345;&#65289;&#65292;&#20294;&#26159;&#26032;&#30340;&#26041;&#24335;&#26126;&#26174;&#26356;&#21152;&#31616;&#27905;&#65292;&#24182;&#25104;&#20026;&#26368;&#25512;&#33616;&#30340;&#26041;&#24335;&#12290;
			Spring 2.0 &#21516;&#26102;&#25552;&#20379;&#20102;AspectJ&#20999;&#38754;&#24211;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;&#23427;&#26469;&#29983;&#25104;&#26356;&#28418;&#20142;&#30340;&#20107;&#21153;&#24615;&#23545;&#35937; - &#29978;&#33267;&#21487;&#20197;&#19981;&#26159;&#30001;Spring IoC&#23481;&#22120;&#20135;&#29983;&#30340;&#12290;</p><p> Spring 2.5&#22312;&#35013;&#36733;&#26102;&#26893;&#20837;&#22806;&#36824;&#25903;&#25345;&#26041;&#20415;&#30340;&#27880;&#35299;&#39537;&#21160;&#30340;&#20107;&#21153;&#31649;&#29702;&#65292;&#36825;&#26159;&#36890;&#36807;<tt class="literal">context:load-time-weaver</tt> &#21644;<tt class="literal">tx:annotation-driven mode="aspectj"</tt>&#30340;&#32852;&#21512;&#20351;&#29992;&#36827;&#34892;&#30340;&#12290;</p><p>&#26631;&#39064;&#20026; <a href="#transaction" title="Chapter&nbsp;9.&nbsp;&#20107;&#21153;&#31649;&#29702;">Chapter&nbsp;9, <i>&#20107;&#21153;&#31649;&#29702;</i></a> &#30340;&#37096;&#20998;&#21253;&#21547;&#25152;&#26377;&#30340;&#32454;&#33410;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="new-in-2-middle-tier-websphere"></a>2.4.2.&nbsp;&#23545;Websphere &#20107;&#21153;&#31649;&#29702;&#30340;&#23436;&#25972;&#25903;&#25345;</h3></div></div><div></div></div><p>Spring
2.5 &#26126;&#30830;&#25903;&#25345;IBM&#30340;WebSphere Application Server,&#29305;&#21035;&#26159;WebSphere's transaction
manager. Transaction suspension(&#20107;&#21153;&#25346;&#36215;&#65289;&#29616;&#22312;&#36890;&#36807;&#20351;&#29992;WebSphere&#26032;&#30340;<tt class="interfacename">UOWManager</tt> API&#24471;&#21040;&#20102;&#23436;&#25972;&#25903;&#25345;&#65292;&#27492;API&#22312;on WAS 6.0.2.19+ and 6.0.1.9+ &#21487;&#29992;&#12290;</p><p>&#22240;&#27492;&#22914;&#26524;&#20320;&#22312;WebSphere Application Server&#20013;&#36816;&#34892;&#22522;&#20110;Spring&#30340;&#24212;&#29992;&#31243;&#24207;&#65292;&#25105;&#20204;&#39640;&#24230;&#24314;&#35758;&#20320;&#20351;&#29992;Spring 2.5&#30340;<tt class="classname">WebSphereUowTransactionManager</tt>&#20316;&#20026;&#20320;&#36873;&#25321;&#30340;<tt class="interfacename">PlatformTransactionManager</tt>&#12290;&#36825;&#20063;&#26159; IBM&#23448;&#26041;&#30340;&#24314;&#35758;&#12290;</p><p>&#35201;&#33258;&#21160;&#25506;&#27979;&#24213;&#23618;&#30340;JTA &#20107;&#21153;&#24179;&#21488;&#65292;&#21487;&#20197;&#20351;&#29992;Spring 2.5&#30340;&#26032;      <tt class="literal">tx:jta-transaction-manager</tt> &#37197;&#32622;&#20803;&#32032;&#12290;&#23427;&#20250;&#33258;&#21160;&#25506;&#27979;BEA WebLogic&#21644;IBM WebSphere,&#27880;&#20876;&#27491;&#30830;&#30340;<tt class="interfacename">PlatformTransactionManager</tt>&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="new-in-2-middle-tier-jpa"></a>2.4.3.&nbsp;JPA</h3></div></div><div></div></div><p>Spring 2.0&#25552;&#20379;&#20102;JPA&#25277;&#35937;&#23618;&#65292;&#22312;&#25152;&#36215;&#30340;&#20316;&#29992;&#19982;&#24120;&#35268;&#20351;&#29992;&#27169;&#24335;&#19978;&#65292;&#31867;&#20284;&#20110;Spring&#30340;JDBC&#25277;&#35937;&#23618;&#12290;</p><p>&#22914;&#26524;&#20320;&#23545;&#20351;&#29992;&#23454;&#29616;JPA&#20316;&#20026;&#33258;&#24049;&#25345;&#20037;&#23618;&#30340;&#22522;&#30784;&#24863;&#20852;&#36259;&#65292;&#26631;&#39064;&#20026; <a href="#orm-jpa" title="12.6.&nbsp;JPA">Section&nbsp;12.6, &#8220;JPA&#8221;</a> &#30340;&#37096;&#20998;&#19987;&#38376;&#25551;&#36848;&#20102;&#22312;&#36825;&#20010;&#39046;&#22495;Spring&#30340;&#25903;&#25345;&#19982;&#38468;&#21152;&#20540;&#12290;</p><p>Spring 2.5&#23545;OpenJPA&#30340;&#25903;&#25345;&#21319;&#32423;&#21040;&#20102;OpenJPA 1.0&#65292;&#25903;&#25345;savepoint&#36825;&#26679;&#30340;&#39640;&#32423;&#29305;&#24615;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="new-in-2-middle-tier-async-jms"></a>2.4.4.&nbsp;&#24322;&#27493;&#30340;JMS</h3></div></div><div></div></div><p>&#22312;Spring 2.0&#20043;&#21069;&#65292;Spring&#30340;JMS&#30340;&#20316;&#29992;&#23616;&#38480;&#20110;&#21457;&#36865;&#28040;&#24687;&#21644;<span class="emphasis"><em>&#21516;&#27493;</em></span>&#25509;&#25910;&#28040;&#24687;&#12290;
			&#36825;&#20010;&#21151;&#33021;&#65288;&#23553;&#35013;&#22312; <tt class="classname">JmsTemplate</tt> &#31867;&#20013;&#65289;&#24403;&#28982;&#26159;&#24456;&#22909;&#30340;&#65292;
			&#20294;&#26159;&#65292;&#23427;&#27809;&#26377;&#28385;&#36275;<span class="emphasis"><em>&#24322;&#27493;</em></span>&#28040;&#24687;&#25509;&#25910;&#30340;&#38656;&#35201;&#12290;</p><p>Spring 2.0&#29616;&#22312;&#25552;&#20379;&#23545;&#24322;&#27493;&#28040;&#24687;&#25509;&#25910;&#30340;&#23436;&#25972;&#25903;&#25345;&#12290;&#22312;&#26631;&#39064;&#20026; <a href="#jms-asynchronousMessageReception" title="19.4.2.&nbsp;&#24322;&#27493;&#25509;&#25910; - &#28040;&#24687;&#39537;&#21160;&#30340;POJO">Section&nbsp;19.4.2, &#8220;&#24322;&#27493;&#25509;&#25910; - &#28040;&#24687;&#39537;&#21160;&#30340;POJO&#8221;</a> &#30340;&#37096;&#20998;&#26377;&#35814;&#32454;&#30340;&#25551;&#36848;&#12290;</p><p>&#22312;Spring 2.5&#20013;&#65292; JCA&#39118;&#26684;&#30340;&#24322;&#27493;&#28040;&#24687;&#30417;&#21548;&#22120;&#35774;&#32622;&#20063;&#36890;&#36807;<tt class="classname">GenericMessageEndpointManager</tt>&#24037;&#20855;&#24471;&#21040;&#20102;&#25903;&#25345;&#12290;&#36825;&#26159;&#23545;&#26631;&#20934;JMS&#30417;&#21548;&#22120;&#24037;&#20855;&#30340;&#34917;&#20805;&#65292;&#20801;&#35768;&#23545;ActionMQ&#21644;JORAM&#36825;&#20123;&#28040;&#24687;broker&#36827;&#34892;&#26356;&#28145;&#20837;&#30340;&#38598;&#25104;&#12290;&#21442;&#35265;<a href="#jms-jca-message-endpoint-manager" title="19.5.&nbsp;JCA&#28040;&#24687;&#31471;&#28857;&#30340;&#25903;&#25345;">Section&nbsp;19.5, &#8220;JCA&#28040;&#24687;&#31471;&#28857;&#30340;&#25903;&#25345;&#8221;</a>&#12290;</p><p>Spring 2.5 &#36824;&#24341;&#20837;&#20102;&#19968;&#20010;XML namespace&#26469;&#31616;&#21270;JMS&#37197;&#32622;&#65292;&#21487;&#20197;&#23545;&#22823;&#37327;&#30417;&#21548;&#22120;&#36827;&#34892;&#31616;&#26126;&#37197;&#32622;&#12290;&#36825;&#19968;&#21629;&#21517;&#31354;&#38388;&#25903;&#25345;&#26631;&#20934;&#30340;JMS&#30417;&#21548;&#22120;&#21644;JCA setup&#39118;&#26684;&#65292;&#22312;&#37197;&#32622;&#26102;&#21482;&#26377;&#24456;&#23567;&#30340;&#25913;&#21464;&#12290;&#21442;&#38405;<a href="#jms-namespace" title="19.6.&nbsp;JMS&#21629;&#21517;&#31354;&#38388;&#25903;&#25345;">Section&nbsp;19.6, &#8220;JMS&#21629;&#21517;&#31354;&#38388;&#25903;&#25345;&#8221;</a>&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="new-in-2-middle-tier-jdbc"></a>2.4.5.&nbsp;JDBC</h3></div></div><div></div></div><p>&#22312;Spring&#30340;JDBC&#25903;&#25345;&#24211;&#20013;&#65292;&#26377;&#20960;&#20010;&#23567;&#30340;(&#20294;&#21516;&#26679;&#20540;&#24471;&#27880;&#24847;&#30340;)&#26032;&#31867;&#12290;&#39318;&#20808;&#65292;<a href="#jdbc-NamedParameterJdbcTemplate" title="11.2.2.&nbsp;NamedParameterJdbcTemplate&#31867;"><tt class="classname">NamedParameterJdbcTemplate</tt></a>&#65292;
			&#25552;&#20379;&#20102;&#22312;&#32534;&#20889;JDBC&#35821;&#21477;&#26102;&#65292;&#23545;&#20351;&#29992;&#21629;&#21517;&#21442;&#25968;&#65288;&#19982;&#20043;&#30456;&#23545;&#30340;&#26159;&#32534;&#20889;JDBC&#35821;&#21477;&#26102;&#21482;&#20351;&#29992;&#24120;&#35268;&#30340;&#21344;&#20301;&#31526;&#65288;<tt class="literal">'?'</tt>&#65289;&#65289;&#30340;&#25903;&#25345;&#12290;</p><p>&#21478;&#19968;&#20010;&#26032;&#31867;&#65292;<a href="#jdbc-SimpleJdbcTemplate" title="11.2.3.&nbsp;SimpleJdbcTemplate&#31867;"><tt class="classname">SimpleJdbcTemplate</tt></a>&#65292;
			&#33268;&#21147;&#20110;&#22312;&#20351;&#29992;Java 5+ (Tiger)&#24320;&#21457;&#26102;&#26356;&#21152;&#31616;&#21333;&#22320;&#20351;&#29992;<tt class="classname">JdbcTemplate</tt>&#12290;</p><p> Spring 2.5&#26174;&#33879;&#30340;&#25193;&#20805;&#20102;<tt class="classname">SimpleJdbcTemplate</tt>&#30340;&#21151;&#33021;&#65292;&#24341;&#20837;&#20102;<tt class="classname">SimpleJdbcCall</tt> &#21644;<tt class="classname">SimpleJdbcInsert</tt>&#25805;&#20316;&#23545;&#35937;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="new-in-2-web"></a>2.5.&nbsp;Web&#23618;</h2></div></div><div></div></div><p>&#22312;Spring 2.0&#37324;&#65292;web&#23618;&#25903;&#25345;&#24471;&#21040;&#20102; <span class="emphasis"><em>&#20805;&#20998;&#22320;</em></span> &#25913;&#36827;&#21644;&#25193;&#23637;&#65292;&#22312;Spring 2.5&#20013;&#24341;&#20837;&#20102;&#22522;&#20110;&#27880;&#35299;&#30340;controller&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="new-in-2-web-convention"></a>2.5.1.&nbsp;Spring MVC&#21512;&#29702;&#30340;&#40664;&#35748;&#20540;</h3></div></div><div></div></div><p>&#23545;&#20110;&#24456;&#22810;&#39033;&#30446;&#32780;&#35328;&#65292;&#36981;&#23432;&#24314;&#31435;&#22909;&#30340;&#35268;&#33539;&#65292;&#20351;&#29992;&#21512;&#29702;&#30340;&#40664;&#35748;&#20540;&#65292;&#26159;&#39033;&#30446;&#25152;&#24517;&#39035;&#30340;...
			&#29616;&#22312;&#22312;SpringMVC&#37324;&#65292;&#24815;&#20363;&#20248;&#20808;&#65288;convention-over-configuration&#65289;&#30340;&#35266;&#28857;&#26377;&#20102;&#26126;&#30830;&#30340;&#25903;&#25345;&#12290;
			&#36825;&#23601;&#24847;&#21619;&#30528;&#24403;&#20320;&#20026;<tt class="literal">&#25511;&#21046;&#22120;</tt>&#21644;&#35270;&#22270;&#24314;&#31435;&#19968;&#31995;&#21015;&#30340;&#21629;&#21517;&#35268;&#33539;&#26102;&#65292;&#20320;&#21487;&#20197; <span class="emphasis"><em>&#20805;&#20998;</em></span> &#20943;&#23569;XML&#37197;&#32622;&#30340;&#25968;&#37327;&#65292;&#21253;&#25324;&#35774;&#32622;&#22788;&#29702;&#26144;&#23556;&#12289;&#35270;&#22270;&#35299;&#26512;&#12289;<tt class="classname">ModelAndView</tt>&#30340;&#23454;&#20363;&#31561;&#31561;&#12290;
			&#23545;&#20110;&#24320;&#21457;&#24555;&#36895;&#21407;&#22411;&#26469;&#35828;&#65292;&#36825;&#26377;&#38750;&#24120;&#22823;&#30340;&#20248;&#21183;&#65292;&#24182;&#19988;&#36234;&#36807;&#20195;&#30721;&#24211;&#21487;&#20197;&#20135;&#29983;&#19968;&#23450;&#30340;&#36830;&#32493;&#24615;&#65288;&#36890;&#24120;&#26159;&#33391;&#22909;&#30340;&#65289;&#12290;</p><p>&#22312;&#26631;&#39064;&#20026; <a href="#mvc-coc" title="13.11.&nbsp;&#24815;&#20363;&#20248;&#20808;&#21407;&#21017;&#65288;convention over configuration&#65289;">Section&nbsp;13.11, &#8220;&#24815;&#20363;&#20248;&#20808;&#21407;&#21017;&#65288;convention over configuration&#65289;&#8221;</a> &#30340;&#37096;&#20998;&#65292;&#21487;&#20197;&#21457;&#29616;&#23545;Spring MVC&#30340;&#24815;&#20363;&#20248;&#20808;&#25903;&#25345;&#30340;&#35814;&#32454;&#20869;&#23481;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="new-in-2-web-portlet"></a>2.5.2.&nbsp;Portlet &#26694;&#26550;</h3></div></div><div></div></div><p>Spring 2.0 &#35774;&#35745;&#20102;&#19968;&#31181;&#27010;&#24565;&#19978;&#31867;&#20284;&#20110;Spring MVC&#26694;&#26550;&#30340;Porlet&#26694;&#26550;&#12290;&#26631;&#39064;&#20026; <a href="#portlet" title="Chapter&nbsp;16.&nbsp;Portlet MVC&#26694;&#26550;">Chapter&nbsp;16, <i>Portlet MVC&#26694;&#26550;</i></a> &#30340;&#37096;&#20998;&#21487;&#20197;&#25214;&#21040;&#35814;&#32454;&#30340;&#20171;&#32461;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="new-in-2-web-annotations"></a>2.5.3.&nbsp;&#22522;&#20110;Annotation&#30340;&#25511;&#21046;&#22120;</h3></div></div><div></div></div><p>Spring 2.5 &#20026;MVC &#25511;&#21046;&#22120;&#24341;&#20837;&#20102;&#19968;&#31181;&#22522;&#20110;Annotation(&#27880;&#35299;&#65289;&#30340;&#32534;&#31243;&#27169;&#22411;, &#20351;&#29992;<tt class="interfacename">@RequestMapping</tt>,
      <tt class="interfacename">@RequestParam</tt>, <tt class="interfacename">@ModelAttribute</tt>&#31561;
&#31561;&#27880;&#35299;&#12290;
&#23545;SevletMVC&#21644;PortletMVC&#26469;&#35828;&#65292;&#27880;&#35299;&#37117;&#26159;&#25903;&#25345;&#30340;&#12290;&#29992;&#36825;&#31181;&#26041;&#24335;&#23454;&#29616;&#30340;Controller&#19981;&#38656;&#35201;&#26174;&#24335;&#32487;&#25215;&#22522;&#31867;&#25110;&#32773;&#22768;&#26126;&#25509;&#21475;&#20102;&#12290;&#26356;&#22909;&#30340;&#26159;&#65292;
&#23427;&#20204;&#19981;&#20877;&#38656;&#35201;&#20687;&#36890;&#24120;&#37027;&#26679;&#20381;&#36182;&#20110;Servlet&#25110;Portlet API&#65292;&#34429;&#28982;&#22914;&#26524;&#38656;&#35201;&#20182;&#20204;&#36824;&#26159;&#21487;&#20197;&#24456;&#23481;&#26131;&#30340;&#35775;&#38382;Servlet&#25110;&#32773;Portlet&#24037;&#20855;&#12290;
&#26356;&#22810;&#32454;&#33410;&#35831;&#21442;&#38405; <a href="#mvc-annotation" title="13.12.&nbsp;&#22522;&#20110;&#27880;&#35299;&#30340;&#25511;&#21046;&#22120;&#37197;&#32622;">Section&nbsp;13.12, &#8220;&#22522;&#20110;&#27880;&#35299;&#30340;&#25511;&#21046;&#22120;&#37197;&#32622;&#8221;</a>&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="new-in-2-web-form-tags"></a>2.5.4.&nbsp;Spring MVC&#30340;&#34920;&#21333;&#26631;&#31614;&#24211;</h3></div></div><div></div></div><p>Spring MVC&#20016;&#23500;&#30340;JSP&#26631;&#31614;&#24211; <span class="emphasis"><em>&#26469;&#33258;</em></span> JIRA&#65292;&#20854;&#20013;&#30340;&#32477;&#22823;&#37096;&#20998;&#26159;Spring&#29992;&#25143;&#65288;&#33539;&#22260;&#24456;&#24191;&#30340;&#29992;&#25143;&#65289;&#36890;&#36807;&#25237;&#31080;&#26041;&#24335;&#20135;&#29983;&#30340;&#12290;</p><p>Spring 2.0&#25317;&#26377;&#19968;&#20010;&#20016;&#23500;&#30340;JSP&#26631;&#31614;&#24211;&#65292;&#22312;&#20351;&#29992;Spring MVC&#26102;&#65292;&#32534;&#20889;JSP&#39029;&#38754;&#21464;&#24471;&#26356;&#21152;&#31616;&#21333;&#65307;Spring&#22242;&#38431;&#33258;&#20449;&#22320;&#35748;&#20026;&#23427;&#23558;&#28385;&#36275;&#25152;&#26377;&#22312;JIRA&#19978;&#25237;&#31080;&#30340;&#24320;&#21457;&#20154;&#21592;&#30340;&#38656;&#35201;&#12290;&#22312;&#26631;&#39064;&#20026; <a href="#mvc-formtaglib" title="13.9.&nbsp;&#20351;&#29992;Spring&#30340;&#34920;&#21333;&#26631;&#31614;&#24211;">Section&nbsp;13.9, &#8220;&#20351;&#29992;Spring&#30340;&#34920;&#21333;&#26631;&#31614;&#24211;&#8221;</a> &#30340;&#37096;&#20998;&#25551;&#36848;&#20102;&#26032;&#30340;&#26631;&#31614;&#24211;&#65292;&#26631;&#39064;&#20026; <a href="#spring-form.tld" title="Appendix&nbsp;E.&nbsp;spring-form.tld">Appendix&nbsp;E, <i>spring-form.tld</i></a> &#30340;&#38468;&#24405;&#37096;&#20998;&#26159;&#23545;&#25152;&#26377;&#26032;&#26631;&#31614;&#30340;&#24555;&#36895;&#25351;&#21335;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="new-in-2-web-tiles2"></a>2.5.5.&nbsp;&#23545;Tiles 2 &#25903;&#25345;</h3></div></div><div></div></div><p>Spring 2.5 &#21152;&#20837;&#20102;&#23545;tiles 2&#30340;&#25903;&#25345;,&#23427;&#26159;&#27969;&#34892;&#30340;Tiles &#27169;&#26495;&#26694;&#26550;&#30340;&#19979;&#19968;&#20195;&#12290;&#23427;&#25509;&#26367;&#20102;Spring&#23545;Tiles 1&#30340;&#27491;&#24335;&#25903;&#25345;&#65292;Strutcs 1.x&#21253;&#21547;Tiles 1&#12290;&#32454;&#33410;&#35831;&#21442;&#38405;<a href="#view-tiles" title="14.3.&nbsp;Tiles">Section&nbsp;14.3, &#8220;Tiles&#8221;</a>&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="new-in-2-web-jsf12"></a>2.5.6.&nbsp;&#23545;JSF 1.2&#25903;&#25345;</h3></div></div><div></div></div><p>Spring 2.5 &#25903;&#25345;JSF 1.2&#65292;&#25552;&#20379;&#20102;<tt class="classname">DelegatingVariableResolver</tt>&#30340;&#19968;&#20010;&#21464;&#31181;&#65292;&#20197;<tt class="classname">SpringBeanFacesELResolver</tt>&#30340;&#24418;&#24335;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="new-in-2-web-jaxws"></a>2.5.7.&nbsp;JAX-WS&#25903;&#25345;</h3></div></div><div></div></div><p>Spring 2.5&#23436;&#20840;&#25903;&#25345;JAX-WS 2.0/2.1&#65292;&#23427;&#22312;Java 6&#21644;Java EE 5&#20013;&#20869;&#32622;&#12290;JAX-WS &#26159;JAX-RPC&#30340;&#21518;&#32487;&#32773;&#65292;&#20801;&#35768;&#35775;&#38382;&#22522;&#20110;WSDL/SOAP&#30340;web service&#65292;&#20063;&#21487;&#20197;&#35775;&#38382;JAX-WS&#39118;&#26684;&#26292;&#38706;&#30340;web service&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="new-in-2-other"></a>2.6.&nbsp;&#20854;&#20182;</h2></div></div><div></div></div><p>&#26368;&#21518;&#36825;&#19968;&#37096;&#20998;&#21015;&#20986;&#25152;&#26377;&#20854;&#20182;&#30340;Spring 2.0/2.5&#30340;&#26032;&#21151;&#33021;&#25110;&#25913;&#36827;&#36807;&#30340;&#21151;&#33021;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="new-in-2-other-dynamic-language-support"></a>2.6.1.&nbsp;&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;</h3></div></div><div></div></div><p>Spring 2.0&#29616;&#22312;&#25903;&#25345;&#29992;&#38750;Java&#35821;&#35328;&#32534;&#20889;&#30340;bean&#65292;&#24403;&#21069;&#25903;&#25345;&#30340;&#21160;&#24577;&#35821;&#35328;&#21253;&#25324;JRuby&#65292;Groovy&#21644;BeanShell&#12290;&#26631;&#39064;&#20026; <a href="#dynamic-language" title="Chapter&nbsp;24.&nbsp;&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;">Chapter&nbsp;24, <i>&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;</i></a> &#37096;&#20998;&#25551;&#36848;&#20102;&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;&#30340;&#32454;&#33410;&#12290;</p><p>Spring 2.5 &#25552;&#39640;&#20102;&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;&#65292;&#21152;&#20837;&#20102;autowiring&#21644;&#23545;&#21018;&#21457;&#24067;&#30340;JRuby 1.0&#30340;&#25903;&#25345;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="new-in-2-other-testing"></a>2.6.2.&nbsp;&#22686;&#24378;&#30340;&#27979;&#35797;&#25903;&#25345;</h3></div></div><div></div></div><p>Spring 2.5 &#24341;&#20837;&#20102;<span class="emphasis"><em>Spring TestContext
      Framework</em></span>, &#23427;&#25552;&#20379;&#20102;&#27880;&#35299;(annotation)&#39537;&#21160;&#30340;&#21333;&#20803;&#21644;&#38598;&#25104;&#27979;&#35797;&#25903;&#25345;&#65292;&#23427;&#26159;&#29616;&#23384;&#30340;&#27979;&#35797;&#26694;&#26550;&#30340;&#28151;&#21512;&#12290;&#19981;&#21516;&#30340;&#27979;&#35797;&#26694;&#26550;&#21487;&#20197;&#20351;&#29992;&#21516;&#26679;&#30340;&#25216;&#26415;&#21644;&#22522;&#20110;&#27880;&#35299;&#30340;&#37197;&#32622;&#65292;&#20363;&#22914;&#65292;JUnit 3.8&#29615;&#22659;&#20063;&#21487;&#20197;&#29992;&#20110;&#20351;&#29992;JUnit 4.4&#25110;TestNG&#32534;&#20889;&#30340;&#27979;&#35797;&#12290;
	  </p><p>&#38500;&#20102;&#25552;&#20379;&#36890;&#29992;&#24182;&#19988;&#21487;&#25193;&#23637;&#30340;&#27979;&#35797;&#22522;&#30784;&#35774;&#22791;&#65292;<span class="emphasis"><em>Spring TestContext Framework</em></span>&#25552;&#20379;&#20102;&#21487;&#20197;&#31435;&#21051;&#20351;&#29992;&#30340;&#38024;&#23545;Spring&#30340;&#38598;&#25104;&#27979;&#35797;&#21151;&#33021;&#65292;&#20363;&#22914;<a href="#testcontext-ctx-management" title="8.3.7.2.&nbsp;&#19978;&#19979;&#25991;&#31649;&#29702;&#21644;&#32531;&#23384;">context
      management and caching(&#19978;&#19979;&#25991;&#31649;&#29702;&#19982;&#32531;&#23384;)</a>, <a href="#testcontext-fixture-di" title="8.3.7.3.&nbsp;&#27979;&#35797;fixture&#30340;&#20381;&#36182;&#27880;&#20837;">dependency injection of test
      fixtures&#65288;&#27979;&#35797;&#22841;&#20855;&#30340;DI&#65289;</a>, &#21644; <a href="#testcontext-tx" title="8.3.7.4.&nbsp;&#20107;&#21153;&#31649;&#29702;">transactional test
      management&#65288;&#20107;&#21153;&#27979;&#35797;&#31649;&#29702;&#65289;</a> &#65292;&#20351;&#29992;&#40664;&#35748;rollback&#35821;&#20041;&#12290;
      </p><p>&#24819;&#30693;&#36947;&#36825;&#20123;&#26032;&#30340;&#27979;&#35797;&#25903;&#25345;&#33021;&#20026;&#20320;&#32534;&#20889;&#21333;&#20803;&#21644;&#38598;&#25104;&#27979;&#35797;&#24102;&#26469;&#22810;&#22823;&#30340;&#22909;&#22788;&#65311;&#35831;&#21442;&#38405;<a href="#testcontext-framework" title="8.3.7.&nbsp;Spring TestContext Framework">Section&nbsp;8.3.7, &#8220;Spring TestContext Framework&#8221;</a>&#65292;&#36825;&#26159;&#26356;&#26032;&#36807;&#30340;&#27979;&#35797;&#31456;&#33410;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="new-in-2-other-jmx"></a>2.6.3.&nbsp;JMX &#25903;&#25345;</h3></div></div><div></div></div><p>Spring Framework&#24320;&#22987;&#25903;&#25345;<tt class="literal">&#36890;&#30693;(Notification)</tt>&#65307;
			&#36824;&#21487;&#20197;&#22768;&#26126;&#24335;&#22320;&#25511;&#21046;MBean&#22312;&#19968;&#20010;<tt class="literal">MBeanServer</tt>&#19978;&#30340;&#27880;&#20876;&#34892;&#20026;&#12290;</p><div class="itemizedlist"><ul type="disc"><li><a href="#jmx-notifications" title="20.7.&nbsp;&#36890;&#30693;">Section&nbsp;20.7, &#8220;&#36890;&#30693;&#8221;</a></li><li><a href="#jmx-exporting-registration-behavior" title="20.2.5.&nbsp;&#25511;&#21046;&#27880;&#20876;&#34892;&#20026;">Section&nbsp;20.2.5, &#8220;&#25511;&#21046;&#27880;&#20876;&#34892;&#20026;&#8221;</a></li></ul></div><p>&#38500;&#27492;&#20043;&#22806;&#65292;Spring 2.5&#36824;&#25552;&#20379;&#20102;<a href="#jmx-context-mbeanexport" title="20.4.3.&nbsp;&lt;context:mbean-export/&gt;&#20803;&#32032;"><tt class="literal">context:mbean-export</tt></a>&#37197;&#32622;&#20803;&#32032;&#65292;&#20415;&#20110;&#27880;&#20876;&#20351;&#29992;&#27880;&#35299;&#26631;&#27880;&#30340;bean &#31867;&#65292;&#23427;&#20250;&#26816;&#26597;Spring&#30340;<tt class="interfacename">@ManagedResource</tt> &#27880;&#35299;&#12290;
</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="new-in-2-other-jca"></a>2.6.4.&nbsp;&#23558;Spring &#24212;&#29992;&#31243;&#24207;&#19978;&#19979;&#25991;&#37096;&#32626;&#20026;JCA adapter</h3></div></div><div></div></div><p>Spring 2.5&#25903;&#25345;&#23558;Spring&#24212;&#29992;&#31243;&#24207;&#19978;&#19979;&#25991;&#37197;&#32622;&#25104;&#20026;JCA &#36164;&#28304;&#36866;&#37197;&#22120;(JCA resource adapter)&#65292;&#25171;&#21253;&#20026;JCA RAR&#25991;&#20214;&#12290;&#36825;&#20801;&#35768;&#23396;&#31435;&#30340;&#24212;&#29992;&#31243;&#24207;&#27169;&#22359;&#37096;&#32626;&#36827;J2EE&#26381;&#21153;&#22120;&#65292;&#35775;&#38382;&#25152;&#26377;&#30340;&#26381;&#21153;&#22120;&#22522;&#30784;&#35774;&#26045;&#65292;&#20363;&#22914;&#25191;&#34892;&#35745;&#21010;&#20219;&#21153;&#65292;&#30417;&#21548;&#28040;&#24687;&#31561;&#31561;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="new-in-2-other-taskexecutor"></a>2.6.5.&nbsp;&#35745;&#21010;&#20219;&#21153;</h3></div></div><div></div></div><p>Spring 2.0 &#25552;&#20379;&#20102;&#19968;&#31181;&#23545;&#35745;&#21010;&#20219;&#21153;&#30340;&#25277;&#35937;&#12290;&#23545;&#20110;&#24863;&#20852;&#36259;&#30340;&#24320;&#21457;&#20154;&#21592;&#65292; <a href="#scheduling-task-executor" title="23.4.&nbsp;SpringTaskExecutor&#25277;&#35937;">Section&nbsp;23.4, &#8220;SpringTaskExecutor&#25277;&#35937;&#8221;</a> &#25552;&#20379;&#20102;&#25152;&#26377;&#30340;&#32454;&#33410;&#12290;</p><p><tt class="interfacename">TaskExecutor</tt>&#25277;&#35937;&#23618;&#22312;Spring&#20869;&#37096;&#20063;&#21516;&#26679;&#32654;&#34987;&#20351;&#29992;&#65292;&#20363;&#22914;&#65292;&#24322;&#27493;JMS&#25903;&#25345;&#12290;&#22312;Spring 2.5&#20013;&#65292;&#22312;&#23545;JCA&#29615;&#22659;&#25903;&#25345;&#20013;&#20063;&#20351;&#29992;&#21040;&#20102;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="new-in-2-other-java5"></a>2.6.6.&nbsp;&#23545;Java 5 (Tiger) &#25903;&#25345;</h3></div></div><div></div></div><p>&#19979;&#38754;&#30340;&#21015;&#34920;&#21015;&#20986;&#20102;&#22312;Spring 2.0&#21644;2.5&#20013;&#23545;&#26032;&#30340;Java 5&#30340;&#25903;&#25345;&#37096;&#20998;&#30340;&#25991;&#26723;&#12290;</p><div class="itemizedlist"><ul type="disc"><li><a href="#beans-annotation-config" title="3.11.&nbsp;&#22522;&#20110;&#27880;&#35299;&#65288;Annotation-based&#65289;&#30340;&#37197;&#32622;">Section&nbsp;3.11, &#8220;&#22522;&#20110;&#27880;&#35299;&#65288;Annotation-based&#65289;&#30340;&#37197;&#32622;&#8221;</a></li><li><a href="#metadata-annotations-required" title="25.3.1.&nbsp;@Required">Section&nbsp;25.3.1, &#8220;@Required&#8221;</a></li><li><a href="#transaction-declarative-annotations" title="9.5.6.&nbsp;&#20351;&#29992; @Transactional">Section&nbsp;9.5.6, &#8220;&#20351;&#29992; @Transactional&#8221;</a></li><li><a href="#jdbc-SimpleJdbcTemplate" title="11.2.3.&nbsp;SimpleJdbcTemplate&#31867;">Section&nbsp;11.2.3, &#8220;SimpleJdbcTemplate&#31867;&#8221;</a></li><li><a href="#orm-jpa" title="12.6.&nbsp;JPA">Section&nbsp;12.6, &#8220;JPA&#8221;</a></li><li><a href="#aop-ataspectj" title="6.2.&nbsp;@AspectJ&#25903;&#25345;">Section&nbsp;6.2, &#8220;@AspectJ&#25903;&#25345;&#8221;</a></li><li><a href="#aop-atconfigurable" title="6.8.1.&nbsp;&#22312;Spring&#20013;&#20351;&#29992;AspectJ&#36827;&#34892;domain object&#30340;&#20381;&#36182;&#27880;&#20837;">Section&nbsp;6.8.1, &#8220;&#22312;Spring&#20013;&#20351;&#29992;AspectJ&#36827;&#34892;domain object&#30340;&#20381;&#36182;&#27880;&#20837;&#8221;</a></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="new-in-2-migrating"></a>2.7.&nbsp;&#31227;&#26893;&#21040;Spring 2.5</h2></div></div><div></div></div><p>&#26368;&#21518;&#36825;&#37096;&#20998;&#21253;&#21547;&#19968;&#20123;&#32454;&#33410;&#38382;&#39064;&#65292;&#22312;&#20320;&#20174;Spring 1.2/2.0&#21319;&#32423;&#21040;Spring 2.5&#26102;&#21487;&#33021;&#36935;&#21040;&#12290;</p><p>&#20174;Spring
2.0.x&#24212;&#29992;&#31243;&#24207;&#21319;&#32423;&#21040;Spring 2.5&#21482;&#38656;&#35201;&#31616;&#21333;&#30340;&#25226;Spring
2.5&#30340;jar&#22797;&#21046;&#21040;&#20320;&#24212;&#29992;&#31243;&#24207;&#30446;&#24405;&#32467;&#26500;&#20013;&#30340;&#21512;&#36866;&#20301;&#32622;&#21363;&#21487;&#12290;&#25105;&#20204;&#39640;&#24230;&#24314;&#35758;&#20219;&#20309;&#36816;&#34892;&#22312;JDK 1.4.2&#25110;&#26356;&#39640;&#29256;&#26412;&#30340;Spring
2.0&#24212;&#29992;&#31243;&#24207;&#21319;&#32423;&#21040;Spring 2.5&#65292;&#29305;&#21035;&#26159;&#36816;&#34892;&#22312;Java 5&#25110;&#26356;&#39640;&#29256;&#26412;&#19978;&#30340;&#65292;Spring 2.5&#24102;&#26469;&#20102;&#24040;&#22823;&#30340;&#37197;&#32622;&#20415;&#21033;&#21644;&#24615;&#33021;&#25552;&#39640;&#12290;</p><p>&#20174;Spring
1.2.x&#21319;&#32423;&#26159;&#21542;&#24179;&#28369;&#21462;&#20915;&#20110;&#20320;&#22312;&#20195;&#30721;&#20013;&#20351;&#29992;&#20102;&#22810;&#23569;Spring API&#12290;Spring 2.0&#21024;&#38500;&#20102;&#22312;Spring
1.2.x&#20195;&#30721;&#20013;&#26631;&#27880;&#20026;&#8220;deprecated&#8221;&#30340;&#32477;&#22823;&#37096;&#20998;&#31867;&#21644;&#26041;&#27861;&#65292;&#22240;&#27492;&#22914;&#26524;&#20320;&#20351;&#29992;&#20102;&#36825;&#20123;&#31867;&#25110;&#32773;&#26041;&#27861;&#65292;&#20320;&#24403;&#28982;&#24471;&#20351;&#29992;&#26367;&#20195;&#30340;&#31867;&#21644;&#26041;&#27861;&#65288;&#19979;&#38754;&#26377;&#19968;&#20010;&#21015;&#34920;&#65289;&#12290;
</p><p>&#22312;&#37197;&#32622;&#26041;&#38754;&#65292;Spring 1.2.x&#39118;&#26684;&#30340;XML&#37197;&#32622;&#26159;100%&#20449;&#24515;&#20445;&#35777;&#21644;Spring 2.5&#20860;&#23481;&#30340;&#12290;&#24403;&#28982;&#22914;&#26524;&#20320;&#36824;&#22312;&#20351;&#29992;Spring 1.2.x DTD&#65292;&#20320;&#27809;&#21150;&#27861;&#20351;&#29992;&#19968;&#20123;&#26032;&#30340;Spring 2.0&#21151;&#33021;(&#20363;&#22914;<a href="#new-in-2-ioc-scopes" title="2.2.1.&nbsp;&#26032;&#30340;bean&#20316;&#29992;&#22495;">scopes</a> &#65292; <a href="#new-in-2-aop-configuration" title="2.3.1.&nbsp;&#26356;&#21152;&#31616;&#21333;&#30340;AOP XML&#37197;&#32622;">easier AOP</a> &#21644; <a href="#new-in-2-middle-tier-transaction-configuration" title="2.4.1.&nbsp;&#22312;XML&#37324;&#26356;&#20026;&#31616;&#21333;&#30340;&#22768;&#26126;&#24615;&#20107;&#21153;&#37197;&#32622;">transaction
    configuration</a>)&#65292;&#20294;&#26159;&#27809;&#26377;&#20160;&#20040;&#20250;&#20986;&#38169;&#12290;</p><p>&#24314;
&#35758;&#30340;&#21319;&#32423;&#31574;&#30053;&#26159;&#23558;Spring 2.5
jar&#25918;&#20837;&#65292;&#20197;&#24471;&#21040;&#26032;&#29256;&#26412;&#30340;&#22909;&#22788;&#65288;&#20363;&#22914;bug&#20462;&#27491;&#65292;&#20248;&#21270;&#65292;&#31561;&#31561;&#65289;&#12290;&#28982;&#21518;&#65292;&#20197;&#19968;&#31181;&#24490;&#24207;&#28176;&#36827;&#30340;&#26041;&#24335;&#65292;&#24320;&#22987;&#36873;&#25321;&#20351;&#29992;&#26032;&#30340;Spring
2.5&#21151;&#33021;&#21644;&#37197;&#32622;&#12290;&#20363;&#22914;&#65292;&#20320;&#21487;&#20197;&#24320;&#22987;&#29992;&#26032;&#30340;Spring 2&#39118;&#26684;&#26469;&#37197;&#32622;&#20320;&#30340;aspects&#65292;&#23436;&#20840;&#21487;&#20197;&#23558;&#20854;&#20013;&#30340;90%&#20173;&#28982;&#20351;&#29992;&#32769;&#30340;Spring
1.2.x&#37197;&#32622;&#65288;&#24341;&#29992;1.2.x DTD&#65289;,&#21097;&#19979;&#30340;10%&#20351;&#29992;&#26032;&#30340;Spring 2 &#37197;&#32622;&#65288;&#24341;&#29992;2.0/2.5
DTD&#25110;&#32773;XSD&#65289;&#12290;&#35760;&#20303;&#65292;&#23558;Spring 2.5&#31867;&#24211;&#26367;&#25442;&#21518;&#65292;&#20320;&#24182;&#19981;&#26159;&#38750;&#24471;&#21319;&#32423;&#20320;&#30340;XML&#37197;&#32622;&#19981;&#21487;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="new-in-2-migrating-changes"></a>2.7.1.&nbsp;&#25913;&#21464;</h3></div></div><div></div></div><p>&#22914;&#38656;&#20102;&#35299;&#20840;&#37096;&#21464;&#21270;&#65292;&#35831;&#21442;&#32771;Spring Framework 2.0&#21457;&#24067;&#21253;&#39030;&#23618;&#30446;&#24405;&#37324;&#30340;<tt class="filename">'changelog.txt'</tt>&#25991;&#20214;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="new-in-2-migrating-jdk"></a>2.7.1.1.&nbsp;&#25903;&#25345;&#30340;JDK&#29256;&#26412;</h4></div></div><div></div></div><p>Spring 2.5&#23545;JDK 1.3&#24050;&#32463;&#19981;&#20877;&#25903;&#25345;&#65292;&#22240;&#20026;Sun&#23448;&#26041;&#20174;2006&#26202;&#26399;&#24050;&#32463;&#27491;&#24335;&#23558;JDK 1.3&#28120;&#27760;&#12290;&#35831;&#21319;&#32423;&#21040;JDK 1.4.2&#25110;&#26356;&#39640;&#29256;&#26412;&#12290;</p><p>&#22914;&#26524;&#20320;&#24517;&#39035;&#20351;&#29992;&#21482;&#25903;&#25345;JDK 1.3&#30340;&#24212;&#29992;&#26381;&#21153;&#22120;&#65292;&#20363;&#22914;WebSphere 4.0&#25110;5.0&#65292;&#25105;&#20204;&#24314;&#35758;&#20320;&#20351;&#29992;Spring Framework&#29256;&#26412;2.0.7/2.0.8&#65292;&#23427;&#20204;&#20173;&#28982;&#25903;&#25345;JDK 1.3&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="new-in-2-migrating-packaging"></a>2.7.1.2.&nbsp;Spring 2.5&#30340;Jar&#25171;&#21253;</h4></div></div><div></div></div><p>&#22312;Spring 2.5&#20013;&#65292; Spring Web MVC &#19981;&#20877;&#26159;
        <tt class="filename">'spring.jar'</tt> &#25991;&#20214;&#30340;&#19968;&#37096;&#20998;. Spring MVC&#20197;<tt class="filename">'spring-webmvc.jar'</tt>
        &#21644;<tt class="filename">'spring-webmvc-portlet.jar'</tt>&#25991;&#20214;&#24418;&#24335;&#22312;&#21457;&#34892;&#21253;&#30340; <tt class="literal">lib/modules</tt> &#30446;&#24405;&#20013;&#23384;&#22312;&#12290;
        &#21478;&#22806;&#65292;&#23545;Struts 1.x&#30340;&#25903;&#25345;&#34987;&#29420;&#31435;&#25104; <tt class="filename">'spring-webmvc-struts.jar'</tt>&#12290;</p><p><span class="emphasis"><em>&#27880;&#24847;: &#32463;&#24120;&#34987;&#20351;&#29992;&#30340;Spring&#30340;<tt class="classname">DispatcherServlet</tt>&#20063;&#26159;Spring Web MVC&#26694;&#26550;&#30340;&#19968;&#37096;&#20998;&#12290;</em></span> &#22240;&#27492;&#65292;&#23601;&#31639;&#20320;&#21482;&#26159;&#20026;&#20102;&#36828;&#31243;&#35775;&#38382;&#65288;&#20363;&#22914;&#65292;&#26292;&#38706;Hessian&#25110;&#32773; HTTP&#35843;&#29992;&#26381;&#21153;&#65289;&#32780;&#20351;&#29992;<tt class="classname">DispatcherServlet</tt>,&#20320;&#20063;&#24471;&#23558;<tt class="filename">'spring-webmvc.jar'</tt>(&#25110;&#32773; <tt class="filename">'spring-webmvc-portlet/struts.jar'</tt>)&#25918;&#21040;<tt class="filename">'spring.jar'</tt>&#26049;&#36793;&#21435;&#12290;</p><p>Spring 2.0&#30340; <tt class="filename">'spring-jmx.jar'</tt>
        &#21644; <tt class="filename">'spring-remoting.jar'</tt>&#24050;&#32463;&#34987;&#36716;&#31227;&#21040; Spring 2.5&#30340;<tt class="filename">'spring-context.jar'</tt>
        (&#38024;&#23545; JMX &#21644;&#38750;HTTP &#36828;&#31243;&#25903;&#25345;)&#65292;&#37096;&#20998;&#36716;&#31227;&#21040;
        <tt class="filename">'spring-web.jar'</tt>
        (&#38024;&#23545;HTTP &#36828;&#31243;&#25903;&#25345;)&#12290;</p><p>Spring 2.0&#30340; <tt class="filename">'spring-support.jar'</tt>
        &#34987;&#25913;&#21517;&#20026; <tt class="filename">'spring-context-support.jar'</tt>,
        &#26356;&#22909;&#30340;&#34920;&#36798;&#20854;&#30495;&#23454;&#21547;&#20041;&#12290;
        <tt class="filename">'spring-portlet.jar'</tt> &#34987;&#25913;&#21517;&#20026; <tt class="filename">'spring-webmvc-portlet.jar'</tt>,&#34920;&#26126;&#23427;&#26159;Spring Web MVC framework&#30340;&#23376;&#27169;&#22359;&#20043;&#19968;&#12290;
        &#31867;&#20284;&#30340;, <tt class="filename">'spring-struts.jar'</tt>
        &#34987;&#25913;&#20026;<tt class="filename">'spring-webmvc-struts.jar'</tt>&#12290;
        </p><p>Spring 2.0&#30340;<tt class="filename">'spring-jdo.jar'</tt>,
        <tt class="filename">'spring-jpa.jar'</tt>,
        <tt class="filename">'spring-hibernate3.jar'</tt>,
        <tt class="filename">'spring-toplink.jar'</tt>
        &#21644; <tt class="filename">'spring-ibatis.jar'</tt>
        &#34987;&#21512;&#24182;&#21040;Spring 2.5&#22823;&#31890;&#24230;&#30340;<tt class="filename">'spring-orm.jar'</tt>&#20013;&#12290;</p><p>Spring 2.5&#30340; <tt class="filename">'spring-test.jar'</tt>
&#21462;&#20195;&#20102;<tt class="filename">'spring-mock.jar'</tt>,&#34920;&#36798;&#20854;&#23545;test context framework&#30340;&#24378;&#28872;&#20851;&#27880;&#12290;
        &#27880;&#24847; <tt class="filename">'spring-test.jar'</tt>
&#21253;&#21547;&#20102;&#19978;&#20010;&#29256;&#26412; <tt class="filename">'spring-mock.jar'</tt>&#20013;&#30340;&#19968;&#20999;&#65292;&#22240;&#27492;&#22914;&#26524;&#26159;&#21333;&#20803;&#25110;&#38598;&#25104;&#27979;&#35797;&#65292;&#21487;&#20197;&#30452;&#25509;&#21462;&#20195;&#12290;</p><p>Spring 2.5&#30340; <tt class="filename">'spring-tx.jar'</tt>
        &#21462;&#20195;&#20102; <tt class="filename">'spring-dao.jar'</tt>
        &#21644;<tt class="filename">'spring-jca.jar'</tt> &#25991;&#20214;&#65292;&#34920;&#36798;&#20854;&#23545;transaction framework&#30340;&#24378;&#28872;&#20851;&#27880;&#12290;</p><p>Spring 2.5 &#23558;&#20854;jar&#25991;&#20214;&#30452;&#25509;&#20316;&#20026;OSGi&#20860;&#23481;&#30340;bundle&#12290;&#36825;&#20351;&#24471;&#22312;OSGi&#29615;&#22659;&#20013;&#20351;&#29992;Spring &#26356;&#21152;&#26041;&#20415;&#65292;&#19981;&#20877;&#38656;&#35201;&#23450;&#21046;&#25171;&#21253;&#20102;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="new-in-2-migrating-xml-configuration"></a>2.7.1.3.&nbsp;XML&#37197;&#32622;</h4></div></div><div></div></div><p>Spring 2.0&#30340;XSD&#22312;&#25551;&#36848;Spring XML&#20803;&#25968;&#25454;&#26684;&#24335;&#26041;&#38754;&#27604;&#20808;&#21069;&#30340;DTD&#26356;&#20016;&#23500;&#12290;
		    &#26087;&#30340;DTD&#20173;&#28982;&#24471;&#21040;&#25903;&#25345;&#65292;&#20294;&#22914;&#26524;&#21487;&#33021;&#25105;&#20204;&#40723;&#21169;&#22312;bean&#23450;&#20041;&#25991;&#20214;&#22836;&#37096;&#24341;&#29992;XSD&#25991;&#20214;&#12290;</p><p>&#26377;&#19968;&#28857;&#34987;&#25913;&#21464;&#20102;&#65292;&#37027;&#23601;&#26159;&#23450;&#20041;bean&#20316;&#29992;&#22495;&#30340;&#26041;&#24335;&#12290;&#22914;&#26524;&#20320;&#20351;&#29992;&#30340;&#26159;Spring 1.2 DTD&#65292;&#37027;&#20040;&#20320;&#33021;&#32487;&#32493;&#29992;<tt class="literal">'singleton'</tt>&#23646;&#24615;&#12290;
		    &#22914;&#26524;&#20320;&#36873;&#25321;<a href="#new-in-2-ioc-configuration" title="2.2.2.&nbsp;&#26356;&#31616;&#21333;&#30340;XML&#37197;&#32622;">&#24341;&#29992;&#26032;&#30340;Spring 2.0 DTD</a>&#65292;&#23427;&#19981;&#20801;&#35768;&#20351;&#29992;<tt class="literal">'singleton'</tt>&#23646;&#24615;&#65292;
		    &#37027;&#20040;&#21487;&#20197;&#29992;<tt class="literal">'scope'</tt>&#23646;&#24615;&#26469;&#23450;&#20041;bean&#30340;&#29983;&#21629;&#21608;&#26399;&#20316;&#29992;&#22495;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="new-in-2-migrating-deprecated"></a>2.7.1.4.&nbsp;Deprecated&#65288;&#28120;&#27760;&#65289;&#30340;&#31867;&#21644;&#26041;&#27861;</h4></div></div><div></div></div><p>&#19968;&#20123;&#20197;&#21069;&#34987;&#26631;&#35760;&#20026;<tt class="literal">@deprecated</tt>&#30340;&#31867;&#21644;&#26041;&#27861;Spring 2.0&#20195;&#30721;&#24211;&#20013;&#34987;&#23436;&#20840;&#21024;&#38500;&#20102;&#12290;
		    Spring&#22242;&#38431;&#20915;&#23450;&#25226;2.0&#29256;&#26412;&#20316;&#20026;&#19968;&#20010;&#26032;&#30340;&#24320;&#22987;&#65292;&#37027;&#20123;&#34987;deprecated&#30340;&#20195;&#30721;&#24212;&#35813;&#34987;&#38500;&#21435;&#32780;&#19981;&#26159;&#22312;&#21487;&#39044;&#35265;&#30340;&#26410;&#26469;&#32487;&#32493;&#22312;&#20195;&#30721;&#20013;&#20986;&#29616;&#12290;</p><p>&#22914;&#21069;&#25152;&#36848;&#65292;&#22914;&#38656;&#20102;&#35299;&#20840;&#37096;&#21464;&#21270;&#65292;&#35831;&#21442;&#32771;Spring Framework 2.0&#21457;&#24067;&#21253;&#39030;&#23618;&#30446;&#24405;&#37324;&#30340;<tt class="filename">'changelog.txt'</tt>&#25991;&#20214;&#12290;</p><p>&#19979;&#38754;&#30340;&#31867;/&#25509;&#21475;&#24050;&#32463;&#20174;Spring 2.0&#30340;&#20195;&#30721;&#20013;&#21024;&#38500;&#20102;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="interfacename">ResultReader</tt> : &#20351;&#29992;<tt class="interfacename">RowMapper</tt>&#25509;&#21475;&#20195;&#26367;&#12290;</p></li><li><p><tt class="classname">BeanFactoryBootstrap</tt> : &#32771;&#34385;&#20351;&#29992;&#19968;&#20010;<tt class="interfacename">BeanFactoryLocator</tt>
                    &#25110;&#26159;&#33258;&#23450;&#20041;&#24341;&#23548;&#31867;&#20195;&#26367;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="new-in-2-migrating-ojb"></a>2.7.1.5.&nbsp;Apache OJB</h4></div></div><div></div></div><p>Spring 2.0&#24320;&#22987;&#65292;&#35831;&#27880;&#24847;Spring&#20027;&#20195;&#30721;&#20013;&#30340;Apache OJB&#25903;&#25345;&#34987;<span class="emphasis"><em>&#23436;&#20840;&#21024;&#38500;</em></span>&#20102;&#65307;
		    &#20294;&#20173;&#28982;&#21487;&#20197;&#22312;<a href="https://springmodules.dev.java.net/" target="_top">Spring Modules&#39033;&#30446;</a>&#20013;&#25214;&#21040;Apache OJB&#30340;&#38598;&#25104;&#24211;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="new-in-2-migrating-ibatis"></a>2.7.1.6.&nbsp;iBATIS</h4></div></div><div></div></div><p>&#35831;&#27880;&#24847;iBATIS SQL Maps 1.3&#25903;&#25345;&#34987;&#23436;&#20840;&#21435;&#38500;&#20102;&#12290;&#22914;&#26524;&#20320;&#36824;&#22312;&#20351;&#29992;iBATIS SQL Maps 1.3&#65292;
		    &#35831;&#21319;&#32423;&#21040;iBATIS SQL Maps 2.0/2.1&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="new-in-2-migrating-hibernate"></a>2.7.1.7.&nbsp;Hibernate</h4></div></div><div></div></div><p>Spring 2.5&#20013;&#65292;&#23545; Hibernate 2.1 &#21644; Hibernate 3.0
        &#30340;&#25903;&#25345;&#24050;&#32463;&#21435;&#38500;&#12290;&#35831;&#21319;&#32423;&#21040;Hibernate 3.1&#25110;&#26356;&#39640;&#29256;&#26412;&#12290;</p><p>&#22914;&#26524;&#20320;&#38656;&#35201;&#32487;&#32493;&#20351;&#29992;Hibernate 2.1&#25110;3.0&#65292;&#25105;&#20204;&#24314;&#35758;&#20320;&#32487;&#32493;&#20351;&#29992;Spring 2.0.7/2.0.8&#65292;&#36825;&#20123;&#29256;&#26412;&#20173;&#28982;&#25903;&#25345;Hibernate&#30340;&#37027;&#20123;&#29256;&#26412;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="new-in-2-migrating-jdo"></a>2.7.1.8.&nbsp;JDO</h4></div></div><div></div></div><p>Spring 2.5&#20013;&#65292;&#23545;JDO 1.0 &#30340;&#25903;&#25345;&#34987;&#21435;&#38500;&#12290;&#35831;&#21319;&#32423;&#21040;JDO 2.0&#25110;&#26356;&#39640;&#29256;&#26412;&#12290;</p><p>&#22914;&#26524;&#20320;&#38656;&#35201;&#32487;&#32493;&#20351;&#29992;JDO 1.0&#65292;&#25105;&#20204;&#24314;&#35758;&#20320;&#32487;&#32493;&#20351;&#29992;spring 2.0.7/2.0.8&#65292;&#36825;&#20123;&#29256;&#26412;&#20173;&#28982;&#25903;&#25345;JDO 1.0&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="new-in-2-migrating-UrlFilenameViewController"></a>2.7.1.9.&nbsp;<tt class="classname">UrlFilenameViewController</tt></h4></div></div><div></div></div><p>&#20174;Spring 2.0&#36215;&#65292;<tt class="classname">UrlFilenameViewController</tt>&#25152;&#20915;&#23450;&#30340;view&#21517;&#23383;&#29616;&#22312;&#32771;&#34385;&#20102;request&#20013;&#30340;&#23884;&#22871;&#36335;&#24452;&#12290;&#36825;&#26159;&#23545;&#21407;&#22987; <tt class="classname">UrlFilenameViewController</tt>&#32422;&#23450;&#30340;&#37325;&#22823;&#20462;&#25913;&#65292;&#24847;&#21619;&#30528;&#22914;&#26524;&#20320;&#20174;Spring 1.x&#21319;&#32423;&#21040;Spring 2.x&#65292;&#24182;&#19988;&#20320;&#22312;&#20351;&#29992;&#36825;&#20010;&#31867;&#65292;&#20320;<span class="emphasis"><em>&#21487;&#33021;</em></span>&#24517;&#39035;&#23567;&#23567;&#30340;&#20462;&#25913;&#20320;&#30340;Spring Web MVC&#37197;&#32622;&#12290;&#35831;&#21442;&#32771;<tt class="classname">UrlFilenameViewController</tt> &#30340;&#31867;Javadoc&#65292;&#26469;&#26597;&#30475;&#26032;&#30340;view name determination&#30340;&#32422;&#23450;&#30340;&#31034;&#20363;&#12290;</p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="new-in-2-other-applications"></a>2.8.&nbsp;&#26356;&#26032;&#30340;&#26679;&#20363;&#24212;&#29992;</h2></div></div><div></div></div><p>&#25105;&#20204;&#21516;&#26679;&#26356;&#26032;&#20102;&#19968;&#20123;&#26679;&#20363;&#24212;&#29992;&#20197;&#21453;&#26144;Spring 2.0&#30340;&#26032;&#29305;&#24615;&#19982;&#25913;&#36827;&#29305;&#24615;&#65292;&#35831;&#25277;&#20986;&#26102;&#38388;&#20180;&#32454;&#30740;&#31350;&#12290;
    &#19978;&#36848;&#26679;&#20363;&#25918;&#22312;Spring&#23436;&#25972;&#21457;&#34892;&#29256;&#37324;&#30340;<tt class="filename">'samples'</tt>&#36335;&#24452;&#19979;
    &#65288;<tt class="filename">'spring-with-dependecies.[zip|tar.gz]'</tt>&#65289;&#65292;&#22312;<a href="#showcases" title="Chapter&nbsp;26.&nbsp;&#28436;&#31034;&#26696;&#20363;">Chapter&nbsp;26, <i>&#28436;&#31034;&#26696;&#20363;</i></a>&#31456;&#33410;&#20013;&#26377;&#37096;&#20998;&#25991;&#26723;&#12290;</p><p>Spring
2.5 &#38468;&#24102;&#26377;PetClinic&#21644;PetPortal&#30340;&#25913;&#36827;&#36807;&#30340;&#31034;&#20363;&#31243;&#24207;&#65292;&#24443;&#24213;&#20174;&#22836;&#25913;&#20889;&#36807;&#65292;&#29992;&#20110;&#23637;&#31034;Spring
2.5&#30340;&#27880;&#35299;&#37197;&#32622;&#21151;&#33021;&#12290;&#23427;&#20063;&#20351;&#29992;&#20102;Java 5 autoboxing,&#27867;&#22411;&#65292;varargs&#21644;&#23545;&#24490;&#29615;&#30340;&#24378;&#21270;&#12290;&#24517;&#39035;&#20351;&#29992;Java 5&#25110;&#32773;6
SDK&#25165;&#33021;&#26500;&#24314;&#21644;&#36816;&#34892;&#36825;&#20123;&#31034;&#20363;&#12290;&#26597;&#30475;PetClinic&#21644;PetPortal&#65292;&#26469;&#35753;Spring 2.5&#25152;&#25552;&#20379;&#30340;&#21151;&#33021;&#32473;&#20320;&#30041;&#19979;&#28145;&#21051;&#21360;&#35937;&#21543;&#65281;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="new-in-2-other-documentation"></a>2.9.&nbsp;&#25913;&#36827;&#30340;&#25991;&#26723;</h2></div></div><div></div></div><p>Spring&#21442;&#32771;&#25991;&#26723;&#29702;&#25152;&#24403;&#28982;&#30340;&#36827;&#34892;&#20102;&#20805;&#20998;&#30340;&#26356;&#26032;&#65292;&#20197;&#21453;&#26144;&#19978;&#36848;Spring 2.0&#21644;2.5&#30340;&#26032;&#29305;&#24615;&#12290;&#23613;&#31649;&#25105;&#20204;&#31469;&#23613;&#25152;&#33021;&#21147;&#20105;&#36825;&#20221;&#25991;&#26723;&#19981;&#20250;&#20986;&#29616;&#38169;&#35823;&#65292;&#20294;&#26159;&#20154;&#38750;&#22307;&#36132;&#65292;&#38169;&#35823;&#22312;&#25152;&#38590;&#20813;&#12290;
		&#22914;&#26524;&#24744;&#21457;&#29616;&#20102;&#19968;&#20123;&#25171;&#21360;&#25490;&#29256;&#25110;&#32773;&#26356;&#20005;&#37325;&#30340;&#38169;&#35823;&#65292;&#24182;&#21487;&#20197;&#25277;&#20986;&#19968;&#20123;&#31354;&#38386;&#26102;&#38388;&#26469;&#30340;&#35805;&#65292;
		&#35831;&#36890;&#36807; <a href="http://opensource.atlassian.com/projects/spring/" target="_top">&#38382;&#39064;&#25552;&#20132;</a> &#25226;&#38169;&#35823;&#21457;&#32473;Spring&#22242;&#38431;&#12290;</p><p>&#29305;&#21035;&#24863;&#35874;Arthur Loder&#65292;&#35874;&#35874;&#20182;&#19981;&#36766;&#36763;&#21171;&#22320;&#26657;&#23545;Spring Framework&#30340;&#21442;&#32771;&#25991;&#26723;&#21644;Javadocs&#12290;</p></div></div><div class="part" lang="en"><div class="titlepage"><div><div><h1 class="title"><a name="spring-core"></a>&#26680;&#24515;&#25216;&#26415;</h1></div></div><div></div></div><div class="partintro" lang="en"><div><div></div><div></div></div><p>
				&#36825;&#20010;&#24320;&#21457;&#25163;&#20876;&#30340;&#31532;&#19968;&#37096;&#20998;&#25551;&#36848;&#20102;Spring Framework&#25152;&#26377;&#20351;&#29992;&#21040;&#30340;&#25216;&#26415;&#39046;&#22495;&#12290;
			</p><p>
				&#39318;&#20808;&#26159;Spring Framework&#20013;&#30340;&#25511;&#21046;&#32763;&#36716;&#65288;IoC&#65289;&#23481;&#22120;&#12290;&#22312;&#23436;&#25972;&#30340;&#38416;&#36848;&#20102;Spring Framework&#30340;IoC&#23481;&#22120;&#21518;&#32039;&#36319;&#30340;&#26159;&#23545;Spring&#30340;&#38754;&#21521;&#26041;&#38754;&#32534;&#31243;&#65288;AOP&#65289;&#25216;&#26415;&#30340;&#20840;&#38754;&#35828;&#26126;&#12290;
				Spring Framework&#25317;&#26377;&#33258;&#24049;&#30340;AOP&#26694;&#26550;&#65292;&#36825;&#20010;&#26694;&#26550;&#22312;&#27010;&#24565;&#19978;&#26159;&#21313;&#20998;&#23481;&#26131;&#29702;&#35299;&#30340;&#65292;&#32780;&#19988;&#23427;&#25104;&#21151;&#22320;&#23454;&#29616;&#20102;&#22312;Java&#20225;&#19994;&#32423;&#24320;&#21457;&#20013;&#23545;AOP&#38656;&#27714;&#30340;80%&#24038;&#21491;&#12290;
			</p><p>
				&#24320;&#21457;&#25163;&#20876;&#20013;&#36824;&#25551;&#36848;&#20102;Spring&#19982;AspectJ&#30340;&#38598;&#25104;&#26041;&#27861;&#12290;
				&#65288;&#24403;&#21069;&#26469;&#35828;,AspectJ&#26159;Java&#20225;&#19994;&#32423;&#24320;&#21457;&#39046;&#22495;&#20013;&#29305;&#24615;&#26368;&#22810;&#12289;&#26368;&#25104;&#29087;&#30340;AOP&#23454;&#29616;&#12290;&#65289;
			</p><p>
			    &#26368;&#21518;&#65292;Spring&#23567;&#32452;&#25552;&#20513;&#22312;&#36719;&#20214;&#24320;&#21457;&#20013;&#36816;&#29992;&#27979;&#35797;&#39537;&#21160;&#24320;&#21457;&#65288;TDD&#65289;&#26041;&#27861;&#65292;&#25152;&#20197;&#22312;&#26368;&#21518;&#28085;&#30422;&#20102;Spring&#23545;&#38598;&#25104;&#27979;&#35797;&#30340;&#25903;&#25345;&#65288;&#21253;&#25324;&#21333;&#20803;&#27979;&#35797;&#30340;&#26368;&#20339;&#23454;&#36341;&#65289;&#12290;
			    Spring&#23567;&#32452;&#21457;&#29616;&#27491;&#30830;&#20351;&#29992;IoC&#21487;&#20197;&#35753;&#21333;&#20803;&#27979;&#35797;&#21644;&#38598;&#25104;&#27979;&#35797;&#26356;&#23481;&#26131;&#36827;&#34892;&#65288;&#22312;&#31867;&#20013;&#23450;&#20041;setter&#26041;&#27861;&#21644;&#36866;&#24403;&#30340;&#26500;&#36896;&#26041;&#27861;&#35753;java&#31867;&#26356;&#23481;&#26131;&#22320;&#19982;&#27979;&#35797;&#32852;&#31995;&#36215;&#26469;&#65292;
			    &#32780;&#19981;&#29992;&#35774;&#32622;&#26381;&#21153;&#23450;&#20301;&#27880;&#20876;&#25110;&#31867;&#20284;&#30340;&#19996;&#35199;&#65289;&#8230;&#8230;&#24076;&#26395;&#20165;&#19987;&#27880;&#20110;&#27979;&#35797;&#30340;"&#21516;&#23398;"&#20204;&#65292;&#36825;&#19968;&#31456;&#19968;&#23450;&#20250;&#35753;&#20320;&#26377;&#25152;&#25910;&#33719;&#12290;
			</p><div class="itemizedlist"><ul type="disc"><li><p><a href="#beans" title="Chapter&nbsp;3.&nbsp;IoC(&#25511;&#21046;&#21453;&#36716;)&#23481;&#22120;">Chapter&nbsp;3, <i>IoC(&#25511;&#21046;&#21453;&#36716;)&#23481;&#22120;</i></a></p></li><li><p><a href="#resources" title="Chapter&nbsp;4.&nbsp;&#36164;&#28304;">Chapter&nbsp;4, <i>&#36164;&#28304;</i></a></p></li><li><p><a href="#validation" title="Chapter&nbsp;5.&nbsp;&#26657;&#39564;&#65292;&#25968;&#25454;&#32465;&#23450;&#65292;BeanWrapper&#65292;&#19982;&#23646;&#24615;&#32534;&#36753;&#22120;">Chapter&nbsp;5, <i>&#26657;&#39564;&#65292;&#25968;&#25454;&#32465;&#23450;&#65292;BeanWrapper&#65292;&#19982;&#23646;&#24615;&#32534;&#36753;&#22120;</i></a></p></li><li><p><a href="#aop" title="Chapter&nbsp;6.&nbsp;&#20351;&#29992;Spring&#36827;&#34892;&#38754;&#21521;&#20999;&#38754;&#32534;&#31243;&#65288;AOP&#65289;">Chapter&nbsp;6, <i>&#20351;&#29992;Spring&#36827;&#34892;&#38754;&#21521;&#20999;&#38754;&#32534;&#31243;&#65288;AOP&#65289;</i></a></p></li><li><p><a href="#aop-api" title="Chapter&nbsp;7.&nbsp;Spring AOP APIs">Chapter&nbsp;7, <i>Spring AOP APIs</i></a></p></li><li><p><a href="#testing" title="Chapter&nbsp;8.&nbsp;&#27979;&#35797;">Chapter&nbsp;8, <i>&#27979;&#35797;</i></a></p></li></ul></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="beans"></a>Chapter&nbsp;3.&nbsp;IoC(&#25511;&#21046;&#21453;&#36716;)&#23481;&#22120;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="beans-introduction"></a>3.1.&nbsp;&#31616;&#20171;</h2></div></div><div></div></div><p>&#26412;&#31456;&#35206;&#30422;&#20102;Spring&#26694;&#26550;&#23545;&#25511;&#21046;&#21453;&#36716;(Inversion of Control&#65292;IoC)<sup>[<a name="d0e1159" href="#ftn.d0e1159">1</a>]</sup>&#29702;&#35770;&#30340;&#23454;&#29616;&#12290;</p><div class="sidebar"><p class="title"><b><tt class="interfacename">BeanFactory</tt> &#36824;&#26159;
      <tt class="interfacename">ApplicationContext</tt>?</b></p><p>&#22312;&#23454;&#38469;&#24212;&#29992;&#20013;&#65292;&#29992;&#25143;&#26377;&#26102;&#20505;&#19981;&#30693;&#36947;&#21040;&#24213;&#26159;&#36873;&#25321;<tt class="interfacename">BeanFactory</tt>&#25509;&#21475;
      &#36824;&#26159;<tt class="interfacename">ApplicationContext</tt>&#25509;&#21475;&#12290; 
      <tt class="interfacename">BeanFactory</tt>&#25509;&#21475;&#25797;&#38271;&#20110;&#22788;&#29702;bean&#30340;&#21021;&#22987;&#21270;&#21644;&#37197;&#32622;&#65292;&#32780;<tt class="interfacename">
      ApplicationContext</tt>&#25509;&#21475;&#38500;&#20102;&#22788;&#29702;&#19978;&#36848;&#24037;&#20316;&#22806;&#65292;&#23427;<span class="emphasis"><em>&#36824;</em></span>&#38024;&#23545;&#20225;&#19994;&#24341;&#29992;
      &#25552;&#20379;&#20102;<span class="emphasis"><em>&#35768;&#22810;</em></span>&#22522;&#30784;&#25903;&#25345;&#65292;&#27604;&#22914;&#20107;&#21153;&#22788;&#29702;&#21644;AOP&#12290;</p><p><span class="bold"><b>&#31616;&#32780;&#35328;&#20043;&#65292;&#19968;&#33324;&#25226;<tt class="interfacename">ApplicationContext</tt>&#25509;
      &#21475;&#20316;&#20026;&#39318;&#36873;&#12290;</b></span></p><p>&#65288;&#33267;&#20110;&#36825;&#26679;&#20570;&#30340;&#21407;&#30001;&#65292;&#22823;&#23478;&#21487;&#21442;&#35265;<a href="#context-introduction-ctx-vs-beanfactory" title="3.8.1.&nbsp;BeanFactory &#36824;&#26159;
      ApplicationContext?">&#31456;&#33410;&#20869;&#23481;</a>&#12290;&#65289;</p></div><p><tt class="literal">org.springframework.beans</tt>&#21450;<tt class="literal">org.springframework.context</tt>&#21253;
	&#26159;Spring IoC&#23481;&#22120;&#30340;&#22522;&#30784;&#12290;<tt class="interfacename"><a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/beans/factory/BeanFactory.html" target="_top">BeanFactory</a>
	</tt>&#25552;&#20379;&#30340;&#39640;&#32423;&#37197;&#32622;&#26426;&#21046;&#65292;&#20351;&#24471;&#31649;&#29702;&#21508;&#31181;&#23545;&#35937;&#25104;&#20026;&#21487;&#33021;&#12290;<tt class="literal">
	<a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/context/ApplicationContext.html" target="_top">ApplicationContext</a></tt>
	&#26159;<tt class="interfacename">BeanFactory</tt>&#30340;&#25193;&#23637;&#65292;&#21151;&#33021;&#24471;&#21040;&#20102;&#36827;&#19968;&#27493;&#22686;&#24378;&#65292;&#27604;&#22914;&#26356;&#26131;
	&#19982;Spring AOP&#38598;&#25104;&#12289;&#36164;&#28304;&#22788;&#29702;(&#22269;&#38469;&#21270;&#22788;&#29702;)&#12289;&#20107;&#20214;&#20256;&#36882;&#21450;&#21508;&#31181;&#19981;&#21516;&#24212;&#29992;&#23618;&#30340;context&#23454;&#29616;
	(&#22914;&#38024;&#23545;web&#24212;&#29992;&#30340;<tt class="interfacename">WebApplicationContext</tt>)&#12290;</p><p>&#31616;&#32780;&#35328;&#20043;&#65292;<tt class="interfacename">BeanFactory</tt>&#25552;&#20379;&#20102;&#37197;&#21046;&#26694;&#26550;&#21450;&#22522;&#26412;&#21151;&#33021;&#65292;&#32780;
  <tt class="interfacename">ApplicationContext</tt>  &#21017;&#22686;&#21152;&#20102;&#26356;&#22810;&#25903;&#25345;&#20225;&#19994;&#26680;&#24515;&#20869;&#23481;&#30340;&#21151;&#33021;&#12290;
  <tt class="interfacename">ApplicationContext</tt>&#23436;&#20840;&#30001;<tt class="interfacename">BeanFactory</tt>&#25193;&#23637;&#32780;&#26469;&#65292;
  &#22240;&#32780;<tt class="interfacename">BeanFactory</tt>&#25152;&#20855;&#22791;&#30340;&#33021;&#21147;&#21644;&#34892;&#20026;&#20063;&#36866;&#29992;&#20110;<tt class="interfacename">ApplicationContext</tt>&#12290;</p><p>&#26412;&#31456;&#20998;&#20026;&#20004;&#37096;&#20221;&#65292;<a href="#beans-basics" title="3.2.&nbsp;&#22522;&#26412;&#21407;&#29702; - &#23481;&#22120;&#21644;bean">&#31532;&#19968;&#37096;&#20221;</a>&#35762;&#35299;<tt class="interfacename">
   BeanFactory</tt>&#21450;<tt class="interfacename">ApplicationContext</tt>&#30340;&#22522;&#26412;&#21407;&#29702;&#65292;
   &#32780;<a href="#context-introduction" title="3.8.&nbsp;The ApplicationContext">&#31532;&#20108;&#37096;&#20221;</a>&#21017;&#38024;&#23545;<tt class="interfacename">ApplicationContext</tt>&#30340;&#21151;&#33021;&#36827;&#34892;&#35762;&#35299;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="beans-basics"></a>3.2.&nbsp;&#22522;&#26412;&#21407;&#29702; - &#23481;&#22120;&#21644;bean</h2></div></div><div></div></div><p>&#22312;Spring&#20013;&#65292;&#37027;&#20123;&#32452;&#25104;&#20320;&#24212;&#29992;&#31243;&#24207;&#30340;&#20027;&#20307;(backbone)&#21450;&#30001;Spring IoC<i class="firstterm">&#23481;&#22120;</i>&#25152;&#31649;&#29702;&#30340;&#23545;&#35937;&#65292;&#34987;&#31216;&#20043;&#20026;<i class="firstterm">bean</i>&#12290;
  &#31616;&#21333;&#22320;&#35762;&#65292;bean&#23601;&#26159;&#30001;Spring<i class="firstterm">&#23481;&#22120;</i>&#21021;&#22987;&#21270;&#12289;&#35013;&#37197;&#21450;&#31649;&#29702;&#30340;&#23545;&#35937;&#65292;&#38500;&#27492;&#20043;&#22806;&#65292;bean&#23601;&#19982;&#24212;&#29992;&#31243;&#24207;&#20013;&#30340;&#20854;&#20182;&#23545;&#35937;&#27809;&#26377;&#20160;&#20040;&#21306;&#21035;&#20102;&#12290;
  &#32780;bean&#23450;&#20041;&#20197;&#21450;bean&#30456;&#20114;&#38388;&#30340;<i class="firstterm">&#20381;&#36182;</i>&#20851;&#31995;&#23558;&#36890;&#36807;<i class="firstterm">&#37197;&#32622;&#20803;&#25968;&#25454;</i>&#26469;&#25551;&#36848;&#12290;</p><div class="sidebar"><p class="title"><b>&#20026;&#20160;&#20040;&#20351;&#29992;<span class="emphasis"><em>bean</em></span>?</b></p><p>&#20351;&#29992;<span class="emphasis"><em>'bean'</em></span>&#36825;&#20010;&#21517;&#23383;&#32780;&#19981;&#26159;<span class="emphasis"><em>'&#32452;&#20214;'(component)</em></span> &#25110;<span class="emphasis"><em>'&#23545;&#35937;'(object)</em></span>&#30340;&#21160;&#26426;
   &#28304;&#20110;Spring&#26694;&#26550;&#26412;&#36523;(&#23427;&#20135;&#29983;&#30340;&#37096;&#20998;&#21407;&#22240;&#23601;&#26159;&#23545;Enterprise Java <span class="emphasis"><em>Beans</em></span>&#22797;&#26434;&#24615;&#30340;&#19968;&#27425;&#35299;&#26500;)&#12290; </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory"></a>3.2.1.&nbsp;&#23481;&#22120;</h3></div></div><div></div></div><p><tt class="interfacename">org.springframework.beans.factory.BeanFactory</tt>
	 &#26159;Spring IoC<span class="emphasis"><em>&#23481;&#22120;</em></span>&#30340;&#23454;&#38469;&#20195;&#34920;&#32773;&#65292;IoC&#23481;&#22120;&#36127;&#36131;&#23481;&#32435;&#27492;&#21069;&#25152;&#25551;&#36848;&#30340;bean&#65292;&#24182;&#23545;bean&#36827;&#34892;&#31649;&#29702;&#12290;</p><p>&#22312;Spring&#20013;&#65292;<tt class="interfacename">BeanFactory</tt>&#26159;IoC&#23481;&#22120;&#30340;&#26680;&#24515;&#25509;&#21475;&#12290;
      &#23427;&#30340;&#32844;&#36131;&#21253;&#25324;&#65306;&#23454;&#20363;&#21270;&#12289;&#23450;&#20301;&#12289;&#37197;&#32622;&#24212;&#29992;&#31243;&#24207;&#20013;&#30340;&#23545;&#35937;&#21450;&#24314;&#31435;&#36825;&#20123;&#23545;&#35937;&#38388;&#30340;&#20381;&#36182;&#12290;</p><p>Spring&#20026;&#25105;&#20204;&#25552;&#20379;&#20102;&#35768;&#22810;&#26131;&#29992;&#30340;<tt class="interfacename">BeanFactory</tt>&#23454;&#29616;&#65292;
	<tt class="classname">XmlBeanFactory</tt>&#23601;&#26159;&#26368;&#24120;&#29992;&#30340;&#19968;&#20010;&#12290;&#35813;&#23454;&#29616;&#23558;&#20197;XML&#26041;&#24335;&#25551;&#36848;&#32452;&#25104;&#24212;&#29992;&#30340;&#23545;&#35937;
	&#20197;&#21450;&#23545;&#35937;&#38388;&#30340;&#20381;&#36182;&#20851;&#31995;&#12290;<tt class="classname">XmlBeanFactory</tt>&#31867;&#23558;&#33719;&#21462;&#27492;XML<i class="firstterm">&#37197;
	&#32622;&#20803;&#25968;&#25454;</i>&#65292;&#24182;&#29992;&#23427;&#26469;&#26500;&#24314;&#19968;&#20010;&#23436;&#20840;&#21487;&#37197;&#32622;&#30340;&#31995;&#32479;&#25110;&#24212;&#29992;&#12290;</p><p>
        </p><div class="mediaobject" align="center"><img src="container-magic.png" align="middle"><div class="caption"><p>Spring IoC &#23481;&#22120;</p></div></div><p>
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-metadata"></a>3.2.1.1.&nbsp;&#37197;&#32622;&#20803;&#25968;&#25454;</h4></div></div><div></div></div><p>&#20174;&#19978;&#22270;&#21487;&#20197;&#30475;&#21040;&#65292;Spring IoC&#23481;&#22120;&#23558;&#35835;&#21462;<span class="emphasis"><em>&#37197;&#32622;&#20803;&#25968;&#25454;</em></span>&#65307;
 		 &#24182;&#36890;&#36807;&#23427;&#23545;&#24212;&#29992;&#20013;&#21508;&#20010;&#23545;&#35937;&#36827;&#34892;&#23454;&#20363;&#21270;&#12289;&#37197;&#32622;&#20197;&#21450;&#32452;&#35013;&#12290;&#36890;&#24120;&#24773;&#20917;&#19979;&#25105;&#20204;&#20351;&#29992;&#31616;&#21333;&#30452;&#35266;
 		 &#30340;XML&#26469;&#20316;&#20026;&#37197;&#32622;&#20803;&#25968;&#25454;&#30340;&#25551;&#36848;&#26684;&#24335;&#12290;&#22312;XML&#37197;&#32622;&#20803;&#25968;&#25454;&#20013;&#25105;&#20204;&#21487;&#20197;&#23545;&#37027;&#20123;&#25105;&#20204;&#24076;&#26395;&#36890;&#36807;
 		 Spring IoC&#23481;&#22120;&#31649;&#29702;&#30340;bean&#36827;&#34892;<span class="emphasis"><em>&#23450;&#20041;</em></span>&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#21040;&#30446;&#21069;&#20026;&#27490;&#65292;&#22522;&#20110;XML&#30340;&#20803;&#25968;&#25454;&#26159;&#26368;&#24120;&#29992;&#21040;&#30340;&#37197;&#32622;&#20803;&#25968;&#25454;&#26684;&#24335;&#12290;&#28982;&#32780;&#65292;&#23427;&#24182;
    	<span class="emphasis"><em>&#19981;&#26159;</em></span>&#21807;&#19968;&#30340;&#25551;&#36848;&#26684;&#24335;&#12290;Spring IoC&#23481;&#22120;&#22312;&#36825;&#19968;&#28857;&#19978;&#26159;<span class="emphasis"><em>
    	&#23436;&#20840;</em></span>&#24320;&#25918;&#30340;&#12290;&#30001;&#20110;&#37319;&#29992;&#22522;&#20110;XML&#30340;&#37197;&#32622;&#20803;&#25968;&#25454;&#26684;&#24335;&#38750;&#24120;&#31616;&#21333;&#65292; &#22240;&#27492;
    	&#26412;&#31456;&#33410;&#30340;&#22823;&#37096;&#20998;&#20869;&#23481;&#23558;&#37319;&#29992;&#35813;&#26684;&#24335;&#26469;&#35828;&#26126;Spring IoC&#23481;&#22120;&#30340;&#20851;&#38190;&#27010;&#24565;&#21644;&#21151;&#33021;</p><p>&#21516;&#26102;&#20320;&#20063;&#21487;&#20197;&#22312;<a href="#beans-annotation-config" title="3.11.&nbsp;&#22522;&#20110;&#27880;&#35299;&#65288;Annotation-based&#65289;&#30340;&#37197;&#32622;">Section&nbsp;3.11, &#8220;&#22522;&#20110;&#27880;&#35299;&#65288;Annotation-based&#65289;&#30340;&#37197;&#32622;&#8221;</a>&#36825;&#19968;&#33410;&#20013;
          &#30475;&#21040;Spring&#23481;&#22120;&#25903;&#25345;&#30340;&#21478;&#19968;&#31181;&#20803;&#25968;&#25454;&#26684;&#24335;&#30340;&#35814;&#32454;&#20869;&#23481;&#12290;</p></td></tr></tbody></table></div></div><div class="sidebar"><p class="title"><b>&#22810;&#31181;&#36164;&#28304;</b></p><p>Spring IoC&#23481;&#22120;&#21487;&#20197;&#36890;&#36807;&#22810;&#31181;&#36884;&#24452;&#26469;&#21152;&#36733;&#37197;&#32622;&#20803;&#25968;&#25454;&#65292;&#27604;&#22914;&#26412;&#22320;&#25991;&#20214;
		&#31995;&#32479;&#12289;Java <tt class="literal">CLASSPATH</tt>&#31561;&#12290;</p><p>&#23545;IoC&#23481;&#22120;&#22522;&#26412;&#21407;&#29702;&#30340;&#25484;&#25569;&#23558;&#26377;&#21033;&#20110;&#25105;&#20204;&#23545;<a href="#resources" title="Chapter&nbsp;4.&nbsp;&#36164;&#28304;">Chapter&nbsp;4, <i>&#36164;&#28304;</i></a>&#20013;
		<tt class="interfacename">Resource</tt>&#25277;&#35937;&#26426;&#21046;&#30340;&#29702;&#35299;&#12290;</p></div><p>&#22312;&#22823;&#22810;&#25968;&#30340;&#24212;&#29992;&#31243;&#24207;&#20013;&#65292;&#24182;&#19981;&#38656;&#35201;&#29992;&#26174;&#24335;&#30340;&#20195;&#30721;&#21435;&#23454;&#20363;&#21270;&#19968;&#20010;&#25110;&#22810;&#20010;&#30340;Spring IoC
	  &#23481;&#22120;&#23454;&#20363;&#12290;&#20363;&#22914;&#65292;&#22312;web&#24212;&#29992;&#31243;&#24207;&#20013;&#65292;&#25105;&#20204;&#21482;&#38656;&#35201;&#22312;<tt class="literal">web.xml</tt>&#20013;&#28155;&#21152;
	  (&#22823;&#32422;)8 &#34892;&#31616;&#21333;&#30340;XML&#25551;&#36848;&#31526;&#21363;&#21487;(&#21442;&#35265;<a href="#context-create" title="3.8.5.&nbsp;ApplicationContext&#22312;WEB&#24212;&#29992;&#20013;&#30340;&#23454;&#20363;&#21270;">Section&nbsp;3.8.5, &#8220;ApplicationContext&#22312;WEB&#24212;&#29992;&#20013;&#30340;&#23454;&#20363;&#21270;&#8221;</a>)&#12290;</p></div><p>Spring IoC&#23481;&#22120;&#33267;&#23569;&#21253;&#21547;&#19968;&#20010;bean&#23450;&#20041;&#65292;&#20294;&#22823;&#22810;&#25968;&#24773;&#20917;&#19979;&#20250;&#26377;&#22810;&#20010;bean&#23450;&#20041;&#12290;&#24403;&#20351;&#29992;
   &#22522;&#20110;XML&#30340;&#37197;&#32622;&#20803;&#25968;&#25454;&#26102;&#65292;&#23558;&#22312;&#39030;&#23618;&#30340;<tt class="literal">&lt;beans/&gt;</tt>&#20803;&#32032;&#20013;&#37197;&#32622;&#19968;&#20010;
   &#25110;&#22810;&#20010;<tt class="literal">&lt;bean/&gt;</tt>&#20803;&#32032;&#12290;</p><p>bean&#23450;&#20041;&#19982;&#24212;&#29992;&#31243;&#24207;&#20013;&#23454;&#38469;&#20351;&#29992;&#30340;&#23545;&#35937;&#19968;&#19968;&#23545;&#24212;&#12290;&#36890;&#24120;&#24773;&#20917;&#19979;bean&#30340;&#23450;&#20041;&#21253;&#25324;&#65306;&#26381;&#21153;
  &#23618;&#23545;&#35937;&#12289;&#25968;&#25454;&#35775;&#38382;&#23618;&#23545;&#35937;&#65288;DAO&#65289;&#12289;&#31867;&#20284;Struts <tt class="interfacename">Action</tt>&#30340;
  &#34920;&#31034;&#23618;&#23545;&#35937;&#12289;Hibernate <tt class="interfacename">SessionFactory</tt>&#23545;&#35937;&#12289;JMS
   <tt class="interfacename">Queue</tt>&#23545;&#35937;&#31561;&#31561;&#12290;&#36890;&#24120;bean&#30340;&#23450;&#20041;&#24182;&#19981;&#19982;&#23481;&#22120;&#20013;&#30340;&#39046;&#22495;
   &#23545;&#35937;&#30456;&#21516;&#65292;&#22240;&#20026;&#39046;&#22495;&#23545;&#35937;&#30340;&#21019;&#24314;&#21644;&#21152;&#36733;&#24517;&#39035;&#20381;&#36182;&#20855;&#20307;&#30340;DAO&#21644;&#19994;&#21153;&#36923;&#36753;&#12290;.</p><p>&#20197;&#19979;&#26159;&#19968;&#20010;&#22522;&#20110;XML&#30340;&#37197;&#32622;&#20803;&#25968;&#25454;&#30340;&#22522;&#26412;&#32467;&#26500;&#65306;</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"&gt;

  &lt;bean id="..." class="..."&gt;
    <i class="lineannotation"><span class="lineannotation">&lt;!-- collaborators and configuration for this bean go here --&gt;</span></i>
  &lt;/bean&gt;

  &lt;bean id="..." class="..."&gt;
    <i class="lineannotation"><span class="lineannotation">&lt;!-- collaborators and configuration for this bean go here --&gt;</span></i>
  &lt;/bean&gt;

  <i class="lineannotation"><span class="lineannotation">&lt;!-- more bean definitions go here --&gt;</span></i>

&lt;/beans&gt;</pre><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-instantiation"></a>3.2.2.&nbsp;&#23454;&#20363;&#21270;&#23481;&#22120;</h3></div></div><div></div></div><p>Spring IoC&#23481;&#22120;&#30340;&#23454;&#20363;&#21270;&#38750;&#24120;&#31616;&#21333;&#65292;&#22914;&#19979;&#38754;&#30340;&#20363;&#23376;&#65306;</p><pre class="programlisting">ApplicationContext context = new ClassPathXmlApplicationContext(
        new String[] {"services.xml", "daos.xml"});

<i class="lineannotation"><span class="lineannotation">// an <tt class="interfacename">ApplicationContext</tt> is also a <tt class="interfacename">BeanFactory</tt> (via inheritance)</span></i>
BeanFactory factory = context;</pre><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-xml-import"></a>3.2.2.1.&nbsp;XML&#37197;&#32622;&#20803;&#25968;&#25454;&#30340;&#32467;&#26500;</h4></div></div><div></div></div><p>&#23558;XML&#37197;&#32622;&#25991;&#20214;&#20998;&#25286;&#25104;&#22810;&#20010;&#37096;&#20998;&#26159;&#38750;&#24120;&#26377;&#29992;&#30340;&#12290;&#20026;&#20102;&#21152;&#36733;&#22810;&#20010;XML&#25991;&#20214;&#29983;&#25104;&#19968;&#20010;
		ApplicationContext&#23454;&#20363;&#65292;&#21487;&#20197;&#23558;&#25991;&#20214;&#36335;&#24452;&#20316;&#20026;&#23383;&#31526;&#20018;&#25968;&#32452;&#20256;&#32473;ApplicationContext&#26500;&#36896;&#22120;
		&#12290;&#32780;bean factory&#23558;&#36890;&#36807;&#35843;&#29992;bean defintion reader&#20174;&#22810;&#20010;&#25991;&#20214;&#20013;&#35835;&#21462;bean&#23450;&#20041;&#12290;</p><p>&#36890;&#24120;&#24773;&#20917;&#19979;&#65292;Spring&#22242;&#38431;&#20542;&#21521;&#20110;&#19978;&#36848;&#20570;&#27861;&#65292;&#22240;&#20026;&#36825;&#26679;&#21508;&#20010;&#37197;&#32622;&#24182;&#19981;&#20250;&#26597;&#35273;&#21040;&#23427;&#20204;
		&#19982;&#20854;&#20182;&#37197;&#32622;&#25991;&#20214;&#30340;&#32452;&#21512;&#12290;&#21478;&#22806;&#19968;&#31181;&#26041;&#27861;&#26159;&#20351;&#29992;&#19968;&#20010;&#25110;&#22810;&#20010;&#30340;<tt class="literal">&lt;import/&gt;</tt>&#20803;&#32032;
		&#26469;&#20174;&#21478;&#22806;&#19968;&#20010;&#25110;&#22810;&#20010;&#25991;&#20214;&#21152;&#36733;bean&#23450;&#20041;&#12290;&#25152;&#26377;&#30340;<tt class="literal">&lt;import/&gt;</tt>&#20803;&#32032;&#24517;
		&#39035;&#22312;<tt class="literal">&lt;bean/&gt;</tt>&#20803;&#32032;&#20043;&#21069;&#23436;&#25104;bean&#23450;&#20041;&#30340;&#23548;&#20837;&#12290; &#35753;&#25105;&#20204;&#30475;&#20010;&#20363;&#23376;&#65306;</p><pre class="programlisting">&lt;beans&gt;

    &lt;import resource="services.xml"/&gt;
    &lt;import resource="resources/messageSource.xml"/&gt;
    &lt;import resource="/resources/themeSource.xml"/&gt;

    &lt;bean id="bean1" class="..."/&gt;
    &lt;bean id="bean2" class="..."/&gt;

&lt;/beans&gt;</pre><p>&#22312;&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#20174;3&#20010;&#22806;&#37096;&#25991;&#20214;&#65306;<tt class="literal">services.xml</tt>&#12289;
		<tt class="literal">messageSource.xml</tt>&#21450;<tt class="literal">themeSource.xml</tt>
		&#26469;&#21152;&#36733;bean&#23450;&#20041;&#12290;&#36825;&#37324;&#37319;&#29992;&#30340;&#37117;&#26159;&#30456;&#23545;&#36335;&#24452;&#65292;&#22240;&#27492;&#65292;&#27492;&#20363;&#20013;&#30340;<tt class="literal">services.xml
		</tt>&#19968;&#23450;&#35201;&#19982;&#23548;&#20837;&#25991;&#20214;&#25918;&#22312;&#21516;&#19968;&#30446;&#24405;&#25110;&#31867;&#36335;&#24452;&#65292;&#32780;<tt class="literal">messageSource.xm
		l</tt>&#21644;<tt class="literal">themeSource.xml</tt>&#30340;&#25991;&#20214;&#20301;&#32622;&#24517;&#39035;&#25918;&#22312;&#23548;&#20837;&#25991;&#20214;&#25152;
		&#22312;&#30446;&#24405;&#19979;&#30340;<tt class="literal">resources</tt>&#30446;&#24405;&#20013;&#12290;&#27491;&#22914;&#20320;&#25152;&#30475;&#21040;&#30340;&#37027;&#26679;&#65292;&#24320;&#22836;&#30340;&#26012;&#26464;
		&#8216;/&#8217;&#23454;&#38469;&#19978;&#21487;&#24573;&#30053;&#12290;&#22240;&#27492;&#19981;&#29992;&#26012;&#26464;&#8216;/&#8217;&#21487;&#33021;&#20250;&#26356;&#22909;&#19968;&#28857;&#12290;&#26681;&#25454;Spring XML&#37197;&#32622;&#25991;&#20214;&#30340;
		Schema(&#25110;DTD)&#65292;&#34987;&#23548;&#20837;&#25991;&#20214;&#24517;&#39035;&#26159;&#23436;&#20840;&#26377;&#25928;&#30340;XML bean&#23450;&#20041;&#25991;&#20214;&#65292;&#19988;&#26681;&#33410;&#28857;&#24517;&#39035;&#20026;
		<tt class="literal">&lt;beans/&gt;</tt> &#20803;&#32032;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-definition"></a>3.2.3.&nbsp;&#22810;&#31181;bean</h3></div></div><div></div></div><p>Spring IoC&#23481;&#22120;&#23558;&#31649;&#29702;&#19968;&#20010;&#25110;&#22810;&#20010;<span class="emphasis"><em>bean</em></span>&#65292;&#36825;&#20123;bean
       &#23558;&#36890;&#36807;&#37197;&#32622;&#25991;&#20214;&#20013;&#30340;bean&#23450;&#20041;&#34987;&#21019;&#24314;(&#22312;XML&#26684;&#24335;&#20013;&#20026;<tt class="literal">&lt;bean/&gt;
       </tt>&#20803;&#32032;)&#12290;</p><p>&#22312;&#23481;&#22120;&#20869;&#37096;&#65292;&#36825;&#20123;bean&#23450;&#20041;&#30001;<tt class="interfacename">BeanDefinition</tt>
       &#23545;&#35937;&#26469;&#34920;&#31034;&#65292;&#35813;&#23450;&#20041;&#23558;&#21253;&#21547;&#20197;&#19979;&#20449;&#24687;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><span class="emphasis"><em>&#20840;&#38480;&#23450;&#31867;&#21517;&#65306;</em></span>&#36825;&#36890;&#24120;&#23601;&#26159;&#24050;&#23450;&#20041;bean&#30340;&#23454;&#38469;&#23454;&#29616;&#31867;&#12290;</p></li><li><p>bean&#34892;&#20026;&#30340;&#23450;&#20041;&#65292;&#36825;&#20123;&#23450;&#20041;&#23558;&#20915;&#23450;bean&#22312;&#23481;&#22120;&#20013;&#30340;&#34892;&#20026;&#65288;&#20316;&#29992;&#22495;&#12289;&#29983;&#21629;&#21608;&#26399;&#22238;&#35843;&#31561;&#31561;&#65289;</p></li><li><p>&#23545;&#20854;&#20182;bean&#30340;&#24341;&#29992;&#65292;&#36825;&#20123;&#24341;&#29992;bean&#20063;&#21487;&#20197;&#31216;&#20043;&#20026;<span class="emphasis"><em>&#21327;&#20316;bean&#65288;collaborators&#65289;
          </em></span> &#25110;<span class="emphasis"><em>&#20381;&#36182;bean&#65288;dependencies&#65289;</em></span>.</p></li><li><p>&#21019;&#24314;bean&#23454;&#20363;&#26102;&#30340;&#20854;&#20182;&#37197;&#32622;&#35774;&#32622;&#12290;&#27604;&#22914;&#20351;&#29992;bean&#26469;&#23450;&#20041;&#36830;&#25509;&#27744;&#65292;&#21487;&#20197;&#36890;&#36807;&#23646;&#24615;&#25110;&#32773;&#26500;
          &#36896;&#21442;&#25968;&#25351;&#23450;&#36830;&#25509;&#25968;&#65292;&#20197;&#21450;&#36830;&#25509;&#27744;&#22823;&#23567;&#38480;&#21046;&#31561;&#12290;</p></li></ul></div><p>&#19978;&#36848;&#20869;&#23481;&#30452;&#25509;&#34987;&#32763;&#35793;&#20026;&#27599;&#20010;bean&#23450;&#20041;&#21253;&#21547;&#30340;&#19968;&#32452;properties&#12290;&#19979;&#38754;&#30340;&#34920;&#26684;&#21015;&#20986;&#20102;&#37096;&#20998;
     &#20869;&#23481;&#30340;&#35814;&#32454;&#38142;&#25509;&#65306;</p><div class="table"><a name="beans-factory-bean-definition-tbl"></a><p class="title"><b>Table&nbsp;3.1.&nbsp;bean&#23450;&#20041;</b></p><table summary="bean&#23450;&#20041;" border="1"><colgroup><col><col></colgroup><thead><tr><th>&#21517;&#31216;</th><th>&#38142;&#25509;</th></tr></thead><tbody><tr><td>class</td><td><p>
                  <a href="#beans-factory-class" title="3.2.3.2.&nbsp;&#23454;&#20363;&#21270;bean">Section&nbsp;3.2.3.2, &#8220;&#23454;&#20363;&#21270;bean&#8221;</a>
                </p></td></tr><tr><td>name</td><td><p>
                  <a href="#beans-beanname" title="3.2.3.1.&nbsp;bean&#30340;&#21629;&#21517;">Section&nbsp;3.2.3.1, &#8220;bean&#30340;&#21629;&#21517;&#8221;</a>
                </p></td></tr><tr><td>scope</td><td><p>
                  <a href="#beans-factory-scopes" title="3.4.&nbsp;Bean&#30340;&#20316;&#29992;&#22495;">Section&nbsp;3.4, &#8220;Bean&#30340;&#20316;&#29992;&#22495;&#8221;</a>
                </p></td></tr><tr><td>constructor arguments</td><td><p>
                  <a href="#beans-factory-collaborators" title="3.3.1.&nbsp;&#27880;&#20837;&#20381;&#36182;">Section&nbsp;3.3.1, &#8220;&#27880;&#20837;&#20381;&#36182;&#8221;</a>
                </p></td></tr><tr><td>properties</td><td><p>
                  <a href="#beans-factory-collaborators" title="3.3.1.&nbsp;&#27880;&#20837;&#20381;&#36182;">Section&nbsp;3.3.1, &#8220;&#27880;&#20837;&#20381;&#36182;&#8221;</a>
                </p></td></tr><tr><td>autowiring mode</td><td><p>
                  <a href="#beans-factory-autowire" title="3.3.5.&nbsp;&#33258;&#21160;&#35013;&#37197;&#65288;autowire&#65289;&#21327;&#20316;&#32773;">Section&nbsp;3.3.5, &#8220;&#33258;&#21160;&#35013;&#37197;&#65288;autowire&#65289;&#21327;&#20316;&#32773;&#8221;</a>
                </p></td></tr><tr><td>dependency checking mode</td><td><p>
                  <a href="#beans-factory-dependencies" title="3.3.6.&nbsp;&#20381;&#36182;&#26816;&#26597;">Section&nbsp;3.3.6, &#8220;&#20381;&#36182;&#26816;&#26597;&#8221;</a>
                </p></td></tr><tr><td>lazy-initialization mode</td><td><p>
                  <a href="#beans-factory-lazy-init" title="3.3.4.&nbsp;&#24310;&#36831;&#21021;&#22987;&#21270;bean">Section&nbsp;3.3.4, &#8220;&#24310;&#36831;&#21021;&#22987;&#21270;bean&#8221;</a>
                </p></td></tr><tr><td>initialization method</td><td><p>
                  <a href="#beans-factory-lifecycle-initializingbean" title="3.5.1.1.&nbsp;&#21021;&#22987;&#21270;&#22238;&#35843;">Section&nbsp;3.5.1.1, &#8220;&#21021;&#22987;&#21270;&#22238;&#35843;&#8221;</a>
                </p></td></tr><tr><td>destruction method</td><td><p>
                  <a href="#beans-factory-lifecycle-disposablebean" title="3.5.1.2.&nbsp;&#26512;&#26500;&#22238;&#35843;">Section&nbsp;3.5.1.2, &#8220;&#26512;&#26500;&#22238;&#35843;&#8221;</a>
                </p></td></tr></tbody></table></div><p>&#38500;&#20102;&#36890;&#36807;bean&#23450;&#20041;&#26469;&#25551;&#36848;&#35201;&#21019;&#24314;&#30340;&#25351;&#23450;bean&#30340;&#23646;&#24615;&#20043;&#22806;&#65292;&#26576;&#20123;<tt class="interfacename">
	  BeanFactory</tt>&#30340;&#23454;&#29616;&#20063;&#20801;&#35768;&#23558;&#37027;&#20123;&#38750;BeanFactory&#21019;&#24314;&#30340;&#12289;&#24050;&#26377;&#30340;&#29992;&#25143;
	  &#23545;&#35937;&#27880;&#20876;&#21040;&#23481;&#22120;&#20013;&#65292;&#27604;&#22914;&#20351;&#29992;<tt class="classname">DefaultListableBeanFactory</tt>
	  &#30340;<tt class="methodname">registerSingleton(..)</tt> &#26041;&#27861;&#12290;&#19981;&#36807;&#22823;&#22810;&#25968;&#24212;&#29992;&#36824;&#26159;&#37319;&#29992;
	  &#20803;&#25968;&#25454;&#23450;&#20041;&#20026;&#20027;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-beanname"></a>3.2.3.1.&nbsp;bean&#30340;&#21629;&#21517;</h4></div></div><div></div></div><div class="sidebar"><p class="title"><b>bean&#21629;&#21517;&#32422;&#23450;</b></p><p>bean&#30340;&#21629;&#21517;&#37319;&#29992;&#26631;&#20934;&#30340;Java&#21629;&#21517;&#32422;&#23450;&#65292;&#21363;&#23567;&#20889;&#23383;&#27597;&#24320;&#22836;&#65292;&#39318;&#23383;&#27597;&#22823;&#20889;&#38388;&#38548;
		  &#30340;&#21629;&#21517;&#26041;&#24335;&#12290;&#22914;<tt class="literal">accountManager</tt>&#12289; <tt class="literal">accountService
		  </tt>&#12289;<tt class="literal">userDao</tt>&#21450;<tt class="literal">loginController</tt>&#65292;&#31561;&#31561;&#12290;</p><p>&#23545;bean&#37319;&#29992;&#32479;&#19968;&#30340;&#21629;&#21517;&#32422;&#23450;&#23558;&#20250;&#20351;&#37197;&#32622;&#26356;&#21152;&#31616;&#21333;&#26131;&#25026;&#12290;&#32780;&#19988;&#22312;&#20351;&#29992;Spring AOP&#26102;
		   &#65292;&#22914;&#26524;&#35201;&#21457;&#36890;&#30693;(advice)&#32473;&#19982;&#19968;&#32452;&#21517;&#31216;&#30456;&#20851;&#30340;bean&#26102;&#65292;&#36825;&#31181;&#31616;&#21333;&#30340;&#21629;&#21517;&#26041;&#24335;&#23558;&#20250;&#20196;&#20320;&#21463;&#30410;&#21290;&#27973;&#12290;</p></div><p>&#27599;&#20010;bean&#37117;&#26377;&#19968;&#20010;&#25110;&#22810;&#20010;<tt class="literal">id</tt>(&#25110;&#31216;&#20043;&#20026;&#26631;&#35782;&#31526;&#25110;&#21517;&#31216;&#65292;&#22312;&#26415;&#35821;
		&#19978;&#21487;&#20197;&#29702;&#35299;&#25104;&#19968;&#22238;&#20107;)&#12290;&#36825;&#20123;<tt class="literal">id</tt>&#22312;&#24403;&#21069;IoC&#23481;&#22120;&#20013;&#24517;&#39035;&#21807;&#19968;&#12290;&#22914;&#26524;
		&#19968;&#20010;bean&#26377;&#22810;&#20010;id&#65292;&#37027;&#20040;&#20854;&#20182;&#30340;id&#22312;&#26412;&#36136;&#19978;&#23558;&#34987;&#35748;&#20026;&#26159;&#21035;&#21517;&#12290;</p><p>&#24403;&#20351;&#29992;&#22522;&#20110;XML&#30340;&#37197;&#32622;&#20803;&#25968;&#25454;&#26102;&#65292;&#23558;&#36890;&#36807;<tt class="literal">id</tt>&#25110;<tt class="literal">
		 name</tt>&#23646;&#24615;&#26469;&#25351;&#23450;bean&#26631;&#35782;&#31526;&#12290;<tt class="literal">id</tt>&#23646;&#24615;&#20855;&#26377;&#21807;&#19968;&#24615;&#65292;
		 &#32780;&#19988;&#26159;&#19968;&#20010;&#30495;&#27491;&#30340;XML ID&#23646;&#24615;&#65292;&#22240;&#27492;&#20854;&#20182;xml&#20803;&#32032;&#22312;&#24341;&#29992;&#35813;id&#26102;&#65292;&#21487;&#20197;&#21033;&#29992;XML&#35299;&#26512;&#22120;&#30340;
		 &#39564;&#35777;&#21151;&#33021;&#12290;&#36890;&#24120;&#24773;&#20917;&#19979;&#26368;&#22909;&#20026;bean&#25351;&#23450;&#19968;&#20010;id&#12290;&#23613;&#31649;XML&#35268;&#33539;&#35268;&#23450;&#20102;XML ID&#21629;&#21517;&#30340;&#26377;&#25928;
		 &#23383;&#31526;&#65292;&#20294;&#26159;bean&#26631;&#35782;&#31526;&#30340;&#23450;&#20041;&#19981;&#21463;&#35813;&#38480;&#21046;&#65292;&#22240;&#20026;&#38500;&#20102;&#20351;&#29992;&#25351;&#23450;&#30340;XML&#23383;&#31526;&#26469;&#20316;&#20026;id&#65292;&#36824;&#21487;
		 &#20197;&#20026;bean&#25351;&#23450;&#21035;&#21517;&#65292;&#35201;&#23454;&#29616;&#36825;&#19968;&#28857;&#21487;&#20197;&#22312;<tt class="literal">name</tt>&#23646;&#24615;&#20013;&#20351;&#29992;&#36887;&#21495;&#12289;
		 &#20882;&#21495;&#25110;&#32773;&#31354;&#26684;&#23558;&#22810;&#20010;id&#20998;&#38548;&#12290;</p><p>&#20540;&#24471;&#27880;&#24847;&#30340;&#26159;&#65292;&#20026;&#19968;&#20010;bean&#25552;&#20379;&#19968;&#20010;name&#24182;&#19981;&#26159;&#24517;&#39035;&#30340;&#65292;&#22914;&#26524;&#27809;&#26377;&#25351;&#23450;&#65292;&#37027;&#20040;&#23481;
		&#22120;&#23558;&#20026;&#20854;&#29983;&#25104;&#19968;&#20010;&#24799;&#19968;&#30340;name&#12290;&#23545;&#20110;&#19981;&#25351;&#23450;name&#23646;&#24615;&#30340;&#21407;&#22240;&#25105;&#20204;&#20250;&#22312;&#21518;&#38754;&#20171;&#32461;(&#27604;&#22914;
		<a href="#beans-inner-beans" title="3.3.2.3.&nbsp;&#20869;&#37096;bean">&#20869;&#37096;bean</a>&#23601;&#19981;&#38656;&#35201;)&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="beans-beanname-alias"></a>3.2.3.1.1.&nbsp;bean&#30340;&#21035;&#21517;</h5></div></div><div></div></div><p>&#22312;&#23545;bean&#36827;&#34892;&#23450;&#20041;&#26102;&#65292;&#38500;&#20102;&#20351;&#29992;<tt class="literal">id</tt>&#23646;&#24615;&#26469;&#25351;&#23450;&#21517;&#31216;
		  &#20043;&#22806;&#65292;&#20026;&#20102;&#25552;&#20379;&#22810;&#20010;&#21517;&#31216;&#65292;&#38656;&#35201;&#36890;&#36807;<tt class="literal">name</tt>&#23646;&#24615;&#26469;&#21152;&#20197;&#25351;&#23450;
		  &#12290;&#32780;&#25152;&#26377;&#30340;&#36825;&#20123;&#21517;&#31216;&#37117;&#25351;&#21521;&#21516;&#19968;&#20010;bean&#65292;&#22312;&#26576;&#20123;&#24773;&#20917;&#19979;&#25552;&#20379;&#21035;&#21517;&#38750;&#24120;&#26377;&#29992;&#65292;&#27604;&#22914;
		  &#20026;&#20102;&#35753;&#24212;&#29992;&#30340;&#27599;&#19968;&#20010;&#32452;&#20214;&#33021;&#26356;&#23481;&#26131;&#30340;&#23545;&#20844;&#20849;&#32452;&#20214;&#36827;&#34892;&#24341;&#29992;&#12290;</p><p>&#28982;&#32780;&#65292;&#22312;&#23450;&#20041;bean&#26102;&#23601;&#25351;&#23450;&#25152;&#26377;&#30340;&#21035;&#21517;&#24182;&#19981;&#26159;&#24635;&#26159;&#24688;&#24403;&#30340;&#12290;&#26377;&#26102;&#25105;&#20204;&#26399;&#26395;
		  &#33021;&#22312;&#24403;&#21069;&#20301;&#32622;&#20026;&#37027;&#20123;&#22312;&#21035;&#22788;&#23450;&#20041;&#30340;bean&#24341;&#20837;&#21035;&#21517;&#12290;&#22312;XML&#37197;&#32622;&#25991;&#20214;&#20013;&#65292;&#21487;&#29992;<tt class="literal">
		  &lt;alias/&gt;</tt> &#20803;&#32032;&#26469;&#23436;&#25104;bean&#21035;&#21517;&#30340;&#23450;&#20041;&#12290;&#22914;&#65306;</p><pre class="programlisting">&lt;alias name="fromName" alias="toName"/&gt;</pre><p>&#36825;&#37324;&#22914;&#26524;&#22312;&#23481;&#22120;&#20013;&#23384;&#22312;&#21517;&#20026;<tt class="literal">fromName</tt>&#30340;bean&#23450;&#20041;&#65292;
		  &#22312;&#22686;&#21152;&#21035;&#21517;&#23450;&#20041;&#20043;&#21518;&#65292;&#20063;&#21487;&#20197;&#29992;<tt class="literal">toName</tt>&#26469;&#24341;&#29992;&#12290;</p><p>&#32771;&#34385;&#19968;&#20010;&#26356;&#20026;&#20855;&#20307;&#30340;&#20363;&#23376;&#65292;&#32452;&#20214;A&#22312;XML&#37197;&#32622;&#25991;&#20214;&#20013;&#23450;&#20041;&#20102;&#19968;&#20010;&#21517;&#20026;
		  componentA-dataSource&#30340;DataSource bean&#12290;&#20294;&#32452;&#20214;B&#21364;&#24819;&#22312;&#20854;XML&#25991;&#20214;&#20013;
		  &#20197;componentB-dataSource&#30340;&#21517;&#23383;&#26469;&#24341;&#29992;&#27492;bean&#12290;&#32780;&#19988;&#22312;&#20027;&#31243;&#24207;MyApp&#30340;XML&#37197;
		  &#32622;&#25991;&#20214;&#20013;&#65292;&#24076;&#26395;&#20197;myApp-dataSource&#30340;&#21517;&#23383;&#26469;&#24341;&#29992;&#27492;bean&#12290;&#26368;&#21518;&#23481;&#22120;&#21152;&#36733;&#19977;&#20010;
		  XML&#25991;&#20214;&#26469;&#29983;&#25104;&#26368;&#32456;&#30340;ApplicationContext&#65292;&#22312;&#27492;&#24773;&#24418;&#19979;&#65292;&#21487;&#36890;&#36807;&#22312;MyApp XML
		  &#25991;&#20214;&#20013;&#28155;&#21152;&#19979;&#21015;alias&#20803;&#32032;&#26469;&#23454;&#29616;&#65306;</p><pre class="programlisting">&lt;alias name="componentA-dataSource" alias="componentB-dataSource"/&gt;
&lt;alias name="componentA-dataSource" alias="myApp-dataSource" /&gt;</pre><p>&#36825;&#26679;&#19968;&#26469;&#65292;&#27599;&#20010;&#32452;&#20214;&#21450;&#20027;&#31243;&#24207;&#23601;&#21487;&#36890;&#36807;&#21807;&#19968;&#21517;&#23383;&#26469;&#24341;&#29992;&#21516;&#19968;&#20010;&#25968;&#25454;&#28304;&#32780;&#20114;&#19981;&#24178;&#25200;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-class"></a>3.2.3.2.&nbsp;&#23454;&#20363;&#21270;bean</h4></div></div><div></div></div><div class="sidebar"><p class="title"><b>&#20869;&#37096;&#31867;&#21517;</b></p><p>&#22914;&#26524;&#38656;&#35201;&#20320;&#24076;&#26395;&#23558;&#19968;&#20010;<tt class="literal">&#38745;&#24577;</tt>&#30340;&#20869;&#37096;&#31867;&#37197;&#32622;&#20026;
          &#19968;&#20010;bean&#30340;&#35805;&#65292;&#37027;&#20040;&#20869;&#37096;&#31867;&#30340;&#21517;&#23383;&#38656;&#35201;&#37319;&#29992;<span class="emphasis"><em>&#20108;&#36827;&#21046;</em></span>&#30340;&#20889;&#27861;&#12290;</p><p>&#27604;&#22914;&#35828;&#65292;&#22312;<tt class="literal">com.example</tt>&#21253;&#19979;&#26377;&#19968;&#20010;&#21483;<tt class="classname">
          Foo</tt>&#30340;&#31867;&#65292;&#32780;<tt class="classname">Foo</tt>&#31867;&#26377;&#19968;&#20010;<tt class="literal">&#38745;&#24577;
          </tt>&#30340;&#20869;&#37096;&#31867;&#21483;<tt class="classname">Bar</tt>&#65292;&#37027;&#20040;&#22312;bean&#23450;&#20041;&#30340;&#26102;&#20505;&#65292;
          <tt class="literal">class</tt>&#23646;&#24615;&#24517;&#39035;&#36825;&#26679;&#20889;&#65306;</p><p>
            <tt class="classname">com.example.Foo$Bar</tt>
          </p><p>&#27880;&#24847;&#36825;&#37324;&#25105;&#20204;&#20351;&#29992;&#20102;<tt class="literal">$</tt>&#23383;&#31526;&#23558;&#20869;&#37096;&#31867;&#21644;&#22806;&#37096;&#31867;&#36827;&#34892;&#20998;&#38548;</p></div><p>&#20174;&#26412;&#36136;&#19978;&#26469;&#35828;&#65292;bean&#23450;&#20041;&#25551;&#36848;&#20102;&#22914;&#20309;&#21019;&#24314;&#19968;&#20010;&#25110;&#22810;&#20010;&#23545;&#35937;&#23454;&#20363;&#12290;&#24403;&#38656;&#35201;&#30340;&#26102;&#20505;&#65292;
		&#23481;&#22120;&#20250;&#20174;bean&#23450;&#20041;&#21015;&#34920;&#20013;&#21462;&#24471;&#19968;&#20010;&#25351;&#23450;&#30340;bean&#23450;&#20041;&#65292;&#24182;&#26681;&#25454;bean&#23450;&#20041;&#37324;&#38754;&#30340;&#37197;&#32622;&#20803;&#25968;&#25454;
		&#20351;&#29992;&#21453;&#23556;&#26426;&#21046;&#26469;&#21019;&#24314;&#65288;&#25110;&#21462;&#24471;&#65289;&#19968;&#20010;&#23454;&#38469;&#30340;&#23545;&#35937;&#12290;</p><p>&#24403;&#37319;&#29992;XML&#25551;&#36848;&#37197;&#32622;&#20803;&#25968;&#25454;&#26102;&#65292;&#23558;&#36890;&#36807;<tt class="literal">&lt;bean/&gt;</tt>&#20803;&#32032;&#30340;
		<tt class="literal">class</tt>&#23646;&#24615;&#26469;&#25351;&#23450;&#23454;&#20363;&#21270;&#23545;&#35937;&#30340;&#31867;&#22411;&#12290;<tt class="literal">class</tt>
		 &#23646;&#24615; (&#23545;&#24212;<tt class="interfacename">BeanDefinition</tt>&#23454;&#20363;&#30340;<tt class="classname">
		 Class</tt>&#23646;&#24615;)&#36890;&#24120;&#26159;&#24517;&#39035;&#30340;(&#19981;&#36807;&#20063;&#26377;&#20004;&#31181;&#20363;&#22806;&#30340;&#24773;&#24418;&#65292;&#35265;
		 <a href="#beans-factory-class-instance-factory-method" title="3.2.3.2.3.&nbsp;&#20351;&#29992;&#23454;&#20363;&#24037;&#21378;&#26041;&#27861;&#23454;&#20363;&#21270;">Section&nbsp;3.2.3.2.3, &#8220;&#20351;&#29992;&#23454;&#20363;&#24037;&#21378;&#26041;&#27861;&#23454;&#20363;&#21270;&#8221;</a>&#21644;
		 <a href="#beans-child-bean-definitions" title="3.6.&nbsp;bean&#23450;&#20041;&#30340;&#32487;&#25215;">Section&nbsp;3.6, &#8220;bean&#23450;&#20041;&#30340;&#32487;&#25215;&#8221;</a>)&#12290;class&#23646;&#24615;&#20027;&#35201;&#26377;&#20004;&#31181;&#29992;&#36884;
		 &#65306;&#22312;&#22823;&#22810;&#25968;&#24773;&#20917;&#19979;&#65292;&#23481;&#22120;&#23558;&#30452;&#25509;&#36890;&#36807;&#21453;&#23556;&#35843;&#29992;&#25351;&#23450;&#31867;&#30340;&#26500;&#36896;&#22120;&#26469;&#21019;&#24314;bean(&#36825;&#26377;&#28857;&#31867;&#20284;&#20110;
		 &#22312;Java&#20195;&#30721;&#20013;&#20351;&#29992;<span class="emphasis"><em>new</em></span>&#25805;&#20316;&#31526;)&#65307;&#22312;&#26497;&#23569;&#25968;&#24773;&#20917;&#19979;&#65292;&#23481;&#22120;&#23558;&#35843;&#29992;
		 &#31867;&#30340;<tt class="literal">&#38745;&#24577;</tt><span class="emphasis"><em>&#24037;&#21378;</em></span>&#26041;&#27861;&#26469;&#21019;&#24314;bean&#23454;&#20363;&#65292;class
		 &#23646;&#24615;&#23558;&#29992;&#26469;&#25351;&#23450;&#23454;&#38469;&#20855;&#26377;<tt class="literal">&#38745;&#24577;</tt>&#24037;&#21378;&#26041;&#27861;&#30340;&#31867;(&#33267;&#20110;&#35843;&#29992;&#38745;&#24577;&#24037;&#21378;
		 &#26041;&#27861;&#21019;&#24314;&#30340;&#23545;&#35937;&#31867;&#22411;&#26159;&#24403;&#21069;class&#36824;&#26159;&#20854;&#20182;&#30340;class&#21017;&#26080;&#20851;&#32039;&#35201;)&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="beans-factory-class-ctor"></a>3.2.3.2.1.&nbsp;&#29992;&#26500;&#36896;&#22120;&#26469;&#23454;&#20363;&#21270;</h5></div></div><div></div></div><p>&#24403;&#37319;&#29992;&#26500;&#36896;&#22120;&#26469;&#21019;&#24314;bean&#23454;&#20363;&#26102;&#65292;Spring&#23545;class&#24182;&#27809;&#26377;&#29305;&#27530;&#30340;&#35201;&#27714;&#65292;
			&#25105;&#20204;&#36890;&#24120;&#20351;&#29992;&#30340;class&#37117;&#36866;&#29992;&#12290;&#20063;&#23601;&#26159;&#35828;&#65292;&#34987;&#21019;&#24314;&#30340;&#31867;&#24182;&#19981;&#38656;&#35201;&#23454;&#29616;&#20219;&#20309;&#29305;&#23450;&#30340;
			&#25509;&#21475;&#65292;&#25110;&#20197;&#29305;&#23450;&#30340;&#26041;&#24335;&#32534;&#30721;&#65292;&#21482;&#35201;&#25351;&#23450;bean&#30340;class&#23646;&#24615;&#21363;&#21487;&#12290;&#19981;&#36807;&#26681;&#25454;&#25152;&#37319;&#29992;
			&#30340;IoC&#31867;&#22411;&#65292;class&#21487;&#33021;&#38656;&#35201;&#19968;&#20010;&#40664;&#35748;&#30340;&#31354;&#26500;&#36896;&#22120;&#12290;</p><p>&#27492;&#22806;&#65292;IoC&#23481;&#22120;&#19981;&#20165;&#38480;&#20110;&#31649;&#29702;JavaBean&#65292;&#23427;&#21487;&#20197;&#31649;&#29702;<span class="emphasis"><em>&#20219;&#24847;</em></span>
		&#30340;&#31867;&#12290;&#19981;&#36807;&#22823;&#22810;&#25968;&#20351;&#29992;Spring&#30340;&#20154;&#21916;&#27426;&#20351;&#29992;&#23454;&#38469;&#30340;JavaBean(&#20855;&#26377;&#40664;&#35748;&#30340;(&#26080;&#21442;)&#26500;&#36896;&#22120;
		&#21450;setter&#21644;getter&#26041;&#27861;)&#65292;&#20294;&#22312;&#23481;&#22120;&#20013;&#20351;&#29992;&#38750;bean&#24418;&#24335;(non-bean style)&#30340;&#31867;&#20063;&#26159;&#21487;
		&#20197;&#30340;&#12290;&#27604;&#22914;&#36951;&#30041;&#31995;&#32479;&#20013;&#30340;&#36830;&#25509;&#27744;&#65292;&#24456;&#26174;&#28982;&#23427;&#19982;JavaBean&#35268;&#33539;&#19981;&#31526;&#65292;&#20294;Spring&#20063;&#33021;&#31649;&#29702;&#23427;&#12290;</p><p>&#24403;&#20351;&#29992;&#22522;&#20110;XML&#30340;&#20803;&#25968;&#25454;&#37197;&#32622;&#25991;&#20214;&#65292;&#21487;&#20197;&#36825;&#26679;&#26469;&#25351;&#23450;bean&#31867;&#65306;</p><pre class="programlisting">&lt;bean id="exampleBean" class="examples.ExampleBean"/&gt;

&lt;bean name="anotherExample" class="examples.ExampleBeanTwo"/&gt;</pre><p>&#32473;&#26500;&#36896;&#20989;&#25968;&#25351;&#23450;&#21442;&#25968;&#20197;&#21450;&#20026;bean&#23454;&#20363;&#35774;&#32622;&#23646;&#24615;&#23558;&#22312;&#38543;&#21518;&#30340;
		  <a href="#beans-factory-collaborators" title="3.3.1.&nbsp;&#27880;&#20837;&#20381;&#36182;">&#37096;&#20998;</a>&#20013;&#35848;&#21450;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="beans-factory-class-static-factory-method"></a>3.2.3.2.2.&nbsp;&#20351;&#29992;&#38745;&#24577;&#24037;&#21378;&#26041;&#27861;&#23454;&#20363;&#21270;</h5></div></div><div></div></div><p>&#24403;&#37319;&#29992;&#38745;&#24577;&#24037;&#21378;&#26041;&#27861;&#21019;&#24314;bean&#26102;&#65292;&#38500;&#20102;&#38656;&#35201;&#25351;&#23450;<tt class="literal">class</tt>
		  &#23646;&#24615;&#22806;&#65292;&#36824;&#38656;&#35201;&#36890;&#36807;<tt class="literal">factory-method</tt>&#23646;&#24615;&#26469;&#25351;&#23450;&#21019;&#24314;bean&#23454;&#20363;
		  &#30340;&#24037;&#21378;&#26041;&#27861;&#12290;Spring&#23558;&#35843;&#29992;&#27492;&#26041;&#27861;(&#20854;&#21487;&#36873;&#21442;&#25968;&#25509;&#19979;&#26469;&#20171;&#32461;)&#36820;&#22238;&#23454;&#20363;&#23545;&#35937;&#65292;&#23601;&#27492;&#32780;&#35328;&#65292;
		  &#36319;&#36890;&#36807;&#26222;&#36890;&#26500;&#36896;&#22120;&#21019;&#24314;&#31867;&#23454;&#20363;&#27809;&#20160;&#20040;&#20004;&#26679;&#12290;</p><p>&#19979;&#38754;&#30340;bean&#23450;&#20041;&#23637;&#31034;&#20102;&#22914;&#20309;&#36890;&#36807;&#24037;&#21378;&#26041;&#27861;&#26469;&#21019;&#24314;bean&#23454;&#20363;&#12290;&#27880;&#24847;&#65292;&#27492;&#23450;&#20041;&#24182;
		  &#26410;&#25351;&#23450;&#36820;&#22238;&#23545;&#35937;&#30340;&#31867;&#22411;&#65292;&#20165;&#25351;&#23450;&#35813;&#31867;&#21253;&#21547;&#30340;&#24037;&#21378;&#26041;&#27861;&#12290;&#22312;&#27492;&#20363;&#20013;&#65292; <tt class="methodname">
		  createInstance()</tt>&#24517;&#39035;&#26159;&#19968;&#20010;<span class="emphasis"><em>static</em></span>&#26041;&#27861;&#12290;</p><pre class="programlisting">&lt;bean id="exampleBean"
      class="examples.ExampleBean2"
      factory-method="createInstance"/&gt;</pre><p>&#32473;&#24037;&#21378;&#26041;&#27861;&#25351;&#23450;&#21442;&#25968;&#20197;&#21450;&#20026;bean&#23454;&#20363;&#35774;&#32622;&#23646;&#24615;&#23558;&#22312;&#38543;&#21518;&#30340;&#37096;&#20221;&#20013;&#35848;&#21450;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="beans-factory-class-instance-factory-method"></a>3.2.3.2.3.&nbsp;&#20351;&#29992;&#23454;&#20363;&#24037;&#21378;&#26041;&#27861;&#23454;&#20363;&#21270;</h5></div></div><div></div></div><p>&#19982;<a href="#beans-factory-class-static-factory-method" title="3.2.3.2.2.&nbsp;&#20351;&#29992;&#38745;&#24577;&#24037;&#21378;&#26041;&#27861;&#23454;&#20363;&#21270;">
		  &#20351;&#29992;&#38745;&#24577;&#24037;&#21378;&#26041;&#27861;&#23454;&#20363;&#21270;</a>&#31867;&#20284;&#65292;&#29992;&#26469;&#36827;&#34892;&#23454;&#20363;&#21270;&#30340;&#38750;&#38745;&#24577;&#23454;&#20363;&#24037;&#21378;&#26041;&#27861;&#20301;
		  &#20110;&#21478;&#22806;&#19968;&#20010;bean&#20013;&#65292;&#23481;&#22120;&#23558;&#35843;&#29992;&#35813;bean&#30340;&#24037;&#21378;&#26041;&#27861;&#26469;&#21019;&#24314;&#19968;&#20010;&#26032;&#30340;bean&#23454;&#20363;&#12290;&#20026;&#20351;
		  &#29992;&#27492;&#26426;&#21046;&#65292;<tt class="literal">class</tt>&#23646;&#24615;&#24517;&#39035;&#20026;&#31354;&#65292;&#32780;<tt class="literal">factory-bean
		  </tt>&#23646;&#24615;&#24517;&#39035;&#25351;&#23450;&#20026;&#24403;&#21069;(&#25110;&#20854;&#31062;&#20808;)&#23481;&#22120;&#20013;&#21253;&#21547;&#24037;&#21378;&#26041;&#27861;&#30340;bean&#30340;&#21517;&#31216;&#65292;&#32780;&#35813;
		  &#24037;&#21378;bean&#30340;&#24037;&#21378;&#26041;&#27861;&#26412;&#36523;&#24517;&#39035;&#36890;&#36807;<tt class="literal">factory-method</tt>&#23646;&#24615;&#26469;&#35774;&#23450;&#12290;</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">&lt;!-- the factory bean, which contains a method called <tt class="methodname">createInstance()</tt> --&gt;</span></i>
&lt;bean id="serviceLocator" class="com.foo.DefaultServiceLocator"&gt;
  <i class="lineannotation"><span class="lineannotation">&lt;!-- inject any dependencies required by this locator bean --&gt;</span></i>
&lt;/bean&gt;

<i class="lineannotation"><span class="lineannotation">&lt;!-- the bean to be created via the factory bean --&gt;</span></i>
&lt;bean id="exampleBean"
      factory-bean="serviceLocator"
      factory-method="createInstance"/&gt;</pre><p>&#34429;&#28982;<a href="#beans-factory-properties-detailed" title="3.3.2.&nbsp;&#20381;&#36182;&#37197;&#32622;&#35814;&#35299;">&#35774;&#32622;bean&#23646;&#24615;
		  </a>&#30340;&#26426;&#21046;&#20173;&#28982;&#22312;&#36825;&#37324;&#34987;&#25552;&#21450;&#65292;&#20294;&#38544;&#24335;&#30340;&#20570;&#27861;&#26159;&#30001;&#24037;&#21378;bean&#33258;&#24049;&#26469;&#31649;&#29702;&#20197;&#21450;&#36890;&#36807;&#20381;
		  &#36182;&#27880;&#20837;(DI)&#26469;&#36827;&#34892;&#37197;&#32622;&#12290;</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>Spring&#25991;&#26723;&#20013;&#30340;factory bean&#25351;&#30340;&#26159;&#37197;&#32622;&#22312;Spring&#23481;&#22120;&#20013;&#36890;&#36807;&#20351;&#29992;
          <a href="#beans-factory-class-instance-factory-method" title="3.2.3.2.3.&nbsp;&#20351;&#29992;&#23454;&#20363;&#24037;&#21378;&#26041;&#27861;&#23454;&#20363;&#21270;">&#23454;&#20363;
          </a>&#25110; <a href="#beans-factory-class-static-factory-method" title="3.2.3.2.2.&nbsp;&#20351;&#29992;&#38745;&#24577;&#24037;&#21378;&#26041;&#27861;&#23454;&#20363;&#21270;">
          &#38745;&#24577;</a>&#24037;&#21378;&#26041;&#27861;&#21019;&#24314;&#23545;&#35937;&#30340;&#19968;&#31181;bean&#12290;&#32780;&#25991;&#26723;&#20013;&#30340;<tt class="interfacename">FactoryBean</tt>
           &#65288;&#27880;&#24847;&#39318;&#23383;&#27597;&#22823;&#20889;&#65289;&#25351;&#30340;&#26159;Spring&#29305;&#26377;&#30340;<a href="#beans-factory-extension-factorybean" title="3.7.3.&nbsp;&#20351;&#29992;FactoryBean&#23450;&#21046;&#23454;&#20363;&#21270;&#36923;&#36753;">
           <tt class="interfacename">FactoryBean</tt></a>&#12290;</p></td></tr></tbody></table></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-client"></a>3.2.4.&nbsp;&#20351;&#29992;&#23481;&#22120;</h3></div></div><div></div></div><p>&#20174;&#26412;&#36136;&#19978;&#35762;&#65292;<tt class="interfacename">BeanFactory</tt>&#20165;&#20165;&#21482;&#26159;&#19968;&#20010;
	  &#32500;&#25252;bean&#23450;&#20041;&#20197;&#21450;&#30456;&#20114;&#20381;&#36182;&#20851;&#31995;&#30340;&#39640;&#32423;&#24037;&#21378;&#25509;&#21475;&#12290;&#36890;&#36807;<tt class="interfacename">BeanFactory
	  </tt>&#25105;&#20204;&#21487;&#20197;&#35775;&#38382;bean&#23450;&#20041;&#12290;&#19979;&#38754;&#30340;&#20363;&#23376;&#21019;&#24314;&#20102;&#19968;&#20010;bean&#24037;&#21378;&#65292;&#27492;&#24037;&#21378;
	  &#23558;&#20174;xml&#25991;&#20214;&#20013;&#35835;&#21462;bean&#23450;&#20041;&#65306;</p><pre class="programlisting">Resource res = new FileSystemResource("beans.xml");
BeanFactory factory = new XmlBeanFactory(res);</pre><p>&#22522;&#26412;&#19978;&#23601;&#36825;&#20123;&#20102;&#65292;&#25509;&#30528;&#20351;&#29992;<tt class="methodname">getBean(String)</tt>
	  &#26041;&#27861;&#23601;&#21487;&#20197;&#21462;&#24471;bean&#30340;&#23454;&#20363;&#65307;<tt class="interfacename">BeanFactory</tt>
	  &#25552;&#20379;&#30340;&#26041;&#27861;&#26497;&#20854;&#31616;&#21333;&#12290; <tt class="interfacename">BeanFactory</tt>&#25509;&#21475;&#25552;&#20379;
	  &#20102;&#38750;&#24120;&#22810;&#30340;&#26041;&#27861;&#65292;&#20294;&#26159;&#23545;&#20110;&#25105;&#20204;&#30340;&#24212;&#29992;&#26469;&#35828;&#65292;&#26368;&#22909;&#27704;&#36828;&#19981;&#35201;&#35843;&#29992;&#23427;&#20204;&#65292;&#24403;&#28982;&#20063;&#21253;&#25324;
	  &#20351;&#29992;<tt class="methodname">getBean(String)</tt>&#26041;&#27861;&#65292;&#36825;&#26679;&#21487;&#20197;&#36991;&#20813;&#25105;&#20204;&#23545;
	  Spring API&#30340;&#20381;&#36182;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="beans-dependencies"></a>3.3.&nbsp;&#20381;&#36182;</h2></div></div><div></div></div><p>&#20856;
&#22411;&#30340;&#20225;&#19994;&#24212;&#29992;&#19981;&#20250;&#21482;&#30001;&#21333;&#19968;&#30340;&#23545;&#35937;&#65288;&#25110;Spring&#30340;&#26415;&#35821;bean)&#32452;&#25104;&#12290;&#27627;&#26080;&#30097;&#38382;&#65292;&#21363;&#20351;&#26368;&#31616;&#21333;&#30340;&#31995;&#32479;&#20063;&#38656;&#35201;&#22810;&#20010;&#23545;&#35937;&#20849;&#21516;&#26469;&#23637;&#31034;&#32473;&#29992;&#25143;&#19968;&#20010;&#25972;&#20307;&#30340;&#24212;&#29992;&#12290;&#25509;&#19979;
&#26469;&#30340;&#30340;&#20869;&#23481;&#38500;&#20102;&#38416;&#36848;&#22914;&#20309;&#21333;&#29420;&#23450;&#20041;&#19968;&#31995;&#21015;bean&#22806;&#65292;&#36824;&#23558;&#25551;&#36848;&#22914;&#20309;&#35753;&#36825;&#20123;bean&#23545;&#35937;&#19968;&#36215;&#21327;&#21516;&#24037;&#20316;&#26469;&#23454;&#29616;&#19968;&#20010;&#23436;&#25972;&#30340;&#30495;&#23454;&#24212;&#29992;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-collaborators"></a>3.3.1.&nbsp;&#27880;&#20837;&#20381;&#36182;</h3></div></div><div></div></div><p><span class="emphasis"><em>&#20381;&#36182;&#27880;&#20837;</em></span>&#65288;DI&#65289;&#32972;&#21518;&#30340;&#22522;&#26412;&#21407;&#29702;&#26159;&#23545;&#35937;&#20043;&#38388;&#30340;&#20381;&#36182;&#20851;&#31995;&#65288;&#21363;&#19968;&#36215;&#24037;&#20316;&#30340;&#20854;&#23427;&#23545;&#35937;&#65289;&#21482;&#20250;&#36890;&#36807;&#20197;&#19979;&#20960;&#31181;&#26041;&#24335;&#26469;&#23454;&#29616;&#65306;&#26500;&#36896;&#22120;&#30340;&#21442;&#25968;&#12289;&#24037;&#21378;&#26041;&#27861;&#30340;&#21442;&#25968;&#65292;&#25110;&#32473;&#30001;&#26500;&#36896;&#20989;&#25968;&#25110;&#32773;&#24037;&#21378;&#26041;&#27861;&#21019;&#24314;&#30340;&#23545;&#35937;&#35774;&#32622;&#23646;&#24615;&#12290;&#22240;&#27492;&#65292;&#23481;&#22120;&#30340;&#24037;&#20316;&#23601;&#26159;&#21019;&#24314;bean&#26102;<span class="emphasis"><em>&#27880;&#20837;</em></span>&#37027;&#20123;&#20381;&#36182;&#20851;&#31995;&#12290;&#30456;&#23545;&#20110;&#30001;bean&#33258;&#24049;&#26469;&#25511;&#21046;&#20854;&#23454;&#20363;&#21270;&#12289;&#30452;&#25509;&#22312;&#26500;&#36896;&#22120;&#20013;&#25351;&#23450;&#20381;&#36182;&#20851;&#31995;&#25110;&#32773;&#31867;&#20284;<span class="emphasis"><em>&#26381;&#21153;&#23450;&#20301;&#22120;&#65288;Service Locator&#65289;</em></span>&#27169;&#24335;&#36825;3&#31181;&#33258;&#20027;&#25511;&#21046;&#20381;&#36182;&#20851;&#31995;&#27880;&#20837;&#30340;&#26041;&#27861;&#26469;&#35828;&#65292;&#25511;&#21046;&#20174;&#26681;&#26412;&#19978;&#21457;&#29983;&#20102;&#20498;&#36716;&#65292;&#36825;&#20063;&#27491;&#26159;<span class="emphasis"><em>&#25511;&#21046;&#21453;&#36716;&#65288;Inversion of Control&#65292; IoC&#65289;</em></span> &#21517;&#23383;&#30340;&#30001;&#26469;&#12290; </p><p>&#24212;&#29992;DI&#21407;&#21017;&#21518;&#65292;&#20195;&#30721;&#23558;&#26356;&#21152;&#28165;&#26224;&#12290;&#32780;&#19988;&#24403;bean&#33258;&#24049;&#19981;&#20877;&#25285;&#24515;&#23545;&#35937;&#20043;&#38388;&#30340;&#20381;&#36182;&#20851;&#31995;&#65288;&#29978;&#33267;&#19981;&#30693;&#36947;&#20381;&#36182;&#30340;&#23450;&#20041;&#25351;&#23450;&#22320;&#26041;&#21644;&#20381;&#36182;&#30340;&#23454;&#38469;&#31867;&#65289;&#20043;&#21518;&#65292;&#23454;&#29616;&#26356;&#39640;&#23618;&#27425;&#30340;&#26494;&#32806;&#21512;&#23558;&#26131;&#22914;&#21453;&#25484;&#12290;DI&#20027;&#35201;&#26377;&#20004;&#31181;&#27880;&#20837;&#26041;&#24335;&#65292;&#21363;<a href="#beans-setter-injection" title="3.3.1.2.&nbsp;Setter&#27880;&#20837;">Setter&#27880;&#20837;</a>&#21644;<a href="#beans-constructor-injection" title="3.3.1.1.&nbsp;&#26500;&#36896;&#22120;&#27880;&#20837;">&#26500;&#36896;&#22120;&#27880;&#20837;</a></p>&#12290;

      <div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-constructor-injection"></a>3.3.1.1.&nbsp;&#26500;&#36896;&#22120;&#27880;&#20837;</h4></div></div><div></div></div><p><span class="emphasis"><em>&#22522;&#20110;&#26500;&#36896;&#22120;</em></span>&#30340;DI&#36890;&#36807;&#35843;&#29992;&#24102;&#21442;&#25968;&#30340;&#26500;&#36896;&#22120;&#26469;&#23454;&#29616;&#65292;&#27599;&#20010;&#21442;&#25968;&#20195;&#34920;&#30528;&#19968;&#20010;&#20381;&#36182;&#12290;&#27492;&#22806;&#65292;&#36824;&#21487;&#36890;&#36807;&#32473;<tt class="literal">stattic</tt>&#24037;&#21378;&#26041;&#27861;&#20256;&#21442;&#25968;&#26469;&#26500;&#36896;bean&#12290;&#25509;&#19979;&#26469;&#30340;&#20171;&#32461;&#23558;&#35748;&#20026;&#32473;&#26500;&#36896;&#22120;&#20256;&#21442;&#19982;&#32473;<tt class="literal">&#38745;&#24577;</tt>&#24037;&#21378;&#26041;&#27861;&#20256;&#21442;&#26159;&#31867;&#20284;&#30340;&#12290;&#19979;&#38754;&#23637;&#31034;&#20102;&#21482;&#33021;&#20351;&#29992;&#26500;&#36896;&#22120;&#21442;&#25968;&#26469;&#27880;&#20837;&#20381;&#36182;&#20851;&#31995;&#30340;&#20363;&#23376;&#12290;&#35831;&#27880;&#24847;&#65292;&#36825;&#20010;&#31867;&#24182;&#27809;&#26377;&#20160;&#20040;<span class="emphasis"><em>&#29305;&#21035;&#20043;&#22788;</em></span>&#12290;</p><pre class="programlisting">public class SimpleMovieLister {

    <i class="lineannotation"><span class="lineannotation">// the <tt class="classname">SimpleMovieLister</tt> has a dependency on a <tt class="interfacename">MovieFinder</tt></span></i>
    private MovieFinder movieFinder;

    <i class="lineannotation"><span class="lineannotation">// a constructor so that the Spring container can 'inject' a <tt class="interfacename">MovieFinder</tt></span></i>
    public SimpleMovieLister(MovieFinder movieFinder) {
        this.movieFinder = movieFinder;
    }
    
    <i class="lineannotation"><span class="lineannotation">// business logic that actually 'uses' the injected <tt class="interfacename">MovieFinder</tt> is omitted...</span></i>
}</pre><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="beans-factory-ctor-arguments-resolution"></a>3.3.1.1.1.&nbsp;&#26500;&#36896;&#22120;&#21442;&#25968;&#35299;&#26512;</h5></div></div><div></div></div><p>&#26500;&#36896;&#22120;&#21442;&#25968;&#35299;&#26512;&#26681;&#25454;&#21442;&#25968;&#31867;&#22411;&#36827;&#34892;&#21305;&#37197;&#65292;&#22914;&#26524;bean&#30340;&#26500;&#36896;&#22120;&#21442;&#25968;&#31867;&#22411;&#23450;&#20041;&#38750;&#24120;&#26126;&#30830;&#65292;&#37027;&#20040;&#22312;bean&#34987;&#23454;&#20363;&#21270;&#30340;&#26102;&#20505;&#65292;bean&#23450;&#20041;&#20013;&#26500;&#36896;&#22120;&#21442;&#25968;&#30340;&#23450;&#20041;&#39034;&#24207;&#23601;&#26159;&#36825;&#20123;&#21442;&#25968;&#30340;&#39034;&#24207;&#65292;&#20381;&#27425;&#36827;&#34892;&#21305;&#37197;&#65292;&#27604;&#22914;&#19979;&#38754;&#30340;&#20195;&#30721;</p><pre class="programlisting">package x.y;

public class Foo {

    public Foo(Bar bar, Baz baz) {
        <i class="lineannotation"><span class="lineannotation">// ...</span></i>
    }
}</pre><p>&#19978;&#36848;&#20363;&#23376;&#20013;&#30001;&#20110;&#26500;&#36896;&#21442;&#25968;&#38750;&#24120;&#26126;&#30830;&#65288;&#36825;&#37324;&#25105;&#20204;&#20551;&#23450; <tt class="classname">Bar</tt>&#21644; <tt class="classname">Baz</tt>&#20043;&#38388;&#19981;&#23384;&#22312;&#32487;&#25215;&#20851;&#31995;&#65289;&#12290;&#22240;&#27492;&#19979;&#38754;&#30340;&#37197;&#32622;&#21363;&#20351;&#27809;&#26377;&#26126;&#30830;&#25351;&#23450;&#26500;&#36896;&#21442;&#25968;&#39034;&#24207;&#65288;&#21644;&#31867;&#22411;&#65289;&#65292;&#20063;&#20250;&#24037;&#20316;&#30340;&#24456;&#22909;&#12290;</p><pre class="programlisting">&lt;beans&gt;
    &lt;bean name="foo" class="x.y.Foo"&gt;
        &lt;constructor-arg&gt;
            &lt;bean class="x.y.Bar"/&gt;
        &lt;/constructor-arg&gt;
        &lt;constructor-arg&gt;
            &lt;bean class="x.y.Baz"/&gt;
        &lt;/constructor-arg&gt;
    &lt;/bean&gt;
&lt;/beans&gt;</pre><p>&#25105;&#20204;&#20877;&#26469;&#30475;&#21478;&#19968;&#20010;bean&#65292;&#35813;bean&#30340;&#26500;&#36896;&#21442;&#25968;&#31867;&#22411;&#24050;&#30693;&#65292;&#21305;&#37197;&#20063;&#27809;&#26377;&#38382;&#39064;(&#36319;&#21069;&#38754;&#30340;&#20363;&#23376;&#19968;&#26679;)&#12290;&#20294;&#26159;&#24403;&#20351;&#29992;&#31616;&#21333;&#31867;&#22411;&#26102;&#65292;&#27604;&#22914;<tt class="literal">&lt;value&gt;true&lt;value&gt;</tt>&#65292;Spring&#23558;&#26080;&#27861;&#30693;&#36947;&#35813;&#20540;&#30340;&#31867;&#22411;&#12290;&#19981;&#20511;&#21161;&#20854;&#20182;&#24110;&#21161;&#65292;&#20182;&#23558;&#26080;&#27861;&#20165;&#20165;&#26681;&#25454;&#21442;&#25968;&#31867;&#22411;&#36827;&#34892;&#21305;&#37197;&#65292;&#27604;&#22914;&#19979;&#38754;&#30340;&#36825;&#20010;&#20363;&#23376;&#65306;</p><pre class="programlisting">package examples;

public class ExampleBean {

    <i class="lineannotation"><span class="lineannotation">// No. of years to the calculate the Ultimate Answer</span></i>
    private int years;

    <i class="lineannotation"><span class="lineannotation">// The Answer to Life, the Universe, and Everything</span></i>
    private String ultimateAnswer;

    public ExampleBean(int years, String ultimateAnswer) {
        this.years = years;
        this.ultimateAnswer = ultimateAnswer;
    }
}</pre><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="beans-factory-ctor-arguments-type"></a>3.3.1.1.1.1.&nbsp;&#26500;&#36896;&#22120;&#21442;&#25968;&#31867;&#22411;&#21305;&#37197;</h6></div></div><div></div></div><p>&#38024;&#23545;&#19978;&#38754;&#30340;&#22330;&#26223;<span class="emphasis"><em>&#21487;&#20197;</em></span>&#36890;&#36807;&#20351;&#29992;<tt class="literal">'type'</tt>&#23646;&#24615;&#26469;&#26174;&#24335;&#25351;&#23450;&#37027;&#20123;&#31616;&#21333;&#31867;&#22411;&#30340;&#26500;&#36896;&#21442;&#25968;&#30340;&#31867;&#22411;&#65292;&#27604;&#22914;&#65306;</p><pre class="programlisting">&lt;bean id="exampleBean" class="examples.ExampleBean"&gt;
  &lt;constructor-arg type="int" value="7500000"/&gt;
  &lt;constructor-arg type="java.lang.String" value="42"/&gt;
&lt;/bean&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="beans-factory-ctor-arguments-index"></a>3.3.1.1.1.2.&nbsp;&#26500;&#36896;&#21442;&#25968;&#32034;&#24341;</h6></div></div><div></div></div><p>&#25105;&#20204;&#36824;&#21487;&#20197;&#36890;&#36807;<tt class="literal">index</tt>&#23646;&#24615;&#26469;&#26174;&#24335;&#25351;&#23450;&#26500;&#36896;&#21442;&#25968;&#30340;&#32034;&#24341;&#65292;&#27604;&#22914;&#19979;&#38754;&#30340;&#20363;&#23376;&#65306;</p><pre class="programlisting">&lt;bean id="exampleBean" class="examples.ExampleBean"&gt;
  &lt;constructor-arg index="0" value="7500000"/&gt;
  &lt;constructor-arg index="1" value="42"/&gt;
&lt;/bean&gt;</pre><p>&#36890;&#36807;&#20351;&#29992;&#32034;&#24341;&#23646;&#24615;&#19981;&#20294;&#21487;&#20197;&#35299;&#20915;&#22810;&#20010;&#31616;&#21333;&#23646;&#24615;&#30340;&#28151;&#28102;&#38382;&#39064;&#65292;&#36824;&#21487;&#20197;&#35299;&#20915;&#26377;&#21487;&#33021;&#26377;&#30456;&#21516;&#31867;&#22411;&#30340;2&#20010;&#26500;&#36896;&#21442;&#25968;&#30340;&#28151;&#28102;&#38382;&#39064;&#20102;&#65292;&#27880;&#24847;<span class="emphasis"><em>index&#26159;&#20174;0&#24320;&#22987;</em></span>&#12290;</p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-setter-injection"></a>3.3.1.2.&nbsp;Setter&#27880;&#20837;</h4></div></div><div></div></div><p>&#36890;&#36807;&#35843;&#29992;&#26080;&#21442;&#26500;&#36896;&#22120;&#25110;&#26080;&#21442;<tt class="literal">static</tt>&#24037;&#21378;&#26041;&#27861;&#23454;&#20363;&#21270;bean&#20043;&#21518;&#65292;&#35843;&#29992;&#35813;bean&#30340;setter&#26041;&#27861;&#65292;&#21363;&#21487;&#23454;&#29616;<span class="emphasis"><em>&#22522;&#20110;setter</em></span>&#30340;DI&#12290;</p><p>&#19979;&#38754;&#30340;&#20363;&#23376;&#23558;&#23637;&#31034;&#21482;&#20351;&#29992;setter&#27880;&#20837;&#20381;&#36182;&#12290;&#27880;&#24847;&#65292;&#36825;&#20010;&#31867;&#24182;&#27809;&#26377;&#20160;&#20040;<span class="emphasis"><em>&#29305;&#21035;</em></span>&#20043;&#22788;&#65292;&#23427;&#23601;&#26159;&#26222;&#36890;&#30340;Java&#31867;&#12290;</p><pre class="programlisting">public class SimpleMovieLister {

    <i class="lineannotation"><span class="lineannotation">// the <tt class="classname">SimpleMovieLister</tt> has a dependency on the <tt class="interfacename">MovieFinder</tt></span></i>
    private MovieFinder movieFinder;

    <i class="lineannotation"><span class="lineannotation">// a setter method so that the Spring container can 'inject' a <tt class="interfacename">MovieFinder</tt></span></i>
    public void setMovieFinder(MovieFinder movieFinder) {
        this.movieFinder = movieFinder;
    }

    <i class="lineannotation"><span class="lineannotation">// business logic that actually 'uses' the injected <tt class="interfacename">MovieFinder</tt> is omitted...</span></i>
}</pre></div><div class="sidebar"><p class="title"><b>&#26500;&#36896;&#22120;&#27880;&#20837;&#36824;&#26159;Setter&#27880;&#20837;?</b></p><p>&#30001;&#20110;&#22823;&#37327;&#30340;&#26500;&#36896;&#22120;&#21442;&#25968;&#21487;&#33021;&#20351;&#31243;&#24207;&#21464;&#24471;&#31528;&#25305;&#65292;&#29305;&#21035;&#26159;&#24403;&#26576;&#20123;&#23646;&#24615;&#26159;&#21487;&#36873;&#30340;&#26102;&#20505;&#12290;&#22240;&#27492;&#36890;&#24120;&#24773;&#20917;&#19979;&#65292;Spring&#24320;&#21457;&#22242;&#38431;&#25552;&#20513;&#20351;&#29992;setter&#27880;&#20837;&#12290;&#32780;&#19988;setter DI&#22312;&#20197;&#21518;&#30340;&#26576;&#20010;&#26102;&#20505;&#36824;&#21487;&#23558;&#23454;&#20363;&#37325;&#26032;&#37197;&#32622;&#65288;&#25110;&#37325;&#26032;&#27880;&#20837;&#65289;&#65288;<a href="#jmx" title="Chapter&nbsp;20.&nbsp;JMX">JMX MBean</a>&#23601;&#26159;&#19968;&#20010;&#24456;&#22909;&#30340;&#20363;&#23376;&#65289;&#12290;</p><p>&#23613;&#31649;&#22914;&#27492;&#65292;&#26500;&#36896;&#22120;&#27880;&#20837;&#36824;&#26159;&#24471;&#21040;&#24456;&#22810;&#32431;&#21270;&#35770;&#32773;&#65288;&#20063;&#26377;&#24456;&#22909;&#30340;&#29702;&#30001;&#65289;&#30340;&#38738;&#30544;&#12290;&#19968;&#27425;&#24615;&#23558;&#25152;&#26377;&#20381;&#36182;&#27880;&#20837;&#30340;&#20570;&#27861;&#24847;&#21619;&#30528;&#65292;&#22312;&#26410;&#23436;&#20840;&#21021;&#22987;&#21270;&#30340;&#29366;&#24577;&#19979;&#65292;&#27492;&#23545;&#35937;&#19981;&#20250;&#36820;&#22238;&#32473;&#23458;&#25143;&#20195;&#30721;&#65288;&#25110;&#34987;&#35843;&#29992;&#65289;&#65292;&#27492;&#22806;&#23545;&#35937;&#20063;&#19981;&#38656;&#35201;&#20877;&#27425;&#34987;&#37325;&#26032;&#37197;&#32622;&#65288;&#25110;&#37325;&#26032;&#27880;&#20837;&#65289;&#12290;</p><p>&#23545;&#20110;&#27880;&#20837;&#31867;&#22411;&#30340;&#36873;&#25321;&#24182;&#27809;&#30828;&#24615;&#30340;&#35268;&#23450;&#12290;&#21482;&#35201;&#33021;&#36866;&#21512;&#20320;&#30340;&#24212;&#29992;&#65292;&#26080;&#35770;&#20351;&#29992;&#20309;&#31181;&#31867;&#22411;&#30340;DI&#37117;&#21487;&#20197;&#12290;&#23545;&#20110;&#37027;&#20123;&#27809;&#26377;&#28304;&#20195;&#30721;&#30340;&#31532;&#19977;&#26041;&#31867;&#65292;&#25110;&#32773;&#27809;&#26377;&#25552;&#20379;setter&#26041;&#27861;&#30340;&#36951;&#30041;&#20195;&#30721;&#65292;&#25105;&#20204;&#21017;&#21035;&#26080;&#36873;&#25321;&#65293;&#65293;&#26500;&#36896;&#22120;&#27880;&#20837;&#23558;&#26159;&#20320;&#21807;&#19968;&#30340;&#36873;&#25321;&#12290;</p></div><p><tt class="interfacename">BeanFactory</tt>&#23545;&#20110;&#23427;&#25152;&#31649;&#29702;&#30340;bean&#25552;&#20379;&#20004;&#31181;&#27880;&#20837;&#20381;&#36182;&#26041;&#24335;&#65288;&#23454;&#38469;&#19978;&#23427;&#20063;&#25903;&#25345;&#21516;&#26102;&#20351;&#29992;&#26500;&#36896;&#22120;&#27880;&#20837;&#21644;Setter&#26041;&#24335;&#27880;&#20837;&#20381;&#36182;&#65289;&#12290;&#38656;&#35201;&#27880;&#20837;&#30340;&#20381;&#36182;&#23558;&#20445;&#23384;&#22312;<tt class="interfacename">BeanDefinition</tt>&#20013;&#65292;&#23427;&#33021;&#26681;&#25454;&#25351;&#23450;&#30340;<tt class="interfacename">PropertyEditor</tt>&#23454;&#29616;&#23558;&#23646;&#24615;&#20174;&#19968;&#31181;&#26684;&#24335;&#36716;&#25442;&#25104;&#21478;&#22806;&#19968;&#31181;&#26684;&#24335;&#12290;&#28982;&#32780;&#65292;&#22823;&#37096;&#20221;&#30340;Spring&#29992;&#25143;&#24182;&#19981;&#38656;&#35201;&#30452;&#25509;&#20197;&#32534;&#31243;&#30340;&#26041;&#24335;&#22788;&#29702;&#36825;&#20123;&#31867;&#65292;&#32780;&#26159;&#37319;&#29992;XML&#30340;&#26041;&#24335;&#26469;&#36827;&#34892;&#23450;&#20041;&#65292;&#22312;&#20869;&#37096;&#36825;&#20123;&#23450;&#20041;&#23558;&#34987;&#36716;&#25442;&#25104;&#30456;&#24212;&#31867;&#30340;&#23454;&#20363;&#65292;&#24182;&#26368;&#32456;&#24471;&#21040;&#19968;&#20010;Spring IoC&#23481;&#22120;&#23454;&#20363;&#12290;</p><p>&#22788;&#29702;bean&#20381;&#36182;&#20851;&#31995;&#36890;&#24120;&#25353;&#20197;&#19979;&#27493;&#39588;&#36827;&#34892;&#65306;</p><div class="orderedlist"><ol type="1"><li><p>&#26681;&#25454;&#23450;&#20041;bean&#30340;&#37197;&#32622;&#65288;&#25991;&#20214;&#65289;&#21019;&#24314;&#24182;&#21021;&#22987;&#21270;<tt class="interfacename">BeanFactory</tt>&#23454;&#20363;&#65288;&#22823;&#37096;&#20221;&#30340;Spring&#29992;&#25143;&#20351;&#29992;&#25903;&#25345;XML&#26684;&#24335;&#37197;&#32622;&#25991;&#20214;&#30340;<tt class="interfacename">BeanFactory</tt>&#25110;<tt class="interfacename">ApplicationContext</tt>&#23454;&#29616;&#65289;&#12290;</p></li><li><p>&#27599;&#20010;bean&#30340;&#20381;&#36182;&#23558;&#20197;&#23646;&#24615;&#12289;&#26500;&#36896;&#22120;&#21442;&#25968;&#12289;&#25110;&#38745;&#24577;&#24037;&#21378;&#26041;&#27861;&#21442;&#25968;&#30340;&#24418;&#24335;&#20986;&#29616;&#12290;<span class="emphasis"><em>&#24403;&#36825;&#20123;bean&#34987;&#23454;&#38469;&#21019;&#24314;&#26102;</em></span>&#65292;&#36825;&#20123;&#20381;&#36182;&#20063;&#23558;&#20250;&#25552;&#20379;&#32473;&#35813;bean&#12290;</p></li><li><p>&#27599;&#20010;&#23646;&#24615;&#25110;&#26500;&#36896;&#22120;&#21442;&#25968;&#26082;&#21487;&#20197;&#26159;&#19968;&#20010;&#23454;&#38469;&#30340;&#20540;&#65292;&#20063;&#21487;&#20197;&#26159;&#23545;&#35813;&#23481;&#22120;&#20013;&#21478;&#19968;&#20010;bean&#30340;&#24341;&#29992;&#12290;</p></li><li><p><a name="beans-factory-collaborators-propertyeditor"></a>&#27599;&#20010;&#25351;&#23450;&#30340;&#23646;&#24615;&#25110;&#26500;&#36896;&#22120;&#21442;&#25968;&#20540;&#24517;&#39035;&#33021;&#22815;&#34987;&#36716;&#25442;&#25104;&#29305;&#23450;&#30340;&#26684;&#24335;&#25110;&#26500;&#36896;&#21442;&#25968;&#25152;&#38656;&#30340;&#31867;&#22411;&#12290;&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;Spring&#20250;&#20197;String&#31867;&#22411;&#25552;&#20379;&#20540;&#36716;&#25442;&#25104;&#21508;&#31181;&#20869;&#32622;&#31867;&#22411;&#65292;&#27604;&#22914;<tt class="literal">int</tt>&#12289;<tt class="literal">long</tt>&#12289;<tt class="literal">String</tt>&#12289;<tt class="literal">boolean</tt>&#31561;&#12290;</p></li></ol></div><p>Spring&#20250;&#22312;&#23481;&#22120;&#34987;&#21019;&#24314;&#26102;&#39564;&#35777;&#23481;&#22120;&#20013;&#27599;&#20010;bean&#30340;&#37197;&#32622;&#65292;&#21253;&#25324;&#39564;&#35777;&#37027;&#20123;bean&#25152;&#24341;&#29992;&#30340;&#23646;&#24615;&#26159;&#21542;&#25351;&#21521;&#19968;&#20010;&#26377;&#25928;&#30340;bean&#65288;&#21363;&#34987;&#24341;&#29992;&#30340;bean&#20063;&#22312;&#23481;&#22120;&#20013;&#34987;&#23450;&#20041;&#65289;&#12290;&#28982;&#32780;&#65292;&#22312;bean<span class="emphasis"><em>&#34987;&#23454;&#38469;&#21019;&#24314;</em></span>&#20043;&#21069;&#65292;bean&#30340;&#23646;&#24615;&#24182;&#19981;&#20250;&#34987;&#35774;&#32622;&#12290;&#23545;&#20110;&#37027;&#20123;singleton&#31867;&#22411;&#21644;&#34987;&#35774;&#32622;&#20026;&#25552;&#21069;&#23454;&#20363;&#21270;&#30340;bean&#65288;&#27604;&#22914;<tt class="interfacename">ApplicationContext</tt>&#20013;&#30340;singleton bean&#65289;&#32780;&#35328;&#65292;bean&#23454;&#20363;&#23558;&#19982;&#23481;&#22120;&#21516;&#26102;&#34987;&#21019;&#24314;&#12290;&#32780;&#21478;&#22806;&#19968;&#20123;bean&#21017;&#20250;&#22312;&#38656;&#35201;&#30340;&#26102;&#20505;&#34987;&#21019;&#24314;&#65292;&#20276;&#38543;&#30528;bean&#34987;&#23454;&#38469;&#21019;&#24314;&#65292;&#20316;&#20026;&#35813;bean&#30340;&#20381;&#36182;bean&#20197;&#21450;&#20381;&#36182;bean&#30340;&#20381;&#36182;bean&#65288;&#20381;&#27492;&#31867;&#25512;&#65289;&#20063;&#23558;&#34987;&#21019;&#24314;&#21644;&#20998;&#37197;&#12290;</p><div class="sidebar"><p class="title"><b>&#24490;&#29615;&#20381;&#36182;</b></p><p>&#22312;&#37319;&#29992;&#26500;&#36896;&#22120;&#27880;&#20837;&#30340;&#26041;&#24335;&#37197;&#32622;bean&#26102;&#65292;&#24456;&#26377;&#21487;&#33021;&#20250;&#20135;&#29983;&#24490;&#29615;&#20381;&#36182;&#30340;&#24773;&#20917;&#12290;</p><p>&#27604;&#22914;&#35828;&#65292;&#19968;&#20010;&#31867;A&#65292;&#38656;&#35201;&#36890;&#36807;&#26500;&#36896;&#22120;&#27880;&#20837;&#31867;B&#65292;&#32780;&#31867;B&#21448;&#38656;&#35201;&#36890;&#36807;&#26500;&#36896;&#22120;&#27880;&#20837;&#31867;A&#12290;&#22914;&#26524;&#20026;&#31867;A&#21644;B&#37197;&#32622;&#30340;bean&#34987;&#20114;&#30456;&#27880;&#20837;&#30340;&#35805;&#65292;&#37027;&#20040;Spring IoC&#23481;&#22120;&#23558;&#26816;&#27979;&#20986;&#24490;&#29615;&#24341;&#29992;&#65292;&#24182;&#25243;&#20986; <tt class="classname">BeanCurrentlyInCreationException</tt>&#24322;&#24120;&#12290;</p><p>&#23545;
&#20110;&#27492;&#38382;&#39064;&#65292;&#19968;&#20010;&#21487;&#33021;&#30340;&#35299;&#20915;&#26041;&#27861;&#23601;&#26159;&#20462;&#25913;&#28304;&#20195;&#30721;&#65292;&#23558;&#26576;&#20123;&#26500;&#36896;&#22120;&#27880;&#20837;&#25913;&#20026;setter&#27880;&#20837;&#12290;&#21478;&#19968;&#20010;&#35299;&#20915;&#26041;&#27861;&#23601;&#26159;&#23436;&#20840;&#25918;&#24323;&#26500;&#36896;&#22120;&#27880;&#20837;&#65292;&#21482;&#20351;&#29992;setter&#27880;&#20837;&#12290;
&#25442;&#21477;&#35805;&#35828;&#65292;&#38500;&#20102;&#26497;&#23569;&#25968;&#20363;&#22806;&#65292;&#22823;&#37096;&#20998;&#30340;&#24490;&#29615;&#20381;&#36182;&#37117;&#26159;&#21487;&#20197;&#36991;&#20813;&#30340;&#65292;&#19981;&#36807;&#37319;&#29992;setter&#27880;&#20837;&#20135;&#29983;&#24490;&#29615;&#20381;&#36182;&#30340;&#21487;&#33021;&#24615;&#20063;&#26159;&#23384;&#22312;&#30340;&#12290;</p><p>&#19982;<span class="emphasis"><em>&#36890;&#24120;</em></span>&#25105;&#20204;&#35265;&#21040;&#30340;&#38750;&#24490;&#29615;&#20381;&#36182;&#30340;&#24773;&#20917;&#26377;&#25152;&#19981;&#21516;&#65292;&#22312;&#20004;&#20010;bean&#20043;&#38388;&#30340;&#24490;&#29615;&#20381;&#36182;&#23558;&#23548;&#33268;&#19968;&#20010;bean&#22312;&#34987;&#23436;&#20840;&#21021;&#22987;&#21270;&#30340;&#26102;&#20505;&#34987;&#27880;&#20837;&#21040;&#21478;&#19968;&#20010;bean&#20013;&#65288;&#22914;&#21516;&#25105;&#20204;&#24120;&#35828;&#30340;&#20808;&#26377;&#34507;&#36824;&#26159;&#20808;&#26377;&#40481;&#30340;&#24773;&#20917;&#65289;&#12290;</p></div><p>&#36890;
&#24120;&#24773;&#20917;&#19979;&#65292;&#20320;&#21487;&#20197;&#20449;&#36182;Spring&#65292;&#23427;&#20250;&#22312;&#23481;&#22120;&#21152;&#36733;&#26102;&#21457;&#29616;&#37197;&#32622;&#38169;&#35823;&#65288;&#27604;&#22914;&#23545;&#26080;&#25928;bean&#30340;&#24341;&#29992;&#20197;&#21450;&#24490;&#29615;&#20381;&#36182;&#65289;&#12290;Spring&#20250;&#22312;bean&#21019;&#24314;&#26102;&#25165;&#21435;&#35774;&#32622;&#23646;
&#24615;&#21644;&#20381;&#36182;&#20851;&#31995;&#65288;&#21482;&#22312;&#38656;&#35201;&#26102;&#21019;&#24314;&#25152;&#20381;&#36182;&#30340;&#20854;&#20182;&#23545;&#35937;&#65289;&#12290;&#36825;&#24847;&#21619;&#30528;&#21363;&#20351;Spring&#23481;&#22120;&#34987;&#27491;&#30830;&#21152;&#36733;&#65292;&#24403;&#33719;&#21462;&#19968;&#20010;bean&#23454;&#20363;&#26102;&#65292;&#22914;&#26524;&#22312;&#21019;&#24314;bean&#25110;&#32773;&#35774;&#32622;&#20381;&#36182;
&#26102;&#20986;&#29616;&#38382;&#39064;&#65292;&#20173;&#28982;&#20250;&#25243;&#20986;&#19968;&#20010;&#24322;&#24120;&#12290;&#22240;&#32570;&#23569;&#25110;&#35774;&#32622;&#20102;&#19968;&#20010;&#26080;&#25928;&#23646;&#24615;&#32780;&#23548;&#33268;&#25243;&#20986;&#19968;&#20010;&#24322;&#24120;&#30340;&#24773;&#20917;&#30340;&#30830;&#26159;&#23384;&#22312;&#30340;&#12290;&#22240;&#20026;&#19968;&#20123;&#37197;&#32622;&#38382;&#39064;&#32780;&#23548;&#33268;&#28508;&#22312;&#30340;&#21487;&#35265;&#24615;&#34987;&#24310;&#36831;&#65292;&#25152;&#20197;&#22312;
&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;<tt class="interfacename">ApplicationContext</tt>&#23454;&#29616;&#20013;&#30340;bean&#37319;&#29992;&#25552;&#21069;&#23454;&#20363;&#21270;&#30340;singleton&#27169;&#24335;&#12290;&#22312;&#23454;&#38469;&#38656;&#35201;&#20043;&#21069;&#21019;&#24314;&#36825;&#20123;bean&#23558;&#24102;&#26469;&#26102;&#38388;&#19982;&#20869;&#23384;&#30340;&#24320;&#38144;&#12290;&#32780;&#36825;&#26679;&#20570;&#30340;&#22909;&#22788;&#23601;&#26159;<tt class="interfacename">ApplicationContext</tt>&#34987;&#21152;&#36733;&#30340;&#26102;&#20505;&#21487;&#20197;&#23613;&#26089;&#30340;&#21457;&#29616;&#19968;&#20123;&#37197;&#32622;&#30340;&#38382;&#39064;&#12290;&#19981;&#36807;&#29992;&#25143;&#20063;&#21487;&#20197;&#26681;&#25454;&#38656;&#35201;&#37319;&#29992;&#24310;&#36831;&#23454;&#20363;&#21270;&#26469;&#26367;&#20195;&#40664;&#35748;&#30340;singleton&#27169;&#24335;&#12290;</p><p>&#22914;&#26524;&#25735;&#24320;&#24490;&#29615;&#20381;&#36182;&#19981;&#35848;&#65292;&#24403;&#21327;&#20316;bean&#34987;&#27880;&#20837;&#21040;&#20381;&#36182;bean&#26102;&#65292;&#21327;&#20316;bean&#24517;&#39035;&#22312;&#20381;&#36182;bean&#20043;&#21069;<span class="emphasis"><em>&#23436;&#20840;</em></span>&#37197;&#32622;&#22909;&#12290;&#20363;&#22914;bean A&#23545;bean B&#23384;&#22312;&#20381;&#36182;&#20851;&#31995;&#65292;&#37027;&#20040;Spring IoC&#23481;&#22120;&#22312;&#35843;&#29992;bean A&#30340;setter&#26041;&#27861;&#20043;&#21069;&#65292;bean B&#24517;&#39035;&#34987;&#23436;&#20840;&#37197;&#32622;&#65292;&#36825;&#37324;&#25152;&#35859;<span class="emphasis"><em>&#23436;&#20840;&#37197;&#32622;</em></span>&#30340;&#24847;&#24605;&#23601;&#26159;bean&#23558;&#34987;&#23454;&#20363;&#21270;&#65288;&#22914;&#26524;&#19981;&#26159;&#37319;&#29992;&#25552;&#21069;&#23454;&#20363;&#21270;&#30340;singleton&#27169;&#24335;&#65289;&#65292;&#30456;&#20851;&#30340;&#20381;&#36182;&#20063;&#23558;&#34987;&#35774;&#32622;&#22909;&#65292;&#32780;&#19988;&#25152;&#26377;&#30456;&#20851;&#30340;lifecycle&#26041;&#27861;&#65288;&#22914;<a href="#beans-factory-lifecycle-initializingbean" title="3.5.1.1.&nbsp;&#21021;&#22987;&#21270;&#22238;&#35843;">IntializingBean</a>&#30340;init&#26041;&#27861;&#20197;&#21450;callback&#26041;&#27861;&#65289;&#20063;&#23558;&#34987;&#35843;&#29992;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-some-examples"></a>3.3.1.3.&nbsp;&#19968;&#20123;&#20363;&#23376;</h4></div></div><div></div></div><p>&#39318;&#20808;&#26159;&#19968;&#20010;&#29992;XML&#26684;&#24335;&#23450;&#20041;&#30340;Setter DI&#20363;&#23376;&#12290;&#30456;&#20851;&#30340;XML&#37197;&#32622;&#22914;&#19979;&#65306;</p><pre class="programlisting">&lt;bean id="exampleBean" class="examples.ExampleBean"&gt;

  <i class="lineannotation"><span class="lineannotation">&lt;!-- setter injection using the nested <tt class="literal">&lt;ref/&gt;</tt> element --&gt;</span></i>
  &lt;property name="beanOne"&gt;&lt;ref bean="anotherExampleBean"/&gt;&lt;/property&gt;

  <i class="lineannotation"><span class="lineannotation">&lt;!-- setter injection using the neater 'ref' attribute --&gt;</span></i>
  &lt;property name="beanTwo" ref="yetAnotherBean"/&gt;
  &lt;property name="integerProperty" value="1"/&gt;
&lt;/bean&gt;

&lt;bean id="anotherExampleBean" class="examples.AnotherBean"/&gt;
&lt;bean id="yetAnotherBean" class="examples.YetAnotherBean"/&gt;</pre><pre class="programlisting">public class ExampleBean {

    private AnotherBean beanOne;
    private YetAnotherBean beanTwo;
    private int i;

    public void setBeanOne(AnotherBean beanOne) {
        this.beanOne = beanOne;
    }

    public void setBeanTwo(YetAnotherBean beanTwo) {
        this.beanTwo = beanTwo;
    }

    public void setIntegerProperty(int i) {
        this.i = i;
    }    
}</pre><p>&#27491;&#22914;&#20320;&#25152;&#30475;&#21040;&#30340;&#65292;bean&#31867;&#20013;&#30340;setter&#26041;&#27861;&#19982;xml&#25991;&#20214;&#20013;&#37197;&#32622;&#30340;&#23646;&#24615;&#26159;&#19968;&#19968;&#23545;&#24212;&#30340;&#12290;&#25509;&#30528;&#26159;&#26500;&#36896;&#22120;&#27880;&#20837;&#30340;&#20363;&#23376;&#65306;</p><pre class="programlisting">&lt;bean id="exampleBean" class="examples.ExampleBean"&gt;

  <i class="lineannotation"><span class="lineannotation">&lt;!-- constructor injection using the nested <tt class="literal">&lt;ref/&gt;</tt> element --&gt;</span></i>
  &lt;constructor-arg&gt;
    &lt;ref bean="anotherExampleBean"/&gt;
  &lt;/constructor-arg&gt;
  
  <i class="lineannotation"><span class="lineannotation">&lt;!-- constructor injection using the neater 'ref' attribute --&gt;</span></i>
  &lt;constructor-arg ref="yetAnotherBean"/&gt;
  
  &lt;constructor-arg type="int" value="1"/&gt;
&lt;/bean&gt;

&lt;bean id="anotherExampleBean" class="examples.AnotherBean"/&gt;
&lt;bean id="yetAnotherBean" class="examples.YetAnotherBean"/&gt;</pre><pre class="programlisting">public class ExampleBean {

    private AnotherBean beanOne;
    private YetAnotherBean beanTwo;
    private int i;
    
    public ExampleBean(
        AnotherBean anotherBean, YetAnotherBean yetAnotherBean, int i) {
        this.beanOne = anotherBean;
        this.beanTwo = yetAnotherBean;
        this.i = i;
    }
}</pre><p>&#22914;&#20320;&#25152;&#35265;&#65292;&#22312;xml bean&#23450;&#20041;&#20013;&#25351;&#23450;&#30340;&#26500;&#36896;&#22120;&#21442;&#25968;&#23558;&#34987;&#29992;&#26469;&#20316;&#20026;&#20256;&#36882;&#32473;&#31867;<tt class="classname">ExampleBean</tt>&#26500;&#36896;&#22120;&#30340;&#21442;&#25968;&#12290;</p><p>&#29616;&#22312;&#26469;&#30740;&#31350;&#19968;&#20010;&#26367;&#20195;&#26500;&#36896;&#22120;&#30340;&#26041;&#27861;&#65292;&#37319;&#29992;<tt class="literal">static</tt>&#24037;&#21378;&#26041;&#27861;&#36820;&#22238;&#23545;&#35937;&#23454;&#20363;&#65306;</p><pre class="programlisting">&lt;bean id="exampleBean" class="examples.ExampleBean"
      factory-method="createInstance"&gt;
  &lt;constructor-arg ref="anotherExampleBean"/&gt;
  &lt;constructor-arg ref="yetAnotherBean"/&gt;
  &lt;constructor-arg value="1"/&gt; 
&lt;/bean&gt;

&lt;bean id="anotherExampleBean" class="examples.AnotherBean"/&gt;
&lt;bean id="yetAnotherBean" class="examples.YetAnotherBean"/&gt;</pre><pre class="programlisting">public class ExampleBean {

    <i class="lineannotation"><span class="lineannotation">// a private constructor</span></i>
    private ExampleBean(...) {
      ...
    }
    <i class="lineannotation"><span class="lineannotation">
    // a static factory method; the arguments to this method can be
    // considered the dependencies of the bean that is returned,
    // regardless of how those arguments are actually used.</span></i>
    public static ExampleBean createInstance (
            AnotherBean anotherBean, YetAnotherBean yetAnotherBean, int i) {

        ExampleBean eb = new ExampleBean (...);
        <i class="lineannotation"><span class="lineannotation">// some other operations...</span></i>
        return eb;
    }
}</pre><p>&#35831;&#27880;&#24847;&#65292;&#20256;&#32473;<tt class="literal">static</tt>&#24037;&#21378;&#26041;&#27861;&#30340;&#21442;&#25968;&#30001;<tt class="literal">constructor-arg</tt>&#20803;&#32032;&#25552;&#20379;&#65292;&#36825;&#19982;&#20351;&#29992;&#26500;&#36896;&#22120;&#27880;&#20837;&#26102;&#23436;&#20840;&#19968;&#26679;&#12290;&#32780;&#19988;&#65292;&#37325;&#35201;&#30340;&#26159;&#65292;&#24037;&#21378;&#26041;&#27861;&#25152;&#36820;&#22238;&#30340;&#23454;&#20363;&#30340;&#31867;&#22411;&#24182;&#19981;&#19968;&#23450;&#35201;&#19982;&#21253;&#21547;<tt class="literal">static</tt>&#24037;&#21378;&#26041;&#27861;&#30340;&#31867;&#31867;&#22411;&#19968;&#33268;&#12290;&#23613;&#31649;&#22312;&#27492;&#20363;&#23376;&#20013;&#23427;&#30340;&#30830;&#26159;&#36825;&#26679;&#12290;&#38750;&#38745;&#24577;&#30340;&#23454;&#20363;&#24037;&#21378;&#26041;&#27861;&#19982;&#27492;&#30456;&#21516;&#65288;&#38500;&#20102;&#20351;&#29992;<tt class="literal">factory-bean</tt>&#23646;&#24615;&#26367;&#20195;<tt class="literal">class</tt>&#23646;&#24615;&#22806;&#65289;&#65292;&#22240;&#32780;&#19981;&#22312;&#27492;&#32454;&#36848;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-properties-detailed"></a>3.3.2.&nbsp;&#20381;&#36182;&#37197;&#32622;&#35814;&#35299;</h3></div></div><div></div></div><p>&#27491;&#22914;&#21069;&#38754;&#31456;&#33410;&#25152;&#25552;&#21040;&#30340;&#65292;bean&#30340;&#23646;&#24615;&#21450;&#26500;&#36896;&#22120;&#21442;&#25968;&#26082;&#21487;&#20197;&#24341;&#29992;&#23481;&#22120;&#20013;&#30340;&#20854;&#20182;bean&#65292;&#20063;&#21487;&#20197;&#26159;&#20869;&#32852;&#65288;inline&#65289;bean&#12290;&#22312;spring&#30340;XML&#37197;&#32622;&#20013;&#20351;&#29992;<tt class="literal">&lt;property/&gt;</tt>&#21644;<tt class="literal">&lt;constructor-arg/&gt;</tt>&#20803;&#32032;&#23450;&#20041;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-value-element"></a>3.3.2.1.&nbsp;&#30452;&#25509;&#21464;&#37327;(&#22522;&#26412;&#31867;&#22411;&#12289;<tt class="literal">Strings</tt>&#31867;&#22411;&#31561;&#12290;)</h4></div></div><div></div></div><p><tt class="literal">&lt;value/&gt;</tt>&#20803;&#32032;&#36890;&#36807;&#20154;&#21487;&#20197;&#29702;&#35299;&#30340;&#23383;&#31526;&#20018;&#26469;&#25351;&#23450;&#23646;&#24615;&#25110;&#26500;&#36896;&#22120;&#21442;&#25968;&#30340;&#20540;&#12290;&#27491;&#22914;<a href="#beans-factory-collaborators-propertyeditor">&#21069;&#38754;</a>&#25152;&#25552;&#21040;&#30340;&#65292;JavaBean <tt class="literal">PropertyEditor</tt>&#23558;&#29992;&#20110;&#25226;&#23383;&#31526;&#20018;&#20174;<tt class="classname">java.lang.String</tt>&#31867;&#22411;&#36716;&#21270;&#20026;&#23454;&#38469;&#30340;&#23646;&#24615;&#25110;&#21442;&#25968;&#31867;&#22411;&#12290;</p><pre class="programlisting">&lt;bean id="myDataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close"&gt;
  
  <i class="lineannotation"><span class="lineannotation">&lt;!-- results in a <tt class="methodname">setDriverClassName(String)</tt> call --&gt;</span></i>
  &lt;property name="driverClassName"&gt;
    &lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt;
  &lt;/property&gt;
  &lt;property name="url"&gt;
    &lt;value&gt;jdbc:mysql://localhost:3306/mydb&lt;/value&gt;
  &lt;/property&gt;
  &lt;property name="username"&gt;
    &lt;value&gt;root&lt;/value&gt;
  &lt;/property&gt;
  &lt;property name="password"&gt;
    &lt;value&gt;masterkaoli&lt;/value&gt;
  &lt;/property&gt;
&lt;/bean&gt;</pre><p> <tt class="literal">&lt;property/&gt;</tt> &#21644;<tt class="literal">&lt;constructor-arg/&gt;</tt> &#20803;&#32032;&#20013;&#20063;&#21487;&#20197;&#20351;&#29992;<tt class="literal">'value'</tt> &#23646;&#24615;&#65292;&#36825;&#26679;&#20250;&#20351;&#25105;&#20204;&#30340;&#37197;&#32622;&#26356;&#31616;&#27905;&#65292;&#27604;&#22914;&#19979;&#38754;&#30340;&#37197;&#32622;&#65306;</p><pre class="programlisting">&lt;bean id="myDataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close"&gt;
  
  <i class="lineannotation"><span class="lineannotation">&lt;!-- results in a <tt class="methodname">setDriverClassName(String)</tt> call --&gt;</span></i>
  &lt;property name="driverClassName" value="com.mysql.jdbc.Driver"/&gt;
  &lt;property name="url" value="jdbc:mysql://localhost:3306/mydb"/&gt;
  &lt;property name="username" value="root"/&gt;
  &lt;property name="password" value="masterkaoli"/&gt;
&lt;/bean&gt;</pre><p>Spring&#22242;&#38431;&#26356;&#20542;&#21521;&#37319;&#29992;&#23646;&#24615;&#26041;&#24335;&#65288;&#20351;&#29992;<tt class="literal">&lt;value/&gt;</tt>&#20803;&#32032;&#65289;&#26469;&#23450;&#20041;value&#20540;&#12290;&#24403;&#28982;&#25105;&#20204;&#20063;&#21487;&#20197;&#25353;&#29031;&#19979;&#38754;&#36825;&#31181;&#26041;&#24335;&#37197;&#32622;&#19968;&#20010;<tt class="classname">java.util.Properties</tt>&#23454;&#20363;&#65306;</p><pre class="programlisting">&lt;bean id="mappings" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"&gt;
            
   <i class="lineannotation"><span class="lineannotation">&lt;!-- typed as a <tt class="classname">java.util.Properties</tt> --&gt;</span></i>
   &lt;property name="properties"&gt;
      &lt;value&gt;
         jdbc.driver.className=com.mysql.jdbc.Driver
         jdbc.url=jdbc:mysql://localhost:3306/mydb
      &lt;/value&gt;
   &lt;/property&gt;
&lt;/bean&gt;</pre><p>&#30475;&#21040;&#20160;&#20040;&#20102;&#21527;&#65311;&#22914;&#26524;&#37319;&#29992;&#19978;&#38754;&#30340;&#37197;&#32622;&#65292;Spring&#23481;&#22120;&#23558;&#20351;&#29992;JavaBean <tt class="interfacename">PropertyEditor</tt>&#25226;<tt class="literal">&lt;value/&gt;</tt>&#20803;&#32032;&#20013;&#30340;&#25991;&#26412;&#36716;&#25442;&#20026;&#19968;&#20010;<tt class="classname">java.util.Properties</tt>&#23454;&#20363;&#12290;&#30001;&#20110;&#36825;&#31181;&#20570;&#27861;&#30340;&#31616;&#21333;&#65292;&#22240;&#27492;Spring&#22242;&#38431;&#22312;&#24456;&#22810;&#22320;&#26041;&#20063;&#20250;&#37319;&#29992;&#20869;&#23884;&#30340;<tt class="literal">&lt;value/&gt;</tt>&#20803;&#32032;&#26469;&#20195;&#26367;<tt class="literal">value</tt>&#23646;&#24615;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="beans-idref-element"></a>3.3.2.1.1.&nbsp;<tt class="literal">idref</tt>&#20803;&#32032;</h5></div></div><div></div></div><p><tt class="literal">idref</tt>&#20803;&#32032;&#29992;&#26469;&#23558;&#23481;&#22120;&#20869;&#20854;&#23427;bean&#30340;<span class="emphasis"><em>id</em></span>&#20256;&#32473;<tt class="literal">&lt;constructor-arg/&gt;</tt> &#25110; <tt class="literal">&lt;property/&gt;</tt>&#20803;&#32032;&#65292;&#21516;&#26102;&#25552;&#20379;&#38169;&#35823;&#39564;&#35777;&#21151;&#33021;&#12290;</p><pre class="programlisting">&lt;bean id="theTargetBean" class="..."/&gt;

&lt;bean id="theClientBean" class="..."&gt;
    &lt;property name="targetName"&gt;
        &lt;idref bean="theTargetBean" /&gt;
    &lt;/property&gt;
&lt;/bean&gt;</pre><p>&#19978;&#36848;bean&#23450;&#20041;&#29255;&#27573;<span class="emphasis"><em>&#23436;&#20840;&#22320;</em></span>&#31561;&#21516;&#20110;&#65288;&#22312;&#36816;&#34892;&#26102;&#65289;&#20197;&#19979;&#30340;&#29255;&#27573;&#65306;</p><pre class="programlisting">&lt;bean id="theTargetBean" class="..." /&gt;

&lt;bean id="client" class="..."&gt;
    &lt;property name="targetName" value="theTargetBean" /&gt;
&lt;/bean&gt;</pre><p>&#31532;&#19968;&#31181;&#24418;&#24335;&#27604;&#31532;&#20108;&#31181;&#26356;&#21487;&#21462;&#30340;&#20027;&#35201;&#21407;&#22240;&#26159;&#65292;&#20351;&#29992;<tt class="literal">idref</tt>&#26631;&#35760;&#20801;&#35768;&#23481;&#22120;<span class="emphasis"><em>&#22312;&#37096;&#32626;&#26102;</em></span> &#39564;&#35777;&#25152;&#34987;&#24341;&#29992;&#30340;bean&#26159;&#21542;&#23384;&#22312;&#12290;&#32780;&#31532;&#20108;&#31181;&#26041;&#24335;&#20013;&#65292;&#20256;&#32473;<tt class="literal">client</tt> bean&#30340;<tt class="literal">targetName</tt>&#23646;&#24615;&#20540;&#24182;&#27809;&#26377;&#34987;&#39564;&#35777;&#12290;&#20219;&#20309;&#30340;&#36755;&#20837;&#38169;&#35823;&#20165;&#22312;<tt class="literal">client</tt>  bean&#23454;&#38469;&#23454;&#20363;&#21270;&#26102;&#25165;&#20250;&#34987;&#21457;&#29616;&#65288;&#21487;&#33021;&#20276;&#38543;&#30528;&#33268;&#21629;&#30340;&#38169;&#35823;&#65289;&#12290;&#22914;&#26524;<tt class="literal">client</tt> bean &#26159;<a href="#beans-factory-scopes" title="3.4.&nbsp;Bean&#30340;&#20316;&#29992;&#22495;">prototype</a>&#31867;&#22411;&#30340;bean&#65292;&#21017;&#27492;&#36755;&#20837;&#38169;&#35823;&#65288;&#21450;&#30001;&#27492;&#23548;&#33268;&#30340;&#24322;&#24120;&#65289;&#21487;&#33021;&#22312;&#23481;&#22120;&#37096;&#32626;&#24456;&#20037;&#20197;&#21518;&#25165;&#20250;&#34987;&#21457;&#29616;&#12290;</p><p>&#27492;&#22806;&#65292;&#22914;&#26524;&#34987;&#24341;&#29992;&#30340;bean&#22312;&#21516;&#19968;XML&#25991;&#20214;&#20869;&#65292;&#19988;bean&#21517;&#23383;&#23601;&#26159;bean <span class="emphasis"><em>id</em></span>&#65292;&#37027;&#20040;&#21487;&#20197;&#20351;&#29992;<tt class="literal">local</tt>&#23646;&#24615;&#65292;&#27492;&#23646;&#24615;&#20801;&#35768;XML&#35299;&#26512;&#22120;&#22312;&#35299;&#26512;XML&#25991;&#20214;&#26102;&#23545;&#24341;&#29992;&#30340;bean&#36827;&#34892;&#39564;&#35777;&#12290;</p><pre class="programlisting">&lt;property name="targetName"&gt;
   <i class="lineannotation"><span class="lineannotation">&lt;!-- a bean with an id of '<tt class="literal">theTargetBean</tt>' must exist; otherwise an XML exception will be thrown --&gt;</span></i>
   &lt;idref local="theTargetBean"/&gt;
&lt;/property&gt;</pre><p>&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#19982;&#22312;<tt class="classname">ProxyFactoryBean</tt> bean&#23450;&#20041;&#20013;&#20351;&#29992;&lt;idref/&gt;&#20803;&#32032;&#25351;&#23450;<a href="#aop-pfb-1" title="7.5.1.&nbsp;&#22522;&#30784;">AOP interceptor</a>&#30340;&#30456;&#21516;&#20043;&#22788;&#22312;&#20110;&#65306;&#22914;&#26524;&#20351;&#29992;&lt;idref/&gt;&#20803;&#32032;&#25351;&#23450;&#25318;&#25130;&#22120;&#21517;&#23383;&#65292;&#21487;&#20197;&#36991;&#20813;&#22240;&#19968;&#26102;&#30095;&#24573;&#23548;&#33268;&#30340;&#25318;&#25130;&#22120;ID&#25340;&#20889;&#38169;&#35823;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-ref-element"></a>3.3.2.2.&nbsp;&#24341;&#29992;&#20854;&#23427;&#30340;bean&#65288;&#21327;&#20316;&#32773;&#65289;</h4></div></div><div></div></div><p>&#22312;<tt class="literal">&lt;constructor-arg/&gt;</tt>&#25110;<tt class="literal">&lt;property/&gt;</tt>&#20803;&#32032;&#20869;&#37096;&#36824;&#21487;&#20197;&#20351;&#29992;<tt class="literal">ref</tt>&#20803;
&#32032;&#12290;&#35813;&#20803;&#32032;&#29992;&#26469;&#23558;bean&#20013;&#25351;&#23450;&#23646;&#24615;&#30340;&#20540;&#35774;&#32622;&#20026;&#23545;&#23481;&#22120;&#20013;&#30340;&#21478;&#22806;&#19968;&#20010;bean&#30340;&#24341;&#29992;&#12290;&#22914;&#21069;&#25152;&#36848;&#65292;&#35813;&#24341;&#29992;bean&#23558;&#34987;&#20316;&#20026;&#20381;&#36182;&#27880;&#20837;&#65292;&#32780;&#19988;&#22312;&#27880;&#20837;&#20043;&#21069;&#20250;&#34987;&#21021;&#22987;&#21270;
&#65288;&#22914;&#26524;&#26159;singleton
bean&#21017;&#24050;&#34987;&#23481;&#22120;&#21021;&#22987;&#21270;&#65289;&#12290;&#23613;&#31649;&#37117;&#26159;&#23545;&#21478;&#22806;&#19968;&#20010;&#23545;&#35937;&#30340;&#24341;&#29992;&#65292;&#20294;&#26159;&#36890;&#36807;id/name&#25351;&#21521;&#21478;&#22806;&#19968;&#20010;&#23545;&#35937;&#21364;&#26377;&#19977;&#31181;&#19981;&#21516;&#30340;&#24418;&#24335;&#65292;&#19981;&#21516;&#30340;&#24418;&#24335;&#23558;&#20915;&#23450;&#22914;&#20309;&#22788;&#29702;&#20316;&#29992;
&#22495;&#21450;&#39564;&#35777;&#12290;</p><p>&#31532;&#19968;&#31181;&#24418;&#24335;&#20063;&#26159;&#26368;&#24120;&#35265;&#30340;&#24418;&#24335;&#26159;&#36890;&#36807;&#20351;&#29992;<tt class="literal">&lt;ref/&gt;</tt>&#26631;&#35760;&#25351;&#23450;<tt class="literal">bean</tt>&#23646;&#24615;&#30340;&#30446;&#26631;bean&#65292;&#36890;&#36807;&#35813;&#26631;&#31614;&#21487;&#20197;&#24341;&#29992;&#21516;&#19968;&#23481;&#22120;&#25110;&#29238;&#23481;&#22120;&#20869;&#30340;&#20219;&#20309;bean&#65288;&#26080;&#35770;&#26159;&#21542;&#22312;&#21516;&#19968;XML&#25991;&#20214;&#20013;&#65289;&#12290;XML '<tt class="literal">bean</tt>'&#20803;&#32032;&#30340;&#20540;&#26082;&#21487;&#20197;&#26159;&#25351;&#23450;bean&#30340;<tt class="literal">id</tt>&#20540;&#20063;&#21487;&#20197;&#26159;&#20854;<tt class="literal">name</tt>&#20540;&#12290;</p><pre class="programlisting">&lt;ref bean="someBean"/&gt;</pre><p>&#31532;&#20108;&#31181;&#24418;&#24335;&#26159;&#20351;&#29992;ref&#30340;<tt class="literal">local</tt>&#23646;&#24615;&#25351;&#23450;&#30446;&#26631;bean&#65292;&#23427;&#21487;&#20197;&#21033;&#29992;XML&#35299;&#26512;&#22120;&#26469;&#39564;&#35777;&#25152;&#24341;&#29992;&#30340;bean&#26159;&#21542;&#23384;&#22312;&#21516;&#19968;&#25991;&#20214;&#20013;&#12290;<tt class="literal">local</tt>&#23646;&#24615;&#20540;&#24517;&#39035;&#26159;&#30446;&#26631;bean&#30340;id&#23646;&#24615;&#20540;&#12290;&#22914;&#26524;&#22312;&#21516;&#19968;&#37197;&#32622;&#25991;&#20214;&#20013;&#27809;&#26377;&#25214;&#21040;&#24341;&#29992;&#30340;bean&#65292;XML&#35299;&#26512;&#22120;&#23558;&#25243;&#20986;&#19968;&#20010;&#20363;&#22806;&#12290;&#22914;&#26524;&#30446;&#26631;bean&#26159;&#22312;&#21516;&#19968;&#25991;&#20214;&#20869;&#65292;&#20351;&#29992;local&#26041;&#24335;&#23601;&#26159;&#26368;&#22909;&#30340;&#36873;&#25321;&#65288;&#20026;&#20102;&#23613;&#26089;&#22320;&#21457;&#29616;&#38169;&#35823;&#65289;&#12290;</p><pre class="programlisting">&lt;ref local="someBean"/&gt;</pre><p>&#31532;&#19977;&#31181;&#26041;&#24335;&#26159;&#36890;&#36807;&#20351;&#29992;ref&#30340;<tt class="literal">parent</tt>&#23646;&#24615;&#26469;&#24341;&#29992;&#24403;&#21069;&#23481;&#22120;&#30340;&#29238;&#23481;&#22120;&#20013;&#30340;bean&#12290;<tt class="literal">parent</tt>&#23646;&#24615;&#20540;&#26082;&#21487;&#20197;&#26159;&#30446;&#26631;bean&#30340;<tt class="literal">id</tt>&#20540;&#65292;&#20063;&#21487;&#20197;&#26159;<tt class="literal">name</tt>&#23646;&#24615;&#20540;&#12290;&#32780;&#19988;&#30446;&#26631;bean&#24517;&#39035;&#22312;&#24403;&#21069;&#23481;&#22120;&#30340;&#29238;&#23481;&#22120;&#20013;&#12290;&#20351;&#29992;parent&#23646;&#24615;&#30340;&#20027;&#35201;&#29992;&#36884;&#26159;&#20026;&#20102;&#29992;&#26576;&#20010;&#19982;&#29238;&#23481;&#22120;&#20013;&#30340;bean&#21516;&#21517;&#30340;&#20195;&#29702;&#26469;&#21253;&#35013;&#29238;&#23481;&#22120;&#20013;&#30340;&#19968;&#20010;bean(&#20363;&#22914;&#65292;&#23376;&#19978;&#19979;&#25991;&#20013;&#30340;&#19968;&#20010;bean&#23450;&#20041;&#35206;&#30422;&#20102;&#20182;&#30340;&#29238;bean)&#12290;</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">&lt;!-- in the parent context --&gt;</span></i>
&lt;bean id="accountService" class="com.foo.SimpleAccountService"&gt;
    <i class="lineannotation"><span class="lineannotation">&lt;!-- insert dependencies as required as here --&gt;</span></i>
&lt;/bean&gt;</pre><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">&lt;!-- in the child (descendant) context --&gt;</span></i>
&lt;bean id="accountService"  <i class="lineannotation"><span class="lineannotation">&lt;-- notice that the name of this bean is the <span class="bold"><b>same</b></span> as the name of the <tt class="literal">'parent'</tt> bean</span></i>
      class="org.springframework.aop.framework.ProxyFactoryBean"&gt;
      &lt;property name="target"&gt;
          &lt;ref parent="accountService"/&gt;  <i class="lineannotation"><span class="lineannotation">&lt;-- notice how we refer to the <span class="bold"><b>parent</b></span> bean</span></i>
      &lt;/property&gt;
    <i class="lineannotation"><span class="lineannotation">&lt;!-- insert other configuration and dependencies as required as here --&gt;</span></i>
&lt;/bean&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-inner-beans"></a>3.3.2.3.&nbsp;&#20869;&#37096;bean</h4></div></div><div></div></div><p>&#25152;&#35859;&#30340;&#20869;&#37096;bean&#65288;inner bean&#65289;&#26159;&#25351;&#22312;&#19968;&#20010;bean&#30340;<tt class="literal">&lt;property/&gt;</tt>&#25110; <tt class="literal">&lt;constructor-arg/&gt;</tt>&#20803;&#32032;&#20013;&#20351;&#29992;<tt class="literal">&lt;bean/&gt;</tt>&#20803;&#32032;&#23450;&#20041;&#30340;bean&#12290;&#20869;&#37096;bean&#23450;&#20041;&#19981;&#38656;&#35201;&#26377;id&#25110;name&#23646;&#24615;&#65292;&#21363;&#20351;&#25351;&#23450;id &#25110; name&#23646;&#24615;&#20540;&#20063;&#23558;&#20250;&#34987;&#23481;&#22120;&#24573;&#30053;&#12290;</p><pre class="programlisting">&lt;bean id="outer" class="..."&gt;
  <i class="lineannotation"><span class="lineannotation">&lt;!-- instead of using a reference to a target bean, simply define the target bean inline --&gt;</span></i>
  &lt;property name="target"&gt;
    &lt;bean class="com.example.Person"&gt; <i class="lineannotation"><span class="lineannotation">&lt;!-- this is the inner bean --&gt;</span></i>
      &lt;property name="name" value="Fiona Apple"/&gt;
      &lt;property name="age" value="25"/&gt;
    &lt;/bean&gt;
  &lt;/property&gt;
&lt;/bean&gt;</pre><p>&#27880;&#24847;&#65306;&#20869;&#37096;bean&#20013;&#30340;<tt class="literal">scope</tt>&#26631;&#35760;&#21450;<tt class="literal">id</tt>&#25110;<tt class="literal">name</tt>&#23646;&#24615;&#23558;&#34987;&#24573;&#30053;&#12290;&#20869;&#37096;bean<span class="emphasis"><em>&#24635;&#26159;</em></span>&#21311;&#21517;&#30340;&#19988;&#23427;&#20204;<span class="emphasis"><em>&#24635;&#26159;</em></span><a href="#beans-factory-scopes-prototype" title="3.4.2.&nbsp;Prototype&#20316;&#29992;&#22495;">prototype</a>&#27169;&#24335;&#30340;&#12290;&#21516;&#26102;&#23558;&#20869;&#37096;bean&#27880;&#20837;&#21040;&#21253;&#21547;&#35813;&#20869;&#37096;bean&#20043;&#22806;&#30340;bean&#26159;<span class="emphasis"><em>&#19981;</em></span>&#21487;&#33021;&#30340;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-collection-elements"></a>3.3.2.4.&nbsp;&#38598;&#21512;</h4></div></div><div></div></div><p>&#36890;&#36807;<tt class="literal">&lt;list/&gt;</tt>&#12289;<tt class="literal">&lt;set/&gt;</tt>&#12289;<tt class="literal">&lt;map/&gt;</tt>&#21450;<tt class="literal">&lt;props/&gt;</tt>&#20803;&#32032;&#21487;&#20197;&#23450;&#20041;&#21644;&#35774;&#32622;&#19982;Java <tt class="interfacename">Collection</tt>&#31867;&#22411;&#23545;&#24212;<tt class="interfacename">List</tt>&#12289;<tt class="interfacename">Set</tt>&#12289;<tt class="interfacename">Map</tt>&#21450;<tt class="interfacename">Properties</tt>&#30340;&#20540;&#12290;</p><pre class="programlisting">&lt;bean id="moreComplexObject" class="example.ComplexObject"&gt;
  <i class="lineannotation"><span class="lineannotation">&lt;!-- results in a setAdminEmails(<tt class="classname">java.util.Properties</tt>) call --&gt;</span></i>
  &lt;property name="adminEmails"&gt;
    &lt;props&gt;
        &lt;prop key="administrator"&gt;administrator@example.org&lt;/prop&gt;
        &lt;prop key="support"&gt;support@example.org&lt;/prop&gt;
        &lt;prop key="development"&gt;development@example.org&lt;/prop&gt;
    &lt;/props&gt;
  &lt;/property&gt;
  <i class="lineannotation"><span class="lineannotation">&lt;!-- results in a setSomeList(<tt class="interfacename">java.util.List</tt>) call --&gt;</span></i>
  &lt;property name="someList"&gt;
    &lt;list&gt;
        &lt;value&gt;a list element followed by a reference&lt;/value&gt;
        &lt;ref bean="myDataSource" /&gt;
    &lt;/list&gt;
  &lt;/property&gt;
  <i class="lineannotation"><span class="lineannotation">&lt;!-- results in a setSomeMap(<tt class="interfacename">java.util.Map</tt>) call --&gt;</span></i>
  &lt;property name="someMap"&gt;
    &lt;map&gt;
        &lt;entry&gt;
            &lt;key&gt;
                &lt;value&gt;an entry&lt;/value&gt;
            &lt;/key&gt;
            &lt;value&gt;just some string&lt;/value&gt;
        &lt;/entry&gt;
        &lt;entry&gt;
            &lt;key&gt;
                &lt;value&gt;a ref&lt;/value&gt;
            &lt;/key&gt;
            &lt;ref bean="myDataSource" /&gt;
        &lt;/entry&gt;
    &lt;/map&gt;
  &lt;/property&gt;
  <i class="lineannotation"><span class="lineannotation">&lt;!-- results in a setSomeSet(java.util.Set) call --&gt;</span></i>
  &lt;property name="someSet"&gt;
    &lt;set&gt;
        &lt;value&gt;just some string&lt;/value&gt;
        &lt;ref bean="myDataSource" /&gt;
    &lt;/set&gt;
  &lt;/property&gt;
&lt;/bean&gt;</pre><p><span class="emphasis"><em>&#27880;&#24847;&#65306;map&#30340;key&#25110;value&#20540;&#65292;&#25110;set&#30340;value&#20540;&#36824;&#21487;&#20197;&#26159;&#20197;&#19979;&#20803;&#32032;&#65306;</em></span></p><pre class="programlisting">bean | ref | idref | list | set | map | props | value | null</pre><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="beans-collection-elements-merging"></a>3.3.2.4.1.&nbsp;&#38598;&#21512;&#30340;&#21512;&#24182;</h5></div></div><div></div></div><p>&#20174;2.0&#24320;&#22987;&#65292;Spring IoC&#23481;&#22120;&#23558;&#25903;&#25345;&#38598;&#21512;&#30340;<span class="emphasis"><em>&#21512;&#24182;</em></span>&#12290;&#36825;&#26679;&#25105;&#20204;&#21487;&#20197;&#23450;&#20041;parent-style&#21644;child-style&#30340;<tt class="literal">&lt;list/&gt;</tt>&#12289;<tt class="literal">&lt;map/&gt;</tt>&#12289;<tt class="literal">&lt;set/&gt;</tt>&#25110;<tt class="literal">&lt;props/&gt;</tt>&#20803;&#32032;&#65292;&#23376;&#38598;&#21512;&#30340;&#20540;&#20174;&#20854;&#29238;&#38598;&#21512;&#32487;&#25215;&#21644;&#35206;&#30422;&#32780;&#26469;&#65307;&#20063;&#23601;&#26159;&#35828;&#65292;&#29238;&#23376;&#38598;&#21512;&#20803;&#32032;&#21512;&#24182;&#21518;&#30340;&#20540;&#23601;&#26159;&#23376;&#38598;&#21512;&#20013;&#30340;&#26368;&#32456;&#32467;&#26524;&#65292;&#32780;&#19988;&#23376;&#38598;&#21512;&#20013;&#30340;&#20803;&#32032;&#20540;&#23558;&#35206;&#30422;&#29238;&#38598;&#20840;&#20013;&#23545;&#24212;&#30340;&#20540;&#12290;</p><p><span class="emphasis"><em>&#35831;&#27880;&#24847;&#65292;&#20851;&#20110;&#21512;&#24182;&#30340;&#36825;&#37096;&#20998;&#21033;&#29992;&#20102;parent-child bean&#26426;&#21046;&#12290;&#27492;&#20869;&#23481;&#23558;&#22312;&#21518;&#38754;&#20171;&#32461;&#65292;&#19981;&#29087;&#24713;&#29238;&#23376;bean&#30340;&#35835;&#32773;&#21487;&#21442;&#35265;<a href="#beans-child-bean-definitions" title="3.6.&nbsp;bean&#23450;&#20041;&#30340;&#32487;&#25215;">Section&nbsp;3.6, &#8220;bean&#23450;&#20041;&#30340;&#32487;&#25215;&#8221;</a>&#12290;</em></span></p><p>Find below an example of the collection merging
          feature:</p><p>&#19979;&#38754;&#30340;&#20363;&#23376;&#23637;&#31034;&#20102;&#38598;&#21512;&#21512;&#24182;&#29305;&#24615;&#65306;</p><pre class="programlisting">&lt;beans&gt;
&lt;bean id="parent" abstract="true" class="example.ComplexObject"&gt;
    &lt;property name="adminEmails"&gt;
        &lt;props&gt;
            &lt;prop key="administrator"&gt;administrator@example.com&lt;/prop&gt;
            &lt;prop key="support"&gt;support@example.com&lt;/prop&gt;
        &lt;/props&gt;
    &lt;/property&gt;
&lt;/bean&gt;
&lt;bean id="child" parent="parent"&gt;
    &lt;property name="adminEmails"&gt;
        <i class="lineannotation"><span class="lineannotation">&lt;!-- the merge is specified on the *child* collection definition --&gt;</span></i>
        &lt;props merge="true"&gt;
            &lt;prop key="sales"&gt;sales@example.com&lt;/prop&gt;
            &lt;prop key="support"&gt;support@example.co.uk&lt;/prop&gt;
        &lt;/props&gt;
    &lt;/property&gt;
&lt;/bean&gt;
&lt;beans&gt;</pre><p>&#22312;&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;<tt class="literal">child</tt>bean&#30340;<tt class="literal">adminEmails</tt>&#23646;&#24615;&#30340;<tt class="literal">&lt;props/&gt;</tt>&#20803;&#32032;&#19978;&#20351;&#29992;&#20102;<tt class="literal">merge=true</tt>&#23646;&#24615;&#12290;&#24403;<tt class="literal">child </tt>bean&#34987;&#23481;&#22120;&#23454;&#38469;&#35299;&#26512;&#21450;&#23454;&#20363;&#21270;&#26102;&#65292;&#20854; <tt class="literal">adminEmails</tt>&#23558;&#19982;&#29238;&#38598;&#21512;&#30340;<tt class="literal">adminEmails</tt>&#23646;&#24615;&#36827;&#34892;&#21512;&#24182;&#12290;</p><pre class="programlisting">administrator=administrator@example.com
sales=sales@example.com
support=support@example.co.uk</pre><p>&#27880;&#24847;&#21040;&#36825;&#37324;&#23376;bean&#30340;<tt class="classname">Properties</tt>&#38598;&#21512;&#23558;&#20174;&#29238;<tt class="literal">&lt;props/&gt;</tt>&#32487;&#25215;&#25152;&#26377;&#23646;&#24615;&#20803;&#32032;&#12290;&#21516;&#26102;&#23376;bean&#30340;<tt class="literal">support</tt>&#20540;&#23558;&#35206;&#30422;&#29238;&#38598;&#21512;&#30340;&#30456;&#24212;&#20540;&#12290;</p><p>&#23545;&#20110;<tt class="literal">&lt;list/&gt;</tt>&#12289;<tt class="literal">&lt;map/&gt;</tt>&#21450;<tt class="literal">&lt;set/&gt;</tt>&#38598;&#21512;&#31867;&#22411;&#30340;&#21512;&#24182;&#22788;&#29702;&#37117;&#22522;&#26412;&#31867;&#20284;&#65292;&#22312;&#26576;&#20010;&#26041;&#38754;<tt class="literal">&lt;list/&gt;</tt>&#20803;&#32032;&#27604;&#36739;&#29305;&#27530;&#65292;&#36825;&#28041;&#21450;&#21040;<tt class="classname">List</tt>&#38598;&#21512;&#26412;&#36523;&#30340;&#35821;&#20041;&#23398;&#65292;&#23601;&#25343;&#32500;&#25252;&#19968;&#20010;<tt class="literal">&#26377;&#24207;</tt>&#38598;&#21512;&#20013;&#30340;&#20540;&#26469;&#35828;&#65292;&#29238;bean&#30340;&#21015;&#34920;&#20869;&#23481;&#23558;&#25490;&#22312;&#23376;bean&#21015;&#34920;&#20869;&#23481;&#30340;&#21069;&#38754;&#12290;&#23545;&#20110;<tt class="interfacename">Map</tt>&#12289;<tt class="interfacename">Set</tt>&#21450;<tt class="interfacename">Properties</tt>&#38598;&#21512;&#31867;&#22411;&#27809;&#26377;&#39034;&#24207;&#30340;&#27010;&#24565;&#65292;&#22240;&#27492;&#20316;&#20026;&#30456;&#20851;&#30340;<tt class="interfacename">Map</tt>&#12289;<tt class="interfacename">Set</tt>&#21450;<tt class="interfacename">Properties</tt>&#23454;&#29616;&#22522;&#30784;&#30340;&#38598;&#21512;&#31867;&#22411;&#22312;&#23481;&#22120;&#20869;&#37096;&#27809;&#26377;&#25490;&#24207;&#30340;&#35821;&#20041;&#12290;</p><p>&#26368;&#21518;&#38656;&#35201;&#25351;&#20986;&#30340;&#19968;&#28857;&#23601;&#26159;&#65292;&#21512;&#24182;&#21151;&#33021;&#20165;&#22312;Spring 2.0&#65288;&#21450;&#38543;&#21518;&#30340;&#29256;&#26412;&#20013;&#65289;&#21487;&#29992;&#12290;&#19981;&#21516;&#30340;&#38598;&#21512;&#31867;&#22411;&#26159;&#19981;&#33021;&#21512;&#24182;&#65288;&#22914;<tt class="literal">map</tt>&#21644; <tt class="literal">list</tt>&#26159;&#19981;&#33021;&#21512;&#24182;&#30340;&#65289;&#65292;&#21542;&#21017;&#23558;&#20250;&#25243;&#20986;&#30456;&#24212;&#30340;<tt class="classname">Exception</tt>&#12290;<tt class="literal">merge</tt>&#23646;&#24615;&#24517;&#39035;&#22312;&#32487;&#25215;&#30340;&#23376;bean&#20013;&#23450;&#20041;&#65292;&#32780;&#22312;&#29238;bean&#30340;&#38598;&#21512;&#23646;&#24615;&#19978;&#25351;&#23450;&#30340;<tt class="literal">merge</tt>&#23646;&#24615;&#23558;&#34987;&#24573;&#30053;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="beans-collection-elements-strongly-typed"></a>3.3.2.4.2.&nbsp;&#24378;&#31867;&#22411;&#38598;&#21512;(&#20165;&#36866;&#29992;&#20110;Java5+)</h5></div></div><div></div></div><p>&#20320;&#33509;&#26377;&#24184;&#22312;&#20351;&#29992;Java5 &#25110;Java 6&#65292;&#37027;&#20040;&#20320;&#21487;&#20197;&#20351;&#29992;&#24378;&#31867;&#22411;&#38598;&#21512;(&#25903;&#25345;&#27867;&#22411;)&#12290;&#27604;&#22914;&#65292;&#22768;&#26126;&#19968;&#20010;&#21482;&#33021;&#21253;&#21547;<tt class="classname">String</tt>&#31867;&#22411;&#20803;&#32032;&#30340;<tt class="interfacename">Collection</tt>&#12290;&#20551;&#33509;&#20351;&#29992;Spring&#26469;&#32473;bean&#27880;&#20837;&#24378;&#31867;&#22411;&#30340;<tt class="interfacename">Collection</tt>&#65292;&#37027;&#23601;&#21487;&#20197;&#21033;&#29992;Spring&#30340;&#31867;&#22411;&#36716;&#25442;&#33021;&#65292;&#24403;&#21521;&#24378;&#31867;&#22411;<tt class="interfacename">Collection</tt>&#20013;&#28155;&#21152;&#20803;&#32032;&#21069;&#65292;&#36825;&#20123;&#20803;&#32032;&#23558;&#34987;&#36716;&#25442;&#12290;</p><pre class="programlisting">public class Foo {
                
    private Map&lt;String, Float&gt; accounts;
    
    public void setAccounts(Map&lt;String, Float&gt; accounts) {
        this.accounts = accounts;
    }
}</pre><pre class="programlisting">&lt;beans&gt;
    &lt;bean id="foo" class="x.y.Foo"&gt;
        &lt;property name="accounts"&gt;
            &lt;map&gt;
                &lt;entry key="one" value="9.99"/&gt;
                &lt;entry key="two" value="2.75"/&gt;
                &lt;entry key="six" value="3.99"/&gt;
            &lt;/map&gt;
        &lt;/property&gt;
    &lt;/bean&gt;
&lt;/beans&gt;</pre><p>&#22312;<tt class="literal">foo</tt>bean&#30340;<tt class="literal">accounts</tt>&#23646;&#24615;&#34987;&#27880;&#20837;&#20043;&#21069;&#65292;&#36890;&#36807;&#21453;&#23556;&#65292;&#21033;&#29992;&#24378;&#31867;&#22411;<tt class="classname">Map&lt;String, Float&gt;</tt>&#30340;&#27867;&#22411;&#20449;&#24687;&#65292;Spring&#30340;&#24213;&#23618;&#31867;&#22411;&#36716;&#25442;&#26426;&#21046;&#23558;&#20250;&#25226;&#21508;&#31181;value&#20803;&#32032;&#20540;&#36716;&#25442;&#20026;<tt class="classname">Float</tt>&#31867;&#22411;&#65292;&#22240;&#27492;&#23383;&#31526;&#20018;<tt class="literal">9.99&#12289;2.75</tt>&#21450;<tt class="literal">3.99</tt>&#23601;&#20250;&#34987;&#36716;&#25442;&#20026;&#23454;&#38469;&#30340;<tt class="classname">Float</tt>&#31867;&#22411;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-null-element"></a>3.3.2.5.&nbsp;<tt class="literal">Nulls</tt></h4></div></div><div></div></div><p><tt class="literal">&lt;null/&gt;</tt>&#29992;&#20110;&#22788;&#29702;<tt class="literal">null</tt>&#20540;&#12290;Spring&#20250;&#25226;&#23646;&#24615;&#30340;&#31354;&#21442;&#25968;&#24403;&#20316;&#31354;<tt class="literal">&#23383;&#31526;&#20018;</tt>&#22788;&#29702;&#12290;&#20197;&#19979;&#30340;xml&#29255;&#26029;&#23558;email&#23646;&#24615;&#35774;&#20026;&#31354;<tt class="classname">&#23383;&#31526;&#20018;</tt>&#12290;</p><pre class="programlisting">&lt;bean class="ExampleBean"&gt;
  &lt;property name="email"&gt;&lt;value/&gt;&lt;/property&gt;
&lt;/bean&gt;</pre><p>&#36825;&#31561;&#21516;&#20110;Java&#20195;&#30721;&#65306;
<tt class="literal">exampleBean.setEmail("")</tt>&#12290;
&#32780;<tt class="literal">null</tt>&#20540;&#21017;&#21487;&#20197;&#20351;&#29992;<tt class="literal">&lt;null&gt;</tt>&#20803;&#32032;&#21487;&#29992;&#26469;&#34920;&#31034;&#12290;&#20363;&#22914;&#65306;</p><pre class="programlisting">&lt;bean class="ExampleBean"&gt;
  &lt;property name="email"&gt;&lt;null/&gt;&lt;/property&gt;
&lt;/bean&gt;</pre><p>&#19978;&#36848;&#30340;&#37197;&#32622;&#31561;&#21516;&#20110;Java&#20195;&#30721;&#65306;<tt class="literal">exampleBean.setEmail(null)</tt>&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="xml-config-shortcuts"></a>3.3.2.6.&nbsp;XML&#37197;&#32622;&#25991;&#20214;&#30340;&#31616;&#20889;&#21450;&#20854;&#20182;</h4></div></div><div></div></div><p>&#37197;&#32622;&#20803;&#25968;&#25454;&#20887;&#38271;&#19981;&#26159;&#20160;&#20040;&#22909;&#20107;&#24773;&#65292;&#22240;&#27492;&#25105;&#20204;&#23558;&#36890;&#36807;&#19979;&#38754;&#30340;&#26041;&#24335;&#26469;&#23545;&#37197;&#32622;&#36827;&#34892;&#8220;&#20943;&#32933;&#8221;&#65292;&#31532;&#19968;&#31181;&#20570;&#27861;&#23601;&#26159;&#36890;&#36807;&#20351;&#29992;<tt class="literal">&lt;property/&gt;</tt>&#26469;&#23450;&#20041;&#20540;&#21644;&#23545;&#20854;&#20182;bean&#30340;&#24341;&#29992;&#65292;&#21478;&#19968;&#20010;&#20570;&#27861;&#23601;&#26159;&#37319;&#29992;&#19981;&#21516;&#30340;&#23646;&#24615;&#23450;&#20041;&#26684;&#24335;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="beans-value-ref-shortcuts"></a>3.3.2.6.1.&nbsp;XML-based configuration metadata shortcuts</h5></div></div><div></div></div><p><tt class="literal">&lt;property/&gt;</tt>&#12289;<tt class="literal">&lt;constructor-arg/&gt;</tt>&#21450;<tt class="literal">&lt;entry/&gt;</tt>&#20803;&#32032;&#37117;&#25903;&#25345;<tt class="literal">value</tt>&#23646;&#24615;&#65288;attribute&#65289;&#65292;&#23427;&#21487;&#20197;&#29992;&#26469;&#26367;&#20195;&#20869;&#23884;&#30340;<tt class="literal">&lt;value/&gt;</tt>&#20803;&#32032;&#12290;&#22240;&#32780;&#65292;&#20197;&#19979;&#30340;&#20195;&#30721;&#65306;</p><pre class="programlisting">&lt;property name="myProperty"&gt;
  &lt;value&gt;hello&lt;/value&gt;
&lt;/property&gt;</pre><pre class="programlisting">&lt;constructor-arg&gt;
  &lt;value&gt;hello&lt;/value&gt;
&lt;/constructor-arg&gt;</pre><pre class="programlisting">&lt;entry key="myKey"&gt;
  &lt;value&gt;hello&lt;/value&gt;
&lt;/entry&gt;</pre><p>&#31561;&#21516;&#20110;&#65306;</p><pre class="programlisting">&lt;property name="myProperty" value="hello"/&gt;</pre><pre class="programlisting">&lt;constructor-arg value="hello"/&gt;</pre><pre class="programlisting">&lt;entry key="myKey" value="hello"/&gt;</pre><p>The <tt class="literal">&lt;property/&gt;</tt> and
          <tt class="literal">&lt;constructor-arg/&gt;</tt> elements support a
          similar shortcut <tt class="literal">'ref'</tt> attribute which may be
          used instead of a full nested <tt class="literal">&lt;ref/&gt;</tt>
          element. Therefore, the following:</p><p><tt class="literal">&lt;property/&gt;</tt>&#21644;<tt class="literal">&lt;constructor-arg/&gt;</tt>&#25903;&#25345;&#31867;&#20284;<tt class="literal">ref</tt>&#30340;&#31616;&#20889;&#23646;&#24615;&#65292;&#23427;&#21487;&#29992;&#26469;&#26367;&#20195;&#25972;&#20010;&#20869;&#23884;&#30340;<tt class="literal">&lt;ref/&gt;</tt>&#20803;&#32032;&#12290;&#22240;&#32780;&#65292;&#20197;&#19979;&#30340;&#20195;&#30721;&#65306;</p><pre class="programlisting">&lt;property name="myProperty"&gt;
  &lt;ref bean="myBean"&gt;
&lt;/property&gt;</pre><pre class="programlisting">&lt;constructor-arg&gt;
  &lt;ref bean="myBean"&gt;
&lt;/constructor-arg&gt;</pre><p>&#31561;&#21516;&#20110;&#65306;</p><pre class="programlisting">&lt;property name="myProperty" ref="myBean"/&gt;</pre><pre class="programlisting">&lt;constructor-arg ref="myBean"/&gt;</pre><p>&#27880;&#24847;&#65292;&#23613;&#31649;&#23384;&#22312;&#31561;&#21516;&#20110;<tt class="literal">&lt;ref bean="xxx"&gt;</tt> &#20803;&#32032;&#30340;&#31616;&#20889;&#24418;&#24335;&#65292;&#20294;&#24182;&#27809;&#26377;<tt class="literal">&lt;ref local="xxx"</tt>&gt;&#30340;&#31616;&#20889;&#24418;&#24335;&#65292;&#20026;&#20102;&#23545;&#24403;&#21069;xml&#20013;bean&#30340;&#24341;&#29992;&#65292;&#20320;&#21482;&#33021;&#20351;&#29992;&#23436;&#25972;&#30340;&#24418;&#24335;&#12290;</p><p>&#26368;&#21518;&#65292;map&#20013;entry&#20803;&#32032;&#30340;&#31616;&#20889;&#24418;&#24335;&#20026;<tt class="literal">key</tt>/<tt class="literal">key-ref</tt> &#21644; <tt class="literal">value</tt> /<tt class="literal">value-ref</tt>&#23646;&#24615;&#65292;&#22240;&#32780;&#65292;&#20197;&#19979;&#30340;&#20195;&#30721;&#65306;</p><pre class="programlisting">&lt;entry&gt;
  &lt;key&gt;
    &lt;ref bean="myKeyBean" /&gt;
  &lt;/key&gt;
  &lt;ref bean="myValueBean" /&gt;
&lt;/entry&gt;</pre><p>&#31561;&#21516;&#20110;&#65306;</p><pre class="programlisting">&lt;entry key-ref="myKeyBean" value-ref="myValueBean"/&gt;</pre><p>&#20877;&#27425;&#24378;&#35843;&#65292;&#21482;&#26377;<tt class="literal">&lt;ref bean="xxx"&gt;</tt>&#20803;&#32032;&#30340;&#31616;&#20889;&#24418;&#24335;&#65292;&#27809;&#26377;<tt class="literal">&lt;ref local="xxx"</tt>&gt;&#30340;&#31616;&#20889;&#24418;&#24335;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="beans-p-namespace"></a>3.3.2.6.2.&nbsp;&#20351;&#29992;p&#21517;&#31216;&#31354;&#38388;&#37197;&#32622;&#23646;&#24615;</h5></div></div><div></div></div><p>&#32473;XML&#37197;&#32622;&#25991;&#20214;"&#20943;&#32933;"&#30340;&#21478;&#19968;&#20010;&#36873;&#25321;&#23601;&#26159;&#20351;&#29992;p&#21517;&#31216;&#31354;&#38388;&#65292;&#20174; 2.0&#24320;&#22987;&#65292;Spring&#25903;&#25345;&#20351;&#29992;<a href="#xsd-config" title="Appendix&nbsp;A.&nbsp;XML Schema-based configuration">&#21517;&#31216;&#31354;&#38388;</a>&#30340;&#21487;&#25193;&#23637;&#37197;&#32622;&#26684;&#24335;&#12290;&#36825;&#20123;&#21517;&#31216;&#31354;&#38388;&#37117;&#26159;&#22522;&#20110;&#19968;&#31181;XML Schema&#23450;&#20041;&#12290;&#20107;&#23454;&#19978;&#65292;&#25105;&#20204;&#25152;&#30475;&#21040;&#30340;&#25152;&#26377;<tt class="literal">bean</tt>&#30340;&#37197;&#32622;&#26684;&#24335;&#37117;&#26159;&#22522;&#20110;&#19968;&#20010; XML Schema&#25991;&#26723;&#12290;</p><p>&#29305;&#23450;&#30340;&#21517;&#31216;&#31354;&#38388;&#24182;&#19981;&#38656;&#35201;&#23450;&#20041;&#22312;&#19968;&#20010;XSD&#25991;&#20214;&#20013;&#65292;&#23427;&#21482;&#22312;Spring&#20869;&#26680;&#20013;&#23384;&#22312;&#12290;&#25105;&#20204;&#25152;&#35828;&#30340;p&#21517;&#31216;&#31354;&#38388;&#23601;&#26159;&#36825;&#26679;&#65292;&#23427;&#19981;&#38656;&#35201;&#19968;&#20010;schema&#23450;&#20041;&#65292;&#19982;&#25105;&#20204;&#21069;&#38754;&#37319;&#29992;<tt class="literal">&lt;property/&gt;</tt>&#20803;&#32032;&#23450;&#20041;bean&#30340;&#23646;&#24615;&#19981;&#21516;&#30340;&#26159;&#65292;&#24403;&#25105;&#20204;&#37319;&#29992;&#20102;p&#21517;&#31216;&#31354;&#38388;&#65292;&#25105;&#20204;&#23601;&#21487;&#20197;&#22312;<tt class="literal">bean</tt>&#20803;&#32032;&#20013;&#20351;&#29992;&#23646;&#24615;&#65288;attribute&#65289;&#26469;&#25551;&#36848;bean&#30340;property&#20540;&#12290;</p><p>&#19979;&#38754;&#30340;&#20004;&#27573;XML&#37197;&#32622;&#25991;&#20214;&#20013;&#37117;&#26159;&#29992;&#26469;&#23450;&#20041;&#21516;&#19968;&#20010;bean&#65306;&#19968;&#20010;&#37319;&#29992;&#30340;&#26159;&#26631;&#20934;&#30340;XML&#26684;&#24335;&#65292;&#19968;&#20010;&#26159;&#37319;&#29992;p&#21517;&#31216;&#31354;&#38388;&#12290;</p><pre class="programlisting">&lt;beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"&gt;
    
    &lt;bean name="classic" class="com.example.ExampleBean"&gt;
        &lt;property name="email" value="foo@bar.com/&gt;
    &lt;/bean&gt;
    
    &lt;bean name="p-namespace" class="com.example.ExampleBean"
          p:email="foo@bar.com"/&gt;
&lt;/beans&gt;</pre><p>&#20174;
&#19978;&#38754;&#30340;bean&#23450;&#20041;&#20013;&#65292;&#25105;&#20204;&#37319;&#29992;p&#21517;&#31216;&#31354;&#38388;&#30340;&#26041;&#24335;&#21253;&#21547;&#20102;&#19968;&#20010;&#21483;email&#30340;&#23646;&#24615;&#65292;&#32780;Spring&#20250;&#30693;&#36947;&#25105;&#20204;&#30340;bean&#21253;&#21547;&#20102;&#19968;&#20010;&#23646;&#24615;&#65288;property&#65289;
&#23450;&#20041;&#12290;&#25105;&#20204;&#21069;&#38754;&#35828;&#20102;&#65292;p&#21517;&#31216;&#31354;&#38388;&#26159;&#19981;&#38656;&#35201;schema&#23450;&#20041;&#30340;&#65292;&#22240;&#27492;&#23646;&#24615;&#65288;attribute&#65289;&#30340;&#21517;&#23383;&#23601;&#26159;&#20320;bean&#30340;property&#30340;&#21517;&#23383;&#12290;</p><p>This next example includes two more bean definitions that both
          have a reference to another bean:</p><p>&#19979;&#38754;&#30340;&#20363;&#23376;&#21253;&#21547;&#20102;&#20004;&#20010;bean&#23450;&#20041;&#65292;&#23427;&#20204;&#37117;&#24341;&#29992;&#20102;&#21478;&#19968;&#20010;bean</p><pre class="programlisting">&lt;beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"&gt;
    
    &lt;bean name="john-classic" class="com.example.Person"&gt;
        &lt;property name="name" value="John Doe"/&gt;
        &lt;property name="spouse" ref="jane"/&gt;
    &lt;/bean&gt;

    &lt;bean name="john-modern" 
        class="com.example.Person"
        p:name="John Doe"
        p:spouse-ref="jane"/&gt;

    &lt;bean name="jane" class="com.example.Person"&gt;
        &lt;property name="name" value="Jane Doe"/&gt;
    &lt;/bean&gt;
&lt;/beans&gt;</pre><p>As you can see, this example doesn't only include a property
          value using the p-namespace, but also uses a special format to
          declare property references. Whereas the first bean definition uses
          <tt class="literal">&lt;property name="spouse" ref="jane"/&gt;</tt> to
          create a reference from bean <tt class="literal">john</tt> to bean
          <tt class="literal">jane</tt>, the second bean definition uses
          <tt class="literal">p:spouse-ref="jane"</tt> as an attribute to do the
          exact same thing. In this case '<tt class="literal">spouse</tt>' is the
          property name whereas the '<tt class="literal">-ref</tt>' part indicates
          that this is not a straight value but rather a reference to another
          bean.</p><p>&#19978;&#38754;&#30340;&#20363;&#23376;&#19981;&#20165;&#20351;&#29992;p&#21517;&#31216;&#31354;&#38388;&#21253;&#21547;&#20102;&#19968;&#20010;&#23646;&#24615;&#65288;property&#65289;&#20540;&#65292;&#32780;&#19988;&#20351;&#29992;&#20102;&#19968;&#20010;&#29305;&#27530;&#30340;&#26684;&#24335;&#22768;&#26126;&#20102;&#19968;&#20010;&#23646;&#24615;&#24341;&#29992;&#12290;&#22312;&#31532;&#19968;&#20010;bean&#23450;&#20041;&#20013;&#20351;&#29992;&#20102;<tt class="literal">&lt;property name="spouse" ref="jane"/&gt;</tt>&#26469;&#24314;&#31435;bean<tt class="literal">john</tt>&#21040;bean<tt class="literal">jane</tt>&#30340;&#24341;&#29992;&#65292;&#32780;&#31532;&#20108;&#20010;bean&#23450;&#20041;&#21017;&#37319;&#29992;<tt class="literal">p:spouse-ref="jane"</tt>&#23646;&#24615;&#65288;attribute&#65289;&#30340;&#26041;&#24335;&#36798;&#21040;&#20102;&#21516;&#26679;&#30340;&#30446;&#30340;&#12290;&#22312;&#36825;&#20010;&#20363;&#23376;&#20013;&#65292;"<tt class="literal">spouse</tt>"&#26159;&#23646;&#24615;&#65288;property&#65289;&#21517;&#65292;&#32780;"<tt class="literal">-ref</tt>&#8220;&#21017;&#29992;&#26469;&#35828;&#26126;&#35813;&#23646;&#24615;&#19981;&#26159;&#19968;&#20010;&#20855;&#20307;&#30340;&#20540;&#32780;&#26159;&#23545;&#21478;&#22806;&#19968;&#20010;bean&#30340;&#24341;&#29992;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#38656;&#35201;&#27880;&#24847;&#30340;&#26159;&#65292;p&#21517;&#31216;&#31354;&#38388;&#27809;&#26377;&#26631;&#20934;&#30340;XML&#26684;&#24335;&#23450;&#20041;&#28789;&#27963;&#65292;&#27604;&#22914;&#35828;&#65292;bean&#30340;&#23646;&#24615;&#21517;&#26159;&#20197;<tt class="literal">Ref</tt>&#32467;&#23614;&#30340;&#65292;&#37027;&#20040;&#37319;&#29992;p&#21517;&#31216;&#31354;&#38388;&#23450;&#20041;&#23601;&#20250;&#23548;&#33268;&#20914;&#31361;&#65292;&#32780;&#37319;&#29992;&#26631;&#20934;&#30340;XML&#26684;&#24335;&#23450;&#20041;&#21017;&#19981;&#20250;&#20986;&#29616;&#36825;&#31181;&#38382;&#39064;&#12290;&#36825;&#37324;&#25105;&#20204;&#25552;&#37266;&#22823;&#23478;&#22312;&#39033;&#30446;&#20013;&#36824;&#26159;&#20180;&#32454;&#26435;&#34913;&#26469;&#20915;&#23450;&#21040;&#24213;&#37319;&#29992;&#37027;&#31181;&#26041;&#24335;&#65292;&#21516;&#26102;&#20063;&#21487;&#20197;&#22312;&#22242;&#38431;&#25104;&#21592;&#37117;&#29702;&#35299;&#19981;&#21516;&#30340;&#23450;&#20041;&#26041;&#24335;&#30340;&#22522;&#30784;&#19978;&#65292;&#22312;&#39033;&#30446;&#20013;&#26681;&#25454;&#38656;&#35201;&#21516;&#26102;&#36873;&#25321;&#19977;&#31181;&#23450;&#20041;&#26041;&#24335;&#12290;</p></td></tr></tbody></table></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-compound-property-names"></a>3.3.2.7.&nbsp;&#32452;&#21512;&#23646;&#24615;&#21517;&#31216;</h4></div></div><div></div></div><p>&#24403;&#35774;&#32622;bean&#30340;&#32452;&#21512;&#23646;&#24615;&#26102;&#65292;&#38500;&#20102;&#26368;&#21518;&#19968;&#20010;&#23646;&#24615;&#22806;&#65292;&#21482;&#35201;&#20854;&#20182;&#23646;&#24615;&#20540;&#19981;&#20026;<tt class="literal">null</tt>&#65292;&#32452;&#21512;&#25110;&#23884;&#22871;&#23646;&#24615;&#21517;&#26159;&#23436;&#20840;&#21512;&#27861;&#30340;&#12290;&#20363;&#22914;&#65292;&#19979;&#38754;bean&#30340;&#23450;&#20041;&#65306;</p><pre class="programlisting">&lt;bean id="foo" class="foo.Bar"&gt;
  &lt;property name="fred.bob.sammy" value="123" /&gt;
&lt;/bean&gt;</pre><p><tt class="literal">foo</tt> bean&#26377;&#20010;<tt class="literal">fred</tt>&#23646;&#24615;&#65292;&#27492;&#23646;&#24615;&#26377;&#20010;<tt class="literal">bob</tt>&#23646;&#24615;&#65292;&#32780;<tt class="literal">bob</tt>&#23646;&#24615;&#21448;&#26377;&#20010;<tt class="literal">sammy</tt>&#23646;&#24615;&#65292;&#26368;&#21518;&#25226;<tt class="literal">sammy</tt>&#23646;&#24615;&#35774;&#32622;&#20026;<tt class="literal">123</tt>&#12290;&#20026;&#20102;&#35753;&#27492;&#23450;&#20041;&#33021;&#24037;&#20316;&#65292; <tt class="literal">foo</tt>&#30340;<tt class="literal">fred</tt>&#23646;&#24615;&#21450;<tt class="literal">fred</tt>&#30340;<tt class="literal">bob</tt>&#23646;&#24615;&#22312;bean&#34987;&#26500;&#36896;&#21518;&#37117;&#24517;&#39035;&#38750;&#31354;&#65292;&#21542;&#21017;&#23558;&#25243;&#20986;<tt class="exceptionname">NullPointerException</tt>&#24322;&#24120;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-dependson"></a>3.3.3.&nbsp;&#20351;&#29992;<tt class="literal">depends-on</tt></h3></div></div><div></div></div><p>&#22810;&#25968;&#24773;&#20917;&#19979;&#65292;&#19968;&#20010;bean&#23545;&#21478;&#19968;&#20010;bean&#30340;&#20381;&#36182;&#26368;&#31616;&#21333;&#30340;&#20570;&#27861;&#23601;&#26159;&#23558;&#19968;&#20010;bean&#35774;&#32622;&#20026;&#21478;&#22806;&#19968;&#20010;bean&#30340;&#23646;&#24615;&#12290;&#22312;xml&#37197;&#32622;&#25991;&#20214;&#20013;&#26368;&#24120;&#35265;&#30340;&#23601;&#26159;&#20351;&#29992; <a href="#beans-ref-element" title="3.3.2.2.&nbsp;&#24341;&#29992;&#20854;&#23427;&#30340;bean&#65288;&#21327;&#20316;&#32773;&#65289;"><tt class="literal">&lt;ref/&gt;</tt>&#20803;&#32032;</a>&#12290;&#22312;&#23569;&#25968;&#24773;&#20917;&#19979;&#65292;&#26377;&#26102;&#20505;bean&#20043;&#38388;&#30340;&#20381;&#36182;&#20851;&#31995;&#24182;&#19981;&#26159;&#37027;&#20040;&#30340;&#30452;&#25509;&#65288;&#20363;&#22914;&#65292;&#24403;&#31867;&#20013;&#30340;&#38745;&#24577;&#22359;&#30340;&#21021;&#22987;&#21270;&#34987;&#26102;&#65292;&#22914;&#25968;&#25454;&#24211;&#39537;&#21160;&#30340;&#27880;&#20876;&#65289;&#12290;<tt class="literal">depends-on</tt>&#23646;&#24615;&#21487;&#20197;&#29992;&#20110;&#24403;&#21069;bean&#21021;&#22987;&#21270;&#20043;&#21069;&#26174;&#24335;&#22320;&#24378;&#21046;&#19968;&#20010;&#25110;&#22810;&#20010;bean&#34987;&#21021;&#22987;&#21270;&#12290;&#19979;&#38754;&#30340;&#20363;&#23376;&#20013;&#20351;&#29992;&#20102;<tt class="literal">depends-on</tt>&#23646;&#24615;&#26469;&#25351;&#23450;&#19968;&#20010;bean&#30340;&#20381;&#36182;&#12290;</p><pre class="programlisting">&lt;bean id="beanOne" class="ExampleBean" depends-on="<span class="bold"><b>manager</b></span>"/&gt;

&lt;bean id="<span class="bold"><b>manager</b></span>" class="ManagerBean" /&gt;</pre><p>&#33509;&#38656;&#35201;&#34920;&#36798;&#23545;&#22810;&#20010;bean&#30340;&#20381;&#36182;&#65292;&#21487;&#20197;&#22312;<tt class="literal">'depends-on'</tt>&#20013;&#23558;&#25351;&#23450;&#30340;&#22810;&#20010;bean&#21517;&#23383;&#29992;&#20998;&#38548;&#31526;&#36827;&#34892;&#20998;&#38548;&#65292;&#20998;&#38548;&#31526;&#21487;&#20197;&#26159;&#36887;&#21495;&#12289;&#31354;&#26684;&#21450;&#20998;&#21495;&#31561;&#12290;&#19979;&#38754;&#30340;&#20363;&#23376;&#20013;&#20351;&#29992;&#20102;<tt class="literal">'depends-on'</tt>&#26469;&#34920;&#36798;&#23545;&#22810;&#20010;bean&#30340;&#20381;&#36182;&#12290;</p><pre class="programlisting">&lt;bean id="beanOne" class="ExampleBean" depends-on="manager,accountDao"&gt;
  &lt;property name="manager" ref="manager" /&gt;
&lt;/bean&gt;

&lt;bean id="manager" class="ManagerBean" /&gt;
&lt;bean id="accountDao" class="x.y.jdbc.JdbcAccountDao" /&gt;</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#8220;<tt class="literal">depends-on</tt>&#8221;&#23646;&#24615;&#19981;&#20165;&#29992;&#26469;&#25351;&#23450;&#21021;&#22987;&#21270;&#26102;&#30340;&#20381;&#36182;&#65292;&#21516;&#26102;&#20063;&#29992;&#26469;&#25351;&#23450;&#30456;&#24212;&#30340;&#38144;&#27585;&#26102;&#30340;&#20381;&#36182;&#65288;&#35813;&#20381;&#36182;&#21482;&#38024;&#23545;<a href="#beans-factory-scopes-singleton" title="3.4.1.&nbsp;Singleton&#20316;&#29992;&#22495;">singleton</a>bean&#65289;&#12290;<tt class="literal">depends-on</tt>&#23646;&#24615;&#20013;&#25351;&#23450;&#30340;&#20381;&#36182;bean&#20250;&#22312;&#30456;&#20851;bean&#38144;&#27585;&#20043;&#21069;&#34987;&#38144;&#27585;&#65292;&#20174;&#32780;&#21487;&#20197;&#35753;&#29992;&#25143;&#25511;&#21046;&#38144;&#27585;&#39034;&#24207;&#12290;</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-lazy-init"></a>3.3.4.&nbsp;&#24310;&#36831;&#21021;&#22987;&#21270;bean</h3></div></div><div></div></div><p><tt class="interfacename">ApplicationContext</tt>&#23454;&#29616;&#30340;&#40664;&#35748;&#34892;&#20026;&#23601;&#26159;&#22312;&#21551;&#21160;&#26102;&#23558;&#25152;&#26377;<tt class="literal">singleton</tt> bean&#25552;&#21069;&#36827;&#34892;&#23454;&#20363;&#21270;&#12290;&#25552;&#21069;&#23454;&#20363;&#21270;&#24847;&#21619;&#30528;&#20316;&#20026;&#21021;&#22987;&#21270;&#36807;&#31243;&#30340;&#19968;&#37096;&#20998;&#65292;<tt class="interfacename">ApplicationContext</tt>&#23454;&#20363;&#20250;&#21019;&#24314;&#24182;&#37197;&#32622;&#25152;&#26377;&#30340;<a href="#beans-factory-scopes-singleton" title="3.4.1.&nbsp;Singleton&#20316;&#29992;&#22495;">singleton</a>  bean&#12290;&#36890;&#24120;&#24773;&#20917;&#19979;&#36825;&#26159;&#20214;<span class="emphasis"><em>&#22909;&#20107;</em></span>&#65292;&#22240;&#20026;&#36825;&#26679;&#22312;&#37197;&#32622;&#20013;&#30340;&#20219;&#20309;&#38169;&#35823;&#23601;&#20250;&#21363;&#21051;&#34987;&#21457;&#29616;&#65288;&#21542;&#21017;&#30340;&#35805;&#21487;&#33021;&#35201;&#33457;&#20960;&#20010;&#23567;&#26102;&#29978;&#33267;&#20960;&#22825;&#65289;&#12290;</p><p>&#26377;&#26102;&#20505;&#36825;&#31181;&#40664;&#35748;&#22788;&#29702;&#21487;&#33021;&#24182;<span class="emphasis"><em>&#19981;&#26159;</em></span>&#20320;&#24819;&#35201;&#30340;&#12290;&#22914;&#26524;&#20320;&#19981;&#24819;&#35753;&#19968;&#20010;singleton bean&#22312;<tt class="interfacename">ApplicationContext</tt>&#21021;&#22987;&#21270;&#26102;&#34987;&#25552;&#21069;&#23454;&#20363;&#21270;&#65292;&#37027;&#20040;&#21487;&#20197;&#23558;bean&#35774;&#32622;&#20026;&#24310;&#36831;&#23454;&#20363;&#21270;&#12290;&#19968;&#20010;&#24310;&#36831;&#21021;&#22987;&#21270;bean&#23558;&#21578;&#35785;IoC &#23481;&#22120;&#26159;&#22312;&#21551;&#21160;&#26102;&#36824;&#26159;&#22312;&#31532;&#19968;&#27425;&#34987;&#29992;&#21040;&#26102;&#23454;&#20363;&#21270;&#12290;</p><p>&#22312;XML&#37197;&#32622;&#25991;&#20214;&#20013;&#65292;&#24310;&#36831;&#21021;&#22987;&#21270;&#23558;&#36890;&#36807;<tt class="literal">&lt;bean/&gt;</tt>&#20803;&#32032;&#20013;&#30340;<tt class="literal">lazy-init</tt>&#23646;&#24615;&#26469;&#36827;&#34892;&#25511;&#21046;&#12290;&#20363;&#22914;&#65306;</p><pre class="programlisting">&lt;bean id="lazy" class="com.foo.ExpensiveToCreateBean" <span class="bold"><b>lazy-init="true"</b></span>/&gt;

&lt;bean name="not.lazy" class="com.foo.AnotherBean"/&gt;</pre><p>&#24403;<tt class="interfacename">ApplicationContext</tt>&#23454;&#29616;&#21152;&#36733;&#19978;&#36848;&#37197;&#32622;&#26102;&#65292;&#35774;&#32622;&#20026;<tt class="literal">lazy</tt>&#30340;bean&#23558;<span class="emphasis"><em>&#19981;&#20250;</em></span>&#22312;<tt class="interfacename">ApplicationContext</tt>&#21551;&#21160;&#26102;&#25552;&#21069;&#34987;&#23454;&#20363;&#21270;&#65292;&#32780;<tt class="literal">not.lazy</tt>&#21364;&#20250;&#34987;&#25552;&#21069;&#23454;&#20363;&#21270;&#12290;</p><p>&#38656;&#35201;&#35828;&#26126;&#30340;&#26159;&#65292;&#22914;&#26524;&#19968;&#20010;bean&#34987;&#35774;&#32622;&#20026;&#24310;&#36831;&#21021;&#22987;&#21270;&#65292;&#32780;&#21478;&#19968;&#20010;&#38750;&#24310;&#36831;&#21021;&#22987;&#21270;&#30340;singleton bean&#20381;&#36182;&#20110;&#23427;&#65292;&#37027;&#20040;&#24403;<tt class="interfacename">ApplicationContext</tt>&#25552;
&#21069;&#23454;&#20363;&#21270;singleton bean&#26102;&#65292;&#23427;&#24517;&#39035;&#20063;&#30830;&#20445;&#25152;&#26377;&#19978;&#36848;singleton
&#20381;&#36182;bean&#20063;&#34987;&#39044;&#20808;&#21021;&#22987;&#21270;&#65292;&#24403;&#28982;&#20063;&#21253;&#25324;&#35774;&#32622;&#20026;&#24310;&#36831;&#23454;&#20363;&#21270;&#30340;bean&#12290;&#22240;&#27492;&#65292;&#22914;&#26524;Ioc&#23481;&#22120;&#22312;&#21551;&#21160;&#30340;&#26102;&#20505;&#21019;&#24314;&#20102;&#37027;&#20123;&#35774;&#32622;&#20026;&#24310;&#36831;&#23454;&#20363;&#21270;&#30340;bean&#30340;&#23454;&#20363;&#65292;&#20320;
&#20063;&#19981;&#35201;&#35273;&#24471;&#22855;&#24618;&#65292;&#22240;&#20026;&#37027;&#20123;&#24310;&#36831;&#21021;&#22987;&#21270;&#30340;bean&#21487;&#33021;&#22312;&#37197;&#32622;&#30340;&#26576;&#20010;&#22320;&#26041;&#34987;&#27880;&#20837;&#21040;&#20102;&#19968;&#20010;&#38750;&#24310;&#36831;&#21021;&#22987;&#21270;singleton bean&#37324;&#38754;&#12290;</p><p>&#22312;&#23481;&#22120;&#23618;&#27425;&#19978;&#36890;&#36807;&#22312;<tt class="literal">&lt;beans/&gt;</tt>&#20803;&#32032;&#19978;&#20351;&#29992;<tt class="literal">'default-lazy-init'</tt>&#23646;&#24615;&#26469;&#25511;&#21046;&#24310;&#36831;&#21021;&#22987;&#21270;&#20063;&#26159;&#21487;&#33021;&#30340;&#12290;&#22914;&#19979;&#38754;&#30340;&#37197;&#32622;&#65306;</p><pre class="programlisting">&lt;beans default-lazy-init="true"&gt;
    <i class="lineannotation"><span class="lineannotation">&lt;!-- no beans will be pre-instantiated... --&gt;</span></i>
&lt;/beans&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-autowire"></a>3.3.5.&nbsp;&#33258;&#21160;&#35013;&#37197;&#65288;autowire&#65289;&#21327;&#20316;&#32773;</h3></div></div><div></div></div><p>Spring IoC&#23481;&#22120;&#21487;&#20197;<span class="emphasis"><em>&#33258;&#21160;&#35013;&#37197;&#65288;autowire&#65289;</em></span>&#30456;&#20114;&#21327;&#20316;bean&#20043;&#38388;&#30340;&#20851;&#32852;&#20851;&#31995;&#12290;&#22240;&#27492;&#65292;&#22914;&#26524;&#21487;&#33021;&#30340;&#35805;&#65292;&#21487;&#20197;&#33258;&#21160;&#35753;Spring&#36890;&#36807;&#26816;&#26597;<tt class="interfacename">BeanFactory</tt>&#20013;
&#30340;&#20869;&#23481;&#65292;&#26469;&#26367;&#25105;&#20204;&#25351;&#23450;bean&#30340;&#21327;&#20316;&#32773;&#65288;&#20854;&#20182;&#34987;&#20381;&#36182;&#30340;bean&#65289;&#12290;autowire&#19968;&#20849;&#26377;&#20116;&#31181;&#31867;&#22411;&#12290;&#30001;&#20110;autowire&#21487;&#20197;&#38024;&#23545;&#21333;&#20010;bean&#36827;&#34892;&#35774;&#32622;&#65292;
&#22240;&#27492;&#21487;&#20197;&#35753;&#26377;&#20123;bean&#20351;&#29992;autowire&#65292;&#26377;&#20123;bean&#19981;&#37319;&#29992;&#12290;autowire&#30340;&#26041;&#20415;&#20043;&#22788;&#22312;&#20943;&#23569;&#25110;&#32773;&#28040;&#38500;&#23646;&#24615;&#25110;&#26500;&#36896;&#22120;&#21442;&#25968;&#30340;&#35774;&#32622;&#65292;&#36825;&#26679;&#21487;&#20197;&#32473;&#25105;&#20204;&#30340;
&#37197;&#32622;&#25991;&#20214;&#20943;&#20943;&#32933;&#65281;<sup>[<a name="d0e3180" href="#ftn.d0e3180">2</a>]</sup> &#22312;xml&#37197;&#32622;&#25991;&#20214;&#20013;&#65292;&#21487;&#20197;&#22312;<tt class="literal">&lt;bean/&gt;</tt>&#20803;&#32032;&#20013;&#20351;&#29992;autowire&#23646;&#24615;&#25351;&#23450;:</p><div class="table"><a name="beans-factory-autowiring-modes-tbl"></a><p class="title"><b>Table&nbsp;3.2.&nbsp;Autowiring modes</b></p><table summary="Autowiring modes" border="1"><colgroup><col><col></colgroup><thead><tr><th>&#27169;&#24335;</th><th>&#35828;&#26126;</th></tr></thead><tbody><tr><td>no</td><td class="auto-generated">&nbsp;</td></tr><tr><td>byName</td><td><p>&#26681;&#25454;&#23646;&#24615;&#21517;&#33258;&#21160;&#35013;&#37197;&#12290;&#27492;&#36873;&#39033;&#23558;&#26816;&#26597;&#23481;&#22120;&#24182;&#26681;&#25454;&#21517;&#23383;&#26597;&#25214;&#19982;&#23646;&#24615;&#23436;&#20840;&#19968;&#33268;&#30340;bean&#65292;&#24182;&#23558;&#20854;&#19982;&#23646;&#24615;&#33258;&#21160;&#35013;&#37197;&#12290;&#20363;&#22914;&#65292;&#22312;bean&#23450;&#20041;&#20013;&#23558;autowire&#35774;&#32622;&#20026;by name&#65292;&#32780;&#35813;bean&#21253;&#21547;<span class="emphasis"><em>master</em></span>&#23646;&#24615;&#65288;&#21516;&#26102;&#25552;&#20379;<span class="emphasis"><em>setMaster(..)</em></span>&#26041;&#27861;&#65289;&#65292;Spring&#23601;&#20250;&#26597;&#25214;&#21517;&#20026;<tt class="literal">master</tt>&#30340;bean&#23450;&#20041;&#65292;&#24182;&#29992;&#23427;&#26469;&#35013;&#37197;&#32473;master&#23646;&#24615;&#12290;</p></td></tr><tr><td>byType</td><td><p>&#22914;&#26524;&#23481;&#22120;&#20013;&#23384;&#22312;&#19968;&#20010;&#19982;&#25351;&#23450;&#23646;&#24615;&#31867;&#22411;&#30456;&#21516;&#30340;bean&#65292;&#37027;&#20040;&#23558;&#19982;&#35813;&#23646;&#24615;&#33258;&#21160;&#35013;&#37197;&#12290;&#22914;&#26524;&#23384;&#22312;&#22810;&#20010;&#35813;&#31867;&#22411;&#30340;bean&#65292;&#37027;&#20040;&#23558;&#20250;&#25243;&#20986;&#24322;&#24120;&#65292;&#24182;&#25351;&#20986;&#19981;&#33021;&#20351;&#29992;<span class="emphasis"><em>byType</em></span>&#26041;&#24335;&#36827;&#34892;&#33258;&#21160;&#35013;&#37197;&#12290;&#33509;&#27809;&#26377;&#25214;&#21040;&#30456;&#21305;&#37197;&#30340;bean&#65292;&#21017;&#20160;&#20040;&#20107;&#37117;&#19981;&#21457;&#29983;&#65292;&#23646;&#24615;&#20063;&#19981;&#20250;&#34987;&#35774;&#32622;&#12290;&#22914;&#26524;&#20320;&#19981;&#24076;&#26395;&#36825;&#26679;&#65292;&#37027;&#20040;&#21487;&#20197;&#36890;&#36807;&#35774;&#32622;<tt class="literal">dependency-check="objects"</tt>&#35753;Spring&#25243;&#20986;&#24322;&#24120;&#12290;</p></td></tr><tr><td>constructor</td><td><p>&#19982;<span class="emphasis"><em>byType</em></span>&#30340;&#26041;&#24335;&#31867;&#20284;&#65292;&#19981;&#21516;&#20043;&#22788;&#22312;&#20110;&#23427;&#24212;&#29992;&#20110;&#26500;&#36896;&#22120;&#21442;&#25968;&#12290;&#22914;&#26524;&#22312;&#23481;&#22120;&#20013;&#27809;&#26377;&#25214;&#21040;&#19982;&#26500;&#36896;&#22120;&#21442;&#25968;&#31867;&#22411;&#19968;&#33268;&#30340;bean&#65292;&#37027;&#20040;&#23558;&#20250;&#25243;&#20986;&#24322;&#24120;&#12290;</p></td></tr><tr><td>autodetect</td><td><p>&#36890;&#36807;bean&#31867;&#30340;&#33258;&#30465;&#26426;&#21046;&#65288;introspection&#65289;&#26469;&#20915;&#23450;&#26159;&#20351;&#29992;<span class="emphasis"><em>constructor</em></span>&#36824;&#26159;<span class="emphasis"><em>byType</em></span>&#26041;&#24335;&#36827;&#34892;&#33258;&#21160;&#35013;&#37197;&#12290;&#22914;&#26524;&#21457;&#29616;&#40664;&#35748;&#30340;&#26500;&#36896;&#22120;&#65292;&#37027;&#20040;&#23558;&#20351;&#29992;<span class="emphasis"><em>byType</em></span>&#26041;&#24335;&#12290;</p></td></tr></tbody></table></div><p>&#22914;&#26524;&#30452;&#25509;&#20351;&#29992;<tt class="literal">property</tt>&#21644;<tt class="literal">constructor-arg</tt>&#27880;&#20837;&#20381;&#36182;&#30340;&#35805;&#65292;&#37027;&#20040;&#23558;<tt class="interfacename">&#24635;&#26159;</tt>&#35206;&#30422;&#33258;&#21160;&#35013;&#37197;&#12290;&#32780;&#19988;&#30446;&#21069;&#20063;&#19981;&#25903;&#25345;<span class="emphasis"><em>&#31616;&#21333;</em></span>&#31867;&#22411;&#30340;&#33258;&#21160;&#35013;&#37197;&#65292;&#36825;&#37324;&#25152;&#35828;&#30340;&#31616;&#21333;&#31867;&#22411;&#21253;&#25324;&#22522;&#26412;&#31867;&#22411;&#12289;<tt class="classname">String</tt>&#12289;<tt class="classname">Class</tt>&#20197;&#21450;&#31616;&#21333;&#31867;&#22411;&#30340;&#25968;&#32452;&#65288;&#36825;&#19968;&#28857;&#24050;&#32463;&#34987;&#35774;&#35745;&#65292;&#23558;&#32771;&#34385;&#20316;&#20026;&#19968;&#20010;<span class="emphasis"><em>&#21151;&#33021;</em></span>&#25552;&#20379;&#65289;&#12290;<span class="emphasis"><em>byType</em></span>&#21644;<span class="emphasis"><em>constructor</em></span>&#33258;&#21160;&#35013;&#37197;&#27169;&#24335;&#20063;&#21487;&#29992;&#20110;&#25968;&#32452;&#21644;&#25351;&#23450;&#31867;&#22411;&#30340;&#38598;&#21512;&#12290;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#23481;&#22120;&#20013;&#30340;<span class="emphasis"><em>&#25152;&#26377;</em></span>&#21305;&#37197;&#30340;&#33258;&#21160;&#35013;&#37197;&#23545;&#35937;&#23558;&#34987;&#29992;&#20110;&#28385;&#36275;&#21508;&#31181;&#20381;&#36182;&#12290;&#23545;&#20110;key&#20540;&#31867;&#22411;&#20026; <tt class="classname">String</tt>&#30340;&#24378;&#31867;&#22411;Map&#20063;&#21487;&#20197;&#34987;&#33258;&#21160;&#35013;&#37197;&#12290;&#19968;&#20010;&#33258;&#21160;&#35013;&#37197;&#30340;Map&#30340;value&#20540;&#23558;&#30001;&#25152;&#21305;&#37197;&#31867;&#22411;&#30340;bean&#25152;&#22635;&#20805;&#12290;&#32780;Map&#30340;key&#20540;&#21017;&#26159;&#30456;&#24212;&#30340;bean&#30340;&#21517;&#23383;&#12290;</p><p>&#33258;&#21160;&#35013;&#37197;&#36824;&#21487;&#20197;&#19982;&#20381;&#36182;&#26816;&#26597;&#32467;&#21512;&#20351;&#29992;&#65292;&#36825;&#26679;&#20381;&#36182;&#26816;&#26597;&#23558;&#22312;&#33258;&#21160;&#35013;&#37197;&#23436;&#25104;&#20043;&#21518;&#34987;&#25191;&#34892;&#12290;</p><p>&#29702;&#35299;&#33258;&#21160;&#35013;&#37197;&#30340;&#20248;&#32570;&#28857;&#26159;&#24456;&#37325;&#35201;&#30340;&#12290;&#20854;&#20013;&#20248;&#28857;&#21253;&#25324;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#33258;&#21160;&#35013;&#37197;&#33021;&#26174;&#33879;&#20943;&#23569;&#37197;&#32622;&#30340;&#25968;&#37327;&#12290;&#19981;&#36807;&#65292;&#37319;&#29992;bean&#27169;&#26495;&#65288;&#35265;<a href="#beans-child-bean-definitions" title="3.6.&nbsp;bean&#23450;&#20041;&#30340;&#32487;&#25215;">&#36825;&#37324;</a>&#65289;&#20063;&#21487;&#20197;&#36798;&#21040;&#21516;&#26679;&#30340;&#30446;&#30340;&#12290;</p></li><li><p>&#33258;&#21160;&#35013;&#37197;&#21487;&#20197;&#20351;&#37197;&#32622;&#19982;java&#20195;&#30721;&#21516;&#27493;&#26356;&#26032;&#12290;&#20363;&#22914;&#65292;&#22914;&#26524;&#20320;&#38656;&#35201;&#32473;&#19968;&#20010;java&#31867;&#22686;&#21152;&#19968;&#20010;&#20381;&#36182;&#65292;&#37027;&#20040;&#35813;&#20381;&#36182;&#23558;&#34987;&#33258;&#21160;&#23454;&#29616;&#32780;&#19981;&#38656;&#35201;&#20462;&#25913;&#37197;&#32622;&#12290;&#22240;&#27492;&#24378;&#28872;&#25512;&#33616;&#22312;&#24320;&#21457;&#36807;&#31243;&#20013;&#37319;&#29992;&#33258;&#21160;&#35013;&#37197;&#65292;&#32780;&#22312;&#31995;&#32479;&#36235;&#20110;&#31283;&#23450;&#30340;&#26102;&#20505;&#25913;&#20026;&#26174;&#24335;&#35013;&#37197;&#30340;&#26041;&#24335;&#12290;</p></li></ul></div><p>&#33258;&#21160;&#35013;&#37197;&#30340;&#19968;&#20123;&#32570;&#28857;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#23613;&#31649;&#33258;&#21160;&#35013;&#37197;&#27604;&#26174;&#24335;&#35013;&#37197;&#26356;&#31070;&#22855;&#65292;&#20294;&#26159;&#65292;&#27491;&#22914;&#19978;&#38754;&#25152;&#25552;&#21040;&#30340;&#65292;Spring&#20250;&#23613;&#37327;&#36991;&#20813;&#22312;&#35013;&#37197;&#19981;&#26126;&#30830;&#30340;&#26102;&#20505;&#36827;&#34892;&#29468;&#27979;&#65292;&#22240;&#20026;&#35013;&#37197;&#19981;&#26126;&#30830;&#21487;&#33021;&#20986;&#29616;&#38590;&#20197;&#39044;&#26009;&#30340;&#32467;&#26524;&#65292;&#32780;&#19988;Spring&#25152;&#31649;&#29702;&#30340;&#23545;&#35937;&#20043;&#38388;&#30340;&#20851;&#32852;&#20851;&#31995;&#20063;&#19981;&#20877;&#33021;&#28165;&#26224;&#30340;&#36827;&#34892;&#25991;&#26723;&#21270;&#12290;</p></li><li><p>&#23545;&#20110;&#37027;&#20123;&#26681;&#25454;Spring&#37197;&#32622;&#25991;&#20214;&#29983;&#25104;&#25991;&#26723;&#30340;&#24037;&#20855;&#26469;&#35828;&#65292;&#33258;&#21160;&#35013;&#37197;&#23558;&#20250;&#20351;&#36825;&#20123;&#24037;&#20855;&#27809;&#27861;&#29983;&#25104;&#20381;&#36182;&#20449;&#24687;&#12290;</p></li></ul></div><p>&#21478;
&#19968;&#20010;&#38382;&#39064;&#38656;&#35201;&#27880;&#24847;&#30340;&#26159;&#65292;&#24403;&#26681;&#25454;&#31867;&#22411;&#36827;&#34892;&#33258;&#21160;&#35013;&#37197;&#30340;&#26102;&#20505;&#65292;&#23481;&#22120;&#20013;&#21487;&#33021;&#23384;&#22312;&#22810;&#20010;bean&#23450;&#20041;&#36319;&#33258;&#21160;&#35013;&#37197;&#30340;setter&#26041;&#27861;&#21644;&#26500;&#36896;&#22120;&#21442;&#25968;&#31867;&#22411;&#21305;&#37197;&#12290;&#34429;&#28982;&#23545;&#20110;&#25968;
&#32452;&#12289;&#38598;&#21512;&#20197;&#21450;Map&#65292;&#19981;&#23384;&#22312;&#36825;&#20010;&#38382;&#39064;&#65292;&#20294;&#26159;&#23545;&#20110;&#21333;&#20540;&#20381;&#36182;&#26469;&#35828;&#65292;&#23601;&#20250;&#23384;&#22312;&#27169;&#26865;&#20004;&#21487;&#30340;&#38382;&#39064;&#12290;&#22914;&#26524;bean&#23450;&#20041;&#19981;&#21807;&#19968;&#65292;&#35013;&#37197;&#26102;&#23601;&#20250;&#25243;&#20986;&#24322;&#24120;&#65292;&#38754;&#23545;&#36825;&#31181;&#22330;&#26223;&#25105;&#20204;&#26377;
&#20960;&#20010;&#26041;&#26696;&#36827;&#34892;&#36873;&#25321;&#65306;&#31532;&#19968;&#20010;&#26041;&#26696;&#23601;&#26159;&#24323;&#33258;&#21160;&#35013;&#37197;&#32780;&#25913;&#29992;&#26174;&#24335;&#35013;&#37197;&#65307;&#31532;&#20108;&#20010;&#26041;&#26696;&#23601;&#26159;&#22312;bean&#23450;&#20041;&#20013;&#36890;&#36807;&#35774;&#32622;<tt class="literal">'autowire-candidate'</tt>&#23646;&#24615;&#20026;<tt class="literal">'false'</tt>&#26469;&#23558;&#35813;bean&#25490;&#38500;&#22312;&#33258;&#21160;&#35013;&#37197;&#20505;&#36873;&#21517;&#21333;&#20043;&#22806;&#65288;&#35814;&#24773;&#35265;&#25509;&#19979;&#26469;&#30340;&#31456;&#33410;&#65289;&#65307;&#31532;&#19977;&#20010;&#26041;&#26696;&#26159;&#36890;&#36807;&#22312;bean&#23450;&#20041;&#20013;&#35774;&#32622;<tt class="literal">'primary'</tt>&#23646;&#24615;&#20026;<tt class="literal">'true'</tt>&#26469;&#23558;&#35813;bean&#35774;&#32622;&#20026;<span class="emphasis"><em>&#39318;&#36873;</em></span>&#33258;&#21160;&#35013;&#37197;bean&#12290;&#26368;&#21518;&#65292;&#23545;&#20110;&#20351;&#29992;Java 5&#30340;&#29992;&#25143;&#26469;&#35828;&#65292;&#21487;&#33021;&#20250;&#20351;&#29992;&#27880;&#35299;&#30340;&#24418;&#24335;&#26469;&#37197;&#32622;bean&#65292;&#20851;&#20110;&#36825;&#26041;&#38754;&#30340;&#20869;&#23481;&#21487;&#35265;<a href="#beans-annotation-config" title="3.11.&nbsp;&#22522;&#20110;&#27880;&#35299;&#65288;Annotation-based&#65289;&#30340;&#37197;&#32622;">Section&nbsp;3.11, &#8220;&#22522;&#20110;&#27880;&#35299;&#65288;Annotation-based&#65289;&#30340;&#37197;&#32622;&#8221;</a>&#12290;</p><p>&#20294;&#20915;&#23450;&#26159;&#21542;&#20351;&#29992;&#33258;&#21160;&#35013;&#37197;&#24335;&#26102;&#65292;&#27809;&#26377;&#32477;&#23545;&#30340;&#23545;&#38169;&#12290;&#32771;&#34385;&#39033;&#30446;&#30340;&#23454;&#38469;&#26159;&#26368;&#22909;&#30340;&#21150;&#27861;&#12290;&#27604;&#22914;&#39033;&#30446;&#36890;&#24120;&#19981;&#20351;&#29992;&#33258;&#21160;&#35013;&#37197;&#65292;&#37027;&#20040;&#20351;&#29992;&#23427;&#26469;&#20165;&#20165;&#35013;&#37197;2&#20010;bean&#23450;&#20041;&#26159;&#24456;&#35753;&#20154;&#22256;&#24785;&#30340;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-autowire-candidate"></a>3.3.5.1.&nbsp;&#23558;bean&#25490;&#38500;&#22312;&#33258;&#21160;&#35013;&#37197;&#20043;&#22806;</h4></div></div><div></div></div><p>&#20320;&#20063;&#21487;&#20197;&#38024;&#23545;&#21333;&#20010;bean&#35774;&#32622;&#20854;&#26159;&#21542;&#20026;&#34987;&#33258;&#21160;&#35013;&#37197;&#23545;&#35937;&#12290;&#24403;&#37319;&#29992;XML&#26684;&#24335;&#37197;&#32622;bean&#26102;&#65292;<tt class="literal">&lt;bean/&gt;</tt>&#20803;&#32032;&#30340; <tt class="literal">autowire-candidate</tt>&#23646;&#24615;&#21487;&#34987;&#35774;&#20026;<tt class="literal">false</tt>&#65292;&#36825;&#26679;&#23481;&#22120;&#22312;&#26597;&#25214;&#33258;&#21160;&#35013;&#37197;&#23545;&#35937;&#26102;&#23558;&#19981;&#32771;&#34385;&#35813;bean&#12290;</p><p>&#21478;&#19968;&#20010;&#20570;&#27861;&#23601;&#26159;&#20351;&#29992;&#23545;bean&#21517;&#23383;&#36827;&#34892;&#27169;&#24335;&#21305;&#37197;&#26469;&#23545;&#33258;&#21160;&#35013;&#37197;&#36827;&#34892;&#38480;&#21046;&#12290;&#20854;&#20570;&#27861;&#26159;&#22312;<tt class="literal">&lt;beans/&gt;</tt>&#20803;&#32032;&#30340;<tt class="literal">'default-autowire-candidates'</tt>&#23646;&#24615;&#20013;&#36827;&#34892;&#35774;&#32622;&#12290;&#27604;&#22914;&#65292;&#23558;&#33258;&#21160;&#35013;&#37197;&#38480;&#21046;&#22312;&#21517;&#23383;&#20197;<span class="emphasis"><em>'Repository'</em></span>&#32467;&#23614;&#30340;bean&#65292;&#37027;&#20040;&#21487;&#20197;&#35774;&#32622;&#20026;"*Repository&#8220;&#12290;&#23545;&#20110;&#22810;&#20010;&#21305;&#37197;&#27169;&#24335;&#21017;&#21487;&#20197;&#20351;&#29992;&#36887;&#21495;&#36827;&#34892;&#20998;&#38548;&#12290;&#27880;&#24847;&#65292;&#22914;&#26524;&#22312;bean&#23450;&#20041;&#20013;&#30340;<tt class="literal">'autowire-candidate'</tt>&#23646;&#24615;&#26174;&#24335;&#30340;&#35774;&#32622;&#20026;<tt class="literal">'true'</tt> &#25110; <tt class="literal">'false'</tt>&#65292;&#37027;&#20040;&#35813;&#23481;&#22120;&#22312;&#33258;&#21160;&#35013;&#37197;&#30340;&#26102;&#20505;&#20248;&#20808;&#37319;&#29992;&#35813;&#23646;&#24615;&#30340;&#35774;&#32622;&#65292;&#32780;&#27169;&#24335;&#21305;&#37197;&#23558;&#19981;&#36215;&#20316;&#29992;&#12290;</p><p>&#23545;&#20110;&#37027;&#20123;&#20174;&#26469;&#23601;&#19981;&#20250;&#34987;&#20854;&#23427;bean&#37319;&#29992;&#33258;&#21160;&#35013;&#37197;&#30340;&#26041;&#24335;&#26469;&#27880;&#20837;&#30340;bean&#32780;&#35328;&#65292;&#36825;&#26159;&#26377;&#29992;&#30340;&#12290;&#19981;&#36807;&#36825;&#24182;&#19981;&#24847;&#21619;&#30528;&#34987;&#25490;&#38500;&#30340;bean&#33258;&#24049;&#23601;&#19981;&#33021;&#20351;&#29992;&#33258;&#21160;&#35013;&#37197;&#26469;&#27880;&#20837;&#20854;&#20182;bean&#65292;&#23427;&#26159;&#21487;&#20197;&#30340;&#65292;&#25110;&#32773;&#26356;&#20934;&#30830;&#22320;&#35828;&#65292;&#24212;&#35813;&#26159;&#23427;&#19981;&#20250;&#34987;&#32771;&#34385;&#20316;&#20026;&#20854;&#20182;bean&#33258;&#21160;&#35013;&#37197;&#30340;&#20505;&#36873;&#32773;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-dependencies"></a>3.3.6.&nbsp;&#20381;&#36182;&#26816;&#26597;</h3></div></div><div></div></div><p>Spring&#38500;&#20102;&#33021;&#23545;&#23481;&#22120;&#20013;bean&#30340;&#20381;&#36182;&#35774;&#32622;&#36827;&#34892;&#26816;&#26597;&#22806;&#65292;&#36824;&#21487;&#20197;&#26816;&#26597;bean&#23450;&#20041;&#20013;&#23454;&#38469;&#23646;&#24615;&#20540;&#30340;&#35774;&#32622;&#65292;&#24403;&#28982;&#20063;&#21253;&#25324;&#37319;&#29992;&#33258;&#21160;&#35013;&#37197;&#26041;&#24335;&#35774;&#32622;&#23646;&#24615;&#20540;&#30340;&#26816;&#26597;&#12290;</p><p>&#24403;
&#38656;&#35201;&#30830;&#20445;bean&#30340;&#25152;&#26377;&#23646;&#24615;&#20540;&#65288;&#25110;&#32773;&#23646;&#24615;&#31867;&#22411;&#65289;&#34987;&#27491;&#30830;&#35774;&#32622;&#30340;&#26102;&#20505;&#65292;&#37027;&#20040;&#36825;&#20010;&#21151;&#33021;&#20250;&#38750;&#24120;&#26377;&#29992;&#12290;&#24403;&#28982;&#65292;&#22312;&#24456;&#22810;&#24773;&#20917;&#19979;&#65292;bean&#31867;&#30340;&#26576;&#20123;&#23646;&#24615;&#20250;&#20855;&#26377;&#40664;&#35748;&#20540;&#65292;&#25110;&#32773;
&#26377;&#20123;&#23646;&#24615;&#24182;&#19981;&#20250;&#22312;&#25152;&#26377;&#22330;&#26223;&#19979;&#20351;&#29992;&#65292;&#22240;&#27492;&#36825;&#39033;&#21151;&#33021;&#20250;&#23384;&#22312;&#19968;&#23450;&#30340;&#23616;&#38480;&#24615;&#12290;&#23601;&#20687;&#33258;&#21160;&#35013;&#37197;&#19968;&#26679;&#65292;&#20381;&#36182;&#26816;&#26597;&#20063;&#21487;&#20197;&#38024;&#23545;&#27599;&#19968;&#20010;bean&#36827;&#34892;&#35774;&#32622;&#12290;&#20381;&#36182;&#26816;&#26597;&#40664;&#35748;&#20026;<span class="emphasis"><em>not</em></span>&#65292;&#23427;&#26377;&#20960;&#31181;&#19981;&#21516;&#30340;&#20351;&#29992;&#27169;&#24335;&#65292;&#22312;xml&#37197;&#32622;&#25991;&#20214;&#20013;&#65292;&#21487;&#20197;&#22312;bean&#23450;&#20041;&#20013;&#20026;<tt class="literal">dependency-check</tt>&#23646;&#24615;&#20351;&#29992;&#20197;&#19979;&#20960;&#31181;&#20540;&#65306;</p><div class="table"><a name="beans-factory-dependency-check-modes-tbl"></a><p class="title"><b>Table&nbsp;3.3.&nbsp;&#20381;&#36182;&#26816;&#26597;&#26041;&#24335;</b></p><table summary="&#20381;&#36182;&#26816;&#26597;&#26041;&#24335;" border="1"><colgroup><col><col></colgroup><thead><tr><th>&#27169;&#24335;</th><th>&#35828;&#26126;</th></tr></thead><tbody><tr><td>none</td><td><p>&#27809;&#26377;&#20381;&#36182;&#26816;&#26597;&#65292;&#22914;&#26524;bean&#30340;&#23646;&#24615;&#27809;&#26377;&#20540;&#30340;&#35805;&#21487;&#20197;&#19981;&#29992;&#35774;&#32622;&#12290;</p></td></tr><tr><td>simple</td><td><p>&#23545;&#20110;&#21407;&#22987;&#31867;&#22411;&#21450;&#38598;&#21512;&#65288;&#38500;&#21327;&#20316;&#32773;&#22806;&#30340;&#19968;&#20999;&#19996;&#35199;&#65289;&#25191;&#34892;&#20381;&#36182;&#26816;&#26597;</p></td></tr><tr><td>object</td><td><p>&#20165;&#23545;&#21327;&#20316;&#32773;&#25191;&#34892;&#20381;&#36182;&#26816;&#26597;</p></td></tr><tr><td>all</td><td><p>&#23545;&#21327;&#20316;&#32773;&#65292;&#21407;&#22987;&#31867;&#22411;&#21450;&#38598;&#21512;&#25191;&#34892;&#20381;&#36182;&#26816;&#26597;</p></td></tr></tbody></table></div><p>&#20551;&#33509;&#20320;&#22312;&#20351;&#29992;Java 5&#65292;&#21487;&#20197;&#37319;&#29992;&#28304;&#20195;&#30721;&#32423;&#30340;&#27880;&#35299;&#65288;annotations&#65289;&#26469;&#36827;&#34892;&#37197;&#32622;&#65292;&#20851;&#20110;&#36825;&#26041;&#38754;&#30340;&#20869;&#23481;&#21487;&#20197;&#22312;<a href="#metadata-annotations-required" title="25.3.1.&nbsp;@Required">Section&nbsp;25.3.1, &#8220;@Required&#8221;</a>&#36825;&#19968;&#33410;&#25214;&#21040;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-method-injection"></a>3.3.7.&nbsp;&#26041;&#27861;&#27880;&#20837;</h3></div></div><div></div></div><p>&#22312;&#22823;&#37096;&#20998;&#24773;&#20917;&#19979;&#65292;&#23481;&#22120;&#20013;&#30340;bean&#37117;&#26159;<a href="#beans-factory-scopes-singleton" title="3.4.1.&nbsp;Singleton&#20316;&#29992;&#22495;">singleton</a>&#31867;
&#22411;&#30340;&#12290;&#22914;&#26524;&#19968;&#20010;singleton bean&#35201;&#24341;&#29992;&#21478;&#22806;&#19968;&#20010;singleton bean&#65292;&#25110;&#32773;&#19968;&#20010;&#38750;singleton
bean&#35201;&#24341;&#29992;&#21478;&#22806;&#19968;&#20010;&#38750;singleton
bean&#26102;&#65292;&#36890;&#24120;&#24773;&#20917;&#19979;&#23558;&#19968;&#20010;bean&#23450;&#20041;&#20026;&#21478;&#19968;&#20010;bean&#30340;property&#20540;&#23601;&#21487;&#20197;&#20102;&#12290;&#19981;&#36807;&#23545;&#20110;&#20855;&#26377;&#19981;&#21516;&#29983;&#21629;&#21608;&#26399;&#30340;bean&#26469;&#35828;&#36825;&#26679;&#20570;&#23601;&#20250;&#26377;&#38382;&#39064;&#20102;&#65292;
&#27604;&#22914;&#22312;&#35843;&#29992;&#19968;&#20010;singleton&#31867;&#22411;bean A&#30340;&#26576;&#20010;&#26041;&#27861;&#26102;&#65292;&#38656;&#35201;&#24341;&#29992;&#21478;&#19968;&#20010;&#38750;singleton&#65288;prototype&#65289;&#31867;&#22411;&#30340;bean
B&#65292;&#23545;&#20110;bean A&#26469;&#35828;&#65292;&#23481;&#22120;&#21482;&#20250;&#21019;&#24314;&#19968;&#27425;&#65292;&#36825;&#26679;&#23601;&#27809;&#27861;&#22312;&#38656;&#35201;&#30340;&#26102;&#20505;&#27599;&#27425;&#35753;&#23481;&#22120;&#20026;bean A&#25552;&#20379;&#19968;&#20010;&#26032;&#30340;&#30340;bean B&#23454;&#20363;&#12290;</p><p>&#19978;&#36848;&#38382;&#39064;&#30340;&#19968;&#20010;&#35299;&#20915;&#21150;&#27861;&#23601;&#26159;&#25918;&#24323;&#25511;&#21046;&#21453;&#36716;&#12290;&#36890;&#36807;&#23454;&#29616;<tt class="literal">BeanFactoryAware</tt>&#25509;&#21475;&#65288;&#35265;<a href="#beans-factory-aware-beanfactoryaware" title="3.5.2.1.&nbsp;
					BeanFactoryAware">&#36825;&#37324;</a>&#65289;&#35753;bean A&#33021;&#22815;&#24863;&#30693;bean &#23481;&#22120;&#65292;&#24182;&#19988;&#22312;&#38656;&#35201;&#30340;&#26102;&#20505;&#36890;&#36807;&#20351;&#29992;<tt class="literal">getBean("B")</tt>&#26041;&#24335;&#65288;&#35265;<a href="#beans-factory-client" title="3.2.4.&nbsp;&#20351;&#29992;&#23481;&#22120;">&#36825;&#37324;</a>&#65289;&#21521;&#23481;&#22120;&#35831;&#27714;&#19968;&#20010;&#26032;&#30340;bean B&#23454;&#20363;&#12290;&#30475;&#19979;&#19979;&#38754;&#36825;&#20010;&#20363;&#23376;&#65292;&#20854;&#20013;&#25925;&#24847;&#20351;&#29992;&#20102;&#36825;&#31181;&#26041;&#27861;&#65306;</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">// a class that uses a stateful Command-style class to perform some processing</span></i>
package fiona.apple;

<i class="lineannotation"><span class="lineannotation">// lots of Spring-API imports</span></i>
import org.springframework.beans.BeansException;
import org.springframework.beans.factory.BeanFactory;
import org.springframework.beans.factory.BeanFactoryAware;

public class CommandManager implements BeanFactoryAware {

   private BeanFactory beanFactory;

   public Object process(Map commandState) {
      <i class="lineannotation"><span class="lineannotation">// grab a new instance of the appropriate <tt class="interfacename">Command</tt></span></i>
      Command command = createCommand();
      <i class="lineannotation"><span class="lineannotation">// set the state on the (hopefully brand new) <tt class="interfacename">Command</tt> instance</span></i>
      command.setState(commandState);
      return command.execute();
   }

   <i class="lineannotation"><span class="lineannotation">// the <tt class="interfacename">Command</tt> returned here could be an implementation that executes asynchronously, or whatever</span></i>
   protected Command createCommand() {
      return (Command) this.beanFactory.getBean("command"); <i class="lineannotation"><span class="lineannotation">// notice the Spring API dependency</span></i>
   }

   public void setBeanFactory(BeanFactory beanFactory) throws BeansException {
      this.beanFactory = beanFactory;
   }
}</pre><p>&#19978;&#38754;&#30340;&#20363;&#23376;&#26174;&#28982;&#19981;&#26159;&#26368;&#22909;&#30340;&#65292;&#22240;&#20026;&#19994;&#21153;&#20195;&#30721;&#21644;Spring Framework&#20135;&#29983;&#20102;&#32806;&#21512;&#12290;&#26041;&#27861;&#27880;&#20837;&#65292;&#20316;&#20026;Spring IoC&#23481;&#22120;&#30340;&#19968;&#31181;&#39640;&#32423;&#29305;&#24615;&#65292;&#21487;&#20197;&#20197;&#19968;&#31181;&#24178;&#20928;&#30340;&#26041;&#27861;&#26469;&#22788;&#29702;&#36825;&#31181;&#24773;&#20917;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-lookup-method-injection"></a>3.3.7.1.&nbsp;Lookup&#26041;&#27861;&#27880;&#20837;</h4></div></div><div></div></div><div class="sidebar"><p class="title"><b>&#36825;&#31350;&#31455;&#26159;&#19981;&#26159;&#26041;&#27861;&#27880;&#20837;&#8230;&#8230;</b></p><p>&#26377;&#28857;&#20687;Tapestry 4.0&#30340;&#39029;&#38754;&#65292;&#20889;&#19978;<tt class="literal">abstract</tt>&#23646;&#24615;&#65292;Tapestry&#20250;&#22312;&#36816;&#34892;&#26102;&#29992;&#20855;&#20307;&#23454;&#29616;&#23558;&#20854;&#35206;&#30422;&#12290;</p><p>&#22312;<a href="http://blog.springframework.com/rod/?p=1" target="_top">&#36825;&#31687;Blog&#25991;&#31456;&#20013;</a>&#20320;&#21487;&#20197;&#20102;&#35299;&#26356;&#36807;&#20851;&#20110;&#26041;&#27861;&#27880;&#20837;&#21160;&#26426;&#30340;&#20869;&#23481;&#12290;</p></div><p>Lookup&#26041;&#27861;&#27880;&#20837;&#21033;&#29992;&#20102;&#23481;&#22120;&#30340;&#35206;&#30422;<span class="emphasis"><em>&#21463;&#23481;&#22120;&#31649;&#29702;&#30340;bean</em></span>&#26041;
&#27861;&#30340;&#33021;&#21147;&#65292;&#20174;&#32780;&#36820;&#22238;&#25351;&#23450;&#21517;&#23383;&#30340;bean&#23454;&#20363;&#12290;&#22312;&#19978;&#36848;&#22330;&#26223;&#20013;&#65292;Lookup&#26041;&#27861;&#27880;&#20837;&#36866;&#29992;&#20110;&#21407;&#22411;bean&#12290;Lookup&#26041;&#27861;&#27880;&#20837;&#30340;&#20869;&#37096;&#26426;&#21046;&#26159;Spring&#21033;&#29992;
&#20102;CGLIB&#24211;&#22312;&#36816;&#34892;&#26102;&#29983;&#25104;&#20108;&#36827;&#21046;&#20195;&#30721;&#21151;&#33021;&#65292;&#36890;&#36807;&#21160;&#24577;&#21019;&#24314;Lookup&#26041;&#27861;bean&#30340;&#23376;&#31867;&#32780;&#36798;&#21040;&#22797;&#20889;Lookup&#26041;&#27861;&#30340;&#30446;&#30340;&#12290;</p><p>&#22914;&#26524;&#20320;&#30475;&#19979;&#19978;&#20010;&#20195;&#30721;&#27573;&#20013;&#30340;&#20195;&#30721;(<tt class="classname">CommandManager</tt>&#31867;)&#65292;Spring&#23481;&#22120;&#21160;&#24577;&#35206;&#30422;&#20102;<tt class="methodname">createCommand()</tt>&#26041;&#27861;&#30340;&#23454;&#29616;&#12290;&#20320;&#30340;<tt class="classname">CommandManager</tt>&#31867;&#19981;&#20250;&#26377;&#19968;&#28857;&#23545;Spring&#30340;&#20381;&#36182;&#65292;&#22312;&#19979;&#38754;&#36825;&#20010;&#20363;&#23376;&#20013;&#20063;&#26159;&#19968;&#26679;&#30340;&#65306;</p><pre class="programlisting">package fiona.apple;

<i class="lineannotation"><span class="lineannotation">// no more Spring imports! </span></i>

public abstract class CommandManager {

   public Object process(Object commandState) {
      <i class="lineannotation"><span class="lineannotation">// grab a new instance of the appropriate <tt class="interfacename">Command</tt> interface</span></i>
      Command command = createCommand();
      <i class="lineannotation"><span class="lineannotation">// set the state on the (hopefully brand new) <tt class="interfacename">Command</tt> instance</span></i>
      command.setState(commandState);
      return command.execute();
   }

    <i class="lineannotation"><span class="lineannotation">// okay... but where is the implementation of this method?</span></i>
   protected abstract Command createCommand();
}</pre><p>&#22312;&#21253;&#21547;&#34987;&#27880;&#20837;&#26041;&#27861;&#30340;&#23458;&#25143;&#31867;&#20013;(&#27492;&#22788;&#26159;<tt class="classname">CommandManager</tt>)&#65292;&#27492;&#26041;&#27861;&#30340;&#23450;&#20041;&#24517;&#39035;&#25353;&#20197;&#19979;&#24418;&#24335;&#36827;&#34892;&#65306;</p><pre class="programlisting">&lt;public|protected&gt; [abstract] &lt;return-type&gt; theMethodName(<i class="lineannotation"><span class="lineannotation">no-arguments</span></i>);</pre><p>&#22914;&#26524;&#26041;&#27861;&#26159;<tt class="literal">&#25277;&#35937;</tt>&#30340;&#65292;&#21160;&#24577;&#29983;&#25104;&#30340;&#23376;&#31867;&#20250;&#23454;&#29616;&#35813;&#26041;&#27861;&#12290;&#21542;&#21017;&#65292;&#21160;&#24577;&#29983;&#25104;&#30340;&#23376;&#31867;&#20250;&#35206;&#30422;&#31867;&#37324;&#30340;&#20855;&#20307;&#26041;&#27861;&#12290;&#35753;&#25105;&#20204;&#26469;&#30475;&#20010;&#20363;&#23376;&#65306;</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">&lt;!-- a stateful bean deployed as a prototype (non-singleton) --&gt;</span></i>
&lt;bean id="command" class="fiona.apple.AsyncCommand" scope="prototype"&gt;
  <i class="lineannotation"><span class="lineannotation">&lt;!-- inject dependencies here as required --&gt;</span></i>
&lt;/bean&gt;

<i class="lineannotation"><span class="lineannotation">&lt;!-- <tt class="literal">commandProcessor</tt> uses <tt class="literal">statefulCommandHelper</tt> --&gt;</span></i>
&lt;bean id="commandManager" class="fiona.apple.CommandManager"&gt;
  &lt;lookup-method name="createCommand" bean="command"/&gt;
&lt;/bean&gt;</pre><p>&#22312;&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#26631;&#35782;&#20026;<span class="emphasis"><em>commandManager</em></span>&#30340;bean&#22312;&#38656;&#35201;&#19968;&#20010;&#26032;&#30340;<span class="emphasis"><em>command</em></span> bean&#23454;&#20363;&#26102;&#65292;&#20250;&#35843;&#29992;<tt class="literal">createCommand</tt>&#26041;&#27861;&#12290;&#37325;&#35201;&#30340;&#19968;&#28857;&#26159;&#65292;&#24517;&#39035;&#23558;<tt class="literal">command</tt>&#37096;&#32626;&#20026;prototype&#12290;&#24403;&#28982;&#20063;&#21487;&#20197;&#25351;&#23450;&#20026;<a href="#beans-factory-scopes-singleton" title="3.4.1.&nbsp;Singleton&#20316;&#29992;&#22495;">singleton</a>&#65292;&#22914;&#26524;&#26159;&#36825;&#26679;&#30340;&#35805;&#65292;&#37027;&#20040;&#27599;&#27425;&#23558;&#36820;&#22238;&#30456;&#21516;&#30340;<tt class="literal">command</tt> bean&#23454;&#20363;&#65281;</p><p>&#35831;&#27880;&#24847;&#65292;&#20026;&#20102;&#35753;&#36825;&#20010;&#21160;&#24577;&#23376;&#31867;&#24471;&#20197;&#27491;&#24120;&#24037;&#20316;&#65292;&#38656;&#35201;&#25226;CGLIB&#30340;jar&#25991;&#20214;&#25918;&#22312;classpath&#37324;&#12290;&#21478;&#22806;&#65292;Spring&#23481;&#22120;&#35201;&#23376;&#31867;&#21270;&#30340;&#31867;&#19981;&#33021;&#26159;<tt class="literal">final</tt>&#30340;&#65292;&#35201;&#35206;&#30422;&#30340;&#26041;&#27861;&#20063;&#19981;&#33021;&#26159;<tt class="literal">final</tt>&#30340;&#12290;&#21516;&#26679;&#30340;&#65292;&#35201;&#27979;&#35797;&#19968;&#20010;&#21253;&#21547;<tt class="literal">&#25277;&#35937;</tt>&#26041;&#27861;&#30340;&#31867;&#20063;&#31245;&#24494;&#26377;&#20123;&#19981;&#21516;&#65292;&#20320;&#38656;&#35201;&#33258;&#24049;&#32534;&#20889;&#23427;&#30340;&#23376;&#31867;&#25552;&#20379;&#35813;<tt class="literal">&#25277;&#35937;</tt>&#26041;&#27861;&#30340;&#26729;&#23454;&#29616;&#12290;&#26368;&#21518;&#65292;&#20316;&#20026;&#26041;&#27861;&#27880;&#20837;&#30446;&#26631;&#30340;bean&#19981;&#33021;&#26159;&#24207;&#21015;&#21270;&#30340;(serialized)&#12290;</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Tip" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Tip]" src="tip.png"></td><th align="left">Tip</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#26377;&#20852;&#36259;&#30340;&#35835;&#32773;&#20063;&#35768;&#24050;&#32463;&#21457;&#29616;<tt class="classname">ServiceLocatorFactoryBean</tt>(&#22312;<tt class="literal">org.springframework.beans.factory.config</tt>&#21253;&#37324;)&#30340;&#29992;&#27861;&#21644;<tt class="classname">ObjectFactoryCreatingFactoryBean</tt>&#30340;&#26377;&#20123;&#30456;&#20284;&#65292;&#19981;&#21516;&#30340;&#26159;&#23427;&#20801;&#35768;&#20320;&#25351;&#23450;&#33258;&#24049;&#30340;lookup&#25509;&#21475;&#65292;&#19981;&#19968;&#23450;&#38750;&#35201;&#29992;Spring&#30340;lookup&#25509;&#21475;&#65292;&#27604;&#22914;<tt class="interfacename">ObjectFactory</tt>&#12290;&#35201;&#35814;&#32454;&#20102;&#35299;&#36825;&#31181;&#26041;&#27861;&#35831;&#21442;&#32771;<tt class="classname">ServiceLocatorFactoryBean</tt>&#30340;Javadocs(&#23427;<span class="emphasis"><em>&#30340;&#30830;</em></span>&#20943;&#23569;&#20102;&#23545;Spring&#30340;&#32806;&#21512;)&#12290;</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-arbitrary-method-replacement"></a>3.3.7.2.&nbsp;&#33258;&#23450;&#20041;&#26041;&#27861;&#30340;&#26367;&#20195;&#26041;&#26696;</h4></div></div><div></div></div><p>&#27604;&#36215;Lookup &#26041;&#27861;&#27880;&#20837;&#26469;&#65292;&#36824;&#26377;&#19968;&#31181;&#24456;&#23569;&#29992;&#21040;&#30340;&#26041;&#27861;&#27880;&#20837;&#24418;&#24335;&#65292;&#35813;&#27880;&#20837;&#33021;&#20351;&#29992;bean&#30340;&#21478;&#19968;&#20010;&#26041;&#27861;&#23454;&#29616;&#21435;&#26367;&#25442;&#33258;&#23450;&#20041;&#30340;&#26041;&#27861;&#12290;&#38500;&#38750;&#20320;&#30495;&#30340;&#38656;&#35201;&#35813;&#21151;&#33021;&#65292;&#21542;&#21017;&#21487;&#20197;&#30053;&#36807;&#26412;&#33410;&#12290;</p><p>&#24403;&#20351;&#29992;&#22522;&#20110;XML&#37197;&#32622;&#20803;&#25968;&#25454;&#25991;&#20214;&#26102;&#65292;&#21487;&#20197;&#22312;bean&#23450;&#20041;&#20013;&#20351;&#29992;<tt class="literal">replaced-method</tt>&#20803;&#32032;&#26469;&#36798;&#21040;&#29992;&#21478;&#19968;&#20010;&#26041;&#27861;&#26469;&#21462;&#20195;&#24050;&#26377;&#26041;&#27861;&#30340;&#30446;&#30340;&#12290;&#32771;&#34385;&#19979;&#38754;&#30340;&#31867;&#65292;&#25105;&#20204;&#23558;&#35206;&#30422;computeValue&#26041;&#27861;&#65306;</p><pre class="programlisting">public class MyValueCalculator {

  public String computeValue(String input) {
    <i class="lineannotation"><span class="lineannotation">// some real code...</span></i>
  }

  <i class="lineannotation"><span class="lineannotation">// some other methods...</span></i>

}</pre><p>&#23454;&#29616;<tt class="interfacename">org.springframework.beans.factory.support.MethodReplacer</tt>&#25509;&#21475;&#30340;&#31867;&#25552;&#20379;&#20102;&#26032;&#30340;&#26041;&#27861;&#23450;&#20041;&#12290;</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">/** meant to be used to override the existing <tt class="methodname">computeValue(String)</tt>
    implementation in <tt class="classname">MyValueCalculator</tt>
  */</span></i>
public class ReplacementComputeValue implements MethodReplacer {

    public Object reimplement(Object o, Method m, Object[] args) throws Throwable {
        <i class="lineannotation"><span class="lineannotation">// get the input value, work with it, and return a computed result</span></i>
        String input = (String) args[0];
        ... 
        return ...;
    }
}</pre><p>&#19979;&#38754;&#30340;bean&#23450;&#20041;&#20013;&#25351;&#23450;&#20102;&#35201;&#37197;&#32622;&#30340;&#21407;&#22987;&#31867;&#21644;&#23558;&#35201;&#35206;&#20889;&#30340;&#26041;&#27861;&#65306;</p><pre class="programlisting">&lt;bean id="myValueCalculator class="x.y.z.MyValueCalculator"&gt;
  <i class="lineannotation"><span class="lineannotation">&lt;!-- arbitrary method replacement --&gt;</span></i>
  &lt;replaced-method name="computeValue" replacer="replacementComputeValue"&gt;
    &lt;arg-type&gt;String&lt;/arg-type&gt;
  &lt;/replaced-method&gt;
&lt;/bean&gt;

&lt;bean id="replacementComputeValue" class="a.b.c.ReplacementComputeValue"/&gt;</pre><p>&#22312;<tt class="literal">&lt;replaced-method/&gt;</tt>&#20803;&#32032;&#20869;&#21487;&#21253;&#21547;&#19968;&#20010;&#25110;&#22810;&#20010;<tt class="literal">&lt;arg-type/&gt;</tt>&#20803;&#32032;&#65292;&#36825;&#20123;&#20803;&#32032;&#29992;&#26469;&#26631;&#26126;&#34987;&#35206;&#20889;&#30340;&#26041;&#27861;&#31614;&#21517;&#12290;&#21482;&#26377;&#34987;&#35206;&#20889;&#65288;override&#65289;&#30340;&#26041;&#27861;&#23384;&#22312;&#37325;&#36733;&#65288;overload&#65289;&#30340;&#24773;&#20917;&#65288;&#21516;&#21517;&#30340;&#22810;&#20010;&#26041;&#27861;&#21464;&#20307;&#65289;&#25165;&#20250;&#20351;&#29992;&#26041;&#27861;&#31614;&#21517;&#12290;&#20026;&#20102;&#26041;&#20415;&#65292;&#21442;&#25968;&#30340;&#31867;&#22411;&#23383;&#31526;&#20018;&#21487;&#20197;&#37319;&#29992;&#20840;&#38480;&#23450;&#31867;&#21517;&#30340;&#31616;&#20889;&#12290;&#20363;&#22914;&#65292;&#19979;&#38754;&#30340;&#23383;&#31526;&#20018;&#37117;&#34920;&#31034;&#21442;&#25968;&#31867;&#22411;&#20026;<tt class="classname">java.lang.String</tt>&#12290;</p><pre class="programlisting">    java.lang.String
    String
    Str</pre><p>&#21442;&#25968;&#30340;&#20010;&#25968;&#36890;&#24120;&#36275;&#22815;&#29992;&#26469;&#21306;&#21035;&#27599;&#20010;&#21487;&#33021;&#30340;&#36873;&#25321;&#65292;&#36825;&#20010;&#25463;&#24452;&#33021;&#20943;&#23569;&#24456;&#22810;&#38190;&#30424;&#36755;&#20837;&#30340;&#24037;&#20316;&#65292;&#23427;&#20801;&#35768;&#20320;&#21482;&#36755;&#20837;&#26368;&#30701;&#30340;&#21305;&#37197;&#21442;&#25968;&#31867;&#22411;&#30340;&#23383;&#31526;&#20018;&#12290;</p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="beans-factory-scopes"></a>3.4.&nbsp;Bean&#30340;&#20316;&#29992;&#22495;</h2></div></div><div></div></div><p>&#21019;&#24314;&#19968;&#20010;bean&#23450;&#20041;&#65292;&#20854;&#23454;&#36136;&#26159;&#29992;&#35813;bean&#23450;&#20041;&#23545;&#24212;&#30340;&#31867;&#26469;&#21019;&#24314;&#30495;&#27491;&#23454;&#20363;&#30340;<span class="emphasis"><em>&#8220;&#37197;&#26041;(recipe)&#8221;</em></span>&#12290;&#25226;bean&#23450;&#20041;&#30475;&#25104;&#19968;&#20010;&#37197;&#26041;&#24456;&#26377;&#24847;&#20041;&#65292;&#23427;&#19982;class&#24456;&#31867;&#20284;&#65292;&#21482;&#26681;&#25454;&#19968;&#24352;&#8220;&#22788;&#26041;&#8221;&#23601;&#21487;&#20197;&#21019;&#24314;&#22810;&#20010;&#23454;&#20363;&#12290;</p><p>&#20320;&#19981;&#20165;&#21487;&#20197;&#25511;&#21046;&#27880;&#20837;&#21040;&#23545;&#35937;&#20013;&#30340;&#21508;&#31181;&#20381;&#36182;&#21644;&#37197;&#32622;&#20540;&#65292;&#36824;&#21487;&#20197;&#25511;&#21046;&#35813;&#23545;&#35937;&#30340;&#20316;&#29992;&#22495;&#12290;&#36825;&#26679;&#20320;&#21487;&#20197;&#28789;&#27963;&#36873;&#25321;&#25152;&#24314;&#23545;&#35937;&#30340;&#20316;&#29992;&#22495;&#65292;&#32780;&#19981;&#24517;&#22312;Java Class&#32423;&#23450;&#20041;&#20316;&#29992;&#22495;&#12290;Spring Framework&#25903;&#25345;&#20116;&#31181;&#20316;&#29992;&#22495;&#65288;&#20854;&#20013;&#26377;&#19977;&#31181;&#21482;&#33021;&#29992;&#22312;&#22522;&#20110;web&#30340;Spring <tt class="interfacename">ApplicationContext</tt>&#65289;&#12290;
    </p><p>&#20869;&#32622;&#25903;&#25345;&#30340;&#20316;&#29992;&#22495;&#20998;&#21015;&#22914;&#19979;&#65306;</p><div class="table"><a name="beans-factory-scopes-tbl"></a><p class="title"><b>Table&nbsp;3.4.&nbsp;Bean&#20316;&#29992;&#22495;</b></p><table summary="Bean&#20316;&#29992;&#22495;" border="1"><colgroup><col><col></colgroup><thead><tr><th align="center">&#20316;&#29992;&#22495;</th><th align="center">&#25551;&#36848;</th></tr></thead><tbody><tr><td><p>
								<a href="#beans-factory-scopes-singleton" title="3.4.1.&nbsp;Singleton&#20316;&#29992;&#22495;">singleton</a>
							</p></td><td><p>&#22312;&#27599;&#20010;Spring IoC&#23481;&#22120;&#20013;&#19968;&#20010;bean&#23450;&#20041;&#23545;&#24212;&#19968;&#20010;&#23545;&#35937;&#23454;&#20363;&#12290;</p></td></tr><tr><td><p>
								<a href="#beans-factory-scopes-prototype" title="3.4.2.&nbsp;Prototype&#20316;&#29992;&#22495;">prototype</a>
							</p></td><td><p>&#19968;&#20010;bean&#23450;&#20041;&#23545;&#24212;&#22810;&#20010;&#23545;&#35937;&#23454;&#20363;&#12290;</p></td></tr><tr><td><p>
								<a href="#beans-factory-scopes-request" title="3.4.4.2.&nbsp;Request&#20316;&#29992;&#22495;">request</a>
							</p></td><td><p>&#22312;&#19968;&#27425;HTTP&#35831;&#27714;&#20013;&#65292;&#19968;&#20010;bean&#23450;&#20041;&#23545;&#24212;&#19968;&#20010;&#23454;&#20363;&#65307;&#21363;&#27599;&#27425;HTTP&#35831;&#27714;&#23558;&#20250;&#26377;&#21508;&#33258;&#30340;bean&#23454;&#20363;&#65292;
              	&#23427;&#20204;&#20381;&#25454;&#26576;&#20010;bean&#23450;&#20041;&#21019;&#24314;&#32780;&#25104;&#12290;&#35813;&#20316;&#29992;&#22495;&#20165;&#22312;&#22522;&#20110;web&#30340;Spring 
                <tt class="interfacename">ApplicationContext</tt>&#24773;&#24418;&#19979;&#26377;&#25928;&#12290;</p></td></tr><tr><td><p>
								<a href="#beans-factory-scopes-global-session" title="3.4.4.4.&nbsp;global session&#20316;&#29992;&#22495;">session</a>
							</p></td><td><p>&#22312;&#19968;&#20010;HTTP <tt class="interfacename">Session</tt>&#20013;&#65292;&#19968;&#20010;bean&#23450;&#20041;&#23545;&#24212;&#19968;&#20010;&#23454;&#20363;&#12290;&#35813;&#20316;&#29992;&#22495;&#20165;&#22312;&#22522;&#20110;web&#30340;Spring <tt class="interfacename">ApplicationContext</tt>&#24773;&#24418;&#19979;&#26377;&#25928;&#12290;</p></td></tr><tr><td><p>
								<a href="#beans-factory-scopes-global-session" title="3.4.4.4.&nbsp;global session&#20316;&#29992;&#22495;">global
                session</a>
							</p></td><td><p>&#22312;&#19968;&#20010;&#20840;&#23616;&#30340;HTTP <tt class="interfacename">Session</tt>&#20013;&#65292;&#19968;&#20010;bean&#23450;&#20041;&#23545;&#24212;&#19968;&#20010;&#23454;&#20363;&#12290;&#20856;&#22411;&#24773;&#20917;&#19979;&#65292;&#20165;&#22312;&#20351;&#29992;portlet context&#30340;&#26102;&#20505;&#26377;&#25928;&#12290;&#35813;&#20316;&#29992;&#22495;&#20165;&#22312;&#22522;&#20110;web&#30340;Spring <tt class="interfacename">ApplicationContext</tt>&#24773;&#24418;&#19979;&#26377;&#25928;&#12290;</p></td></tr></tbody></table></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-scopes-singleton"></a>3.4.1.&nbsp;Singleton&#20316;&#29992;&#22495;</h3></div></div><div></div></div><p>&#24403;&#19968;&#20010;bean&#30340;&#20316;&#29992;&#22495;&#20026;singleton, &#37027;&#20040;Spring IoC&#23481;&#22120;&#20013;&#21482;&#20250;&#23384;&#22312;&#19968;&#20010;<span class="emphasis"><em>&#20849;&#20139;</em></span>&#30340;bean&#23454;&#20363;&#65292;&#24182;&#19988;&#25152;&#26377;&#23545;bean&#30340;&#35831;&#27714;&#65292;&#21482;&#35201;id&#19982;&#35813;bean&#23450;&#20041;&#30456;&#21305;&#37197;&#65292;&#21017;&#21482;&#20250;&#36820;&#22238;bean&#30340;&#21516;&#19968;&#23454;&#20363;&#12290;</p><p>&#25442;&#35328;&#20043;&#65292;&#24403;&#25226;&#19968;&#20010;bean&#23450;&#20041;&#35774;&#32622;&#20026;singlton&#20316;&#29992;&#22495;&#26102;&#65292;Spring IoC&#23481;&#22120;&#21482;&#20250;&#21019;&#24314;&#35813;bean&#23450;&#20041;&#30340;<span class="emphasis"><em>&#21807;&#19968;</em></span>&#23454;&#20363;&#12290;&#36825;&#20010;&#21333;&#19968;&#23454;&#20363;&#20250;&#34987;&#23384;&#20648;&#21040;&#21333;&#20363;&#32531;&#23384;&#65288;singleton cache&#65289;&#20013;&#65292;&#24182;&#19988;<span class="emphasis"><em>&#25152;&#26377;&#38024;&#23545;&#35813;bean&#30340;&#21518;&#32493;&#35831;&#27714;&#21644;&#24341;&#29992;</em></span>&#37117;&#23558;&#36820;&#22238;&#34987;&#32531;&#23384;&#30340;&#23545;&#35937;&#23454;&#20363;&#12290;</p><p>
				</p><div class="mediaobject" align="center"><img src="singleton.png" align="middle"></div><p>
			</p><p>&#35831;&#27880;&#24847;Spring&#30340;singleton bean&#27010;&#24565;&#19982;&#8220;&#22235;&#20154;&#24110;&#8221;&#65288;GoF&#65289;&#27169;&#24335;&#19968;&#20070;&#20013;&#23450;&#20041;&#30340;Singleton&#27169;&#24335;&#26159;&#23436;&#20840;&#19981;&#21516;&#30340;&#12290;&#32463;&#20856;&#30340;GoF Singleton&#27169;&#24335;&#20013;&#25152;&#35859;&#30340;&#23545;&#35937;&#33539;&#22260;&#26159;&#25351;&#22312;<span class="emphasis"><em>&#27599;&#19968;&#20010;<tt class="classname">ClassLoader</tt>&#20013;</em></span>&#25351;&#23450;class&#21019;&#24314;&#30340;&#23454;&#20363;&#26377;<span class="emphasis"><em>&#19988;&#20165;&#26377;&#19968;&#20010;</em></span>&#12290;&#25226;Spring&#30340;singleton&#20316;&#29992;&#22495;&#25551;&#36848;&#25104;<span class="emphasis"><em>&#19968;&#20010;<tt class="interfacename">container</tt>&#23545;&#24212;&#19968;&#20010;bean</em></span>&#23454;&#20363;&#26368;&#20026;&#36148;&#20999;&#12290;&#20134;&#21363;&#65292;&#20551;&#22914;&#22312;&#21333;&#20010;Spring&#23481;&#22120;&#20869;&#23450;&#20041;&#20102;&#26576;&#20010;&#25351;&#23450;class&#30340;bean&#65292;&#37027;&#20040;Spring&#23481;&#22120;&#23558;&#20250;&#21019;&#24314;&#19968;&#20010;<span class="emphasis"><em>&#19988;&#20165;&#26377;&#19968;&#20010;</em></span>&#30001;&#35813;bean&#23450;&#20041;&#25351;&#23450;&#30340;&#31867;&#23454;&#20363;&#12290;<span class="emphasis"><em>Singleton&#20316;&#29992;&#22495;&#26159;Spring&#20013;&#30340;&#32570;&#30465;&#20316;&#29992;&#22495;</em></span>&#12290;&#35201;&#22312;XML&#20013;&#23558;bean&#23450;&#20041;&#25104;singleton&#65292;&#21487;&#20197;&#36825;&#26679;&#37197;&#32622;&#65306;
	  </p><pre class="programlisting">&lt;bean id="accountService" class="com.foo.DefaultAccountService"/&gt;

<i class="lineannotation"><span class="lineannotation">&lt;!-- the following is equivalent, though redundant (singleton scope is the default); using <tt class="literal">spring-beans-2.0.dtd</tt> --&gt;</span></i>
&lt;bean id="accountService" class="com.foo.DefaultAccountService" scope="singleton"/&gt;

<i class="lineannotation"><span class="lineannotation">&lt;!-- the following is equivalent and preserved for backward compatibility in <tt class="literal">spring-beans.dtd</tt> --&gt;</span></i>
&lt;bean id="accountService" class="com.foo.DefaultAccountService" singleton="true"/&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-scopes-prototype"></a>3.4.2.&nbsp;Prototype&#20316;&#29992;&#22495;</h3></div></div><div></div></div><p>Prototype&#20316;&#29992;&#22495;&#30340;bean&#20250;&#23548;&#33268;&#22312;&#27599;&#27425;&#23545;&#35813;bean&#35831;&#27714;&#65288;&#23558;&#20854;&#27880;&#20837;&#21040;&#21478;&#19968;&#20010;bean&#20013;&#65292;&#25110;&#32773;&#20197;&#31243;&#24207;&#30340;&#26041;&#24335;&#35843;&#29992;&#23481;&#22120;&#30340;<tt class="literal">getBean()</tt>&#26041;&#27861;&#65289;&#26102;&#37117;&#20250;<span class="emphasis"><em>&#21019;&#24314;&#19968;&#20010;&#26032;&#30340;bean&#23454;&#20363;</em></span>&#12290;&#26681;&#25454;&#32463;&#39564;&#65292;&#23545;&#26377;&#29366;&#24577;&#30340;bean&#24212;&#35813;&#20351;&#29992;prototype&#20316;&#29992;&#22495;&#65292;&#32780;&#23545;&#26080;&#29366;&#24577;&#30340;bean&#21017;&#24212;&#35813;&#20351;&#29992;singleton&#20316;&#29992;&#22495;&#12290;</p><p>&#19979;&#22270;&#28436;&#31034;&#20102;Spring&#30340;prototype&#20316;&#29992;&#22495;&#12290;<span class="emphasis"><em>&#35831;&#27880;&#24847;&#65292;&#36890;&#24120;&#24773;&#20917;&#19979;&#65292;DAO&#19981;&#20250;&#34987;&#37197;&#32622;&#25104;prototype&#65292;&#22240;&#20026;DAO&#36890;&#24120;&#19981;&#20250;&#25345;&#26377;&#20219;&#20309;&#20250;&#35805;&#29366;&#24577;&#65292;&#22240;&#27492;&#24212;&#35813;&#20351;&#29992;singleton&#20316;&#29992;&#22495;&#12290;</em></span>
			</p><p>
				</p><div class="mediaobject" align="center"><img src="prototype.png" align="middle"></div><p>
			</p><p>&#35201;&#22312;XML&#20013;&#23558;bean&#23450;&#20041;&#25104;prototype&#65292;&#21487;&#20197;&#36825;&#26679;&#37197;&#32622;&#65306;</p><pre class="programlisting">				<i class="lineannotation"><span class="lineannotation">&lt;!-- using <tt class="literal">spring-beans-2.0.dtd</tt> --&gt;</span></i>
&lt;bean id="accountService" class="com.foo.DefaultAccountService" scope="prototype"/&gt;

<i class="lineannotation"><span class="lineannotation">&lt;!-- the following is equivalent and preserved for backward compatibility in <tt class="literal">spring-beans.dtd</tt> --&gt;</span></i>
&lt;bean id="accountService" class="com.foo.DefaultAccountService" singleton="false"/&gt;</pre><p>
&#23545;&#20110;prototype&#20316;&#29992;&#22495;&#30340;bean&#65292;&#26377;&#19968;&#28857;&#38750;&#24120;&#37325;&#35201;&#65292;&#37027;&#23601;&#26159;Spring&#19981;&#33021;&#23545;&#19968;&#20010;prototype
bean&#30340;&#25972;&#20010;&#29983;&#21629;&#21608;&#26399;&#36127;&#36131;&#65306;&#23481;&#22120;&#22312;&#21021;&#22987;&#21270;&#12289;&#37197;&#32622;&#12289;&#35013;&#39280;&#25110;&#32773;&#26159;&#35013;&#37197;&#23436;&#19968;&#20010;prototype&#23454;&#20363;&#21518;&#65292;&#23558;&#23427;&#20132;&#32473;&#23458;&#25143;&#31471;&#65292;&#38543;&#21518;&#23601;&#23545;&#35813;prototype&#23454;&#20363;&#19981;
&#38395;&#19981;&#38382;&#20102;&#12290;&#19981;&#31649;&#20309;&#31181;&#20316;&#29992;&#22495;&#65292;&#23481;&#22120;&#37117;&#20250;&#35843;&#29992;&#25152;&#26377;&#23545;&#35937;&#30340;&#21021;&#22987;&#21270;&#29983;&#21629;&#21608;&#26399;&#22238;&#35843;&#26041;&#27861;&#12290;&#20294;&#23545;prototype&#32780;&#35328;&#65292;&#20219;&#20309;&#37197;&#32622;&#22909;&#30340;&#26512;&#26500;&#29983;&#21629;&#21608;&#26399;&#22238;&#35843;&#26041;&#27861;&#37117;&#23558;<span class="emphasis"><em>&#19981;&#20250;</em></span>&#34987;&#35843;&#29992;&#12290;&#28165;&#38500;prototype&#20316;&#29992;&#22495;&#30340;&#23545;&#35937;&#24182;&#37322;&#25918;&#20219;&#20309;prototype bean&#25152;&#25345;&#26377;&#30340;&#26114;&#36149;&#36164;&#28304;&#65292;&#37117;&#26159;&#23458;&#25143;&#31471;&#20195;&#30721;&#30340;&#32844;&#36131;&#12290;&#65288;&#35753;Spring&#23481;&#22120;&#37322;&#25918;&#34987;prototype&#20316;&#29992;&#22495;bean&#21344;&#29992;&#36164;&#28304;&#30340;&#19968;&#31181;&#21487;&#34892;&#26041;&#24335;&#26159;&#65292;&#36890;&#36807;&#20351;&#29992;<a href="#beans-factory-extension-bpp" title="3.7.1.&nbsp;&#29992;BeanPostProcessor&#23450;&#21046;bean">bean&#30340;&#21518;&#32622;&#22788;&#29702;&#22120;</a>&#65292;&#35813;&#22788;&#29702;&#22120;&#25345;&#26377;&#35201;&#34987;&#28165;&#38500;&#30340;bean&#30340;&#24341;&#29992;&#12290;&#65289;
      </p><p>&#35848;&#21450;prototype&#20316;&#29992;&#22495;&#30340;bean&#26102;&#65292;&#22312;&#26576;&#20123;&#26041;&#38754;&#20320;&#21487;&#20197;&#23558;Spring&#23481;&#22120;&#30340;&#35282;&#33394;&#30475;&#20316;&#26159;Java <tt class="literal">new</tt>&#25805;&#20316;&#30340;&#26367;&#20195;&#32773;&#12290;&#20219;&#20309;&#36831;&#20110;&#35813;&#26102;&#38388;&#28857;&#30340;&#29983;&#21629;&#21608;&#26399;&#20107;&#23452;&#37117;&#24471;&#20132;&#30001;&#23458;&#25143;&#31471;&#26469;&#22788;&#29702;&#12290;&#65288;&#22312;<a href="#beans-factory-lifecycle" title="3.5.1.&nbsp;&#29983;&#21629;&#21608;&#26399;&#22238;&#35843;">Section&nbsp;3.5.1, &#8220;&#29983;&#21629;&#21608;&#26399;&#22238;&#35843;&#8221;</a>&#19968;&#33410;&#20013;&#20250;&#36827;&#19968;&#27493;&#35762;&#36848;Spring&#23481;&#22120;&#20013;&#30340;bean&#29983;&#21629;&#21608;&#26399;&#12290;&#65289;
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-scopes-sing-prot-interaction"></a>3.4.3.&nbsp;Singleton beans&#21644;prototype-bean&#30340;&#20381;&#36182;</h3></div></div><div></div></div><p>&#24403;&#20351;&#29992;&#20381;&#36182;&#20110;prototype bean&#30340;singleton-scoped bean&#26102;&#65292;&#35831;&#27880;&#24847;<span class="emphasis"><em>&#20381;&#36182;&#26159;&#22312;&#23454;&#20363;&#21270;&#26102;&#22788;&#29702;&#30340;</em></span>&#12290;&#36825;&#20063;&#23601;&#26159;&#35828;&#65292;&#22914;&#26524;&#35201;&#25226;&#19968;&#20010;prototype-scoped bean&#27880;&#20837;&#21040;singleton-scoped bean&#65292;&#23454;&#38469;&#19978;&#21482;&#26159;&#23454;&#20363;&#21270;&#19968;&#20010;&#26032;&#30340;prototype bean&#27880;&#20837;&#21040; singleton bean...<span class="emphasis"><em>&#20294;&#36825;&#26159;&#20840;&#37096;</em></span>&#12290;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;singleton-scoped bean&#33719;&#24471;&#30340;prototype&#23454;&#20363;&#26159;&#21807;&#19968;&#30340;&#12290;</p><p>&#28982;
&#32780;&#65292;&#20320;&#21487;&#33021;&#38656;&#35201;&#22312;&#36816;&#34892;&#26399;&#35753;singleton-scoped bean&#27599;&#27425;&#37117;&#33719;&#24471;prototype-scoped
bean&#30340;&#26032;&#23454;&#20363;&#12290;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#21482;&#23558;prototype-scoped bean&#27880;&#20837;&#21040;&#20320;&#30340;singleton
bean&#20013;&#26159;&#27809;&#26377;&#29992;&#30340;&#65292;&#22240;&#20026;&#27491;&#22914;&#19978;&#25991;&#25152;&#35828;&#30340;&#65292;&#20165;&#20165;&#22312;&#24403;Spring&#23481;&#22120;&#23454;&#20363;&#21270;singleton
bean&#24182;&#19988;&#22788;&#29702;&#27880;&#20837;&#30340;&#20381;&#36182;&#26102;&#65292;&#29983;&#25104;&#21807;&#19968;&#23454;&#20363;&#12290;&#22914;&#26524;&#20320;&#38656;&#35201;&#22312;&#36816;&#34892;&#26399;&#19968;&#27425;&#21448;&#19968;&#27425;&#30340;&#29983;&#25104;(prototype) bean&#30340;&#26032;&#23454;&#20363;&#65292;&#20320;&#21487;&#20197;&#21442;&#32771;<a href="#beans-factory-method-injection" title="3.3.7.&nbsp;&#26041;&#27861;&#27880;&#20837;">Section&nbsp;3.3.7, &#8220;&#26041;&#27861;&#27880;&#20837;&#8221;</a>
			</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note: &#21521;&#21518;&#20860;&#23481;&#24615;&#65306;&#22312;XML&#20013;&#25351;&#23450;&#29983;&#21629;&#21608;&#26399;&#20316;&#29992;&#22495;" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">&#21521;&#21518;&#20860;&#23481;&#24615;&#65306;&#22312;XML&#20013;&#25351;&#23450;&#29983;&#21629;&#21608;&#26399;&#20316;&#29992;&#22495;</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#22914;&#26524;&#20320;&#22312;bean&#23450;&#20041;&#25991;&#20214;&#20013;&#24341;&#29992;<tt class="filename">'spring-beans.dtd'</tt> DTD&#65292;
      &#35201;&#26174;&#24335;&#35828;&#26126;bean&#30340;&#29983;&#21629;&#21608;&#26399;&#20316;&#29992;&#22495;&#20320;&#24517;&#39035;&#20351;&#29992;"<tt class="literal">singleton</tt>"&#23646;&#24615;(&#35760;&#20303;<a href="#beans-factory-scopes-singleton" title="3.4.1.&nbsp;Singleton&#20316;&#29992;&#22495;">singleton&#29983;&#21629;&#21608;&#26399;&#20316;&#29992;&#22495;</a>&#26159;&#40664;&#35748;&#30340;)&#12290;
      &#22914;&#26524;&#24341;&#29992;&#30340;&#26159;<tt class="filename">'spring-beans-2.0.dtd'</tt> DTD&#25110;&#32773;&#26159;Spring 2.0 XSD schema&#65292;
      &#37027;&#20040;&#38656;&#35201;&#20351;&#29992;"<tt class="literal">scope</tt>"&#23646;&#24615;(&#22240;&#20026;"<tt class="literal">singleton</tt>"&#23646;&#24615;&#34987;&#21024;&#38500;&#20102;&#65292;
      &#26032;&#30340;DTD&#21644;XSD&#25991;&#20214;&#20351;&#29992;"<tt class="literal">scope</tt>"&#23646;&#24615;)</p><p>&#31616;&#21333;&#22320;&#35828;&#65292;&#22914;&#26524;&#20320;&#29992;"<tt class="literal">singleton</tt>"&#23646;&#24615;&#37027;&#20040;&#23601;<span class="emphasis"><em>&#24517;&#39035;<span class="emphasis"><em>&#22312;&#37027;&#20010;&#25991;&#20214;&#37324;</em></span>
				</em></span>&#24341;&#29992;<tt class="filename">'spring-beans.dtd'</tt> DTD&#12290;
       &#22914;&#26524;&#20320;&#29992;"<tt class="literal">scope</tt>"&#23646;&#24615;&#37027;&#20040;&#24517;&#39035; <span class="emphasis"><em>&#22312;&#37027;&#20010;&#25991;&#20214;&#37324;</em></span>&#24341;&#29992;<tt class="filename">'spring-beans-2.0.dtd'</tt> DTD &#25110;<tt class="filename">'spring-beans-2.0.xsd'</tt> XSD&#12290;</p></td></tr></tbody></table></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-scopes-other"></a>3.4.4.&nbsp;&#20854;&#20182;&#20316;&#29992;&#22495;</h3></div></div><div></div></div><p>&#20854;&#20182;&#20316;&#29992;&#22495;&#65292;&#21363;<tt class="literal">request</tt>&#12289;<tt class="literal">session</tt>&#20197;&#21450;<tt class="literal">global session</tt>
      &#20165;&#22312;&#22522;&#20110;web&#30340;&#24212;&#29992;&#20013;&#20351;&#29992;&#65288;&#19981;&#24517;&#20851;&#24515;&#20320;&#25152;&#37319;&#29992;&#30340;&#26159;&#20160;&#20040;web&#24212;&#29992;&#26694;&#26550;&#65289;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#19979;&#38754;&#20171;&#32461;&#30340;&#20316;&#29992;&#22495;<span class="emphasis"><em>&#20165;&#20165;</em></span>&#22312;&#20351;&#29992;&#22522;&#20110;web&#30340;Spring <tt class="interfacename">ApplicationContext</tt>&#23454;&#29616;&#65288;&#22914;<tt class="classname">XmlWebApplicationContext</tt>&#65289;&#26102;&#26377;&#29992;&#12290;
         &#22914;&#26524;&#22312;&#26222;&#36890;&#30340;Spring IoC&#23481;&#22120;&#20013;&#65292;&#27604;&#22914;&#20687;<tt class="classname">XmlBeanFactory</tt>&#25110;<tt class="classname">ClassPathXmlApplicationContext</tt>&#65292;
         &#23581;&#35797;&#20351;&#29992;&#36825;&#20123;&#20316;&#29992;&#22495;&#65292;&#20320;<span class="emphasis"><em>&#23558;&#20250;</em></span>&#24471;&#21040;&#19968;&#20010;<tt class="classname">IllegalStateException</tt>&#24322;&#24120;&#65288;&#26410;&#30693;&#30340;bean&#20316;&#29992;&#22495;&#65289;&#12290;
        </p></td></tr></tbody></table></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-scopes-other-web-configuration"></a>3.4.4.1.&nbsp;&#21021;&#22987;&#21270;web&#37197;&#32622;</h4></div></div><div></div></div><p>&#35201;&#20351;&#29992;<tt class="literal">request</tt>&#12289;<tt class="literal">session</tt>&#21644;
        <tt class="literal">global session</tt>&#20316;&#29992;&#22495;&#30340;bean&#65288;&#21363;&#20855;&#26377;web&#20316;&#29992;&#22495;&#30340;bean&#65289;&#65292;
         &#22312;&#24320;&#22987;&#35774;&#32622;bean&#23450;&#20041;&#20043;&#21069;&#65292;&#36824;&#35201;&#20570;&#23569;&#37327;&#30340;&#21021;&#22987;&#37197;&#32622;&#12290;&#35831;&#27880;&#24847;&#65292;&#20551;&#22914;&#20320;&#21482;&#24819;&#35201;&#8220;&#24120;&#35268;&#30340;&#8221;&#20316;&#29992;&#22495;&#65292;&#65288;singleton&#21644;prototype&#65289;&#65292;&#23601;<span class="emphasis"><em>&#19981;&#38656;&#35201;</em></span>&#36825;&#19968;&#39069;&#22806;&#30340;&#35774;&#32622;&#12290;
        </p><p>&#22312;&#30446;&#21069;&#30340;&#24773;&#20917;&#19979;&#65292;&#26681;&#25454;&#20320;&#30340;&#29305;&#23450;servlet&#29615;&#22659;&#65292;&#26377;&#22810;&#31181;&#26041;&#27861;&#26469;&#23436;&#25104;&#36825;&#19968;&#21021;&#22987;&#35774;&#32622;...</p><p>&#22914;&#26524;&#20320;&#29992;Spring Web MVC&#65292;&#21363;&#29992;Spring<tt class="classname">DispatcherServlet</tt>&#25110;<tt class="classname">DispatcherPortlet</tt>&#26469;&#22788;&#29702;&#35831;&#27714;&#65292;&#21017;&#19981;&#38656;&#35201;&#20570;&#29305;&#21035;&#30340;&#37197;&#32622;&#65306;<tt class="classname">DispatcherServlet</tt> &#21644;
        <tt class="classname">DispatcherPortlet</tt>&#24050;&#32463;&#22788;&#29702;&#20102;&#25152;&#26377;&#26377;&#20851;&#30340;&#29366;&#24577;</p><p>&#24403;&#20351;&#29992;&#20102;Spring's DispatcherServlet&#20197;&#22806;&#30340;Servlet 2.4&#21450;&#20197;&#19978;&#30340;Web&#23481;&#22120;&#26102;&#65288;&#22914;&#20351;&#29992;JSF&#25110;Struts&#65289;&#65292;&#20320;&#38656;&#35201;&#22312;Web&#24212;&#29992;&#30340;<tt class="literal">'web.xml'</tt>&#25991;&#20214;&#20013;&#22686;&#21152; <tt class="interfacename">javax.servlet.ServletRequestListener</tt> &#23450;&#20041;</p><pre class="programlisting">&lt;web-app&gt;
  ...
  &lt;listener&gt;
    &lt;listener-class&gt;org.springframework.web.context.request.RequestContextListener&lt;/listener-class&gt;
  &lt;/listener&gt;
  ...
&lt;/web-app&gt;</pre><p>&#22914;&#26524;&#20320;&#29992;&#30340;&#26159;&#26089;&#26399;&#29256;&#26412;&#30340;web&#23481;&#22120;&#65288;Servlet 2.4&#20197;&#21069;&#30340;&#29256;&#26412;&#65289;&#65292;&#37027;&#20040;&#20320;&#35201;&#20351;&#29992;&#19968;&#20010;<tt class="interfacename">javax.servlet.Filter</tt>&#30340;&#23454;&#29616;&#12290;&#35831;&#30475;&#19979;&#38754;&#30340;web.xml&#37197;&#32622;&#29255;&#27573;&#65306;</p><pre class="programlisting">&lt;web-app&gt;
  ..
  &lt;filter&gt; 
    &lt;filter-name&gt;requestContextFilter&lt;/filter-name&gt; 
    &lt;filter-class&gt;org.springframework.web.filter.RequestContextFilter&lt;/filter-class&gt;
  &lt;/filter&gt; 
  &lt;filter-mapping&gt; 
    &lt;filter-name&gt;requestContextFilter&lt;/filter-name&gt; 
    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
  &lt;/filter-mapping&gt;
  ...
&lt;/web-app&gt;</pre><p>
					<tt class="classname">RequestContextListener</tt>&#21644;<tt class="classname">RequestContextFilter</tt>&#20004;&#20010;&#31867;&#20570;&#30340;&#37117;&#26159;&#21516;&#26679;&#30340;&#24037;&#20316;&#65306;
        &#23558;HTTP request&#23545;&#35937;&#32465;&#23450;&#21040;&#20026;&#35813;&#35831;&#27714;&#25552;&#20379;&#26381;&#21153;&#30340;<tt class="classname">Thread</tt>&#12290;
        &#36825;&#20351;&#24471;&#20855;&#26377;request&#21644;session&#20316;&#29992;&#22495;&#30340;bean&#33021;&#22815;&#22312;&#21518;&#38754;&#30340;&#35843;&#29992;&#38142;&#20013;&#34987;&#35775;&#38382;&#21040;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-scopes-request"></a>3.4.4.2.&nbsp;Request&#20316;&#29992;&#22495;</h4></div></div><div></div></div><p>&#32771;&#34385;&#19979;&#38754;bean&#23450;&#20041;&#65306;</p><pre class="programlisting">&lt;bean id="loginAction" class="com.foo.LoginAction" scope="request"/&gt;</pre><p>&#38024;&#23545;&#27599;&#27425;HTTP&#35831;&#27714;&#65292;Spring&#23481;&#22120;&#20250;&#26681;&#25454;<tt class="literal">loginAction</tt> bean&#23450;&#20041;&#21019;&#24314;&#19968;&#20010;&#20840;&#26032;&#30340;<tt class="classname">LoginAction</tt> bean&#23454;&#20363;&#65292;
         &#19988;&#35813;<tt class="literal">loginAction</tt> bean&#23454;&#20363;&#20165;&#22312;&#24403;&#21069;HTTP request&#20869;&#26377;&#25928;&#65292;&#22240;&#27492;&#21487;&#20197;&#26681;&#25454;&#38656;&#35201;&#25918;&#24515;&#30340;&#26356;&#25913;&#25152;&#24314;&#23454;&#20363;&#30340;&#20869;&#37096;&#29366;&#24577;&#65292;
         &#32780;&#20854;&#20182;&#35831;&#27714;&#20013;&#26681;&#25454;<tt class="literal">loginAction</tt> bean&#23450;&#20041;&#21019;&#24314;&#30340;&#23454;&#20363;&#65292;&#23558;&#19981;&#20250;&#30475;&#21040;&#36825;&#20123;&#29305;&#23450;&#20110;&#26576;&#20010;&#35831;&#27714;&#30340;&#29366;&#24577;&#21464;&#21270;&#12290;
         &#24403;&#22788;&#29702;&#35831;&#27714;&#32467;&#26463;&#65292;request&#20316;&#29992;&#22495;&#30340;bean&#23454;&#20363;&#23558;&#34987;&#38144;&#27585;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-scopes-session"></a>3.4.4.3.&nbsp;Session&#20316;&#29992;&#22495;</h4></div></div><div></div></div><p>&#32771;&#34385;&#19979;&#38754;bean&#23450;&#20041;&#65306;</p><pre class="programlisting">&lt;bean id="userPreferences" class="com.foo.UserPreferences" scope="session"/&gt;</pre><p>&#38024;&#23545;&#26576;&#20010;HTTP <tt class="interfacename">Session</tt>&#65292;Spring&#23481;&#22120;&#20250;&#26681;&#25454;<tt class="literal">userPreferences</tt> bean&#23450;&#20041;&#21019;&#24314;&#19968;&#20010;&#20840;&#26032;&#30340;<tt class="classname">userPreferences</tt> bean&#23454;&#20363;&#65292;
        &#19988;&#35813;<tt class="literal">userPreferences</tt> bean&#20165;&#22312;&#24403;&#21069;HTTP <tt class="interfacename">Session</tt>&#20869;&#26377;&#25928;&#12290;
        &#19982;<tt class="literal">request&#20316;&#29992;&#22495;</tt>&#19968;&#26679;&#65292;&#20320;&#21487;&#20197;&#26681;&#25454;&#38656;&#35201;&#25918;&#24515;&#30340;&#26356;&#25913;&#25152;&#21019;&#24314;&#23454;&#20363;&#30340;&#20869;&#37096;&#29366;&#24577;&#65292;&#32780;&#21035;&#30340;HTTP <tt class="interfacename">Session</tt>&#20013;&#26681;&#25454;<tt class="literal">userPreferences</tt>&#21019;&#24314;&#30340;&#23454;&#20363;&#65292;
        &#23558;&#19981;&#20250;&#30475;&#21040;&#36825;&#20123;&#29305;&#23450;&#20110;&#26576;&#20010;HTTP <tt class="interfacename">Session</tt>&#30340;&#29366;&#24577;&#21464;&#21270;&#12290;
        &#24403;HTTP <tt class="interfacename">Session</tt>&#26368;&#32456;&#34987;&#24223;&#24323;&#30340;&#26102;&#20505;&#65292;&#22312;&#35813;HTTP <tt class="interfacename">Session</tt>&#20316;&#29992;&#22495;&#20869;&#30340;bean&#20063;&#20250;&#34987;&#24223;&#24323;&#25481;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-scopes-global-session"></a>3.4.4.4.&nbsp;global session&#20316;&#29992;&#22495;</h4></div></div><div></div></div><p>&#32771;&#34385;&#19979;&#38754;bean&#23450;&#20041;&#65306;</p><pre class="programlisting">&lt;bean id="userPreferences" class="com.foo.UserPreferences" scope="globalSession"/&gt;</pre><p>
					<tt class="literal">global session</tt>&#20316;&#29992;&#22495;&#31867;&#20284;&#20110;&#26631;&#20934;&#30340;HTTP <tt class="interfacename">Session</tt>&#20316;&#29992;&#22495;&#65292;&#19981;&#36807;&#23427;&#20165;&#20165;&#22312;&#22522;&#20110;portlet&#30340;web&#24212;&#29992;&#20013;&#25165;&#26377;&#24847;&#20041;&#12290;Portlet&#35268;&#33539;&#23450;&#20041;&#20102;&#20840;&#23616;<tt class="interfacename">Session</tt>&#30340;&#27010;&#24565;&#65292;&#23427;&#34987;&#25152;&#26377;&#26500;&#25104;&#26576;&#20010;portlet web&#24212;&#29992;&#30340;&#21508;&#31181;&#19981;&#21516;&#30340;portlet&#25152;&#20849;&#20139;&#12290;&#22312;<tt class="literal">global session</tt>&#20316;&#29992;&#22495;&#20013;&#23450;&#20041;&#30340;bean&#34987;&#38480;&#23450;&#20110;&#20840;&#23616;portlet <tt class="interfacename">Session</tt>&#30340;&#29983;&#21629;&#21608;&#26399;&#33539;&#22260;&#20869;&#12290;</p><p>&#35831;&#27880;&#24847;&#65292;&#20551;&#22914;&#20320;&#22312;&#32534;&#20889;&#19968;&#20010;&#26631;&#20934;&#30340;&#22522;&#20110;Servlet&#30340;web&#24212;&#29992;&#65292;&#24182;&#19988;&#23450;&#20041;&#20102;&#19968;&#20010;&#25110;&#22810;&#20010;&#20855;&#26377;<tt class="literal">global session</tt>&#20316;&#29992;&#22495;&#30340;bean&#65292;&#31995;&#32479;&#20250;&#20351;&#29992;&#26631;&#20934;&#30340;HTTP <tt class="interfacename">Session</tt>&#20316;&#29992;&#22495;&#65292;&#24182;&#19988;&#19981;&#20250;&#24341;&#36215;&#20219;&#20309;&#38169;&#35823;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-scopes-other-injection"></a>3.4.4.5.&nbsp;&#20316;&#29992;&#22495;bean&#19982;&#20381;&#36182;</h4></div></div><div></div></div><p>&#33021;&#22815;&#22312;HTTP request&#25110;&#32773;<tt class="interfacename">Session</tt>&#65288;&#29978;&#33267;<a href="#beans-factory-scopes-custom" title="3.4.5.&nbsp;&#33258;&#23450;&#20041;&#20316;&#29992;&#22495;">&#33258;&#23450;&#20041;</a>&#65289;
&#20316;&#29992;&#22495;&#20013;&#23450;&#20041;bean&#22266;&#28982;&#24456;&#22909;&#65292;&#20294;&#26159;Spring
IoC&#23481;&#22120;&#38500;&#20102;&#31649;&#29702;&#23545;&#35937;&#65288;bean&#65289;&#30340;&#23454;&#20363;&#21270;&#65292;&#21516;&#26102;&#36824;&#36127;&#36131;&#21327;&#20316;&#32773;&#65288;&#25110;&#32773;&#21483;&#20381;&#36182;&#65289;&#30340;&#23454;&#20363;&#21270;&#12290;&#22914;&#26524;&#20320;&#25171;&#31639;&#23558;&#19968;&#20010;Http
request&#33539;&#22260;&#30340;bean&#27880;&#20837;&#21040;&#21478;&#19968;&#20010;bean&#20013;&#65292;&#37027;&#20040;&#38656;&#35201;&#27880;&#20837;&#19968;&#20010;AOP&#20195;&#29702;&#26469;&#26367;&#20195;&#34987;&#27880;&#20837;&#30340;&#20316;&#29992;&#22495;bean&#12290;&#20063;&#23601;&#26159;&#35828;&#65292;&#20320;&#38656;&#35201;&#27880;&#20837;&#19968;&#20010;&#20195;&#29702;&#23545;&#35937;&#65292;&#35813;
&#23545;&#35937;&#20855;&#26377;&#19982;&#34987;&#20195;&#29702;&#23545;&#35937;&#19968;&#26679;&#30340;&#20844;&#20849;&#25509;&#21475;&#65292;&#32780;&#23481;&#22120;&#21017;&#21487;&#20197;&#36275;&#22815;&#26234;&#33021;&#30340;&#20174;&#30456;&#20851;&#20316;&#29992;&#22495;&#20013;&#65288;&#27604;&#22914;&#19968;&#20010;HTTP
request&#65289;&#33719;&#21462;&#21040;&#30495;&#23454;&#30340;&#30446;&#26631;&#23545;&#35937;&#65292;&#24182;&#25226;&#26041;&#27861;&#35843;&#29992;&#22996;&#27966;&#32473;&#23454;&#38469;&#30340;&#23545;&#35937;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>
						<tt class="literal">&lt;aop:scoped-proxy/&gt;</tt>
						<span class="emphasis"><em>&#19981;&#33021;</em></span>&#21644;&#20316;&#29992;&#22495;&#20026;<tt class="literal">singleton</tt>&#25110;<tt class="literal">prototype</tt>&#30340;bean&#19968;&#36215;&#20351;&#29992;&#12290;&#20026;singleton bean&#21019;&#24314;&#19968;&#20010;scoped proxy&#23558;&#25243;&#20986;<tt class="classname">BeanCreationException</tt>&#24322;&#24120;&#12290;</p></td></tr></tbody></table></div><p>&#35753;&#25105;&#20204;&#30475;&#19968;&#19979;&#23558;&#30456;&#20851;&#20316;&#29992;&#22495;bean&#20316;&#20026;&#20381;&#36182;&#30340;&#37197;&#32622;&#65292;&#37197;&#32622;&#24182;&#19981;&#22797;&#26434;&#65288;&#21482;&#26377;&#19968;&#34892;&#65289;&#65292;&#20294;&#26159;&#23545;&#29702;&#35299;&#8220;<span class="quote">&#20026;&#20309;&#36825;&#20040;&#20570;</span>&#8221;&#20197;&#21450;&#8220;<span class="quote">&#22914;&#20309;&#20570;</span>&#8221;&#26159;&#24456;&#37325;&#35201;&#30340;&#12290;</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd"&gt;

    <i class="lineannotation"><span class="lineannotation">&lt;!-- a HTTP <tt class="interfacename">Session</tt>-scoped bean exposed as a proxy --&gt;</span></i>
    &lt;bean id="userPreferences" class="com.foo.UserPreferences" <span class="bold"><b>scope="session"</b></span>&gt;
          
          <i class="lineannotation"><span class="lineannotation">&lt;!-- this next element effects the proxying of the surrounding bean --&gt;</span></i>
					<span class="bold"><b>&lt;aop:scoped-proxy/&gt;</b></span>
    &lt;/bean&gt;
    
    <i class="lineannotation"><span class="lineannotation">&lt;!-- a singleton-scoped bean <span class="bold"><b>injected with a proxy to the above bean</b></span> --&gt;</span></i>
    &lt;bean id="userService" class="com.foo.SimpleUserService"&gt;
    
        <i class="lineannotation"><span class="lineannotation">&lt;!-- a reference to the <span class="bold"><b>proxied</b></span>
						<tt class="literal">'userPreferences'</tt> bean --&gt;</span></i>
        &lt;property name="userPreferences" ref="userPreferences"/&gt;

    &lt;/bean&gt;
&lt;/beans&gt;
</pre><p>&#35201;&#21019;&#24314;&#36825;&#26679;&#30340;&#20195;&#29702;&#65292;&#21482;&#38656;&#35201;&#22312;Bean&#20316;&#29992;&#22495;&#23450;&#20041;&#20013;&#22686;&#21152;&#19968;&#20010;<tt class="literal">&lt;aop:scoped-proxy/&gt;</tt>&#23376;&#20803;&#32032;(&#20026;&#20102;&#35753;&#23481;&#22120;&#21487;&#20197;&#26377;&#25928;&#30340;&#20351;&#29992;&#22522;&#20110;&#31867;&#65288;&#32780;&#19981;&#26159;&#25509;&#21475;&#65289;&#30340;&#20195;&#29702;&#65292;&#20320;&#38656;&#35201;&#22312;classpath&#20013;&#21152;&#20837;CGLIB&#21253;&#65292;
        &#24182;&#19988;&#35201;&#20351;&#29992;<a href="#xsd-config" title="Appendix&nbsp;A.&nbsp;XML Schema-based configuration">Appendix&nbsp;A, <i>XML Schema-based configuration</i></a>&#37197;&#32622;&#26041;&#24335;)&#12290;&#20026;&#20160;&#20040;&#22312;<tt class="literal">request</tt>,<tt class="literal">session</tt>, <tt class="literal">globalSession</tt> &#21644; '<span class="emphasis"><em>&#33258;&#23450;&#20041;&#20316;&#29992;&#22495;</em></span>' &#38656;&#35201;<tt class="literal">&lt;aop:scoped-proxy/&gt;</tt>&#20803;&#32032;&#65311;&#22312;&#19979;&#38754;&#37197;&#32622;&#29255;&#27573;&#20013;&#21487;&#20197;&#25214;&#21040;&#35299;&#37322;(&#27880;&#24847;&#19979;&#38754; <tt class="literal">'userPreferences'</tt> Bean&#23450;&#20041;&#26159;<span class="emphasis"><em>&#19981;&#23436;&#25972;</em></span>&#30340;):</p><pre class="programlisting">&lt;bean id="userPreferences" class="com.foo.UserPreferences" scope="session"/&gt;

&lt;bean id="userManager" class="com.foo.UserManager"&gt;
    &lt;property name="userPreferences" ref="userPreferences"/&gt;
&lt;/bean&gt;</pre><p>&#20174;&#19978;&#36848;&#37197;&#32622;&#20013;&#21487;&#20197;&#24456;&#26126;&#26174;&#30340;&#30475;&#21040;singleton bean <tt class="literal">userManager</tt>&#34987;&#27880;&#20837;&#20102;&#19968;&#20010;&#25351;&#21521;HTTP <tt class="interfacename">Session</tt>&#20316;&#29992;&#22495;bean <tt class="literal">userPreferences</tt>&#30340;&#24341;&#29992;&#12290;singleton <tt class="literal">userManager</tt> bean&#20250;&#34987;&#23481;&#22120;&#20165;&#23454;&#20363;&#21270;<span class="emphasis"><em>&#19968;&#27425;</em></span>&#65292;&#24182;&#19988;&#20854;&#20381;&#36182;&#65288;&#21363;<tt class="literal">userPreferences</tt> bean&#65289;&#20063;&#20165;&#34987;&#27880;&#20837;&#19968;&#27425;&#12290;&#36825;&#24847;&#21619;&#30528;&#65292;<tt class="literal">userManager</tt>&#22312;&#29702;&#35770;&#19978;&#21482;&#20250;&#25805;&#20316;&#21516;&#19968;&#20010;<tt class="literal">userPreferences</tt>&#23545;&#35937;&#65292;&#21363;&#21407;&#20808;&#34987;&#27880;&#20837;&#30340;&#37027;&#20010;bean&#12290;&#32780;&#27880;&#20837;&#19968;&#20010;HTTP <tt class="interfacename">Session</tt>&#20316;&#29992;&#22495;&#30340;bean&#20316;&#20026;&#20381;&#36182;&#65292;&#26377;&#36829;&#25105;&#20204;&#30340;&#21021;&#34935;&#12290;&#22240;&#20026;&#25105;&#20204;<span class="emphasis"><em>&#24819;&#35201;</em></span>&#30340;&#21482;&#26159;&#19968;&#20010;<tt class="literal">userManager</tt>&#23545;&#35937;&#65292;&#22312;&#23427;&#36827;&#20837;&#19968;&#20010;HTTP <tt class="interfacename">Session</tt>&#29983;&#21629;&#21608;&#26399;&#26102;&#65292;&#25105;&#20204;&#24076;&#26395;&#21435;&#20351;&#29992;&#19968;&#20010;HTTP <tt class="interfacename">Session</tt>&#30340;<tt class="literal">userPreferences</tt>&#23545;&#35937;&#12290;</p><p>&#24403;&#27880;&#20837;&#26576;&#31181;&#31867;&#22411;&#23545;&#35937;&#26102;&#65292;&#35813;&#23545;&#35937;&#23454;&#29616;&#20102;&#21644;<tt class="classname">UserPreferences</tt>&#31867;&#19968;&#26679;&#30340;&#20844;&#20849;&#25509;&#21475;&#65288;&#21363;<tt class="classname">UserPreferences</tt>&#23454;&#20363;&#65289;&#12290;&#24182;&#19988;&#19981;&#35770;&#25105;&#20204;&#24213;&#23618;&#36873;&#25321;&#20102;&#20309;&#31181;&#20316;&#29992;&#22495;&#26426;&#21046;&#65288;HTTP request&#12289;<tt class="interfacename">Session</tt>&#31561;&#31561;&#65289;&#65292;&#23481;&#22120;&#37117;&#20250;&#36275;&#22815;&#26234;&#33021;&#30340;&#33719;&#21462;&#21040;<tt class="interfacename">&#30495;&#27491;&#30340;</tt>
					<tt class="classname">UserPreferences</tt>&#23545;&#35937;&#65292;&#22240;&#27492;&#25105;&#20204;&#38656;&#35201;&#23558;&#35813;&#23545;&#35937;&#30340;&#20195;&#29702;&#27880;&#20837;&#21040;<tt class="literal">userManager</tt> bean&#20013;, &#32780;<tt class="literal">userManager</tt> bean&#24182;&#19981;&#20250;&#24847;&#35782;&#21040;&#23427;&#25152;&#25345;&#26377;&#30340;&#26159;&#19968;&#20010;&#25351;&#21521;<tt class="classname">UserPreferences</tt>&#24341;&#29992;&#30340;&#20195;&#29702;&#12290;&#22312;&#26412;&#20363;&#20013;&#65292;&#24403;<tt class="interfacename">UserManager</tt>&#23454;&#20363;&#35843;&#29992;&#20102;&#19968;&#20010;&#20351;&#29992;<tt class="classname">UserPreferences</tt>&#23545;&#35937;&#30340;&#26041;&#27861;&#26102;&#65292;&#23454;&#38469;&#35843;&#29992;&#30340;&#26159;&#20195;&#29702;&#23545;&#35937;&#30340;&#26041;&#27861;&#12290;&#38543;&#21518;&#20195;&#29702;&#23545;&#35937;&#20250;&#20174;HTTP <tt class="interfacename">Session</tt>&#33719;&#21462;&#30495;&#27491;&#30340;<tt class="classname">UserPreferences</tt>&#23545;&#35937;&#65292;&#24182;&#23558;&#26041;&#27861;&#35843;&#29992;&#22996;&#27966;&#32473;&#33719;&#21462;&#21040;&#30340;&#23454;&#38469;&#30340;<tt class="classname">UserPreferences</tt>&#23545;&#35937;&#12290;</p><p>&#36825;&#23601;&#26159;&#24403;&#25226;<tt class="literal">request-</tt>,
        <tt class="literal">session-</tt>, &#21644;
        <tt class="literal">globalSession-scoped</tt> beans &#27880;&#20837;&#21040;&#21327;&#20316;&#23545;&#35937;&#20013;&#26102;&#65292;&#38656;&#35201;&#20197;&#19979;&#30340;&#27491;&#30830;&#32780;&#23436;&#25972;&#30340;&#37197;&#32622;&#65306;</p><pre class="programlisting">&lt;bean id="userPreferences" class="com.foo.UserPreferences" scope="session"&gt;
    <span class="bold"><b>
						<tt class="literal">&lt;aop:scoped-proxy/&gt;</tt>
					</b></span>
&lt;/bean&gt;

&lt;bean id="userManager" class="com.foo.UserManager"&gt;
    &lt;property name="userPreferences" ref="userPreferences"/&gt;
&lt;/bean&gt;</pre><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="beans-factory-scopes-other-injection-proxies"></a>3.4.4.5.1.&nbsp;&#36873;&#25321;&#21019;&#24314;&#20195;&#29702;&#30340;&#31867;&#22411;</h5></div></div><div></div></div><p>&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#24403;&#19968;&#20010;bean&#26377;<tt class="literal">&lt;aop:scoped-proxy/&gt;</tt>&#26631;&#35760;&#26102;&#65292;Spring&#23481;&#22120;&#23558;&#20026;&#23427;&#21019;&#24314;&#19968;&#20010;&#22522;&#20110;CGLIB&#30340;&#31867;&#20195;&#29702;&#65292;&#36825;&#24847;&#21619;&#30528;&#20320;&#38656;&#35201;
		  &#23558;CGLIB&#24211;&#28155;&#21152;&#21040;&#24212;&#29992;&#30340;classpath&#20013;&#12290;</p><p>
						<span class="emphasis"><em>&#27880;&#24847;&#65306;CGLIB&#20195;&#29702;&#20165;&#20165;&#25318;&#25130;public&#26041;&#27861;&#30340;&#35843;&#29992;&#65281;</em></span>&#23545;&#20110;&#38750;public&#30340;&#26041;&#27861;&#35843;&#29992;&#65292;&#19981;&#20250;&#23545;&#30446;&#26631;&#23545;&#35937;&#20135;&#29983;&#22996;&#25176;&#12290;</p><p>&#20320;&#21487;&#20197;&#23558;<tt class="literal">&lt;aop:scoped-proxy/&gt;</tt>&#30340;&#23646;&#24615;'<tt class="literal">proxy-target-class</tt>'&#35774;&#32622;&#20026;'<tt class="literal">false</tt>'&#26469;&#36873;&#25321;&#26631;&#20934;JDK&#25512;&#33616;&#30340;&#22522;&#20110;&#25509;&#21475;&#30340;&#20195;&#29702;&#65292;&#36825;&#26679;&#23601;&#19981;&#38656;&#35201;&#22312;&#24212;&#29992;&#30340;classpath&#20013;&#22686;&#21152;&#39069;&#22806;&#30340;&#24211;&#12290;&#20294;&#26159;&#65292;&#36825;&#23601;&#24847;&#21619;&#30528;&#31867;&#24517;&#39035;&#23454;&#29616;&#33267;&#23569;&#19968;&#20010;&#25509;&#21475;&#12290;&#24182;&#19988;<span class="emphasis"><em>&#25152;&#26377;&#30340;</em></span>&#21327;&#20316;&#32773;&#24517;&#39035;&#36890;&#36807;&#26576;&#19968;&#20010;
		  &#25509;&#21475;&#26469;&#24341;&#29992;bean&#12290;</p><pre class="programlisting">						<i class="lineannotation"><span class="lineannotation">&lt;!-- <tt class="classname">DefaultUserPreferences</tt> implements the <tt class="interfacename">UserPreferences</tt> interface --&gt;</span></i>
&lt;bean id="userPreferences" class="com.foo.DefaultUserPreferences" scope="session"&gt;
    &lt;aop:scoped-proxy <span class="bold"><b>proxy-target-class="false"<tt class="literal"></tt>
						</b></span>/&gt;
&lt;/bean&gt;

&lt;bean id="userManager" class="com.foo.UserManager"&gt;
    &lt;property name="userPreferences" ref="userPreferences"/&gt;
&lt;/bean&gt;</pre><p>&#39064;&#20026;<a href="#aop-proxying" title="6.6.&nbsp;&#20195;&#29702;&#26426;&#21046;">Section&nbsp;6.6, &#8220;&#20195;&#29702;&#26426;&#21046;&#8221;</a>&#30340;&#31456;&#33410;&#20063;&#21487;&#20197;&#26377;&#21161;&#20110;&#29702;&#35299;&#23545;&#36873;&#25321;&#22522;&#20110;&#31867;&#36824;&#26159;&#22522;&#20110;&#25509;&#21475;&#30340;&#20195;&#29702;&#30340;&#32454;&#24494;&#24046;&#21035;&#12290;</p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-scopes-custom"></a>3.4.5.&nbsp;&#33258;&#23450;&#20041;&#20316;&#29992;&#22495;</h3></div></div><div></div></div><p>&#22312;Spring 2.0&#20013;&#65292;Spring&#30340;bean&#20316;&#29992;&#22495;&#26426;&#21046;&#26159;&#21487;&#20197;&#25193;&#23637;&#30340;&#12290;&#36825;&#24847;&#21619;&#30528;&#65292;&#20320;&#19981;&#20165;&#21487;&#20197;&#20351;&#29992;Spring&#25552;&#20379;&#30340;&#39044;&#23450;&#20041;bean&#20316;&#29992;&#22495;&#65307;&#36824;&#21487;&#20197;&#23450;&#20041;&#33258;&#24049;&#30340;&#20316;&#29992;&#22495;&#65292;&#29978;&#33267;&#37325;&#26032;&#23450;&#20041;&#29616;&#26377;&#30340;&#20316;&#29992;&#22495;&#65288;&#19981;&#25552;&#20513;&#36825;&#20040;&#20570;&#65292;&#32780;&#19988;&#20320;<span class="emphasis"><em>&#19981;&#33021;</em></span>&#35206;&#30422;&#20869;&#32622;&#30340;<tt class="literal">singleton</tt>&#21644;<tt class="literal">prototype</tt>&#20316;&#29992;&#22495;&#65289;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-scopes-custom-creating"></a>3.4.5.1.&nbsp;&#21019;&#24314;&#33258;&#23450;&#20041;&#20316;&#29992;&#22495;</h4></div></div><div></div></div><p>&#20316;&#29992;&#22495;&#26159;&#30001;<tt class="interfacename">org.springframework.beans.factory.config.Scope</tt>&#25509;&#21475;&#23450;&#20041;&#30340;&#12290;&#35201;&#23558;&#20320;&#33258;&#24049;&#30340;&#33258;&#23450;&#20041;&#20316;&#29992;&#22495;&#38598;&#25104;&#21040;Spring&#23481;&#22120;&#20013;&#65292;&#38656;&#35201;&#23454;&#29616;&#35813;&#25509;&#21475;&#12290;&#20320;&#21487;&#33021;&#24819;&#21442;&#32771;Spring&#26694;&#26550;&#26412;&#36523;&#25552;&#20379;&#30340;<tt class="interfacename">Scope</tt>&#23454;&#29616;&#26469;&#20102;&#35299;&#22914;&#20309;&#21019;&#24314;&#33258;&#24049;&#30340;&#23454;&#29616;&#65292;<a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/beans/factory/config/Scope.html" target="_top">Scope Javadoc</a>&#23637;&#31034;&#20102;&#21019;&#24314;&#33258;&#23450;&#20041;&#20316;&#29992;&#22495;&#30340;&#23454;&#29616;&#30340;&#26356;&#22810;&#32454;&#33410;</p><p>
					<tt class="literal">Scope</tt>&#25509;&#21475;&#25552;&#20379;&#20102;&#22235;&#20010;&#26041;&#27861;&#26469;&#22788;&#29702;&#33719;&#21462;&#23545;&#35937;&#65292;&#31227;&#38500;&#23545;&#35937;&#21644;&#24517;&#35201;&#30340;&#26102;&#20505;'&#38144;&#27585;'&#23545;&#35937;&#12290;</p><p>&#31532;&#19968;&#20010;&#26041;&#27861;&#21487;&#20197;&#20174;&#20316;&#29992;&#22495;&#20013;&#33719;&#21462;&#23545;&#35937;&#12290;&#20363;&#22914;&#65292;Session&#20316;&#29992;&#22495;&#30340;&#23454;&#29616;&#20250;&#36820;&#22238;&#19968;&#20010;session-scoped bean(&#22914;&#26524;&#19981;&#23384;&#22312;&#65292;&#21017;&#36820;&#22238;&#19968;&#20010;&#32465;&#23450;&#20102;Session&#24341;&#29992;&#30340;&#26032;&#23454;&#20363;)&#12290;</p><pre class="programlisting">Object get(String name, ObjectFactory objectFactory)</pre><p>&#31532;&#20108;&#20010;&#26041;&#27861;&#21487;&#20197;&#20174;&#20316;&#29992;&#22495;&#20013;&#31227;&#38500;&#23545;&#35937;&#12290;&#20363;&#22914;&#65292;session&#20316;&#29992;&#22495;&#30340;&#23454;&#29616;&#21487;&#20197;&#20174;session&#20013;&#31227;&#38500;&#24182;&#36820;&#22238;session-scoped bean(&#22914;&#26524;&#27809;&#26377;&#25214;&#21040;&#30456;&#24212;&#21517;&#31216;&#30340;&#23545;&#35937;&#26114;&#65292;&#21017;&#21487;&#20197;&#36820;&#22238;null)&#12290;</p><pre class="programlisting">Object remove(String name)</pre><p>&#31532;&#19977;&#20010;&#26041;&#27861;&#26159;&#27880;&#20876;&#20316;&#29992;&#22495;&#26512;&#26500;&#30340;&#22238;&#35843;&#26041;&#27861;&#65292;&#24403;&#20316;&#29992;&#22495;&#38144;&#27585;&#25110;&#20316;&#29992;&#22495;&#20013;&#30340;&#26576;&#20010;&#23545;&#35937;&#38144;&#27585;&#26102;&#20505;&#20250;&#25191;&#34892;&#12290;&#35831;&#21442;&#32771;Javadoc&#25110;Spring Scope&#30340;&#23454;&#29616;&#33719;&#24471;&#26356;&#22810;&#26512;&#26500;&#22238;&#35843;&#30340;&#20449;&#24687;&#12290;</p><pre class="programlisting">void registerDestructionCallback(String name, Runnable destructionCallback)</pre><p>The last method deals with obtaining the conversation identifier
        for the underlying scope. This identifier is different for each scope.
        For a session for example, this can be the session identifier.</p><p>&#26368;&#21518;&#19968;&#20010;&#26041;&#27861;&#22788;&#29702;&#20316;&#29992;&#22495;&#30340;&#20250;&#35805;&#26631;&#35782;&#12290;&#23545;&#27599;&#19968;&#20010;&#20316;&#29992;&#22495;&#26469;&#35828;&#26631;&#35782;&#26159;&#19981;&#19968;&#26679;&#30340;&#12290;&#20363;&#22914;&#65292;&#23545;&#20110;session&#65292;&#23558;&#33719;&#24471;session&#26631;&#35782;</p><pre class="programlisting">String getConversationId()</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-scopes-custom-using"></a>3.4.5.2.&nbsp;&#20351;&#29992;&#33258;&#23450;&#20041;&#20316;&#29992;&#22495;</h4></div></div><div></div></div><p>&#22312;&#20320;&#32534;&#20889;&#21644;&#27979;&#35797;&#23436;&#19968;&#20010;&#25110;&#22810;&#20010;&#33258;&#23450;&#20041;<tt class="interfacename">Scope</tt>&#23454;&#29616;&#21518;&#65292;&#20320;&#38656;&#35201;&#35753;Spring&#23481;&#22120;&#35013;&#37197;&#20320;&#30340;&#20316;&#29992;&#22495;&#12290;&#25226;&#19968;&#20010;&#26032;&#30340;<tt class="interfacename">Scope</tt>
         &#27880;&#20876;&#21040;Spring &#23481;&#22120;&#20013;&#30340;&#26680;&#24515;&#26041;&#27861;&#23450;&#20041;&#22312;<tt class="interfacename">ConfigurableBeanFactory</tt>&#25509;&#21475;&#20013;&#65292;&#19979;&#38754;&#23601;&#26159;&#36825;&#20010;&#26041;&#27861;&#30340;&#31034;&#20363;&#65306;
        </p><pre class="programlisting">void registerScope(String scopeName, Scope scope);</pre><p>
					<tt class="methodname">registerScope(..)</tt> &#26041;&#27861;&#30340;&#31532;&#19968;&#20010;&#21442;&#25968;&#26159;&#19968;&#20010;&#20316;&#29992;&#22495;&#30340;&#21807;&#19968;&#21517;&#31216;&#65292;&#20363;&#22914;&#65292;Spring &#23481;&#22120;&#20013;&#30340;<tt class="literal">'singleton'</tt>&#21644;<tt class="literal">'prototype'</tt>&#12290;<tt class="methodname">registerScope(..)</tt> &#26041;&#27861;&#30340;&#31532;&#20108;&#20010;&#21442;&#25968;&#26159;&#20320;&#35201;&#27880;&#20876;&#21644;&#20351;&#29992;&#30340;&#33258;&#23450;&#20041;<tt class="interfacename">Scope</tt>&#30340;&#23454;&#20363;&#12290;</p><p>&#20551;&#22914;&#20320;&#23454;&#29616;&#20102;&#33258;&#23450;&#20041;&#30340;<tt class="interfacename">Scope</tt>&#65292;&#24182;&#20687;&#19979;&#38754;&#20363;&#23376;&#19968;&#26679;&#36827;&#34892;&#20102;&#27880;&#20876;&#65306;</p><pre class="programlisting">					<i class="lineannotation"><span class="lineannotation">// note: the <tt class="classname">ThreadScope</tt> class does <span class="bold"><b>not</b></span> ship with the Spring Framework</span></i>
Scope customScope = new ThreadScope();
beanFactory.registerScope("<span class="bold"><b>thread</b></span>", scope);</pre><p>&#20320;&#21487;&#20197;&#35937;&#19979;&#38754;&#19968;&#26679;&#26469;&#21019;&#24314;&#33258;&#23450;&#20041;&#20316;&#29992;&#22495;&#30340;&#35268;&#21017;&#65306;</p><pre class="programlisting">&lt;bean id="..." class="..." <span class="bold"><b>scope="thread"</b></span>/&gt;</pre><p>&#26377;&#20102;&#33258;&#23450;&#20041;&#20316;&#29992;&#22495;&#30340;&#23454;&#29616;&#65292;&#20320;&#23558;&#19981;&#20165;&#20165;&#21487;&#20197;&#20351;&#29992;&#20197;&#19978;&#30340;&#27880;&#20876;&#26041;&#24335;&#65292;&#36824;&#21487;&#20197;&#20351;&#29992;<tt class="classname">CustomScopeConfigurer</tt>&#31867;&#26469;&#36827;&#34892;&#22768;&#26126;&#24335;&#27880;&#20876;&#65292;</p><p>&#20197;&#19979;&#26159;&#20351;&#29992;<tt class="classname">CustomScopeConfigurer</tt>&#26469;&#36827;&#34892;&#22768;&#26126;&#24335;&#27880;&#20876;&#30340;&#33258;&#23450;&#20041;&#20316;&#29992;&#22495;&#30340;&#20363;&#23376;&#65306;</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd"&gt;

    &lt;bean class="org.springframework.beans.factory.config.CustomScopeConfigurer"&gt;
        &lt;property name="scopes"&gt;
            &lt;map&gt;<span class="bold"><b>
                &lt;entry key="thread"&gt;
                    &lt;bean class="com.foo.ThreadScope"/&gt;
                &lt;/entry&gt;</b></span>
            &lt;/map&gt;
        &lt;/property&gt;
    &lt;/bean&gt;

    &lt;bean id="bar" class="x.y.Bar" <span class="bold"><b>scope="thread"</b></span>&gt;
        &lt;property name="name" value="Rick"/&gt;
        &lt;aop:scoped-proxy/&gt;
    &lt;/bean&gt;

    &lt;bean id="foo" class="x.y.Foo"&gt;
        &lt;property name="bar" ref="bar"/&gt;
    &lt;/bean&gt;

&lt;/beans&gt;</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="beans-factory-nature"></a>3.5.&nbsp;&#23450;&#21046;bean&#29305;&#24615;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-lifecycle"></a>3.5.1.&nbsp;&#29983;&#21629;&#21608;&#26399;&#22238;&#35843;</h3></div></div><div></div></div><p>Spring&#25552;&#20379;&#20102;&#20960;&#20010;&#26631;&#24535;&#25509;&#21475;&#65288;marker interface&#65289;&#65292;&#36825;&#20123;&#25509;&#21475;&#29992;&#26469;&#25913;&#21464;&#23481;&#22120;&#20013;bean&#30340;&#34892;&#20026;&#65307;&#23427;&#20204;&#21253;&#25324;<tt class="literal">InitializingBean</tt>&#21644;<tt class="literal">DisposableBean</tt>&#12290;&#23454;&#29616;&#36825;&#20004;&#20010;&#25509;&#21475;&#30340;bean&#22312;&#21021;&#22987;&#21270;&#21644;&#26512;&#26500;&#26102;&#23481;&#22120;&#20250;&#35843;&#29992;&#21069;&#32773;&#30340;<tt class="methodname">afterPropertiesSet()</tt>&#26041;&#27861;&#65292;&#20197;&#21450;&#21518;&#32773;&#30340;<tt class="methodname">destroy()</tt>&#26041;&#27861;&#12290; </p><p>Spring&#22312;&#20869;&#37096;&#20351;&#29992;<tt class="literal">BeanPostProcessor</tt>&#23454;&#29616;&#26469;&#22788;&#29702;&#23427;&#33021;&#25214;&#21040;&#30340;&#20219;&#20309;&#26631;&#24535;&#25509;&#21475;&#24182;&#35843;&#29992;&#30456;&#24212;&#30340;&#26041;&#27861;&#12290;&#22914;&#26524;&#20320;&#38656;&#35201;&#33258;&#23450;&#20041;&#29305;&#24615;&#25110;&#32773;&#29983;&#21629;&#21608;&#26399;&#34892;&#20026;&#65292;&#20320;&#21487;&#20197;&#23454;&#29616;&#33258;&#24049;&#30340; <tt class="literal">BeanPostProcessor</tt>&#12290;&#20851;&#20110;&#36825;&#26041;&#38754;&#26356;&#22810;&#30340;&#20869;&#23481;&#21487;&#20197;&#30475;<a href="#beans-factory-extension" title="3.7.&nbsp;&#23481;&#22120;&#25193;&#23637;&#28857;">Section&nbsp;3.7, &#8220;&#23481;&#22120;&#25193;&#23637;&#28857;&#8221;</a>&#12290;</p><p>&#19979;&#38754;&#35762;&#36848;&#20102;&#20960;&#20010;&#29983;&#21629;&#21608;&#26399;&#26631;&#24535;&#25509;&#21475;&#12290;&#22312;&#38468;&#24405;&#20013;&#20250;&#25552;&#20379;&#30456;&#20851;&#30340;&#31034;&#24847;&#22270;&#26469;&#23637;&#31034;Spring&#22914;&#20309;&#31649;&#29702;bean&#65292;&#20197;&#21450;&#29983;&#21629;&#21608;&#26399;&#29305;&#24615;&#22914;&#20309;&#25913;&#21464;bean&#30340;&#20869;&#22312;&#29305;&#24615;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-lifecycle-initializingbean"></a>3.5.1.1.&nbsp;&#21021;&#22987;&#21270;&#22238;&#35843;</h4></div></div><div></div></div><p>&#23454;&#29616;<tt class="literal">org.springframework.beans.factory.InitializingBean</tt>&#25509;&#21475;&#20801;&#35768;&#23481;&#22120;&#22312;&#35774;&#32622;&#22909;bean&#30340;&#25152;&#26377;&#24517;&#35201;&#23646;&#24615;&#21518;&#65292;&#25191;&#34892;&#21021;&#22987;&#21270;&#20107;&#23452;&#12290;<tt class="interfacename">InitializingBean</tt>&#25509;&#21475;&#20165;&#25351;&#23450;&#20102;&#19968;&#20010;&#26041;&#27861;&#65306;</p><pre class="programlisting">void afterPropertiesSet() throws Exception;</pre><p>&#36890;&#24120;&#65292;&#35201;&#36991;&#20813;&#20351;&#29992;<tt class="interfacename">InitializingBean</tt>&#25509;&#21475;&#24182;&#19988;&#19981;&#40723;&#21169;&#20351;&#29992;&#35813;&#25509;&#21475;&#65292;&#22240;&#20026;&#36825;&#26679;&#20250;&#23558;&#20195;&#30721;&#21644;Spring&#32806;&#21512;&#36215;&#26469;&#65292;&#26377;&#19968;&#20010;&#21487;&#36873;&#30340;&#26041;&#26696;&#26159;&#65292;&#21487;&#20197;&#22312;Bean&#23450;&#20041;&#20013;&#25351;&#23450;&#19968;&#20010;&#26222;&#36890;&#30340;&#21021;&#22987;&#21270;&#26041;&#27861;&#65292;&#28982;&#21518;&#22312;XML&#37197;&#32622;&#25991;&#20214;&#20013;&#36890;&#36807;&#25351;&#23450;<tt class="literal">init-method</tt>&#23646;&#24615;&#26469;&#23436;&#25104;&#12290;&#22914;&#19979;&#38754;&#30340;&#23450;&#20041;&#25152;&#31034;&#65306;</p><pre class="programlisting">&lt;bean id="exampleInitBean" class="examples.ExampleBean" init-method="init"/&gt;</pre><pre class="programlisting">public class ExampleBean {
    
    public void init() {
        <i class="lineannotation"><span class="lineannotation">// do some initialization work</span></i>
    }
}</pre><p>...&#25928;&#26524;&#19982;&#19979;&#38754;&#23436;&#20840;&#19968;&#26679;...</p><pre class="programlisting">&lt;bean id="exampleInitBean" class="examples.AnotherExampleBean"/&gt;</pre><pre class="programlisting">public class AnotherExampleBean implements InitializingBean {
    
    public void afterPropertiesSet() {
        <i class="lineannotation"><span class="lineannotation">// do some initialization work</span></i>
    }
}</pre><p>... &#20294;&#26159;&#27809;&#26377;&#23558;&#20195;&#30721;&#19982;Spring&#32806;&#21512;&#22312;&#19968;&#36215;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-lifecycle-disposablebean"></a>3.5.1.2.&nbsp;&#26512;&#26500;&#22238;&#35843;</h4></div></div><div></div></div><p>&#23454;&#29616;<tt class="interfacename">org.springframework.beans.factory.DisposableBean</tt>&#25509;&#21475;&#30340;bean&#20801;&#35768;&#22312;&#23481;&#22120;&#38144;&#27585;&#35813;bean&#30340;&#26102;&#20505;&#33719;&#24471;&#19968;&#27425;&#22238;&#35843;&#12290;<tt class="interfacename">DisposableBean</tt>&#25509;&#21475;&#20063;&#21482;&#35268;&#23450;&#20102;&#19968;&#20010;&#26041;&#27861;&#65306;</p><pre class="programlisting">void destroy() throws Exception;</pre><p>&#36890;&#24120;&#65292;&#35201;&#36991;&#20813;&#20351;&#29992;<tt class="interfacename">DisposableBean</tt>&#26631;&#24535;&#25509;&#21475;&#32780;&#19988;&#19981;&#40723;&#21169;&#20351;&#29992;&#35813;&#25509;&#21475;&#65292;&#22240;&#20026;&#36825;&#26679;&#20250;&#23558;&#20195;&#30721;&#19982;Spring&#32806;&#21512;&#22312;&#19968;&#36215;&#65292;&#26377;&#19968;&#20010;&#21487;&#36873;&#30340;&#26041;&#26696;&#26159;&#65292;&#22312;bean&#23450;&#20041;&#20013;&#25351;&#23450;&#19968;&#20010;&#26222;&#36890;&#30340;&#26512;&#26500;&#26041;&#27861;&#65292;&#28982;&#21518;&#22312;XML&#37197;&#32622;&#25991;&#20214;&#20013;&#36890;&#36807;&#25351;&#23450;<tt class="literal">destroy-method</tt>&#23646;&#24615;&#26469;&#23436;&#25104;&#12290;&#22914;&#19979;&#38754;&#30340;&#23450;&#20041;&#25152;&#31034;&#65306;</p><pre class="programlisting">&lt;bean id="exampleInitBean" class="examples.ExampleBean" destroy-method="cleanup"/&gt;</pre><pre class="programlisting">public class ExampleBean {

    public void cleanup() {
        <i class="lineannotation"><span class="lineannotation">// do some destruction work (like releasing pooled connections)</span></i>
    }
}</pre><p>...&#25928;&#26524;&#19982;&#19979;&#38754;&#23436;&#20840;&#19968;&#26679;...</p><pre class="programlisting">&lt;bean id="exampleInitBean" class="examples.AnotherExampleBean"/&gt;</pre><pre class="programlisting">public class AnotherExampleBean implements DisposableBean {

    public void destroy() {
        <i class="lineannotation"><span class="lineannotation">// do some destruction work (like releasing pooled connections)</span></i>
    }
}</pre><p>... &#20294;&#26159;&#27809;&#26377;&#23558;&#20195;&#30721;&#19982;Spring&#32806;&#21512;&#22312;&#19968;&#36215;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-lifecycle-default-init-destroy-methods"></a>3.5.1.3.&nbsp;&#32570;&#30465;&#30340;&#21021;&#22987;&#21270;&#21644;&#26512;&#26500;&#26041;&#27861;</h4></div></div><div></div></div><p>&#22914;&#26524;&#26377;&#20154;&#27809;&#26377;&#37319;&#29992;Spring&#25152;&#25351;&#23450;&#30340;<tt class="interfacename">InitializingBean</tt>&#21644;<tt class="interfacename">DisposableBean</tt>&#22238;&#35843;&#25509;&#21475;&#26469;&#32534;&#20889;&#21021;&#22987;&#21270;&#21644;&#26512;&#26500;&#26041;&#27861;&#22238;&#35843;&#65292;&#20250;&#21457;&#29616;&#33258;&#24049;&#27491;&#22312;&#32534;&#20889;&#30340;&#26041;&#27861;&#65292;&#20854;&#21517;&#31216;&#33707;&#36807;&#20110;<tt class="literal">init()</tt>&#65292; <tt class="literal">initialize()</tt>&#65292;<tt class="literal">dispose()</tt>&#31561;&#31561;&#12290;&#36825;&#31181;&#29983;&#21629;&#21608;&#26399;&#22238;&#35843;&#26041;&#27861;&#30340;&#21517;&#31216;&#26368;&#22909;&#22312;&#19968;&#20010;&#39033;&#30446;&#33539;&#22260;&#20869;&#26631;&#20934;&#21270;&#65292;&#36825;&#26679;&#22242;&#38431;&#20013;&#30340;&#24320;&#21457;&#20154;&#21592;&#23601;&#21487;&#20197;&#20351;&#29992;&#21516;&#26679;&#30340;&#26041;&#27861;&#21517;&#31216;&#65292;&#24182;&#19988;&#30830;&#20445;&#20102;&#26576;&#31181;&#31243;&#24230;&#30340;&#19968;&#33268;&#24615;&#12290;</p><p>Spring&#23481;&#22120;&#36890;&#36807;&#37197;&#32622;&#21487;&#20197;&#23454;&#29616;&#23545;<span class="emphasis"><em>&#27599;&#20010;</em></span> bean&#21021;&#22987;&#21270;&#26102;&#30340;&#26597;&#25214;&#21644;&#38144;&#27585;&#26102;&#30340;&#22238;&#35843;&#35843;&#29992;&#12290;&#36825;&#20063;&#23601;&#26159;&#35828;&#65292;&#19968;&#20010;&#24212;&#29992;&#30340;&#24320;&#21457;&#32773;&#21487;&#20197;&#20511;&#21161;&#20110;&#21021;&#22987;&#21270;&#30340;&#22238;&#35843;&#26041;&#27861;<tt class="literal">init()</tt> &#36731;&#26494;&#30340;&#20889;&#19968;&#20010;&#31867;&#65288;&#19981;&#24517;&#24819;XML&#37197;&#32622;&#25991;&#20214;&#37027;&#26679;&#20026;&#27599;&#20010;bean&#37117;&#37197;&#32622;&#19968;&#20010;<tt class="literal">'init-method="init"'</tt>&#23646;&#24615;&#65289;&#12290;Spring IoC&#23481;&#22120;&#22312;&#21019;&#24314;bean&#30340;&#26102;&#20505;<span class="emphasis"><em>&#23558;</em></span>&#35843;&#29992;&#36825;&#20010;&#26041;&#27861; &#65288;&#36825;&#21644;&#20043;&#21069;&#25551;&#36848;&#30340;&#26631;&#20934;&#29983;&#21629;&#21608;&#26399;&#22238;&#35843;&#19968;&#33268;&#65289;&#12290;</p><p>		&#20026;&#20102;&#23436;&#20840;&#24324;&#28165;&#22914;&#20309;&#20351;&#29992;&#35813;&#29305;&#24615;&#65292;&#35753;&#25105;&#20204;&#30475;&#19968;&#20010;&#20363;&#23376;&#12290;&#20986;&#20110;&#31034;&#33539;&#30340;&#30446;&#30340;&#65292;&#20551;&#35774;&#19968;&#20010;&#39033;&#30446;&#30340;&#32534;&#30721;&#35268;&#33539;&#20013;&#32422;&#23450;&#25152;&#26377;&#30340;&#21021;&#22987;&#21270;&#22238;&#35843;&#26041;&#27861;&#37117;&#34987;&#21629;&#21517;&#20026;<tt class="literal">init()</tt>&#32780;&#26512;&#26500;&#22238;&#35843;&#26041;&#27861;&#34987;&#21629;&#21517;&#20026;<tt class="literal">destroy()</tt>&#12290;&#36981;&#24490;&#27492;&#35268;&#21017;&#20889;&#25104;&#30340;&#31867;&#22914;&#19979;&#25152;&#31034;&#65306;</p><pre class="programlisting">public class DefaultBlogService implements BlogService {

    private BlogDao blogDao;

    public void setBlogDao(BlogDao blogDao) {
        this.blogDao = blogDao;
    }

    <i class="lineannotation"><span class="lineannotation">// this is (unsurprisingly) the initialization callback method</span></i>
    public void init() {
        if (this.blogDao == null) {
            throw new IllegalStateException("The [blogDao] property must be set.");
        }
    }
}</pre><pre class="programlisting">&lt;beans <span class="bold"><b>default-init-method="init"</b></span>&gt;

    &lt;bean id="blogService" class="com.foo.DefaultBlogService"&gt;
        &lt;property name="blogDao" ref="blogDao" /&gt;
    &lt;/bean&gt;

&lt;/beans&gt;</pre><p>&#27880;&#24847;&#22312;&#39030;&#32423;&#30340;<tt class="literal">&lt;beans/&gt;</tt>&#20803;&#32032;&#20013;&#30340;<tt class="literal">'default-init-method'</tt>&#23646;&#24615;&#12290;&#36825;&#20010;&#23646;&#24615;&#30340;&#21547;&#20041;&#26159;Spring IoC&#23481;&#22120;&#22312;bean&#21019;&#24314;&#21644;&#35013;&#37197;&#30340;&#26102;&#20505;&#20250;&#23558;<tt class="literal">'init'</tt>&#26041;&#27861;&#20316;&#20026;&#23454;&#20363;&#21270;&#22238;&#35843;&#26041;&#27861;&#12290;&#22914;&#26524;&#31867;&#26377;&#36825;&#20010;&#26041;&#27861;&#65292;&#21017;&#20250;&#22312;&#36866;&#24403;&#30340;&#26102;&#20505;&#25191;&#34892;&#12290;</p><p>&#38144;&#27585;&#22238;&#35843;&#26041;&#27861;&#37197;&#32622;&#26159;&#30456;&#21516;&#30340; (XML&#37197;&#32622;)&#65292;&#22312;&#39030;&#32423;&#30340;<tt class="literal">&lt;beans/&gt;</tt>&#20803;&#32032;&#20013;&#20351;&#29992; <tt class="literal">'default-destroy-method'</tt> &#23646;&#24615;&#12290;</p><p>&#20351;&#29992;&#36825;&#20010;&#21151;&#33021;&#21487;&#20197;&#25226;&#20320;&#20174;&#20301;&#27599;&#20010;bean&#25351;&#23450;&#21021;&#22987;&#21270;&#21644;&#38144;&#27585;&#22238;&#35843;&#30340;&#32321;&#26434;&#24037;&#20316;&#20013;&#35299;&#25937;&#20986;&#26469;&#12290;&#20026;&#20102;&#19968;&#33268;&#24615;&#65292;&#24212;&#35813;&#24378;&#21046;&#24615;&#30340;&#20026;&#21021;&#22987;&#21270;&#21644;&#38144;&#27585;&#22238;&#35843;&#26041;&#27861;&#37319;&#29992;&#19968;&#33268;&#30340;&#21629;&#21517;&#35268;&#21017;&#12290;</p><p>&#24403;&#24050;&#32463;&#23384;&#22312;&#30340;&#31867;&#30340;&#21021;&#22987;&#21270;&#26041;&#27861;&#30340;&#21629;&#21517;&#35268;&#21017;&#19982;&#24815;&#20363;&#26377;&#24046;&#24322;&#30340;&#26102;&#20505;&#65292;&#20320;&#24212;&#35813;<span class="emphasis"><em>&#22987;&#32456;</em></span>&#20351;&#29992;<tt class="literal">&lt;bean/&gt;</tt>&#20803;&#32032;&#20013;&#30340;<tt class="literal">'init-method'</tt>&#21644;<tt class="literal">'destroy-method'</tt>&#23646;&#24615;(&#22312;XML&#37197;&#32622;&#20013;)&#26469;&#35206;&#30422;&#40664;&#35748;&#30340;&#26041;&#24335;&#12290;</p><p>&#26368;&#21518;&#65292;&#35831;&#27880;&#24847;Spring&#23481;&#22120;&#20445;&#35777;&#22312;bean&#30340;&#25152;&#26377;&#20381;&#36182;&#37117;&#28385;&#36275;&#21518;&#31435;&#21363;&#25191;&#34892;&#37197;&#32622;&#30340;&#21021;&#22987;&#21270;&#22238;&#35843;&#12290;&#36825;&#24847;&#21619;&#30528;&#21021;&#22987;&#21270;&#22238;&#35843;&#22312;&#21407;&#29983;bean&#19978;&#35843;&#29992;&#65292;&#36825;&#20063;&#24847;&#21619;&#30528;&#36825;&#20010;&#26102;&#20505;&#20219;&#20309;&#35832;&#22914;AOP&#25318;&#25130;&#22120;&#20043;&#31867;&#30340;&#23558;&#19981;&#33021;&#34987;&#24212;&#29992;&#12290;&#19968;&#20010;&#30446;&#26631;bean&#26159;<span class="emphasis"><em>&#39318;&#20808;</em></span>&#23436;&#20840;&#21019;&#24314;&#65292;<span class="emphasis"><em>&#28982;&#21518;</em></span>&#25165;
&#24212;&#29992;&#35832;&#22914;AOP&#20195;&#29702;&#31561;&#25318;&#25130;&#22120;&#38142;&#12290;&#27880;&#24847;&#65292;&#22914;&#26524;&#30446;&#26631;bean&#21644;&#20195;&#29702;&#26159;&#20998;&#24320;&#23450;&#20041;&#20102;&#65292;&#20320;&#30340;&#20195;&#30721;&#29978;&#33267;&#21487;&#20197;&#32469;&#24320;&#20195;&#29702;&#30452;&#25509;&#21644;&#21407;&#29983;bean&#36890;&#20449;&#12290;&#22240;&#27492;&#65292;&#22312;&#21021;&#22987;&#21270;&#26041;&#27861;&#19978;&#20351;&#29992;
&#25318;&#25130;&#22120;&#23558;&#20135;&#29983;&#26410;&#30693;&#30340;&#32467;&#26524;&#65292;&#22240;&#20026;&#36825;&#23558;&#30446;&#26631;bean&#21644;&#23427;&#30340;&#20195;&#29702;/&#25318;&#25130;&#22120;&#30340;&#29983;&#21629;&#21608;&#26399;&#32465;&#23450;&#24182;&#19988;&#30041;&#19979;&#20102;&#21644;&#21021;&#22987;bean&#30452;&#25509;&#36890;&#20449;&#36825;&#26679;&#22855;&#24618;&#30340;&#26041;&#24335;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-lifecycle-combined-effects"></a>3.5.1.4.&nbsp;&#32452;&#21512;&#29983;&#21629;&#21608;&#26399;&#26426;&#21046;</h4></div></div><div></div></div><p>As of Spring 2.5, there are three options for controlling bean
        lifecycle behavior: the <a href="#beans-factory-lifecycle-initializingbean" title="3.5.1.1.&nbsp;&#21021;&#22987;&#21270;&#22238;&#35843;">
						<tt class="interfacename">InitializingBean</tt>
					</a>
        and <a href="#beans-factory-lifecycle-disposablebean" title="3.5.1.2.&nbsp;&#26512;&#26500;&#22238;&#35843;">
						<tt class="interfacename">DisposableBean</tt>
					</a>
        callback interfaces; custom <tt class="literal">init()</tt> and
        <tt class="literal">destroy()</tt> methods; and the <a href="#beans-postconstruct-and-predestroy-annotations" title="3.11.5.&nbsp;@PostConstruct &#19982; @PreDestroy">
						<tt class="interfacename">@PostConstruct</tt>
        and <tt class="interfacename">@PreDestroy</tt>
        annotations</a>.</p><p>&#22312;Spring2.5&#20013;&#26377;&#19977;&#31181;&#26041;&#24335;&#21487;&#20197;&#25511;&#21046;bean&#30340;&#29983;&#21629;&#21608;&#26399;&#34892;&#20026;&#65306;<a href="#beans-factory-lifecycle-initializingbean" title="3.5.1.1.&nbsp;&#21021;&#22987;&#21270;&#22238;&#35843;">
						<tt class="interfacename">InitializingBean</tt>
					</a>
         &#21644;<a href="#beans-factory-lifecycle-disposablebean" title="3.5.1.2.&nbsp;&#26512;&#26500;&#22238;&#35843;">
						<tt class="interfacename">DisposableBean</tt>
					</a>
         &#22238;&#35843;&#25509;&#21475;;&#33258;&#23450;&#20041;<tt class="literal">init()</tt> &#21644;
        <tt class="literal">destroy()</tt> &#26041;&#27861;; <a href="#beans-postconstruct-and-predestroy-annotations" title="3.11.5.&nbsp;@PostConstruct &#19982; @PreDestroy">
						<tt class="interfacename">@PostConstruct</tt>
         &#21644;<tt class="interfacename">@PreDestroy</tt>
        annotations</a>.</p><p>&#24403;&#32452;&#21512;&#19981;&#21516;&#30340;&#29983;&#21629;&#21608;&#26399;&#26426;&#21046;&#26102; - &#20363;&#22914;&#65292;&#31867;&#23618;&#27425;&#20013;&#20351;&#29992;&#20102;&#19981;&#21516;&#30340;&#29983;&#21629;&#21608;&#26399;&#26426;&#21046; - &#24320;&#21457;&#32773;&#24517;&#39035;&#27880;&#24847;&#36825;&#20123;&#26426;&#21046;&#30340;&#24212;&#29992;&#39034;&#24207;&#65292;&#19979;&#38754;&#26159;&#21021;&#22987;&#21270;&#26041;&#27861;&#20013;&#30340;&#39034;&#24207;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>
							<tt class="interfacename">@PostConstruct</tt>&#20803;&#27880;&#37322;</p></li><li><p>
							<tt class="interfacename">InitializingBean</tt>&#30340;<tt class="literal">afterPropertiesSet()</tt>&#23450;&#20041;</p></li><li><p>&#33258;&#23450;&#20041;<tt class="literal">init()</tt>&#26041;&#27861;&#37197;&#32622;</p></li></ul></div><p>&#26512;&#26500;&#26041;&#27861;&#35843;&#29992;&#39034;&#24207;&#26159;&#30456;&#21516;&#30340;:</p><div class="itemizedlist"><ul type="disc"><li><p>
							<tt class="interfacename">@PreDestroy</tt>&#20803;&#27880;&#37322;</p></li><li><p>
							<tt class="interfacename">DisposableBean</tt>&#30340;<tt class="literal">destroy()</tt>&#23450;&#20041;</p></li><li><p>&#33258;&#23450;&#20041;<tt class="literal">destroy()</tt>&#26041;&#27861;</p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#22914;&#26524;bean&#23384;&#22312;&#22810;&#31181;&#30340;&#29983;&#21629;&#21608;&#26399;&#26426;&#21046;&#37197;&#32622;&#24182;&#19988;&#27599;&#31181;&#26426;&#21046;&#37117;&#37197;&#32622;&#20026;&#19981;&#21516;&#30340;&#26041;&#27861;&#21517;&#65292;
          	&#37027;&#25152;&#26377;&#37197;&#32622;&#30340;&#26041;&#27861;&#23558;&#20250;&#25353;&#29031;&#19978;&#38754;&#30340;&#39034;&#21033;&#25191;&#34892;&#12290;&#28982;&#32780;&#22914;&#26524;&#37197;&#32622;&#20102;&#30456;&#21516;&#30340;&#26041;&#27861;&#21517; - &#20363;&#22914;&#65292;
          <tt class="literal">init()</tt>&#21021;&#22987;&#21270;&#26041;&#27861; - &#37319;&#29992;&#22810;&#31181;&#26426;&#21046;&#37197;&#32622;&#21518;&#65292;&#21482;&#20250;&#25191;&#34892;&#19968;&#27425;&#12290;</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-shutdown"></a>3.5.1.5.&nbsp;&#22312;&#38750;web&#24212;&#29992;&#20013;&#20248;&#38597;&#22320;&#20851;&#38381;Spring IoC&#23481;&#22120;</h4></div></div><div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#22312;&#22522;&#20110;web&#30340;<tt class="interfacename">ApplicationContext</tt>&#23454;&#29616;&#20013;&#24050;&#26377;&#30456;&#24212;&#30340;&#20195;&#30721;&#26469;&#22788;&#29702;&#20851;&#38381;web&#24212;&#29992;&#26102;&#22914;&#20309;&#24688;&#24403;&#22320;&#20851;&#38381;Spring IoC&#23481;&#22120;&#12290;</p></td></tr></tbody></table></div><p>&#22914;
&#26524;&#20320;&#27491;&#22312;&#19968;&#20010;&#38750;web&#24212;&#29992;&#30340;&#29615;&#22659;&#19979;&#20351;&#29992;Spring&#30340;IoC&#23481;&#22120;&#65292;&#20363;&#22914;&#22312;&#26700;&#38754;&#23500;&#23458;&#25143;&#31471;&#29615;&#22659;&#19979;&#65292;&#20320;&#24819;&#35753;&#23481;&#22120;&#20248;&#38597;&#30340;&#20851;&#38381;&#65292;&#24182;&#35843;&#29992;singleton
bean&#19978;&#30340;&#30456;&#24212;&#26512;&#26500;&#22238;&#35843;&#26041;&#27861;&#65292;&#20320;&#38656;&#35201;&#22312;JVM&#37324;&#27880;&#20876;&#19968;&#20010;&#8220;&#20851;&#38381;&#38057;&#23376;&#8221;&#65288;shutdown
hook&#65289;&#12290;&#36825;&#19968;&#28857;&#38750;&#24120;&#23481;&#26131;&#20570;&#21040;&#65292;&#24182;&#19988;&#23558;&#20250;&#30830;&#20445;&#20320;&#30340;Spring
IoC&#23481;&#22120;&#34987;&#24688;&#24403;&#20851;&#38381;&#65292;&#20197;&#21450;&#25152;&#26377;&#30001;&#21333;&#20363;&#25345;&#26377;&#30340;&#36164;&#28304;&#37117;&#20250;&#34987;&#37322;&#25918;&#65288;&#24403;&#28982;&#65292;&#20026;&#20320;&#30340;&#21333;&#20363;&#37197;&#32622;&#38144;&#27585;&#22238;&#35843;&#65292;&#24182;&#27491;&#30830;&#23454;&#29616;&#38144;&#27585;&#22238;&#35843;&#26041;&#27861;&#65292;&#20381;&#28982;&#26159;&#20320;&#30340;&#24037;&#20316;&#65289;&#12290;</p><p>&#20026;&#20102;&#27880;&#20876;&#8220;&#20851;&#38381;&#38057;&#23376;&#8221;&#65292;&#20320;&#21482;&#38656;&#35201;&#31616;&#21333;&#22320;&#35843;&#29992;&#22312;<tt class="classname">AbstractApplicationContext</tt>&#23454;&#29616;&#20013;&#30340;<tt class="methodname">registerShutdownHook()</tt>&#26041;&#27861;&#21363;&#21487;&#12290;&#20063;&#23601;&#26159;&#65306;</p><pre class="programlisting">import org.springframework.context.support.AbstractApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public final class Boot {

    public static void main(final String[] args) throws Exception {
        AbstractApplicationContext ctx
            = new ClassPathXmlApplicationContext(new String []{"beans.xml"});

        <i class="lineannotation"><span class="lineannotation">// add a shutdown hook for the above context... </span></i>
        ctx.registerShutdownHook();

        <i class="lineannotation"><span class="lineannotation">// app runs here...</span></i>
					<i class="lineannotation"><span class="lineannotation">// main method exits, hook is called prior to the app shutting down...</span></i>
    }
}</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-aware"></a>3.5.2.&nbsp;&#20102;&#35299;&#33258;&#24049;</h3></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-aware-beanfactoryaware"></a>3.5.2.1.&nbsp;
					<tt class="interfacename">BeanFactoryAware</tt>
				</h4></div></div><div></div></div><p>&#23545;&#20110;&#23454;&#29616;&#20102;<tt class="literal">org.springframework.beans.factory.BeanFactoryAware</tt>&#25509;&#21475;&#30340;&#31867;&#65292;&#24403;&#23427;&#34987;BeanFactory&#21019;&#24314;&#21518;&#65292;&#23427;&#20250;&#25317;&#26377;&#19968;&#20010;&#25351;&#21521;&#21019;&#24314;&#23427;&#30340;BeanFactory&#30340;&#24341;&#29992;&#12290;</p><pre class="programlisting">public interface BeanFactoryAware {

    void setBeanFactory(BeanFactory beanFactory) throws BeansException;
}</pre><p>&#36825;&#26679;bean&#21487;&#20197;&#20197;&#32534;&#31243;&#30340;&#26041;&#24335;&#25805;&#25511;&#21019;&#24314;&#23427;&#20204;&#30340;<tt class="interfacename">BeanFactory</tt>&#65292;
&#24403;&#28982;&#25105;&#20204;&#21487;&#20197;&#23558;&#24341;&#29992;&#30340;BeanFactory&#36896;&#22411;&#65288;cast&#65289;&#20026;&#24050;&#30693;&#30340;&#23376;&#31867;&#22411;&#26469;&#33719;&#24471;&#26356;&#22810;&#30340;&#21151;&#33021;&#12290;&#23427;&#20027;&#35201;&#29992;&#20110;&#36890;&#36807;&#32534;&#31243;&#26469;&#21462;&#24471;BeanFactory&#25152;&#31649;&#29702;&#30340;
&#20854;&#20182;bean&#12290;&#34429;&#28982;&#22312;&#26377;&#20123;&#22330;&#26223;&#19979;&#36825;&#20010;&#21151;&#33021;&#24456;&#26377;&#29992;&#65292;&#20294;&#26159;&#19968;&#33324;&#26469;&#35828;&#24212;&#35813;&#23613;&#37327;&#36991;&#20813;&#20351;&#29992;&#65292;&#22240;&#20026;&#36825;&#26679;&#23558;&#20351;&#20195;&#30721;&#19982;Spring&#32806;&#21512;&#22312;&#19968;&#36215;&#65292;&#32780;&#19988;&#20063;&#26377;&#36829;&#21453;&#36716;&#25511;&#21046;&#30340;&#21407;&#21017;
&#65288;&#21327;&#20316;&#32773;&#24212;&#35813;&#20316;&#20026;&#23646;&#24615;&#25552;&#20379;&#32473;bean&#65289;&#12290;</p><p>&#19982;<tt class="interfacename">BeanFactoryAware</tt>&#31561;&#25928;&#30340;&#21478;&#19968;&#31181;&#36873;&#25321;&#26159;&#20351;&#29992;<tt class="classname">org.springframework.beans.factory.config.ObjectFactoryCreatingFactoryBean</tt>&#12290;&#19981;&#36807;&#35813;&#26041;&#27861;&#20381;&#28982;&#27809;&#26377;&#38477;&#20302;&#19982;Spring&#30340;&#32806;&#21512;&#65292;&#20294;&#26159;&#23427;&#24182;&#27809;&#26377;&#20687;<tt class="interfacename">BeanFactoryAware</tt>&#37027;&#26679;&#65292;&#36829;&#21453;IoC&#21407;&#21017;&#12290;&#65289;</p><p>
					<tt class="classname">ObjectFactoryCreatingFactoryBean</tt>&#26159;<a href="#beans-factory-extension-factorybean" title="3.7.3.&nbsp;&#20351;&#29992;FactoryBean&#23450;&#21046;&#23454;&#20363;&#21270;&#36923;&#36753;">
						<tt class="interfacename">FactoryBean</tt>
					</a>&#30340;&#19968;&#20010;&#23454;&#29616;&#65292;&#23427;&#36820;&#22238;&#19968;&#20010;&#25351;&#21521;&#24037;&#21378;&#23545;&#35937;&#30340;&#24341;&#29992;&#65292;&#35813;&#23545;&#35937;&#23558;&#25191;&#34892;bean&#30340;&#26597;&#25214;&#12290;<tt class="classname">ObjectFactoryCreatingFactoryBean</tt>&#31867;&#23454;&#29616;&#20102;<tt class="interfacename">BeanFactoryAware</tt>&#25509;&#21475;&#65307;&#34987;&#23454;&#38469;&#27880;&#20837;&#21040;&#23458;&#25143;&#31471;bean&#30340;&#26159;<tt class="interfacename">ObjectFactory</tt>&#25509;&#21475;&#30340;&#19968;&#20010;&#23454;&#20363;&#12290;&#36825;&#26159;Spring&#25552;&#20379;&#30340;&#19968;&#20010;&#25509;&#21475;&#65288;&#22240;&#32780;&#20381;&#26087;&#27809;&#26377;&#23436;&#20840;&#19982;Spring&#35299;&#32806;&#65289;&#65292;&#23458;&#25143;&#31471;&#21487;&#20197;&#20351;&#29992;<tt class="interfacename">ObjectFactory</tt>&#30340;<tt class="methodname">getObject()</tt>&#26041;&#27861;&#26469;&#26597;&#25214;bean&#65288;&#22312;&#20854;&#32972;&#21518;&#65292;<tt class="interfacename">ObjectFactory</tt>&#23454;&#20363;&#21482;&#26159;&#31616;&#21333;&#30340;&#23558;&#35843;&#29992;&#22996;&#27966;&#32473;<tt class="interfacename">BeanFactory</tt>&#65292;&#35753;&#20854;&#26681;&#25454;bean&#30340;&#21517;&#31216;&#25191;&#34892;&#23454;&#38469;&#30340;&#26597;&#25214;&#65289;&#12290;&#20320;&#35201;&#20570;&#30340;&#20840;&#37096;&#20107;&#24773;&#23601;&#26159;&#32473;<tt class="classname">ObjectFactoryCreatingFactoryBean</tt>&#25552;&#20379;&#24453;&#26597;&#25214;bean&#30340;&#21517;&#23383;&#12290;&#35753;&#25105;&#20204;&#30475;&#19968;&#20010;&#20363;&#23376;&#65306;</p><pre class="programlisting">package x.y;

public class NewsFeed {
    
    private String news;

    public void setNews(String news) {
        this.news = news;
    }

    public String getNews() {
        return this.toString() + ": '" + news + "'";
    }
}</pre><pre class="programlisting">package x.y;

import org.springframework.beans.factory.ObjectFactory;

public class NewsFeedManager {

    private ObjectFactory factory;

    public void setFactory(ObjectFactory factory) {
        this.factory = factory;
    }

    public void printNews() {
        // here is where the lookup is performed; note that there is no
        // need to hard code the name of the bean that is being looked up...
        NewsFeed news = (NewsFeed) factory.getObject();
        System.out.println(news.getNews());
    }
}</pre><p>&#19979;&#36848;&#26159;XML&#37197;&#32622;&#65306;</p><pre class="programlisting">&lt;beans&gt;
    &lt;bean id="newsFeedManager" class="x.y.NewsFeedManager"&gt;
        &lt;property name="factory"&gt;
            &lt;bean
class="org.springframework.beans.factory.config.ObjectFactoryCreatingFactoryBean"&gt;
                &lt;property name="targetBeanName"&gt;
                    &lt;idref local="newsFeed" /&gt;
                &lt;/property&gt;
            &lt;/bean&gt;
        &lt;/property&gt;
    &lt;/bean&gt;
    &lt;bean id="newsFeed" class="x.y.NewsFeed" scope="prototype"&gt;
        &lt;property name="news" value="... that's fit to print!" /&gt;
    &lt;/bean&gt;
&lt;/beans&gt;</pre><p>&#36825;&#37324;&#26377;&#19968;&#20010;&#27979;&#35797;&#29992;&#30340;&#23567;&#31243;&#24207;&#65306;&#22312;<tt class="classname">NewsFeedManager</tt>&#30340;<tt class="methodname">printNews()</tt>&#26041;&#27861;&#37324;&#65292;&#27599;&#27425;&#38024;&#23545;&#34987;&#27880;&#20837;&#30340;<tt class="interfacename">ObjectFactory</tt>&#30340;&#35843;&#29992;&#65292;&#23454;&#38469;&#19978;&#36820;&#22238;&#30340;&#26159;&#19968;&#20010;&#26032;&#30340;&#65288;prototype&#65289;<tt class="literal">newsFeed</tt> bean&#23454;&#20363;&#12290;</p><pre class="programlisting">import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import x.y.NewsFeedManager;

public class Main {

    public static void main(String[] args) throws Exception {

        ApplicationContext ctx = new ClassPathXmlApplicationContext("beans.xml");
        NewsFeedManager manager = (NewsFeedManager) ctx.getBean("newsFeedManager");
        manager.printNews();
        manager.printNews();
    }
}</pre><p>&#19978;&#36848;&#31243;&#24207;&#30340;&#25191;&#34892;&#36755;&#20986;&#22914;&#19979;&#25152;&#31034;&#65288;&#24403;&#28982;&#65292;&#36820;&#22238;&#32467;&#26524;&#20250;&#26681;&#25454;&#20320;&#26426;&#22120;&#30340;&#19981;&#21516;&#32780;&#19981;&#21516;&#65289;</p><pre class="programlisting">x.y.NewsFeed@1292d26: '... that's fit to print!'
x.y.NewsFeed@5329c5: '... that's fit to print!'</pre><p>&#22312;Spring2.5&#20013;&#65292;&#21487;&#20197;&#21033;&#29992;<tt class="interfacename">BeanFactory</tt>&#30340;&#33258;&#21160;&#35013;&#37197;&#20316;&#20026;&#23454;&#29616; <tt class="interfacename">BeanFactoryAware</tt>&#25509;&#21475;&#30340;&#21487;&#36873;&#26041;&#24335;&#12290;
        "&#20256;&#32479;"&#30340;<tt class="literal">constructor</tt>&#21644;<tt class="literal">byType</tt> &#33258;&#21160;&#35013;&#37197;&#27169;&#24335;&#65288;&#22312;<a href="#beans-factory-autowire" title="3.3.5.&nbsp;&#33258;&#21160;&#35013;&#37197;&#65288;autowire&#65289;&#21327;&#20316;&#32773;">Section&nbsp;3.3.5, &#8220;&#33258;&#21160;&#35013;&#37197;&#65288;autowire&#65289;&#21327;&#20316;&#32773;&#8221;</a>&#20013;&#26377;&#25551;&#36848;&#65289;&#23545;&#26080;&#35770;&#26159;&#26500;&#36896;&#22120;&#21442;&#25968;&#25110;setter&#26041;&#27861;&#37117;&#33021;&#25552;&#20379; <tt class="interfacename">BeanFactory</tt>&#31867;&#22411;&#30340; &#20381;&#36182;&#12290;&#36825;&#26377;&#26356;&#22810;&#30340;&#28789;&#27963;&#24615;&#65288;&#21253;&#25324;&#33258;&#21160;&#35013;&#37197;&#23646;&#24615;&#21644;&#22810;&#21442;&#25968;&#26041;&#27861;&#65289;&#12290;&#22914;&#26524;&#20351;&#29992;&#26032;&#30340;&#22522;&#20110;&#20803;&#27880;&#37322;&#30340;&#33258;&#21160;&#35013;&#37197;&#29305;&#24615;&#65292;&#21482;&#35201;&#23646;&#24615;&#12289;
        &#26500;&#36896;&#22120;&#12289;&#26041;&#27861;&#21253;&#21547;&#26377;<tt class="interfacename">@Autowired</tt>&#20803;&#27880;&#37322;&#26102;&#65292;<tt class="interfacename">BeanFactory</tt>&#23558;&#20250;&#33258;&#21160;&#35013;&#37197;&#21040;&#23545;&#24212;&#30340;&#23646;&#24615;&#12289;&#26500;&#36896;&#22120;&#12289;&#26041;&#27861;&#20013;&#12290;&#35831;&#21442;&#38405;<a href="#beans-autowired-annotation" title="3.11.1.&nbsp;@Autowired">Section&nbsp;3.11.1, &#8220;@Autowired&#8221;</a>&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-aware-beannameaware"></a>3.5.2.2.&nbsp;
					<tt class="interfacename">BeanNameAware</tt>
				</h4></div></div><div></div></div><p>&#22914;&#26524;&#19968;&#20010;bean&#23454;&#29616;&#20102;<tt class="interfacename">org.springframework.beans.factory.BeanNameAware</tt>&#25509;&#21475;&#65292;&#24182;&#19988;&#37096;&#32626;&#20837;<tt class="interfacename">BeanFactory</tt>&#65292;
        <tt class="interfacename">BeanFactory</tt>&#23558;&#36890;&#36807;&#65288;BeanNameAware&#65289;&#25509;&#21475;&#26469;&#36890;&#30693;&#36825;&#20010;bean&#37096;&#32626;&#22312;&#20854;&#19979;&#30340;bean&#26469;&#35843;&#29992;&#36825;&#20010;bean&#12290;&#36825;&#20010;&#22238;&#35843;&#26041;&#27861;&#24212;&#35813;&#22312;bean&#30340;&#25152;&#26377;&#19968;&#33324;&#23646;&#24615;&#34987;&#35774;&#32622;&#21518;&#35843;&#29992;&#65292;&#20294;&#24212;&#35813;&#22312;&#21021;&#22987;&#21270;&#22238;&#35843;&#20043;&#21069;&#65292;&#22914;<tt class="interfacename">InitializingBean</tt>&#30340;<span class="emphasis"><em>afterPropertiesSet</em></span>&#26041;&#27861;&#25110;&#32773;&#33258;&#23450;&#20041;&#30340;&#21021;&#22987;&#21270;&#26041;&#27861;&#12290;</p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="beans-child-bean-definitions"></a>3.6.&nbsp;bean&#23450;&#20041;&#30340;&#32487;&#25215;</h2></div></div><div></div></div><p>&#22312;
bean&#23450;&#20041;&#20013;&#21253;&#21547;&#20102;&#22823;&#37327;&#30340;&#37197;&#32622;&#20449;&#24687;&#65292;&#20854;&#20013;&#21253;&#25324;&#23481;&#22120;&#30456;&#20851;&#30340;&#20449;&#24687;&#65288;&#27604;&#22914;&#21021;&#22987;&#21270;&#26041;&#27861;&#12289;&#38745;&#24577;&#24037;&#21378;&#26041;&#27861;&#21517;&#31561;&#31561;&#65289;&#20197;&#21450;&#26500;&#36896;&#22120;&#21442;&#25968;&#21644;&#23646;&#24615;&#20540;&#12290;&#23376;bean&#23450;&#20041;&#23601;&#26159;&#20174;&#29238;
bean&#23450;&#20041;&#32487;&#25215;&#37197;&#32622;&#25968;&#25454;&#30340;bean&#23450;&#20041;&#12290;&#23427;&#21487;&#20197;&#35206;&#30422;&#29238;bean&#30340;&#19968;&#20123;&#20540;&#65292;&#25110;&#32773;&#28155;&#21152;&#19968;&#20123;&#23427;&#38656;&#35201;&#30340;&#20540;&#12290;&#20351;&#29992;&#29238;/&#23376;bean&#23450;&#20041;&#30340;&#24418;&#24335;&#21487;&#20197;&#33410;&#30465;&#24456;&#22810;&#30340;&#36755;&#20837;&#24037;
&#20316;&#12290;&#23454;&#38469;&#19978;&#65292;&#36825;&#23601;&#26159;&#19968;&#31181;&#27169;&#26495;&#24418;&#24335;&#12290;</p><p>&#24403;&#20197;&#32534;&#31243;&#30340;&#26041;&#24335;&#20351;&#29992;<tt class="interfacename">BeanFactory</tt>&#26102;&#65292;&#23376;bean&#23450;&#20041;&#29992;<tt class="classname">ChildBeanDefinition</tt>&#31867;&#34920;&#31034;&#12290;&#22823;&#22810;&#25968;&#29992;&#25143;&#20174;&#26469;&#19981;&#38656;&#35201;&#20197;&#36825;&#20010;&#26041;&#24335;&#20351;&#29992;&#23427;&#20204;&#65292;&#32780;&#26159;&#20197;&#31867;&#20284;<tt class="classname">XmlBeanFactory</tt>&#20013;&#30340;&#22768;&#26126;&#26041;&#24335;&#21435;&#37197;&#32622;bean&#23450;&#20041;&#12290;&#24403;&#20351;&#29992;&#22522;&#20110;XML&#30340;&#37197;&#32622;&#20803;&#25968;&#25454;&#26102;&#65292;&#32473;<tt class="literal">'parent'</tt>&#23646;&#24615;&#25351;&#23450;&#20540;&#65292;&#24847;&#21619;&#30528;&#23376;bean&#23450;&#20041;&#30340;&#22768;&#26126;&#12290;</p><pre class="programlisting">&lt;bean id="inheritedTestBean" abstract="true"
    class="org.springframework.beans.TestBean"&gt;
  &lt;property name="name" value="parent"/&gt;
  &lt;property name="age" value="1"/&gt;
&lt;/bean&gt;

&lt;bean id="inheritsWithDifferentClass"
      class="org.springframework.beans.DerivedTestBean"
      <span class="bold"><b>parent="inheritedTestBean"</b></span> init-method="initialize"&gt;
    
  &lt;property name="name" value="override"/&gt;
  <i class="lineannotation"><span class="lineannotation">&lt;!-- the age property value of 1 will be inherited from  parent --&gt;</span></i>

&lt;/bean&gt;</pre><p>&#22914;&#26524;&#23376;bean&#23450;&#20041;&#27809;&#26377;&#25351;&#23450;class&#23646;&#24615;&#65292;&#23427;&#23558;&#20351;&#29992;&#29238;bean&#23450;&#20041;&#30340;class&#23646;&#24615;&#65292;&#24403;&#28982;&#20063;&#21487;&#20197;&#35206;&#30422;&#23427;&#12290;&#22312;&#21518;&#38754;&#19968;&#31181;&#24773;&#20917;&#20013;&#65292;&#23376;bean&#30340;class&#23646;&#24615;&#20540;&#24517;&#39035;&#21516;&#29238;bean&#20860;&#23481;&#65292;&#20063;&#23601;&#26159;&#35828;&#23427;&#24517;&#39035;&#25509;&#21463;&#29238;bean&#30340;&#23646;&#24615;&#20540;&#12290;</p><p>&#19968;&#20010;&#23376;bean&#23450;&#20041;&#21487;&#20197;&#20174;&#29238;bean&#32487;&#25215;&#26500;&#36896;&#22120;&#21442;&#25968;&#20540;&#12289;&#23646;&#24615;&#20540;&#20197;&#21450;&#35206;&#30422;&#29238;bean&#30340;&#26041;&#27861;&#65292;&#24182;&#19988;&#21487;&#20197;&#26377;&#36873;&#25321;&#22320;&#22686;&#21152;&#26032;&#30340;&#20540;&#12290;&#22914;&#26524;&#25351;&#23450;&#20102;init-method&#65292;destroy-method&#21644;/&#25110;<tt class="literal">&#38745;&#24577;</tt>factory-method&#65292;&#23427;&#20204;&#23601;&#20250;&#35206;&#30422;&#29238;bean&#30456;&#24212;&#30340;&#35774;&#32622;&#12290;</p><p>&#21097;&#20313;&#30340;&#35774;&#32622;&#23558;&#24635;&#26159;&#20174;&#23376;bean&#23450;&#20041;&#22788;&#24471;&#21040;&#65306;<span class="emphasis"><em>&#20381;&#36182;</em></span>&#12289;<span class="emphasis"><em>&#33258;&#21160;&#35013;&#37197;&#27169;&#24335;</em></span>&#12289;<span class="emphasis"><em>&#20381;&#36182;&#26816;&#26597;</em></span>&#12289;<span class="emphasis"><em>singleton</em></span>&#12289;<span class="emphasis"><em>&#20316;&#29992;&#22495;</em></span>&#21644;<span class="emphasis"><em>&#24310;&#36831;&#21021;&#22987;&#21270;</em></span>&#12290;</p><p>&#27880;&#24847;&#22312;&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#20351;&#29992;<span class="emphasis"><em>abstract</em></span>&#23646;&#24615;&#26174;&#24335;&#22320;&#23558;&#29238;bean&#23450;&#20041;&#26631;&#35760;&#20026;&#25277;&#35937;&#30340;&#12290;&#19979;&#38754;&#26159;&#20010;&#29238;bean&#23450;&#20041;&#24182;&#27809;&#26377;&#25351;&#23450;class&#23646;&#24615;&#30340;&#20363;&#23376;&#65292;&#20854;&#20013;&#29238;bean&#24517;&#39035;&#26174;&#24335;&#22320;&#26631;&#19978;<tt class="literal">abstract</tt>&#65306;</p><pre class="programlisting">&lt;bean id="inheritedTestBeanWithoutClass" abstract="true"&gt;
    &lt;property name="name" value="parent"/&gt;
    &lt;property name="age" value="1"/&gt;
&lt;/bean&gt;

&lt;bean id="inheritsWithClass" class="org.springframework.beans.DerivedTestBean"
    parent="inheritedTestBeanWithoutClass" init-method="initialize"&gt;
  &lt;property name="name" value="override"/&gt;
  <i class="lineannotation"><span class="lineannotation">&lt;!-- age will inherit the value of <tt class="literal">1</tt> from the parent bean definition--&gt;</span></i>
&lt;/bean&gt;</pre><p>&#30001;&#20110;&#36825;&#26679;&#30340;&#29238;bean&#26159;&#19981;&#23436;&#25972;&#30340;&#65292;&#32780;&#19988;&#36824;&#34987;&#26174;&#24335;&#26631;&#35760;&#20026;<tt class="literal">&#25277;&#35937;&#30340;</tt>&#65292;&#22240;&#32780;&#23427;&#26080;&#27861;&#24471;&#21040;&#33258;&#24049;&#30340;&#23454;&#20363;&#12290;<tt class="literal">&#25277;&#35937;</tt>bean&#23450;&#20041;&#21487;&#20316;&#20026;&#23376;bean&#23450;&#20041;&#30340;&#27169;&#26495;&#12290;&#33509;&#35201;&#23581;&#35797;&#21333;&#29420;&#20351;&#29992;&#36825;&#26679;&#30340;&#29238;bean&#65288;&#27604;&#22914;&#23558;&#23427;&#20316;&#20026;&#20854;&#20182;bean&#30340;ref&#23646;&#24615;&#32780;&#24341;&#29992;&#65292;&#25110;&#32773;&#30452;&#25509;&#20351;&#29992;&#36825;&#20010;&#29238;bean&#30340;id&#20316;&#20026;&#21442;&#25968;&#35843;&#29992;<tt class="methodname">getBean()</tt>&#26041;&#27861;&#65289;&#65292;&#23558;&#20250;&#23548;&#33268;&#38169;&#35823;&#12290;&#21516;&#26679;&#22320;&#65292;&#23481;&#22120;&#20869;&#37096;&#30340;<tt class="methodname">preInstantiateSingletons()</tt>&#26041;&#27861;&#20250;&#23436;&#20840;&#24573;&#30053;abstract&#30340;bean&#23450;&#20041;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;<tt class="literal">ApplicationContext</tt>&#65288;<span class="emphasis"><em>&#19981;&#26159;</em></span><tt class="literal">BeanFactory</tt>&#65289;&#20250;&#39044;&#23454;&#20363;&#21270;&#25152;&#26377;singleton&#30340;bean&#12290;&#22240;&#27492;&#24456;&#37325;&#35201;&#30340;&#19968;&#28857;&#26159;&#65306;&#22914;&#26524;&#20320;&#21482;&#24819;&#25226;&#19968;&#20010;&#65288;&#29238;&#65289;bean&#23450;&#20041;&#24403;&#20316;&#27169;&#26495;&#20351;&#29992;&#65292;&#32780;&#23427;&#21448;&#25351;&#23450;&#20102;class&#23646;&#24615;&#65292;&#37027;&#20040;&#20320;&#23601;&#24471;&#23558;<span class="emphasis"><em>'abstract'</em></span>&#23646;&#24615;&#35774;&#32622;&#20026;<span class="emphasis"><em>'true'</em></span>&#65292;&#21542;&#21017;&#24212;&#29992;&#19978;&#19979;&#25991;&#23558;&#20250;&#65288;&#35797;&#30528;&#65289;&#39044;&#23454;&#20363;&#21270;<tt class="literal">&#25277;&#35937;</tt>bean&#12290;</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="beans-factory-extension"></a>3.7.&nbsp;&#23481;&#22120;&#25193;&#23637;&#28857;</h2></div></div><div></div></div><p>Spring&#26694;&#26550;&#30340;IoC&#23481;&#22120;&#34987;&#35774;&#35745;&#20026;&#21487;&#25193;&#23637;&#30340;&#12290;&#36890;&#24120;&#25105;&#20204;&#24182;&#19981;&#38656;&#35201;&#23376;&#31867;&#21270;&#21508;&#20010;<tt class="interfacename">BeanFactory</tt>&#25110;<tt class="interfacename">ApplicationContext</tt>&#23454;&#29616;&#31867;&#12290;&#32780;&#36890;&#36807;plugin&#21508;&#31181;&#38598;&#25104;&#25509;&#21475;&#23454;&#29616;&#26469;&#36827;&#34892;&#25193;&#23637;&#12290;&#19979;&#38754;&#20960;&#33410;&#19987;&#38376;&#25551;&#36848;&#36825;&#20123;&#19981;&#21516;&#30340;&#38598;&#25104;&#25509;&#21475;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-extension-bpp"></a>3.7.1.&nbsp;&#29992;<tt class="literal">BeanPostProcessor</tt>&#23450;&#21046;bean</h3></div></div><div></div></div><p>&#25105;&#20204;&#20851;&#27880;&#30340;&#31532;&#19968;&#20010;&#25193;&#23637;&#28857;&#26159;<tt class="interfacename">BeanPostProcessor</tt>&#25509;&#21475;&#12290;&#23427;&#23450;&#20041;&#20102;&#20960;&#20010;<i class="firstterm">&#22238;&#35843;&#26041;&#27861;</i>&#65292;&#23454;&#29616;&#35813;&#25509;&#21475;&#21487;&#25552;&#20379;&#33258;&#23450;&#20041;&#65288;&#25110;&#40664;&#35748;&#22320;&#26469;&#35206;&#30422;&#23481;&#22120;&#65289;&#30340;&#23454;&#20363;&#21270;&#36923;&#36753;&#12289;&#20381;&#36182;&#35299;&#26512;&#36923;&#36753;&#31561;&#12290;&#22914;&#26524;&#20320;&#24819;&#22312;Spring&#23481;&#22120;&#23436;&#25104;bean&#30340;&#23454;&#20363;&#21270;&#12289;&#37197;&#32622;&#21644;&#20854;&#23427;&#30340;&#21021;&#22987;&#21270;&#21518;&#25191;&#34892;&#19968;&#20123;&#33258;&#23450;&#20041;&#36923;&#36753;&#65292;&#20320;&#21487;&#20197;&#25554;&#20837;&#19968;&#20010;&#25110;&#22810;&#20010;&#30340;<tt class="interfacename">BeanPostProcessor</tt>&#23454;&#29616;&#12290;</p><p>&#22914;&#26524;&#37197;&#32622;&#20102;&#22810;&#20010;<tt class="literal">BeanPostProcessor</tt>&#65292;&#37027;&#20040;&#21487;&#20197;&#36890;&#36807;&#35774;&#32622;<tt class="literal">'order'</tt>&#23646;&#24615;&#26469;&#25511;&#21046;<tt class="literal">BeanPostProcessor</tt>&#30340;&#25191;&#34892;&#27425;&#24207;&#65288;&#20165;&#24403;<tt class="interfacename">BeanPostProcessor</tt>&#23454;&#29616;&#20102;<tt class="interfacename">Ordered</tt>&#25509;&#21475;&#26102;&#65292;&#20320;&#25165;&#21487;&#20197;&#35774;&#32622;&#27492;&#23646;&#24615;&#65292;&#22240;&#27492;&#22312;&#32534;&#20889;&#33258;&#24049;&#30340;<tt class="interfacename">BeanPostProcessor</tt>&#23454;&#29616;&#26102;&#65292;&#23601;&#24471;&#32771;&#34385;&#26159;&#21542;&#38656;&#35201;&#23454;&#29616;<tt class="interfacename">Ordered</tt>&#25509;&#21475;&#65289;&#65307;&#35831;&#21442;&#32771;<tt class="interfacename">BeanPostProcessor</tt>&#21644;<tt class="interfacename">Ordered</tt>&#25509;&#21475;&#30340;JavaDoc&#20197;&#33719;&#21462;&#26356;&#35814;&#32454;&#30340;&#20449;&#24687;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p><tt class="literal">BeanPostProcessor</tt>&#21487;&#20197;&#23545;bean&#65288;&#25110;&#23545;&#35937;&#65289;&#30340;<span class="emphasis"><em>&#22810;&#20010;&#23454;&#20363;</em></span>&#36827;&#34892;&#25805;&#20316;&#65307;&#20063;&#23601;&#26159;&#35828;&#65292;Spring IoC&#23481;&#22120;&#20250;&#20026;&#20320;&#23454;&#20363;&#21270;bean&#65292;&#28982;&#21518;<tt class="literal">BeanPostProcessor</tt>&#21435;&#22788;&#29702;&#23427;&#12290;</p><p>&#22914;&#26524;&#20320;&#24819;&#20462;&#25913;&#23454;&#38469;&#30340;bean&#23450;&#20041;&#65292;&#21017;&#20250;&#29992;&#21040;<tt class="interfacename">BeanFactoryPostProcessor</tt>&#65288;&#35814;&#24773;&#35265;<a href="#beans-factory-extension-factory-postprocessors" title="3.7.2.&nbsp;&#29992;BeanFactoryPostProcessor&#23450;&#21046;&#37197;&#32622;&#20803;&#25968;&#25454;">Section&nbsp;3.7.2, &#8220;&#29992;BeanFactoryPostProcessor&#23450;&#21046;&#37197;&#32622;&#20803;&#25968;&#25454;&#8221;</a>&#65289;&#12290;</p><p><tt class="literal">BeanPostProcessor</tt>&#30340;&#20316;&#29992;&#22495;&#26159;&#23481;&#22120;&#32423;&#30340;&#65292;&#23427;&#21482;&#21644;&#25152;&#22312;&#23481;&#22120;&#26377;&#20851;&#12290;&#22914;&#26524;&#20320;&#22312;&#23481;&#22120;&#20013;&#23450;&#20041;&#20102;<tt class="interfacename">BeanPostProcessor</tt>&#65292;&#23427;<span class="emphasis"><em>&#20165;&#20165;</em></span>&#23545;&#27492;&#23481;&#22120;&#20013;&#30340;bean&#36827;&#34892;&#21518;&#32622;&#22788;&#29702;&#12290;<tt class="literal">BeanPostProcessor</tt>&#23558;&#19981;&#20250;&#23545;&#23450;&#20041;&#22312;&#21478;&#19968;&#20010;&#23481;&#22120;&#20013;&#30340;bean&#36827;&#34892;&#21518;&#32622;&#22788;&#29702;&#65292;&#21363;&#20351;&#36825;&#20004;&#20010;&#23481;&#22120;&#37117;&#22788;&#22312;&#21516;&#19968;&#23618;&#27425;&#19978;&#12290;</p></td></tr></tbody></table></div><p><tt class="interfacename">org.springframework.beans.factory.config.BeanPostProcessor</tt>&#25509;&#21475;&#26377;&#20004;&#20010;&#22238;&#35843;&#26041;&#27861;&#21487;&#20379;&#20351;&#29992;&#12290;&#24403;&#19968;&#20010;&#35813;&#25509;&#21475;&#30340;&#23454;&#29616;&#31867;&#34987;&#27880;&#20876;&#65288;&#22914;&#20309;&#20351;&#36825;&#20010;&#27880;&#20876;&#29983;&#25928;&#35831;&#35265;&#19979;&#25991;&#65289;&#20026;&#23481;&#22120;&#30340;&#21518;&#32622;&#22788;&#29702;&#22120;(post-processor)&#21518;&#65292;&#23545;&#20110;&#30001;&#27492;&#23481;&#22120;&#25152;&#21019;&#24314;&#30340;&#27599;&#20010;bean&#23454;&#20363;&#22312;&#21021;&#22987;&#21270;&#26041;&#27861;&#65288;&#22914;<span class="emphasis"><em>afterPropertiesSet</em></span>&#21644;
&#20219;&#24847;&#24050;&#22768;&#26126;&#30340;init&#26041;&#27861;&#65289;&#35843;&#29992;&#21069;&#65292;&#21518;&#32622;&#22788;&#29702;&#22120;&#37117;&#20250;&#20174;&#23481;&#22120;&#20013;&#20998;&#21035;&#33719;&#21462;&#19968;&#20010;&#22238;&#35843;&#12290;&#21518;&#32622;&#22788;&#29702;&#22120;&#21487;&#20197;&#38543;&#24847;&#23545;&#36825;&#20010;bean&#23454;&#20363;&#25191;&#34892;&#23427;&#25152;&#26399;&#26395;&#30340;&#21160;&#20316;&#65292;&#21253;&#25324;&#23436;&#20840;&#24573;&#30053;&#27492;
&#22238;&#35843;&#12290;&#19968;&#20010;bean&#21518;&#32622;&#22788;&#29702;&#22120;&#36890;&#24120;&#29992;&#26469;&#26816;&#26597;&#26631;&#24535;&#25509;&#21475;&#65292;&#25110;&#32773;&#20570;&#19968;&#20123;&#35832;&#22914;&#23558;&#19968;&#20010;bean&#21253;&#35013;&#25104;&#19968;&#20010;proxy&#30340;&#20107;&#24773;&#65307;&#19968;&#20123;Spring
AOP&#30340;&#24213;&#23618;&#22788;&#29702;&#20063;&#26159;&#36890;&#36807;&#23454;&#29616;bean&#21518;&#32622;&#22788;&#29702;&#22120;&#26469;&#25191;&#34892;&#20195;&#29702;&#21253;&#35013;&#36923;&#36753;&#12290;</p><p>&#37325;&#35201;&#30340;&#19968;&#28857;&#26159;&#65292;<tt class="interfacename">BeanFactory</tt>&#21644;<tt class="interfacename">ApplicationContext</tt>&#23545;&#24453;bean&#21518;&#32622;&#22788;&#29702;&#22120;&#31245;&#26377;&#19981;&#21516;&#12290;<tt class="interfacename">ApplicationContext</tt>&#20250;&#33258;&#21160;&#26816;&#27979;&#22312;&#37197;&#32622;&#25991;&#20214;&#20013;&#23454;&#29616;&#20102;<tt class="interfacename">BeanPostProcessor</tt>&#25509;&#21475;&#30340;&#25152;&#26377;bean&#65292;&#24182;&#25226;&#23427;&#20204;&#27880;&#20876;&#20026;&#21518;&#32622;&#22788;&#29702;&#22120;&#65292;&#28982;&#21518;&#22312;&#23481;&#22120;&#21019;&#24314;bean&#30340;&#36866;&#24403;&#26102;&#20505;&#35843;&#29992;&#23427;&#12290;&#37096;&#32626;&#19968;&#20010;&#21518;&#32622;&#22788;&#29702;&#22120;&#21516;&#37096;&#32626;&#20854;&#20182;&#30340;bean&#24182;&#27809;&#26377;&#20160;&#20040;&#21306;&#21035;&#12290;&#32780;&#20351;&#29992;<tt class="interfacename">BeanFactory</tt>&#23454;&#29616;&#30340;&#26102;&#20505;&#65292;bean &#21518;&#32622;&#22788;&#29702;&#22120;&#24517;&#39035;&#36890;&#36807;&#19979;&#38754;&#31867;&#20284;&#30340;&#20195;&#30721;&#26174;&#24335;&#22320;&#21435;&#27880;&#20876;&#65306;</p><pre class="programlisting">ConfigurableBeanFactory factory = new XmlBeanFactory(...);
            
<i class="lineannotation"><span class="lineannotation">// now register any needed <tt class="interfacename">BeanPostProcessor</tt> instances</span></i>
MyBeanPostProcessor postProcessor = new MyBeanPostProcessor();
factory.addBeanPostProcessor(postProcessor);

<i class="lineannotation"><span class="lineannotation">// now start using the factory</span></i></pre><p>&#22240;&#20026;&#26174;&#24335;&#27880;&#20876;&#30340;&#27493;&#39588;&#19981;&#26159;&#24456;&#26041;&#20415;&#65292;&#36825;&#20063;&#26159;&#20026;&#20160;&#20040;&#22312;&#21508;&#31181;Spring&#24212;&#29992;&#20013;&#39318;&#36873;<tt class="interfacename">ApplicationContext</tt>&#30340;&#19968;&#20010;&#21407;&#22240;&#65292;&#29305;&#21035;&#26159;&#22312;&#20351;&#29992;<tt class="literal">BeanPostProcessor</tt>&#26102;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note: BeanPostProcessors&#21644;AOP&#33258;&#21160;&#20195;&#29702;(auto-proxying)" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">BeanPostProcessors&#21644;AOP&#33258;&#21160;&#20195;&#29702;(auto-proxying)</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#23454;&#29616;&#20102;<tt class="interfacename">BeanPostProcessor</tt> &#25509;&#21475;&#30340;&#31867;&#26159;<span class="emphasis"><em>&#29305;&#27530;&#30340;</em></span>, &#20250;&#34987;&#23481;&#22120;&#29305;&#21035;&#23545;&#24453;. &#25152;&#26377; <tt class="interfacename">BeanPostProcessors</tt><span class="emphasis"><em>&#21644;&#30452;&#25509;&#24341;&#29992;&#30340;bean</em></span> &#20250;&#20316;&#20026;<tt class="interfacename">ApplicationContext</tt>&#19968;&#37096;&#20998;&#22312;&#21551;&#21160;&#26102;&#21021;&#22987;&#21270;, <span class="emphasis"><em>&#28982;&#21518;</em></span>&#25152;&#26377;&#30340;<tt class="interfacename">BeanPostProcessors</tt>&#20250;&#27880;&#20876;&#20837;&#19968;&#20010;&#21015;&#34920;&#24182;&#24212;&#29992;&#20110;&#20043;&#21518;&#30340;bean&#12290;AOP&#33258;&#21160;&#20195;&#29702;&#23454;&#29616;&#20102;<tt class="interfacename">BeanPostProcessor</tt>&#65292;&#25152;&#20197;<tt class="interfacename">BeanPostProcessors</tt>&#25110;bean&#30340;&#30452;&#25509;&#24341;&#29992;&#19981;&#20250;&#34987;&#33258;&#21160;&#20195;&#29702;(&#22240;&#27492;&#19981;&#20250;&#34987;aspects"&#32455;&#20837;")&#12290;</p><p>&#23545;&#36825;&#20123;bean&#26469;&#35828;&#65292;&#20320;&#21487;&#33021;&#30475;&#21040;&#19979;&#38754;&#30340;&#26085;&#24535;&#20449;&#24687;&#65306;<span class="emphasis"><em>&#8220;<span class="quote">Bean 'foo' is not eligible for getting processed by all BeanPostProcessors (&#22914;&#65306;&#19981;&#33021;&#34987;auto_proxying)</span>&#8221;</em></span></p></td></tr></tbody></table></div><p>&#20851;&#20110;&#22914;&#20309;&#22312;<tt class="interfacename">ApplicationContext</tt>&#20013;&#32534;&#20889;&#12289;&#27880;&#20876;&#24182;&#20351;&#29992;<tt class="literal">BeanPostProcessor</tt>&#65292;&#20250;&#22312;&#25509;&#19979;&#30340;&#20363;&#23376;&#20013;&#28436;&#31034;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-extension-bpp-examples-hw"></a>3.7.1.1.&nbsp;&#20351;&#29992;<tt class="interfacename">BeanPostProcessor</tt>&#30340;Hello World&#31034;&#20363;</h4></div></div><div></div></div><p>&#31532;&#19968;&#20010;&#23454;&#20363;&#20284;&#20046;&#19981;&#22826;&#21560;&#24341;&#20154;&#65292;&#20294;&#26159;&#23427;&#36866;&#21512;&#29992;&#26469;&#38416;&#36848;<tt class="interfacename">BeanPostProcessor</tt>&#30340;&#22522;&#26412;&#29992;&#27861;&#12290;&#25105;&#20204;&#25152;&#26377;&#30340;&#24037;&#20316;&#26159;&#32534;&#20889;&#19968;&#20010;<tt class="interfacename">BeanPostProcessor</tt>&#30340;&#23454;&#29616;&#65292;&#23427;&#20165;&#20165;&#22312;&#23481;&#22120;&#21019;&#24314;&#27599;&#20010;bean&#26102;&#35843;&#29992;bean&#30340;<tt class="methodname">toString()</tt>&#26041;&#27861;&#24182;&#19988;&#23558;&#32467;&#26524;&#25171;&#21360;&#21040;&#31995;&#32479;&#25511;&#21046;&#21488;&#12290;&#23427;&#26159;&#27809;&#26377;&#24456;&#22823;&#30340;&#29992;&#22788;&#65292;&#20294;&#26159;&#21487;&#20197;&#35753;&#25105;&#20204;&#23545;<tt class="interfacename">BeanPostProcessor</tt>&#26377;&#19968;&#20010;&#22522;&#26412;&#27010;&#24565;&#12290;</p><p>&#19979;&#38754;&#26159;<tt class="interfacename">BeanPostProcessor</tt>&#20855;&#20307;&#23454;&#29616;&#31867;&#30340;&#23450;&#20041;&#65306;</p><pre class="programlisting">package scripting;

import org.springframework.beans.factory.config.BeanPostProcessor;
import org.springframework.beans.BeansException;

public class InstantiationTracingBeanPostProcessor implements BeanPostProcessor {

    <i class="lineannotation"><span class="lineannotation">// simply return the instantiated bean as-is</span></i>
    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {
        return bean; <i class="lineannotation"><span class="lineannotation">// we could potentially return <span class="emphasis"><em>any</em></span> object reference here...</span></i>
    }

    public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {
        System.out.println("Bean '" + beanName + "' created : " + bean.toString());
        return bean;
    }
}</pre><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:lang="http://www.springframework.org/schema/lang"
       xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang-2.5.xsd"&gt;

    &lt;lang:groovy id="messenger"
          script-source="classpath:org/springframework/scripting/groovy/Messenger.groovy"&gt;
        &lt;lang:property name="message" value="Fiona Apple Is Just So Dreamy."/&gt; 
    &lt;/lang:groovy&gt;
    
    <i class="lineannotation"><span class="lineannotation">&lt;!-- 
        when the above bean ('messenger') is instantiated, this custom
        <tt class="interfacename">BeanPostProcessor</tt> implementation will output the fact to the system console
     --&gt;</span></i>
    &lt;bean class="scripting.InstantiationTracingBeanPostProcessor"/&gt;

&lt;/beans&gt;</pre><p>&#27880;&#24847;<tt class="classname">InstantiationTracingBeanPostProcessor</tt>&#26159;&#22914;&#27492;&#31616;&#21333;&#65292;&#29978;&#33267;&#27809;&#26377;&#21517;&#23383;&#65292;&#30001;&#20110;&#34987;&#23450;&#20041;&#25104;&#19968;&#20010;bean&#65292;&#22240;&#32780;&#23427;&#36319;&#20854;&#23427;&#30340;bean&#27809;&#20160;&#20040;&#20004;&#26679;&#65288;&#19978;&#38754;&#30340;&#37197;&#32622;&#20013;&#20063;&#23450;&#20041;&#20102;&#30001;Groovy&#33050;&#26412;&#25903;&#25345;&#30340;bean&#65292;Spring2.0&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;&#30340;&#32454;&#33410;&#35831;&#35265;<a href="#dynamic-language" title="Chapter&nbsp;24.&nbsp;&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;">Chapter&nbsp;24, <i>&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;</i></a>&#65289;&#12290;</p><p>&#19979;&#38754;&#26159;&#27979;&#35797;&#20195;&#30721;&#65306;</p><pre class="programlisting">import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import org.springframework.scripting.Messenger;

public final class Boot {

    public static void main(final String[] args) throws Exception {
        ApplicationContext ctx = new ClassPathXmlApplicationContext("scripting/beans.xml");
        Messenger messenger = (Messenger) ctx.getBean("messenger");
        System.out.println(messenger);
    }
}</pre><p>&#19978;&#38754;&#31243;&#24207;&#25191;&#34892;&#26102;&#30340;&#36755;&#20986;&#23558;&#26159;&#65288;&#25110;&#35937;&#65289;&#19979;&#38754;&#36825;&#26679;&#65306;</p><pre class="programlisting">Bean 'messenger' created : org.springframework.scripting.groovy.GroovyMessenger@272961
org.springframework.scripting.groovy.GroovyMessenger@272961</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-extension-bpp-examples-rabpp"></a>3.7.1.2.&nbsp;<tt class="classname">RequiredAnnotationBeanPostProcessor</tt>&#31034;&#20363;</h4></div></div><div></div></div><p>&#22312;Spring&#30340;<tt class="interfacename">BeanPostProcessor</tt>&#23454;&#29616;&#20013;&#35843;&#29992;&#26631;&#24535;&#25509;&#21475;&#25110;&#20351;&#29992;&#27880;&#35299;&#26159;&#25193;&#23637;Spring IoC&#23481;&#22120;&#30340;&#24120;&#29992;&#26041;&#27861;&#12290;&#23545;&#20110;&#27880;&#35299;&#30340;&#29992;&#27861;&#35814;&#35265;<a href="#metadata-annotations-required" title="25.3.1.&nbsp;@Required">Section&nbsp;25.3.1, &#8220;@Required&#8221;</a>&#65292;&#36825;&#37324;&#27809;&#26377;&#20570;&#28145;&#20837;&#30340;&#35828;&#26126;&#12290;&#36890;&#36807;&#23450;&#21046;<tt class="interfacename">BeanPostProcessor</tt>&#23454;&#29616;&#65292;&#21487;&#20197;&#20351;&#29992;&#27880;&#35299;&#26469;&#25351;&#23450;&#21508;&#31181;JavaBean&#23646;&#24615;&#20540;&#24182;&#22312;&#21457;&#24067;&#30340;&#26102;&#20505;&#34987;&#27880;&#20837;&#30456;&#24212;&#30340;bean&#20013;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-extension-factory-postprocessors"></a>3.7.2.&nbsp;&#29992;<tt class="literal">BeanFactoryPostProcessor</tt>&#23450;&#21046;&#37197;&#32622;&#20803;&#25968;&#25454;</h3></div></div><div></div></div><p>&#25105;&#20204;&#23558;&#30475;&#21040;&#30340;&#19979;&#19968;&#20010;&#25193;&#23637;&#28857;&#26159;<tt class="interfacename">org.springframework.beans.factory.config.BeanFactoryPostProcessor</tt>&#12290;&#36825;&#20010;&#25509;&#21475;&#36319;<tt class="interfacename">BeanPostProcessor</tt>&#31867;&#20284;&#65292;<tt class="literal">BeanFactoryPostProcessor</tt>&#21487;&#20197;&#23545;bean&#30340;&#23450;&#20041;&#65288;&#37197;&#32622;&#20803;&#25968;&#25454;&#65289;&#36827;&#34892;&#22788;&#29702;&#12290;&#20063;&#23601;&#26159;&#35828;&#65292;Spring IoC&#23481;&#22120;&#20801;&#35768;<tt class="literal">BeanFactoryPostProcessor</tt>&#22312;&#23481;&#22120;&#23454;&#38469;&#23454;&#20363;&#21270;&#20219;&#20309;&#20854;&#23427;&#30340;bean&#20043;&#21069;&#35835;&#21462;&#37197;&#32622;&#20803;&#25968;&#25454;&#65292;&#24182;&#26377;&#21487;&#33021;&#20462;&#25913;&#23427;&#12290;</p><p>&#22914;&#26524;&#20320;&#24895;&#24847;&#65292;&#20320;&#21487;&#20197;&#37197;&#32622;&#22810;&#20010;<tt class="literal">BeanFactoryPostProcessor</tt>&#12290;&#20320;&#36824;&#33021;&#36890;&#36807;&#35774;&#32622;<tt class="literal">'order'</tt>&#23646;&#24615;&#26469;&#25511;&#21046;<tt class="interfacename">BeanFactoryPostProcessor</tt>&#30340;&#25191;&#34892;&#27425;&#24207;&#65288;&#20165;&#24403;<tt class="interfacename">BeanFactoryPostProcessor</tt>&#23454;&#29616;&#20102;<tt class="interfacename">Ordered</tt>&#25509;&#21475;&#26102;&#20320;&#25165;&#21487;&#20197;&#35774;&#32622;&#27492;&#23646;&#24615;&#65292;&#22240;&#27492;&#22312;&#23454;&#29616;<tt class="interfacename">BeanFactoryPostProcessor</tt>&#26102;&#65292;&#23601;&#24212;&#24403;&#32771;&#34385;&#23454;&#29616;<tt class="interfacename">Ordered</tt>&#25509;&#21475;&#65289;&#65307;&#35831;&#21442;&#32771;<tt class="interfacename">BeanFactoryPostProcessor</tt>&#21644;<tt class="interfacename">Ordered</tt>&#25509;&#21475;&#30340;JavaDoc&#20197;&#33719;&#21462;&#26356;&#35814;&#32454;&#30340;&#20449;&#24687;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#22914;&#26524;&#20320;&#24819;&#25913;&#21464;&#23454;&#38469;&#30340;bean&#23454;&#20363;&#65288;&#20363;&#22914;&#20174;&#37197;&#32622;&#20803;&#25968;&#25454;&#21019;&#24314;&#30340;&#23545;&#35937;&#65289;&#65292;&#37027;&#20040;&#20320;&#26368;&#22909;&#20351;&#29992;<tt class="interfacename">BeanPostProcessor</tt>&#65288;&#35265;&#19978;&#38754;<a href="#beans-factory-extension-bpp" title="3.7.1.&nbsp;&#29992;BeanPostProcessor&#23450;&#21046;bean">Section&nbsp;3.7.1, &#8220;&#29992;BeanPostProcessor&#23450;&#21046;bean&#8221;</a>&#20013;&#30340;&#25551;&#36848;&#65289;</p><p>&#21516;&#26679;&#22320;&#65292;<tt class="literal">BeanFactoryPostProcessor</tt>&#30340;&#20316;&#29992;&#22495;&#33539;&#22260;&#26159;&#23481;&#22120;&#32423;&#30340;&#12290;&#23427;&#21482;&#21644;&#20320;&#25152;&#20351;&#29992;&#30340;&#23481;&#22120;&#26377;&#20851;&#12290;&#22914;&#26524;&#20320;&#22312;&#23481;&#22120;&#20013;&#23450;&#20041;&#19968;&#20010;<tt class="interfacename">BeanFactoryPostProcessor</tt>&#65292;&#23427;<span class="emphasis"><em>&#20165;&#20165;</em></span>&#23545;&#27492;&#23481;&#22120;&#20013;&#30340;bean&#36827;&#34892;&#21518;&#32622;&#22788;&#29702;&#12290;<tt class="literal">BeanFactoryPostProcessor</tt>&#19981;&#20250;&#23545;&#23450;&#20041;&#22312;&#21478;&#19968;&#20010;&#23481;&#22120;&#20013;&#30340;bean&#36827;&#34892;&#21518;&#32622;&#22788;&#29702;&#65292;&#21363;&#20351;&#36825;&#20004;&#20010;&#23481;&#22120;&#37117;&#26159;&#22312;&#21516;&#19968;&#23618;&#27425;&#19978;&#12290;</p></td></tr></tbody></table></div><p>bean&#24037;&#21378;&#21518;&#32622;&#22788;&#29702;&#22120;&#21487;&#20197;&#25163;&#24037;&#65288;&#22914;&#26524;&#26159;<tt class="interfacename">BeanFactory</tt>&#65289;&#25110;&#33258;&#21160;&#65288;&#22914;&#26524;&#26159;<tt class="interfacename">ApplicationContext</tt>&#65289;&#22320;&#26045;&#21152;&#26576;&#20123;&#21464;&#21270;&#32473;&#23450;&#20041;&#22312;&#23481;&#22120;&#20013;&#30340;&#37197;&#32622;&#20803;&#25968;&#25454;&#12290;Spring&#33258;&#24102;&#20102;&#35768;&#22810;bean&#24037;&#21378;&#21518;&#32622;&#22788;&#29702;&#22120;&#65292;&#27604;&#22914;&#19979;&#38754;&#23558;&#25552;&#21040;&#30340;<tt class="classname">PropertyResourceConfigurer</tt>&#21644;<tt class="classname">PropertyPlaceholderConfigurer</tt>&#20197;&#21450;<tt class="classname">BeanNameAutoProxyCreator</tt>&#65292;&#23427;&#20204;&#29992;&#20110;&#23545;bean&#36827;&#34892;&#20107;&#21153;&#24615;&#21253;&#35013;&#25110;&#32773;&#20351;&#29992;&#20854;&#20182;&#30340;proxy&#36827;&#34892;&#21253;&#35013;&#12290;<tt class="interfacename">BeanFactoryPostProcessor</tt>&#20063;&#33021;&#34987;&#29992;&#26469;&#28155;&#21152;&#33258;&#23450;&#20041;&#23646;&#24615;&#32534;&#36753;&#22120;&#12290;</p><p>&#22312;&#19968;&#20010;<tt class="interfacename">BeanFactory</tt>&#20013;&#65292;&#24212;&#29992;<tt class="interfacename">BeanFactoryPostProcessor</tt>&#30340;&#36807;&#31243;&#26159;&#25163;&#24037;&#30340;&#65292;&#22914;&#19979;&#25152;&#31034;&#65306;</p><pre class="programlisting">XmlBeanFactory factory = new XmlBeanFactory(new FileSystemResource("beans.xml"));

<i class="lineannotation"><span class="lineannotation">// bring in some property values from a <tt class="classname">Properties</tt> file</span></i>
PropertyPlaceholderConfigurer cfg = new PropertyPlaceholderConfigurer();
cfg.setLocation(new FileSystemResource("jdbc.properties"));

<i class="lineannotation"><span class="lineannotation">// now actually do the replacement</span></i>
cfg.postProcessBeanFactory(factory);</pre><p>&#22240;&#20026;&#26174;&#24335;&#27880;&#20876;&#30340;&#27493;&#39588;&#19981;&#26159;&#24456;&#26041;&#20415;&#65292;&#36825;&#20063;&#26159;&#20026;&#20160;&#20040;&#22312;&#19981;&#21516;&#30340;Spring&#24212;&#29992;&#20013;&#39318;&#36873;<tt class="interfacename">ApplicationContext</tt>&#30340;&#21407;&#22240;&#65292;&#29305;&#21035;&#26159;&#22312;&#20351;&#29992;<tt class="literal">BeanFactoryPostProcessor</tt>&#26102;&#12290;</p><a name="beans-factory-autodetect-beanfactorypostprocessors"></a><p><tt class="interfacename">ApplicationContext</tt>&#20250;&#26816;&#27979;&#37096;&#32626;&#22312;&#23427;&#20043;&#19978;&#23454;&#29616;&#20102;<tt class="interfacename">BeanFactoryPostProcessor</tt>&#25509;&#21475;&#30340;bean&#65292;&#24182;&#22312;&#36866;&#24403;&#30340;&#26102;&#20505;&#20250;&#33258;&#21160;&#35843;&#29992;bean&#24037;&#21378;&#21518;&#32622;&#22788;&#29702;&#22120;&#12290;&#37096;&#32626;&#19968;&#20010;&#21518;&#32622;&#22788;&#29702;&#22120;&#21516;&#37096;&#23646;&#20854;&#20182;&#30340;bean&#24182;&#27809;&#26377;&#20160;&#20040;&#21306;&#21035;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#27491;&#22914;<tt class="literal">BeanPostProcessor</tt>&#30340;&#24773;&#20917;&#19968;&#26679;&#65292;&#35831;&#19981;&#35201;&#23558;<tt class="literal">BeanFactoryPostProcessors</tt>&#26631;&#35760;&#20026;&#24310;&#36831;&#21152;&#36733;&#12290;&#22914;&#26524;&#20320;&#36825;&#26679;&#20570;&#65292;Spring&#23481;&#22120;&#23558;&#19981;&#20250;&#27880;&#20876;&#23427;&#20204;&#65292;&#33258;&#23450;&#20041;&#36923;&#36753;&#23601;&#26080;&#27861;&#23454;&#29616;&#12290;&#22914;&#26524;&#20320;&#22312;<tt class="literal">&lt;beans/&gt;</tt>&#20803;&#32032;&#30340;&#23450;&#20041;&#20013;&#20351;&#29992;&#20102;<tt class="literal">'default-lazy-init'</tt>&#23646;&#24615;&#65292;&#35831;&#30830;&#20449;&#20320;&#30340;&#21508;&#20010;<tt class="interfacename">BeanFactoryPostProcessor</tt>&#26631;&#35760;&#20026;<tt class="literal">'lazy-init="false"'</tt>&#12290;</p></td></tr></tbody></table></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-placeholderconfigurer"></a>3.7.2.1.&nbsp;<tt class="interfacename">PropertyPlaceholderConfigurer</tt>&#31034;&#20363;</h4></div></div><div></div></div><p><tt class="interfacename">PropertyPlaceholderConfigurer</tt>&#26159;&#20010;bean&#24037;&#21378;&#21518;&#32622;&#22788;&#29702;&#22120;&#30340;&#23454;&#29616;&#65292;&#21487;&#20197;&#23558;<tt class="interfacename">BeanFactory</tt>&#23450;&#20041;&#20013;&#30340;&#19968;&#20123;&#23646;&#24615;&#20540;&#25918;&#21040;&#21478;&#19968;&#20010;&#21333;&#29420;&#30340;&#26631;&#20934;Java <tt class="classname">Properties</tt>&#25991;&#20214;&#20013;&#12290;&#36825;&#23601;&#20801;&#35768;&#29992;&#25143;&#22312;&#37096;&#32626;&#24212;&#29992;&#26102;&#21482;&#38656;&#35201;&#22312;&#23646;&#24615;&#25991;&#20214;&#20013;&#23545;&#19968;&#20123;&#20851;&#38190;&#23646;&#24615;&#65288;&#20363;&#22914;&#25968;&#25454;&#24211;URL&#65292;&#29992;&#25143;&#21517;&#21644;&#23494;&#30721;&#65289;&#36827;&#34892;&#20462;&#25913;&#65292;&#32780;&#19981;&#29992;&#23545;&#20027;XML&#23450;&#20041;&#25991;&#20214;&#25110;&#23481;&#22120;&#25152;&#29992;&#25991;&#20214;&#36827;&#34892;&#22797;&#26434;&#21644;&#21361;&#38505;&#30340;&#20462;&#25913;&#12290;</p><p>&#32771;&#34385;&#19979;&#38754;&#30340;XML&#37197;&#32622;&#20803;&#25968;&#25454;&#23450;&#20041;&#65292;&#23427;&#29992;&#21344;&#20301;&#31526;&#23450;&#20041;&#20102;<tt class="interfacename">DataSource</tt>&#12290;&#25105;&#20204;&#22312;&#22806;&#37096;&#30340;<tt class="classname">Properties</tt>&#25991;&#20214;&#20013;&#37197;&#32622;&#19968;&#20123;&#30456;&#20851;&#30340;&#23646;&#24615;&#12290;&#22312;&#36816;&#34892;&#26102;&#65292;&#25105;&#20204;&#20026;&#20803;&#25968;&#25454;&#25552;&#20379;&#19968;&#20010;<tt class="classname">PropertyPlaceholderConfigurer</tt>&#65292;&#23427;&#23558;&#20250;&#26367;&#25442;dataSource&#30340;&#23646;&#24615;&#20540;&#12290;</p><pre class="programlisting">&lt;bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"&gt;
    &lt;property name="locations"&gt;
        &lt;value&gt;classpath:com/foo/jdbc.properties&lt;/value&gt;
    &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id="dataSource" destroy-method="close"
      class="org.apache.commons.dbcp.BasicDataSource"&gt;
    &lt;property name="driverClassName" value="<span class="bold"><b>${jdbc.driverClassName}</b></span>"/&gt;
    &lt;property name="url" value="<span class="bold"><b>${jdbc.url}</b></span>"/&gt;
    &lt;property name="username" value="<span class="bold"><b>${jdbc.username}</b></span>"/&gt;
    &lt;property name="password" value="<span class="bold"><b>${jdbc.password}</b></span>"/&gt;
&lt;/bean&gt;</pre><p>&#23454;&#38469;&#30340;&#20540;&#26469;&#33258;&#20110;&#21478;&#19968;&#20010;&#26631;&#20934;Java <tt class="classname">Properties</tt>&#26684;&#24335;&#30340;&#25991;&#20214;&#65306;</p><pre class="programlisting">jdbc.driverClassName=org.hsqldb.jdbcDriver
jdbc.url=jdbc:hsqldb:hsql://production:9002
jdbc.username=sa
jdbc.password=root</pre><p>&#22312;Spring 2.5&#20013;&#65292;<tt class="literal">context</tt>&#21517;&#23383;&#31354;&#38388;&#21487;&#33021;&#37319;&#29992;&#21333;&#19968;&#20803;&#32032;&#23646;&#24615;&#21344;&#20301;&#31526;&#30340;&#26041;&#24335;(&#22810;&#20010;&#36335;&#24452;&#25552;&#20379;&#19968;&#20010;&#36887;&#21495;&#20998;&#38548;&#30340;&#21015;&#34920;)</p><pre class="programlisting">&lt;context:property-placeholder location="classpath:com/foo/jdbc.properties"/&gt;</pre><p><tt class="classname">PropertyPlaceholderConfigurer</tt>&#22914;&#26524;&#22312;&#25351;&#23450;&#30340;<tt class="classname">Properties</tt>&#25991;&#20214;&#20013;&#25214;&#19981;&#21040;&#20320;&#24819;&#20351;&#29992;&#30340;&#23646;&#24615;&#65292;&#23427;&#36824;&#20250;&#22312;Java&#30340;<tt class="classname">System</tt>&#31867;&#23646;&#24615;&#20013;&#26597;&#25214;&#12290;&#36825;&#20010;&#34892;&#20026;&#21487;&#20197;&#36890;&#36807;&#35774;&#32622;<tt class="literal">systemPropertiesMode</tt>&#23646;&#24615;&#26469;&#23450;&#21046;&#65292;&#23427;&#26377;&#19977;&#20010;&#20540;&#65306;&#35753;&#37197;&#32622;&#19968;&#30452;&#35206;&#30422;&#12289;&#35753;&#23427;&#27704;&#19981;&#35206;&#30422;&#21450;&#35753;&#23427;&#20165;&#20165;&#22312;&#23646;&#24615;&#25991;&#20214;&#20013;&#25214;&#19981;&#21040;&#35813;&#23646;&#24615;&#26102;&#25165;&#35206;&#30422;&#12290;&#35831;&#21442;&#32771;<tt class="classname">PropertiesPlaceholderConfigurer</tt>&#30340;JavaDoc&#20197;&#33719;&#24471;&#26356;&#22810;&#30340;&#20449;&#24687;&#12290;</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Tip: &#31867;&#21517;&#26367;&#20195;" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Tip]" src="tip.png"></td><th align="left">&#31867;&#21517;&#26367;&#20195;</th></tr><tr><td colspan="2" valign="top" align="left"><p><tt class="classname">PropertyPlaceholderConfigurer</tt>&#21487;&#20197;&#22312;&#24517;&#39035;&#22312;&#36816;&#34892;&#26102;&#36873;&#25321;&#19968;&#20010;&#29305;&#24615;&#23454;&#29616;&#31867;&#26102;&#21487;&#20197;&#29992;&#26469;&#26367;&#20195;&#31867;&#21517;&#12290;&#20363;&#22914;&#65306;</p><pre class="programlisting">&lt;bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"&gt;
    &lt;property name="locations"&gt;
        &lt;value&gt;classpath:com/foo/strategy.properties&lt;/value&gt;
    &lt;/property&gt;
    &lt;property name="properties"&gt;
        &lt;value&gt;custom.strategy.class=com.foo.DefaultStrategy&lt;/value&gt;
    &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id="serviceStrategy" class="${custom.strategy.class}"/&gt;</pre><p>&#22914;&#26524;&#31867;&#22312;&#36816;&#34892;&#26102;&#26080;&#27861;&#21464;&#20026;&#26377;&#25928;&#12290;&#21017;&#36825;&#20010;bean&#20250;&#21019;&#24314;&#22833;&#36133;&#65288;&#24403;&#23545;&#38750;&#24310;&#36831;&#23454;&#20363;&#21270;bean&#25191;&#34892;<tt class="interfacename">ApplicationContext</tt>&#30340;<tt class="methodname">preInstantiateSingletons()</tt>&#26041;&#27861;&#30340;&#24773;&#20917;&#19979;&#65289;&#12290;</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-factory-overrideconfigurer"></a>3.7.2.2.&nbsp;<tt class="classname">PropertyOverrideConfigurer</tt>&#31034;&#20363;</h4></div></div><div></div></div><p>&#21478;&#19968;&#20010;bean&#24037;&#21378;&#21518;&#32622;&#22788;&#29702;&#22120;<tt class="classname">PropertyOverrideConfigurer</tt>&#31867;&#20284;&#20110;<tt class="classname">PropertyPlaceholderConfigurer</tt>&#12290;&#20294;&#26159;&#19982;&#21518;&#32773;&#30456;&#27604;&#65292;&#21069;&#32773;&#23545;&#20110;bean&#23646;&#24615;&#21487;&#20197;&#26377;&#32570;&#30465;&#20540;&#25110;&#32773;&#26681;&#26412;&#27809;&#26377;&#20540;&#12290;&#22914;&#26524;&#36215;&#35206;&#30422;&#20316;&#29992;&#30340;<tt class="classname">Properties</tt>&#25991;&#20214;&#27809;&#26377;&#26576;&#20010;bean&#23646;&#24615;&#30340;&#20869;&#23481;&#65292;&#37027;&#20040;&#23558;&#20351;&#29992;&#32570;&#30465;&#30340;&#19978;&#19979;&#25991;&#23450;&#20041;&#12290;</p><p>bean&#24037;&#21378;&#24182;&#19981;&#20250;&#24847;&#35782;&#21040;&#34987;&#35206;&#30422;&#65292;&#25152;&#20197;&#20165;&#20165;&#23519;&#30475;XML&#23450;&#20041;&#25991;&#20214;&#24182;&#19981;&#33021;&#31435;&#21051;&#30693;&#36947;&#35206;&#30422;&#37197;&#32622;&#26159;&#21542;&#34987;&#20351;&#29992;&#20102;&#12290;&#22312;&#22810;&#20010;<tt class="classname">PropertyOverrideConfigurer</tt>&#23454;&#20363;&#20013;&#23545;&#19968;&#20010;bean&#23646;&#24615;&#23450;&#20041;&#20102;&#19981;&#21516;&#30340;&#20540;&#26102;&#65292;&#26368;&#21518;&#23450;&#20041;&#30340;&#20540;&#23558;&#34987;&#20351;&#29992;&#65288;&#30001;&#20110;&#35206;&#30422;&#26426;&#21046;&#65289;&#12290;</p><p>Properties&#25991;&#20214;&#30340;&#37197;&#32622;&#24212;&#35813;&#26159;&#22914;&#19979;&#30340;&#26684;&#24335;&#65306;</p><pre class="programlisting">beanName.property=value</pre><p>An example properties file might look like this:</p><p>&#19968;&#20010;properties&#25991;&#20214;&#21487;&#33021;&#26159;&#19979;&#38754;&#36825;&#26679;&#30340;&#65306;</p><pre class="programlisting">dataSource.driverClassName=com.mysql.jdbc.Driver
dataSource.url=jdbc:mysql:mydb</pre><p>&#36825;&#20010;&#31034;&#20363;&#25991;&#20214;&#21487;&#29992;&#22312;&#36825;&#26679;&#19968;&#20010;bean&#23481;&#22120;&#65306;&#21253;&#21547;&#19968;&#20010;&#21517;&#20026;<span class="emphasis"><em>dataSource</em></span>&#30340;bean&#65292;&#24182;&#19988;&#36825;&#20010;bean&#26377;<span class="emphasis"><em>driver</em></span>&#21644;<span class="emphasis"><em>url</em></span>&#23646;&#24615;&#12290;</p><p>&#27880;&#24847;&#23427;&#20063;&#25903;&#25345;&#32452;&#21512;&#30340;&#23646;&#24615;&#21517;&#31216;&#65292;&#21482;&#35201;&#36335;&#24452;&#20013;&#27599;&#20010;&#32452;&#20214;&#38500;&#20102;&#26368;&#21518;&#35201;&#34987;&#35206;&#30422;&#30340;&#23646;&#24615;&#22806;&#20840;&#37117;&#26159;&#38750;&#31354;&#30340;&#65288;&#27604;&#22914;&#36890;&#36807;&#26500;&#36896;&#22120;&#26469;&#21021;&#22987;&#21270;&#65289;&#65292;&#22312;&#19979;&#20363;&#20013;&#65306;</p><pre class="programlisting">foo.fred.bob.sammy=123</pre><p>... the <tt class="literal">sammy</tt> property of the
        <tt class="literal">bob</tt> property of the <tt class="literal">fred</tt>
        property of the <tt class="literal">foo</tt> bean is being set to the scalar
        value <tt class="literal">123</tt>.</p><p><tt class="literal">foo</tt> bean&#30340;<tt class="literal">fred</tt>&#23646;&#24615;&#30340;<tt class="literal">bob</tt>&#23646;&#24615;&#30340;<tt class="literal">sammy</tt>&#23646;&#24615;&#34987;&#35774;&#32622;&#20026;&#25968;&#20540;123&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-factory-extension-factorybean"></a>3.7.3.&nbsp;&#20351;&#29992;<tt class="literal">FactoryBean</tt>&#23450;&#21046;&#23454;&#20363;&#21270;&#36923;&#36753;</h3></div></div><div></div></div><p>&#24037;&#21378;bean&#38656;&#35201;&#23454;&#29616;<tt class="interfacename">org.springframework.beans.factory.FactoryBean</tt>&#25509;&#21475;&#12290;</p><p><tt class="interfacename">FactoryBean</tt>&#25509;&#21475;&#26159;&#25554;&#20837;&#21040;Spring IoC&#23481;&#22120;&#29992;&#26469;&#23450;&#21046;&#23454;&#20363;&#21270;&#36923;&#36753;&#30340;&#19968;&#20010;&#25509;&#21475;&#28857;&#12290;&#22914;&#26524;&#20320;&#26377;&#19968;&#20123;&#22797;&#26434;&#30340;&#21021;&#22987;&#21270;&#20195;&#30721;&#29992;Java&#21487;&#20197;&#26356;&#22909;&#26469;&#34920;&#31034;&#65292;&#32780;&#19981;&#26159;&#29992;(&#21487;&#33021;)&#20887;&#38271;&#30340;XML&#65292;&#37027;&#20040;&#20320;&#23601;&#21487;&#20197;&#21019;&#24314;&#20320;&#33258;&#24049;&#30340;<tt class="interfacename">FactoryBean</tt>&#65292;&#24182;&#22312;&#37027;&#20010;&#31867;&#20013;&#20889;&#20837;&#22797;&#26434;&#30340;&#21021;&#22987;&#21270;&#21160;&#20316;&#65292;&#28982;&#21518;&#25226;&#20320;&#23450;&#21046;&#30340;<tt class="interfacename">FactoryBean</tt>&#25554;&#20837;&#23481;&#22120;&#20013;&#12290;</p><p><tt class="interfacename">FactoryBean</tt>&#25509;&#21475;&#25552;&#20379;&#19977;&#20010;&#26041;&#27861;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="methodname">Object getObject()</tt>&#65306;&#36820;&#22238;&#19968;&#20010;&#30001;&#36825;&#20010;&#24037;&#21378;&#21019;&#24314;&#30340;&#23545;&#35937;&#23454;&#20363;&#12290;&#36825;&#20010;&#23454;&#20363;&#21487;&#33021;&#34987;&#20849;&#20139;&#65288;&#21462;&#20915;&#20110;isSingleton()&#30340;&#36820;&#22238;&#20540;&#26159;singleton&#25110;prototype&#65289;&#12290;</p></li><li><p><tt class="methodname">boolean isSingleton()</tt>&#65306;&#22914;&#26524;&#35201;&#35753;&#36825;&#20010;FactoryBean&#21019;&#24314;&#30340;&#23545;&#35937;&#23454;&#20363;&#20026;singleton&#21017;&#36820;&#22238;true&#65292;&#21542;&#21017;&#36820;&#22238;false&#12290;</p></li><li><p><tt class="methodname">Class getObjectType()</tt>&#65306;&#36820;&#22238;&#36890;&#36807;getObject()&#26041;&#27861;&#36820;&#22238;&#30340;&#23545;&#35937;&#31867;&#22411;&#65292;&#22914;&#26524;&#35813;&#31867;&#22411;&#26080;&#27861;&#39044;&#26009;&#21017;&#36820;&#22238;null&#12290;</p></li></ul></div><p>&#22312;Spring&#26694;&#26550;&#20013;<tt class="interfacename">FactoryBean</tt>&#30340;&#27010;&#24565;&#21644;&#25509;&#21475;&#34987;&#29992;&#20110;&#22810;&#20010;&#22320;&#26041;&#65307;&#22312;&#26412;&#25991;&#20889;&#20316;&#26102;&#65292;Spring&#26412;&#36523;&#25552;&#20379;&#30340;<tt class="interfacename">FactoryBean</tt>&#25509;&#21475;&#23454;&#29616;&#36229;&#36807;&#20102;50&#20010;&#12290;</p><p>&#26368;&#21518;&#65292;&#26377;&#26102;&#38656;&#35201;&#21521;&#23481;&#22120;&#35831;&#27714;&#19968;&#20010;&#30495;&#23454;&#30340;<tt class="interfacename">FactoryBean</tt>&#23454;&#20363;&#26412;&#36523;&#65292;&#32780;&#19981;&#26159;&#23427;&#21019;&#24314;&#30340;bean&#12290;&#36825;&#21487;&#20197;&#36890;&#36807;&#22312;<tt class="interfacename">FactoryBean</tt>&#65288;&#21253;&#25324;<tt class="interfacename">ApplicationContext</tt>&#65289;&#35843;&#29992;<tt class="methodname">getBean</tt>&#26041;&#27861;&#26102;&#22312;bean id&#21069;&#21152;<tt class="literal">'&amp;'</tt>(&#27809;&#26377;&#21333;&#24341;&#21495;)&#26469;&#23436;&#25104;&#12290;&#22240;&#27492;&#23545;&#20110;&#19968;&#20010;&#20551;&#23450;id&#20026;<tt class="literal">myBean</tt>&#30340;<tt class="interfacename">FactoryBean</tt>&#65292;&#22312;&#23481;&#22120;&#19978;&#35843;&#29992;<tt class="literal">getBean("myBean")</tt>&#23558;&#36820;&#22238;<tt class="interfacename">FactoryBean</tt>&#21019;&#24314;&#30340;bean&#23454;&#20363;&#65292;&#20294;&#26159;&#35843;&#29992;<tt class="literal">getBean("&amp;myBean")</tt>&#23558;&#36820;&#22238;<tt class="interfacename">FactoryBean</tt>&#26412;&#36523;&#30340;&#23454;&#20363;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="context-introduction"></a>3.8.&nbsp;The <tt class="interfacename">ApplicationContext</tt></h2></div></div><div></div></div><p><tt class="literal">beans</tt>&#21253;&#25552;&#20379;&#20102;&#20197;&#32534;&#31243;&#30340;&#26041;&#24335;&#31649;&#29702;&#21644;&#25805;&#25511;bean&#30340;&#22522;&#26412;&#21151;&#33021;&#65292;&#32780;<tt class="literal">context</tt>&#21253;&#19979;&#30340;<tt class="literal"><a href="http://www.springframework.org/docs/api/org/springframework/context/ApplicationContext.html" target="_top">ApplicationContext</a></tt>&#20197;&#19968;&#31181;&#26356;&#21152;&#38754;&#21521;&#26694;&#26550;&#30340;&#26041;&#24335;&#22686;&#24378;&#20102;<tt class="interfacename">BeanFactory</tt>&#30340;&#21151;&#33021;&#12290;&#22810;&#25968;&#29992;&#25143;&#21487;&#20197;&#37319;&#29992;&#22768;&#26126;&#30340;&#26041;&#24335;&#26469;&#20351;&#29992;<tt class="interfacename">ApplicationContext</tt>&#65292;&#29978;&#33267;&#19981;&#29992;&#25163;&#21160;&#21019;&#24314;&#23427;&#65292;&#32780;&#36890;&#36807;<tt class="classname">ContextLoader</tt>&#36825;&#26679;&#30340;&#25903;&#25345;&#31867;&#65292;&#25226;&#23427;&#20316;&#20026;J2EE web&#24212;&#29992;&#30340;&#19968;&#37096;&#20998;&#33258;&#21160;&#21551;&#21160;&#12290;&#24403;&#28982;&#65292;&#25105;&#20204;&#20173;&#28982;&#21487;&#20197;&#37319;&#29992;&#32534;&#31243;&#30340;&#26041;&#24335;&#21019;&#24314;&#19968;&#20010;ApplicationContext&#12290;</p><p>context&#21253;&#30340;&#26680;&#24515;&#26159;<tt class="interfacename">ApplicationContext</tt>&#25509;&#21475;&#12290;&#23427;&#30001;<tt class="interfacename">BeanFactory</tt>&#25509;&#21475;&#27966;&#29983;&#32780;&#26469;&#65292;&#22240;&#32780;&#25552;&#20379;&#20102;<tt class="interfacename">BeanFactory</tt>&#25152;&#26377;&#30340;&#21151;&#33021;&#12290;&#20026;&#20102;&#20197;&#19968;&#31181;&#26356;&#21521;&#38754;&#21521;&#26694;&#26550;&#30340;&#26041;&#24335;&#24037;&#20316;&#20197;&#21450;&#23545;&#19978;&#19979;&#25991;&#36827;&#34892;&#20998;&#23618;&#21644;&#23454;&#29616;&#32487;&#25215;&#65292;context&#21253;&#36824;&#25552;&#20379;&#20102;&#20197;&#19979;&#30340;&#21151;&#33021;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="interfacename">MessageSource</tt>, &#25552;&#20379;&#22269;&#38469;&#21270;&#30340;&#28040;&#24687;&#35775;&#38382;</p></li><li><p><span class="emphasis"><em>&#36164;&#28304;&#35775;&#38382;</em></span>&#65292;&#22914;URL&#21644;&#25991;&#20214;</p></li><li><p><span class="emphasis"><em>&#20107;&#20214;&#20256;&#25773;</em></span>&#65292;&#23454;&#29616;&#20102;<tt class="interfacename">ApplicationListener</tt>&#25509;&#21475;&#30340;bean</p></li><li><p><span class="emphasis"><em>&#36733;&#20837;&#22810;&#20010;&#65288;&#26377;&#32487;&#25215;&#20851;&#31995;&#65289;&#19978;&#19979;&#25991;</em></span> &#65292;&#20351;&#24471;&#27599;&#19968;&#20010;&#19978;&#19979;&#25991;&#37117;&#19987;&#27880;&#20110;&#19968;&#20010;&#29305;&#23450;&#30340;&#23618;&#27425;&#65292;&#27604;&#22914;&#24212;&#29992;&#30340;web&#23618;</p></li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="context-introduction-ctx-vs-beanfactory"></a>3.8.1.&nbsp;<tt class="interfacename">BeanFactory</tt> &#36824;&#26159;
      <tt class="interfacename">ApplicationContext</tt>?</h3></div></div><div></div></div><p>&#31616;&#21333;&#30340;&#35828;&#65306;<span class="emphasis"><em>&#38500;&#38750;&#20320;&#26377;&#26356;&#22909;&#30340;&#29702;&#30001;&#65292;&#21542;&#21017;&#23613;&#37327;&#20351;&#29992;<tt class="interfacename">ApplicationContext</tt>&#65292;&#19979;&#38754;&#26159;&#23545;&#20110;&#21738;&#20123;"&#20026;&#20160;&#20040;"&#31561;&#31561;&#26356;&#28145;&#20837;&#30340;&#24314;&#35758;</em></span></p><p><tt class="interfacename">ApplicationContext</tt>&#21253;&#21547;<tt class="interfacename">BeanFactory</tt>&#30340;&#25152;&#26377;&#21151;&#33021;&#12290;&#36890;&#24120;&#24314;&#35758;&#27604;<tt class="interfacename">BeanFactory</tt>&#20248;&#20808;&#65292;&#38500;&#38750;&#26377;&#19968;&#20123;&#38480;&#21046;&#30340;&#22330;&#21512;&#22914;&#23383;&#33410;&#38271;&#24230;&#23545;&#20869;&#23384;&#26377;&#24456;&#22823;&#30340;&#24433;&#21709;&#26102;&#65288;<tt class="classname">Applet</tt>&#65289;&#12290;&#28982;&#21518;&#65292;&#32477;&#22823;&#22810;&#25968;"&#20856;&#22411;&#30340;"&#20225;&#19994;&#24212;&#29992;&#21644;&#31995;&#32479;&#65292;<tt class="interfacename">ApplicationContext</tt>&#23601;&#26159;&#20320;&#38656;&#35201;&#20351;&#29992;&#30340;&#12290;Spring2.0&#21450;&#20197;&#19978;&#29256;&#26412;&#65292;<span class="emphasis"><em>&#22823;&#37327;</em></span>&#20351;&#29992;&#20102;link linkend="beans-factory-extension-bpp"&gt;<tt class="interfacename">BeanPostProcessor</tt>&#25193;&#23637;&#65288;&#20197;&#20415;&#24212;&#29992;&#20195;&#29702;&#31561;&#21151;&#33021;&#65289;&#65292;&#22914;&#26524;&#20320;&#36873;&#25321;<tt class="interfacename">BeanFactory</tt>&#21017;&#26080;&#27861;&#20351;&#29992;&#30456;&#24403;&#22810;&#30340;&#25903;&#25345;&#21151;&#33021;&#65292;&#22914;&#20107;&#21153;&#21644;AOP&#65292;&#36825;&#21487;&#33021;&#20250;&#23548;&#33268;&#28151;&#20081;&#65292;&#22240;&#20026;&#37197;&#32622;&#24182;&#27809;&#26377;&#38169;&#35823;&#12290;</p><p>&#19979;&#38754;&#30340;&#21151;&#33021;&#30697;&#38453;&#21015;&#20986;&#20102;<tt class="interfacename">BeanFactory</tt>&#25552;&#20379;&#30340;&#21151;&#33021;&#21644;<tt class="interfacename">ApplicationContext</tt>&#25552;&#20379;&#30340;&#21151;&#33021;&#65288;&#21253;&#25324;&#20854;&#23454;&#29616;&#65289;&#12290;&#65288;&#19979;&#19968;&#33410;&#26356;&#28145;&#24230;&#30340;&#25551;&#36848;&#20102;<tt class="interfacename">ApplicationContext</tt>&#27604;<tt class="interfacename">BeanFactory</tt>&#26356;&#24378;&#30340;&#21151;&#33021;&#12290;&#65289;
      </p><div class="table"><a name="context-introduction-ctx-vs-beanfactory-feature-matrix"></a><p class="title"><b>Table&nbsp;3.5.&nbsp;Feature Matrix&#29305;&#24615;&#34920;</b></p><table summary="Feature Matrix" width="100%" border="1"><colgroup><col align="left"><col><col></colgroup><thead><tr><th align="center">&#29305;&#24615;</th><th align="center"><tt class="interfacename">BeanFactory</tt></th><th align="center"><tt class="interfacename">ApplicationContext</tt></th></tr></thead><tbody><tr><td align="left"><p>Bean &#23454;&#20363;&#21270;/&#35013;&#37197;</p></td><td align="center"><p>Yes</p></td><td align="center"><p>Yes</p></td></tr><tr><td align="left"><p>&#33258;&#21160;
              <tt class="interfacename">BeanPostProcessor</tt>
                &#27880;&#20876;</p></td><td align="center"><p>No</p></td><td align="center"><p>Yes</p></td></tr><tr><td align="left"><p>&#33258;&#21160;
              <tt class="interfacename">BeanFactoryPostProcessor</tt>
                &#27880;&#20876;</p></td><td align="center"><p>No</p></td><td align="center"><p>Yes</p></td></tr><tr><td align="left"><p>&#20415;&#25463;&#30340;
              <tt class="interfacename">MessageSource</tt> &#35775;&#38382;(
              i18n)</p></td><td align="center"><p>No</p></td><td align="center"><p>Yes</p></td></tr><tr><td align="left"><p><tt class="interfacename">ApplicationEvent</tt>
                &#21457;&#36865;</p></td><td align="center"><p>No</p></td><td align="center"><p>Yes</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="context-functionality-messagesource"></a>3.8.2.&nbsp;&#21033;&#29992;<tt class="literal">MessageSource</tt>&#23454;&#29616;&#22269;&#38469;&#21270;</h3></div></div><div></div></div><p><tt class="interfacename">ApplicationContext</tt>&#25509;&#21475;&#25193;&#23637;&#20102;<tt class="interfacename">MessageSource</tt>&#25509;&#21475;&#65292;&#22240;&#32780;&#25552;&#20379;&#20102;&#28040;&#24687;&#22788;&#29702;&#30340;&#21151;&#33021;&#65288;i18n&#25110;&#32773;&#22269;&#38469;&#21270;&#65289;&#12290;&#19982;<tt class="classname">HierarchicalMessageSource</tt>&#19968;&#36215;&#20351;&#29992;&#65292;&#23427;&#36824;&#33021;&#22815;&#22788;&#29702;&#23884;&#22871;&#30340;&#28040;&#24687;&#65292;&#36825;&#20123;&#26159;Spring&#25552;&#20379;&#30340;&#22788;&#29702;&#28040;&#24687;&#30340;&#22522;&#26412;&#25509;&#21475;&#12290;&#35753;&#25105;&#20204;&#24555;&#36895;&#27983;&#35272;&#19968;&#19979;&#23427;&#25152;&#23450;&#20041;&#30340;&#26041;&#27861;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">String getMessage(String code, Object[] args, String default, Locale loc)&#65306;&#29992;&#26469;&#20174;<tt class="interfacename">MessageSource</tt>&#33719;&#21462;&#28040;&#24687;&#30340;&#22522;&#26412;&#26041;&#27861;&#12290;&#22914;&#26524;&#22312;&#25351;&#23450;&#30340;locale&#20013;&#27809;&#26377;&#25214;&#21040;&#28040;&#24687;&#65292;&#21017;&#20351;&#29992;&#40664;&#35748;&#30340;&#28040;&#24687;&#12290;args&#20013;&#30340;&#21442;&#25968;&#23558;&#20351;&#29992;&#26631;&#20934;&#31867;&#24211;&#20013;&#30340;<tt class="literal">MessageFormat</tt>&#26469;&#20316;&#28040;&#24687;&#20013;&#26367;&#25442;&#20540;&#12290;</tt></p></li><li><p><tt class="literal">String getMessage(String code, Object[] args, Locale loc)&#65306;&#26412;&#36136;&#19978;&#21644;&#19978;&#19968;&#20010;&#26041;&#27861;&#30456;&#21516;&#65292;&#20854;&#21306;&#21035;&#22312;&#65306;&#27809;&#26377;&#25351;&#23450;&#40664;&#35748;&#20540;&#65292;&#22914;&#26524;&#27809;&#25214;&#21040;&#28040;&#24687;&#65292;&#20250;&#25243;&#20986;&#19968;&#20010;<tt class="classname">NoSuchMessageException</tt>&#24322;&#24120;&#12290;</tt></p></li><li><p><tt class="literal">String getMessage(MessageSourceResolvable resolvable, Locale locale)</tt>&#65306;&#19978;&#38754;&#26041;&#27861;&#20013;&#25152;&#20351;&#29992;&#30340;&#23646;&#24615;&#37117;&#23553;&#35013;&#21040;&#19968;&#20010;<tt class="interfacename">MessageSourceResolvable</tt>&#23454;&#29616;&#20013;&#65292;&#32780;&#26412;&#26041;&#27861;&#21487;&#20197;&#25351;&#23450;<tt class="interfacename">MessageSourceResolvable</tt>&#23454;&#29616;&#12290;</p></li></ul></div><p>&#24403;&#19968;&#20010;<tt class="interfacename">ApplicationContext</tt>&#34987;&#21152;&#36733;&#26102;&#65292;&#23427;&#20250;&#33258;&#21160;&#22312;context&#20013;&#26597;&#25214;&#24050;&#23450;&#20041;&#20026;<tt class="interfacename">MessageSource</tt>&#31867;&#22411;&#30340;bean&#12290;&#27492;bean&#30340;&#21517;&#31216;&#39035;&#20026;<tt class="literal">messageSource</tt>&#12290;&#22914;&#26524;&#25214;&#21040;&#65292;&#37027;&#20040;&#25152;&#26377;&#23545;&#19978;&#36848;&#26041;&#27861;&#30340;&#35843;&#29992;&#23558;&#34987;&#22996;&#25176;&#32473;&#35813;bean&#12290;&#21542;&#21017;<tt class="interfacename">ApplicationContext</tt>&#20250;&#22312;&#20854;&#29238;&#31867;&#20013;&#26597;&#25214;&#26159;&#21542;&#21547;&#26377;&#21516;&#21517;&#30340;bean&#12290;&#22914;&#26524;&#26377;&#65292;&#23601;&#25226;&#23427;&#20316;&#20026;<tt class="interfacename">MessageSource</tt>&#12290;&#22914;&#26524;&#23427;&#26368;&#32456;&#27809;&#26377;&#25214;&#21040;&#20219;&#20309;&#30340;&#28040;&#24687;&#28304;&#65292;&#19968;&#20010;&#31354;&#30340;<tt class="classname">StaticMessageSource</tt>&#23558;&#20250;&#34987;&#23454;&#20363;&#21270;&#65292;&#20351;&#23427;&#33021;&#22815;&#25509;&#21463;&#19978;&#36848;&#26041;&#27861;&#30340;&#35843;&#29992;&#12290;</p><p>Spring&#30446;&#21069;&#25552;&#20379;&#20102;&#20004;&#20010;<tt class="interfacename">MessageSource</tt>&#30340;&#23454;&#29616;:<tt class="classname">ResourceBundleMessageSource</tt>&#21644;<tt class="classname">StaticMessageSource</tt>&#12290;&#23427;&#20204;&#37117;&#32487;&#25215;<tt class="classname">NestingMessageSource</tt>&#20197;&#20415;&#33021;&#22815;&#22788;&#29702;&#23884;&#22871;&#30340;&#28040;&#24687;&#12290;<tt class="classname">StaticMessageSource</tt>&#24456;&#23569;&#34987;&#20351;&#29992;&#65292;&#20294;&#33021;&#20197;&#32534;&#31243;&#30340;&#26041;&#24335;&#21521;&#28040;&#24687;&#28304;&#28155;&#21152;&#28040;&#24687;&#12290;<tt class="classname">ResourceBundleMessageSource</tt>&#20250;&#29992;&#24471;&#26356;&#22810;&#19968;&#20123;&#65292;&#20026;&#27492;&#25552;&#20379;&#20102;&#19968;&#19979;&#31034;&#20363;&#65306;</p><pre class="programlisting">&lt;beans&gt;
  &lt;bean id="messageSource"
        class="org.springframework.context.support.ResourceBundleMessageSource"&gt;
    &lt;property name="basenames"&gt;
      &lt;list&gt;
        &lt;value&gt;format&lt;/value&gt;
        &lt;value&gt;exceptions&lt;/value&gt;
        &lt;value&gt;windows&lt;/value&gt;
      &lt;/list&gt;
    &lt;/property&gt;
  &lt;/bean&gt;
&lt;/beans&gt;</pre><p>&#36825;&#27573;&#37197;&#32622;&#20551;&#23450;&#22312;&#20320;&#30340;classpath&#20013;&#26377;&#19977;&#20010;&#36164;&#28304;&#25991;&#20214;&#65288;resource bundle&#65289;&#65292;&#23427;&#20204;&#26159;<tt class="literal">format</tt>&#65292;      <tt class="literal">exceptions</tt>&#21644;<tt class="literal">windows</tt>&#12290;&#36890;&#36807;ResourceBundle&#65292;&#20351;&#29992;JDK&#20013;&#35299;&#26512;&#28040;&#24687;&#30340;&#26631;&#20934;&#26041;&#24335;&#65292;&#26469;&#22788;&#29702;&#20219;&#20309;&#35299;&#26512;&#28040;&#24687;&#30340;&#35831;&#27714;&#12290;&#20986;&#20110;&#31034;&#20363;&#30340;&#30446;&#30340;&#65292;&#20551;&#23450;&#19978;&#38754;&#30340;&#20004;&#20010;&#36164;&#28304;&#25991;&#20214;&#30340;&#20869;&#23481;&#20026;&#8230;</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation"># in 'format.properties'</span></i>
message=Alligators rock!</pre><pre class="programlisting"><i class="lineannotation"><span class="lineannotation"># in 'exceptions.properties'</span></i>
argument.required=The '{0}' argument is required.</pre><p>&#19979;&#38754;&#26159;&#27979;&#35797;&#20195;&#30721;&#12290;&#22240;&#20026;<tt class="classname">ApplicationContext</tt>&#23454;&#29616;&#20063;&#37117;&#23454;&#29616;&#20102;<tt class="classname">MessageSource</tt>&#25509;&#21475;&#65292;&#25152;&#20197;&#33021;&#34987;&#36716;&#22411;&#20026;<tt class="classname">MessageSource</tt>&#25509;&#21475;</p><pre class="programlisting">public static void main(String[] args) {
    MessageSource resources = new ClassPathXmlApplicationContext("beans.xml");
    String message = resources.getMessage("message", null, "Default", null);
    System.out.println(message);
}</pre><p>&#19978;&#36848;&#31243;&#24207;&#30340;&#36755;&#20986;&#32467;&#26524;&#23558;&#20250;&#26159;...</p><pre class="programlisting">Alligators rock!</pre><p>&#24635;&#32780;&#35328;&#20043;&#65292;&#25105;&#20204;&#22312;<tt class="literal">'beans.xml'</tt>&#30340;&#25991;&#20214;&#20013;&#65288;&#22312;classpath&#26681;&#30446;&#24405;&#19979;&#65289;&#23450;&#20041;&#20102;&#19968;&#20010;<tt class="literal">messageSource</tt> bean&#65292;&#36890;&#36807;&#23427;&#30340;<tt class="literal">basenames</tt>&#23646;&#24615;&#24341;&#29992;&#22810;&#20010;&#36164;&#28304;&#25991;&#20214;&#65307;&#32780;<tt class="literal">basenames</tt>&#23646;&#24615;&#20540;&#30001;list&#20803;&#32032;&#25152;&#25351;&#23450;&#30340;&#19977;&#20010;&#20540;&#20256;&#20837;&#65292;&#23427;&#20204;&#20197;&#25991;&#20214;&#30340;&#24418;&#24335;&#23384;&#22312;&#24182;&#34987;&#25918;&#32622;&#22312;classpath&#30340;&#26681;&#30446;&#24405;&#19979;&#65288;&#20998;&#21035;&#20026;<tt class="literal">format.properties</tt>&#65292;<tt class="literal">exceptions.properties</tt>&#21644;<tt class="literal">windows.properties</tt>&#65289;&#12290;</p><p>&#20877;&#20998;&#26512;&#20010;&#20363;&#23376;&#65292;&#36825;&#27425;&#25105;&#20204;&#23558;&#30528;&#30524;&#20110;&#20256;&#36882;&#21442;&#25968;&#32473;&#26597;&#25214;&#30340;&#28040;&#24687;&#65292;&#36825;&#20123;&#21442;&#25968;&#23558;&#34987;&#36716;&#25442;&#20026;&#23383;&#31526;&#20018;&#24182;&#25554;&#20837;&#21040;&#24050;&#26597;&#25214;&#21040;&#30340;&#28040;&#24687;&#20013;&#30340;&#21344;&#20301;&#31526;&#65288;&#35793;&#27880;&#65306;&#36164;&#28304;&#25991;&#20214;&#20013;&#33457;&#25324;&#21495;&#37324;&#30340;&#25968;&#23383;&#21363;&#20026;&#21344;&#20301;&#31526;&#65289;&#12290;</p><pre class="programlisting">&lt;beans&gt;

    <i class="lineannotation"><span class="lineannotation">&lt;!-- this <tt class="interfacename">MessageSource</tt> is being used in a web application --&gt;</span></i>
    &lt;bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource"&gt;
        &lt;property name="baseName" value="WEB-INF/test-messages"/&gt;
    &lt;/bean&gt;
    
    <i class="lineannotation"><span class="lineannotation">&lt;!-- let's inject the above <tt class="interfacename">MessageSource</tt> into this POJO --&gt;</span></i>
    &lt;bean id="example" class="com.foo.Example"&gt;
        &lt;property name="messages" ref="messageSource"/&gt;
    &lt;/bean&gt;

&lt;/beans&gt;</pre><pre class="programlisting">public class Example {

    private MessageSource messages;

    public void setMessages(MessageSource messages) {
        this.messages = messages;
    }

    public void execute() {
        String message = this.messages.getMessage("argument.required",
            new Object [] {"userDao"}, "Required", null);
        System.out.println(message);
    }

}</pre><p>&#35843;&#29992;<tt class="methodname">execute()</tt>&#26041;&#27861;&#30340;&#36755;&#20986;&#32467;&#26524;&#26159;...</p><pre class="programlisting">The 'userDao' argument is required.</pre><p>&#23545;&#20110;&#22269;&#38469;&#21270;&#65288;i18n&#65289;&#65292;Spring&#20013;&#19981;&#21516;&#30340;<tt class="classname">MessageResource</tt>&#23454;&#29616;&#19982;JDK&#26631;&#20934;ResourceBundle&#20013;&#30340;locale&#35299;&#26512;&#35268;&#21017;&#19968;&#26679;&#12290;&#27604;&#22914;&#22312;&#19978;&#38754;&#20363;&#23376;&#20013;&#23450;&#20041;&#30340;<tt class="literal">messageSource</tt> bean&#65292;&#22914;&#26524;&#20320;&#24819;&#35299;&#26512;British (en-GB) locale&#30340;&#28040;&#24687;&#65292;&#37027;&#20040;&#38656;&#35201;&#21019;&#24314;<tt class="literal">format_en_GB.properties</tt>&#65292;<tt class="literal">exceptions_en_GB.properties</tt>&#21644;<tt class="literal">windows_en_GB.properties</tt>&#19977;&#20010;&#36164;&#28304;&#25991;&#20214;&#12290;</p><p>Locale&#35299;&#26512;&#36890;&#24120;&#30001;&#24212;&#29992;&#31243;&#24207;&#26681;&#25454;&#36816;&#34892;&#29615;&#22659;&#26469;&#25351;&#23450;&#12290;&#20986;&#20110;&#31034;&#20363;&#30340;&#30446;&#30340;&#65292;&#25105;&#20204;&#23545;&#23558;&#35201;&#22788;&#29702;&#30340;(British)&#28040;&#24687;&#25163;&#24037;&#25351;&#23450;locale&#21442;&#25968;&#20540;&#12290;</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation"># in 'exceptions_en_GB.properties'</span></i>
argument.required=Ebagum lad, the '{0}' argument is required, I say, required.</pre><pre class="programlisting">public static void main(final String[] args) {
    MessageSource resources = new ClassPathXmlApplicationContext("beans.xml");
    String message = resources.getMessage("argument.required",
        new Object [] {"userDao"}, "Required", Locale.UK);
    System.out.println(message);
}</pre><p>&#19978;&#36848;&#31243;&#24207;&#36816;&#34892;&#26102;&#30340;&#36755;&#20986;&#32467;&#26524;&#26159;...</p><pre class="programlisting">Ebagum lad, the 'userDao' argument is required, I say, required.</pre><p><tt class="classname">MessageSourceAware</tt>&#25509;&#21475;&#36824;&#33021;&#29992;&#20110;&#33719;&#21462;&#20219;&#20309;&#24050;&#23450;&#20041;&#30340;<tt class="classname">MessageSource</tt>&#24341;&#29992;&#12290;&#20219;&#20309;&#23454;&#29616;&#20102;<tt class="classname">MessageSourceAware</tt>&#25509;&#21475;&#30340;bean&#23558;&#22312;&#21019;&#24314;&#21644;&#37197;&#32622;&#30340;&#26102;&#20505;&#19982;<tt class="classname">MessageSource</tt>&#19968;&#21516;&#34987;&#27880;&#20837;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="context-functionality-events"></a>3.8.3.&nbsp;&#20107;&#20214;</h3></div></div><div></div></div><p><tt class="interfacename">ApplicationContext</tt>&#20013;&#30340;&#20107;&#20214;&#22788;&#29702;&#26159;&#36890;&#36807;<tt class="literal">ApplicationEvent</tt>&#31867;&#21644;<tt class="literal">ApplicationListener</tt>&#25509;&#21475;&#26469;&#25552;&#20379;&#30340;&#12290;&#22914;&#26524;&#22312;&#19978;&#19979;&#25991;&#20013;&#37096;&#32626;&#19968;&#20010;&#23454;&#29616;&#20102;<tt class="literal">ApplicationListener</tt>&#25509;&#21475;&#30340;bean&#65292;&#37027;&#20040;&#27599;&#24403;&#19968;&#20010;<tt class="literal">ApplicationEvent</tt>&#21457;&#24067;&#21040;<tt class="interfacename">ApplicationContext</tt>&#26102;&#65292;&#36825;&#20010;bean&#23601;&#24471;&#21040;&#36890;&#30693;&#12290;&#23454;&#36136;&#19978;&#65292;&#36825;&#26159;&#26631;&#20934;&#30340;<span class="emphasis"><em>Observer</em></span>&#35774;&#35745;&#27169;&#24335;&#12290;Spring&#25552;&#20379;&#20102;&#19977;&#20010;&#26631;&#20934;&#20107;&#20214;&#65306;</p><div class="table"><a name="beans-ctx-events-tbl"></a><p class="title"><b>Table&nbsp;3.6.&nbsp;&#20869;&#32622;&#20107;&#20214;</b></p><table summary="&#20869;&#32622;&#20107;&#20214;" border="1"><colgroup><col><col></colgroup><thead><tr><th>&#20107;&#20214;</th><th>&#35299;&#37322;</th></tr></thead><tbody><tr><td><tt class="classname">ContextRefreshedEvent</tt></td><td>
                    &#24403;<tt class="interfacename">ApplicationContext</tt>&#21021;&#22987;&#21270;&#25110;&#21047;&#26032;&#26102;&#21457;&#36865;&#30340;&#20107;&#20214;&#12290;&#22914;&#20351;&#29992;<tt class="interfacename">ConfigurableApplicationContext</tt>&#25509;&#21475;&#30340;<tt class="methodname">refresh()</tt>&#26041;&#27861;&#12290;&#36825;&#37324;&#30340;&#21021;&#22987;&#21270;&#24847;&#21619;&#30528;&#65306;&#25152;&#26377;&#30340;bean&#34987;&#35013;&#36733;&#65292;&#21518;&#22788;&#29702;bean&#34987;&#26816;&#27979;&#21644;&#28608;&#27963;&#65292;singleton&#34987;&#39044;&#23454;&#20363;&#21270;&#65292;&#20197;&#21450;<tt class="interfacename">ApplicationContext</tt>&#24050;&#23601;&#32490;&#21487;&#29992;&#12290;&#21047;&#26032;&#22312;context&#20851;&#38381;&#20250;&#35302;&#21457;&#22810;&#27425;&#12290;&#36873;&#25321;<tt class="interfacename">ApplicationContext</tt>&#21487;&#20197;&#25552;&#20379;&#8220;&#28909;&#8221;&#21047;&#26032;&#30340;&#21151;&#33021;(&#22914;&#65306;<tt class="classname">XmlWebApplicationContext</tt> &#21487;&#20197;&#20294;&#26159;<tt class="classname">GenericApplicationContext</tt> &#21017;&#19981;&#21487;&#20197;.)
              </td></tr><tr><td><tt class="classname">ContextStartedEvent</tt></td><td>&#24403;<tt class="interfacename">ApplicationContext</tt>&#21551;&#21160;&#26102;&#21457;&#36865;&#30340;&#20107;&#20214;,&#20351;&#29992;<tt class="interfacename">ConfigurableApplicationContext</tt>&#25509;&#21475;&#30340;<tt class="methodname">start()</tt>&#26041;&#27861;&#12290;&#36825;&#37324;"&#21551;&#21160;"&#24847;&#21619;&#30528;<tt class="interfacename">&#29983;&#21629;&#21608;&#26399;</tt> beans&#23558;&#33719;&#24471;&#19968;&#20010;&#30830;&#23454;&#30340;&#21551;&#21160;&#20449;&#21495;&#12290;&#36825;&#32463;&#24120;&#20351;&#29992;&#22312;&#30830;&#23454;&#20572;&#27490;&#21518;&#37325;&#26032;&#21551;&#21160;&#30340;&#22330;&#21512;&#65292;&#20294;&#20063;&#21487;&#20197;&#29992;&#22312;&#21551;&#21160;&#19968;&#20010;&#27809;&#26377;&#34987;&#37197;&#32622;&#20026;&#33258;&#21160;&#21551;&#21160;&#30340;&#32452;&#20214;&#20013;(&#22914;&#65306;&#22312;&#23436;&#25104;&#21021;&#22987;&#21270;&#21518;&#36824;&#27809;&#26377;&#21551;&#21160;)&#12290;
              </td></tr><tr><td><tt class="classname">ContextStoppedEvent</tt></td><td>&#24403;&#20351;&#29992;<tt class="interfacename">ConfigurableApplicationContext</tt>&#25509;&#21475;&#30340;<tt class="methodname">stop()</tt> &#26041;&#27861;&#20351;<tt class="interfacename">ApplicationContext</tt>&#20572;&#27490;&#26102;&#20505;&#21457;&#36865;&#30340;&#20107;&#20214;&#12290;&#36825;&#37324;"&#20572;&#27490;"&#24847;&#21619;&#30528;<tt class="interfacename">&#29983;&#21629;&#21608;&#26399;</tt> beans&#23558;&#33719;&#24471;&#19968;&#20010;&#30830;&#23454;&#30340;&#20572;&#27490;&#20449;&#21495;. &#20572;&#27490;&#30340;context&#21487;&#20197;&#36890;&#36807;&#35843;&#29992;<tt class="methodname">start()</tt>&#26469;&#37325;&#26032;&#21551;&#21160;&#12290;
              </td></tr><tr><td><tt class="classname">ContextClosedEvent</tt></td><td>&#24403;&#20351;&#29992;<tt class="interfacename">ConfigurableApplicationContext</tt>&#25509;&#21475;<tt class="methodname">close()</tt> &#26041;&#27861;&#20351;<tt class="interfacename">ApplicationContext</tt> &#20851;&#38381;&#26102;&#20505;&#21457;&#36865;&#30340;&#20107;&#20214;&#12290;                &#36825;&#37324;&#20851;&#38381;&#24847;&#21619;&#30528;&#25152;&#26377;&#30340;singleton bean&#37117;&#34987;&#38144;&#27585;&#12290;&#20851;&#38381;&#30340;context&#19981;&#33021;&#21047;&#26032;&#21644;&#37325;&#26032;&#21551;&#21160;&#12290;</td></tr><tr><td><tt class="classname">RequestHandledEvent</tt></td><td>web&#29305;&#24615;&#30340;&#20107;&#20214;&#36890;&#21578;&#25152;&#26377;&#30340;bean&#26377;&#19968;&#20010;http request&#65288;&#23558;&#22312;request&#32467;&#26463;&#21518;&#25165;&#20250;&#21457;&#36865;&#65289;&#12290;&#27880;&#24847;&#36825;&#31181;&#20107;&#20214;&#21482;&#20860;&#23481;&#20110;&#20351;&#29992;Spring<tt class="classname">DispatcherServlet</tt>&#20860;&#23481;&#30340;web&#24212;&#29992;&#12290;
              </td></tr></tbody></table></div><p>&#21482;&#35201;&#22312;<tt class="interfacename">ApplicationContext</tt>&#35843;&#29992;<tt class="methodname">publishEvent()</tt>&#26041;&#27861;&#21487;&#20197;&#24456;&#26041;&#20415;&#30340;&#23454;&#29616;&#33258;&#23450;&#20041;&#20107;&#20214;&#65292;&#23558;&#19968;&#20010;&#23454;&#29616;&#20102;<tt class="classname">ApplicationEvent</tt>&#30340;&#33258;&#23450;&#20041;&#20107;&#20214;&#31867;&#20316;&#20026;&#21442;&#25968;&#23601;&#21487;&#20197;&#20102;&#12290;&#20107;&#20214;&#30417;&#21548;&#22120;&#21516;&#27493;&#30340;&#25509;&#25910;&#20107;&#20214;&#12290;&#36825;&#24847;&#21619;&#30528;<tt class="methodname">publishEvent()</tt>&#26041;&#27861;&#23558;&#34987;&#38459;&#22622;&#65292;&#30452;&#21040;&#25152;&#26377;&#30340;&#30417;&#21548;&#22120;&#37117;&#22788;&#29702;&#23436;&#20107;&#20214;(&#21487;&#20197;&#36890;&#36807;&#19968;&#20010;<tt class="interfacename">ApplicationEventMulticaster</tt>&#30340;&#23454;&#29616;&#25552;&#20379;&#21487;&#36873;&#30340;&#20107;&#20214;&#21457;&#36865;&#31574;&#30053;)&#12290;&#27492;&#22806;&#65292;&#22914;&#26524;&#20107;&#21153;context&#21487;&#29992;&#65292;&#30417;&#21548;&#22120;&#20250;&#25509;&#25910;&#21040;&#19968;&#21547;&#26377;&#21457;&#36865;&#32773;&#20107;&#21153;context&#30340;&#20107;&#20214;&#12290;
      </p><p>&#30475;&#19968;&#20010;&#20363;&#23376;,&#39318;&#20808;&#26159;<tt class="interfacename">ApplicationContext</tt>:</p><pre class="programlisting">&lt;bean id="emailer" class="example.EmailBean"&gt;
  &lt;property name="blackList"&gt;
    &lt;list&gt;
      &lt;value&gt;black@list.org&lt;/value&gt;
      &lt;value&gt;white@list.org&lt;/value&gt;
      &lt;value&gt;john@doe.org&lt;/value&gt;
    &lt;/list&gt;
  &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id="blackListListener" class="example.BlackListNotifier"&gt;
  &lt;property name="notificationAddress" value="spam@list.org"/&gt;
&lt;/bean&gt;</pre><p>&#20877;&#30475;&#19968;&#19979;&#23454;&#38469;&#30340;&#31867;:</p><pre class="programlisting">public class EmailBean implements ApplicationContextAware {

    private List blackList;
	private ApplicationContext ctx;

    public void setBlackList(List blackList) {
        this.blackList = blackList;
    }

    public void setApplicationContext(ApplicationContext ctx) {
        this.ctx = ctx;
    }

    public void sendEmail(String address, String text) {
        if (blackList.contains(address)) {
            BlackListEvent event = new BlackListEvent(address, text);
            ctx.publishEvent(event);
            return;
        }
        <i class="lineannotation"><span class="lineannotation">// send email...</span></i>
    }
}</pre><pre class="programlisting">public class BlackListNotifier implements ApplicationListener {

    private String notificationAddress;
    
    public void setNotificationAddress(String notificationAddress) {
        this.notificationAddress = notificationAddress;
    }

    public void onApplicationEvent(ApplicationEvent event) {
        if (event instanceof BlackListEvent) {
            <i class="lineannotation"><span class="lineannotation">// notify appropriate person...</span></i>
        }
    }
}</pre><p>&#24403;&#28982;&#65292;&#36825;&#20010;&#20363;&#23376;&#21487;&#20197;&#20351;&#29992;&#26356;&#22909;&#30340;&#26041;&#27861;&#23454;&#29616;&#65288;&#22914;&#37319;&#29992;AOP&#29305;&#24615;&#65289; &#65292;&#20294;&#24212;&#35813;&#36275;&#20197;&#35828;&#26126;&#20107;&#20214;&#30340;&#22522;&#26412;&#26426;&#21046;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="context-functionality-resources"></a>3.8.4.&nbsp;&#24213;&#23618;&#36164;&#28304;&#30340;&#35775;&#38382;</h3></div></div><div></div></div><p>&#20026;&#20102;&#26356;&#22909;&#30340;&#20351;&#29992;&#21644;&#29702;&#35299;&#24212;&#29992;&#19978;&#19979;&#25991;&#65292;&#36890;&#24120;&#29992;&#25143;&#24212;&#24403;&#23545;Spring&#30340;<tt class="interfacename">Resource</tt>&#26377;&#25152;&#20102;&#35299;&#65292;&#35814;&#35265;<a href="#resources" title="Chapter&nbsp;4.&nbsp;&#36164;&#28304;">Chapter&nbsp;4, <i>&#36164;&#28304;</i></a></p><p>&#24212;&#29992;&#19978;&#19979;&#25991;&#21516;&#26102;&#20063;&#26159;&#20010;&#36164;&#28304;&#21152;&#36733;&#22120;&#65288;ResourceLoader&#65289;&#65292;&#33021;&#34987;&#29992;&#26469;&#21152;&#36733;&#22810;&#20010;<tt class="interfacename">Resource</tt>&#12290;&#19968;&#20010;<tt class="interfacename">Resource</tt>&#23454;&#36136;&#19978;&#21487;&#20197;&#24403;&#25104;&#19968;&#20010;<tt class="literal">java.net.URL</tt>&#65292;&#21487;&#34987;&#29992;&#26469;&#20174;&#22823;&#22810;&#25968;&#20301;&#32622;&#20197;&#36879;&#26126;&#30340;&#26041;&#24335;&#33719;&#21462;&#24213;&#23618;&#30340;&#36164;&#28304;&#65292;&#21253;&#25324;&#20174;classpath&#12289;&#25991;&#20214;&#31995;&#32479;&#20301;&#32622;&#12289;&#20219;&#20309;&#20197;&#26631;&#20934;URL&#25551;&#36848;&#30340;&#20301;&#32622;&#20197;&#21450;&#20854;&#23427;&#19968;&#20123;&#21464;&#31181;&#12290;&#22914;&#26524;&#36164;&#28304;&#20301;&#32622;&#20018;&#26159;&#19968;&#20010;&#27809;&#26377;&#20219;&#20309;&#21069;&#32512;&#30340;&#31616;&#21333;&#36335;&#24452;&#65292;&#36825;&#20123;&#36164;&#28304;&#26469;&#33258;&#20309;&#22788;&#21462;&#20915;&#20110;&#23454;&#38469;&#24212;&#29992;&#19978;&#19979;&#25991;&#30340;&#31867;&#22411;&#12290;</p><p>&#20026;&#20102;&#35753;bean&#33021;&#35775;&#38382;&#38745;&#24577;&#36164;&#28304;&#65292;&#21487;&#20197;&#35937;&#20854;&#23427;&#23646;&#24615;&#19968;&#26679;&#27880;&#20837;Resource&#12290;&#34987;&#27880;&#20837;&#30340;<tt class="interfacename">Resource</tt>&#23646;&#24615;&#20540;&#21487;&#20197;&#26159;&#31616;&#21333;&#30340;&#36335;&#24452;&#23383;&#31526;&#20018;&#65292;ApplicationContext&#20250;&#20351;&#29992;&#24050;&#27880;&#20876;&#30340;<tt class="interfacename">PropertyEditor</tt>&#65292;&#26469;&#23558;&#23383;&#31526;&#20018;&#36716;&#25442;&#20026;&#23454;&#38469;&#30340;<tt class="interfacename">Resource</tt>&#23545;&#35937;&#12290;</p><p><tt class="interfacename">ApplicationContext</tt>&#26500;&#36896;&#22120;&#30340;&#36335;&#24452;&#23601;&#26159;&#23454;&#38469;&#30340;&#36164;&#28304;&#20018;&#65292;&#26681;&#25454;&#19981;&#21516;&#30340;&#19978;&#19979;&#25991;&#23454;&#29616;&#65292;&#23383;&#31526;&#20018;&#21487;&#35270;&#20026;&#19981;&#21516;&#30340;&#24418;&#24335;&#65288;&#20363;&#22914;&#65306;<tt class="classname">ClassPathXmlApplicationContext</tt>&#20250;&#25226;&#36335;&#24452;&#23383;&#31526;&#20018;&#30475;&#20316;&#19968;&#20010;classpath&#36335;&#24452;&#65289;&#12290;&#28982;&#32780;&#65292;&#23427;&#20063;&#21487;&#20197;&#20351;&#29992;&#29305;&#23450;&#30340;&#21069;&#32512;&#26469;&#24378;&#21046;&#22320;&#20174;classpath&#25110;URL&#21152;&#36733;bean&#23450;&#20041;&#25991;&#20214;&#65292;&#32780;&#19981;&#31649;&#23454;&#38469;&#30340;&#19978;&#19979;&#25991;&#31867;&#22411;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="context-create"></a>3.8.5.&nbsp;<tt class="interfacename">ApplicationContext</tt>&#22312;WEB&#24212;&#29992;&#20013;&#30340;&#23454;&#20363;&#21270;</h3></div></div><div></div></div><p>&#19982;<tt class="interfacename">BeanFactory</tt>&#36890;&#24120;&#20197;&#32534;&#31243;&#30340;&#26041;&#24335;&#34987;&#21019;&#24314;&#19981;&#21516;&#30340;&#26159;&#65292;<tt class="interfacename">ApplicationContext</tt>&#33021;&#20197;&#22768;&#26126;&#30340;&#26041;&#24335;&#21019;&#24314;&#65292;&#22914;&#20351;&#29992;<tt class="interfacename">ContextLoader</tt>&#12290;&#24403;&#28982;&#20320;&#20063;&#21487;&#20197;&#20351;&#29992;<tt class="interfacename">ApplicationContext</tt>&#30340;&#23454;&#29616;&#20043;&#19968;&#26469;&#20197;&#32534;&#31243;&#30340;&#26041;&#24335;&#21019;&#24314;<tt class="interfacename">ApplicationContext</tt>&#23454;&#20363;&#12290;&#39318;&#20808;&#65292;&#35753;&#25105;&#20204;&#20808;&#20998;&#26512;<tt class="interfacename">ContextLoader</tt>&#25509;&#21475;&#21450;&#20854;&#23454;&#29616;&#12290;</p><p><tt class="classname">ContextLoader</tt>&#26426;&#21046;&#26377;&#20004;&#31181;&#26041;&#24335;&#65292;<tt class="classname">ContextLoaderListener</tt> &#21644;<tt class="classname">ContextLoaderServlet</tt>&#65292;
&#20182;&#20204;&#21151;&#33021;&#30456;&#21516;&#20294;&#26159;listener&#19981;&#33021;&#22312;Servlet2.3&#23481;&#22120;&#19979;&#20351;&#29992;&#12290;Servlet2.4&#35268;&#33539;&#20013;servlet context
listeners&#38656;&#35201;&#22312;web&#24212;&#29992;&#21551;&#21160;&#24182;&#33021;&#22788;&#29702;&#21021;&#22987;&#35831;&#27714;&#26102;&#31435;&#21363;&#36816;&#34892;&#12290;(servlet context
listener&#20851;&#38381;&#30340;&#26102;&#20505;&#20063;&#26159;&#30456;&#21516;&#30340;)&#12290;servlet context listener&#26159;&#21021;&#22987;&#21270;Spring <tt class="interfacename">ApplicationContext</tt>&#29702;&#24819;&#30340;&#26041;&#24335;&#12290;&#20320;&#21487;&#33021;&#24895;&#24847;&#36873;&#25321;<tt class="classname">ContextLoaderListener</tt>&#65292;&#34429;&#28982;&#26159;&#19968;&#26679;&#30340;&#65292;&#20294;&#20915;&#23450;&#26435;&#22312;&#20110;&#20320;&#12290;&#20320;&#21487;&#20197;&#26597;&#30475;<tt class="classname">ContextLoaderServlet</tt>&#30340;Javadoc&#26469;&#33719;&#24471;&#26356;&#35814;&#32454;&#30340;&#20449;&#24687;&#12290;</p><p>&#21487;&#20197;&#35937;&#19979;&#38754;&#25152;&#31034;&#20363;&#30340;&#19968;&#26679;&#20351;&#29992;<tt class="classname">ContextLoaderListener</tt>&#27880;&#20876;&#19968;&#20010;<tt class="interfacename">ApplicationContext</tt></p><pre class="programlisting">&lt;context-param&gt;
  &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
  &lt;param-value&gt;/WEB-INF/daoContext.xml /WEB-INF/applicationContext.xml&lt;/param-value&gt;
&lt;/context-param&gt;

&lt;listener&gt;
  &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;
&lt;/listener&gt;

<i class="lineannotation"><span class="lineannotation">&lt;!-- or use the <tt class="classname">ContextLoaderServlet</tt> instead of the above listener</span></i><span class="emphasis"><em>
&lt;servlet&gt;
  &lt;servlet-name&gt;context&lt;/servlet-name&gt;
  &lt;servlet-class&gt;org.springframework.web.context.ContextLoaderServlet&lt;/servlet-class&gt;
  &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
&lt;/servlet&gt;
--</em></span>&gt;</pre><p>&#30417;&#21548;&#22120;&#39318;&#20808;&#26816;&#26597;<tt class="literal">contextConfigLocation</tt>&#21442;&#25968;&#65292;&#22914;&#26524;&#23427;&#19981;&#23384;&#22312;&#65292;&#23427;&#23558;&#20351;&#29992;<tt class="literal">/WEB-INF/applicationContext.xml</tt>&#20316;&#20026;&#40664;&#35748;&#20540;&#12290;&#22914;&#26524;&#24050;&#23384;&#22312;&#65292;&#23427;&#23558;&#20351;&#29992;&#20998;&#38548;&#31526;&#65288;&#36887;&#21495;&#12289;&#20882;&#21495;&#25110;&#31354;&#26684;&#65289;&#23558;&#23383;&#31526;&#20018;&#20998;&#35299;&#25104;&#24212;&#29992;&#19978;&#19979;&#25991;&#20214;&#20301;&#32622;&#36335;&#24452;&#12290;&#21487;&#20197;&#25903;&#25345;ant-&#39118;&#26684;&#30340;&#36335;&#24452;&#27169;&#24335;&#65292;&#22914;<tt class="literal">/WEB-INF/*Context.xml</tt>(WEB-INF&#25991;&#20214;&#22841;&#19979;&#25152;&#26377;&#20197;"Context.xml"&#32467;&#23614;&#30340;&#25991;&#20214;)&#12290;&#25110;&#32773;<tt class="literal">/WEB-INF/**/*Context.xml</tt>(WEB-INF&#25991;&#20214;&#22841;&#21450;&#23376;&#25991;&#20214;&#22841;&#19979;&#30340;&#20197;"Context.xml"&#32467;&#23614;&#30340;&#25991;&#20214;)&#12290;
      </p><p><tt class="classname">ContextLoaderServlet</tt>&#21516;<tt class="classname">ContextLoaderListener</tt>&#19968;&#26679;&#20351;&#29992;<tt class="literal">'contextConfigLocation'</tt>&#21442;&#25968;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="beans-glue-code-and-singletons"></a>3.9.&nbsp;&#31896;&#21512;&#20195;&#30721;&#21644;&#21487;&#24597;&#30340;singleton</h2></div></div><div></div></div><p>&#19968;
&#20010;&#24212;&#29992;&#20013;&#30340;&#22823;&#22810;&#25968;&#20195;&#30721;&#26368;&#22909;&#20889;&#25104;&#20381;&#36182;&#27880;&#20837;&#65288;&#25511;&#21046;&#21453;&#36716;&#65289;&#30340;&#39118;&#26684;&#65292;&#36825;&#26679;&#20195;&#30721;&#23601;&#21644;Spring
IoC&#23481;&#22120;&#26080;&#20851;&#65292;&#23427;&#20204;&#22312;&#34987;&#21019;&#24314;&#26102;&#20174;&#23481;&#22120;&#24471;&#21040;&#33258;&#24049;&#30340;&#20381;&#36182;&#65292;&#24182;&#19988;&#23436;&#20840;&#19981;&#30693;&#36947;&#23481;&#22120;&#30340;&#23384;&#22312;&#12290;&#28982;&#32780;&#65292;&#23545;&#20110;&#23569;&#37327;&#38656;&#35201;&#19982;&#20854;&#23427;&#20195;&#30721;&#31896;&#21512;&#30340;&#31896;&#21512;&#23618;&#20195;&#30721;&#26469;&#35828;&#65292;&#26377;&#26102;&#20505;&#23601;&#38656;&#35201;&#20197;&#19968;
&#31181;singleton&#65288;&#25110;&#32773;&#31867;&#20284;singleton&#65289;&#30340;&#26041;&#24335;&#26469;&#35775;&#38382;Spring IoC&#23481;&#22120;&#12290;&#20363;&#22914;&#65292;&#31532;&#19977;&#26041;&#30340;&#20195;&#30721;&#21487;&#33021;&#35797;&#22270;&#65288;&#20197;<tt class="literal">Class.forName()</tt>&#30340;
&#26041;&#24335;&#65289;&#30452;&#25509;&#26500;&#36896;&#19968;&#20010;&#26032;&#30340;&#23545;&#35937;&#65292;&#20294;&#26080;&#27861;&#24378;&#21046;&#23427;&#20204;&#20174;Spring
IoC&#23481;&#22120;&#20013;&#24471;&#21040;&#36825;&#20123;&#23545;&#35937;&#12290;&#22914;&#26524;&#31532;&#19977;&#26041;&#20195;&#30721;&#26500;&#36896;&#30340;&#23545;&#35937;&#21482;&#26159;&#19968;&#20010;&#23567;stub&#25110;proxy&#65292;&#24182;&#19988;&#20351;&#29992;singleton&#26041;&#24335;&#35775;&#38382;Spring
IoC&#23481;&#22120;&#26469;&#33719;&#24471;&#30495;&#27491;&#30340;&#23545;&#35937;&#65292;&#37027;&#20040;&#22823;&#22810;&#25968;&#30340;&#20195;&#30721;&#65288;&#30001;&#23481;&#22120;&#20135;&#29983;&#30340;&#23545;&#35937;&#65289;&#20173;&#28982;&#21487;&#20197;&#20351;&#29992;&#25511;&#21046;&#21453;&#36716;&#12290;&#22240;&#27492;&#22823;&#22810;&#25968;&#30340;&#20195;&#30721;&#20381;&#28982;&#19981;&#38656;&#35201;&#30693;&#36947;&#23481;&#22120;&#30340;&#23384;&#22312;&#65292;&#25110;&#32773;&#23427;&#22914;&#20309;&#34987;&#35775;
&#38382;&#65292;&#24182;&#20445;&#25345;&#19982;&#20854;&#23427;&#20195;&#30721;&#30340;&#35299;&#32806;&#65292;&#36825;&#26679;&#25152;&#24102;&#26469;&#30340;&#30410;&#22788;&#26159;&#24456;&#26174;&#28982;&#30340;&#12290;EJB&#20063;&#21487;&#20197;&#20351;&#29992;&#36825;&#31181;stub/proxy&#26041;&#26696;&#20195;&#29702;&#21040;&#30001;Spring
IoC&#23481;&#22120;&#20135;&#29983;&#30340;&#26222;&#36890;&#30340;Java&#23454;&#29616;&#23545;&#35937;&#12290;&#34429;&#28982;&#29702;&#24819;&#24773;&#20917;&#19979;Spring
IoC&#23481;&#22120;&#19981;&#38656;&#35201;&#26159;singleton&#65292;&#20294;&#26159;&#22914;&#26524;&#27599;&#20010;bean&#20351;&#29992;&#23427;&#33258;&#24049;&#30340;non-singleton&#30340;Spring IoC&#23481;&#22120;&#65288;&#24403;&#22312;Spring
IoC&#23481;&#22120;&#20013;&#20351;&#29992;bean&#26102;&#65292;&#22914;Hibernate <tt class="interfacename">SessionFactory</tt>&#65289;&#65292;&#23545;&#20110;&#20869;&#23384;&#20351;&#29992;&#25110;&#21021;&#22987;&#21270;&#27425;&#25968;&#37117;&#26159;&#19981;&#20999;&#23454;&#38469;&#12290;</p><p>&#21478;
&#19968;&#20010;&#20363;&#23376;&#65292;&#22312;&#19968;&#20010;&#22810;&#23618;&#30340;&#22797;&#26434;&#30340;J2EE&#24212;&#29992;&#20013;&#65288;&#27604;&#22914;&#19981;&#21516;&#30340;JAR&#65292;EJB&#65292;&#20197;&#21450;WAR&#25171;&#21253;&#25104;&#19968;&#20010;EAR&#65289;&#65292;&#27599;&#19968;&#23618;&#37117;&#26377;&#33258;&#24049;&#30340;Spring
IoC&#23481;&#22120;&#23450;&#20041;&#65288;&#26377;&#25928;&#22320;&#32452;&#25104;&#19968;&#20010;&#23618;&#27425;&#32467;&#26500;&#65289;&#65292;&#22914;&#26524;&#39030;&#23618;&#21482;&#26377;&#19968;&#20010;web-app&#65288;WAR&#65289;&#30340;&#35805;&#65292;&#27604;&#36739;&#22909;&#30340;&#20570;&#27861;&#26159;&#31616;&#21333;&#22320;&#21019;&#24314;&#19968;&#20010;&#30001;&#19981;&#21516;&#23618;&#30340;XML&#23450;&#20041;&#25991;&#20214;&#32452;&#25104;
&#30340;&#32452;&#21512;Spring IoC&#23481;&#22120;&#12290;&#25152;&#26377;&#19981;&#21516;&#30340;Spring
IoC&#23481;&#22120;&#23454;&#29616;&#37117;&#21487;&#20197;&#20197;&#36825;&#31181;&#26041;&#24335;&#20174;&#22810;&#20010;&#23450;&#20041;&#25991;&#20214;&#26500;&#36896;&#20986;&#26469;&#12290;&#20294;&#26159;&#65292;&#22914;&#26524;&#22312;&#39030;&#23618;&#26377;&#22810;&#20010;&#20804;&#24351;web-apps&#65292;&#20026;&#27599;&#19968;&#20010;web-app&#21019;&#24314;&#19968;&#20010;Spring
IoC&#23481;&#22120;&#65292;&#32780;&#27599;&#20010;ApplicationContext&#37117;&#21253;&#21547;&#22823;&#37096;&#20998;&#30456;&#21516;&#30340;&#24213;&#23618;&#30340;bean&#23450;&#20041;&#12290;&#22240;&#32780;&#23601;&#20250;&#22240;&#20869;&#23384;&#20351;&#29992;&#65292;&#24314;bean&#30340;&#22810;&#20010;&#22797;&#26412;&#20250;&#33457;&#24456;&#38271;&#26102;&#38388;
&#21021;&#22987;&#21270;&#65288;&#27604;&#22914;Hibernate <tt class="interfacename">SessionFactory</tt>&#65289;&#65292;&#20197;&#21450;&#20854;&#23427;&#21487;&#33021;&#20135;&#29983;&#30340;&#21103;&#20316;&#29992;&#32780;&#20135;&#29983;&#38382;&#39064;&#12290;&#20316;&#20026;&#21478;&#19968;&#21487;&#36873;&#30340;&#26041;&#26696;&#65292;&#35937;<tt class="literal"><a href="http://www.springframework.org/docs/api/org/springframework/context/access/ContextSingletonBeanFactoryLocator.html" target="_top">ContextSingletonBeanFactoryLocator</a></tt>&#21644;<tt class="literal"><a href="http://www.springframework.org/docs/api/org/springframework/beans/factory/access/SingletonBeanFactoryLocator.html" target="_top">SingletonBeanFactoryLocator</a></tt>&#30340;&#31867;&#21487;&#20197;&#22312;&#38656;&#35201;&#30340;&#26102;&#20505;&#20197;&#26377;&#25928;&#30340;singleton&#26041;&#24335;&#65292;&#21152;&#36733;&#22810;&#23618;&#27425;&#30340;&#65288;&#27604;&#22914;&#19968;&#20010;&#26159;&#21478;&#19968;&#20010;&#30340;&#29238;&#20146;&#65289;Spring IoC&#23481;&#22120;&#65292;&#36825;&#20123;&#23558;&#20250;&#20316;&#20026;web&#24212;&#29992;&#30340;Spring IoC&#23481;&#22120;&#30340;&#29238;&#23481;&#22120;&#12290;&#30001;&#27492;&#24213;&#23618;&#30340;bean&#23450;&#20041;&#21482;&#22312;&#38656;&#35201;&#30340;&#26102;&#20505;&#21152;&#36733;&#65288;&#24182;&#19988;&#21482;&#34987;&#21152;&#36733;&#19968;&#27425;&#65289;&#12290;</p><p>&#20320;&#21487;&#20197;&#26597;&#30475;<a href="http://www.springframework.org/docs/api/org/springframework/beans/factory/access/SingletonBeanFactoryLocator.html" target="_top">SingletonBeanFactoryLocator</a>&#21644;<a href="http://www.springframework.org/docs/api/org/springframework/context/access/ContextSingletonBeanFactoryLocator.html" target="_top">ContextSingletonBeanFactoryLocator</a>&#30340;JavaDoc&#26469;&#33719;&#24471;&#35814;&#32454;&#30340;&#20363;&#23376;&#12290;&#27491;&#22914;&#22312;<a href="#ejb" title="Chapter&nbsp;18.&nbsp;Enterprise Java Beans (EJB) &#38598;&#25104;">EJB</a>&#37027;&#31456;&#25152;&#25552;&#21040;&#30340;&#65292;Spring&#20026;EJB&#25552;&#20379;&#26041;&#20415;&#20351;&#29992;&#30340;&#22522;&#31867;&#65292;&#36890;&#24120;&#20351;&#29992;&#19968;&#20010;non-singleton&#30340;<tt class="interfacename">BeanFactoryLocator</tt>&#23454;&#29616;&#65292;&#36825;&#26679;&#22312;&#38656;&#35201;&#26102;&#23601;&#21487;&#20197;&#24456;&#23481;&#26131;&#22320;&#34987;<tt class="classname">SingletonBeanFactoryLocator</tt>&#21644;<tt class="classname">ContextSingletonBeanFactoryLocator</tt>&#26367;&#25442;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="beans-rar-deployment"></a>3.10.&nbsp;&#20197;J2EE RAR&#25991;&#20214;&#30340;&#24418;&#24335;&#37096;&#32626;Spring ApplicationContext</h2></div></div><div></div></div><p>&#33258;
&#20174;Spring 2.5&#20043;&#21518;&#65292;&#25105;&#20204;&#23601;&#21487;&#20197;RAR&#25991;&#20214;&#30340;&#24418;&#24335;&#37096;&#32626;Spring
ApplicationContext&#65292;&#35813;&#25991;&#20214;&#23558;&#24212;&#29992;&#19978;&#19979;&#25991;&#65292;&#25152;&#26377;&#38656;&#35201;&#30340;bean&#20197;&#21450;JARs&#25991;&#20214;&#23553;&#35013;&#21040;&#19968;&#20010;J2EE
RAR&#37096;&#32626;&#21333;&#20803;&#20013;&#12290;&#36825;&#19982;&#24341;&#23548;&#21551;&#21160;&#19968;&#20010;&#29420;&#31435;&#30340; ApplicationContext
&#26159;&#19968;&#26679;&#30340;&#65292;&#21482;&#26159;&#23427;&#35201;&#23492;&#23621;&#20110;J2EE&#29615;&#22659;&#20869;&#65292;&#20197;&#20415;&#33021;&#22815;&#35775;&#38382;J2EE&#26381;&#21153;&#22120;&#25552;&#20379;&#30340;&#22522;&#26412;&#21151;&#33021;&#12290;&#36825;&#31181;RAR&#30340;&#37096;&#32626;&#23545;&#20110;&#37027;&#20123;&#24120;&#35265;&#30340;&#24212;&#29992;&#22330;&#26223;&#20934;&#22791;&#20197;&#19968;&#31181;&#26356;&#21152;&#8220;&#33258;&#28982;&#8221;&#30340;
&#26041;&#24335;&#21435;&#37096;&#32626;&#19968;&#20010;&#27809;&#26377;&#22836;(headless)&#30340;WAR&#25991;&#20214;&#8212;&#8212;&#23601;&#26159;&#35828;&#65306;&#19968;&#20010;&#27809;&#26377;&#20219;&#20309;HTTP&#20837;&#21475;&#28857;&#65292;&#32780;&#21482;&#29992;&#20110;&#22312;J2EE&#29615;&#22659;&#20013;&#21551;&#21160;&#19968;&#20010;Spring
ApplicationContext&#30340;WAR&#25991;&#20214;&#12290;</p><p>RAR&#37096;&#32626;&#23545;&#20110;&#37027;&#20123;&#19981;&#38656;&#35201;&#20219;&#20309;HTTP&#20837;&#21475;&#28857;&#32780;&#20165;&#21253;&#21547;&#28040;&#24687;&#33410;&#28857;&#19982;&#20219;&#21153;&#23433;&#25490;&#31561;&#30340;&#24212;&#29992;&#19978;&#19979;
&#25991;&#26469;&#35828;&#38750;&#24120;&#29702;&#24819;&#12290;&#22312;&#36825;&#26679;&#30340;&#19978;&#19979;&#25991;&#20013;&#30340;Beans&#21487;&#20197;&#20351;&#29992;&#24212;&#29992;&#26381;&#21153;&#22120;&#36164;&#28304;&#65292;&#20363;&#22914;JTA&#20107;&#21153;&#31649;&#29702;&#65292;&#32465;&#23450;&#21040;JNDI&#30340;JDBC&#25968;&#25454;&#28304;&#65292;JMS
ConnectionFactory&#23454;&#20363;&#65292;&#21516;&#26102;&#36825;&#20123;beans&#36824;&#21487;&#20197;&#27880;&#20876;&#21040;&#24179;&#21488;&#19978;&#30340;JMX&#26381;&#21153;&#22120;&#8212;&#8212;&#25152;&#26377;&#36825;&#20123;&#37117;&#36890;&#36807;Spring&#26631;&#20934;&#30340;&#20107;&#21153;&#31649;&#29702;&#19982;JNDI
&#20197;&#21450;JMX&#25903;&#25345;&#30340;&#21151;&#33021;&#26469;&#23454;&#29616;&#30340;&#12290;&#24212;&#29992;&#32452;&#20214;&#20063;&#21487;&#20197;&#36890;&#36807;Spring&#30340;<tt class="interfacename">TaskExecutor</tt> &#25509;&#21475;&#19982;&#24212;&#29992;&#26381;&#21153;&#22120;&#30340;JCA WorkManager&#36827;&#34892;&#20132;&#20114;&#12290;</p><p>&#26597;&#30475;<a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/jca/context/SpringContextResourceAdapter.html" target="_top">SpringContextResourceAdapter</a>&#31867;&#30340;JavaDoc&#65292;&#20197;&#20102;&#35299;&#20851;&#20110;RAR&#37096;&#32626;&#30340;&#37197;&#32622;&#32454;&#33410;&#12290;</p><p><span class="emphasis"><em>&#23545;&#20110;&#31616;&#21333;&#30340;&#37096;&#32626;&#65292;&#24744;&#35201;&#20570;&#30340;&#20107;&#24773;&#22914;&#19979;&#65306;</em></span>&#23558;&#25152;&#26377;&#24212;&#29992;&#31867;&#25171;&#21253;&#25104;RAR&#25991;&#20214;&#65288;&#27492;&#25991;&#20214;&#26159;&#26631;&#20934;&#30340; JAR &#25991;&#20214;&#65292;&#21482;&#26159;&#25193;&#23637;&#21517;&#19981;&#21516;&#65289;&#65292;&#23558;&#25152;&#26377;&#38656;&#35201;&#30340;jars&#21253;&#28155;&#21152;&#21040;&#35813;RAR&#25991;&#20214;&#30340;&#26681;&#30446;&#24405;&#20013;&#65292;&#28155;&#21152;&#19968;&#20010;&#8221;META-INF/ra.xml&#8220;&#37096;&#32626;&#25551;&#36848;&#31526;&#65288;&#21442;&#35265;<tt class="classname">SpringContextResourceAdapter</tt>&#30340;JavaDoc&#65289;&#21450;&#30456;&#24212;&#30340;Spring XML bean&#23450;&#20041;&#25991;&#20214;&#65288;&#20856;&#22411;&#24773;&#20917;&#19979;&#20026;"META-INF/applicationContext.xml"&#65289;&#26368;&#21518;&#25226;&#36825;&#20010; RAR &#25991;&#20214;&#25918;&#21040;&#24744;&#30340;&#24212;&#29992;&#26381;&#21153;&#22120;&#30340;&#37096;&#32626;&#30446;&#24405;&#20013;&#65281;</p><p><span class="emphasis"><em>&#27880;&#24847;&#65306;</em></span>&#36825;
&#20010;RAR&#37096;&#32626;&#21333;&#20803;&#19968;&#33324;&#26159;&#33258;&#21253;&#21547;&#30340;&#65307;&#20182;&#20204;&#27809;&#26377;&#23558;&#32452;&#20214;&#26292;&#38706;&#32473;&#8220;&#22806;&#37096;&#8221;&#19990;&#30028;&#65292;&#29978;&#33267;&#20063;&#27809;&#26377;&#26292;&#38706;&#32473;&#24212;&#29992;&#20013;&#30340;&#20854;&#20182;&#27169;&#22359;&#12290;&#25105;&#20204;&#19968;&#33324;&#20351;&#29992;JMS&#65288;&#22810;&#20010;&#27169;&#22359;&#20849;&#20139;&#65289;&#19982;&#22522;&#20110;
RAR&#30340;ApplicationContext&#36827;&#34892;&#20132;&#20114;&#12290;&#20363;&#22914;&#35843;&#24230;&#20219;&#21153;&#65292;&#23545;&#26032;&#21152;&#20837;&#25991;&#20214;&#31995;&#32479;&#30340;&#25991;&#20214;&#20316;&#20986;&#21453;&#24212;&#65288;&#25110;&#32773;&#31867;&#20284;&#30340;&#65289;&#12290;&#23454;&#38469;&#19978;&#65292;&#22914;&#26524;&#38656;&#35201;&#32771;&#34385;&#21040;&#22806;&#30028;&#30340;&#21516;
&#27493;&#35775;&#38382;&#65292;&#23427;&#21487;&#20197;&#23548;&#20986;RMI&#31471;&#28857;&#65292;&#36825;&#20010;&#36807;&#31243;&#20063;&#21516;&#26679;&#36866;&#29992;&#20110;&#21516;&#19968;&#21488;&#26426;&#22120;&#19978;&#30340;&#20854;&#20182;&#24212;&#29992;&#27169;&#22359;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="beans-annotation-config"></a>3.11.&nbsp;&#22522;&#20110;&#27880;&#35299;&#65288;Annotation-based&#65289;&#30340;&#37197;&#32622;</h2></div></div><div></div></div><p>&#22312;<a href="#beans-factory-extension-bpp-examples-rabpp" title="3.7.1.2.&nbsp;RequiredAnnotationBeanPostProcessor&#31034;&#20363;">Section&nbsp;3.7.1.2, &#8220;RequiredAnnotationBeanPostProcessor&#31034;&#20363;&#8221;</a>&#19968;&#33410;&#20013;&#25105;&#20204;&#25552;&#21040;&#20102;&#22522;&#20110;&#27880;&#35299;&#30340;&#37197;&#32622;&#26041;&#24335;&#65292;&#20351;&#29992;<tt class="interfacename">BeanPostProcessor</tt>&#19982;&#27880;&#35299;&#26159; Spring IoC &#23481;&#22120;&#30340;&#19968;&#20010;&#26222;&#36890;&#25193;&#23637;&#26041;&#27861;&#12290;&#20363;&#22914;&#65292;Spring 2.0 &#23545;&#24517;&#39035;&#30340;&#23646;&#24615;&#24341;&#20837;&#20102;<a href="#metadata-annotations-required" title="25.3.1.&nbsp;@Required">@Required</a>&#27880;&#35299;&#12290;&#22312; Spring 2.5&#20013;&#24050;&#32463;&#21487;&#20197;&#29992;&#27880;&#35299;&#30340;&#26041;&#24335;&#21435;&#39537;&#21160; Spring &#30340;&#20381;&#36182;&#27880;&#23556;&#20102;&#12290;&#26356;&#37325;&#35201;&#30340;&#26159;&#65292;<tt class="interfacename">@Autowired</tt>&#27880;&#35299;&#25552;&#20379;&#20102;&#19982;<a href="#beans-factory-autowire" title="3.3.5.&nbsp;&#33258;&#21160;&#35013;&#37197;&#65288;autowire&#65289;&#21327;&#20316;&#32773;">Section&nbsp;3.3.5, &#8220;&#33258;&#21160;&#35013;&#37197;&#65288;autowire&#65289;&#21327;&#20316;&#32773;&#8221;</a>&#19968;&#33410;&#20013;&#25551;&#36848;&#30340;&#21516;&#26679;&#21151;&#33021;&#65292;&#24182;&#19988;&#25552;&#20379;&#20102;&#26356;&#32454;&#33268;&#30340;&#25511;&#21046;&#19982;&#26356;&#22909;&#30340;&#36866;&#24212;&#24615;&#12290;Spring 2.5 &#20063;&#25903;&#25345; JSR-250 &#20013;&#30340;&#19968;&#20123;&#27880;&#35299;&#65292;&#20363;&#22914;<tt class="interfacename">@Resource</tt>&#65292;<tt class="interfacename">@PostConstruct</tt>&#65292;&#20197;&#21450;<tt class="interfacename">@PreDestroy</tt>&#12290;&#24403;&#28982;&#65292;&#35201;&#20351;&#27880;&#35299;&#21487;&#29992;&#65292;&#24744;&#24517;&#39035;&#20351;&#29992; Java 5 (Tiger)&#25110;&#26356;&#26032;&#30340;&#29256;&#26412;&#65292;&#20197;&#20351;&#24471;&#21487;&#20197;&#35775;&#38382;&#28304;&#20195;&#30721;&#23618;&#27425;&#30340;&#27880;&#35299;&#12290;&#36825;&#20123;&#27880;&#35299;&#21487;&#20197;&#34987;&#27880;&#20876;&#20026;&#29420;&#31435; bean &#30340;&#23450;&#20041;&#65292;&#20294;&#23427;&#20204;&#20063;&#21487;&#20197;&#34987;&#38544;&#24335;&#22320;&#27880;&#20876;&#65292;&#36890;&#36807;&#22522;&#20110; XML &#30340;&#37197;&#32622;&#26041;&#24335;&#65292;&#22914;&#19979;&#20363;&#65288;&#35831;&#27880;&#24847;&#21253;&#21547; '<tt class="literal">context</tt>' &#21629;&#21517;&#31354;&#38388;&#65289;&#65306;</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       <i class="lineannotation"><span class="lineannotation">xmlns:context="http://www.springframework.org/schema/context"</span></i>
       xsi:schemaLocation="http://www.springframework.org/schema/beans 
           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context-2.5.xsd"&gt;
               
     <i class="lineannotation"><span class="lineannotation">&lt;context:annotation-config/&gt;</span></i>
     
&lt;/beans&gt;</pre><p>&#65288;&#38544;&#24335;&#27880;&#20876; post-processors &#21253;&#25324;&#20102; <a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/beans/factory/annotation/AutowiredAnnotationBeanPostProcessor.html" target="_top"><tt class="classname">AutowiredAnnotationBeanPostProcessor</tt></a>&#65292;<a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/context/annotation/CommonAnnotationBeanPostProcessor.html" target="_top"><tt class="classname">CommonAnnotationBeanPostProcessor</tt></a>&#65292;<a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/orm/jpa/support/PersistenceAnnotationBeanPostProcessor.html" target="_top"><tt class="classname">PersistenceAnnotationBeanPostProcessor</tt></a>&#65292;&#20063;&#21253;&#25324;&#20102;&#21069;&#38754;&#25552;&#21040;&#30340; <a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/beans/factory/annotation/RequiredAnnotationBeanPostProcessor.html" target="_top"><tt class="classname">RequiredAnnotationBeanPostProcessor</tt></a>&#12290;&#65289;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-autowired-annotation"></a>3.11.1.&nbsp;<tt class="interfacename">@Autowired</tt></h3></div></div><div></div></div><p><tt class="interfacename">@Autowired</tt> &#27880;&#35299;&#21487;&#20197;&#29992;&#20110;&#8220;&#20256;&#32479;&#30340;&#8221;setter &#26041;&#27861;&#65292;&#22914;&#19979;&#20363;&#65306;</p><pre class="programlisting">public class SimpleMovieLister {

    private MovieFinder movieFinder;

    @Autowired
    public void setMovieFinder(MovieFinder movieFinder) {
        this.movieFinder = movieFinder;
    }

    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><p>&#36825;&#20010;&#27880;&#35299;&#20063;&#21487;&#20197;&#29992;&#20110;&#20197;&#23646;&#24615;&#20026;&#21442;&#25968;&#65295;&#22810;&#20010;&#21442;&#25968;&#30340;&#26041;&#27861;</p><pre class="programlisting">public class MovieRecommender {

    private MovieCatalog movieCatalog;
    
    private CustomerPreferenceDao customerPreferenceDao;

    @Autowired
    public void prepare(MovieCatalog movieCatalog, CustomerPreferenceDao customerPreferenceDao) {
        this.movieCatalog = movieCatalog;
        this.customerPreferenceDao = customerPreferenceDao;
    }

    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><p><tt class="interfacename">@Autowired</tt>&#27880;&#35299;&#29978;&#33267;&#21487;&#20197;&#29992;&#20110;&#26500;&#36896;&#22120;&#19982;&#23383;&#27573;&#65306;</p><pre class="programlisting">public class MovieRecommender {

    @Autowired
    private MovieCatalog movieCatalog;
    
    private CustomerPreferenceDao customerPreferenceDao;

    @Autowired
    public MovieRecommender(CustomerPreferenceDao customerPreferenceDao) {
        this.customerPreferenceDao = customerPreferenceDao;
    }

    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><p>&#20063;&#21487;&#20197;&#19968;&#31181;&#25552;&#20379;&#26469;&#33258;<tt class="interfacename">ApplicationContext</tt>&#30340;&#29305;&#27530;&#31867;&#22411;&#30340;<span class="emphasis"><em>&#25152;&#26377;</em></span> beans&#65292;&#27880;&#35299;&#23383;&#27573;&#25110;&#32773;&#26041;&#27861;&#65292;&#20363;&#22914;&#65306;</p><pre class="programlisting">public class MovieRecommender {

    @Autowired
    private MovieCatalog[] movieCatalogs;

    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><p>&#36825;&#21516;&#26679;&#36866;&#29992;&#20110;&#38598;&#21512;&#31867;&#22411;&#65306;</p><pre class="programlisting">public class MovieRecommender {

    private Set&lt;MovieCatalog&gt; movieCatalogs;
    
    @Autowired
    public void setMovieCatalogs(Set&lt;MovieCatalog&gt; movieCatalogs) {
        this.movieCatalogs = movieCatalogs;
    }

    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><p>&#29978;&#33267;&#26159; Maps &#20063;&#21487;&#20197;&#36825;&#26679;&#27880;&#35299;&#65292;&#21482;&#35201;&#36825;&#20010; Map &#30340; key &#31867;&#22411;&#20026; <tt class="classname">String</tt>&#12290;&#36825;&#20010; Map &#30340; values &#24212;&#35813;&#26159;&#24050;&#30693;&#30340;&#31867;&#22411;&#65292;&#24182;&#19988; keys &#24212;&#35813;&#21253;&#21547;&#31526;&#21512; bean &#30340;&#21629;&#21517;&#65306;</p><pre class="programlisting">public class MovieRecommender {

    private Map&lt;String, MovieCatalog&gt; movieCatalogs;
    
    @Autowired
    public void setMovieCatalogs(Map&lt;String, MovieCatalog&gt; movieCatalogs) {
        this.movieCatalogs = movieCatalogs;
    }

    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><p>&#22312;&#32570;&#30465;&#24773;&#20917;&#19979;&#65292;&#24403;&#20986;&#29616;<span class="emphasis"><em>0</em></span>&#20010;&#20505;&#36873;&#30340; beans&#26102;&#33258;&#21160;&#36830;&#25509;&#23558;&#22833;&#36133;&#65307;&#32570;&#30465;&#34892;&#20026;&#25226;&#36830;&#25509;&#26041;&#27861;&#65292;&#26500;&#36896;&#22120;&#65292;&#23383;&#27573;&#20551;&#35774;&#20026; <span class="emphasis"><em>required</em></span> &#30340;&#20381;&#36182;&#12290;&#36825;&#26679;&#30340;&#34892;&#20026;&#22914;&#19979;&#25152;&#31034;&#65306;</p><pre class="programlisting">public class SimpleMovieLister {

    private MovieFinder movieFinder;

    @Autowired(required=false)
    public void setMovieFinder(MovieFinder movieFinder) {
        this.movieFinder = movieFinder;
    }

    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#34429;&#28982;&#24403; <span class="emphasis"><em>&#19968;&#20010;&#31867;&#21482;&#26377;&#19968;&#20010;&#36830;&#25509;&#26500;&#36896;&#22120;&#26102;</em></span>&#23427;&#23558;&#34987;&#26631;&#35760;&#20026; <span class="emphasis"><em>required</em></span>&#65292; &#20294;&#26159;&#36824;&#26159;&#21487;&#20197;&#26631;&#35760;&#22810;&#20010;&#26500;&#36896;&#22120;&#30340;&#12290;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#27599;&#19968;&#20010;&#26500;&#36896;&#22120;&#37117;&#26377;&#21487;&#33021;&#34987;&#35748;&#20026;&#26159;&#36830;&#25509;&#26500;&#36896;&#22120;&#65292; Spring &#23558;&#20250;&#25226;&#20381;&#36182;&#20851;&#31995;&#33021;&#22815;&#28385;&#36275;&#30340;&#26500;&#36896;&#22120;&#35748;&#20026;&#26159;<span class="emphasis"><em>greediest</em></span> &#30340;&#26500;&#36896;&#22120;&#12290;</p></td></tr></tbody></table></div><p><tt class="interfacename">@Autowired</tt>&#20063;&#33021;&#29992;&#20110;&#24635;&#25152;&#21608;&#30693;&#30340;&#8220;&#21487;&#35299;&#20915;&#30340;&#20381;&#36182;&#8221;&#65306;<tt class="interfacename">BeanFactory</tt>&#25509;&#21475;&#65292;<tt class="interfacename">ApplicationContext</tt>&#25509;&#21475;&#65292;<tt class="interfacename">ResourceLoader</tt>&#25509;&#21475;&#65292;<tt class="interfacename">ApplicationEventPublisher</tt>&#25509;&#21475;&#65292;&#36824;&#26377;<tt class="interfacename">MessageSource</tt>&#25509;&#21475;&#12290;&#36825;&#20123;&#25509;&#21475;&#65288;&#36824;&#26377;&#23427;&#20204;&#30340;&#25193;&#23637;&#65292;&#20363;&#22914;<tt class="interfacename">ConfigurableApplicationContext</tt>&#25110;&#32773;<tt class="interfacename">ResourcePatternResolver</tt>&#65289;&#23558;&#21487;&#20197;&#33258;&#21160;&#35299;&#20915;&#20381;&#36182;&#65292;&#27809;&#26377;&#20219;&#20309;&#29305;&#27530;&#24517;&#39035;&#30340;&#20854;&#23427;&#27493;&#39588;&#38656;&#35201;&#12290;</p><pre class="programlisting">public class MovieRecommender {

    @Autowired
    private ApplicationContext context;

    public MovieRecommender() {
    }

    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-autowired-annotation-qualifiers"></a>3.11.2.&nbsp;&#22522;&#20110;&#27880;&#35299;&#30340;&#33258;&#21160;&#36830;&#25509;&#24494;&#35843;</h3></div></div><div></div></div><p>&#22240;&#20026;&#36890;&#36807;&#31867;&#22411;&#30340;&#33258;&#21160;&#36830;&#25509;&#21487;&#33021;&#20250;&#26377;&#22810;&#20010;&#20505;&#36873;&#65292;&#22240;&#27492;&#32463;&#24120;&#38656;&#35201;&#22312;&#36873;&#25321;&#36807;&#31243;&#20013;&#21152;&#20197;&#25511;&#21046;&#12290;&#19968;&#31181;&#26041;&#27861;&#21435;&#23436;&#25104;&#36825;&#20010;&#25511;&#21046;&#23601;&#26159;&#20351;&#29992;<tt class="interfacename">@Qualifier</tt>&#27880;&#35299;&#12290;&#22312;&#26368;&#31616;&#21333;&#30340;&#24773;&#20917;&#19979;&#65292;&#24744;&#33021;&#22815;&#36890;&#36807;&#21629;&#21517;&#26041;&#24335;&#21435;&#23454;&#29616;&#36825;&#20010;&#33258;&#21160;&#36830;&#25509;&#65306;</p><pre class="programlisting">public class MovieRecommender {

    @Autowired
    <span class="bold"><b>@Qualifier("mainCatalog")</b></span>
    private MovieCatalog movieCatalog;

    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><p><tt class="interfacename">@Qualifier</tt>&#27880;&#35299;&#20063;&#33021;&#22815;&#34987;&#25351;&#23450;&#20026;&#26500;&#36896;&#22120;&#30340;&#21442;&#25968;&#25110;&#32773;&#26041;&#27861;&#30340;&#21442;&#25968;&#65306;</p><pre class="programlisting">public class MovieRecommender {

    private MovieCatalog movieCatalog;
    
    private CustomerPreferenceDao customerPreferenceDao;

    @Autowired
    public void prepare(<span class="bold"><b>@Qualifier("mainCatalog")</b></span> MovieCatalog movieCatalog, CustomerPreferenceDao customerPreferenceDao) {
        this.movieCatalog = movieCatalog;
        this.customerPreferenceDao = customerPreferenceDao;
    }

    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><p>&#24744;&#20063;&#21487;&#20197;&#21019;&#24314;&#24744;&#33258;&#23450;&#20041;&#30340;&#38480;&#23450;&#22120;&#27880;&#35299;&#12290;&#24744;&#21482;&#35201;&#22312;&#23450;&#20041;&#19968;&#20010;&#27880;&#35299;&#26102;&#25552;&#20379;<tt class="interfacename">@Qualifier</tt>&#27880;&#35299;&#23601;&#21487;&#20197;&#20102;&#65306;</p><pre class="programlisting">@Target({ElementType.FIELD, ElementType.PARAMETER})
@Retention(RetentionPolicy.RUNTIME)
<span class="bold"><b>@Qualifier</b></span>
public @interface Genre {

    String value();

}</pre><p>&#28982;&#21518;&#24744;&#23601;&#33021;&#22815;&#23558;&#36825;&#20010;&#33258;&#23450;&#20041;&#30340;&#38480;&#23450;&#22120;&#19982;&#21442;&#25968;&#29992;&#20110;&#33258;&#21160;&#36830;&#25509;&#30340;&#23383;&#27573;&#65306;</p><pre class="programlisting">public class MovieRecommender {

    @Autowired
    <span class="bold"><b>@Genre("Action")</b></span>
    private MovieCatalog actionCatalog;
    
    private MovieCatalog comedyCatalog;
    
    @Autowired
    public void setComedyCatalog(<span class="bold"><b>@Genre("Comedy")</b></span> MovieCatalog comedyCatalog) {
        this.comedyCatalog = comedyCatalog;
    }

    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><p>&#19979;&#19968;&#27493;&#23601;&#26159;&#25552;&#20379;&#20449;&#24687;&#32473;&#20505;&#36873;&#30340; bean &#30340;&#23450;&#20041;&#12290;&#24744;&#33021;&#22815;&#28155;&#21152;<tt class="literal">&lt;qualifier/&gt;</tt>&#26631;&#31614;&#20316;&#20026;<tt class="literal">&lt;bean/&gt;</tt>&#26631;&#31614;&#30340;&#23376;&#20803;&#32032;&#65292;&#28982;&#21518;&#25351;&#23450;<tt class="literal">'type'</tt>&#36824;&#26377;<tt class="literal">'value'</tt>&#20197;&#21305;&#37197;&#24744;&#30340;&#33258;&#23450;&#20041;&#38480;&#23450;&#22120;&#27880;&#35299;&#12290;&#31867;&#22411;&#24517;&#39035;&#21305;&#37197;&#27880;&#35299;&#30340;&#20840;&#21517;&#65292;&#25110;&#32773;&#26159;&#19968;&#20010;&#19981;&#21361;&#38505;&#30340;&#12289;&#26041;&#20415;&#19968;&#28857;&#30340;&#21517;&#23383;&#65292;&#24744;&#20063;&#21487;&#20197;&#20351;&#29992;&#8220;&#30701;&#8221; &#31867;&#21517;&#12290;&#21442;&#30475;&#19979;&#20363;&#65306;</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd"&gt;

    &lt;context:annotation-config/&gt;

    &lt;bean class="example.SimpleMovieCatalog"&gt;
        <span class="bold"><b>&lt;qualifier type="Genre" value="Action"/&gt;</b></span>
        <i class="lineannotation"><span class="lineannotation">&lt;!-- inject any dependencies required by this bean --&gt;</span></i>
    &lt;/bean&gt;

    &lt;bean class="example.SimpleMovieCatalog"&gt;
        <span class="bold"><b>&lt;qualifier type="example.Genre" value="Comedy"/&gt;</b></span>
        <i class="lineannotation"><span class="lineannotation">&lt;!-- inject any dependencies required by this bean --&gt;</span></i>
    &lt;/bean&gt;
    
    &lt;bean id="movieRecommender" class="example.MovieRecommender"/&gt;

&lt;/beans&gt;
</pre><p>&#22312;&#19979;&#19968;&#33410;&#65292;&#39064;&#30446;&#26159;<a href="#beans-classpath-scanning" title="3.12.&nbsp;&#23545;&#21463;&#31649;&#32452;&#20214;&#30340;Classpath&#25195;&#25551;">Section&nbsp;3.12, &#8220;&#23545;&#21463;&#31649;&#32452;&#20214;&#30340;Classpath&#25195;&#25551;&#8221;</a>&#65292;&#24744;&#23558;&#30475;&#21040;&#20351;&#29992;XML&#25552;&#20379;&#32473;&#38480;&#23450;&#22120;&#20803;&#25968;&#25454;&#19988;&#22522;&#20110;&#27880;&#35299;&#30340;&#21487;&#36873;&#35299;&#20915;&#26041;&#26696;&#12290;&#29305;&#21035;&#22320;&#65292;&#35831;&#21442;&#30475;&#65306;<a href="#beans-scanning-qualifiers" title="3.12.6.&nbsp;&#29992;&#27880;&#35299;&#25552;&#20379;&#38480;&#23450;&#31526;&#20803;&#25968;&#25454;">Section&nbsp;3.12.6, &#8220;&#29992;&#27880;&#35299;&#25552;&#20379;&#38480;&#23450;&#31526;&#20803;&#25968;&#25454;&#8221;</a>&#12290;</p><p>&#22312;&#26576;&#20123;&#24773;&#20917;&#19979;&#65292;&#26377;&#36275;&#22815;&#20805;&#20998;&#30340;&#29702;&#30001;&#21435;&#20351;&#29992;&#19981;&#24102;&#20540;&#30340;&#27880;&#35299;&#12290;&#36825;&#20351;&#24471;&#27880;&#35299;&#21487;&#20197;&#25552;&#20379;&#26356;&#22810;&#35299;&#20915;&#19981;&#21516;&#31867;&#22411;&#20381;&#36182;&#30340;&#33021;&#21147;&#12290;&#20363;&#22914;&#65292;&#22312; Internet &#36830;&#25509;&#19981;&#21487;&#29992;&#26102;&#65292;&#24744;&#21487;&#20197;&#25552;&#20379;&#19968;&#20010;<span class="emphasis"><em>&#31163;&#32447;</em></span>&#30340;&#25628;&#32034;&#30446;&#24405;&#12290;&#39318;&#20808;&#23601;&#35201;&#23450;&#20041;&#19968;&#20010;&#31616;&#21333;&#30340;&#27880;&#35299;&#65306;</p><pre class="programlisting">@Target({ElementType.FIELD, ElementType.PARAMETER})
@Retention(RetentionPolicy.RUNTIME)
@Qualifier
public @interface Offline {

}</pre><p>&#28982;&#21518;&#28155;&#21152;&#36825;&#20010;&#27880;&#35299;&#32473;&#23383;&#27573;&#20316;&#20026;&#33258;&#21160;&#36830;&#25509;&#65306;</p><pre class="programlisting">public class MovieRecommender {

    @Autowired
    <span class="bold"><b>@Offline</b></span>
    private MovieCatalog offlineCatalog;

    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><p>&#29616;&#22312;&#65292;&#36825;&#20010; bean &#30340;&#23450;&#24433;&#21482;&#32452;&#35201;&#19968;&#20010;&#38480;&#23450;&#22120;&#20102;&#65306;</p><pre class="programlisting">&lt;bean class="example.SimpleMovieCatalog"&gt;
    <span class="bold"><b>&lt;qualifier type="Offline"/&gt;</b></span>
    <i class="lineannotation"><span class="lineannotation">&lt;!-- inject any dependencies required by this bean --&gt;</span></i>
&lt;/bean&gt;</pre><p>&#21478;&#22806;&#65292;&#20063;&#21487;&#20197;&#23450;&#21046;&#33258;&#24049;&#30340;&#38480;&#23450;&#22120;&#27880;&#35299;&#21435;&#20351;&#29992;&#21629;&#21517;&#30340;&#23646;&#24615;&#25110;&#32773;&#31616;&#21333;&#30340;<tt class="literal">'value'</tt>&#23646;&#24615;&#12290;&#22914;&#26524;&#33258;&#21160;&#36830;&#25509;&#26102;&#22810;&#20010;&#23646;&#24615;&#20540;&#34987;&#25351;&#23450;&#32473;&#20102;&#19968;&#20010;&#23383;&#27573;&#25110;&#32773;&#21442;&#25968;&#65292;&#37027;&#20040;&#19968;&#20010; bean &#30340;&#23450;&#20041;&#24517;&#39035;<span class="emphasis"><em>&#20840;&#37096;</em></span>&#21305;&#37197;&#36825;&#20123;&#23646;&#24615;&#30340;&#20540;&#12290;&#20363;&#22914;&#65292;&#32771;&#34385;&#22914;&#19979;&#30340;&#27880;&#35299;&#23450;&#20041;&#65306; </p><pre class="programlisting">@Target({ElementType.FIELD, ElementType.PARAMETER})
@Retention(RetentionPolicy.RUNTIME)
@Qualifier
public @interface MovieQualifier {

    String genre();
    
    Format format();

}</pre><p>&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;<tt class="literal">Format</tt>&#26159;&#19968;&#20010;&#26522;&#20030;&#65306;</p><pre class="programlisting">public enum Format {
    
    VHS, DVD, BLURAY
}</pre><p>&#36825;&#20123;&#23383;&#27573;&#23558;&#19982;&#33258;&#23450;&#20041;&#30340;&#38480;&#23450;&#22120;&#36827;&#34892;&#33258;&#21160;&#36830;&#25509;&#65292;&#21253;&#25324;&#20102;&#27599;&#20010;&#23646;&#24615;&#30340;&#20540;&#65306;<tt class="literal">'genre'</tt> &#20197;&#21450; <tt class="literal">'format'</tt>&#12290;</p><pre class="programlisting">public class MovieRecommender {

    @Autowired
    @MovieQualifier(format=Format.VHS, genre="Action")
    private MovieCatalog actionVhsCatalog;

    @Autowired
    @MovieQualifier(format=Format.VHS, genre="Comedy")
    private MovieCatalog comedyVhsCatalog;

    @Autowired
    @MovieQualifier(format=Format.DVD, genre="Action")
    private MovieCatalog actionDvdCatalog;

    @Autowired
    @MovieQualifier(format=Format.BLURAY, genre="Comedy")
    private MovieCatalog comedyBluRayCatalog;
   
    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><p>&#26368;&#32456;&#65292;&#36825;&#20010; bean &#30340;&#23450;&#20041;&#24212;&#35813;&#19982;&#38480;&#23450;&#22120;&#21305;&#37197;&#30340;&#20540;&#12290;&#36825;&#20010;&#21015;&#23376;&#23558;&#35828;&#26126;bean &#30340;<span class="emphasis"><em>&#20803;</em></span>&#23646;&#24615;&#21487;&#20197;&#29992;&#20110;&#26367;&#20195;<tt class="literal">&lt;qualifier/&gt;</tt>&#30340;&#23376;&#20803;&#32032;&#12290;&#37027;&#26679;&#30340;&#35805;&#65292;<tt class="literal">&lt;qualifier/&gt;</tt>&#20197;&#21450;&#23427;&#30340;&#23646;&#24615;&#23558;&#20248;&#20808;&#32771;&#34385;&#65292;&#20294;&#26159;&#22914;&#26524;&#27809;&#26377;&#38480;&#23450;&#22120;&#30340;&#35805;&#65288;&#21442;&#30475;&#22914;&#19979;&#23450;&#20041;&#30340;&#21518;&#20004;&#20010; bean &#65289;&#65292;&#33258;&#21160;&#36830;&#25509;&#26426;&#21046;&#23558;&#21462;&#28040;&#20197;<tt class="literal">&lt;meta/&gt;</tt>&#26631;&#31614;&#26631;&#35760;&#30340;&#20540;&#12290;</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd"&gt;

    &lt;context:annotation-config/&gt;

    &lt;bean class="example.SimpleMovieCatalog"&gt;
        &lt;qualifier type="MovieQualifier"&gt;
            &lt;attribute name="format" value="VHS"/&gt;
            &lt;attribute name="genre" value="Action"/&gt;
        &lt;/qualifier&gt;
        <i class="lineannotation"><span class="lineannotation">&lt;!-- inject any dependencies required by this bean --&gt;</span></i>
    &lt;/bean&gt;

    &lt;bean class="example.SimpleMovieCatalog"&gt;
        &lt;qualifier type="MovieQualifier"&gt;
            &lt;attribute name="format" value="VHS"/&gt;
            &lt;attribute name="genre" value="Comedy"/&gt;
        &lt;/qualifier&gt;
        <i class="lineannotation"><span class="lineannotation">&lt;!-- inject any dependencies required by this bean --&gt;</span></i>
    &lt;/bean&gt;

    &lt;bean class="example.SimpleMovieCatalog"&gt;
        &lt;meta key="format" value="DVD"/&gt;
        &lt;meta key="genre" value="Action"/&gt;
        <i class="lineannotation"><span class="lineannotation">&lt;!-- inject any dependencies required by this bean --&gt;</span></i>
    &lt;/bean&gt;
    
    &lt;bean class="example.SimpleMovieCatalog"&gt;
        &lt;meta key="format" value="BLURAY"/&gt;
        &lt;meta key="genre" value="Comedy"/&gt;
        <i class="lineannotation"><span class="lineannotation">&lt;!-- inject any dependencies required by this bean --&gt;</span></i>
    &lt;/bean&gt;

&lt;/beans&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-custom-autowire-configurer"></a>3.11.3.&nbsp;<tt class="classname">CustomAutowireConfigurer</tt></h3></div></div><div></div></div><p><a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/beans/factory/config/CustomAutowireConfigurer.html" target="_top"><tt class="classname">CustomAutowireConfigurer</tt></a>&#26159;&#19968;&#20010;<tt class="interfacename">BeanFactoryPostProcessor</tt>&#65292;&#23427;&#21487;&#20197;&#20351;&#24471;&#22312;&#33258;&#21160;&#36830;&#25509;&#36807;&#31243;&#20013;&#20570;&#26356;&#22810;&#30340;&#33258;&#23450;&#20041;&#36873;&#25321;&#12290;&#29305;&#27530;&#22320;&#65292;&#23427;&#20801;&#35768;&#24744;&#27880;&#20876;&#24744;&#33258;&#24049;&#30340;&#33258;&#23450;&#20041;&#38480;&#23450;&#22120;&#27880;&#35299;&#31867;&#22411;&#65292;&#29978;&#33267;&#26159;&#23427;&#20204;&#27809;&#26377;&#20351;&#29992; Spring &#30340;<tt class="interfacename">@Qualifier</tt>&#27880;&#35299;&#26631;&#27880;&#23427;&#20204;&#33258;&#24049;&#12290;</p><pre class="programlisting">&lt;bean id="customAutowireConfigurer" class="org.springframework.beans.factory.annotation.CustomAutowireConfigurer"&gt;
    &lt;property name="customQualifierTypes"&gt;
        &lt;set&gt;
            &lt;value&gt;example.CustomQualifier&lt;/value&gt;
        &lt;/set&gt;
    &lt;/property&gt;
&lt;/bean&gt;</pre><p>&#35831;&#27880;&#24847;&#65292;<tt class="interfacename">AutowireCandidateResolver</tt>&#30340;&#23454;&#29616;&#23558;&#20381;&#36182;&#20110; Java &#29256;&#26412;&#12290;&#22914;&#26524;&#22312; Java 5 &#20197;&#19979;&#65292;&#38480;&#23450;&#22120;&#27880;&#35299;&#26159;&#19981;&#34987;&#25903;&#25345;&#30340;&#65292;&#22240;&#27492;&#33258;&#21160;&#36830;&#25509;&#21518;&#36873;&#23558;&#34987;<tt class="literal">'autowire-candidate'</tt>&#30340;&#20540;&#25110;&#32773;&#22312;<tt class="literal">&lt;beans/&gt;</tt>&#20013;&#20803;&#32032;<tt class="literal">'default-autowire-candidates'</tt>&#21487;&#29992;&#30340;&#27169;&#24335;&#25152;&#20915;&#23450;&#12290;&#22914;&#26524;&#36816;&#34892;&#22312; Java 5 &#25110;&#32773;&#26356;&#26032;&#30340;&#29256;&#26412;&#19978;&#65292;<tt class="interfacename">@Qualifier</tt>&#27880;&#35299;&#25110;&#32773;&#20219;&#20309;&#33258;&#23450;&#20041;&#24182;&#22312;<tt class="classname">CustomAutowireConfigurer</tt>&#19978;&#27880;&#20876;&#36807;&#30340;&#27880;&#35299;&#37117;&#23558;&#27491;&#24120;&#24037;&#20316;&#12290;</p><p>&#24573;&#30053; Java &#29256;&#26412;&#65292;&#20915;&#23450;&#8220;&#20027;&#35201;&#8221;&#30340;&#21518;&#36873;&#65288;&#24403;&#22810;&#20010; beans &#37117;&#37197;&#32622;&#20026;&#33258;&#21160;&#36830;&#25509;&#21518;&#36873;&#26102;&#65289;&#37117;&#26159;&#19968;&#26679;&#30340;&#65306;&#22312;&#36825;&#20123;&#21518;&#36873;&#20013;&#21482;&#35201;&#19968;&#20010; bean &#30340;<tt class="literal">'primary'</tt>&#23646;&#24615;&#23450;&#20041;&#20026;<tt class="literal">'true'</tt>&#21363;&#21487;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-resource-annotation"></a>3.11.4.&nbsp;<tt class="interfacename">@Resource</tt></h3></div></div><div></div></div><p>Spring
&#20063;&#25552;&#20379;&#20102;&#20351;&#29992; JSR-250 bean &#23646;&#24615;&#25903;&#25345;&#30340;&#27880;&#23556;&#26041;&#24335;&#12290;&#36825;&#26159;&#19968;&#31181;&#22312; Java EE 5 &#19982; Java 6 &#20013;&#26222;&#36941;&#20351;&#29992;&#30340;&#26041;&#24335;&#65288;&#20363;&#22914;&#65292;&#22312;
JSF 1.2 &#20013;&#26144;&#23556; beans &#25110;&#32773; JAX-WS 2.0 &#31471;&#28857;&#65289;&#65292;&#23545;&#20110;Spring &#25176;&#31649;&#30340;&#23545;&#35937; Spring &#21487;&#20197;&#20197;&#36825;&#31181;&#26041;&#24335;&#25903;&#25345;&#26144;&#23556;&#12290;</p><p><tt class="interfacename">@Resource</tt>&#26377;&#19968;&#20010;&#8216;name&#8217;&#23646;&#24615;&#65292;&#32570;&#30465;&#26102;&#65292;Spring &#23558;&#36825;&#20010;&#20540;&#35299;&#37322;&#20026;&#35201;&#27880;&#23556;&#30340; bean &#30340;&#21517;&#23383;&#12290;&#25442;&#21477;&#35805;&#35828;&#65292;&#22914;&#26524;&#36981;&#24490;<span class="emphasis"><em>by-name</em></span>&#30340;&#35821;&#27861;&#65292;&#22914;&#19979;&#20363;&#65306;</p><pre class="programlisting">public class SimpleMovieLister {

    private MovieFinder movieFinder;

    <span class="bold"><b>@Resource(name="myMovieFinder")</b></span>
    public void setMovieFinder(MovieFinder movieFinder) {
        this.movieFinder = movieFinder;
    }
}</pre><p>&#22914;
&#26524;&#27809;&#26377;&#26174;&#24335;&#22320;&#32473;&#20986;&#21517;&#23383;&#65292;&#32570;&#30465;&#30340;&#21517;&#23383;&#23558;&#32487;&#25215;&#20110;&#23383;&#27573;&#21517;&#25110;&#32773; setter &#26041;&#27861;&#21517;&#65306;&#22914;&#26524;&#26159;&#23383;&#27573;&#21517;&#65292;&#23427;&#23558;&#31616;&#21270;&#25110;&#32773;&#31561;&#20215;&#20110;&#23383;&#27573;&#21517;&#65307;&#22914;&#26524;&#26159; setter
&#26041;&#27861;&#21517;&#65292;&#23427;&#23558;&#31561;&#20215;&#20110; bean &#23646;&#24615;&#21517;&#12290;&#19979;&#38754;&#36825;&#20010;&#20363;&#23376;&#20351;&#29992;&#21517;&#23383; "movieFinder" &#27880;&#23556;&#21040;&#23427;&#30340; setter &#26041;&#27861;&#65306;</p><pre class="programlisting">public class SimpleMovieLister {

    private MovieFinder movieFinder;

    <span class="bold"><b>@Resource</b></span>
    public void setMovieFinder(MovieFinder movieFinder) {
        this.movieFinder = movieFinder;
    }
}</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#27880;&#35299;&#25552;&#20379;&#30340;&#21517;&#23383;&#23558;&#34987;<tt class="interfacename">BeanFactory</tt>&#35299;&#26512;&#20026; bean &#21517;&#12290;&#35831;&#27880;&#24847;&#65292;&#36825;&#20123;&#21517;&#23383;&#20063;&#21487;&#33021;&#36890;&#36807; JNDI &#34987;&#35299;&#26512;&#65288;&#38656;&#35201;&#37197;&#32622; Spring &#30340;<a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/jndi/support/SimpleJndiBeanFactory.html" target="_top"><tt class="classname">SimpleJndiBeanFactory</tt></a>&#65289;&#12290;&#19981;&#36807;&#65292;&#24314;&#35758;&#24744;&#20381;&#38752;&#32570;&#30465;&#34892;&#20026;&#19982; Spring &#30340; JNDI &#26597;&#25214;&#21151;&#33021;&#12290;</p></td></tr></tbody></table></div><p>&#19982;<tt class="interfacename">@Autowired</tt>&#31867;&#20284;&#65292;<tt class="interfacename">@Resource</tt>&#21487;&#20197;&#22238;&#36864;&#20026;&#19982;&#26631;&#20934; bean &#31867;&#22411;&#21305;&#37197;&#65288;&#20363;&#22914;&#65292;&#20351;&#29992;&#21407;&#22987;&#31867;&#22411;&#21305;&#37197;&#21462;&#20195;&#29305;&#27530;&#21629;&#21517; bean&#65289;&#26469;&#35299;&#20915;&#33879;&#21517;&#30340;"resolvable dependencies"&#65306;<tt class="interfacename">BeanFactory</tt> &#25509;&#21475;&#65292;<tt class="interfacename">ApplicationContext</tt> &#25509;&#21475;&#65292;<tt class="interfacename">ResourceLoader</tt> &#25509;&#21475;&#65292;<tt class="interfacename">ApplicationEventPublisher</tt> &#25509;&#21475;&#20197;&#21450; <tt class="interfacename">MessageSource</tt> &#25509;&#21475;&#12290;&#35831;&#27880;&#24847;&#65306;&#36825;&#21482;&#26377;&#36866;&#29992;&#20110;&#26410;&#25351;&#23450;&#21629;&#21517;&#30340;<tt class="interfacename">@Resource</tt>&#65281;</p><p>&#19979;&#38754;&#30340;&#20363;&#23376;&#26377;&#19968;&#20010;<tt class="literal">customerPreferenceDao</tt>&#23383;&#27573;&#65292;&#39318;&#20808;&#35201;&#26597;&#25214;&#19968;&#20010;&#21517;&#21483; &#8220;customerPreferenceDao&#8221; &#30340; bean&#65292;&#28982;&#21518;&#22238;&#36864;&#20026;&#19968;&#20010;&#21407;&#22987;&#31867;&#22411;&#20197;&#21305;&#37197;&#31867;&#22411;<tt class="classname">CustomerPreferenceDao</tt>&#12290;"context" &#23383;&#27573;&#23558;&#22522;&#20110;&#24050;&#30693;&#35299;&#20915;&#30340;&#20381;&#36182;&#31867;&#22411;<tt class="interfacename">ApplicationContext</tt>&#32780;&#34987;&#27880;&#20837;&#12290;</p><pre class="programlisting">public class MovieRecommender {

    @Resource
    private CustomerPreferenceDao customerPreferenceDao;

    @Resource
    private ApplicationContext context;

    public MovieRecommender() {
    }

    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-postconstruct-and-predestroy-annotations"></a>3.11.5.&nbsp;<tt class="interfacename">@PostConstruct</tt> &#19982; <tt class="interfacename">@PreDestroy</tt></h3></div></div><div></div></div><p><tt class="classname">CommonAnnotationBeanPostProcessor</tt> &#19981;&#21482;&#26159;&#33021;&#35782;&#21035;<tt class="interfacename">@Resource</tt>&#27880;&#35299;&#65292;&#32780;&#19988;&#20063;&#33021;&#35782;&#21035; JSR-250 <span class="emphasis"><em>lifecycle</em></span>&#27880;&#35299;&#12290;&#22312; Spring 2.5 &#20013;&#65292;&#36825;&#20123;&#27880;&#35299;&#30340;&#25551;&#36848;&#35831;&#21442;&#30475;<a href="#beans-factory-lifecycle-initializingbean" title="3.5.1.1.&nbsp;&#21021;&#22987;&#21270;&#22238;&#35843;">initialization callbacks</a> &#19982; <a href="#beans-factory-lifecycle-disposablebean" title="3.5.1.2.&nbsp;&#26512;&#26500;&#22238;&#35843;">destruction callbacks</a>&#33410;&#12290;<tt class="classname">CommonAnnotationBeanPostProcessor</tt>&#24050;&#32463;&#22312; Spring &#30340;<tt class="interfacename">ApplicationContext</tt>&#20013;&#27880;&#20876;&#65292;&#24403;&#19968;&#20010;&#26041;&#27861;&#24102;&#26377;&#36825;&#20123;&#27880;&#35299;&#20043;&#19968;&#26102;&#65292;&#23558;&#34987;&#22312;&#20854;&#29983;&#21629;&#21608;&#26399;&#19982; Spring &#29983;&#21629;&#21608;&#26399;&#25509;&#21475;&#30340;&#26041;&#27861;&#25110;&#32773;&#26174;&#24335;&#22768;&#26126;&#22238;&#35843;&#26041;&#27861;&#21516;&#19968;&#21051;&#19978;&#35843;&#29992;&#12290;&#19979;&#38754;&#30340;&#20363;&#23376;&#37324;&#65292;&#32531;&#23384;&#23558;&#39044;&#32622;&#20110;&#21021;&#22987;&#21270;&#19982;&#38144;&#27585;&#38454;&#27573;&#12290;</p><pre class="programlisting">public class CachingMovieLister {

    @PostConstruct
    public void populateMovieCache() {
        <i class="lineannotation"><span class="lineannotation">// populates the movie cache upon initialization...</span></i>
    }
    
    @PreDestroy
    public void clearMovieCache() {
        <i class="lineannotation"><span class="lineannotation">// clears the movie cache upon destruction...</span></i>
    }
}</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>
		&#20851;&#20110;&#32452;&#21512;&#19981;&#21516;&#30340;&#29983;&#21629;&#21608;&#26399;&#26426;&#21046;&#65292;&#35831;&#26597;&#30475;<a href="#beans-factory-lifecycle-combined-effects" title="3.5.1.4.&nbsp;&#32452;&#21512;&#29983;&#21629;&#21608;&#26399;&#26426;&#21046;">Section&nbsp;3.5.1.4, &#8220;&#32452;&#21512;&#29983;&#21629;&#21608;&#26399;&#26426;&#21046;&#8221;</a>&#12290;</p></td></tr></tbody></table></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="beans-classpath-scanning"></a>3.12.&nbsp;&#23545;&#21463;&#31649;&#32452;&#20214;&#30340;Classpath&#25195;&#25551;</h2></div></div><div></div></div><p>&#21040;&#30446;&#21069;&#20026;&#27490;&#26412;&#31456;&#20013;&#30340;&#22823;&#22810;&#25968;&#20363;&#23376;&#37117;&#20351;&#29992;XML&#26469;&#25351;&#23450;&#37197;&#32622;&#20803;&#25968;&#25454;&#65292;
    &#36825;&#20123;&#20803;&#25968;&#25454;&#20250;&#29983;&#25104;Spring&#23481;&#22120;&#20013;&#30340;&#27599;&#20010;<tt class="interfacename">BeanDefinition</tt>&#12290;
    &#19978;&#19968;&#33410;(<a href="#beans-annotation-config" title="3.11.&nbsp;&#22522;&#20110;&#27880;&#35299;&#65288;Annotation-based&#65289;&#30340;&#37197;&#32622;">Section&nbsp;3.11, &#8220;&#22522;&#20110;&#27880;&#35299;&#65288;Annotation-based&#65289;&#30340;&#37197;&#32622;&#8221;</a>)&#28436;&#31034;&#20102;&#22914;&#20309;&#20351;&#29992;&#20195;&#30721;&#32423;&#27880;&#35299;&#26469;&#25552;&#20379;&#22823;&#37327;&#37197;&#32622;&#20803;&#25968;&#25454;&#12290;
    &#28982;&#32780;&#65292;&#21363;&#20351;&#26159;&#22312;&#37027;&#20123;&#20363;&#23376;&#20013;&#65292;&#8220;&#22522;&#30784;&#8221;bean&#23450;&#20041;&#36824;&#26159;&#26174;&#24335;&#22320;&#23450;&#20041;&#22312;XML&#25991;&#20214;&#20013;&#65292;&#27880;&#35299;&#21482;&#26159;&#29992;&#26469;&#39537;&#21160;&#20381;&#36182;&#27880;&#20837;&#30340;&#12290;
    &#26412;&#33410;&#20013;&#20250;&#20171;&#32461;&#19968;&#31181;&#26041;&#27861;&#65292;&#36890;&#36807;&#25195;&#25551;classpath&#24182;&#21305;&#37197;<span class="emphasis"><em>&#36807;&#28388;&#22120;</em></span>&#26469;&#38544;&#24335;&#22320;&#26816;&#27979;<span class="emphasis"><em>&#20505;&#36873;&#32452;&#20214;</em></span> (candidate components)&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-stereotype-annotations"></a>3.12.1.&nbsp;<tt class="interfacename">@Component</tt>&#21644;&#26356;&#22810;&#20856;&#22411;&#21270;&#27880;&#35299;</h3></div></div><div></div></div><p>&#20174;Spring 2.0&#24320;&#22987;&#65292;&#24341;&#20837;&#20102;<tt class="interfacename">@Repository</tt>&#27880;&#35299;&#65292;
      &#29992;&#23427;&#26469;&#26631;&#35760;&#20805;&#24403;&#20648;&#23384;&#24211;(&#21448;&#31216; Data Access Object&#25110;DAO)&#35282;&#33394;&#25110;&#20856;&#22411;&#30340;&#31867;&#12290;&#21033;&#29992;&#36825;&#20010;&#26631;&#35760;&#21487;&#20197;&#20570;&#24456;&#22810;&#20107;&#65292;
      &#20854;&#20013;&#20043;&#19968;&#23601;&#26159;&#23545;<a href="#orm-jpa-exceptions" title="12.6.4.&nbsp;&#24322;&#24120;&#36716;&#21270;">Section&nbsp;12.6.4, &#8220;&#24322;&#24120;&#36716;&#21270;&#8221;</a>&#20013;&#25551;&#36848;&#30340;&#24322;&#24120;&#36827;&#34892;&#33258;&#21160;&#36716;&#25442;&#12290;</p><p>Spring 2.5&#24341;&#20837;&#20102;&#26356;&#22810;&#20856;&#22411;&#21270;&#27880;&#35299;(stereotype annotations)&#65306;
      <tt class="interfacename">@Component</tt>&#12289;<tt class="interfacename">@Service</tt>&#21644;
      <tt class="interfacename">@Controller</tt>&#12290;
      <tt class="interfacename">@Component</tt>&#26159;&#25152;&#26377;&#21463;Spring&#31649;&#29702;&#32452;&#20214;&#30340;&#36890;&#29992;&#24418;&#24335;&#65307;
      &#32780;<tt class="interfacename">@Repository</tt>&#12289;<tt class="interfacename">@Service</tt>&#21644;
      <tt class="interfacename">@Controller</tt>&#21017;&#26159;<tt class="interfacename">@Component</tt>&#30340;&#32454;&#21270;&#65292;
      &#29992;&#26469;&#34920;&#31034;&#26356;&#20855;&#20307;&#30340;&#29992;&#20363;(&#20363;&#22914;&#65292;&#20998;&#21035;&#23545;&#24212;&#20102;&#25345;&#20037;&#21270;&#23618;&#12289;&#26381;&#21153;&#23618;&#21644;&#34920;&#29616;&#23618;)&#12290;&#20063;&#23601;&#26159;&#35828;&#65292;
      &#20320;&#33021;&#29992;<tt class="interfacename">@Component</tt>&#26469;&#27880;&#35299;&#20320;&#30340;&#32452;&#20214;&#31867;&#65292;
      &#20294;&#22914;&#26524;&#29992;<tt class="interfacename">@Repository</tt>&#12289;<tt class="interfacename">@Service</tt>
      &#25110;<tt class="interfacename">@Controller</tt>&#26469;&#27880;&#35299;&#23427;&#20204;&#65292;&#20320;&#30340;&#31867;&#20063;&#35768;&#33021;&#26356;&#22909;&#22320;&#34987;&#24037;&#20855;&#22788;&#29702;&#65292;&#25110;&#19982;&#20999;&#38754;&#36827;&#34892;&#20851;&#32852;&#12290;
      &#20363;&#22914;&#65292;&#36825;&#20123;&#20856;&#22411;&#21270;&#27880;&#35299;&#21487;&#20197;&#25104;&#20026;&#29702;&#24819;&#30340;&#20999;&#20837;&#28857;&#30446;&#26631;&#12290;&#24403;&#28982;&#65292;&#22312;Spring Framework&#20197;&#21518;&#30340;&#29256;&#26412;&#20013;&#65292;
      <tt class="interfacename">@Repository</tt>&#12289;<tt class="interfacename">@Service</tt>&#21644;
      <tt class="interfacename">@Controller</tt>&#20063;&#35768;&#36824;&#33021;&#25658;&#24102;&#26356;&#22810;&#35821;&#20041;&#12290;&#22914;&#27492;&#19968;&#26469;&#65292;&#22914;&#26524;&#20320;&#27491;&#22312;&#32771;&#34385;&#26381;&#21153;&#23618;&#20013;&#26159;&#35813;&#29992;
      <tt class="interfacename">@Component</tt>&#36824;&#26159;<tt class="interfacename">@Service</tt>&#65292;
      &#37027;<tt class="interfacename">@Service</tt>&#26174;&#28982;&#26159;&#26356;&#22909;&#30340;&#36873;&#25321;&#12290;&#21516;&#26679;&#30340;&#65292;&#23601;&#20687;&#21069;&#38754;&#35828;&#30340;&#37027;&#26679;&#65292;
      <tt class="interfacename">@Repository</tt>&#24050;&#32463;&#33021;&#22312;&#25345;&#20037;&#21270;&#23618;&#20013;&#36827;&#34892;&#24322;&#24120;&#36716;&#25442;&#26102;&#34987;&#20316;&#20026;&#26631;&#35760;&#20351;&#29992;&#20102;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-scanning-autodetection"></a>3.12.2.&nbsp;&#33258;&#21160;&#26816;&#27979;&#32452;&#20214;</h3></div></div><div></div></div><p>Spring&#21487;&#20197;&#33258;&#21160;&#26816;&#27979;&#8220;&#34987;&#20856;&#22411;&#21270;&#8221;(stereotyped)&#30340;&#31867;&#65292;&#22312;<tt class="interfacename">ApplicationContext</tt>
      &#20013;&#27880;&#20876;&#30456;&#24212;&#30340;<tt class="interfacename">BeanDefinition</tt>&#12290;&#20363;&#22914;&#65292;&#19979;&#38754;&#30340;&#36825;&#20004;&#20010;&#31867;&#23601;&#28385;&#36275;&#36825;&#31181;&#33258;&#21160;&#26816;&#27979;&#30340;&#35201;&#27714;&#65306;</p><pre class="programlisting">@Service
public class SimpleMovieLister {

    private MovieFinder movieFinder;

    @Autowired
    public SimpleMovieLister(MovieFinder movieFinder) {
        this.movieFinder = movieFinder;
    }
}</pre><pre class="programlisting">@Repository
public class JpaMovieFinder implements MovieFinder {
    <i class="lineannotation"><span class="lineannotation">// implementation elided for clarity</span></i>
}</pre><p>&#35201;&#26816;&#27979;&#36825;&#20123;&#31867;&#24182;&#27880;&#20876;&#30456;&#24212;&#30340;bean&#65292;&#38656;&#35201;&#22312;XML&#20013;&#21253;&#21547;&#20197;&#19979;&#20803;&#32032;&#65292;&#20854;&#20013;'basePackage'&#26159;&#20004;&#20010;&#31867;&#30340;&#20844;&#20849;&#29238;&#21253;
      (&#25110;&#32773;&#21487;&#20197;&#29992;&#36887;&#21495;&#20998;&#38548;&#30340;&#21015;&#34920;&#26469;&#20998;&#21035;&#25351;&#23450;&#21253;&#21547;&#21508;&#20010;&#31867;&#30340;&#21253;)&#12290;</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans 
           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context-2.5.xsd"&gt;
               
     &lt;context:component-scan base-package="org.example"/&gt;
     
&lt;/beans&gt;</pre><p>&#27492;&#22806;&#65292;&#22312;&#20351;&#29992;&#32452;&#20214;&#25195;&#25551;&#20803;&#32032;&#26102;&#65292;<tt class="interfacename">AutowiredAnnotationBeanPostProcessor</tt>
      &#21644;<tt class="interfacename">CommonAnnotationBeanPostProcessor</tt>&#20250;&#38544;&#24335;&#22320;&#34987;&#21253;&#25324;&#36827;&#26469;&#12290;
      &#20063;&#23601;&#26159;&#35828;&#65292;&#36830;&#20010;&#32452;&#20214;&#37117;&#20250;&#34987;&#33258;&#21160;&#26816;&#27979;<span class="emphasis"><em>&#24182;</em></span>&#32455;&#20837; - 
      &#25152;&#26377;&#36825;&#19968;&#20999;&#37117;&#19981;&#38656;&#35201;&#22312;XML&#20013;&#25552;&#20379;&#20219;&#20309;bean&#37197;&#32622;&#20803;&#25968;&#25454;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#36890;&#36807;&#21152;&#20837;&#20540;&#20026;'false'&#30340;<span class="emphasis"><em>annotation-config</em></span>&#23646;&#24615;&#21487;&#20197;&#31105;&#27490;&#27880;&#20876;&#36825;&#20123;&#21518;&#32622;&#22788;&#29702;&#22120;&#12290;</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-scanning-filters"></a>3.12.3.&nbsp;&#20351;&#29992;&#36807;&#28388;&#22120;&#33258;&#23450;&#20041;&#25195;&#25551;</h3></div></div><div></div></div><p>&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#29992;<tt class="interfacename">@Component</tt>&#12289;
      <tt class="interfacename">@Repository</tt>&#12289;<tt class="interfacename">@Service</tt>&#25110;
      <tt class="interfacename">@Controller</tt> (&#25110;&#26412;&#36523;&#20351;&#29992;&#20102;<tt class="interfacename">@Component</tt>&#27880;&#35299;&#30340;&#33258;&#23450;&#20041;&#27880;&#35299;)
      &#27880;&#35299;&#30340;&#31867;&#26159;&#21807;&#19968;&#20250;&#34987;&#26816;&#27979;&#21040;&#30340;&#20505;&#36873;&#32452;&#20214;&#12290;&#20294;&#26159;&#21487;&#20197;&#24456;&#26041;&#20415;&#22320;&#36890;&#36807;&#33258;&#23450;&#20041;&#36807;&#28388;&#22120;&#26469;&#25913;&#21464;&#24182;&#25193;&#23637;&#36825;&#19968;&#34892;&#20026;&#12290;
      &#21487;&#20197;&#29992;'<tt class="literal">component-scan</tt>'&#30340;<span class="emphasis"><em>include-filter</em></span>&#25110;
      <span class="emphasis"><em>exclude-filter</em></span>&#23376;&#20803;&#32032;&#26469;&#36827;&#34892;&#28155;&#21152;&#12290;
      &#27599;&#20010;&#36807;&#28388;&#22120;&#20803;&#32032;&#37117;&#35201;&#27714;&#26377;'<tt class="literal">type</tt>'&#21644;'<tt class="literal">expression</tt>'&#23646;&#24615;&#12290;
      &#19979;&#38754;&#32473;&#20986;&#20102;&#22235;&#20010;&#24050;&#26377;&#30340;&#21487;&#36873;&#36807;&#28388;&#22120;&#12290;</p><div class="table"><a name="beans-scanning-filters-tbl"></a><p class="title"><b>Table&nbsp;3.7.&nbsp;&#36807;&#28388;&#22120;&#31867;&#22411;</b></p><table summary="&#36807;&#28388;&#22120;&#31867;&#22411;" border="1"><colgroup><col><col></colgroup><thead><tr><th>&#36807;&#28388;&#22120;&#31867;&#22411;</th><th>&#34920;&#36798;&#24335;&#33539;&#20363;</th></tr></thead><tbody><tr><td>annotation</td><td><p><tt class="classname">org.example.SomeAnnotation</tt></p></td></tr><tr><td>assignable</td><td><p><tt class="classname">org.example.SomeClass</tt></p></td></tr><tr><td>regex</td><td><p>org\.example\.Default.*</p></td></tr><tr><td>aspectj</td><td><p><tt class="interfacename">org.example..*Service+</tt></p></td></tr></tbody></table></div><p>&#19979;&#38754;&#36825;&#20010;XML&#37197;&#32622;&#20250;&#24573;&#30053;&#25152;&#26377;&#30340;<tt class="interfacename">@Repository</tt>&#27880;&#35299;&#24182;&#29992;&#8220;stub&#8221;&#20648;&#23384;&#24211;&#20195;&#26367;&#12290;</p><pre class="programlisting">&lt;beans ...&gt;

     &lt;context:component-scan base-package="org.example"&gt;
        &lt;context:include-filter type="regex" expression=".*Stub.*Repository"/&gt;
        &lt;context:exclude-filter type="annotation" expression="org.springframework.stereotype.Repository"/&gt;
     &lt;/context:component-scan&gt;

&lt;/beans&gt;</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#20320;&#20063;&#21487;&#20197;&#29992;&lt;component-scan/&gt;&#20803;&#32032;&#30340;<span class="emphasis"><em>use-default-filters="false"</em></span>
        &#23646;&#24615;&#26469;&#31105;&#29992;&#40664;&#35748;&#30340;&#36807;&#28388;&#22120;&#12290;&#36825;&#20250;&#20851;&#38381;&#23545;&#20351;&#29992;&#20102;<tt class="interfacename">@Component</tt>&#12289;
        <tt class="interfacename">@Repository</tt>&#12289;<tt class="interfacename">@Service</tt>&#25110;
        <tt class="interfacename">@Controller</tt>&#30340;&#31867;&#30340;&#33258;&#21160;&#26816;&#27979;&#12290;</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-scanning-name-generator"></a>3.12.4.&nbsp;&#33258;&#21160;&#26816;&#27979;&#32452;&#20214;&#30340;&#21629;&#21517;</h3></div></div><div></div></div><p>&#24403;&#19968;&#20010;&#32452;&#20214;&#22312;&#26576;&#20010;&#25195;&#25551;&#36807;&#31243;&#20013;&#34987;&#33258;&#21160;&#26816;&#27979;&#21040;&#26102;&#65292;&#20250;&#26681;&#25454;&#37027;&#20010;&#25195;&#25551;&#22120;&#30340;<tt class="interfacename">BeanNameGenerator</tt>
      &#31574;&#30053;&#29983;&#25104;&#23427;&#30340;bean&#21517;&#31216;&#12290;&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#20219;&#20309;&#21253;&#21547;<tt class="literal">name</tt>&#20540;&#30340;Spring&#8220;&#20856;&#22411;&#8221;&#27880;&#35299;
      (<tt class="interfacename">@Component</tt>&#12289;<tt class="interfacename">@Repository</tt>&#12289;
      <tt class="interfacename">@Service</tt>&#21644;<tt class="interfacename">@Controller</tt>)
      &#20250;&#25226;&#37027;&#20010;&#21517;&#23383;&#25552;&#20379;&#32473;&#30456;&#20851;&#30340;bean&#23450;&#20041;&#12290;&#22914;&#26524;&#36825;&#20010;&#27880;&#35299;&#19981;&#21253;&#21547;<tt class="literal">name</tt>&#20540;&#25110;&#26159;&#20854;&#20182;&#26816;&#27979;&#21040;&#30340;&#32452;&#20214;
      (&#27604;&#22914;&#34987;&#33258;&#23450;&#20041;&#36807;&#28388;&#22120;&#21457;&#29616;&#30340;)&#65292;&#40664;&#35748;bean&#21517;&#31216;&#29983;&#25104;&#22120;&#20250;&#36820;&#22238;&#23567;&#20889;&#24320;&#22836;&#30340;&#38750;&#38480;&#23450;(non-qualified)&#31867;&#21517;&#12290;
      &#20363;&#22914;&#65292;&#22914;&#26524;&#21457;&#29616;&#20102;&#19979;&#38754;&#36825;&#20004;&#20010;&#32452;&#20214;&#65292;&#23427;&#20204;&#30340;&#21517;&#23383;&#20250;&#26159;'myMovieLister'&#21644;'movieFinderImpl'&#65306;</p><pre class="programlisting">@Service("myMovieLister")
public class SimpleMovieLister {
    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><pre class="programlisting">@Repository
public class MovieFinderImpl implements MovieFinder {
    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#22914;&#26524;&#20320;&#19981;&#24819;&#20351;&#29992;&#40664;&#35748;bean&#21629;&#21517;&#31574;&#30053;&#65292;&#21487;&#20197;&#25552;&#20379;&#19968;&#20010;&#33258;&#23450;&#20041;&#30340;&#21629;&#21517;&#31574;&#30053;&#12290;&#39318;&#20808;&#23454;&#29616;
        <a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/beans/factory/support/BeanNameGenerator.html" target="_top"><tt class="interfacename">BeanNameGenerator</tt></a>
        &#25509;&#21475;&#65292;&#30830;&#35748;&#21253;&#21547;&#20102;&#19968;&#20010;&#40664;&#35748;&#30340;&#26080;&#21442;&#25968;&#26500;&#36896;&#26041;&#27861;&#12290;&#28982;&#21518;&#22312;&#37197;&#32622;&#25195;&#25551;&#22120;&#26102;&#25552;&#20379;&#19968;&#20010;&#20840;&#38480;&#23450;(fully-qualified)&#31867;&#21517;&#65306;</p></td></tr></tbody></table></div><pre class="programlisting">&lt;beans ...&gt;
               
     &lt;context:component-scan base-package="org.example"
                             name-generator="org.example.MyNameGenerator" /&gt;

&lt;/beans&gt;</pre><p>&#20316;&#20026;&#19968;&#26465;&#24120;&#35268;&#65292;&#24403;&#20854;&#20182;&#32452;&#20214;&#21487;&#33021;&#20250;&#26174;&#24335;&#22320;&#24341;&#29992;&#19968;&#20010;&#32452;&#20214;&#26102;&#21487;&#20197;&#32771;&#34385;&#29992;&#27880;&#35299;&#26469;&#25351;&#23450;&#21517;&#31216;&#12290;
      &#21478;&#19968;&#26041;&#38754;&#65292;&#24403;&#23481;&#22120;&#36127;&#36131;&#32455;&#20837;&#26102;&#65292;&#33258;&#21160;&#29983;&#25104;&#30340;&#21517;&#31216;&#23601;&#36275;&#22815;&#20102;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-scanning-scope-resolver"></a>3.12.5.&nbsp;&#20026;&#33258;&#21160;&#26816;&#27979;&#30340;&#32452;&#20214;&#25552;&#20379;&#19968;&#20010;&#20316;&#29992;&#22495;</h3></div></div><div></div></div><p>&#36890;&#24120;&#21463;Spring&#31649;&#29702;&#30340;&#32452;&#20214;&#65292;&#40664;&#35748;&#25110;&#32773;&#26368;&#24120;&#29992;&#30340;&#20316;&#29992;&#22495;&#26159;&#8220;singleton&#8221;&#12290;&#28982;&#32780;&#65292;&#26377;&#26102;&#20063;&#20250;&#38656;&#35201;&#20854;&#20182;&#30340;&#20316;&#29992;&#22495;&#12290;
      &#22240;&#27492;Spring 2.5&#36824;&#24341;&#20837;&#20102;&#19968;&#20010;&#26032;&#30340;<tt class="interfacename">@Scope</tt>&#27880;&#35299;&#12290;&#21482;&#35201;&#22312;&#27880;&#35299;&#20013;&#25552;&#20379;&#20316;&#29992;&#22495;&#30340;&#21517;&#31216;&#23601;&#34892;&#20102;&#65292;
      &#27604;&#26041;&#35828;&#65306;</p><pre class="programlisting">@Scope("prototype")
@Repository
public class MovieFinderImpl implements MovieFinder {
    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#22914;&#26524;&#20320;&#24819;&#25552;&#20379;&#19968;&#20010;&#33258;&#23450;&#20041;&#30340;&#20316;&#29992;&#22495;&#35299;&#26512;&#31574;&#30053;&#65292;&#19981;&#20351;&#29992;&#22522;&#20110;&#27880;&#35299;&#30340;&#26041;&#27861;&#65292;&#23454;&#29616;<a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/context/annotation/ScopeMetadataResolver.html" target="_top"><tt class="interfacename">ScopeMetadataResolver</tt></a>
        &#25509;&#21475;&#65292;&#30830;&#35748;&#21253;&#21547;&#19968;&#20010;&#40664;&#35748;&#30340;&#27809;&#26377;&#21442;&#25968;&#30340;&#26500;&#36896;&#26041;&#27861;&#12290;&#28982;&#21518;&#22312;&#37197;&#32622;&#25195;&#25551;&#22120;&#26102;&#25552;&#20379;&#20840;&#38480;&#23450;&#31867;&#21517;&#65306;</p></td></tr></tbody></table></div><pre class="programlisting">&lt;beans ...&gt;
               
     &lt;context:component-scan base-package="org.example"
                             scope-resolver="org.example.MyScopeResolver" /&gt;
     
&lt;/beans&gt;</pre><p>&#24403;&#20351;&#29992;&#26576;&#20123;&#38750;singleton&#30340;&#20316;&#29992;&#22495;&#26102;&#65292;&#21487;&#33021;&#38656;&#35201;&#20026;&#36825;&#20123;&#20316;&#29992;&#22495;&#20013;&#30340;&#23545;&#35937;&#29983;&#25104;&#20195;&#29702;&#12290;
      &#21407;&#22240;&#22312;&#26631;&#39064;&#20026;<a href="#beans-factory-scopes-other-injection" title="3.4.4.5.&nbsp;&#20316;&#29992;&#22495;bean&#19982;&#20381;&#36182;">Section&nbsp;3.4.4.5, &#8220;&#20316;&#29992;&#22495;bean&#19982;&#20381;&#36182;&#8221;</a>&#30340;&#31456;&#33410;&#20013;&#24050;&#32463;&#35828;&#36807;&#20102;&#12290;
      &#20026;&#20102;&#36825;&#20010;&#30446;&#30340;&#65292;'component-scan'&#20803;&#32032;&#26377;&#19968;&#20010;<span class="emphasis"><em>scoped-proxy</em></span>&#23646;&#24615;&#12290;
      &#19977;&#20010;&#21487;&#33021;&#20540;&#26159;&#65306;'no'&#12289;'interfaces'&#21644;'targetClass'&#12290;&#27604;&#26041;&#35828;&#65292;&#19979;&#38754;&#30340;&#37197;&#32622;&#20250;&#20135;&#29983;&#26631;&#20934;&#30340;JDK&#21160;&#24577;&#20195;&#29702;&#65306;</p><pre class="programlisting">&lt;beans ...&gt;
               
     &lt;context:component-scan base-package="org.example"
                             scoped-proxy="interfaces" /&gt;
     
&lt;/beans&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-scanning-qualifiers"></a>3.12.6.&nbsp;&#29992;&#27880;&#35299;&#25552;&#20379;&#38480;&#23450;&#31526;&#20803;&#25968;&#25454;</h3></div></div><div></div></div><p>&#22312;&#21517;&#20026;<a href="#beans-autowired-annotation-qualifiers" title="3.11.2.&nbsp;&#22522;&#20110;&#27880;&#35299;&#30340;&#33258;&#21160;&#36830;&#25509;&#24494;&#35843;">Section&nbsp;3.11.2, &#8220;&#22522;&#20110;&#27880;&#35299;&#30340;&#33258;&#21160;&#36830;&#25509;&#24494;&#35843;&#8221;</a>&#30340;&#31456;&#33410;&#37324;&#24341;&#20837;&#20102;<tt class="interfacename">@Qualifier</tt>&#27880;&#35299;&#12290;
      &#37027;&#33410;&#30340;&#20363;&#23376;&#20013;&#28436;&#31034;&#20102;<tt class="interfacename">@Qualifier</tt>&#27880;&#35299;&#30340;&#29992;&#27861;&#65292;&#20197;&#21450;&#22914;&#20309;&#29992;&#33258;&#23450;&#20041;&#38480;&#23450;&#31526;&#27880;&#35299;&#22312;&#33258;&#21160;&#32455;&#20837;&#35299;&#26512;&#26102;&#25552;&#20379;&#31934;&#32454;&#25511;&#21046;&#12290;
      &#37027;&#20123;&#20363;&#23376;&#26159;&#22522;&#20110;XML bean&#23450;&#20041;&#30340;&#65292;&#25152;&#20197;&#38480;&#23450;&#31526;&#20803;&#25968;&#25454;&#26159;&#22312;XML&#20013;&#30001;'<tt class="literal">bean</tt>'&#20803;&#32032;&#30340;
      '<tt class="literal">qualifier</tt>'&#25110;'<tt class="literal">meta</tt>'&#23376;&#20803;&#32032;&#25552;&#20379;&#12290;&#20351;&#29992;classpath&#25195;&#25551;&#26469;&#33258;&#21160;&#26816;&#27979;&#32452;&#20214;&#26102;&#65292;
      &#38480;&#23450;&#31526;&#20803;&#25968;&#25454;&#21487;&#20197;&#30001;&#20505;&#36873;&#31867;&#19978;&#30340;&#31867;&#21035;&#32423;(type-level)&#27880;&#35299;&#26469;&#25552;&#20379;&#12290;&#19979;&#38754;&#30340;&#19977;&#20010;&#20363;&#23376;&#23601;&#28436;&#31034;&#20102;&#36825;&#20010;&#25216;&#26415;&#12290;</p><pre class="programlisting">@Component
<span class="bold"><b>@Qualifier("Action")</b></span>
public class ActionMovieCatalog implements MovieCatalog {
    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><pre class="programlisting">@Component
<span class="bold"><b>@Genre("Action")</b></span>
public class ActionMovieCatalog implements MovieCatalog {
    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><pre class="programlisting">@Component
<span class="bold"><b>@Offline</b></span>
public class CachingMovieCatalog implements MovieCatalog {
    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left">&#21644;&#20854;&#20182;&#22823;&#22810;&#25968;&#22522;&#20110;&#27880;&#35299;&#30340;&#19996;&#35199;&#19968;&#26679;&#65292;&#35831;&#29282;&#35760;&#27880;&#35299;&#20803;&#25968;&#25454;&#26159;&#32465;&#23450;&#21040;&#31867;&#23450;&#20041;&#19978;&#30340;&#65292;
      &#32780;XML&#21017;&#20801;&#35768;&#22810;&#20010;<span class="emphasis"><em>&#30456;&#21516;&#31867;&#22411;</em></span>&#30340;bean&#26681;&#25454;&#38480;&#23450;&#31526;&#20803;&#25968;&#25454;&#25552;&#20379;&#22810;&#31181;&#36873;&#25321;&#65292;
      &#22240;&#20026;&#20803;&#25968;&#25454;&#26159;&#30001;&#27599;&#20010;&#23454;&#20363;&#25552;&#20379;&#30340;&#65292;&#32780;&#19981;&#26159;&#27599;&#20010;&#31867;&#12290;</td></tr></tbody></table></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="context-load-time-weaver"></a>3.13.&nbsp;&#27880;&#20876;&#19968;&#20010;<tt class="interfacename">LoadTimeWeaver</tt></h2></div></div><div></div></div><p>Spring 2.5&#24341;&#20837;&#30340;<tt class="literal">context</tt>&#21517;&#23383;&#31354;&#38388;&#25552;&#20379;&#20102;&#19968;&#20010;<tt class="literal">load-time-weaver</tt>&#20803;&#32032;&#12290;</p><pre class="programlisting">&lt;beans ...&gt;
     
     &lt;context:load-time-weaver/&gt;
     
&lt;/beans&gt;</pre><p>&#22312;&#19968;&#20010;&#22522;&#20110;XML&#30340;Spring&#37197;&#32622;&#25991;&#20214;&#20013;&#21152;&#20837;&#36825;&#20010;&#20803;&#32032;&#33021;&#20026;<tt class="interfacename">ApplicationContext</tt>
    &#28608;&#27963;&#19968;&#20010;Spring <tt class="interfacename">LoadTimeWeaver</tt>&#12290;
    &#37027;&#20010;<tt class="interfacename">ApplicationContext</tt>&#20013;&#30340;&#20219;&#20309;bean&#37117;&#21487;&#20197;&#23454;&#29616;
    <tt class="interfacename">LoadTimeWeaverAware</tt>&#65292;&#20174;&#32780;&#25910;&#21040;&#19968;&#20010;&#21152;&#36733;&#26102;&#32455;&#20837;&#22120;(load-time weaver)&#30340;&#23454;&#20363;&#12290;
    &#36825;&#22312;&#19982;<a href="#orm-jpa" title="12.6.&nbsp;JPA">Spring JPA&#25903;&#25345;</a>&#32467;&#21512;&#26102;&#29305;&#21035;&#26377;&#29992;&#65292;JPA&#31867;&#36716;&#25442;&#38656;&#35201;&#21152;&#36733;&#26102;&#32455;&#20837;&#12290;
    &#35831;&#26597;&#30475;<tt class="classname">LocalContainerEntityManagerFactoryBean</tt>&#30340;Javadoc&#20197;&#33719;&#24471;&#35814;&#32454;&#20449;&#24687;&#12290;
    &#24819;&#35201;&#26356;&#22810;&#22320;&#20102;&#35299;AspectJ&#21152;&#36733;&#26102;&#32455;&#20837;&#30340;&#35805;&#65292;&#35831;&#21442;&#32771;<a href="#aop-aj-ltw" title="6.8.4.&nbsp;&#22312;Spring&#24212;&#29992;&#20013;&#20351;&#29992;AspectJ&#21152;&#36733;&#26102;&#32455;&#20837;&#65288;LTW&#65289;">Section&nbsp;6.8.4, &#8220;&#22312;Spring&#24212;&#29992;&#20013;&#20351;&#29992;AspectJ&#21152;&#36733;&#26102;&#32455;&#20837;&#65288;LTW&#65289;&#8221;</a>&#12290;</p></div><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p><sup>[<a name="ftn.d0e1159" href="#d0e1159">1</a>] </sup>&#21442;&#35265;<a href="#background-ioc" title="&#32972;&#26223;">&#32972;&#26223;</a>&#30340;&#30456;&#20851;&#20869;&#23481;</p></div><div class="footnote"><p><sup>[<a name="ftn.d0e3180" href="#d0e3180">2</a>] </sup>&#21442;&#35265;<a href="#beans-factory-collaborators" title="3.3.1.&nbsp;&#27880;&#20837;&#20381;&#36182;">Section&nbsp;3.3.1, &#8220;&#27880;&#20837;&#20381;&#36182;&#8221;</a></p></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="resources"></a>Chapter&nbsp;4.&nbsp;&#36164;&#28304;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="resources-introduction"></a>4.1.&nbsp;&#31616;&#20171;</h2></div></div><div></div></div><p>Java&#26631;&#20934;&#30340; <tt class="classname">java.net.URL</tt>&#31867;&#21644;&#22810;&#31181;URL&#21069;&#32512;&#22788;&#29702;&#31867;&#24182;&#19981;&#33021;&#24456;&#22909;&#22320;&#28385;&#36275;&#25152;&#26377;&#24213;&#23618;&#36164;&#28304;&#35775;&#38382;&#30340;&#38656;&#35201;&#12290;&#27604;&#22914;&#65292;&#36824;&#27809;&#26377;&#33021;&#20174;&#31867;&#36335;&#24452;&#25110;&#32773;&#30456;&#23545;&#20110;<tt class="classname">ServletContext</tt> &#30340;&#36335;&#24452;&#20013;&#33719;&#24471;&#36164;&#28304;&#30340;&#26631;&#20934;<tt class="classname">URL</tt>&#23454;&#29616;&#12290;&#34429;&#28982;&#33021;&#20026;&#29305;&#23450;&#30340;URL&#21069;&#32512;&#27880;&#20876;&#26032;&#30340;&#22788;&#29702;&#31867;(&#31867;&#20284;&#24050;&#26377;&#21069;&#32512; <tt class="literal">http:</tt> &#30340;&#22788;&#29702;&#31867;)&#65292;&#20294;&#26159;&#36825;&#26679;&#20570;&#36890;&#24120;&#27604;&#36739;&#22797;&#26434;&#65292;&#32780;&#19988;<tt class="classname">URL</tt>&#25509;&#21475;&#36824;&#32570;&#23569;&#19968;&#20123;&#26377;&#29992;&#30340;&#21151;&#33021;&#65292;&#27604;&#22914;&#26816;&#26597;&#25351;&#21521;&#30340;&#36164;&#28304;&#26159;&#21542;&#23384;&#22312;&#30340;&#26041;&#27861;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="resources-resource"></a>4.2.&nbsp;<tt class="interfacename">Resource</tt>&#25509;&#21475;</h2></div></div><div></div></div><p>Spring&#30340; <tt class="interfacename">Resource</tt> &#25509;&#21475;&#26159;&#20026;&#20102;&#25552;&#20379;&#26356;&#24378;&#30340;&#35775;&#38382;&#24213;&#23618;&#36164;&#28304;&#33021;&#21147;&#30340;&#25277;&#35937;&#12290;
		</p><pre class="programlisting">public interface InputStreamSource {

    boolean exists();

    boolean isOpen();

    URL getURL() throws IOException;

    File getFile() throws IOException;

    Resource createRelative(String relativePath) throws IOException;

    String getFilename();

    String getDescription();
}</pre><pre class="programlisting">public interface InputStreamSource {

    InputStream getInputStream() throws IOException;

}</pre><p>
			<tt class="interfacename">Resource</tt> &#25509;&#21475;&#19968;&#20123;&#27604;&#36739;&#37325;&#35201;&#30340;&#26041;&#27861;&#22914;&#19979;&#65306;
		</p><div class="itemizedlist"><ul type="disc"><li><p>
					<tt class="methodname">getInputStream()</tt>: &#23450;&#20301;&#24182;&#25171;&#24320;&#36164;&#28304;&#65292;&#36820;&#22238;&#35835;&#21462;&#27492;&#36164;&#28304;&#30340;&#19968;&#20010; <tt class="classname">InputStream</tt>&#12290;&#27599;&#27425;&#35843;&#29992;&#39044;&#26399;&#20250;&#36820;&#22238;&#19968;&#20010;&#26032;&#30340; <tt class="classname">InputStream</tt>&#65292;&#30001;&#35843;&#29992;&#32773;&#36127;&#36131;&#20851;&#38381;&#36825;&#20010;&#27969;&#12290;</p></li><li><p>
					<tt class="methodname">exists()</tt>: &#36820;&#22238;&#26631;&#35782;&#36825;&#20010;&#36164;&#28304;&#22312;&#29289;&#29702;&#19978;&#26159;&#21542;&#30340;&#30830;&#23384;&#22312;&#30340; <tt class="literal">boolean</tt> &#20540;&#12290;</p></li><li><p>
					<tt class="methodname">isOpen()</tt>: &#36820;&#22238;&#26631;&#35782;&#36825;&#20010;&#36164;&#28304;&#26159;&#21542;&#26377;&#24050;&#25171;&#24320;&#27969;&#30340;&#22788;&#29702;&#31867;&#30340; <tt class="literal">boolean</tt> &#20540;&#12290;&#22914;&#26524;&#20026; <tt class="literal">true</tt>&#65292;&#21017;&#27492;<tt class="classname">InputStream</tt> &#23601;&#19981;&#33021;&#34987;&#22810;&#27425;&#35835;&#21462;&#65292;
&#32780;&#19988;&#21482;&#33021;&#34987;&#35835;&#21462;&#19968;&#27425;&#28982;&#21518;&#20851;&#38381;&#20197;&#36991;&#20813;&#36164;&#28304;&#27844;&#28431;&#12290;&#38500;&#20102; <tt class="classname">InputStreamResource</tt>&#65292;&#24120;&#35265;&#30340;resource&#23454;&#29616;&#37117;&#20250;&#36820;&#22238; <tt class="literal">false</tt>&#12290;
				</p></li><li><p>
					<tt class="methodname">getDescription()</tt>: &#36820;&#22238;&#36164;&#28304;&#30340;&#25551;&#36848;&#65292;&#19968;&#33324;&#22312;&#19982;&#27492;&#36164;&#28304;&#30456;&#20851;&#30340;&#38169;&#35823;&#36755;&#20986;&#26102;&#20351;&#29992;&#12290;&#27492;&#25551;&#36848;&#36890;&#24120;&#26159;&#23436;&#25972;&#30340;&#25991;&#20214;&#21517;&#25110;&#23454;&#38469;&#30340;URL&#22320;&#22336;&#12290;
				</p></li></ul></div><p>&#20854;&#23427;&#26041;&#27861;&#35753;&#20320;&#33719;&#24471;&#34920;&#31034;&#35813;&#36164;&#28304;&#30340;&#23454;&#38469;&#30340; <tt class="classname">URL</tt> &#25110;	<tt class="classname">File</tt> &#23545;&#35937;(&#22914;&#26524;&#38544;&#21547;&#30340;&#23454;&#29616;&#25903;&#25345;&#35813;&#26041;&#27861;&#24182;&#20445;&#25345;&#19968;&#33268;&#30340;&#35805;)&#12290;
		</p><p>Spring&#33258;&#36523;&#22788;&#29702;&#36164;&#28304;&#35831;&#27714;&#30340;&#22810;&#31181;&#26041;&#27861;&#22768;&#26126;&#20013;&#23558;<tt class="interfacename">Resource</tt> &#25277;&#35937;&#20316;&#20026;&#21442;&#25968;&#32780;&#24191;&#27867;&#22320;&#20351;&#29992;&#12290;
Spring APIs&#20013;&#30340;&#19968;&#20123;&#20854;&#23427;&#26041;&#27861;(&#27604;&#22914;&#35768;&#22810;<tt class="interfacename">ApplicationContext</tt>&#30340;&#23454;&#29616;&#26500;&#36896;&#20989;&#25968;)&#65292;&#20351;&#29992;&#26222;&#36890;&#26684;&#24335;&#30340; <tt class="classname">String</tt> &#26469;&#21019;&#24314;&#19982;context&#30456;&#31526;&#30340;<tt class="interfacename">Resource</tt>&#65292;&#20063;&#21487;&#20197;&#20351;&#29992;&#29305;&#27530;&#30340;&#36335;&#24452;<tt class="classname">String</tt>&#21069;&#32512;&#26469;&#35753;&#35843;&#29992;&#32773;&#25351;&#23450;&#21019;&#24314;&#21644;&#20351;&#29992;&#29305;&#23450;&#30340; <tt class="interfacename">Resource</tt> &#23454;&#29616;&#12290;
		</p><p>
			<tt class="interfacename">Resource</tt>&#19981;&#20165;&#34987;Spring&#33258;&#36523;&#22823;&#37327;&#22320;&#20351;&#29992;&#65292;&#23427;&#20063;&#38750;&#24120;&#36866;&#21512;&#22312;&#20320;&#33258;&#24049;&#30340;&#20195;&#30721;&#20013;&#29420;&#31435;&#20316;&#20026;&#36741;&#21161;&#31867;&#20351;&#29992;&#12290;
&#29992;&#25143;&#20195;&#30721;&#29978;&#33267;&#21487;&#20197;&#22312;&#19981;&#29992;&#20851;&#24515;Spring&#20854;&#23427;&#37096;&#20998;&#30340;&#24773;&#20917;&#19979;&#35775;&#38382;&#36164;&#28304;&#12290;&#36825;&#26679;&#30340;&#30830;&#20250;&#36896;&#25104;&#20195;&#30721;&#19982;Spring&#20043;&#38388;&#30340;&#32806;&#21512;&#65292;&#20294;&#20063;&#20165;&#20165;&#26159;&#19982;&#24456;&#23569;&#37327;&#30340;&#36741;&#21161;&#31867;&#32806;&#21512;&#12290;&#36825;&#20123;&#31867;&#21487;&#20197;&#20316;&#20026;&#27604; <tt class="classname">URL</tt> &#26356;&#26377;&#25928;&#30340;&#26367;&#20195;&#65292;&#32780;&#19988;&#19982;&#20026;&#36825;&#20010;&#30446;&#30340;&#32780;&#20351;&#29992;&#20854;&#23427;&#31867;&#24211;&#22522;&#26412;&#30456;&#20284;&#12290;
		</p><p>&#38656;&#35201;&#27880;&#24847;&#30340;&#26159; <tt class="interfacename">Resource</tt> &#25277;&#35937;&#24182;&#27809;&#26377;&#25913;&#21464;&#21151;&#33021;&#65306;&#23427;&#23613;&#37327;&#20351;&#29992;&#23553;&#35013;&#12290;
			&#27604;&#22914; <tt class="classname">UrlResource</tt> &#23553;&#35013;&#20102;URL&#65292;&#28982;&#21518;&#20351;&#29992;&#34987;&#23553;&#35013;&#30340; <tt class="classname">URL</tt> &#26469;&#24037;&#20316;&#12290;
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="resources-implementations"></a>4.3.&nbsp;&#20869;&#32622; <tt class="interfacename">Resource</tt> &#23454;&#29616;</h2></div></div><div></div></div><p>Spring&#25552;&#20379;&#20102;&#24456;&#22810; <tt class="interfacename">Resource</tt> &#30340;&#23454;&#29616;&#65306;
		</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="resources-implementations-urlresource"></a>4.3.1.&nbsp;
				<tt class="classname">UrlResource</tt>
			</h3></div></div><div></div></div><p>
				<tt class="classname">UrlResource</tt> &#23553;&#35013;&#20102;<tt class="classname">java.net.URL</tt>&#65292;&#23427;&#33021;&#22815;&#34987;&#29992;&#26469;&#35775;&#38382;&#20219;&#20309;&#36890;&#36807;URL&#21487;&#20197;&#33719;&#24471;&#30340;&#23545;&#35937;&#65292;&#20363;&#22914;&#65306;&#25991;&#20214;&#12289;HTTP&#23545;&#35937;&#12289;FTP&#23545;&#35937;&#31561;&#12290;&#25152;&#26377;&#30340;URL&#37117;&#26377;&#20010;&#26631;&#20934;&#30340; <tt class="classname">String</tt>&#34920;&#31034;&#65292;&#36825;&#20123;&#26631;&#20934;&#21069;&#32512;&#21487;&#20197;&#26631;&#35782;&#19981;&#21516;&#30340;URL&#31867;&#22411;&#65292;&#21253;&#25324;<tt class="literal">file:</tt>&#35775;&#38382;&#25991;&#20214;&#31995;&#32479;&#36335;&#24452;&#65292;<tt class="literal">http:</tt> &#36890;&#36807;HTTP&#21327;&#35758;&#35775;&#38382;&#30340;&#36164;&#28304;&#65292;<tt class="literal">ftp:</tt> &#36890;&#36807;FTP&#35775;&#38382;&#30340;&#36164;&#28304;&#31561;&#31561;&#12290;
			</p><p>
				<tt class="classname">UrlResource</tt> &#23545;&#35937;&#21487;&#20197;&#22312;Java&#20195;&#30721;&#20013;&#26174;&#24335;&#22320;&#20351;&#29992; <tt class="classname">UrlResource</tt> &#26500;&#36896;&#20989;&#25968;&#26469;&#21019;&#24314;&#12290;&#20294;&#26356;&#22810;&#30340;&#26159;&#36890;&#36807;&#35843;&#29992;&#24102;&#34920;&#31034;&#36335;&#24452;&#30340; <tt class="classname">String</tt> &#21442;&#25968;&#30340;API&#20989;&#25968;&#38544;&#24335;&#22320;&#21019;&#24314;&#12290;&#22312;&#21518;&#19968;&#31181;&#24773;&#20917;&#19979;&#65292;JavaBeans&#30340; <tt class="interfacename">PropertyEditor</tt> &#20250;&#26368;&#32456;&#20915;&#23450;&#21738;&#31181;&#31867;&#22411;&#30340;
				<tt class="interfacename">Resource</tt> &#34987;&#21019;&#24314;&#12290;&#22914;&#26524;&#36825;&#20010;&#23383;&#31526;&#20018;&#21253;&#21547;&#19968;&#20123;&#20247;&#25152;&#21608;&#30693;&#30340;&#21069;&#32512;&#65292;&#27604;&#22914;
				<tt class="literal">classpath:</tt>&#65292;&#23427;&#23601;&#20250;&#21019;&#24314;&#19968;&#20010;&#23545;&#24212;&#30340;&#24050;&#20018;&#34892;&#21270;&#30340; <tt class="interfacename">Resource</tt>&#12290;
				&#28982;&#32780;&#65292;&#22914;&#26524;&#19981;&#33021;&#20998;&#36776;&#20986;&#36825;&#20010;&#21069;&#32512;&#65292;&#23601;&#20250;&#20551;&#23450;&#23427;&#26159;&#20010;&#26631;&#20934;&#30340;URL&#23383;&#31526;&#20018;&#65292;&#28982;&#21518;&#21019;&#24314;<tt class="classname">UrlResource</tt>&#12290;
			</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="resources-implementations-classpathresource"></a>4.3.2.&nbsp;<tt class="classname">ClassPathResource</tt></h3></div></div><div></div></div><p>&#36825;&#20010;&#31867;&#26631;&#35782;&#20174;classpath&#33719;&#24471;&#30340;&#36164;&#28304;&#12290;&#23427;&#20250;&#20351;&#29992;&#32447;&#31243;context&#30340;&#31867;&#21152;&#36733;&#22120;(class loader)&#12289;&#32473;&#23450;&#30340;&#31867;&#21152;&#36733;&#22120;&#25110;&#32773;&#29992;&#26469;&#36733;&#20837;&#36164;&#28304;&#30340;&#32473;&#23450;&#31867;&#12290;</p><p>&#22914;&#26524;&#31867;&#36335;&#24452;&#19978;&#30340;&#36164;&#28304;&#23384;&#22312;&#20110;&#25991;&#20214;&#31995;&#32479;&#37324;&#65292;&#36825;&#20010; <tt class="interfacename">Resource</tt> &#30340;&#23454;&#29616;&#20250;&#25552;&#20379;&#31867;&#20284;&#20110;<tt class="classname">java.io.File</tt>&#30340;&#21151;&#33021;&#12290;&#32780;&#22914;&#26524;&#36164;&#28304;&#26159;&#23384;&#22312;&#20110;&#36824;&#26410;&#35299;&#24320;(&#34987;servlet&#24341;&#25806;&#25110;&#20854;&#23427;&#30340;&#29615;&#22659;&#35299;&#24320;)&#30340;jar&#21253;&#20013;&#65292;&#36825;&#20123; <tt class="interfacename">Resource</tt> &#23454;&#29616;&#20250;&#25552;&#20379;&#31867;&#20284;&#20110;<tt class="classname">java.net.URL</tt> &#30340;&#21151;&#33021;&#12290;
			</p><p>
				<tt class="classname">ClassPathResource</tt>&#23545;&#35937;&#21487;&#20197;&#22312;Java&#20195;&#30721;&#20013;&#26174;&#24335;&#22320;&#20351;&#29992;<tt class="classname">ClassPathResource</tt> &#26500;&#36896;&#20989;&#25968;&#26469;&#21019;&#24314;&#12290;&#20294;&#26356;&#22810;&#30340;&#26159;&#36890;&#36807;&#35843;&#29992;&#24102;&#34920;&#31034;&#36335;&#24452;&#30340;<tt class="classname">String</tt>&#21442;&#25968;&#30340;API&#20989;&#25968;&#38544;&#24335;&#22320;&#21019;&#24314;&#12290;&#22312;&#21518;&#19968;&#31181;&#24773;&#20917;&#19979;&#65292;JavaBeans&#30340; <tt class="interfacename">PropertyEditor</tt> &#20250;&#20998;&#36776;&#23383;&#31526;&#20018;&#20013; <tt class="literal">classpath:</tt> &#21069;&#32512;&#65292;&#28982;&#21518;&#30456;&#24212;&#21019;&#24314; <tt class="classname">ClassPathResource</tt>&#12290;
			</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="resources-implementations-filesystemresource"></a>4.3.3.&nbsp;<tt class="classname">FileSystemResource</tt></h3></div></div><div></div></div><p>&#36825;&#26159;&#20026;&#22788;&#29702; <tt class="classname">java.io.File</tt> &#32780;&#20934;&#22791;&#30340;<tt class="interfacename">Resource</tt>&#23454;&#29616;&#12290;&#23427;&#26082;&#21487;&#20197;&#20316;&#20026;<tt class="classname">File</tt>&#25552;&#20379;&#65292;&#20063;&#21487;&#20197;&#20316;&#20026;<tt class="classname">URL</tt>&#12290;
			</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="resources-implementations-servletcontextresource"></a>4.3.4.&nbsp;
				<tt class="classname">ServletContextResource</tt>
			</h3></div></div><div></div></div><p>&#36825;&#26159;&#20026; <tt class="interfacename">ServletContext</tt> &#36164;&#28304;&#25552;&#20379;&#30340; <tt class="interfacename">Resource</tt> &#23454;&#29616;&#65292;&#23427;&#36127;&#36131;&#35299;&#26512;&#30456;&#20851;web&#24212;&#29992;&#26681;&#30446;&#24405;&#20013;&#30340;&#30456;&#23545;&#36335;&#24452;&#12290;
			</p><p>&#23427;&#22987;&#32456;&#25903;&#25345;&#20197;&#27969;&#21644;URL&#30340;&#26041;&#24335;&#35775;&#38382;&#12290;	&#20294;&#26159;&#21482;&#26377;&#24403;web&#24212;&#29992;&#21253;&#34987;&#35299;&#24320;&#24182;&#19988;&#36164;&#28304;&#22312;&#25991;&#20214;&#31995;&#32479;&#30340;&#29289;&#29702;&#36335;&#24452;&#19978;&#26102;&#65292;&#25165;&#20801;&#35768;&#20197; <tt class="classname">java.io.File</tt> &#26041;&#24335;&#35775;&#38382;&#12290;&#26159;&#21542;&#35299;&#24320;&#24182;&#19988;&#22312;&#25991;&#20214;&#31995;&#32479;&#20013;&#35775;&#38382;&#65292;&#36824;&#26159;&#30452;&#25509;&#20174;JAR&#21253;&#35775;&#38382;&#25110;&#20197;&#20854;&#23427;&#26041;&#24335;&#35775;&#38382;&#22914;DB(&#36825;&#26159;&#21487;&#20197;&#24819;&#35937;&#30340;)&#65292;&#20165;&#21462;&#20915;&#20110;Servlet&#23481;&#22120;&#12290;
			</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="resources-implementations-inputstreamresource"></a>4.3.5.&nbsp;<tt class="classname">InputStreamResource</tt></h3></div></div><div></div></div><p>&#36825;&#26159;&#20026;&#32473;&#23450;&#30340; <tt class="interfacename">InputStream</tt> &#32780;&#20934;&#22791;&#30340; <tt class="interfacename">Resource</tt> &#23454;&#29616;&#12290;&#23427;&#21482;&#26377;&#22312;&#27809;&#26377;&#20854;&#23427;&#21512;&#36866;&#30340; <tt class="interfacename">Resource</tt> &#23454;&#29616;&#26102;&#25165;&#20351;&#29992;&#12290;&#32780;&#19988;&#65292;&#21482;&#35201;&#26377;&#21487;&#33021;&#23601;&#23613;&#37327;&#20351;&#29992; <tt class="classname">ByteArrayResource</tt> &#25110;&#32773;&#20854;&#23427;&#22522;&#20110;&#25991;&#20214;&#30340;<tt class="interfacename">Resource</tt> &#23454;&#29616;&#12290;
			</p><p>&#19982;&#20854;&#23427; <tt class="interfacename">Resource</tt> &#23454;&#29616;&#19981;&#21516;&#30340;&#26159;&#65292;&#36825;&#26159;&#20010; <span class="emphasis"><em>&#24050;&#32463;</em></span>
				&#25171;&#24320;&#36164;&#28304;&#30340;&#25551;&#36848;&#31526;-&#22240;&#27492; <tt class="methodname">isOpen()</tt> &#20989;&#25968;&#36820;&#22238; <tt class="literal">true</tt>&#12290;
				&#22914;&#26524;&#20320;&#38656;&#35201;&#22312;&#20854;&#23427;&#20301;&#32622;&#20445;&#25345;&#36825;&#20010;&#36164;&#28304;&#30340;&#25551;&#36848;&#31526;&#25110;&#32773;&#22810;&#27425;&#35835;&#21462;&#19968;&#20010;&#27969;&#65292;&#35831;&#19981;&#35201;&#20351;&#29992;&#23427;&#12290;
			</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="resources-implementations-bytearrayresource"></a>4.3.6.&nbsp;<tt class="classname">ByteArrayResource</tt></h3></div></div><div></div></div><p>&#36825;&#26159;&#20026;&#32473;&#23450;&#30340;byte&#25968;&#32452;&#20934;&#22791;&#30340; <tt class="interfacename">Resource</tt> &#23454;&#29616;&#12290;
				&#23427;&#20250;&#20026;&#32473;&#23450;&#30340;byte&#25968;&#32452;&#26500;&#36896;&#19968;&#20010; <tt class="classname">ByteArrayInputStream</tt>&#12290;
			</p><p>&#23427;&#22312;&#20174;&#20219;&#20309;&#32473;&#23450;&#30340;byte&#25968;&#32452;&#35835;&#21462;&#20869;&#23481;&#26102;&#24456;&#26377;&#29992;&#65292;&#22240;&#20026;&#19981;&#29992;&#36716;&#25442;&#25104;&#21333;&#19968;&#20316;&#29992;&#30340; <tt class="classname">InputStreamResource</tt>&#12290;
			</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="resources-resourceloader"></a>4.4.&nbsp;<tt class="interfacename">ResourceLoader</tt>&#25509;&#21475;</h2></div></div><div></div></div><p>
			<tt class="interfacename">ResourceLoader</tt> &#25509;&#21475;&#30001;&#33021;&#36820;&#22238;(&#25110;&#32773;&#36733;&#20837;)<tt class="interfacename">Resource</tt> &#23454;&#20363;&#30340;&#23545;&#35937;&#26469;&#23454;&#29616;&#12290;
		</p><pre class="programlisting">public interface ResourceLoader {
    Resource getResource(String location);
}</pre><p>&#25152;&#26377;&#30340;application context&#37117;&#23454;&#29616;&#20102; <tt class="interfacename">ResourceLoader</tt> &#25509;&#21475;&#65292;
			&#22240;&#27492;&#23427;&#20204;&#21487;&#20197;&#29992;&#26469;&#33719;&#21462;<tt class="interfacename">Resource</tt> &#23454;&#20363;&#12290;
		</p><p>&#24403;&#20320;&#35843;&#29992;&#29305;&#23450;application context&#30340; <tt class="methodname">getResource()</tt> &#26041;&#27861;&#65292;
			&#32780;&#19988;&#36164;&#28304;&#36335;&#24452;&#24182;&#27809;&#26377;&#29305;&#23450;&#30340;&#21069;&#32512;&#26102;&#65292;&#20320;&#23558;&#33719;&#24471;&#19982;&#35813;application context&#30456;&#24212;&#30340; <tt class="interfacename">Resource</tt> &#31867;&#22411;&#12290;&#20363;&#22914;&#65306;&#20551;&#23450;&#19979;&#38754;&#30340;&#20195;&#30721;&#29255;&#26029;&#26159;&#22522;&#20110;<tt class="classname">ClassPathXmlApplicationContext</tt> &#23454;&#20363;&#19978;&#25191;&#34892;&#30340;&#65306;
		</p><pre class="programlisting">Resource template = ctx.getResource("some/resource/path/myTemplate.txt");</pre><p>&#36825;&#23558;&#36820;&#22238;<tt class="classname">ClassPathResource</tt>&#65307;&#22914;&#26524;&#26159;&#22522;&#20110;<tt class="classname">FileSystemXmlApplicationContext</tt> &#23454;&#20363;&#19978;&#25191;&#34892;&#30340;&#65292;&#37027;&#20320;&#23558;&#33719;&#24471;<tt class="classname">FileSystemResource</tt>&#12290;&#32780;&#23545;&#20110; <tt class="classname">WebApplicationContext</tt>
&#20320;&#23558;&#33719;&#24471;<tt class="classname">ServletContextResource</tt>&#65292;&#20381;&#27492;&#31867;&#25512;&#12290;
		</p><p>&#36825;&#26679;&#20320;&#21487;&#20197;&#22312;&#29305;&#23450;&#30340;application context&#20013;&#29992;&#27969;&#34892;&#30340;&#26041;&#27861;&#36733;&#20837;&#36164;&#28304;&#12290;
		</p><p>&#21478;&#19968;&#26041;&#38754;&#65292;&#26080;&#35770;&#20160;&#20040;&#31867;&#22411;&#30340;application context&#65292;
			&#20320;&#21487;&#20197;&#36890;&#36807;&#20351;&#29992;&#29305;&#23450;&#30340;&#21069;&#32512; <tt class="literal">classpath:</tt> &#24378;&#21046;&#20351;&#29992;<tt class="classname">ClassPathResource</tt>&#12290;
		</p><pre class="programlisting">Resource template = ctx.getResource("classpath:some/resource/path/myTemplate.txt");</pre><p>&#21516;&#26679;&#30340;&#65292;&#20320;&#21487;&#20197;&#29992;&#20219;&#20309;&#26631;&#20934;&#30340; <tt class="classname">java.net.URL</tt> &#21069;&#32512;&#65292;&#24378;&#21046;&#20351;&#29992; <tt class="classname">UrlResource</tt> &#65306;
		</p><pre class="programlisting">Resource template = ctx.getResource("file:/some/resource/path/myTemplate.txt");</pre><pre class="programlisting">Resource template = ctx.getResource("http://myhost.com/resource/path/myTemplate.txt");</pre><p>&#19979;&#38754;&#30340;&#34920;&#26684;&#27010;&#36848;&#20102; <tt class="classname">String</tt> &#21040; <tt class="interfacename">Resource</tt> &#30340;&#36716;&#25442;&#35268;&#21017;&#65306;</p><div class="table"><a name="resources-resource-strings"></a><p class="title"><b>Table&nbsp;4.1.&nbsp;Resource strings</b></p><table summary="Resource strings" width="100%" border="1"><colgroup><col><col><col></colgroup><thead><tr><th align="center">&#21069;&#32512;</th><th align="center">&#20363;&#23376;</th><th align="center">&#35828;&#26126;</th></tr></thead><tbody><tr><td><p>classpath:</p></td><td><p> <tt class="literal">classpath:com/myapp/config.xml</tt>
			            </p></td><td><p>&#20174;classpath&#20013;&#21152;&#36733;&#12290;</p></td></tr><tr><td><p>file:</p></td><td><p> <tt class="literal">file:/data/config.xml</tt>
			            </p></td><td><p>&#20316;&#20026; <tt class="classname">URL</tt> &#20174;&#25991;&#20214;&#31995;&#32479;&#20013;&#21152;&#36733;&#12290;<sup>[<a name="d0e7887" href="#ftn.d0e7887">a</a>]</sup> </p></td></tr><tr><td><p>http:</p></td><td><p> <tt class="literal">http://myserver/logo.png</tt>
			            </p></td><td><p>&#20316;&#20026; <tt class="classname">URL</tt> &#21152;&#36733;&#12290;</p></td></tr><tr><td><p>(none)</p></td><td><p> <tt class="literal">/data/config.xml</tt> </p></td><td><p> &#26681;&#25454;
			            <tt class="interfacename">ApplicationContext</tt> &#36827;&#34892;&#21028;&#26029;&#12290; </p></td></tr></tbody><tbody class="footnotes"><tr><td colspan="3"><div class="footnote"><p><sup>[<a name="ftn.d0e7887" href="#d0e7887">a</a>] </sup>&#21442;&#32771;&#26631;&#39064;&#20026; <a href="#resources-filesystemresource-caveats" title="4.7.3.&nbsp;FileSystemResource &#35828;&#26126;">Section&nbsp;4.7.3, &#8220;FileSystemResource &#35828;&#26126;&#8221;</a> &#30340;&#31456;&#33410;&#12290;</p></div></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="resources-resourceloaderaware"></a>4.5.&nbsp;<tt class="interfacename">ResourceLoaderAware</tt> &#25509;&#21475;</h2></div></div><div></div></div><p>
			<tt class="interfacename">ResourceLoaderAware</tt>&#26159;&#29305;&#27530;&#30340;&#26631;&#35760;&#25509;&#21475;&#65292;&#23427;&#24076;&#26395;&#25317;&#26377;&#19968;&#20010;<tt class="interfacename">ResourceLoader</tt> &#24341;&#29992;&#30340;&#23545;&#35937;&#12290;
		</p><pre class="programlisting">public interface ResourceLoaderAware {
   void setResourceLoader(ResourceLoader resourceLoader);
}</pre><p>&#24403;&#23454;&#29616;&#20102; <tt class="interfacename">ResourceLoaderAware</tt>&#25509;&#21475;&#30340;&#31867;&#37096;&#32626;&#21040;application context(&#27604;&#22914;&#21463;Spring&#31649;&#29702;&#30340;bean)&#20013;&#26102;&#65292;&#23427;&#20250;&#34987;application context&#35782;&#21035;&#20026; <tt class="interfacename">ResourceLoaderAware</tt>&#12290;
&#25509;&#30528;application context&#20250;&#35843;&#29992;<tt class="methodname">setResourceLoader(ResourceLoader)</tt>&#26041;&#27861;&#65292;&#24182;&#25226;&#33258;&#36523;&#20316;&#20026;&#21442;&#25968;&#20256;&#20837;&#35813;&#26041;&#27861;(&#35760;&#20303;&#65292;&#25152;&#26377;Spring&#37324;&#30340;application context&#37117;&#23454;&#29616;&#20102;<tt class="interfacename">ResourceLoader</tt>&#25509;&#21475;)&#12290;
		</p><p>&#26082;&#28982; <tt class="interfacename">ApplicationContext</tt> &#23601;&#26159;<tt class="interfacename">ResourceLoader</tt>&#65292;&#37027;&#20040;&#35813;bean&#23601;&#21487;&#20197;&#23454;&#29616; <tt class="interfacename">ApplicationContextAware</tt>&#25509;&#21475;&#24182;&#30452;&#25509;&#20351;&#29992;&#25152;&#25552;&#20379;&#30340;application context&#26469;&#36733;&#20837;&#36164;&#28304;&#65292;&#20294;&#26159;&#36890;&#24120;&#26356;&#36866;&#21512;&#20351;&#29992;&#29305;&#23450;&#30340;&#28385;&#36275;&#25152;&#26377;&#38656;&#35201;&#30340;
			<tt class="interfacename">ResourceLoader</tt>&#23454;&#29616;&#12290;
			&#36825;&#26679;&#19968;&#26469;&#65292;&#20195;&#30721;&#21482;&#38656;&#35201;&#20381;&#36182;&#20110;&#21487;&#20197;&#30475;&#20316;&#36741;&#21161;&#25509;&#21475;&#30340;&#36164;&#28304;&#36733;&#20837;&#25509;&#21475;&#65292;&#32780;&#19981;&#29992;&#20381;&#36182;&#20110;&#25972;&#20010;Spring <tt class="interfacename">ApplicationContext</tt> &#25509;&#21475;&#12290;
		</p><p>&#20174;Spring 2.5&#24320;&#22987;, &#20320;&#21487;&#20197;&#20351;&#29992;<tt class="interfacename">ResourceLoader</tt> &#30340;&#33258;&#21160;&#35013;&#37197;&#26469;&#20195;&#26367;&#23454;&#29616; <tt class="interfacename">ResourceLoaderAware</tt> &#25509;&#21475;&#12290;&#8220;&#20256;&#32479;&#30340;&#8221; <tt class="literal">constructor</tt>&#21450; <tt class="literal">byType</tt>&#30340;&#33258;&#21160;&#35013;&#37197;&#27169;&#24335; (<a href="#beans-factory-autowire" title="3.3.5.&nbsp;&#33258;&#21160;&#35013;&#37197;&#65288;autowire&#65289;&#21327;&#20316;&#32773;">Section&nbsp;3.3.5, &#8220;&#33258;&#21160;&#35013;&#37197;&#65288;autowire&#65289;&#21327;&#20316;&#32773;&#8221;</a>&#24050;&#26377;&#35770;&#36848;)&#29616;&#22312;&#21487;&#20197;&#20998;&#21035;&#20026;&#26500;&#36896;&#26041;&#27861;&#21442;&#25968;&#21450;setter&#26041;&#27861;&#21442;&#25968;&#25552;&#20379; <tt class="interfacename">ResourceLoader</tt> &#31867;&#22411;&#30340;&#20381;&#36182;&#12290;&#35831;&#20351;&#29992;&#26032;&#24335;&#30340;&#22522;&#20110;&#27880;&#35299;&#30340;&#33258;&#21160;&#35013;&#37197;&#29305;&#24615;&#20197;&#25552;&#20379;&#26356;&#22823;&#30340;&#28789;&#27963;&#24615;&#65288;&#21253;&#25324;&#35013;&#37197;&#23646;&#24615;&#21450;&#22810;&#20010;&#26041;&#27861;&#21442;&#25968;&#30340;&#33021;&#21147;&#65289;&#12290;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#21482;&#35201;&#23646;&#24615;&#12289;&#26500;&#36896;&#26041;&#27861;&#25110;&#32773;&#26041;&#27861;&#34987; <tt class="interfacename">@Autowired</tt>&#27880;&#35299;&#20462;&#39280;&#65292;<tt class="interfacename">ResourceLoader</tt> &#23601;&#20250;&#34987;&#35013;&#37197;&#21040;&#38656;&#35201;<tt class="interfacename">ResourceLoader</tt>&#31867;&#22411;&#30340;&#23646;&#24615;&#12289;&#26500;&#36896;&#26041;&#27861;&#21442;&#25968;&#25110;&#32773;&#26041;&#27861;&#21442;&#25968;&#20013;&#12290;&#35831;&#26597;&#30475;&#31456;&#33410; <a href="#beans-autowired-annotation" title="3.11.1.&nbsp;@Autowired">Section&nbsp;3.11.1, &#8220;@Autowired&#8221;</a>&#20197;&#20102;&#35299;&#36827;&#19968;&#27493;&#30340;&#20449;&#24687;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="resources-as-dependencies"></a>4.6.&nbsp;&#25226;<tt class="interfacename">Resource</tt>&#20316;&#20026;&#23646;&#24615;&#26469;&#37197;&#32622;</h2></div></div><div></div></div><p>&#22914;&#26524;bean&#33258;&#36523;&#24076;&#26395;&#36890;&#36807;&#19968;&#20123;&#21160;&#24577;&#26041;&#24335;&#20915;&#23450;&#21644;&#25552;&#20379;&#36164;&#28304;&#36335;&#24452;&#65292;&#37027;&#20040;&#35753;&#36825;&#20010;bean&#36890;&#36807; <tt class="interfacename">ResourceLoader</tt>
			&#25509;&#21475;&#21435;&#36733;&#20837;&#36164;&#28304;&#23601;&#24456;&#26377;&#24847;&#20041;&#20102;&#12290;&#32771;&#34385;&#19968;&#20010;&#36733;&#20837;&#26576;&#31867;&#27169;&#26495;&#30340;&#20363;&#23376;&#65292;&#20854;&#20013;&#38656;&#35201;&#21738;&#31181;&#29305;&#27530;&#31867;&#22411;&#30001;&#29992;&#25143;&#30340;&#35282;&#33394;&#20915;&#23450;&#12290;
			&#22914;&#26524;&#21516;&#26102;&#36164;&#28304;&#26159;&#38745;&#24577;&#30340;&#65292;&#23436;&#20840;&#19981;&#20351;&#29992; <tt class="interfacename">ResourceLoader</tt> &#25509;&#21475;&#24456;&#26377;&#24847;&#20041;&#65292;
			&#36825;&#26679;&#21482;&#38656;&#35753;&#36825;&#20123;bean&#26292;&#38706;&#25152;&#38656;&#30340; <tt class="interfacename">Resource</tt> &#23646;&#24615;&#65292;&#24182;&#20445;&#35777;&#20182;&#20204;&#20250;&#34987;&#27880;&#20837;&#12290;
		</p><p>&#35753;&#27880;&#20837;&#36825;&#20123;&#23646;&#24615;&#30340;&#24037;&#20316;&#21464;&#24471;&#22914;&#27492;&#23481;&#26131;&#30340;&#21407;&#22240;&#26159;&#65292;&#25152;&#26377;&#30340;application context&#27880;&#20876;&#24182;&#20351;&#29992;&#20102;&#33021;&#25226; <tt class="classname">String</tt>
			&#36335;&#24452;&#21464;&#20026; <tt class="interfacename">Resource</tt> &#23545;&#35937;&#30340;&#29305;&#27530; <tt class="interfacename">PropertyEditor</tt>
			JavaBeans&#12290;&#22240;&#27492;&#22914;&#26524; <tt class="literal">myBean</tt> &#26377; <tt class="interfacename">Resource</tt> &#31867;&#22411;&#30340;template&#23646;&#24615;&#65292;
			&#37027;&#23427;&#23601;&#33021;&#22815;&#20351;&#29992;&#31616;&#21333;&#30340;&#23383;&#31526;&#20018;&#37197;&#32622;&#35813;&#36164;&#28304;&#65292;&#22914;&#19979;&#25152;&#31034;&#65306;
		</p><pre class="programlisting">&lt;bean id="myBean" class="..."&gt;
  &lt;property name="template" value="some/resource/path/myTemplate.txt"/&gt;
&lt;/bean&gt;</pre><p>&#21487;&#20197;&#30475;&#21040;&#36164;&#28304;&#36335;&#24452;&#27809;&#26377;&#21069;&#32512;&#65292;&#22240;&#20026;application context&#26412;&#36523;&#35201;&#34987;&#20316;&#20026; <tt class="interfacename">ResourceLoader</tt>
			&#20351;&#29992;&#65292;&#36825;&#20010;&#36164;&#28304;&#20250;&#34987;&#36733;&#20837;&#20026;<tt class="classname">ClassPathResource</tt>&#12289;
			<tt class="literal">FileSystemResource</tt>&#12289;
			<tt class="classname">ServletContextResource</tt>&#31561;&#31561;&#65292;&#36825;&#21462;&#20915;&#20110;context&#31867;&#22411;&#12290;
		</p><p>
			&#22914;&#26524;&#26377;&#24517;&#35201;&#24378;&#21046;&#20351;&#29992;&#29305;&#27530;&#30340; <tt class="interfacename">Resource</tt> &#31867;&#22411;&#65292;&#37027;&#20320;&#23601;&#21487;&#20197;&#20351;&#29992;&#21069;&#32512;&#12290;&#19979;&#38754;&#30340;&#20004;&#20010;&#20363;&#23376;&#35828;&#26126;&#20102;&#22914;&#20309;&#24378;&#21046;&#20351;&#29992; <tt class="classname">ClassPathResource</tt> &#21644;
			<tt class="classname">UrlResource</tt> (&#20854;&#20013;&#30340;&#31532;&#20108;&#20010;&#34987;&#29992;&#26469;&#35775;&#38382;&#25991;&#20214;&#31995;&#32479;&#20013;&#30340;&#25991;&#20214;)&#12290;
		</p><pre class="programlisting">&lt;property name="template" value="classpath:some/resource/path/myTemplate.txt"&gt;</pre><pre class="programlisting">&lt;property name="template" value="file:/some/resource/path/myTemplate.txt"/&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="resources-app-ctx"></a>4.7.&nbsp;Application context &#21644;<tt class="interfacename">Resource</tt> &#36335;&#24452;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="resources-app-ctx-construction"></a>4.7.1.&nbsp;&#26500;&#36896;application context</h3></div></div><div></div></div><p>application context&#26500;&#36896;&#22120;&#36890;&#24120;&#20351;&#29992;&#23383;&#31526;&#20018;&#25110;&#23383;&#31526;&#20018;&#25968;&#32452;&#20316;&#20026;&#36164;&#28304;(&#27604;&#22914;&#32452;&#25104;context&#23450;&#20041; &#30340;XML&#25991;&#20214;)&#30340;&#23450;&#20301;&#36335;&#24452;&#12290;</p><p>&#24403;&#36825;&#26679;&#30340;&#23450;&#20301;&#36335;&#24452;&#27809;&#26377;&#21069;&#32512;&#26102;&#65292;&#25351;&#23450;&#30340; <tt class="interfacename">Resource</tt> &#31867;&#22411;&#20250;&#36890;&#36807;&#36825;&#20010;&#36335;&#24452;&#26469;&#34987;&#21019;&#24314;&#24182;&#34987;&#29992;&#26469;&#36733;&#20837;bean&#30340;&#23450;&#20041;&#65292;&#36825;&#37117;&#21462;&#20915;&#20110;&#20320;&#25152;&#25351;&#23450;&#30340;application context&#12290;&#20363;&#22914;&#65292;&#22914;&#26524;&#20320;&#20351;&#29992;&#19979;&#38754;&#30340;&#20195;&#30721;&#26469;&#21019;&#24314;<tt class="classname">ClassPathXmlApplicationContext</tt> &#65306;</p><pre class="programlisting">ApplicationContext ctx = new ClassPathXmlApplicationContext("conf/appContext.xml");</pre><p>&#36825;&#20123;Bean&#30340;&#23450;&#20041;&#20250;&#36890;&#36807;classpath&#36733;&#20837;&#24182;&#20351;&#29992;<tt class="classname">ClassPathResource</tt>&#12290;&#32780;&#22914;&#26524;&#20320;&#35937;&#19979;&#38754;&#36825;&#20040;&#21019;&#24314;<tt class="classname">FileSystemXmlApplicationContext</tt>&#65306;</p><pre class="programlisting">ApplicationContext ctx =
    new FileSystemXmlApplicationContext("conf/appContext.xml");</pre><p>&#36825;&#20123;Bean&#30340;&#23450;&#20041;&#20250;&#36890;&#36807;&#25991;&#20214;&#31995;&#32479;&#20174;&#30456;&#23545;&#20110;&#24403;&#21069;&#24037;&#20316;&#30446;&#24405;&#20013;&#34987;&#36733;&#20837;&#12290;</p><p>&#35831;&#27880;&#24847;&#22914;&#26524;&#23450;&#20301;&#36335;&#24452;&#20351;&#29992;classpath&#21069;&#32512;&#25110;&#26631;&#20934;&#30340;URL&#21069;&#32512;&#65292;&#37027;&#23427;&#23601;&#20250;&#35206;&#30422;&#40664;&#35748;&#30340;<tt class="interfacename">Resource</tt>
&#31867;&#22411;&#12290;&#22240;&#27492;&#19979;&#38754;&#30340;<tt class="classname">FileSystemXmlApplicationContext</tt>...
			</p><pre class="programlisting">ApplicationContext ctx =
    new FileSystemXmlApplicationContext("classpath:conf/appContext.xml");</pre><p>...&#23454;&#38469;&#19978;&#20250;&#36890;&#36807;classpath&#36733;&#20837;&#20854;bean&#23450;&#20041;&#12290;&#28982;&#32780;&#23427;&#20173;&#26159;&#20010;<tt class="classname">FileSystemXmlApplicationContext</tt>&#12290;
&#22914;&#26524;&#21518;&#38754;&#23427;&#34987;&#24403;&#20316;<tt class="interfacename">ResourceLoader</tt> &#26469;&#20351;&#29992;&#65292;&#37027;&#20040;&#20219;&#20309;&#27809;&#26377;&#20351;&#29992;&#21069;&#32512;&#30340;&#36335;&#24452;&#20381;&#28982;&#20250;&#34987;&#24403;&#20316;&#19968;&#20010;&#25991;&#20214;&#31995;&#32479;&#36335;&#24452;&#12290;
			</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="resources-app-ctx-classpathxml"></a>4.7.1.1.&nbsp;&#21019;&#24314; <tt class="classname">ClassPathXmlApplicationContext</tt> &#23454;&#20363; - &#31616;&#20171;</h4></div></div><div></div></div><p>
					<tt class="classname">ClassPathXmlApplicationContext</tt> &#25552;&#20379;&#20102;&#22810;&#31181;&#26500;&#36896;&#26041;&#27861;&#20197;&#20415;&#20110;&#21021;&#22987;&#21270;&#12290;&#20294;&#20854;&#26680;&#24515;&#26159;&#65292;&#22914;&#26524;&#25105;&#20204;&#20165;&#20165;&#25552;&#20379;&#30001;XML&#25991;&#20214;&#21517;&#32452;&#25104;&#30340;&#23383;&#31526;&#20018;&#25968;&#32452;(&#27809;&#26377;&#23436;&#25972;&#36335;&#24452;&#20449;&#24687;)&#65292;	&#32780;&#19988;<span class="emphasis"><em>&#36824;</em></span>&#25552;&#20379;&#20102;<tt class="classname">Class</tt>&#65307;&#37027;&#20040;&#35813;<tt class="classname">ClassPathXmlApplicationContext</tt>&#23601;
&#20250;&#20174;&#32473;&#23450;&#30340;&#31867;&#20013;&#25277;&#21462;&#36335;&#24452;&#20449;&#24687;&#12290;
				</p><p>&#24076;&#26395;&#36890;&#36807;&#19968;&#20010;&#31034;&#20363;&#25226;&#36825;&#20123;&#38416;&#36848;&#28165;&#26970;&#12290;&#20551;&#35774;&#26377;&#36825;&#26679;&#30340;&#30446;&#24405;&#32467;&#26500;&#65306;
				</p><pre class="programlisting">com/
  foo/
    services.xml
    daos.xml
    MessengerService.class</pre><p>&#30001; <tt class="literal">'services.xml'</tt> &#21644; <tt class="literal">'daos.xml'</tt> &#20013;&#23450;&#20041;&#30340;bean&#32452;&#25104;&#30340;
				<tt class="classname">ClassPathXmlApplicationContext</tt> &#23454;&#20363;&#20250;&#35937;&#36825;&#26679;&#22320;&#26469;&#23454;&#20363;&#21270;...
				</p><pre class="programlisting">ApplicationContext ctx = new ClassPathXmlApplicationContext(
    new String[] {"services.xml", "daos.xml"}, MessengerService.class);</pre><p>&#27442;&#20102;&#35299; <tt class="classname">ClassPathXmlApplicationContext</tt> &#22810;&#31181;&#26500;&#36896;&#26041;&#27861;&#30340;&#32454;&#33410;&#65292;&#35831;&#21442;&#32771;&#23427;&#30340;Javadocs&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="resources-app-ctx-wildcards-in-resource-paths"></a>4.7.2.&nbsp;Application context&#26500;&#36896;&#22120;&#20013;&#36164;&#28304;&#36335;&#24452;&#30340;&#36890;&#37197;&#31526;</h3></div></div><div></div></div><p>Application context&#26500;&#36896;&#22120;&#20013;&#36164;&#28304;&#36335;&#24452;&#30340;&#20540;&#21487;&#20197;&#26159;&#31616;&#21333;&#30340;&#36335;&#24452;(&#23601;&#20687;&#19978;&#38754;&#30340;&#37027;&#26679;)&#65292;&#21363;&#19968;&#23545;&#19968;&#26144;&#23556;&#21040;&#19968;&#20010;&#30446;&#26631;&#36164;&#28304;&#65307;
			&#25110;&#32773;&#21487;&#20197;&#21253;&#21547;&#29305;&#27530;&#30340;"classpath*:"&#21069;&#32512;&#21644;Ant&#39118;&#26684;&#30340;&#27491;&#21017;&#34920;&#36798;&#24335;(&#29992;Spring&#30340; <tt class="classname">PathMatcher</tt> &#24037;&#20855;&#26469;&#21305;&#37197;)&#12290;
			&#21518;&#38754;&#30340;&#20108;&#32773;&#37117;&#21487;&#20197;&#20351;&#29992;&#36890;&#37197;&#31526;&#12290;</p><p>&#35813;&#26426;&#21046;&#30340;&#19968;&#20010;&#29992;&#22788;&#23601;&#26159;&#20570;&#32452;&#20214;&#31867;&#22411;&#30340;&#24212;&#29992;&#32452;&#35013;&#12290;&#25152;&#26377;&#30340;&#32452;&#20214;&#37117;&#21487;&#20197;&#29992;&#36890;&#29992;&#30340;&#23450;&#20301;&#36335;&#24452;&#8220;&#21457;&#24067;&#8221;context&#23450;&#20041;&#29255;&#26029;&#65292;
				&#36825;&#26679;&#24403;&#20351;&#29992;&#30456;&#21516;&#30340; <tt class="literal">classpath*:</tt> &#21069;&#32512;&#21019;&#24314;&#26368;&#32456;&#30340;application context&#26102;&#65292;&#25152;&#26377;&#30340;&#32452;&#20214;&#29255;&#26029;&#37117;&#20250;&#34987;&#33258;&#21160;&#35013;&#20837;&#12290;
			</p><p>&#35831;&#27880;&#24847;&#65292;&#36825;&#20010;&#36890;&#37197;&#31526;&#21482;&#22312;application context&#26500;&#36896;&#22120;&#30340;&#36164;&#28304;&#36335;&#24452;&#20013;
			(&#25110;&#30452;&#25509;&#22312;&#31867;&#30340;&#23618;&#27425;&#20013;&#20351;&#29992; <tt class="classname">PathMatcher</tt> &#24037;&#20855;&#26102;)&#26377;&#25928;&#65292;
			&#23427;&#20250;&#22312;&#26500;&#36896;&#26102;&#36827;&#34892;&#35299;&#26512;&#12290;&#36825;&#19982; <tt class="interfacename">Resource</tt>
			&#31867;&#22411;&#26412;&#36523;&#27809;&#26377;&#20851;&#32852;&#12290;&#22240;&#20026;&#21516;&#19968;&#26102;&#21051;&#21482;&#33021;&#25351;&#21521;&#19968;&#20010;&#36164;&#28304;&#65292;&#25152;&#20197;&#19981;&#33021;&#20351;&#29992;
				<tt class="literal">classpath*:</tt> &#21069;&#32512;&#26469;&#26500;&#36896;&#23454;&#38469;&#30340;<tt class="interfacename">Resource</tt>&#12290;
			</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="resources-app-ctx-ant-patterns-in-paths"></a>4.7.2.1.&nbsp;Ant&#39118;&#26684;&#30340;pattern</h4></div></div><div></div></div><p>&#22312;&#21253;&#21547;Ant&#39118;&#26684;&#30340;pattern&#26102;&#65292;&#20363;&#22914;&#65306;</p><pre class="programlisting">     /WEB-INF/*-context.xml
     com/mycompany/**/applicationContext.xml
     file:C:/some/path/*-context.xml
     classpath:com/mycompany/**/applicationContext.xml</pre><p>&#35299;&#26512;&#22120;&#20250;&#36827;&#34892;&#19968;&#20010;&#39044;&#20808;&#23450;&#20041;&#30340;&#22797;&#26434;&#30340;&#36807;&#31243;&#21435;&#35797;&#22270;&#35299;&#26512;&#36890;&#37197;&#31526;&#12290;
        &#23427;&#26681;&#25454;&#36335;&#24452;&#20013;&#26368;&#21518;&#19968;&#20010;&#38750;&#36890;&#37197;&#31526;&#29255;&#26029;&#20135;&#29983;&#19968;&#20010;Resource&#24182;&#20174;&#20013;&#33719;&#24471;&#19968;&#20010;URL&#12290;
        &#22914;&#26524;&#36825;&#20010;URL&#19981;&#26159;&#19968;&#20010;"jar:" URL&#25110;&#29305;&#23450;&#23481;&#22120;&#30340;&#21464;&#37327;(&#20363;&#22914;WebLogic&#20013;&#30340;
        "<tt class="literal">zip:</tt>"&#65292;WebSphere&#20013;&#30340;"<tt class="literal">wsjar</tt>"&#31561;&#31561;)&#65292;
        &#37027;&#20040;&#21487;&#20197;&#20174;&#20013;&#33719;&#24471;&#19968;&#20010;<tt class="methodname">java.io.File</tt>&#65292;
        &#24182;&#29992;&#23427;&#20174;&#25991;&#20214;&#31995;&#32479;&#20013;&#35299;&#26512;&#36890;&#37197;&#31526;&#12290;&#22914;&#26524;&#26159;&#19968;&#20010;jar URL&#65292;&#35299;&#26512;&#22120;&#21487;&#20197;&#20174;&#20013;&#21462;&#24471;&#19968;&#20010;
        <tt class="classname">java.net.JarURLConnection</tt>&#65292;&#25110;&#32773;&#25163;&#24037;&#35299;&#26512;&#35813;jar URL&#65292;
        &#38543;&#21518;&#36941;&#21382;jar&#25991;&#20214;&#20197;&#35299;&#26512;&#36890;&#37197;&#31526;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="resources-app-ctx-portability"></a>4.7.2.1.1.&nbsp;&#28508;&#22312;&#30340;&#21487;&#31227;&#26893;&#24615;</h5></div></div><div></div></div><p>&#22914;&#26524;&#32473;&#23450;&#30340;&#36335;&#24452;&#24050;&#32463;&#26159;&#19968;&#20010;&#25991;&#20214;URL(&#21487;&#20197;&#26159;&#26174;&#24335;&#30340;&#25110;&#32773;&#26159;&#38544;&#24335;&#30340;)&#65292;
          &#30001;&#20110;&#22522;&#26412;&#30340;ResourceLoader&#26159;&#38024;&#23545;&#25991;&#20214;&#31995;&#32479;&#30340;&#65292;&#37027;&#20040;&#36890;&#37197;&#31526;&#19968;&#23450;&#33021;&#22815;&#31227;&#26893;&#12290;</p><p>&#22914;&#26524;&#32473;&#23450;&#30340;&#36335;&#24452;&#26159;&#19968;&#20010;classpath&#30340;&#20301;&#32622;&#65292;&#37027;&#20040;&#35299;&#26512;&#22120;&#24517;&#39035;&#36890;&#36807;&#19968;&#20010;
          <tt class="methodname">Classloader.getResource()</tt> &#35843;&#29992;&#33719;&#24471;&#26368;&#21518;&#19968;&#20010;
          &#38750;&#36890;&#37197;&#31526;&#36335;&#24452;&#29255;&#26029;&#30340;URL&#12290;&#22240;&#20026;&#36825;&#20165;&#20165;&#26159;&#19968;&#20010;&#36335;&#24452;&#30340;&#33410;&#28857;(&#19981;&#26159;&#26368;&#32456;&#30340;&#25991;&#20214;)&#65292;
          &#25152;&#20197;&#23427;&#24182;&#26410;&#30830;&#20999;&#23450;&#20041;(&#22312; <tt class="classname">ClassLoader</tt> Javadocs&#37324;)
          &#27492;&#22788;&#31350;&#31455;&#20250;&#36820;&#22238;&#20160;&#20040;&#31867;&#22411;&#30340;URL&#12290;&#19968;&#33324;&#24773;&#20917;&#19979;&#65292;&#24403;classpath&#36164;&#28304;&#35299;&#26512;&#20026;&#19968;&#20010;&#25991;&#20214;&#31995;&#32479;&#20301;&#32622;&#26102;&#65292;
          &#36820;&#22238;&#19968;&#20010;&#20195;&#34920;&#30446;&#24405;&#30340; <tt class="classname">java.io.File</tt>&#65307;&#24403;&#35299;&#26512;&#20026;jar&#20301;&#32622;&#26102;&#65292;
          &#36820;&#22238;&#26576;&#31867;jar URL&#12290;&#24403;&#28982;&#65292;&#36825;&#20010;&#25805;&#20316;&#28041;&#21450;&#21040;&#21487;&#31227;&#26893;&#24615;&#12290;</p><p>&#22914;&#26524;&#20174;&#26368;&#21518;&#19968;&#20010;&#38750;&#36890;&#37197;&#31526;&#29255;&#26029;&#20013;&#33719;&#24471;&#19968;&#20010;jar URL&#65292;&#37027;&#20040;&#35299;&#26512;&#22120;&#19968;&#23450;&#33021;&#20174;&#20013;&#21462;&#24471;&#19968;&#20010;
          <tt class="classname">java.net.JarURLConnection</tt>&#65292;&#25110;&#32773;&#25163;&#21160;&#35299;&#26512;jar URL&#20197;&#36941;&#21382;jar&#25991;&#20214;&#65292;
          &#20174;&#32780;&#35299;&#26512;&#36890;&#37197;&#31526;&#12290;&#36825;&#19968;&#25805;&#20316;&#22312;&#22823;&#22810;&#25968;&#29615;&#22659;&#20013;&#33021;&#27491;&#24120;&#24037;&#20316;&#65292;&#19981;&#36807;&#20063;&#26377;&#20363;&#22806;&#65292;
          &#22240;&#27492;&#25105;&#20204;&#24378;&#28872;&#24314;&#35758;&#29305;&#23450;&#29615;&#22659;&#20013;&#30340;jar&#36164;&#28304;&#36890;&#37197;&#31526;&#35299;&#26512;&#24212;&#22312;&#27491;&#24335;&#20351;&#29992;&#21069;&#35201;&#32463;&#36807;&#24443;&#24213;&#27979;&#35797;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="resources-classpath-wildcards"></a>4.7.2.2.&nbsp;<tt class="literal">classpath*:</tt> &#21069;&#32512;</h4></div></div><div></div></div><p>&#24403;&#26500;&#36896;&#22522;&#20110;XML&#30340;application context&#26102;&#65292;&#36335;&#24452;&#23383;&#31526;&#20018;&#21487;&#33021;&#20351;&#29992;&#29305;&#27530;&#30340; <tt class="literal">classpath*:</tt> &#21069;&#32512;&#65306;</p><pre class="programlisting">ApplicationContext ctx =
    new ClassPathXmlApplicationContext("classpath*:conf/appContext.xml");</pre><p>&#27492;&#21069;&#32512;&#34920;&#31034;&#25152;&#26377;&#19982;&#32473;&#23450;&#21517;&#31216;&#21305;&#37197;&#30340;classpath&#36164;&#28304;&#37117;&#24212;&#35813;&#34987;&#33719;&#21462;(&#20854;&#20013;&#65292;&#36825;&#32463;&#24120;&#20250;&#22312;&#35843;&#29992; <tt class="methodname">ClassLoader.getResources(...)</tt>) &#26102;&#21457;&#29983;)&#65292;&#24182;&#25509;&#30528;&#23558;&#37027;&#20123;&#36164;&#28304;&#20840;&#24182;&#25104;&#26368;&#32456;&#30340;application context&#23450;&#20041;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note: Classpath*: &#30340;&#21487;&#31227;&#26893;&#24615;" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Classpath*: &#30340;&#21487;&#31227;&#26893;&#24615;</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#24102;&#36890;&#37197;&#31526;&#30340;classpath&#20381;&#36182;&#20110;&#24213;&#23618;classloader&#30340; <tt class="literal">getResources()</tt> &#26041;&#27861;&#12290;
          &#29616;&#22312;&#22823;&#22810;&#25968;&#30340;&#24212;&#29992;&#26381;&#21153;&#22120;&#25552;&#20379;&#33258;&#24049;&#30340;classloader&#23454;&#29616;&#65292;&#23427;&#20204;&#22312;&#22788;&#29702;jar&#25991;&#20214;&#26102;&#30340;&#34892;&#20026;&#20063;&#35768;&#20250;&#26377;&#25152;&#19981;&#21516;&#12290;
          &#35201;&#27979;&#35797; <tt class="literal">classpath*:</tt> &#26159;&#21542;&#26377;&#25928;&#65292;&#21487;&#20197;&#31616;&#21333;&#22320;&#29992;classloader&#20174;classpath&#20013;&#30340;jar&#25991;&#20214;&#37324;&#21152;&#36733;&#19968;&#20010;&#25991;&#20214;&#65306;
          <tt class="literal">getClass().getClassLoader().getResources("&lt;someFileInsideTheJar&gt;")</tt>&#12290;
          &#38024;&#23545;&#20004;&#20010;&#19981;&#21516;&#20301;&#32622;&#20294;&#26377;&#30456;&#21516;&#21517;&#23383;&#30340;&#25991;&#20214;&#26469;&#36816;&#34892;&#27979;&#35797;&#12290;&#22914;&#26524;&#32467;&#26524;&#19981;&#23545;&#65292;&#37027;&#20040;&#23601;&#26597;&#30475;&#19968;&#19979;&#24212;&#29992;&#26381;&#21153;&#22120;&#30340;&#25991;&#26723;&#65292;
          &#29305;&#21035;&#26159;&#37027;&#20123;&#21487;&#33021;&#24433;&#21709;classloader&#34892;&#20026;&#30340;&#35774;&#32622;&#12290;</p></td></tr></tbody></table></div><p>"<tt class="literal">classpath*:</tt>"&#21069;&#32512;&#20063;&#33021;&#22312;&#20301;&#32622;&#36335;&#24452;&#30340;&#20854;&#20182;&#37096;&#20998;&#32467;&#21512;<tt class="literal">PathMatcher</tt> 
        pattern&#19968;&#36215;&#20351;&#29992;&#65292;&#20363;&#22914;"<tt class="literal">classpath*:META-INF/*-beans.xml</tt>"&#12290;&#22312;&#36825;&#37324;&#65292;
        &#35299;&#26512;&#31574;&#30053;&#24456;&#31616;&#21333;&#65306;&#23545;&#26368;&#21518;&#19968;&#20010;&#38750;&#36890;&#37197;&#31526;&#36335;&#24452;&#29255;&#26029;&#20351;&#29992;&#19968;&#20010;ClassLoader.getResources()&#35843;&#29992;&#65292;
        &#20174;&#31867;&#21152;&#36733;&#23618;&#27425;&#20013;&#33719;&#24471;&#25152;&#26377;&#28385;&#36275;&#30340;&#36164;&#28304;&#65292;&#38543;&#21518;&#38024;&#23545;&#23376;&#36335;&#24452;&#30340;&#36890;&#37197;&#31526;&#65292;
        &#23558;&#21516;&#19968;&#20010;PathMatcher&#35299;&#26512;&#31574;&#30053;&#36816;&#29992;&#20110;&#27599;&#20010;&#36164;&#28304;&#20043;&#19978;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="resources-wildcards-in-path-other-stuff"></a>4.7.2.3.&nbsp;&#20854;&#20182;&#20851;&#20110;&#36890;&#37197;&#31526;&#30340;&#35828;&#26126;</h4></div></div><div></div></div><p>&#35831;&#27880;&#24847;&#22914;&#26524;&#30446;&#26631;&#25991;&#20214;&#19981;&#26159;&#22312;&#25991;&#20214;&#31995;&#32479;&#20013;&#65292;&#37027;&#20040;"<tt class="literal">classpath*:</tt>"
        &#22312;&#32467;&#21512;Ant&#39118;&#26684;&#30340;pattern&#26102;&#24517;&#39035;&#22312;pattern&#24320;&#22987;&#21069;&#21253;&#21547;&#33267;&#23569;&#19968;&#20010;&#26681;&#36335;&#24452;&#25165;&#33021;&#20445;&#35777;&#20854;&#27491;&#30830;&#24615;&#12290;
        &#20687;"<tt class="literal">classpath*:*.xml</tt>"&#36825;&#26679;&#30340;pattern&#19981;&#33021;&#20174;jar&#25991;&#20214;&#30340;&#26681;&#30446;&#24405;&#21462;&#24471;&#25991;&#20214;&#65292;
        &#32780;&#21482;&#33021;&#20174;&#36825;&#20010;&#26681;&#30446;&#24405;&#30340;&#23376;&#30446;&#24405;&#20013;&#33719;&#24471;&#25991;&#20214;&#12290;&#36825;&#20010;&#38382;&#39064;&#28304;&#33258;JDK&#20013; <tt class="methodname">ClassLoader.getResources()</tt>
        &#26041;&#27861;&#30340;&#19968;&#20010;&#23616;&#38480;&#24615;&#65292;&#21363;&#35813;&#26041;&#27861;&#22312;&#20256;&#20837;&#31354;String(&#25351;&#31034;&#35201;&#25628;&#32034;&#30340;&#28508;&#22312;&#26681;&#30446;&#24405;)&#26102;&#21482;&#36820;&#22238;&#25991;&#20214;&#31995;&#32479;&#20301;&#32622;&#12290;</p><p>&#22914;&#26524;&#25628;&#32034;&#30340;&#26681;&#21253;&#22312;&#22810;&#20010;&#31867;&#36335;&#24452;&#20301;&#32622;&#19978;&#65292;&#24102;"<tt class="literal">classpath:</tt>"&#30340;Ant&#39118;&#26684;pattern
		&#36164;&#28304;&#19981;&#33021;&#20445;&#35777;&#19968;&#23450;&#21487;&#20197;&#25214;&#21040;&#21305;&#37197;&#30340;&#36164;&#28304;&#12290;&#36825;&#26159;&#22240;&#20026;&#20687;</p><pre class="programlisting">    com/mycompany/package1/service-context.xml</pre><p>&#36825;&#26679;&#30340;&#36164;&#28304;&#21482;&#21487;&#33021;&#22312;&#19968;&#20010;&#20301;&#32622;&#65292;&#20294;&#22914;&#26524;&#35201;&#35299;&#26512;&#30340;&#26159;&#22914;&#19979;&#36335;&#24452;</p><pre class="programlisting">    classpath:com/mycompany/**/service-context.xml</pre><p>&#35299;&#26512;&#22120;&#20250;&#25490;&#38500;<tt class="methodname">getResource("com/mycompany")</tt>;&#36820;&#22238;&#30340;(&#31532;&#19968;&#20010;)URL&#12290;
        &#22914;&#26524;&#36825;&#20010;&#22522;&#30784;&#21253;&#33410;&#28857;&#23384;&#22312;&#20110;&#22810;&#20010;classloader&#20301;&#32622;&#65292;&#26368;&#32456;&#35201;&#25214;&#30340;&#36164;&#28304;&#26410;&#24517;&#20250;&#34987;&#21457;&#29616;&#12290;
        &#22240;&#27492;&#22312;&#36825;&#31181;&#24773;&#20917;&#20013;&#26368;&#22909;&#22312;&#36825;&#20010;Ant&#39118;&#26684;&#30340;pattern&#20013;&#20351;&#29992;"<tt class="literal">classpath*:</tt>"&#65292;
        &#36825;&#26679;&#23601;&#20250;&#25628;&#32034;&#21253;&#21547;&#26681;&#21253;&#22312;&#20869;&#25152;&#26377;&#31867;&#36335;&#24452;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="resources-filesystemresource-caveats"></a>4.7.3.&nbsp;<tt class="classname">FileSystemResource</tt> &#35828;&#26126;</h3></div></div><div></div></div><p>&#19968;&#20010;&#24182;&#27809;&#26377;&#19982; <tt class="classname">FileSystemApplicationContext</tt> &#32465;&#23450;&#30340;
				<tt class="classname">FileSystemResource</tt>(&#20063;&#23601;&#26159;&#35828;<tt class="classname">FileSystemApplicationContext</tt> &#24182;&#19981;&#26159;&#30495;&#27491;&#30340;<tt class="interfacename">ResourceLoader</tt>)&#65292;&#20250;&#35937;&#20320;&#26399;&#26395;&#30340;&#37027;&#26679;&#20998;&#36776;&#32477;&#23545;&#21644;&#30456;&#23545;&#36335;&#24452;&#12290;
				&#30456;&#23545;&#36335;&#24452;&#26159;&#30456;&#23545;&#20110;&#24403;&#21069;&#30340;&#24037;&#20316;&#30446;&#24405;&#65292;&#32780;&#32477;&#23545;&#36335;&#24452;&#26159;&#30456;&#23545;&#19982;&#25991;&#20214;&#31995;&#32479;&#30340;&#26681;&#30446;&#24405;&#12290;
			</p><p>&#20026;&#20102;&#21521;&#21069;&#20860;&#23481;&#30340;&#30446;&#30340;&#65292;&#24403; <tt class="classname">FileSystemApplicationContext</tt> &#26159;&#20010;
				<tt class="literal">ResourceLoader</tt> &#26102;&#23427;&#20250;&#21457;&#29983;&#21464;&#21270;&#12290;<tt class="classname">FileSystemApplicationContext</tt>
				&#20250;&#31616;&#21333;&#22320;&#35753;&#25152;&#26377;&#32465;&#23450;&#30340; <tt class="classname">FileSystemResource</tt> &#23454;&#20363;&#25226;&#32477;&#23545;&#36335;&#24452;&#37117;&#24403;&#25104;&#30456;&#23545;&#36335;&#24452;&#65292;
				&#32780;&#19981;&#31649;&#23427;&#20204;&#26159;&#21542;&#20197;&#21453;&#26012;&#26464;&#24320;&#22836;&#12290;&#20063;&#23601;&#26159;&#35828;&#65292;&#19979;&#38754;&#30340;&#21547;&#20041;&#26159;&#30456;&#21516;&#30340;&#65306;
			</p><pre class="programlisting">ApplicationContext ctx =
    new FileSystemXmlApplicationContext("conf/context.xml");</pre><pre class="programlisting">ApplicationContext ctx =
    new FileSystemXmlApplicationContext("/conf/context.xml");</pre><p>&#19979;&#38754;&#30340;&#20063;&#19968;&#26679;&#65306;(&#34429;&#28982;&#25226;&#23427;&#20204;&#21306;&#20998;&#24320;&#26469;&#20063;&#24456;&#26377;&#24847;&#20041;&#65292;&#20294;&#20854;&#20013;&#30340;&#19968;&#20010;&#26159;&#30456;&#23545;&#36335;&#24452;&#32780;&#21478;&#19968;&#20010;&#21017;&#26159;&#32477;&#23545;&#36335;&#24452;)&#12290;
			</p><pre class="programlisting">FileSystemXmlApplicationContext ctx = ...;
ctx.getResource("some/resource/path/myTemplate.txt");</pre><pre class="programlisting">FileSystemXmlApplicationContext ctx = ...;
ctx.getResource("/some/resource/path/myTemplate.txt");</pre><p>&#23454;&#38469;&#19978;&#22914;&#26524;&#30340;&#30830;&#38656;&#35201;&#20351;&#29992;&#32477;&#23545;&#36335;&#24452;&#65292;&#37027;&#20320;&#26368;&#22909;&#23601;&#19981;&#35201;&#20351;&#29992; <tt class="classname">FileSystemResource</tt> &#25110; <tt class="classname">FileSystemXmlApplicationContext</tt>&#26469;&#30830;&#23450;&#32477;&#23545;&#36335;&#24452;&#12290;&#25105;&#20204;&#21487;&#20197;&#36890;&#36807;&#20351;&#29992; <tt class="literal">file:</tt> URL&#21069;&#32512;&#26469;&#24378;&#21046;&#20351;&#29992;<tt class="classname">UrlResource</tt>&#12290;
			</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">// actual context type doesn't matter, the <tt class="interfacename">Resource</tt> will always be <tt class="classname">UrlResource</tt></span></i>
ctx.getResource("file:/some/resource/path/myTemplate.txt");</pre><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">// force this FileSystemXmlApplicationContext to load it's definition via a <tt class="classname">UrlResource</tt></span></i>
ApplicationContext ctx =
    new FileSystemXmlApplicationContext("file:/conf/context.xml");</pre></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="validation"></a>Chapter&nbsp;5.&nbsp;&#26657;&#39564;&#65292;&#25968;&#25454;&#32465;&#23450;&#65292;<tt class="interfacename">BeanWrapper</tt>&#65292;&#19982;<tt class="literal">&#23646;&#24615;&#32534;&#36753;&#22120;</tt></h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="validation-introduction"></a>5.1.&nbsp;&#31616;&#20171;</h2></div></div><div></div></div><p>&#23545;&#26159;&#21542;&#25226;&#26657;&#39564;&#24403;&#20316;<span class="emphasis"><em>&#19994;&#21153;&#36923;&#36753;</em></span>&#36825;&#20010;&#38382;&#39064;&#65292;&#23384;&#22312;&#30528;&#27491;&#21644;&#21453;&#20004;&#31181;&#24847;&#35265;&#65292;&#32780;Spring&#25552;&#20379;&#30340;&#39564;&#35777;&#27169;&#24335;(&#21644;&#25968;&#25454;&#32465;&#23450;)&#30340;&#35774;&#35745;&#23545;&#36825;&#20004;&#31181;&#24847;&#35265;&#37117;&#19981;&#25490;&#26021;&#12290;&#29305;&#21035;&#26159;&#65292;&#26657;&#39564;&#24212;&#35813;&#19981;&#24212;&#35813;&#34987;&#24378;&#21046;&#32465;&#23450;&#22312;Web&#23618;&#65292;&#32780;&#19988;&#24212;&#35813;&#24456;&#23481;&#26131;&#26412;&#22320;&#21270;&#24182;&#19988;&#21487;&#20197;&#26041;&#20415;&#22320;&#21152;&#20837;&#26032;&#30340;&#39564;&#35777;&#36923;&#36753;&#12290;&#22522;&#20110;&#19978;&#36848;&#30340;&#32771;&#34385;&#65292;Spring&#25552;&#20379;&#20102;&#19968;&#20010;<tt class="interfacename">Validator</tt>&#25509;&#21475;&#12290;&#36825;&#26159;&#19968;&#20010;&#22522;&#30784;&#30340;&#25509;&#21475;&#24182;&#19988;&#36866;&#29992;&#20110;&#24212;&#29992;&#31243;&#24207;&#30340;&#20219;&#20309;&#19968;&#20010;&#23618;&#38754;&#12290;</p><p>&#25968;&#25454;&#32465;&#23450;&#65288;Data binding&#65289;&#38750;&#24120;&#26377;&#29992;&#65292;&#23427;&#21487;&#20197;&#21160;&#24577;&#25226;&#29992;&#25143;&#36755;&#20837;&#19982;&#24212;&#29992;&#31243;&#24207;&#30340;&#22495;&#27169;&#22411;&#65288;&#25110;&#32773;&#20320;&#29992;&#20110;&#22788;&#29702;&#29992;&#25143;&#36755;&#20837;&#30340;&#23545;&#35937;&#65289;&#32465;&#23450;&#36215;&#26469;&#12290;Spring&#38024;&#23545;&#27492;&#25552;&#20379;&#20102;&#25152;&#35859;&#30340;<tt class="interfacename">DataBinder</tt>&#26469;&#23436;&#25104;&#36825;&#19968;&#21151;&#33021;&#12290;&#30001;<tt class="interfacename">Validator</tt>&#21644;<tt class="interfacename">DataBinder</tt>&#32452;&#25104;&#30340;<tt class="literal">validation</tt>&#39564;&#35777;&#21253;&#65292;&#20027;&#35201;&#34987;&#29992;&#20110;Spring&#30340;MVC&#26694;&#26550;&#12290;&#24403;&#28982;&#65292;&#20182;&#20204;&#21516;&#26679;&#21487;&#20197;&#34987;&#29992;&#20110;&#20854;&#20182;&#38656;&#35201;&#30340;&#22320;&#26041;&#12290;</p><p><tt class="interfacename">BeanWrapper</tt>&#20316;&#20026;&#19968;&#20010;&#22522;&#30784;&#32452;&#20214;&#34987;&#29992;&#22312;&#20102;Spring&#26694;&#26550;&#20013;&#30340;&#24456;&#22810;&#22320;&#26041;&#12290;&#19981;&#36807;&#65292;&#20320;&#21487;&#33021;&#24456;&#23569;&#20250;&#38656;&#35201;&#30452;&#25509;&#20351;&#29992;<tt class="interfacename">BeanWrapper</tt>&#12290;&#30001;&#20110;&#36825;&#26159;&#19968;&#31687;&#21442;&#32771;&#25991;&#26723;&#65292;&#22240;&#32780;&#25105;&#20204;&#35273;&#24471;&#23545;&#27492;&#31245;&#20316;&#35299;&#37322;&#36824;&#26159;&#26377;&#24517;&#35201;&#30340;&#12290;&#25105;&#20204;&#22312;&#36825;&#19968;&#31456;&#33410;&#37324;&#23545;<tt class="interfacename">BeanWrapper</tt>&#30340;&#35828;&#26126;&#65292;&#25110;&#35768;&#21040;&#20102;&#20320;&#26085;&#21518;&#35797;&#22270;&#36827;&#34892;&#31867;&#20284;&#23545;&#35937;&#19982;&#25968;&#25454;&#20043;&#38388;&#30340;&#32465;&#23450;&#36825;&#31181;&#19982;<tt class="interfacename">BeanWrapper</tt>&#38750;&#24120;&#30456;&#20851;&#30340;&#25805;&#20316;&#26102;&#20250;&#26377;&#19968;&#20123;&#24110;&#21161;&#12290;</p><p>Spring&#22823;&#37327;&#22320;&#20351;&#29992;&#20102;<tt class="interfacename">PropertyEditor</tt>&#65288;&#23646;&#24615;&#32534;&#36753;&#22120;&#65289;&#12290;<tt class="interfacename">PropertyEditor</tt>&#30340;&#27010;&#24565;&#26159;JavaBean&#35268;&#33539;&#30340;&#19968;&#37096;&#20998;&#12290;&#27491;&#22914;&#19978;&#38754;&#25552;&#21040;&#30340;<tt class="interfacename">BeanWrapper</tt>&#19968;&#26679;&#65292;&#30001;&#20110;&#23427;&#19982;<tt class="interfacename">BeanWrapper</tt>&#20197;&#21450;DataBinder&#19977;&#32773;&#20043;&#38388;&#26377;&#30528;&#23494;&#20999;&#30340;&#32852;&#31995;&#65292;&#25105;&#20204;&#22312;&#36825;&#37324;&#21516;&#26679;&#23545;<tt class="interfacename">PropertyEditor</tt>&#20316;&#19968;&#30058;&#35299;&#37322;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="validator"></a>5.2.&nbsp;&#20351;&#29992;Spring&#30340;<tt class="interfacename">Validator</tt>&#25509;&#21475;&#36827;&#34892;&#26657;&#39564;</h2></div></div><div></div></div><p>&#20320;&#21487;&#20197;&#20351;&#29992;Spring&#25552;&#20379;&#30340;validator&#25509;&#21475;&#36827;&#34892;&#23545;&#35937;&#30340;&#26657;&#39564;&#12290;<tt class="interfacename">Validator</tt>&#25509;&#21475;&#19982;<tt class="interfacename">Errors</tt>&#21327;&#21516;&#24037;&#20316;&#65292;&#22312;Spring&#20570;&#26657;&#39564;&#30340;&#26102;&#20505;&#65292;&#23427;&#20250;&#23558;&#25152;&#26377;&#30340;&#26657;&#39564;&#38169;&#35823;&#27719;&#24635;&#21040;<tt class="interfacename">Errors</tt>&#23545;&#35937;&#20013;&#21435;&#12290;</p><p>&#26469;&#30475;&#36825;&#20010;&#31616;&#21333;&#30340;&#25968;&#25454;&#23545;&#35937;&#65306;</p><pre class="programlisting">public class Person {

  private String name;
  private int age;

  <i class="lineannotation"><span class="lineannotation">// the usual getters and setters...</span></i>
}</pre><p>
			&#23454;&#29616;<tt class="interfacename">org.springframework.validation.Validator</tt>&#25509;&#21475;&#20013;&#30340;&#20004;&#20010;&#26041;&#27861;&#65292;&#25105;&#20204;&#23558;&#20026;&#23545;<tt class="classname">Person</tt>&#31867;&#21152;&#19978;&#26657;&#39564;&#34892;&#20026;&#65306;
			</p><div class="itemizedlist"><ul compact="compact" type="disc"><li><p><tt class="methodname">supports(Class)</tt>&#65306;&#34920;&#31034;&#36825;&#20010;<tt class="interfacename">Validator</tt>&#26159;&#21542;&#25903;&#25345;&#35813;<tt class="classname">Class</tt>&#30340;&#23454;&#20363;&#65311;</p></li><li><p><tt class="methodname">validate(Object, org.springframework.validation.Errors)</tt>&#65306;&#23545;&#25552;&#20379;&#30340;&#23545;&#35937;&#36827;&#34892;&#26657;&#39564;&#65292;&#24182;&#23558;&#26657;&#39564;&#30340;&#38169;&#35823;&#27880;&#20876;&#21040;&#20256;&#20837;&#30340;<tt class="interfacename">Errors</tt> &#23545;&#35937;&#20013;&#12290;</p></li></ul></div><p>
		</p><p>
			&#23454;&#29616;&#19968;&#20010;<tt class="interfacename">Validator</tt>&#20063;&#27604;&#36739;&#31616;&#21333;&#65292;&#23588;&#20854;&#26159;&#24403;&#20320;&#23398;&#20250;&#20102;Spring&#25152;&#25552;&#20379;&#30340;<tt class="classname">ValidationUtils</tt>&#20197;&#21518;&#12290;&#25105;&#20204;&#19968;&#36215;&#26469;&#30475;&#19968;&#19979;&#22914;&#20309;&#25165;&#33021;&#21019;&#24314;&#19968;&#20010;&#26657;&#39564;&#22120;&#12290;
		</p><pre class="programlisting">public class PersonValidator implements Validator {
    
    <i class="lineannotation"><span class="lineannotation">/**
    * This <tt class="interfacename">Validator</tt> validates <span class="bold"><b>just</b></span> <tt class="classname">Person</tt> instances
    */</span></i>
    public boolean supports(Class clazz) {
        return Person.class.equals(clazz);
    }
    
    public void validate(Object obj, Errors e) {
        ValidationUtils.rejectIfEmpty(e, "name", "name.empty");
        Person p = (Person) obj;
        if (p.getAge() &lt; 0) {
            e.rejectValue("age", "negativevalue");
        } else if (p.getAge() &gt; 110) {
            e.rejectValue("age", "too.darn.old");
        }
    }
}</pre><p>&#22914;&#20320;&#25152;&#35265;&#65292;&#25105;&#20204;&#20351;&#29992;&#20102;<tt class="classname">ValidationUtils</tt>&#20013;&#30340;&#19968;&#20010;<tt class="literal">&#38745;&#24577;</tt>&#26041;&#27861;<tt class="methodname">rejectIfEmpty(..)</tt>&#26469;&#23545;name&#23646;&#24615;&#36827;&#34892;&#26657;&#39564;&#65292;&#20551;&#33509;<tt class="literal">'name'</tt>&#23646;&#24615;&#26159; <tt class="literal">null</tt> &#25110;&#32773;&#31354;&#23383;&#31526;&#20018;&#30340;&#35805;&#65292;&#23601;&#25298;&#32477;&#39564;&#35777;&#36890;&#36807; &#12290;&#35831;&#21442;&#29031;<tt class="classname">ValidationUtils</tt>&#30456;&#20851;&#30340;JavaDoc&#65292;&#26597;&#30475;&#19968;&#19979;&#38500;&#20102;&#20363;&#23376;&#20013;&#20171;&#32461;&#36807;&#30340;&#20043;&#22806;&#20854;&#20182;&#30340;&#19968;&#20123;&#21151;&#33021;&#12290;</p><p>&#23545;&#22797;&#26434;&#23545;&#35937;&#26469;&#35828;&#65292;&#23454;&#29616;<tt class="interfacename">Validator</tt>&#31867;&#26469;&#39564;&#35777;&#20854;&#20869;&#32622;&#30340;&#23646;&#24615;&#31867;&#24403;&#28982;&#20063;&#26159;&#21487;&#34892;&#30340;&#65292;&#20294;&#26159;&#20026;&#27599;&#20010;&#20869;&#32622;&#31867;&#30340;&#31034;&#20363;&#23454;&#29616;<tt class="interfacename">Validator</tt>&#21487;&#33021;&#26159;&#20010;&#26356;&#22909;&#30340;&#20027;&#24847;&#12290;&#20851;&#20110;&#36825;&#26679;&#30340;&#19968;&#20010;<span class="emphasis"><em>'rich'</em></span>&#36825;&#26679;&#30340;&#20363;&#23376;&#26159;<tt class="classname">Customer</tt>&#31867;&#65292;&#23427;&#21253;&#21547;&#20004;&#20010;<tt class="classname">String</tt>&#23646;&#24615;(first name &#21644;second name)&#65292;&#36824;&#26377;&#19968;&#20010;&#22797;&#26434;&#30340;<tt class="classname">Address</tt>&#23545;&#35937;&#12290;<tt class="classname">Address</tt>&#23545;&#35937;&#21487;&#33021;&#29420;&#31435;&#20110;<tt class="classname">Customer</tt>&#23545;&#35937;&#65292;&#22240;&#27492;&#29420;&#31435;&#23454;&#29616;&#20102;&#19968;&#20010;<tt class="classname">AddressValidator</tt>&#12290;&#20551;&#33509;&#20320;&#24076;&#26395;&#20320;&#30340;<tt class="classname">CustomerValidator</tt>&#37325;&#29992;<tt class="classname">AddressValidator</tt>&#20869;&#37096;&#30340;&#36923;&#36753;&#65292;&#20294;&#26159;&#21448;&#19981;&#24819;&#36890;&#36807;&#25335;&#36125;&#31896;&#36148;&#26469;&#23454;&#29616;&#65292;&#20320;&#21487;&#20197;&#22312;&#20320;&#30340;<tt class="classname">CustomerValidator</tt>&#20013;&#20381;&#36182;&#27880;&#20837;<tt class="classname">AddressValidator</tt>&#23545;&#35937;&#65292;&#25110;&#32773;&#21019;&#24314;&#19968;&#20010;&#12290;&#28982;&#21518;&#36825;&#26679;&#29992;&#65306;</p><pre class="programlisting">public class CustomerValidator implements Validator {

   private final Validator addressValidator;

   public CustomerValidator(Validator addressValidator) {
      if (addressValidator == null) {
          throw new IllegalArgumentException("The supplied [Validator] is required and must not be null.");
      }
      if (!addressValidator.supports(Address.class)) {
          throw new IllegalArgumentException(
            "The supplied [Validator] must support the validation of [Address] instances.");
      }
      this.addressValidator = addressValidator;
   }

    <i class="lineannotation"><span class="lineannotation">/**
    * This <tt class="interfacename">Validator</tt> validates <tt class="classname">Customer</tt> instances, and any subclasses of <tt class="classname">Customer</tt> too
    */</span></i>
   public boolean supports(Class clazz) {
      return Customer.class.isAssignableFrom(clazz);
   }

   public void validate(Object target, Errors errors) {
      ValidationUtils.rejectIfEmptyOrWhitespace(errors, "firstName", "field.required");
      ValidationUtils.rejectIfEmptyOrWhitespace(errors, "surname", "field.required");
      Customer customer = (Customer) target;
      try {
          errors.pushNestedPath("address");
          ValidationUtils.invokeValidator(this.addressValidator, customer.getAddress(), errors);
      } finally {
          errors.popNestedPath();
      }
   }
}</pre><p>&#39564;&#35777;&#38169;&#35823;&#20250;&#34987;&#25253;&#21578;&#21040;&#20256;&#26469;&#30340;<tt class="interfacename">Errors</tt>&#23545;&#35937;&#20013;&#12290;&#22312;Spring Web MVC&#20013;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;<tt class="literal">&lt;spring:bind/&gt;</tt>&#26631;&#31614;&#26469;&#26816;&#26597;&#38169;&#35823;&#20449;&#24687;&#65292;&#24403;&#28982;&#20320;&#20063;&#21487;&#20197;&#33258;&#34892;&#22788;&#29702;&#38169;&#35823;&#12290;&#21487;&#20197;&#22312;&#23427;&#30340;Javadoc&#20013;&#25214;&#21040;&#23427;&#25552;&#20379;&#30340;&#26041;&#27861;&#30340;&#25551;&#36848;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="validation-conversion"></a>5.3.&nbsp;&#20174;&#38169;&#35823;&#20195;&#30721;&#21040;&#38169;&#35823;&#20449;&#24687;</h2></div></div><div></div></div><p>&#25105;&#20204;&#24050;&#32463;&#35752;&#35770;&#20102;&#25968;&#25454;&#32465;&#23450;&#21644;&#26657;&#39564;&#12290;&#26368;&#21518;&#25105;&#20204;&#26469;&#35752;&#35770;&#19968;&#19979;&#19982;&#26657;&#39564;&#38169;&#35823;&#30456;&#23545;&#24212;&#30340;&#38169;&#35823;&#20449;&#24687;&#36755;&#20986;&#12290;&#22312;&#20808;&#21069;&#30340;&#31034;&#20363;&#20013;&#65292;&#25105;&#20204;&#23545;<tt class="literal">name</tt>&#21644;<tt class="literal">age</tt>&#23383;&#27573;&#36827;&#34892;&#20102;&#26657;&#39564;&#24182;&#21457;&#29616;&#20102;&#38169;&#35823;&#12290;&#22914;&#26524;&#25105;&#20204;&#24819;&#29992;<tt class="literal">MessageSource</tt>&#26469;&#36755;&#20986;&#38169;&#35823;&#20449;&#24687;&#65292;&#24403;&#26576;&#20010;&#23383;&#27573;&#26657;&#39564;&#20986;&#38169;&#26102;&#65288;&#22312;&#36825;&#20010;&#20363;&#23376;&#20013;&#26159;name&#21644;age&#65289;&#25105;&#20204;&#36755;&#20986;&#30340;&#26159;&#38169;&#35823;&#20195;&#30721;&#12290;&#26080;&#35770;&#20320;&#30452;&#25509;&#25110;&#32773;&#38388;&#25509;&#20351;&#29992;&#31034;&#20363;&#20013;&#30340;<tt class="classname">ValidationUtils</tt> &#31867;&#26469;&#35843;&#29992;<tt class="interfacename">Errors</tt>&#25509;&#21475;&#20013;<tt class="literal">rejectValue</tt>&#26041;&#27861;&#25110;&#32773;&#20219;&#20309;&#19968;&#20010;&#20854;&#23427;&#30340;<tt class="literal">reject</tt>&#26041;&#27861;&#65292;&#24213;&#23618;&#30340;&#23454;&#29616;&#19981;&#20165;&#20026;&#20320;&#27880;&#20876;&#20102;&#20320;&#20256;&#20837;&#30340;&#20195;&#30721;&#65292;&#36824;&#21516;&#26102;&#20026;&#20320;&#27880;&#20876;&#20102;&#35768;&#22810;&#39069;&#22806;&#30340;&#38169;&#35823;&#20195;&#30721;&#20449;&#24687;&#12290;&#32780;&#20320;&#20351;&#29992;&#30340;<tt class="interfacename">MessageCodesResolver</tt>&#23558;&#20915;&#23450;&#31350;&#31455;&#27880;&#20876;&#20160;&#20040;&#26679;&#30340;&#38169;&#35823;&#20195;&#30721;&#12290;&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#23558;&#20250;&#20351;&#29992;<tt class="classname">DefaultMessageCodesResolver</tt>&#12290;&#22238;&#21040;&#21069;&#38754;&#30340;&#20363;&#23376;&#65292;&#20351;&#29992;<tt class="literal">DefaultMessageCodesResolver</tt>&#65292;&#19981;&#20165;&#20250;&#20026;&#20320;&#27880;&#20876;&#20320;&#25552;&#20379;&#30340;&#38169;&#35823;&#20195;&#30721;&#20449;&#24687;&#65292;&#21516;&#26102;&#36824;&#21253;&#21547;&#20102;&#20320;&#20256;&#20837;&#21040;reject&#26041;&#27861;&#20013;&#30340;&#23383;&#27573;&#20449;&#24687;&#12290;&#25152;&#20197;&#22312;&#36825;&#20010;&#20363;&#23376;&#20013;&#65292;&#20320;&#36890;&#36807;<tt class="literal">rejectValue("age", "too.darn.old")</tt>&#26469;&#27880;&#20876;&#19968;&#20010;&#23383;&#27573;&#26657;&#39564;&#38169;&#35823;&#12290;Spring&#19981;&#20165;&#20026;&#20320;&#27880;&#20876;&#20102;<tt class="literal">too.darn.old</tt>&#36825;&#20010;&#20195;&#30721;&#65292;&#21516;&#26102;&#36824;&#20026;&#20320;&#27880;&#20876;&#20102;<tt class="literal">too.darn.old.age</tt>&#21644;<tt class="literal">too.darn.old.age.int</tt>&#26469;&#20998;&#21035;&#34920;&#31034;&#23383;&#27573;&#21517;&#31216;&#21644;&#23383;&#27573;&#30340;&#31867;&#22411;&#12290;&#36825;&#31181;&#26159;&#29616;&#23454;&#20026;&#20102;&#26041;&#38754;&#24320;&#21457;&#32773;&#26469;&#23450;&#20301;&#38169;&#35823;&#20449;&#24687;&#12290;</p><p>
			&#26356;&#22810;&#26377;&#20851;<tt class="interfacename">MessageCodesResolver</tt>&#30340;&#20449;&#24687;&#20197;&#21450;&#40664;&#35748;&#30340;&#31574;&#30053;&#21487;&#20197;&#22312;&#32447;&#35775;&#38382;&#30456;&#24212;&#30340;JavaDocs&#65306;
			<a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/validation/MessageCodesResolver.html" target="_top">				MessageCodesResolver
			</a> &#21644;
			<a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/validation/DefaultMessageCodesResolver.html" target="_top">				DefaultMessageCodesResolver
			</a>&#12290;
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="beans-beans"></a>5.4.&nbsp;Bean&#22788;&#29702;&#21644;<tt class="interfacename">BeanWrapper</tt></h2></div></div><div></div></div><p><tt class="literal">org.springframework.beans</tt>&#21253;&#36981;&#24490;Sun&#21457;&#24067;&#30340;JavaBean&#26631;&#20934;&#12290;JavaBean&#26159;&#19968;&#20010;&#31616;&#21333;&#30340;&#21547;&#26377;&#19968;&#20010;&#40664;&#35748;&#26080;&#21442;&#25968;&#26500;&#36896;&#20989;&#25968;&#30340;Java&#31867;&#65292; &#36825;&#20010;&#31867;&#20013;&#30340;&#23646;&#24615;&#36981;&#24490;&#19968;&#23450;&#30340;&#21629;&#21517;&#35268;&#33539;&#65292;&#19988;&#20855;&#26377;setter&#21644;getter&#26041;&#27861;&#12290;&#20363;&#22914;&#65292;&#26576;&#20010;&#31867;&#25317;&#26377;&#19968;&#20010;&#21483;&#20570;<tt class="literal">bingoMadness</tt>&#30340;&#23646;&#24615;&#65292;&#24182;&#21516;&#26102;&#20855;&#26377;&#19982;&#35813;&#23646;&#24615;&#23545;&#24212;&#30340;setter&#26041;&#27861;&#65306;<tt class="methodname">setBingoMadness(..)</tt>&#21644;getter&#26041;&#27861;&#65306;<tt class="methodname">getBingoMadness()</tt>&#12290;&#22914;&#26524;&#20320;&#38656;&#35201;&#20102;&#35299;JavaBean&#35268;&#33539;&#30340;&#35814;&#32454;&#20449;&#24687;&#21487;&#20197;&#35775;&#38382;Sun&#30340;&#32593;&#31449; (<a href="http://java.sun.com/products/javabeans/" target="_top">java.sun.com/products/javabeans</a>)&#12290;</p><p>&#36825;&#20010;&#21253;&#20013;&#30340;&#19968;&#20010;&#38750;&#24120;&#37325;&#35201;&#30340;&#31867;&#23601;&#26159;<tt class="interfacename">BeanWrapper</tt>&#25509;&#21475;&#20197;&#21450;&#23427;&#23545;&#24212;&#30340;&#23454;&#29616;(<tt class="classname">BeanWrapperImpl</tt>)&#12290;&#26681;&#25454;JavaDoc&#20013;&#30340;&#35828;&#26126;&#65292;<tt class="interfacename">BeanWrapper</tt>&#25552;&#20379;&#20102;&#35774;&#32622;&#21644;&#33719;&#21462;&#23646;&#24615;&#20540;&#65288;&#21333;&#20010;&#30340;&#25110;&#32773;&#26159;&#25209;&#37327;&#30340;&#65289;&#65292;&#33719;&#21462;&#23646;&#24615;&#25551;&#36848;&#20449;&#24687;&#12289;&#26597;&#35810;&#21482;&#35835;&#25110;&#32773;&#21487;&#20889;&#23646;&#24615;&#31561;&#21151;&#33021;&#12290;&#19981;&#20165;&#22914;&#27492;&#65292;<tt class="interfacename">BeanWrapper</tt>&#36824;&#25903;&#25345;&#23884;&#22871;&#23646;&#24615;&#65292;&#20320;&#21487;&#20197;&#19981;&#21463;&#23884;&#22871;&#28145;&#24230;&#38480;&#21046;&#23545;&#23376;&#23646;&#24615;&#30340;&#20540;&#36827;&#34892;&#35774;&#32622;&#12290;&#25152;&#20197;&#65292;<tt class="interfacename">BeanWrapper</tt>&#26080;&#38656;&#20219;&#20309;&#36741;&#21161;&#20195;&#30721;&#23601;&#21487;&#20197;&#25903;&#25345;&#26631;&#20934;JavaBean&#30340;<tt class="interfacename">PropertyChangeListeners</tt>&#21644;<tt class="interfacename">VetoableChangeListeners</tt>&#12290;&#38500;&#27492;&#20043;&#22806;&#65292;<tt class="interfacename">BeanWrapper</tt>&#36824;&#25552;&#20379;&#20102;&#35774;&#32622;&#32034;&#24341;&#23646;&#24615;&#30340;&#25903;&#25345;&#12290;&#36890;&#24120;&#24773;&#20917;&#19979;&#65292;&#25105;&#20204;&#19981;&#22312;&#24212;&#29992;&#31243;&#24207;&#20013;&#30452;&#25509;&#20351;&#29992;<tt class="interfacename">BeanWrapper</tt>&#32780;&#26159;&#20351;&#29992;<tt class="interfacename">DataBinder</tt> &#21644;<tt class="interfacename">BeanFactory</tt>&#12290;</p><p><tt class="interfacename">BeanWrapper</tt>&#36825;&#20010;&#21517;&#23383;&#26412;&#36523;&#23601;&#26263;&#31034;&#20102;&#23427;&#30340;&#21151;&#33021;&#65306;<span class="emphasis"><em>&#23553;&#35013;&#20102;&#19968;&#20010;bean&#30340;&#34892;&#20026;</em></span>&#65292;&#35832;&#22914;&#35774;&#32622;&#21644;&#33719;&#21462;&#23646;&#24615;&#20540;&#31561;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-beans-conventions"></a>5.4.1.&nbsp;&#35774;&#32622;&#21644;&#33719;&#21462;&#23646;&#24615;&#20540;&#20197;&#21450;&#23884;&#22871;&#23646;&#24615;</h3></div></div><div></div></div><p>&#35774;&#32622;&#21644;&#33719;&#21462;&#23646;&#24615;&#21487;&#20197;&#36890;&#36807;&#20351;&#29992;&#37325;&#36733;&#30340;<tt class="literal">setPropertyValue(s)</tt>&#21644;<tt class="literal">getPropertyValue(s)</tt>&#26041;&#27861;&#26469;&#23436;&#25104;&#12290;&#22312;Spring&#33258;&#24102;&#30340;JavaDoc&#20013;&#23545;&#23427;&#20204;&#26377;&#35814;&#32454;&#30340;&#25551;&#36848;&#12290;&#20540;&#24471;&#19968;&#25552;&#30340;&#26159;&#65292;&#22312;&#36825;&#20854;&#20013;&#23384;&#22312;&#19968;&#20123;&#38024;&#23545;&#23545;&#35937;&#23646;&#24615;&#30340;&#28508;&#22312;&#32422;&#23450;&#35268;&#21017;&#12290;&#19979;&#38754;&#26159;&#19968;&#20123;&#20363;&#23376;&#65306;</p><div class="table"><a name="beans-beans-conventions-properties-tbl"></a><p class="title"><b>Table&nbsp;5.1.&nbsp;&#23646;&#24615;&#31034;&#20363;</b></p><table summary="&#23646;&#24615;&#31034;&#20363;" border="1"><colgroup><col><col></colgroup><thead><tr><th>&#34920;&#36798;&#24335;</th><th>&#35828;&#26126;</th></tr></thead><tbody><tr><td><tt class="literal">name</tt></td><td>&#34920;&#26126;&#23646;&#24615;name&#19982;&#26041;&#27861;<tt class="methodname">getName()</tt> &#25110; <tt class="methodname">isName()</tt> &#21450;<tt class="methodname"> setName(..)</tt>&#30456;&#23545;&#24212;&#12290;</td></tr><tr><td><tt class="literal">account.name</tt></td><td>&#25351;&#21521;&#23646;&#24615;account&#30340;&#23884;&#22871;&#23646;&#24615;name&#65292;&#19982;&#20043;&#23545;&#24212;&#30340;&#26159;getAccount().setName()&#21644;getAccount().getName()</td></tr><tr><td><tt class="literal">account[2]</tt></td><td>&#25351;&#21521;&#32034;&#24341;&#23646;&#24615;account&#30340;&#31532;&#19977;&#20010;&#20803;&#32032;&#65292;&#32034;&#24341;&#23646;&#24615;&#21487;&#33021;&#26159;&#19968;&#20010;&#25968;&#32452;&#65288;array&#65289;&#65292;&#21015;&#34920;&#65288;list&#65289;&#25110;&#20854;&#23427;&#22825;&#28982;&#26377;&#24207;&#30340;&#23481;&#22120;&#12290;</td></tr><tr><td><tt class="literal">account[COMPANYNAME]</tt></td><td>&#25351;&#21521;&#19968;&#20010;Map&#23454;&#20307;account&#20013;&#20197;COMPANYNAME&#20316;&#20026;&#38190;&#20540;&#65288;key&#65289;&#25152;&#23545;&#24212;&#30340;&#20540;</td></tr></tbody></table></div><p>&#22312;&#19979;&#38754;&#30340;&#20363;&#23376;&#20013;&#20320;&#23558;&#30475;&#21040;&#19968;&#20123;&#20351;&#29992;<tt class="interfacename">BeanWrapper</tt>&#35774;&#32622;&#23646;&#24615;&#30340;&#20363;&#23376;&#12290;</p><p><span class="emphasis"><em>&#22914;&#26524;&#20320;&#19981;&#25171;&#31639;&#30452;&#25509;&#20351;&#29992;<tt class="interfacename">BeanWrapper</tt>&#65292;&#36825;&#37096;&#20998;&#19981;&#26159;&#24456;&#37325;&#35201;&#12290;&#22914;&#26524;&#20320;&#20165;&#20165;&#20351;&#29992;<tt class="interfacename">DataBinder</tt>&#21644;<tt class="interfacename">BeanFactory</tt>&#25110;&#32773;&#20182;&#20204;&#30340;&#25193;&#23637;&#23454;&#29616;&#65292;&#20320;&#21487;&#20197;&#36339;&#36807;&#36825;&#37096;&#20998;&#30452;&#25509;&#38405;&#35835;<tt class="interfacename">PropertyEditor</tt>&#30340;&#37096;&#20998;&#12290;</em></span></p><p>&#32771;&#34385;&#19979;&#38754;&#20004;&#20010;&#31867;&#65306;</p><pre class="programlisting">public class Company {
    private String name;
    private Employee managingDirector;

    public String getName()	{ 
        return this.name; 
    }
    public void setName(String name) { 
        this.name = name; 
    } 
    public Employee getManagingDirector() { 
        return this.managingDirector; 
    }
    public void setManagingDirector(Employee managingDirector) {
        this.managingDirector = managingDirector;
    }
}</pre><pre class="programlisting">public class Employee {
    private String name;
    private float salary;

    public String getName()	{
        return this.name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public float getSalary() {
        return salary;
    }
    public void setSalary(float salary) {
        this.salary = salary;
    }
}</pre><p>&#19979;&#38754;&#30340;&#20195;&#30721;&#29255;&#26029;&#23637;&#31034;&#20102;&#22914;&#20309;&#33719;&#21462;&#21644;&#35774;&#32622;&#19978;&#38754;&#20004;&#20010;&#31034;&#20363;&#31867; <tt class="literal">Companies</tt>&#21644;<tt class="literal">Employees</tt>&#30340;&#23646;&#24615;&#65306;</p><pre class="programlisting">BeanWrapper company = BeanWrapperImpl(new Company());
<i class="lineannotation"><span class="lineannotation">// setting the company name..</span></i>
company.setPropertyValue("name", "Some Company Inc.");
<i class="lineannotation"><span class="lineannotation">// ... can also be done like this:</span></i>
PropertyValue value = new PropertyValue("name", "Some Company Inc.");
company.setPropertyValue(value);

<i class="lineannotation"><span class="lineannotation">// ok, let's create the director and tie it to the company:</span></i>
BeanWrapper jim = BeanWrapperImpl(new Employee());
jim.setPropertyValue("name", "Jim Stravinsky");
company.setPropertyValue("managingDirector", jim.getWrappedInstance());

<i class="lineannotation"><span class="lineannotation">// retrieving the salary of the managingDirector through the company</span></i>
Float salary = (Float) company.getPropertyValue("managingDirector.salary");</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="beans-beans-conversion"></a>5.4.2.&nbsp;&#20869;&#24314;&#30340;<span class="interface">PropertyEditor</span>&#23454;&#29616;</h3></div></div><div></div></div><p>Spring&#22823;&#37327;&#20351;&#29992;&#20102;<tt class="interfacename">PropertyEditor</tt>&#20197;&#22312;<tt class="classname">Object</tt>&#21644; <tt class="classname">String</tt>&#20043;&#38388;&#36827;&#34892;&#26377;&#25928;&#22320;&#36716;&#21270;&#12290;&#20180;&#32454;&#24819;&#24819;&#65292;&#26377;&#26102;&#25442;&#19968;&#31181;&#26041;&#24335;&#26469;&#23637;&#31034;&#23646;&#24615;&#30340;&#30830;&#35201;&#27604;&#30452;&#25509;&#29992;&#23545;&#35937;&#33258;&#36523;&#26356;&#23481;&#26131;&#35753;&#20154;&#29702;&#35299;&#12290;&#20363;&#22914;&#65292;<tt class="classname">Date</tt>&#21487;&#20197;&#34920;&#31034;&#25104;&#20154;&#20204;&#26131;&#35835;&#30340;&#26041;&#24335;&#65288;&#22914;<tt class="classname">String</tt>&#30340;&#26041;&#24335;&#65292;'<tt class="literal">2007-14-09</tt>'&#65289;&#65292;&#19982;&#27492;&#21516;&#26102;&#25105;&#20204;&#21487;&#20197;&#23558;&#36825;&#31181;&#20154;&#20204;&#27604;&#36739;&#23481;&#26131;&#29702;&#35299;&#30340;&#24418;&#24335;&#36716;&#21270;&#20026;&#21407;&#26377;&#30340;&#21407;&#22987;Date&#31867;&#22411;&#65288;&#29978;&#33267;&#23545;&#20110;&#20219;&#20309;&#20154;&#20204;&#36755;&#20837;&#30340;&#21487;&#29702;&#35299;&#30340;&#26085;&#26399;&#24418;&#24335;&#37117;&#21487;&#20197;&#36716;&#21270;&#25104;&#30456;&#24212;&#30340;<tt class="classname">Date</tt>&#23545;&#35937;&#65289;&#12290;&#35201;&#20570;&#21040;&#36825;&#28857;&#65292;&#21487;&#20197;&#36890;&#36807;<span class="emphasis"><em>&#27880;&#20876;&#19968;&#20010;&#29992;&#25143;&#23450;&#21046;&#32534;&#36753;&#22120;</em></span>&#65288;&#31867;&#22411;&#20026;<tt class="interfacename">java.beans.PropertyEditor</tt>&#65289;&#26469;&#23436;&#25104;&#12290;&#27880;&#20876;&#19968;&#20010;&#29992;&#25143;&#33258;&#23450;&#20041;&#30340;&#32534;&#36753;&#22120;&#21487;&#20197;&#21578;&#35785;<tt class="interfacename">BeanWrapper</tt>&#25105;&#20204;&#23558;&#35201;&#25226;&#23646;&#24615;&#36716;&#25442;&#20026;&#21738;&#31181;&#31867;&#22411;&#12290;&#27491;&#22914;&#22312;&#20808;&#21069;&#31456;&#33410;&#25552;&#21040;&#30340;&#65292;&#21478;&#22806;&#19968;&#31181;&#36873;&#25321;&#26159;&#22312;&#29305;&#23450;&#30340;IoC &#23481;&#22120;&#20013;&#23436;&#25104;&#27880;&#20876;&#12290;&#20320;&#21487;&#20197;&#20174;Sun&#25552;&#20379;&#30340;<tt class="literal">java.beans</tt>&#21253;&#30340;JavaDoc&#20013;&#20102;&#35299;&#21040;&#26356;&#22810;<tt class="literal">PropertyEditors</tt>&#30340;&#32454;&#33410;&#12290;</p><p>&#23646;&#24615;&#32534;&#36753;&#22120;&#20027;&#35201;&#24212;&#29992;&#22312;&#20197;&#19979;&#20004;&#20010;&#26041;&#38754;&#65306;
			</p><div class="itemizedlist"><ul compact="compact" type="disc"><li><p>&#20351;&#29992;<tt class="literal">PropertyEditors</tt><span class="emphasis"><em>&#35774;&#32622;Bean&#23646;&#24615;</em></span>&#12290;&#24403;&#20320;&#22312;XML&#25991;&#20214;&#20013;&#22768;&#26126;&#30340;bean&#30340;&#23646;&#24615;&#31867;&#22411;&#20026;java.lang.String&#26102;&#65292;Spring&#23558;&#20351;&#29992;<tt class="classname">ClassEditor</tt>&#23558;String&#35299;&#26512;&#25104;Class&#23545;&#35937;&#65288;&#22914;&#26524;setter&#26041;&#27861;&#38656;&#35201;&#19968;&#20010;<tt class="classname">Class</tt>&#21442;&#25968;&#30340;&#35805;&#65289;&#12290;</p></li><li><p>&#22312;Spring MVC&#26550;&#26500;&#20013;&#20351;&#29992;&#21508;&#31181;<tt class="literal">PropertyEditors</tt>&#26469;<span class="emphasis"><em>&#35299;&#26512;HTTP&#35831;&#27714;&#20013;&#30340;&#21442;&#25968;</em></span>&#12290;&#20320;&#21487;&#20197;&#29992;&#21508;&#31181;<tt class="classname">CommandController</tt>&#30340;&#23376;&#31867;&#26469;&#36827;&#34892;&#25163;&#24037;&#32465;&#23450;&#12290;</p></li></ul></div><p>
        </p><p>Spring&#25552;&#20379;&#20102;&#35768;&#22810;&#20869;&#24314;&#30340;<tt class="literal">PropertyEditors</tt>&#21487;&#20197;&#31616;&#21270;&#25105;&#20204;&#30340;&#24037;&#20316;&#12290;&#19979;&#38754;&#30340;&#21015;&#34920;&#21015;&#20986;&#20102;&#25152;&#26377;Spring&#33258;&#24102;&#30340;<tt class="interfacename">PropertyEditor</tt>&#65292;&#23427;&#20204;&#37117;&#20301;&#20110;<tt class="literal">org.springframework.beans.<tt class="interfacename">PropertyEditor</tt>s</tt>&#21253;&#20869;&#12290;&#23427;&#20204;&#20013;&#30340;&#22823;&#22810;&#25968;&#24050;&#32463;&#40664;&#35748;&#22312;<tt class="interfacename">BeanWrapperImpl</tt>&#30340;&#23454;&#29616;&#31867;&#20013;&#27880;&#20876;&#22909;&#20102;&#12290;&#20316;&#20026;&#21487;&#37197;&#32622;&#30340;&#36873;&#39033;&#65292;&#20320;&#20063;&#21487;&#20197;&#27880;&#20876;&#20320;&#33258;&#24049;&#30340;&#23646;&#24615;&#32534;&#36753;&#22120;&#23454;&#29616;&#21435;&#35206;&#30422;&#37027;&#20123;&#40664;&#35748;&#32534;&#36753;&#22120;&#12290;</p><div class="table"><a name="beans-beans-property-editors-tbl"></a><p class="title"><b>Table&nbsp;5.2.&nbsp;&#20869;&#24314;&#30340;<tt class="literal">PropertyEditors</tt></b></p><table summary="&#20869;&#24314;&#30340;PropertyEditors" border="1"><colgroup><col><col></colgroup><thead><tr><th>&#31867;&#21517;</th><th>&#35828;&#26126;</th></tr></thead><tbody><tr><td><tt class="classname">ByteArrayPropertyEditor</tt></td><td>byte&#25968;&#32452;&#32534;&#36753;&#22120;&#12290;&#23383;&#31526;&#20018;&#23558;&#34987;&#31616;&#21333;&#36716;&#21270;&#25104;&#20182;&#20204;&#30456;&#24212;&#30340;byte&#24418;&#24335;&#12290;&#22312;<tt class="classname">BeanWrapperImpl</tt>&#20013;&#24050;&#32463;&#40664;&#35748;&#27880;&#20876;&#22909;&#20102;&#12290;</td></tr><tr><td><tt class="classname">ClassEditor</tt></td><td>
                &#23558;&#20197;&#23383;&#31526;&#20018;&#24418;&#24335;&#20986;&#29616;&#30340;&#31867;&#21517;&#35299;&#26512;&#25104;&#20026;&#30495;&#23454;&#30340;Class&#23545;&#35937;&#25110;&#32773;&#20854;&#20182;&#30456;&#20851;&#24418;&#24335;&#12290;&#24403;&#36825;&#20010;Class&#27809;&#26377;&#34987;&#25214;&#21040;&#65292;&#20250;&#25243;&#20986;&#19968;&#20010;<tt class="classname">IllegalArgumentException</tt>&#30340;&#24322;&#24120;&#65292;&#22312;<tt class="classname">BeanWrapperImpl</tt>&#20013;&#24050;&#32463;&#40664;&#35748;&#27880;&#20876;&#22909;&#20102;&#12290;
                </td></tr><tr><td><tt class="classname">CustomBooleanEditor</tt></td><td>
                &#20026;<tt class="classname">Boolean</tt>&#31867;&#22411;&#23646;&#24615;&#23450;&#21046;&#30340;&#23646;&#24615;&#32534;&#36753;&#22120;&#12290;&#22312;<tt class="classname">BeanWrapperImpl</tt>&#20013;&#24050;&#32463;&#40664;&#35748;&#27880;&#20876;&#22909;&#20102;&#65292;&#20294;&#21487;&#20197;&#34987;&#29992;&#25143;&#33258;&#23450;&#20041;&#30340;&#32534;&#36753;&#22120;&#23454;&#20363;&#35206;&#30422;&#20854;&#34892;&#20026;&#12290;
                </td></tr><tr><td><tt class="classname">CustomCollectionEditor</tt></td><td>
                &#38598;&#21512;(<tt class="interfacename">Collection</tt>)&#32534;&#36753;&#22120;&#65292;&#23558;&#20219;&#20309;&#28304;&#38598;&#21512;(<tt class="interfacename">Collection</tt>)&#36716;&#21270;&#25104;&#30446;&#26631;&#30340;&#38598;&#21512;&#31867;&#22411;&#30340;&#23545;&#35937;&#12290;
                </td></tr><tr><td><tt class="classname">CustomDateEditor</tt></td><td>
                &#20026;java.util.Date&#31867;&#22411;&#23450;&#21046;&#30340;&#23646;&#24615;&#32534;&#36753;&#22120;&#65292;&#25903;&#25345;&#29992;&#25143;&#33258;&#23450;&#20041;&#30340;DateFormat&#12290;&#40664;&#35748;&#27809;&#26377;&#34987;<tt class="interfacename">BeanWrapper</tt>Impl&#27880;&#20876;&#65292;&#38656;&#35201;&#29992;&#25143;&#36890;&#36807;&#25351;&#23450;&#24688;&#24403;&#30340;format&#31867;&#22411;&#26469;&#27880;&#20876;&#12290;
                </td></tr><tr><td><tt class="classname">CustomNumberEditor</tt></td><td>
                &#20026;<tt class="classname">Integer</tt>&#65292; <tt class="classname">Long</tt>&#65292; <tt class="classname">Float</tt>&#65292; <tt class="classname">Double</tt>&#31561;Number&#30340;&#23376;&#31867;&#23450;&#21046;&#30340;&#23646;&#24615;&#32534;&#36753;&#22120;&#12290;&#22312;<tt class="classname">BeanWrapperImpl</tt>&#20013;&#24050;&#32463;&#40664;&#35748;&#27880;&#20876;&#22909;&#20102;&#65292;&#20294;&#21487;&#20197;&#34987;&#29992;&#25143;&#33258;&#24049;&#23450;&#20041;&#30340;&#32534;&#36753;&#22120;&#23454;&#20363;&#35206;&#30422;&#20854;&#34892;&#20026;&#12290;
                </td></tr><tr><td><tt class="classname">FileEditor</tt></td><td> 
                &#33021;&#22815;&#23558;&#23383;&#31526;&#20018;&#36716;&#21270;&#25104;<tt class="classname">java.io.File</tt>&#23545;&#35937;&#65292;&#22312;<tt class="classname">BeanWrapperImpl</tt>&#20013;&#24050;&#32463;&#40664;&#35748;&#27880;&#20876;&#22909;&#20102;&#12290;
                </td></tr><tr><td><tt class="classname">InputStreamEditor</tt></td><td>
                &#19968;&#20010;&#21333;&#21521;&#30340;&#23646;&#24615;&#32534;&#36753;&#22120;&#65292;&#33021;&#22815;&#25226;&#25991;&#26412;&#23383;&#31526;&#20018;&#36716;&#21270;&#25104;<tt class="interfacename">InputStream</tt>&#65288;&#36890;&#36807;<tt class="classname">ResourceEditor</tt>&#21644; <tt class="interfacename">Resource</tt>&#20316;&#20026;&#20013;&#20171;&#65289;&#65292;&#22240;&#32780;<tt class="interfacename">InputStream</tt>&#23646;&#24615;&#21487;&#20197;&#30452;&#25509;&#34987;&#35774;&#32622;&#25104;&#23383;&#31526;&#20018;&#12290;&#27880;&#24847;&#22312;&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#36825;&#20010;&#23646;&#24615;&#32534;&#36753;&#22120;&#19981;&#20250;&#20026;&#20320;&#20851;&#38381;<tt class="interfacename">InputStream</tt>&#12290;&#22312;<tt class="classname">BeanWrapperImpl</tt>&#20013;&#24050;&#32463;&#40664;&#35748;&#27880;&#20876;&#22909;&#20102;&#12290;
                </td></tr><tr><td><tt class="classname">LocaleEditor</tt></td><td>&#22312;String&#23545;&#35937;&#21644;<tt class="classname">Locale</tt> &#23545;&#35937;&#20043;&#38388;&#20114;&#30456;&#36716;&#21270;&#12290;&#65288;String&#30340;&#24418;&#24335;&#20026;[&#35821;&#35328;]_[&#22269;&#23478;]_[&#21464;&#37327;]&#65292;&#36825;&#19982;Local&#23545;&#35937;&#30340;toString()&#26041;&#27861;&#24471;&#21040;&#30340;&#32467;&#26524;&#30456;&#21516;&#65289;&#22312;<tt class="classname">BeanWrapperImpl</tt>&#20013;&#24050;&#32463;&#40664;&#35748;&#27880;&#20876;&#22909;&#20102;&#12290;
                </td></tr><tr><td><tt class="classname">PatternEditor</tt></td><td>&#21487;&#20197;&#23558;&#23383;&#31526;&#20018;&#36716;&#21270;&#20026;JDK 1.5&#30340;
                <tt class="classname">Pattern</tt>&#23545;&#35937;&#65292;&#21453;&#20043;&#20134;&#28982;&#12290;</td></tr><tr><td><tt class="classname">PropertiesEditor</tt></td><td>
                &#33021;&#23558;String&#36716;&#21270;&#20026;<tt class="classname">Properties</tt>&#23545;&#35937;&#65288;&#30001;JavaDoc&#35268;&#23450;&#30340;java.lang.Properties&#31867;&#22411;&#30340;&#26684;&#24335;&#65289;&#12290;&#22312;<tt class="classname">BeanWrapperImpl</tt>&#20013;&#24050;&#32463;&#40664;&#35748;&#27880;&#20876;&#22909;&#20102;&#12290;
                </td></tr><tr><td><tt class="classname">StringTrimmerEditor</tt></td><td>
                &#19968;&#20010;&#29992;&#20110;&#20462;&#21098;(trim)String&#31867;&#22411;&#30340;&#23646;&#24615;&#32534;&#36753;&#22120;&#65292;&#20855;&#26377;&#23558;&#19968;&#20010;&#31354;&#23383;&#31526;&#20018;&#36716;&#21270;&#20026;<tt class="literal">null</tt>&#20540;&#30340;&#36873;&#39033;&#12290;&#40664;&#35748;&#27809;&#26377;&#27880;&#20876;&#65292;&#24517;&#39035;&#30001;&#29992;&#25143;&#22312;&#38656;&#35201;&#30340;&#26102;&#20505;&#33258;&#34892;&#27880;&#20876;&#12290;
                </td></tr><tr><td><tt class="classname">URLEditor</tt></td><td>
                &#33021;&#23558;String&#34920;&#31034;&#30340;URL&#36716;&#21270;&#20026;&#19968;&#20010;&#20855;&#20307;&#30340;<tt class="classname">URL</tt>&#23545;&#35937;&#12290;&#22312;<tt class="classname">BeanWrapperImpl</tt>&#20013;&#24050;&#32463;&#40664;&#35748;&#27880;&#20876;&#22909;&#20102;&#12290;
                </td></tr></tbody></table></div><p>Spring&#20351;&#29992;<tt class="interfacename">java.beans.PropertyEditorManager</tt>&#26469;&#20026;&#21487;&#33021;&#38656;&#35201;&#30340;&#23646;&#24615;&#32534;&#36753;&#22120;&#35774;&#32622;&#26597;&#35810;&#36335;&#24452;&#12290;&#26597;&#35810;&#36335;&#24452;&#21516;&#26102;&#21253;&#21547;&#20102;<tt class="literal">sun.bean.editors</tt>&#65292;&#36825;&#20010;&#21253;&#20013;&#23450;&#20041;&#20102;&#24456;&#22810;<tt class="interfacename">PropertyEditor</tt>&#30340;&#20855;&#20307;&#23454;&#29616;&#65292;&#21253;&#25324;<tt class="classname">Font</tt>&#12289;<tt class="classname">Color</tt>&#20197;&#21450;&#32477;&#22823;&#22810;&#25968;&#30340;&#22522;&#26412;&#31867;&#22411;&#30340;&#20855;&#20307;&#23454;&#29616;&#12290;&#21516;&#26679;&#20540;&#24471;&#27880;&#24847;&#30340;&#26159;&#65292;&#26631;&#20934;&#30340;JavaBean&#22522;&#30784;&#26500;&#26550;&#33021;&#22815;&#33258;&#21160;&#35782;&#21035;<tt class="interfacename">PropertyEditor</tt>&#31867;&#65288;&#26080;&#38656;&#20570;&#39069;&#22806;&#30340;&#27880;&#20876;&#24037;&#20316;&#65289;&#65292;&#21069;&#25552;&#26465;&#20214;&#26159;&#65292;&#31867;&#21644;&#22788;&#29702;&#36825;&#20010;&#31867;&#30340;Editor&#20301;&#20110;&#21516;&#19968;&#32423;&#21253;&#32467;&#26500;&#65292;&#32780;Editor&#30340;&#21629;&#21517;&#36981;&#24490;&#20102;&#22312;&#31867;&#21517;&#21518;&#21152;&#20102;&#8220;Editor&#8221;&#30340;&#35268;&#21017;&#12290;&#20030;&#20363;&#26469;&#35828;&#65292;&#24403;<tt class="classname">FooEditor</tt>&#21644;<tt class="classname">Foo</tt>&#22312;&#21516;&#19968;&#32423;&#21035;&#21253;&#19979;&#30340;&#26102;&#20505;&#65292;<tt class="classname">FooEditor</tt>&#33021;&#22815;&#35782;&#21035;<tt class="classname">Foo</tt>&#31867;&#24182;&#20316;&#20026;&#23427;&#30340;<tt class="interfacename">PropertyEditor</tt>&#12290;</p><pre class="programlisting">com
  chank
    pop
      Foo
      FooEditor   <i class="lineannotation"><span class="lineannotation">// the <tt class="interfacename">PropertyEditor</tt> for the <tt class="classname">Foo</tt> class</span></i></pre><p>&#27880;&#24847;&#65292;&#20320;&#21516;&#26679;&#21487;&#20197;&#20351;&#29992;&#26631;&#20934;&#30340;<tt class="interfacename">BeanInfo</tt> JavaBean&#26426;&#21046;(&#35814;&#24773;&#35265;<a href="http://java.sun.com/docs/books/tutorial/javabeans/customization/index.html" target="_top">&#36825;&#37324;</a>)&#12290;&#22312;&#19979;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#20320;&#21487;&#20197;&#30475;&#21040;&#19968;&#20010;&#36890;&#36807;&#20351;&#29992;<tt class="interfacename">BeanInfo</tt>&#26426;&#21046;&#26469;&#20026;&#30456;&#20851;&#31867;&#30340;&#23646;&#24615;&#26126;&#30830;&#23450;&#20041;&#19968;&#20010;&#25110;&#32773;&#22810;&#20010;<tt class="interfacename">PropertyEditor</tt>&#23454;&#20363;&#12290;</p><pre class="programlisting">com
  chank
    pop
      Foo
      FooBeanInfo   <i class="lineannotation"><span class="lineannotation">// the <tt class="interfacename">BeanInfo</tt> for the <tt class="classname">Foo</tt> class</span></i></pre><p>&#19979;&#38754;&#23601;&#26159;<tt class="classname">FooBeanInfo</tt>&#31867;&#30340;&#28304;&#30721;&#65292;&#23427;&#23558;<tt class="classname">CustomNumberEditor</tt>&#19982;<tt class="classname">Foo</tt>&#20013;&#30340;<tt class="literal">age</tt>&#23646;&#24615;&#32852;&#31995;&#22312;&#20102;&#19968;&#36215;&#12290;</p><pre class="programlisting">public class FooBeanInfo extends SimpleBeanInfo {
      
    public PropertyDescriptor[] getPropertyDescriptors() {
        try {
            final PropertyEditor numberPE = new CustomNumberEditor(Integer.class, true);
            PropertyDescriptor ageDescriptor = new PropertyDescriptor("age", Foo.class) {
                public PropertyEditor createPropertyEditor(Object bean) {
                    return numberPE;
                };
            };
            return new PropertyDescriptor[] { ageDescriptor };
        }
        catch (IntrospectionException ex) {
            throw new Error(ex.toString());
        }
    }
}</pre><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="beans-beans-conversion-customeditor-registration"></a>5.4.2.1.&nbsp;&#27880;&#20876;&#29992;&#25143;&#33258;&#23450;&#20041;&#30340;<tt class="interfacename">PropertyEditor</tt></h4></div></div><div></div></div><p>&#24403;&#20197;&#19968;&#20010;&#23383;&#31526;&#20018;&#20540;&#26469;&#35774;&#32622;bean&#23646;&#24615;&#26102;&#65292;Spring IoC &#23481;&#22120;&#26368;&#32456;&#20351;&#29992;&#26631;&#20934;&#30340;JavaBean <tt class="literal">PropertyEditor</tt>&#26469;&#23558;&#36825;&#20123;&#23383;&#31526;&#20018;&#36716;&#21270;&#25104;&#22797;&#26434;&#30340;&#25968;&#25454;&#31867;&#22411;&#12290;Spring&#39044;&#20808;&#27880;&#20876;&#20102;&#19968;&#20123;<tt class="literal">PropertyEditor</tt>(&#20030;&#20363;&#26469;&#35828;&#65292;&#23558;&#19968;&#20010;&#20197;&#23383;&#31526;&#20018;&#34920;&#31034;&#30340;Class&#36716;&#21270;&#25104;<tt class="classname">Class</tt>&#23545;&#35937;)&#12290;&#38500;&#27492;&#20043;&#22806;&#65292;Java&#26631;&#20934;&#30340;JavaBean <tt class="interfacename">PropertyEditor</tt>&#20250;&#35782;&#21035;&#22312;&#21516;&#19968;&#21253;&#32467;&#26500;&#19979;&#30340;&#31867;&#21644;&#23427;&#23545;&#24212;&#30340;&#21629;&#21517;&#24688;&#24403;&#30340;Editor&#65292;&#24182;&#33258;&#21160;&#23558;&#20854;&#20316;&#20026;&#36825;&#20010;&#31867;&#30340;&#30340;Editor&#12290;</p><p>&#22914;&#26524;&#20320;&#24819;&#27880;&#20876;&#33258;&#24049;&#23450;&#20041;&#30340;<tt class="literal">PropertyEditor</tt>&#65292;&#37027;&#20040;&#26377;&#20960;&#31181;&#19981;&#21516;&#30340;&#26426;&#21046;&#20379;&#21531;&#36873;&#25321;&#12290;&#20854;&#20013;&#65292;&#26368;&#21407;&#22987;&#30340;&#25163;&#24037;&#26041;&#24335;&#26159;&#22312;&#20320;&#26377;&#19968;&#20010;<tt class="interfacename">BeanFactory</tt>&#30340;&#24341;&#29992;&#23454;&#20363;&#26102;&#65292;&#20351;&#29992;<tt class="interfacename">ConfigurableBeanFactory</tt>&#30340;<tt class="methodname">registerCustomEditor()</tt>&#26041;&#27861;&#12290;&#24403;&#28982;&#65292;&#36890;&#24120;&#36825;&#31181;&#26041;&#27861;&#19981;&#22815;&#26041;&#20415;&#65292;&#22240;&#32780;&#24182;&#19981;&#25512;&#33616;&#20351;&#29992;&#12290;&#21478;&#22806;&#19968;&#20010;&#31616;&#20415;&#30340;&#26041;&#27861;&#26159;&#20351;&#29992;&#19968;&#20010;&#31216;&#20043;&#20026;<tt class="classname">CustomEditorConfigurer</tt>&#30340;&#29305;&#27530;&#30340;bean factory&#21518;&#32622;&#22788;&#29702;&#22120;&#12290;&#23613;&#31649;bean factory&#30340;&#21518;&#32622;&#22788;&#29702;&#22120;&#21487;&#20197;&#21322;&#25163;&#24037;&#21270;&#30340;&#19982;<tt class="interfacename">BeanFactory</tt>&#23454;&#29616;&#19968;&#36215;&#20351;&#29992;&#65292;&#20294;&#26159;&#23427;&#23384;&#22312;&#30528;&#19968;&#20010;&#23884;&#22871;&#23646;&#24615;&#30340;&#24314;&#31435;&#26041;&#24335;&#12290;&#22240;&#27492;&#65292;&#24378;&#28872;&#25512;&#33616;&#30340;&#19968;&#31181;&#20570;&#27861;&#26159;&#19982;<tt class="interfacename">ApplicationContext</tt>&#19968;&#36215;&#26469;&#20351;&#29992;&#23427;&#12290;&#36825;&#26679;&#23601;&#33021;&#20351;&#20043;&#19982;&#20854;&#20182;&#30340;bean&#19968;&#26679;&#20197;&#31867;&#20284;&#30340;&#26041;&#24335;&#37096;&#32626;&#21516;&#26102;&#34987;&#23481;&#22120;&#25152;&#24863;&#30693;&#24182;&#20351;&#29992;&#12290;</p><p>&#27880;&#24847;&#25152;&#26377;&#30340;bean factory&#21644;application context&#37117;&#20250;&#33258;&#21160;&#22320;&#20351;&#29992;&#19968;&#31995;&#21015;&#30340;&#20869;&#32622;&#23646;&#24615;&#32534;&#36753;&#22120;&#65292;&#36890;&#36807;<tt class="interfacename">BeanWrapper</tt>&#26469;&#22788;&#29702;&#23646;&#24615;&#30340;&#36716;&#21270;&#12290;&#22312;<a href="#beans-beans-conversion" title="5.4.2.&nbsp;&#20869;&#24314;&#30340;PropertyEditor&#23454;&#29616;">&#36825;&#37324;</a>&#21015;&#20986;&#19968;&#20123;&#22312;<tt class="interfacename">BeanWrapper</tt>&#20013;&#27880;&#20876;&#30340;&#26631;&#20934;&#30340;&#23646;&#24615;&#32534;&#36753;&#22120;&#12290;&#38500;&#27492;&#20043;&#22806;&#65292;<tt class="literal">ApplicationContext</tt>&#35206;&#30422;&#20102;&#19968;&#20123;&#40664;&#35748;&#34892;&#20026;&#65292;&#24182;&#20026;&#20043;&#22686;&#21152;&#20102;&#35768;&#22810;&#32534;&#36753;&#22120;&#26469;&#22788;&#29702;&#22312;&#26576;&#31181;&#24847;&#20041;&#19978;&#21512;&#36866;&#20110;&#29305;&#23450;&#30340;application context&#31867;&#22411;&#30340;&#36164;&#28304;&#26597;&#25214;&#12290;</p><p>&#26631;&#20934;&#30340;JavaBean&#30340;<tt class="interfacename">PropertyEditor</tt>&#23454;&#20363;&#23558;&#20197;String&#34920;&#31034;&#30340;&#20540;&#36716;&#21270;&#25104;&#23454;&#38469;&#22797;&#26434;&#30340;&#25968;&#25454;&#31867;&#22411;&#12290;<tt class="classname">CustomEditorConfigurer</tt>&#20316;&#20026;&#19968;&#20010;bean factory&#30340;&#21518;&#32622;&#22788;&#29702;&#22120;&#65292;&#33021;&#22815;&#20415;&#25463;&#22320;&#23558;&#19968;&#20123;&#39069;&#22806;&#30340;<tt class="interfacename">PropertyEditor</tt>&#23454;&#20363;&#21152;&#20837;&#21040;<tt class="interfacename">ApplicationContext</tt>&#20013;&#21435;&#12290;</p><p>&#32771;&#34385;&#29992;&#25143;&#23450;&#20041;&#30340;&#31867;<tt class="classname">ExoticType</tt>&#21644;<tt class="classname">DependsOnExoticType</tt>&#65292;&#20854;&#20013;&#65292;&#21518;&#32773;&#38656;&#35201;&#23558;&#21069;&#32773;&#35774;&#32622;&#20026;&#23427;&#30340;&#23646;&#24615;&#65306;</p><pre class="programlisting">package example;
		
public class ExoticType {

    private String name;

    public ExoticType(String name) {
        this.name = name;
    }
}

public class DependsOnExoticType { 
   
    private ExoticType type;

    public void setType(ExoticType type) {
        this.type = type;
    }
}</pre><p>&#22312;&#19968;&#20999;&#24314;&#31435;&#36215;&#26469;&#20197;&#21518;&#65292;&#25105;&#20204;&#24076;&#26395;&#36890;&#36807;&#25351;&#23450;&#19968;&#20010;&#23383;&#31526;&#20018;&#26469;&#35774;&#32622;type&#23646;&#24615;&#30340;&#20540;&#65292;&#28982;&#21518;<tt class="interfacename">PropertyEditor</tt>&#23558;&#22312;&#24149;&#21518;&#24110;&#20320;&#23558;&#20854;&#36716;&#21270;&#20026;&#23454;&#38469;&#30340;<tt class="classname">ExoticType</tt>&#23545;&#35937;&#65306;</p><pre class="programlisting">&lt;bean id="sample" class="example.DependsOnExoticType"&gt;
    &lt;property name="type" value="aNameForExoticType"/&gt;
&lt;/bean&gt;</pre><p><tt class="interfacename">PropertyEditor</tt>&#30340;&#23454;&#29616;&#30475;&#19978;&#21435;&#23601;&#20687;&#36825;&#26679;&#65306;</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">// converts string representation to <tt class="classname">ExoticType</tt> object</span></i>
package example;

public class ExoticTypeEditor extends PropertyEditorSupport {

    private String format;

    public void setFormat(String format) {
        this.format = format;
    }
    
    public void setAsText(String text) {
        if (format != null &amp;&amp; format.equals("upperCase")) {
            text = text.toUpperCase();
        }
        ExoticType type = new ExoticType(text);
        setValue(type);
    }
}</pre><p>&#26368;&#21518;&#65292;&#25105;&#20204;&#36890;&#36807;&#20351;&#29992;<tt class="classname">CustomEditorConfigurer</tt>&#26469;&#20026;<tt class="interfacename">ApplicationContext</tt>&#27880;&#20876;&#19968;&#20010;&#26032;&#30340;<tt class="interfacename">PropertyEditor</tt>&#65292;&#36825;&#26679;&#65292;&#25105;&#20204;&#23601;&#21487;&#20197;&#22312;&#20219;&#20309;&#38656;&#35201;&#30340;&#22320;&#26041;&#20351;&#29992;&#23427;&#20102;&#65306;</p><pre class="programlisting">&lt;bean class="org.springframework.beans.factory.config.CustomEditorConfigurer"&gt;
  &lt;property name="customEditors"&gt;
    &lt;map&gt;
      &lt;entry key="example.ExoticType"&gt;
        &lt;bean class="example.ExoticTypeEditor"&gt;
          &lt;property name="format" value="upperCase"/&gt;
        &lt;/bean&gt;
      &lt;/entry&gt;
    &lt;/map&gt;
  &lt;/property&gt;
&lt;/bean&gt;</pre><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="beans-beans-conversion-customeditor-registration-per"></a>5.4.2.1.1.&nbsp;&#20351;&#29992;<tt class="interfacename">PropertyEditorRegistrars</tt></h5></div></div><div></div></div><p>
			&#23558;&#23646;&#24615;&#32534;&#36753;&#22120;&#27880;&#20876;&#21040;Spring&#23481;&#22120;&#30340;&#21478;&#19968;&#31181;&#26041;&#24335;&#26159;&#21019;&#24314;&#24182;&#20351;&#29992;<tt class="interfacename">PropertyEditorRegistrar</tt>&#12290;
			&#24403;&#20320;&#22312;&#19981;&#21516;&#24773;&#20917;&#19979;&#65288;&#22914;&#32534;&#20889;&#19968;&#20010;&#30456;&#24212;&#30340;&#27880;&#20876;&#22120;&#28982;&#21518;&#22312;&#22810;&#31181;&#24773;&#20917;&#19979;&#37325;&#29992;&#23427;&#65289;&#38656;&#35201;&#20351;&#29992;&#30456;&#21516;&#30340;&#23646;&#24615;&#32534;&#36753;&#22120;&#26102;&#35813;&#25509;&#21475;&#29305;&#21035;&#26377;&#29992;&#12290;
			<tt class="literal">PropertyEditorRegistrars</tt>&#19982;<tt class="interfacename">PropertyEditorRegistry</tt>&#25509;&#21475;&#21327;&#21516;&#24037;&#20316;&#65292;
			<tt class="interfacename">PropertyEditorRegistry</tt>&#26159;&#19968;&#20010;&#30001;Spring&#30340;<tt class="interfacename">BeanWrapper</tt>
			&#65288;&#21450;<tt class="interfacename">DataBinder</tt>&#65289;&#23454;&#29616;&#30340;&#19968;&#20010;&#25509;&#21475;&#12290;
			&#24403;&#19982;<tt class="classname">CustomEditorConfigurer</tt>
			&#65288;&#22312;<a href="#beans-beans-conversion-customeditor-registration" title="5.4.2.1.&nbsp;&#27880;&#20876;&#29992;&#25143;&#33258;&#23450;&#20041;&#30340;PropertyEditor">&#27492;&#22788;</a>&#26366;&#20171;&#32461;&#36807;&#65289;&#21327;&#21516;&#20351;&#29992;&#26102;&#65292;
			<tt class="literal">PropertyEditorRegistrars</tt>&#23588;&#20026;&#26041;&#20415;&#65292;
			<tt class="classname">CustomEditorConfigurer</tt>&#20250;&#26292;&#38706;&#19968;&#20010;&#21483;&#20570;<tt class="methodname">setPropertyEditorRegistrars(..)</tt>&#30340;&#26041;&#27861;&#65306;
			&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;<tt class="interfacename">DataBinder</tt>&#21644;Spring MVC <tt class="interfacename">Controllers</tt>&#20250;&#24456;&#23481;&#26131;&#22320;&#20849;&#20139;&#21152;&#21040;<tt class="classname">CustomEditorConfigurer</tt>&#20013;&#30340;<tt class="literal">PropertyEditorRegistrars</tt>&#12290;
			&#27492;&#22806;&#65292;&#33258;&#23450;&#20041;&#32534;&#36753;&#22120;&#26080;&#38656;&#20877;&#36827;&#34892;&#21516;&#27493;&#20102;&#65306;&#27599;&#27425;&#21019;&#24314;bean&#26102;<tt class="interfacename">PropertyEditorRegistrar</tt>&#37117;&#20250;&#21019;&#24314;&#19968;&#20010;&#26032;&#30340;<tt class="interfacename">PropertyEditor</tt>&#12290;
			</p><p>&#36890;&#36807;&#31034;&#20363;&#26368;&#33021;&#35828;&#26126;<tt class="interfacename">PropertyEditorRegistrar</tt>&#30340;&#20248;&#28857;&#20102;&#12290;&#39318;&#20808;&#65292;&#20320;&#38656;&#35201;&#21019;&#24314;&#20320;&#33258;&#24049;&#30340;<tt class="interfacename">PropertyEditorRegistrar</tt>&#23454;&#29616;&#65306;</p><pre class="programlisting">package com.foo.editors.spring;

public final class CustomPropertyEditorRegistrar implements PropertyEditorRegistrar {

    public void registerCustomEditors(PropertyEditorRegistry registry) {

        <i class="lineannotation"><span class="lineannotation">// it is expected that new <tt class="interfacename">PropertyEditor</tt> instances are created</span></i>
        registry.registerCustomEditor(ExoticType.class, new ExoticTypeEditor());

        <i class="lineannotation"><span class="lineannotation">// you could register as many custom property editors as are required here...</span></i>
    }
}</pre><p><tt class="classname">org.springframework.beans.support.ResourceEditorRegistrar</tt>&#26159;&#21478;&#19968;&#20010;<tt class="interfacename">PropertyEditorRegistrar</tt>&#23454;&#29616;&#30340;&#33539;&#20363;&#12290;&#35831;&#27880;&#24847;&#22312;<tt class="methodname">registerCustomEditors(..)</tt>&#26041;&#27861;&#30340;&#23454;&#29616;&#20013;&#65292;&#23427;&#26159;&#22914;&#20309;&#21019;&#24314;&#27599;&#20010;&#23646;&#24615;&#32534;&#36753;&#22120;&#30340;&#23454;&#20363;&#30340;&#12290;</p><p>&#25509;&#19979;&#26469;&#25105;&#20204;&#37197;&#32622;&#19968;&#20010;<tt class="classname">CustomEditorConfigurer</tt>&#65292;&#28982;&#21518;&#23558;<tt class="classname">CustomPropertyEditorRegistrar</tt>&#23454;&#20363;&#27880;&#20837;&#20854;&#20013;&#65306;</p><pre class="programlisting">&lt;bean class="org.springframework.beans.factory.config.CustomEditorConfigurer"&gt;
    &lt;property name="propertyEditorRegistrars"&gt;
        &lt;list&gt;
            &lt;ref bean="customPropertyEditorRegistrar"/&gt;
        &lt;/list&gt;
    &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id="customPropertyEditorRegistrar" class="com.foo.editors.spring.CustomPropertyEditorRegistrar"/&gt;</pre><p>&#26368;&#21518;&#65292;&#31245;&#24494;&#20559;&#31163;&#19968;&#19979;&#26412;&#31456;&#30340;&#20027;&#39064;&#65292;&#23545;&#20110;&#20351;&#29992;&#20102;<a href="#mvc" title="Chapter&nbsp;13.&nbsp;Web MVC framework Web&#26694;&#26550;">Spring&#30340;MVC web&#26694;&#26550;</a>&#30340;&#24212;&#29992;&#26469;&#35828;&#65292;&#19982;&#25968;&#25454;&#32465;&#23450;<tt class="interfacename">Controllers</tt> &#65288;&#20363;&#22914;<tt class="classname">SimpleFormController</tt>&#65289;&#19968;&#21516;&#20351;&#29992;<tt class="interfacename">PropertyEditorRegistrars</tt>&#20250;&#38750;&#24120;&#20415;&#25463;&#12290;&#22312;&#19979;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;<tt class="methodname">initBinder(..)</tt>&#26041;&#27861;&#30340;&#23454;&#29616;&#20351;&#29992;&#20102;<tt class="interfacename">PropertyEditorRegistrar</tt>&#65306;</p><pre class="programlisting">public final class RegisterUserController extends SimpleFormController {

    private final PropertyEditorRegistrar customPropertyEditorRegistrar;

    public RegisterUserController(PropertyEditorRegistrar propertyEditorRegistrar) {
        this.customPropertyEditorRegistrar = propertyEditorRegistrar;
    }

    protected void initBinder(HttpServletRequest request, ServletRequestDataBinder binder) throws Exception {
        <span class="bold"><b>this.customPropertyEditorRegistrar.registerCustomEditors(binder);</b></span>
    }

    <i class="lineannotation"><span class="lineannotation">// other methods to do with registering a <tt class="classname">User</tt></span></i>
}</pre><p>&#36825;&#31181;&#27880;&#20876;<tt class="interfacename">PropertyEditor</tt>&#30340;&#24418;&#24335;&#20351;&#24471;&#20195;&#30721;&#38750;&#24120;&#31616;&#32451;&#65288;<tt class="methodname">initBinder(..)</tt>&#30340;&#23454;&#29616;&#23601;&#19968;&#34892;&#20195;&#30721;&#32780;&#24050;&#65281;&#65289;&#65292;&#21516;&#26102;&#23427;&#20351;&#24471;&#36890;&#29992;&#30340;<tt class="interfacename">PropertyEditor</tt>&#27880;&#20876;&#20195;&#30721;&#21487;&#34987;&#23553;&#35013;&#21040;&#19968;&#20010;&#31867;&#20013;&#65292;&#28982;&#21518;&#22312;&#38656;&#35201;&#26102;&#34987;&#22810;&#20010;<tt class="interfacename">Controllers</tt>&#20849;&#20139;&#12290;</p></div></div></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="aop"></a>Chapter&nbsp;6.&nbsp;&#20351;&#29992;Spring&#36827;&#34892;&#38754;&#21521;&#20999;&#38754;&#32534;&#31243;&#65288;AOP&#65289;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="aop-introduction"></a>6.1.&nbsp;&#31616;&#20171;</h2></div></div><div></div></div><p><span class="emphasis"><em>&#38754;&#21521;&#20999;&#38754;&#32534;&#31243;</em></span>&#65288;AOP&#65289;&#36890;&#36807;&#25552;&#20379;&#21478;&#22806;&#19968;&#31181;&#24605;&#32771;&#31243;&#24207;&#32467;&#26500;&#30340;&#36884;&#32463;&#26469;&#24357;&#34917;&#38754;&#21521;&#23545;&#35937;&#32534;&#31243;&#65288;OOP&#65289;&#30340;&#19981;&#36275;&#12290;&#22312;OOP&#20013;&#27169;&#22359;&#21270;&#30340;&#20851;&#38190;&#21333;&#20803;&#26159;&#31867;&#65288;classes&#65289;&#65292;&#32780;&#22312;AOP&#20013;&#27169;&#22359;&#21270;&#30340;&#21333;&#20803;&#21017;&#26159;<span class="emphasis"><em>&#20999;&#38754;</em></span>&#12290;&#20999;&#38754;&#33021;&#23545;&#20851;&#27880;&#28857;&#36827;&#34892;&#27169;&#22359;&#21270;&#65292;&#20363;&#22914;&#27178;&#20999;&#22810;&#20010;&#31867;&#22411;&#21644;&#23545;&#35937;&#30340;&#20107;&#21153;&#31649;&#29702;&#12290;&#65288;&#22312;AOP&#26415;&#35821;&#20013;&#36890;&#24120;&#31216;&#20316;<span class="emphasis"><em>&#27178;&#20999;&#65288;crosscutting&#65289;</em></span>&#20851;&#27880;&#28857;&#12290;&#65289;</p><p><span class="emphasis"><em>AOP&#26694;&#26550;</em></span>&#26159;Spring&#30340;&#19968;&#20010;&#37325;&#35201;&#32452;&#25104;&#37096;&#20998;&#12290;&#20294;&#26159;Spring IoC&#23481;&#22120;&#24182;&#19981;&#20381;&#36182;&#20110;AOP&#65292;&#36825;&#24847;&#21619;&#30528;&#20320;&#26377;&#26435;&#21033;&#36873;&#25321;&#26159;&#21542;&#20351;&#29992;AOP&#65292;AOP&#20570;&#20026;Spring IoC&#23481;&#22120;&#30340;&#19968;&#20010;&#34917;&#20805;,&#20351;&#23427;&#25104;&#20026;&#19968;&#20010;&#24378;&#22823;&#30340;&#20013;&#38388;&#20214;&#35299;&#20915;&#26041;&#26696;&#12290;
		</p><div class="sidebar"><p class="title"><b>Spring 2.0&#30340;AOP</b></p><p>Spring 2.0&#20801;&#35768;&#29992;&#25143;&#36873;&#25321;&#20351;&#29992;&#26356;&#31616;&#21333;&#12289;&#26356;&#24378;&#22823;&#30340;<a href="#aop-schema" title="6.3.&nbsp;&#22522;&#20110;Schema&#30340;AOP&#25903;&#25345;">&#22522;&#20110;&#27169;&#24335;</a>&#25110;<a href="#aop-ataspectj" title="6.2.&nbsp;@AspectJ&#25903;&#25345;">@AspectJ&#27880;&#35299;</a>&#30340;&#26041;&#24335;&#26469;&#33258;&#23450;&#20041;&#20999;&#38754;&#12290;&#36825;&#20004;&#31181;&#39118;&#26684;&#37117;&#25903;&#25345;&#25152;&#26377;&#31867;&#22411;&#30340;&#36890;&#30693;(advice)&#21644;AspectJ&#30340;&#20999;&#20837;&#28857;&#35821;&#35328;&#65292;&#34429;&#28982;&#23454;&#38469;&#19978;&#20173;&#28982;&#20351;&#29992;Spring AOP&#36827;&#34892;&#32455;&#20837;&#65288;Weaving&#65289;&#12290;
			</p><p>
			&#26412;&#31456;&#20027;&#35201;&#35752;&#35770;Spring 2.0&#23545;&#22522;&#20110;&#27169;&#24335;&#21644;&#22522;&#20110;@AspectJ&#30340;AOP&#25903;&#25345;&#12290;Spring 2.0&#23436;&#20840;&#20445;&#30041;&#20102;&#23545;Spring 1.2&#30340;&#21521;&#19979;&#20860;&#23481;&#65292;<a href="#aop-api" title="Chapter&nbsp;7.&nbsp;Spring AOP APIs">&#19979;&#19968;&#31456;</a>&#23558;&#35752;&#35770;Spring 1.2 API&#25152;&#25552;&#20379;&#30340;&#24213;&#23618;&#30340;AOP&#25903;&#25345;&#12290;
			</p></div><p>AOP&#22312;Spring Framework&#20013;&#30340;&#20316;&#29992;</p><div class="itemizedlist"><ul type="disc"><li><p>&#25552;&#20379;&#22768;&#26126;&#24335;&#20225;&#19994;&#26381;&#21153;&#65292;&#29305;&#21035;&#26159;&#20026;&#20102;&#26367;&#20195;EJB&#22768;&#26126;&#24335;&#26381;&#21153;&#12290;&#26368;&#37325;&#35201;&#30340;&#26381;&#21153;&#26159;<a href="#transaction-declarative" title="9.5.&nbsp;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;"><span class="emphasis"><em>&#22768;&#26126;&#24615;&#20107;&#21153;&#31649;&#29702;</em></span></a>&#12290;</p></li><li><p>&#20801;&#35768;&#29992;&#25143;&#23454;&#29616;&#33258;&#23450;&#20041;&#20999;&#38754;&#65292;&#29992;AOP&#26469;&#23436;&#21892;OOP&#30340;&#20351;&#29992;&#12290;</p></li></ul></div><i><span class="remark"><p>
		&#22914;&#26524;&#20320;&#21482;&#25171;&#31639;&#20351;&#29992;&#36890;&#29992;&#30340;&#22768;&#26126;&#24335;&#26381;&#21153;&#25110;&#32773;&#23553;&#35013;&#22909;&#30340;&#22768;&#26126;&#24335;&#20013;&#38388;&#20214;&#26381;&#21153;&#65292;&#20363;&#22914;&#32531;&#20914;&#27744;&#65288;pooling&#65289;&#65292;&#37027;&#20040;&#20320;&#19981;&#24517;&#19982;Spring AOP&#30452;&#25509;&#25171;&#20132;&#36947;&#65292;&#24182;&#19988;&#26412;&#31456;&#30340;&#22823;&#37096;&#20998;&#20869;&#23481;&#21487;&#20197;&#36339;&#36807;&#20102;&#12290;
		</p></span></i><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-introduction-defn"></a>6.1.1.&nbsp;AOP&#27010;&#24565;</h3></div></div><div></div></div><p>
			&#39318;&#20808;&#35753;&#25105;&#20204;&#20174;&#19968;&#20123;&#37325;&#35201;&#30340;AOP&#27010;&#24565;&#21644;&#26415;&#35821;&#24320;&#22987;&#12290;&#36825;&#20123;&#26415;&#35821;&#19981;&#26159;Spring&#29305;&#26377;&#30340;&#12290;&#19981;&#36807;AOP&#26415;&#35821;&#24182;&#19981;&#26159;&#29305;&#21035;&#30340;&#30452;&#35266;&#65292;&#22914;&#26524;Spring&#20351;&#29992;&#33258;&#24049;&#30340;&#26415;&#35821;&#65292;&#23558;&#20250;&#21464;&#24471;&#26356;&#21152;&#20196;&#20154;&#22256;&#24785;&#12290;
			</p><div class="itemizedlist"><ul type="disc"><li><p>
          <span class="emphasis"><em>&#20999;&#38754;&#65288;Aspect&#65289;</em></span>&#65306;&#19968;&#20010;&#20851;&#27880;&#28857;&#30340;&#27169;&#22359;&#21270;&#65292;&#36825;&#20010;&#20851;&#27880;&#28857;&#21487;&#33021;&#20250;&#27178;&#20999;&#22810;&#20010;&#23545;&#35937;&#12290;&#20107;&#21153;&#31649;&#29702;&#26159;J2EE&#24212;&#29992;&#20013;&#19968;&#20010;&#20851;&#20110;&#27178;&#20999;&#20851;&#27880;&#28857;&#30340;&#24456;&#22909;&#30340;&#20363;&#23376;&#12290;&#22312;Spring AOP&#20013;&#65292;&#20999;&#38754;&#21487;&#20197;&#20351;&#29992;<a href="#aop-schema" title="6.3.&nbsp;&#22522;&#20110;Schema&#30340;AOP&#25903;&#25345;">&#22522;&#20110;&#27169;&#24335;</a>&#65289;&#25110;&#32773;&#22522;&#20110;<a href="#aop-ataspectj" title="6.2.&nbsp;@AspectJ&#25903;&#25345;">@Aspect&#27880;&#35299;</a>&#30340;&#26041;&#24335;&#26469;&#23454;&#29616;&#12290;
				  </p></li><li><p><span class="emphasis"><em>&#36830;&#25509;&#28857;&#65288;Joinpoint&#65289;</em></span>&#65306;&#22312;&#31243;&#24207;&#25191;&#34892;&#36807;&#31243;&#20013;&#26576;&#20010;&#29305;&#23450;&#30340;&#28857;&#65292;&#27604;&#22914;&#26576;&#26041;&#27861;&#35843;&#29992;&#30340;&#26102;&#20505;&#25110;&#32773;&#22788;&#29702;&#24322;&#24120;&#30340;&#26102;&#20505;&#12290;&#22312;Spring AOP&#20013;&#65292;&#19968;&#20010;&#36830;&#25509;&#28857;<span class="emphasis"><em>&#24635;&#26159;</em></span>&#34920;&#31034;&#19968;&#20010;&#26041;&#27861;&#30340;&#25191;&#34892;&#12290;</p></li><li><p><span class="emphasis"><em>&#36890;&#30693;&#65288;Advice&#65289;</em></span>&#65306;&#22312;&#20999;&#38754;&#30340;&#26576;&#20010;&#29305;&#23450;&#30340;&#36830;&#25509;&#28857;&#19978;&#25191;&#34892;&#30340;&#21160;&#20316;&#12290;&#20854;&#20013;&#21253;&#25324;&#20102;&#8220;around&#8221;&#12289;&#8220;before&#8221;&#21644;&#8220;after&#8221;&#31561;&#19981;&#21516;&#31867;&#22411;&#30340;&#36890;&#30693;&#65288;&#36890;&#30693;&#30340;&#31867;&#22411;&#23558;&#22312;&#21518;&#38754;&#37096;&#20998;&#36827;&#34892;&#35752;&#35770;&#65289;&#12290;&#35768;&#22810;AOP&#26694;&#26550;&#65288;&#21253;&#25324;Spring&#65289;&#37117;&#26159;&#20197;<span class="emphasis"><em>&#25318;&#25130;&#22120;</em></span>&#20570;&#36890;&#30693;&#27169;&#22411;&#65292;&#24182;&#32500;&#25252;&#19968;&#20010;&#20197;&#36830;&#25509;&#28857;&#20026;&#20013;&#24515;&#30340;&#25318;&#25130;&#22120;&#38142;&#12290;
					</p></li><li><p><span class="emphasis"><em>&#20999;&#20837;&#28857;&#65288;Pointcut&#65289;</em></span>&#65306;&#21305;&#37197;&#36830;&#25509;&#28857;&#30340;&#26029;&#35328;&#12290;&#36890;&#30693;&#21644;&#19968;&#20010;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#20851;&#32852;&#65292;&#24182;&#22312;&#28385;&#36275;&#36825;&#20010;&#20999;&#20837;&#28857;&#30340;&#36830;&#25509;&#28857;&#19978;&#36816;&#34892;&#65288;&#20363;&#22914;&#65292;&#24403;&#25191;&#34892;&#26576;&#20010;&#29305;&#23450;&#21517;&#31216;&#30340;&#26041;&#27861;&#26102;&#65289;&#12290;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#22914;&#20309;&#21644;&#36830;&#25509;&#28857;&#21305;&#37197;&#26159;AOP&#30340;&#26680;&#24515;&#65306;Spring&#32570;&#30465;&#20351;&#29992;AspectJ&#20999;&#20837;&#28857;&#35821;&#27861;&#12290;
					</p></li><li><p><span class="emphasis"><em>&#24341;&#20837;&#65288;Introduction&#65289;</em></span>&#65306;&#29992;&#26469;&#32473;&#19968;&#20010;&#31867;&#22411;&#22768;&#26126;&#39069;&#22806;&#30340;&#26041;&#27861;&#25110;&#23646;&#24615;&#65288;&#20063;&#34987;&#31216;&#20026;&#36830;&#25509;&#31867;&#22411;&#22768;&#26126;&#65288;inter-type declaration&#65289;&#65289;&#12290;Spring&#20801;&#35768;&#24341;&#20837;&#26032;&#30340;&#25509;&#21475;&#65288;&#20197;&#21450;&#19968;&#20010;&#23545;&#24212;&#30340;&#23454;&#29616;&#65289;&#21040;&#20219;&#20309;&#34987;&#20195;&#29702;&#30340;&#23545;&#35937;&#12290;&#20363;&#22914;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;&#24341;&#20837;&#26469;&#20351;&#19968;&#20010;bean&#23454;&#29616;<tt class="literal">IsModified</tt>&#25509;&#21475;&#65292;&#20197;&#20415;&#31616;&#21270;&#32531;&#23384;&#26426;&#21046;&#12290;
					</p></li><li><p><span class="emphasis"><em>&#30446;&#26631;&#23545;&#35937;&#65288;Target Object&#65289;</em></span>&#65306;
					&#34987;&#19968;&#20010;&#25110;&#32773;&#22810;&#20010;&#20999;&#38754;&#25152;&#36890;&#30693;&#30340;&#23545;&#35937;&#12290;&#20063;&#34987;&#31216;&#20570;<span class="emphasis"><em>&#34987;&#36890;&#30693;&#65288;advised&#65289;</em></span>&#23545;&#35937;&#12290;
					&#26082;&#28982;Spring AOP&#26159;&#36890;&#36807;&#36816;&#34892;&#26102;&#20195;&#29702;&#23454;&#29616;&#30340;&#65292;&#36825;&#20010;&#23545;&#35937;&#27704;&#36828;&#26159;&#19968;&#20010;<span class="emphasis"><em>&#34987;&#20195;&#29702;&#65288;proxied&#65289;</em></span>&#23545;&#35937;&#12290;
					</p></li><li><p><span class="emphasis"><em>AOP&#20195;&#29702;&#65288;AOP Proxy&#65289;</em></span>&#65306;AOP&#26694;&#26550;&#21019;&#24314;&#30340;&#23545;&#35937;&#65292;&#29992;&#26469;&#23454;&#29616;&#20999;&#38754;&#22865;&#32422;&#65288;&#20363;&#22914;&#36890;&#30693;&#26041;&#27861;&#25191;&#34892;&#31561;&#31561;&#65289;&#12290;&#22312;Spring&#20013;&#65292;AOP&#20195;&#29702;&#21487;&#20197;&#26159;JDK&#21160;&#24577;&#20195;&#29702;&#25110;&#32773;CGLIB&#20195;&#29702;&#12290;
					</p></li><li><p><span class="emphasis"><em>&#32455;&#20837;&#65288;Weaving&#65289;</em></span>&#65306;&#25226;&#20999;&#38754;&#36830;&#25509;&#21040;&#20854;&#23427;&#30340;&#24212;&#29992;&#31243;&#24207;&#31867;&#22411;&#25110;&#32773;&#23545;&#35937;&#19978;&#65292;&#24182;&#21019;&#24314;&#19968;&#20010;&#34987;&#36890;&#30693;&#30340;&#23545;&#35937;&#12290;&#36825;&#20123;&#21487;&#20197;&#22312;&#32534;&#35793;&#26102;&#65288;&#20363;&#22914;&#20351;&#29992;AspectJ&#32534;&#35793;&#22120;&#65289;&#65292;&#31867;&#21152;&#36733;&#26102;&#21644;&#36816;&#34892;&#26102;&#23436;&#25104;&#12290;Spring&#21644;&#20854;&#20182;&#32431;Java AOP&#26694;&#26550;&#19968;&#26679;&#65292;&#22312;&#36816;&#34892;&#26102;&#23436;&#25104;&#32455;&#20837;&#12290;
					</p></li></ul></div><p>&#36890;&#30693;&#31867;&#22411;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><span class="emphasis"><em>&#21069;&#32622;&#36890;&#30693;&#65288;Before advice&#65289;</em></span>&#65306;&#22312;&#26576;&#36830;&#25509;&#28857;&#20043;&#21069;&#25191;&#34892;&#30340;&#36890;&#30693;&#65292;&#20294;&#36825;&#20010;&#36890;&#30693;&#19981;&#33021;&#38459;&#27490;&#36830;&#25509;&#28857;&#20043;&#21069;&#30340;&#25191;&#34892;&#27969;&#31243;&#65288;&#38500;&#38750;&#23427;&#25243;&#20986;&#19968;&#20010;&#24322;&#24120;&#65289;&#12290;
					</p></li><li><p><span class="emphasis"><em>&#21518;&#32622;&#36890;&#30693;&#65288;After returning advice&#65289;</em></span>&#65306;&#22312;&#26576;&#36830;&#25509;&#28857;&#27491;&#24120;&#23436;&#25104;&#21518;&#25191;&#34892;&#30340;&#36890;&#30693;&#65306;&#20363;&#22914;&#65292;&#19968;&#20010;&#26041;&#27861;&#27809;&#26377;&#25243;&#20986;&#20219;&#20309;&#24322;&#24120;&#65292;&#27491;&#24120;&#36820;&#22238;&#12290;
					</p></li><li><p><span class="emphasis"><em>&#24322;&#24120;&#36890;&#30693;&#65288;After throwing advice&#65289;</em></span>&#65306;&#22312;&#26041;&#27861;&#25243;&#20986;&#24322;&#24120;&#36864;&#20986;&#26102;&#25191;&#34892;&#30340;&#36890;&#30693;&#12290;
					</p></li><li><p><span class="emphasis"><em>&#26368;&#32456;&#36890;&#30693;&#65288;After (finally) advice&#65289;</em></span>&#65306;&#24403;&#26576;&#36830;&#25509;&#28857;&#36864;&#20986;&#30340;&#26102;&#20505;&#25191;&#34892;&#30340;&#36890;&#30693;&#65288;&#19981;&#35770;&#26159;&#27491;&#24120;&#36820;&#22238;&#36824;&#26159;&#24322;&#24120;&#36864;&#20986;&#65289;&#12290;
		  		</p></li><li><p><span class="emphasis"><em>&#29615;&#32469;&#36890;&#30693;&#65288;Around Advice&#65289;</em></span>&#65306;&#21253;&#22260;&#19968;&#20010;&#36830;&#25509;&#28857;&#30340;&#36890;&#30693;&#65292;&#22914;&#26041;&#27861;&#35843;&#29992;&#12290;&#36825;&#26159;&#26368;&#24378;&#22823;&#30340;&#19968;&#31181;&#36890;&#30693;&#31867;&#22411;&#12290;&#29615;&#32469;&#36890;&#30693;&#21487;&#20197;&#22312;&#26041;&#27861;&#35843;&#29992;&#21069;&#21518;&#23436;&#25104;&#33258;&#23450;&#20041;&#30340;&#34892;&#20026;&#12290;&#23427;&#20063;&#20250;&#36873;&#25321;&#26159;&#21542;&#32487;&#32493;&#25191;&#34892;&#36830;&#25509;&#28857;&#25110;&#30452;&#25509;&#36820;&#22238;&#23427;&#33258;&#24049;&#30340;&#36820;&#22238;&#20540;&#25110;&#25243;&#20986;&#24322;&#24120;&#26469;&#32467;&#26463;&#25191;&#34892;&#12290;
		  		</p></li></ul></div><p>&#29615;
&#32469;&#36890;&#30693;&#26159;&#26368;&#24120;&#29992;&#30340;&#36890;&#30693;&#31867;&#22411;&#12290;&#21644;AspectJ&#19968;&#26679;&#65292;Spring&#25552;&#20379;&#25152;&#26377;&#31867;&#22411;&#30340;&#36890;&#30693;&#65292;&#25105;&#20204;&#25512;&#33616;&#20320;&#20351;&#29992;&#23613;&#21487;&#33021;&#31616;&#21333;&#30340;&#36890;&#30693;&#31867;&#22411;&#26469;&#23454;&#29616;&#38656;&#35201;&#30340;&#21151;&#33021;&#12290;&#20363;&#22914;&#65292;&#22914;&#26524;&#20320;
&#21482;&#26159;&#38656;&#35201;&#19968;&#20010;&#26041;&#27861;&#30340;&#36820;&#22238;&#20540;&#26469;&#26356;&#26032;&#32531;&#23384;&#65292;&#26368;&#22909;&#20351;&#29992;&#21518;&#32622;&#36890;&#30693;&#32780;&#19981;&#26159;&#29615;&#32469;&#36890;&#30693;&#65292;&#23613;&#31649;&#29615;&#32469;&#36890;&#30693;&#20063;&#33021;&#23436;&#25104;&#21516;&#26679;&#30340;&#20107;&#24773;&#12290;&#29992;&#26368;&#21512;&#36866;&#30340;&#36890;&#30693;&#31867;&#22411;&#21487;&#20197;&#20351;&#24471;&#32534;&#31243;&#27169;&#22411;&#21464;&#24471;&#31616;&#21333;&#65292;
&#24182;&#19988;&#33021;&#22815;&#36991;&#20813;&#24456;&#22810;&#28508;&#22312;&#30340;&#38169;&#35823;&#12290;&#27604;&#22914;&#65292;&#20320;&#19981;&#38656;&#35201;&#22312;<tt class="interfacename">JoinPoint</tt>&#19978;&#35843;&#29992;&#29992;&#20110;&#29615;&#32469;&#36890;&#30693;&#30340;<tt class="literal">proceed()</tt>&#26041;&#27861;&#65292;&#23601;&#19981;&#20250;&#26377;&#35843;&#29992;&#30340;&#38382;&#39064;&#12290;
			</p><p>&#22312;Spring 2.0&#20013;&#65292;&#25152;&#26377;&#30340;&#36890;&#30693;&#21442;&#25968;&#37117;&#26159;&#38745;&#24577;&#31867;&#22411;&#65292;&#22240;&#27492;&#20320;&#21487;&#20197;&#20351;&#29992;&#21512;&#36866;&#30340;&#31867;&#22411;&#65288;&#20363;&#22914;&#19968;&#20010;&#26041;&#27861;&#25191;&#34892;&#21518;&#30340;&#36820;&#22238;&#20540;&#31867;&#22411;&#65289;&#20316;&#20026;&#36890;&#30693;&#30340;&#21442;&#25968;&#32780;&#19981;&#26159;&#20351;&#29992;<tt class="classname">Object</tt>&#25968;&#32452;&#12290;
			</p><p> &#36890;&#36807;&#20999;&#20837;&#28857;&#21305;&#37197;&#36830;&#25509;&#28857;&#30340;&#27010;&#24565;&#26159;AOP&#30340;&#20851;&#38190;&#65292;&#36825;&#20351;&#24471;AOP&#19981;&#21516;&#20110;&#20854;&#23427;&#20165;&#20165;&#25552;&#20379;&#25318;&#25130;&#21151;&#33021;&#30340;&#26087;&#25216;&#26415;&#12290; &#20999;&#20837;&#28857;&#20351;&#24471;&#36890;&#30693;&#21487;&#20197;&#29420;&#31435;&#23545;&#24212;&#21040;&#38754;&#21521;&#23545;&#35937;&#30340;&#23618;&#27425;&#32467;&#26500;&#20013;&#12290;&#20363;&#22914;&#65292;&#19968;&#20010;&#25552;&#20379;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;			&#30340;&#29615;&#32469;&#36890;&#30693;&#21487;&#20197;&#34987;&#24212;&#29992;&#21040;&#19968;&#32452;&#27178;&#36328;&#22810;&#20010;&#23545;&#35937;&#30340;&#26041;&#27861;&#19978;&#65288;&#20363;&#22914;&#26381;&#21153;&#23618;&#30340;&#25152;&#26377;&#19994;&#21153;&#25805;&#20316;&#65289;&#12290;
	  </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-introduction-spring-defn"></a>6.1.2.&nbsp;Spring AOP&#30340;&#21151;&#33021;&#21644;&#30446;&#26631;</h3></div></div><div></div></div><p>
			Spring AOP&#20351;&#29992;&#32431;Java&#23454;&#29616;&#12290;&#23427;&#19981;&#38656;&#35201;&#19987;&#38376;&#30340;&#32534;&#35793;&#36807;&#31243;&#12290;Spring AOP&#19981;&#38656;&#35201;&#25511;&#21046;&#31867;&#35013;&#36733;&#22120;&#23618;&#27425;&#65292;&#22240;&#27492;&#23427;&#36866;&#29992;&#20110;J2EE web&#23481;&#22120;&#25110;&#24212;&#29992;&#26381;&#21153;&#22120;&#12290;
	  	</p><p>
Spring&#30446;&#21069;&#20165;&#25903;&#25345;&#20351;&#29992;&#26041;&#27861;&#35843;&#29992;&#20316;&#20026;&#36830;&#25509;&#28857;&#65288;join point&#65289;&#65288;&#22312;Spring
bean&#19978;&#36890;&#30693;&#26041;&#27861;&#30340;&#25191;&#34892;&#65289;&#12290;&#34429;&#28982;&#21487;&#20197;&#22312;&#19981;&#24433;&#21709;&#21040;Spring
AOP&#26680;&#24515;API&#30340;&#24773;&#20917;&#19979;&#21152;&#20837;&#23545;&#25104;&#21592;&#21464;&#37327;&#25318;&#25130;&#22120;&#25903;&#25345;&#65292;&#20294;Spring&#24182;&#27809;&#26377;&#23454;&#29616;&#25104;&#21592;&#21464;&#37327;&#25318;&#25130;&#22120;&#12290;&#22914;&#26524;&#20320;&#38656;&#35201;&#25226;&#23545;&#25104;&#21592;&#21464;&#37327;&#30340;&#35775;&#38382;&#21644;&#26356;&#26032;&#20063;&#20316;&#20026;&#36890;&#30693;&#30340;&#36830;&#25509;&#28857;&#65292;
&#21487;&#20197;&#32771;&#34385;&#20854;&#23427;&#30340;&#35821;&#35328;&#65292;&#22914;AspectJ&#12290; </p><p>
			Spring&#23454;&#29616;AOP&#30340;&#26041;&#27861;&#36319;&#20854;&#20182;&#30340;&#26694;&#26550;&#19981;&#21516;&#12290;Spring&#24182;&#19981;&#26159;&#35201;&#25552;&#20379;&#26368;&#23436;&#25972;&#30340;AOP&#23454;&#29616;&#65288;&#23613;&#31649;Spring AOP&#26377;&#36825;&#20010;&#33021;&#21147;&#65289;&#65292;&#30456;&#21453;&#30340;&#65292;&#23427;&#20854;&#23454;&#20391;&#37325;&#20110;&#25552;&#20379;&#19968;&#31181;AOP&#23454;&#29616;&#21644;Spring IoC&#23481;&#22120;&#20043;&#38388;&#30340;&#25972;&#21512;&#65292;&#29992;&#20110;&#24110;&#21161;&#35299;&#20915;&#22312;&#20225;&#19994;&#32423;&#24320;&#21457;&#20013;&#30340;&#24120;&#35265;&#38382;&#39064;&#12290;
			</p><p>&#22240;
&#27492;&#65292;Spring&#30340;AOP&#21151;&#33021;&#36890;&#24120;&#37117;&#21644;Spring
IoC&#23481;&#22120;&#19968;&#36215;&#20351;&#29992;&#12290;&#20999;&#38754;&#20351;&#29992;&#26222;&#36890;&#30340;bean&#23450;&#20041;&#35821;&#27861;&#26469;&#37197;&#32622;&#65288;&#23613;&#31649;Spring&#25552;&#20379;&#20102;&#24378;&#22823;&#30340;"&#33258;&#21160;&#20195;&#29702;&#65288;autoproxying&#65289;"&#21151;&#33021;&#65289;&#65306;&#19982;&#20854;&#20182;
AOP&#23454;&#29616;&#30456;&#27604;&#36825;&#26159;&#19968;&#20010;&#26174;&#33879;&#30340;&#21306;&#21035;&#12290;&#26377;&#20123;&#20107;&#20351;&#29992;Spring
AOP&#26159;&#26080;&#27861;&#36731;&#26494;&#25110;&#32773;&#39640;&#25928;&#23436;&#25104;&#30340;&#65292;&#27604;&#22914;&#35828;&#36890;&#30693;&#19968;&#20010;&#32454;&#31890;&#24230;&#30340;&#23545;&#35937;&#65288;&#20363;&#22914;&#20856;&#22411;&#30340;&#22495;&#23545;&#35937;&#65289;&#65306;&#36825;&#31181;&#26102;&#20505;&#65292;&#20351;&#29992;AspectJ&#26159;&#26368;&#22909;&#30340;&#36873;&#25321;&#12290;&#19981;&#36807;&#32463;&#39564;&#21578;&#35785;&#25105;&#20204;&#65292;&#23545;&#20110;
&#22823;&#22810;&#25968;&#22312;J2EE&#24212;&#29992;&#20013;&#36866;&#21512;&#29992;AOP&#26469;&#35299;&#20915;&#30340;&#38382;&#39064;&#65292;Spring AOP&#37117;&#25552;&#20379;&#20102;&#19968;&#20010;&#38750;&#24120;&#22909;&#30340;&#35299;&#20915;&#26041;&#26696;&#12290; </p><p>Spring
AOP&#20174;&#26469;&#27809;&#26377;&#25171;&#31639;&#36890;&#36807;&#25552;&#20379;&#19968;&#31181;&#20840;&#38754;&#30340;AOP&#35299;&#20915;&#26041;&#26696;&#26469;&#19982;AspectJ&#31454;&#20105;&#12290;&#25105;&#20204;&#30456;&#20449;&#26080;&#35770;&#26159;&#22522;&#20110;&#20195;&#29702;&#65288;proxy-based&#65289;&#30340;&#26694;&#26550;&#22914;Spring
AOP&#25110;&#32773;&#26159;&#25104;&#29087;&#30340;&#26694;&#26550;&#22914;AspectJ&#37117;&#26159;&#24456;&#26377;&#20215;&#20540;&#30340;&#65292;&#20182;&#20204;&#20043;&#38388;&#24212;&#35813;&#26159;&#20114;&#34917;&#32780;&#19981;&#26159;&#31454;&#20105;&#30340;&#20851;&#31995;&#12290;Spring 2.0&#21487;&#20197;&#26080;&#32541;&#30340;&#25972;&#21512;Spring
AOP&#65292;IoC&#21644;AspectJ&#65292;&#20351;&#24471;&#25152;&#26377;&#30340;AOP&#24212;&#29992;&#23436;&#20840;&#34701;&#20837;&#22522;&#20110;Spring&#30340;&#24212;&#29992;&#20307;&#31995;&#12290;&#36825;&#26679;&#30340;&#38598;&#25104;&#19981;&#20250;&#24433;&#21709;Spring AOP
API&#25110;&#32773;AOP Alliance API&#65307;Spring AOP&#20445;&#25345;&#20102;&#21521;&#19979;&#20860;&#23481;&#24615;&#12290;<a href="#aop-api" title="Chapter&nbsp;7.&nbsp;Spring AOP APIs">&#19979;&#19968;&#31456;</a>&#20250;&#35814;&#32454;&#35752;&#35770;Spring AOP&#30340;API&#12290;
			</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>Spring Framework&#19968;&#20010;&#37325;&#35201;&#30340;&#21407;&#21017;&#23601;&#26159;<span class="emphasis"><em>&#26080;&#20405;&#20837;&#24615;&#65288;non-invasiveness&#65289;</em></span>;
&#36825;&#20010;&#24605;&#24819;&#25351;&#20320;&#19981;&#24212;&#24403;&#34987;&#36843;&#24341;&#20837;&#26694;&#26550;&#29305;&#23450;&#30340;&#31867;&#21644;&#25509;&#21475;&#21040;&#20320;&#30340;&#19994;&#21153;/&#39046;&#22495;&#27169;&#22411;&#20013;&#12290;&#28982;&#32780;&#65292;Spring
Framework&#22312;&#26576;&#20123;&#22320;&#26041;&#32473;&#20320;&#19968;&#20010;&#26159;&#21542;&#24341;&#20837;Spring&#26694;&#26550;&#29305;&#23450;&#20381;&#36182;&#21040;&#20320;&#30340;&#20195;&#30721;&#30340;&#36873;&#39033;&#65306;
&#32473;&#20320;&#36825;&#20010;&#36873;&#39033;&#30340;&#29702;&#30001;&#26159;&#22240;&#20026;&#22312;&#29305;&#23450;&#30340;&#22330;&#26223;&#20013;&#23427;&#21487;&#33021;&#20165;&#20165;&#26159;&#23481;&#26131;&#38405;&#35835;&#25110;&#29992;&#36825;&#31181;&#26041;&#27861;&#32534;&#20889;&#29305;&#23450;&#30340;&#21151;&#33021;&#22359;&#12290;Spring
Framework&#65288;&#20960;&#20046;&#65289;&#19968;&#30452;&#20250;&#20026;&#20320;&#25552;&#20379;&#36825;&#31181;&#36873;&#25321;&#65306;&#20174;&#32780;&#20351;&#20320;&#33021;&#20570;&#20986;&#19968;&#20010;&#26126;&#26234;&#30340;&#20915;&#23450;&#65292;&#20351;&#23427;&#26368;&#36866;&#24212;&#20320;&#30340;&#29305;&#23450;&#29992;&#20363;&#25110;&#22330;&#26223;&#12290;</p><p>&#20320;&#21487;&#20197;&#36873;&#25321;
AspectJ&#25110;&#32773;Spring AOP&#65292;&#20197;&#21450;&#36873;&#25321;&#26159;&#20351;&#29992;@AspectJ&#27880;&#35299;&#39118;&#26684;&#36824;&#26159;Spring
XML&#37197;&#32622;&#39118;&#26684;&#12290;&#20107;&#23454;&#19978;&#26412;&#31456;&#36873;&#25321;&#20808;&#20171;&#32461;@AspectJ&#39118;&#26684;&#30340;&#26041;&#27861;&#19981;&#24212;&#24403;&#34987;&#30475;&#20316;&#26159;&#36825;&#26679;&#19968;&#20010;&#26263;&#31034;&#65306;Spring&#23567;&#32452;&#21916;&#27426;@AspectJ&#27880;&#35299;&#39118;&#26684;&#26356;&#32988;&#20110;
Spring XML&#37197;&#32622;&#12290;</p><p>&#22312;<a href="#aop-choosing" title="6.4.&nbsp;AOP&#22768;&#26126;&#39118;&#26684;&#30340;&#36873;&#25321;">Section&nbsp;6.4, &#8220;AOP&#22768;&#26126;&#39118;&#26684;&#30340;&#36873;&#25321;&#8221;</a>&#19968;&#31456;&#26377;&#23545;&#20351;&#29992;&#21508;&#20010;&#39118;&#26684;&#29702;&#30001;&#30340;&#19968;&#20010;&#26356;&#20840;&#38754;&#30340;&#35752;&#35770;&#12290;</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-introduction-proxies"></a>6.1.3.&nbsp;AOP&#20195;&#29702;</h3></div></div><div></div></div><p>Spring&#32570;&#30465;&#20351;&#29992;J2SE <span class="emphasis"><em>&#21160;&#24577;&#20195;&#29702;&#65288;dynamic proxies&#65289;</em></span>&#26469;&#20316;&#20026;AOP&#30340;&#20195;&#29702;&#12290;
      &#36825;&#26679;&#20219;&#20309;&#25509;&#21475;&#65288;&#25110;&#32773;&#25509;&#21475;&#38598;&#65289;&#37117;&#21487;&#20197;&#34987;&#20195;&#29702;&#12290;</p><p>
			Spring&#20063;&#21487;&#20197;&#20351;&#29992;CGLIB&#20195;&#29702;. &#23545;&#20110;&#38656;&#35201;&#20195;&#29702;&#31867;&#32780;&#19981;&#26159;&#20195;&#29702;&#25509;&#21475;&#30340;&#26102;&#20505;CGLIB&#20195;&#29702;&#26159;&#24456;&#26377;&#24517;&#35201;&#30340;&#12290;&#22914;&#26524;&#19968;&#20010;&#19994;&#21153;&#23545;&#35937;&#24182;&#27809;&#26377;&#23454;&#29616;&#19968;&#20010;&#25509;&#21475;&#65292;&#40664;&#35748;&#23601;&#20250;&#20351;&#29992;CGLIB&#12290;&#20316;&#20026;&#38754;&#21521;&#25509;&#21475;&#32534;&#31243;&#30340;&#26368;&#20339;&#23454;&#36341;&#65292;&#19994;&#21153;&#23545;&#35937;&#36890;&#24120;&#37117;&#20250;&#23454;&#29616;&#19968;&#20010;&#25110;&#22810;&#20010;&#25509;&#21475;&#12290;&#20294;&#20063;&#26377;&#21487;&#33021;&#20250;<a href="#aop-autoproxy-force-CGLIB">&#24378;&#21046;&#20351;&#29992;CGLIB</a>&#65292;&#22312;&#36825;&#31181;&#24773;&#20917;&#65288;&#24076;&#26395;&#19981;&#24120;&#26377;&#65289;&#19979;&#65292;&#20320;&#21487;&#33021;&#38656;&#35201;&#36890;&#30693;&#19968;&#20010;&#27809;&#26377;&#22312;&#25509;&#21475;&#20013;&#22768;&#26126;&#30340;&#26041;&#27861;&#65292;&#25110;&#32773;&#38656;&#35201;&#20256;&#20837;&#19968;&#20010;&#20195;&#29702;&#23545;&#35937;&#32473;&#26041;&#27861;&#20316;&#20026;&#20855;&#20307;&#31867;&#22411;</p><p>&#20026;&#20102;&#26126;&#30333;Spring AOP&#26159;<span class="emphasis"><em>&#22522;&#20110;&#20195;&#29702;&#65288;proxy-based&#65289;</em></span>&#30340;&#20107;&#23454;&#65292;&#35831;&#21442;&#38405;<a href="#aop-understanding-aop-proxies" title="6.6.1.&nbsp;&#29702;&#35299;AOP&#20195;&#29702;">Section&nbsp;6.6.1, &#8220;&#29702;&#35299;AOP&#20195;&#29702;&#8221;</a>&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="aop-ataspectj"></a>6.2.&nbsp;@AspectJ&#25903;&#25345;</h2></div></div><div></div></div><p>@AspectJ&#20351;&#29992;&#20102;Java 5&#30340;&#27880;&#35299;&#65292;&#21487;&#20197;&#23558;&#20999;&#38754;&#22768;&#26126;&#20026;&#26222;&#36890;&#30340;Java&#31867;&#12290;@AspectJ&#26679;&#24335;&#22312;AspectJ 5&#21457;&#24067;&#30340;<a href="http://www.eclipse.org/aspectj" target="_top">AspectJ project</a>&#37096;&#20998;&#20013;&#34987;&#24341;&#20837;&#12290;Spring 2.0&#20351;&#29992;&#20102;&#21644;AspectJ 5&#19968;&#26679;&#30340;&#27880;&#35299;&#65292;&#24182;&#20351;&#29992;AspectJ&#26469;&#20570;&#20999;&#20837;&#28857;&#35299;&#26512;&#21644;&#21305;&#37197;&#12290;&#20294;&#26159;&#65292;AOP&#22312;&#36816;&#34892;&#26102;&#20173;&#26087;&#26159;&#32431;&#30340;Spring AOP&#65292;&#24182;&#19981;&#20381;&#36182;&#20110;AspectJ&#30340;&#32534;&#35793;&#22120;&#25110;&#32773;&#32455;&#20837;&#22120;&#65288;weaver&#65289;&#12290;
		</p><i><span class="remark">&#20351;&#29992;AspectJ&#30340;&#32534;&#35793;&#22120;&#25110;&#32773;&#32455;&#20837;&#22120;&#30340;&#35805;&#23601;&#21487;&#20197;&#20351;&#29992;&#23436;&#25972;&#30340;AspectJ&#35821;&#35328;&#65292;&#25105;&#20204;&#23558;&#22312;<a href="#aop-using-aspectj" title="6.8.&nbsp;&#22312;Spring&#24212;&#29992;&#20013;&#20351;&#29992;AspectJ">Section&nbsp;6.8, &#8220;&#22312;Spring&#24212;&#29992;&#20013;&#20351;&#29992;AspectJ&#8221;</a>&#20013;&#35752;&#35770;&#36825;&#20010;&#38382;&#39064;&#12290;</span></i><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-aspectj-support"></a>6.2.1.&nbsp;&#21551;&#29992;@AspectJ&#25903;&#25345;</h3></div></div><div></div></div><p>&#20026;&#20102;&#22312;Spring&#37197;&#32622;&#20013;&#20351;&#29992;@AspectJ&#20999;&#38754;&#65292;&#20320;&#39318;&#20808;&#24517;&#39035;&#21551;&#29992;Spring&#23545;@AspectJ&#20999;&#38754;&#37197;&#32622;&#30340;&#25903;&#25345;&#65292;&#24182;&#30830;&#20445;<span class="emphasis"><em>&#33258;&#21160;&#20195;&#29702;&#65288;autoproxying&#65289;</em></span>&#30340;bean&#26159;&#21542;&#33021;&#34987;&#36825;&#20123;&#20999;&#38754;&#36890;&#30693;&#12290;&#33258;&#21160;&#20195;&#29702;&#26159;&#25351;Spring&#20250;&#21028;&#26029;&#19968;&#20010;bean&#26159;&#21542;&#20351;&#29992;&#20102;&#19968;&#20010;&#25110;&#22810;&#20010;&#20999;&#38754;&#36890;&#30693;&#65292;&#24182;&#25454;&#27492;&#33258;&#21160;&#29983;&#25104;&#30456;&#24212;&#30340;&#20195;&#29702;&#20197;&#25318;&#25130;&#20854;&#26041;&#27861;&#35843;&#29992;&#65292;&#24182;&#19988;&#30830;&#20445;&#36890;&#30693;&#22312;&#38656;&#35201;&#26102;&#25191;&#34892;&#12290;
			</p><p>&#36890;&#36807;&#22312;&#20320;&#30340;Spring&#30340;&#37197;&#32622;&#20013;&#24341;&#20837;&#19979;&#21015;&#20803;&#32032;&#26469;&#21551;&#29992;Spring&#23545;@AspectJ&#30340;&#25903;&#25345;&#65306;</p><pre class="programlisting">&lt;aop:aspectj-autoproxy/&gt;</pre><p>&#25105;&#20204;&#20551;&#23450;&#20320;&#27491;&#22312;&#20351;&#29992;<a href="#xsd-config" title="Appendix&nbsp;A.&nbsp;XML Schema-based configuration">Appendix&nbsp;A, <i>XML Schema-based configuration</i></a>&#25152;&#25551;&#36848;&#30340;schema&#25903;&#25345;&#12290;&#20851;&#20110;&#22914;&#20309;&#22312;aop&#30340;&#21629;&#21517;&#31354;&#38388;&#20013;&#24341;&#20837;&#36825;&#20123;&#26631;&#31614;&#65292;&#35831;&#21442;&#35265;<a href="#xsd-config-body-schemas-aop" title="A.2.7.&nbsp;The aop schema">Section&nbsp;A.2.7, &#8220;The aop schema&#8221;</a>
			</p><p>&#22914;&#26524;&#20320;&#27491;&#22312;&#20351;&#29992;DTD&#65292;&#20320;&#20173;&#28982;&#21487;&#20197;&#36890;&#36807;&#22312;&#20320;&#30340;application context&#20013;&#28155;&#21152;&#22914;&#19979;&#23450;&#20041;&#26469;&#21551;&#29992;@AspectJ&#25903;&#25345;&#65306;</p><pre class="programlisting">&lt;bean class="org.springframework.aop.aspectj.annotation.AnnotationAwareAspectJAutoProxyCreator" /&gt;</pre><p>&#20320;&#38656;&#35201;&#22312;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#30340;classpath&#20013;&#24341;&#20837;&#20004;&#20010;AspectJ&#24211;&#65306;<tt class="filename">aspectjweaver.jar</tt>&#21644;<tt class="filename">aspectjrt.jar</tt>&#12290;&#36825;&#20123;&#24211;&#21487;&#20197;&#22312;AspectJ&#30340;&#23433;&#35013;&#21253;&#65288;1.5.1&#25110;&#32773;&#20043;&#21518;&#30340;&#29256;&#26412;&#65289;&#30340;<tt class="filename">'lib'</tt>&#30446;&#24405;&#37324;&#25214;&#21040;&#65292;&#25110;&#32773;&#20063;&#21487;&#20197;&#22312;Spring-with-dependencies&#21457;&#24067;&#21253;&#30340;<tt class="filename">'lib/aspectj'</tt>&#30446;&#24405;&#19979;&#25214;&#21040;&#12290;
			</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-at-aspectj"></a>6.2.2.&nbsp;&#22768;&#26126;&#19968;&#20010;&#20999;&#38754;</h3></div></div><div></div></div><p>&#21551;&#29992;@AspectJ&#25903;&#25345;&#21518;&#65292;&#22312;application context&#20013;&#23450;&#20041;&#30340;&#20219;&#24847;&#24102;&#26377;&#19968;&#20010;@Aspect&#20999;&#38754;&#65288;&#25317;&#26377;<tt class="interfacename">@Aspect</tt>&#27880;&#35299;&#65289;&#30340;bean&#37117;&#23558;&#34987;Spring&#33258;&#21160;&#35782;&#21035;&#24182;&#29992;&#20110;&#37197;&#32622;Spring AOP&#12290;&#20197;&#19979;&#20363;&#23376;&#23637;&#31034;&#20102;&#20026;&#23436;&#25104;&#19968;&#20010;&#19981;&#26159;&#38750;&#24120;&#26377;&#29992;&#30340;&#20999;&#38754;&#25152;&#38656;&#35201;&#30340;&#26368;&#23567;&#23450;&#20041;&#65306;
			</p><p>application context&#20013;&#19968;&#20010;&#24120;&#35265;&#30340;bean&#23450;&#20041;&#65292;&#23427;&#25351;&#21521;&#19968;&#20010;&#20351;&#29992;&#20102;<tt class="interfacename">@Aspect</tt>&#27880;&#35299;&#30340;bean&#31867;&#65306;</p><pre class="programlisting">&lt;bean id="myAspect" class="org.xyz.NotVeryUsefulAspect"&gt;
         <i class="lineannotation"><span class="lineannotation">&lt;!-- configure properties of aspect here as normal --&gt;</span></i>
      &lt;/bean&gt;
      </pre><p>&#20197;&#21450;<tt class="classname">NotVeryUsefulAspect</tt>&#31867;&#30340;&#23450;&#20041;&#65292;&#20351;&#29992;&#20102;
      <tt class="interfacename">org.aspectj.lang.annotation.Aspect</tt>&#27880;&#35299;&#12290;</p><pre class="programlisting">package org.xyz;
import org.aspectj.lang.annotation.Aspect;

@Aspect
public class NotVeryUsefulAspect {

}</pre><p>&#20999;&#38754;&#65288;&#29992;<tt class="interfacename">@Aspect</tt>&#27880;&#35299;&#30340;&#31867;&#65289;&#21644;&#20854;&#20182;&#31867;&#19968;&#26679;&#26377;&#26041;&#27861;&#21644;&#23383;&#27573;&#23450;&#20041;&#12290;&#20182;&#20204;&#20063;&#21487;&#33021;&#21253;&#25324;&#20999;&#20837;&#28857;&#65292;&#36890;&#30693;&#21644;&#24341;&#20837;&#65288;inter-type&#65289;&#22768;&#26126;&#12290;
			</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note: &#36890;&#30693;&#20999;&#38754;" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">&#36890;&#30693;&#20999;&#38754;</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#22312;Spring AOP&#20013;&#65292;&#25317;&#26377;&#20999;&#38754;&#30340;&#31867;&#26412;&#36523;<span class="emphasis"><em>&#19981;</em></span>&#21487;&#33021;&#26159;&#20854;&#23427;&#20999;&#38754;&#20013;&#36890;&#30693;&#30340;&#30446;&#26631;&#12290;&#19968;&#20010;&#31867;&#19978;&#38754;&#30340;<span class="emphasis"><em>@Aspect</em></span>&#27880;&#35299;&#26631;&#35782;&#23427;&#20026;&#19968;&#20010;&#20999;&#38754;&#65292;&#24182;&#19988;&#20174;&#33258;&#21160;&#20195;&#29702;&#20013;&#25490;&#38500;&#23427;&#12290;</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-pointcuts"></a>6.2.3.&nbsp;&#22768;&#26126;&#19968;&#20010;&#20999;&#20837;&#28857;&#65288;pointcut&#65289;</h3></div></div><div></div></div><p>&#22312;&#21069;&#38754;&#25105;&#20204;&#25552;&#21040;&#65292;&#20999;&#20837;&#28857;&#20915;&#23450;&#20102;&#36830;&#25509;&#28857;&#20851;&#27880;&#30340;&#20869;&#23481;&#65292;&#20351;&#24471;&#25105;&#20204;&#21487;&#20197;&#25511;&#21046;&#36890;&#30693;&#20160;&#20040;&#26102;&#20505;&#25191;&#34892;&#12290;<span class="emphasis"><em>Spring AOP&#21482;&#25903;&#25345;Spring bean&#30340;&#26041;&#27861;&#25191;&#34892;&#36830;&#25509;&#28857;</em></span>&#12290;
&#25152;&#20197;&#20320;&#21487;&#20197;&#25226;&#20999;&#20837;&#28857;&#30475;&#20570;&#26159;Spring
bean&#19978;&#26041;&#27861;&#25191;&#34892;&#30340;&#21305;&#37197;&#12290;&#19968;&#20010;&#20999;&#20837;&#28857;&#22768;&#26126;&#26377;&#20004;&#20010;&#37096;&#20998;&#65306;&#19968;&#20010;&#21253;&#21547;&#21517;&#23383;&#21644;&#20219;&#24847;&#21442;&#25968;&#30340;&#31614;&#21517;&#65292;&#36824;&#26377;&#19968;&#20010;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#65292;&#35813;&#34920;&#36798;&#24335;&#20915;&#23450;&#20102;&#25105;&#20204;&#20851;&#27880;&#37027;&#20010;&#26041;&#27861;&#30340;&#25191;&#34892;&#12290;&#22312;
@AspectJ&#27880;&#35299;&#39118;&#26684;&#30340;AOP&#20013;&#65292;&#19968;&#20010;&#20999;&#20837;&#28857;&#31614;&#21517;&#36890;&#36807;&#19968;&#20010;&#26222;&#36890;&#30340;&#26041;&#27861;&#23450;&#20041;&#26469;&#25552;&#20379;&#65292;&#24182;&#19988;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#20351;&#29992;<tt class="interfacename">@Pointcut</tt>&#27880;&#35299;&#26469;&#34920;&#31034;&#65288;&#20316;&#20026;&#20999;&#20837;&#28857;&#31614;&#21517;&#30340;&#26041;&#27861;&#24517;&#39035;&#36820;&#22238;<tt class="literal">void</tt> &#31867;&#22411;&#65289;&#12290;
			</p><p>&#29992;&#19968;&#20010;&#20363;&#23376;&#33021;&#24110;&#25105;&#20204;&#28165;&#26970;&#30340;&#21306;&#20998;&#20999;&#20837;&#28857;&#31614;&#21517;&#21644;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#20043;&#38388;&#30340;&#24046;&#21035;&#65292;&#19979;&#38754;&#30340;&#20363;&#23376;&#23450;&#20041;&#20102;&#19968;&#20010;&#20999;&#20837;&#28857;<tt class="literal">'anyOldTransfer'</tt>&#65292;&#36825;&#20010;&#20999;&#20837;&#28857;&#23558;&#21305;&#37197;&#20219;&#20309;&#21517;&#20026; "transfer" &#30340;&#26041;&#27861;&#30340;&#25191;&#34892;&#65306;</p><pre class="programlisting">@Pointcut&#65288;"execution&#65288;* transfer&#65288;..&#65289;&#65289;"&#65289;<i class="lineannotation"><span class="lineannotation">// the pointcut expression</span></i>
private void anyOldTransfer&#65288;&#65289; {}<i class="lineannotation"><span class="lineannotation">// the pointcut signature</span></i></pre><p>&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#65292;&#20063;&#23601;&#26159;&#32452;&#25104;<tt class="interfacename">@Pointcut</tt>&#27880;&#35299;&#30340;&#20540;&#65292;&#26159;&#27491;&#35268;&#30340;AspectJ 5&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#12290;&#22914;&#26524;&#20320;&#24819;&#35201;&#26356;&#22810;&#20102;&#35299;AspectJ&#30340;&#20999;&#20837;&#28857;&#35821;&#35328;&#65292;&#35831;&#21442;&#35265;<a href="http://www.eclipse.org/aspectj/doc/released/progguide/index.html" target="_top">AspectJ&#32534;&#31243;&#25351;&#21335;</a>&#65288;&#22914;&#26524;&#35201;&#20102;&#35299;&#22522;&#20110;Java 5&#30340;&#25193;&#23637;&#35831;&#21442;&#38405;<a href="http://www.eclipse.org/aspectj/doc/released/adk15notebook/index.html" target="_top">AspectJ 5 &#24320;&#21457;&#25163;&#20876;</a>&#65289;&#25110;&#32773;&#20854;&#20182;&#20154;&#20889;&#30340;&#20851;&#20110;AspectJ&#30340;&#20070;&#65292;&#20363;&#22914;Colyer et. al.&#33879;&#30340;&#8220;<span class="quote">Eclipse AspectJ</span>&#8221;&#25110;&#32773;Ramnivas Laddad&#33879;&#30340;&#8220;<span class="quote">AspectJ in Action</span>&#8221;&#12290;
			</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-pointcuts-designators"></a>6.2.3.1.&nbsp;&#20999;&#20837;&#28857;&#25351;&#31034;&#31526;&#65288;PCD&#65289;&#30340;&#25903;&#25345;</h4></div></div><div></div></div><p>Spring AOP&#25903;&#25345;&#22312;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#20013;&#20351;&#29992;&#22914;&#19979;&#30340;AspectJ&#20999;&#20837;&#28857;&#25351;&#31034;&#31526;&#65306;</p><div class="sidebar"><p class="title"><b>&#20854;&#20182;&#30340;&#20999;&#20837;&#28857;&#31867;&#22411;</b></p><p>&#23436;&#25972;&#30340;AspectJ&#20999;&#20837;&#28857;&#35821;&#35328;&#25903;&#25345;&#39069;&#22806;&#30340;&#20999;&#20837;&#28857;&#25351;&#31034;&#31526;&#65292;&#20294;&#26159;Spring&#24182;&#19981;&#25903;&#25345;&#12290;&#23427;&#20204;&#20998;&#21035;&#26159;<tt class="literal">call,
get, set, preinitialization, staticinitialization, initialization,
handler, adviceexecution, withincode, cflow,cflowbelow, if, @this</tt>&#21644;<tt class="literal">@withincode</tt>&#12290;&#22312;Spring AOP&#20013;&#20351;&#29992;&#36825;&#20123;&#25351;&#31034;&#31526;&#23558;&#20250;&#23548;&#33268;&#25243;&#20986;<tt class="classname">IllegalArgumentException</tt>&#24322;&#24120;&#12290;
					</p><p>Spring AOP&#25903;&#25345;&#30340;&#20999;&#20837;&#28857;&#25351;&#31034;&#31526;&#21487;&#33021;&#20250;&#22312;&#23558;&#26469;&#30340;&#29256;&#26412;&#20013;&#24471;&#21040;&#25193;&#23637;&#65292;&#20174;&#32780;&#25903;&#25345;&#26356;&#22810;&#30340;AspectJ&#20999;&#20837;&#28857;&#25351;&#31034;&#31526;&#12290;
					</p></div><div class="itemizedlist"><ul type="disc"><li><p>
							<span class="emphasis"><em>execution</em></span> - &#21305;&#37197;&#26041;&#27861;&#25191;&#34892;&#30340;&#36830;&#25509;&#28857;&#65292;&#36825;&#26159;&#20320;&#23558;&#20250;&#29992;&#21040;&#30340;Spring&#30340;&#26368;&#20027;&#35201;&#30340;&#20999;&#20837;&#28857;&#25351;&#31034;&#31526;&#12290;
						</p></li><li><p>
							<span class="emphasis"><em>within</em></span> - &#38480;&#23450;&#21305;&#37197;&#29305;&#23450;&#31867;&#22411;&#30340;&#36830;&#25509;&#28857;&#65288;&#22312;&#20351;&#29992;Spring AOP&#30340;&#26102;&#20505;&#65292;&#22312;&#21305;&#37197;&#30340;&#31867;&#22411;&#20013;&#23450;&#20041;&#30340;&#26041;&#27861;&#30340;&#25191;&#34892;&#65289;&#12290; 
						</p></li><li><p>
							<span class="emphasis"><em>this</em></span> - &#38480;&#23450;&#21305;&#37197;&#29305;&#23450;&#30340;&#36830;&#25509;&#28857;&#65288;&#20351;&#29992;Spring AOP&#30340;&#26102;&#20505;&#26041;&#27861;&#30340;&#25191;&#34892;&#65289;&#65292;&#20854;&#20013;bean reference&#65288;Spring AOP &#20195;&#29702;&#65289;&#26159;&#25351;&#23450;&#31867;&#22411;&#30340;&#23454;&#20363;&#12290;
						</p></li><li><p>
							<span class="emphasis"><em>target</em></span> - &#38480;&#23450;&#21305;&#37197;&#29305;&#23450;&#30340;&#36830;&#25509;&#28857;&#65288;&#20351;&#29992;Spring AOP&#30340;&#26102;&#20505;&#26041;&#27861;&#30340;&#25191;&#34892;&#65289;&#65292;&#20854;&#20013;&#30446;&#26631;&#23545;&#35937;&#65288;&#34987;&#20195;&#29702;&#30340;&#24212;&#29992;&#23545;&#35937;&#65289;&#26159;&#25351;&#23450;&#31867;&#22411;&#30340;&#23454;&#20363;&#12290;
						</p></li><li><p>
							<span class="emphasis"><em>args</em></span> - &#38480;&#23450;&#21305;&#37197;&#29305;&#23450;&#30340;&#36830;&#25509;&#28857;&#65288;&#20351;&#29992;Spring AOP&#30340;&#26102;&#20505;&#26041;&#27861;&#30340;&#25191;&#34892;&#65289;&#65292;&#20854;&#20013;&#21442;&#25968;&#26159;&#25351;&#23450;&#31867;&#22411;&#30340;&#23454;&#20363;&#12290;
						</p></li><li><p><span class="emphasis"><em><tt class="interfacename">@target</tt></em></span> -  &#38480;&#23450;&#21305;&#37197;&#29305;&#23450;&#30340;&#36830;&#25509;&#28857;&#65288;&#20351;&#29992;Spring AOP&#30340;&#26102;&#20505;&#26041;&#27861;&#30340;&#25191;&#34892;&#65289;&#65292;&#20854;&#20013;&#27491;&#25191;&#34892;&#23545;&#35937;&#30340;&#31867;&#25345;&#26377;&#25351;&#23450;&#31867;&#22411;&#30340;&#27880;&#35299;&#12290;
		  				</p></li><li><p><span class="emphasis"><em><tt class="interfacename">@args</tt></em></span> - &#38480;&#23450;&#21305;&#37197;&#29305;&#23450;&#30340;&#36830;&#25509;&#28857;&#65288;&#20351;&#29992;Spring AOP&#30340;&#26102;&#20505;&#26041;&#27861;&#30340;&#25191;&#34892;&#65289;&#65292;&#20854;&#20013;&#23454;&#38469;&#20256;&#20837;&#21442;&#25968;&#30340;&#36816;&#34892;&#26102;&#31867;&#22411;&#25345;&#26377;&#25351;&#23450;&#31867;&#22411;&#30340;&#27880;&#35299;&#12290;
						</p></li><li><p><span class="emphasis"><em><tt class="interfacename">@within</tt></em></span> - &#38480;&#23450;&#21305;&#37197;&#29305;&#23450;&#30340;&#36830;&#25509;&#28857;&#65292;&#20854;&#20013;&#36830;&#25509;&#28857;&#25152;&#22312;&#31867;&#22411;&#24050;&#25351;&#23450;&#27880;&#35299;&#65288;&#22312;&#20351;&#29992;Spring AOP&#30340;&#26102;&#20505;&#65292;&#25152;&#25191;&#34892;&#30340;&#26041;&#27861;&#25152;&#22312;&#31867;&#22411;&#24050;&#25351;&#23450;&#27880;&#35299;&#65289;&#12290;
						</p></li><li><p><span class="emphasis"><em>@annotation</em></span> - &#38480;&#23450;&#21305;&#37197;&#29305;&#23450;&#30340;&#36830;&#25509;&#28857;&#65288;&#20351;&#29992;Spring AOP&#30340;&#26102;&#20505;&#26041;&#27861;&#30340;&#25191;&#34892;&#65289;&#65292;&#20854;&#20013;&#36830;&#25509;&#28857;&#30340;&#20027;&#39064;&#25345;&#26377;&#25351;&#23450;&#30340;&#27880;&#35299;&#12290;
						</p></li></ul></div><p>&#21478;&#22806;,Spring AOP&#36824;&#25552;&#20379;&#20102;&#19968;&#20010;&#21517;&#20026;'<tt class="literal">bean</tt>'&#30340;PCD&#12290;&#36825;&#20010;PCD&#20801;&#35768;&#20320;&#38480;&#23450;&#21305;&#37197;&#36830;&#25509;&#28857;&#21040;&#19968;&#20010;&#29305;&#23450;&#21517;&#31216;&#30340;Spring bean&#65292;&#25110;&#32773;&#21040;&#19968;&#20010;&#29305;&#23450;&#21517;&#31216;Spring bean&#30340;&#38598;&#21512;&#65288;&#24403;&#20351;&#29992;&#36890;&#37197;&#31526;&#26102;&#65289;&#12290;'<tt class="literal">bean</tt>' PCD&#20855;&#26377;&#19979;&#21015;&#30340;&#26684;&#24335;:</p><pre class="programlisting">bean&#65288;idOrNameOfBean&#65289;</pre><p>'<tt class="literal">idOrNameOfBean</tt>'&#26631;&#35760;&#21487;&#20197;&#26159;&#20219;&#20309;Spring bean&#30340;&#21517;&#23383;&#65306;&#38480;&#23450;&#36890;&#37197;&#31526;&#20351;&#29992;'<tt class="literal">*</tt>'&#26469;&#25552;&#20379;&#65292;&#22914;&#26524;&#20320;&#20026;Spring bean&#21046;&#23450;&#19968;&#20123;&#21629;&#21517;&#32422;&#23450;&#65292;&#20320;&#21487;&#20197;&#38750;&#24120;&#23481;&#26131;&#22320;&#32534;&#20889;&#19968;&#20010;'<tt class="literal">bean</tt>' PCD&#34920;&#36798;&#24335;&#23558;&#23427;&#20204;&#36873;&#20986;&#26469;&#12290;&#21644;&#20854;&#23427;&#36830;&#25509;&#28857;&#25351;&#31034;&#31526;&#19968;&#26679;&#65292;'<tt class="literal">bean</tt>' PCD&#20063;&#25903;&#25345;&amp;&amp;, ||&#21644; !&#36923;&#36753;&#25805;&#20316;&#31526;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#35831;&#27880;&#24847;'<tt class="literal">bean</tt>' PCD<span class="emphasis"><em>&#20165;&#20165; </em></span>&#34987;Spring AOP&#25903;&#25345;&#32780;<span class="emphasis"><em>&#19981;&#26159;</em></span>AspectJ. &#36825;&#26159;Spring&#23545;AspectJ&#20013;&#23450;&#20041;&#30340;&#26631;&#20934;PCD&#30340;&#19968;&#20010;&#29305;&#23450;&#25193;&#23637;&#12290;</p><p>'<tt class="literal">bean</tt>' PCD&#19981;&#20165;&#20165;&#21487;&#20197;&#22312;&#31867;&#22411;&#32423;&#21035;&#65288;&#34987;&#38480;&#21046;&#22312;&#22522;&#20110;&#32455;&#20837;AOP&#19978;&#65289;&#19978;&#25805;&#20316;&#32780;&#36824;&#21487;&#20197;&#22312;<span class="emphasis"><em>&#23454;&#20363;</em></span>&#32423;&#21035;&#65288;&#22522;&#20110;Spring bean&#30340;&#27010;&#24565;&#65289;&#19978;&#25805;&#20316;&#12290;</p></td></tr></tbody></table></div><i><span class="remark">&#22240;
&#20026;Spring
AOP&#38480;&#21046;&#20102;&#36830;&#25509;&#28857;&#24517;&#39035;&#26159;&#26041;&#27861;&#25191;&#34892;&#32423;&#21035;&#30340;&#65292;&#19978;&#25991;pointcut&#25351;&#31034;&#31526;&#20013;&#30340;&#35752;&#35770;&#20063;&#32473;&#20986;&#20102;&#19968;&#20010;&#23450;&#20041;&#65292;&#36825;&#20010;&#23450;&#20041;&#21644;AspectJ&#30340;&#32534;&#31243;&#25351;&#21335;&#20013;&#30340;&#23450;&#20041;&#30456;&#27604;&#26174;&#24471;&#26356;
&#21152;&#29421;&#31364;&#12290;&#38500;&#27492;&#20043;&#22806;&#65292;AspectJ&#23427;&#26412;&#36523;&#26377;&#22522;&#20110;&#31867;&#22411;&#30340;&#35821;&#20041;&#65292;&#22312;&#25191;&#34892;&#30340;&#36830;&#25509;&#28857;'this'&#21644;'target'&#37117;&#26159;&#25351;&#21516;&#19968;&#20010;&#23545;&#35937;&#65292;&#20063;&#23601;&#26159;&#25191;&#34892;&#26041;&#27861;&#30340;&#23545;&#35937;&#12290;
Spring AOP&#26159;&#19968;&#20010;&#22522;&#20110;&#20195;&#29702;&#30340;&#31995;&#32479;&#65292;&#24182;&#19988;&#20005;&#26684;&#21306;&#20998;&#20195;&#29702;&#23545;&#35937;&#26412;&#36523;&#65288;&#23545;&#24212;&#20110;'this'&#65289;&#21644;&#32972;&#21518;&#30340;&#30446;&#26631;&#23545;&#35937;&#65288;&#23545;&#24212;&#20110;'target'&#65289; </span></i></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-pointcuts-combining"></a>6.2.3.2.&nbsp;&#32452;&#21512;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;</h4></div></div><div></div></div><p>&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#21487;&#20197;&#20351;&#29992;'&amp;', '||' &#21644;  '!'&#26469;&#32452;&#21512;&#12290;&#36824;&#21487;&#20197;&#36890;&#36807;&#21517;&#23383;&#26469;&#25351;&#21521;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#12290;&#20197;&#19979;&#30340;&#20363;&#23376;&#23637;&#31034;&#20102;&#19977;&#31181;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#65306;				<tt class="literal">anyPublicOperation</tt>&#65288;&#22312;&#19968;&#20010;&#26041;&#27861;&#25191;&#34892;&#36830;&#25509;&#28857;&#20195;&#34920;&#20102;&#20219;&#24847;public&#26041;&#27861;&#30340;&#25191;&#34892;&#26102;&#21305;&#37197;&#65289;&#65307;<tt class="literal">inTrading</tt>&#65288;&#22312;&#19968;&#20010;&#20195;&#34920;&#20102;&#22312;&#20132;&#26131;&#27169;&#22359;&#20013;&#30340;&#20219;&#24847;&#30340;&#26041;&#27861;&#25191;&#34892;&#26102;&#21305;&#37197;&#65289;&#21644; <tt class="literal">tradingOperation</tt>&#65288;&#22312;&#19968;&#20010;&#20195;&#34920;&#20102;&#22312;&#20132;&#26131;&#27169;&#22359;&#20013;&#30340;&#20219;&#24847;&#30340;&#20844;&#20849;&#26041;&#27861;&#25191;&#34892;&#26102;&#21305;&#37197;&#65289;&#12290;
				</p><pre class="programlisting">@Pointcut&#65288;"execution&#65288;public * *&#65288;..&#65289;&#65289;"&#65289;
private void anyPublicOperation&#65288;&#65289; {}

@Pointcut&#65288;"within&#65288;com.xyz.someapp.trading..*"&#65289;
private void inTrading&#65288;&#65289; {}

@Pointcut&#65288;"anyPublicOperation&#65288;&#65289; &amp;&amp; inTrading&#65288;&#65289;"&#65289;
private void tradingOperation&#65288;&#65289; {}
        </pre><p>&#22914;
&#19978;&#25152;&#31034;&#65292;&#29992;&#26356;&#23569;&#30340;&#21629;&#21517;&#32452;&#20214;&#26469;&#26500;&#24314;&#26356;&#21152;&#22797;&#26434;&#30340;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#26159;&#19968;&#31181;&#26368;&#20339;&#23454;&#36341;&#12290;&#24403;&#29992;&#21517;&#23383;&#26469;&#25351;&#23450;&#20999;&#20837;&#28857;&#26102;&#20351;&#29992;&#30340;&#26159;&#24120;&#35265;&#30340;Java&#25104;&#21592;&#21487;&#35270;&#24615;&#35775;&#38382;&#35268;&#21017;&#12290;&#65288;&#27604;&#22914;&#35828;&#65292;&#20320;
&#21487;&#20197;&#22312;&#21516;&#19968;&#31867;&#22411;&#20013;&#35775;&#38382;&#31169;&#26377;&#30340;&#20999;&#20837;&#28857;&#65292;&#22312;&#32487;&#25215;&#20851;&#31995;&#20013;&#35775;&#38382;&#21463;&#20445;&#25252;&#30340;&#20999;&#20837;&#28857;&#65292;&#21487;&#20197;&#22312;&#20219;&#24847;&#22320;&#26041;&#35775;&#38382;&#20844;&#20849;&#20999;&#20837;&#28857;&#65289;&#12290;&#25104;&#21592;&#21487;&#35270;&#24615;&#35775;&#38382;&#35268;&#21017;&#19981;&#24433;&#21709;&#21040;&#20999;&#20837;&#28857;&#30340;<span class="emphasis"><em>&#21305;&#37197;</em></span>&#12290;
				</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-common-pointcuts"></a>6.2.3.3.&nbsp;&#20849;&#20139;&#36890;&#29992;&#20999;&#20837;&#28857;&#23450;&#20041;</h4></div></div><div></div></div><p>
				&#24403;&#24320;&#21457;&#20225;&#19994;&#32423;&#24212;&#29992;&#30340;&#26102;&#20505;&#65292;&#20320;&#36890;&#24120;&#20250;&#24819;&#35201;&#20174;&#20960;&#20010;&#20999;&#38754;&#26469;&#24341;&#29992;&#27169;&#22359;&#21270;&#30340;&#24212;&#29992;&#21644;&#29305;&#23450;&#25805;&#20316;&#30340;&#38598;&#21512;&#12290;&#25105;&#20204;&#25512;&#33616;&#23450;&#20041;&#19968;&#20010;&#8220;SystemArchitecture&#8221;&#20999;&#38754;&#26469;&#25429;&#25417;&#36890;&#29992;&#30340;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#12290;&#19968;&#20010;&#20856;&#22411;&#30340;&#36890;&#29992;&#20999;&#38754;&#30475;&#36215;&#26469;&#21487;&#33021;&#20687;&#19979;&#38754;&#36825;&#26679;&#65306;
				</p><pre class="programlisting">package com.xyz.someapp;

import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Pointcut;

@Aspect
public class SystemArchitecture {

  <i class="lineannotation"><span class="lineannotation">/**
   * A join point is in the web layer if the method is defined
   * in a type in the com.xyz.someapp.web package or any sub-package
   * under that.
   */</span></i>
  @Pointcut&#65288;"within&#65288;com.xyz.someapp.web..*&#65289;"&#65289;
  public void inWebLayer&#65288;&#65289; {}

  <i class="lineannotation"><span class="lineannotation">/**
   * A join point is in the service layer if the method is defined
   * in a type in the <tt class="literal">com.xyz.someapp.service</tt> package or any sub-package
   * under that.
   */</span></i>
  @Pointcut&#65288;"within&#65288;com.xyz.someapp.service..*&#65289;"&#65289;
  public void inServiceLayer&#65288;&#65289; {}

  <i class="lineannotation"><span class="lineannotation">/**
   * A join point is in the data access layer if the method is defined
   * in a type in the <tt class="literal">com.xyz.someapp.dao</tt> package or any sub-package
   * under that.
   */</span></i>
  @Pointcut&#65288;"within&#65288;com.xyz.someapp.dao..*&#65289;"&#65289;
  public void inDataAccessLayer&#65288;&#65289; {}

  <i class="lineannotation"><span class="lineannotation">/**
   * A business service is the execution of any method defined on a service
   * interface. This definition assumes that interfaces are placed in the
   * "service" package, and that implementation types are in sub-packages.
   * 
   * If you group service interfaces by functional area &#65288;for example, 
   * in packages <tt class="literal">com.xyz.someapp.abc.service</tt> and <tt class="literal">com.xyz.def.service</tt>&#65289; then
   * the pointcut expression "<tt class="literal">execution&#65288;* com.xyz.someapp..service.*.*&#65288;..&#65289;&#65289;</tt>"
   * could be used instead.
   *
   * Alternatively, you can write the expression using the '<tt class="literal">bean</tt>'
   * PCD, like so "<tt class="literal">bean&#65288;*Service&#65289;</tt>". &#65288;This assumes that you have
   * named your Spring service beans in a consistent fashion.&#65289;
   */</span></i>
  @Pointcut&#65288;"execution&#65288;* com.xyz.someapp.service.*.*&#65288;..&#65289;&#65289;"&#65289;
  public void businessService&#65288;&#65289; {}
  
  <i class="lineannotation"><span class="lineannotation">/**
   * A data access operation is the execution of any method defined on a 
   * dao interface. This definition assumes that interfaces are placed in the
   * "<tt class="literal">dao</tt>" package, and that implementation types are in sub-packages.
   */</span></i>
  @Pointcut&#65288;"execution&#65288;* com.xyz.someapp.dao.*.*&#65288;..&#65289;&#65289;"&#65289;
  public void dataAccessOperation&#65288;&#65289; {}

}</pre><p>&#31034;&#20363;&#20013;&#30340;&#20999;&#20837;&#28857;&#23450;&#20041;&#20102;&#19968;&#20010;&#20320;&#21487;&#20197;&#22312;&#20219;&#20309;&#38656;&#35201;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#30340;&#22320;&#26041;&#21487;&#24341;&#29992;&#30340;&#20999;&#38754;&#12290;&#27604;&#22914;&#65292;&#20026;&#20102;&#20351;service&#23618;&#20107;&#21153;&#21270;&#65292;&#20320;&#21487;&#20197;&#20889;&#25104;&#65306;
				</p><pre class="programlisting">&lt;aop:config&gt;
  &lt;aop:advisor 
      pointcut="com.xyz.someapp.SystemArchitecture.businessService&#65288;&#65289;"
      advice-ref="tx-advice"/&gt;
&lt;/aop:config&gt;

&lt;tx:advice id="tx-advice"&gt;
  &lt;tx:attributes&gt;
    &lt;tx:method name="*" propagation="REQUIRED"/&gt;
  &lt;/tx:attributes&gt;
&lt;/tx:advice&gt;</pre><p>&#25105;&#20204;&#23558;&#22312;<a href="#aop-schema" title="6.3.&nbsp;&#22522;&#20110;Schema&#30340;AOP&#25903;&#25345;">Section&nbsp;6.3, &#8220;&#22522;&#20110;Schema&#30340;AOP&#25903;&#25345;&#8221;</a>&#20013;&#35752;&#35770; <tt class="literal">&lt;aop:config&gt;</tt>&#21644;<tt class="literal">&lt;aop:advisor&gt;</tt>&#26631;&#31614;&#12290;&#22312;<a href="#transaction" title="Chapter&nbsp;9.&nbsp;&#20107;&#21153;&#31649;&#29702;">Chapter&nbsp;9, <i>&#20107;&#21153;&#31649;&#29702;</i></a>&#20013;&#35752;&#35770;&#20107;&#21153;&#26631;&#31614;&#12290;
				</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-pointcuts-examples"></a>6.2.3.4.&nbsp;&#31034;&#20363;</h4></div></div><div></div></div><p>Spring AOP &#29992;&#25143;&#21487;&#33021;&#20250;&#32463;&#24120;&#20351;&#29992; <tt class="literal">execution</tt>&#20999;&#20837;&#28857;&#25351;&#31034;&#31526;&#12290;&#25191;&#34892;&#34920;&#36798;&#24335;&#30340;&#26684;&#24335;&#22914;&#19979;&#65306;</p><pre class="programlisting">execution&#65288;modifiers-pattern? ret-type-pattern declaring-type-pattern? name-pattern&#65288;param-pattern&#65289;
          throws-pattern?&#65289;</pre><p>&#38500;&#20102;&#36820;&#22238;&#31867;&#22411;&#27169;&#24335;&#65288;&#19978;&#38754;&#20195;&#30721;&#29255;&#26029;&#20013;&#30340;ret-type-pattern&#65289;&#65292;&#21517;&#23383;&#27169;&#24335;&#21644;&#21442;&#25968;&#27169;&#24335;&#20197;&#22806;&#65292;
      	 &#25152;&#26377;&#30340;&#37096;&#20998;&#37117;&#26159;&#21487;&#36873;&#30340;&#12290;&#36820;&#22238;&#31867;&#22411;&#27169;&#24335;&#20915;&#23450;&#20102;&#26041;&#27861;&#30340;&#36820;&#22238;&#31867;&#22411;&#24517;&#39035;&#20381;&#27425;&#21305;&#37197;&#19968;&#20010;&#36830;&#25509;&#28857;&#12290;
      	 &#20320;&#20250;&#20351;&#29992;&#30340;&#26368;&#39057;&#32321;&#30340;&#36820;&#22238;&#31867;&#22411;&#27169;&#24335;&#26159;<tt class="literal">*</tt>&#65292;&#23427;&#20195;&#34920;&#20102;&#21305;&#37197;&#20219;&#24847;&#30340;&#36820;&#22238;&#31867;&#22411;&#12290;
      	 &#19968;&#20010;&#20840;&#38480;&#23450;&#30340;&#31867;&#22411;&#21517;&#23558;&#21482;&#20250;&#21305;&#37197;&#36820;&#22238;&#32473;&#23450;&#31867;&#22411;&#30340;&#26041;&#27861;&#12290;&#21517;&#23383;&#27169;&#24335;&#21305;&#37197;&#30340;&#26159;&#26041;&#27861;&#21517;&#12290;
      	 &#20320;&#21487;&#20197;&#20351;&#29992;<tt class="literal">*</tt>&#36890;&#37197;&#31526;&#20316;&#20026;&#25152;&#26377;&#25110;&#32773;&#37096;&#20998;&#21629;&#21517;&#27169;&#24335;&#12290;
      	 &#21442;&#25968;&#27169;&#24335;&#31245;&#24494;&#26377;&#28857;&#22797;&#26434;&#65306;<tt class="literal">()</tt>&#21305;&#37197;&#20102;&#19968;&#20010;&#19981;&#25509;&#21463;&#20219;&#20309;&#21442;&#25968;&#30340;&#26041;&#27861;&#65292;
      	 &#32780;<tt class="literal">(..)</tt>&#21305;&#37197;&#20102;&#19968;&#20010;&#25509;&#21463;&#20219;&#24847;&#25968;&#37327;&#21442;&#25968;&#30340;&#26041;&#27861;&#65288;&#38646;&#25110;&#32773;&#26356;&#22810;&#65289;&#12290;
      	 &#27169;&#24335;<tt class="literal">(*)</tt>&#21305;&#37197;&#20102;&#19968;&#20010;&#25509;&#21463;&#19968;&#20010;&#20219;&#20309;&#31867;&#22411;&#30340;&#21442;&#25968;&#30340;&#26041;&#27861;&#12290;
      	 &#27169;&#24335;<tt class="literal">(*,String)</tt>&#21305;&#37197;&#20102;&#19968;&#20010;&#25509;&#21463;&#20004;&#20010;&#21442;&#25968;&#30340;&#26041;&#27861;&#65292;&#31532;&#19968;&#20010;&#21487;&#20197;&#26159;&#20219;&#24847;&#31867;&#22411;&#65292;
      	 &#31532;&#20108;&#20010;&#21017;&#24517;&#39035;&#26159;String&#31867;&#22411;&#12290;&#26356;&#22810;&#30340;&#20449;&#24687;&#35831;&#21442;&#38405;AspectJ&#32534;&#31243;&#25351;&#21335;&#20013;<a href="http://www.eclipse.org/aspectj/doc/released/progguide/semantics-pointcuts.html" target="_top">
      	 &#35821;&#35328;&#35821;&#20041;</a>&#30340;&#37096;&#20998;&#12290;
      	 </p><p>&#19979;&#38754;&#32473;&#20986;&#19968;&#20123;&#36890;&#29992;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#30340;&#20363;&#23376;&#12290;</p><div class="itemizedlist"><ul type="disc"><li><p>&#20219;&#24847;&#20844;&#20849;&#26041;&#27861;&#30340;&#25191;&#34892;&#65306;</p><pre class="programlisting">execution&#65288;public * *&#65288;..&#65289;&#65289;</pre></li><li><p>&#20219;&#20309;&#19968;&#20010;&#21517;&#23383;&#20197;&#8220;set&#8221;&#24320;&#22987;&#30340;&#26041;&#27861;&#30340;&#25191;&#34892;&#65306;</p><pre class="programlisting">execution&#65288;* set*&#65288;..&#65289;&#65289;</pre></li><li><p><tt class="interfacename">AccountService</tt>&#25509;&#21475;&#23450;&#20041;&#30340;&#20219;&#24847;&#26041;&#27861;&#30340;&#25191;&#34892;&#65306;</p><pre class="programlisting">execution&#65288;* com.xyz.service.AccountService.*&#65288;..&#65289;&#65289;</pre></li><li><p>&#22312;service&#21253;&#20013;&#23450;&#20041;&#30340;&#20219;&#24847;&#26041;&#27861;&#30340;&#25191;&#34892;&#65306;</p><pre class="programlisting">execution&#65288;* com.xyz.service.*.*&#65288;..&#65289;&#65289;</pre></li><li><p>&#22312;service&#21253;&#25110;&#20854;&#23376;&#21253;&#20013;&#23450;&#20041;&#30340;&#20219;&#24847;&#26041;&#27861;&#30340;&#25191;&#34892;&#65306;</p><pre class="programlisting">execution&#65288;* com.xyz.service..*.*&#65288;..&#65289;&#65289;</pre></li><li><p>&#22312;service&#21253;&#20013;&#30340;&#20219;&#24847;&#36830;&#25509;&#28857;&#65288;&#22312;Spring AOP&#20013;&#21482;&#26159;&#26041;&#27861;&#25191;&#34892;&#65289;&#65306;</p><pre class="programlisting">within&#65288;com.xyz.service.*&#65289;</pre></li><li><p>&#22312;service&#21253;&#25110;&#20854;&#23376;&#21253;&#20013;&#30340;&#20219;&#24847;&#36830;&#25509;&#28857;&#65288;&#22312;Spring AOP&#20013;&#21482;&#26159;&#26041;&#27861;&#25191;&#34892;&#65289;&#65306;</p><pre class="programlisting">within&#65288;com.xyz.service..*&#65289;</pre></li><li><p>&#23454;&#29616;&#20102;<tt class="interfacename">AccountService</tt>&#25509;&#21475;&#30340;&#20195;&#29702;&#23545;&#35937;&#30340;&#20219;&#24847;&#36830;&#25509;&#28857;
            &#65288;&#22312;Spring AOP&#20013;&#21482;&#26159;&#26041;&#27861;&#25191;&#34892;&#65289;&#65306;</p><pre class="programlisting">this&#65288;com.xyz.service.AccountService&#65289;</pre><i><span class="remark"><p>'this'&#22312;&#32465;&#23450;&#34920;&#21333;&#20013;&#26356;&#21152;&#24120;&#29992;&#65306;- 
            &#35831;&#21442;&#35265;&#21518;&#38754;&#30340;&#36890;&#30693;&#19968;&#33410;&#20013;&#20102;&#35299;&#22914;&#20309;&#20351;&#24471;&#20195;&#29702;&#23545;&#35937;&#22312;&#36890;&#30693;&#20307;&#20869;&#21487;&#29992;&#12290;</p></span></i></li><li><p>&#23454;&#29616;<tt class="interfacename">AccountService</tt>&#25509;&#21475;&#30340;&#30446;&#26631;&#23545;&#35937;&#30340;&#20219;&#24847;&#36830;&#25509;&#28857;
            &#65288;&#22312;Spring AOP&#20013;&#21482;&#26159;&#26041;&#27861;&#25191;&#34892;&#65289;&#65306;</p><pre class="programlisting">target&#65288;com.xyz.service.AccountService&#65289;</pre><i><span class="remark"><p>'target'&#22312;&#32465;&#23450;&#34920;&#21333;&#20013;&#26356;&#21152;&#24120;&#29992;&#65306;- 
            &#35831;&#21442;&#35265;&#21518;&#38754;&#30340;&#36890;&#30693;&#19968;&#33410;&#20013;&#20102;&#35299;&#22914;&#20309;&#20351;&#24471;&#30446;&#26631;&#23545;&#35937;&#22312;&#36890;&#30693;&#20307;&#20869;&#21487;&#29992;&#12290;</p></span></i></li><li><p>&#20219;&#20309;&#19968;&#20010;&#21482;&#25509;&#21463;&#19968;&#20010;&#21442;&#25968;&#65292;&#24182;&#19988;&#36816;&#34892;&#26102;&#25152;&#20256;&#20837;&#30340;&#21442;&#25968;&#26159;<tt class="interfacename">Serializable</tt>
            &#25509;&#21475;&#30340;&#36830;&#25509;&#28857;&#65288;&#22312;Spring AOP&#20013;&#21482;&#26159;&#26041;&#27861;&#25191;&#34892;&#65289;</p><pre class="programlisting">args&#65288;java.io.Serializable&#65289;</pre><i><span class="remark">'args'&#22312;&#32465;&#23450;&#34920;&#21333;&#20013;&#26356;&#21152;&#24120;&#29992;&#65306;- 
            &#35831;&#21442;&#35265;&#21518;&#38754;&#30340;&#36890;&#30693;&#19968;&#33410;&#20013;&#20102;&#35299;&#22914;&#20309;&#20351;&#24471;&#26041;&#27861;&#21442;&#25968;&#22312;&#36890;&#30693;&#20307;&#20869;&#21487;&#29992;&#12290;</span></i><p>&#35831;&#27880;&#24847;&#22312;&#20363;&#23376;&#20013;&#32473;&#20986;&#30340;&#20999;&#20837;&#28857;&#19981;&#21516;&#20110; <tt class="literal">execution(* *(java.io.Serializable))</tt>&#65306;
			args&#29256;&#26412;&#21482;&#26377;&#22312;&#21160;&#24577;&#36816;&#34892;&#26102;&#20505;&#20256;&#20837;&#21442;&#25968;&#26159;Serializable&#26102;&#25165;&#21305;&#37197;&#65292;&#32780;execution&#29256;&#26412;&#22312;&#26041;&#27861;&#31614;&#21517;&#20013;&#22768;&#26126;&#21482;&#26377;&#19968;&#20010;
			<tt class="interfacename">Serializable</tt>&#31867;&#22411;&#30340;&#21442;&#25968;&#26102;&#20505;&#21305;&#37197;&#12290;</p></li><li><p>&#30446;&#26631;&#23545;&#35937;&#20013;&#26377;&#19968;&#20010; <tt class="interfacename">@Transactional</tt> &#27880;&#35299;&#30340;&#20219;&#24847;&#36830;&#25509;&#28857;
            &#65288;&#22312;Spring AOP&#20013;&#21482;&#26159;&#26041;&#27861;&#25191;&#34892;&#65289;</p><pre class="programlisting">@target&#65288;org.springframework.transaction.annotation.Transactional&#65289;</pre><i><span class="remark"><p>'@target'&#22312;&#32465;&#23450;&#34920;&#21333;&#20013;&#26356;&#21152;&#24120;&#29992;&#65306;- 
            &#35831;&#21442;&#35265;&#21518;&#38754;&#30340;&#36890;&#30693;&#19968;&#33410;&#20013;&#20102;&#35299;&#22914;&#20309;&#20351;&#24471;&#27880;&#35299;&#23545;&#35937;&#22312;&#36890;&#30693;&#20307;&#20869;&#21487;&#29992;&#12290;</p></span></i></li><li><p>&#20219;&#20309;&#19968;&#20010;&#30446;&#26631;&#23545;&#35937;&#22768;&#26126;&#30340;&#31867;&#22411;&#26377;&#19968;&#20010; <tt class="interfacename">@Transactional</tt> &#27880;&#35299;&#30340;&#36830;&#25509;&#28857;
            &#65288;&#22312;Spring AOP&#20013;&#21482;&#26159;&#26041;&#27861;&#25191;&#34892;&#65289;&#65306;</p><pre class="programlisting">@within&#65288;org.springframework.transaction.annotation.Transactional&#65289;</pre><i><span class="remark"><p>'@within'&#22312;&#32465;&#23450;&#34920;&#21333;&#20013;&#26356;&#21152;&#24120;&#29992;&#65306;- 
            &#35831;&#21442;&#35265;&#21518;&#38754;&#30340;&#36890;&#30693;&#19968;&#33410;&#20013;&#20102;&#35299;&#22914;&#20309;&#20351;&#24471;&#27880;&#35299;&#23545;&#35937;&#22312;&#36890;&#30693;&#20307;&#20869;&#21487;&#29992;&#12290;</p></span></i></li><li><p>&#20219;&#20309;&#19968;&#20010;&#25191;&#34892;&#30340;&#26041;&#27861;&#26377;&#19968;&#20010; <tt class="interfacename">@Transactional</tt> &#27880;&#35299;&#30340;&#36830;&#25509;&#28857;
            &#65288;&#22312;Spring AOP&#20013;&#21482;&#26159;&#26041;&#27861;&#25191;&#34892;&#65289;</p><pre class="programlisting">@annotation&#65288;org.springframework.transaction.annotation.Transactional&#65289;</pre><i><span class="remark"><p>'@annotation'&#22312;&#32465;&#23450;&#34920;&#21333;&#20013;&#26356;&#21152;&#24120;&#29992;&#65306;- 
            &#35831;&#21442;&#35265;&#21518;&#38754;&#30340;&#36890;&#30693;&#19968;&#33410;&#20013;&#20102;&#35299;&#22914;&#20309;&#20351;&#24471;&#27880;&#35299;&#23545;&#35937;&#22312;&#36890;&#30693;&#20307;&#20869;&#21487;&#29992;&#12290;</p></span></i></li><li><p>&#20219;&#20309;&#19968;&#20010;&#21482;&#25509;&#21463;&#19968;&#20010;&#21442;&#25968;&#65292;&#24182;&#19988;&#36816;&#34892;&#26102;&#25152;&#20256;&#20837;&#30340;&#21442;&#25968;&#31867;&#22411;&#20855;&#26377;<tt class="interfacename">@Classified</tt>
            &#27880;&#35299;&#30340;&#36830;&#25509;&#28857;&#65288;&#22312;Spring AOP&#20013;&#21482;&#26159;&#26041;&#27861;&#25191;&#34892;&#65289;</p><pre class="programlisting">@args&#65288;com.xyz.security.Classified&#65289;</pre><i><span class="remark"><p>'@args'&#22312;&#32465;&#23450;&#34920;&#21333;&#20013;&#26356;&#21152;&#24120;&#29992;&#65306;- 
            &#35831;&#21442;&#35265;&#21518;&#38754;&#30340;&#36890;&#30693;&#19968;&#33410;&#20013;&#20102;&#35299;&#22914;&#20309;&#20351;&#24471;&#27880;&#35299;&#23545;&#35937;&#22312;&#36890;&#30693;&#20307;&#20869;&#21487;&#29992;&#12290;</p></span></i></li><li><p>&#20219;&#20309;&#19968;&#20010;&#22312;&#21517;&#20026;'<tt class="literal">tradeService</tt>'&#30340;Spring bean&#20043;&#19978;&#30340;&#36830;&#25509;&#28857;
            &#65288;&#22312;Spring AOP&#20013;&#21482;&#26159;&#26041;&#27861;&#25191;&#34892;&#65289;&#65306;</p><pre class="programlisting">bean&#65288;tradeService&#65289;</pre></li><li><p>&#20219;&#20309;&#19968;&#20010;&#22312;&#21517;&#23383;&#21305;&#37197;&#36890;&#37197;&#31526;&#34920;&#36798;&#24335;'<tt class="literal">*Service</tt>'&#30340;Spring bean&#20043;&#19978;&#30340;&#36830;&#25509;&#28857;
            &#65288;&#22312;Spring AOP&#20013;&#21482;&#26159;&#26041;&#27861;&#25191;&#34892;&#65289;&#65306;</p><pre class="programlisting">bean&#65288;*Service&#65289;</pre></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-advice"></a>6.2.4.&nbsp;&#22768;&#26126;&#36890;&#30693;</h3></div></div><div></div></div><p>&#36890;&#30693;&#26159;&#36319;&#19968;&#20010;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#20851;&#32852;&#36215;&#26469;&#30340;&#65292;&#24182;&#19988;&#22312;&#20999;&#20837;&#28857;&#21305;&#37197;&#30340;&#26041;&#27861;&#25191;&#34892;&#20043;&#21069;&#25110;&#32773;&#20043;&#21518;&#25110;&#32773;&#21069;&#21518;&#36816;&#34892;&#12290;
			&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#21487;&#33021;&#26159;&#25351;&#21521;&#24050;&#21629;&#21517;&#30340;&#20999;&#20837;&#28857;&#30340;&#31616;&#21333;&#24341;&#29992;&#25110;&#32773;&#26159;&#19968;&#20010;&#24050;&#32463;&#22768;&#26126;&#36807;&#30340;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#12290;
	   	</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-advice-before"></a>6.2.4.1.&nbsp;&#21069;&#32622;&#36890;&#30693;</h4></div></div><div></div></div><p>&#19968;&#20010;&#20999;&#38754;&#37324;&#20351;&#29992; <tt class="interfacename">@Before</tt> &#27880;&#35299;&#22768;&#26126;&#21069;&#32622;&#36890;&#30693;&#65306;</p><pre class="programlisting">import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Before;

@Aspect
public class BeforeExample {

  @Before&#65288;"com.xyz.myapp.SystemArchitecture.dataAccessOperation&#65288;&#65289;"&#65289;
  public void doAccessCheck&#65288;&#65289; {
    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
  }

}</pre><p>&#22914;&#26524;&#20351;&#29992;&#19968;&#20010;in-place &#30340;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#65292;&#25105;&#20204;&#21487;&#20197;&#25226;&#19978;&#38754;&#30340;&#20363;&#23376;&#25442;&#20010;&#20889;&#27861;&#65306;</p><pre class="programlisting">import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Before;

@Aspect
public class BeforeExample {

  @Before&#65288;"execution&#65288;* com.xyz.myapp.dao.*.*&#65288;..&#65289;&#65289;"&#65289;
  public void doAccessCheck&#65288;&#65289; {
    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
  }

}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-advice-after-returning"></a>6.2.4.2.&nbsp;&#21518;&#32622;&#36890;&#30693;&#65288;After returning advice&#65289;</h4></div></div><div></div></div><p>&#36820;&#22238;&#21518;&#36890;&#30693;&#36890;&#24120;&#22312;&#19968;&#20010;&#21305;&#37197;&#30340;&#26041;&#27861;&#36820;&#22238;&#30340;&#26102;&#20505;&#25191;&#34892;&#12290;&#20351;&#29992; <tt class="interfacename">@AfterReturning</tt>
        &#27880;&#35299;&#26469;&#22768;&#26126;&#65306;</p><pre class="programlisting">import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.AfterReturning;

@Aspect
public class AfterReturningExample {

  @AfterReturning&#65288;"com.xyz.myapp.SystemArchitecture.dataAccessOperation&#65288;&#65289;"&#65289;
  public void doAccessCheck&#65288;&#65289; {
    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
  }

}</pre><i><span class="remark">&#35828;&#26126;&#65306;&#20320;&#21487;&#20197;&#22312;&#30456;&#21516;&#30340;&#20999;&#38754;&#37324;&#23450;&#20041;&#22810;&#20010;&#36890;&#30693;&#65292;&#25110;&#32773;&#20854;&#20182;&#25104;&#21592;&#12290;
        &#25105;&#20204;&#21482;&#26159;&#22312;&#23637;&#31034;&#22914;&#20309;&#23450;&#20041;&#19968;&#20010;&#31616;&#21333;&#30340;&#36890;&#30693;&#12290;&#36825;&#20123;&#20363;&#23376;&#20027;&#35201;&#30340;&#20391;&#37325;&#28857;&#26159;&#27491;&#22312;&#35752;&#35770;&#30340;&#38382;&#39064;&#12290;
				</span></i><p>&#26377;&#26102;&#20505;&#20320;&#38656;&#35201;&#22312;&#36890;&#30693;&#20307;&#20869;&#24471;&#21040;&#36820;&#22238;&#30340;&#20540;&#12290;&#20320;&#21487;&#20197;&#20351;&#29992;<tt class="interfacename">@AfterReturning</tt>
				&#25509;&#21475;&#30340;&#24418;&#24335;&#26469;&#32465;&#23450;&#36820;&#22238;&#20540;&#65306;</p><pre class="programlisting">import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.AfterReturning;

@Aspect
public class AfterReturningExample {

  @AfterReturning&#65288;
    pointcut="com.xyz.myapp.SystemArchitecture.dataAccessOperation&#65288;&#65289;",
    returning="retVal"&#65289;
  public void doAccessCheck&#65288;Object retVal&#65289; {
    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
  }
  
}</pre><p>&#22312; <tt class="literal">returning</tt>&#23646;&#24615;&#20013;&#20351;&#29992;&#30340;&#21517;&#23383;&#24517;&#39035;&#23545;&#24212;&#20110;&#36890;&#30693;&#26041;&#27861;&#20869;&#30340;&#19968;&#20010;&#21442;&#25968;&#21517;&#12290;
				&#24403;&#19968;&#20010;&#26041;&#27861;&#25191;&#34892;&#36820;&#22238;&#21518;&#65292;&#36820;&#22238;&#20540;&#20316;&#20026;&#30456;&#24212;&#30340;&#21442;&#25968;&#20540;&#20256;&#20837;&#36890;&#30693;&#26041;&#27861;&#12290;
				&#19968;&#20010;<tt class="literal">returning</tt>&#23376;&#21477;&#20063;&#38480;&#21046;&#20102;&#21482;&#33021;&#21305;&#37197;&#21040;&#36820;&#22238;&#25351;&#23450;&#31867;&#22411;&#20540;&#30340;&#26041;&#27861;&#12290;
				&#65288;&#22312;&#26412;&#20363;&#23376;&#20013;&#65292;&#36820;&#22238;&#20540;&#26159;<tt class="classname">Object</tt>&#31867;&#65292;&#20063;&#23601;&#26159;&#35828;&#36820;&#22238;&#20219;&#24847;&#31867;&#22411;&#37117;&#20250;&#21305;&#37197;&#65289;
				</p><p>&#35831;&#27880;&#24847;&#24403;&#20351;&#29992;&#21518;&#32622;&#36890;&#30693;&#26102;<span class="emphasis"><em>&#19981;</em></span>&#20801;&#35768;&#36820;&#22238;&#19968;&#20010;&#23436;&#20840;&#19981;&#21516;&#30340;&#24341;&#29992;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-advice-after-throwing"></a>6.2.4.3.&nbsp;&#24322;&#24120;&#36890;&#30693;&#65288;After throwing advice&#65289;</h4></div></div><div></div></div><p>&#25243;&#20986;&#24322;&#24120;&#36890;&#30693;&#22312;&#19968;&#20010;&#26041;&#27861;&#25243;&#20986;&#24322;&#24120;&#21518;&#25191;&#34892;&#12290;&#20351;&#29992;<tt class="interfacename">@AfterThrowing</tt>&#27880;&#35299;&#26469;&#22768;&#26126;&#65306;</p><pre class="programlisting">import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.AfterThrowing;

@Aspect
public class AfterThrowingExample {

  @AfterThrowing&#65288;"com.xyz.myapp.SystemArchitecture.dataAccessOperation&#65288;&#65289;"&#65289;
  public void doRecoveryActions&#65288;&#65289; {
    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
  }

}</pre><p>&#20320;&#36890;&#24120;&#20250;&#24819;&#35201;&#38480;&#21046;&#36890;&#30693;&#21482;&#22312;&#26576;&#31181;&#29305;&#27530;&#30340;&#24322;&#24120;&#34987;&#25243;&#20986;&#30340;&#26102;&#20505;&#21305;&#37197;&#65292;&#20320;&#36824;&#24076;&#26395;&#21487;&#20197;&#22312;&#36890;&#30693;&#20307;&#20869;&#24471;&#21040;&#34987;&#25243;&#20986;&#30340;&#24322;&#24120;&#12290;
				&#20351;&#29992;<tt class="literal">throwing</tt>&#23646;&#24615;&#19981;&#20165;&#21487;&#20197;&#38480;&#21046;&#21305;&#37197;&#30340;&#24322;&#24120;&#31867;&#22411;&#65288;&#22914;&#26524;&#20320;&#19981;&#24819;&#38480;&#21046;&#65292;&#35831;&#20351;&#29992;
				<tt class="interfacename">Throwable</tt>&#20316;&#20026;&#24322;&#24120;&#31867;&#22411;&#65289;&#65292;&#36824;&#21487;&#20197;&#23558;&#25243;&#20986;&#30340;&#24322;&#24120;&#32465;&#23450;&#21040;&#36890;&#30693;&#30340;&#19968;&#20010;&#21442;&#25968;&#19978;&#12290;
</p><pre class="programlisting">import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.AfterThrowing;

@Aspect
public class AfterThrowingExample {

  @AfterThrowing&#65288;
    pointcut="com.xyz.myapp.SystemArchitecture.dataAccessOperation&#65288;&#65289;",
    throwing="ex"&#65289;
  public void doRecoveryActions&#65288;DataAccessException ex&#65289; {
    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
  }

}</pre><p>&#22312;<tt class="literal">throwing</tt>&#23646;&#24615;&#20013;&#20351;&#29992;&#30340;&#21517;&#23383;&#24517;&#39035;&#19982;&#36890;&#30693;&#26041;&#27861;&#20869;&#30340;&#19968;&#20010;&#21442;&#25968;&#23545;&#24212;&#12290;
				&#24403;&#19968;&#20010;&#26041;&#27861;&#22240;&#25243;&#20986;&#19968;&#20010;&#24322;&#24120;&#32780;&#20013;&#27490;&#21518;&#65292;&#36825;&#20010;&#24322;&#24120;&#23558;&#20250;&#20316;&#20026;&#37027;&#20010;&#23545;&#24212;&#30340;&#21442;&#25968;&#36865;&#33267;&#36890;&#30693;&#26041;&#27861;&#12290;
				<tt class="literal">throwing</tt> &#23376;&#21477;&#20063;&#38480;&#21046;&#20102;&#21482;&#33021;&#21305;&#37197;&#21040;&#25243;&#20986;&#25351;&#23450;&#24322;&#24120;&#31867;&#22411;&#30340;&#26041;&#27861;
				&#65288;&#19978;&#38754;&#30340;&#31034;&#20363;&#20026;<tt class="classname">DataAccessException</tt>&#65289;&#12290;
				</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-advice-after-finally"></a>6.2.4.4.&nbsp;&#26368;&#32456;&#36890;&#30693;&#65288;After (finally) advice&#65289;</h4></div></div><div></div></div><p>&#19981;&#35770;&#19968;&#20010;&#26041;&#27861;&#26159;&#22914;&#20309;&#32467;&#26463;&#30340;&#65292;&#26368;&#32456;&#36890;&#30693;&#37117;&#20250;&#36816;&#34892;&#12290;&#20351;&#29992;<tt class="interfacename">@After</tt>
        &#27880;&#35299;&#26469;&#22768;&#26126;&#12290;&#26368;&#32456;&#36890;&#30693;&#24517;&#39035;&#20934;&#22791;&#22788;&#29702;&#27491;&#24120;&#36820;&#22238;&#21644;&#24322;&#24120;&#36820;&#22238;&#20004;&#31181;&#24773;&#20917;&#12290;&#36890;&#24120;&#29992;&#23427;&#26469;&#37322;&#25918;&#36164;&#28304;&#12290;</p><pre class="programlisting">import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.After;

@Aspect
public class AfterFinallyExample {

  @After&#65288;"com.xyz.myapp.SystemArchitecture.dataAccessOperation&#65288;&#65289;"&#65289;
  public void doReleaseLock&#65288;&#65289; {
    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
  }

}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-ataspectj-around-advice"></a>6.2.4.5.&nbsp;&#29615;&#32469;&#36890;&#30693;</h4></div></div><div></div></div><p>&#26368;&#21518;&#19968;&#31181;&#36890;&#30693;&#26159;&#29615;&#32469;&#36890;&#30693;&#12290;&#29615;&#32469;&#36890;&#30693;&#22312;&#19968;&#20010;&#26041;&#27861;&#25191;&#34892;&#20043;&#21069;&#21644;&#20043;&#21518;&#25191;&#34892;&#12290;&#23427;&#20351;&#24471;&#36890;&#30693;&#26377;&#26426;&#20250;
        &#22312;&#19968;&#20010;&#26041;&#27861;&#25191;&#34892;&#20043;&#21069;&#21644;&#25191;&#34892;&#20043;&#21518;&#36816;&#34892;&#12290;&#32780;&#19988;&#23427;&#21487;&#20197;&#20915;&#23450;&#36825;&#20010;&#26041;&#27861;&#22312;&#20160;&#20040;&#26102;&#20505;&#25191;&#34892;&#65292;&#22914;&#20309;&#25191;&#34892;&#65292;&#29978;&#33267;&#26159;&#21542;&#25191;&#34892;&#12290;
				&#29615;&#32469;&#36890;&#30693;&#32463;&#24120;&#22312;&#26576;&#32447;&#31243;&#23433;&#20840;&#30340;&#29615;&#22659;&#19979;&#65292;&#20320;&#38656;&#35201;&#22312;&#19968;&#20010;&#26041;&#27861;&#25191;&#34892;&#20043;&#21069;&#21644;&#20043;&#21518;&#20849;&#20139;&#26576;&#31181;&#29366;&#24577;&#30340;&#26102;&#20505;&#20351;&#29992;&#12290;
				&#35831;&#23613;&#37327;&#20351;&#29992;&#26368;&#31616;&#21333;&#30340;&#28385;&#36275;&#20320;&#38656;&#27714;&#30340;&#36890;&#30693;&#12290;&#65288;&#27604;&#22914;&#22914;&#26524;&#31616;&#21333;&#30340;&#21069;&#32622;&#36890;&#30693;&#20063;&#21487;&#20197;&#36866;&#29992;&#30340;&#24773;&#20917;&#19979;&#19981;&#35201;&#20351;&#29992;&#29615;&#32469;&#36890;&#30693;&#65289;&#12290;
				</p><p>&#29615;&#32469;&#36890;&#30693;&#20351;&#29992;<tt class="interfacename">@Around</tt>&#27880;&#35299;&#26469;&#22768;&#26126;&#12290;&#36890;&#30693;&#30340;&#31532;&#19968;&#20010;&#21442;&#25968;&#24517;&#39035;&#26159;
				<tt class="interfacename">ProceedingJoinPoint</tt>&#31867;&#22411;&#12290;&#22312;&#36890;&#30693;&#20307;&#20869;&#65292;&#35843;&#29992;
				<tt class="interfacename">ProceedingJoinPoint</tt>&#30340;<tt class="literal">proceed()</tt>&#26041;&#27861;&#20250;&#23548;&#33268;
				&#21518;&#21488;&#30340;&#36830;&#25509;&#28857;&#26041;&#27861;&#25191;&#34892;&#12290;<tt class="literal">proceed</tt> &#26041;&#27861;&#20063;&#21487;&#33021;&#20250;&#34987;&#35843;&#29992;&#24182;&#19988;&#20256;&#20837;&#19968;&#20010;
				<tt class="classname">Object[]</tt>&#23545;&#35937;-&#35813;&#25968;&#32452;&#20013;&#30340;&#20540;&#23558;&#34987;&#20316;&#20026;&#26041;&#27861;&#25191;&#34892;&#26102;&#30340;&#21442;&#25968;&#12290;</p><i><span class="remark">
				&#24403;&#20256;&#20837;&#19968;&#20010;<tt class="classname">Object[]</tt>&#23545;&#35937;&#30340;&#26102;&#20505;&#65292;&#22788;&#29702;&#30340;&#26041;&#27861;&#19982;&#36890;&#36807;AspectJ&#32534;&#35793;&#22120;&#22788;&#29702;&#29615;&#32469;&#36890;&#30693;&#30053;&#26377;&#19981;&#21516;&#12290;
			  &#23545;&#20110;&#20351;&#29992;&#20256;&#32479;AspectJ&#35821;&#35328;&#20889;&#30340;&#29615;&#32469;&#36890;&#30693;&#26469;&#35828;&#65292;&#20256;&#20837;&#21442;&#25968;&#30340;&#25968;&#37327;&#24517;&#39035;&#21644;&#20256;&#36882;&#32473;&#29615;&#32469;&#36890;&#30693;&#30340;&#21442;&#25968;&#25968;&#37327;&#21305;&#37197;
			 &#65288;&#19981;&#26159;&#21518;&#21488;&#30340;&#36830;&#25509;&#28857;&#25509;&#21463;&#30340;&#21442;&#25968;&#25968;&#37327;&#65289;&#65292;&#24182;&#19988;&#29305;&#23450;&#39034;&#24207;&#30340;&#20256;&#20837;&#21442;&#25968;&#20195;&#26367;&#20102;&#23558;&#35201;&#32465;&#23450;&#32473;&#36830;&#25509;&#28857;&#30340;&#21407;&#22987;&#20540;
		   &#65288;&#22914;&#26524;&#20320;&#30475;&#19981;&#25026;&#19981;&#29992;&#25285;&#24515;&#65289;&#12290;Spring&#37319;&#29992;&#30340;&#26041;&#27861;&#26356;&#21152;&#31616;&#21333;&#24182;&#19988;&#33021;&#26356;&#22909;&#21305;&#37197;&#23427;&#22522;&#20110;&#20195;&#29702;&#65288;proxy-based&#65289;&#30340;&#25191;&#34892;&#35821;&#27861;&#65292;
				&#22914;&#26524;&#20320;&#20351;&#29992;AspectJ&#30340;&#32534;&#35793;&#22120;&#21644;&#32534;&#32455;&#22120;&#26469;&#32534;&#35793;&#20026;Spring&#32780;&#20889;&#30340;@AspectJ&#20999;&#38754;&#21644;&#22788;&#29702;&#21442;&#25968;&#65292;&#20320;&#21482;&#38656;&#35201;&#30693;&#36947;&#36825;&#19968;&#21306;&#21035;&#21363;&#21487;&#12290;
				&#26377;&#19968;&#31181;&#26041;&#27861;&#21487;&#20197;&#35753;&#20320;&#20889;&#20986;100%&#20860;&#23481;Spring AOP&#21644;AspectJ&#30340;&#34920;&#36798;&#24335;&#65292;&#25105;&#20204;&#23558;&#20250;&#22312;&#21518;&#32493;&#30340;&#36890;&#30693;&#21442;&#25968;&#30340;&#31456;&#33410;&#20013;&#35752;&#35770;&#23427;&#12290;</span></i><pre class="programlisting">import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Around;
import org.aspectj.lang.ProceedingJoinPoint;

@Aspect
public class AroundExample {

  @Around&#65288;"com.xyz.myapp.SystemArchitecture.businessService&#65288;&#65289;"&#65289;
  public Object doBasicProfiling&#65288;ProceedingJoinPoint pjp&#65289; throws Throwable {
    // start stopwatch
    Object retVal = pjp.proceed&#65288;&#65289;;
    // stop stopwatch
    return retVal;
  }

}</pre><p>&#26041;&#27861;&#30340;&#35843;&#29992;&#32773;&#24471;&#21040;&#30340;&#36820;&#22238;&#20540;&#23601;&#26159;&#29615;&#32469;&#36890;&#30693;&#36820;&#22238;&#30340;&#20540;&#12290;
				&#20363;&#22914;&#65306;&#19968;&#20010;&#31616;&#21333;&#30340;&#32531;&#23384;&#20999;&#38754;&#65292;&#22914;&#26524;&#32531;&#23384;&#20013;&#26377;&#20540;&#65292;&#23601;&#36820;&#22238;&#35813;&#20540;&#65292;&#21542;&#21017;&#35843;&#29992;proceed()&#26041;&#27861;&#12290;
				&#35831;&#27880;&#24847;proceed&#21487;&#33021;&#22312;&#36890;&#30693;&#20307;&#20869;&#37096;&#34987;&#35843;&#29992;&#19968;&#27425;&#65292;&#35768;&#22810;&#27425;&#65292;&#25110;&#32773;&#26681;&#26412;&#19981;&#34987;&#35843;&#29992;&#65292;&#25152;&#26377;&#36825;&#20123;&#37117;&#26159;&#21512;&#27861;&#30340;&#12290;
				</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-ataspectj-advice-params"></a>6.2.4.6.&nbsp;&#36890;&#30693;&#21442;&#25968;&#65288;Advice parameters&#65289;</h4></div></div><div></div></div><p>Spring 2.0 &#25552;&#20379;&#20102;&#23436;&#25972;&#30340;&#36890;&#30693;&#31867;&#22411; - &#36825;&#24847;&#21619;&#30528;&#20320;&#21487;&#20197;&#22312;&#36890;&#30693;&#31614;&#21517;&#20013;&#22768;&#26126;&#25152;&#38656;&#30340;&#21442;&#25968;&#65292;
        &#65288;&#23601;&#20687;&#25105;&#20204;&#22312;&#21069;&#38754;&#30475;&#21040;&#30340;&#21518;&#32622;&#21644;&#24322;&#24120;&#36890;&#30693;&#19968;&#26679;&#65289;&#32780;&#19981;&#24635;&#26159;&#20351;&#29992;Object[]&#12290;
        &#25105;&#20204;&#23558;&#20250;&#30475;&#21040;&#22914;&#20309;&#20351;&#24471;&#21442;&#25968;&#21644;&#20854;&#20182;&#19978;&#19979;&#25991;&#20540;&#23545;&#36890;&#30693;&#20307;&#21487;&#29992;&#12290;
        &#39318;&#20808;&#35753;&#25105;&#20204;&#30475;&#20197;&#19979;&#22914;&#20309;&#32534;&#20889;&#26222;&#36890;&#30340;&#36890;&#30693;&#20197;&#25214;&#20986;&#27491;&#22312;&#34987;&#36890;&#30693;&#30340;&#26041;&#27861;&#12290;
				</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="aop-ataspectj-advice-params-the-joinpoint"></a>6.2.4.6.1.&nbsp;&#35775;&#38382;&#24403;&#21069;&#30340;<tt class="interfacename">&#36830;&#25509;&#28857;</tt></h5></div></div><div></div></div><p>&#20219;&#20309;&#36890;&#30693;&#26041;&#27861;&#21487;&#20197;&#23558;&#31532;&#19968;&#20010;&#21442;&#25968;&#23450;&#20041;&#20026;<tt class="interfacename">org.aspectj.lang.JoinPoint</tt>&#31867;&#22411;
					&#65288;&#29615;&#32469;&#36890;&#30693;&#38656;&#35201;&#23450;&#20041;&#31532;&#19968;&#20010;&#21442;&#25968;&#20026;<tt class="interfacename">ProceedingJoinPoint</tt>&#31867;&#22411;&#65292;
					&#23427;&#26159; <tt class="interfacename">JoinPoint</tt> &#30340;&#19968;&#20010;&#23376;&#31867;&#65289;&#12290;<tt class="interfacename">JoinPoint</tt>
					&#25509;&#21475;&#25552;&#20379;&#20102;&#19968;&#31995;&#21015;&#26377;&#29992;&#30340;&#26041;&#27861;&#65292;&#27604;&#22914; <tt class="literal">getArgs()</tt>&#65288;&#36820;&#22238;&#26041;&#27861;&#21442;&#25968;&#65289;&#12289;
					<tt class="literal">getThis()</tt>&#65288;&#36820;&#22238;&#20195;&#29702;&#23545;&#35937;&#65289;&#12289;<tt class="literal">getTarget()</tt>&#65288;&#36820;&#22238;&#30446;&#26631;&#65289;&#12289;
					<tt class="literal">getSignature()</tt>&#65288;&#36820;&#22238;&#27491;&#22312;&#34987;&#36890;&#30693;&#30340;&#26041;&#27861;&#30456;&#20851;&#20449;&#24687;&#65289;&#21644; <tt class="literal">toString()</tt>
					&#65288;&#25171;&#21360;&#20986;&#27491;&#22312;&#34987;&#36890;&#30693;&#30340;&#26041;&#27861;&#30340;&#26377;&#29992;&#20449;&#24687;&#65289;&#12290;&#35814;&#32454;&#30340;&#20869;&#23481;&#35831;&#21442;&#32771;JavaDoc&#12290;
					</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="aop-ataspectj-advice-params-passing"></a>6.2.4.6.2.&nbsp;&#20256;&#36882;&#21442;&#25968;&#32473;&#36890;&#30693;</h5></div></div><div></div></div><p>
					&#25105;&#20204;&#24050;&#32463;&#30475;&#21040;&#20102;&#22914;&#20309;&#32465;&#23450;&#36820;&#22238;&#20540;&#25110;&#32773;&#24322;&#24120;&#65288;&#20351;&#29992;&#21518;&#32622;&#36890;&#30693;&#21644;&#24322;&#24120;&#36890;&#30693;&#65289;&#12290;&#20026;&#20102;&#21487;&#20197;&#22312;&#36890;&#30693;&#20307;&#20869;&#35775;&#38382;&#21442;&#25968;&#65292;
					&#20320;&#21487;&#20197;&#20351;&#29992;<tt class="literal">args</tt>&#26469;&#32465;&#23450;&#12290;&#22914;&#26524;&#22312;&#19968;&#20010;args&#34920;&#36798;&#24335;&#20013;&#24212;&#35813;&#20351;&#29992;&#31867;&#22411;&#21517;&#23383;&#30340;&#22320;&#26041;
				  &#20351;&#29992;&#19968;&#20010;&#21442;&#25968;&#21517;&#23383;&#65292;&#37027;&#20040;&#24403;&#36890;&#30693;&#25191;&#34892;&#30340;&#26102;&#20505;&#23545;&#24212;&#30340;&#21442;&#25968;&#20540;&#23558;&#20250;&#34987;&#20256;&#36882;&#36827;&#26469;&#12290;&#29992;&#19968;&#20010;&#20363;&#23376;&#24212;&#35813;&#20250;&#20351;&#23427;&#21464;&#24471;&#28165;&#26224;&#12290;
				  &#20551;&#20351;&#20320;&#24819;&#35201;&#36890;&#30693;&#20197;&#19968;&#20010;Account&#23545;&#35937;&#20316;&#20026;&#31532;&#19968;&#20010;&#21442;&#25968;&#30340;DAO&#25805;&#20316;&#30340;&#25191;&#34892;&#65292;
				  &#20320;&#24819;&#35201;&#22312;&#36890;&#30693;&#20307;&#20869;&#20063;&#33021;&#35775;&#38382;account&#23545;&#35937;&#65292;&#21487;&#20197;&#32534;&#20889;&#22914;&#19979;&#30340;&#20195;&#30721;&#65306;
					</p><pre class="programlisting">@Before&#65288;"com.xyz.myapp.SystemArchitecture.dataAccessOperation&#65288;&#65289; &amp;&amp;" + 
        "args&#65288;account,..&#65289;"&#65289;
public void validateAccount&#65288;Account account&#65289; {
  <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><p>&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#30340; <tt class="literal">args(account,..)</tt> &#37096;&#20998;&#26377;&#20004;&#20010;&#30446;&#30340;&#65306;&#39318;&#20808;&#23427;&#20445;&#35777;&#20102;
					&#21482;&#20250;&#21305;&#37197;&#37027;&#20123;&#25509;&#21463;&#33267;&#23569;&#19968;&#20010;&#21442;&#25968;&#30340;&#26041;&#27861;&#30340;&#25191;&#34892;&#65292;&#32780;&#19988;&#20256;&#20837;&#30340;&#21442;&#25968;&#24517;&#39035;&#26159;<tt class="classname">Account</tt>&#31867;&#22411;&#30340;&#23454;&#20363;&#65292;
					&#20854;&#27425;&#23427;&#20351;&#24471;&#22312;&#36890;&#30693;&#20307;&#20869;&#21487;&#20197;&#36890;&#36807;<tt class="literal">account</tt> &#21442;&#25968;&#35775;&#38382;&#23454;&#38469;&#30340;<tt class="classname">Account</tt>&#23545;&#35937;&#12290;
					</p><p>&#21478;&#22806;&#19968;&#20010;&#21150;&#27861;&#26159;&#23450;&#20041;&#19968;&#20010;&#20999;&#20837;&#28857;&#65292;&#36825;&#20010;&#20999;&#20837;&#28857;&#22312;&#21305;&#37197;&#26576;&#20010;&#36830;&#25509;&#28857;&#30340;&#26102;&#20505;&#8220;&#25552;&#20379;&#8221;&#20102;
          <tt class="classname">Account</tt>&#23545;&#35937;&#30340;&#20540;&#65292;&#28982;&#21518;&#30452;&#25509;&#20174;&#36890;&#30693;&#20013;&#35775;&#38382;&#37027;&#20010;&#21629;&#21517;&#20999;&#20837;&#28857;&#12290;&#30475;&#36215;&#26469;&#21644;&#19979;&#38754;&#30340;&#31034;&#20363;&#19968;&#26679;&#65306;
					</p><pre class="programlisting">@Pointcut&#65288;"com.xyz.myapp.SystemArchitecture.dataAccessOperation&#65288;&#65289; &amp;&amp;" + 
          "args&#65288;account,..&#65289;"&#65289;
private void accountDataAccessOperation&#65288;Account account&#65289; {}

@Before&#65288;"accountDataAccessOperation&#65288;account&#65289;"&#65289;
public void validateAccount&#65288;Account account&#65289; {
  <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><p>&#26377;&#20852;&#36259;&#30340;&#35835;&#32773;&#35831;&#21442;&#38405; AspectJ &#32534;&#31243;&#25351;&#21335;&#20102;&#35299;&#26356;&#35814;&#32454;&#30340;&#20869;&#23481;&#12290;</p><p>&#20195;&#29702;&#23545;&#35937;&#65288;<tt class="literal">this</tt>&#65289;&#12289;&#30446;&#26631;&#23545;&#35937;&#65288;<tt class="literal">target</tt>&#65289;
					&#21644;&#27880;&#35299;&#65288;<tt class="literal">@within, @target, @annotation, @args</tt>&#65289;&#37117;&#21487;&#20197;&#29992;&#19968;&#31181;&#31867;&#20284;&#30340;&#26684;&#24335;&#26469;&#32465;&#23450;&#12290;
					&#20197;&#19979;&#30340;&#20363;&#23376;&#23637;&#31034;&#20102;&#22914;&#20309;&#20351;&#29992; <tt class="interfacename">@Auditable</tt>&#27880;&#35299;&#26469;&#21305;&#37197;&#26041;&#27861;&#25191;&#34892;&#65292;&#24182;&#25552;&#21462;Audit&#20195;&#30721;&#12290;
					</p><p>&#39318;&#20808;&#26159;<tt class="interfacename">@Auditable</tt>&#27880;&#35299;&#30340;&#23450;&#20041;&#65306;</p><pre class="programlisting">@Retention&#65288;RetentionPolicy.RUNTIME&#65289;
@Target&#65288;ElementType.METHOD&#65289;
public @interface Auditable {
	AuditCode value&#65288;&#65289;;
}</pre><p>&#28982;&#21518;&#26159;&#21305;&#37197;<tt class="interfacename">@Auditable</tt>&#26041;&#27861;&#25191;&#34892;&#30340;&#36890;&#30693;&#65306;</p><pre class="programlisting">@Before&#65288;"com.xyz.lib.Pointcuts.anyPublicMethod&#65288;&#65289; &amp;&amp; " + 
        "@annotation&#65288;auditable&#65289;"&#65289;
public void audit&#65288;Auditable auditable&#65289; {
  AuditCode code = auditable.value&#65288;&#65289;;
  <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="aop-ataspectj-advice-params-names"></a>6.2.4.6.3.&nbsp;&#30830;&#23450;&#21442;&#25968;&#21517;</h5></div></div><div></div></div><p>&#32465;&#23450;&#22312;&#36890;&#30693;&#19978;&#30340;&#21442;&#25968;&#20381;&#36182;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#30340;&#21305;&#37197;&#21517;&#65292;&#24182;&#20511;&#27492;&#22312;&#65288;&#36890;&#30693;&#21644;&#20999;&#20837;&#28857;&#65289;&#30340;&#26041;&#27861;&#31614;&#21517;&#20013;&#22768;&#26126;&#21442;&#25968;&#21517;&#12290;
					&#21442;&#25968;&#21517;<span class="emphasis"><em>&#26080;&#27861;</em></span> &#36890;&#36807;Java&#21453;&#23556;&#26469;&#33719;&#21462;&#65292;&#25152;&#20197;Spring AOP&#20351;&#29992;&#22914;&#19979;&#30340;&#31574;&#30053;&#26469;&#30830;&#23450;&#21442;&#25968;&#21517;&#23383;&#65306;
					</p><div class="orderedlist"><ol type="1"><li><p>&#22914;&#26524;&#21442;&#25968;&#21517;&#23383;&#24050;&#32463;&#34987;&#29992;&#25143;&#26126;&#30830;&#25351;&#23450;&#65292;&#21017;&#20351;&#29992;&#25351;&#23450;&#30340;&#21442;&#25968;&#21517;&#65306;
							&#36890;&#30693;&#21644;&#20999;&#20837;&#28857;&#27880;&#35299;&#26377;&#19968;&#20010;&#39069;&#22806;&#30340;"argNames"&#23646;&#24615;&#65292;&#35813;&#23646;&#24615;&#29992;&#26469;&#25351;&#23450;&#25152;&#27880;&#35299;&#30340;&#26041;&#27861;&#30340;&#21442;&#25968;&#21517; - 
							&#36825;&#20123;&#21442;&#25968;&#21517;&#22312;&#36816;&#34892;&#26102;&#26159;<span class="emphasis"><em>&#21487;&#20197;</em></span> &#35775;&#38382;&#30340;&#12290;&#20363;&#23376;&#22914;&#19979;&#65306;</p><pre class="programlisting">@Before&#65288;
   value="com.xyz.lib.Pointcuts.anyPublicMethod&#65288;&#65289; &amp;&amp; target&#65288;bean&#65289; &amp;&amp; @annotation&#65288;auditable&#65289;",
   argNames="bean,auditable"&#65289;
public void audit&#65288;Object bean, Auditable auditable&#65289; {
  AuditCode code = auditable.value&#65288;&#65289;;
  <i class="lineannotation"><span class="lineannotation">// ... use code and bean</span></i>
}</pre><p>&#22914;&#26524;&#31532;&#19968;&#20010;&#21442;&#25968;&#26159;<tt class="interfacename">JoinPoint</tt>&#65292;
              <tt class="interfacename">ProceedingJoinPoint</tt>&#65292;
              &#25110;&#32773;<tt class="interfacename">JoinPoint.StaticPart</tt>&#31867;&#22411;&#65292;
              &#20320;&#21487;&#20197;&#22312;&#8220;argNames&#8221;&#23646;&#24615;&#30340;&#20540;&#20013;&#30465;&#21435;&#21442;&#25968;&#30340;&#21517;&#23383;&#12290;&#20363;&#22914;&#65292;&#22914;&#26524;&#20320;&#20462;&#25913;&#21069;&#38754;&#30340;&#36890;&#30693;&#26469;&#33719;&#21462;&#36830;&#25509;&#28857;&#23545;&#35937;&#65292;
              "argNames"&#23646;&#24615;&#23601;&#19981;&#24517;&#21253;&#21547;&#23427;&#65306;</p><pre class="programlisting">@Before&#65288;
   value="com.xyz.lib.Pointcuts.anyPublicMethod&#65288;&#65289; &amp;&amp; target&#65288;bean&#65289; &amp;&amp; @annotation&#65288;auditable&#65289;",
   argNames="bean,auditable"&#65289;
public void audit&#65288;JoinPoint jp, Object bean, Auditable auditable&#65289; {
  AuditCode code = auditable.value&#65288;&#65289;;
  <i class="lineannotation"><span class="lineannotation">// ... use code, bean, and jp</span></i>
}</pre><p>&#23545;&#20110;&#31532;&#19968;&#20010;<tt class="interfacename">JoinPoint</tt>&#65292;
              <tt class="interfacename">ProceedingJoinPoint</tt>&#65292;&#21644;
              <tt class="interfacename">JoinPoint.StaticPart</tt>&#31867;&#22411;&#30340;&#21442;&#25968;&#29305;&#27530;&#22788;&#29702;&#29305;&#21035;&#36866;&#21512;
              &#27809;&#26377;&#38598;&#21512;&#20854;&#23427;&#36830;&#25509;&#19978;&#19979;&#25991;&#30340;&#36890;&#30693;&#12290;&#22312;&#36825;&#31181;&#24773;&#37096;&#19979;&#65292;&#20320;&#21487;&#20197;&#31616;&#21333;&#30340;&#30465;&#30053;&#8220;argNames&#8221;&#23646;&#24615;&#12290;
              &#20363;&#22914;&#65292;&#19979;&#38754;&#30340;&#36890;&#30693;&#19981;&#38656;&#35201;&#22768;&#26126;&#8220;argNames&#8221;&#23646;&#24615;&#65306;</p><pre class="programlisting">@Before&#65288;
   "com.xyz.lib.Pointcuts.anyPublicMethod&#65288;&#65289;"&#65289;
public void audit&#65288;JoinPoint jp&#65289; {
  <i class="lineannotation"><span class="lineannotation">// ... use jp</span></i>
}</pre></li><li><p>&#20351;&#29992;<tt class="literal">'argNames'</tt>&#23646;&#24615;&#26377;&#19968;&#28857;&#31528;&#25305;&#65292;&#25152;&#20197;&#22914;&#26524;<tt class="literal">'argNames'</tt>
              &#23646;&#24615;&#27809;&#26377;&#34987;&#25351;&#23450;&#65292;Spring AOP&#23558;&#26597;&#30475;&#31867;&#30340;debug&#20449;&#24687;&#24182;&#23581;&#35797;&#20174;&#26412;&#22320;&#30340;&#21464;&#37327;&#34920;&#30830;&#23450;&#21442;&#25968;&#21517;&#12290;&#21482;&#35201;&#31867;&#32534;&#35793;&#26102;&#26377;debug&#20449;&#24687;&#65292;
              &#65288;&#26368;&#23569;&#35201;&#26377;<tt class="literal">'-g:vars'</tt>&#65289;&#36825;&#20010;&#20449;&#24687;&#23558;&#20250;&#20986;&#29616;&#12290;&#25171;&#24320;&#36825;&#20010;&#26631;&#24535;&#32534;&#35793;&#30340;&#32467;&#26524;&#26159;&#65306;
              &#65288;1&#65289;&#20320;&#30340;&#20195;&#30721;&#31245;&#24494;&#23481;&#26131;&#29702;&#35299;&#65288;&#21453;&#21521;&#24037;&#31243;&#65289;&#65292;
              &#65288;2&#65289;class&#25991;&#20214;&#30340;&#22823;&#23567;&#31245;&#24494;&#26377;&#20123;&#22823;&#65288;&#36890;&#24120;&#19981;&#37325;&#35201;&#65289;&#65292;
              &#65288;3&#65289;&#20320;&#30340;&#32534;&#35793;&#22120;&#23558;&#19981;&#20250;&#24212;&#29992;&#20248;&#21270;&#21435;&#31227;&#38500;&#26410;&#20351;&#29992;&#30340;&#26412;&#22320;&#21464;&#37327;&#12290;&#25442;&#21477;&#35805;&#35828;&#65292;&#25171;&#24320;&#36825;&#20010;&#26631;&#24535;&#21019;&#24314;&#26102;&#20320;&#24212;&#24403;&#19981;&#20250;&#36935;&#21040;&#22256;&#38590;&#12290;</p><i><span class="remark">&#22914;&#26524;&#19968;&#20010;@AspectJ&#20999;&#38754;&#24050;&#32463;&#34987;AspectJ&#32534;&#35793;&#22120;&#65288;ajc&#65289;&#32534;&#35793;&#36807;&#65292;&#21363;&#20351;&#27809;&#26377;debug&#20449;&#24687;&#65292;
							&#20063;&#19981;&#38656;&#35201;&#28155;&#21152;<tt class="literal">argNames</tt>&#21442;&#25968;&#65292;&#22240;&#20026;&#32534;&#35793;&#22120;&#20250;&#20445;&#30041;&#24517;&#38656;&#30340;&#20449;&#24687;&#12290;
							</span></i></li><li><p>
							&#22914;&#26524;&#19981;&#21152;&#19978;&#24517;&#35201;&#30340;debug&#20449;&#24687;&#26469;&#32534;&#35793;&#30340;&#35805;&#65292;Spring AOP&#23558;&#20250;&#23581;&#35797;&#25512;&#26029;&#32465;&#23450;&#21464;&#37327;&#21040;&#21442;&#25968;&#30340;&#37197;&#23545;&#12290;
							&#65288;&#20363;&#22914;&#65292;&#35201;&#26159;&#21482;&#26377;&#19968;&#20010;&#21464;&#37327;&#34987;&#32465;&#23450;&#21040;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#65292;&#36890;&#30693;&#26041;&#27861;&#21482;&#25509;&#21463;&#19968;&#20010;&#21442;&#25968;&#65292; &#37197;&#23545;&#26159;&#26174;&#32780;&#26131;&#35265;&#30340;&#65289;&#12290;
							&#22914;&#26524;&#21464;&#37327;&#30340;&#32465;&#23450;&#19981;&#26126;&#30830;&#65292;&#23558;&#20250;&#25243;&#20986;&#19968;&#20010;<tt class="classname">AmbiguousBindingException</tt>&#24322;&#24120;&#12290;
							</p></li><li><p>&#22914;&#26524;&#20197;&#19978;&#25152;&#26377;&#31574;&#30053;&#37117;&#22833;&#36133;&#20102;&#65292;&#23558;&#20250;&#25243;&#20986;&#19968;&#20010;<tt class="classname">IllegalArgumentException</tt>&#24322;&#24120;&#12290;</p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="aop-ataspectj-advice-proceeding-with-the-call"></a>6.2.4.6.4.&nbsp;&#22788;&#29702;&#21442;&#25968;</h5></div></div><div></div></div><p>&#25105;&#20204;&#20043;&#21069;&#25552;&#36807;&#25105;&#20204;&#23558;&#20250;&#35752;&#35770;&#22914;&#20309;&#32534;&#20889;&#19968;&#20010;<span class="emphasis"><em>&#24102;&#21442;&#25968;&#30340;</em></span>&#30340;proceed()&#35843;&#29992;&#65292;
          &#20351;&#24471;&#22312;Spring AOP&#21644;AspectJ&#20013;&#37117;&#33021;&#27491;&#24120;&#24037;&#20316;&#12290;&#35299;&#20915;&#26041;&#27861;&#26159;&#20165;&#20165;&#30830;&#20445;&#36890;&#30693;&#31614;&#21517;&#25353;&#39034;&#24207;&#32465;&#23450;&#26041;&#27861;&#21442;&#25968;&#12290;&#20363;&#22914;&#65306;
					</p><pre class="programlisting">@Around&#65288;"execution&#65288;List&lt;Account&gt; find*&#65288;..&#65289;&#65289; &amp;&amp;" +
        "com.xyz.myapp.SystemArchitecture.inDataAccessLayer&#65288;&#65289; &amp;&amp; " +
        "args&#65288;accountHolderNamePattern&#65289;"&#65289;		
public Object preProcessQueryPattern&#65288;ProceedingJoinPoint pjp, String accountHolderNamePattern&#65289;
throws Throwable {
  String newPattern = preProcess&#65288;accountHolderNamePattern&#65289;;
  return pjp.proceed&#65288;new Object[] {newPattern}&#65289;;
}        
</pre><p>&#22823;&#22810;&#25968;&#24773;&#20917;&#19979;&#20320;&#37117;&#20250;&#36825;&#26679;&#32465;&#23450;&#65288;&#23601;&#20687;&#19978;&#38754;&#30340;&#20363;&#23376;&#37027;&#26679;&#65289;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-ataspectj-advice-ordering"></a>6.2.4.7.&nbsp;&#36890;&#30693;&#39034;&#24207;</h4></div></div><div></div></div><p>
				&#22914;&#26524;&#26377;&#22810;&#20010;&#36890;&#30693;&#24819;&#35201;&#22312;&#21516;&#19968;&#36830;&#25509;&#28857;&#36816;&#34892;&#20250;&#21457;&#29983;&#20160;&#20040;&#65311;Spring AOP&#36981;&#24490;&#36319;AspectJ&#19968;&#26679;&#30340;&#20248;&#20808;&#35268;&#21017;&#26469;&#30830;&#23450;&#36890;&#30693;&#25191;&#34892;&#30340;&#39034;&#24207;&#12290;
				&#22312;&#8220;&#36827;&#20837;&#8221;&#36830;&#25509;&#28857;&#30340;&#24773;&#20917;&#19979;&#65292;&#26368;&#39640;&#20248;&#20808;&#32423;&#30340;&#36890;&#30693;&#20250;&#20808;&#25191;&#34892;&#65288;&#25152;&#20197;&#32473;&#23450;&#30340;&#20004;&#20010;&#21069;&#32622;&#36890;&#30693;&#20013;&#65292;&#20248;&#20808;&#32423;&#39640;&#30340;&#37027;&#20010;&#20250;&#20808;&#25191;&#34892;&#65289;&#12290;
				&#22312;&#8220;&#36864;&#20986;&#8221;&#36830;&#25509;&#28857;&#30340;&#24773;&#20917;&#19979;&#65292;&#26368;&#39640;&#20248;&#20808;&#32423;&#30340;&#36890;&#30693;&#20250;&#26368;&#21518;&#25191;&#34892;&#12290;&#65288;&#25152;&#20197;&#32473;&#23450;&#30340;&#20004;&#20010;&#21518;&#32622;&#36890;&#30693;&#20013;&#65292;
			  &#20248;&#20808;&#32423;&#39640;&#30340;&#37027;&#20010;&#20250;&#31532;&#20108;&#20010;&#25191;&#34892;&#65289;&#12290;</p><p>&#24403;&#23450;&#20041;&#22312;<span class="emphasis"><em>&#19981;&#21516;&#30340;</em></span>&#20999;&#38754;&#37324;&#30340;&#20004;&#20010;&#36890;&#30693;&#37117;&#38656;&#35201;&#22312;&#19968;&#20010;&#30456;&#21516;&#30340;&#36830;&#25509;&#28857;&#20013;&#36816;&#34892;&#65292;
        &#37027;&#20040;&#38500;&#38750;&#20320;&#25351;&#23450;&#65292;&#21542;&#21017;&#25191;&#34892;&#30340;&#39034;&#24207;&#26159;&#26410;&#30693;&#30340;&#12290;&#20320;&#21487;&#20197;&#36890;&#36807;&#25351;&#23450;&#20248;&#20808;&#32423;&#26469;&#25511;&#21046;&#25191;&#34892;&#39034;&#24207;&#12290;
        &#22312;&#26631;&#20934;&#30340;Spring&#26041;&#27861;&#20013;&#21487;&#20197;&#22312;&#20999;&#38754;&#31867;&#20013;&#23454;&#29616;<tt class="interfacename">org.springframework.core.Ordered</tt>
        &#25509;&#21475;&#25110;&#32773;&#29992;<tt class="interfacename">Order</tt>&#27880;&#35299;&#20570;&#21040;&#36825;&#19968;&#28857;&#12290;&#22312;&#20004;&#20010;&#20999;&#38754;&#20013;&#65292;
        <tt class="literal">Ordered.getValue()</tt>&#26041;&#27861;&#36820;&#22238;&#20540;&#65288;&#25110;&#32773;&#27880;&#35299;&#20540;&#65289;&#36739;&#20302;&#30340;&#37027;&#20010;&#26377;&#26356;&#39640;&#30340;&#20248;&#20808;&#32423;&#12290;
				</p><p>&#24403;&#23450;&#20041;&#22312;<span class="emphasis"><em>&#30456;&#21516;&#30340;</em></span>&#20999;&#38754;&#37324;&#30340;&#20004;&#20010;&#36890;&#30693;&#37117;&#38656;&#35201;&#22312;&#19968;&#20010;&#30456;&#21516;&#30340;&#36830;&#25509;&#28857;&#20013;&#36816;&#34892;&#65292;
        &#25191;&#34892;&#30340;&#39034;&#24207;&#26159;&#26410;&#30693;&#30340;&#65288;&#22240;&#20026;&#36825;&#37324;&#27809;&#26377;&#26041;&#27861;&#36890;&#36807;&#21453;&#23556;javac&#32534;&#35793;&#30340;&#31867;&#26469;&#33719;&#21462;&#22768;&#26126;&#39034;&#24207;&#65289;&#12290;
        &#32771;&#34385;&#22312;&#27599;&#20010;&#20999;&#38754;&#31867;&#20013;&#25353;&#36830;&#25509;&#28857;&#21387;&#32553;&#36825;&#20123;&#36890;&#30693;&#26041;&#27861;&#21040;&#19968;&#20010;&#36890;&#30693;&#26041;&#27861;&#65292;&#25110;&#32773;&#37325;&#26500;&#36890;&#30693;&#30340;&#29255;&#27573;&#21040;&#21508;&#33258;&#30340;&#20999;&#38754;&#31867;&#20013; - 
        &#23427;&#33021;&#22312;&#20999;&#38754;&#32423;&#21035;&#36827;&#34892;&#25490;&#24207;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-introductions"></a>6.2.5.&nbsp;&#24341;&#20837;&#65288;Introduction&#65289;</h3></div></div><div></div></div><p>&#24341;&#20837;&#65288;&#22312;AspectJ&#20013;&#34987;&#31216;&#20026;inter-type&#22768;&#26126;&#65289;&#20351;&#24471;&#19968;&#20010;&#20999;&#38754;&#21487;&#20197;&#23450;&#20041;&#34987;&#36890;&#30693;&#23545;&#35937;&#23454;&#29616;&#32473;&#23450;&#30340;&#25509;&#21475;&#65292;
      &#24182;&#19988;&#21487;&#20197;&#20026;&#37027;&#20123;&#23545;&#35937;&#25552;&#20379;&#20855;&#20307;&#30340;&#23454;&#29616;&#12290;
			</p><p>&#20351;&#29992;<tt class="interfacename">@DeclareParents</tt>&#27880;&#35299;&#26469;&#23450;&#20041;&#24341;&#20837;&#12290;&#36825;&#20010;&#27880;&#35299;&#29992;&#26469;&#23450;&#20041;&#21305;&#37197;&#30340;&#31867;&#22411;
      &#25317;&#26377;&#19968;&#20010;&#26032;&#30340;&#29238;&#31867;&#65288;&#25152;&#20197;&#26377;&#20102;&#36825;&#20010;&#21517;&#23383;&#65289;&#12290;&#27604;&#22914;&#65292;&#32473;&#23450;&#19968;&#20010;&#25509;&#21475;<tt class="interfacename">UsageTracked</tt>&#65292;
			&#21644;&#25509;&#21475;&#30340;&#20855;&#20307;&#23454;&#29616;<tt class="classname">DefaultUsageTracked</tt>&#31867;&#65292;
			&#25509;&#19979;&#26469;&#30340;&#20999;&#38754;&#22768;&#26126;&#20102;&#25152;&#26377;&#30340;service&#25509;&#21475;&#30340;&#23454;&#29616;&#37117;&#23454;&#29616;&#20102;<tt class="interfacename">UsageTracked</tt>&#25509;&#21475;&#12290;
			&#65288;&#27604;&#22914;&#20026;&#20102;&#36890;&#36807;JMX&#36755;&#20986;&#32479;&#35745;&#20449;&#24687;&#65289;&#12290;
			</p><pre class="programlisting">@Aspect
public class UsageTracking {

  @DeclareParents&#65288;value="com.xzy.myapp.service.*+",
                  defaultImpl=DefaultUsageTracked.class&#65289;
  public static UsageTracked mixin;
  
  @Before&#65288;"com.xyz.myapp.SystemArchitecture.businessService&#65288;&#65289; &amp;&amp;" +
          "this&#65288;usageTracked&#65289;"&#65289;
  public void recordUsage&#65288;UsageTracked usageTracked&#65289; {
    usageTracked.incrementUseCount&#65288;&#65289;;
  }
  
}</pre><p>&#23454;&#29616;&#30340;&#25509;&#21475;&#36890;&#36807;&#34987;&#27880;&#35299;&#30340;&#23383;&#27573;&#31867;&#22411;&#26469;&#20915;&#23450;&#12290;<tt class="interfacename">@DeclareParents</tt>&#27880;&#35299;&#30340;
      <tt class="literal">value</tt>&#23646;&#24615;&#26159;&#19968;&#20010;AspectJ&#30340;&#31867;&#22411;&#27169;&#24335;&#65306;- &#20219;&#20309;&#21305;&#37197;&#31867;&#22411;&#30340;bean&#37117;&#20250;&#23454;&#29616;
			<tt class="interfacename">UsageTracked</tt>&#25509;&#21475;&#12290;&#35831;&#27880;&#24847;&#65292;&#22312;&#19978;&#38754;&#30340;&#21069;&#32622;&#36890;&#30693;&#30340;&#20363;&#23376;&#20013;&#65292;service beans
			&#21487;&#20197;&#30452;&#25509;&#29992;&#20316;<tt class="interfacename">UsageTracked</tt>&#25509;&#21475;&#30340;&#23454;&#29616;&#12290;&#22914;&#26524;&#38656;&#35201;&#32534;&#31243;&#24335;&#30340;&#26469;&#35775;&#38382;&#19968;&#20010;bean&#65292;
			&#20320;&#21487;&#20197;&#36825;&#26679;&#20889;&#65306;</p><pre class="programlisting">UsageTracked usageTracked = &#65288;UsageTracked&#65289; context.getBean&#65288;"myService"&#65289;;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-instantiation-models"></a>6.2.6.&nbsp;&#20999;&#38754;&#23454;&#20363;&#21270;&#27169;&#22411;</h3></div></div><div></div></div><i><span class="remark">&#65288;&#36825;&#26159;&#19968;&#20010;&#39640;&#32423;&#20027;&#39064;&#65292;&#25152;&#20197;&#22914;&#26524;&#20320;&#21018;&#24320;&#22987;&#23398;&#20064;AOP&#20320;&#21487;&#20197;&#36339;&#36807;&#23427;&#21040;&#21518;&#38754;&#30340;&#31456;&#33410;&#65289;</span></i><p>&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#22312;application context&#20013;&#27599;&#19968;&#20010;&#20999;&#38754;&#37117;&#20250;&#26377;&#19968;&#20010;&#23454;&#20363;&#12290;AspectJ&#25226;&#36825;&#20010;&#21483;&#20570;&#21333;&#20363;&#21270;&#27169;&#22411;&#12290;
			&#20063;&#21487;&#20197;&#29992;&#20854;&#20182;&#30340;&#29983;&#21629;&#21608;&#26399;&#26469;&#23450;&#20041;&#20999;&#38754;&#65306;Spring&#25903;&#25345;AspectJ&#30340; <tt class="literal">perthis</tt>
			&#21644;<tt class="literal">pertarget</tt>&#23454;&#20363;&#21270;&#27169;&#22411;&#65288;&#29616;&#22312;&#36824;&#19981;&#25903;&#25345;<tt class="literal">percflow&#12289;percflowbelow</tt>
			&#21644;<tt class="literal">pertypewithin</tt>&#65289;&#12290;
	    </p><p>&#19968;&#20010;"perthis" &#20999;&#38754;&#36890;&#36807;&#22312;<tt class="interfacename">@Aspect</tt>&#27880;&#35299;&#20013;&#25351;&#23450;<tt class="literal">perthis</tt>
      &#23376;&#21477;&#26469;&#22768;&#26126;&#12290;&#35753;&#25105;&#20204;&#20808;&#26469;&#30475;&#19968;&#20010;&#20363;&#23376;&#65292;&#28982;&#21518;&#35299;&#37322;&#23427;&#26159;&#22914;&#20309;&#36816;&#20316;&#30340;&#65306;
	    </p><pre class="programlisting">@Aspect&#65288;"perthis&#65288;com.xyz.myapp.SystemArchitecture.businessService&#65288;&#65289;&#65289;"&#65289;
public class MyAspect {

  private int someState;
	
  @Before&#65288;com.xyz.myapp.SystemArchitecture.businessService&#65288;&#65289;&#65289;
  public void recordServiceUsage&#65288;&#65289; {
    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
  }
  	
}</pre><p>&#36825;&#20010;<tt class="literal">'perthis'</tt>&#23376;&#21477;&#30340;&#25928;&#26524;&#26159;&#27599;&#20010;&#29420;&#31435;&#30340;service&#23545;&#35937;&#25191;&#34892;&#19968;&#20010;&#19994;&#21153;&#26102;&#37117;&#20250;
		  &#21019;&#24314;&#19968;&#20010;&#20999;&#38754;&#23454;&#20363;&#65288;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#25152;&#21305;&#37197;&#30340;&#36830;&#25509;&#28857;&#19978;&#30340;&#27599;&#19968;&#20010;&#29420;&#31435;&#30340;&#23545;&#35937;&#37117;&#20250;&#32465;&#23450;&#21040;'this'&#19978;&#65289;&#12290;
			&#22312;service&#23545;&#35937;&#19978;&#31532;&#19968;&#27425;&#35843;&#29992;&#26041;&#27861;&#30340;&#26102;&#20505;&#65292;&#20999;&#38754;&#23454;&#20363;&#23558;&#34987;&#21019;&#24314;&#12290;&#20999;&#38754;&#22312;service&#23545;&#35937;&#22833;&#25928;&#30340;&#21516;&#26102;&#22833;&#25928;&#12290;
			&#22312;&#20999;&#38754;&#23454;&#20363;&#34987;&#21019;&#24314;&#21069;&#65292;&#25152;&#26377;&#30340;&#36890;&#30693;&#37117;&#19981;&#20250;&#34987;&#25191;&#34892;&#65292;&#19968;&#26086;&#20999;&#38754;&#23545;&#35937;&#21019;&#24314;&#23436;&#25104;&#65292;
		  &#23450;&#20041;&#30340;&#36890;&#30693;&#23558;&#20250;&#22312;&#21305;&#37197;&#30340;&#36830;&#25509;&#28857;&#19978;&#25191;&#34892;&#65292;&#20294;&#26159;&#21482;&#26377;&#24403;service&#23545;&#35937;&#26159;&#21644;&#20999;&#38754;&#20851;&#32852;&#30340;&#25165;&#21487;&#20197;&#12290;
			&#35831;&#21442;&#38405; AspectJ &#32534;&#31243;&#25351;&#21335;&#20102;&#35299;&#26356;&#22810;&#20851;&#20110;per-clauses&#30340;&#20449;&#24687;&#12290;
			</p><p><tt class="literal">'pertarget'</tt>&#23454;&#20363;&#27169;&#22411;&#30340;&#36319;&#8220;perthis&#8221;&#23436;&#20840;&#19968;&#26679;&#65292;&#21482;&#19981;&#36807;&#26159;&#20026;&#27599;&#20010;&#21305;&#37197;&#20110;&#36830;&#25509;&#28857;
      &#30340;&#29420;&#31435;&#30446;&#26631;&#23545;&#35937;&#21019;&#24314;&#19968;&#20010;&#20999;&#38754;&#23454;&#20363;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-ataspectj-example"></a>6.2.7.&nbsp;&#20363;&#23376;</h3></div></div><div></div></div><p>&#29616;&#22312;&#20320;&#24050;&#32463;&#30475;&#21040;&#20102;&#27599;&#20010;&#29420;&#31435;&#30340;&#37096;&#20998;&#26159;&#22914;&#20309;&#36816;&#20316;&#30340;&#20102;&#65292;&#26159;&#26102;&#20505;&#25226;&#20182;&#20204;&#25918;&#21040;&#19968;&#36215;&#20570;&#19968;&#20123;&#26377;&#29992;&#30340;&#20107;&#24773;&#20102;&#65281;</p><p>&#22240;&#20026;&#24182;&#21457;&#30340;&#38382;&#39064;&#65292;&#26377;&#26102;&#20505;&#19994;&#21153;&#26381;&#21153;&#65288;business services&#65289;&#21487;&#33021;&#20250;&#22833;&#36133;&#65288;&#20363;&#22914;&#65292;&#27515;&#38145;&#22833;&#36133;&#65289;&#12290;&#22914;&#26524;&#37325;&#26032;&#23581;&#35797;&#19968;&#19979;&#65292;
			&#24456;&#26377;&#21487;&#33021;&#23601;&#20250;&#25104;&#21151;&#12290;&#23545;&#20110;&#19994;&#21153;&#26381;&#21153;&#26469;&#35828;&#65292;&#37325;&#35797;&#20960;&#27425;&#26159;&#24456;&#27491;&#24120;&#30340;&#65288;Idempotent&#25805;&#20316;&#19981;&#38656;&#35201;&#29992;&#25143;&#21442;&#19982;&#65292;&#21542;&#21017;&#20250;&#24471;&#20986;&#30683;&#30462;&#30340;&#32467;&#35770;&#65289;
			&#25105;&#20204;&#21487;&#33021;&#38656;&#35201;&#36879;&#26126;&#30340;&#37325;&#35797;&#25805;&#20316;&#20197;&#36991;&#20813;&#23458;&#25143;&#30475;&#21040;&#19968;&#20010;<tt class="classname">PessimisticLockingFailureException</tt>&#24322;&#24120;&#12290; 
			&#24456;&#26126;&#26174;&#65292;&#22312;&#19968;&#20010;&#27178;&#20999;&#22810;&#23618;&#30340;&#24773;&#20917;&#19979;&#65292;&#36825;&#26159;&#38750;&#24120;&#26377;&#24517;&#35201;&#30340;&#65292;&#22240;&#27492;&#36890;&#36807;&#20999;&#38754;&#26469;&#23454;&#29616;&#26159;&#24456;&#29702;&#24819;&#30340;&#12290;
			</p><p>&#22240;&#20026;&#25105;&#20204;&#24819;&#35201;&#37325;&#35797;&#25805;&#20316;&#65292;&#25105;&#20204;&#20250;&#38656;&#35201;&#20351;&#29992;&#21040;&#29615;&#32469;&#36890;&#30693;&#65292;&#36825;&#26679;&#25105;&#20204;&#23601;&#21487;&#20197;&#22810;&#27425;&#35843;&#29992;proceed()&#26041;&#27861;&#12290;
			&#19979;&#38754;&#26159;&#31616;&#21333;&#30340;&#20999;&#38754;&#23454;&#29616;&#65306;</p><pre class="programlisting">@Aspect
public class ConcurrentOperationExecutor implements Ordered {
   
   private static final int DEFAULT_MAX_RETRIES = 2;

   private int maxRetries = DEFAULT_MAX_RETRIES;
   private int order = 1;

   public void setMaxRetries&#65288;int maxRetries&#65289; {
      this.maxRetries = maxRetries;
   }
   
   public int getOrder&#65288;&#65289; {
      return this.order;
   }
   
   public void setOrder&#65288;int order&#65289; {
      this.order = order;
   }
   
   @Around&#65288;"com.xyz.myapp.SystemArchitecture.businessService&#65288;&#65289;"&#65289;
   public Object doConcurrentOperation&#65288;ProceedingJoinPoint pjp&#65289; throws Throwable { 
      int numAttempts = 0;
      PessimisticLockingFailureException lockFailureException;
      do {
         numAttempts++;
         try { 
            return pjp.proceed&#65288;&#65289;;
         }
         catch&#65288;PessimisticLockingFailureException ex&#65289; {
            lockFailureException = ex;
         }
      }
      while&#65288;numAttempts &lt;= this.maxRetries&#65289;;
      throw lockFailureException;
   }

}</pre><p>
			&#35831;&#27880;&#24847;&#20999;&#38754;&#23454;&#29616;&#20102; <tt class="interfacename">Ordered</tt> &#25509;&#21475;&#65292;&#36825;&#26679;&#25105;&#20204;&#23601;&#21487;&#20197;&#25226;&#20999;&#38754;&#30340;&#20248;&#20808;&#32423;&#35774;&#23450;&#20026;&#39640;&#20110;&#20107;&#21153;&#36890;&#30693;
			&#65288;&#25105;&#20204;&#27599;&#27425;&#37325;&#35797;&#30340;&#26102;&#20505;&#37117;&#24819;&#35201;&#22312;&#19968;&#20010;&#20840;&#26032;&#30340;&#20107;&#21153;&#20013;&#36827;&#34892;&#65289;&#12290;<tt class="literal">maxRetries</tt>&#21644;<tt class="literal">order</tt>
			&#23646;&#24615;&#37117;&#21487;&#20197;&#22312;Spring&#20013;&#37197;&#32622;&#12290;&#20027;&#35201;&#30340;&#21160;&#20316;&#22312;<tt class="literal">doConcurrentOperation</tt>&#36825;&#20010;&#29615;&#32469;&#36890;&#30693;&#26041;&#27861;&#20013;&#21457;&#29983;&#12290;
			&#35831;&#27880;&#24847;&#36825;&#20010;&#26102;&#20505;&#25105;&#20204;&#25152;&#26377;&#30340;<tt class="literal">businessService()</tt>&#26041;&#27861;&#37117;&#20250;&#20351;&#29992;&#36825;&#20010;&#37325;&#35797;&#31574;&#30053;&#12290;
			&#25105;&#20204;&#39318;&#20808;&#20250;&#23581;&#35797;&#22788;&#29702;&#65292;&#22914;&#26524;&#24471;&#21040;&#19968;&#20010;<tt class="classname">PessimisticLockingFailureException</tt>&#24322;&#24120;&#65292;
			&#25105;&#20204;&#20165;&#20165;&#37325;&#35797;&#30452;&#21040;&#32791;&#23613;&#25152;&#26377;&#39044;&#35774;&#30340;&#37325;&#35797;&#27425;&#25968;&#12290;
			</p><p>&#23545;&#24212;&#30340;Spring&#37197;&#32622;&#22914;&#19979;&#65306;</p><pre class="programlisting">&lt;aop:aspectj-autoproxy/&gt;

&lt;bean id="concurrentOperationExecutor"
  class="com.xyz.myapp.service.impl.ConcurrentOperationExecutor"&gt;
     &lt;property name="maxRetries" value="3"/&gt;
     &lt;property name="order" value="100"/&gt;  
&lt;/bean&gt;</pre><p>&#20026;&#25913;&#36827;&#20999;&#38754;&#65292;&#20351;&#20043;&#20165;&#20165;&#37325;&#35797;idempotent&#25805;&#20316;&#65292;&#25105;&#20204;&#21487;&#20197;&#23450;&#20041;&#19968;&#20010;
      <tt class="interfacename">Idempotent</tt>&#27880;&#35299;&#65306;</p><pre class="programlisting">@Retention&#65288;RetentionPolicy.RUNTIME&#65289;
public @interface Idempotent {
  <i class="lineannotation"><span class="lineannotation">// marker annotation</span></i>
}</pre><p>&#24182;&#19988;&#23545;service&#25805;&#20316;&#30340;&#23454;&#29616;&#36827;&#34892;&#27880;&#35299;&#12290;&#20026;&#20102;&#21482;&#37325;&#35797;idempotent&#25805;&#20316;&#65292;&#20999;&#38754;&#30340;&#20462;&#25913;&#21482;&#38656;&#35201;&#25913;&#20889;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#65292;
			&#20351;&#24471;&#21482;&#21305;&#37197;<tt class="interfacename">@Idempotent</tt>&#25805;&#20316;&#65306;
			</p><pre class="programlisting">@Around&#65288;"com.xyz.myapp.SystemArchitecture.businessService&#65288;&#65289; &amp;&amp; " + 
        "@annotation&#65288;com.xyz.myapp.service.Idempotent&#65289;"&#65289;
public Object doConcurrentOperation&#65288;ProceedingJoinPoint pjp&#65289; throws Throwable { 
  ...	
}</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="aop-schema"></a>6.3.&nbsp;&#22522;&#20110;Schema&#30340;AOP&#25903;&#25345;</h2></div></div><div></div></div>

    
&#12288;&#12288;<p>&#22914;&#26524;&#20320;&#26080;&#27861;&#20351;&#29992;Java 5&#65292;&#25110;&#32773;&#20320;&#27604;&#36739;&#21916;&#27426;&#20351;&#29992;XML&#26684;&#24335;&#65292;Spring2.0&#20063;&#25552;&#20379;&#20102;&#20351;&#29992;&#26032;&#30340;"aop"&#21629;&#21517;&#31354;&#38388;&#26469;&#23450;&#20041;&#19968;&#20010;&#20999;&#38754;&#12290;
	  &#21644;&#20351;&#29992;@AspectJ&#39118;&#26684;&#23436;&#20840;&#19968;&#26679;&#65292;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#21644;&#36890;&#30693;&#31867;&#22411;&#21516;&#26679;&#24471;&#21040;&#20102;&#25903;&#25345;&#65292;&#22240;&#27492;&#22312;&#36825;&#19968;&#33410;&#20013;&#25105;&#20204;&#23558;&#30528;&#37325;&#20171;&#32461;&#26032;&#30340;
	  <span class="emphasis"><em>&#35821;&#27861;</em></span>&#24182;&#22238;&#39038;&#21069;&#19968;&#33410;&#65288;<a href="#aop-ataspectj" title="6.2.&nbsp;@AspectJ&#25903;&#25345;">Section&nbsp;6.2, &#8220;@AspectJ&#25903;&#25345;&#8221;</a>)&#23545;&#32534;&#20889;&#19968;&#20010;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#21644;&#32465;&#23450;&#36890;&#30693;&#21442;&#25968;&#30340;&#35752;&#35770;&#12290;
	  </p>
   
&#12288;&#12288;<p>&#20351;&#29992;&#26412;&#31456;&#25152;&#20171;&#32461;&#30340;aop&#21629;&#21517;&#31354;&#38388;&#26631;&#31614;&#65292;&#20320;&#38656;&#35201;&#24341;&#20837;<a href="#xsd-config" title="Appendix&nbsp;A.&nbsp;XML Schema-based configuration">Appendix&nbsp;A, <i>XML Schema-based configuration</i></a>&#20013;&#25552;&#21450;&#30340;spring-aop schema&#12290;
	  &#21442;&#35265;<a href="#xsd-config-body-schemas-aop" title="A.2.7.&nbsp;The aop schema">Section&nbsp;A.2.7, &#8220;The aop schema&#8221;</a>&#20102;&#35299;&#22914;&#20309;&#22312;aop&#21629;&#21517;&#31354;&#38388;&#20013;&#24341;&#20837;&#26631;&#31614;&#12290;
	  </p>
    
&#12288;&#12288;<p>&#22312;Spring&#30340;&#37197;&#32622;&#25991;&#20214;&#20013;&#65292;&#25152;&#26377;&#30340;&#20999;&#38754;&#21644;&#36890;&#30693;&#37117;&#24517;&#39035;&#23450;&#20041;&#22312;<tt class="literal">&lt;aop:config&gt;</tt>&#20803;&#32032;&#20869;&#37096;&#12290;
		&#65288;&#19968;&#20010;application context&#21487;&#20197;&#21253;&#21547;&#22810;&#20010; <tt class="literal">&lt;aop:config&gt;</tt>&#65289;&#12290;
		&#19968;&#20010;<tt class="literal">&lt;aop:config&gt;</tt>&#21487;&#20197;&#21253;&#21547;pointcut&#65292;advisor&#21644;aspect&#20803;&#32032;
		&#65288;&#27880;&#24847;&#36825;&#19977;&#20010;&#20803;&#32032;&#24517;&#39035;&#25353;&#29031;&#36825;&#20010;&#39034;&#24207;&#36827;&#34892;&#22768;&#26126;&#65289;&#12290;
	</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Warning" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Warning]" src="warning.png"></td><th align="left">Warning</th></tr><tr><td colspan="2" valign="top" align="left"><p><tt class="literal">&lt;aop:config&gt;</tt>&#39118;&#26684;&#30340;&#37197;&#32622;&#20351;&#24471;Spring
      <a href="#aop-autoproxy" title="7.9.&nbsp;&#20351;&#29992;&#8220;&#33258;&#21160;&#20195;&#29702;&#65288;autoproxy&#65289;&#8221;&#21151;&#33021;">auto-proxying</a>&#26426;&#21046;&#30340;&#20351;&#29992;&#21464;&#24471;&#24456;&#31528;&#37325;&#12290;&#22914;&#26524;&#20320;&#24050;&#32463;&#36890;&#36807;
      <tt class="classname">BeanNameAutoProxyCreator</tt>&#25110;&#31867;&#20284;&#30340;&#19996;&#35199;&#26174;&#24335;&#20351;&#29992;auto-proxying&#65292;&#23427;&#21487;&#33021;&#20250;&#23548;&#33268;&#38382;&#39064;
      &#65288;&#20363;&#22914;&#36890;&#30693;&#27809;&#26377;&#34987;&#32455;&#20837;&#65289;&#12290; &#25512;&#33616;&#30340;&#20351;&#29992;&#27169;&#24335;&#26159;&#20165;&#20165;&#20351;&#29992;<tt class="literal">&lt;aop:config&gt;</tt>&#39118;&#26684;&#65292;
      &#25110;&#32773;&#20165;&#20165;&#20351;&#29992;<tt class="interfacename">AutoProxyCreator</tt>&#39118;&#26684;&#12290;</p></td></tr></tbody></table></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-schema-declaring-an-aspect"></a>6.3.1.&nbsp;&#22768;&#26126;&#19968;&#20010;&#20999;&#38754;</h3></div></div><div></div></div>

&#12288;&#12288;&#12288;<p>&#26377;&#20102;schema&#30340;&#25903;&#25345;&#65292;&#20999;&#38754;&#23601;&#21644;&#24120;&#35268;&#30340;Java&#23545;&#35937;&#19968;&#26679;&#34987;&#23450;&#20041;&#25104;application context&#20013;&#30340;&#19968;&#20010;bean&#12290;
	&#12288;  &#23545;&#35937;&#30340;&#23383;&#27573;&#21644;&#26041;&#27861;&#25552;&#20379;&#20102;&#29366;&#24577;&#21644;&#34892;&#20026;&#20449;&#24687;&#65292;XML&#25991;&#20214;&#21017;&#25552;&#20379;&#20102;&#20999;&#20837;&#28857;&#21644;&#36890;&#30693;&#20449;&#24687;&#12290;</p>
	&#12288;  <p>&#20999;&#38754;&#20351;&#29992;&lt;aop:aspect&gt;&#26469;&#22768;&#26126;&#65292;backing bean&#65288;&#25903;&#25345;bean&#65289;&#36890;&#36807; <tt class="literal">ref</tt> &#23646;&#24615;&#26469;&#24341;&#29992;&#65306;</p><pre class="programlisting">&lt;aop:config&gt;
  &lt;aop:aspect id="myAspect" ref="aBean"&gt;
    ...
  &lt;/aop:aspect&gt;
&lt;/aop:config&gt;

&lt;bean id="aBean" class="..."&gt;
  ...
&lt;/bean&gt;</pre><p>&#20999;&#38754;&#30340;&#25903;&#25345;bean&#65288;&#19978;&#20363;&#20013;&#30340;"<tt class="literal">aBean</tt>"&#65289;&#21487;&#20197;&#35937;&#20854;&#20182;Spring bean&#19968;&#26679;&#34987;&#23481;&#22120;&#31649;&#29702;&#37197;&#32622;&#20197;&#21450;&#20381;&#36182;&#27880;&#20837;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-schema-pointcuts"></a>6.3.2.&nbsp;&#22768;&#26126;&#19968;&#20010;&#20999;&#20837;&#28857;</h3></div></div><div></div></div>

&#12288;&#12288;&#12288;<p>&#19968;&#20010;&#21629;&#21517;&#20999;&#20837;&#28857;&#21487;&#20197;&#22312;&lt;aop:config&gt;&#20803;&#32032;&#20013;&#23450;&#20041;&#65292;&#36825;&#26679;&#22810;&#20010;&#20999;&#38754;&#21644;&#36890;&#30693;&#23601;&#21487;&#20197;&#20849;&#20139;&#35813;&#20999;&#20837;&#28857;&#12290;</p>
	&#12288;  <p>&#19968;&#20010;&#25551;&#36848;service&#23618;&#20013;&#25152;&#26377;service&#25191;&#34892;&#30340;&#20999;&#20837;&#28857;&#21487;&#20197;&#23450;&#20041;&#22914;&#19979;&#65306;</p><pre class="programlisting">&lt;aop:config&gt;

  &lt;aop:pointcut id="businessService" 
        expression="execution&#65288;* com.xyz.myapp.service.*.*&#65288;..&#65289;&#65289;"/&gt;

&lt;/aop:config&gt;</pre>

&#12288;&#12288;&#12288;<p>&#27880;&#24847;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#26412;&#36523;&#20351;&#29992;&#20102;&#19982;<a href="#aop-ataspectj" title="6.2.&nbsp;@AspectJ&#25903;&#25345;">Section&nbsp;6.2, &#8220;@AspectJ&#25903;&#25345;&#8221;</a>&#20013;&#25551;&#36848;&#30340;&#30456;&#21516;&#30340;AspectJ&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#35821;&#35328;&#12290;
	&#12288;  &#22914;&#26524;&#20320;&#22312;Java 5&#29615;&#22659;&#19979;&#20351;&#29992;&#22522;&#20110;schema&#30340;&#22768;&#26126;&#39118;&#26684;&#65292;&#21487;&#21442;&#32771;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#31867;&#22411;&#65288;@Aspects&#65289;&#20013;&#23450;&#20041;&#30340;&#21629;&#21517;&#20999;&#20837;&#28857;&#65292;
	&#12288;  &#19981;&#36807;&#36825;&#20010;&#29305;&#24615;&#22312;JDK1.4&#21450;&#20197;&#19979;&#29256;&#26412;&#20013;&#26159;&#19981;&#21487;&#29992;&#30340;&#65288;&#22240;&#20026;&#20381;&#36182;&#20110;Java 5&#20013;&#30340;AspectJ&#21453;&#23556;API&#65289;&#12290;&#25152;&#20197;&#22312;JDK 1.5&#20013;&#65292;
	&#12288;  &#19978;&#38754;&#30340;&#20999;&#20837;&#28857;&#30340;&#21478;&#22806;&#19968;&#31181;&#23450;&#20041;&#24418;&#24335;&#22914;&#19979;&#65306;
	&#12288;  </p><pre class="programlisting">&lt;aop:config&gt;

  &lt;aop:pointcut id="businessService" 
        expression="com.xyz.myapp.SystemArchitecture.businessService&#65288;&#65289;"/&gt;

&lt;/aop:config&gt;</pre><p>&#20551;&#23450;&#20320;&#26377;&#19968;&#20010;&#22312;<a href="#aop-common-pointcuts" title="6.2.3.3.&nbsp;&#20849;&#20139;&#36890;&#29992;&#20999;&#20837;&#28857;&#23450;&#20041;">Section&nbsp;6.2.3.3, &#8220;&#20849;&#20139;&#36890;&#29992;&#20999;&#20837;&#28857;&#23450;&#20041;&#8221;</a>&#20013;
      &#25551;&#36848;&#30340;<tt class="literal">SystemArchitecture</tt>&#20999;&#38754;&#12290;</p><p>&#22312;&#20999;&#38754;&#37324;&#38754;&#22768;&#26126;&#19968;&#20010;&#20999;&#20837;&#28857;&#21644;&#22768;&#26126;&#19968;&#20010;&#39030;&#32423;&#30340;&#20999;&#20837;&#28857;&#38750;&#24120;&#31867;&#20284;&#65306;</p><pre class="programlisting">&lt;aop:config&gt;

  &lt;aop:aspect id="myAspect" ref="aBean"&gt;

    &lt;aop:pointcut id="businessService" 
          expression="execution&#65288;* com.xyz.myapp.service.*.*&#65288;..&#65289;&#65289;"/&gt;
          
    ...
    
  &lt;/aop:aspect&gt;

&lt;/aop:config&gt;</pre><p>&#20960;&#20046;&#21644;@AspectJ&#20999;&#38754;&#20013;&#30340;&#19968;&#26679;&#65292;&#20351;&#29992;&#22522;&#20110;schema&#23450;&#20041;&#39118;&#26684;&#22768;&#26126;&#30340;&#20999;&#20837;&#28857;&#21487;&#20197;&#25910;&#38598;(collect)
      &#36830;&#25509;&#28857;&#19978;&#19979;&#25991;&#12290;&#20363;&#22914;&#65292;&#19979;&#38754;&#30340;&#20999;&#20837;&#28857;&#25910;&#38598;'this'&#23545;&#35937;&#20316;&#20026;&#36830;&#25509;&#28857;&#19978;&#19979;&#25991;&#24182;&#20256;&#36882;&#23427;&#32473;&#36890;&#30693;&#65306;</p><pre class="programlisting">&lt;aop:config&gt;

  &lt;aop:aspect id="myAspect" ref="aBean"&gt;

    &lt;aop:pointcut id="businessService" 
          expression="execution&#65288;* com.xyz.myapp.service.*.*&#65288;..&#65289;&#65289; &amp;amp;&amp;amp; this&#65288;service&#65289;"/&gt;
    &lt;aop:before pointcut-ref="businessService" method="monitor"/&gt;
    ...
    
  &lt;/aop:aspect&gt;

&lt;/aop:config&gt;</pre>

&#12288;&#12288;&#12288;<p>&#36890;&#36807;&#21253;&#21547;&#21305;&#37197;&#21517;&#23383;&#30340;&#21442;&#25968;&#65292;&#36890;&#30693;&#34987;&#22768;&#26126;&#26469;&#25509;&#25910;&#25910;&#38598;&#30340;&#36830;&#25509;&#28857;&#19978;&#19979;&#25991;&#65306;</p><pre class="programlisting">public void monitor&#65288;Object service&#65289; {
    ...
}</pre>

&#12288;&#12288;&#12288;<p>&#24403;&#38656;&#35201;&#36830;&#25509;&#23376;&#34920;&#36798;&#24335;&#30340;&#26102;&#20505;&#65292;'&amp;&amp;'&#22312;XML&#20013;&#29992;&#36215;&#26469;&#38750;&#24120;&#19981;&#26041;&#20415;&#65292;&#25152;&#20197;&#20851;&#38190;&#23383;'and', 'or' &#21644; 'not'&#21487;&#20197;&#20998;&#21035;&#29992;&#26469;&#20195;&#26367;'&amp;&amp;', '||' &#21644; '!'&#12290;&#20363;&#22914;&#65292;&#19978;&#38754;&#20999;&#20837;&#28857;&#26356;&#22909;&#30340;&#20889;&#27861;&#22914;&#19979;&#65306;</p><pre class="programlisting">&lt;aop:config&gt;

  &lt;aop:aspect id="myAspect" ref="aBean"&gt;

    &lt;aop:pointcut id="businessService" 
          expression="execution&#65288;* com.xyz.myapp.service.*.*&#65288;..&#65289;&#65289; <span class="bold"><b>and</b></span> this&#65288;service&#65289;"/&gt;
    &lt;aop:before pointcut-ref="businessService" method="monitor"/&gt;
    ...
    
  &lt;/aop:aspect&gt;

&lt;/aop:config&gt;</pre><p>&#27880;&#24847;&#36825;&#31181;&#26041;&#24335;&#23450;&#20041;&#30340;&#20999;&#20837;&#28857;&#36890;&#36807;XML id&#26469;&#26597;&#25214;&#65292;&#24182;&#19988;&#19981;&#33021;&#23450;&#20041;&#20999;&#20837;&#28857;&#21442;&#25968;&#12290;&#22312;&#22522;&#20110;schema&#30340;&#23450;&#20041;&#39118;&#26684;&#20013;
      &#21629;&#21517;&#20999;&#20837;&#28857;&#25903;&#25345;&#36739;&#20043;@AspectJ&#39118;&#26684;&#21463;&#21040;&#20102;&#24456;&#22810;&#30340;&#38480;&#21046;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-schema-advice"></a>6.3.3.&nbsp;&#22768;&#26126;&#36890;&#30693;</h3></div></div><div></div></div>

    &#12288;<p>&#21644;@AspectJ&#39118;&#26684;&#19968;&#26679;&#65292;&#22522;&#20110;schema&#30340;&#39118;&#26684;&#20063;&#25903;&#25345;5&#31181;&#36890;&#30693;&#31867;&#22411;&#24182;&#19988;&#20004;&#32773;&#20855;&#26377;&#21516;&#26679;&#30340;&#35821;&#20041;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-schema-advice-before"></a>6.3.3.1.&nbsp;&#21069;&#32622;&#36890;&#30693;</h4></div></div><div></div></div>
&#12288;&#12288;&#12288;&#12288;<p>&#21069;&#32622;&#36890;&#30693;&#22312;&#21305;&#37197;&#26041;&#27861;&#25191;&#34892;&#21069;&#36816;&#34892;&#12290;&#22312;<tt class="literal">&lt;aop:aspect&gt;</tt>&#20013;&#20351;&#29992;&lt;aop:before&gt;
		    &#20803;&#32032;&#26469;&#22768;&#26126;&#23427;&#12290;</p><pre class="programlisting">&lt;aop:aspect id="beforeExample" ref="aBean"&gt;

    &lt;aop:before 
      pointcut-ref="dataAccessOperation" 
      method="doAccessCheck"/&gt;
          
    ...
    
&lt;/aop:aspect&gt;</pre>

&#12288;&#12288;&#12288;&#12288;<p>&#36825;&#37324;<tt class="literal">dataAccessOperation</tt>&#26159;&#19968;&#20010;&#39030;&#32423;&#65288;<tt class="literal">&lt;aop:config&gt;</tt>&#65289;&#20999;&#20837;&#28857;&#30340;id&#12290;
&#12288;&#12288;&#12288;&#12288;&#32780;&#35201;&#23450;&#20041;&#20869;&#32622;&#20999;&#20837;&#28857;&#65292;&#38656;&#23558;<tt class="literal">pointcut-ref</tt>&#23646;&#24615;&#26367;&#25442;&#20026;<tt class="literal">pointcut</tt>&#23646;&#24615;&#65306;
		    </p><pre class="programlisting">&lt;aop:aspect id="beforeExample" ref="aBean"&gt;

    &lt;aop:before 
      pointcut="execution&#65288;* com.xyz.myapp.dao.*.*&#65288;..&#65289;&#65289;" 
      method="doAccessCheck"/&gt;
          
    ...
    
&lt;/aop:aspect&gt;</pre>

&#12288;&#12288;&#12288;&#12288;<p>&#27491;&#22914;&#25105;&#20204;&#22312;@AspectJ&#39118;&#26684;&#31456;&#33410;&#20013;&#35752;&#35770;&#36807;&#30340;&#65292;&#20351;&#29992;&#21629;&#21517;&#20999;&#20837;&#28857;&#33021;&#22815;&#26126;&#26174;&#30340;&#25552;&#39640;&#20195;&#30721;&#30340;&#21487;&#35835;&#24615;&#12290;</p><p>Method&#23646;&#24615;&#26631;&#35782;&#20102;&#25552;&#20379;&#36890;&#30693;&#20027;&#20307;&#30340;&#26041;&#27861;&#65288;<tt class="literal">doAccessCheck</tt>&#65289;&#12290;
        &#36825;&#20010;&#26041;&#27861;&#24517;&#39035;&#23450;&#20041;&#22312;&#21253;&#21547;&#36890;&#30693;&#30340;&#20999;&#38754;&#20803;&#32032;&#25152;&#24341;&#29992;&#30340;bean&#20013;&#12290;&#22312;&#19968;&#20010;&#25968;&#25454;&#35775;&#38382;&#25805;&#20316;&#25191;&#34892;&#20043;&#21069;
    		&#65288;&#19968;&#20010;&#26041;&#27861;&#25191;&#34892;&#30001;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#25152;&#21305;&#37197;&#30340;&#36830;&#25509;&#28857;&#65289;&#65292;&#20999;&#38754;&#20013;&#30340;"doAccessCheck"&#20250;&#34987;&#35843;&#29992;&#12290;
    		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-schema-advice-after-returning"></a>6.3.3.2.&nbsp;&#21518;&#32622;&#36890;&#30693;</h4></div></div><div></div></div><p>&#21518;&#32622;&#36890;&#30693;&#22312;&#21305;&#37197;&#30340;&#26041;&#27861;&#23436;&#20840;&#25191;&#34892;&#21518;&#36816;&#34892;&#12290;&#21644;&#21069;&#32622;&#36890;&#30693;&#19968;&#26679;&#65292;&#21487;&#20197;&#22312;<tt class="literal">&lt;aop:aspect&gt;</tt>
        &#37324;&#38754;&#22768;&#26126;&#23427;&#12290;&#20363;&#22914;&#65306;</p><pre class="programlisting">&lt;aop:aspect id="afterReturningExample" ref="aBean"&gt;

    &lt;aop:after-returning 
      pointcut-ref="dataAccessOperation" 
      method="doAccessCheck"/&gt;
          
    ...
    
&lt;/aop:aspect&gt;</pre><p>&#21644;@AspectJ&#39118;&#26684;&#19968;&#26679;&#65292;&#36890;&#30693;&#20027;&#20307;&#21487;&#20197;&#24471;&#21040;&#36820;&#22238;&#20540;&#12290;&#20351;&#29992;returning&#23646;&#24615;&#26469;&#25351;&#23450;&#20256;&#36882;&#36820;&#22238;&#20540;&#30340;&#21442;&#25968;&#21517;&#65306;</p><pre class="programlisting">&lt;aop:aspect id="afterReturningExample" ref="aBean"&gt;

    &lt;aop:after-returning 
      pointcut-ref="dataAccessOperation"
      returning="retVal" 
      method="doAccessCheck"/&gt;
          
    ...
    
&lt;/aop:aspect&gt;</pre><p>doAccessCheck&#26041;&#27861;&#24517;&#39035;&#22768;&#26126;&#19968;&#20010;&#21517;&#23383;&#21483; <tt class="literal">retVal</tt> &#30340;&#21442;&#25968;&#12290;
		    &#21442;&#25968;&#30340;&#31867;&#22411;&#20381;&#29031;@AfterReturning&#25152;&#25551;&#36848;&#30340;&#26041;&#27861;&#24378;&#21046;&#21305;&#37197;&#12290;&#20363;&#22914;&#65292;&#26041;&#27861;&#31614;&#21517;&#21487;&#20197;&#36825;&#26679;&#22768;&#26126;&#65306;
		    </p><pre class="programlisting">public void doAccessCheck&#65288;Object retVal&#65289; {...</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-schema-advice-after-throwing"></a>6.3.3.3.&nbsp;&#24322;&#24120;&#36890;&#30693;</h4></div></div><div></div></div><p>&#24322;&#24120;&#36890;&#30693;&#22312;&#21305;&#37197;&#26041;&#27861;&#25243;&#20986;&#24322;&#24120;&#36864;&#20986;&#26102;&#25191;&#34892;&#12290;&#22312;<tt class="literal">&lt;aop:aspect&gt;</tt>&#20013;&#20351;&#29992;
        after-throwing&#20803;&#32032;&#26469;&#22768;&#26126;&#65306;</p><pre class="programlisting">&lt;aop:aspect id="afterThrowingExample" ref="aBean"&gt;

    &lt;aop:after-throwing
      pointcut-ref="dataAccessOperation" 
      method="doRecoveryActions"/&gt;
          
    ...
    
&lt;/aop:aspect&gt;</pre><p>&#21644;@AspectJ&#39118;&#26684;&#19968;&#26679;&#65292;&#36890;&#30693;&#20027;&#20307;&#21487;&#20197;&#24471;&#21040;&#25243;&#20986;&#30340;&#24322;&#24120;&#12290;&#20351;&#29992;throwing&#23646;&#24615;&#26469;&#25351;&#23450;&#20256;&#36882;&#24322;&#24120;&#30340;&#21442;&#25968;&#21517;&#65306;</p><pre class="programlisting">&lt;aop:aspect id="afterThrowingExample" ref="aBean"&gt;

    &lt;aop:after-throwing 
      pointcut-ref="dataAccessOperation"
      throwing="dataAccessEx" 
      method="doRecoveryActions"/&gt;
          
    ...
    
&lt;/aop:aspect&gt;</pre><p>doRecoveryActions&#26041;&#27861;&#24517;&#39035;&#22768;&#26126;&#19968;&#20010;&#21517;&#23383;&#20026;<tt class="literal">dataAccessEx</tt>&#30340;&#21442;&#25968;&#12290;
        &#21442;&#25968;&#30340;&#31867;&#22411;&#20381;&#29031;@AfterThrowing&#25152;&#25551;&#36848;&#30340;&#26041;&#27861;&#24378;&#21046;&#21305;&#37197;&#12290;&#20363;&#22914;&#65306;&#26041;&#27861;&#31614;&#21517;&#21487;&#20197;&#22914;&#19979;&#36825;&#33324;&#22768;&#26126;&#65306;</p><pre class="programlisting">public void doRecoveryActions&#65288;DataAccessException dataAccessEx&#65289; {...</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-schema-advice-after-finally"></a>6.3.3.4.&nbsp;&#26368;&#32456;&#36890;&#30693;</h4></div></div><div></div></div><p>&#26368;&#32456;&#36890;&#30693;&#26080;&#35770;&#22914;&#20309;&#37117;&#20250;&#22312;&#21305;&#37197;&#26041;&#27861;&#36864;&#20986;&#21518;&#25191;&#34892;&#12290;&#20351;&#29992;<tt class="literal">after</tt>&#20803;&#32032;&#26469;&#22768;&#26126;&#23427;&#65306;</p><pre class="programlisting">&lt;aop:aspect id="afterFinallyExample" ref="aBean"&gt;

    &lt;aop:after
      pointcut-ref="dataAccessOperation" 
      method="doReleaseLock"/&gt;
          
    ...
    
&lt;/aop:aspect&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-schema-advice-around"></a>6.3.3.5.&nbsp;&#29615;&#32469;&#36890;&#30693;</h4></div></div><div></div></div><p>&#29615;&#32469;&#36890;&#30693;&#26159;&#26368;&#21518;&#19968;&#31181;&#36890;&#30693;&#31867;&#22411;&#12290;&#29615;&#32469;&#36890;&#30693;&#22312;&#21305;&#37197;&#26041;&#27861;&#36816;&#34892;&#26399;&#30340;&#8220;&#21608;&#22260;&#8221;&#25191;&#34892;&#12290;
        &#23427;&#26377;&#26426;&#20250;&#22312;&#30446;&#26631;&#26041;&#27861;&#30340;&#21069;&#38754;&#21644;&#21518;&#38754;&#25191;&#34892;&#65292;&#24182;&#20915;&#23450;&#20160;&#20040;&#26102;&#20505;&#36816;&#34892;&#65292;&#24590;&#20040;&#36816;&#34892;&#65292;&#29978;&#33267;&#26159;&#21542;&#36816;&#34892;&#12290;
        &#29615;&#32469;&#36890;&#30693;&#32463;&#24120;&#22312;&#38656;&#35201;&#22312;&#19968;&#20010;&#26041;&#27861;&#25191;&#34892;&#21069;&#21518;&#20849;&#20139;&#29366;&#24577;&#20449;&#24687;&#65292;&#24182;&#19988;&#26159;&#22312;&#32447;&#31243;&#23433;&#20840;&#30340;&#24773;&#20917;&#19979;&#20351;&#29992;
        &#65288;&#21551;&#21160;&#21644;&#20572;&#27490;&#19968;&#20010;&#35745;&#26102;&#22120;&#23601;&#26159;&#19968;&#20010;&#20363;&#23376;&#65289;&#12290;&#27880;&#24847;&#36873;&#25321;&#33021;&#28385;&#36275;&#20320;&#38656;&#27714;&#30340;&#26368;&#31616;&#21333;&#30340;&#36890;&#30693;&#31867;&#22411;&#65307;
        &#22914;&#26524;&#31616;&#21333;&#30340;&#21069;&#32622;&#36890;&#30693;&#33021;&#20570;&#30340;&#20107;&#24773;&#23601;&#32477;&#23545;&#19981;&#35201;&#20351;&#29992;&#29615;&#32469;&#36890;&#30693;&#12290;</p><p>Around&#36890;&#30693;&#20351;&#29992;<tt class="literal">aop:around</tt>&#20803;&#32032;&#26469;&#22768;&#26126;&#12290;&#36890;&#30693;&#26041;&#27861;&#30340;&#31532;&#19968;&#20010;&#21442;&#25968;&#30340;&#31867;&#22411;&#24517;&#39035;&#26159;
        <tt class="interfacename">ProceedingJoinPoint</tt>&#31867;&#22411;&#12290;&#22312;&#36890;&#30693;&#30340;&#20027;&#20307;&#20013;&#65292;&#35843;&#29992;
        <tt class="interfacename">ProceedingJoinPoint</tt>&#30340;<tt class="literal">proceed()</tt>&#26041;&#27861;&#26469;&#25191;&#34892;&#30495;&#27491;&#30340;&#26041;&#27861;&#12290;
        <tt class="literal">proceed</tt>&#26041;&#27861;&#20063;&#21487;&#33021;&#20250;&#34987;&#35843;&#29992;&#24182;&#19988;&#20256;&#20837;&#19968;&#20010;<tt class="classname">Object[]</tt>&#23545;&#35937; - 
        &#35813;&#25968;&#32452;&#23558;&#20316;&#20026;&#26041;&#27861;&#25191;&#34892;&#26102;&#20505;&#30340;&#21442;&#25968;&#12290;&#21442;&#35265;<a href="#aop-ataspectj-around-advice" title="6.2.4.5.&nbsp;&#29615;&#32469;&#36890;&#30693;">Section&nbsp;6.2.4.5, &#8220;&#29615;&#32469;&#36890;&#30693;&#8221;</a>&#20013;&#35843;&#29992;&#20855;&#26377;
        <tt class="classname">Object[]</tt>&#30340;proceed&#26041;&#27861;&#12290;</p><pre class="programlisting">&lt;aop:aspect id="aroundExample" ref="aBean"&gt;

    &lt;aop:around
      pointcut-ref="businessService" 
      method="doBasicProfiling"/&gt;
          
    ...
    
&lt;/aop:aspect&gt;</pre><p><tt class="literal">doBasicProfiling</tt>&#36890;&#30693;&#30340;&#23454;&#29616;&#21644;@AspectJ&#20013;&#30340;&#20363;&#23376;&#23436;&#20840;&#19968;&#26679;&#65288;&#24403;&#28982;&#35201;&#21435;&#25481;&#27880;&#35299;&#65289;&#65306;</p><pre class="programlisting">public Object doBasicProfiling&#65288;ProceedingJoinPoint pjp&#65289; throws Throwable {
    <i class="lineannotation"><span class="lineannotation">// start stopwatch</span></i>
    Object retVal = pjp.proceed&#65288;&#65289;;
    <i class="lineannotation"><span class="lineannotation">// stop stopwatch</span></i>
    return retVal;
}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-schema-params"></a>6.3.3.6.&nbsp;&#36890;&#30693;&#21442;&#25968;</h4></div></div><div></div></div><p>Schema-based&#22768;&#26126;&#39118;&#26684;&#21644;@AspectJ&#19968;&#26679;&#65292;&#25903;&#25345;&#22810;&#31181;&#31867;&#22411;&#30340;&#36890;&#30693;&#65306;&#36890;&#36807;&#36890;&#30693;&#26041;&#27861;&#21442;&#25968;&#21517;&#23383;&#26469;&#21305;&#37197;&#20999;&#20837;&#28857;&#21442;&#25968;&#12290;
        &#21442;&#35265;<a href="#aop-ataspectj-advice-params" title="6.2.4.6.&nbsp;&#36890;&#30693;&#21442;&#25968;&#65288;Advice parameters&#65289;">Section&nbsp;6.2.4.6, &#8220;&#36890;&#30693;&#21442;&#25968;&#65288;Advice parameters&#65289;&#8221;</a>&#33719;&#21462;&#35814;&#32454;&#20449;&#24687;&#12290;&#22914;&#26524;&#20320;&#24076;&#26395;&#26174;&#24335;&#25351;&#23450;&#36890;&#30693;&#26041;&#27861;&#30340;&#21442;&#25968;&#21517;
        &#65288;&#32780;&#19981;&#26159;&#20381;&#38752;&#20808;&#21069;&#25552;&#21450;&#30340;&#20390;&#27979;&#31574;&#30053;&#65289;&#65292;&#21487;&#20197;&#36890;&#36807;&#36890;&#30693;&#20803;&#32032;&#30340;<tt class="literal">arg-names</tt>&#23646;&#24615;&#26469;&#23454;&#29616;&#65292;&#23427;&#30340;&#22788;&#29702;&#21644;
        &#22312;<a href="#aop-ataspectj-advice-params-names" title="6.2.4.6.3.&nbsp;&#30830;&#23450;&#21442;&#25968;&#21517;">Section&nbsp;6.2.4.6.3, &#8220;&#30830;&#23450;&#21442;&#25968;&#21517;&#8221;</a>&#20013;&#25152;&#25551;&#36848;&#30340;&#23545;&#36890;&#30693;&#27880;&#35299;&#20013;"argNames"&#23646;&#24615;&#30340;&#22788;&#29702;&#26041;&#24335;&#19968;&#26679;&#12290;
        &#31034;&#20363;&#22914;&#19979;&#65306;</p><pre class="programlisting">&lt;aop:before
  pointcut="com.xyz.lib.Pointcuts.anyPublicMethod&#65288;&#65289; and @annotation&#65288;auditable&#65289;"
  method="audit"
  arg-names="auditable"/&gt;</pre><p><tt class="literal">arg-names</tt>&#23646;&#24615;&#25509;&#21463;&#30001;&#36887;&#21495;&#20998;&#21106;&#30340;&#21442;&#25968;&#21517;&#21015;&#34920;&#12290;</p><p>&#19979;&#38754;&#26159;&#20010;&#31245;&#24494;&#22797;&#26434;&#30340;&#22522;&#20110;XSD&#30340;&#20363;&#23376;&#65292;&#23427;&#23637;&#31034;&#20102;&#20851;&#32852;&#20102;&#22810;&#20010;&#24378;&#31867;&#22411;&#21442;&#25968;&#30340;&#29615;&#32469;&#36890;&#30693;&#30340;&#20351;&#29992;&#12290;</p><pre class="programlisting">package x.y.service;

public interface FooService {

   Foo getFoo&#65288;String fooName, int age&#65289;;
}

public class DefaultFooService implements FooService {

   public Foo getFoo&#65288;String name, int age&#65289; {
      return new Foo&#65288;name, age&#65289;;
   }
}</pre><p>&#25509;&#19979;&#26469;&#30475;&#20999;&#38754;&#12290;&#27880;&#24847;<tt class="methodname">profile&#65288;..&#65289;</tt>&#26041;&#27861;&#25509;&#21463;&#22810;&#20010;&#24378;&#31867;&#22411;&#21442;&#25968;&#65292;
        &#39318;&#20808;&#36830;&#25509;&#28857;&#22312;&#26041;&#27861;&#35843;&#29992;&#26102;&#25191;&#34892;&#65292;&#36825;&#20010;&#21442;&#25968;&#25351;&#26126;<tt class="methodname">profile&#65288;..&#65289;</tt>&#20250;&#34987;&#29992;&#20316;
        <tt class="literal">&#29615;&#32469;</tt>&#36890;&#30693;&#65306;</p><pre class="programlisting">package x.y;

import org.aspectj.lang.ProceedingJoinPoint;
import org.springframework.util.StopWatch;

public class SimpleProfiler {

   public Object profile&#65288;ProceedingJoinPoint call, String name, int age&#65289; throws Throwable {
      StopWatch clock = new StopWatch&#65288;
            "Profiling for '" + name + "' and '" + age + "'"&#65289;;
      try {
         clock.start&#65288;call.toShortString&#65288;&#65289;&#65289;;
         return call.proceed&#65288;&#65289;;
      } finally {
         clock.stop&#65288;&#65289;;
         System.out.println&#65288;clock.prettyPrint&#65288;&#65289;&#65289;;
      }
   }
}</pre><p>&#26368;&#21518;&#36825;&#37324;&#26159;&#20351;&#24471;&#19978;&#38754;&#30340;&#36890;&#30693;&#38024;&#23545;&#19968;&#20010;&#29305;&#23450;&#36830;&#25509;&#28857;&#32780;&#25191;&#34892;&#25152;&#24517;&#38656;&#30340;XML&#37197;&#32622;&#65306;</p><pre class="programlisting">&lt;beans xmlns="http://www.springframework.org/schema/beans"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:aop="http://www.springframework.org/schema/aop"
      xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd"&gt;

   <i class="lineannotation"><span class="lineannotation">&lt;!-- this is the object that will be proxied by Spring's AOP infrastructure --&gt;</span></i>
   &lt;bean id="fooService" class="x.y.service.DefaultFooService"/&gt;

   <i class="lineannotation"><span class="lineannotation">&lt;!-- this is the actual advice itself --&gt;</span></i>
   &lt;bean id="profiler" class="x.y.SimpleProfiler"/&gt;

   &lt;aop:config&gt;
      &lt;aop:aspect ref="profiler"&gt;

         &lt;aop:pointcut id="theExecutionOfSomeFooServiceMethod"
                    expression="execution&#65288;* x.y.service.FooService.getFoo&#65288;String,int&#65289;&#65289;
                    and args&#65288;name, age&#65289;"/&gt;

         &lt;aop:around pointcut-ref="theExecutionOfSomeFooServiceMethod"
                  method="profile"/&gt;

      &lt;/aop:aspect&gt;
   &lt;/aop:config&gt;

&lt;/beans&gt;</pre><p>&#22914;&#26524;&#25105;&#20204;&#26377;&#19979;&#38754;&#30340;&#39537;&#21160;&#33050;&#26412;&#65292;&#25105;&#20204;&#23558;&#22312;&#26631;&#20934;&#36755;&#20986;&#19978;&#24471;&#21040;&#22914;&#19979;&#30340;&#36755;&#20986;&#65306;</p><pre class="programlisting">import org.springframework.beans.factory.BeanFactory;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import x.y.service.FooService;

public final class Boot {

   public static void main&#65288;final String[] args&#65289; throws Exception {
      BeanFactory ctx = new ClassPathXmlApplicationContext&#65288;"x/y/plain.xml"&#65289;;
      FooService foo = &#65288;FooService&#65289; ctx.getBean&#65288;"fooService"&#65289;;
      foo.getFoo&#65288;"Pengo", 12&#65289;;
   }
}</pre><pre class="programlisting">StopWatch 'Profiling for 'Pengo' and '12'': running time &#65288;millis&#65289; = 0
-----------------------------------------
ms     %     Task name
-----------------------------------------
00000  ?  execution&#65288;getFoo&#65289;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-ordering"></a>6.3.3.7.&nbsp;&#36890;&#30693;&#39034;&#24207;</h4></div></div><div></div></div><p>&#24403;&#21516;&#19968;&#20010;&#20999;&#20837;&#28857;&#65288;&#25191;&#34892;&#26041;&#27861;&#65289;&#19978;&#26377;&#22810;&#20010;&#36890;&#30693;&#38656;&#35201;&#25191;&#34892;&#26102;&#65292;&#25191;&#34892;&#39034;&#24207;&#30340;&#35268;&#21017;&#22914;
        <a href="#aop-ataspectj-advice-ordering" title="6.2.4.7.&nbsp;&#36890;&#30693;&#39034;&#24207;">Section&nbsp;6.2.4.7, &#8220;&#36890;&#30693;&#39034;&#24207;&#8221;</a>&#25152;&#36848;&#12290;&#20999;&#38754;&#30340;&#20248;&#20808;&#32423;&#36890;&#36807;&#32473;&#20999;&#38754;&#30340;&#25903;&#25345;bean&#22686;&#21152;
        <tt class="interfacename">Order</tt>&#27880;&#35299;&#25110;&#32773;&#20351;&#20999;&#38754;&#30340;&#25903;&#25345;bean&#23454;&#29616;
        <tt class="interfacename">Ordered</tt>&#25509;&#21475;&#26469;&#20915;&#23450;&#12290;
	&#12288;&#12288;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-schema-introductions"></a>6.3.4.&nbsp;&#24341;&#20837;</h3></div></div><div></div></div><p>&#24341;&#20837;&#65288;&#22312;AspectJ&#20013;&#31216;&#20026;inter-type&#22768;&#26126;&#65289;&#20801;&#35768;&#19968;&#20010;&#20999;&#38754;&#22768;&#26126;&#19968;&#20010;&#36890;&#30693;&#23545;&#35937;&#23454;&#29616;&#25351;&#23450;&#25509;&#21475;&#65292;
      &#24182;&#19988;&#25552;&#20379;&#20102;&#19968;&#20010;&#25509;&#21475;&#23454;&#29616;&#31867;&#26469;&#20195;&#34920;&#36825;&#20123;&#23545;&#35937;&#12290;</p><p>&#24341;&#20837;&#30340;&#23450;&#20041;&#20351;&#29992;<tt class="literal">aop:aspect</tt>&#20013;&#30340;<tt class="literal">aop:declare-parents</tt>&#20803;&#32032;&#12290;
			&#35813;&#20803;&#32032;&#29992;&#20110;&#22768;&#26126;&#25152;&#21305;&#37197;&#30340;&#31867;&#22411;&#26377;&#19968;&#20010;&#26032;&#30340;&#29238;&#31867;&#22411;&#65288;&#25152;&#20197;&#26377;&#20102;&#36825;&#20010;&#21517;&#23383;&#65289;&#12290;
			&#20363;&#22914;&#65292;&#32473;&#23450;&#25509;&#21475;<tt class="interfacename">UsageTracked</tt>&#65292;
			&#20197;&#21450;&#36825;&#20010;&#25509;&#21475;&#30340;&#19968;&#20010;&#23454;&#29616;&#31867; <tt class="classname">DefaultUsageTracked</tt>&#65292;
		  &#19979;&#38754;&#30340;&#20999;&#38754;&#22768;&#26126;&#25152;&#26377;&#23454;&#29616;service&#25509;&#21475;&#30340;&#31867;&#21516;&#26102;&#23454;&#29616; <tt class="interfacename">UsageTracked</tt>
		  &#25509;&#21475;&#12290;&#65288;&#27604;&#22914;&#20026;&#20102;&#36890;&#36807;JMX&#36755;&#20986;&#32479;&#35745;&#20449;&#24687;&#65289;
			</p><pre class="programlisting">&lt;aop:aspect id="usageTrackerAspect" ref="usageTracking"&gt;

  &lt;aop:declare-parents
      types-matching="com.xzy.myapp.service.*+"
      implement-interface="com.xyz.myapp.service.tracking.UsageTracked"
      default-impl="com.xyz.myapp.service.tracking.DefaultUsageTracked"/&gt;
  
  &lt;aop:before
    pointcut="com.xyz.myapp.SystemArchitecture.businessService&#65288;&#65289;
              and this&#65288;usageTracked&#65289;"
    method="recordUsage"/&gt;
  
&lt;/aop:aspect&gt;</pre><p><tt class="literal">usageTracking</tt> bean&#30340;&#25903;&#25345;&#31867;&#21487;&#20197;&#21253;&#21547;&#19979;&#38754;&#30340;&#26041;&#27861;&#65306;</p><pre class="programlisting">public void recordUsage&#65288;UsageTracked usageTracked&#65289; {
    usageTracked.incrementUseCount&#65288;&#65289;;
}</pre><p>&#35201;&#23454;&#29616;&#30340;&#25509;&#21475;&#30001;<tt class="literal">implement-interface</tt>&#23646;&#24615;&#26469;&#25351;&#23450;&#12290;
	&#12288;<tt class="literal">types-matching</tt>&#23646;&#24615;&#30340;&#20540;&#26159;&#19968;&#20010;AspectJ&#31867;&#22411;&#27169;&#24335;&#65306;&#20219;&#20309;&#21305;&#37197;&#31867;&#22411;&#30340;bean&#37117;&#20250;&#23454;&#29616;
	&#12288;<tt class="interfacename">UsageTracked</tt> &#25509;&#21475;&#12290;&#27880;&#24847;&#22312;&#19978;&#38754;&#21069;&#32622;&#36890;&#30693;&#30340;&#20363;&#23376;&#20013;&#65292;
	  serevice bean&#21487;&#20197;&#30452;&#25509;&#29992;&#20316;<tt class="interfacename">UsageTracked</tt>&#25509;&#21475;&#30340;&#23454;&#29616;&#12290;
	  &#22914;&#26524;&#20197;&#32534;&#31243;&#24418;&#24335;&#35775;&#38382;&#19968;&#20010;bean&#65292;&#20320;&#21487;&#20197;&#36825;&#26679;&#26469;&#20889;&#65306;
	  </p><pre class="programlisting">UsageTracked usageTracked = &#65288;UsageTracked&#65289; context.getBean&#65288;"myService"&#65289;;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-schema-instatiation-models"></a>6.3.5.&nbsp;&#20999;&#38754;&#23454;&#20363;&#21270;&#27169;&#22411;</h3></div></div><div></div></div><p>&#37319;&#29992;Schema&#39118;&#26684;&#26469;&#23450;&#20041;&#20999;&#38754;&#20165;&#25903;&#25345;&#19968;&#31181;&#23454;&#20363;&#21270;&#27169;&#22411;&#23601;&#26159;singlton&#27169;&#22411;&#12290;&#20854;&#20182;&#30340;&#23454;&#20363;&#21270;&#27169;&#22411;&#25110;&#35768;&#20197;&#21518;&#30340;&#29256;&#26412;&#20250;&#25903;&#25345;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-schema-advisors"></a>6.3.6.&nbsp;Advisor</h3></div></div><div></div></div><p>"advisor"&#36825;&#20010;&#27010;&#24565;&#26469;&#33258;Spring1.2&#23545;AOP&#30340;&#25903;&#25345;&#65292;&#32780;&#22312;AspectJ&#20013;&#27809;&#26377;&#31561;&#20215;&#30340;&#27010;&#24565;&#12290;
      advisor&#23601;&#20687;&#19968;&#20010;&#23567;&#30340;&#33258;&#21253;&#21547;&#30340;&#20999;&#38754;&#65292;&#36825;&#20010;&#20999;&#38754;&#21482;&#26377;&#19968;&#20010;&#36890;&#30693;&#12290;&#20999;&#38754;&#33258;&#36523;&#36890;&#36807;&#19968;&#20010;bean&#34920;&#31034;&#65292;
      &#24182;&#19988;&#24517;&#39035;&#23454;&#29616;&#19968;&#20010;&#22312;<a href="#aop-api-advice-types" title="7.3.2.&nbsp;Spring&#37324;&#30340;&#36890;&#30693;&#31867;&#22411;">Section&nbsp;7.3.2, &#8220;Spring&#37324;&#30340;&#36890;&#30693;&#31867;&#22411;&#8221;</a>&#20013;&#25551;&#36848;&#30340;&#36890;&#30693;&#25509;&#21475;&#12290;
      Advisor&#21487;&#20197;&#24456;&#22909;&#30340;&#21033;&#29992;AspectJ&#30340;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#12290;
	&#12288;  </p><p>Spring 2.0&#36890;&#36807;<tt class="literal">&lt;aop:advisor&gt;</tt>&#20803;&#32032;&#26469;&#25903;&#25345;advisor&#27010;&#24565;&#12290;
      &#20320;&#23558;&#20250;&#21457;&#29616;&#22823;&#22810;&#25968;&#24773;&#20917;&#19979;&#23427;&#20250;&#21644;transactional advice&#19968;&#36215;&#20351;&#29992;&#65292;&#22312;Spring 2.0&#20013;&#23427;&#26377;&#33258;&#24049;&#30340;&#21629;&#21517;&#31354;&#38388;&#12290;&#20854;&#26684;&#24335;&#22914;&#19979;&#65306;
	&#12288;  </p><pre class="programlisting">&lt;aop:config&gt;

  &lt;aop:pointcut id="businessService"
        expression="execution&#65288;* com.xyz.myapp.service.*.*&#65288;..&#65289;&#65289;"/&gt;

  &lt;aop:advisor 
      pointcut-ref="businessService"
      advice-ref="tx-advice"/&gt;
      
&lt;/aop:config&gt;

&lt;tx:advice id="tx-advice"&gt;
  &lt;tx:attributes&gt;
    &lt;tx:method name="*" propagation="REQUIRED"/&gt;
  &lt;/tx:attributes&gt;
&lt;/tx:advice&gt;</pre></div><p>&#21644;&#19978;&#38754;&#25152;&#20351;&#29992;&#30340;<tt class="literal">pointcut-ref</tt>&#23646;&#24615;&#19968;&#26679;&#65292;&#20320;&#36824;&#21487;&#20197;&#20351;&#29992;<tt class="literal">pointcut</tt>
    &#23646;&#24615;&#26469;&#23450;&#20041;&#19968;&#20010;&#20869;&#32852;&#30340;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#12290;</p><p>&#20026;&#20102;&#23450;&#20041;&#19968;&#20010;advisor&#30340;&#20248;&#20808;&#32423;&#20197;&#20415;&#35753;&#36890;&#30693;&#20855;&#26377;&#27425;&#24207;&#65292;&#20351;&#29992;<tt class="literal">order</tt>&#23646;&#24615;&#26469;&#23450;&#20041;advisor&#20013;
	  <tt class="literal">Ordered</tt>&#30340;&#20540; &#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-schema-example"></a>6.3.7.&nbsp;&#20363;&#23376;</h3></div></div><div></div></div><p>&#35753;&#25105;&#20204;&#30475;&#30475;<a href="#aop-ataspectj-example" title="6.2.7.&nbsp;&#20363;&#23376;">Section&nbsp;6.2.7, &#8220;&#20363;&#23376;&#8221;</a>&#20013;&#24182;&#21457;&#38145;&#22833;&#36133;&#37325;&#35797;&#30340;&#20363;&#23376;&#65292;
      &#24403;&#20351;&#29992;schema&#37325;&#20889;&#23427;&#26102;&#26159;&#20160;&#20040;&#26679;&#23376;&#12290;</p><p>&#22240;&#20026;&#24182;&#21457;&#30340;&#38382;&#39064;&#65292;&#26377;&#26102;&#20505;business services&#21487;&#33021;&#20250;&#22833;&#36133;&#65288;&#20363;&#22914;&#65292;&#27515;&#38145;&#22833;&#36133;&#65289;&#12290;&#22914;&#26524;&#37325;&#35797;&#25805;&#20316;&#65292;&#19979;&#19968;&#27425;&#24456;&#21487;&#33021;&#23601;&#20250;&#25104;&#21151;&#12290;
	&#12288;  &#23545;&#20110;business services&#26469;&#35828;&#65292;&#36825;&#31181;&#24773;&#20917;&#19979;&#37325;&#35797;&#26159;&#24456;&#27491;&#24120;&#30340;&#65288;Idempotent&#25805;&#20316;&#19981;&#38656;&#35201;&#29992;&#25143;&#21442;&#19982;&#65292;&#21542;&#21017;&#20250;&#24471;&#20986;&#30683;&#30462;&#30340;&#32467;&#35770;&#65289;
&#12288;&#12288;&#12288;&#25105;&#20204;&#21487;&#33021;&#38656;&#35201;&#36879;&#26126;&#30340;&#37325;&#35797;&#25805;&#20316;&#20197;&#36991;&#20813;&#23458;&#25143;&#30475;&#21040;&#19968;&#20010;<tt class="classname">OptimisticLockingFailureException</tt>
	&#12288;  &#24322;&#24120;&#12290;&#24456;&#26126;&#26174;&#65292;&#22312;&#19968;&#20010;&#27178;&#20999;&#22810;&#23618;&#30340;&#24773;&#20917;&#19979;&#65292;&#36825;&#26159;&#38750;&#24120;&#26377;&#24517;&#35201;&#30340;&#65292;&#22240;&#27492;&#36890;&#36807;&#20999;&#38754;&#26469;&#23454;&#29616;&#26159;&#24456;&#29702;&#24819;&#30340;&#12290;
	&#12288;  </p><p>&#22240;&#20026;&#24819;&#35201;&#37325;&#35797;&#25805;&#20316;&#65292;&#25105;&#20204;&#38656;&#35201;&#20351;&#29992;&#29615;&#32469;&#36890;&#30693;&#65292;&#36825;&#26679;&#23601;&#21487;&#20197;&#22810;&#27425;&#35843;&#29992;proceed()&#26041;&#27861;&#12290;
      &#19979;&#38754;&#26159;&#31616;&#21333;&#30340;&#20999;&#38754;&#23454;&#29616;&#65288;&#21482;&#26159;&#19968;&#20010;schema&#25903;&#25345;&#30340;&#26222;&#36890;Java &#31867;&#65289;&#65306;</p><pre class="programlisting">public class ConcurrentOperationExecutor implements Ordered {
   
   private static final int DEFAULT_MAX_RETRIES = 2;

   private int maxRetries = DEFAULT_MAX_RETRIES;
   private int order = 1;

   public void setMaxRetries&#65288;int maxRetries&#65289; {
      this.maxRetries = maxRetries;
   }
   
   public int getOrder&#65288;&#65289; {
      return this.order;
   }
   
   public void setOrder&#65288;int order&#65289; {
      this.order = order;
   }
   
   public Object doConcurrentOperation&#65288;ProceedingJoinPoint pjp&#65289; throws Throwable { 
      int numAttempts = 0;
      PessimisticLockingFailureException lockFailureException;
      do {
         numAttempts++;
         try { 
            return pjp.proceed&#65288;&#65289;;
         }
         catch&#65288;PessimisticLockingFailureException ex&#65289; {
            lockFailureException = ex;
         }
      }
      while&#65288;numAttempts &lt;= this.maxRetries&#65289;;
      throw lockFailureException;
   }

}</pre><p>&#35831;&#27880;&#24847;&#20999;&#38754;&#23454;&#29616;&#20102;<tt class="interfacename">Ordered</tt>&#25509;&#21475;&#65292;&#36825;&#26679;&#25105;&#20204;&#23601;&#21487;&#20197;&#25226;&#20999;&#38754;&#30340;&#20248;&#20808;&#32423;&#35774;&#23450;&#20026;
      &#39640;&#20110;&#20107;&#21153;&#36890;&#30693;&#65288;&#25105;&#20204;&#27599;&#27425;&#37325;&#35797;&#30340;&#26102;&#20505;&#37117;&#24819;&#35201;&#22312;&#19968;&#20010;&#20840;&#26032;&#30340;&#20107;&#21153;&#20013;&#36827;&#34892;&#65289;&#12290;
      <tt class="literal">maxRetries</tt> &#21644; <tt class="literal">order</tt> &#23646;&#24615;&#37117;&#21487;&#20197;&#22312;Spring&#20013;&#37197;&#32622;&#12290;
      &#20027;&#35201;&#30340;&#21160;&#20316;&#22312;<tt class="literal">doConcurrentOperation</tt> &#36825;&#20010;&#29615;&#32469;&#36890;&#30693;&#26041;&#27861;&#20013;&#21457;&#29983;&#12290;
      &#25105;&#20204;&#39318;&#20808;&#20250;&#23581;&#35797;&#22788;&#29702;&#65292;&#22914;&#26524;&#24471;&#21040;&#19968;&#20010;<tt class="classname">OptimisticLockingFailureException</tt>
      &#24322;&#24120;&#65292;&#25105;&#20204;&#20165;&#20165;&#37325;&#35797;&#30452;&#21040;&#32791;&#23613;&#25152;&#26377;&#39044;&#35774;&#30340;&#37325;&#35797;&#27425;&#25968;&#12290;</p><i><span class="remark">&#36825;&#20010;&#31867;&#36319;&#25105;&#20204;&#22312;@AspectJ&#30340;&#20363;&#23376;&#20013;&#20351;&#29992;&#30340;&#26159;&#30456;&#21516;&#30340;&#65292;&#21482;&#26159;&#27809;&#26377;&#20351;&#29992;&#27880;&#35299;&#12290;</span></i>
	&#12288;  <p>&#23545;&#24212;&#30340;Spring&#37197;&#32622;&#22914;&#19979;&#65306;</p><pre class="programlisting">&lt;aop:config&gt;

  &lt;aop:aspect id="concurrentOperationRetry" ref="concurrentOperationExecutor"&gt;

    &lt;aop:pointcut id="idempotentOperation"
        expression="execution&#65288;* com.xyz.myapp.service.*.*&#65288;..&#65289;&#65289;"/&gt;
       
    &lt;aop:around
       pointcut-ref="idempotentOperation"
       method="doConcurrentOperation"/&gt;
  
  &lt;/aop:aspect&gt;

&lt;/aop:config&gt;

&lt;bean id="concurrentOperationExecutor"
  class="com.xyz.myapp.service.impl.ConcurrentOperationExecutor"&gt;
     &lt;property name="maxRetries" value="3"/&gt;
     &lt;property name="order" value="100"/&gt;  
&lt;/bean&gt;</pre><p>&#35831;&#27880;&#24847;&#25105;&#20204;&#29616;&#22312;&#20551;&#35774;&#25152;&#26377;&#30340;bussiness services&#37117;&#26159;idempotent&#12290;&#22914;&#26524;&#19981;&#26159;&#36825;&#26679;&#65292;&#25105;&#20204;&#21487;&#20197;&#25913;&#20889;&#20999;&#38754;&#65292;
      &#36890;&#36807;&#24341;&#20837;&#19968;&#20010;<tt class="interfacename">Idempotent</tt>&#27880;&#35299;&#65292;&#35753;&#23427;&#21482;&#35843;&#29992;idempotent&#65306;</p><pre class="programlisting">@Retention&#65288;RetentionPolicy.RUNTIME&#65289;
public @interface Idempotent {
  <i class="lineannotation"><span class="lineannotation">// marker annotation</span></i>
}</pre><p>&#24182;&#19988;&#23545;service&#25805;&#20316;&#30340;&#23454;&#29616;&#36827;&#34892;&#27880;&#35299;&#12290;&#36825;&#26102;&#22914;&#26524;&#20320;&#21482;&#24076;&#26395;&#25913;&#21464;&#20999;&#38754;&#37325;&#35797;idempotent&#25805;&#20316;&#65292;
      &#20320;&#21482;&#38656;&#35201;&#25913;&#20889;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#65292;&#35753;&#20854;&#21482;&#21305;&#37197;<tt class="interfacename">@Idempotent</tt>&#25805;&#20316;&#65306;
			</p><pre class="programlisting">  &lt;aop:pointcut id="idempotentOperation"
        expression="execution&#65288;* com.xyz.myapp.service.*.*&#65288;..&#65289;&#65289; and
                    @annotation&#65288;com.xyz.myapp.service.Idempotent&#65289;"/&gt;</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="aop-choosing"></a>6.4.&nbsp;AOP&#22768;&#26126;&#39118;&#26684;&#30340;&#36873;&#25321;</h2></div></div><div></div></div><p>
            &#24403;&#20320;&#30830;&#23450;&#20999;&#38754;&#26159;&#23454;&#29616;&#19968;&#20010;&#32473;&#23450;&#38656;&#27714;&#30340;&#26368;&#20339;&#26041;&#27861;&#26102;&#65292;&#20320;&#22914;&#20309;&#36873;&#25321;&#26159;&#20351;&#29992;Spring AOP&#36824;&#26159;AspectJ&#65292;&#20197;&#21450;&#36873;&#25321;
            Aspect&#35821;&#35328;&#65288;&#20195;&#30721;&#65289;&#39118;&#26684;&#12289;@AspectJ&#22768;&#26126;&#39118;&#26684;&#25110;XML&#39118;&#26684;&#65311;&#36825;&#20010;&#20915;&#23450;&#20250;&#21463;&#21040;&#22810;&#20010;&#22240;&#32032;&#30340;&#24433;&#21709;&#65292;&#21253;&#25324;&#24212;&#29992;&#30340;&#38656;&#27714;&#12289;
            &#24320;&#21457;&#24037;&#20855;&#21644;&#23567;&#32452;&#23545;AOP&#30340;&#31934;&#36890;&#31243;&#24230;&#12290; 
        </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-spring-or-aspectj"></a>6.4.1.&nbsp;Spring AOP&#36824;&#26159;&#23436;&#20840;&#29992;AspectJ&#65311;</h3></div></div><div></div></div><p>
                &#20570;&#33021;&#36215;&#20316;&#29992;&#30340;&#26368;&#31616;&#21333;&#30340;&#20107;&#12290;Spring AOP&#27604;&#23436;&#20840;&#20351;&#29992;AspectJ&#26356;&#21152;&#31616;&#21333;&#65292;
                &#22240;&#20026;&#23427;&#19981;&#38656;&#35201;&#24341;&#20837;AspectJ&#30340;&#32534;&#35793;&#22120;&#65295;&#32455;&#20837;&#22120;&#21040;&#20320;&#24320;&#21457;&#21644;&#26500;&#24314;&#36807;&#31243;&#20013;&#12290;
                &#22914;&#26524;&#20320;&#20165;&#20165;&#38656;&#35201;&#22312;Spring bean&#19978;&#36890;&#30693;&#25191;&#34892;&#25805;&#20316;&#65292;&#37027;&#20040;Spring AOP&#26159;&#21512;&#36866;&#30340;&#36873;&#25321;&#12290;
                &#22914;&#26524;&#20320;&#38656;&#35201;&#36890;&#30693;domain&#23545;&#35937;&#25110;&#20854;&#23427;&#27809;&#26377;&#22312;Spring&#23481;&#22120;&#20013;&#31649;&#29702;&#30340;&#20219;&#24847;&#23545;&#35937;&#65292;&#37027;&#20040;&#20320;&#38656;&#35201;&#20351;&#29992;AspectJ&#12290;
                &#22914;&#26524;&#20320;&#24819;&#36890;&#30693;&#38500;&#20102;&#31616;&#21333;&#30340;&#26041;&#27861;&#25191;&#34892;&#20043;&#22806;&#30340;&#36830;&#25509;&#28857;&#65288;&#22914;&#65306;&#35843;&#29992;&#36830;&#25509;&#28857;&#12289;&#23383;&#27573;get&#25110;set&#30340;&#36830;&#25509;&#28857;&#31561;&#31561;&#65289;&#65292;
                &#20063;&#38656;&#35201;&#20351;&#29992;AspectJ&#12290;
            </p><p>
               &#24403;&#20351;&#29992;AspectJ&#26102;&#65292;&#20320;&#21487;&#20197;&#36873;&#25321;&#20351;&#29992;AspectJ&#35821;&#35328;&#65288;&#20063;&#31216;&#20026;&#8220;&#20195;&#30721;&#39118;&#26684;&#8221;&#65289;&#25110;@AspectJ&#27880;&#35299;&#39118;&#26684;&#12290;
               &#24456;&#26174;&#28982;&#65292;&#22914;&#26524;&#20320;&#29992;&#30340;&#19981;&#26159;Java 5+&#37027;&#20040;&#32467;&#35770;&#26159;&#20320;&#21482;&#33021;&#20351;&#29992;&#20195;&#30721;&#39118;&#26684;&#12290;
               &#22914;&#26524;&#20999;&#38754;&#22312;&#20320;&#30340;&#35774;&#35745;&#20013;&#25198;&#28436;&#19968;&#20010;&#24456;&#22823;&#30340;&#35282;&#33394;&#65292;&#24182;&#19988;&#20320;&#33021;&#22312;Eclipse&#20013;&#20351;&#29992;<a href="http://www.eclipse.org/ajdt/" target="_top">AspectJ Development Tools (AJDT)</a>&#65292;
               &#37027;&#20040;&#39318;&#36873;AspectJ&#35821;&#35328; :- &#22240;&#20026;&#35813;&#35821;&#35328;&#19987;&#38376;&#34987;&#35774;&#35745;&#29992;&#26469;&#32534;&#20889;&#20999;&#38754;&#65292;&#25152;&#20197;&#20250;&#26356;&#28165;&#26224;&#12289;&#26356;&#31616;&#21333;&#12290;&#22914;&#26524;&#20320;&#27809;&#26377;&#20351;&#29992;
               Eclipse&#65292;&#25110;&#32773;&#22312;&#20320;&#30340;&#24212;&#29992;&#20013;&#21482;&#26377;&#24456;&#23569;&#30340;&#20999;&#38754;&#24182;&#27809;&#26377;&#20316;&#20026;&#19968;&#20010;&#20027;&#35201;&#30340;&#35282;&#33394;&#65292;&#20320;&#25110;&#35768;&#24212;&#35813;&#32771;&#34385;&#20351;&#29992;@AspectJ&#39118;&#26684;
               &#24182;&#22312;&#20320;&#30340;IDE&#20013;&#38468;&#21152;&#19968;&#20010;&#26222;&#36890;&#30340;Java&#32534;&#36753;&#22120;&#65292;&#24182;&#19988;&#22312;&#20320;&#30340;&#26500;&#24314;&#33050;&#26412;&#20013;&#22686;&#21152;&#20999;&#38754;&#32455;&#20837;&#65288;&#38142;&#25509;&#65289;&#30340;&#27573;&#33853;&#12290;
            </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-ataspectj-or-xml"></a>6.4.2.&nbsp;Spring AOP&#20013;&#20351;&#29992;@AspectJ&#36824;&#26159;XML&#65311;</h3></div></div><div></div></div><p>
              &#22914;&#26524;&#20320;&#36873;&#25321;&#20351;&#29992;Spring AOP&#65292;&#37027;&#20040;&#20320;&#21487;&#20197;&#36873;&#25321;@AspectJ&#25110;&#32773;XML&#39118;&#26684;&#12290;&#26174;&#28982;&#22914;&#26524;&#20320;&#19981;&#26159;&#36816;&#34892;
              &#22312;Java 5&#19978;&#65292;XML&#39118;&#26684;&#26159;&#26368;&#20339;&#36873;&#25321;&#12290;&#23545;&#20110;&#20351;&#29992;Java 5&#30340;&#39033;&#30446;&#65292;&#38656;&#35201;&#32771;&#34385;&#22810;&#26041;&#38754;&#30340;&#25240;&#34935;&#12290;
            </p><p>
              XML&#39118;&#26684;&#23545;&#29616;&#26377;&#30340;Spring&#29992;&#25143;&#26469;&#35828;&#26356;&#21152;&#20064;&#24815;&#12290;&#23427;&#21487;&#20197;&#20351;&#29992;&#22312;&#20219;&#20309;Java&#32423;&#21035;&#20013;
              &#65288;&#21442;&#32771;&#36830;&#25509;&#28857;&#34920;&#36798;&#24335;&#20869;&#37096;&#30340;&#21629;&#21517;&#36830;&#25509;&#28857;&#65292;&#34429;&#28982;&#23427;&#20063;&#38656;&#35201;Java 5+&#65289;
              &#24182;&#19988;&#36890;&#36807;&#32431;&#31929;&#30340;POJO&#26469;&#25903;&#25345;&#12290;&#24403;&#20351;&#29992;AOP&#20316;&#20026;&#24037;&#20855;&#26469;&#37197;&#32622;&#20225;&#19994;&#26381;&#21153;&#26102;XML&#20250;&#26159;&#19968;&#20010;&#24456;&#22909;&#30340;&#36873;&#25321;&#12290;
              &#65288;&#19968;&#20010;&#22909;&#30340;&#20363;&#23376;&#26159;&#24403;&#20320;&#35748;&#20026;&#36830;&#25509;&#28857;&#34920;&#36798;&#24335;&#26159;&#20320;&#30340;&#37197;&#32622;&#20013;&#30340;&#19968;&#37096;&#20998;&#26102;&#65292;&#20320;&#21487;&#33021;&#24819;&#21333;&#29420;&#26356;&#25913;&#23427;&#65289;
              &#23545;&#20110;XML&#39118;&#26684;&#65292;&#20174;&#20320;&#30340;&#37197;&#32622;&#20013;&#21487;&#20197;&#28165;&#26224;&#30340;&#34920;&#26126;&#22312;&#31995;&#32479;&#20013;&#23384;&#22312;&#37027;&#20123;&#20999;&#38754;&#12290;
            </p><p>
              XML&#39118;&#26684;&#26377;&#20004;&#20010;&#32570;&#28857;&#12290;&#31532;&#19968;&#26159;&#23427;&#19981;&#33021;&#23436;&#20840;&#23558;&#38656;&#27714;&#23454;&#29616;&#30340;&#22320;&#26041;&#23553;&#35013;&#21040;&#19968;&#20010;&#20301;&#32622;&#12290;
              DRY&#21407;&#21017;&#20013;&#35828;&#31995;&#32479;&#20013;&#30340;&#27599;&#19968;&#39033;&#30693;&#35782;&#37117;&#24517;&#39035;&#20855;&#26377;&#21333;&#19968;&#12289;&#26080;&#27495;&#20041;&#12289;&#26435;&#23041;&#30340;&#34920;&#31034;&#12290;
              &#24403;&#20351;&#29992;XML&#39118;&#26684;&#26102;&#65292;&#22914;&#20309;&#23454;&#29616;&#19968;&#20010;&#38656;&#27714;&#30340;&#30693;&#35782;&#34987;&#20998;&#21106;&#21040;&#25903;&#25745;&#31867;&#30340;&#22768;&#26126;&#20013;&#20197;&#21450;XML&#37197;&#32622;&#25991;&#20214;&#20013;&#12290;
              &#24403;&#20351;&#29992;@AspectJ&#39118;&#26684;&#26102;&#23601;&#21482;&#26377;&#19968;&#20010;&#21333;&#29420;&#30340;&#27169;&#22359; -&#20999;&#38754;- &#20449;&#24687;&#34987;&#23553;&#35013;&#20102;&#36215;&#26469;&#12290;
              &#31532;&#20108;&#26159;XML&#39118;&#26684;&#21516;@AspectJ&#39118;&#26684;&#25152;&#33021;&#34920;&#36798;&#30340;&#20869;&#23481;&#30456;&#27604;&#26377;&#26356;&#22810;&#30340;&#38480;&#21046;&#65306;&#20165;&#20165;&#25903;&#25345;"singleton"&#20999;&#38754;&#23454;&#20363;&#27169;&#22411;&#65292;
              &#24182;&#19988;&#19981;&#33021;&#22312;XML&#20013;&#32452;&#21512;&#21629;&#21517;&#36830;&#25509;&#28857;&#30340;&#22768;&#26126;&#12290;&#20363;&#22914;&#65292;&#22312;@AspectJ&#39118;&#26684;&#20013;&#25105;&#20204;&#21487;&#20197;&#32534;&#20889;&#22914;&#19979;&#30340;&#20869;&#23481;&#65306;
            </p><pre class="programlisting">@Pointcut(execution(* get*()))
                public void propertyAccess() {}
                
                @Pointcut(execution(org.xyz.Account+ *(..))
                public void operationReturningAnAccount() {}
                
                @Pointcut(propertyAccess() &amp;&amp; operationReturningAnAccount())
            public void accountPropertyAccess() {}</pre><p>&#22312;XML&#39118;&#26684;&#20013;&#33021;&#22768;&#26126;&#24320;&#22836;&#30340;&#20004;&#20010;&#36830;&#25509;&#28857;&#65306;</p><pre class="programlisting">  &lt;aop:pointcut id="propertyAccess"
                expression="execution(* get*())"/&gt;
                
                &lt;aop:pointcut id="operationReturningAnAccount"
            expression="execution(org.xyz.Account+ *(..))"/&gt;</pre><p>&#20294;&#26159;&#19981;&#33021;&#36890;&#36807;&#32452;&#21512;&#36825;&#20123;&#26469;&#23450;&#20041;<tt class="literal">accountPropertyAccess</tt>&#36830;&#25509;&#28857;</p><p>
              @AspectJ&#39118;&#26684;&#25903;&#25345;&#20854;&#23427;&#30340;&#23454;&#20363;&#27169;&#22411;&#20197;&#21450;&#26356;&#20016;&#23500;&#30340;&#36830;&#25509;&#28857;&#32452;&#21512;&#12290;&#23427;&#20855;&#26377;&#23558;&#20999;&#38754;&#20445;&#25345;&#20026;&#19968;&#20010;&#27169;&#22359;&#21333;&#20803;&#30340;&#20248;&#28857;&#12290;
              &#36824;&#26377;&#19968;&#20010;&#20248;&#28857;&#23601;&#26159;@AspectJ&#20999;&#38754;&#33021;&#34987;Spring AOP&#21644;AspectJ&#20004;&#32773;&#37117;&#29702;&#35299; - 
              &#25152;&#20197;&#22914;&#26524;&#31245;&#21518;&#20320;&#35748;&#20026;&#20320;&#38656;&#35201;AspectJ&#30340;&#33021;&#21147;&#21435;&#23454;&#29616;&#38468;&#21152;&#30340;&#38656;&#27714;&#65292;&#37027;&#20040;&#20320;&#38750;&#24120;&#23481;&#26131;&#36801;&#31227;&#21040;&#22522;&#20110;AspectJ&#30340;&#36884;&#24452;&#12290;
              &#24635;&#32780;&#35328;&#20043;&#65292;&#25105;&#20204;&#26356;&#21916;&#27426;@AspectJ&#39118;&#26684;&#21482;&#35201;&#20320;&#26377;&#20999;&#38754;&#21435;&#20570;&#36229;&#20986;&#31616;&#21333;&#30340;&#8220;&#37197;&#32622;&#8221;&#20225;&#19994;&#26381;&#21153;&#20043;&#22806;&#30340;&#20107;&#24773;&#12290;
            </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="aop-mixing-styles"></a>6.5.&nbsp;&#28151;&#21512;&#20999;&#38754;&#31867;&#22411;</h2></div></div><div></div></div><p>
            &#25105;&#20204;&#23436;&#20840;&#21487;&#20197;&#28151;&#21512;&#20351;&#29992;&#20197;&#19979;&#20960;&#31181;&#39118;&#26684;&#30340;&#20999;&#38754;&#23450;&#20041;&#65306;&#20351;&#29992;&#33258;&#21160;&#20195;&#29702;&#30340;@AspectJ&#39118;&#26684;&#30340;&#20999;&#38754;&#65292;
            schema-defined <tt class="literal">&lt;aop:aspect&gt;</tt>&#30340;&#20999;&#38754;&#65292;&#21644;&#29992; 
            <tt class="literal">&lt;aop:advisor&gt;</tt>&#22768;&#26126;&#30340;advisor&#65292;&#29978;&#33267;&#26159;&#20351;&#29992;Spring 1.2&#39118;&#26684;&#30340;&#20195;&#29702;&#21644;&#25318;&#25130;&#22120;&#12290;
            &#30001;&#20110;&#20197;&#19978;&#20960;&#31181;&#39118;&#26684;&#30340;&#20999;&#38754;&#23450;&#20041;&#30340;&#37117;&#20351;&#29992;&#20102;&#30456;&#21516;&#30340;&#24213;&#23618;&#26426;&#21046;&#65292;&#22240;&#27492;&#21487;&#20197;&#24456;&#22909;&#30340;&#20849;&#23384;&#12290;
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="aop-proxying"></a>6.6.&nbsp;&#20195;&#29702;&#26426;&#21046;</h2></div></div><div></div></div><p>Spring AOP&#37096;&#20998;&#20351;&#29992;JDK&#21160;&#24577;&#20195;&#29702;&#25110;&#32773;CGLIB&#26469;&#20026;&#30446;&#26631;&#23545;&#35937;&#21019;&#24314;&#20195;&#29702;&#12290;&#65288;&#24314;&#35758;&#20248;&#20808;&#20351;&#29992;JDK&#30340;&#21160;&#24577;&#20195;&#29702;&#65289;</p><p>
          &#22914;&#26524;&#34987;&#20195;&#29702;&#30340;&#30446;&#26631;&#23545;&#35937;&#23454;&#29616;&#20102;&#33267;&#23569;&#19968;&#20010;&#25509;&#21475;&#65292;&#21017;&#20250;&#20351;&#29992;JDK&#21160;&#24577;&#20195;&#29702;&#12290;&#25152;&#26377;&#35813;&#30446;&#26631;&#31867;&#22411;&#23454;&#29616;&#30340;&#25509;&#21475;&#37117;&#23558;&#34987;&#20195;&#29702;&#12290;
          &#33509;&#35813;&#30446;&#26631;&#23545;&#35937;&#27809;&#26377;&#23454;&#29616;&#20219;&#20309;&#25509;&#21475;&#65292;&#21017;&#21019;&#24314;&#19968;&#20010;CGLIB&#20195;&#29702;&#12290;
        </p><p>&#22914;&#26524;&#20320;&#24076;&#26395;&#24378;&#21046;&#20351;&#29992;CGLIB&#20195;&#29702;&#65292;&#65288;&#20363;&#22914;&#65306;&#24076;&#26395;&#20195;&#29702;&#30446;&#26631;&#23545;&#35937;&#30340;&#25152;&#26377;&#26041;&#27861;&#65292;&#32780;&#19981;&#21482;&#26159;&#23454;&#29616;&#33258;&#25509;&#21475;&#30340;&#26041;&#27861;&#65289;
          &#37027;&#20063;&#21487;&#20197;&#12290;&#20294;&#26159;&#38656;&#35201;&#32771;&#34385;&#20197;&#19979;&#38382;&#39064;:
        </p><div class="itemizedlist"><ul type="disc"><li><p>&#26080;&#27861;&#36890;&#30693;&#65288;advise&#65289;<tt class="literal">Final</tt>&#26041;&#27861;&#65292;&#22240;&#20026;&#20182;&#20204;&#19981;&#33021;&#34987;&#35206;&#20889;&#12290;</p></li><li><p>&#20320;&#38656;&#35201;&#23558;CGLIB 2&#20108;&#36827;&#21046;&#21457;&#34892;&#21253;&#25918;&#22312;classpath&#19979;&#38754;&#65292;&#19982;&#20043;&#30456;&#36739;JDK&#26412;&#36523;&#23601;&#25552;&#20379;&#20102;&#21160;&#24577;&#20195;&#29702;&#12290;
                &#24403;&#38656;&#35201;CGLIB&#32780;&#22312;classpath&#19979;&#21448;&#27809;&#26377;&#25214;&#21040;CGLIB&#31867;&#24211;&#30340;&#35805;&#65292;Spring&#20250;&#33258;&#21160;&#25552;&#37266;&#12290;</p></li><li><p>&#20195;&#29702;&#23545;&#35937;&#30340;&#26500;&#36896;&#22120;&#20250;&#34987;&#35843;&#29992;&#20004;&#27425;&#12290;&#36825;&#26159;&#24456;&#33258;&#28982;&#30340;&#32467;&#26524;&#22240;&#20026;&#22312;CGLIB&#20195;&#29702;&#27169;&#24335;&#19979;&#27599;&#19968;&#20010;&#20195;&#29702;&#23545;&#35937;&#37117;&#20250;
                &#20135;&#29983;&#19968;&#20010;&#23376;&#31867;&#12290;&#27599;&#19968;&#20010;&#20195;&#29702;&#23454;&#20363;&#20250;&#29983;&#25104;&#20004;&#20010;&#23545;&#35937;&#65306;&#23454;&#38469;&#20195;&#29702;&#23545;&#35937;&#21644;&#23427;&#30340;&#19968;&#20010;&#23454;&#29616;&#20102;&#36890;&#30693;&#30340;&#23376;&#31867;&#23454;&#20363;
                &#32780;&#26159;&#29992;JDK&#20195;&#29702;&#26102;&#19981;&#20250;&#20986;&#29616;&#36825;&#26679;&#30340;&#34892;&#20026;&#12290;&#36890;&#24120;&#24773;&#20917;&#19979;&#65292;&#35843;&#29992;&#20195;&#29702;&#31867;&#22411;&#30340;&#26500;&#36896;&#22120;&#20004;&#27425;&#24182;&#19981;&#26159;&#38382;&#39064;&#65292;
                &#22240;&#20026;&#38500;&#20102;&#20250;&#21457;&#29983;&#25351;&#27966;&#22806;&#27809;&#26377;&#20219;&#20309;&#30495;&#27491;&#30340;&#36923;&#36753;&#34987;&#23454;&#29616;&#12290;</p></li></ul></div><p><a name="aop-autoproxy-force-CGLIB"></a>
        &#24378;&#21046;&#20351;&#29992;CGLIB&#20195;&#29702;&#38656;&#35201;&#23558;<tt class="literal">&lt;aop:config&gt;</tt>&#30340;<tt class="literal">proxy-target-class</tt>
        &#23646;&#24615;&#35774;&#20026;true:</p><pre class="programlisting">&lt;aop:config <span class="bold"><b>proxy-target-class="true"</b></span>&gt;
            <i class="lineannotation"><span class="lineannotation">&lt;!-- other beans defined here... --&gt;</span></i>
        &lt;/aop:config&gt;</pre><p>&#24403;&#20351;&#29992;@AspectJ&#33258;&#21160;&#20195;&#29702;&#26102;&#35201;&#24378;&#21046;&#20351;&#29992;CGLIB&#65292;&#35831;&#23558;<tt class="literal">&lt;aop:aspectj-autoproxy&gt;</tt>
        &#30340;<tt class="literal">proxy-target-class</tt>&#23646;&#24615;&#35774;&#32622;&#20026;<tt class="literal">true</tt>:</p><pre class="programlisting">&lt;aop:aspectj-autoproxy <span class="bold"><b>proxy-target-class="true"</b></span>/&gt;</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>
                &#22810;&#20010;<tt class="literal">&lt;aop:config/&gt;</tt>&#29255;&#27573;&#22312;&#36816;&#34892;&#26102;&#34987;&#21253;&#21547;&#21040;&#19968;&#20010;&#32479;&#19968;&#30340;&#33258;&#21160;&#20195;&#29702;&#26500;&#36896;&#22120;&#20013;&#65292;
                &#23427;&#20026;&#20219;&#20309;<tt class="literal">&lt;aop:config/&gt;</tt>&#29255;&#27573;&#65288;&#19968;&#33324;&#26469;&#33258;&#19981;&#21516;&#30340;XML bean&#23450;&#20041;&#25991;&#20214;&#65289;&#20013;&#25351;&#23450;&#30340;&#20869;&#23481;&#24212;&#29992;
                <span class="emphasis"><em>&#26368;&#24378;</em></span>&#30340;&#20195;&#29702;&#35774;&#32622;&#12290;&#27492;&#35774;&#32622;&#21516;&#26679;&#20063;&#36866;&#29992;&#20110;<tt class="literal">&lt;tx:annotation-driven/&gt;</tt>
                &#21644;<tt class="literal">&lt;aop:aspectj-autoproxy/&gt;</tt>&#20803;&#32032;&#12290;
            </p><p>
                &#28165;&#26970;&#22320;&#35762;&#65292;&#22312;<tt class="literal">&lt;tx:annotation-driven/&gt;</tt>&#12289;
                <tt class="literal">&lt;aop:aspectj-autoproxy/&gt;</tt>&#25110;&#32773;<tt class="literal">&lt;aop:config/&gt;</tt>
                &#20803;&#32032;&#19978;&#20351;&#29992;'<tt class="literal">proxy-target-class="true"</tt>'&#20250;&#23548;&#33268;&#23558;CGLIB&#20195;&#29702;&#24212;&#29992;&#20110;&#27492;&#19977;&#32773;&#20043;&#19978;&#12290;
            </p></td></tr></tbody></table></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-understanding-aop-proxies"></a>6.6.1.&nbsp;&#29702;&#35299;AOP&#20195;&#29702;</h3></div></div><div></div></div><p>
                Spring AOP&#26159;<span class="emphasis"><em>&#22522;&#20110;&#20195;&#29702;&#26426;&#21046;</em></span>&#30340;&#12290;&#23454;&#38469;&#19978;&#22312;&#20320;&#32534;&#20889;&#33258;&#24049;&#30340;&#20999;&#38754;&#25110;&#32773;
                &#20351;&#29992;&#20219;&#20309;&#30001;Spring&#26694;&#26550;&#25552;&#20379;&#30340;&#22522;&#20110;Spring AOP&#20999;&#38754;&#20043;&#21069;&#65292;&#28145;&#21051;&#39046;&#20250;&#36825;&#19968;&#21477;&#30340;&#24847;&#24605;&#26159;&#38750;&#24120;&#37325;&#35201;&#30340;&#12290;
            </p><p>
                &#32771;&#34385;&#22914;&#19979;&#22330;&#26223;&#65292;&#24403;&#20320;&#25343;&#21040;&#19968;&#20010;&#26080;&#20195;&#29702;&#30340;&#12289;&#26080;&#20219;&#20309;&#29305;&#27530;&#20043;&#22788;&#30340;POJO&#23545;&#35937;&#24341;&#29992;&#26102;&#65292;&#22914;&#20197;&#19979;&#20195;&#30721;&#27573;&#25152;&#31034;
            </p><pre class="programlisting">public class SimplePojo implements Pojo {
                
                public void foo() {
                <i class="lineannotation"><span class="lineannotation">// this next method invocation is a <span class="bold"><b>direct</b></span> call on the 'this' reference</span></i>
                this.bar();
                }
                
                public void bar() {
                <i class="lineannotation"><span class="lineannotation">// some logic...</span></i>
                }
            }</pre><p>
                &#24403;&#20320;&#35843;&#29992;&#19968;&#20010;&#23545;&#35937;&#24341;&#29992;&#30340;&#26041;&#27861;&#26102;&#65292;&#27492;&#23545;&#35937;&#24341;&#29992;&#19978;&#30340;&#26041;&#27861;<span class="emphasis"><em>&#30452;&#25509;</em></span>&#34987;&#35843;&#29992;&#65292;&#22914;&#19979;&#25152;&#31034;
            </p><div class="mediaobject" align="center"><img src="aop-proxy-plain-pojo-call.png" align="middle"></div><pre class="programlisting">public class Main {
                
                public static void main(String[] args) {
                
                Pojo pojo = new SimplePojo();
                
                <i class="lineannotation"><span class="lineannotation">// this is a <span class="bold"><b>direct</b></span> method call on the 'pojo' reference</span></i>
                pojo.foo();
                }
            }</pre><p>
                &#24403;&#23458;&#25143;&#20195;&#30721;&#25152;&#25345;&#26377;&#30340;&#24341;&#29992;&#26159;&#19968;&#20010;&#20195;&#29702;&#30340;&#26102;&#20505;&#21017;&#30053;&#26377;&#19981;&#21516;&#20102;&#12290;&#35831;&#32771;&#34385;&#22914;&#19979;&#22270;&#31034;&#21644;&#20195;&#30721;&#27573;&#29255;&#26029;
            </p><div class="mediaobject" align="center"><img src="aop-proxy-call.png" align="middle"></div><pre class="programlisting">public class Main {
                
                public static void main(String[] args) {
                
                ProxyFactory factory = new ProxyFactory(new SimplePojo());
                factory.addInterface(Pojo.class);
                factory.addAdvice(new RetryAdvice());
                
                Pojo pojo = (Pojo) factory.getProxy();
                
                <i class="lineannotation"><span class="lineannotation">// this is a method call <span class="bold"><b>on the proxy!</b></span></span></i>
                pojo.foo();
                }
            }</pre><p>
                &#29702;&#35299;&#27492;&#22788;&#30340;&#20851;&#38190;&#26159;<tt class="classname">Main</tt>&#31867;<tt class="methodname">main(..)</tt>&#26041;&#27861;&#20013;&#30340;&#23458;&#25143;&#20195;&#30721;
                <span class="emphasis"><em>&#25317;&#26377;&#19968;&#20010;&#20195;&#29702;&#30340;&#24341;&#29992;</em></span>&#12290;&#36825;&#24847;&#21619;&#30528;&#23545;&#36825;&#20010;&#23545;&#35937;&#24341;&#29992;&#20013;&#26041;&#27861;&#30340;&#35843;&#29992;&#23601;&#26159;&#23545;&#20195;&#29702;&#30340;&#35843;&#29992;&#65292;
                &#32780;&#36825;&#20010;&#20195;&#29702;&#33021;&#22815;&#20195;&#29702;&#25152;&#26377;&#36319;&#29305;&#23450;&#26041;&#27861;&#35843;&#29992;&#30456;&#20851;&#30340;&#25318;&#25130;&#22120;&#12290;&#19981;&#36807;&#65292;&#19968;&#26086;&#35843;&#29992;&#26368;&#32456;&#25269;&#36798;&#20102;&#30446;&#26631;&#23545;&#35937;
                &#65288;&#27492;&#22788;&#20026;<tt class="classname">SimplePojo</tt>&#31867;&#30340;&#24341;&#29992;&#65289;&#65292;&#20219;&#20309;&#23545;&#33258;&#36523;&#30340;&#35843;&#29992;&#20363;&#22914;
                <tt class="methodname">this.bar()</tt>&#25110;&#32773;<tt class="methodname">this.foo()</tt>
                &#23558;&#23545;<span class="emphasis"><em><tt class="literal">this</tt></em></span>&#24341;&#29992;&#36827;&#34892;&#35843;&#29992;&#32780;&#38750;&#20195;&#29702;&#12290;&#36825;&#19968;&#28857;&#24847;&#20041;&#37325;&#22823;&#65292;
                &#23427;&#24847;&#21619;&#30528;&#33258;&#25105;&#35843;&#29992;&#23558;<span class="emphasis"><em>&#19981;</em></span>&#20250;&#23548;&#33268;&#21644;&#26041;&#27861;&#35843;&#29992;&#20851;&#32852;&#30340;&#36890;&#30693;&#24471;&#21040;&#25191;&#34892;&#30340;&#26426;&#20250;&#12290;
            </p><p>
              &#37027;&#22909;&#65292;&#20026;&#27492;&#35201;&#24590;&#20040;&#21150;&#21602;&#65311;&#26368;&#22909;&#30340;&#21150;&#27861;&#65288;&#36825;&#37324;&#20351;&#29992;&#26368;&#22909;&#36825;&#20010;&#26415;&#35821;&#19981;&#29978;&#31934;&#30830;&#65289;&#23601;&#26159;&#37325;&#26500;&#20320;&#30340;&#20195;&#30721;&#20351;&#33258;&#25105;&#35843;&#29992;&#19981;&#20250;&#20986;&#29616;&#12290;
              &#24403;&#28982;&#65292;&#36825;&#30340;&#30830;&#38656;&#35201;&#20320;&#20570;&#19968;&#20123;&#24037;&#20316;&#65292;&#20294;&#21364;&#26159;&#26368;&#22909;&#30340;&#65292;&#26368;&#23569;&#20405;&#20837;&#24615;&#30340;&#26041;&#27861;&#12290;&#21478;&#19968;&#20010;&#26041;&#27861;&#21017;&#24456;&#21487;&#24597;&#65292;
              &#20063;&#27491;&#22240;&#20026;&#22914;&#27492;&#25105;&#20960;&#20046;&#19981;&#24895;&#25351;&#20986;&#36825;&#31181;&#26041;&#27861;&#12290;&#20320;&#21487;&#20197;&#35937;&#22914;&#19979;&#36825;&#26679;&#23436;&#20840;&#25226;&#19994;&#21153;&#36923;&#36753;&#20889;&#22312;&#20320;&#30340;Spring AOP&#31867;&#20013;&#65306;
            </p><pre class="programlisting">public class SimplePojo implements Pojo {
                
                public void foo() {
                <i class="lineannotation"><span class="lineannotation">// this works, but... gah!</span></i>
                ((Pojo) AopContext.currentProxy()).bar();
                }
                
                public void bar() {
                <i class="lineannotation"><span class="lineannotation">// some logic...</span></i>
                }
            }</pre><p>
                &#36825;&#26679;&#23436;&#20840;&#23558;&#20320;&#30340;&#20195;&#30721;&#20132;&#32473;&#20102;Spring AOP&#65292;<span class="emphasis"><em>&#24182;&#19988;</em></span>&#35753;&#31867;&#26412;&#36523;&#30693;&#36947;&#23427;&#27491;&#34987;&#29992;&#20110;&#19968;&#20010;AOP&#30340;&#19978;&#19979;&#25991;&#20013;&#65292;
                &#32780;&#23427;&#20854;&#20013;&#30340;&#25991;&#20214;&#30452;&#25509;&#38754;&#23545;AOP&#12290;&#24403;&#20195;&#29702;&#22312;&#34987;&#21019;&#24314;&#26102;&#20063;&#38656;&#35201;&#19968;&#20123;&#39069;&#22806;&#30340;&#37197;&#32622;&#65306;
            </p><pre class="programlisting">public class Main {
                
                public static void main(String[] args) {
                
                ProxyFactory factory = new ProxyFactory(new SimplePojo());
                factory.adddInterface(Pojo.class);
                factory.addAdvice(new RetryAdvice());
                <i class="lineannotation"><span class="lineannotation"><span class="bold"><b>factory.setExposeProxy(true);</b></span></span></i>
                
                Pojo pojo = (Pojo) factory.getProxy();
                
                <i class="lineannotation"><span class="lineannotation">// this is a method call <span class="bold"><b>on the proxy!</b></span></span></i>
                pojo.foo();
                }
            }</pre><p>
                &#26368;&#21518;&#65292;&#24517;&#39035;&#27880;&#24847;AspectJ&#19981;&#23384;&#22312;&#36825;&#31181;&#33258;&#25105;&#35843;&#29992;&#30340;&#38382;&#39064;&#65292;&#22240;&#20026;&#23427;&#24182;&#19981;&#26159;&#19968;&#20010;&#22522;&#20110;&#20195;&#29702;&#30340;AOP&#26694;&#26550;&#12290;
            </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="aop-aspectj-programmatic"></a>6.7.&nbsp;&#20197;&#32534;&#31243;&#26041;&#24335;&#21019;&#24314;@AspectJ&#20195;&#29702;</h2></div></div><div></div></div><p>
            &#38500;&#20102;&#22312;&#37197;&#32622;&#25991;&#20214;&#20013;&#20351;&#29992;&lt;aop:config&gt;&#25110;&#32773;&lt;aop:aspectj-autoproxy&gt;&#26469;&#22768;&#26126;&#20999;&#38754;&#12290;
            &#21516;&#26679;&#21487;&#20197;&#36890;&#36807;&#32534;&#31243;&#26041;&#24335;&#26469;&#21019;&#24314;&#20195;&#29702;&#26469;&#36890;&#30693;&#30446;&#26631;&#23545;&#35937;&#12290;&#20851;&#20110;Spring AOP API&#30340;&#35814;&#32454;&#20171;&#32461;&#65292;
            &#35831;&#21442;&#30475;&#19979;&#19968;&#31456;&#12290;&#36825;&#37324;&#25105;&#20204;&#37325;&#28857;&#20171;&#32461;&#33258;&#21160;&#21019;&#24314;&#20195;&#29702;&#12290;
        </p><p>
            &#31867;<tt class="classname">org.springframework.aop.aspectj.annotation.AspectJProxyFactory</tt>&#21487;&#20197;&#20026;&#19968;&#20010;&#25110;&#22810;&#20010;
            @AspectJ&#20999;&#38754;&#36890;&#30693;&#30340;&#30446;&#26631;&#23545;&#35937;&#21019;&#24314;&#19968;&#20010;&#20195;&#29702;&#12290;&#35813;&#31867;&#30340;&#22522;&#26412;&#29992;&#27861;&#38750;&#24120;&#31616;&#21333;&#65292;&#31034;&#20363;&#22914;&#19979;&#12290;&#35831;&#21442;&#38405;Javadoc&#33719;&#21462;&#26356;&#35814;&#32454;&#30340;&#20449;&#24687;&#12290;
        </p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">// create a factory that can generate a proxy for the given target object</span></i>
            AspectJProxyFactory factory = new AspectJProxyFactory(targetObject); 
            
            <i class="lineannotation"><span class="lineannotation">// add an aspect, the class must be an @AspectJ aspect
            // you can call this as many times as you need with different aspects</span></i>
            factory.addAspect(SecurityManager.class);
            
            <i class="lineannotation"><span class="lineannotation">// you can also add existing aspect instances, the type of the object supplied must be an @AspectJ aspect</span></i>
            factory.addAspect(usageTracker);	
            
            <i class="lineannotation"><span class="lineannotation">// now get the proxy object...</span></i>
        MyInterfaceType proxy = factory.getProxy();</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="aop-using-aspectj"></a>6.8.&nbsp;&#22312;Spring&#24212;&#29992;&#20013;&#20351;&#29992;AspectJ</h2></div></div><div></div></div><p>
            &#21040;&#30446;&#21069;&#20026;&#27490;&#26412;&#31456;&#35752;&#35770;&#30340;&#19968;&#30452;&#26159;&#32431;Spring AOP&#12290;&#22312;&#36825;&#19968;&#33410;&#37324;&#38754;&#25105;&#20204;&#23558;&#20171;&#32461;&#22914;&#20309;&#20351;&#29992;AspectJ compiler/weaver
            &#26469;&#20195;&#26367;Spring AOP&#25110;&#32773;&#20316;&#20026;&#23427;&#30340;&#34917;&#20805;&#65292;&#22240;&#20026;&#26377;&#20123;&#26102;&#20505;Spring AOP&#21333;&#29420;&#25552;&#20379;&#30340;&#21151;&#33021;&#20063;&#35768;&#24182;&#19981;&#33021;&#28385;&#36275;&#20320;&#30340;&#38656;&#35201;&#12290;
        </p><p>
            Spring&#25552;&#20379;&#20102;&#19968;&#20010;&#23567;&#24039;&#30340;AspectJ aspect library&#65292;&#20320;&#21487;&#20197;&#22312;&#31243;&#24207;&#21457;&#34892;&#29256;&#26412;&#20013;&#21333;&#29420;&#20351;&#29992;
            <tt class="literal">spring-aspects.jar</tt>&#25991;&#20214;&#65292;&#24182;&#23558;&#20854;&#21152;&#20837;&#21040;classpath&#19979;&#20197;&#20351;&#29992;&#20854;&#20013;&#30340;&#20999;&#38754;&#12290;
            <a href="#aop-atconfigurable" title="6.8.1.&nbsp;&#22312;Spring&#20013;&#20351;&#29992;AspectJ&#36827;&#34892;domain object&#30340;&#20381;&#36182;&#27880;&#20837;">Section&nbsp;6.8.1, &#8220;&#22312;Spring&#20013;&#20351;&#29992;AspectJ&#36827;&#34892;domain object&#30340;&#20381;&#36182;&#27880;&#20837;&#8221;</a>&#21644;<a href="#aop-ajlib-other" title="6.8.2.&nbsp;Spring&#20013;&#20854;&#20182;&#30340;AspectJ&#20999;&#38754;">Section&nbsp;6.8.2, &#8220;Spring&#20013;&#20854;&#20182;&#30340;AspectJ&#20999;&#38754;&#8221;</a> &#35752;&#35770;&#20102;&#35813;&#24211;&#20197;&#21450;&#22914;&#20309;&#20351;&#29992;&#35813;&#24211;&#12290;
            <a href="#aop-aj-configure" title="6.8.3.&nbsp;&#20351;&#29992;Spring IoC&#26469;&#37197;&#32622;AspectJ&#30340;&#20999;&#38754;">Section&nbsp;6.8.3, &#8220;&#20351;&#29992;Spring IoC&#26469;&#37197;&#32622;AspectJ&#30340;&#20999;&#38754;&#8221;</a>&#35752;&#35770;&#20102;&#22914;&#20309;&#23545;&#36890;&#36807;AspectJ compiler&#32455;&#20837;&#30340;AspectJ&#20999;&#38754;&#36827;&#34892;&#20381;&#36182;&#27880;&#20837;&#12290;
            &#26368;&#21518;<a href="#aop-aj-ltw" title="6.8.4.&nbsp;&#22312;Spring&#24212;&#29992;&#20013;&#20351;&#29992;AspectJ&#21152;&#36733;&#26102;&#32455;&#20837;&#65288;LTW&#65289;">Section&nbsp;6.8.4, &#8220;&#22312;Spring&#24212;&#29992;&#20013;&#20351;&#29992;AspectJ&#21152;&#36733;&#26102;&#32455;&#20837;&#65288;LTW&#65289;&#8221;</a>&#20171;&#32461;&#20102;&#20351;&#29992;AspectJ&#30340;Spring&#24212;&#29992;&#31243;&#24207;&#22914;&#20309;&#36827;&#34892;&#21152;&#36733;&#26399;&#32455;&#20837;&#65288;load-time weaving&#65289;&#12290;
        </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-atconfigurable"></a>6.8.1.&nbsp;&#22312;Spring&#20013;&#20351;&#29992;AspectJ&#36827;&#34892;domain object&#30340;&#20381;&#36182;&#27880;&#20837;</h3></div></div><div></div></div><p>
                Spring&#23481;&#22120;&#23545;application context&#20013;&#23450;&#20041;&#30340;bean&#36827;&#34892;&#23454;&#20363;&#21270;&#21644;&#37197;&#32622;&#12290;&#21516;&#26679;&#20063;&#21487;&#20197;&#36890;&#36807;bean factory
                &#26469;&#20026;&#19968;&#20010;<span class="emphasis"><em>&#24050;&#32463;&#23384;&#22312;</em></span>&#19988;&#24050;&#32463;&#23450;&#20041;&#20026;spring bean&#30340;&#23545;&#35937;&#24212;&#29992;&#25152;&#21253;&#21547;&#30340;&#37197;&#32622;&#20449;&#24687;&#12290;
                <tt class="filename">spring-aspects.jar</tt>&#20013;&#21253;&#21547;&#20102;&#19968;&#20010;annotation-driven&#30340;&#20999;&#38754;&#65292;
                &#25552;&#20379;&#20102;&#33021;&#20026;<span class="emphasis"><em>&#20219;&#20309;&#23545;&#35937;</em></span>&#36827;&#34892;&#20381;&#36182;&#27880;&#20837;&#30340;&#33021;&#21147;&#12290;&#36825;&#26679;&#30340;&#25903;&#25345;&#26088;&#22312;&#20026;
                <span class="emphasis"><em>&#33073;&#31163;&#23481;&#22120;&#31649;&#29702;</em></span>&#32780;&#21019;&#24314;&#30340;&#23545;&#35937;&#36827;&#34892;&#20381;&#36182;&#27880;&#20837;&#12290;&#39046;&#22495;&#23545;&#35937;&#32463;&#24120;&#22788;&#20110;&#36825;&#26679;&#30340;&#24773;&#24418;&#65306;
                &#23427;&#20204;&#21487;&#33021;&#26159;&#36890;&#36807;<tt class="literal">new</tt>&#25805;&#20316;&#31526;&#21019;&#24314;&#30340;&#23545;&#35937;&#65292;&#20063;&#21487;&#33021;&#26159;&#30001;ORM&#24037;&#20855;&#26597;&#35810;&#25968;&#25454;&#24211;&#25152;&#36820;&#22238;&#30340;&#32467;&#26524;&#12290;
            </p><p>
              <tt class="interfacename">@Configurable</tt>&#27880;&#35299;&#26631;&#35760;&#20102;&#19968;&#20010;&#31867;&#21487;&#20197;&#36890;&#36807;Spring-driven&#26041;&#24335;&#26469;&#37197;&#32622;&#12290;
              &#22312;&#26368;&#31616;&#21333;&#30340;&#24773;&#20917;&#19979;&#65292;&#25105;&#20204;&#21482;&#25226;&#23427;&#24403;&#20316;&#26631;&#35760;&#27880;&#35299;&#65306;
            </p><pre class="programlisting">package com.xyz.myapp.domain;
                
                import org.springframework.beans.factory.annotation.Configurable;
                
                @Configurable
                public class Account {
                <i class="lineannotation"><span class="lineannotation">// ...</span></i>
            }</pre><p>
              &#24403;&#21482;&#26159;&#31616;&#21333;&#22320;&#20316;&#20026;&#19968;&#20010;&#26631;&#35760;&#25509;&#21475;&#26469;&#20351;&#29992;&#30340;&#26102;&#20505;&#65292;Spring&#23558;&#37319;&#29992;&#21644;&#35813;&#24050;&#27880;&#35299;&#30340;&#31867;&#22411;
             &#65288;&#27604;&#22914;<tt class="classname">Account</tt>&#31867;&#65289;&#20840;&#21517;&#65288;<tt class="classname">com.xyz.myapp.domain.Account</tt>&#65289;
              &#19968;&#33268;&#30340;bean&#21407;&#22411;&#23450;&#20041;&#26469;&#37197;&#32622;&#19968;&#20010;&#26032;&#23454;&#20363;&#12290;&#30001;&#20110;&#19968;&#20010;bean&#40664;&#35748;&#30340;&#21517;&#23383;&#23601;&#26159;&#23427;&#30340;&#20840;&#21517;&#65292;
              &#25152;&#20197;&#19968;&#20010;&#27604;&#36739;&#26041;&#20415;&#30340;&#21150;&#27861;&#23601;&#26159;&#30465;&#30053;&#23450;&#20041;&#20013;&#30340;<tt class="literal">id</tt>&#23646;&#24615;&#65306;
            </p><pre class="programlisting">&lt;bean class="com.xyz.myapp.domain.Account" scope="prototype"&gt;
                &lt;property name="fundsTransferService" ref="fundsTransferService"/&gt;
            &lt;/bean&gt;</pre><p>&#22914;&#26524;&#20320;&#24076;&#26395;&#26126;&#30830;&#30340;&#25351;&#23450;bean&#21407;&#22411;&#23450;&#20041;&#30340;&#21517;&#23383;&#65292;&#20320;&#21487;&#20197;&#22312;&#27880;&#35299;&#20013;&#30452;&#25509;&#23450;&#20041;&#65306;</p><pre class="programlisting">package com.xyz.myapp.domain;
                
                import org.springframework.beans.factory.annotation.Configurable;
                
                @Configurable("account")
                public class Account {
                <i class="lineannotation"><span class="lineannotation">// ...</span></i>
            }</pre><p>Spring&#20250;&#26597;&#25214;&#21517;&#23383;&#20026;"account"&#30340;bean&#23450;&#20041;&#65292;&#24182;&#20351;&#29992;&#23427;&#20316;&#23450;&#20041;&#26469;&#37197;&#32622;&#19968;&#20010;&#26032;&#30340;
            <tt class="classname">Account</tt>&#23454;&#20363;&#12290;</p><p>
              &#20320;&#20063;&#21487;&#20197;&#20351;&#29992;&#33258;&#21160;&#35013;&#37197;&#26469;&#36991;&#20813;&#25163;&#24037;&#25351;&#23450;&#21407;&#22411;&#23450;&#20041;&#30340;&#21517;&#23383;&#12290;&#21482;&#35201;&#35774;&#32622;<tt class="interfacename">@Configurable</tt>
              &#27880;&#35299;&#20013;&#30340;<tt class="literal">autowire</tt>&#23646;&#24615;&#23601;&#21487;&#20197;&#35753;Spring&#36827;&#34892;&#33258;&#21160;&#35013;&#37197;&#65306;
              &#25351;&#23450;<tt class="literal">@Configurable(autowire=Autowire.BY_TYPE)</tt>&#25110;&#32773;
              <tt class="literal">@Configurable(autowire=Autowire.BY_NAME</tt>&#21487;&#20197;&#35753;&#33258;&#21160;&#35013;&#37197;&#20998;&#21035;&#25353;&#29031;&#31867;&#22411;&#25110;&#21517;&#23383;&#36827;&#34892;&#12290;
              &#20316;&#20026;&#21478;&#22806;&#19968;&#31181;&#36873;&#25321;&#65292;&#22312;Spring2.5&#20013;&#26368;&#22909;&#26159;&#22312;&#22495;&#25110;&#26041;&#27861;&#32423;&#20351;&#29992;<tt class="interfacename">@Autowired</tt>&#21644;
              <tt class="interfacename">@Resource</tt>&#20026;&#20320;&#30340;<tt class="interfacename">@Configurable</tt> beans&#25351;&#23450;
              &#26126;&#30830;&#30340;&#12289;&#27880;&#35299;&#39537;&#21160;&#30340;&#20381;&#36182;&#27880;&#20837;&#12290;&#65288;&#35814;&#24773;&#35831;&#21442;&#30475;<a href="#beans-annotation-config" title="3.11.&nbsp;&#22522;&#20110;&#27880;&#35299;&#65288;Annotation-based&#65289;&#30340;&#37197;&#32622;">Section&nbsp;3.11, &#8220;&#22522;&#20110;&#27880;&#35299;&#65288;Annotation-based&#65289;&#30340;&#37197;&#32622;&#8221;</a>&#65289;</p><p>
              &#26368;&#21518;&#65292;&#20320;&#21487;&#20197;&#36890;&#36807;&#20351;&#29992;<tt class="literal">dependencyCheck</tt> &#23646;&#24615;&#65292;&#35753;Spring&#23545;&#26032;&#21019;&#24314;&#21644;&#37197;&#32622;&#30340;&#23545;&#35937;&#30340;&#23545;&#35937;&#24341;&#29992;&#36827;&#34892;
              &#20381;&#36182;&#26816;&#26597;&#65288;&#20363;&#22914;&#65306;<tt class="literal">@Configurable(autowire=Autowire.BY_NAME,dependencyCheck=true)</tt>&#65289;&#12290;
              &#22914;&#26524;&#36825;&#20010;&#23646;&#24615;&#35774;&#32622;&#20026;true&#65292;Spring&#20250;&#22312;&#37197;&#32622;&#32467;&#26463;&#21518;&#26657;&#39564;&#65288;&#38500;&#20102;primitives&#21644;collections&#31867;&#22411;&#65289;
              &#25152;&#26377;&#30340;&#23646;&#24615;&#26159;&#21542;&#37117;&#34987;&#35774;&#32622;&#12290;
            </p><p>
              &#20165;&#20165;&#20351;&#29992;&#27880;&#35299;&#24182;&#27809;&#26377;&#20570;&#20219;&#20309;&#20107;&#24773;&#12290;&#20294;&#26159;<tt class="filename">spring-aspects.jar</tt>
              &#20013;&#30340;<tt class="literal">AnnotationBeanConfigurerAspect</tt>&#20250;&#22312;&#27880;&#35299;&#23384;&#22312;&#26102;&#36215;&#20316;&#29992;&#12290;&#23454;&#36136;&#19978;&#20999;&#38754;&#25351;&#26126;&#65306;
              &#8220;&#22312;&#21021;&#22987;&#21270;&#19968;&#20010;&#30001;<tt class="interfacename">@Configurable</tt> &#27880;&#35299;&#30340;&#26032;&#23545;&#35937;&#26102;&#65292;
              Spring&#25353;&#29031;&#27880;&#35299;&#20013;&#30340;&#23646;&#24615;&#26469;&#37197;&#32622;&#36825;&#20010;&#26032;&#21019;&#24314;&#30340;&#23545;&#35937;&#8221;&#12290;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;<span class="emphasis"><em>initialization</em></span>
              &#25351;&#26032;&#21021;&#22987;&#21270;&#30340;&#65288;&#27604;&#22914;&#29992;<tt class="literal">new</tt>&#21021;&#22987;&#21270;&#65289;&#30340;&#23545;&#35937;&#20197;&#21450;&#33021;&#36827;&#34892;&#21453;&#24207;&#21015;&#21270;&#30340;
              <tt class="interfacename">Serializable</tt>&#23545;&#35937;&#65288;&#20363;&#22914;&#36890;&#36807;
              <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/io/Serializable.html" target="_top">readResolve()</a>&#26041;&#27861;&#65289;&#12290;
            </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>
                  &#22312;&#19978;&#19968;&#27573;&#20013;&#19968;&#20010;&#20851;&#38190;&#30340;&#38454;&#27573;&#23601;&#26159;&#8220;<span class="emphasis"><em>inessence</em></span>&#8221;&#12290;&#22810;&#25968;&#24773;&#20917;&#19979;&#65292;&#8220;
                  <span class="emphasis"><em>&#24403;&#20174;&#19968;&#20010;&#26032;&#23545;&#35937;&#21021;&#22987;&#21270;&#36820;&#22238;&#20043;&#21518;</em></span>&#8221;&#30340;&#31934;&#30830;&#35821;&#20041;&#24456;&#19981;&#38169;...&#36825;&#31181;&#35821;&#22659;&#19979;&#65292;
                  &#8220;&#21021;&#22987;&#21270;&#20043;&#21518;&#8221;&#30340;&#24847;&#24605;&#26159;&#20381;&#36182;&#23558;&#22312;&#23545;&#35937;&#34987;&#26500;&#36896;<span class="emphasis"><em>&#20043;&#21518;</em></span>&#27880;&#20837; - 
                  &#36825;&#24847;&#21619;&#30528;&#22312;&#31867;&#30340;&#26500;&#36896;&#22120;&#22359;&#20013;&#20381;&#36182;&#23558;&#19981;&#21487;&#29992;&#12290;&#22914;&#26524;&#20320;&#24076;&#26395;&#23427;&#33021;&#22312;&#26500;&#36896;&#22120;&#20195;&#30721;&#22359;&#25191;&#34892;
                  <span class="emphasis"><em>&#20043;&#21069;</em></span>&#34987;&#27880;&#20837;&#65292;&#24182;&#20174;&#32780;&#22312;&#26500;&#36896;&#22120;&#20013;&#20351;&#29992;&#23427;&#65292;
                  &#37027;&#20040;&#20320;&#38656;&#35201;&#22312;<tt class="interfacename">@Configurable</tt>&#25509;&#21475;&#22768;&#26126;&#19978;&#20570;&#31867;&#20284;&#30340;&#23450;&#20041;&#65306;
                </p><pre class="programlisting">@Configurable(preConstruction=true)</pre><p>
                  &#20320;&#21487;&#20197;&#22312;<a href="http://www.eclipse.org/aspectj/doc/next/progguide/index.html" target="_top">
                  AspectJ Programming Guide</a>&#19968;&#20070;&#30340;<a href="http://www.eclipse.org/aspectj/doc/next/progguide/semantics-joinPoints.html" target="_top">&#38468;&#24405;&#20013;</a>
                  &#25214;&#21040;&#26356;&#22810;&#26377;&#20851;&#22312;AspectJ&#20013;&#21508;&#31181;&#20999;&#38754;&#31867;&#22411;&#30340;&#35821;&#20041;&#20449;&#24687;&#12290;
                </p></td></tr></tbody></table></div><p>
               &#35201;&#23454;&#29616;&#19978;&#36848;&#30340;&#25805;&#20316;&#65292;&#24050;&#27880;&#35299;&#30340;&#31867;&#22411;&#24517;&#39035;&#30001;AspectJ weaver&#26469;&#32455;&#20837; - &#20320;&#21487;&#20197;&#20351;&#29992;&#19968;&#20010;&#26500;&#24314;&#26102;&#30340;ant/maven&#20219;&#21153;&#26469;&#23436;&#25104;
               &#65288;&#21442;&#35265;<a href="http://www.eclipse.org/aspectj/doc/released/devguide/antTasks.html" target="_top">AspectJ Development Environment Guide</a>&#65289;&#25110;&#32773;&#20351;&#29992;&#21152;&#36733;&#26102;&#32455;&#20837;&#65288;&#21442;&#35265; <a href="#aop-aj-ltw" title="6.8.4.&nbsp;&#22312;Spring&#24212;&#29992;&#20013;&#20351;&#29992;AspectJ&#21152;&#36733;&#26102;&#32455;&#20837;&#65288;LTW&#65289;">Section&nbsp;6.8.4, &#8220;&#22312;Spring&#24212;&#29992;&#20013;&#20351;&#29992;AspectJ&#21152;&#36733;&#26102;&#32455;&#20837;&#65288;LTW&#65289;&#8221;</a>&#65289;&#12290;
               &#31867;<tt class="classname">AnnotationBeanConfigurerAspect</tt>&#26412;&#36523;&#20063;&#38656;&#35201;Spring&#26469;&#37197;&#32622;&#65288;&#33719;&#24471;bean factory&#30340;&#24341;&#29992;&#65292;&#20351;&#29992;bean factory&#37197;&#32622;&#26032;&#30340;&#23545;&#35937;&#65289;&#12290;&#20026;&#27492;Spring&#30340;
               <a href="#xsd-config-body-schemas-context" title="A.2.8.&nbsp;The context schema"><tt class="literal">context</tt>&#21629;&#21517;&#31354;&#38388;</a>
               &#23450;&#20041;&#20102;&#19968;&#20010;&#38750;&#24120;&#26041;&#20415;&#30340;&#26631;&#31614;&#12290;&#21482;&#35201;&#31616;&#21333;&#30340;&#22312;application context&#37197;&#32622;&#20013;&#21253;&#21547;&#19979;&#38754;&#30340;&#20869;&#23481;&#12290;</p><pre class="programlisting">&lt;context:spring-configured/&gt;</pre><p>&#22914;&#26524;&#20320;&#20351;&#29992;DTD&#20195;&#26367;Schema&#65292;&#23545;&#24212;&#30340;&#23450;&#20041;&#22914;&#19979;&#65306;</p><pre class="programlisting">&lt;bean 
                class="org.springframework.beans.factory.aspectj.AnnotationBeanConfigurerAspect"
            factory-method="aspectOf"/&gt;</pre><p>
                &#22312;&#20999;&#38754;&#37197;&#32622;&#23436;&#25104;<span class="emphasis"><em>&#20043;&#21069;</em></span>&#21019;&#24314;&#30340;<tt class="interfacename">@Configurable</tt>
                &#23545;&#35937;&#23454;&#20363;&#20250;&#23548;&#33268;&#22312;log&#20013;&#30041;&#19979;&#19968;&#20010;warning&#65292;&#24182;&#19988;&#20219;&#20309;&#23545;&#20110;&#35813;&#23545;&#35937;&#30340;&#37197;&#32622;&#37117;&#19981;&#20250;&#29983;&#25928;&#12290;
                &#20030;&#19968;&#20010;&#20363;&#23376;&#65292;&#19968;&#20010;Spring&#31649;&#29702;&#37197;&#32622;&#30340;bean&#22312;&#34987;Spring&#21021;&#22987;&#21270;&#30340;&#26102;&#20505;&#21019;&#24314;&#20102;&#19968;&#20010;domain object&#12290;
                &#23545;&#20110;&#36825;&#26679;&#30340;&#24773;&#20917;&#65292;&#20320;&#38656;&#35201;&#23450;&#20041;bean&#23646;&#24615;&#20013;&#30340;"depends-on"&#23646;&#24615;&#26469;&#25163;&#21160;&#25351;&#23450;&#35813;bean&#20381;&#36182;&#20110;configuration&#20999;&#38754;&#12290;
            </p><pre class="programlisting">&lt;bean id="myService"
                class="com.xzy.myapp.service.MyService"
                depends-on="org.springframework.beans.factory.aspectj.AnnotationBeanConfigurerAspect"&gt;
                
                <i class="lineannotation"><span class="lineannotation">&lt;!-- ... --&gt;</span></i>
                
            &lt;/bean&gt;</pre><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-configurable-testing"></a>6.8.1.1.&nbsp;<tt class="interfacename">@Configurable</tt>&#23545;&#35937;&#30340;&#21333;&#20803;&#27979;&#35797;</h4></div></div><div></div></div><p>
                   &#25552;&#20379;<tt class="interfacename">@Configurable</tt>&#25903;&#25345;&#30340;&#19968;&#20010;&#30446;&#30340;&#23601;&#26159;&#20351;&#24471;domain object&#30340;&#21333;&#20803;&#27979;&#35797;
                   &#21487;&#20197;&#29420;&#31435;&#36827;&#34892;&#65292;&#19981;&#38656;&#35201;&#36890;&#36807;&#30828;&#32534;&#30721;&#26597;&#25214;&#21508;&#31181;&#20506;&#36182;&#20851;&#31995;&#12290;&#22914;&#26524;<tt class="interfacename">@Configurable</tt>
                   &#31867;&#22411;&#27809;&#26377;&#36890;&#36807;AspectJ&#32455;&#20837;&#65292;&#21017;&#22312;&#21333;&#20803;&#27979;&#35797;&#36807;&#31243;&#20013;&#27880;&#35299;&#19981;&#20250;&#36215;&#21040;&#20219;&#20309;&#20316;&#29992;&#65292;
                   &#27979;&#35797;&#20013;&#20320;&#21487;&#20197;&#31616;&#21333;&#30340;&#20026;&#23545;&#35937;&#30340;mock&#25110;&#32773;stub&#23646;&#24615;&#36171;&#20540;&#65292;&#24182;&#19988;&#21644;&#27491;&#24120;&#24773;&#20917;&#19968;&#26679;&#21435;&#20351;&#29992;&#35813;&#23545;&#35937;&#12290;
                   &#22914;&#26524;<tt class="interfacename">@Configurable</tt>&#31867;&#22411;&#36890;&#36807;AspectJ&#32455;&#20837;&#65292;
                   &#25105;&#20204;&#20381;&#28982;&#21487;&#20197;&#33073;&#31163;&#23481;&#22120;&#36827;&#34892;&#21333;&#20803;&#27979;&#35797;&#65292;&#19981;&#36807;&#27599;&#27425;&#21019;&#24314;&#19968;&#20010;&#26032;&#30340;<tt class="interfacename">@Configurable</tt>
                   &#23545;&#35937;&#26102;&#37117;&#20250;&#30475;&#21040;&#19968;&#20010;warning&#65292;&#26631;&#31034;&#35813;&#23545;&#35937;&#27809;&#26377;&#34987;Spring&#37197;&#32622;&#12290;
                </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-configurable-container"></a>6.8.1.2.&nbsp;Working with multiple application contexts</h4></div><div><h4 class="title"><a name="aop-configurable-container"></a>6.8.1.2.&nbsp;Working with multiple application contexts</h4></div></div><div></div></div><p>
                    <tt class="literal">AnnotationBeanConfigurerAspect</tt>&#36890;&#36807;&#19968;&#20010;AspectJ singleton&#20999;&#38754;&#26469;&#23454;&#29616;&#23545;
                    <tt class="interfacename">@Configurable</tt>&#30340;&#25903;&#25345;&#12290;&#19968;&#20010;singleton&#20999;&#38754;&#30340;&#20316;&#29992;&#22495;&#21644;&#19968;&#20010;
                    &#38745;&#24577;&#21464;&#37327;&#30340;&#20316;&#29992;&#22495;&#26159;&#19968;&#26679;&#30340;&#65292;&#37027;&#23601;&#26159;&#35828;&#65292;&#23545;&#20110;&#27599;&#19968;&#20010;classloader&#26377;&#19968;&#20010;&#20999;&#38754;&#26469;&#23450;&#20041;&#31867;&#22411;&#12290;
                    &#36825;&#23601;&#24847;&#21619;&#30528;&#22914;&#26524;&#20320;&#22312;&#19968;&#20010;classloader&#23618;&#27425;&#32467;&#26500;&#20013;&#23450;&#20041;&#20102;&#22810;&#20010;application context&#30340;&#26102;&#20505;&#23601;&#38656;&#35201;&#32771;&#34385;
                    &#22312;&#21738;&#37324;&#23450;&#20041;<tt class="literal">&lt;aop:spring-configured/&gt;</tt> bean&#21644;&#22312;&#21738;&#20010;classpath&#19979;
                    &#25918;&#32622;<tt class="filename">spring-aspects.jar</tt>&#12290;
                </p><p>
                    &#32771;&#34385;&#19968;&#19979;&#20856;&#22411;&#30340;Spring web&#39033;&#30446;&#65292;&#19968;&#33324;&#37117;&#26159;&#30001;&#19968;&#20010;&#29238;application context&#23450;&#20041;&#22823;&#37096;&#20998;business service&#21644;
                    &#25152;&#38656;&#35201;&#30340;&#20854;&#20182;&#36164;&#28304;&#65292;&#28982;&#21518;&#27599;&#19968;&#20010;servlet&#25317;&#26377;&#19968;&#20010;&#23376;application context&#23450;&#20041;&#12290;&#25152;&#26377;&#36825;&#20123;context&#20849;&#23384;&#20110;
                    &#21516;&#19968;&#20010;classloader&#20307;&#31995;&#19979;&#65292;&#22240;&#27492;<tt class="literal">AnnotationBeanConfigurerAspect</tt>&#20165;&#20445;&#25345;
                    &#19968;&#20010;&#23545;context&#30340;&#24341;&#29992;&#12290;&#22312;&#36825;&#26679;&#30340;&#24773;&#20917;&#19979;&#65292;&#25105;&#20204;&#25512;&#33616;&#22312;&#29238;application context&#20013;&#23450;&#20041;
                    <tt class="literal">&lt;aop:spring-configured/&gt;</tt> bean&#65306;&#36825;&#37324;&#25152;&#23450;&#20041;&#30340;service&#21487;&#33021;&#26159;
                    &#20320;&#24076;&#26395;&#27880;&#20837;domain object&#30340;&#12290;&#36825;&#26679;&#20570;&#30340;&#32467;&#26524;&#26159;&#20320;&#19981;&#33021;&#20026;&#23376;application context&#20013;
                    &#20351;&#29992;@Configurable&#30340;domain object&#37197;&#32622;bean&#24341;&#29992;&#65288;&#21487;&#33021;&#20320;&#20063;&#26681;&#26412;&#23601;&#19981;&#24076;&#26395;&#37027;&#20040;&#20570;&#65281;&#65289;&#12290;
                </p><p> 
                   &#24403;&#22312;&#19968;&#20010;&#23481;&#22120;&#20013;&#37096;&#32626;&#22810;&#20010;web-app&#30340;&#26102;&#20505;&#65292;&#35831;&#30830;&#20445;&#27599;&#19968;&#20010;web-application&#20351;&#29992;&#33258;&#24049;&#30340;classloader
                   &#26469;&#21152;&#36733;spring-aspects.jar&#20013;&#30340;&#31867;&#65288;&#20363;&#22914;&#23558;spring-aspects.jar&#25918;&#22312;WEB-INF/lib&#30446;&#24405;&#19979;&#65289;&#12290;
                   &#22914;&#26524;spring-aspects.jar&#34987;&#25918;&#22312;&#20102;&#23481;&#22120;&#30340;classpath&#19979;&#65288;&#22240;&#27492;&#20063;&#34987;&#29238;classloader&#21152;&#36733;&#65289;&#65292;&#21017;&#25152;&#26377;&#30340;
                   web application&#23558;&#20849;&#20139;&#19968;&#20010;aspect&#23454;&#20363;&#65292;&#36825;&#21487;&#33021;&#24182;&#19981;&#26159;&#20320;&#25152;&#24819;&#35201;&#30340;&#12290;
                </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-ajlib-other"></a>6.8.2.&nbsp;Spring&#20013;&#20854;&#20182;&#30340;AspectJ&#20999;&#38754;</h3></div></div><div></div></div><p>
                &#38500;&#20102;<tt class="interfacename">@Configurable</tt>&#20999;&#38754;&#65292;
                <tt class="filename">spring-aspects.jar</tt>&#21253;&#21547;&#20102;&#19968;&#20010;AspectJ&#20999;&#38754;&#21487;&#20197;&#29992;&#26469;&#20026;
                &#37027;&#20123;&#20351;&#29992;&#20102;<tt class="interfacename">@Transactional</tt>&#27880;&#35299;&#30340;&#31867;&#22411;&#21644;&#26041;&#27861;&#39537;&#21160;Spring&#20107;&#21153;&#31649;&#29702;&#12290;
                &#25552;&#20379;&#36825;&#20010;&#30340;&#20027;&#35201;&#30446;&#30340;&#26159;&#26377;&#20123;&#29992;&#25143;&#24076;&#26395;&#33073;&#31163;Spring&#23481;&#22120;&#20351;&#29992;Spring&#30340;&#20107;&#21153;&#31649;&#29702;&#12290;
            </p><p>&#35299;&#26512;<tt class="interfacename">@Transactional</tt>&#27880;&#35299;&#30340;&#20999;&#38754;&#26159;
              <tt class="classname">AnnotationTransactionAspect</tt>&#12290;&#24403;&#20351;&#29992;&#36825;&#20010;&#20999;&#38754;&#26102;&#65292;
              &#20320;&#24517;&#39035;&#27880;&#35299;&#36825;&#20010;<span class="emphasis"><em>&#23454;&#29616;&#31867;</em></span>&#65288;&#21644;/&#25110;&#36825;&#20010;&#31867;&#20013;&#30340;&#26041;&#27861;&#65289;&#65292;&#32780;<span class="emphasis"><em>&#19981;&#26159;</em></span>
              &#36825;&#20010;&#31867;&#23454;&#29616;&#30340;&#25509;&#21475;&#65288;&#22914;&#26524;&#26377;&#65289;&#12290;AspectJ&#20801;&#35768;&#22312;&#25509;&#21475;&#19978;&#27880;&#35299;&#30340;Java&#35268;&#21017; <span class="emphasis"><em>&#19981;&#34987;&#32487;&#25215;</em></span>&#12290;
            </p><p>
                &#31867;&#20043;&#19978;&#30340;&#19968;&#20010;<tt class="interfacename">@Transactional</tt>&#27880;&#35299;&#20026;&#35813;&#31867;&#20013;&#20219;&#20309;
                <span class="emphasis"><em>public</em></span>&#25805;&#20316;&#30340;&#25191;&#34892;&#25351;&#23450;&#20102;&#40664;&#35748;&#30340;&#20107;&#21153;&#35821;&#20041;&#12290;
            </p><p>
                &#31867;&#20869;&#37096;&#26041;&#27861;&#19978;&#30340;&#19968;&#20010;<tt class="interfacename">@Transactional</tt>&#27880;&#35299;&#20250;&#35206;&#30422;&#31867;&#27880;&#35299;&#65288;&#22914;&#26524;&#23384;&#22312;&#65289;
                &#25152;&#32473;&#23450;&#30340;&#40664;&#35748;&#30340;&#20107;&#21153;&#35821;&#20041;&#12290;&#20855;&#26377;public&#12289;protected&#21644;default&#20462;&#39280;&#31526;&#30340;&#26041;&#27861;&#37117;&#21487;&#20197;&#34987;&#27880;&#35299;&#12290;
                &#30452;&#25509;&#27880;&#35299;protected&#21644;default&#26041;&#27861;&#26159;&#35753;&#36825;&#20010;&#25805;&#20316;&#30340;&#25191;&#34892;&#33719;&#24471;&#20107;&#21153;&#21010;&#20998;&#30340;&#21807;&#19968;&#36884;&#24452;&#12290;
            </p><p>
                &#23545;&#20110;AspectJ&#31243;&#24207;&#21592;&#65292;&#24076;&#26395;&#20351;&#29992;Spring&#31649;&#29702;&#37197;&#32622;&#21644;&#20107;&#21153;&#31649;&#29702;&#25903;&#25345;&#65292;&#19981;&#36807;&#20182;&#20204;&#19981;&#24819;&#65288;&#25110;&#32773;&#19981;&#33021;&#65289;&#20351;&#29992;&#27880;&#35299;&#65292;
                <tt class="filename">spring-aspects.jar</tt>&#20063;&#21253;&#21547;&#20102;&#19968;&#20123;<tt class="literal">&#25277;&#35937;</tt>
                &#20999;&#38754;&#20379;&#20320;&#32487;&#25215;&#26469;&#25552;&#20379;&#20320;&#33258;&#24049;&#30340;&#20999;&#20837;&#28857;&#23450;&#20041;&#12290;&#21442;&#35265;<tt class="literal">AbstractBeanConfigurerAspect</tt>
                &#21644;<tt class="literal">AbstractTransactionAspect</tt>&#30340;Javadoc&#33719;&#21462;&#26356;&#22810;&#20449;&#24687;&#12290;
                &#20316;&#20026;&#19968;&#20010;&#20363;&#23376;&#65292;&#19979;&#38754;&#30340;&#20195;&#30721;&#29255;&#26029;&#23637;&#31034;&#20102;&#22914;&#20309;&#32534;&#20889;&#19968;&#20010;&#20999;&#38754;&#65292;&#28982;&#21518;&#36890;&#36807;&#21644;&#31867;&#20840;&#21517;&#21305;&#37197;&#30340;bean&#21407;&#22411;&#23450;&#20041;&#26469;
                &#37197;&#32622;domian object&#20013;&#23450;&#20041;&#30340;&#25152;&#26377;&#23454;&#20363;&#65306;
            </p><pre class="programlisting">public aspect DomainObjectConfiguration extends AbstractBeanConfigurerAspect {
                
                public DomainObjectConfiguration() {
                setBeanWiringInfoResolver(new ClassNameBeanWiringInfoResolver());
                }
                
                <i class="lineannotation"><span class="lineannotation">// the creation of a new bean (any object in the domain model)</span></i>
                protected pointcut beanCreation(Object beanInstance) :
                initialization(new(..)) &amp;&amp;
                SystemArchitecture.inDomainModel() &amp;&amp; 
                this(beanInstance);
                
            }</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-aj-configure"></a>6.8.3.&nbsp;&#20351;&#29992;Spring IoC&#26469;&#37197;&#32622;AspectJ&#30340;&#20999;&#38754;</h3></div></div><div></div></div><p>
                &#24403;&#22312;Spring application&#20013;&#20351;&#29992;AspectJ&#30340;&#26102;&#20505;&#65292;&#24456;&#33258;&#28982;&#30340;&#20250;&#24819;&#21040;&#29992;Spring&#26469;&#31649;&#29702;&#36825;&#20123;&#20999;&#38754;&#12290;
                AspectJ runtime&#33258;&#36523;&#36127;&#36131;&#20999;&#38754;&#30340;&#21019;&#24314;&#65292;&#36825;&#24847;&#21619;&#30528;&#36890;&#36807;Spring&#26469;&#31649;&#29702;AspectJ
                &#21019;&#24314;&#20999;&#38754;&#20381;&#36182;&#20110;&#20999;&#38754;&#25152;&#20351;&#29992;&#30340;AspectJ instantiation model(per-clause)&#12290;
            </p><p>
                &#22823;&#22810;&#25968;AspectJ&#20999;&#38754;&#37117;&#26159;<span class="emphasis"><em>singleton</em></span>&#20999;&#38754;&#12290;&#31649;&#29702;&#36825;&#20123;&#20999;&#38754;&#38750;&#24120;&#23481;&#26131;&#65292;
                &#21644;&#36890;&#24120;&#19968;&#26679;&#21019;&#24314;&#19968;&#20010;bean&#23450;&#20041;&#24341;&#29992;&#35813;&#20999;&#38754;&#31867;&#22411;&#23601;&#21487;&#20197;&#20102;&#65292;&#24182;&#19988;&#22312;bean&#23450;&#20041;&#20013;&#21253;&#21547;
                <tt class="literal">'factory-method="aspectOf"'</tt>&#36825;&#20010;&#23646;&#24615;&#12290;
                &#36825;&#30830;&#20445;Spring&#20174;AspectJ&#33719;&#21462;&#20999;&#38754;&#23454;&#20363;&#32780;&#19981;&#26159;&#23581;&#35797;&#33258;&#24049;&#21435;&#21019;&#24314;&#35813;&#23454;&#20363;&#12290;&#31034;&#20363;&#22914;&#19979;&#65306;
            </p><pre class="programlisting">&lt;bean id="profiler" class="com.xyz.profiler.Profiler"
                <span class="bold"><b>factory-method="aspectOf"</b></span>&gt;
                &lt;property name="profilingStrategy" ref="jamonProfilingStrategy"/&gt;
            &lt;/bean&gt;</pre><p>
                non-singleton&#20999;&#38754;&#30340;&#37197;&#32622;&#31245;&#38590;&#19968;&#28857;&#65292;&#28982;&#32780;&#23427;&#21487;&#20197;&#36890;&#36807;&#23450;&#20041;&#19968;&#20010;bean&#21407;&#22411;&#23450;&#20041;&#24182;&#19988;&#20351;&#29992;
                <tt class="filename">spring-aspects.jar</tt>&#20013;&#30340;@Configurable&#25903;&#25345;&#65292;
                &#24403;&#20999;&#38754;&#23454;&#20363;&#30001;AspectJ runtime&#21019;&#24314;&#21518;&#36827;&#34892;&#37197;&#32622;&#12290;
            </p><p>
                &#22914;&#26524;&#20320;&#24076;&#26395;&#19968;&#20123;@AspectJ&#20999;&#38754;&#20351;&#29992;AspectJ&#26469;&#32455;&#20837;&#65288;&#20363;&#22914;&#20351;&#29992;load-time&#32455;&#20837;domain object&#65289;
                &#32780;&#21478;&#19968;&#20123;@AspectJ&#20999;&#38754;&#20351;&#29992;Spring AOP&#65292;&#24182;&#19988;&#36825;&#20123;&#20999;&#38754;&#37117;&#30001;Spring&#26469;&#31649;&#29702;&#65292;&#37027;&#20320;&#23601;&#38656;&#35201;&#21578;&#35785;Spring AOP 
                @AspectJ&#33258;&#21160;&#20195;&#29702;&#25903;&#25345;&#37027;&#20123;&#20999;&#38754;&#38656;&#35201;&#34987;&#33258;&#21160;&#20195;&#29702;&#12290;&#20320;&#21487;&#20197;&#36890;&#36807;&#22312;
                <tt class="literal">&lt;aop:aspectj-autoproxy&gt;</tt>&#22768;&#26126;&#20013;&#20351;&#29992;&#19968;&#20010;&#25110;&#22810;&#20010;
                <tt class="literal">&lt;include/&gt;</tt>&#20803;&#32032;&#12290;&#27599;&#20010;&#20803;&#32032;&#25351;&#23450;&#20102;&#19968;&#31181;&#21629;&#21517;&#26684;&#24335;&#65292;
                &#21482;&#26377;bean&#21629;&#21517;&#33267;&#23569;&#31526;&#21512;&#20854;&#20013;&#19968;&#31181;&#24773;&#20917;&#19979;&#25165;&#20250;&#20351;&#29992;Spring AOP&#33258;&#21160;&#20195;&#29702;&#37197;&#32622;&#65306;
            </p><pre class="programlisting">&lt;aop:aspectj-autoproxy&gt;
                &lt;aop:include name="thisBean"/&gt;
                &lt;aop:include name="thatBean"/&gt;
            &lt;/aop:aspectj-autoproxy&gt;</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>
                    &#19981;&#35201;&#34987;<tt class="literal">&lt;aop:aspectj-autoproxy/&gt;</tt>&#20803;&#32032;&#30340;&#21517;&#23383;&#25152;&#35823;&#23548;&#65306;
                    &#29992;&#23427;&#20250;&#23548;&#33268;<span class="emphasis"><em>Spring AOP &#20195;&#29702;</em></span>&#30340;&#21019;&#24314;&#12290;&#22312;&#36825;&#20013;&#21482;&#26159;&#20351;&#29992;@AspectJ
                    &#31867;&#22411;&#30340;&#20999;&#38754;&#22768;&#26126;&#65292;&#20294;&#24182;&#19981;&#20250;&#28041;&#21450;AspectJ&#36816;&#34892;&#26102;&#12290;
                </p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-aj-ltw"></a>6.8.4.&nbsp;&#22312;Spring&#24212;&#29992;&#20013;&#20351;&#29992;AspectJ&#21152;&#36733;&#26102;&#32455;&#20837;&#65288;LTW&#65289;</h3></div></div><div></div></div><p>
              &#21152;&#36733;&#26102;&#32455;&#20837;&#65288;Load-time weaving&#65288;LTW&#65289;&#65289;&#25351;&#30340;&#26159;&#22312;&#34394;&#25311;&#26426;&#36733;&#20837;&#23383;&#33410;&#30721;&#25991;&#20214;&#26102;&#21160;&#24577;&#32455;&#20837;AspectJ&#20999;&#38754;&#12290;
              &#26412;
&#33410;&#20851;&#27880;&#20110;&#22312;Spring Framework&#20013;&#29305;&#30340;&#23450;context&#19979;&#37197;&#32622;&#21644;&#20351;&#29992;LTW&#65306;&#24182;&#27809;&#26377;LTW&#30340;&#20171;&#32461;&#12290;
              &#20851;&#20110;LTW&#21644;&#20165;&#20351;&#29992;AspectJ&#37197;&#32622;LTW&#30340;&#35814;&#32454;&#20449;&#24687;&#65288;&#26681;&#26412;&#19981;&#28041;&#21450;Spring&#65289;&#65292;&#35831;&#26597;&#30475;
              <a href="http://www.eclipse.org/aspectj/doc/released/devguide/ltw.html" target="_top">
              LTW
 section of the AspectJ Development Environment Guide</a>&#12290;
            </p><p>Spring&#26694;&#26550;&#30340;&#20540;&#28155;&#21152;&#20026;AspectJ LTW&#22312;&#21160;&#24577;&#32455;&#20837;&#36807;&#31243;&#20013;&#25552;&#20379;&#20102;&#26356;&#32454;&#31890;&#24230;&#30340;&#25511;&#21046;&#12290;&#20351;&#29992;Java&#65288;5+&#65289;&#30340;&#20195;&#29702;
            &#33021;&#20351;&#29992;&#19968;&#20010;&#21483;&#8216;Vanilla&#8217;&#30340;AspectJ LTW&#65292;&#36825;&#38656;&#35201;&#22312;&#21551;&#21160;JVM&#30340;&#26102;&#20505;&#23558;&#26576;&#20010;VM&#21442;&#25968;&#35774;&#32622;&#20026;&#24320;&#12290;
            &#36825;&#31181;JVM&#33539;&#22260;&#30340;&#35774;&#32622;&#22312;&#19968;&#20123;&#24773;&#20917;&#19979;&#25110;&#35768;&#19981;&#38169;&#65292;&#20294;&#36890;&#24120;&#24773;&#20917;&#19979;&#26174;&#24471;&#26377;&#20123;&#31895;&#39063;&#31890;&#12290;&#32780;&#29992;Spring&#30340;LTW&#33021;&#35753;&#20320;&#22312;
            <span class="emphasis"><em>per-<tt class="classname">ClassLoader</tt></em></span>&#30340;&#22522;&#30784;&#19978;&#25171;&#24320;LTW&#65292;
            &#36825;&#26174;&#28982;&#26356;&#21152;&#32454;&#31890;&#24230;&#24182;&#19988;&#23545;&#8220;&#21333;JVM&#22810;&#24212;&#29992;&#8221;&#30340;&#29615;&#22659;&#26356;&#20855;&#24847;&#20041;&#65288;&#20363;&#22914;&#22312;&#19968;&#20010;&#20856;&#22411;&#24212;&#29992;&#26381;&#21153;&#22120;&#29615;&#22659;&#20013;&#19968;&#26679;&#65289;&#12290;</p><p>&#21478;&#22806;&#65292;<a href="#aop-aj-ltw-environments" title="6.8.4.6.&nbsp;&#29305;&#23450;&#29615;&#22659;&#30340;&#37197;&#32622;">&#22312;&#26576;&#20123;&#29615;&#22659;&#19979;</a>&#65292;&#36825;&#33021;&#35753;&#20320;&#20351;&#29992;LTW&#32780;
            <span class="emphasis"><em>&#19981;&#23545;&#24212;&#29992;&#26381;&#21153;&#22120;&#30340;&#21551;&#21160;&#33050;&#26412;&#20570;&#20219;&#20309;&#25913;&#21160;</em></span>&#65292;&#19981;&#28982;&#21017;&#38656;&#35201;&#28155;&#21152;
            -javaagent:path/to/aspectjweaver.jar&#25110;&#32773;(&#20197;&#19979;&#23558;&#20250;&#25552;&#21450;&#30340;)-javaagent:path/to/spring-agent.jar&#12290;
            &#24320;&#21457;&#20154;&#21592;&#21482;&#38656;&#31616;&#21333;&#20462;&#25913;&#24212;&#29992;&#19978;&#19979;&#25991;&#30340;&#19968;&#20010;&#25110;&#20960;&#20010;&#25991;&#20214;&#23601;&#33021;&#20351;&#29992;LTW&#65292;&#32780;&#19981;&#38656;&#20381;&#38752;&#37027;&#20123;&#31649;&#29702;&#30528;&#37096;&#32626;&#37197;&#32622;
            &#27604;&#22914;&#21551;&#21160;&#33050;&#26412;&#30340;&#31995;&#32479;&#31649;&#29702;&#21592;&#12290;</p><p>&#32463;&#36807;&#20197;&#19978;&#35762;&#35299;&#20043;&#21518;&#65292;&#20808;&#35753;&#25105;&#20204;&#26469;&#36807;&#19968;&#36941;&#19968;&#20010;&#20351;&#29992;Spring&#30340;AspectJ LTW&#30340;&#24555;&#36895;&#31034;&#20363;&#65292;&#25509;&#30528;&#26159;&#19968;&#20010;
            &#26377;&#23545;&#20803;&#32032;&#35814;&#32454;&#35762;&#35299;&#30340;&#31034;&#20363;&#12290;&#22914;&#26524;&#24819;&#35201;&#19968;&#20010;&#23436;&#25972;&#30340;&#31034;&#20363;&#65292;&#35831;&#21442;&#30475;Petclinic&#65288;&#23456;&#29289;&#35786;&#25152;&#65289;&#30340;&#24212;&#29992;&#23454;&#20363;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-aj-ltw-first-example"></a>6.8.4.1.&nbsp;&#31532;&#19968;&#20010;&#20363;&#23376;</h4></div></div><div></div></div><p>&#20551;&#35774;&#20320;&#26159;&#19968;&#20010;&#24212;&#29992;&#24320;&#20154;&#21592;&#65292;&#34987;&#25351;&#27966;&#35786;&#26029;&#19968;&#20010;&#31995;&#32479;&#30340;&#33509;&#24178;&#24615;&#33021;&#38382;&#39064;&#12290;&#19982;&#20854;&#25343;&#20986;&#24615;&#33021;&#20998;&#26512;&#24037;&#20855;&#65292;
                &#25105;&#20204;&#19981;&#22914;&#24320;&#21551;&#19968;&#20010;&#31616;&#21333;&#30340;&#20998;&#26512;&#20999;&#38754;&#65292;&#20351;&#25105;&#20204;&#33021;&#24456;&#24555;&#22320;&#24471;&#21040;&#19968;&#20123;&#24615;&#33021;&#25351;&#26631;&#65292;&#36825;&#26679;&#25105;&#20204;&#23601;&#33021;&#39532;&#19978;
                &#38024;&#23545;&#29305;&#23450;&#21306;&#22495;&#20351;&#29992;&#19968;&#20123;&#36739;&#32454;&#31890;&#24230;&#30340;&#20998;&#26512;&#24037;&#20855;&#12290;</p><p>&#36825;&#23601;&#26159;&#19968;&#20010;&#20998;&#26512;&#20999;&#38754;&#12290;&#27809;&#20160;&#20040;&#29305;&#21035;&#30340;&#65292;&#21482;&#26159;&#19968;&#20010;&#24555;&#39184;&#24335;&#30340;&#22522;&#20110;&#26102;&#38388;&#30340;&#27169;&#25311;&#20998;&#26512;&#22120;&#65292;
                &#20351;&#29992;&#31867;@AspectJ&#39118;&#26684;&#30340;&#20999;&#38754;&#22768;&#26126;&#12290;</p><pre class="programlisting">package foo;
                    
                    import org.aspectj.lang.ProceedingJoinPoint;
                    import org.aspectj.lang.annotation.Aspect;
                    import org.aspectj.lang.annotation.Around;
                    import org.aspectj.lang.annotation.Pointcut;
                    import org.springframework.util.StopWatch;
                    import org.springframework.core.annotation.Order;
                    
                    @Aspect
                    public class ProfilingAspect {
                    
                    @Around("methodsToBeProfiled()")
                    public Object profile(ProceedingJoinPoint pjp) throws Throwable {
                    StopWatch sw = new StopWatch(getClass().getSimpleName());
                    try {
                    sw.start(pjp.getSignature().getName());
                    return pjp.proceed();
                    } finally {
                    sw.stop();
                    System.out.println(sw.prettyPrint());
                    }
                    }
                    
                    @Pointcut("execution(public * foo..*.*(..))")
                    public void methodsToBeProfiled(){}
                    }
                </pre><p>&#25105;&#20204;&#36824;&#38656;&#35201;&#21019;&#24314;&#19968;&#20010;&#8220;<tt class="filename">META-INF/aop.xml</tt>&#8221;&#25991;&#20214;&#65292;&#20197;&#21578;&#30693;AspectJ weaver
                &#25105;&#20204;&#35201;&#25226;<tt class="classname">ProfilingAspect</tt>&#32455;&#20837;&#21040;&#31867;&#20013;&#12290;&#36825;&#20010;&#25991;&#20214;&#24815;&#20363;&#65292;&#21363;&#22312;Java classpath&#20013;
                &#20986;&#29616;&#19968;&#20010;&#25991;&#20214;&#31216;&#20316;&#8220;<tt class="filename">META-INF/aop.xml</tt>&#8221;&#26159;&#26631;&#20934;&#30340;AspectJ&#12290;</p><pre class="programlisting">&lt;!DOCTYPE aspectj PUBLIC
                    "-//AspectJ//DTD//EN" "http://www.eclipse.org/aspectj/dtd/aspectj.dtd"&gt;
                    &lt;aspectj&gt;
                    
                    &lt;weaver&gt;
                    
                    <i class="lineannotation"><span class="lineannotation">&lt;!-- only weave classes in our application-specific packages --&gt;</span></i>
                    &lt;include within="foo.*"/&gt;
                    
                    &lt;/weaver&gt;
                    
                    &lt;aspects&gt;
                    
                    <i class="lineannotation"><span class="lineannotation">&lt;!-- weave in just this aspect --&gt;</span></i>        
                    &lt;aspect name="foo.ProfilingAspect"/&gt;
                    
                    &lt;/aspects&gt;
                    
                &lt;/aspectj&gt;</pre><p>&#29616;&#22312;&#26469;&#30475;Spring&#29305;&#23450;&#30340;&#37197;&#32622;&#37096;&#20998;&#12290;&#25105;&#20204;&#38656;&#35201;&#37197;&#32622;&#19968;&#20010;<tt class="interfacename">LoadTimeWeaver</tt>
                &#65288;&#31245;&#21518;&#20250;&#26377;&#35299;&#37322;&#65292;&#26242;&#26102;&#19981;&#22810;&#28145;&#31350;&#65289;&#12290;&#24403;&#23558;&#19968;&#20010;&#25110;&#22810;&#20010;&#8220;<tt class="filename">META-INF/aop.xml</tt>&#8221;&#25991;&#20214;&#20013;&#30340;&#20999;&#38754;
                &#37197;&#32622;&#32455;&#20837;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#30340;&#31867;&#20013;&#26102;&#65292;&#36825;&#20010;&#21152;&#36733;&#26102;&#32455;&#20837;&#22120;&#26159;&#24517;&#39035;&#30340;&#12290;&#36825;&#26679;&#30340;&#22909;&#22788;&#26159;&#19981;&#38656;&#35201;&#24456;&#22810;&#30340;&#37197;&#32622;&#65292;
                &#27491;&#22914;&#19979;&#38754;&#20320;&#30475;&#21040;&#30340;&#19968;&#26679;&#65288;&#36824;&#26377;&#21478;&#22806;&#19968;&#20123;&#21442;&#25968;&#20379;&#20320;&#25351;&#23450;&#65292;&#25105;&#20204;&#23558;&#22312;&#21518;&#38754;&#35814;&#32454;&#20171;&#32461;&#65289;&#12290;</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
                    &lt;beans xmlns="http://www.springframework.org/schema/beans"
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                    xmlns:context="http://www.springframework.org/schema/context"
                    xsi:schemaLocation="
                    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
                    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd"&gt;
                    
                    <i class="lineannotation"><span class="lineannotation">&lt;!-- a service object; we will be profiling it's methods --&gt;</span></i>
                    &lt;bean id="entitlementCalculationService"
                    class="foo.StubEntitlementCalculationService"/&gt;
                    
                    <i class="lineannotation"><span class="lineannotation">&lt;!-- this switches on the load-time weaving --&gt;</span></i>
                    <span class="bold"><b>&lt;context:load-time-weaver/&gt;</b></span>
                    
                &lt;/beans&gt;</pre><p>&#29616;&#22312;&#19975;&#20107;&#20465;&#22791; - &#20999;&#38754;&#65292;<tt class="filename">META-INF/aop.xml</tt>&#25991;&#20214;&#65292;&#20197;&#21450;Spring&#30340;&#37197;&#32622; - 
                &#35753;&#25105;&#20204;&#21019;&#24314;&#19968;&#20010;&#24102;&#26377;<tt class="methodname">main(..)</tt>&#26041;&#27861;&#30340;&#31616;&#21333;&#39537;&#21160;&#31867;&#26469;&#28436;&#31034;LTW&#30340;&#20316;&#29992;&#21543;&#12290;</p><pre class="programlisting">package foo;
                    
                    import org.springframework.context.support.ClassPathXmlApplicationContext;
                    
                    public final class Main {
                    
                    public static void main(String[] args) {
                    
                    ApplicationContext ctx = new ClassPathXmlApplicationContext("beans.xml", Main.class);
                    
                    EntitlementCalculationService entitlementCalculationService
                    = (EntitlementCalculationService) ctx.getBean("entitlementCalculationService");
                    
                    <i class="lineannotation"><span class="lineannotation">// the profiling aspect is 'woven' around this method execution</span></i>
                    entitlementCalculationService.calculateEntitlement();
                    }
                }</pre><p>&#26368;&#21518;&#36824;&#26377;&#19968;&#20214;&#20107;&#35201;&#20570;&#12290;&#27492;&#33410;&#20043;&#21069;&#30340;&#20171;&#32461;&#35828;&#36807;&#21487;&#20197;&#26377;&#36873;&#25321;&#24615;&#30340;&#22522;&#20110;Spring&#30340;
                per-<tt class="classname">ClassLoader</tt>&#26469;&#21551;&#21160;LTW&#65292;&#32780;&#19988;&#30340;&#30830;&#22914;&#27492;&#12290;&#19981;&#36807;&#65292;&#23545;&#27492;&#20363;&#26469;&#35828;&#65292;
                &#25105;&#20204;&#23558;&#20351;&#29992;Java&#20195;&#29702;&#65288;&#30001;Spring&#25552;&#20379;&#65289;&#26469;&#21551;&#21160;LTW&#12290;&#36825;&#20010;&#23601;&#26159;&#29992;&#20197;&#36816;&#34892;&#19978;&#38754;<tt class="classname">Main</tt>
                &#31867;&#30340;&#21629;&#20196;&#34892;&#35821;&#21477;&#65306;</p><pre class="programlisting">java -javaagent:C:/projects/foo/lib/global/spring-agent.jar foo.Main</pre><p><tt class="literal">-javaagent</tt>&#26159;&#19968;&#20010;Java 5+&#26631;&#35760;&#65292;&#29992;&#26469;&#25351;&#23450;&#21644;&#28608;&#27963;
                <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/instrument/package-summary.html" target="_top">
                &#20351;JVM&#19978;&#30340;&#31243;&#24207;&#36816;&#34892;&#30340;&#20195;&#29702;</a>&#12290;Spring&#26694;&#26550;&#35013;&#36733;&#20102;&#19968;&#20010;<tt class="classname">InstrumentationSavingAgent</tt>
                &#20195;&#29702;&#65292;&#22312;&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#34987;&#20316;&#20026;&#20102;<tt class="literal">-javaagent</tt>&#21442;&#25968;&#30340;&#20540;&#25171;&#21253;&#22312;
                <tt class="filename">spring-agent.jar</tt>&#20013;&#12290;
                </p><p><tt class="classname">Main</tt>&#31243;&#24207;&#36816;&#34892;&#30340;&#36755;&#20986;&#22914;&#19979;&#25152;&#31034;&#12290;&#65288;&#25105;&#24050;&#32463;&#22312;
                <tt class="methodname">calculateEntitlement()</tt>&#30340;&#23454;&#29616;&#20013;&#25554;&#20837;&#20102;<tt class="methodname">Thread.sleep(..)</tt>
                &#35821;&#21477;&#65292;&#20197;&#20813;&#35753;&#27169;&#25311;&#20998;&#26512;&#22120;&#33719;&#21462;0&#27627;&#31186; - &#36825;&#37324;&#30340;<tt class="literal">01234</tt>&#27627;&#31186;&#24182;&#38750;&#26159;AOP&#24341;&#20837;&#30340;&#31995;&#32479;&#24320;&#38144;&#12290;&#65289;</p><pre class="programlisting">Calculating entitlement
                    
                    StopWatch 'ProfilingAspect': running time (millis) = 1234
                    ------ ----- ----------------------------
                    ms     %     Task name
                    ------ ----- ----------------------------
                01234  100%  calculateEntitlement</pre><p>
                  &#22240;&#20026;&#36825;&#20010;LTW&#20351;&#29992;&#25104;&#29087;&#30340;AspectJ&#65292;&#25105;&#20204;&#24182;&#19981;&#23616;&#38480;&#20110;&#36890;&#30693;Spring beans&#30340;&#26041;&#27861;&#65307;&#25509;&#19979;&#26469;&#36825;&#20010;&#31245;&#26377;&#21464;&#21270;&#30340;
                  <tt class="classname">Main</tt>&#31243;&#24207;&#23558;&#29983;&#25104;&#21516;&#26679;&#30340;&#32467;&#26524;&#12290;
                </p><pre class="programlisting">package foo;
                    
                    import org.springframework.context.support.ClassPathXmlApplicationContext;
                    
                    public final class Main {
                    
                    public static void main(String[] args) {
                    
                    new ClassPathXmlApplicationContext("beans.xml", Main.class);
                    
                    EntitlementCalculationService entitlementCalculationService =
                    new StubEntitlementCalculationService();
                    
                    <i class="lineannotation"><span class="lineannotation">// the profiling aspect will be 'woven' around this method execution</span></i>
                    entitlementCalculationService.calculateEntitlement();
                    }
                }</pre><p>&#27880;&#24847;&#20197;&#19978;&#31243;&#24207;&#25105;&#20204;&#21482;&#26159;&#24341;&#23548;&#20102;Spring&#23481;&#22120;&#65292;&#28982;&#21518;&#23436;&#20840;&#22312;Spring&#19978;&#19979;&#25991;&#20043;&#22806;&#21019;&#24314;&#20102;&#19968;&#20010;
                <tt class="classname">StubEntitlementCalculationService</tt>&#30340;&#23454;&#20363;...&#20998;&#26512;&#36890;&#30693;&#20173;&#28982;&#24471;&#21040;&#32455;&#20837;&#12290;</p><p>&#19978;&#38754;&#30340;&#20363;&#23376;&#34429;&#28982;&#31616;&#21333;&#20102;&#20123;&#65292;&#20294;Spring&#20013;&#22522;&#26412;&#30340;LTW&#25903;&#25345;&#37117;&#24050;&#20171;&#32461;&#23436;&#20102;&#65292;
                &#27492;&#33410;&#20313;&#19979;&#20869;&#23481;&#23558;&#23545;&#20351;&#29992;&#36825;&#20123;&#37197;&#32622;&#21644;&#29992;&#27861;&#32972;&#21518;&#30340;&#29702;&#30001;&#20316;&#35814;&#32454;&#35299;&#37322;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>
                        &#31867;<tt class="classname">ProfilingAspect</tt>&#22312;&#27492;&#20363;&#20013;&#34429;&#28982;&#22522;&#26412;&#20294;&#26159;&#39047;&#20026;&#26377;&#29992;&#12290;&#36825;&#26159;&#19968;&#20010;&#24456;&#22909;&#30340;&#24320;&#21457;&#26102;&#20999;&#38754;&#30340;&#20363;&#23376;&#65292;&#24320;&#21457;&#32773;&#21487;&#20197;&#22312;&#24320;&#21457;&#36807;&#31243;&#20013;&#20351;&#29992;&#23427;&#65288;&#24223;&#35805;&#65289;&#65292;
                        &#28982;&#21518;&#20063;&#33021;&#20174;&#24050;&#37096;&#32626;&#21040;UAT&#25110;&#32773;&#29983;&#20135;&#29615;&#22659;&#30340;&#24212;&#29992;&#20013;&#36731;&#26131;&#30340;&#33073;&#31163;&#12290;
                    </p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-aj-ltw-the-aspects"></a>6.8.4.2.&nbsp;&#20999;&#38754;</h4></div></div><div></div></div><p>&#20320;&#22312;LTW&#20013;&#20351;&#29992;&#30340;&#20999;&#38754;&#24517;&#39035;&#26159;AspectJ&#20999;&#38754;&#12290;&#20320;&#21487;&#20197;&#20351;&#29992;AspectJ&#35821;&#35328;&#25110;&#32773;&#31867;@AspectJ&#39118;&#26684;&#26469;&#32534;&#20889;&#20320;&#30340;&#20999;&#38754;&#12290;
                &#21518;&#19968;&#31181;&#26041;&#24335;&#24403;&#28982;&#21482;&#33021;&#22312;Java 5+&#20013;&#20351;&#29992;&#65292;&#20294;&#23427;&#35828;&#26126;&#20102;&#20320;&#30340;&#20999;&#38754;&#21487;&#20197;&#21516;&#26102;&#23545;AspectJ&#21644;Spring AOP&#20999;&#38754;&#26377;&#25928;&#12290;
                &#27492;&#22806;&#65292;&#32534;&#35793;&#21518;&#30340;&#20999;&#38754;&#31867;&#38656;&#35201;&#34987;&#27880;&#20876;&#21040;classpath&#19979;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-aj-ltw-aop_dot_xml"></a>6.8.4.3.&nbsp;'<tt class="filename">META-INF/aop.xml</tt>'</h4></div></div><div></div></div><p>AspectJ LTW&#30340;&#22522;&#30784;&#35774;&#26045;&#26159;&#29992;&#19968;&#20010;&#25110;&#22810;&#20010;&#20301;&#20110;Java classpath&#19978;&#30340;&#65288;&#21487;&#20197;&#26159;&#30452;&#25509;&#30340;&#25991;&#20214;&#24418;&#24335;&#65292;
                &#20063;&#21487;&#20197;&#26159;&#26356;&#20856;&#22411;&#30340;jar&#21253;&#24418;&#24335;&#65289;<tt class="filename">META-INF/aop.xml</tt>&#25991;&#20214;&#37197;&#32622;&#36215;&#26469;&#30340;&#12290;</p><p>
                  &#26377;&#20851;&#25991;&#20214;&#30340;&#32467;&#26500;&#21644;&#20869;&#23481;&#37117;&#22312;AspectJ&#30340;&#21442;&#32771;&#25991;&#26723;&#20013;&#26377;&#35814;&#32454;&#20171;&#32461;&#65292;&#26377;&#20852;&#36259;&#30340;&#35835;&#32773;
                  <a href="http://www.eclipse.org/aspectj/doc/released/devguide/ltw-configuration.html" target="_top">
                  &#35831;&#21442;&#32771;&#36825;&#20123;&#36164;&#28304;</a>&#12290;&#65288;&#24456;&#24198;&#24184;&#36825;&#19968;&#33410;&#27604;&#36739;&#31616;&#30701;&#65292;&#20294;<tt class="filename">aop.xml</tt>&#25991;&#20214;
                  &#26159;100% AspectJ&#30340; - &#27809;&#26377;&#20219;&#20309;&#20351;&#29992;Spring&#29305;&#23450;&#30340;&#20449;&#24687;&#25110;&#35821;&#20041;&#65292;&#22240;&#27492;&#25105;&#20063;&#27809;&#26377;&#20160;&#20040;&#21487;&#36129;&#29486;&#30340;&#12290;
                  &#19982;&#20854;&#37325;&#20889;&#36825;&#20123;&#24050;&#30001;AspectJ&#24320;&#21457;&#32773;&#25552;&#20379;&#30340;&#20196;&#20154;&#28385;&#24847;&#30340;&#31456;&#33410;&#65292;&#25105;&#19981;&#22914;&#39046;&#20320;&#21040;&#36825;&#37324;&#12290;&#65289;
                </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-aj-ltw-libraries"></a>6.8.4.4.&nbsp;&#30456;&#20851;&#31867;&#24211;&#65288;JARS&#65289;</h4></div></div><div></div></div><p>&#20320;&#33267;&#23569;&#38656;&#35201;&#20197;&#19979;&#31867;&#24211;&#26469;&#35753;Spring&#26694;&#26550;&#25903;&#25345;AspectJ LTW&#65306;</p><div class="orderedlist"><ol type="1"><li><p><tt class="filename">spring.jar</tt>&#65288;2.5&#25110;&#26356;&#39640;&#29256;&#26412;&#65289;</p></li><li><p><tt class="filename">aspectjrt.jar</tt>
                        &#65288;1.5&#25110;&#26356;&#39640;&#29256;&#26412;&#65289;</p></li><li><p><tt class="filename">aspectjweaver.jar</tt>
                        &#65288;1.5&#25110;&#26356;&#39640;&#29256;&#26412;&#65289;</p></li></ol></div><p>&#22914;&#26524;&#20320;&#27491;&#22312;&#20351;&#29992;<a href="#aop-aj-ltw-environment-generic" title="6.8.4.6.1.&nbsp;&#36890;&#29992;Java&#24212;&#29992;">
                &#30001;Spring&#25552;&#20379;&#30340;&#20195;&#29702;&#26469;&#28608;&#27963;&#26816;&#27979;&#65288;instrumentation&#65289;&#21151;&#33021;</a>&#65292;&#20320;&#20250;&#38656;&#35201;&#65306;</p><div class="orderedlist"><ol type="1"><li><p><tt class="filename">spring-agent.jar</tt>
                        </p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-aj-ltw-spring"></a>6.8.4.5.&nbsp;Spring&#37197;&#32622;</h4></div></div><div></div></div><p>
                  Spring LTW&#21151;&#33021;&#30340;&#20851;&#38190;&#32452;&#20214;&#26159;<tt class="interfacename">LoadTimeWeaver</tt>&#25509;&#21475;
                  &#65288;&#22312;<tt class="literal">org.springframework.instrument.classloading</tt>&#21253;&#20013;&#65289;&#65292;
                  &#20197;&#21450;Spring&#20998;&#21457;&#21253;&#20013;&#22823;&#37327;&#30340;&#23454;&#29616;&#12290;<tt class="interfacename">LoadTimeWeaver</tt>&#30340;&#23454;&#29616;&#36127;&#36131;
                  &#22312;&#36816;&#34892;&#26102;&#25226;&#19968;&#20010;&#25110;&#22810;&#20010;<tt class="classname">java.lang.instrument.ClassFileTransformers</tt>&#31867;&#28155;&#21152;&#21040;
                  <tt class="classname">ClassLoader</tt>&#20013;&#65292;&#36825;&#33021;&#20135;&#29983;&#21508;&#31181;&#21508;&#26679;&#26377;&#36259;&#30340;&#24212;&#29992;&#65292;LTW&#20999;&#38754;&#24688;&#22909;&#20415;&#26159;&#20854;&#20013;&#20043;&#19968;&#12290;
                </p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Tip" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Tip]" src="tip.png"></td><th align="left">Tip</th></tr><tr><td colspan="2" valign="top" align="left"><p>
                        &#22914;&#26524;&#20320;&#23545;&#36816;&#34892;&#26102;&#31867;&#25991;&#20214;&#21464;&#25442;&#30340;&#24605;&#24819;&#36824;&#19981;&#29087;&#24713;&#65292;&#25512;&#33616;&#20320;&#22312;&#32487;&#32493;&#20043;&#21069;&#38405;&#35835;
                        <tt class="literal">java.lang.instrument</tt>&#21253;&#30340;Javadoc API&#25991;&#26723;&#12290;
                        &#36825;&#20854;&#23454;&#24182;&#19981;&#38590;-&#21453;&#32780;&#26377;&#20123;&#24700;&#20154;-&#22240;&#20026;&#26377;&#29992;&#30340;&#25991;&#20214;&#24182;&#19981;&#22810;...&#20851;&#38190;&#30340;&#25509;&#21475;&#21644;&#31867;&#37117;&#23558;&#20250;&#22312;&#27492;&#33410;&#21576;&#29616;&#32473;&#20320;&#12290;
                    </p></td></tr></tbody></table></div><p>
                    &#29992;XML&#20026;<tt class="interfacename">ApplicationContext</tt>&#37197;&#32622;&#19968;&#20010;
                    <tt class="interfacename">LoadTimeWeaver</tt>&#31616;&#21333;&#24471;&#21482;&#38656;&#35201;&#28155;&#21152;&#19968;&#34892;&#12290;
                    &#65288;&#35831;&#27880;&#24847;&#20960;&#20046;&#32943;&#23450;&#20320;&#38656;&#35201;&#20351;&#29992;<tt class="interfacename">ApplicationContext</tt>&#20316;&#20026;&#20320;&#30340;
                    Spring&#23481;&#22120; - &#19968;&#33324;&#26469;&#35828;&#21482;&#26377;<tt class="interfacename">BeanFactory</tt>&#26159;&#19981;&#22815;&#30340;&#65292;
                    &#22240;&#20026;LTW&#21151;&#33021;&#38656;&#35201;&#29992;&#21040;<tt class="interfacename">BeanFactoryPostProcessors</tt>&#12290;&#65289;
                </p><p>
                    &#24403;&#35201;&#20351;&#29992;Spring&#26694;&#26550;&#30340;LTW&#21151;&#33021;&#26102;&#65292;&#20320;&#38656;&#35201;&#37197;&#32622;&#19968;&#20010;<tt class="interfacename">LoadTimeWeaver</tt>&#65292;
                    &#19968;&#33324;&#21487;&#20197;&#29992;<tt class="literal">&lt;context:load-time-weaver/&gt;</tt>&#20803;&#32032;&#26469;&#23436;&#25104;&#12290;
                    &#19979;&#38754;&#20026;&#19968;&#20010;&#26377;&#25928;&#30340;&#20351;&#29992;&#40664;&#35748;&#35774;&#32622;&#30340;<tt class="literal">&lt;context:load-time-weaver/&gt;</tt>&#23450;&#20041;&#12290;
                </p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
                    &lt;beans xmlns="http://www.springframework.org/schema/beans"
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                    xmlns:context="http://www.springframework.org/schema/context"
                    xsi:schemaLocation="
                    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
                    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd"&gt;
                    
                    &lt;context:load-time-weaver/&gt;
                    
                &lt;/beans&gt;</pre><p>
                    &#19978;&#38754;<tt class="literal">&lt;context:load-time-weaver/&gt;</tt> bean&#30340;&#23450;&#20041;&#20250;&#33258;&#21160;&#20026;&#20320;&#23450;&#20041;&#21644;&#27880;&#20876;&#33509;&#24178;
                    &#29305;&#23450;LTW&#30340;&#22522;&#30784;&#35774;&#26045;beans&#65292;&#27604;&#22914;&#19968;&#20010;<tt class="interfacename">LoadTimeWeaver</tt>
                    &#21644;&#19968;&#20010;<tt class="classname">AspectJWeavingEnabler</tt>&#12290;&#35831;&#27880;&#24847;
                    <tt class="literal">&lt;context:load-time-weaver/&gt;</tt>&#26159;&#24590;&#26679;&#22312;<tt class="literal">context</tt>
                    &#21629;&#21517;&#31354;&#38388;&#19979;&#34987;&#23450;&#20041;&#30340;&#65307;&#36824;&#35201;&#27880;&#24847;&#34987;&#24341;&#29992;&#30340;XML Schema&#25991;&#20214;&#21482;&#22312;Spring 2.5&#25110;&#26356;&#39640;&#29256;&#26412;&#20013;&#25165;&#21487;&#29992;&#12290;
                </p><p>
                    &#19978;&#38754;&#30340;&#37197;&#32622;&#20026;&#20320;&#23450;&#20041;&#24182;&#27880;&#20876;&#20102;&#19968;&#20010;&#40664;&#35748;&#30340;<tt class="interfacename">LoadTimeWeaver</tt> bean&#12290;
                    &#40664;&#35748;&#30340;<tt class="interfacename">LoadTimeWeaver</tt>&#26159;&#19968;&#20010;
                    <tt class="classname">DefaultContextLoadTimeWeaver</tt>&#31867;&#65292;&#23427;&#26356;&#20542;&#21521;&#20110;&#21435;&#35013;&#39280;&#19968;&#20010;&#33021;&#33258;&#21160;&#26816;&#27979;&#30340;<tt class="interfacename">LoadTimeWeaver</tt>&#31867;&#65306;<tt class="interfacename">LoadTimeWeaver</tt>
                    &#30340;&#30830;&#20999;&#31867;&#22411;&#20250;&#26681;&#25454;&#20320;&#30340;&#36816;&#34892;&#26102;&#29615;&#22659;&#8220;&#33258;&#21160;&#26816;&#27979;&#8221;&#20986;&#26469;&#65288;&#27010;&#36848;&#22914;&#19979;&#34920;&#65289;&#12290;
                </p><div class="table"><a name="aop-aj-ltw-spring-env-impls"></a><p class="title"><b>Table&nbsp;6.1.&nbsp;<tt class="classname">DefaultContextLoadTimeWeaver</tt>
                    <tt class="interfacename">LoadTimeWeavers</tt><tt class="classname">DefaultContextLoadTimeWeaver</tt>&#31867;&#21644;<tt class="interfacename">LoadTimeWeavers</tt>&#25509;&#21475;</b></p><table summary="DefaultContextLoadTimeWeaver
                    LoadTimeWeavers" width="100%" border="1"><colgroup><col align="left"><col></colgroup><thead><tr><th align="left">&#36816;&#34892;&#26102;&#29615;&#22659;</th><th><tt class="interfacename">LoadTimeWeaver</tt>&#30340;&#25509;&#21475;&#23454;&#29616;</th></tr></thead><tbody><tr><td align="left"><p><a href="http://www.bea.com/framework.jsp?CNT=index.htm&amp;%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20FP=/content/products/weblogic/server" target="_top">BEA's Weblogic 10</a>&#29615;&#22659;&#19979;</p></td><td><p><tt class="classname">WebLogicLoadTimeWeaver</tt></p></td></tr><tr><td align="left"><p><a href="http://www.oracle.com/technology/products/oc4j/index.html" target="_top">
                                Oracle's OC4J</a>&#29615;&#22659;&#19979;</p></td><td><p><tt class="classname">OC4JLoadTimeWeaver</tt></p></td></tr><tr><td align="left"><p><a href="http://glassfish.dev.java.net/" target="_top">GlassFish</a>&#29615;&#22659;&#19979;</p></td><td><p><tt class="classname">GlassFishLoadTimeWeaver</tt></p></td></tr><tr><td align="left"><p>&#20197;Spring<tt class="classname">InstrumentationSavingAgent</tt></p>&#21551;&#21160;&#30340;JVM&#20013;
                                    <p><span class="emphasis"><em><tt class="literal">(java
                                -javaagent:path/to/spring-agent.jar)</tt></em></span></p></td><td><p><tt class="classname">InstrumentationLoadTimeWeaver</tt></p></td></tr><tr><td align="left"><p>&#19981;&#36807;&#65292;&#25105;&#20204;&#26356;&#24076;&#26395;&#36825;&#20123;&#31867;&#21152;&#36733;&#22120;&#33021;&#36981;&#24490;&#20849;&#21516;&#30340;&#35268;&#33539;
                                (&#20363;&#22914;&#36866;&#29992;<tt class="classname">TomcatInstrumentableClassLoader</tt>&#21644;Resin)</p></td><td><p><tt class="classname">ReflectiveLoadTimeWeaver</tt></p></td></tr></tbody></table></div><p>
                    &#35831;&#27880;&#24847;&#24403;&#20351;&#29992;<tt class="classname">DefaultContextLoadTimeWeaver</tt>&#26102;&#21482;&#26377;
                    <tt class="interfacename">LoadTimeWeavers</tt>&#23454;&#29616;&#31867;&#33021;&#36827;&#34892;&#33258;&#21160;&#26816;&#27979;&#65306;
                    &#24403;&#28982;&#65292;&#20320;&#20063;&#21487;&#20197;&#36890;&#36807;&#25351;&#23450;&#23558;&#31867;&#30340;&#23436;&#20840;&#38480;&#23450;&#21517;&#20316;&#20026;<tt class="literal">&lt;context:load-time-weaver/&gt;</tt>
                    &#20803;&#32032;&#20013;<tt class="literal">weaver-class</tt>&#23646;&#24615;&#30340;&#20540;
                    &#26469;&#25351;&#23450;&#31350;&#31455;&#24819;&#20351;&#29992;&#21738;&#20010;<tt class="interfacename">LoadTimeWeaver</tt>&#30340;&#23454;&#29616;&#12290;&#22914;&#19979;&#20363;&#65306;
                </p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
                    &lt;beans xmlns="http://www.springframework.org/schema/beans"
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                    xmlns:context="http://www.springframework.org/schema/context"
                    xsi:schemaLocation="
                    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
                    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd"&gt;
                    
                    &lt;context:load-time-weaver
                    <span class="bold"><b>weaver-class="org.springframework.instrument.classloading.ReflectiveLoadTimeWeaver"</b></span>/&gt;
                    
                &lt;/beans&gt;</pre><p>
                    &#22312;<tt class="literal">&lt;context:load-time-weaver/&gt;</tt>&#20803;&#32032;&#19978;&#23450;&#20041;&#21644;&#27880;&#20876;&#30340;
                    <tt class="interfacename">LoadTimeWeaver</tt>&#25509;&#21475;&#21487;&#20197;&#22312;Spring&#23481;&#22120;&#20013;&#20197;
                    <tt class="literal">loadTimeWeaver</tt>&#21517;&#23383;&#25214;&#21040;&#12290;
                    &#35760;&#20303;<tt class="interfacename">LoadTimeWeaver</tt>&#25509;&#21475;&#21482;&#26159;&#20316;&#20026;Spring LTW&#22522;&#30784;&#35774;&#26045;&#30340;&#19968;&#20010;&#26426;&#21046;
                    &#29992;&#26469;&#28155;&#21152;&#19968;&#20010;&#25110;&#22810;&#20010;<tt class="interfacename">ClassFileTransformers</tt>&#30340;&#12290;
                    <tt class="classname">ClassFileTransformer</tt>&#31867;&#23454;&#38469;&#26159;&#21033;&#29992;
                    <tt class="classname">ClassPreProcessorAgentAdapter</tt>&#31867;&#65288;&#21253;&#21547;&#22312;
                    <tt class="literal">org.aspectj.weaver.loadtime</tt>&#20013;&#65289;&#26469;&#36827;&#34892;LTW&#30340;&#12290;
                    &#26377;&#20851;<tt class="classname">ClassPreProcessorAgentAdapter</tt>&#30340;&#32454;&#33410;&#35831;&#21442;&#35265;
                    &#31867;&#32423;&#21035;&#30340;javadoc&#65292;&#32455;&#20837;&#23454;&#38469;&#24590;&#26679;&#29983;&#25928;&#30340;&#20855;&#20307;&#20869;&#23481;&#24050;&#32463;&#36229;&#20986;&#26412;&#33410;&#35752;&#35770;&#33539;&#22260;&#12290;
                </p><p>
                    &#35753;&#25105;&#20204;&#26469;&#35752;&#35770;<tt class="literal">&lt;context:load-time-weaver/&gt;</tt>&#30340;&#26368;&#21518;&#19968;&#20010;&#23646;&#24615;&#65306;
                    <tt class="literal">aspectj-weaving</tt>&#12290; &#36825;&#26159;&#19968;&#20010;&#31616;&#21333;&#30340;LTW&#24320;&#20851;&#65292;&#23601;&#36825;&#20040;&#31616;&#21333;&#12290;
                    &#23427;&#21487;&#20197;&#25509;&#21463;&#22914;&#19979;&#25152;&#36848;&#30340;&#19977;&#31181;&#20540;&#65292;&#22914;&#26524;&#19981;&#26174;&#31034;&#35774;&#32622;&#27492;&#23646;&#24615;&#21017;&#20854;&#40664;&#35748;&#20540;&#20026;<tt class="literal">autodetect</tt>
                </p><div class="table"><a name="aop-aj-ltw-ltw-tag-attrs"></a><p class="title"><b>Table&nbsp;6.2.&nbsp;<tt class="literal">aspectj-weaving</tt>&#23646;&#24615;&#20540;</b></p><table summary="aspectj-weaving&#23646;&#24615;&#20540;" width="100%" border="1"><colgroup><col align="left"><col></colgroup><thead><tr><th align="left">&#23646;&#24615;&#20540;</th><th>&#27880;&#37322;</th></tr></thead><tbody><tr><td align="left"><p><tt class="literal">on</tt></p></td><td><p>AspectJ&#32455;&#20837;&#21151;&#33021;&#24320;&#21551;&#65292;&#20999;&#38754;&#23558;&#20250;&#22312;&#21152;&#36733;&#26102;&#36866;&#24403;&#26102;&#26426;&#34987;&#32455;&#20837;&#12290;</p></td></tr><tr><td align="left"><p><tt class="literal">off</tt></p></td><td><p>LTW&#21151;&#33021;&#20851;&#38381;...&#19981;&#20250;&#22312;&#21152;&#36733;&#26102;&#32455;&#20837;&#20999;&#38754;&#12290;
                                </p></td></tr><tr><td align="left"><p><tt class="literal">autodetect</tt></p></td><td><p>
                                        &#22914;&#26524;Spring LTW&#22522;&#30784;&#35774;&#26045;&#33021;&#25214;&#21040;&#33267;&#23569;&#19968;&#20010;<tt class="filename">META-INF/aop.xml</tt>
                                        &#25991;&#20214;&#65292;&#37027;&#20040;AspectJ&#32455;&#20837;&#23558;&#20250;&#24320;&#21551;&#65292;&#21542;&#21017;&#20851;&#38381;&#12290;&#27492;&#20026;&#40664;&#35748;&#20540;&#12290;
                                    </p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-aj-ltw-environments"></a>6.8.4.6.&nbsp;&#29305;&#23450;&#29615;&#22659;&#30340;&#37197;&#32622;</h4></div></div><div></div></div><p>
                    &#36825;&#26368;&#21518;&#19968;&#33410;&#21253;&#25324;&#25152;&#26377;&#20320;&#22312;&#35832;&#22914;&#24212;&#29992;&#26381;&#21153;&#22120;&#21644;web&#23481;&#22120;&#20013;&#20351;&#29992;Spring&#30340;LTW&#21151;&#33021;&#26102;&#38656;&#35201;&#30340;&#39069;&#22806;&#35774;&#32622;&#21644;&#37197;&#32622;&#12290;
                </p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="aop-aj-ltw-environment-generic"></a>6.8.4.6.1.&nbsp;&#36890;&#29992;Java&#24212;&#29992;</h5></div></div><div></div></div><p>
                      &#20320;&#21487;&#33021;&#22312;&#21508;&#31181;Java&#24212;&#29992;&#20013;&#36890;&#36807;&#20351;&#29992;&#30001;Spring&#25552;&#20379;&#30340;&#26816;&#27979;&#20195;&#29702;&#21551;&#29992;Spring&#30340;LTW&#21151;&#33021;
                      &#65288;&#29420;&#31435;&#24212;&#29992;&#25110;&#32773;&#22522;&#20110;&#24212;&#29992;&#26381;&#21153;&#22120;&#30340;&#24212;&#29992;&#65289;&#12290;&#36825;&#26679;&#30340;&#35805;&#65292;&#21487;&#20197;&#36890;&#36807;&#25351;&#23450;
                       <tt class="literal">-javaagent:path/to/spring-agent.jar</tt>&#36873;&#39033;&#26469;&#21551;&#21160;&#34394;&#25311;&#26426;&#12290;
                       &#35831;&#27880;&#24847;&#36825;&#38656;&#35201;&#20462;&#25913;&#34394;&#25311;&#26426;&#30340;&#21551;&#21160;&#33050;&#26412;&#65292;&#20294;&#22312;&#26576;&#20123;&#24212;&#29992;&#26381;&#21153;&#22120;&#29615;&#22659;&#19979;&#26159;&#31105;&#27490;&#36825;&#20040;&#20570;&#30340;
                      &#65288;&#36825;&#21462;&#20915;&#20110;&#20320;&#30340;&#25805;&#20316;&#31574;&#30053;&#65289;&#12290;
                    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="aop-aj-ltw-environment-tomcat"></a>6.8.4.6.2.&nbsp;Tomcat</h5></div></div><div></div></div><p>
                        &#23545;&#20110;&#37096;&#32626;&#22312;Apache Tomcat 5.0&#25110;&#26356;&#39640;&#29256;&#26412;&#19978;&#30340;web&#24212;&#29992;&#65292;Spring&#23558;&#19968;&#20010;
                        <tt class="classname">TomcatInstrumentableClassLoader</tt>&#27880;&#20876;&#25104;&#20026;web&#24212;&#29992;&#30340;&#31867;&#21152;&#36733;&#22120;&#12290;
                        &#24517;&#39035;&#30340;Tomcat&#35774;&#32622;&#22914;&#19979;&#25152;&#31034;&#65292;&#20320;&#21487;&#20197;&#25226;&#23427;&#25918;&#22312;Tomcat WAR&#21253;&#26681;&#30446;&#24405;&#19979;&#30340;&#26680;&#24515;&#25991;&#20214;
                        <tt class="literal">server.xml</tt>&#20013;&#25110;&#25918;&#21040;&#24212;&#29992;&#29305;&#23450;&#30340;<tt class="literal">META-INF/context.xml</tt>&#25991;&#20214;&#20013;&#12290;
                        Spring&#30340;<tt class="literal">spring-tomcat-weaver.jar</tt>&#38656;&#35201;&#34987;&#21253;&#21547;&#21040;Tomcat
                        &#30340;common lib&#36335;&#24452;&#19979;&#20197;&#30830;&#20445;&#35774;&#32622;&#29983;&#25928;&#12290;
                    </p><pre class="programlisting">&lt;Context path="/myWebApp" docBase="/my/webApp/location"&gt;
                        &lt;Loader loaderClass="org.springframework.instrument.classloading.tomcat.TomcatInstrumentableClassLoader"
                        useSystemClassLoaderAsParent="false"/&gt;
                        &lt;/Context&gt;
                    </pre><p>
                        &#27880;&#24847;&#65306;<span class="emphasis"><em>&#24403;&#20351;&#29992;LTW&#26102;&#65292;&#25105;&#20204;&#19968;&#33324;&#25512;&#33616;&#20351;&#29992;Tomcat 5.5.20&#25110;&#26356;&#39640;&#29256;&#26412;&#12290;</em></span>
                        &#20808;&#21069;&#30340;&#29256;&#26412;&#23545;&#23450;&#21046;&#30340;<tt class="classname">ClassLoader</tt>&#35774;&#32622;&#20250;&#20135;&#29983;&#38382;&#39064;&#12290;
                    </p><p>
                       &#21478;&#22806;&#65292;&#35831;&#32771;&#34385;&#20351;&#29992;&#22312;Tomcat&#21551;&#21160;&#33050;&#26412;&#20013;&#65288;&#35265;&#19978;&#38754;&#65289;&#25351;&#23450;&#30001;Spring&#25552;&#20379;&#30340;&#36890;&#29992;&#34394;&#25311;&#26426;&#20195;&#29702;&#12290;
                       &#36825;&#26679;&#25165;&#33021;&#20351;&#26816;&#27979;&#21151;&#33021;&#22312;&#25152;&#26377;&#24050;&#37096;&#32626;&#30340;web&#24212;&#29992;&#20013;&#21487;&#29992;&#65292;&#26080;&#35770;&#20854;&#19978;&#36816;&#34892;&#30340;&#26159;&#21738;&#31181;&#31867;&#21152;&#36733;&#22120;&#12290;
                    </p><p>
                        &#26377;&#20851;&#26356;&#22810;&#22522;&#20110;Tomcat&#32455;&#20837;&#35774;&#32622;&#30340;&#35814;&#32454;&#35752;&#35770;&#65292;&#35831;&#21442;&#32771;&#35752;&#35770;&#21508;&#31181;&#19981;&#21516;Tomcat&#29256;&#26412;&#20869;&#23481;&#30340;
                        <a href="#orm-jpa-setup-lcemfb-tomcat" title="12.6.1.3.1.&nbsp;Tomcat&#65288;5.0&#20197;&#19978;&#65289;&#21152;&#36733;&#26102;&#30340;&#32455;&#20837;&#37197;&#32622;">Section&nbsp;12.6.1.3.1, &#8220;Tomcat&#65288;5.0&#20197;&#19978;&#65289;&#21152;&#36733;&#26102;&#30340;&#32455;&#20837;&#37197;&#32622;&#8221;</a>&#19968;&#33410;&#12290;&#34429;&#28982;&#26412;&#33410;&#20027;&#35201;&#20851;&#27880;&#20110;
                        JPA persistence&#25552;&#20379;&#32773;&#30340;&#35774;&#32622;&#65292;&#20294;&#20063;&#35848;&#21040;&#20102;Tomcat&#21508;&#31181;&#29305;&#23450;&#35774;&#32622;&#36866;&#29992;&#20110;&#19968;&#33324;&#21152;&#36733;&#26102;&#32455;&#20837;&#30340;&#24773;&#20917;&#12290;
                    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="aop-aj-ltw-environments-weblogic-oc4j-resin-glassfish"></a>6.8.4.6.3.&nbsp;WebLogic, OC4J, Resin, GlassFish</h5></div></div><div></div></div><p>
                        BEA WebLogic&#65288;&#29256;&#26412;10&#25110;&#26356;&#39640;&#65289;&#65292;Oracle&#30340;JavaEE&#23481;&#22120;&#65288;OC4J 10.1.3.1&#25110;&#26356;&#39640;&#65289;&#20197;&#21450;
                        Resin&#65288;&#29256;&#26412;3.1&#25110;&#26356;&#39640;&#65289;&#25552;&#20379;&#20855;&#26377;&#26412;&#22320;&#26816;&#27979;&#33021;&#21147;&#30340;&#31867;&#21152;&#36733;&#22120;&#12290;
                        Srping&#30340;&#21407;&#29983;LTW&#21033;&#29992;&#36825;&#20123;&#31867;&#21152;&#36733;&#22120;&#26469;&#28608;&#27963;AspectJ&#32455;&#20837;&#12290;&#20320;&#21487;&#20197;&#36890;&#36807;&#31616;&#21333;&#22320;&#28608;&#27963;&#20043;&#21069;&#25552;&#21040;&#30340;
                        <tt class="literal">context:load-time-weaver</tt>&#26469;&#21551;&#21160;LTW&#21151;&#33021;&#12290;&#20855;&#20307;&#26469;&#35828;&#65292;&#21363;&#20320;
                        <span class="emphasis"><em>&#19981;</em></span>&#38656;&#35201;&#36890;&#36807;&#20462;&#25913;&#21551;&#21160;&#33050;&#26412;&#26469;&#28155;&#21152;
                        <tt class="literal">-javaagent:path/to/spring-agent.jar</tt>&#12290;
                    </p><p>
                       GlassFish&#21516;&#26679;&#20063;&#25552;&#20379;&#20102;&#26816;&#27979;&#33021;&#21147;&#30340;&#31867;&#21152;&#36733;&#22120;&#65292;&#19981;&#36807;&#21482;&#33021;&#22312;&#23427;&#30340;EAR&#29615;&#22659;&#19979;&#20351;&#29992;&#12290;
                       &#23545;&#20110;GlassFish&#30340;web&#24212;&#29992;&#65292;&#21487;&#20197;&#20351;&#29992;&#36319;&#19978;&#38754;tomcat&#30456;&#21516;&#30340;&#35774;&#32622;&#12290;
                    </p></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="aop-resources"></a>6.9.&nbsp;&#26356;&#22810;&#36164;&#28304;</h2></div></div><div></div></div><p>&#26356;&#22810;&#20851;&#20110;AspectJ&#30340;&#20449;&#24687;&#21487;&#20197;&#26597;&#30475; <a href="http://www.eclipse.org/aspectj" target="_top">AspectJ website</a>&#12290;
        </p><p>
          <span class="emphasis"><em>Eclipse AspectJ</em></span> Adrian Colyer&#31561;&#20154;&#32534;&#33879;(Addison-Wesley, 2005)
          &#19968;&#20070;&#25552;&#20379;&#20102;&#38024;&#23545;AspectJ&#35821;&#35328;&#20840;&#38754;&#30340;&#20171;&#32461;&#21644;&#21442;&#32771;&#12290;</p><p>
        <span class="emphasis"><em>AspectJ in Action</em></span> Ramnivas Laddad&#32534;&#33879;(Manning, 2003)&#26159;&#19968;&#26412;&#38750;&#24120;&#20986;&#33394;&#20171;&#32461;AOP&#30340;&#20070;&#31821;&#65307;
        &#20840;&#20070;&#30528;&#37325;&#20171;&#32461;&#20102;AspectJ&#65292;&#20294;&#20063;&#23545;&#19968;&#20123;&#36890;&#29992;&#30340;AOP&#22330;&#26223;&#36827;&#34892;&#20102;&#27604;&#36739;&#28145;&#20837;&#30340;&#30740;&#31350;&#12290;</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="aop-api"></a>Chapter&nbsp;7.&nbsp;Spring AOP APIs</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="aop-api-introduction"></a>7.1.&nbsp;&#31616;&#20171;</h2></div></div><div></div></div><p> &#21069;&#19968;&#31456;&#20171;&#32461;&#20102;Spring 2.0&#20013;&#25552;&#20379;&#30340;&#20351;&#29992;@AspectJ&#21644;&#22522;&#20110;Schema&#20999;&#38754;&#23450;&#20041;&#30340;AOP&#12290;&#22312;&#36825;&#20010;&#31456;&#33410;&#37324;&#65292;&#25105;&#20204;&#23558;&#35752;&#35770;&#26356;&#24213;&#23618;&#30340;Spring AOP API&#65292;
    &#20197;&#21450;&#22914;&#20309;&#22312;Spring 1.2&#24212;&#29992;&#20013;&#20351;&#29992;&#36825;&#20123;API&#12290;&#23545;&#20110;&#26032;&#30340;&#24212;&#29992;&#31243;&#24207;&#65292;&#25105;&#20204;&#25512;&#33616;&#20351;&#29992;&#21069;&#19968;&#31456;&#20171;&#32461;&#30340;Spring 2.0 AOP&#25903;&#25345;&#65292;&#20294;&#26159;&#24403;&#20320;&#20351;&#29992;&#24050;&#26377;&#31995;&#32479;&#26102;&#65292;
    &#25110;&#26159;&#38405;&#35835;&#20070;&#31821;&#21644;&#25991;&#31456;&#26102;&#65292;&#24456;&#26377;&#21487;&#33021;&#20250;&#36935;&#21040;Spring 1.2&#39118;&#26684;&#30340;&#20363;&#23376;&#12290;Spring 2.0&#26159;&#23436;&#20840;&#21521;&#21069;&#20860;&#23481;Spring 1.2&#30340;&#65292;
    &#36825;&#19968;&#31456;&#20013;&#28041;&#21450;&#30340;&#25152;&#26377;&#20869;&#23481;&#22312;Spring 2.0&#37324;&#38754;&#24471;&#21040;&#20102;&#23436;&#20840;&#30340;&#25903;&#25345;&#12290; </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="aop-api-pointcuts"></a>7.2.&nbsp;Spring&#20013;&#30340;&#20999;&#20837;&#28857;API</h2></div></div><div></div></div><p>&#35753;&#25105;&#20204;&#30475;&#30475;Spring&#26159;&#22914;&#20309;&#22788;&#29702;&#20999;&#20837;&#28857;&#36825;&#20010;&#37325;&#35201;&#27010;&#24565;&#30340;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-api-concepts"></a>7.2.1.&nbsp;&#27010;&#24565;</h3></div></div><div></div></div><p>Spring&#30340;&#20999;&#20837;&#28857;&#27169;&#22411;&#20351;&#24471;&#20999;&#20837;&#28857;&#21487;&#20197;&#29420;&#31435;&#20110;&#36890;&#30693;&#65288;advice&#65289;&#31867;&#22411;&#36827;&#34892;&#37325;&#29992;&#65292;&#36825;&#23601;&#20351;&#24471;&#38024;&#23545;&#19981;&#21516;&#36890;&#30693;&#20351;&#29992;&#30456;&#21516;&#30340;pointcut&#25104;&#20026;&#21487;&#33021;&#12290;</p><p><tt class="literal">org.springframework.aop.Pointcut</tt>&#26159;&#26368;&#26680;&#24515;&#30340;&#25509;&#21475;&#65292;&#29992;&#26469;&#23558;&#36890;&#30693;&#24212;&#29992;&#20110;&#29305;&#23450;&#30340;&#31867;&#21644;&#26041;&#27861;&#65292;&#23436;&#25972;&#30340;&#25509;&#21475;&#23450;&#20041;&#22914;&#19979;&#65306;</p><pre class="programlisting">public interface Pointcut {

    ClassFilter getClassFilter();

    MethodMatcher getMethodMatcher();

        }</pre><p>&#23558;<tt class="interfacename">Pointcut</tt>&#25509;&#21475;&#20998;&#21106;&#25104;&#26377;&#21033;&#20110;&#37325;&#29992;&#31867;&#21644;&#26041;&#27861;&#21305;&#37197;&#30340;&#20004;&#37096;&#20998;&#65292;
        &#20197;&#21450;&#36827;&#34892;&#26356;&#32454;&#31890;&#24230;&#30340;&#25805;&#20316;&#32452;&#21512;&#65288;&#20363;&#22914;&#19982;&#21478;&#19968;&#20010;&#26041;&#27861;&#21305;&#37197;&#23454;&#29616;&#36827;&#34892;&#8220;&#25110;&#25805;&#20316;&#8221;&#65289;&#12290;</p><p><tt class="interfacename">ClassFilter</tt>&#25509;&#21475;&#29992;&#26469;&#23558;&#20999;&#20837;&#28857;&#38480;&#23450;&#22312;&#19968;&#20010;&#32473;&#23450;&#30340;&#31867;&#38598;&#21512;&#20013;&#12290;
        &#22914;&#26524;<tt class="literal">matches()</tt>&#26041;&#27861;&#24635;&#26159;&#36820;&#22238;true&#65292;&#25152;&#26377;&#30446;&#26631;&#31867;&#37117;&#23558;&#34987;&#21305;&#37197;&#65306;</p><pre class="programlisting">public interface ClassFilter {

    boolean matches(Class clazz);
        }</pre><p><tt class="interfacename">MethodMatcher</tt>&#25509;&#21475;&#36890;&#24120;&#26356;&#37325;&#35201;&#65292;&#23436;&#25972;&#30340;&#25509;&#21475;&#23450;&#20041;&#22914;&#19979;&#65306;</p><pre class="programlisting">public interface MethodMatcher {

    boolean matches(Method m, Class targetClass);

    boolean isRuntime();

    boolean matches(Method m, Class targetClass, Object[] args);
        }</pre><p><tt class="literal">matches(Method, Class)</tt>&#26041;&#27861;&#29992;&#26469;&#27979;&#35797;&#36825;&#20010;&#20999;&#20837;&#28857;&#26159;&#21542;&#21305;&#37197;&#30446;&#26631;&#31867;&#30340;&#25351;&#23450;&#26041;&#27861;&#12290;
        &#36825;&#23558;&#22312;AOP&#20195;&#29702;&#34987;&#21019;&#24314;&#30340;&#26102;&#20505;&#36827;&#34892;&#36816;&#31639;&#65292;&#36825;&#26679;&#21487;&#20197;&#36991;&#20813;&#22312;&#27599;&#27425;&#26041;&#27861;&#35843;&#29992;&#30340;&#26102;&#20505;&#37117;&#36816;&#31639;&#12290;
        &#22914;&#26524;<tt class="literal">matches(Method, Class)</tt>&#23545;&#20110;&#19968;&#20010;&#32473;&#23450;&#30340;&#26041;&#27861;&#36820;&#22238;true&#65292;&#24182;&#19988;<tt class="literal">isRuntime()</tt>&#20063;&#36820;&#22238;true&#65292;
        &#37027;&#20040;<tt class="literal">matches(Method, Class, Object[])</tt>&#23558;&#22312;&#27599;&#20010;&#26041;&#27861;&#35843;&#29992;&#30340;&#26102;&#20505;&#34987;&#35843;&#29992;&#12290;
        &#36825;&#20351;&#24471;&#20999;&#20837;&#28857;&#22312;&#36890;&#30693;&#23558;&#34987;&#25191;&#34892;&#21069;&#21487;&#20197;&#26597;&#30475;&#20256;&#20837;&#21040;&#26041;&#27861;&#30340;&#21442;&#25968;&#12290;</p><p>&#22823;&#22810;&#25968;MethodMatcher&#26159;&#38745;&#24577;&#30340;&#65292;&#36825;&#24847;&#21619;&#30528;<tt class="literal">isRuntime()</tt>&#26041;&#27861;&#36820;&#22238;false&#12290;
        &#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;<tt class="literal">matches(Method, Class , Object[])</tt>&#27704;&#36828;&#19981;&#20250;&#34987;&#35843;&#29992;&#12290; </p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Tip" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Tip]" src="tip.png"></td><th align="left">Tip</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#24212;&#23613;&#21487;&#33021;&#22320;&#20351;&#20999;&#20837;&#28857;&#20445;&#25345;&#38745;&#24577;&#65292;&#36825;&#23601;&#20801;&#35768;AOP&#26694;&#26550;&#22312;AOP&#20195;&#29702;&#34987;&#21019;&#24314;&#26102;&#32531;&#23384;&#23545;&#20999;&#20837;&#28857;&#30340;&#35745;&#31639;&#32467;&#26524;&#12290;</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-api-pointcut-ops"></a>7.2.2.&nbsp;&#20999;&#20837;&#28857;&#36816;&#31639;</h3></div></div><div></div></div><p>Spring&#22312;&#20999;&#20837;&#28857;&#19978;&#25903;&#25345;&#20197;&#19979;&#36816;&#31639;&#65306; <span class="emphasis"><em>&#25110;</em></span>&#21644;<span class="emphasis"><em>&#19982;</em></span>&#12290;</p><div class="itemizedlist"><ul type="disc"><li><p>&#25110;&#36816;&#31639;&#34920;&#31034;&#21482;&#38656;&#26377;&#19968;&#20010;&#20999;&#20837;&#28857;&#34987;&#21305;&#37197;&#23601;&#25191;&#34892;&#26041;&#27861;&#12290;</p></li><li><p>&#19982;&#36816;&#31639;&#34920;&#31034;&#25152;&#26377;&#30340;&#20999;&#20837;&#28857;&#37117;&#21305;&#37197;&#30340;&#24773;&#20917;&#19979;&#25165;&#25191;&#34892;&#12290;</p></li><li><p>&#36890;&#24120;&#25110;&#36816;&#31639;&#35201;&#26356;&#26377;&#29992;&#19968;&#20123;&#12290;</p></li><li><p>&#20999;&#20837;&#28857;&#21487;&#20197;&#20351;&#29992;<span class="emphasis"><em>org.springframework.aop.support.Pointcuts</em></span>&#31867;&#20013;&#30340;&#38745;&#24577;&#26041;&#27861;&#26469;&#36827;&#34892;&#32452;&#21512;&#65292;
                &#25110;&#32773;&#20351;&#29992;&#21516;&#19968;&#20010;&#21253;&#20869;&#30340;<span class="emphasis"><em>ComposablePointcut</em></span>&#31867;&#12290;&#19981;&#36807;&#20351;&#29992;AspectJ&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#36890;&#24120;&#20250;&#26356;&#31616;&#21333;&#19968;&#20123;&#12290; </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-api-pointcuts-aspectj"></a>7.2.3.&nbsp;AspectJ&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;</h3></div></div><div></div></div><p>&#20174;2.0&#24320;&#22987;&#65292;Spring&#20013;&#20351;&#29992;&#30340;&#26368;&#37325;&#35201;&#30340;&#20999;&#20837;&#28857;&#31867;&#22411;&#26159;<tt class="literal">org.springframework.aop.aspectj.AspectJExpressionPointcut</tt>&#12290;
        &#36825;&#20010;&#20999;&#20837;&#28857;&#20351;&#29992;AspectJ&#25552;&#20379;&#30340;&#24211;&#26469;&#35299;&#26512;&#28385;&#36275;AspectJ&#35821;&#27861;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#23383;&#31526;&#20018;&#12290; </p><p>&#21487;&#20197;&#26597;&#30475;&#21069;&#19968;&#31456;&#20851;&#20110;&#25152;&#25903;&#25345;&#30340;AspectJ&#20999;&#20837;&#28857;&#21407;&#35821;&#30340;&#35752;&#35770;&#12290; </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-api-pointcuts-impls"></a>7.2.4.&nbsp;&#20415;&#21033;&#30340;&#20999;&#20837;&#28857;&#23454;&#29616;</h3></div></div><div></div></div><p>Spring&#25552;&#20379;&#20102;&#19968;&#20123;&#24456;&#26041;&#20415;&#30340;&#20999;&#20837;&#28857;&#23454;&#29616;&#12290;&#19968;&#20123;&#21487;&#30452;&#25509;&#20351;&#29992;&#65292;&#20854;&#23427;&#30340;&#21017;&#26159;&#20999;&#20837;&#28857;&#24212;&#29992;&#35268;&#33539;&#30340;&#23376;&#38598;&#12290; </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-api-pointcuts-static"></a>7.2.4.1.&nbsp;&#38745;&#24577;&#20999;&#20837;&#28857;</h4></div></div><div></div></div><p>&#38745;&#24577;&#20999;&#20837;&#28857;&#22522;&#20110;&#26041;&#27861;&#21644;&#30446;&#26631;&#31867;&#36827;&#34892;&#20999;&#20837;&#28857;&#21028;&#26029;&#65292;&#19981;&#32771;&#34385;&#26041;&#27861;&#30340;&#21442;&#25968;&#12290;&#22312;&#22810;&#25968;&#24773;&#20917;&#19979;&#65292;&#38745;&#24577;&#20999;&#20837;&#28857;&#26159;&#39640;&#25928;&#30340;&#12289;&#26368;&#22909;&#30340;&#36873;&#25321;&#12290;
            Spring&#21482;&#22312;&#31532;&#19968;&#27425;&#35843;&#29992;&#26041;&#27861;&#26102;&#36816;&#31639;&#38745;&#24577;&#20999;&#20837;&#28857;&#65306;&#20197;&#21518;&#27599;&#27425;&#35843;&#29992;&#36825;&#20010;&#26041;&#27861;&#26102;&#23601;&#19981;&#38656;&#35201;&#20877;&#36816;&#31639;&#20102;&#12290; </p><p>&#35753;&#25105;&#20204;&#32771;&#34385;Spring&#20013;&#30340;&#19968;&#20123;&#38745;&#24577;&#20999;&#20837;&#28857;&#23454;&#29616;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="aop-api-pointcuts-regex"></a>7.2.4.1.1.&nbsp;&#27491;&#21017;&#34920;&#36798;&#24335;&#20999;&#20837;&#28857;</h5></div></div><div></div></div><p>&#26174;&#32780;&#26131;&#35265;&#65292;&#19968;&#31181;&#25551;&#36848;&#38745;&#24577;&#20999;&#20837;&#28857;&#30340;&#26041;&#24335;&#26159;&#20351;&#29992;&#27491;&#21017;&#34920;&#36798;&#24335;&#12290;&#21253;&#21547;Spring&#22312;&#20869;&#30340;&#19968;&#20123;AOP&#26694;&#26550;&#37117;&#25903;&#25345;&#36825;&#31181;&#26041;&#24335;&#12290;
                    <tt class="literal">org.springframework.aop.support.Perl5RegexpMethodPointcut</tt>&#26159;&#19968;&#20010;&#26368;&#22522;&#26412;&#30340;&#27491;&#21017;&#34920;&#36798;&#24335;&#20999;&#20837;&#28857;&#65292;
                    &#23427;&#20351;&#29992;Perl 5&#27491;&#21017;&#34920;&#36798;&#24335;&#35821;&#27861;&#12290;<tt class="literal">Perl5RegexpMethodPointcut</tt>&#20381;&#36182;Jakarta ORO&#36827;&#34892;&#27491;&#21017;&#34920;&#36798;&#24335;&#21305;&#37197;&#12290;
                Spring&#20063;&#25552;&#20379;&#20102;<tt class="literal">JdkRegexpMethodPointcut</tt>&#31867;&#65292;&#23427;&#20351;&#29992;JDK 1.4&#25110;&#26356;&#39640;&#29256;&#26412;&#37324;&#25552;&#20379;&#30340;&#27491;&#21017;&#34920;&#36798;&#24335;&#25903;&#25345;&#12290;</p><p>&#20351;&#29992;<tt class="literal">Perl5RegexpMethodPointcut</tt>&#31867;&#65292;&#20320;&#21487;&#20197;&#25552;&#20379;&#19968;&#32452;&#27169;&#24335;&#23383;&#31526;&#20018;&#12290;
                &#22914;&#26524;&#20854;&#20013;&#20219;&#24847;&#19968;&#20010;&#27169;&#24335;&#21305;&#37197;&#65292;&#20999;&#20837;&#28857;&#23558;&#34987;&#35299;&#26512;&#20026;true&#12290;&#65288;&#23454;&#38469;&#19978;&#23601;&#26159;&#36825;&#20123;&#20999;&#20837;&#28857;&#30340;&#25110;&#38598;&#12290;&#65289;</p><p>&#29992;&#27861;&#22914;&#19979;&#65306;</p><p>
                    </p><pre class="programlisting">&lt;bean id="settersAndAbsquatulatePointcut" 
                        class="org.springframework.aop.support.Perl5RegexpMethodPointcut"&gt;
                        &lt;property name="patterns"&gt;
                        &lt;list&gt;
                        &lt;value&gt;.*set.*&lt;/value&gt;
                        &lt;value&gt;.*absquatulate&lt;/value&gt;
                        &lt;/list&gt;
                        &lt;/property&gt;
                    &lt;/bean&gt;</pre><p>
                </p><p>Spring&#25552;&#20379;&#20102;&#19968;&#20010;&#26041;&#20415;&#30340;&#31867; <tt class="literal">RegexpMethodPointcutAdvisor</tt>&#65292;
                    &#23427;&#20063;&#20801;&#35768;&#25105;&#20204;&#24341;&#29992;&#19968;&#20010;&#36890;&#30693;&#65288;&#35760;&#20303;&#36825;&#37324;&#19968;&#20010;&#36890;&#30693;&#21487;&#20197;&#26159;&#25318;&#25130;&#22120;&#65292;&#21069;&#32622;&#36890;&#30693;&#65288;before advice&#65289;&#65292;&#24322;&#24120;&#36890;&#30693;&#65288;throws advice&#65289;&#31561;&#31867;&#22411;&#20013;&#30340;&#19968;&#20010;&#65289;&#12290;
                    &#22312;&#32972;&#21518;&#65292;&#22914;&#26524;&#20351;&#29992;J2SE 1.4&#25110;&#32773;&#20197;&#19978;&#29256;&#26412;&#65292;Spring&#23558;&#20351;&#29992;<tt class="literal">JdkRegexpMethodPointcut</tt>&#65292;
                    &#22312;&#20043;&#21069;&#29256;&#26412;&#30340;&#34394;&#25311;&#26426;&#19978;&#65292;Spring&#23558;&#36864;&#22238;&#21435;&#20351;&#29992;<tt class="literal">Perl5RegexpMethodPointcut</tt>&#12290;
                    &#21487;&#20197;&#36890;&#36807;&#35774;&#32622;<tt class="literal">perl5</tt>&#23646;&#24615;&#20026;true&#26469;&#24378;&#21046;&#20351;&#29992;<tt class="literal">Perl5RegexpMethodPointcut</tt>&#12290;
                    &#20351;&#29992;<tt class="literal">RegexpMethodPointcutAdvisor</tt>&#21487;&#20197;&#31616;&#21270;&#32455;&#20837;&#65292;&#22240;&#20026;&#19968;&#20010;bean&#21487;&#20197;&#21516;&#26102;&#20316;&#20026;&#20999;&#20837;&#28857;&#21644;&#36890;&#30693;&#22120;&#65288;advisor&#65289;&#65292;&#22914;&#19979;&#25152;&#31034;&#65306; </p><p>
                    </p><pre class="programlisting">&lt;bean id="settersAndAbsquatulateAdvisor" 
                        class="org.springframework.aop.support.RegexpMethodPointcutAdvisor"&gt;
                        &lt;property name="advice"&gt;
                        &lt;ref local="beanNameOfAopAllianceInterceptor"/&gt;
                        &lt;/property&gt;
                        &lt;property name="patterns"&gt;
                        &lt;list&gt;
                        &lt;value&gt;.*set.*&lt;/value&gt;
                        &lt;value&gt;.*absquatulate&lt;/value&gt;
                        &lt;/list&gt;
                        &lt;/property&gt;
                    &lt;/bean&gt;</pre><p>
                </p><p><span class="emphasis"><em>RegexpMethodPointcutAdvisor</em></span>&#21487;&#20197;&#21644;&#20219;&#20309;&#36890;&#30693;&#31867;&#22411;&#19968;&#36215;&#20351;&#29992;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="aop-api-pointcuts-attribute-driven"></a>7.2.4.1.2.&nbsp;&#23646;&#24615;&#39537;&#21160;&#30340;&#20999;&#20837;&#28857;</h5></div></div><div></div></div><p>&#19968;&#20010;&#37325;&#35201;&#30340;&#38745;&#24577;&#20999;&#20837;&#28857;&#26159;<span class="emphasis"><em>&#20803;&#25968;&#25454;&#39537;&#21160;(metadata-driven)</em></span>&#20999;&#20837;&#28857;&#12290;&#36825;&#20351;&#29992;&#20803;&#25968;&#25454;&#21442;&#25968;&#65306;&#29305;&#21035;&#26159;&#28304;&#20195;&#30721;&#32423;&#21035;&#30340;&#20803;&#25968;&#25454;&#12290;
                </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-api-pointcuts-dynamic"></a>7.2.4.2.&nbsp;&#21160;&#24577;&#20999;&#20837;&#28857;</h4></div></div><div></div></div><p>&#21160;&#24577;&#20999;&#20837;&#28857;&#27604;&#36215;&#38745;&#24577;&#20999;&#20837;&#28857;&#22312;&#25191;&#34892;&#26102;&#35201;&#28040;&#32791;&#26356;&#22810;&#30340;&#36164;&#28304;&#12290;&#23427;&#20204;&#21516;&#26102;&#35745;&#31639;&#26041;&#27861;<span class="emphasis"><em>&#21442;&#25968;</em></span>&#21644;&#38745;&#24577;&#20449;&#24687;&#12290;
            &#36825;&#24847;&#21619;&#30528;&#23427;&#20204;&#24517;&#39035;&#22312;&#27599;&#27425;&#26041;&#27861;&#35843;&#29992;&#26102;&#37117;&#34987;&#35745;&#31639;&#65307;&#30001;&#20110;&#21442;&#25968;&#30340;&#19981;&#21516;&#65292;&#32467;&#26524;&#19981;&#33021;&#34987;&#32531;&#23384;&#12290; </p><p>&#21160;&#24577;&#20999;&#20837;&#28857;&#30340;&#20027;&#35201;&#20363;&#23376;&#26159;<tt class="literal">&#25511;&#21046;&#27969;</tt>&#20999;&#20837;&#28857;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="aop-api-pointcuts-cflow"></a>7.2.4.2.1.&nbsp;&#25511;&#21046;&#27969;&#20999;&#20837;&#28857;</h5></div></div><div></div></div><p>Spring&#25511;&#21046;&#27969;&#20999;&#20837;&#28857;&#22312;&#27010;&#24565;&#19978;&#21644;AspectJ&#30340;<span class="emphasis"><em>cflow</em></span> &#20999;&#20837;&#28857;&#24456;&#30456;&#20284;&#65292;
                    &#34429;&#28982;&#23427;&#30340;&#21151;&#33021;&#19981;&#22914;&#21518;&#32773;&#37027;&#20040;&#24378;&#22823;&#12290;&#65288;&#30446;&#21069;&#36824;&#19981;&#33021;&#35753;&#19968;&#20010;&#20999;&#20837;&#28857;&#22312;&#21478;&#22806;&#19968;&#20010;&#20999;&#20837;&#28857;&#25152;&#21305;&#37197;&#30340;&#36830;&#25509;&#28857;&#22788;&#25191;&#34892;&#65289;&#12290;
                    &#19968;&#20010;&#25511;&#21046;&#27969;&#20999;&#20837;&#28857;&#21305;&#37197;&#24403;&#21069;&#30340;&#35843;&#29992;&#26632;&#12290;&#20363;&#22914;&#65292;&#19968;&#20010;&#36830;&#25509;&#28857;&#34987;<tt class="literal">com.mycompany.web</tt>
                    &#21253;&#20869;&#30340;&#19968;&#20010;&#26041;&#27861;&#25110;&#32773;<tt class="literal">SomeCaller</tt>&#31867;&#35843;&#29992;&#65292;&#20999;&#20837;&#28857;&#23601;&#21487;&#33021;&#34987;&#28608;&#27963;&#12290;
                    &#25511;&#21046;&#27969;&#20999;&#20837;&#28857;&#26159;&#30001;<tt class="literal">org.springframework.aop.support.ControlFlowPointcut</tt>&#31867;&#22768;&#26126;&#30340;&#12290; 
                    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#22312;&#36816;&#34892;&#26102;&#25511;&#21046;&#27969;&#20999;&#20837;&#28857;&#30340;&#24320;&#38144;&#26159;&#38750;&#24120;&#26114;&#36149;&#30340;&#65292;&#29978;&#33267;&#19982;&#20854;&#23427;&#21160;&#24577;&#20999;&#20837;&#28857;&#27604;&#36215;&#26469;&#20063;&#26159;&#22914;&#27492;&#12290;&#22312;Java 1.4&#37324;&#65292;
                        &#23427;&#30340;&#24320;&#38144;&#24046;&#19981;&#22810;&#26159;&#20854;&#23427;&#21160;&#24577;&#20999;&#20837;&#28857;&#30340;5&#20493;&#12290;</p></td></tr></tbody></table></div><p>
                </p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-api-pointcuts-superclasses"></a>7.2.5.&nbsp;&#20999;&#20837;&#28857;&#30340;&#36229;&#31867;</h3></div></div><div></div></div><p>Spring&#25552;&#20379;&#20102;&#24456;&#22810;&#26377;&#29992;&#30340;&#20999;&#20837;&#28857;&#36229;&#31867;&#26469;&#24110;&#21161;&#20320;&#23454;&#29616;&#20320;&#33258;&#24049;&#30340;&#20999;&#20837;&#28857;&#12290;</p><p>&#22240;&#20026;&#38745;&#24577;&#20999;&#20837;&#28857;&#26159;&#26368;&#24120;&#29992;&#30340;&#65292;&#20320;&#21487;&#33021;&#20250;&#20687;&#19979;&#38754;&#37027;&#26679;&#32487;&#25215;StaticMethodMatcherPointcut&#12290;&#36825;&#21482;&#38656;&#35201;&#23454;&#29616;&#19968;&#20010;&#25277;&#35937;&#26041;&#27861;
        &#65288;&#34429;&#28982;&#20063;&#21487;&#20197;&#35206;&#30422;&#20854;&#23427;&#26041;&#27861;&#26469;&#23450;&#21046;&#34892;&#20026;&#65289;&#65306;</p><pre class="programlisting">class TestStaticPointcut extends StaticMethodMatcherPointcut {
                
                public boolean matches(Method m, Class targetClass) {
                // return true if custom criteria match
                }
        }</pre><p>&#21160;&#24577;&#20999;&#20837;&#28857;&#20063;&#26377;&#24456;&#22810;&#36229;&#31867;&#12290;</p><p>&#20320;&#21487;&#20197;&#22312;&#20351;&#29992;&#33258;&#23450;&#20041;&#20999;&#20837;&#28857;&#30340;&#21516;&#26102;&#32467;&#21512;Spring 1.0 RC2&#21644;&#26356;&#39640;&#29256;&#26412;&#20013;&#30340;&#20219;&#24847;&#36890;&#30693;&#31867;&#22411;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-api-pointcuts-custom"></a>7.2.6.&nbsp;&#33258;&#23450;&#20041;&#20999;&#20837;&#28857;</h3></div></div><div></div></div><p>&#22240;&#20026;&#22312;Spring AOP&#20013;&#30340;&#20999;&#20837;&#28857;&#26159;Java&#31867;&#32780;&#19981;&#26159;&#35821;&#35328;&#30340;&#29305;&#24615;&#65288;&#23601;&#20687;AspectJ&#37027;&#26679;&#65289;&#65292;&#25152;&#20197;&#21487;&#20197;&#22768;&#26126;&#33258;&#23450;&#20041;&#30340;&#20999;&#20837;&#28857;&#65292;&#19981;&#35770;&#26159;&#38745;&#24577;&#36824;&#26159;&#21160;&#24577;&#30340;&#12290;
        &#33258;&#23450;&#20041;&#20999;&#20837;&#28857;&#22312;Spring&#37324;&#21487;&#33021;&#24456;&#24378;&#22823;&#12290;&#21363;&#20351;&#36825;&#26679;&#25105;&#20204;&#20173;&#25512;&#33616;&#23613;&#21487;&#33021;&#20351;&#29992;AspectJ&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#35821;&#35328;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#21518;&#32493;&#29256;&#26412;&#30340;Spring&#20063;&#35768;&#20250;&#25552;&#20379;&#8220;&#35821;&#20041;&#20999;&#20837;&#28857;&#8221;&#65292;&#20687;JAC&#25152;&#25552;&#20379;&#30340;&#37027;&#26679;&#65306;&#20363;&#22914;&#65292;&#8220;&#25152;&#26377;&#26041;&#27861;&#21487;&#20197;&#20462;&#25913;&#30446;&#26631;&#23545;&#35937;&#20013;&#23454;&#20363;&#21464;&#37327;&#8221;</p></td></tr></tbody></table></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="aop-api-advice"></a>7.3.&nbsp;Spring&#30340;&#36890;&#30693;API</h2></div></div><div></div></div><p>&#29616;&#22312;&#35753;&#25105;&#20204;&#30475;&#19968;&#19979;SPring AOP&#26159;&#24590;&#26679;&#22788;&#29702;&#36890;&#30693;&#30340;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-api-advice-lifecycle"></a>7.3.1.&nbsp;&#36890;&#30693;&#30340;&#29983;&#21629;&#21608;&#26399;</h3></div></div><div></div></div><p>&#27599;&#20010;&#36890;&#30693;&#37117;&#26159;&#19968;&#20010;Spring bean&#12290;&#19968;&#20010;&#36890;&#30693;&#23454;&#20363;&#26082;&#21487;&#20197;&#34987;&#25152;&#26377;&#34987;&#36890;&#30693;&#30340;&#23545;&#35937;&#20849;&#20139;&#65292;&#20063;&#21487;&#20197;&#34987;&#27599;&#20010;&#34987;&#36890;&#30693;&#23545;&#35937;&#29420;&#21344;&#12290;
        &#36825;&#26681;&#25454;&#35774;&#32622;<span class="emphasis"><em>&#31867;&#20849;&#20139;&#65288;per-class&#65289;</em></span>&#25110;<span class="emphasis"><em>&#22522;&#20110;&#23454;&#20363;&#65288;per-instance&#65289;</em></span>&#30340;&#21442;&#25968;&#26469;&#20915;&#23450;&#12290;</p><p>&#31867;&#20849;&#20139;&#36890;&#30693;&#32463;&#24120;&#20250;&#34987;&#29992;&#21040;&#12290;&#23427;&#24456;&#36866;&#21512;&#29992;&#20316;&#36890;&#29992;&#30340;&#36890;&#30693;&#20363;&#22914;&#20107;&#21153;&#36890;&#30693;&#22120;&#65288;advisor&#65289;&#12290;&#36825;&#20123;&#36890;&#30693;&#22120;&#19981;&#20381;&#36182;&#20110;&#20195;&#29702;&#23545;&#35937;&#30340;&#29366;&#24577;&#20063;&#19981;&#20250;&#21521;&#20195;&#29702;&#23545;&#35937;&#28155;&#21152;&#26032;&#30340;&#29366;&#24577;&#65307;
        &#23427;&#20204;&#20165;&#20165;&#22312;&#26041;&#27861;&#21644;&#21442;&#25968;&#19978;&#36215;&#20316;&#29992;&#12290;
        </p><p>&#22522;&#20110;&#23454;&#20363;&#30340;&#36890;&#30693;&#24456;&#36866;&#21512;&#29992;&#20316;&#23548;&#20837;&#22120;&#26469;&#25903;&#25345;&#28151;&#21512;&#31867;&#22411;&#65288;mixin&#65289;&#12290;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#36890;&#30693;&#21521;&#20195;&#29702;&#23545;&#35937;&#28155;&#21152;&#29366;&#24577;&#12290;</p><p>&#22312;&#21516;&#19968;&#20010;AOP&#20195;&#29702;&#37324;&#28151;&#21512;&#20351;&#29992;&#31867;&#20849;&#20139;&#21644;&#22522;&#20110;&#23454;&#20363;&#30340;&#36890;&#30693;&#26159;&#21487;&#33021;&#30340;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-api-advice-types"></a>7.3.2.&nbsp;Spring&#37324;&#30340;&#36890;&#30693;&#31867;&#22411;</h3></div></div><div></div></div><p>Spring&#33258;&#24102;&#20102;&#22810;&#31181;&#36890;&#30693;&#31867;&#22411;&#65292;&#32780;&#19988;&#23427;&#20204;&#20063;&#21487;&#20197;&#34987;&#25193;&#23637;&#26469;&#25903;&#25345;&#21508;&#31181;&#36890;&#30693;&#31867;&#22411;&#12290;&#35753;&#25105;&#20204;&#20808;&#30475;&#30475;&#22522;&#26412;&#27010;&#24565;&#21644;&#26631;&#20934;&#30340;&#36890;&#30693;&#31867;&#22411;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-api-advice-around"></a>7.3.2.1.&nbsp;&#25318;&#25130;&#29615;&#32469;&#36890;&#30693;</h4></div></div><div></div></div><p>&#22312;Spring&#20013;&#26368;&#22522;&#30784;&#30340;&#36890;&#30693;&#31867;&#22411;&#26159;<span class="emphasis"><em>&#25318;&#25130;&#29615;&#32469;&#36890;&#30693;</em></span>&#65288;interception around advice&#65289;&#12290;</p><p>Spring&#37324;&#20351;&#29992;&#26041;&#27861;&#25318;&#25130;&#30340;&#29615;&#32469;&#36890;&#30693;&#20860;&#23481;AOP&#32852;&#30431;&#25509;&#21475;&#12290;&#23454;&#29616;&#29615;&#32469;&#36890;&#30693;&#30340;MethodInterceptor&#24212;&#24403;&#23454;&#29616;&#19979;&#38754;&#30340;&#25509;&#21475;&#65306;</p><pre class="programlisting">public interface MethodInterceptor extends Interceptor {
                
                Object invoke(MethodInvocation invocation) throws Throwable;
            }</pre><p><tt class="methodname">invoke()</tt>&#26041;&#27861;&#30340;<tt class="classname">MethodInvocation</tt>&#21442;&#25968;&#26292;&#38706;&#20102;&#34987;&#35843;&#29992;&#30340;&#26041;&#27861;&#65307;
                &#30446;&#26631;&#36830;&#25509;&#28857;&#65307;AOP&#20195;&#29702;&#20197;&#21450;&#20256;&#36882;&#32473;&#26041;&#27861;&#30340;&#21442;&#25968;&#12290;<tt class="methodname">invoke()</tt>&#26041;&#27861;&#24212;&#35813;&#36820;&#22238;&#35843;&#29992;&#30340;&#32467;&#26524;&#65306;&#21363;&#36830;&#25509;&#28857;&#30340;&#36820;&#22238;&#20540;&#12290;
            </p><p>&#19968;&#20010;&#31616;&#21333;&#30340;<tt class="classname">MethodInterceptor</tt>&#23454;&#29616;&#30475;&#36215;&#26469;&#20687;&#19979;&#38754;&#36825;&#26679;&#65306;</p><pre class="programlisting">public class DebugInterceptor implements MethodInterceptor {
                
                public Object invoke(MethodInvocation invocation) throws Throwable {
                System.out.println("Before: invocation=[" + invocation + "]");
                Object rval = invocation.proceed();
                System.out.println("Invocation returned");
                return rval;
                }
            }</pre><p>&#27880;&#24847;&#23545;MethodInvocation&#20013;<tt class="methodname">proceed()</tt>&#26041;&#27861;&#30340;&#35843;&#29992;&#12290;
            &#36825;&#20010;&#26041;&#27861;&#32487;&#32493;&#36816;&#34892;&#25351;&#21521;&#36830;&#25509;&#28857;&#30340;&#25318;&#25130;&#22120;&#38142;&#24182;&#36820;&#22238;proceed()&#30340;&#32467;&#26524;&#12290;&#22823;&#22810;&#25968;&#25318;&#25130;&#22120;&#20250;&#35843;&#29992;&#36825;&#20010;&#26041;&#27861;&#65292;&#36820;&#22238;&#19968;&#20010;&#20540;&#12290;
            &#28982;&#32780;&#65292;&#19968;&#20010;&#31867;&#20284;&#20219;&#24847;&#29615;&#32469;&#36890;&#30693;&#30340;MethodInterceptor&#65292;&#21487;&#20197;&#36820;&#22238;&#19968;&#20010;&#19981;&#21516;&#30340;&#20540;&#25110;&#32773;&#25243;&#20986;&#19968;&#20010;&#24322;&#24120;&#32780;&#19981;&#26159;&#35843;&#29992;proceed&#26041;&#27861;&#12290;
            &#20294;&#38500;&#38750;&#20320;&#26377;&#24456;&#22909;&#30340;&#29702;&#30001;&#65292;&#21542;&#21017;&#19981;&#35201;&#32771;&#34385;&#36825;&#26679;&#20570;&#65281;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>MethodInterceptor&#25552;&#20379;&#20102;&#19982;&#20854;&#23427;AOP&#32852;&#30431;&#20860;&#23481;&#23454;&#29616;&#30340;&#20114;&#25805;&#20316;&#24615;&#12290;&#26412;&#33410;&#30340;&#21097;&#19979;&#37096;&#20998;&#23558;&#35752;&#35770;&#20854;&#23427;&#30340;&#36890;&#30693;&#31867;&#22411;&#65292;
            	&#23427;&#20204;&#23454;&#29616;&#20102;&#36890;&#29992;&#30340;AOP&#27010;&#24565;&#65292;&#20294;&#26159;&#20197;&#19968;&#31181;Spring&#39118;&#26684;&#30340;&#26041;&#24335;&#26469;&#23454;&#29616;&#30340;&#12290;&#20351;&#29992;&#26368;&#36890;&#29992;&#30340;&#36890;&#30693;&#31867;&#22411;&#36824;&#26377;&#19968;&#20010;&#22909;&#22788;&#65292;
            	&#22266;&#23450;&#20351;&#29992;MethodInterceptor&#29615;&#32469;&#36890;&#30693;&#21487;&#20197;&#35753;&#20320;&#22312;&#20854;&#23427;&#30340;AOP&#26694;&#26550;&#37324;&#36816;&#34892;&#20320;&#25152;&#23450;&#21046;&#30340;&#20999;&#38754;&#12290;
            	&#35201;&#27880;&#24847;&#29616;&#22312;&#20999;&#20837;&#28857;&#36824;&#19981;&#33021;&#21644;&#20854;&#23427;&#26694;&#26550;&#36827;&#34892;&#20114;&#25805;&#20316;&#65292;AOP&#32852;&#30431;&#30446;&#21069;&#36824;&#27809;&#26377;&#23450;&#20041;&#20999;&#20837;&#28857;&#25509;&#21475;&#12290;</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-api-advice-before"></a>7.3.2.2.&nbsp;&#21069;&#32622;&#36890;&#30693;</h4></div></div><div></div></div><p>&#19968;&#20010;&#26356;&#31616;&#21333;&#30340;&#36890;&#30693;&#31867;&#22411;&#26159;<span class="bold"><b>&#21069;&#32622;&#36890;&#30693;</b></span>&#65288;before advice&#65289;&#12290;
            &#23427;&#19981;&#38656;&#35201;<tt class="literal">MethodInvocation</tt>&#23545;&#35937;&#65292;&#22240;&#20026;&#23427;&#21482;&#26159;&#22312;&#36827;&#20837;&#26041;&#27861;&#20043;&#21069;&#34987;&#35843;&#29992;&#12290;</p><p>&#21069;&#32622;&#36890;&#30693;&#30340;&#19968;&#20010;&#20027;&#35201;&#20248;&#28857;&#26159;&#23427;&#19981;&#38656;&#35201;&#35843;&#29992;<tt class="literal">proceed()</tt>&#26041;&#27861;&#65292;
            &#22240;&#27492;&#23601;&#19981;&#20250;&#21457;&#29983;&#26080;&#24847;&#38388;&#36816;&#34892;&#25318;&#25130;&#22120;&#38142;&#22833;&#36133;&#30340;&#24773;&#20917;&#12290;</p><p>&#19979;&#38754;&#26159;<tt class="literal">MethodBeforeAdvice</tt> &#25509;&#21475;&#12290;
            &#65288;Spring&#30340;API&#35774;&#35745;&#33021;&#22815;&#20026;&#31867;&#20013;&#30340;&#25104;&#21592;&#21464;&#37327;&#25552;&#20379;&#21069;&#32622;&#36890;&#30693;&#65292;&#34429;&#28982;&#36890;&#24120;&#23545;&#35937;&#20250;&#34987;&#24212;&#29992;&#20110;&#25104;&#21592;&#21464;&#37327;&#25318;&#25130;&#20043;&#19978;&#65292;&#20294;&#30475;&#36215;&#26469;Spring&#24182;&#19981;&#25171;&#31639;&#23454;&#29616;&#36825;&#20010;&#21151;&#33021;&#12290;&#65289;
            </p><pre class="programlisting">public interface MethodBeforeAdvice extends BeforeAdvice {
                
                void before(Method m, Object[] args, Object target) throws Throwable;
            }</pre><p>&#27880;&#24847;&#36820;&#22238;&#20540;&#30340;&#31867;&#22411;&#26159;<tt class="literal">void</tt>&#12290;&#21069;&#32622;&#36890;&#30693;&#21487;&#20197;&#22312;&#36830;&#25509;&#28857;&#25191;&#34892;&#20043;&#21069;&#25554;&#20837;&#33258;&#23450;&#20041;&#34892;&#20026;&#65292;&#20294;&#26159;&#19981;&#33021;&#20462;&#25913;&#36830;&#25509;&#28857;&#30340;&#36820;&#22238;&#20540;&#12290;
            &#22914;&#26524;&#19968;&#20010;&#21069;&#32622;&#36890;&#30693;&#25243;&#20986;&#24322;&#24120;&#65292;&#36825;&#23558;&#20013;&#27490;&#25318;&#25130;&#22120;&#38142;&#30340;&#36827;&#19968;&#27493;&#25191;&#34892;&#12290;&#24322;&#24120;&#23558;&#27839;&#30528;&#25318;&#25130;&#22120;&#38142;&#21521;&#22238;&#20256;&#25773;&#12290;
            &#22914;&#26524;&#24322;&#24120;&#26159;&#38750;&#24378;&#21046;&#26816;&#26597;&#30340;&#65288;unchecked&#65289;&#25110;&#32773;&#24050;&#32463;&#34987;&#21253;&#21547;&#22312;&#34987;&#35843;&#29992;&#26041;&#27861;&#30340;throws&#22768;&#26126;&#20013;&#65292;&#23427;&#23558;&#34987;&#30452;&#25509;&#36820;&#22238;&#32473;&#23458;&#25143;&#31471;&#65307;
            &#21542;&#21017;&#23427;&#23558;&#30001;AOP&#20195;&#29702;&#21253;&#35013;&#22312;&#19968;&#20010;&#38750;&#24378;&#21046;&#26816;&#26597;&#24322;&#24120;&#20013;&#36820;&#22238;&#12290;</p><p>&#36825;&#26159;&#19968;&#20010;Spring&#21069;&#32622;&#36890;&#30693;&#30340;&#20363;&#23376;&#65292;&#23427;&#35745;&#31639;&#25152;&#26377;&#26041;&#27861;&#34987;&#35843;&#29992;&#30340;&#27425;&#25968;&#65306;</p><pre class="programlisting">public class CountingBeforeAdvice implements MethodBeforeAdvice {
                
                private int count;
                
                public void before(Method m, Object[] args, Object target) throws Throwable {
                ++count;
                }
                
                public int getCount() { 
                return count; 
                }
            }</pre><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Tip" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Tip]" src="tip.png"></td><th align="left">Tip</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#21069;&#32622;&#36890;&#30693;&#21487;&#20197;&#21644;&#20219;&#20309;&#20999;&#20837;&#28857;&#19968;&#36215;&#20351;&#29992;&#12290;</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-api-advice-throws"></a>7.3.2.3.&nbsp;&#24322;&#24120;&#36890;&#30693;</h4></div></div><div></div></div><p>&#22914;&#26524;&#36830;&#25509;&#28857;&#25243;&#20986;&#24322;&#24120;&#65292;<span class="bold"><b>&#24322;&#24120;&#36890;&#30693;&#65288;throws advice&#65289;</b></span>&#23558;&#22312;&#36830;&#25509;&#28857;&#36820;&#22238;&#21518;&#34987;&#35843;&#29992;&#12290;
                Spring&#25552;&#20379;&#31867;&#22411;&#26816;&#26597;&#30340;&#24322;&#24120;&#36890;&#30693;&#65288;typed throws advice&#65289;&#65292;&#36825;&#24847;&#21619;&#30528;<tt class="literal">org.springframework.aop.ThrowsAdvice</tt>&#25509;&#21475;&#19981;&#21253;&#21547;&#20219;&#20309;&#26041;&#27861;&#65306;
                &#23427;&#21482;&#26159;&#19968;&#20010;&#26631;&#35760;&#25509;&#21475;&#29992;&#26469;&#26631;&#35782;&#25152;&#32473;&#23545;&#35937;&#23454;&#29616;&#20102;&#19968;&#20010;&#25110;&#32773;&#22810;&#20010;&#38024;&#23545;&#29305;&#23450;&#31867;&#22411;&#30340;&#24322;&#24120;&#36890;&#30693;&#26041;&#27861;&#12290;&#36825;&#20123;&#26041;&#27861;&#24212;&#24403;&#28385;&#36275;&#19979;&#38754;&#30340;&#26684;&#24335;: </p><pre class="programlisting">afterThrowing([Method, args, target], subclassOfThrowable) </pre><p>&#21482;&#26377;&#26368;&#21518;&#19968;&#20010;&#21442;&#25968;&#26159;&#24517;&#39035;&#30340;&#12290;&#26681;&#25454;&#24322;&#24120;&#36890;&#30693;&#26041;&#27861;&#23545;&#26041;&#27861;&#21450;&#21442;&#25968;&#30340;&#38656;&#27714;&#65292;&#26041;&#27861;&#30340;&#31614;&#21517;&#21487;&#20197;&#26377;&#19968;&#20010;&#25110;&#32773;&#22235;&#20010;&#21442;&#25968;&#12290;
            &#19979;&#38754;&#26159;&#19968;&#20123;&#24322;&#24120;&#36890;&#30693;&#30340;&#20363;&#23376;&#12290;</p><p>&#24403;&#19968;&#20010;<tt class="literal">RemoteException</tt>&#65288;&#21253;&#25324;&#23427;&#30340;&#23376;&#31867;&#65289;&#34987;&#25243;&#20986;&#26102;&#65292;&#19979;&#38754;&#30340;&#36890;&#30693;&#20250;&#34987;&#35843;&#29992;&#65306;</p><pre class="programlisting">public class RemoteThrowsAdvice implements ThrowsAdvice {

    public void afterThrowing(RemoteException ex) throws Throwable {
                <i class="lineannotation"><span class="lineannotation">// Do something with remote exception</span></i>
    }
            }</pre><p>&#24403;&#19968;&#20010;<span class="emphasis"><em>ServletException</em></span>&#34987;&#25243;&#20986;&#65292;&#19979;&#38754;&#30340;&#36890;&#30693;&#23558;&#34987;&#35843;&#29992;&#12290;
            &#21644;&#19978;&#38754;&#30340;&#36890;&#30693;&#19981;&#21516;&#65292;&#23427;&#22768;&#26126;&#20102;4&#20010;&#21442;&#25968;&#65292;&#22240;&#27492;&#23427;&#21487;&#20197;&#35775;&#38382;&#34987;&#35843;&#29992;&#30340;&#26041;&#27861;&#65292;&#26041;&#27861;&#30340;&#21442;&#25968;&#20197;&#21450;&#30446;&#26631;&#23545;&#35937;&#65306;</p><pre class="programlisting">public class ServletThrowsAdviceWithArguments implements ThrowsAdvice {

    public void afterThrowing(Method m, Object[] args, Object target, ServletException ex) {
                <i class="lineannotation"><span class="lineannotation">// Do something with all arguments</span></i>
    }
            }</pre><p>&#26368;&#21518;&#19968;&#20010;&#20363;&#23376;&#35828;&#26126;&#24590;&#26679;&#22312;&#21516;&#19968;&#20010;&#31867;&#37324;&#20351;&#29992;&#20004;&#20010;&#26041;&#27861;&#26469;&#22788;&#29702;
            <tt class="literal">RemoteException</tt>&#21644;<tt class="literal">ServletException</tt>&#12290;&#21487;&#20197;&#22312;&#19968;&#20010;&#31867;&#37324;&#32452;&#21512;&#20219;&#24847;&#25968;&#37327;&#30340;&#24322;&#24120;&#36890;&#30693;&#26041;&#27861;&#12290;</p><pre class="programlisting">public static class CombinedThrowsAdvice implements ThrowsAdvice {
                
                public void afterThrowing(RemoteException ex) throws Throwable {
                // Do something with remote exception
                }
                
                public void afterThrowing(Method m, Object[] args, Object target, ServletException ex) {
                // Do something with all arguments
                }
            }</pre><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Tip" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Tip]" src="tip.png"></td><th align="left">Tip</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#24322;&#24120;&#36890;&#30693;&#21487;&#20197;&#21644;&#20219;&#20309;&#20999;&#20837;&#28857;&#19968;&#36215;&#20351;&#29992;&#12290;</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-api-advice-after-returning"></a>7.3.2.4.&nbsp;&#21518;&#32622;&#36890;&#30693;</h4></div></div><div></div></div><p>Spring&#20013;&#30340;&#21518;&#32622;&#36890;&#30693;&#65288;After Returning advice&#65289;&#24517;&#39035;&#23454;&#29616;
                <span class="emphasis"><em>org.springframework.aop.AfterReturningAdvice</em></span>
            &#25509;&#21475;&#65292;&#20687;&#19979;&#38754;&#26174;&#31034;&#30340;&#37027;&#26679;&#65306;</p><pre class="programlisting">public interface AfterReturningAdvice extends Advice {
                
                void afterReturning(Object returnValue, Method m, Object[] args, Object target) 
                throws Throwable;
            }</pre><p>&#21518;&#32622;&#36890;&#30693;&#21487;&#20197;&#35775;&#38382;&#36820;&#22238;&#20540;&#65288;&#20294;&#19981;&#33021;&#36827;&#34892;&#20462;&#25913;&#65289;&#65292;&#34987;&#35843;&#29992;&#26041;&#27861;&#65292;&#26041;&#27861;&#21442;&#25968;&#20197;&#21450;&#30446;&#26631;&#23545;&#35937;&#12290;</p><p>&#19979;&#38754;&#30340;&#21518;&#32622;&#36890;&#30693;&#35745;&#31639;&#25152;&#26377;&#36816;&#34892;&#25104;&#21151;&#65288;&#27809;&#26377;&#25243;&#20986;&#24322;&#24120;&#65289;&#30340;&#26041;&#27861;&#35843;&#29992;&#65306;</p><pre class="programlisting">public class CountingAfterReturningAdvice implements AfterReturningAdvice {
                
                private int count;
                
                public void afterReturning(Object returnValue, Method m, Object[] args, Object target)
                throws Throwable {
                ++count;
                }
                
                public int getCount() {
                return count;
                }
            }</pre><p>&#36825;&#20010;&#36890;&#30693;&#19981;&#25913;&#21464;&#25191;&#34892;&#36335;&#24452;&#12290;&#22914;&#26524;&#25243;&#20986;&#24322;&#24120;&#65292;&#23427;&#23558;&#27839;&#30528;&#25318;&#25130;&#22120;&#38142;&#34987;&#25243;&#20986;&#32780;&#19981;&#26159;&#36820;&#22238;&#34987;&#35843;&#29992;&#26041;&#27861;&#30340;&#25191;&#34892;&#32467;&#26524;&#12290;</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Tip" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Tip]" src="tip.png"></td><th align="left">Tip</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#21518;&#32622;&#36890;&#30693;&#21487;&#20197;&#21644;&#20219;&#20309;&#20999;&#20837;&#28857;&#19968;&#36215;&#20351;&#29992;&#12290;</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-api-advice-introduction"></a>7.3.2.5.&nbsp;&#24341;&#20837;&#36890;&#30693;</h4></div></div><div></div></div><p>Spring &#25226;&#24341;&#20837;&#36890;&#30693;&#65288;introduction advice&#65289;&#20316;&#20026;&#19968;&#31181;&#29305;&#27530;&#30340;&#25318;&#25130;&#36890;&#30693;&#36827;&#34892;&#22788;&#29702;&#12290;</p><p>&#24341;&#20837;&#36890;&#30693;&#38656;&#35201;&#19968;&#20010;<tt class="literal">IntroductionAdvisor</tt>,
            &#21644;&#19968;&#20010;<tt class="literal">IntroductionInterceptor</tt>, &#21518;&#32773;&#23454;&#29616;&#19979;&#38754;&#30340;&#25509;&#21475;&#65306;</p><pre class="programlisting">public interface IntroductionInterceptor extends MethodInterceptor {
                
                boolean implementsInterface(Class intf);
            }</pre><p>&#32487;&#25215;&#33258;AOP&#32852;&#30431;<tt class="literal">MethodInterceptor</tt> &#25509;&#21475;&#30340;<tt class="literal">invoke() </tt>&#26041;&#27861;&#65292;&#24517;&#39035;&#30830;&#20445;&#23454;&#29616;&#24341;&#20837;&#65306;
            &#20063;&#23601;&#26159;&#35828;&#65292;&#22914;&#26524;&#34987;&#35843;&#29992;&#30340;&#26041;&#27861;&#20301;&#20110;&#19968;&#20010;&#24050;&#32463;&#34987;&#24341;&#20837;&#25509;&#21475;&#37324;&#65292;&#36825;&#20010;&#24341;&#20837;&#25318;&#25130;&#22120;&#23558;&#36127;&#36131;&#23436;&#25104;&#23545;&#36825;&#20010;&#26041;&#27861;&#30340;&#35843;&#29992;--&#22240;&#20026;&#23427;&#19981;&#33021;&#35843;&#29992;<tt class="literal">proceed()</tt>&#26041;&#27861;&#12290;</p><p>&#24341;&#20837;&#36890;&#30693;&#19981;&#33021;&#21644;&#20219;&#20309;&#20999;&#20837;&#28857;&#19968;&#36215;&#20351;&#29992;&#65292;&#22240;&#20026;&#23427;&#26159;&#24212;&#29992;&#22312;&#31867;&#32423;&#21035;&#32780;&#19981;&#26159;&#26041;&#27861;&#32423;&#21035;&#12290;
                &#20320;&#21482;&#33021;&#36890;&#36807;<tt class="literal">IntroductionAdvisor</tt>&#26469;&#20351;&#29992;&#24341;&#20837;&#36890;&#30693;&#65292;&#36825;&#20010;&#25509;&#21475;&#21253;&#25324;&#19979;&#38754;&#30340;&#26041;&#27861;&#65306;
            </p><pre class="programlisting">public interface IntroductionAdvisor extends Advisor, IntroductionInfo {
                
                ClassFilter getClassFilter();
                
                void validateInterfaces() throws IllegalArgumentException;
                }
                
                public interface IntroductionInfo {
                
                Class[] getInterfaces();
            }</pre><p>&#36825;&#37324;&#27809;&#26377;<tt class="interfacename">MethodMatcher</tt>&#25509;&#21475;&#65292;&#22240;&#27492;&#20063;&#23601;&#27809;&#26377;
            <tt class="interfacename">Pointcut</tt>&#19982;&#24341;&#20837;&#36890;&#30693;&#30456;&#20851;&#32852;&#12290;&#36825;&#37324;&#21482;&#36827;&#34892;&#31867;&#36807;&#28388;&#12290;</p><p><tt class="literal">getInterfaces()</tt>&#26041;&#27861;&#36820;&#22238;&#36825;&#20010;&#36890;&#30693;&#22120;&#25152;&#24341;&#20837;&#30340;&#25509;&#21475;&#12290;</p><p><tt class="literal">validateInterfaces()</tt>&#26041;&#27861;&#23558;&#34987;&#20869;&#37096;&#20351;&#29992;&#26469;&#26597;&#30475;&#34987;&#24341;&#20837;&#30340;&#25509;&#21475;&#26159;&#21542;&#33021;&#22815;&#30001;&#37197;&#32622;&#30340;<tt class="literal">IntroductionInterceptor</tt>&#26469;&#23454;&#29616;&#12290;</p><p>&#35753;&#25105;&#20204;&#30475;&#30475;&#20174;Spring&#27979;&#35797;&#38598;&#37324;&#25343;&#26469;&#30340;&#19968;&#20010;&#31616;&#21333;&#20363;&#23376;&#12290;&#35753;&#25105;&#20204;&#20551;&#35774;&#25105;&#20204;&#24076;&#26395;&#25226;&#19979;&#38754;&#30340;&#25509;&#21475;&#24341;&#20837;&#32473;&#19968;&#20010;&#25110;&#32773;&#22810;&#20010;&#23545;&#35937;&#65306;</p><p>
                </p><pre class="programlisting">public interface Lockable {
                    void lock();
                    void unlock();
                    boolean locked();
                }</pre><p>
            </p><p>&#36825;&#37324;&#25551;&#36848;&#20102;&#19968;&#20010;<span class="bold"><b>&#28151;&#21512;&#31867;&#22411;</b></span>&#65288;mixin&#65289;&#12290;&#25105;&#20204;&#24076;&#26395;&#19981;&#35770;&#21407;&#26412;&#23545;&#35937;&#26159;&#20160;&#20040;&#31867;&#22411;&#65292;&#37117;&#25226;&#36825;&#20010;&#34987;&#36890;&#30693;&#23545;&#35937;&#36716;&#25442;&#20026;Lockable&#25509;&#21475;&#24182;&#21487;&#20197;&#35843;&#29992;lock&#21644;unlock &#26041;&#27861;&#12290;
                &#22914;&#26524;&#25105;&#20204;&#35843;&#29992;lock() &#26041;&#27861;&#65292;&#25105;&#20204;&#24076;&#26395;&#25152;&#26377;&#30340;setter &#26041;&#27861;&#25243;&#20986;&#19968;&#20010;<tt class="literal">LockedException</tt>&#24322;&#24120;&#12290;
            &#36825;&#26679;&#25105;&#20204;&#23601;&#21487;&#20197;&#21152;&#20837;&#19968;&#20010;&#26041;&#38754;&#26469;&#30830;&#20445;&#23545;&#35937;&#22312;&#24471;&#21040;&#36890;&#30693;&#20043;&#21069;&#26159;&#19981;&#21487;&#20462;&#25913;&#30340;&#65306;&#19968;&#20010;&#20851;&#20110;AOP&#30340;&#22909;&#20363;&#23376;&#12290;</p><p>&#39318;&#20808;&#65292;&#25105;&#20204;&#38656;&#35201;&#19968;&#20010;<tt class="literal">IntroductionInterceptor</tt>&#26469;&#20570;&#20123;&#31895;&#27963;&#12290;&#36825;&#37324;&#65292;&#25105;&#20204;&#25193;&#23637;&#20102;
                <tt class="literal">org.springframework.aop.support.DelegatingIntroductionInterceptor</tt>&#36825;&#20010;&#26041;&#20415;&#30340;&#31867;&#12290;
                &#25105;&#20204;&#33021;&#22815;&#30452;&#25509;&#23454;&#29616;IntroductionInterceptor&#25509;&#21475;&#65292;
                &#20294;&#22312;&#36825;&#20010;&#20363;&#23376;&#37324;&#20351;&#29992;<tt class="literal">DelegatingIntroductionInterceptor</tt>&#26159;&#26368;&#22909;&#30340;&#36873;&#25321;&#12290;
            </p><p>
                <tt class="literal">DelegatingIntroductionInterceptor</tt>&#35774;&#35745;&#20026;&#25226;&#19968;&#20010;&#24341;&#20837;&#25176;&#31649;&#32473;&#19968;&#20010;&#23454;&#29616;&#36825;&#20010;&#25509;&#21475;&#30340;&#31867;&#65292;
                &#36825;&#36890;&#36807;&#38544;&#34255;&#25318;&#25130;&#30340;&#20351;&#29992;&#26469;&#23454;&#29616;&#12290;&#25176;&#31649;&#21487;&#20197;&#34987;&#35774;&#32622;&#21040;&#20219;&#20309;&#20855;&#26377;&#26500;&#36896;&#22120;&#26041;&#27861;&#30340;&#31867;&#65307;&#36825;&#37324;&#20351;&#29992;&#32570;&#30465;&#25176;&#31649;(&#21363;&#20351;&#29992;&#26080;&#21442;&#26500;&#36896;&#22120;)&#12290;
                &#22240;&#27492;&#22312;&#19979;&#38754;&#36825;&#20010;&#20363;&#23376;&#37324;&#65292;&#25176;&#31649;&#32773;&#23558;&#26159;<tt class="literal">DelegatingIntroductionInterceptor</tt>&#30340;&#23376;&#31867;
                <tt class="literal">LockMixin</tt>&#12290;
                &#24403;&#19968;&#20010;&#25176;&#31649;&#23454;&#29616;&#34987;&#25552;&#20379;&#65292;<tt class="literal">DelegatingIntroductionInterceptor</tt>&#23454;&#20363;&#23558;&#26597;&#25214;&#25176;&#31649;&#25152;&#23454;&#29616;&#30340;&#25152;&#26377;&#25509;&#21475;
                &#65288;&#38500;&#20102;IntroductionInterceptor&#20043;&#22806;&#65289;&#65292;&#24182;&#20026;&#36825;&#20123;&#25509;&#21475;&#30340;&#20171;&#32461;&#25552;&#20379;&#25903;&#25345;&#12290;&#23376;&#31867;&#20363;&#22914;<tt class="literal">LockMixin</tt>
                &#21487;&#20197;&#35843;&#29992;<tt class="literal">suppressInterface(Class intf) </tt>&#26041;&#27861;&#26469;&#31105;&#27490;&#37027;&#20123;&#19981;&#24212;&#35813;&#34987;&#26292;&#38706;&#30340;&#25509;&#21475;&#12290;
                &#28982;&#32780;&#65292;&#19981;&#35770;<tt class="literal">IntroductionInterceptor</tt>&#25903;&#25345;&#22810;&#23569;&#25509;&#21475;&#65292;
                <tt class="literal">IntroductionAdvisor</tt>&#30340;&#20351;&#29992;&#23558;&#25511;&#21046;&#21738;&#20123;&#25509;&#21475;&#30495;&#27491;&#34987;&#26292;&#38706;&#12290;
                &#19968;&#20010;&#34987;&#24341;&#20837;&#30340;&#25509;&#21475;&#23558;&#35206;&#30422;&#30446;&#26631;&#23545;&#35937;&#23454;&#29616;&#30340;&#30456;&#21516;&#25509;&#21475;&#12290;
            </p><p>&#36825;&#26679;LockMixin&#23601;&#32487;&#25215;&#20102;<tt class="literal">DelegatingIntroductionInterceptor</tt>&#24182;&#23454;&#29616;&#20102;Lockable&#25509;&#21475;&#12290;
            &#36825;&#37324;&#29238;&#31867;&#20250;&#33258;&#21160;&#36873;&#25321;Lockable&#25509;&#21475;&#24182;&#25552;&#20379;&#24341;&#20837;&#25903;&#25345;&#65292;&#22240;&#27492;&#25105;&#20204;&#19981;&#38656;&#35201;&#37197;&#32622;&#23427;&#12290;&#29992;&#36825;&#31181;&#26041;&#27861;&#25105;&#20204;&#33021;&#22815;&#24341;&#20837;&#20219;&#24847;&#25968;&#37327;&#30340;&#25509;&#21475;&#12290;
            </p><p>&#27880;&#24847;<tt class="literal">locked</tt>&#23454;&#20363;&#21464;&#37327;&#30340;&#29992;&#27861;&#12290;&#36825;&#26377;&#25928;&#22320;&#21521;&#30446;&#26631;&#23545;&#35937;&#22686;&#21152;&#20102;&#39069;&#22806;&#29366;&#24577;&#12290;</p><p>
                </p><pre class="programlisting">public class LockMixin extends DelegatingIntroductionInterceptor 
                    implements Lockable {
                    
                    private boolean locked;
                    
                    public void lock() {
                    this.locked = true;
                    }
                    
                    public void unlock() {
                    this.locked = false;
                    }
                    
                    public boolean locked() {
                    return this.locked;
                    }
                    
                    public Object invoke(MethodInvocation invocation) throws Throwable {
                    if (locked() &amp;&amp; invocation.getMethod().getName().indexOf("set") == 0)
                    throw new LockedException();
                    return super.invoke(invocation);
                    }
                    
                }</pre><p>
            </p><p>&#35206;&#30422;<tt class="literal">invoke()</tt>&#26041;&#27861;&#36890;&#24120;&#26159;&#19981;&#24517;&#35201;&#30340;&#65306;<tt class="literal">DelegatingIntroductionInterceptor</tt>&#23601;&#24050;&#32463;&#22815;&#29992;&#20102;&#65288;&#22914;&#26524;&#19968;&#20010;&#26041;&#27861;&#34987;&#24341;&#20837;&#65292;&#36825;&#20010;&#23454;&#29616;&#23558;&#35843;&#29992;&#23454;&#38469;&#30340;&#25176;&#31649;&#26041;&#27861;&#65292;&#21542;&#21017;&#23427;&#23558;&#30452;&#25509;&#22788;&#29702;&#36830;&#25509;&#28857;&#65289;&#12290;&#22312;&#24403;&#21069;&#36825;&#20010;&#20363;&#23376;&#37324;&#65292;&#25105;&#20204;&#38656;&#35201;&#22686;&#21152;&#19968;&#20010;&#26816;&#26597;&#65306;&#22914;&#26524;&#22788;&#20110;&#21152;&#38145;&#65288;locked&#65289;&#29366;&#24577;&#65292;&#27809;&#26377;setter&#26041;&#27861;&#21487;&#20197;&#34987;&#35843;&#29992;&#12290;
            </p><p>&#24341;&#20837;&#36890;&#30693;&#22120;&#30340;&#35201;&#27714;&#26159;&#24456;&#31616;&#21333;&#30340;&#12290;&#23427;&#30340;&#20840;&#37096;&#35201;&#27714;&#21482;&#26159;&#20445;&#25345;&#19968;&#20010;&#29305;&#23450;&#30340;<tt class="literal">LockMixin</tt>&#23454;&#20363;&#65292;
                &#24182;&#35828;&#26126;&#34987;&#36890;&#30693;&#30340;&#25509;&#21475; - &#22312;&#36825;&#20010;&#20363;&#23376;&#37324;&#65292;&#21482;&#26377;&#19968;&#20010;<tt class="literal">Lockable</tt>&#25509;&#21475;&#12290;
                &#26356;&#22797;&#26434;&#30340;&#20363;&#23376;&#20013;&#20063;&#35768;&#20250;&#24341;&#29992;&#19968;&#20010;&#24341;&#20837;&#25318;&#25130;&#22120;&#30340;&#65288;&#21487;&#20197;&#34987;&#23450;&#20041;&#20026;&#19968;&#20010;&#21407;&#22411;&#65289;&#65306;
                &#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#19981;&#38656;&#35201;&#23545;<tt class="literal">LockMixin</tt>&#36827;&#34892;&#30456;&#20851;&#37197;&#32622;&#65292;
                &#22240;&#27492;&#25105;&#20204;&#21487;&#20197;&#31616;&#21333;&#30340;&#29992;<tt class="literal">new</tt>&#20851;&#38190;&#23383;&#26469;&#21019;&#24314;&#23427;&#12290;
            </p><p>
                </p><pre class="programlisting">public class LockMixinAdvisor extends DefaultIntroductionAdvisor {
                    
                    public LockMixinAdvisor() {
                    super(new LockMixin(), Lockable.class);
                    }
                }</pre><p>
            </p><p>&#25105;&#20204;&#21487;&#20197;&#24456;&#23481;&#26131;&#24212;&#29992;&#36825;&#20010;&#36890;&#30693;&#22120;&#65306;&#23427;&#19981;&#38656;&#35201;&#37197;&#32622;&#12290;
                &#65288;&#28982;&#32780;&#65292;&#19979;&#38754;<span class="emphasis"><em>&#26159;</em></span>&#24517;&#39035;&#35760;&#20303;&#30340;&#65306;&#19981;&#21487;&#20197;&#22312;&#27809;&#26377;<span class="emphasis"><em>IntroductionAdvisor</em></span>&#30340;&#24773;&#20917;&#19979;&#20351;&#29992;<tt class="literal">IntroductionInterceptor</tt>&#12290;&#65289;
                &#36890;&#24120;&#30340;&#24341;&#20837;&#36890;&#30693;&#22120;&#24517;&#39035;&#26159;&#22522;&#20110;&#23454;&#20363;&#30340;&#65292;&#22240;&#20026;&#23427;&#26159;&#26377;&#29366;&#24577;&#30340;&#12290;&#22240;&#27492;&#65292;&#23545;&#20110;&#27599;&#20010;&#34987;&#36890;&#30693;&#23545;&#35937;&#25105;&#20204;&#38656;&#35201;&#19968;&#20010;&#19981;&#21516;
                &#23454;&#20363;&#30340;<tt class="literal">LockMixinAdvisor</tt>&#21644;<tt class="literal">LockMixin</tt>&#12290;
                &#36825;&#31181;&#24773;&#20917;&#19979;&#36890;&#30693;&#22120;&#20445;&#23384;&#20102;&#34987;&#36890;&#30693;&#23545;&#35937;&#30340;&#37096;&#20998;&#29366;&#24577;&#12290;
            </p><p>
                &#25105;&#20204;&#33021;&#22815;&#36890;&#36807;&#20351;&#29992;<tt class="literal">Advised.addAdvisor() </tt>&#30340;&#32534;&#31243;&#26041;&#24335;&#26469;&#24212;&#29992;&#36890;&#30693;&#22120;&#65292;&#25110;&#32773;&#20687;&#20854;&#23427;&#36890;&#30693;&#22120;&#37027;&#26679;&#65288;&#20063;&#26159;&#25512;&#33616;&#30340;&#26041;&#24335;&#65289;&#22312;XML&#37324;&#36827;&#34892;&#37197;&#32622;&#12290;&#20840;&#37096;&#30340;&#20195;&#29702;&#21019;&#24314;&#36873;&#25321;&#65288;&#21253;&#25324;&#8220;&#33258;&#21160;&#20195;&#29702;&#21019;&#24314;&#22120;&#8221;&#65289;&#23558;&#22312;&#19979;&#38754;&#36827;&#34892;&#35752;&#35770;&#65292;
                &#30475;&#30475;&#22914;&#20309;&#27491;&#30830;&#22320;&#22788;&#29702;&#24341;&#20837;&#21644;&#26377;&#29366;&#24577;&#28151;&#21512;&#31867;&#22411;&#12290;
            </p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="aop-api-advisor"></a>7.4.&nbsp;Spring&#37324;&#30340;Advisor API</h2></div></div><div></div></div><p>&#22312;Spring&#37324;&#65292;&#19968;&#20010;Advisor&#26159;&#19968;&#20010;&#20165;&#20165;&#21253;&#21547;&#19968;&#20010;&#36890;&#30693;&#23545;&#35937;&#21644;&#19982;&#20043;&#20851;&#32852;&#30340;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#30340;&#20999;&#38754;&#12290;</p><p>&#38500;&#20102;&#24341;&#20837;&#36825;&#31181;&#29305;&#27530;&#24418;&#24335;&#65292;&#20219;&#20309;&#36890;&#30693;&#22120;&#65288;advisor&#65289;&#37117;&#21487;&#20197;&#21644;&#20219;&#20309;&#36890;&#30693;&#19968;&#36215;&#24037;&#20316;&#12290;
        <tt class="literal">org.springframework.aop.support.DefaultPointcutAdvisor</tt>&#26159;&#26368;&#24120;&#29992;&#30340;&#36890;&#30693;&#22120;&#31867;&#12290;&#20363;&#22914;&#65292;&#23427;&#21487;&#20197;&#21644;
        <tt class="literal">MethodInterceptor</tt>&#65292;<tt class="literal">BeforeAdvice</tt>&#25110;&#32773;
    <tt class="literal">ThrowsAdvice</tt>&#19968;&#36215;&#20351;&#29992;&#12290;</p><p>&#22312;Spring&#37324;&#26377;&#21487;&#33021;&#22312;&#21516;&#19968;&#20010;AOP&#20195;&#29702;&#37324;&#28151;&#21512;&#36890;&#30693;&#22120;&#21644;&#36890;&#30693;&#31867;&#22411;&#12290;
    &#20363;&#22914;&#65292;&#20320;&#21487;&#20197;&#22312;&#19968;&#20010;&#20195;&#29702;&#37197;&#32622;&#37324;&#20351;&#29992;&#19968;&#20010;&#25318;&#25130;&#29615;&#32469;&#36890;&#30693;&#65292;&#19968;&#20010;&#24322;&#24120;&#36890;&#30693;&#21644;&#19968;&#20010;&#21069;&#32622;&#36890;&#30693;&#65306;Spring&#23558;&#36127;&#36131;&#33258;&#21160;&#21019;&#24314;&#25152;&#38656;&#30340;&#25318;&#25130;&#22120;&#38142;&#12290;
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="aop-pfb"></a>7.5.&nbsp;&#20351;&#29992;ProxyFactoryBean&#21019;&#24314;AOP&#20195;&#29702;</h2></div></div><div></div></div><p>&#22914;&#26524;&#20320;&#27491;&#22312;&#20351;&#29992;Spring IoC&#23481;&#22120;&#65288;&#21363;ApplicationContext&#25110;BeanFactory&#65289;&#26469;&#31649;&#29702;&#20320;&#30340;&#19994;&#21153;&#23545;&#35937;--&#36825;&#27491;&#26159;&#20320;&#24212;&#35813;&#20570;&#30340;--&#20320;&#20063;&#35768;&#20250;&#24819;&#35201;&#20351;&#29992;Spring&#20013;&#20851;&#20110;AOP&#30340;FactoryBean&#12290;
    &#65288;&#35760;&#20303;&#20351;&#29992;&#24037;&#21378;bean&#24341;&#20837;&#19968;&#20010;&#38388;&#25509;&#23618;&#20043;&#21518;&#65292;&#25105;&#20204;&#23601;&#21487;&#20197;&#21019;&#24314;&#19981;&#21516;&#31867;&#22411;&#30340;&#23545;&#35937;&#20102;&#65289;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>Spring 2.0&#30340;AOP&#25903;&#25345;&#20063;&#22312;&#24213;&#23618;&#20351;&#29992;&#24037;&#21378;bean&#12290;</p></td></tr></tbody></table></div><p>&#22312;Spring&#37324;&#21019;&#24314;&#19968;&#20010;AOP&#20195;&#29702;&#30340;&#22522;&#26412;&#26041;&#27861;&#26159;&#20351;&#29992;<span class="emphasis"><em>org.springframework.aop.framework.ProxyFactoryBean</em></span>&#12290;
    &#36825;&#20010;&#31867;&#23545;&#24212;&#29992;&#30340;&#20999;&#20837;&#28857;&#21644;&#36890;&#30693;&#25552;&#20379;&#20102;&#23436;&#25972;&#30340;&#25511;&#21046;&#33021;&#21147;&#65288;&#21253;&#25324;&#23427;&#20204;&#30340;&#24212;&#29992;&#39034;&#24207;&#65289;&#12290;&#28982;&#32780;&#22914;&#26524;&#20320;&#19981;&#38656;&#35201;&#36825;&#31181;&#25511;&#21046;&#65292;&#20320;&#20250;&#21916;&#27426;&#26356;&#31616;&#21333;&#30340;&#26041;&#24335;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-pfb-1"></a>7.5.1.&nbsp;&#22522;&#30784;</h3></div></div><div></div></div><p>&#20687;&#20854;&#23427;&#30340;<tt class="literal">FactoryBean</tt>&#23454;&#29616;&#19968;&#26679;&#65292;<tt class="literal">ProxyFactoryBean</tt>&#24341;&#20837;&#20102;&#19968;&#20010;&#38388;&#25509;&#23618;&#12290;&#22914;&#26524;&#20320;&#23450;&#20041;&#19968;&#20010;&#21517;&#20026;<tt class="literal">foo</tt>&#30340;<tt class="literal">ProxyFactoryBean</tt>&#65292;
            &#24341;&#29992;<tt class="literal">foo</tt>&#30340;&#23545;&#35937;&#30475;&#21040;&#30340;&#23558;&#19981;&#26159;<tt class="literal">ProxyFactoryBean</tt>&#23454;&#20363;&#26412;&#36523;&#65292;&#32780;&#26159;&#19968;&#20010;<tt class="literal">ProxyFactoryBean</tt>&#23454;&#29616;&#37324;<tt class="literal">getObject() </tt>&#26041;&#27861;&#25152;&#21019;&#24314;&#30340;&#23545;&#35937;&#12290;
        &#36825;&#20010;&#26041;&#27861;&#23558;&#21019;&#24314;&#19968;&#20010;AOP&#20195;&#29702;&#65292;&#23427;&#21253;&#35013;&#20102;&#19968;&#20010;&#30446;&#26631;&#23545;&#35937;&#12290;</p><p>&#20351;&#29992;<tt class="literal">ProxyFactoryBean</tt>&#25110;&#32773;&#20854;&#23427;IoC&#30456;&#20851;&#31867;&#24102;&#26469;&#30340;&#26368;&#37325;&#35201;&#30340;&#22909;&#22788;&#20043;&#19968;&#23601;&#26159;&#21019;&#24314;AOP&#20195;&#29702;&#65292;&#36825;&#24847;&#21619;&#30528;&#36890;&#30693;&#21644;&#20999;&#20837;&#28857;&#20063;&#21487;&#20197;&#30001;IoC&#26469;&#31649;&#29702;&#12290;&#36825;&#26159;&#19968;&#20010;&#24378;&#22823;&#30340;&#21151;&#33021;&#24182;&#20351;&#24471;&#26576;&#20123;&#29305;&#23450;&#30340;&#35299;&#20915;&#26041;&#26696;&#25104;&#20026;&#21487;&#33021;&#65292;
            &#32780;&#36825;&#20123;&#29992;&#20854;&#23427;AOP&#26694;&#26550;&#24456;&#38590;&#20570;&#21040;&#12290;&#20363;&#22914;&#65292;&#19968;&#20010;&#36890;&#30693;&#20063;&#35768;&#26412;&#36523;&#20063;&#35201;&#24341;&#29992;&#24212;&#29992;&#31243;&#24207;&#23545;&#35937;&#65288;&#19981;&#20165;&#20165;&#26159;&#20854;&#23427;AOP&#26694;&#26550;&#20013;&#20063;&#21487;&#20197;&#35775;&#38382;&#30340;&#30446;&#26631;&#23545;&#35937;&#65289;&#65292;&#36825;&#20196;&#20320;&#21487;&#20197;&#20174;&#20381;&#36182;&#27880;&#23556;&#30340;&#21487;&#25300;&#25554;&#29305;&#24615;&#20013;&#33719;&#30410;&#12290;
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-pfb-2"></a>7.5.2.&nbsp;JavaBean&#23646;&#24615;</h3></div></div><div></div></div><p>
            &#36890;&#24120;&#24773;&#20917;&#19979;Spring&#25552;&#20379;&#20102;&#22823;&#22810;&#25968;&#30340;<tt class="interfacename">FactoryBean</tt>&#23454;&#29616;&#65292;<tt class="classname">ProxyFactoryBean</tt>&#31867;&#26412;&#36523;&#20063;&#26159;&#19968;&#20010;JavaBean&#12290;&#23427;&#30340;&#23646;&#24615;&#34987;&#29992;&#26469;&#65306;
        </p><div class="itemizedlist"><ul type="disc"><li><p>&#25351;&#23450;&#20320;&#24076;&#26395;&#20195;&#29702;&#30340;&#30446;&#26631;&#23545;&#35937;</p></li><li><p>&#25351;&#23450;&#26159;&#21542;&#20351;&#29992;CGLIB&#65288;&#26597;&#30475;&#19979;&#38754;&#21483;&#20570;<a href="#aop-pfb-proxy-types" title="7.5.3.&nbsp;&#22522;&#20110;JDK&#21644;CGLIB&#30340;&#20195;&#29702;">Section&nbsp;7.5.3, &#8220;&#22522;&#20110;JDK&#21644;CGLIB&#30340;&#20195;&#29702;&#8221;</a>&#30340;&#23567;&#33410;&#65289;&#12290;</p></li></ul></div><p>
            &#19968;&#20123;&#20027;&#35201;&#23646;&#24615;&#20174;<tt class="classname">org.springframework.aop.framework.ProxyConfig</tt>&#37324;&#32487;&#25215;&#19979;&#26469;&#65288;&#36825;&#20010;&#31867;&#26159;Spring&#37324;&#25152;&#26377;AOP&#20195;&#29702;&#24037;&#21378;&#30340;&#29238;&#31867;&#65289;&#12290;&#36825;&#20123;&#20027;&#35201;&#23646;&#24615;&#21253;&#25324;&#65306;
        </p><div class="itemizedlist"><ul type="disc"><li><p>
                    <tt class="literal">proxyTargetClass</tt>&#65306;&#36825;&#20010;&#23646;&#24615;&#20026;<tt class="literal">true</tt>&#26102;&#65292;&#30446;&#26631;&#31867;&#26412;&#36523;&#34987;&#20195;&#29702;&#32780;&#19981;&#26159;&#30446;&#26631;&#31867;&#30340;&#25509;&#21475;&#12290;&#22914;&#26524;&#36825;&#20010;&#23646;&#24615;&#20540;&#34987;&#35774;&#20026;<tt class="literal">true</tt>&#65292;CGLIB&#20195;&#29702;&#23558;&#34987;&#21019;&#24314;&#65288;&#21487;&#20197;&#21442;&#30475;&#19979;&#38754;&#21517;&#20026;<a href="#aop-pfb-proxy-types" title="7.5.3.&nbsp;&#22522;&#20110;JDK&#21644;CGLIB&#30340;&#20195;&#29702;">Section&nbsp;7.5.3, &#8220;&#22522;&#20110;JDK&#21644;CGLIB&#30340;&#20195;&#29702;&#8221;</a>&#30340;&#31456;&#33410;&#65289;&#12290;
                </p></li><li><p>
                    <tt class="literal">optimize</tt>&#65306;&#29992;&#26469;&#25511;&#21046;<span class="emphasis"><em>&#36890;&#36807;CGLIB&#21019;&#24314;</em></span>&#30340;&#20195;&#29702;&#26159;&#21542;&#20351;&#29992;&#28608;&#36827;&#30340;&#20248;&#21270;&#31574;&#30053;&#12290;
                    &#38500;&#38750;&#23436;&#20840;&#20102;&#35299;AOP&#20195;&#29702;&#22914;&#20309;&#22788;&#29702;&#20248;&#21270;&#65292;&#21542;&#21017;&#19981;&#25512;&#33616;&#29992;&#25143;&#20351;&#29992;&#36825;&#20010;&#35774;&#32622;&#12290;&#30446;&#21069;&#36825;&#20010;&#23646;&#24615;&#20165;&#29992;&#20110;CGLIB&#20195;&#29702;&#65307;
                    &#23545;&#20110;JDK&#21160;&#24577;&#20195;&#29702;&#65288;&#32570;&#30465;&#20195;&#29702;&#65289;&#26080;&#25928;&#12290;
				</p></li><li><p>
					<tt class="literal">frozen</tt>&#65306;&#22914;&#26524;&#19968;&#20010;&#20195;&#29702;&#37197;&#32622;&#26159;<tt class="literal">frozen</tt>&#30340;&#65292;&#23601;&#19981;&#20801;&#35768;&#23545;&#35813;&#37197;&#32622;&#36827;&#34892;&#20462;&#25913;&#12290;
					&#36825;&#22312;&#31616;&#21333;&#20248;&#21270;&#21644;&#19981;&#24076;&#26395;&#35843;&#29992;&#32773;&#22312;&#20195;&#29702;&#21019;&#24314;&#21518;&#25805;&#20316;&#20195;&#29702;&#65288;&#36890;&#36807;<tt class="interfacename">Advised</tt>&#25509;&#21475;&#65289;
					&#26102;&#24456;&#26377;&#29992;&#12290;&#32570;&#30465;&#20540;&#20026;<tt class="literal">false</tt>&#65292;&#21363;&#21487;&#20197;&#36827;&#34892;&#31867;&#20284;&#28155;&#21152;&#38468;&#21152;&#36890;&#30693;&#30340;&#25805;&#20316;&#12290;
				</p></li><li><p>
                    <tt class="literal">exposeProxy</tt>&#65306;&#20915;&#23450;&#24403;&#21069;&#20195;&#29702;&#26159;&#21542;&#34987;&#26292;&#38706;&#22312;&#19968;&#20010;<tt class="classname">ThreadLocal</tt>
                    &#20013;&#20197;&#20415;&#34987;&#30446;&#26631;&#23545;&#35937;&#35775;&#38382;&#12290;&#22914;&#26524;&#30446;&#26631;&#23545;&#35937;&#38656;&#35201;&#33719;&#21462;&#20195;&#29702;&#32780;&#19988;<tt class="literal">exposeProxy</tt>&#23646;&#24615;&#34987;&#35774;&#20026;
                    <tt class="literal">true</tt>&#65292;&#30446;&#26631;&#23545;&#35937;&#21487;&#20197;&#20351;&#29992;<tt class="literal">AopContext.currentProxy()</tt>&#26041;&#27861;&#12290; 
                </p></li><li><p>
                    <tt class="literal">aopProxyFactory</tt>&#65306;&#20351;&#29992;<tt class="interfacename">AopProxyFactory</tt>&#30340;&#23454;&#29616;&#12290;&#36825;&#25552;&#20379;&#20102;&#19968;&#31181;&#26041;&#27861;&#26469;&#33258;&#23450;&#20041;&#26159;&#21542;&#20351;&#29992;&#21160;&#24577;&#20195;&#29702;&#65292;CGLIB&#25110;&#20854;&#23427;&#20195;&#29702;&#31574;&#30053;&#12290;
                    &#32570;&#30465;&#23454;&#29616;&#23558;&#26681;&#25454;&#24773;&#20917;&#36873;&#25321;&#21160;&#24577;&#20195;&#29702;&#25110;&#32773;CGLIB&#12290;&#19968;&#33324;&#24773;&#20917;&#19979;&#24212;&#35813;&#27809;&#26377;&#20351;&#29992;&#36825;&#20010;&#23646;&#24615;&#30340;&#38656;&#35201;&#65307;&#23427;&#26159;&#34987;&#35774;&#35745;&#26469;&#22312;Spring 1.1&#20013;&#28155;&#21152;&#26032;&#30340;&#20195;&#29702;&#31867;&#22411;&#30340;&#12290;
                </p></li></ul></div><p><tt class="classname">ProxyFactoryBean</tt>&#20013;&#38656;&#35201;&#35828;&#26126;&#30340;&#20854;&#23427;&#23646;&#24615;&#21253;&#25324;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>
                    <tt class="literal">proxyInterfaces</tt>&#65306;&#38656;&#35201;&#20195;&#29702;&#30340;&#25509;&#21475;&#21517;&#30340;&#23383;&#31526;&#20018;&#25968;&#32452;&#12290;
                    &#22914;&#26524;&#27809;&#26377;&#25552;&#20379;&#65292;&#23558;&#20026;&#30446;&#26631;&#31867;&#20351;&#29992;&#19968;&#20010;CGLIB&#20195;&#29702;&#65288;&#20063;&#21487;&#20197;&#26597;&#30475;&#19979;&#38754;&#21517;&#20026;<a href="#aop-pfb-proxy-types" title="7.5.3.&nbsp;&#22522;&#20110;JDK&#21644;CGLIB&#30340;&#20195;&#29702;">Section&nbsp;7.5.3, &#8220;&#22522;&#20110;JDK&#21644;CGLIB&#30340;&#20195;&#29702;&#8221;</a>&#30340;&#31456;&#33410;&#65289;&#12290; 
                </p></li><li><p>
                    <tt class="literal">interceptorNames</tt>&#65306;<tt class="interfacename">Advisor</tt>&#30340;&#23383;&#31526;&#20018;&#25968;&#32452;&#65292;&#21487;&#20197;&#21253;&#25324;&#25318;&#25130;&#22120;&#25110;&#20854;&#23427;&#36890;&#30693;&#30340;&#21517;&#23383;&#12290;
                    &#39034;&#24207;&#26159;&#24456;&#37325;&#35201;&#30340;&#65292;&#25490;&#22312;&#21069;&#38754;&#30340;&#23558;&#34987;&#20248;&#20808;&#26381;&#21153;&#12290;&#23601;&#26159;&#35828;&#21015;&#34920;&#37324;&#30340;&#31532;&#19968;&#20010;&#25318;&#25130;&#22120;&#23558;&#33021;&#22815;&#31532;&#19968;&#20010;&#25318;&#25130;&#35843;&#29992;&#12290;
                </p><p>
                    &#36825;&#37324;&#30340;&#21517;&#23383;&#26159;&#24403;&#21069;&#24037;&#21378;&#20013;bean&#30340;&#21517;&#23383;&#65292;&#21253;&#25324;&#29238;&#24037;&#21378;&#20013;bean&#30340;&#21517;&#23383;&#12290;&#36825;&#37324;&#20320;&#19981;&#33021;&#20351;&#29992;bean&#30340;&#24341;&#29992;&#22240;&#20026;&#36825;&#20250;&#23548;&#33268;<tt class="classname">ProxyFactoryBean</tt>&#24573;&#30053;&#36890;&#30693;&#30340;&#21333;&#20363;&#35774;&#32622;&#12290;
                </p><p>
                    &#20320;&#21487;&#20197;&#25226;&#19968;&#20010;&#25318;&#25130;&#22120;&#30340;&#21517;&#23383;&#21152;&#19978;&#19968;&#20010;&#26143;&#21495;&#20316;&#20026;&#21518;&#32512;&#65288;<tt class="literal">*</tt>&#65289;&#12290;&#36825;&#23558;&#23548;&#33268;&#36825;&#20010;&#24212;&#29992;&#31243;&#24207;&#37324;&#25152;&#26377;&#21517;&#23383;&#20197;&#26143;&#21495;&#20043;&#21069;&#37096;&#20998;&#24320;&#22836;&#30340;&#36890;&#30693;&#22120;&#37117;&#34987;&#24212;&#29992;&#12290;
                    &#20320;&#21487;&#20197;&#22312;<a href="#aop-global-advisors" title="7.5.6.&nbsp;&#20351;&#29992;&#8220;&#20840;&#23616;&#8221;&#36890;&#30693;&#22120;">Section&nbsp;7.5.6, &#8220;&#20351;&#29992;&#8220;&#20840;&#23616;&#8221;&#36890;&#30693;&#22120;&#8221;</a> &#21457;&#29616;&#19968;&#20010;&#20351;&#29992;&#36825;&#20010;&#29305;&#24615;&#30340;&#20363;&#23376;&#12290;
                </p></li><li><p>
                    &#21333;&#20363;&#65306;&#24037;&#21378;&#26159;&#21542;&#24212;&#35813;&#36820;&#22238;&#21516;&#19968;&#20010;&#23545;&#35937;&#65292;&#19981;&#35770;&#26041;&#27861;<tt class="literal">getObject()</tt>&#34987;&#35843;&#29992;&#30340;&#22810;&#39057;&#32321;&#12290;
                    &#22810;&#20010;<tt class="interfacename">FactoryBean</tt>&#23454;&#29616;&#37117;&#25552;&#20379;&#20102;&#36825;&#20010;&#26041;&#27861;&#12290;&#32570;&#30465;&#20540;&#26159;<tt class="literal">true</tt>&#12290;
                    &#22914;&#26524;&#20320;&#24076;&#26395;&#20351;&#29992;&#26377;&#29366;&#24577;&#30340;&#36890;&#30693;--&#20363;&#22914;&#65292;&#26377;&#29366;&#24577;&#30340;mixin--&#21487;&#20197;&#25226;&#21333;&#20363;&#23646;&#24615;&#30340;&#20540;&#35774;&#32622;&#20026;<tt class="literal">false</tt>&#26469;&#20351;&#29992;&#21407;&#22411;&#36890;&#30693;&#12290;
                </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-pfb-proxy-types"></a>7.5.3.&nbsp;&#22522;&#20110;JDK&#21644;CGLIB&#30340;&#20195;&#29702;</h3></div></div><div></div></div><p>
            &#36825;&#20010;&#23567;&#33410;&#20316;&#20026;&#35828;&#26126;&#24615;&#25991;&#26723;&#65292;&#35299;&#37322;&#20102;&#23545;&#20110;&#19968;&#20010;&#30446;&#26631;&#23545;&#35937;&#65288;&#38656;&#35201;&#34987;&#20195;&#29702;&#30340;&#23545;&#35937;&#65289;&#65292;<tt class="classname">ProxyFactryBean</tt>&#26159;&#22914;&#20309;&#20915;&#23450;&#31350;&#31455;&#21019;&#24314;&#19968;&#20010;&#22522;&#20110;JDK&#36824;&#26159;CGLIB&#30340;&#20195;&#29702;&#30340;&#12290;
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>
                <tt class="classname">ProxyFactoryBean</tt>&#38656;&#35201;&#21019;&#24314;&#22522;&#20110;JDK&#36824;&#26159;CGLIB&#20195;&#29702;&#30340;&#20855;&#20307;&#34892;&#20026;&#22312;&#29256;&#26412;1.2.x&#21644;2.0&#20013;&#26377;&#25152;&#19981;&#21516;&#12290;
                &#29616;&#22312;<tt class="classname">ProxyFactoryBean</tt>&#22312;&#20851;&#20110;&#33258;&#21160;&#26816;&#27979;&#25509;&#21475;&#26041;&#38754;&#20351;&#29992;&#20102;&#19982;<tt class="classname">TransactionProxyFactoryBean</tt>&#30456;&#20284;&#30340;&#35821;&#20041;&#12290;	
            </p></td></tr></tbody></table></div><p>
            &#22914;&#26524;&#19968;&#20010;&#38656;&#35201;&#34987;&#20195;&#29702;&#30340;&#30446;&#26631;&#23545;&#35937;&#30340;&#31867;&#65288;&#21518;&#38754;&#23558;&#31616;&#21333;&#22320;&#31216;&#23427;&#20026;&#30446;&#26631;&#31867;&#65289;&#27809;&#26377;&#23454;&#29616;&#20219;&#20309;&#25509;&#21475;&#65292;&#37027;&#20040;&#19968;&#20010;&#22522;&#20110;CGLIB&#30340;&#20195;&#29702;&#23558;&#34987;&#21019;&#24314;&#12290;
            &#36825;&#26159;&#26368;&#31616;&#21333;&#30340;&#22330;&#26223;&#65292;&#22240;&#20026;JDK&#20195;&#29702;&#26159;&#22522;&#20110;&#25509;&#21475;&#30340;&#65292;&#27809;&#26377;&#25509;&#21475;&#24847;&#21619;&#30528;&#27809;&#26377;&#20351;&#29992;JDK&#36827;&#34892;&#20195;&#29702;&#30340;&#21487;&#33021;&#12290;
            &#22312;&#30446;&#26631;bean&#37324;&#23558;&#34987;&#25554;&#20837;&#25506;&#27979;&#20195;&#30721;&#65292;&#36890;&#36807;<tt class="literal">interceptorNames</tt>&#23646;&#24615;&#32473;&#20986;&#20102;&#25318;&#25130;&#22120;&#30340;&#21015;&#34920;&#12290;
            &#27880;&#24847;&#19968;&#20010;&#22522;&#20110;CGLIB&#30340;&#20195;&#29702;&#23558;&#34987;&#21019;&#24314;&#21363;&#20351;<tt class="classname">ProxyFactoryBean</tt>&#30340;<tt class="literal">proxyTargetClass</tt>&#23646;&#24615;&#34987;&#35774;&#32622;&#20026;<tt class="literal">false</tt>&#12290;
            &#65288;&#24456;&#26126;&#26174;&#36825;&#31181;&#24773;&#20917;&#19979;&#23545;&#36825;&#20010;&#23646;&#24615;&#36827;&#34892;&#35774;&#32622;&#26159;&#27809;&#26377;&#24847;&#20041;&#30340;&#65292;&#26368;&#22909;&#25226;&#23427;&#20174;bean&#30340;&#23450;&#20041;&#20013;&#31227;&#38500;&#65292;&#22240;&#20026;&#34429;&#28982;&#36825;&#21482;&#26159;&#20010;&#22810;&#20313;&#30340;&#23646;&#24615;&#65292;&#20294;&#22312;&#35768;&#22810;&#24773;&#20917;&#19979;&#20250;&#24341;&#36215;&#28151;&#28102;&#12290;&#65289;
        </p><p>
            &#22914;&#26524;&#30446;&#26631;&#31867;&#23454;&#29616;&#20102;&#19968;&#20010;&#65288;&#25110;&#32773;&#26356;&#22810;&#65289;&#25509;&#21475;&#65292;&#37027;&#20040;&#21019;&#24314;&#20195;&#29702;&#30340;&#31867;&#22411;&#23558;&#26681;&#25454;<tt class="classname">ProxyFactoryBean</tt>&#30340;&#37197;&#32622;&#26469;&#20915;&#23450;&#12290;
        </p><p>
            &#22914;&#26524;<tt class="classname">ProxyFactoryBean</tt>&#30340;<tt class="literal">proxyTargetClass</tt>&#23646;&#24615;&#34987;&#35774;&#20026;<tt class="literal">true</tt>&#65292;&#37027;&#20040;&#19968;&#20010;&#22522;&#20110;CGLIB&#30340;&#20195;&#29702;&#23558;&#21019;&#24314;&#12290;
            &#36825;&#26679;&#30340;&#35268;&#23450;&#26159;&#26377;&#24847;&#20041;&#30340;&#65292;&#36981;&#24490;&#20102;&#26368;&#23567;&#24778;&#35766;&#27861;&#21017;&#65288;&#20445;&#35777;&#20102;&#35774;&#23450;&#30340;&#19968;&#33268;&#24615;&#65289;&#12290;&#29978;&#33267;&#24403;<tt class="classname">ProxyFactoryBean</tt>&#30340;<tt class="literal">proxyInterfaces</tt>&#23646;&#24615;&#34987;&#35774;&#32622;&#20026;&#19968;&#20010;&#25110;&#32773;&#22810;&#20010;&#20840;&#38480;&#23450;&#25509;&#21475;&#21517;&#65292;
            &#32780;<tt class="literal">proxyTargetClass</tt>&#23646;&#24615;&#34987;&#35774;&#32622;&#20026;<tt class="literal">true</tt>&#20173;&#28982;<span class="emphasis"><em>&#23558;</em></span>&#23454;&#38469;&#20351;&#29992;&#22522;&#20110;CGLIB&#30340;&#20195;&#29702;&#12290;
        </p><p>
            &#22914;&#26524;<tt class="classname">ProxyFactoryBean</tt>&#30340;<tt class="literal">proxyInterfaces</tt>&#23646;&#24615;&#34987;&#35774;&#32622;&#20026;&#19968;&#20010;&#25110;&#32773;&#22810;&#20010;&#20840;&#38480;&#23450;&#25509;&#21475;&#21517;&#65292;&#19968;&#20010;&#22522;&#20110;JDK&#30340;&#20195;&#29702;&#23558;&#34987;&#21019;&#24314;&#12290;
            &#34987;&#21019;&#24314;&#30340;&#20195;&#29702;&#23558;&#23454;&#29616;&#25152;&#26377;&#22312;<tt class="literal">proxyInterfaces</tt>&#23646;&#24615;&#37324;&#34987;&#35828;&#26126;&#30340;&#25509;&#21475;&#65307;
            &#22914;&#26524;&#30446;&#26631;&#31867;&#23454;&#29616;&#20102;&#20840;&#37096;&#22312;<tt class="literal">proxyInterfaces</tt>&#23646;&#24615;&#37324;&#35828;&#26126;&#30340;&#25509;&#21475;&#20197;&#21450;&#19968;&#20123;&#39069;&#22806;&#25509;&#21475;&#65292;&#36820;&#22238;&#30340;&#20195;&#29702;&#23558;&#21482;&#23454;&#29616;&#35828;&#26126;&#30340;&#25509;&#21475;&#32780;&#19981;&#20250;&#23454;&#29616;&#37027;&#20123;&#39069;&#22806;&#25509;&#21475;&#12290;
        </p><p>
            &#22914;&#26524;<tt class="classname">ProxyFactoryBean</tt>&#30340;<tt class="literal">proxyInterfaces</tt>&#23646;&#24615;<span class="emphasis"><em>&#27809;&#26377;</em></span>&#34987;&#35774;&#32622;&#65292;
            &#20294;&#26159;&#30446;&#26631;&#31867;<span class="emphasis"><em>&#23454;&#29616;&#20102;&#19968;&#20010;&#65288;&#25110;&#32773;&#26356;&#22810;&#65289;</em></span>&#25509;&#21475;&#65292;&#37027;&#20040;<tt class="classname">ProxyFactoryBean</tt>&#23558;&#33258;&#21160;&#26816;&#27979;&#21040;&#36825;&#20010;&#30446;&#26631;&#31867;&#24050;&#32463;&#23454;&#29616;&#20102;&#33267;&#23569;&#19968;&#20010;&#25509;&#21475;&#65292;
            &#19968;&#20010;&#22522;&#20110;JDK&#30340;&#20195;&#29702;&#23558;&#34987;&#21019;&#24314;&#12290;&#34987;&#23454;&#38469;&#20195;&#29702;&#30340;&#25509;&#21475;&#23558;&#26159;&#30446;&#26631;&#31867;&#25152;&#23454;&#29616;&#30340;<span class="emphasis"><em>&#20840;&#37096;</em></span>&#25509;&#21475;&#65307;
            &#23454;&#38469;&#19978;&#65292;&#36825;&#21644;&#22312;<tt class="literal">proxyInterfaces</tt>&#23646;&#24615;&#20013;&#21015;&#20986;&#30446;&#26631;&#31867;&#23454;&#29616;&#30340;&#27599;&#20010;&#25509;&#21475;&#30340;&#24773;&#20917;&#26159;&#19968;&#26679;&#30340;&#12290;
            &#28982;&#32780;&#65292;&#36825;&#23558;&#26174;&#33879;&#22320;&#20943;&#23569;&#24037;&#20316;&#37327;&#20197;&#21450;&#36755;&#20837;&#38169;&#35823;&#30340;&#21487;&#33021;&#24615;&#12290;
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-api-proxying-intf"></a>7.5.4.&nbsp;&#23545;&#25509;&#21475;&#36827;&#34892;&#20195;&#29702;</h3></div></div><div></div></div><p>
            &#35753;&#25105;&#20204;&#30475;&#19968;&#20010;&#20851;&#20110;<tt class="classname">ProxyFactoryBean</tt>&#30340;&#31616;&#21333;&#20363;&#23376;&#12290;&#36825;&#20010;&#20363;&#23376;&#28041;&#21450;&#65306;
        </p><div class="itemizedlist"><ul type="disc"><li><p>&#19968;&#20010;&#23558;&#34987;&#20195;&#29702;&#30340;<span class="emphasis"><em>&#30446;&#26631;bean</em></span>&#12290;&#22312;&#19979;&#38754;&#30340;&#20363;&#23376;&#37324;&#36825;&#20010;bean&#26159;&#8220;personTarget&#8221;&#12290;</p></li><li><p>&#34987;&#29992;&#26469;&#25552;&#20379;&#36890;&#30693;&#30340;&#19968;&#20010;&#36890;&#30693;&#22120;&#21644;&#19968;&#20010;&#25318;&#25130;&#22120;&#12290;</p></li><li><p>&#19968;&#20010;AOP&#20195;&#29702;bean&#30340;&#23450;&#20041;&#65292;&#23427;&#35828;&#26126;&#20102;&#30446;&#26631;&#23545;&#35937;&#65288;personTarget bean&#65289;&#20197;&#21450;&#38656;&#35201;&#20195;&#29702;&#30340;&#25509;&#21475;&#65292;&#36824;&#21253;&#25324;&#38656;&#35201;&#34987;&#24212;&#29992;&#30340;&#36890;&#30693;&#12290;</p></li></ul></div><p>
            </p><pre class="programlisting">&lt;bean id="personTarget" class="com.mycompany.PersonImpl"&gt;
                &lt;property name="name"&gt;&lt;value&gt;Tony&lt;/value&gt;&lt;/property&gt;
                &lt;property name="age"&gt;&lt;value&gt;51&lt;/value&gt;&lt;/property&gt;
                &lt;/bean&gt;
                
                &lt;bean id="myAdvisor" class="com.mycompany.MyAdvisor"&gt;
                &lt;property name="someProperty"&gt;&lt;value&gt;Custom string property value&lt;/value&gt;&lt;/property&gt;
                &lt;/bean&gt;
                
                &lt;bean id="debugInterceptor" class="org.springframework.aop.interceptor.DebugInterceptor"&gt;
                &lt;/bean&gt;
                
                &lt;bean id="person" 
                class="org.springframework.aop.framework.ProxyFactoryBean"&gt;
                &lt;property name="proxyInterfaces"&gt;&lt;value&gt;com.mycompany.Person&lt;/value&gt;&lt;/property&gt;
                
                &lt;property name="target"&gt;&lt;ref local="personTarget"/&gt;&lt;/property&gt;
                &lt;property name="interceptorNames"&gt;
                &lt;list&gt;
                &lt;value&gt;myAdvisor&lt;/value&gt;
                &lt;value&gt;debugInterceptor&lt;/value&gt;
                &lt;/list&gt;
                &lt;/property&gt;
            &lt;/bean&gt;</pre><p>
        </p><p>&#27880;&#24847;<tt class="literal">interceptorNames</tt>&#23646;&#24615;&#25509;&#21463;&#19968;&#32452;&#23383;&#31526;&#20018;&#65306;&#24403;&#21069;&#24037;&#21378;&#20013;&#25318;&#25130;&#22120;&#25110;&#36890;&#30693;&#22120;bean&#30340;&#21517;&#23383;&#12290;
            &#25318;&#25130;&#22120;&#65292;&#36890;&#30693;&#22120;&#65292;&#21069;&#32622;, &#21518;&#32622;&#21644;&#24322;&#24120;&#36890;&#30693;&#23545;&#35937;&#37117;&#21487;&#20197;&#22312;&#36825;&#37324;&#34987;&#20351;&#29992;&#12290;&#36825;&#37324;&#36890;&#30693;&#22120;&#30340;&#39034;&#24207;&#26159;&#24456;&#37325;&#35201;&#30340;&#12290;
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#20320;&#20063;&#35768;&#24456;&#22855;&#24618;&#20026;&#20160;&#20040;&#36825;&#20010;&#21015;&#34920;&#19981;&#20445;&#23384;bean&#30340;&#24341;&#29992;&#12290;&#29702;&#30001;&#26159;&#22914;&#26524;ProxyFactoryBean&#30340;singleton&#23646;&#24615;&#34987;&#35774;&#32622;&#20026;false&#65292;&#23427;&#24517;&#39035;&#36820;&#22238;&#29420;&#31435;&#30340;&#20195;&#29702;&#23454;&#20363;&#12290;
                &#22914;&#26524;&#20219;&#20309;&#36890;&#30693;&#22120;&#26412;&#36523;&#26159;&#19968;&#20010;&#21407;&#22411;&#65292;&#21017;&#27599;&#27425;&#37117;&#36820;&#22238;&#19968;&#20010;&#29420;&#31435;&#23454;&#20363;&#65292;&#22240;&#27492;&#23427;&#24517;&#39035;&#33021;&#22815;&#20174;&#24037;&#21378;&#37324;&#33719;&#24471;&#21407;&#22411;&#30340;&#19968;&#20010;&#23454;&#20363;&#65307;&#20445;&#23384;&#19968;&#20010;&#24341;&#29992;&#26159;&#19981;&#22815;&#30340;&#12290;
            </p></td></tr></tbody></table></div><p>&#19978;&#38754;&#8220;person&#8221; bean&#30340;&#23450;&#20041;&#21487;&#20197;&#34987;&#29992;&#26469;&#21462;&#20195;&#19968;&#20010;Person&#25509;&#21475;&#30340;&#23454;&#29616;&#65292;&#23601;&#20687;&#19979;&#38754;&#36825;&#26679;&#65306;</p><pre class="programlisting">Person person = (Person) factory.getBean("person");</pre><p>&#22312;&#21516;&#19968;&#20010;IoC&#19978;&#19979;&#25991;&#20013;&#20854;&#23427;&#30340;bean&#21487;&#20197;&#23545;&#36825;&#20010;bean&#26377;&#22522;&#20110;&#31867;&#22411;&#30340;&#20381;&#36182;&#65292;&#23601;&#20687;&#23545;&#19968;&#20010;&#26222;&#36890;&#30340;Java&#23545;&#35937;&#37027;&#26679;&#65306;</p><p>
            </p><pre class="programlisting">&lt;bean id="personUser" class="com.mycompany.PersonUser"&gt;
                &lt;property name="person"&gt;&lt;ref local="person" /&gt;&lt;/property&gt;
            &lt;/bean&gt;</pre><p>
        </p><p>&#36825;&#20010;&#20363;&#23376;&#37324;&#30340;<tt class="literal">PersonUser</tt>&#31867;&#23558;&#26292;&#38706;&#19968;&#20010;&#31867;&#22411;&#20026;Person&#30340;&#23646;&#24615;&#12290;&#23601;&#20687;&#25105;&#20204;&#20851;&#24515;&#30340;&#37027;&#26679;&#65292;AOP&#20195;&#29702;&#21487;&#20197;&#36879;&#26126;&#22320;&#21462;&#20195;&#19968;&#20010;&#8220;&#30495;&#23454;&#8221;&#30340;person&#25509;&#21475;&#23454;&#29616;&#12290;
        &#28982;&#32780;&#65292;&#23427;&#30340;&#31867;&#23558;&#26159;&#19968;&#20010;&#21160;&#24577;&#20195;&#29702;&#31867;&#12290; &#23427;&#21487;&#20197;&#34987;&#36716;&#22411;&#25104;<tt class="literal">Advised</tt>&#25509;&#21475;&#65288;&#23558;&#22312;&#19979;&#38754;&#35752;&#35770;&#65289;&#12290;</p><p>&#23601;&#20687;&#19979;&#38754;&#36825;&#26679;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;&#19968;&#20010;&#21311;&#21517;<span class="emphasis"><em>&#20869;&#37096;bean</em></span>&#26469;&#38544;&#34255;&#30446;&#26631;&#21644;&#20195;&#29702;&#20043;&#38388;&#30340;&#21306;&#21035;&#12290;
        &#20165;&#20165;<tt class="literal">ProxyFactoryBean</tt>&#30340;&#23450;&#20041;&#26377;&#25152;&#19981;&#21516;&#65307;&#36890;&#30693;&#30340;&#23450;&#20041;&#21482;&#26159;&#30001;&#20110;&#23436;&#25972;&#24615;&#30340;&#21407;&#22240;&#32780;&#34987;&#21253;&#25324;&#36827;&#26469;&#65306;</p><p>
            </p><pre class="programlisting">&lt;bean id="myAdvisor" class="com.mycompany.MyAdvisor"&gt;
                &lt;property name="someProperty"&gt;&lt;value&gt;Custom string property value&lt;/value&gt;&lt;/property&gt;
                &lt;/bean&gt;
                
                &lt;bean id="debugInterceptor" class="org.springframework.aop.interceptor.DebugInterceptor"/&gt;
                
                &lt;bean id="person" class="org.springframework.aop.framework.ProxyFactoryBean"&gt;
                &lt;property name="proxyInterfaces"&gt;&lt;value&gt;com.mycompany.Person&lt;/value&gt;&lt;/property&gt;
                &lt;!-- Use inner bean, not local reference to target --&gt;
                &lt;property name="target"&gt;
                &lt;bean class="com.mycompany.PersonImpl"&gt;
                &lt;property name="name"&gt;&lt;value&gt;Tony&lt;/value&gt;&lt;/property&gt;
                &lt;property name="age"&gt;&lt;value&gt;51&lt;/value&gt;&lt;/property&gt;
                &lt;/bean&gt;
                &lt;/property&gt;
                &lt;property name="interceptorNames"&gt;
                &lt;list&gt;
                &lt;value&gt;myAdvisor&lt;/value&gt;
                &lt;value&gt;debugInterceptor&lt;/value&gt;
                &lt;/list&gt;
                &lt;/property&gt;
            &lt;/bean&gt;</pre><p>
        </p><p>&#23545;&#20110;&#21482;&#38656;&#35201;&#19968;&#20010;<tt class="literal">Person</tt>&#31867;&#22411;&#23545;&#35937;&#30340;&#24773;&#20917;&#65292;&#36825;&#26159;&#26377;&#22909;&#22788;&#30340;&#65306;&#22914;&#26524;&#20320;&#24076;&#26395;&#38459;&#27490;&#24212;&#29992;&#31243;&#24207;&#19978;&#19979;&#25991;&#30340;&#29992;&#25143;&#33719;&#21462;&#19968;&#20010;&#25351;&#21521;&#26410;&#36890;&#30693;&#23545;&#35937;&#30340;&#24341;&#29992;&#25110;&#32773;&#24076;&#26395;&#36991;&#20813;&#20351;&#29992;Spring IoC <span class="emphasis"><em>&#33258;&#21160;&#32455;&#20837;</em></span> &#26102;&#30340;&#28151;&#28102;&#12290;
        &#25353;&#29702;&#35828;ProxyFactoryBean&#23450;&#20041;&#36824;&#26377;&#19968;&#20010;&#20248;&#28857;&#26159;&#23427;&#26159;&#33258;&#21253;&#21547;&#30340;&#12290;&#28982;&#32780;&#65292;&#26377;&#26102;&#33021;&#22815;&#20174;&#24037;&#21378;&#37324;&#33719;&#21462;&#26410;&#36890;&#30693;&#30340;&#30446;&#26631;&#20063;&#26159;&#19968;&#20010;&#20248;&#28857;&#65306;&#20363;&#22914;&#65292;&#22312;&#26576;&#20123;&#27979;&#35797;&#22330;&#26223;&#37324;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-api-proxying-class"></a>7.5.5.&nbsp;&#23545;&#31867;&#36827;&#34892;&#20195;&#29702;</h3></div></div><div></div></div><p>&#22914;&#26524;&#20320;&#38656;&#35201;&#20195;&#29702;&#19968;&#20010;&#31867;&#32780;&#19981;&#26159;&#20195;&#29702;&#19968;&#20010;&#25110;&#26159;&#26356;&#22810;&#25509;&#21475;&#65292;&#37027;&#20040;&#24773;&#20917;&#23558;&#26159;&#24590;&#26679;&#65311;</p><p>&#24819;&#35937;&#22312;&#25105;&#20204;&#19978;&#38754;&#30340;&#20363;&#23376;&#37324;&#65292;&#19981;&#23384;&#22312;<tt class="literal">Person</tt>&#25509;&#21475;&#65306;&#25105;&#20204;&#38656;&#35201;&#36890;&#30693;&#19968;&#20010;&#21483;&#20570;<tt class="literal">Person</tt>&#30340;&#31867;&#65292;&#23427;&#27809;&#26377;&#23454;&#29616;&#20219;&#20309;&#19994;&#21153;&#25509;&#21475;&#12290;
            &#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#20320;&#21487;&#20197;&#37197;&#32622;Spring&#20351;&#29992;CGLIB&#20195;&#29702;&#65292;&#32780;&#19981;&#26159;&#21160;&#24577;&#20195;&#29702;&#12290;&#36825;&#21482;&#38656;&#31616;&#21333;&#22320;&#25226;&#19978;&#38754;ProxyFactoryBean&#30340;<tt class="literal">proxyTargetClass</tt>&#23646;&#24615;&#35774;&#20026;true&#12290;
            &#34429;&#28982;&#26368;&#20339;&#26041;&#26696;&#26159;&#38754;&#21521;&#25509;&#21475;&#32534;&#31243;&#32780;&#19981;&#26159;&#31867;&#65292;&#20294;&#22312;&#19982;&#36951;&#30041;&#20195;&#30721;&#19968;&#36215;&#24037;&#20316;&#26102;&#65292;&#36890;&#30693;&#27809;&#26377;&#23454;&#29616;&#25509;&#21475;&#30340;&#31867;&#30340;&#33021;&#21147;&#26159;&#38750;&#24120;&#26377;&#29992;&#30340;&#12290;
            &#65288;&#36890;&#24120;&#24773;&#20917;&#19979;&#65292;Spring&#27809;&#26377;&#20219;&#20309;&#35268;&#23450;&#12290;&#23427;&#21482;&#26159;&#35753;&#20320;&#24456;&#23481;&#26131;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;&#36873;&#25321;&#26368;&#22909;&#30340;&#35299;&#20915;&#26041;&#26696;&#65292;&#36991;&#20813;&#24378;&#36843;&#20351;&#29992;&#29305;&#23450;&#26041;&#24335;&#65289;&#12290;
        </p><p>&#20063;&#35768;&#20320;&#24076;&#26395;&#20320;&#33021;&#22815;&#22312;&#20219;&#20309;&#24773;&#20917;&#19979;&#37117;&#24378;&#21046;&#20351;&#29992;CGLIB&#65292;&#29978;&#33267;&#22312;&#20320;&#20351;&#29992;&#25509;&#21475;&#30340;&#26102;&#20505;&#20063;&#36825;&#26679;&#20570;&#12290;</p><p>CGLIB&#36890;&#36807;&#22312;&#36816;&#34892;&#26102;&#29983;&#25104;&#19968;&#20010;&#30446;&#26631;&#31867;&#30340;&#23376;&#31867;&#26469;&#36827;&#34892;&#20195;&#29702;&#24037;&#20316;&#12290;
        Spring&#37197;&#32622;&#36825;&#20010;&#29983;&#25104;&#30340;&#23376;&#31867;&#23545;&#21407;&#22987;&#30446;&#26631;&#23545;&#35937;&#30340;&#26041;&#27861;&#35843;&#29992;&#36827;&#34892;&#25176;&#31649;&#65306;&#23376;&#31867;&#23454;&#29616;&#20102;<span class="emphasis"><em>&#35013;&#39280;&#22120;&#65288;Decorator&#65289;</em></span>&#27169;&#24335;&#65292;&#25226;&#36890;&#30693;&#32455;&#20837;&#12290;</p><p>CGLIB&#30340;&#20195;&#29702;&#27963;&#21160;&#24212;&#24403;&#23545;&#29992;&#25143;&#26159;&#36879;&#26126;&#30340;&#12290;&#28982;&#32780;&#65292;&#26377;&#19968;&#20123;&#38382;&#39064;&#38656;&#35201;&#34987;&#32771;&#34385;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">Final</tt>&#26041;&#27861;&#19981;&#21487;&#20197;&#34987;&#36890;&#30693;&#65292;&#22240;&#20026;&#23427;&#20204;&#19981;&#33021;&#34987;&#35206;&#30422;&#12290;</p></li><li><p>&#20320;&#38656;&#35201;&#22312;&#20320;&#30340;&#31867;&#36335;&#24452;&#37324;&#26377;CGLIB 2&#30340;&#24211;&#65307;&#20351;&#29992;&#21160;&#24577;&#20195;&#29702;&#30340;&#35805;&#21482;&#38656;&#35201;JDK&#12290;</p></li></ul></div><p>&#22312;CGLIB&#20195;&#29702;&#21644;&#21160;&#24577;&#20195;&#29702;&#20043;&#38388;&#30340;&#36895;&#24230;&#24046;&#21035;&#26159;&#24456;&#23567;&#30340;&#12290;&#22312;Spring 1.0&#20013;&#65292;&#21160;&#24577;&#20195;&#29702;&#20250;&#24555;&#19968;&#28857;&#28857;&#12290;&#20294;&#36825;&#28857;&#21487;&#33021;&#22312;&#23558;&#26469;&#34987;&#25913;&#21464;&#12290;
            &#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#36873;&#25321;&#20351;&#29992;&#20309;&#31181;&#20195;&#29702;&#26102;&#36895;&#24230;&#19981;&#24212;&#35813;&#25104;&#20026;&#20915;&#23450;&#24615;&#30340;&#29702;&#30001;&#12290;
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-global-advisors"></a>7.5.6.&nbsp;&#20351;&#29992;&#8220;&#20840;&#23616;&#8221;&#36890;&#30693;&#22120;</h3></div></div><div></div></div><p>&#36890;&#36807;&#22312;&#19968;&#20010;&#25318;&#25130;&#22120;&#21517;&#21518;&#28155;&#21152;&#19968;&#20010;&#26143;&#21495;&#65292;&#25152;&#26377;bean&#21517;&#23383;&#19982;&#26143;&#21495;&#20043;&#21069;&#37096;&#20998;&#30456;&#21305;&#37197;&#30340;&#36890;&#30693;&#37117;&#23558;&#34987;&#21152;&#20837;&#21040;&#36890;&#30693;&#22120;&#38142;&#20013;&#12290;&#36825;&#35753;&#20320;&#24456;&#23481;&#26131;&#28155;&#21152;&#19968;&#32452;&#26631;&#20934;&#30340;&#8220;&#20840;&#23616;&#8221;&#36890;&#30693;&#22120;&#65306;</p><pre class="programlisting">                &lt;bean id="proxy" class="org.springframework.aop.framework.ProxyFactoryBean"&gt;
                &lt;property name="target" ref="service"/&gt;
                &lt;property name="interceptorNames"&gt;
                &lt;list&gt;
                &lt;value&gt;globa *&lt;/value&gt;
                &lt;/list&gt;
                &lt;/property&gt;
                &lt;/bean&gt;
                
                &lt;bean id="global_debug" class="org.springframework.aop.interceptor.DebugInterceptor"/&gt;
                &lt;bean id="global_performance" class="org.springframework.aop.interceptor.PerformanceMonitorInterceptor"/&gt;
        </pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="aop-concise-proxy"></a>7.6.&nbsp;&#31616;&#21270;&#20195;&#29702;&#23450;&#20041;</h2></div></div><div></div></div><p>&#20320;&#20063;&#35768;&#38656;&#35201;&#35768;&#22810;&#30456;&#20284;&#30340;&#20195;&#29702;&#23450;&#20041;&#65292;&#29305;&#21035;&#26159;&#23450;&#20041;&#20107;&#21153;&#24615;&#20195;&#29702;&#30340;&#26102;&#20505;&#12290;&#20351;&#29992;&#29238;&#23376;bean&#23450;&#20041;&#65292;&#20197;&#21450;&#20869;&#37096;bean&#23450;&#20041;&#65292;&#21487;&#20197;&#35753;&#20195;&#29702;&#23450;&#20041;&#22823;&#22823;&#24471;&#21040;&#26497;&#22823;&#30340;&#31616;&#21270;&#12290;</p><p>&#39318;&#20808;&#20174;&#29238;bean&#24320;&#22987;&#65292;&#20026;&#20195;&#29702;bean&#21019;&#24314;bean&#23450;&#20041;<span class="emphasis"><em>&#27169;&#29256;</em></span>&#65306;</p><p>
        </p><pre class="programlisting">&lt;bean id="txProxyTemplate" abstract="true"
            class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean"&gt;
            &lt;property name="transactionManager" ref="transactionManager"/&gt;
            &lt;property name="transactionAttributes"&gt;
            &lt;props&gt;
            &lt;prop key="*"&gt;PROPAGATION_REQUIRED&lt;/prop&gt;
            &lt;/props&gt;
            &lt;/property&gt;
        &lt;/bean&gt;</pre><p>
    </p><p>&#36825;&#20010;bean&#26412;&#36523;&#23558;&#27704;&#36828;&#19981;&#20250;&#34987;&#21021;&#22987;&#21270;&#65292;&#25152;&#20197;&#23454;&#38469;&#19978;&#26159;&#19981;&#23436;&#25972;&#30340;&#12290;&#32780;&#21518;&#27599;&#20010;&#38656;&#35201;&#21019;&#24314;&#30340;&#20195;&#29702;&#37117;&#26159;&#36825;&#20010;bean&#23450;&#20041;&#30340;&#23376;bean&#23450;&#20041;&#65292;&#23427;&#20204;&#25226;&#20195;&#29702;&#30340;&#30446;&#26631;&#31867;&#21253;&#35013;&#20026;&#19968;&#20010;&#20869;&#37096;bean&#23450;&#20041;&#65292;&#22240;&#20026;&#30446;&#26631;&#23545;&#35937;&#26412;&#36523;&#23558;&#19981;&#20250;&#34987;&#21333;&#29420;&#20351;&#29992;&#12290;
        </p><pre class="programlisting">&lt;bean id="myService" parent="txProxyTemplate"&gt;
            &lt;property name="target"&gt;
            &lt;bean class="org.springframework.samples.MyServiceImpl"&gt;
            &lt;/bean&gt;
            &lt;/property&gt;
    &lt;/bean&gt;</pre><p>&#24403;&#28982;&#20320;&#21487;&#20197;&#35206;&#30422;&#20174;&#27169;&#29256;&#20013;&#32487;&#25215;&#30340;&#23646;&#24615;&#65292;&#20363;&#22914;&#22312;&#19979;&#38754;&#36825;&#20010;&#20363;&#23376;&#37324;&#30340;&#20107;&#21153;&#20256;&#25773;&#35774;&#32622;&#65306;</p><pre class="programlisting">&lt;bean id="mySpecialService" parent="txProxyTemplate"&gt;
            &lt;property name="target"&gt;
            &lt;bean class="org.springframework.samples.MySpecialServiceImpl"&gt;
            &lt;/bean&gt;
            &lt;/property&gt;
            &lt;property name="transactionAttributes"&gt;
            &lt;props&gt;
            &lt;prop key="get*"&gt;PROPAGATION_REQUIRED,readOnly&lt;/prop&gt;
            &lt;prop key="find*"&gt;PROPAGATION_REQUIRED,readOnly&lt;/prop&gt;
            &lt;prop key="load*"&gt;PROPAGATION_REQUIRED,readOnly&lt;/prop&gt;
            &lt;prop key="store*"&gt;PROPAGATION_REQUIRED&lt;/prop&gt;
            &lt;/props&gt;
            &lt;/property&gt;
    &lt;/bean&gt;</pre><p>&#35201;&#27880;&#24847;&#19978;&#38754;&#20363;&#23376;&#20013;&#25105;&#20204;&#24050;&#32463;&#26126;&#30830;&#22320;&#36890;&#36807;&#35774;&#23450;<span class="emphasis"><em>abstract</em></span>&#23646;&#24615;&#25226;&#29238;bean&#23450;&#20041;&#26631;&#27880;&#20026;<span class="emphasis"><em>abstract</em></span>&#65292;&#22312;<a href="#beans-child-bean-definitions" title="3.6.&nbsp;bean&#23450;&#20041;&#30340;&#32487;&#25215;">&#21069;&#38754;</a>&#30340;&#31456;&#33410;&#37324;&#26377;&#25551;&#36848;&#65292;&#36825;&#26679;&#23427;&#23454;&#38469;&#19978;&#19981;&#33021;&#34987;&#21021;&#22987;&#21270;&#12290;
        &#32570;&#30465;&#24773;&#20917;&#19979;&#24212;&#29992;&#31243;&#24207;&#19978;&#19979;&#25991;&#65288;&#19981;&#20165;&#20165;&#26159;bean&#24037;&#21378;&#65289;&#23558;&#39044;&#20808;&#21021;&#22987;&#21270;&#25152;&#26377;&#30340;&#23454;&#20363;&#20026;&#21333;&#20363;&#12290;
        &#22240;&#27492;&#19979;&#38754;&#36825;&#28857;&#26159;&#24456;&#37325;&#35201;&#30340;&#65288;&#33267;&#23569;&#23545;&#20110;&#21333;&#20363;bean&#26469;&#35828;&#65289;&#65292;&#22914;&#26524;&#20320;&#26377;&#19968;&#20010;&#65288;&#29238;&#65289;bean&#23450;&#20041;&#20320;&#24076;&#26395;&#20165;&#20165;&#20316;&#20026;&#27169;&#29256;&#20351;&#29992;&#65292;&#32780;&#36825;&#20010;&#23450;&#20041;&#35828;&#26126;&#20102;&#19968;&#20010;&#31867;&#65292;&#20320;&#24517;&#39035;&#25226;<span class="emphasis"><em>abstract</em></span>&#21442;&#25968;&#35774;&#32622;&#20026;<span class="emphasis"><em>true</em></span>&#65292;&#21542;&#21017;&#24212;&#29992;&#31243;&#24207;&#19978;&#19979;&#25991;&#23558;&#35797;&#22270;&#39044;&#20808;&#21021;&#22987;&#21270;&#23427;&#12290;
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="aop-prog"></a>7.7.&nbsp;&#20351;&#29992;ProxyFactory&#36890;&#36807;&#32534;&#31243;&#21019;&#24314;AOP&#20195;&#29702;</h2></div></div><div></div></div><p>&#20351;&#29992;Spring&#36890;&#36807;&#32534;&#31243;&#21019;&#24314;AOP&#20195;&#29702;&#26159;&#24456;&#23481;&#26131;&#30340;&#12290;&#36825;&#20351;&#20320;&#21487;&#20197;&#20351;&#29992;Spring AOP&#32780;&#19981;&#24517;&#20381;&#36182;&#20110;Spring IoC&#12290;</p><p>&#19979;&#38754;&#30340;&#28165;&#21333;&#26174;&#31034;&#20102;&#22914;&#20309;&#20351;&#29992;&#19968;&#20010;&#25318;&#25130;&#22120;&#21644;&#19968;&#20010;&#36890;&#30693;&#22120;&#26469;&#20026;&#19968;&#20010;&#30446;&#26631;&#23545;&#35937;&#26469;&#21019;&#24314;&#19968;&#20010;&#20195;&#29702;&#12290;&#30446;&#26631;&#23545;&#35937;&#23454;&#29616;&#30340;&#25509;&#21475;&#23558;&#34987;&#33258;&#21160;&#20195;&#29702;&#65306;</p><p>
        </p><pre class="programlisting">ProxyFactory factory = new ProxyFactory(myBusinessInterfaceImpl);
            factory.addInterceptor(myMethodInterceptor);
            factory.addAdvisor(myAdvisor);
        MyBusinessInterface tb = (MyBusinessInterface) factory.getProxy();</pre><p>
    </p><p>&#31532;&#19968;&#27493;&#26159;&#21019;&#24314;&#19968;&#20010;&#31867;&#22411;&#20026;<tt class="literal">org.springframework.aop.framework.ProxyFactory</tt>&#30340;&#23545;&#35937;&#12290;
    &#20320;&#21487;&#20197;&#20687;&#19978;&#38754;&#20363;&#23376;&#37324;&#37027;&#26679;&#20351;&#29992;&#19968;&#20010;&#30446;&#26631;&#23545;&#35937;&#26469;&#21019;&#24314;&#23427;&#65292;&#25110;&#32773;&#22312;&#19968;&#20010;&#21487;&#36873;&#30340;&#26500;&#36896;&#22120;&#37324;&#35828;&#26126;&#38656;&#35201;&#34987;&#20195;&#29702;&#30340;&#25509;&#21475;&#12290;</p><p>&#20320;&#21487;&#20197;&#28155;&#21152;&#25318;&#25130;&#22120;&#25110;&#36890;&#30693;&#22120;&#65292;&#24182;&#22312;ProxyFactory&#30340;&#29983;&#21629;&#21608;&#26399;&#37324;&#25805;&#20316;&#23427;&#20204;&#12290;&#22914;&#26524;&#20320;&#21152;&#20837;&#19968;&#20010;IntroductionInterceptionAroundAdvisor&#65292;&#20320;&#21487;&#20197;&#35753;&#20195;&#29702;&#23454;&#29616;&#39069;&#22806;&#30340;&#25509;&#21475;&#12290;</p><p>&#22312;ProxyFactory&#37324;&#20063;&#26377;&#24456;&#26041;&#20415;&#30340;&#26041;&#27861;&#65288;&#32487;&#25215;&#33258;<tt class="classname">AdvisedSupport</tt>&#65289;&#20801;&#35768;&#20320;&#21152;&#20837;&#20854;&#23427;&#30340;&#36890;&#30693;&#31867;&#22411;&#20363;&#22914;&#21069;&#32622;&#21644;&#24322;&#24120;&#36890;&#30693;&#12290;
    AdvisedSupport&#26159;ProxyFactory &#21644;ProxyFactoryBean&#30340;&#20849;&#21516;&#29238;&#31867;&#12290;</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Tip" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Tip]" src="tip.png"></td><th align="left">Tip</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#22312;&#22823;&#22810;&#25968;&#24212;&#29992;&#31243;&#24207;&#37324;&#65292;&#25226;AOP&#20195;&#29702;&#30340;&#21019;&#24314;&#21644;IoC&#26694;&#26550;&#38598;&#25104;&#26159;&#26368;&#20339;&#23454;&#36341;&#12290;&#36890;&#24120;&#24773;&#20917;&#19979;&#25105;&#20204;&#25512;&#33616;&#20320;&#22312;Java&#20195;&#30721;&#22806;&#36827;&#34892;AOP&#30340;&#37197;&#32622;&#12290;</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="aop-api-advised"></a>7.8.&nbsp;&#25805;&#20316;&#34987;&#36890;&#30693;&#23545;&#35937;</h2></div></div><div></div></div><p>&#22312;&#21019;&#24314;&#20102;AOP&#20195;&#29702;&#20043;&#21518;&#65292;&#20320;&#33021;&#22815;&#20351;&#29992;<tt class="literal">org.springframework.aop.framework.Advised</tt>&#25509;&#21475;&#23545;&#23427;&#20204;&#36827;&#34892;&#31649;&#29702;&#12290;
    &#20219;&#20309;AOP&#20195;&#29702;&#37117;&#33021;&#22815;&#34987;&#36716;&#22411;&#20026;&#36825;&#20010;&#25509;&#21475;&#65292;&#19981;&#35770;&#23427;&#23454;&#29616;&#20102;&#21738;&#20123;&#20854;&#23427;&#25509;&#21475;&#12290;&#36825;&#20010;&#25509;&#21475;&#21253;&#25324;&#19979;&#38754;&#30340;&#26041;&#27861;&#65306;</p><pre class="programlisting">Advisor[] getAdvisors();
        
        void addAdvice(Advice advice) throws AopConfigException;
        
        void addAdvice(int pos, Advice advice) 
        throws AopConfigException;
        
        void addAdvisor(Advisor advisor) throws AopConfigException;
        
        void addAdvisor(int pos, Advisor advisor) throws AopConfigException;
        
        int indexOf(Advisor advisor);
        
        boolean removeAdvisor(Advisor advisor) throws AopConfigException;
        
        void removeAdvisor(int index) throws AopConfigException;
        
        boolean replaceAdvisor(Advisor a, Advisor b) throws AopConfigException;
        
    boolean isFrozen();</pre><p><tt class="literal">getAdvisors()</tt>&#26041;&#27861;&#23558;&#20026;&#27599;&#20010;&#24050;&#32463;&#34987;&#21152;&#20837;&#24037;&#21378;&#30340;&#36890;&#30693;&#22120;&#65292;&#25318;&#25130;&#22120;&#25110;&#32773;&#20854;&#23427;&#36890;&#30693;&#31867;&#22411;&#36820;&#22238;&#19968;&#20010;&#36890;&#30693;&#22120;&#12290;&#22914;&#26524;&#20320;&#26366;&#32463;&#28155;&#21152;&#19968;&#20010;&#36890;&#30693;&#22120;&#65292;&#37027;&#20040;&#25152;&#36820;&#22238;&#30340;&#36890;&#30693;&#22120;&#23558;&#26159;&#20320;&#21152;&#20837;&#30340;&#23545;&#35937;&#12290;
        &#22914;&#26524;&#20320;&#26366;&#32463;&#21152;&#20837;&#19968;&#20010;&#25318;&#25130;&#22120;&#25110;&#32773;&#20854;&#23427;&#36890;&#30693;&#31867;&#22411;&#65292;Spring&#23558;&#25226;&#23427;&#20204;&#21253;&#35013;&#22312;&#19968;&#20010;&#36890;&#30693;&#22120;&#37324;&#65292;&#21518;&#32773;&#20351;&#29992;&#19968;&#20010;&#27704;&#36828;&#36820;&#22238;true&#30340;&#20999;&#20837;&#28857;&#12290;&#22240;&#27492;&#22914;&#26524;&#20320;&#26366;&#32463;&#21152;&#20837;&#19968;&#20010;<tt class="literal">MethodInterceptor</tt>&#65292;
        &#36820;&#22238;&#30340;&#36890;&#30693;&#22120;&#23558;&#26159;&#19968;&#20010;<tt class="literal">DefaultPointcutAdvisor</tt>&#65292;&#23427;&#21487;&#20197;&#36820;&#22238;&#20320;&#21152;&#20837;&#30340;<tt class="literal">MethodInterceptor</tt>&#21644;&#19968;&#20010;&#21305;&#37197;&#25152;&#26377;&#31867;&#21644;&#26041;&#27861;&#30340;&#20999;&#20837;&#28857;&#12290;
    </p><p><tt class="literal">addAdvisor()</tt>&#26041;&#27861;&#21487;&#20197;&#29992;&#26469;&#28155;&#21152;&#20219;&#20309;&#36890;&#30693;&#22120;&#12290;&#36890;&#24120;&#20445;&#23384;&#20999;&#20837;&#28857;&#21644;&#36890;&#30693;&#30340;&#36890;&#30693;&#22120;&#26159;<tt class="literal">DefaultPointcutAdvisor</tt>&#65292;&#23427;&#21487;&#20197;&#29992;&#20110;&#20219;&#20309;&#36890;&#30693;&#25110;&#20999;&#20837;&#28857;&#65288;&#20294;&#19981;&#21253;&#25324;&#24341;&#20837;&#31867;&#22411;&#65289;&#12290;</p><p>&#32570;&#30465;&#24773;&#20917;&#19979;&#65292;&#20320;&#21487;&#20197;&#21152;&#20837;&#25110;&#31227;&#38500;&#36890;&#30693;&#22120;&#25110;&#32773;&#25318;&#25130;&#22120;&#29978;&#33267;&#24403;&#20195;&#29702;&#24050;&#32463;&#34987;&#21019;&#24314;&#20043;&#21518;&#12290;&#21807;&#19968;&#30340;&#38480;&#21046;&#26159;&#26080;&#27861;&#21152;&#20837;&#25110;&#32773;&#31227;&#38500;&#19968;&#20010;&#24341;&#20837;&#36890;&#30693;&#22120;&#65292;&#22240;&#20026;&#24037;&#21378;&#20013;&#33719;&#24471;&#30340;&#24050;&#26377;&#20195;&#29702;&#19981;&#33021;&#26174;&#31034;&#25509;&#21475;&#30340;&#25913;&#21464;&#65288;&#20320;&#21487;&#20197;&#36890;&#36807;&#20174;&#24037;&#21378;&#37324;&#33719;&#21462;&#19968;&#20010;&#26032;&#30340;&#20195;&#29702;&#26469;&#36991;&#20813;&#36825;&#20010;&#38382;&#39064;&#65289;&#12290;</p><p>&#19979;&#38754;&#26159;&#19968;&#20010;&#31616;&#21333;&#30340;&#20363;&#23376;&#65292;&#23427;&#25226;&#19968;&#20010;AOP&#20195;&#29702;&#36716;&#22411;&#20026;<tt class="literal">Advised</tt>&#25509;&#21475;&#65292;&#26816;&#26597;&#24182;&#25805;&#20316;&#23427;&#30340;&#36890;&#30693;&#65306;</p><p>
        </p><pre class="programlisting">Advised advised = (Advised) myObject;
            Advisor[] advisors = advised.getAdvisors();
            int oldAdvisorCount = advisors.length;
            System.out.println(oldAdvisorCount + " advisors");
            
            // Add an advice like an interceptor without a pointcut
            // Will match all proxied methods
            // Can use for interceptors, before, after returning or throws advice
            advised.addAdvice(new DebugInterceptor());
            
            // Add selective advice using a pointcut
            advised.addAdvisor(new DefaultPointcutAdvisor(mySpecialPointcut, myAdvice));
            
            assertEquals("Added two advisors",
        oldAdvisorCount + 2, advised.getAdvisors().length);</pre><p>
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#22312;&#19968;&#20010;&#23454;&#38469;&#36816;&#34892;&#30340;&#31995;&#32479;&#37324;&#65292;&#20462;&#25913;&#19968;&#20010;&#19994;&#21153;&#23545;&#35937;&#19978;&#30340;&#36890;&#30693;&#26159;&#21542;&#26126;&#26234;&#26159;&#20010;&#38382;&#39064;&#65292;&#34429;&#28982;&#26080;&#30097;&#22312;&#26576;&#20123;&#24773;&#20917;&#19979;&#36825;&#26679;&#20570;&#26159;&#21512;&#29702;&#30340;&#12290;&#28982;&#32780;&#36825;&#22312;&#24320;&#21457;&#20013;&#26159;&#24456;&#26377;&#29992;&#30340;&#65306;
            &#20363;&#22914;&#65292;&#22312;&#27979;&#35797;&#30340;&#26102;&#20505;&#12290;&#23545;&#20110;&#24076;&#26395;&#27979;&#35797;&#30340;&#26041;&#27861;&#35843;&#29992;&#65292;&#26377;&#26102;&#25105;&#21457;&#29616;&#25226;&#27979;&#35797;&#20195;&#30721;&#21152;&#20837;&#21040;&#19968;&#20010;&#25318;&#25130;&#22120;&#25110;&#32773;&#20854;&#23427;&#36890;&#30693;&#37324;&#26159;&#38750;&#24120;&#26377;&#29992;&#30340;&#12290;
        &#65288;&#20363;&#22914;&#65292;&#36890;&#30693;&#21487;&#20197;&#19982;&#30446;&#26631;&#26041;&#27861;&#23384;&#22312;&#20110;&#21516;&#19968;&#20010;&#20107;&#21153;&#37324;&#65292;&#22312;&#25226;&#20107;&#21153;&#26631;&#35760;&#20026;&#22238;&#28378;&#20043;&#21069;&#21487;&#20197;&#29992;SQL&#26469;&#26816;&#26597;&#25968;&#25454;&#24211;&#26159;&#21542;&#34987;&#27491;&#30830;&#30340;&#26356;&#26032;&#20102;&#12290;&#65289;</p></td></tr></tbody></table></div><p>&#20381;&#36182;&#20110;&#20320;&#24590;&#26679;&#21019;&#24314;&#20195;&#29702;&#65292;&#20320;&#36890;&#24120;&#21487;&#20197;&#35774;&#32622;&#19968;&#20010;
        <tt class="literal">frozen</tt>&#26631;&#24535;&#65292;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;
        <tt class="literal">Advised</tt>&#30340;<tt class="literal">isFrozen()</tt>&#26041;&#27861;&#23558;&#36820;&#22238;true&#65292;&#20219;&#20309;&#22686;&#21152;&#25110;&#32773;&#31227;&#38500;&#36890;&#30693;&#30340;&#20462;&#25913;&#37117;&#20250;&#23548;&#33268;&#19968;&#20010;<tt class="literal">AopConfigException</tt>&#24322;&#24120;&#12290;
    &#22312;&#26576;&#20123;&#24773;&#20917;&#19979;&#36825;&#31181;&#20923;&#32467;&#34987;&#36890;&#30693;&#23545;&#35937;&#29366;&#24577;&#30340;&#33021;&#21147;&#26159;&#24456;&#26377;&#29992;&#30340;&#65306;&#20363;&#22914;&#65292;&#38450;&#27490;&#35843;&#29992;&#20195;&#30721;&#26469;&#31227;&#38500;&#19968;&#20010;&#36827;&#34892;&#23433;&#20840;&#26816;&#26597;&#30340;&#25318;&#25130;&#22120;&#12290;&#22312;Spring 1.1&#20013;&#23427;&#20063;&#34987;&#29992;&#26469;&#20801;&#35768;&#28608;&#36827;&#20248;&#21270;&#65292;&#22914;&#26524;&#24050;&#32463;&#30693;&#36947;&#19981;&#38656;&#35201;&#36816;&#34892;&#26102;&#23545;&#36890;&#30693;&#36827;&#34892;&#20462;&#25913;&#30340;&#35805;&#12290; </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="aop-autoproxy"></a>7.9.&nbsp;&#20351;&#29992;&#8220;&#33258;&#21160;&#20195;&#29702;&#65288;autoproxy&#65289;&#8221;&#21151;&#33021;</h2></div></div><div></div></div><p>&#21040;&#30446;&#21069;&#20026;&#27490;&#25105;&#20204;&#24050;&#32463;&#32771;&#34385;&#20102;&#22914;&#20309;&#20351;&#29992;<tt class="literal">ProxyFactoryBean</tt>&#25110;&#32773;&#31867;&#20284;&#30340;&#24037;&#21378;bean&#26469;&#26174;&#24335;&#21019;&#24314;AOP&#20195;&#29702;&#12290;</p><p>Spring&#20063;&#20801;&#35768;&#25105;&#20204;&#20351;&#29992;&#8220;&#33258;&#21160;&#20195;&#29702;&#8221;&#30340;bean&#23450;&#20041;&#65292;&#21487;&#20197;&#33258;&#21160;&#23545;&#34987;&#36873;&#20013;&#30340;bean&#23450;&#20041;&#36827;&#34892;&#20195;&#29702;&#12290;
    &#36825;&#24314;&#31435;&#22312;Spring&#30340;&#8220;bean post processor&#8221;&#21151;&#33021;&#19978;&#65292;&#21518;&#32773;&#20801;&#35768;&#22312;&#23481;&#22120;&#21152;&#36733;&#26102;&#20462;&#25913;&#20219;&#20309;bean&#30340;&#23450;&#20041;&#12290;</p><p>&#22312;&#36825;&#20010;&#27169;&#22411;&#19979;&#65292;&#20320;&#22312;&#20320;&#30340;XML bean&#23450;&#20041;&#25991;&#20214;&#20013;&#24314;&#31435;&#19968;&#20123;&#29305;&#23450;&#30340;bean&#23450;&#20041;&#26469;&#37197;&#32622;&#33258;&#21160;&#20195;&#29702;&#21151;&#33021;&#12290;
    &#36825;&#20801;&#35768;&#20320;&#20165;&#20165;&#22768;&#26126;&#37027;&#20123;&#23558;&#34987;&#33258;&#21160;&#20195;&#29702;&#30340;&#36866;&#24403;&#30446;&#26631;&#65306;&#20320;&#19981;&#38656;&#35201;&#20351;&#29992;<tt class="literal">ProxyFactoryBean</tt>&#12290;</p><p>&#26377;&#20004;&#31181;&#26041;&#24335;&#21487;&#20197;&#20570;&#21040;&#36825;&#28857;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#20351;&#29992;&#19968;&#20010;&#24341;&#29992;&#24403;&#21069;&#19978;&#19979;&#25991;&#20013;&#29305;&#23450;bean&#30340;&#33258;&#21160;&#20195;&#29702;&#21019;&#24314;&#22120;&#12290;</p></li><li><p>&#19968;&#20010;&#19987;&#29992;&#33258;&#21160;&#20195;&#29702;&#30340;&#21019;&#24314;&#38656;&#35201;&#34987;&#21333;&#29420;&#32771;&#34385;&#65307;&#33258;&#21160;&#20195;&#29702;&#21019;&#24314;&#30001;&#28304;&#20195;&#30721;&#32423;&#21035;&#30340;&#20803;&#25968;&#25454;&#23646;&#24615;&#39537;&#21160;&#12290;</p></li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-autoproxy-choices"></a>7.9.1.&nbsp;&#33258;&#21160;&#20195;&#29702;bean&#23450;&#20041;</h3></div></div><div></div></div><p><tt class="literal">org.springframework.aop.framework.autoproxy</tt>&#21253;&#25552;&#20379;&#20102;&#19979;&#21015;&#26631;&#20934;&#33258;&#21160;&#20195;&#29702;&#21019;&#24314;&#22120;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-api-autoproxy"></a>7.9.1.1.&nbsp;BeanNameAutoProxyCreator</h4></div></div><div></div></div><p>BeanNameAutoProxyCreator&#20026;&#21517;&#23383;&#21305;&#37197;&#23383;&#31526;&#20018;&#25110;&#32773;&#36890;&#37197;&#31526;&#30340;bean&#33258;&#21160;&#21019;&#24314;AOP&#20195;&#29702;&#12290;</p><p>
                </p><pre class="programlisting">&lt;bean class="org.springframework.aop.framework.autoproxy.BeanNameAutoProxyCreator"&gt;
                    &lt;property name="beanNames"&gt;&lt;value&gt;jdk*,onlyJdk&lt;/value&gt;&lt;/property&gt;
                    &lt;property name="interceptorNames"&gt;
                    &lt;list&gt;
                    &lt;value&gt;myInterceptor&lt;/value&gt;
                    &lt;/list&gt;
                    &lt;/property&gt;
                &lt;/bean&gt;</pre><p>
            </p><p>&#21644;<tt class="literal">ProxyFactoryBean</tt>&#19968;&#26679;&#65292;&#36825;&#37324;&#26377;&#19968;&#20010;<tt class="literal">interceptorNames</tt>&#23646;&#24615;&#32780;&#19981;&#26159;&#19968;&#20010;&#25318;&#25130;&#22120;&#30340;&#21015;&#34920;&#65292;&#36825;&#20801;&#35768;&#20351;&#29992;&#21407;&#22411;&#65288;prototype&#65289;&#36890;&#30693;&#22120;&#12290;&#36825;&#37324;&#30340;&#8220;&#25318;&#25130;&#22120;&#8221;&#21487;&#20197;&#26159;&#36890;&#30693;&#22120;&#25110;&#20219;&#20309;&#36890;&#30693;&#31867;&#22411;&#12290;</p><p>&#19982;&#36890;&#24120;&#30340;&#33258;&#21160;&#20195;&#29702;&#19968;&#26679;&#65292;&#20351;&#29992;<tt class="literal">BeanNameAutoProxyCreator</tt>&#30340;&#20027;&#35201;&#30446;&#30340;&#26159;&#25226;&#30456;&#21516;&#30340;&#37197;&#32622;&#19968;&#33268;&#22320;&#24212;&#29992;&#21040;&#22810;&#20010;&#23545;&#35937;&#65292;
            &#24182;&#19988;&#20351;&#29992;&#26368;&#23569;&#37327;&#30340;&#37197;&#32622;&#12290;&#19968;&#20010;&#27969;&#34892;&#30340;&#36873;&#25321;&#26159;&#25226;&#22768;&#26126;&#24335;&#20107;&#21153;&#24212;&#29992;&#21040;&#22810;&#20010;&#23545;&#35937;&#19978;&#12290;</p><p>&#37027;&#20123;&#21517;&#23383;&#21305;&#37197;&#30340;Bean&#23450;&#20041;&#65292;&#20363;&#22914;&#19978;&#38754;&#30340;&#20363;&#23376;&#37324;&#30340;&#8220;jdkMyBean&#8221;&#21644;&#8220;onlyJdk&#8221;&#65292;&#26412;&#36523;&#21482;&#26159;&#30446;&#26631;&#31867;&#30340;&#26222;&#36890;bean&#23450;&#20041;&#12290;&#19968;&#20010;AOP&#23545;&#35937;&#23558;&#34987;<tt class="literal">BeanNameAutoProxyCreator</tt>&#33258;&#21160;&#21019;&#24314;&#12290;
            &#30456;&#21516;&#30340;&#36890;&#30693;&#23558;&#34987;&#24212;&#29992;&#21040;&#20840;&#37096;&#21305;&#37197;&#30340;bean&#19978;&#12290;&#27880;&#24847;&#22914;&#26524;&#36890;&#30693;&#22120;&#34987;&#20351;&#29992;&#65288;&#32780;&#19981;&#26159;&#20687;&#19978;&#38754;&#20363;&#23376;&#37324;&#37027;&#26679;&#20351;&#29992;&#25318;&#25130;&#22120;&#65289;&#65292;&#23545;&#20110;&#19981;&#21516;bean&#21487;&#20197;&#24212;&#29992;&#19981;&#21516;&#30340;&#20999;&#20837;&#28857;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-api-autoproxy-default"></a>7.9.1.2.&nbsp;DefaultAdvisorAutoProxyCreator</h4></div></div><div></div></div><p>&#19968;&#20010;&#26356;&#21152;&#36890;&#29992;&#32780;&#19988;&#24378;&#22823;&#24471;&#22810;&#30340;&#33258;&#21160;&#20195;&#29702;&#21019;&#24314;&#22120;&#26159;<tt class="literal">DefaultAdvisorAutoProxyCreator</tt>&#12290;&#23427;&#33258;&#21160;&#24212;&#29992;&#24403;&#21069;&#19978;&#19979;&#25991;&#20013;&#36866;&#24403;&#30340;&#36890;&#30693;&#22120;&#65292;&#26080;&#38656;&#22312;&#33258;&#21160;&#20195;&#29702;&#36890;&#30693;&#22120;&#30340;bean&#23450;&#20041;&#20013;&#21253;&#25324;bean&#30340;&#21517;&#23383;&#12290;
            &#27604;&#36215;<tt class="literal">BeanNameAutoProxyCreator</tt>&#65292;&#23427;&#25552;&#20379;&#20102;&#21516;&#26679;&#20851;&#20110;&#19968;&#33268;&#24615;&#37197;&#32622;&#30340;&#20248;&#28857;&#32780;&#36991;&#20813;&#20102;&#21069;&#32773;&#30340;&#37325;&#22797;&#24615;&#12290;</p><p>&#20351;&#29992;&#36825;&#20010;&#21151;&#33021;&#23558;&#28041;&#21450;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>Specifying a <tt class="literal">DefaultAdvisorAutoProxyCreator</tt> bean
                    definition.</p><p>&#35828;&#26126;&#19968;&#20010;
                    <tt class="literal">DefaultAdvisorAutoProxyCreator</tt>&#30340;bean&#23450;&#20041;</p></li><li><p>&#22312;&#21516;&#19968;&#20010;&#25110;&#32773;&#30456;&#20851;&#30340;&#19978;&#19979;&#25991;&#20013;&#35828;&#26126;&#20219;&#24847;&#25968;&#37327;&#30340;&#36890;&#30693;&#22120;&#12290;&#27880;&#24847;&#36825;&#20123;<span class="emphasis"><em>&#24517;&#39035;</em></span>&#26159;&#36890;&#30693;&#22120;&#32780;&#19981;&#20165;&#20165;&#26159;&#25318;&#25130;&#22120;&#25110;&#32773;&#20854;&#23427;&#36890;&#30693;&#12290;
                        &#36825;&#28857;&#26159;&#24517;&#35201;&#30340;&#22240;&#20026;&#24517;&#39035;&#26377;&#19968;&#20010;&#20999;&#20837;&#28857;&#34987;&#35780;&#20272;&#65292;&#20197;&#20415;&#26816;&#26597;&#27599;&#20010;&#36890;&#30693;&#20505;&#36873;bean&#23450;&#20041;&#30340;&#21512;&#36866;&#24615;&#12290;
                    </p></li></ul></div><p><tt class="literal">DefaultAdvisorAutoProxyCreator</tt>&#23558;&#33258;&#21160;&#35780;&#20272;&#21253;&#25324;&#22312;&#27599;&#20010;&#36890;&#30693;&#22120;&#20013;&#30340;&#20999;&#20837;&#28857;&#65292;
            &#26469;&#30475;&#30475;&#23427;&#24212;&#24403;&#24212;&#29992;&#21738;&#20010;&#65288;&#22914;&#26524;&#26377;&#30340;&#35805;&#65289;&#36890;&#30693;&#21040;&#27599;&#20010;&#19994;&#21153;&#23545;&#35937;&#65288;&#20363;&#22914;&#20363;&#23376;&#37324;&#30340;&#8220;businessObject1&#8221;&#21644;&#8220;businessObject2&#8221;&#65289;&#12290;</p><p>&#36825;&#24847;&#21619;&#30528;&#21487;&#20197;&#21521;&#27599;&#20010;&#19994;&#21153;&#23545;&#35937;&#24212;&#29992;&#20219;&#24847;&#25968;&#37327;&#30340;&#36890;&#30693;&#22120;&#12290;
            &#23545;&#20110;&#19968;&#20010;&#19994;&#21153;&#23545;&#35937;&#65292;&#22914;&#26524;&#25152;&#26377;&#36890;&#30693;&#22120;&#20013;&#30340;&#20999;&#20837;&#28857;&#37117;&#26080;&#27861;&#21305;&#37197;&#23427;&#30340;&#20219;&#24847;&#26041;&#27861;&#65292;&#36825;&#20010;&#23545;&#35937;&#23558;&#19981;&#20250;&#34987;&#20195;&#29702;&#12290;&#24403;&#20026;&#26032;&#30340;&#19994;&#21153;&#23545;&#35937;&#21152;&#20837;bean&#23450;&#20041;&#26102;&#65292;&#22914;&#26524;&#26377;&#24517;&#35201;&#23427;&#20204;&#23558;&#33258;&#21160;&#34987;&#20195;&#29702;&#12290;</p><p>&#36890;&#24120;&#33258;&#21160;&#20195;&#29702;&#30340;&#22909;&#22788;&#26159;&#23427;&#35753;&#35843;&#29992;&#32773;&#25110;&#32773;&#34987;&#20381;&#36182;&#23545;&#35937;&#19981;&#33021;&#24471;&#21040;&#19968;&#20010;&#27809;&#26377;&#36890;&#30693;&#36807;&#30340;&#23545;&#35937;&#12290;
                &#22312;&#36825;&#20010;ApplicationContext&#19978;&#35843;&#29992;getBean("businessObject1")&#23558;&#36820;&#22238;&#19968;&#20010;AOP&#20195;&#29702;&#65292;&#32780;&#19981;&#26159;&#30446;&#26631;&#19994;&#21153;&#23545;&#35937;&#12290;&#65288;&#21069;&#38754;&#26174;&#31034;&#30340;&#8220;&#20869;&#37096;bean&#8221;&#20063;&#25552;&#20379;&#20102;&#21516;&#26679;&#30340;&#20248;&#28857;&#12290;&#65289;
            </p><p>
                </p><pre class="programlisting">&lt;bean class="org.springframework.aop.framework.autoproxy.DefaultAdvisorAutoProxyCreator"/&gt;
                    
                    &lt;bean class="org.springframework.transaction.interceptor.TransactionAttributeSourceAdvisor"&gt;
                    &lt;property name="transactionInterceptor" ref="transactionInterceptor"/&gt;
                    &lt;/bean&gt;
                    
                    &lt;bean id="customAdvisor" class="com.mycompany.MyAdvisor"/&gt;
                    
                    &lt;bean id="businessObject1" class="com.mycompany.BusinessObject1"&gt;
                    &lt;!-- Properties omitted --&gt;
                    &lt;/bean&gt;
                    
                    &lt;bean id="businessObject2" class="com.mycompany.BusinessObject2"/&gt;
                </pre><p>
            </p><p>&#22914;&#26524;&#20320;&#24819;&#35201;&#25226;&#30456;&#21516;&#30340;&#36890;&#30693;&#19968;&#33268;&#24615;&#22320;&#24212;&#29992;&#21040;&#35768;&#22810;&#19994;&#21153;&#23545;&#35937;&#19978;&#65292;<tt class="literal">DefaultAdvisorAutoProxyCreator</tt>&#26159;&#38750;&#24120;&#26377;&#29992;&#30340;&#12290;
                &#19968;&#26086;&#26694;&#26550;&#30340;&#23450;&#20041;&#24050;&#32463;&#23436;&#25104;&#65292;&#20320;&#21487;&#20197;&#31616;&#21333;&#22320;&#21152;&#20837;&#26032;&#30340;&#19994;&#21153;&#23545;&#35937;&#32780;&#19981;&#24517;&#21253;&#25324;&#29305;&#23450;&#30340;&#20195;&#29702;&#37197;&#32622;&#12290;&#20320;&#20063;&#21487;&#20197;&#24456;&#23481;&#26131;&#30340;&#21435;&#25481;&#39069;&#22806;&#30340;&#20999;&#38754;--&#20363;&#22914;&#65292;&#36319;&#36394;&#25110;&#32773;&#24615;&#33021;&#30417;&#35270;&#20999;&#38754;--&#20165;&#20165;&#23545;&#37197;&#32622;&#20316;&#24456;&#23567;&#30340;&#20462;&#25913;&#12290;
            </p><p>DefaultAdvisorAutoProxyCreator&#25903;&#25345;&#36807;&#28388;&#65288;&#36890;&#36807;&#20351;&#29992;&#19968;&#20010;&#21629;&#21517;&#32422;&#23450;&#35753;&#21482;&#26377;&#29305;&#23450;&#30340;&#36890;&#30693;&#22120;&#34987;&#35780;&#20272;&#65292;&#20801;&#35768;&#22312;&#21516;&#19968;&#20010;&#24037;&#21378;&#37324;&#20351;&#29992;&#22810;&#20010;&#19981;&#21516;&#37197;&#32622;&#30340;AdvisorAutoProxyCreator&#65289;&#21644;&#25490;&#24207;&#12290;&#36890;&#30693;&#22120;&#21487;&#20197;&#23454;&#29616;<tt class="literal">org.springframework.core.Ordered</tt>&#25509;&#21475;&#26469;&#30830;&#20445;&#20197;&#27491;&#30830;&#30340;&#39034;&#24207;&#34987;&#24212;&#29992;&#12290;
                &#19978;&#38754;&#20363;&#23376;&#37324;&#30340;TransactionAttributeSourceAdvisor &#26377;&#19968;&#20010;&#21487;&#37197;&#32622;&#30340;&#24207;&#21495;&#20540;&#65307;&#32570;&#30465;&#24773;&#20917;&#19979;&#26159;&#27809;&#26377;&#25490;&#24207;&#30340;&#12290;
            </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="aop-api-autoproxy-abstract"></a>7.9.1.3.&nbsp;AbstractAdvisorAutoProxyCreator</h4></div></div><div></div></div><p>&#36825;&#26159;DefaultAdvisorAutoProxyCreator&#30340;&#29238;&#31867;&#12290;&#22914;&#26524;&#22312;&#26576;&#20123;&#24773;&#20917;&#19979;&#26694;&#26550;&#25552;&#20379;&#30340;<tt class="literal">DefaultAdvisorAutoProxyCreator</tt>&#19981;&#33021;&#28385;&#36275;&#20320;&#30340;&#38656;&#35201;&#65292;&#20320;&#21487;&#20197;&#36890;&#36807;&#32487;&#25215;&#36825;&#20010;&#31867;&#26469;&#21019;&#24314;&#20320;&#33258;&#24049;&#30340;&#33258;&#21160;&#20195;&#29702;&#21019;&#24314;&#22120;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-autoproxy-metadata"></a>7.9.2.&nbsp;&#20351;&#29992;&#20803;&#25968;&#25454;&#39537;&#21160;&#30340;&#33258;&#21160;&#20195;&#29702;</h3></div></div><div></div></div><p>&#19968;&#20010;&#38750;&#24120;&#37325;&#35201;&#30340;&#33258;&#21160;&#20195;&#29702;&#31867;&#22411;&#26159;&#30001;&#20803;&#25968;&#25454;&#39537;&#21160;&#30340;&#12290;&#36825;&#25552;&#20379;&#20102;&#19968;&#31181;&#21644;.NET <tt class="literal">ServicedComponents</tt>&#30456;&#20284;&#30340;&#32534;&#31243;&#27169;&#22411;&#12290;
            &#20316;&#20026;&#20351;&#29992;&#31867;&#20284;EJB&#37324;&#30340;XML&#25551;&#36848;&#31526;&#30340;&#26367;&#20195;&#65292;&#23545;&#20110;&#20107;&#21153;&#31649;&#29702;&#21644;&#20854;&#23427;&#20225;&#19994;&#26381;&#21153;&#30340;&#37197;&#32622;&#37117;&#23558;&#34987;&#20445;&#23384;&#22312;&#28304;&#20195;&#30721;&#32423;&#21035;&#30340;&#23646;&#24615;&#37324;&#12290;
        </p><p>&#22312;&#36825;&#20010;&#24773;&#20917;&#19979;&#65292;&#20320;&#20351;&#29992;<tt class="literal">DefaultAdvisorAutoProxyCreator</tt>&#21644;&#21487;&#20197;&#29702;&#35299;&#20803;&#25968;&#25454;&#23646;&#24615;&#30340;&#36890;&#30693;&#22120;&#12290;
        &#20803;&#25968;&#25454;&#34987;&#20445;&#23384;&#22312;&#20505;&#36873;&#36890;&#30693;&#22120;&#30340;&#20999;&#20837;&#28857;&#37096;&#20998;&#20013;&#65292;&#32780;&#19981;&#26159;&#22312;&#33258;&#21160;&#20195;&#29702;&#21019;&#24314;&#31867;&#26412;&#36523;&#12290;</p><p>&#36825;&#26159;&#19968;&#20010;<tt class="literal">DefaultAdvisorAutoProxyCreator</tt>&#30340;&#29305;&#27530;&#20363;&#23376;&#65292;&#23427;&#26412;&#36523;&#27809;&#26377;&#20160;&#20040;&#29305;&#21035;&#12290;&#65288;&#20803;&#25968;&#25454;&#30340;&#30456;&#20851;&#20195;&#30721;&#20445;&#23384;&#22312;&#36890;&#30693;&#22120;&#30340;&#20999;&#20837;&#28857;&#37324;&#65292;&#32780;&#19981;&#26159;AOP&#26694;&#26550;&#37324;&#65289;&#12290; </p><p>JPetStore&#31034;&#20363;&#24212;&#29992;&#31243;&#24207;&#30340;<tt class="literal">/attributes</tt> &#30446;&#24405;&#26174;&#31034;&#20102;&#22914;&#20309;&#20351;&#29992;&#21442;&#25968;&#39537;&#21160;&#30340;&#33258;&#21160;&#20195;&#29702;&#12290;&#22312;&#36825;&#20010;&#20363;&#23376;&#37324;&#65292;&#19981;&#38656;&#35201;&#20351;&#29992;<tt class="literal">TransactionProxyFactoryBean</tt>&#12290;&#22240;&#20026;&#20351;&#29992;&#20102;&#20803;&#25968;&#25454;&#30456;&#20851;&#30340;&#20999;&#20837;&#28857;&#65292;
        &#25152;&#20197;&#31616;&#21333;&#22312;&#19994;&#21153;&#23545;&#35937;&#19978;&#23450;&#20041;&#20107;&#21153;&#23646;&#24615;&#23601;&#36275;&#22815;&#20102;&#12290;&#22312;<tt class="literal">/WEB-INF/declarativeServices.xml</tt>&#37324;&#30340;bean&#23450;&#20041;&#21253;&#25324;&#20102;&#19979;&#38754;&#30340;&#29255;&#26029;&#65292;&#27880;&#24847;&#36825;&#26159;&#36890;&#29992;&#30340;&#65292;&#21487;&#20197;&#34987;&#29992;&#22312;JPetStore&#20197;&#22806;&#30340;&#22320;&#26041;&#65306;</p><p>
            </p><pre class="programlisting">&lt;bean class="org.springframework.aop.framework.autoproxy.DefaultAdvisorAutoProxyCreator"/&gt;
                
                &lt;bean class="org.springframework.transaction.interceptor.TransactionAttributeSourceAdvisor"&gt;
                &lt;property name="transactionInterceptor" ref="transactionInterceptor"/&gt;
                &lt;/bean&gt;
                
                &lt;bean id="transactionInterceptor"
                class="org.springframework.transaction.interceptor.TransactionInterceptor"&gt;
                &lt;property name="transactionManager" ref="transactionManager"/&gt;
                &lt;property name="transactionAttributeSource"&gt;
                &lt;bean class="org.springframework.transaction.interceptor.AttributesTransactionAttributeSource"&gt;
                &lt;property name="attributes" ref="attributes"/&gt;
                &lt;/bean&gt;
                &lt;/property&gt;
                &lt;/bean&gt;
                
            &lt;bean id="attributes" class="org.springframework.metadata.commons.CommonsAttributes"/&gt;</pre><p>
        </p><p><tt class="literal">DefaultAdvisorAutoProxyCreator</tt> bean&#23450;&#20041;&#65288;&#21517;&#23383;&#26159;&#19981;&#37325;&#35201;&#30340;&#65292;&#22240;&#27492;&#29978;&#33267;&#21487;&#20197;&#22312;&#23450;&#20041;&#37324;&#30465;&#30053;&#23427;&#65289;&#23558;&#22312;&#24403;&#21069;&#24212;&#29992;&#31243;&#24207;&#19978;&#19979;&#25991;&#20013;&#26597;&#25214;&#25152;&#26377;&#21512;&#36866;&#30340;&#20999;&#20837;&#28857;&#12290;&#22312;&#36825;&#20010;&#20363;&#23376;&#37324;&#65292;<tt class="literal">TransactionAttributeSourceAdvisor</tt>&#31867;&#22411;&#30340;&#8220;transactionAdvisor&#8221;bean&#23450;&#20041;&#23558;&#24212;&#29992;&#21040;&#24102;&#26377;&#19968;&#20010;&#20107;&#21153;&#23646;&#24615;&#30340;&#31867;&#25110;&#26041;&#27861;&#19978;&#12290;
            TransactionAttributeSourceAdvisor&#30340;&#26500;&#36896;&#22120;&#20381;&#36182;&#20110;&#19968;&#20010;TransactionInterceptor&#12290;&#36825;&#20010;&#20363;&#23376;&#37324;&#36890;&#36807;&#33258;&#21160;&#32455;&#20837;&#35299;&#20915;&#20102;&#36825;&#20010;&#38382;&#39064;&#12290;<tt class="literal">AttributesTransactionAttributeSource</tt>&#20381;&#36182;&#20110;&#19968;&#20010;<tt class="literal">org.springframework.metadata.Attributes</tt>&#25509;&#21475;&#30340;&#23454;&#29616;&#12290;
            &#22312;&#36825;&#20010;&#20195;&#30721;&#29255;&#26029;&#37324;&#65292;&#8220;attributes&#8221;bean&#20351;&#29992;Jakarta Commons Attributes API&#26469;&#33719;&#21462;&#23646;&#24615;&#20449;&#24687;&#20197;&#28385;&#36275;&#36825;&#20010;&#35201;&#27714;&#12290;&#65288;&#24212;&#29992;&#31243;&#24207;&#20195;&#30721;&#24517;&#39035;&#24050;&#32463;&#20351;&#29992;Commons Attribut&#26469;es&#30340;&#32534;&#35793;&#20219;&#21153;&#32534;&#35793;&#36807;&#20102;&#12290;&#65289;
        </p><p>JPetStore&#31034;&#20363;&#24212;&#29992;&#31243;&#24207;&#30340; <tt class="literal">/annotation</tt> &#30446;&#24405;&#21253;&#25324;&#20102;&#19968;&#20010;&#30001;JDK 1.5+&#27880;&#35299;&#39537;&#21160;&#30340;&#33258;&#21160;&#20195;&#29702;&#30340;&#27169;&#25311;&#20363;&#23376;&#12290;
            &#19979;&#38754;&#30340;&#37197;&#32622;&#20801;&#35768;&#33258;&#21160;&#26816;&#27979;Spring&#30340;<tt class="literal">Transactional</tt>&#27880;&#35299;&#65292;&#36825;&#21487;&#20197;&#20026;&#21253;&#21547;&#27880;&#35299;&#30340;bean&#25552;&#20379;&#38544;&#24335;&#20195;&#29702;&#65306;
        </p><p>
            </p><pre class="programlisting">&lt;bean class="org.springframework.aop.framework.autoproxy.DefaultAdvisorAutoProxyCreator"/&gt;
                
                &lt;bean class="org.springframework.transaction.interceptor.TransactionAttributeSourceAdvisor"&gt;
                &lt;property name="transactionInterceptor" ref="transactionInterceptor"/&gt;
                &lt;/bean&gt;
                
                &lt;bean id="transactionInterceptor"
                class="org.springframework.transaction.interceptor.TransactionInterceptor"&gt;
                &lt;property name="transactionManager" ref="transactionManager"/&gt;
                &lt;property name="transactionAttributeSource"&gt;
                &lt;bean class="org.springframework.transaction.annotation.AnnotationTransactionAttributeSource"/&gt;
                &lt;/property&gt;
            &lt;/bean&gt;</pre><p>
        </p><p>&#36825;&#37324;&#23450;&#20041;&#30340;<tt class="literal">TransactionInterceptor</tt>&#20381;&#36182;&#20110;&#19968;&#20010;<tt class="literal">PlatformTransactionManager</tt>&#23450;&#20041;&#65292;
            &#21518;&#32773;&#27809;&#26377;&#34987;&#21253;&#25324;&#22312;&#36825;&#20010;&#36890;&#29992;&#30340;&#25991;&#20214;&#37324;&#65288;&#34429;&#28982;&#23427;&#21487;&#20197;&#34987;&#21253;&#25324;&#22312;&#36825;&#37324;&#65289;&#22240;&#20026;&#23427;&#22312;&#24212;&#29992;&#31243;&#24207;&#30340;&#20107;&#21153;&#38656;&#27714;&#35268;&#33539;&#20013;&#25351;&#23450;&#65288;&#22312;&#36825;&#20010;&#20363;&#23376;&#37324;&#20351;&#29992;JTA&#65292;&#32780;&#22312;&#20854;&#23427;&#24773;&#20917;&#19979;&#65292;&#21487;&#20197;&#26159;Hibernate&#65292;JDO&#25110;&#32773;JDBC&#65289;&#65306;
        </p><pre class="programlisting">&lt;bean id="transactionManager" 
        class="org.springframework.transaction.jta.JtaTransactionManager"/&gt;</pre><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Tip" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Tip]" src="tip.png"></td><th align="left">Tip</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#22914;&#26524;&#20320;&#21482;&#38656;&#35201;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;&#65292;&#20351;&#29992;&#36825;&#20123;&#36890;&#29992;&#30340;XML&#23450;&#20041;&#23558;&#23548;&#33268;Spring&#33258;&#21160;&#20195;&#29702;&#25152;&#26377;&#24102;&#26377;&#20107;&#21153;&#23646;&#24615;&#30340;&#31867;&#25110;&#32773;&#26041;&#27861;&#12290;&#20320;&#23558;&#19981;&#38656;&#35201;&#30452;&#25509;&#20351;&#29992;AOP&#24037;&#20316;&#65292;
            &#36825;&#20010;&#32534;&#31243;&#27169;&#22411;&#21644;.NET&#30340;ServicedComponents&#30456;&#20284;&#12290;</p></td></tr></tbody></table></div><p>&#36825;&#20010;&#26550;&#26500;&#26159;&#21487;&#20197;&#25193;&#23637;&#30340;&#12290;&#21487;&#20197;&#22312;&#33258;&#23450;&#20041;&#23646;&#24615;&#30340;&#22522;&#30784;&#19978;&#36827;&#34892;&#33258;&#21160;&#20195;&#29702;&#12290;&#20320;&#25152;&#38656;&#35201;&#20570;&#30340;&#26159;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#23450;&#20041;&#20320;&#33258;&#24049;&#30340;&#33258;&#23450;&#20041;&#23646;&#24615;</p></li><li><p>&#20351;&#29992;&#24517;&#35201;&#30340;&#36890;&#30693;&#35828;&#26126;&#19968;&#20010;&#36890;&#30693;&#22120;&#65292;&#20063;&#21253;&#25324;&#19968;&#20010;&#20999;&#20837;&#28857;&#65292;&#21518;&#32773;&#21487;&#20197;&#34987;&#31867;&#25110;&#32773;&#26041;&#27861;&#19978;&#30340;&#33258;&#23450;&#20041;&#23646;&#24615;&#35302;&#21457;&#12290;
                    &#20320;&#20063;&#35768;&#33021;&#22815;&#20351;&#29992;&#24050;&#26377;&#30340;&#36890;&#30693;&#65292;&#32780;&#20165;&#20165;&#23454;&#29616;&#19968;&#20010;&#33021;&#22815;&#22788;&#29702;&#33258;&#23450;&#20041;&#23646;&#24615;&#30340;&#38745;&#24577;&#20999;&#20837;&#28857;&#12290;
                </p></li></ul></div><p>&#21487;&#20197;&#35753;&#36825;&#20123;&#36890;&#30693;&#22120;&#23545;&#20110;&#27599;&#20010;&#34987;&#36890;&#30693;&#23545;&#35937;&#65288;&#20363;&#22914;&#65292;mixins&#65289;&#37117;&#26159;&#21807;&#19968;&#30340;&#65306;&#20165;&#20165;&#38656;&#35201;&#22312;bean&#23450;&#20041;&#20013;&#34987;&#23450;&#20041;&#20026;&#21407;&#22411;&#32780;&#19981;&#26159;&#21333;&#20363;&#12290;
            &#20363;&#22914;&#65292;&#22312;&#19978;&#38754;&#25152;&#26174;&#31034;&#30340;Spring&#27979;&#35797;&#38598;&#20013;&#30340;<tt class="literal">LockMixin</tt>&#24341;&#20837;&#25318;&#25130;&#22120;&#21487;&#20197;&#21644;&#19968;&#20010;&#23646;&#24615;&#39537;&#21160;&#30340;&#20999;&#20837;&#28857;&#32852;&#21512;&#23450;&#20301;&#19968;&#20010;mixin&#65292;
            &#20687;&#36825;&#37324;&#26174;&#31034;&#30340;&#36825;&#26679;&#12290;&#25105;&#20204;&#20351;&#29992;&#36890;&#29992;&#30340;<tt class="literal">DefaultPointcutAdvisor</tt>&#65292;&#20351;&#29992;JavaBean&#23646;&#24615;&#36827;&#34892;&#37197;&#32622;&#65306;
        </p><p>
            </p><pre class="programlisting">&lt;bean id="lockMixin" class="org.springframework.aop.LockMixin"
                scope="prototype"/&gt;
                
                &lt;bean id="lockableAdvisor" class="org.springframework.aop.support.DefaultPointcutAdvisor"
                scope="prototype"&gt;
                &lt;property name="pointcut" ref="myAttributeAwarePointcut"/&gt;
                &lt;property name="advice" ref="lockMixin"/&gt;
                &lt;/bean&gt;
                
            &lt;bean id="anyBean" class="anyclass" ...</pre><p>
        </p><p>&#22914;&#26524;&#21442;&#25968;&#30456;&#20851;&#30340;&#20999;&#20837;&#28857;&#21305;&#37197;<tt class="literal">anyBean</tt>&#25110;&#20854;&#23427;bean&#23450;&#20041;&#37324;&#30340;&#20219;&#20309;&#26041;&#27861;&#65292;mixin&#23558;&#34987;&#24212;&#29992;&#12290;
            &#27880;&#24847;<tt class="literal">lockMixin</tt>&#21644;<tt class="literal">lockableAdvisor</tt>&#30340;&#23450;&#20041;&#37117;&#26159;&#21407;&#22411;&#12290;
            <tt class="literal">myAttributeAwarePointcut</tt>&#20999;&#20837;&#28857;&#21487;&#20197;&#26159;&#20010;&#21333;&#20363;&#65292;&#22240;&#20026;&#23427;&#27809;&#26377;&#20026;&#21333;&#20010;&#34987;&#36890;&#30693;&#23545;&#35937;&#20445;&#25345;&#29366;&#24577;&#12290;
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="aop-targetsource"></a>7.10.&nbsp;&#20351;&#29992;TargetSource</h2></div></div><div></div></div><p>Spring&#25552;&#20379;&#20102;<span class="emphasis"><em>TargetSource</em></span>&#30340;&#27010;&#24565;&#65292;&#30001;<tt class="literal">org.springframework.aop.TargetSource</tt>&#25509;&#21475;&#36827;&#34892;&#25551;&#36848;&#12290;
        &#36825;&#20010;&#25509;&#21475;&#36127;&#36131;&#36820;&#22238;&#19968;&#20010;&#23454;&#29616;&#36830;&#25509;&#28857;&#30340;&#8220;&#30446;&#26631;&#23545;&#35937;&#65288;target object&#65289;&#8221;&#12290;&#27599;&#24403;AOP&#20195;&#29702;&#22788;&#29702;&#19968;&#20010;&#26041;&#27861;&#35843;&#29992;&#26102;&#37117;&#20250;&#21521;<tt class="literal">TargetSource</tt>&#30340;&#23454;&#29616;&#35831;&#27714;&#19968;&#20010;&#30446;&#26631;&#23454;&#20363;&#12290;
    </p><p>&#20351;&#29992;Spring AOP&#30340;&#24320;&#21457;&#32773;&#36890;&#24120;&#19981;&#38656;&#35201;&#30452;&#25509;&#21644;TargetSource&#25171;&#20132;&#36947;&#65292;&#20294;&#36825;&#25552;&#20379;&#20102;&#19968;&#31181;&#24378;&#22823;&#30340;&#26041;&#24335;&#26469;&#25903;&#25345;&#27744;&#21270;&#65288;pooling&#65289;&#65292;&#28909;&#20132;&#25442;&#65288;hot swappable&#65289;&#21644;&#20854;&#23427;&#39640;&#32423;&#30446;&#26631;&#12290;
        &#20363;&#22914;&#65292;&#19968;&#20010;&#20351;&#29992;&#27744;&#26469;&#31649;&#29702;&#23454;&#20363;&#30340;TargetSource&#21487;&#20197;&#20026;&#27599;&#20010;&#35843;&#29992;&#36820;&#22238;&#19968;&#20010;&#19981;&#21516;&#30340;&#30446;&#26631;&#23454;&#20363;&#12290;
    </p><p>&#22914;&#26524;&#20320;&#19981;&#25351;&#23450;&#19968;&#20010;TargetSource&#65292;&#19968;&#20010;&#32570;&#30465;&#23454;&#29616;&#23558;&#34987;&#20351;&#29992;&#65292;&#23427;&#21253;&#35013;&#19968;&#20010;&#26412;&#22320;&#23545;&#35937;&#12290;&#23545;&#20110;&#27599;&#27425;&#35843;&#29992;&#23427;&#23558;&#36820;&#22238;&#30456;&#21516;&#30340;&#30446;&#26631;&#65288;&#20687;&#20320;&#26399;&#26395;&#30340;&#37027;&#26679;&#65289;&#12290;</p><p>&#35753;&#25105;&#20204;&#30475;&#30475;Spring&#25552;&#20379;&#30340;&#26631;&#20934;&#30446;&#26631;&#28304;&#65288;target source&#65289;&#20197;&#21450;&#22914;&#20309;&#20351;&#29992;&#23427;&#20204;&#12290;</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Tip" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Tip]" src="tip.png"></td><th align="left">Tip</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#24403;&#20351;&#29992;&#19968;&#20010;&#33258;&#23450;&#20041;&#30340;&#30446;&#26631;&#28304;&#65292;&#20320;&#30340;&#30446;&#26631;&#36890;&#24120;&#38656;&#35201;&#26159;&#19968;&#20010;&#21407;&#22411;&#32780;&#19981;&#26159;&#19968;&#20010;&#21333;&#20363;&#30340;bean&#23450;&#20041;&#12290;&#36825;&#20801;&#35768;Spring&#22312;&#24517;&#35201;&#26102;&#21019;&#24314;&#26032;&#30340;&#30446;&#26631;&#23454;&#20363;&#12290;</p></td></tr></tbody></table></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-ts-swap"></a>7.10.1.&nbsp;&#28909;&#20132;&#25442;&#30446;&#26631;&#28304;</h3></div></div><div></div></div><p><tt class="literal">org.springframework.aop.target.HotSwappableTargetSource</tt>&#20801;&#35768;&#24403;&#35843;&#29992;&#32773;&#20445;&#25345;&#24341;&#29992;&#30340;&#26102;&#20505;&#65292;&#20999;&#25442;&#19968;&#20010;AOP&#20195;&#29702;&#30340;&#30446;&#26631;&#12290;
        </p><p>&#20462;&#25913;&#30446;&#26631;&#28304;&#30340;&#30446;&#26631;&#23558;&#31435;&#21363;&#29983;&#25928;&#12290;
        <tt class="literal">HotSwappableTargetSource</tt>&#26159;&#32447;&#31243;&#23433;&#20840;&#30340;&#12290;</p><p>&#20320;&#21487;&#20197;&#36890;&#36807;HotSwappableTargetSource&#30340; <tt class="literal">swap()</tt>&#26041;&#27861;&#26469;&#25913;&#21464;&#30446;&#26631;&#65292;&#23601;&#20687;&#19979;&#38754;&#37027;&#26679;&#65306;
        </p><p>
            </p><pre class="programlisting">HotSwappableTargetSource swapper = 
                (HotSwappableTargetSource) beanFactory.getBean("swapper");
            Object oldTarget = swapper.swap(newTarget);</pre><p>
        </p><p>&#25152;&#38656;&#30340;XML&#23450;&#20041;&#30475;&#36215;&#26469;&#20687;&#19979;&#38754;&#36825;&#26679;&#65306;</p><p>
            </p><pre class="programlisting">&lt;bean id="initialTarget" class="mycompany.OldTarget"/&gt;
                
                &lt;bean id="swapper" class="org.springframework.aop.target.HotSwappableTargetSource"&gt;
                &lt;constructor-arg ref="initialTarget"/&gt;
                &lt;/bean&gt;
                
                &lt;bean id="swappable" class="org.springframework.aop.framework.ProxyFactoryBean"&gt;
                &lt;property name="targetSource" ref="swapper"/&gt;
            &lt;/bean&gt;</pre><p>
        </p><p>&#19978;&#38754;&#30340;<tt class="literal">swap()</tt>&#35843;&#29992;&#20462;&#25913;&#20102;swappable bean&#30340;&#30446;&#26631;&#12290;&#20445;&#25345;&#23545;&#36825;&#20010;bean&#30340;&#24341;&#29992;&#30340;&#23458;&#25143;&#23558;&#19981;&#30693;&#36947;&#21457;&#29983;&#20102;&#36825;&#20010;&#20462;&#25913;&#65292;&#20294;&#26159;&#23558;&#21487;&#20197;&#31435;&#21363;&#28857;&#20987;&#26032;&#30340;&#30446;&#26631;&#12290;</p><p>&#36825;&#20010;&#20363;&#23376;&#27809;&#26377;&#28155;&#21152;&#20219;&#20309;&#36890;&#30693;--&#20063;&#19981;&#24517;&#20026;&#20351;&#29992;&#19968;&#20010;<tt class="literal">TargetSource</tt>&#28155;&#21152;&#20219;&#20309;&#36890;&#30693;--&#24403;&#28982;&#20219;&#20309;<tt class="literal">TargetSource</tt>&#37117;&#21487;&#20197;&#19982;&#20219;&#24847;&#36890;&#30693;&#32852;&#21512;&#20351;&#29992;&#12290;
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-ts-pool"></a>7.10.2.&nbsp;&#27744;&#21270;&#30446;&#26631;&#28304;</h3></div></div><div></div></div><p>&#20351;&#29992;&#19968;&#20010;&#27744;&#21270;&#30446;&#26631;&#28304;&#25552;&#20379;&#20102;&#21644;&#26080;&#29366;&#24577;session EJB&#31867;&#20284;&#30340;&#32534;&#31243;&#27169;&#22411;&#65292;&#23427;&#32500;&#25252;&#19968;&#20010;&#21253;&#25324;&#30456;&#21516;&#23454;&#20363;&#30340;&#27744;&#65292;&#26041;&#27861;&#35843;&#29992;&#32467;&#26463;&#21518;&#23558;&#25226;&#23545;&#35937;&#37322;&#25918;&#22238;&#27744;&#20013;&#12290;</p><p>Spring&#27744;&#21270;&#21644;SLSB&#27744;&#21270;&#20043;&#38388;&#30340;&#19968;&#20010;&#20915;&#23450;&#24615;&#21306;&#21035;&#26159;Spring&#27744;&#21270;&#21151;&#33021;&#21487;&#20197;&#29992;&#20110;&#20219;&#20309;POJO&#12290;&#23601;&#20687;Spring&#36890;&#24120;&#24773;&#20917;&#19979;&#37027;&#26679;&#65292;&#36825;&#20010;&#26381;&#21153;&#26159;&#38750;&#20405;&#20837;&#24335;&#30340;&#12290;</p><p>Spring&#23545;Jakarta Commons Pool 1.3&#25552;&#20379;&#20102;&#24320;&#31665;&#21363;&#29992;&#30340;&#25903;&#25345;&#65292;&#21518;&#32773;&#25552;&#20379;&#20102;&#19968;&#20010;&#30456;&#24403;&#26377;&#25928;&#30340;&#27744;&#21270;&#23454;&#29616;&#12290;&#35201;&#20351;&#29992;&#36825;&#20010;&#29305;&#24615;&#65292;&#20320;&#38656;&#35201;&#22312;&#24212;&#29992;&#31243;&#24207;&#36335;&#24452;&#20013;&#23384;&#22312;commons-pool&#30340;Jar&#25991;&#20214;&#12290;
            &#20063;&#21487;&#20197;&#36890;&#36807;&#32487;&#25215;<tt class="literal">org.springframework.aop.target.AbstractPoolingTargetSource</tt>&#26469;&#25903;&#25345;&#20854;&#23427;&#30340;&#27744;&#21270;API&#12290;
        </p><p>&#19979;&#38754;&#26159;&#31034;&#20363;&#37197;&#32622;&#65306;</p><p>
            </p><pre class="programlisting">&lt;bean id="businessObjectTarget" class="com.mycompany.MyBusinessObject" 
                scope="prototype"&gt;
                ... properties omitted
                &lt;/bean&gt;
                
                &lt;bean id="poolTargetSource" class="org.springframework.aop.target.CommonsPoolTargetSource"&gt;
                &lt;property name="targetBeanName" value="businessObjectTarget"/&gt;
                &lt;property name="maxSize" value="25"/&gt;
                &lt;/bean&gt;
                
                &lt;bean id="businessObject" class="org.springframework.aop.framework.ProxyFactoryBean"&gt;
                &lt;property name="targetSource" ref="poolTargetSource"/&gt;
                &lt;property name="interceptorNames" value="myInterceptor"/&gt;
            &lt;/bean&gt;</pre><p>
        </p><p>&#27880;&#24847;&#30446;&#26631;&#23545;&#35937;--&#20363;&#23376;&#37324;&#30340;&#8220;businessObjectTarget&#8221;--<span class="emphasis"><em>&#24517;&#39035;</em></span>&#26159;&#20010;&#21407;&#22411;&#12290;
            &#36825;&#20801;&#35768;<tt class="literal">PoolingTargetSource</tt>&#30340;&#23454;&#29616;&#22312;&#24517;&#35201;&#26102;&#20026;&#30446;&#26631;&#21019;&#24314;&#26032;&#30340;&#23454;&#20363;&#26469;&#22686;&#22823;&#27744;&#30340;&#23481;&#37327;&#12290;
            &#26597;&#30475;<tt class="literal">AbstractPoolingTargetSource</tt>&#21644;&#20320;&#24819;&#35201;&#20351;&#29992;&#30340;&#20855;&#20307;&#23376;&#31867;&#30340;Javadoc&#33719;&#21462;&#26356;&#22810;&#20851;&#20110;&#23427;&#23646;&#24615;&#30340;&#20449;&#24687;&#65306;maxSize&#26159;&#26368;&#22522;&#30784;&#30340;&#65292;&#32780;&#19988;&#27704;&#36828;&#37117;&#35201;&#27714;&#34987;&#25552;&#20379;&#12290;
        </p><p>&#22312;&#36825;&#20010;&#20363;&#23376;&#37324;&#65292;&#8220;myInterceptor&#8221;&#26159;&#19968;&#20010;&#25318;&#25130;&#22120;&#30340;&#21517;&#23383;&#65292;&#36825;&#20010;&#25318;&#25130;&#22120;&#38656;&#35201;&#22312;&#21516;&#19968;&#20010;IoC&#19978;&#19979;&#25991;&#20013;&#34987;&#23450;&#20041;&#12290;&#28982;&#32780;&#65292;&#23450;&#20041;&#23545;&#25318;&#25130;&#22120;&#36827;&#34892;&#27744;&#21270;&#26159;&#19981;&#24517;&#35201;&#30340;&#12290;
            &#22914;&#26524;&#20320;&#24819;&#35201;&#30340;&#21482;&#26159;&#27744;&#21270;&#32780;&#27809;&#26377;&#20854;&#23427;&#36890;&#30693;&#65292;&#23601;&#19981;&#35201;&#35774;&#32622;interceptorNames&#23646;&#24615;&#12290;
        </p><p>&#21487;&#20197;&#37197;&#32622;Spring&#26469;&#25226;&#20219;&#20309;&#34987;&#27744;&#21270;&#23545;&#35937;&#36716;&#22411;&#21040;<tt class="literal">org.springframework.aop.target.PoolingConfig</tt>&#25509;&#21475;&#65292;
            &#36825;&#36890;&#36807;&#19968;&#20010;introduction&#26292;&#38706;&#37197;&#32622;&#20197;&#21450;&#24403;&#21069;&#27744;&#30340;&#22823;&#23567;&#12290;&#20320;&#38656;&#35201;&#20687;&#36825;&#26679;&#23450;&#20041;&#19968;&#20010;&#36890;&#30693;&#22120;&#65306;
        </p><p>
            </p><pre class="programlisting">&lt;bean id="poolConfigAdvisor" class="org.springframework.beans.factory.config.MethodInvokingFactoryBean"&gt;
                &lt;property name="targetObject" ref="poolTargetSource"/&gt;
                &lt;property name="targetMethod" value="getPoolingConfigMixin"/&gt;
            &lt;/bean&gt;</pre><p>
        </p><p>&#36825;&#20010;&#36890;&#30693;&#22120;&#21487;&#20197;&#36890;&#36807;&#35843;&#29992;<tt class="literal">AbstractPoolingTargetSource</tt>&#31867;&#19978;&#30340;&#19968;&#20010;&#26041;&#20415;&#30340;&#26041;&#27861;&#26469;&#33719;&#24471;&#65292;&#22240;&#27492;&#36825;&#37324;&#20351;&#29992;MethodInvokingFactoryBean&#12290;
            &#36825;&#20010;&#36890;&#30693;&#22120;&#21517;&#65288;&#36825;&#37324;&#26159;&#8220;poolConfigAdvisor&#8221;&#65289;&#24517;&#39035;&#22312;&#25552;&#20379;&#34987;&#27744;&#21270;&#23545;&#35937;&#30340;ProxyFactoryBean&#37324;&#30340;&#25318;&#25130;&#22120;&#21517;&#21015;&#34920;&#37324;&#20013;&#12290;
        </p><p>&#36716;&#22411;&#30475;&#36215;&#26469;&#20687;&#36825;&#26679;&#65306;</p><pre class="programlisting">PoolingConfig conf = (PoolingConfig) beanFactory.getBean("businessObject");
        System.out.println("Max pool size is " + conf.getMaxSize());</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#27744;&#21270;&#26080;&#29366;&#24577;&#26381;&#21153;&#23545;&#35937;&#36890;&#24120;&#26159;&#19981;&#24517;&#35201;&#30340;&#12290;&#25105;&#20204;&#19981;&#35748;&#20026;&#36825;&#65288;&#27744;&#21270;&#65289;&#24212;&#24403;&#26159;&#32570;&#30465;&#30340;&#36873;&#25321;&#65292;&#22240;&#20026;&#22810;&#25968;&#26080;&#29366;&#24577;&#23545;&#35937;&#26159;&#20808;&#22825;&#32447;&#31243;&#23433;&#20840;&#30340;&#65292;&#22914;&#26524;&#36164;&#28304;&#34987;&#32531;&#23384;&#65292;&#37027;&#20040;&#23545;&#23454;&#20363;&#36827;&#34892;&#27744;&#21270;&#20250;&#24341;&#36215;&#24456;&#22810;&#38382;&#39064;&#12290;</p></td></tr></tbody></table></div><p>&#20351;&#29992;&#33258;&#21160;&#20195;&#29702;&#26102;&#27744;&#21270;&#26356;&#21152;&#31616;&#21333;&#12290;&#21487;&#20197;&#20026;&#20219;&#20309;&#33258;&#21160;&#20195;&#29702;&#21019;&#24314;&#22120;&#35774;&#32622;&#25152;&#20351;&#29992;&#30340;TargetSource</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-ts-prototype"></a>7.10.3.&nbsp;&#21407;&#22411;&#30446;&#26631;&#28304;</h3></div></div><div></div></div><p>&#24314;&#31435;&#19968;&#20010;&#8220;&#21407;&#22411;&#8221;&#30446;&#26631;&#28304;&#21644;&#27744;&#21270;TargetSource&#24456;&#30456;&#20284;&#12290;&#22312;&#36825;&#20010;&#20363;&#23376;&#37324;&#65292;&#24403;&#27599;&#27425;&#26041;&#27861;&#35843;&#29992;&#26102;&#65292;&#23558;&#21019;&#24314;&#19968;&#20010;&#30446;&#26631;&#30340;&#26032;&#23454;&#20363;&#12290;
        &#34429;&#28982;&#22312;&#26032;&#29256;&#26412;&#30340;JVM&#20013;&#21019;&#24314;&#19968;&#20010;&#26032;&#23545;&#35937;&#30340;&#20195;&#20215;&#24182;&#19981;&#39640;&#65292;&#20294;&#26159;&#25226;&#26032;&#23545;&#35937;&#32455;&#20837;&#65288;&#28385;&#36275;&#23427;&#30340;IoC&#20381;&#36182;&#65289;&#21487;&#33021;&#26159;&#24456;&#26114;&#36149;&#30340;&#12290;&#22240;&#27492;&#22914;&#26524;&#27809;&#26377;&#24456;&#22909;&#30340;&#29702;&#30001;&#65292;&#20320;&#19981;&#24212;&#35813;&#20351;&#29992;&#36825;&#20010;&#26041;&#27861;&#12290;</p><p>&#20026;&#20102;&#20570;&#21040;&#36825;&#28857;&#65292;&#20320;&#21487;&#20197;&#25226;&#19978;&#38754;&#30340;<tt class="literal">poolTargetSource</tt>&#23450;&#20041;&#20462;&#25913;&#25104;&#19979;&#38754;&#30340;&#24418;&#24335;&#12290;&#65288;&#20026;&#20102;&#28165;&#26970;&#35828;&#26126;&#65292;&#20462;&#25913;&#20102;bean&#30340;&#21517;&#23383;&#12290;&#65289; </p><pre class="programlisting">&lt;bean id="prototypeTargetSource" class="org.springframework.aop.target.PrototypeTargetSource"&gt;
  &lt;property name="targetBeanName" ref="businessObjectTarget"/&gt;
        &lt;/bean&gt;</pre><p>&#36825;&#37324;&#21482;&#26377;&#19968;&#20010;&#23646;&#24615;&#65306;&#30446;&#26631;bean&#30340;&#21517;&#23383;&#12290;TargetSource&#30340;&#23454;&#29616;&#20351;&#29992;&#32487;&#25215;&#26469;&#30830;&#20445;&#21629;&#21517;&#30340;&#19968;&#33268;&#24615;&#12290;&#23601;&#20687;&#27744;&#21270;&#30446;&#26631;&#28304;&#37027;&#26679;&#65292;&#30446;&#26631;bean&#24517;&#39035;&#26159;&#19968;&#20010;&#21407;&#22411;&#30340;bean&#23450;&#20041;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="aop-ts-threadlocal"></a>7.10.4.&nbsp;<tt class="classname">ThreadLocal</tt>&#30446;&#26631;&#28304;</h3></div></div><div></div></div><p>&#22914;&#26524;&#20320;&#38656;&#35201;&#20026;&#27599;&#20010;&#36827;&#26469;&#30340;&#35831;&#27714;&#65288;&#21363;&#27599;&#20010;&#32447;&#31243;&#65289;&#21019;&#24314;&#19968;&#20010;&#23545;&#35937;&#65292;<tt class="classname">ThreadLocal</tt>&#30446;&#26631;&#28304;&#26159;&#24456;&#26377;&#29992;&#30340;&#12290;
            <tt class="classname">ThreadLocal</tt>&#30340;&#27010;&#24565;&#25552;&#20379;&#20102;&#19968;&#20010;JDK&#33539;&#22260;&#30340;&#21151;&#33021;&#65292;&#36825;&#21487;&#20197;&#20026;&#19968;&#20010;&#32447;&#31243;&#36879;&#26126;&#30340;&#20445;&#23384;&#36164;&#28304;&#12290;&#24314;&#31435;&#19968;&#20010;
        <tt class="classname">ThreadLocalTargetSource</tt>&#30340;&#36807;&#31243;&#21644;&#20854;&#23427;&#30446;&#26631;&#28304;&#20960;&#20046;&#23436;&#20840;&#19968;&#26679;&#65306;</p><pre class="programlisting">&lt;bean id="threadlocalTargetSource" class="org.springframework.aop.target.ThreadLocalTargetSource"&gt;
  &lt;property name="targetBeanName" value="businessObjectTarget"/&gt;
        &lt;/bean&gt;</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#22914;&#26524;&#19981;&#27491;&#30830;&#30340;&#22312;&#19968;&#20010;&#22810;&#32447;&#31243;&#21644;&#22810;&#31867;&#21152;&#36733;&#22120;&#30340;&#29615;&#22659;&#37324;&#20351;&#29992;ThreadLocal&#65292;&#23558;&#24102;&#26469;&#20005;&#37325;&#30340;&#38382;&#39064;&#65288;&#21487;&#33021;&#28508;&#22312;&#22320;&#23548;&#33268;&#20869;&#23384;&#27844;&#28431;&#65289;&#12290;
                &#27704;&#36828;&#35760;&#20303;&#24212;&#35813;&#25226;&#19968;&#20010;threadlocal&#21253;&#35013;&#22312;&#20854;&#23427;&#30340;&#31867;&#37324;&#65292;&#24182;&#27704;&#36828;&#19981;&#35201;&#30452;&#25509;&#20351;&#29992;<tt class="classname">ThreadLocal</tt>&#26412;&#36523;&#65288;&#24403;&#28982;&#26159;&#38500;&#20102;threadlocal&#21253;&#35013;&#31867;&#20043;&#22806;&#65289;&#12290;
                &#21516;&#26102;&#65292;&#27704;&#36828;&#35760;&#20303;&#27491;&#30830;&#30340;&#35774;&#32622;&#65288;set&#65289;&#21644;&#21462;&#28040;&#65288;unset&#65289;&#65288;&#21518;&#32773;&#20165;&#20165;&#38656;&#35201;&#35843;&#29992;<tt class="literal">ThreadLocal.set(null)</tt>&#65289;&#32465;&#23450;&#21040;&#32447;&#31243;&#30340;&#26412;&#22320;&#36164;&#28304;&#12290;
            &#21462;&#28040;&#22312;&#20219;&#20309;&#24773;&#20917;&#19979;&#37117;&#24212;&#35813;&#36827;&#34892;&#65292;&#21542;&#21017;&#20063;&#35768;&#20250;&#23548;&#33268;&#38169;&#35823;&#30340;&#34892;&#20026;&#12290;Spring&#30340;ThreadLocal&#25903;&#25345;&#23558;&#20026;&#20320;&#22788;&#29702;&#36825;&#20010;&#38382;&#39064;&#65292;&#25152;&#20197;&#22914;&#26524;&#27809;&#26377;&#20854;&#23427;&#27491;&#30830;&#30340;&#22788;&#29702;&#20195;&#30721;&#65292;&#27704;&#36828;&#24212;&#35813;&#32771;&#34385;&#20351;&#29992;&#36825;&#20010;&#21151;&#33021;&#12290;</p></td></tr></tbody></table></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="aop-extensibility"></a>7.11.&nbsp;&#23450;&#20041;&#26032;&#30340;<tt class="interfacename">Advice</tt>&#31867;&#22411;</h2></div></div><div></div></div><p>Spring AOP&#34987;&#35774;&#35745;&#20026;&#21487;&#25193;&#23637;&#30340;&#12290;&#36890;&#36807;&#22312;&#20869;&#37096;&#20351;&#29992;&#25318;&#25130;&#23454;&#29616;&#31574;&#30053;&#65292;&#20320;&#21487;&#20197;&#25903;&#25345;&#24050;&#26377;&#30340;&#29615;&#32469;&#36890;&#30693;&#65292;&#21069;&#32622;&#36890;&#30693;&#65292;&#24322;&#24120;&#36890;&#30693;&#21644;&#21518;&#32622;&#36890;&#30693;&#20043;&#22806;&#30340;&#20219;&#24847;&#36890;&#30693;&#31867;&#22411;&#65292;&#23427;&#26159;&#24320;&#31665;&#21363;&#29992;&#30340;&#12290;</p><p><tt class="literal">org.springframework.aop.framework.adapter</tt>&#21253;&#26159;&#19968;&#20010;SPI&#21253;&#65292;&#23427;&#20801;&#35768;&#28155;&#21152;&#26032;&#30340;&#33258;&#23450;&#20041;&#36890;&#30693;&#31867;&#22411;&#32780;&#26080;&#38656;&#20462;&#25913;&#26680;&#24515;&#26694;&#26550;&#12290;
    &#23545;&#20110;&#33258;&#23450;&#20041;<tt class="interfacename">Advice</tt>&#31867;&#22411;&#30340;&#21807;&#19968;&#30340;&#38480;&#21046;&#26159;&#23427;&#24517;&#39035;&#23454;&#29616;<tt class="interfacename">org.aopalliance.aop.Advice</tt>&#36825;&#20010;&#26631;&#35760;&#25509;&#21475;&#12290;
</p><p>&#35831;&#21442;&#32771;<tt class="literal">org.springframework.aop.framework.adapter</tt>&#21253;&#30340;Javadoc&#26469;&#20102;&#35299;&#36827;&#19968;&#27493;&#30340;&#20449;&#24687;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="aop-api-resources"></a>7.12.&nbsp;&#26356;&#22810;&#36164;&#28304;</h2></div></div><div></div></div><p>&#21487;&#20197;&#21442;&#32771;Spring&#30340;&#31034;&#20363;&#24212;&#29992;&#31243;&#24207;&#26469;&#26597;&#30475;Spring AOP&#30340;&#26356;&#22810;&#20363;&#23376;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>JPetStore&#30340;&#32570;&#30465;&#37197;&#32622;&#35828;&#26126;&#20102;&#22914;&#20309;&#20351;&#29992;<tt class="classname">TransactionProxyFactoryBean</tt>&#26469;&#36827;&#34892;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;&#12290;</p></li><li><p>JPetStore&#30340;<tt class="literal">/attributes</tt>&#30446;&#24405;&#35828;&#26126;&#20102;&#22914;&#20309;&#20351;&#29992;&#23646;&#24615;&#39537;&#21160;&#30340;&#22768;&#26126;&#24615;&#20107;&#21153;&#31649;&#29702;&#12290;</p></li></ul></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="testing"></a>Chapter&nbsp;8.&nbsp;&#27979;&#35797;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="testing-introduction"></a>8.1.&nbsp;&#31616;&#20171;</h2></div></div><div></div></div><p>Spring&#22242;&#38431;&#35748;&#20026;&#27979;&#35797;&#26159;&#25972;&#20010;&#20225;&#19994;&#36719;&#20214;&#24320;&#21457;&#24517;&#19981;&#21487;&#23569;&#30340;&#19968;&#37096;&#20998;&#12290;&#26377;&#20851;&#20225;&#19994;&#36719;&#20214;&#27979;&#35797;&#30340;&#35814;&#32454;&#35752;&#35770;&#24050;&#32463;&#36229;&#20986;&#20102;&#26412;&#31456;&#30340;&#33539;&#22260;&#65292;&#36825;&#37324;&#20027;&#35201;&#20851;&#27880;&#37319;&#29992;IoC&#21407;&#21017;&#32473;<a href="#unit-testing" title="8.2.&nbsp;&#21333;&#20803;&#27979;&#35797;">&#21333;&#20803;&#27979;&#35797;</a>&#24102;&#26469;&#30340;&#20215;&#20540;&#20197;&#21450;Spring&#26694;&#26550;&#22312;<a href="#integration-testing" title="8.3.&nbsp;&#38598;&#25104;&#27979;&#35797;">&#38598;&#25104;&#27979;&#35797;</a>&#20013;&#24102;&#26469;&#30340;&#20999;&#23454;&#22909;&#22788;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="unit-testing"></a>8.2.&nbsp;&#21333;&#20803;&#27979;&#35797;</h2></div></div><div></div></div><p>&#37319;&#29992;&#20381;&#36182;&#27880;&#23556;&#30340;&#19968;&#20010;&#20027;&#35201;&#22909;&#22788;&#26159;&#20320;&#30340;&#20195;&#30721;&#23545;&#23481;&#22120;&#30340;&#20381;&#36182;&#23558;&#27604;&#20256;&#32479;J2EE&#24320;&#21457;&#23567;&#30340;&#22810;&#12290;<span class="emphasis"><em>&#26080;&#38656;Spring&#25110;&#20219;&#20309;&#20854;&#20182;&#23481;&#22120;</em></span>&#65292;&#21482;&#35201;&#31616;&#21333;&#22320;&#36890;&#36807; <tt class="literal">new</tt> &#25805;&#20316;&#31526;&#21363;&#21487;&#23454;&#20363;&#21270;&#23545;&#35937;&#65292;&#36890;&#36807;&#36825;&#31181;&#26041;&#24335;,&#32452;&#25104;&#20320;&#24212;&#29992;&#30340;POJO&#23545;&#35937;&#23601;&#21487;&#20197;&#20351;&#29992;JUnit&#25110;TestNG&#36827;&#34892;&#27979;&#35797;&#20102;&#12290;&#20320;&#21487;&#20197;&#20351;&#29992;<a href="#mock-objects" title="8.2.1.&nbsp;Mock&#23545;&#35937;">Mock&#23545;&#35937;</a>(&#25110;&#32773;&#20854;&#20182;&#24456;&#22810;&#26377;&#20215;&#20540;&#30340;&#27979;&#35797;&#25216;&#26415;&#26469;&#36827;&#34892;&#38548;&#31163;&#27979;&#35797;)&#12290;&#22914;&#26524;&#20320;&#30340;&#24212;&#29992;&#22312;&#26550;&#26500;&#19978;&#36981;&#24490;&#20102;Spring&#30340;&#24314;&#35758;&#65292;&#37027;&#20040;&#20320;&#30340;&#20195;&#30721;&#23558;&#20250;&#26377;&#28165;&#26224;&#30340;&#23618;&#27425;&#21644;&#39640;&#24230;&#30340;&#27169;&#22359;&#21270;&#65292;&#36825;&#20123;&#37117;&#23558;&#22823;&#22823;<span class="emphasis"><em>&#26041;&#20415;</em></span>&#21333;&#20803;&#27979;&#35797;&#12290;&#20363;&#22914;&#65292;&#22312;&#21333;&#20803;&#27979;&#35797;&#20013;&#20320;&#21487;&#20197;&#36890;&#36807;stub(&#21344;&#20301;)&#25110;&#32773;mock(&#27169;&#20223;)DAO&#25110;&#32773;Repository(&#24211;)&#25509;&#21475;&#30340;&#26041;&#24335;&#65292;&#26469;&#27979;&#35797;&#26381;&#21153;&#23618;&#23545;&#35937;&#65292;&#32780;&#26080;&#38656;&#35775;&#38382;&#25345;&#20037;&#21270;&#25968;&#25454;&#12290;</p><p>&#30495;&#27491;&#30340;&#21333;&#20803;&#27979;&#35797;&#36816;&#34892;&#36215;&#26469;&#36890;&#24120;&#37117;&#38750;&#24120;&#36805;&#36895;&#65292;&#22240;&#20026;&#27809;&#26377;&#24212;&#29992;&#26381;&#21153;&#22120;&#65292;&#25968;&#25454;&#24211;&#65292;ORM&#24037;&#20855;&#31561;&#36816;&#34892;&#35774;&#26045;&#38656;&#35201;&#35774;&#32622;&#12290;&#22240;&#27492;&#22312;&#20320;&#30340;&#24320;&#21457;&#26041;&#27861;&#35770;&#20013;&#65292;&#27491;&#30830;&#23545;&#24453;&#21333;&#20803;&#27979;&#35797;&#21487;&#20197;&#22823;&#22823;&#25552;&#39640;&#20320;&#30340;&#29983;&#20135;&#21147;&#12290;&#22914;&#26524;&#20320;&#26377;&#19968;&#20123;&#22522;&#20110;IoC&#30340;&#24212;&#29992;&#65292;&#37027;&#36890;&#24120;&#24182;&#19981;&#38656;&#35201;&#19987;&#38376;&#30340;&#19968;&#31456;&#8220;&#27979;&#35797;&#8221;&#26469;&#24110;&#21161;&#20320;&#32534;&#20889;&#26377;&#25928;&#30340; <span class="emphasis"><em>&#21333;&#20803;</em></span> &#27979;&#35797;&#12290;&#20294;&#20026;&#20102;&#19968;&#20123;&#29305;&#23450;&#30340;&#21333;&#20803;&#27979;&#35797;&#22330;&#26223;&#65292;Spring&#26694;&#26550;&#25552;&#20379;&#20102;&#22914;&#19979;mock&#23545;&#35937;&#21644;&#27979;&#35797;&#25903;&#25345;&#31867;&#65306;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mock-objects"></a>8.2.1.&nbsp;Mock&#23545;&#35937;</h3></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mock-objects-jndi"></a>8.2.1.1.&nbsp;JNDI</h4></div></div><div></div></div><p><tt class="literal">org.springframework.mock.jndi</tt> &#21253;&#37324;&#26377;&#19968;&#20010;JNDI SPI&#30340;&#23454;&#29616;&#65292;&#23427;&#21487;&#20197;&#29992;&#26469;&#25645;&#24314;&#19968;&#20010;&#20026;&#27979;&#35797;&#22871;&#20214;&#25110;&#21333;&#26426;&#24212;&#29992;&#25152;&#20351;&#29992;&#30340;&#31616;&#21333;JNDI&#29615;&#22659;&#12290;&#20363;&#22914;&#65292;&#19982;&#30456;&#21516;&#30340;JNDI&#21517;&#31216;&#32465;&#23450;&#30340;&#27979;&#35797;&#20195;&#30721;&#20013;&#30340;<font color="red">&lt;font&gt;&lt;/font&gt;</font>JDBC <tt class="classname">DataSource</tt>&#65292;&#23601;&#20687;&#22312;J2EE&#23481;&#22120;&#20013;&#19968;&#26679;&#65292;&#24212;&#29992;&#20195;&#30721;&#21644;&#37197;&#32622;&#37117;&#21487;&#20197;&#26080;&#38656;&#20462;&#25913;&#22312;&#27979;&#35797;&#22330;&#26223;&#37325;&#29992;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mock-objects-servlet"></a>8.2.1.2.&nbsp;Servlet API</h4></div></div><div></div></div><p><tt class="literal">org.springframework.mock.web</tt> &#21253;&#26377;&#19968;&#32452;Servlet API &#30340;&#24456;&#35814;&#23613;&#30340;mock&#23545;&#35937;&#65292;&#20027;&#35201;&#38754;&#21521;Spring Web MVC &#26694;&#26550;&#65292;&#33021;&#26041;&#20415;&#30340;&#27979;&#35797;web&#19978;&#19979;&#25991;&#21644;&#25511;&#21046;&#22120;&#12290;&#36825;&#20123;mock&#23545;&#35937;&#36890;&#24120;&#27604;&#20351;&#29992;&#21160;&#24577;mock&#23545;&#35937;&#26356;&#26041;&#20415;&#65288;&#20363;&#22914; <a href="http://www.easymock.org/" target="_top">EasyMock</a>) &#25110;&#24050;&#26377;&#30340;Servlet API mock&#23545;&#35937;(&#22914; <a href="http://www.mockobjects.com/" target="_top">MockObjects</a>).</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mock-objects-portlet"></a>8.2.1.3.&nbsp;Portlet API</h4></div></div><div></div></div><p><tt class="literal">org.springframework.mock.web.portlet</tt>&#21253;&#26377;&#19968;&#32452;Portlet API mock&#23545;&#35937;&#65292;&#38754;&#21521;Spring Portlet MVC&#26694;&#26550;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="unit-testing-support-classes"></a>8.2.2.&nbsp;&#21333;&#20803;&#27979;&#35797;&#25903;&#25345;&#31867;</h3></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="unit-testing-utilities"></a>8.2.2.1.&nbsp;&#36890;&#29992;&#24037;&#20855;&#31867;</h4></div></div><div></div></div><p><tt class="literal">org.springframework.test.util</tt>&#21253;&#20869;&#26377;<tt class="classname">ReflectionTestUtils</tt>&#12290;
        &#23427;&#26159;&#22522;&#20110;&#21453;&#23556;&#30340;&#24037;&#20855;&#26041;&#27861;&#38598;&#65292;&#29992;&#22312;&#21333;&#20803;&#27979;&#35797;&#21644;&#38598;&#25104;&#27979;&#35797;&#22330;&#26223;&#20013;&#12290;&#24320;&#21457;&#32773;&#21487;&#20197;&#22312;&#27979;&#35797;&#24212;&#29992;&#20195;&#30721;&#26102;&#65292;&#35774;&#32622;&#38750;<tt class="literal">public</tt>
        &#30340;&#23383;&#27573;&#25110;&#32773;&#35843;&#29992;&#38750;<tt class="literal">public</tt>&#30340; setter&#26041;&#27861;&#65292;&#20363;&#22914;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>ORM&#26694;&#26550;&#22914;JPA&#21644;Hibernate&#33021;&#22815;&#20351;&#29992; <tt class="literal">public</tt> Setter&#26041;&#27861;&#35775;&#38382;<tt class="literal">private</tt>&#25110;<tt class="literal">protected</tt>&#23383;&#27573;&#20197;&#33719;&#24471;&#19968;&#20010;&#22495;&#23454;&#20363;&#30340;&#23646;&#24615;</p></li><li><p>Spring&#25903;&#25345;&#22914;<tt class="interfacename">@Autowired</tt>&#21644;<tt class="interfacename">@Resource</tt>&#27880;&#35299;&#26469;&#25552;&#20379;<tt class="literal">private</tt>&#25110;<tt class="literal">protected</tt>&#23383;&#27573;&#12289;setter&#26041;&#27861;&#21644;&#37197;&#32622;&#26041;&#27861;&#30340;&#20381;&#36182;&#27880;&#20837;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="unit-testing-spring-mvc"></a>8.2.2.2.&nbsp;Spring MVC</h4></div></div><div></div></div><p><tt class="literal">org.springframework.test.web</tt>&#21253;&#21547;&#26377;<tt class="classname">AbstractModelAndViewTests</tt>&#31867;&#65292;&#23427;&#21487;&#20197;&#20316;&#20026;&#22522;&#20110;JUnit 3.8&#30340;&#21333;&#20803;&#27979;&#35797;&#22522;&#31867;&#26469;&#22788;&#29702;Spring MVC <tt class="classname">ModelAndView</tt>&#23545;&#35937;&#12290;&#24403;&#22522;&#20110;Java 1.4 &#25110;&#26356;&#39640;&#30340;&#29256;&#26412;&#65288;&#20363;&#22914;&#19982;JUnit 4+, TestNG&#31561;&#32465;&#23450;&#65289;&#26102;&#65292;&#20320;&#21487;&#20197;&#36873;&#25321;&#20351;&#29992;<tt class="classname">ModelAndViewAssert</tt>&#31867;&#65288;&#22312;&#30456;&#21516;&#21253;&#20013;&#65289;&#26469;&#27979;&#35797; <tt class="classname">ModelAndView</tt>&#30456;&#20851;&#21151;&#33021;&#12290;</p><p>&#25552;&#31034;: &#26681;&#25454;&#20320;&#30340;&#27979;&#35797;&#29615;&#22659;&#65292;&#21487;&#20197;&#25193;&#23637;
        <tt class="classname">AbstractModelAndViewTests</tt>&#25110;&#30452;&#25509;&#20351;&#29992;
        <tt class="classname">ModelAndViewAssert</tt>&#65292;&#28982;&#21518;&#20351;&#29992;
        <tt class="literal">MockHttpServletRequest</tt>,
        <tt class="literal">MockHttpSession</tt>&#31561;&#12290;&#36825;&#20123;&#31867;&#22312;<a href="#mock-objects-servlet" title="8.2.1.2.&nbsp;Servlet API"><tt class="literal">org.springframework.mock.web</tt></a>
        &#21253;&#20013;&#65292;&#29992;&#26469;&#27979;&#35797;Spring MVC <tt class="literal">Controller</tt>.</p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="integration-testing"></a>8.3.&nbsp;&#38598;&#25104;&#27979;&#35797;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="integration-testing-overview"></a>8.3.1.&nbsp;&#27010;&#35272;</h3></div></div><div></div></div><p>&#33021;&#22815;&#26080;&#38656;&#37096;&#32626;&#21040;&#20320;&#30340;&#24212;&#29992;&#26381;&#21153;&#22120;&#19978;&#25110;&#36830;&#25509;&#20854;&#23427;&#20225;&#19994;&#26550;&#26500;&#23601;&#23454;&#29616;&#38598;&#25104;&#27979;&#35797;&#26159;&#38750;&#24120;&#37325;&#35201;&#30340;&#12290;&#36825;&#21487;&#20197;&#35753;&#20320;&#26469;&#36827;&#34892;&#20197;&#19979;&#27979;&#35797;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#27491;&#30830;&#37197;&#32622;Spring IoC &#23481;&#22120;&#19978;&#19979;&#25991;&#12290;</p></li><li><p>&#20351;&#29992;JDBC&#25110;ORM&#24037;&#20855;&#30340;&#25968;&#25454;&#35775;&#38382;&#12290;&#21487;&#33021;&#21253;&#25324;&#22914;SQL&#33050;&#26412;&#65292;Hibernate query&#65292;JPA &#23454;&#20307;&#26144;&#23556;&#31561;&#30340;&#27491;&#30830;&#24615;&#39564;&#35777;&#12290;</p></li></ul></div><p>Spring&#26694;&#26550;&#25552;&#20379;&#38598;&#25104;&#27979;&#35797;&#30340;&#19968;&#27969;&#25903;&#25345;&#65292;&#30456;&#20851;&#31867;&#25171;&#21253;&#22312;<tt class="filename">spring-test.jar</tt>&#31867;&#24211;&#20013;&#12290;&#22312;&#36825;&#20010;&#31867;&#24211;&#20013;&#65292;&#20320;&#21487;&#20197;&#25214;&#21040;<tt class="literal">org.springframework.test</tt>&#21253;&#65292;
&#26377;&#24456;&#22810;&#26041;&#20415;&#20351;&#29992;Spring&#23481;&#22120;&#36827;&#34892;&#38598;&#25104;&#27979;&#35797;&#30340;&#31867;&#65292;&#32780;&#19988;&#21516;&#26102;&#19981;&#20381;&#36182;&#24212;&#29992;&#26381;&#21153;&#22120;&#25110;&#20854;&#23427;&#37096;&#32626;&#29615;&#22659;&#12290;&#36825;&#20123;&#27979;&#35797;&#20250;&#27604;&#21333;&#20803;&#27979;&#35797;&#24930;&#65292;&#20294;&#20250;&#27604;Cactus&#65288;&#35793;&#32773;
&#27880;&#65306;Apache&#27979;&#35797;&#26381;&#21153;&#31471;Java&#20195;&#30721;&#30340;&#24037;&#20855;http://jakarta.apache.org/cactus/index.html
&#65289;&#27979;&#35797;&#25110;&#20381;&#38752;&#37096;&#32626;&#21040;&#19968;&#20010;&#24212;&#29992;&#26381;&#21153;&#22120;&#19978;&#26469;&#36827;&#34892;&#36828;&#31243;&#27979;&#35797;&#35201;&#24555;&#25463;&#30340;&#22810;&#12290;</p><p>&#22312;2.5&#29256;&#26412;&#20043;&#21069;&#65292;Spring&#24050;&#32463;&#25552;&#20379;&#20102;<a href="#junit38-legacy-support" title="8.3.6.&nbsp;JUnit 3.8&#36951;&#30041;&#25903;&#25345;">&#38754;&#21521;JUnit 3.8&#30340;&#21333;&#20803;&#27979;&#35797;&#25903;&#25345;</a>.
      &#22312;2.5&#29256;&#26412;&#20013;, Spring &#25552;&#20379;&#20102;&#21333;&#20803;&#21644;&#38598;&#25104;&#27979;&#35797;&#25903;&#25345; <a href="#testcontext-framework" title="8.3.7.&nbsp;Spring TestContext Framework">Spring TestContext&#26694;&#26550;</a>&#12290;
      &#23427;&#26159;&#23454;&#38469;&#27979;&#35797;&#26694;&#26550;&#30340;&#28151;&#21512;&#20307;&#65292;&#22240;&#27492;&#33021;&#22815;&#24110;&#21161;&#22312;&#22810;&#20010;&#27979;&#35797;&#29615;&#22659;&#21253;&#25324;JUnit 3.8,JUnit 4.4, TestNG&#31561;&#20013;&#36827;&#34892;&#27979;&#35797;&#12290; <span class="emphasis"><em>&#27880;&#24847;Spring TestContext&#26694;&#26550;&#38656;&#35201;Java 5+&#25903;&#25345;.</em></span></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="integration-testing-which-framework"></a>8.3.2.&nbsp;&#20351;&#29992;&#21738;&#20010;&#25903;&#25345;&#26694;&#26550;</h3></div></div><div></div></div><p>Spring&#22242;&#38431;&#25512;&#33616;&#20351;&#29992;<a href="#testcontext-framework" title="8.3.7.&nbsp;Spring TestContext Framework">Spring TestContext&#26694;&#26550;</a>
      &#26469;&#36827;&#34892;&#25152;&#26377;&#26032;&#30340;&#21333;&#20803;&#27979;&#35797;&#21644;&#38598;&#25104;&#27979;&#35797;&#65292;&#20197;&#21253;&#25324;<tt class="classname">ApplicationContext</tt>&#25110;&#38656;&#35201;&#20107;&#21153;&#31649;&#29702;&#30340;&#24773;&#20917;&#12290;
      &#20294;&#22914;&#26524;&#20320;&#24320;&#21457;&#22312;Java5&#20043;&#21069;&#30340;&#29615;&#22659;&#19978;&#65292;&#23601;&#38656;&#35201;&#32487;&#32493;&#20351;&#29992;<a href="#junit38-legacy-support" title="8.3.6.&nbsp;JUnit 3.8&#36951;&#30041;&#25903;&#25345;">JUnit 3.8&#36951;&#30041;&#25903;&#25345;</a>. &#21478;&#22806;&#65292;&#26174;&#24335;
      <a href="#junit38-legacy-jpa-tests" title="8.3.6.5.2.&nbsp;JPA&#25903;&#25345;&#31867;">JPA&#38598;&#25104;&#27979;&#35797;&#25903;&#25345;</a>
       &#20381;&#36182;&#20110;<span class="emphasis"><em>shadow class&#36733;&#20837;</em></span>&#26469;&#36827;&#34892;JPA&#31867;&#27979;&#35797;(class instrumentation)&#30446;&#21069;&#21482;&#33021;&#19982;JUnit 3.8&#36951;&#30041;&#25903;&#25345;&#30456;&#23481;&#12290;
       &#22914;&#26524;&#20320;&#35201;&#27979;&#35797;&#30340;JPA&#25552;&#20379;&#32773;&#19981;&#38656;&#35201;class instrumentation&#65292;&#23601;&#25512;&#33616;&#20351;&#29992;TestContext&#26694;&#26550;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="integration-testing-common-goals"></a>8.3.3.&nbsp;&#36890;&#29992;&#30446;&#26631;</h3></div></div><div></div></div><p>Spring&#38598;&#25104;&#27979;&#35797;&#25903;&#25345;&#26694;&#26550;&#25552;&#20379;&#20102;&#19968;&#20123;&#36890;&#29992;&#30446;&#26631;&#65292;&#21253;&#25324;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#36328;&#36234;&#21508;&#20010;&#27979;&#35797;&#26696;&#20363;&#25191;&#34892;&#26399;&#30340;<a href="#testing-ctx-management" title="8.3.3.1.&nbsp;&#19978;&#19979;&#25991;&#31649;&#29702;&#21450;&#32531;&#23384;">Spring IoC&#23481;&#22120;&#32531;&#23384;</a>&#12290;</p></li><li><p><a href="#testing-fixture-di" title="8.3.3.2.&nbsp;&#27979;&#35797;fixtures&#20381;&#36182;&#27880;&#20837;">&#27979;&#35797;fixture&#23454;&#20363;&#30340;&#20381;&#36182;&#27880;&#20837;</a> (&#36825;&#24456;&#29245;)&#12290;</p></li><li><p>&#36866;&#21512;&#38598;&#25104;&#27979;&#35797;&#30340;<a href="#testing-tx" title="8.3.3.3.&nbsp;&#20107;&#21153;&#31649;&#29702;">&#20107;&#21153;&#31649;&#29702;</a>(&#36825;&#26356;&#21152;&#29245;)&#12290;</p></li><li><p><a href="#testing-support-classes" title="8.3.3.4.&nbsp;&#38598;&#25104;&#27979;&#35797;&#25903;&#25345;&#31867;">Spring&#29305;&#26377;&#30340;&#25903;&#25345;&#31867;</a>&#22312;&#32534;&#20889;&#38598;&#25104;&#27979;&#35797;&#26102;&#30495;&#30340;&#24456;&#26377;&#29992;&#12290;</p></li></ul></div><p>&#19979;&#38754;&#30340;&#31456;&#33410;&#20855;&#20307;&#25551;&#36848;&#27599;&#19968;&#20010;&#30446;&#26631;&#24182;&#25552;&#20379;&#25351;&#21521;&#29305;&#23450;&#25903;&#25345;&#26694;&#26550;&#30340;&#20449;&#24687;&#30340;&#38142;&#25509;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="testing-ctx-management"></a>8.3.3.1.&nbsp;&#19978;&#19979;&#25991;&#31649;&#29702;&#21450;&#32531;&#23384;</h4></div></div><div></div></div><p>Spring&#38598;&#25104;&#27979;&#35797;&#25903;&#25345;&#26694;&#26550;&#25552;&#20379;&#20102;<tt class="classname">ApplicationContext</tt>&#30340;&#25345;&#20037;&#21270;&#36733;&#20837;&#21644;&#36825;&#20123;&#19978;&#19979;&#25991;&#30340;&#32531;&#23384;&#26426;&#21046;&#12290;
        &#23545;&#24050;&#36733;&#20837;&#19978;&#19979;&#25991;&#30340;&#32531;&#23384;&#26159;&#24456;&#37325;&#35201;&#30340;&#65292;&#22240;&#20026;&#22914;&#26524;&#20320;&#26159;&#22312;&#19968;&#20010;&#22823;&#22411;&#30340;&#39033;&#30446;&#20013;&#65292;&#21551;&#21160;&#26102;&#38388;&#20250;&#25104;&#20026;&#19968;&#20010;&#38382;&#39064;&#8212;&#8212;&#19981;&#26159;&#22240;&#20026;Spring&#26412;&#36523;&#30340;&#24320;&#38144;&#65292;
        &#32780;&#26159;&#22240;&#20026;&#38752;Spring&#23481;&#22120;&#26469;&#21021;&#22987;&#21270;&#30340;&#23545;&#35937;&#38656;&#35201;&#24456;&#38271;&#26102;&#38388;&#12290;&#27604;&#22914;&#19968;&#20010;&#26377;50-100 Hibernate&#26144;&#23556;&#25991;&#20214;&#30340;&#39033;&#30446;&#21487;&#33021;&#38656;&#35201;10-20&#31186;&#26469;&#36733;&#20837;&#26144;&#23556;&#25991;&#20214;&#65292;
        &#32780;&#27599;&#27425;&#21333;&#19968;&#27979;&#35797;fixture&#30340;&#27599;&#20010;&#21333;&#19968;&#27979;&#35797;&#21069;&#37117;&#35201;&#36825;&#26679;&#30340;&#26102;&#38388;&#24320;&#38144;&#65292;&#20943;&#24930;&#20102;&#25972;&#20307;&#30340;&#27979;&#35797;&#36827;&#24230;&#36827;&#32780;&#38477;&#20302;&#25928;&#29575;&#12290;</p><p>&#27979;&#35797;&#31867;&#36890;&#24120;&#20250;&#25552;&#20379;&#19968;&#20010;&#25968;&#32452;&#26469;&#21253;&#21547;XML&#37197;&#32622;&#20803;&#25968;&#25454;&#30340;&#36164;&#28304;&#36335;&#24452;&#8212;&#8212;&#36890;&#24120;&#26159;classpath&#8212;&#8212;&#26469;&#37197;&#32622;&#24212;&#29992;&#12290;&#36825;&#36890;&#24120;&#21644;<tt class="literal">web.xml</tt>&#25110;&#20854;&#23427;&#37096;&#32626;&#25551;&#36848;&#20013;&#25351;&#23450;&#30340;&#37197;&#32622;&#36335;&#24452;&#26159;&#30456;&#21516;&#25110;&#30456;&#36817;&#30340;&#12290;</p><p>&#40664;&#35748;&#24773;&#20917;&#19979;,&#19968;&#26086;&#36733;&#20837;&#65292;<tt class="interfacename">ApplicationContext</tt>&#23558;&#22312;&#27599;&#27425;&#27979;&#35797;&#20013;&#37325;&#29992;&#12290;
        &#36825;&#26679;&#21551;&#21160;&#30340;&#24320;&#38144;&#23558;&#21482;&#38656;&#35201;&#19968;&#27425;&#65288;&#27599;&#20010;&#27979;&#35797;fixture&#65289;&#65292;&#25509;&#19979;&#26469;&#30340;&#27979;&#35797;&#25191;&#34892;&#23601;&#20250;&#24555;&#24471;&#22810;&#12290;
        &#22312;&#19968;&#20123;&#23569;&#35265;&#30340;&#20250;&#8220;&#27745;&#26579;&#8221;&#24212;&#29992;&#19978;&#19979;&#25991;&#30340;&#26696;&#20363;&#20013;&#38656;&#35201;&#37325;&#26032;&#36733;&#20837;&#8212;&#8212; &#20363;&#22914;&#65292;&#25913;&#21464;&#19968;&#20010;bean&#23450;&#20041;&#25110;&#24212;&#29992;&#23545;&#35937;&#30340;&#29366;&#24577;&#8212;&#8212;
        Spring&#30340;&#27979;&#35797;&#25903;&#25345;&#25552;&#20379;&#20102;&#22312;&#25191;&#34892;&#19979;&#19968;&#20010;&#27979;&#35797;&#21069;&#35753;&#27979;&#35797;fixture&#37325;&#26032;&#36733;&#20837;&#37197;&#32622;&#24182;&#37325;&#24314;&#24212;&#29992;&#19978;&#19979;&#25991;&#30340;&#26426;&#21046;&#12290;</p><p>&#19978;&#19979;&#25991;&#31649;&#29702;&#21644;&#32531;&#23384;&#20351;&#29992;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><a href="#junit38-legacy-ctx-management" title="8.3.6.1.&nbsp;&#19978;&#19979;&#25991;&#31649;&#29702;&#21450;&#32531;&#23384;">JUnit 3.8&#36951;&#30041;&#25903;&#25345;</a></p></li><li><p><a href="#testcontext-ctx-management" title="8.3.7.2.&nbsp;&#19978;&#19979;&#25991;&#31649;&#29702;&#21644;&#32531;&#23384;">TestContext&#26694;&#26550;</a></p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="testing-fixture-di"></a>8.3.3.2.&nbsp;&#27979;&#35797;fixtures&#20381;&#36182;&#27880;&#20837;</h4></div></div><div></div></div><p>&#24403;Spring&#38598;&#25104;&#27979;&#35797;&#25903;&#25345;&#26694;&#26550;&#36733;&#20837;&#20320;&#30340;&#24212;&#29992;&#19978;&#19979;&#25991;&#26102;&#65292;&#23427;&#20204;&#33021;&#36890;&#36807;&#20381;&#36182;&#27880;&#20837;&#36873;&#25321;&#24615;&#37197;&#32622;&#27979;&#35797;&#31867;&#23454;&#20363;&#12290;
        &#36825;&#25552;&#20379;&#20102;&#19968;&#20010;&#26041;&#20415;&#30340;&#26426;&#21046;&#26469;&#20351;&#29992;&#39044;&#20808;&#22312;&#24212;&#29992;&#19978;&#19979;&#25991;&#20013;&#37197;&#32622;&#30340;bean&#26469;&#25645;&#24314;&#27979;&#35797;fixture&#12290;
        &#24456;&#22823;&#30340;&#22909;&#22788;&#23601;&#26159;&#20320;&#21487;&#20197;&#22312;&#21508;&#31181;&#27979;&#35797;&#22330;&#26223;&#20013;&#37325;&#29992;&#24212;&#29992;&#19978;&#19979;&#25991;(&#20363;&#22914;&#37197;&#32622;Spring&#31649;&#29702;&#30340;&#23545;&#35937;&#22270;&#65292;
        &#20107;&#21153;&#20195;&#29702;<tt class="classname">DataSource</tt>&#31561;)&#65292;&#20174;&#32780;&#33021;&#36991;&#20813;&#20026;&#21333;&#20010;&#30340;&#27979;&#35797;&#26696;&#20363;&#37325;&#22797;&#36827;&#34892;&#27979;&#35797;fixture&#25645;&#24314;&#12290;</p><p>&#20316;&#20026;&#20363;&#23376;&#65292;&#32771;&#34385;&#19968;&#20010;&#22330;&#26223;&#65306;&#25105;&#20204;&#26377;&#19968;&#20010;<tt class="classname">HibernateTitleDao</tt>&#31867;&#26469;&#23454;&#29616;&#25968;&#25454;&#35775;&#38382;&#36923;&#36753;&#65292;&#20551;&#35774;&#26159;<tt class="classname">Title</tt>&#22495;&#23545;&#35937;&#12290;&#25105;&#20204;&#24076;&#26395;&#32534;&#20889;&#27979;&#35797;&#25152;&#26377;&#20197;&#19979;&#26041;&#38754;&#30340;&#38598;&#25104;&#27979;&#35797;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>Spring&#37197;&#32622;: &#26368;&#22522;&#26412;&#30340;&#65292;&#26159;&#21542;&#25152;&#26377;&#19982;<tt class="classname">HibernateTitleDao</tt> bean&#30456;&#20851;&#30340;&#37197;&#32622;&#37117;&#26159;&#27491;&#30830;&#21644;&#23384;&#22312;&#30340;&#65311;</p></li><li><p>Hibernate&#26144;&#23556;&#37197;&#32622;&#25991;&#20214;: &#26159;&#21542;&#25152;&#26377;&#26144;&#23556;&#37117;&#26159;&#27491;&#30830;&#30340;&#24182;&#19988;lazy-loading&#35774;&#32622;&#20063;&#21040;&#20301;&#20102;&#65311;</p></li><li><p><tt class="classname">HibernateTitleDao</tt>&#36923;&#36753;&#65306;&#26159;&#21542;&#31867;&#30340;&#24050;&#37197;&#32622;&#31034;&#20363;&#30340;&#23454;&#29616;&#19982;&#39044;&#26399;&#30456;&#21516;&#65311;</p></li></ul></div><p>&#27979;&#35797;fixtures&#20381;&#36182;&#27880;&#20837;&#20351;&#29992;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><a href="#junit38-legacy-fixture-di" title="8.3.6.2.&nbsp;&#27979;&#35797;fixture&#20381;&#36182;&#27880;&#20837;">JUnit 3.8 &#36951;&#30041;&#25903;&#25345;</a></p></li><li><p><a href="#testcontext-fixture-di" title="8.3.7.3.&nbsp;&#27979;&#35797;fixture&#30340;&#20381;&#36182;&#27880;&#20837;">TestContext&#26694;&#26550;</a></p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="testing-tx"></a>8.3.3.3.&nbsp;&#20107;&#21153;&#31649;&#29702;</h4></div></div><div></div></div><p>&#35775;&#38382;&#23454;&#38469;&#25968;&#25454;&#24211;&#30340;&#27979;&#35797;&#30340;&#19968;&#20010;&#36890;&#24120;&#38382;&#39064;&#26159;&#23545;&#25345;&#20037;&#21270;&#29366;&#24577;&#30340;&#24433;&#21709;&#12290;
        &#21363;&#20351;&#20320;&#20351;&#29992;&#24320;&#21457;&#25968;&#25454;&#24211;&#65292;&#29366;&#24577;&#30340;&#25913;&#21464;&#20063;&#21487;&#33021;&#24433;&#21709;&#21518;&#38754;&#30340;&#27979;&#35797;&#12290;&#32780;&#19988;&#24456;&#22810;&#25805;&#20316; &#8212;&#8212; 
        &#22914;&#25554;&#20837;&#25110;&#20462;&#25913;&#25345;&#20037;&#21270;&#25968;&#25454; &#8212;&#8212; &#19981;&#33021;&#22312;&#20107;&#21153;&#22806;&#23436;&#25104;&#65288;&#25110;&#39564;&#35777;&#65289;&#12290;</p><p>Spring&#38598;&#25104;&#27979;&#35797;&#25903;&#25345;&#26694;&#26550;&#28385;&#36275;&#20102;&#36825;&#20123;&#38656;&#27714;&#12290;&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#23545;&#27599;&#27425;&#27979;&#35797;&#23427;&#20204;&#20250;&#21019;&#24314;&#24182;&#22238;&#28378;&#20107;&#21153;&#12290;
        &#20320;&#32534;&#20889;&#20195;&#30721;&#21487;&#20197;&#20551;&#23450;&#20107;&#21153;&#24050;&#32463;&#23384;&#22312;&#12290;&#22914;&#26524;&#20320;&#22312;&#27979;&#35797;&#20013;&#35843;&#29992;&#20107;&#21153;&#20195;&#29702;&#23545;&#35937;&#65292;&#23427;&#20204;&#23558;&#26681;&#25454;&#37197;&#32622;&#30340;&#20107;&#21153;&#35821;&#20041;&#27491;&#24120;&#21709;&#24212;&#12290;
        &#21478;&#22806;&#65292;&#22914;&#26524;&#27979;&#35797;&#26041;&#27861;&#22312;&#20107;&#21153;&#20869;&#21024;&#38500;&#20102;&#36873;&#23450;&#34920;&#30340;&#25968;&#25454;&#65292;&#36825;&#20010;&#20107;&#21153;&#20250;&#40664;&#35748;&#22238;&#28378;&#65292;&#25968;&#25454;&#24211;&#20063;&#23558;&#22238;&#21040;&#27979;&#35797;&#25191;&#34892;&#21069;&#30340;&#29366;&#24577;&#12290;
        &#20107;&#21153;&#25903;&#25345;&#36890;&#36807;&#22312;&#27979;&#35797;&#24212;&#29992;&#19978;&#19979;&#25991;&#20013;&#23450;&#20041;&#30340;<tt class="classname">PlatformTransactionManager</tt> bean&#25552;&#20379;&#12290;</p><p>&#22914;&#26524;&#20320;&#24076;&#26395;&#20107;&#21153;&#34987;&#25552;&#20132; &#8212;&#8212; &#19981;&#24120;&#35265;,&#20294;&#21487;&#33021;&#20320;&#24076;&#26395;&#29305;&#23450;&#30340;&#27979;&#35797;&#25554;&#20837;&#25110;&#20462;&#25913;&#25968;&#25454;&#24211; &#8212;&#8212; Spring&#38598;&#25104;&#27979;&#35797;&#25903;&#25345;&#26694;&#26550;
        &#21487;&#20197;&#36890;&#36807;&#35843;&#29992;&#19968;&#20010;&#32487;&#25215;&#19979;&#26469;&#30340;&#38057;&#23376;(Hook)&#26041;&#27861;&#25110;&#22768;&#26126;&#29305;&#23450;&#27880;&#35299;&#26469;&#35753;&#20107;&#21153;&#25552;&#20132;&#32780;&#19981;&#26159;&#22238;&#28378;&#12290;</p><p>&#20107;&#21153;&#31649;&#29702;&#20351;&#29992;:</p><div class="itemizedlist"><ul type="disc"><li><p><a href="#junit38-legacy-tx" title="8.3.6.3.&nbsp;&#20107;&#21153;&#31649;&#29702;">JUnit 3.8 &#36951;&#30041;&#25903;&#25345;</a></p></li><li><p><a href="#testcontext-tx" title="8.3.7.4.&nbsp;&#20107;&#21153;&#31649;&#29702;">TestContext&#26694;&#26550;</a></p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="testing-support-classes"></a>8.3.3.4.&nbsp;&#38598;&#25104;&#27979;&#35797;&#25903;&#25345;&#31867;</h4></div></div><div></div></div><p>Spring&#38598;&#25104;&#27979;&#35797;&#25903;&#25345;&#26694;&#26550;&#25552;&#20379;&#20102;&#20960;&#20010;<tt class="literal">abstract</tt>&#25903;&#25345;&#31867;&#26469;&#31616;&#21270;&#32534;&#20889;&#38598;&#25104;&#27979;&#35797;&#12290;
        &#36825;&#20123;&#27979;&#35797;&#22522;&#31867;&#25552;&#20379;&#20102;&#23450;&#20041;&#33391;&#22909;&#30340;&#27979;&#35797;&#26694;&#26550;&#38057;&#23376;&#65292;&#27604;&#22914;&#26041;&#20415;&#30340;&#21464;&#37327;&#23454;&#20363;&#21644;&#26041;&#27861;&#65292;&#26469;&#35775;&#38382;&#20197;&#19979;&#23545;&#35937;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">ApplicationContext</tt>: &#29992;&#26469;&#36827;&#34892;&#26174;&#24335;bean&#26597;&#25214;&#25110;&#25972;&#20307;&#27979;&#35797;&#19978;&#19979;&#25991;&#29366;&#24577;&#12290;</p></li><li><p><tt class="classname">JdbcTemplate</tt>&#25110;<tt class="classname">SimpleJdbcTemplate</tt>: &#29992;&#26469;&#26597;&#35810;&#24182;&#30830;&#35748;&#29366;&#24577;&#12290; 
            &#20363;&#22914;&#65292;&#20320;&#21487;&#33021;&#38656;&#35201;&#22312;&#21019;&#24314;&#23545;&#35937;&#24182;&#36890;&#36807;ORM&#24037;&#20855;&#25345;&#20037;&#21270;&#21040;&#25968;&#25454;&#24211;&#20013;&#30340;&#27979;&#35797;&#26696;&#20363;&#36816;&#34892;&#21069;&#21518;&#36827;&#34892;&#26597;&#35810;&#65292;&#20197;&#30830;&#35748;&#25968;&#25454;&#22312;&#25968;&#25454;&#24211;&#20013;&#23384;&#22312;&#20102;&#12290;
            (Spring&#23558;&#30830;&#20445;&#26597;&#35810;&#22312;&#21516;&#19968;&#20010;&#20107;&#21153;&#33539;&#22260;&#20869;&#36816;&#34892;&#12290;) &#20320;&#38656;&#35201;&#36890;&#30693;ORM&#24037;&#20855;&#26469;'flush'&#21464;&#21270;&#20197;&#30830;&#20445;&#27491;&#24120;&#24037;&#20316;&#65292;
            &#20363;&#22914;&#20351;&#29992;Hibernate <tt class="interfacename">Session</tt>&#25509;&#21475;&#30340;<tt class="methodname">flush()</tt>&#26041;&#27861;&#12290;</p></li></ul></div><p>&#20320;&#32463;&#24120;&#20250;&#25552;&#20379;&#19968;&#20010;&#24212;&#29992;&#33539;&#22260;&#30340;&#36229;&#31867;&#26469;&#20026;&#22810;&#20010;&#38598;&#25104;&#27979;&#35797;&#25552;&#20379;&#26377;&#29992;&#30340;&#23454;&#20363;&#21464;&#37327;&#12290;</p><p>&#25903;&#25345;&#31867;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><a href="#junit38-legacy-support-classes" title="8.3.6.4.&nbsp;JUnit 3.8 &#36951;&#30041;&#25903;&#25345;&#31867;">JUnit 3.8&#36951;&#30041;&#25903;&#25345;</a></p></li><li><p><a href="#testcontext-support-classes" title="8.3.7.5.&nbsp;TestContext&#25903;&#25345;&#31867;">TestContext&#26694;&#26550;</a></p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="integration-testing-support-jdbc"></a>8.3.4.&nbsp;JDBC&#27979;&#35797;&#25903;&#25345;</h3></div></div><div></div></div><p><tt class="literal">org.springframework.test.jdbc</tt>&#21253;&#21547;&#26377;<tt class="classname">SimpleJdbcTestUtils</tt>&#31867;&#65292;&#23427;
      &#26159;&#19968;&#20010;&#22522;&#20110;Java5&#30340;JDBC&#30456;&#20851;&#24037;&#20855;&#26041;&#27861;&#38598;&#65292;&#29992;&#26469;&#31616;&#21270;&#26631;&#20934;&#25968;&#25454;&#24211;&#27979;&#35797;&#22330;&#26223;&#12290;<span class="emphasis"><em>&#27880;&#24847;<a href="#testcontext-support-classes-junit38" title="8.3.7.5.1.&nbsp;JUnit 3.8&#25903;&#25345;&#31867;"><tt class="classname">AbstractTransactionalJUnit38SpringContextTests</tt></a>,
      <a href="#testcontext-support-classes-junit44" title="8.3.7.5.2.&nbsp;JUnit 4.4&#25903;&#25345;&#31867;"><tt class="classname">AbstractTransactionalJUnit4SpringContextTests</tt></a>,
      &#21644;<a href="#testcontext-support-classes-testng" title="8.3.7.5.4.&nbsp;TestNG&#25903;&#25345;&#31867;"><tt class="classname">AbstractTransactionalTestNGSpringContextTests</tt></a>
      &#25552;&#20379;&#20102;&#31616;&#20415;&#30340;&#26041;&#27861;&#26469;&#20869;&#37096;&#20195;&#29702;&#21040;<tt class="classname">SimpleJdbcTestUtils</tt>&#12290;</em></span></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="integration-testing-common-annotations"></a>8.3.5.&nbsp;&#24120;&#29992;&#27880;&#35299;</h3></div></div><div></div></div><p>Spring&#26694;&#26550;&#22312;<tt class="literal">org.springframework.test.annotation</tt>
      &#21253;&#20013;&#25552;&#20379;&#20102;&#24120;&#29992;&#30340;<span class="emphasis"><em>Spring&#29305;&#23450;&#30340;</em></span>&#27880;&#35299;&#38598;&#65292;&#22914;&#26524;&#20320;&#22312;Java5&#25110;&#20197;&#19978;&#29256;&#26412;&#24320;&#21457;&#65292;&#21487;&#20197;&#22312;&#27979;&#35797;&#20013;&#20351;&#29992;&#23427;&#12290;</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><b><tt class="interfacename">@IfProfileValue</tt></b></span></p><p>&#25552;&#31034;&#19968;&#19979;&#65292;&#27880;&#35299;&#27979;&#35797;&#21482;&#38024;&#23545;&#29305;&#23450;&#30340;&#27979;&#35797;&#29615;&#22659;&#12290;
          &#22914;&#26524;&#37197;&#32622;&#30340;<tt class="classname">ProfileValueSource</tt>&#31867;&#36820;&#22238;&#23545;&#24212;&#30340;&#25552;&#20379;&#32773;&#30340;<tt class="literal">&#21517;&#31216;</tt><tt class="literal">&#20540;</tt>&#65292;
          &#36825;&#20010;&#27979;&#35797;&#23601;&#21487;&#20197;&#21551;&#21160;&#12290;&#36825;&#20010;&#27880;&#35299;&#21487;&#20197;&#24212;&#29992;&#21040;&#19968;&#20010;&#31867;&#25110;&#32773;&#21333;&#29420;&#30340;&#26041;&#27861;&#12290;</p><pre class="programlisting">@IfProfileValue(name="java.vendor", value="Sun Microsystems Inc.")
public void testProcessWhichRunsOnlyOnSunJvm() {
    <i class="lineannotation"><span class="lineannotation">// some logic that should run only on Java VMs from Sun Microsystems</span></i>
}</pre><p>&#21516;&#26102;<tt class="interfacename">@IfProfileValue</tt>&#21487;&#37197;&#32622;&#19968;&#20010;<tt class="literal">&#20540;</tt>&#21015;&#34920;
          (&#20351;&#29992;<span class="emphasis"><em>OR</em></span> &#35821;&#20041;) &#26469;&#22312;JUnit&#29615;&#22659;&#20013;&#33719;&#24471;TestNG&#30340;<span class="emphasis"><em>&#27979;&#35797;&#32452;</em></span>&#25903;&#25345;&#12290;
          &#30475;&#19979;&#38754;&#30340;&#20363;&#23376;&#65306;</p><pre class="programlisting">@IfProfileValue(name="test-groups", values={"unit-tests", "integration-tests"})
public void testProcessWhichRunsForUnitOrIntegrationTestGroups() {
    <i class="lineannotation"><span class="lineannotation">// some logic that should run only for unit and integration test groups</span></i>
}</pre></li><li><p><span class="bold"><b><tt class="interfacename">@ProfileValueSourceConfiguration</tt></b></span></p><p>&#31867;&#32423;&#21035;&#27880;&#35299;&#29992;&#26469;&#25351;&#23450;&#24403;&#36890;&#36807;<tt class="interfacename">@IfProfileValue</tt>&#27880;&#35299;&#33719;&#21462;&#24050;&#37197;&#32622;&#30340;<span class="emphasis"><em>profile&#20540;</em></span>&#26102;&#20351;&#29992;&#20309;&#31181;<tt class="literal">ProfileValueSource</tt>&#12290;
          &#22914;&#26524;<tt class="interfacename">@ProfileValueSourceConfiguration</tt>&#27809;&#26377;&#22312;&#27979;&#35797;&#20013;&#22768;&#26126;&#65292;&#23558;&#40664;&#35748;&#20351;&#29992;<tt class="classname">SystemProfileValueSource</tt>&#12290;</p><pre class="programlisting">@ProfileValueSourceConfiguration(CustomProfileValueSource.class)
public class CustomProfileValueSourceTests {
    <i class="lineannotation"><span class="lineannotation">// class body...</span></i>
}</pre></li><li><p><span class="bold"><b><tt class="interfacename">@DirtiesContext</tt></b></span></p><p>&#22312;&#27979;&#35797;&#26041;&#27861;&#19978;&#20986;&#29616;&#36825;&#20010;&#27880;&#35299;&#26102;&#65292;&#34920;&#26126;&#24213;&#23618;Spring&#23481;&#22120;&#22312;&#35813;&#26041;&#27861;&#30340;&#25191;&#34892;&#20013;&#34987;&#8220;&#27745;&#26579;&#8221;&#65292;&#20174;&#32780;&#24517;&#39035;&#22312;&#26041;&#27861;&#25191;&#34892;&#32467;&#26463;&#21518;&#37325;&#26032;&#21019;&#24314;&#65288;&#26080;&#35770;&#35813;&#27979;&#35797;&#26159;&#21542;&#36890;&#36807;&#65289;&#12290;</p><pre class="programlisting">@DirtiesContext
public void testProcessWhichDirtiesAppCtx() {
    <i class="lineannotation"><span class="lineannotation">// some logic that results in the Spring container being dirtied</span></i>
}</pre></li><li><p><span class="bold"><b><tt class="interfacename">@ExpectedException</tt></b></span></p><p>&#34920;&#26126;&#34987;&#27880;&#35299;&#26041;&#27861;&#39044;&#26399;&#22312;&#25191;&#34892;&#20013;&#25243;&#20986;&#19968;&#20010;&#24322;&#24120;&#12290;&#39044;&#26399;&#24322;&#24120;&#30340;&#31867;&#22411;&#22312;&#27880;&#35299;&#20013;&#32473;&#23450;&#12290;&#22914;&#26524;&#35813;&#24322;&#24120;&#30340;&#23454;&#20363;&#22312;&#27979;&#35797;&#26041;&#27861;&#25191;&#34892;&#20013;&#34987;&#25243;&#20986;&#65292;
          &#21017;&#27979;&#35797;&#36890;&#36807;&#12290;&#21516;&#26679;&#30340;&#22914;&#26524;&#35813;&#24322;&#24120;&#23454;&#20363;<span class="emphasis"><em>&#27809;&#26377;</em></span>&#22312;&#27979;&#35797;&#26041;&#27861;&#25191;&#34892;&#26102;&#25243;&#20986;&#65292;&#21017;&#27979;&#35797;&#22833;&#36133;&#12290;</p><pre class="programlisting">@ExpectedException(SomeBusinessException.class)
public void testProcessRainyDayScenario() {
    <i class="lineannotation"><span class="lineannotation">// some logic that should result in an <tt class="classname">Exception</tt> being thrown</span></i>
}</pre></li><li><p><span class="bold"><b><tt class="interfacename">@Timed</tt></b></span></p><p>&#34920;&#26126;&#34987;&#27880;&#35299;&#30340;&#27979;&#35797;&#26041;&#27861;&#24517;&#39035;&#22312;&#35268;&#23450;&#30340;&#26102;&#38388;&#21306;&#38388;&#20869;&#25191;&#34892;&#23436;&#25104;&#65288;&#20197;&#27627;&#31186;&#35760;&#65289;&#12290;&#22914;&#26524;&#27979;&#35797;&#25191;&#34892;&#26102;&#38388;&#36229;&#36807;&#20102;&#35268;&#23450;&#30340;&#26102;&#38388;&#21306;&#38388;&#65292;&#27979;&#35797;&#23601;&#22833;&#36133;&#20102;&#12290;</p><p>&#27880;&#24847;&#35813;&#26102;&#38388;&#21306;&#38388;&#21253;&#25324;&#27979;&#35797;&#26041;&#27861;&#26412;&#36523;&#30340;&#25191;&#34892;&#65292;&#20219;&#20309;&#37325;&#22797;&#27979;&#35797;&#65288;&#21442;&#35265; <tt class="interfacename">@Repeat</tt>&#65289;&#65292;&#36824;&#26377;&#20219;&#20309;&#27979;&#35797;fixture&#30340;<span class="emphasis"><em>set up</em></span>&#25110;<span class="emphasis"><em>tear down</em></span>&#26102;&#38388;&#12290;</p><pre class="programlisting">@Timed(millis=1000)
public void testProcessWithOneSecondTimeout() {
    <i class="lineannotation"><span class="lineannotation">// some logic that should not take longer than 1 second to execute</span></i>
}</pre></li><li><p><span class="bold"><b><tt class="interfacename">@Repeat</tt></b></span></p><p>&#34920;&#26126;&#34987;&#27880;&#35299;&#30340;&#27979;&#35797;&#26041;&#27861;&#24517;&#39035;&#37325;&#22797;&#25191;&#34892;&#12290;&#25191;&#34892;&#30340;&#27425;&#25968;&#22312;&#27880;&#35299;&#20013;&#22768;&#26126;&#12290;</p><p>&#27880;&#24847;&#37325;&#22797;&#25191;&#34892;&#33539;&#22260;&#21253;&#25324;&#21253;&#25324;&#27979;&#35797;&#26041;&#27861;&#26412;&#36523;&#30340;&#25191;&#34892;&#65292;&#20197;&#21450;&#20219;&#20309;&#27979;&#35797;fixture&#30340;<span class="emphasis"><em>set up</em></span>&#25110;<span class="emphasis"><em>tear down</em></span>&#12290;</p><pre class="programlisting">@Repeat(10)
public void testProcessRepeatedly() {
    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre></li><li><p><span class="bold"><b><tt class="interfacename">@Rollback</tt></b></span></p><p>&#34920;&#26126;&#34987;&#27880;&#35299;&#26041;&#27861;&#30340;&#20107;&#21153;&#22312;&#23436;&#25104;&#21518;&#26159;&#21542;&#38656;&#35201;&#34987;<span class="emphasis"><em>&#22238;&#28378;</em></span>&#12290;
          &#22914;&#26524;<tt class="literal">true</tt>&#65292;&#20107;&#21153;&#23558;&#34987;&#22238;&#28378;&#65292;&#21542;&#21017;&#20107;&#21153;&#23558;&#34987;&#25552;&#20132;&#12290;
          &#20351;&#29992;<tt class="interfacename">@Rollback</tt>&#25509;&#21475;&#26469;&#22312;&#31867;&#32423;&#21035;&#35206;&#20889;&#37197;&#32622;&#30340;&#40664;&#35748;&#22238;&#28378;&#26631;&#24535;&#12290;</p><pre class="programlisting">@Rollback(false)
public void testProcessWithoutRollback() {
    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre></li><li><p><span class="bold"><b><tt class="interfacename">@NotTransactional</tt></b></span></p><p>&#20986;&#29616;&#35813;&#27880;&#35299;&#34920;&#26126;&#27979;&#35797;&#26041;&#27861;&#24517;&#39035;<span class="emphasis"><em>&#19981;</em></span>&#22312;&#20107;&#21153;&#20013;&#25191;&#34892;&#12290;</p><pre class="programlisting">@NotTransactional 
public void testProcessWithoutTransaction() {
    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre></li></ul></div><p>&#27880;&#35299;&#25903;&#25345;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><a href="#junit38-legacy-java5-support" title="8.3.6.5.&nbsp;Java 5+ &#19987;&#26377;&#25903;&#25345;">JUnit 3.8&#36951;&#30041;&#25903;&#25345;</a>&#65306;
          &#25152;&#26377;&#19978;&#38754;&#21015;&#20030;&#30340;&#27880;&#35299;&#37117;&#34987;&#25903;&#25345;&#65292;&#20294;<span class="emphasis"><em>&#24517;&#39035;</em></span>&#19982;<tt class="classname">AbstractAnnotationAwareTransactionalTests</tt>&#31867;&#32852;&#21512;&#20351;&#29992;&#65292;&#20197;&#20445;&#35777;&#36825;&#20123;&#27880;&#35299;&#33021;&#36215;&#20316;&#29992;&#12290;</p></li><li><p><a href="#testcontext-annotations" title="8.3.7.6.&nbsp;TestContext&#26694;&#26550;&#27880;&#35299;&#25903;&#25345;">TestContext&#26694;&#26550;</a>&#65306;
          &#25903;&#25345;&#19978;&#38754;&#21015;&#20030;&#30340;&#25152;&#26377;&#27880;&#35299;&#65292;&#32780;&#19988;&#25552;&#20379;&#20102;&#39069;&#22806;&#30340;TestContext&#29305;&#23450;&#27880;&#35299;
          (&#20363;&#22914;<tt class="interfacename">@ContextConfiguration</tt>&#12289;<tt class="interfacename">@BeforeTransaction</tt>&#31561;&#31561;)&#12290;
          &#27880;&#24847;&#65292;&#20294;&#26159;&#19968;&#20123;&#27880;&#35299;&#21482;&#26377;&#19982;JUnit&#32852;&#21512;&#20351;&#29992;&#26102;(&#20363;&#22914;&#65292;&#22522;&#20110;<a href="#testcontext-junit4-runner" title="8.3.7.5.3.&nbsp;&#23450;&#21046;JUnit 4.4&#36816;&#34892;&#22120;">SpringJUnit4ClassRunner</a>
          &#25110;<a href="#testcontext-support-classes-junit38" title="8.3.7.5.1.&nbsp;JUnit 3.8&#25903;&#25345;&#31867;">JUnit 3.8</a>&#20197;&#21450;<a href="#testcontext-support-classes-junit44" title="8.3.7.5.2.&nbsp;JUnit 4.4&#25903;&#25345;&#31867;">JUnit 4.4</a>&#30340;&#27979;&#35797;&#31867;)&#12290;
          &#35814;&#32454;&#20869;&#23481;&#21442;&#35265;<span class="emphasis"><em>TestContext&#26694;&#26550;</em></span>&#31456;&#33410;&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="junit38-legacy-support"></a>8.3.6.&nbsp;JUnit 3.8&#36951;&#30041;&#25903;&#25345;</h3></div></div><div></div></div><p>Spring JUnit 3.8 &#36951;&#30041;&#25903;&#25345;&#31867;&#25171;&#21253;&#22312;<tt class="literal">org.springframework.test</tt>&#21253;&#20013;&#12290;
      &#36825;&#20010;&#21253;&#25552;&#20379;&#20102;&#26377;&#29992;&#30340;JUnit <tt class="classname">TestCase</tt>&#36229;&#31867;&#65292;
      &#25193;&#23637;&#23427;&#21487;&#20197;&#22312;&#23481;&#22120;&#22806;&#38598;&#25104;&#27979;&#35797;&#20013;&#24341;&#20837;Spring <tt class="classname">ApplicationContext</tt>&#31867;&#25110;&#22312;&#27979;&#35797;&#26041;&#27861;&#32423;&#21035;&#33719;&#24471;&#20107;&#21153;&#25903;&#25345;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="junit38-legacy-ctx-management"></a>8.3.6.1.&nbsp;&#19978;&#19979;&#25991;&#31649;&#29702;&#21450;&#32531;&#23384;</h4></div></div><div></div></div><p><tt class="classname">AbstractSingleSpringContextTests</tt>&#20026;&#22522;&#20110;JUnit 3.8&#30340;&#27979;&#35797;&#26696;&#20363;&#25552;&#20379;&#20102;&#19978;&#19979;&#25991;&#31649;&#29702;&#21644;&#32531;&#23384;&#25903;&#25345;&#12290;
        &#23427;&#26292;&#38706;&#20102;&#19968;&#20010;<tt class="literal">protected</tt>&#26041;&#27861;&#26469;&#32473;&#23376;&#31867;&#35206;&#20889;&#20197;&#25552;&#20379;&#19978;&#19979;&#25991;&#23450;&#20041;&#25991;&#20214;&#30340;&#36335;&#24452;&#65306;</p><pre class="programlisting">protected String[] getConfigLocations()</pre><p>&#36825;&#20010;&#26041;&#27861;&#30340;&#23454;&#29616;&#24517;&#39035;&#25552;&#20379;&#21253;&#21547;XML&#37197;&#32622;&#20803;&#25968;&#25454;&#30340;&#36164;&#28304;&#36335;&#24452; &#8212;&#8212; &#36890;&#24120;&#26159;&#31867;&#36335;&#24452; &#8212;&#8212; &#30340;&#19968;&#20010;&#25968;&#32452;&#12290;
        &#36825;&#21644;&#22312;<tt class="literal">web.xml</tt>&#25110;&#20854;&#23427;&#37096;&#32626;&#37197;&#32622;&#20013;&#30340;&#36164;&#28304;&#36335;&#24452;&#26159;&#30456;&#21516;&#30340;&#25110;&#22522;&#26412;&#30456;&#21516;&#30340;&#12290;
        &#20316;&#20026;&#21487;&#36873;&#26041;&#26696;&#65292;&#20320;&#20063;&#21487;&#20197;&#35206;&#20889;&#19979;&#38754;&#30340;&#26041;&#27861;&#12290;&#35814;&#32454;&#20869;&#23481;&#21442;&#35265;&#30456;&#20851;JavaDoc&#12290;</p><pre class="programlisting">protected String[] getConfigPaths()</pre><pre class="programlisting">protected String getConfigPath()</pre><p>&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#19968;&#26086;&#37197;&#32622;&#25991;&#20214;&#34987;&#36733;&#20837;&#23601;&#20250;&#22312;&#27599;&#20010;&#27979;&#35797;&#26696;&#20363;&#20013;&#37325;&#29992;&#12290;
        &#36825;&#26679;&#26500;&#24314;&#30340;&#24320;&#38144;&#21482;&#20250;&#20135;&#29983;&#19968;&#27425;&#65288;&#27599;&#20010;&#27979;&#35797;fixture&#65289;&#65292;&#28982;&#21518;&#21518;&#38754;&#30340;&#27979;&#35797;&#25191;&#34892;&#20250;&#24555;&#36895;&#30340;&#22810;&#12290;
        &#22312;&#36739;&#23569;&#30340;&#24773;&#20917;&#19979;&#27979;&#35797;&#21487;&#33021;&#8220;&#27745;&#26579;&#8221;&#24212;&#29992;&#19978;&#19979;&#25991;&#65292;&#38656;&#35201;&#37325;&#26032;&#36733;&#20837; &#8212;&#8212; &#20363;&#22914;&#65292;
        &#25913;&#21464;&#19968;&#20010;bean&#23450;&#20041;&#25110;&#24212;&#29992;&#23545;&#35937;&#29366;&#24577; &#8212;&#8212; &#20320;&#21487;&#20197;&#35843;&#29992;<tt class="classname">AbstractSingleSpringContextTests</tt>&#31867;&#20013;&#30340;
        <tt class="methodname">setDirty()</tt>&#26041;&#27861;&#26469;&#35753;&#27979;&#35797;fixture&#22312;&#25191;&#34892;&#19979;&#19968;&#20010;&#27979;&#35797;&#26696;&#20363;&#26102;&#37325;&#26032;&#36733;
        <a href="#junit38-legacy-annotation-aware-tests" title="8.3.6.5.1.&nbsp;&#20351;&#29992;&#27880;&#35299;&#30340;&#20107;&#21153;&#30456;&#20851;&#27979;&#35797;"><tt class="classname">AbstractAnnotationAwareTransactionalTests</tt></a>&#31867;&#65292;
        &#20320;&#21487;&#20197;&#20351;&#29992;<tt class="interfacename">@DirtiesContext</tt>&#26469;&#23545;&#27979;&#35797;&#26041;&#27861;&#36827;&#34892;&#27880;&#35299;&#20197;&#36798;&#21040;&#21516;&#26679;&#30340;&#25928;&#26524;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="junit38-legacy-fixture-di"></a>8.3.6.2.&nbsp;&#27979;&#35797;fixture&#20381;&#36182;&#27880;&#20837;</h4></div></div><div></div></div><p>&#24403;<tt class="classname">AbstractDependencyInjectionSpringContextTests</tt>&#31867;(&#21450;&#20854;&#23376;&#31867;)&#36733;&#20837;&#20320;&#30340;&#24212;&#29992;&#19978;&#19979;&#25991;&#26102;&#65292;
        &#23427;&#20204;&#21487;&#20197;&#36890;&#36807;Setter&#27880;&#20837;&#36873;&#25321;&#24615;&#37197;&#32622;&#20320;&#30340;&#27979;&#35797;&#31867;&#23454;&#20363;&#12290;&#20320;&#38656;&#35201;&#20570;&#30340;&#20165;&#20165;&#26159;&#23450;&#20041;&#23454;&#20363;&#21464;&#37327;&#21644;&#30456;&#24212;&#30340;setter&#26041;&#27861;&#12290;
        <tt class="classname">AbstractDependencyInjectionSpringContextTests</tt>&#23558;&#22312;<tt class="methodname">getConfigLocations()</tt>&#26041;&#27861;&#23450;&#20041;&#30340;&#37197;&#32622;&#25991;&#20214;&#38598;&#20013;&#33258;&#21160;&#26597;&#25214;&#30456;&#24212;&#23545;&#35937;&#12290;</p><p>&#20551;&#23450;&#36825;&#26679;&#19968;&#20010;&#22330;&#26223;&#65292;&#25105;&#20204;&#26377;&#19968;&#20010;<tt class="classname">HibernateTitleDao</tt>&#31867;(&#22312;<a href="#testing-fixture-di" title="8.3.3.2.&nbsp;&#27979;&#35797;fixtures&#20381;&#36182;&#27880;&#20837;">&#36890;&#24120;&#30446;&#26631;</a>&#31456;&#33410;&#35814;&#36848;)&#12290;
        &#35753;&#25105;&#20204;&#30475;&#22522;&#20110;JUnit 3.8 &#30340;&#27979;&#35797;&#31867;&#23454;&#29616;&#26412;&#36523;(&#25105;&#20204;&#24456;&#24555;&#23558;&#30475;&#30475;&#37197;&#32622;&#26412;&#36523;)&#12290;</p><pre class="programlisting">public final class HibernateTitleDaoTests <span class="bold"><b>extends AbstractDependencyInjectionSpringContextTests</b></span>  {

    <i class="lineannotation"><span class="lineannotation">// this instance will be (automatically) dependency injected</span></i>    
    private HibernateTitleDao titleDao;

    <i class="lineannotation"><span class="lineannotation">// a setter method to enable DI of the 'titleDao' instance variable</span></i>
    public void setTitleDao(HibernateTitleDao titleDao) {
        this.titleDao = titleDao;
    }

    public void testLoadTitle() throws Exception {
        Title title = this.titleDao.loadTitle(new Long(10));
        assertNotNull(title);
    }

    <i class="lineannotation"><span class="lineannotation">// specifies the Spring configuration to load for this test fixture</span></i>
    protected String[] getConfigLocations() {
        return new String[] { "classpath:com/foo/daos.xml" };
    }

}</pre><p>&#36825;&#20010;&#25991;&#20214;&#34987;<tt class="methodname">getConfigLocations()</tt>&#26041;&#27861;&#25351;&#23450;(&#27604;&#22914;&#65292;<tt class="literal">"classpath:com/foo/daos.xml"</tt>) &#20687;&#36825;&#26679;&#65306;</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans" 
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans 
           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"&gt;

    <i class="lineannotation"><span class="lineannotation">&lt;!-- this bean will be injected into the <tt class="classname">HibernateTitleDaoTests</tt> class --&gt;</span></i>
    &lt;bean id="<span class="bold"><b>titleDao</b></span>" class="<span class="bold"><b>com.foo.dao.hibernate.HibernateTitleDao</b></span>"&gt;
        &lt;property name="sessionFactory" ref="sessionFactory"/&gt;
    &lt;/bean&gt;
    
    &lt;bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean"&gt;
        <i class="lineannotation"><span class="lineannotation">&lt;!-- dependencies elided for clarity --&gt;</span></i>
    &lt;/bean&gt;

&lt;/beans&gt;</pre><p><tt class="classname">AbstractDependencyInjectionSpringContextTests</tt>&#31867;&#20351;&#29992;<a href="#beans-factory-autowire" title="3.3.5.&nbsp;&#33258;&#21160;&#35013;&#37197;&#65288;autowire&#65289;&#21327;&#20316;&#32773;"><span class="emphasis"><em>&#25353;&#31867;&#22411;&#33258;&#21160;&#35013;&#37197;</em></span></a>&#12290;
        &#22240;&#27492;&#22914;&#26524;&#20320;&#26377;&#22810;&#20010;bean&#23450;&#20041;&#26159;&#30456;&#21516;&#30340;&#31867;&#22411;&#65292;&#23601;&#19981;&#33021;&#22312;&#36825;&#20123;bean&#20013;&#20351;&#29992;&#36825;&#31181;&#26041;&#27861;&#12290;
        &#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;&#32487;&#25215;&#30340;<tt class="literal">applicationContext</tt>&#23454;&#20363;&#21464;&#37327;&#24182;&#23454;&#29616;&#26174;&#24335;&#30340;&#26597;&#25214;&#65288;&#27604;&#22914;&#65289;&#65292;
        &#35843;&#29992;<tt class="methodname">applicationContext.getBean("titleDao")</tt>&#26041;&#27861;&#12290;</p><p>&#22914;&#26524;&#20320;&#19981;&#24076;&#26395;&#22312;&#27979;&#35797;&#26696;&#20363;&#20013;&#20351;&#29992;&#20381;&#36182;&#27880;&#20837;&#65292;&#21482;&#35201;&#19981;&#22768;&#26126;&#20219;&#20309;<tt class="literal">public</tt> setter&#26041;&#27861;&#23601;&#21487;&#20197;&#31616;&#21333;&#23454;&#29616;&#12290;
        &#20316;&#20026;&#26367;&#20195;&#30340;&#65292;&#20320;&#21487;&#20197;&#25193;&#23637;<tt class="classname">AbstractSpringContextTests</tt> - &#22312;<tt class="literal">org.springframework.test</tt>
        &#21253;&#20013;&#30340;JUnit 3.8&#38598;&#25104;&#27979;&#35797;&#25903;&#25345;&#31867;&#23618;&#27425;&#30340;&#26681; - &#23427;&#20165;&#20165;&#21253;&#21547;&#20102;&#19968;&#20123;&#36733;&#20837;Spring&#19978;&#19979;&#25991;&#30340;&#31616;&#21333;&#26041;&#27861;&#65292;&#32780;&#19988;&#19981;&#22312;&#27979;&#35797;fixture&#20013;&#20351;&#29992;&#20381;&#36182;&#27880;&#20837;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="junit38-legacy-fixture-di-field"></a>8.3.6.2.1.&nbsp;&#23383;&#27573;&#32423;&#21035;&#65288;Field Level&#65289;&#27880;&#20837;</h5></div></div><div></div></div><p>&#22914;&#26524;&#19981;&#31649;&#20309;&#31181;&#21407;&#22240;&#65292;&#20320;&#30340;&#27979;&#35797;fixture&#20013;&#27809;&#26377;setter&#26041;&#27861;&#65292;Spring&#21487;&#20197;&#23545;<tt class="literal">protected</tt>&#23383;&#27573;&#36827;&#34892;&#20381;&#36182;&#27880;&#20837;&#12290;
          &#19979;&#38754;&#26159;&#21069;&#38754;&#20351;&#29992;&#23383;&#27573;&#32423;&#27880;&#20837;&#31034;&#20363;&#30340;&#26032;&#29256;&#26412;&#65288;Spring XML&#25991;&#20214;&#26080;&#38656;&#25913;&#21464;&#65292;&#20165;&#20165;&#38656;&#35201;&#25913;&#21464;&#27979;&#35797;fixture&#65289;&#12290;</p><pre class="programlisting">public final class HibernateTitleDaoTests <span class="bold"><b>extends AbstractDependencyInjectionSpringContextTests</b></span>  {

    public HibernateTitleDaoTests() {
        <i class="lineannotation"><span class="lineannotation">// switch on field level injection</span></i>
        setPopulateProtectedVariables(true);
    }

    <i class="lineannotation"><span class="lineannotation">// this instance will be (automatically) dependency injected</span></i>
    <i class="lineannotation"><span class="lineannotation"><span class="emphasis"><em>protected</em></span></span></i> HibernateTitleDao <i class="lineannotation"><span class="lineannotation"><span class="emphasis"><em>titleDao</em></span></span></i>;

    public void testLoadTitle() throws Exception {
        Title title = this.titleDao.loadTitle(new Long(10));
        assertNotNull(title);
    }

    <i class="lineannotation"><span class="lineannotation">// specifies the Spring configuration to load for this test fixture</span></i>
    protected String[] getConfigLocations() {
        return new String[] { "classpath:com/foo/daos.xml" };
    }

}</pre><p>&#22312;&#23383;&#27573;&#27880;&#20837;&#30340;&#24773;&#20917;&#19979;&#65292;&#19981;&#33021;&#20351;&#29992;&#33258;&#21160;&#35013;&#37197;&#65306;<tt class="literal">protected</tt> &#23454;&#20363;&#21464;&#37327;&#34987;&#20316;&#20026;&#24050;&#37197;&#32622;&#30340;Spring&#23481;&#22120;&#30340;bean &#26597;&#25214;&#21517;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="junit38-legacy-tx"></a>8.3.6.3.&nbsp;&#20107;&#21153;&#31649;&#29702;</h4></div></div><div></div></div><p><tt class="classname">AbstractTransactionalSpringContextTests</tt>&#31867;
        &#20381;&#36182;&#20110;&#24212;&#29992;&#19978;&#19979;&#25991;&#20013;&#23450;&#20041;&#30340;<tt class="classname">PlatformTransactionManager</tt> bean&#12290;
        &#21517;&#23383;&#26159;&#26080;&#20851;&#32039;&#35201;&#30340;&#65292;&#22240;&#20026;&#20351;&#29992;&#20102;<a href="#beans-factory-autowire" title="3.3.5.&nbsp;&#33258;&#21160;&#35013;&#37197;&#65288;autowire&#65289;&#21327;&#20316;&#32773;"><span class="emphasis"><em>&#25353;&#31867;&#22411;&#33258;&#21160;&#35013;&#37197;</em></span></a>.</p><p>&#36890;&#24120;&#20320;&#20250;&#25193;&#23637;&#20854;&#23376;&#31867;<tt class="classname">AbstractTransactionalDataSourceSpringContextTests</tt>&#12290;
        &#36825;&#20010;&#31867;&#20063;&#38656;&#35201;&#22312;&#24212;&#29992;&#19978;&#19979;&#25991;&#20013;&#26377;&#19968;&#20010;<tt class="classname">DataSource</tt> bean&#23450;&#20041;(&#21516;&#26679;&#21487;&#20197;&#26159;&#20219;&#24847;&#21517;&#31216;)&#12290;
        &#23427;&#21019;&#24314;&#19968;&#20010;<tt class="classname">JdbcTemplate</tt>&#23454;&#20363;&#21464;&#37327;&#65292;&#21487;&#20197;&#29992;&#26469;&#26041;&#20415;&#30340;&#26597;&#35810;&#21644;&#21024;&#38500;&#36873;&#23450;&#34920;&#30340;&#20869;&#23481;&#65288;
        &#35831;&#35760;&#20303;&#40664;&#35748;&#24773;&#20917;&#19979;&#20107;&#21153;&#23558;&#34987;&#22238;&#28378;&#65292;&#22240;&#32780;&#36825;&#26679;&#20570;&#26159;&#23433;&#20840;&#30340;&#65289;&#12290;</p><p>&#22914;&#26524;&#20320;&#24076;&#26395;<span class="emphasis"><em>&#32534;&#31243;&#24335;</em></span>&#25552;&#20132;&#20107;&#21153; &#8212;&#8212; &#19981;&#24120;&#35265;&#20294;&#23545;&#20110;&#29305;&#27530;&#30340;&#25554;&#20837;&#25968;&#25454;&#24211;&#30340;&#27979;&#35797;&#24456;&#26377;&#29992; &#8212;&#8212;
         &#20320;&#21487;&#20197;&#35843;&#29992;&#32487;&#25215;&#33258;<tt class="classname">AbstractTransactionalSpringContextTests</tt>&#31867;&#30340;<tt class="methodname">setComplete()</tt> &#26041;&#27861;&#12290;
         &#36825;&#23558;&#20351;&#20107;&#21153;&#25552;&#20132;&#32780;&#19981;&#26159;&#22238;&#28378;&#12290;&#20316;&#20026;&#21487;&#26367;&#20195;&#30340;&#65292;&#22914;&#26524;&#20320;&#22312;Java 5&#25110;&#26356;&#39640;&#29615;&#22659;&#20013;&#24320;&#21457;&#25193;&#23637;<a href="#junit38-legacy-annotation-aware-tests" title="8.3.6.5.1.&nbsp;&#20351;&#29992;&#27880;&#35299;&#30340;&#20107;&#21153;&#30456;&#20851;&#27979;&#35797;"><tt class="classname">AbstractAnnotationAwareTransactionalTests</tt></a>&#31867;&#65292;
        &#20320;&#21487;&#20197;&#20351;&#29992;<tt class="interfacename">@Rollback(false)</tt>&#26469;&#27880;&#35299;&#27979;&#35797;&#26041;&#27861;&#65292;&#20197;&#36890;&#36807;<span class="emphasis"><em>&#37197;&#32622;</em></span>&#33719;&#24471;&#30456;&#21516;&#30340;&#25928;&#26524;&#12290;</p><p>&#36890;&#36807;&#35843;&#29992;<tt class="methodname">endTransaction()</tt>&#26041;&#27861;&#65292;&#36825;&#37324;&#21487;&#20197;&#22312;&#27979;&#35797;&#26696;&#20363;&#23436;&#25104;&#26102;&#20013;&#27490;&#19968;&#20010;&#20107;&#21153;&#12290;
        &#40664;&#35748;&#23558;&#22238;&#28378;&#20107;&#21153;&#65292;&#38500;&#38750;&#21069;&#38754;&#35843;&#29992;&#20102;<tt class="methodname">setComplete()</tt>&#26041;&#27861;&#12290;
        &#36825;&#20010;&#29305;&#24615;&#24403;&#20320;&#24076;&#26395;&#27979;&#35797;&#8216;&#26029;&#36830;&#25509;&#8217;&#30340; &#25968;&#25454;&#23545;&#35937;&#34892;&#20026;&#26159;&#24456;&#26377;&#29992;&#65292;&#27604;&#22914;&#20107;&#21153;&#22806;&#30340;web&#25110;&#36828;&#31243;&#20351;&#29992;&#30340;Hibernate&#26144;&#23556;&#23454;&#20307;&#12290;
        &#36890;&#24120;&#25042;&#21152;&#36733;&#38169;&#35823;&#21482;&#26377;&#36890;&#36807;UI&#27979;&#35797;&#21457;&#29616;&#12290;&#22914;&#26524;&#20320;&#35843;&#29992;<tt class="methodname">endTransaction()</tt>&#26041;&#27861;
        &#21487;&#20197;&#20445;&#35777;JUnit&#27979;&#35797;&#26102;UI&#25805;&#20316;&#30340;&#27491;&#30830;&#24615;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="junit38-legacy-support-classes"></a>8.3.6.4.&nbsp;JUnit 3.8 &#36951;&#30041;&#25903;&#25345;&#31867;</h4></div></div><div></div></div><p>&#24403;&#20320;&#25193;&#23637;
        <tt class="classname">AbstractTransactionalDataSourceSpringContextTests</tt>&#31867;&#26102;&#65292;&#20320;&#23558;&#38656;&#35201;&#35775;&#38382;&#19979;&#38754;<tt class="literal">protected</tt> &#23454;&#20363;&#21464;&#37327;:</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">applicationContext</tt>(<tt class="interfacename">ConfigurableApplicationContext</tt>):
            &#32487;&#25215;&#33258;<tt class="classname">AbstractSingleSpringContextTests</tt>&#31867;&#12290;&#20351;&#29992;&#23427;&#21487;&#20197;&#36827;&#34892;&#26174;&#24335;bean&#26597;&#25214;&#25110;&#27979;&#35797;&#25972;&#20010;&#30340;&#19978;&#19979;&#25991;&#29366;&#24577;&#12290;</p></li><li><p><tt class="literal">jdbcTemplate</tt>: &#32487;&#25215;&#33258;<tt class="classname">AbstractTransactionalDataSourceSpringContextTests</tt>&#31867;&#65292;
&#29992;&#20110;&#26597;&#35810;&#24050;&#30830;&#35748;&#29366;&#24577;&#12290;
&#20363;&#22914;,&#24212;&#29992;&#20195;&#30721;&#35201;&#21019;&#24314;&#19968;&#20010;&#23545;&#35937;&#65292;&#28982;&#21518;&#20351;&#29992;ORM&#24037;&#20855;&#23558;&#20854;&#25345;&#20037;&#21270;&#65292;&#36825;&#26102;&#20320;&#24819;&#22312;&#27979;&#35797;&#20195;&#30721;&#25191;&#34892;&#21069;&#21518;&#23545;&#20854;&#36827;&#34892;&#26597;&#35810;&#65292;&#20197;&#30830;&#23450;&#25968;&#25454;&#26159;&#21542;&#25554;&#20837;&#21040;&#25968;&#25454;&#24211;&#20013;&#65288;Spring&#20250;
&#20445;&#35777;&#35813;&#26597;&#35810;&#36816;&#34892;&#22312;&#30456;&#21516;&#20107;&#21153;&#20869;&#65289;&#12290;&#20320;&#38656;&#35201;&#21578;&#35785;&#20320;&#30340;ORM&#24037;&#20855;&#8216;&#28165;&#31354;&#8217;&#20854;&#25913;&#21464;&#20197;&#27491;&#30830;&#23436;&#25104;&#20219;&#21153;&#65292;&#20363;&#22914;&#65292;&#20351;&#29992;Hibernate<tt class="classname">Session</tt>&#25509;&#21475;&#30340;<tt class="methodname">flush()</tt>&#26041;&#27861;&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="junit38-legacy-java5-support"></a>8.3.6.5.&nbsp;Java 5+ &#19987;&#26377;&#25903;&#25345;</h4></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="junit38-legacy-annotation-aware-tests"></a>8.3.6.5.1.&nbsp;&#20351;&#29992;&#27880;&#35299;&#30340;&#20107;&#21153;&#30456;&#20851;&#27979;&#35797;</h5></div></div><div></div></div><p>&#22312;&#19978;&#36848;<a href="#integration-testing-common-annotations" title="8.3.5.&nbsp;&#24120;&#29992;&#27880;&#35299;">&#24120;&#29992;&#27880;&#35299;</a>&#20043;&#22806;&#65292;
          <tt class="literal">org.springframework.test.annotation</tt>&#21253;&#20063;&#26377;&#19968;&#20010;<tt class="literal">&#25277;&#35937;</tt> JUnit
          <tt class="classname">TestCase</tt>&#31867;&#26469;&#25552;&#20379;&#27880;&#35299;&#39537;&#21160;&#30340;&#38598;&#25104;&#27979;&#35797;&#25903;&#25345;&#12290;</p><p><tt class="classname">AbstractAnnotationAwareTransactionalTests</tt>&#31867;&#25193;&#23637;&#20102;<tt class="classname">AbstractTransactionalDataSourceSpringContextTests</tt>&#31867;&#65292;
          &#24182;&#36890;&#36807;&#25193;&#23637;fixture&#24341;&#20837;&#19968;&#20123;&#65288;Spring&#19987;&#26377;&#65289;&#30340;&#27880;&#35299;&#12290;<tt class="classname">AbstractAnnotationAwareTransactionalTests</tt>
          &#25903;&#25345;&#25152;&#26377;<a href="#integration-testing-common-annotations" title="8.3.5.&nbsp;&#24120;&#29992;&#27880;&#35299;">&#24120;&#29992;&#27880;&#35299;</a>&#31456;&#33410;&#20013;&#21015;&#20030;&#30340;&#27880;&#35299;&#65292;
          &#32780;&#19988;&#21253;&#25324;Spring&#30340;<tt class="interfacename">@Transactional</tt>&#27880;&#35299;&#65292;&#20197;&#26174;&#24335;&#37197;&#32622;&#20107;&#21153;&#35821;&#20041;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="junit38-legacy-jpa-tests"></a>8.3.6.5.2.&nbsp;JPA&#25903;&#25345;&#31867;</h5></div></div><div></div></div><p><tt class="literal">org.springframework.test.jpa</tt>&#21253;&#25552;&#20379;&#20102;&#22522;&#20110;Java &#25345;&#20037;&#21270;API(JPA)&#30340;&#27979;&#35797;&#25903;&#25345;&#31867;&#12290;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="classname">AbstractJpaTests</tt>&#26159;&#19968;&#20010;&#26041;&#20415;&#30340;JPA&#30456;&#20851;&#27979;&#35797;&#30340;&#25903;&#25345;&#31867;&#65292;
              &#23427;&#25552;&#20379;&#20102;&#21644;<tt class="classname">AbstractTransactionalDataSourceSpringContextTests</tt>&#30456;&#21516;&#30340;&#21151;&#33021;&#21644;&#21363;&#20351;&#22312;&#36827;&#34892;JPA&#35268;&#33539;&#38656;&#35201;&#30340;&#24615;&#33021;&#27979;&#35797;&#26102;&#20063;&#30456;&#21516;&#30340;&#24615;&#33021;&#12290;
              &#23427;&#26292;&#38706;&#20102;&#19968;&#20010;<tt class="interfacename">EntityManagerFactory</tt>&#25509;&#21475;&#21644;&#19968;&#20010;&#20849;&#20139;&#30340;<tt class="interfacename">EntityManager</tt>&#25509;&#21475;&#12290;
              &#38656;&#35201;&#27880;&#20837;&#19968;&#20010;<tt class="interfacename">EntityManagerFactory</tt>&#25509;&#21475;&#65292;
              &#20197;&#21450;&#36890;&#36807;&#36229;&#31867;&#33719;&#24471;<tt class="interfacename">DataSource</tt>&#25509;&#21475;&#21644;<tt class="interfacename">JpaTransactionManager</tt>&#25509;&#21475;&#12290;</p></li><li><p><tt class="classname">AbstractAspectjJpaTests</tt>&#31867;&#26159;<tt class="classname">AbstractJpaTests</tt>&#30340;&#23376;&#31867;&#65292;
              &#23427;&#28608;&#27963;&#20102;AspectJ &#30340;&#35013;&#36733;&#26399;&#32455;&#20837;&#24182;&#33021;&#22815;&#35753;AspectJ&#25351;&#23450;&#19968;&#20010;&#33258;&#23450;&#20041;&#30340;<tt class="literal">aop.xml</tt>&#25991;&#20214;&#36335;&#24452;&#12290;</p></li></ul></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="testcontext-framework"></a>8.3.7.&nbsp;Spring TestContext Framework</h3></div></div><div></div></div><p><span class="emphasis"><em>Spring <tt class="classname">TestContext</tt> Framework</em></span> (&#22312;<tt class="literal">org.springframework.test.context</tt>&#21253;&#20013;)
	  &#25552;&#20379;&#20102;&#19968;&#33324;&#30340;&#12289;&#27880;&#35299;&#39537;&#21160;&#30340;&#21333;&#20803;&#21644;&#38598;&#25104;&#27979;&#35797;&#25903;&#25345;&#65292;&#23427;&#23545;&#20351;&#29992;&#30340;&#27979;&#35797;&#26694;&#26550;&#19981;&#20570;&#35201;&#27714;&#65292;&#21487;&#20197;&#20351;&#29992;JUnit 3.8&#12289;JUnit 4.4, TestNG 5.5&#31561;&#31561;&#12290;
	  TestContext&#26694;&#26550;&#20063;&#24378;&#35843;&#20102;<span class="emphasis"><em>&#32422;&#23450;&#20248;&#20110;&#37197;&#32622;</em></span>&#30340;&#37325;&#35201;&#24615;&#65292;&#23427;&#25552;&#20379;&#20102;&#21512;&#29702;&#30340;&#40664;&#35748;&#20540;&#65292;&#21516;&#26102;&#20063;&#21487;&#20197;&#36890;&#36807;&#22522;&#20110;&#27880;&#35299;&#30340;&#37197;&#32622;&#36827;&#34892;&#25913;&#20889;&#12290;</p><p>&#38500;&#20102;&#19968;&#33324;&#30340;&#27979;&#35797;&#22522;&#30784;&#35774;&#26045;&#22806;&#65292;TestContext&#26694;&#26550;&#36824;&#20197;<tt class="literal">&#25277;&#35937;</tt>&#25903;&#25345;&#31867;&#30340;&#24418;&#24335;&#23545;JUnit 3.8&#12289;JUnit 4.4&#21644;TestNG 5.5&#25552;&#20379;&#20102;&#26174;&#24335;&#30340;&#25903;&#25345;&#12290;
	  &#38024;&#23545;JUnit 4.4&#65292;&#35813;&#26694;&#26550;&#36824;&#25552;&#20379;&#20102;&#19968;&#20010;&#33258;&#23450;&#20041;&#30340;<tt class="interfacename">Runner</tt>&#65292;&#36825;&#20351;&#24471;&#29992;&#25143;&#26080;&#38656;&#32487;&#25215;&#29305;&#23450;&#30340;&#31867;&#23601;&#21487;&#20197;&#32534;&#20889;&#27979;&#35797;&#31867;&#20102;&#12290; </p><p>&#20197;&#19979;&#31456;&#33410;&#32473;&#20986;&#20102;TestContext&#26694;&#26550;&#30340;&#20869;&#37096;&#27010;&#35272;&#12290;
	  &#22914;&#26524;&#20320;&#20165;&#20165;&#20851;&#27880;&#22914;&#20309;&#20351;&#29992;&#35813;&#26694;&#26550;&#32780;&#19981;&#26159;&#20351;&#29992;&#20320;&#33258;&#24049;&#30340;&#30417;&#21548;&#22120;&#21435;&#25193;&#23637;&#23427;&#65292;&#37027;&#20040;&#35831;&#30452;&#25509;&#36339;&#21040;&#37197;&#32622;(<a href="#testcontext-ctx-management" title="8.3.7.2.&nbsp;&#19978;&#19979;&#25991;&#31649;&#29702;&#21644;&#32531;&#23384;">&#19978;&#19979;&#25991;&#31649;&#29702;&#21644;&#32531;&#23384;</a>&#12289;
	  <a href="#testcontext-fixture-di" title="8.3.7.3.&nbsp;&#27979;&#35797;fixture&#30340;&#20381;&#36182;&#27880;&#20837;">&#20381;&#36182;&#27880;&#20837;</a>&#12289;<a href="#testcontext-tx" title="8.3.7.4.&nbsp;&#20107;&#21153;&#31649;&#29702;">&#20107;&#21153;&#31649;&#29702;</a>)&#12289;
	  <a href="#testcontext-support-classes" title="8.3.7.5.&nbsp;TestContext&#25903;&#25345;&#31867;">&#25903;&#25345;&#31867;</a>&#21450;<a href="#testcontext-annotations" title="8.3.7.6.&nbsp;TestContext&#26694;&#26550;&#27880;&#35299;&#25903;&#25345;">&#27880;&#35299;&#25903;&#25345;</a>&#31456;&#33410;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="testcontext-key-abstractions"></a>8.3.7.1.&nbsp;&#20027;&#35201;&#30340;&#25277;&#35937;</h4></div></div><div></div></div><p>&#26694;&#26550;&#30340;&#26680;&#24515;&#21253;&#25324;<tt class="classname">TestContext</tt>&#21644;<tt class="classname">TestContextManager</tt>&#31867;&#20197;&#21450;<tt class="interfacename">TestExecutionListener</tt>&#25509;&#21475;&#12290;
        &#27599;&#27425;&#27979;&#35797;&#37117;&#20250;&#21019;&#24314;<tt class="classname">TestContextManager</tt>&#12290;<tt class="classname">TestContextManager</tt>&#31649;&#29702;&#20102;&#19968;&#20010;<tt class="classname">TestContext</tt>&#65292;
        &#23427;&#36127;&#36131;&#25345;&#26377;&#24403;&#21069;&#27979;&#35797;&#30340;&#19978;&#19979;&#25991;&#12290;<tt class="classname">TestContextManager</tt>&#36824;&#36127;&#36131;&#22312;&#27979;&#35797;&#25191;&#34892;&#36807;&#31243;&#20013;&#26356;&#26032;<tt class="classname">TestContext</tt>&#30340;&#29366;&#24577;&#24182;&#20195;&#29702;&#21040;<tt class="interfacename">TestExecutionListener</tt>&#65292;
        &#23427;&#29992;&#26469;&#30417;&#27979;&#27979;&#35797;&#23454;&#38469;&#30340;&#25191;&#34892;&#65288;&#22914;&#25552;&#20379;&#20381;&#36182;&#27880;&#20837;&#12289;&#31649;&#29702;&#20107;&#21153;&#31561;&#31561;&#65289;&#12290;&#35831;&#26597;&#30475;JavaDoc&#21450;Spring&#27979;&#35797;&#22871;&#20214;&#20197;&#33719;&#24471;&#36827;&#19968;&#27493;&#30340;&#20449;&#24687;&#21644;&#21508;&#31181;&#37197;&#32622;&#31034;&#20363;&#12290;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="classname">TestContext</tt>&#65306;&#23553;&#35013;&#27979;&#35797;&#25191;&#34892;&#30340;&#19978;&#19979;&#25991;&#65292;&#19982;&#24403;&#21069;&#20351;&#29992;&#30340;&#27979;&#35797;&#26694;&#26550;&#26080;&#20851;&#12290;</p></li><li><p><tt class="classname">TestContextManager</tt>&#65306;<span class="emphasis"><em>Spring TestContext Framework</em></span>&#30340;&#20027;&#20837;&#21475;&#28857;&#65292;
            &#36127;&#36131;&#31649;&#29702;&#21333;&#29420;&#30340;<tt class="classname">TestContext</tt>&#24182;&#22312;&#23450;&#20041;&#22909;&#30340;&#25191;&#34892;&#28857;&#19978;&#21521;&#25152;&#26377;&#27880;&#20876;&#30340;<tt class="interfacename">TestExecutionListener</tt>&#21457;&#20986;&#20107;&#20214;&#36890;&#30693;&#65306;
            &#27979;&#35797;&#23454;&#20363;&#30340;&#20934;&#22791;&#65292;&#20808;&#20110;&#29305;&#23450;&#30340;&#27979;&#35797;&#26694;&#26550;&#30340;<span class="emphasis"><em>&#21069;&#32622;&#26041;&#27861;</em></span>&#65292;&#36831;&#20110;<span class="emphasis"><em>&#21518;&#32622;&#26041;&#27861;</em></span>&#12290;</p></li><li><p><tt class="interfacename">TestExecutionListener</tt>&#65306;&#23450;&#20041;&#20102;&#19968;&#20010;<span class="emphasis"><em>&#30417;&#21548;&#22120;</em></span>API&#19982;<tt class="classname">TestContextManager</tt>&#21457;&#24067;&#30340;&#27979;&#35797;&#25191;&#34892;&#20107;&#20214;&#36827;&#34892;&#20132;&#20114;&#65292;
            &#32780;&#35813;&#30417;&#21548;&#22120;&#23601;&#26159;&#27880;&#20876;&#21040;&#36825;&#20010;<tt class="classname">TestContextManager</tt>&#19978;&#30340;&#12290;</p><p>Spring&#25552;&#20379;&#20102;<tt class="interfacename">TestExecutionListener</tt>&#30340;&#19977;&#20010;&#23454;&#29616;&#65292;
            &#20182;&#20204;&#37117;&#26159;&#20351;&#29992;&#40664;&#35748;&#20540;&#36827;&#34892;&#37197;&#32622;&#30340;(&#36890;&#36807;<tt class="interfacename">@TestExecutionListeners</tt>&#27880;&#35299;)&#65306;
            <tt class="classname">DependencyInjectionTestExecutionListener</tt>&#12289;<tt class="classname">DirtiesContextTestExecutionListener</tt>&#21450;<tt class="classname">TransactionalTestExecutionListener</tt>&#65292;
            &#20182;&#20204;&#23545;&#27979;&#35797;&#23454;&#20363;&#25552;&#20379;&#20102;&#20381;&#36182;&#27880;&#20837;&#25903;&#25345;&#65292;&#22788;&#29702;<tt class="interfacename">@DirtiesContext</tt>&#27880;&#35299;&#65292;&#24182;&#20998;&#21035;&#20351;&#29992;&#40664;&#35748;&#30340;&#22238;&#28378;&#35821;&#20041;&#23545;&#27979;&#35797;&#25552;&#20379;&#20107;&#21153;&#25903;&#25345;&#12290;</p></li></ul></div><p>&#20197;&#19979;&#19977;&#20010;&#31456;&#33410;&#35762;&#36848;&#20102;&#22914;&#20309;&#36890;&#36807;&#27880;&#35299;&#37197;&#32622;<tt class="classname">TestContext</tt>&#26694;&#26550;&#24182;&#25552;&#20379;&#20102;&#20351;&#29992;&#35813;&#26694;&#26550;&#32534;&#20889;&#30495;&#23454;&#30340;&#21333;&#20803;&#21644;&#38598;&#25104;&#27979;&#35797;&#30340;&#31034;&#20363;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="testcontext-ctx-management"></a>8.3.7.2.&nbsp;&#19978;&#19979;&#25991;&#31649;&#29702;&#21644;&#32531;&#23384;</h4></div></div><div></div></div><p>&#27599;&#20010;<tt class="classname">TestContext</tt>&#37117;&#20250;&#20026;&#20854;&#25152;&#36127;&#36131;&#30340;&#27979;&#35797;&#23454;&#20363;&#25552;&#20379;&#19978;&#19979;&#25991;&#21644;&#32531;&#23384;&#31649;&#29702;&#12290;
        &#27979;&#35797;&#23454;&#20363;&#19981;&#20250;&#33258;&#21160;&#35775;&#38382;&#37197;&#32622;&#22909;&#30340;<tt class="classname">ApplicationContext</tt>&#65307;&#28982;&#32780;&#65292;&#22914;&#26524;&#19968;&#20010;&#27979;&#35797;&#31867;&#23454;&#29616;&#20102;<tt class="interfacename">ApplicationContextAware</tt>&#25509;&#21475;&#65292;
        &#37027;&#20040;&#27979;&#35797;&#23454;&#20363;&#23601;&#20250;&#25317;&#26377;&#19968;&#20010;&#23545;<tt class="classname">ApplicationContext</tt>&#30340;&#24341;&#29992;&#65288;&#20551;&#22914;&#40664;&#35748;&#24050;&#32463;&#37197;&#32622;&#22909;&#20102;<tt class="classname">DependencyInjectionTestExecutionListener</tt>&#65289;&#12290;
        <tt class="classname">AbstractJUnit38SpringContextTests</tt>&#12289;
        <tt class="classname">AbstractJUnit4SpringContextTests</tt>&#21450;<tt class="classname">AbstractTestNGSpringContextTests</tt>&#24050;&#32463;&#23454;&#29616;&#20102;<tt class="interfacename">ApplicationContextAware</tt>&#65292;
        &#22240;&#27492;&#33258;&#24102;&#20102;&#19978;&#36848;&#21151;&#33021;&#12290;</p><p>&#19982;JUnit 3.8&#36951;&#30041;&#25903;&#25345;&#19981;&#21516;&#65292;&#20351;&#29992;TestContext&#26694;&#26550;&#30340;&#27979;&#35797;&#31867;&#26080;&#38656;&#37325;&#20889;&#20219;&#20309;<tt class="literal">protected</tt>&#25104;&#21592;&#26041;&#27861;&#26469;&#37197;&#32622;&#24212;&#29992;&#19978;&#19979;&#25991;&#12290;
        &#21482;&#38656;&#22312;&#31867;&#23618;&#27425;&#19978;&#22768;&#26126;<tt class="interfacename">@ContextConfiguration</tt>&#27880;&#35299;&#23601;&#21487;&#20197;&#23436;&#25104;&#37197;&#32622;&#12290;
        &#22914;&#26524;&#20320;&#30340;&#27979;&#35797;&#31867;&#27809;&#26377;&#26174;&#24335;&#22768;&#26126;&#20219;&#20309;&#24212;&#29992;&#19978;&#19979;&#25991;&#36164;&#28304;&#30340;<tt class="literal">&#20301;&#32622;</tt>&#65292;&#37027;&#20040;&#37197;&#32622;&#22909;&#30340;<tt class="interfacename">ContextLoader</tt>&#23601;&#20250;&#20915;&#23450;&#22914;&#20309;&#20197;&#21450;&#26159;&#21542;&#20174;&#40664;&#35748;&#30340;&#38598;&#21512;&#20301;&#32622;&#19978;&#21152;&#36733;&#19968;&#20010;&#19978;&#19979;&#25991;&#12290;
        &#20363;&#22914;&#65292;<tt class="classname">GenericXmlContextLoader</tt> - &#40664;&#35748;&#30340;<tt class="interfacename">ContextLoader</tt> - &#20250;&#22522;&#20110;&#27979;&#35797;&#31867;&#30340;&#21517;&#23383;&#20135;&#29983;&#19968;&#20010;&#40664;&#35748;&#30340;&#20301;&#32622;&#12290;
        &#22914;&#26524;&#31867;&#21517;&#21483;&#20570;<tt class="literal">com.example.MyTest</tt>&#65292;&#37027;&#20040;<tt class="classname">GenericXmlContextLoader</tt>&#23601;&#20250;&#20174;<tt class="literal">"classpath:/com/example/MyTest-context.xml"</tt>&#21152;&#36733;&#24212;&#29992;&#19978;&#19979;&#25991;&#12290;</p><pre class="programlisting">package com.example;

@RunWith(SpringJUnit4ClassRunner.class)
<i class="lineannotation"><span class="lineannotation">// ApplicationContext will be loaded from <tt class="literal">"classpath:/com/example/MyTest-context.xml"</tt></span></i>
<span class="bold"><b>@ContextConfiguration</b></span>
public class MyTest {
    <i class="lineannotation"><span class="lineannotation">// class body...</span></i>
}</pre><p>&#22914;&#26524;&#40664;&#35748;&#20301;&#32622;&#19981;&#36866;&#21512;&#20320;&#30340;&#38656;&#27714;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;&#19968;&#20010;&#21253;&#21547;&#20102;XML&#37197;&#32622;&#20803;&#25968;&#25454;&#30340;&#36164;&#28304;&#20301;&#32622;&#30340;&#25968;&#32452;&#26469;&#37197;&#32622;<tt class="interfacename">@ContextConfiguration</tt>&#30340;<tt class="literal">locations</tt>&#23646;&#24615;
        &#65288;&#20551;&#22914;&#24050;&#32463;&#37197;&#32622;&#22909;&#20102;&#19968;&#20010;&#21487;&#20197;&#20351;&#29992;XML&#30340;<tt class="interfacename">ContextLoader</tt>&#65289;- &#19968;&#33324;&#22312;classpath&#19978;&#65292;&#35813;&#23646;&#24615;&#34987;&#29992;&#26469;&#37197;&#32622;&#24212;&#29992;&#31243;&#24207;&#12290;
        &#36825;&#23601;&#21644;&#22312;<tt class="literal">web.xml</tt>&#25110;&#32773;&#20854;&#20182;&#37096;&#32626;&#37197;&#32622;&#20013;&#25351;&#23450;&#37197;&#32622;&#21015;&#34920;&#26102;&#65292;&#26041;&#27861;&#23436;&#20840;&#19968;&#26679;&#65292;&#25110;&#32773;&#20960;&#20046;&#19968;&#26679;&#12290;
        &#20316;&#20026;&#21478;&#22806;&#19968;&#31181;&#36873;&#25321;&#65292;&#20320;&#21487;&#20197;&#23454;&#29616;&#24182;&#37197;&#32622;&#33258;&#24049;&#30340;<tt class="interfacename">ContextLoader</tt>
        </p><pre class="programlisting">@RunWith(SpringJUnit4ClassRunner.class)
<i class="lineannotation"><span class="lineannotation">// ApplicationContext will be loaded from <tt class="literal">"/applicationContext.xml"</tt> and <tt class="literal">"/applicationContext-test.xml"</tt></span></i>
<i class="lineannotation"><span class="lineannotation">// in the root of the classpath</span></i>
<span class="bold"><b>@ContextConfiguration(locations={"/applicationContext.xml", "/applicationContext-test.xml"})</b></span>
public class MyTest {
    <i class="lineannotation"><span class="lineannotation">// class body...</span></i>
}</pre><p><tt class="interfacename">@ContextConfiguration</tt>&#36824;&#25552;&#20379;&#20102;&#19968;&#20010;boolean&#31867;&#22411;&#30340;<tt class="literal">inheritLocations</tt>&#23646;&#24615;&#20197;&#34920;&#26126;&#26159;&#21542;<span class="emphasis"><em>&#32487;&#25215;</em></span>&#29238;&#31867;&#30340;locations&#12290;
        &#20854;&#40664;&#35748;&#20540;&#26159;<tt class="literal">true</tt>&#65292;&#34920;&#26126;&#19968;&#20010;&#34987;&#27880;&#35299;&#30340;&#31867;&#20250;<span class="emphasis"><em>&#32487;&#25215;</em></span>&#34987;&#27880;&#35299;&#30340;&#29238;&#31867;&#20013;&#23450;&#20041;&#30340;&#36164;&#28304;&#20301;&#32622;&#12290;
        &#29305;&#21035;&#22320;&#65292;&#19968;&#20010;&#34987;&#27880;&#35299;&#30340;&#31867;&#30340;&#36164;&#28304;&#20301;&#32622;&#20250;&#38468;&#21152;&#21040;&#20854;&#34987;&#27880;&#35299;&#30340;&#29238;&#31867;&#20013;&#30340;&#36164;&#28304;&#20301;&#32622;&#21015;&#34920;&#19978;&#12290;&#36825;&#26679;&#23376;&#31867;&#23601;&#21487;&#20197;<span class="emphasis"><em>&#32487;&#25215;</em></span>&#36164;&#28304;&#20301;&#32622;&#21015;&#34920;&#12290;
        &#22312;&#19979;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#23558;&#25353;&#39034;&#24207;&#20174;"/base-context.xml"<span class="bold"><b>&#21644;</b></span>"/extended-context.xml"&#20013;&#21152;&#36733;&#38024;&#23545;<tt class="classname">ExtendedTest</tt>&#30340;<tt class="interfacename">ApplicationContext</tt>&#12290;
        &#25152;&#20197;&#23450;&#20041;&#22312;"/extended-context.xml"&#20013;&#30340;Beans&#20250;&#35206;&#30422;&#25481;&#23450;&#20041;&#22312;"/base-context.xml"&#20013;&#30340;Beans&#12290;</p><pre class="programlisting">@RunWith(SpringJUnit4ClassRunner.class)
<i class="lineannotation"><span class="lineannotation">// ApplicationContext will be loaded from <tt class="literal">"/base-context.xml"</tt> in the root of the classpath</span></i>
<span class="bold"><b>@ContextConfiguration(locations={"/base-context.xml"})</b></span>
public class BaseTest {
    <i class="lineannotation"><span class="lineannotation">// class body...</span></i>
}

<i class="lineannotation"><span class="lineannotation">// ApplicationContext will be loaded from <tt class="literal">"/base-context.xml"</tt> and <tt class="literal">"/extended-context.xml"</tt></span></i>
<i class="lineannotation"><span class="lineannotation">// in the root of the classpath</span></i>
<span class="bold"><b>@ContextConfiguration(locations={"/extended-context.xml"})</b></span>
public class ExtendedTest extends BaseTest {
    <i class="lineannotation"><span class="lineannotation">// class body...</span></i>
}</pre><p>&#22914;&#26524;&#23558;<tt class="literal">inheritLocations</tt>&#35774;&#20026;<tt class="literal">false</tt>&#65292;&#37027;&#20040;&#23601;&#20250;<span class="emphasis"><em>&#23631;&#34109;&#25481;</em></span>&#29238;&#31867;&#30340;&#36164;&#28304;&#20301;&#32622;&#65292;&#28982;&#21518;&#21487;&#20197;&#26367;&#25442;&#29238;&#31867;&#20013;&#23450;&#20041;&#30340;&#20219;&#20309;&#36164;&#28304;&#20301;&#32622;&#12290;</p><p>&#40664;&#35748;&#24773;&#20917;&#19979;, &#37197;&#32622;&#22909;&#30340;<tt class="interfacename">ApplicationContext</tt>&#19968;&#26086;&#34987;&#21152;&#36733;&#23601;&#20250;&#37325;&#29992;&#21040;&#27599;&#20010;&#27979;&#35797;&#19978;&#12290;&#36825;&#26679;&#35774;&#32622;&#30340;&#25104;&#26412;&#20165;&#20135;&#29983;&#19968;&#27425;&#65288;&#27599;&#20010;&#27979;&#35797;fixture&#65289;&#65292;
        &#38543;&#21518;&#27979;&#35797;&#30340;&#25191;&#34892;&#23601;&#20250;&#24456;&#24555;&#20102;&#12290;&#22312;&#26576;&#20123;&#19981;&#22826;&#21487;&#33021;&#21457;&#29983;&#30340;&#24773;&#20917;&#19979;&#65292;&#19968;&#20010;&#27979;&#35797;&#21487;&#33021;&#20250;<span class="emphasis"><em>&#30772;&#22351;</em></span>&#24212;&#29992;&#19978;&#19979;&#25991;&#65292;
        &#36825;&#26102;&#23427;&#38656;&#35201;&#37325;&#26032;&#21152;&#36733; - &#20363;&#22914;&#65292;&#36890;&#36807;&#25913;&#21464;&#24212;&#29992;&#23545;&#35937;&#30340;bean&#23450;&#20041;&#25110;&#32773;&#29366;&#24577; - &#20320;&#21487;&#20197;&#20351;&#29992;<tt class="interfacename">@DirtiesContext</tt>
        &#65288;&#20551;&#35774;&#40664;&#35748;&#24050;&#32463;&#37197;&#32622;&#20102;<tt class="classname">DirtiesContextTestExecutionListener</tt>&#65289;&#26469;&#27880;&#35299;&#27979;&#35797;&#26041;&#27861;&#20351;&#24471;&#27979;&#35797;fixture&#37325;&#26032;&#21152;&#36733;&#37197;&#32622;&#25991;&#20214;&#24182;&#22312;&#27979;&#35797;&#19979;&#27425;&#25191;&#34892;&#21069;&#37325;&#26032;&#26500;&#24314;&#24212;&#29992;&#19978;&#19979;&#25991;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="testcontext-fixture-di"></a>8.3.7.3.&nbsp;&#27979;&#35797;fixture&#30340;&#20381;&#36182;&#27880;&#20837;</h4></div></div><div></div></div><p>&#24403;&#20320;&#37197;&#32622;<tt class="classname">DependencyInjectionTestExecutionListener</tt>&#26102; - &#23427;&#20250;&#34987;&#40664;&#35748;&#37197;&#32622; - &#36890;&#36807;<tt class="interfacename">@TestExecutionListeners</tt>&#27880;&#35299;&#65292;
        &#20320;&#30340;&#27979;&#35797;&#23454;&#20363;&#20381;&#36182;&#30340;bean&#20250;&#34987;<span class="emphasis"><em>&#27880;&#20837;</em></span>&#65292;&#32780;&#36825;&#20123;bean&#26159;&#36890;&#36807;<tt class="interfacename">@ContextConfiguration</tt>&#20351;&#29992;Setter&#27880;&#20837;&#12289;Field&#27880;&#20837;&#25110;&#32773;&#20004;&#32773;&#37117;&#26377;&#26469;&#27880;&#20837;&#30340;&#65292;
        &#21040;&#24213;&#20351;&#29992;&#21738;&#31181;&#26041;&#24335;&#21462;&#20915;&#20110;&#20320;&#36873;&#25321;&#30340;&#27880;&#35299;&#20197;&#21450;&#20320;&#23558;&#23427;&#20204;&#25918;&#21040;setter&#26041;&#27861;&#20013;&#36824;&#26159;&#23646;&#24615;&#20013;&#12290;&#20026;&#20102;&#19982;Spring 2.5&#30340;&#27880;&#35299;&#20445;&#25345;&#19968;&#33268;&#65292;
        &#20320;&#21487;&#20197;&#36873;&#25321;Spring&#30340;<tt class="interfacename">@Autowired</tt>&#27880;&#35299;&#25110;&#32773;JSR 250&#20013;&#30340;<tt class="interfacename">@Resource</tt>&#27880;&#35299;&#12290;&#20854;&#35821;&#20041;&#23545;&#20110;Spring&#26694;&#26550;&#26469;&#35828;&#37117;&#26159;&#19968;&#33268;&#30340;&#12290;
        &#20363;&#22914;&#65292; &#22914;&#26524;&#20320;&#21916;&#27426; <a href="#beans-factory-autowire" title="3.3.5.&nbsp;&#33258;&#21160;&#35013;&#37197;&#65288;autowire&#65289;&#21327;&#20316;&#32773;"><span class="emphasis"><em>&#25353;&#31867;&#22411;&#33258;&#21160;&#32455;&#20837;</em></span></a>&#65292;
        &#37027;&#20040;&#35831;&#20351;&#29992;<tt class="interfacename">@Autowired</tt>&#26469;&#27880;&#35299;&#20320;&#30340;settter&#26041;&#27861;&#25110;&#32773;&#23646;&#24615;&#12290;&#21478;&#19968;&#26041;&#38754;&#65292;&#22914;&#26524;&#20320;&#21916;&#27426;<span class="emphasis"><em>&#25353;&#21517;&#23383;</em></span>&#27880;&#20837;&#65292;
        &#37027;&#20040;&#35831;&#20351;&#29992;<tt class="interfacename">@Resource</tt>&#26469;&#27880;&#35299;&#20320;&#30340;settter&#26041;&#27861;&#25110;&#32773;&#23646;&#24615;&#12290;</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Tip" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Tip]" src="tip.png"></td><th align="left">Tip</th></tr><tr><td colspan="2" valign="top" align="left"><p>TestContext&#26694;&#26550;&#27809;&#26377;&#30417;&#27979;&#27979;&#35797;&#23454;&#20363;&#30340;&#23454;&#20363;&#21270;&#26041;&#24335;&#12290;&#25152;&#20197;&#23545;&#26500;&#36896;&#26041;&#27861;&#20351;&#29992;<tt class="interfacename">@Autowired</tt>&#23558;&#27627;&#26080;&#24847;&#20041;&#12290;</p></td></tr></tbody></table></div><p>&#26082;&#28982;<tt class="interfacename">@Autowired</tt>&#25191;&#34892;<a href="#beans-factory-autowire" title="3.3.5.&nbsp;&#33258;&#21160;&#35013;&#37197;&#65288;autowire&#65289;&#21327;&#20316;&#32773;"><span class="emphasis"><em>&#25353;&#31867;&#22411;&#33258;&#21160;&#32534;&#32455;</em></span></a>&#65292;
        &#37027;&#20040;&#22914;&#26524;&#20320;&#26377;&#30456;&#21516;&#31867;&#22411;&#30340;&#22810;&#20010;bean&#23450;&#20041;&#30340;&#35805;&#65292;&#23545;&#37027;&#20123;&#29305;&#23450;&#30340;bean&#23601;&#19981;&#33021;&#20351;&#29992;&#35813;&#26041;&#24335;&#12290;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;
        &#20320;&#21487;&#20197;&#20351;&#29992;<tt class="interfacename">@Resource</tt><span class="emphasis"><em>&#25353;&#21517;&#23383;</em></span>&#27880;&#20837;&#12290;&#21478;&#22806;&#65292;&#22914;&#26524;&#20320;&#30340;&#27979;&#35797;&#31867;&#23454;&#29616;&#20102;<tt class="classname">ApplicationContextAware</tt>&#65292;
        &#23601;&#21487;&#20197;&#30452;&#25509;&#35775;&#38382;<tt class="classname">ApplicationContext</tt>&#24182;&#35843;&#29992;<tt class="methodname">applicationContext.getBean("titleDao")</tt>&#25191;&#34892;&#19968;&#20010;&#26174;&#24335;&#30340;&#26597;&#25214;&#12290;</p><p>&#22914;&#26524;&#20320;&#19981;&#24819;&#35753;&#20320;&#30340;&#27979;&#35797;&#23454;&#20363;&#20351;&#29992;&#20381;&#36182;&#27880;&#20837;&#65292;&#21482;&#35201;&#19981;&#23558;<tt class="interfacename">@Autowired</tt>&#25110;&#32773;<tt class="interfacename">@Resource</tt>&#27880;&#35299;&#21040;&#20219;&#20309;&#23646;&#24615;&#25110;&#32773;setter&#26041;&#27861;&#19978;&#23601;&#34892;&#20102;&#12290;
        &#21478;&#19968;&#31181;&#26041;&#24335;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;<tt class="interfacename">@TestExecutionListeners</tt>&#24182;&#24573;&#30053;&#25481;&#30417;&#21548;&#22120;&#21015;&#34920;&#20013;&#30340;<tt class="literal">DependencyInjectionTestExecutionListener.class</tt>&#23601;&#21487;&#20197;&#23436;&#20840;&#31105;&#29992;&#20381;&#36182;&#27880;&#20837;&#12290;</p><p>&#32771;&#34385;&#22914;&#19979;&#22330;&#26223;&#65306;&#25105;&#20204;&#26377;&#19968;&#20010;&#31867;&#65292;&#21517;&#23383;&#21483;<tt class="classname">HibernateTitleDao</tt>&#65288;<a href="#testing-fixture-di" title="8.3.3.2.&nbsp;&#27979;&#35797;fixtures&#20381;&#36182;&#27880;&#20837;">&#36890;&#29992;&#30446;&#26631;</a>&#31456;&#33410;&#24050;&#32463;&#36827;&#34892;&#20102;&#20171;&#32461;&#65289;&#12290;
        &#39318;&#20808;&#65292;&#35753;&#25105;&#20204;&#30475;&#30475;&#22522;&#20110;JUnit 4.4&#30340;&#27979;&#35797;&#31867;&#30340;&#23454;&#29616;&#65292;&#23427;&#20351;&#29992;<tt class="interfacename">@Autowired</tt>&#36827;&#34892;&#23646;&#24615;&#27880;&#20837;&#65288;&#22312;&#25152;&#26377;&#31034;&#20363;&#20195;&#30721;&#20043;&#21518;&#25105;&#20204;&#20250;&#26597;&#30475;&#24212;&#29992;&#19978;&#19979;&#25991;&#30340;&#37197;&#32622;&#65289;&#12290;
        <span class="emphasis"><em>&#27880;&#24847;&#65306;&#19979;&#38754;&#20195;&#30721;&#30340;&#20381;&#36182;&#27880;&#20837;&#34892;&#20026;&#24182;&#19981;&#26159;&#29305;&#23450;&#20110;JUnit 4.4&#30340;&#12290;&#21516;&#26679;&#30340;&#20381;&#36182;&#27880;&#20837;&#25216;&#26415;&#21487;&#20197;&#20351;&#29992;&#22312;&#20219;&#20309;&#27979;&#35797;&#26694;&#26550;&#20013;&#12290;</em></span></p><pre class="programlisting">@RunWith(SpringJUnit4ClassRunner.class)
<i class="lineannotation"><span class="lineannotation">// specifies the Spring configuration to load for this test fixture</span></i>
<span class="bold"><b>@ContextConfiguration(locations={"daos.xml"})</b></span>
public final class HibernateTitleDaoTests {

    <i class="lineannotation"><span class="lineannotation">// this instance will be dependency injected <span class="bold"><b>by type</b></span></span></i>
    <span class="bold"><b>@Autowired</b></span>    
    private HibernateTitleDao titleDao;

    public void testLoadTitle() throws Exception {
        Title title = this.titleDao.loadTitle(new Long(10));
        assertNotNull(title);
    }
}</pre><p>&#27492;&#22806;&#65292;&#25105;&#20204;&#21487;&#20197;&#20351;&#29992;<tt class="interfacename">@Autowired</tt>&#36827;&#34892;setter&#27880;&#20837;&#12290;</p><pre class="programlisting">@RunWith(SpringJUnit4ClassRunner.class)
<i class="lineannotation"><span class="lineannotation">// specifies the Spring configuration to load for this test fixture</span></i>
<span class="bold"><b>@ContextConfiguration(locations={"daos.xml"})</b></span>
public final class HibernateTitleDaoTests {

    <i class="lineannotation"><span class="lineannotation">// this instance will be dependency injected <span class="bold"><b>by type</b></span></span></i>
    private HibernateTitleDao titleDao;

    <span class="bold"><b>@Autowired</b></span>
    public void setTitleDao(HibernateTitleDao titleDao) {
        this.titleDao = titleDao;
    }

    public void testLoadTitle() throws Exception {
        Title title = this.titleDao.loadTitle(new Long(10));
        assertNotNull(title);
    }
}</pre><p>&#29616;&#22312;&#35753;&#25105;&#20204;&#30475;&#30475;&#20351;&#29992;<tt class="interfacename">@Resource</tt>&#36827;&#34892;&#23646;&#24615;&#27880;&#20837;&#30340;&#19968;&#20010;&#31034;&#20363;&#12290;</p><pre class="programlisting">@RunWith(SpringJUnit4ClassRunner.class)
<i class="lineannotation"><span class="lineannotation">// specifies the Spring configuration to load for this test fixture</span></i>
<span class="bold"><b>@ContextConfiguration(locations={"daos.xml"})</b></span>
public final class HibernateTitleDaoTests {

    <i class="lineannotation"><span class="lineannotation">// this instance will be dependency injected <span class="bold"><b>by name</b></span></span></i>
    <span class="bold"><b>@Resource</b></span>
    private HibernateTitleDao titleDao;

    public void testLoadTitle() throws Exception {
        Title title = this.titleDao.loadTitle(new Long(10));
        assertNotNull(title);
    }
}</pre><p>&#26368;&#21518;&#65292;&#36825;&#26159;&#20351;&#29992;<tt class="interfacename">@Resource</tt>&#36827;&#34892;setter&#27880;&#20837;&#30340;&#19968;&#20010;&#31034;&#20363;&#12290;</p><pre class="programlisting">@RunWith(SpringJUnit4ClassRunner.class)
<i class="lineannotation"><span class="lineannotation">// specifies the Spring configuration to load for this test fixture</span></i>
<span class="bold"><b>@ContextConfiguration(locations={"daos.xml"})</b></span>
public final class HibernateTitleDaoTests {

    <i class="lineannotation"><span class="lineannotation">// this instance will be dependency injected <span class="bold"><b>by name</b></span></span></i>
    private HibernateTitleDao titleDao;
    
    <span class="bold"><b>@Resource</b></span>
    public void setTitleDao(HibernateTitleDao titleDao) {
        this.titleDao = titleDao;
    }

    public void testLoadTitle() throws Exception {
        Title title = this.titleDao.loadTitle(new Long(10));
        assertNotNull(title);
    }
}</pre><p>&#19978;&#38754;&#30340;&#20195;&#30721;&#20351;&#29992;&#20102;&#30456;&#21516;&#30340;XML&#19978;&#19979;&#25991;&#25991;&#20214;&#65292;<tt class="interfacename">@ContextConfiguration</tt>&#27880;&#35299;&#20351;&#29992;&#20102;&#36825;&#20123;&#20449;&#24687;(&#22914; <tt class="literal">"daos.xml"</tt>)&#65292;&#23427;&#26159;&#36825;&#26679;&#30340;&#65306;</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans" 
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans 
           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"&gt;

    <i class="lineannotation"><span class="lineannotation">&lt;!-- this bean will be injected into the <tt class="classname">HibernateTitleDaoTests</tt> class --&gt;</span></i>
    &lt;bean id="<span class="bold"><b>titleDao</b></span>" class="<span class="bold"><b>com.foo.dao.hibernate.HibernateTitleDao</b></span>"&gt;
        &lt;property name="sessionFactory" ref="sessionFactory"/&gt;
    &lt;/bean&gt;
    
    &lt;bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean"&gt;
        <i class="lineannotation"><span class="lineannotation">&lt;!-- dependencies elided for clarity --&gt;</span></i>
    &lt;/bean&gt;

&lt;/beans&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="testcontext-tx"></a>8.3.7.4.&nbsp;&#20107;&#21153;&#31649;&#29702;</h4></div></div><div></div></div><p>&#22312;TestContext&#26694;&#26550;&#20013;&#65292;&#20107;&#21153;&#26159;&#30001;<tt class="classname">TransactionalTestExecutionListener</tt>&#36827;&#34892;&#31649;&#29702;&#30340;&#65292;
        &#40664;&#35748;&#24773;&#20917;&#19979;&#36825;&#26159;&#36890;&#36807;<tt class="interfacename">@TestExecutionListeners</tt>&#27880;&#35299;&#36827;&#34892;&#37197;&#32622;&#30340;&#65292;
        &#21363;&#20351;&#20320;&#27809;&#26377;&#22312;&#27979;&#35797;&#31867;&#20013;&#26174;&#24335;&#22768;&#26126; <tt class="interfacename">@TestExecutionListeners</tt>&#27880;&#35299;&#12290;
        &#20026;&#20102;&#25903;&#25345;&#20107;&#21153;&#65292;&#20320;&#24517;&#39035;&#36890;&#36807;<tt class="interfacename">@ContextConfiguration</tt>&#22312;&#24212;&#29992;&#19978;&#19979;&#25991;&#20013;&#21152;&#36733;&#19968;&#20010;<tt class="classname">PlatformTransactionManager</tt> bean&#12290;
        &#27492;&#22806;&#65292;&#20320;&#24517;&#39035;&#22312;&#31867;&#25110;&#26041;&#27861;&#23618;&#27425;&#19978;&#22768;&#26126;&#19968;&#20010;<tt class="interfacename">@Transactional</tt>&#12290;
        </p><p>&#35831;&#21442;&#32771;<a href="#testcontext-annotations" title="8.3.7.6.&nbsp;TestContext&#26694;&#26550;&#27880;&#35299;&#25903;&#25345;">TestContext&#26694;&#26550;&#30340;&#27880;&#35299;&#25903;&#25345;</a>&#20013;&#30340;<tt class="interfacename">@TransactionConfiguration</tt>&#20197;&#20102;&#35299;&#31867;&#23618;&#27425;&#30340;&#20107;&#21153;&#37197;&#32622;&#65288;&#20363;&#22914;&#20026;&#20107;&#21153;&#31649;&#29702;&#22120;&#35774;&#32622;bean&#21517;&#31216;&#20197;&#21450;&#40664;&#35748;&#30340;&#22238;&#28378;&#26631;&#24535;&#65289;&#12290;</p><p>&#20026;&#27599;&#20010;&#27979;&#35797;&#26041;&#27861;&#37197;&#32622;&#20107;&#21153;&#26102;&#26377;&#20960;&#31181;&#36873;&#39033;&#12290;&#22914;&#26524;&#23545;&#20110;&#25972;&#20010;&#31867;&#26469;&#35828;&#20107;&#21153;&#19981;&#21487;&#29992;&#65292;&#37027;&#20040;&#21487;&#20197;&#20351;&#29992;<tt class="interfacename">@Transactional</tt>&#26469;&#26174;&#24335;&#27880;&#35299;&#26041;&#27861;&#12290;
        &#19982;&#27492;&#31867;&#20284;&#65292;&#22914;&#26524;&#23545;&#20110;&#25972;&#20010;&#31867;&#26469;&#35828;&#20107;&#21153;<span class="emphasis"><em>&#21487;&#29992;</em></span>&#65292;&#37027;&#20040;&#21487;&#20197;&#20351;&#29992;<tt class="interfacename">@NotTransactional</tt>&#26469;&#27880;&#35299;&#26041;&#27861;&#34920;&#26126;&#19981;&#20026;&#35813;&#26041;&#27861;&#22686;&#21152;&#20107;&#21153;&#12290;
        &#20320;&#21487;&#20197;&#20351;&#29992;<tt class="interfacename">@Rollback</tt>&#27880;&#35299;&#35206;&#30422;&#31867;&#32423;&#21035;&#30340;&#40664;&#35748;&#30340;&#22238;&#28378;&#35774;&#32622;&#36827;&#32780;&#38024;&#23545;&#19968;&#20010;&#29305;&#23450;&#30340;&#27979;&#35797;&#26041;&#27861;&#25511;&#21046;&#20854;&#20107;&#21153;&#30340;&#25552;&#20132;&#12290;</p><p><span class="emphasis"><em>&#35831;&#27880;&#24847;&#65292;<a href="#testcontext-support-classes-junit38" title="8.3.7.5.1.&nbsp;JUnit 3.8&#25903;&#25345;&#31867;"><tt class="classname">AbstractTransactionalJUnit38SpringContextTests</tt></a>&#12289;
        <a href="#testcontext-support-classes-junit44" title="8.3.7.5.2.&nbsp;JUnit 4.4&#25903;&#25345;&#31867;"><tt class="classname">AbstractTransactionalJUnit4SpringContextTests</tt></a> &#21450; 
        <a href="#testcontext-support-classes-testng" title="8.3.7.5.4.&nbsp;TestNG&#25903;&#25345;&#31867;"><tt class="classname">AbstractTransactionalTestNGSpringContextTests</tt></a>&#24050;&#32463;&#22312;&#31867;&#32423;&#21035;&#39044;&#20808;&#37197;&#32622;&#22909;&#20102;&#20107;&#21153;&#25903;&#25345;&#12290;
        </em></span></p><p>&#20598;&#23572;&#20320;&#38656;&#35201;&#22312;&#19968;&#20010;&#20107;&#21153;&#24615;&#27979;&#35797;&#26041;&#27861;&#21069;&#12289;&#21518;&#25191;&#34892;&#26576;&#20123;&#20195;&#30721;&#65292;&#32780;&#36825;&#20123;&#20195;&#30721;&#26159;&#22788;&#22312;&#20107;&#21153;&#19978;&#19979;&#25991;&#20043;&#22806;&#30340;&#65292;&#20363;&#22914;&#65292;
        &#22312;&#27979;&#35797;&#25191;&#34892;&#21069;&#21435;&#39564;&#35777;&#21021;&#22987;&#30340;&#25968;&#25454;&#24211;&#29366;&#24577;&#25110;&#32773;&#22312;&#27979;&#35797;&#25191;&#34892;&#21518;&#39564;&#35777;&#26399;&#24453;&#30340;&#20107;&#21153;&#25552;&#20132;&#34892;&#20026;&#65288;&#20030;&#20363;&#26469;&#35828;&#65292;&#35813;&#27979;&#35797;&#34987;&#37197;&#32622;&#20026;&#19981;&#36827;&#34892;&#22238;&#28378;&#30340;&#65289;&#12290;
        &#25903;&#25345;<tt class="interfacename">@BeforeTransaction</tt>&#21644;<tt class="interfacename">@AfterTransaction</tt>&#27880;&#35299;&#30340;<tt class="classname">TransactionalTestExecutionListener</tt>&#27491;&#22909;&#36866;&#29992;&#20110;&#36825;&#31181;&#24773;&#20917;&#12290;
        &#20351;&#29992;&#36825;&#20123;&#27880;&#35299;&#20043;&#19968;&#26469;&#27880;&#35299;&#27979;&#35797;&#31867;&#20013;&#20219;&#20309;&#30340;<tt class="literal">public void</tt>&#26041;&#27861;&#65292;
        &#21516;&#26102;<tt class="classname">TransactionalTestExecutionListener</tt>&#20250;&#20445;&#35777;&#20320;&#30340;<span class="emphasis"><em>&#20107;&#21153;&#26041;&#27861;&#20043;&#21069;&#30340;&#20195;&#30721;</em></span>&#25110;&#32773;<span class="emphasis"><em>&#20107;&#21153;&#26041;&#27861;&#20043;&#21518;&#30340;&#20195;&#30721;</em></span>&#20250;&#22312;&#27491;&#30830;&#30340;&#26102;&#38388;&#25191;&#34892;&#12290;</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Tip" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Tip]" src="tip.png"></td><th align="left">Tip</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#20219;&#24847;<span class="emphasis"><em>&#21069;&#32622;&#26041;&#27861;</em></span> (&#22914;&#20351;&#29992;JUnit 4&#30340;@Before&#25152;&#27880;&#35299;&#30340;&#26041;&#27861;)&#21644;<span class="emphasis"><em>&#21518;&#32622;&#26041;&#27861;</em></span> (&#22914;&#20351;&#29992;JUnit 4&#30340;@After&#25152;&#27880;&#35299;&#30340;&#26041;&#27861;)&#37117;&#20250;<span class="bold"><b>&#22312;</b></span>&#19968;&#20010;&#20107;&#21153;&#20013;&#24471;&#21040;&#25191;&#34892;&#12290;
          &#27492;&#22806;&#65292;&#20351;&#29992; <tt class="interfacename">@NotTransactional</tt>&#27880;&#35299;&#30340;&#27979;&#35797;&#19981;&#20250;&#25191;&#34892;<tt class="interfacename">@BeforeTransaction</tt>&#25110;<tt class="interfacename">@AfterTransaction</tt>&#25152;&#27880;&#35299;&#30340;&#26041;&#27861;&#12290;</p></td></tr></tbody></table></div><p>&#19979;&#38754;&#30340;&#22522;&#20110;JUnit 4&#30340;&#31034;&#20363;&#23637;&#31034;&#20102;&#19968;&#20010;&#20551;&#24819;&#30340;&#38598;&#25104;&#27979;&#35797;&#22330;&#26223;&#65292;&#37325;&#28857;&#38416;&#36848;&#20102;&#20107;&#21153;&#30456;&#20851;&#30340;&#27880;&#35299;&#12290;&#35831;&#26597;&#30475;&#21442;&#32771;&#25163;&#20876;&#30340;<a href="#testcontext-annotations" title="8.3.7.6.&nbsp;TestContext&#26694;&#26550;&#27880;&#35299;&#25903;&#25345;">TestContext&#26694;&#26550;&#27880;&#35299;&#25903;&#25345;</a>&#31456;&#33410;&#20197;&#20102;&#35299;&#36827;&#19968;&#27493;&#30340;&#20449;&#24687;&#21644;&#37197;&#32622;&#31034;&#20363;&#12290;</p><pre class="programlisting">@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration
<span class="bold"><b>@TransactionConfiguration(transactionManager="txMgr", defaultRollback=false)</b></span>
<span class="bold"><b>@Transactional</b></span>
public class FictitiousTransactionalTest {

	<span class="bold"><b>@BeforeTransaction</b></span>
	public void verifyInitialDatabaseState() {
		<i class="lineannotation"><span class="lineannotation">// logic to verify the initial state before a transaction is started</span></i>
	}

	@Before
	public void setUpTestDataWithinTransaction() {
		<i class="lineannotation"><span class="lineannotation">// set up test data within the transaction</span></i>
	}

	@Test
	<i class="lineannotation"><span class="lineannotation">// overrides the class-level defaultRollback setting</span></i>
	<span class="bold"><b>@Rollback(true)</b></span>
	public void modifyDatabaseWithinTransaction() {
		<i class="lineannotation"><span class="lineannotation">// logic which uses the test data and modifies database state</span></i>
	}

	@After
	public void tearDownWithinTransaction() {
		<i class="lineannotation"><span class="lineannotation">// execute "tear down" logic within the transaction</span></i>
	}

	<span class="bold"><b>@AfterTransaction</b></span>
	public void verifyFinalDatabaseState() {
		<i class="lineannotation"><span class="lineannotation">// logic to verify the final state after transaction has rolled back</span></i>
	}

	@Test
	<span class="bold"><b>@NotTransactional</b></span>
	public void performNonDatabaseRelatedAction() {
		<i class="lineannotation"><span class="lineannotation">// logic which does not modify database state</span></i>
	}
}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="testcontext-support-classes"></a>8.3.7.5.&nbsp;TestContext&#25903;&#25345;&#31867;</h4></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="testcontext-support-classes-junit38"></a>8.3.7.5.1.&nbsp;JUnit 3.8&#25903;&#25345;&#31867;</h5></div></div><div></div></div><p><tt class="literal">org.springframework.test.context.junit38</tt>&#21253;&#20026;&#22522;&#20110;JUnit 3.8&#30340;&#27979;&#35797;&#29992;&#20363;&#25552;&#20379;&#20102;&#25903;&#25345;&#31867;&#12290;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="classname">AbstractJUnit38SpringContextTests</tt>&#65306;</p><p>&#23545;&#38598;&#25104;&#20102;<span class="emphasis"><em>Spring TestContext Framework</em></span>&#19982;JUnit 3.8&#29615;&#22659;&#20013;&#30340;<tt class="classname">ApplicationContext</tt>&#27979;&#35797;&#25903;&#25345;&#30340;<tt class="classname">TestCase</tt>&#36827;&#34892;&#20102;&#25277;&#35937;&#12290;
              &#24403;&#20320;&#32487;&#25215;<tt class="classname">AbstractJUnit38SpringContextTests</tt>&#31867;&#26102;&#65292;&#20320;&#23601;&#21487;&#20197;&#35775;&#38382;&#21040;<tt class="literal">protected</tt>&#30340;&#25104;&#21592;&#21464;&#37327;&#65306;</p><div class="itemizedlist"><ul type="circle"><li><p><tt class="literal">applicationContext</tt>&#65306;&#20351;&#29992;&#23427;&#36827;&#34892;&#26174;&#24335;&#30340;bean&#26597;&#25214;&#25110;&#32773;&#27979;&#35797;&#25972;&#20010;&#19978;&#19979;&#25991;&#30340;&#29366;&#24577;&#12290;</p></li></ul></div></li><li><p><tt class="classname">AbstractTransactionalJUnit38SpringContextTests</tt>&#65306;</p><p>&#23545;&#20026;JDBC&#35775;&#38382;&#22686;&#21152;&#20415;&#25463;&#21151;&#33021;&#30340;<tt class="classname">AbstractJUnit38SpringContextTests</tt>&#30340;<span class="emphasis"><em>&#20107;&#21153;</em></span>&#25193;&#23637;&#36827;&#34892;&#25277;&#35937;&#12290;
              &#38656;&#35201;&#22312;<tt class="classname">ApplicationContext</tt>&#20013;&#23450;&#20041;&#19968;&#20010;<tt class="classname">javax.sql.DataSource</tt> bean&#21644;&#19968;&#20010;<tt class="interfacename">PlatformTransactionManager</tt> bean&#12290;
              &#24403;&#20320;&#32487;&#25215;<tt class="classname">AbstractTransactionalJUnit38SpringContextTests</tt>&#31867;&#26102;&#65292;&#20320;&#23601;&#21487;&#20197;&#35775;&#38382;&#21040;<tt class="literal">protected</tt>&#30340;&#25104;&#21592;&#21464;&#37327;&#65306;</p><div class="itemizedlist"><ul type="circle"><li><p><tt class="literal">applicationContext</tt>&#65306;&#20174;<tt class="classname">AbstractJUnit38SpringContextTests</tt>&#29238;&#31867;&#32487;&#25215;&#12290;&#20351;&#29992;&#23427;&#25191;&#34892;bean&#30340;&#26597;&#25214;&#25110;&#32773;&#27979;&#35797;&#25972;&#20010;&#19978;&#19979;&#25991;&#30340;&#29366;&#24577;</p></li><li><p><tt class="literal">simpleJdbcTemplate</tt>&#65306;&#22312;&#26597;&#35810;&#20197;&#30830;&#35748;&#29366;&#24577;&#26102;&#38750;&#24120;&#26377;&#29992;&#12290;&#20363;&#22914;&#65292;&#24212;&#29992;&#20195;&#30721;&#35201;&#21019;&#24314;&#19968;&#20010;&#23545;&#35937;&#65292;&#28982;&#21518;&#20351;&#29992;ORM&#24037;&#20855;&#23558;&#20854;&#25345;&#20037;&#21270;&#65292;
                  &#36825;&#26102;&#20320;&#24819;&#22312;&#27979;&#35797;&#20195;&#30721;&#25191;&#34892;&#21069;&#21518;&#23545;&#20854;&#36827;&#34892;&#26597;&#35810;&#65292;&#20197;&#30830;&#23450;&#25968;&#25454;&#26159;&#21542;&#25554;&#20837;&#21040;&#25968;&#25454;&#24211;&#20013;&#65288;Spring&#20250;&#20445;&#35777;&#35813;&#26597;&#35810;&#36816;&#34892;&#22312;&#30456;&#21516;&#20107;&#21153;&#20869;&#65289;&#12290;
                  &#20320;&#38656;&#35201;&#21578;&#35785;&#20320;&#30340;ORM&#24037;&#20855;&#8216;flush&#8217;&#20854;&#25913;&#21464;&#20197;&#27491;&#30830;&#23436;&#25104;&#20219;&#21153;&#65292;&#20363;&#22914;&#65292;&#20351;&#29992;Hibernate<tt class="classname">Session</tt>&#25509;&#21475;&#30340;<tt class="methodname">flush()</tt>&#26041;&#27861;&#12290;</p></li></ul></div></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="testcontext-support-classes-junit44"></a>8.3.7.5.2.&nbsp;JUnit 4.4&#25903;&#25345;&#31867;</h5></div></div><div></div></div><p><tt class="literal">org.springframework.test.context.junit4</tt>&#21253;&#20026;&#22522;&#20110;JUnit 4.4&#30340;&#27979;&#35797;&#29992;&#20363;&#25552;&#20379;&#20102;&#25903;&#25345;&#31867;&#12290;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="classname">AbstractJUnit4SpringContextTests</tt>&#65306;</p><p>&#23545;&#38598;&#25104;&#20102;<span class="emphasis"><em>Spring TestContext Framework</em></span>&#19982;JUnit 4.4&#29615;&#22659;&#20013;&#30340;<tt class="classname">ApplicationContext</tt>&#27979;&#35797;&#25903;&#25345;&#30340;&#22522;&#26412;&#27979;&#35797;&#31867;&#36827;&#34892;&#20102;&#25277;&#21462;&#12290;</p><p>&#24403;&#20320;&#32487;&#25215;<tt class="classname">AbstractJUnit4SpringContextTests</tt>&#26102;&#65292;&#20320;&#23601;&#21487;&#20197;&#35775;&#38382;&#21040;<tt class="literal">protected</tt>&#30340;&#25104;&#21592;&#21464;&#37327;&#65306;</p><div class="itemizedlist"><ul type="circle"><li><p><tt class="literal">applicationContext</tt>&#65306;&#20351;&#29992;&#23427;&#36827;&#34892;&#26174;&#24335;&#30340;bean&#26597;&#25214;&#25110;&#32773;&#27979;&#35797;&#25972;&#20010;&#19978;&#19979;&#25991;&#30340;&#29366;&#24577;&#12290;</p></li></ul></div></li><li><p><tt class="classname">AbstractTransactionalJUnit4SpringContextTests</tt>&#65306;</p><p>&#23545;&#20026;JDBC&#35775;&#38382;&#22686;&#21152;&#20415;&#25463;&#21151;&#33021;&#30340;<tt class="classname">AbstractJUnit4SpringContextTests</tt>&#30340;<span class="emphasis"><em>&#20107;&#21153;</em></span>&#25193;&#23637;&#36827;&#34892;&#25277;&#35937;&#12290;
              &#38656;&#35201;&#22312;<tt class="classname">ApplicationContext</tt>&#20013;&#23450;&#20041;&#19968;&#20010;<tt class="classname">javax.sql.DataSource</tt> bean&#21644;&#19968;&#20010;<tt class="interfacename">PlatformTransactionManager</tt> bean&#12290;</p><p>&#24403;&#20320;&#32487;&#25215;<tt class="classname">AbstractTransactionalJUnit4SpringContextTests</tt>&#31867;&#26102;&#65292;&#20320;&#23601;&#21487;&#20197;&#35775;&#38382;&#21040;&#19979;&#21015;<tt class="literal">protected</tt>&#30340;&#25104;&#21592;&#21464;&#37327;&#65306;</p><div class="itemizedlist"><ul type="circle"><li><p><tt class="literal">applicationContext</tt>&#65306;&#32487;&#25215;&#33258;&#29238;&#31867;<tt class="classname">AbstractJUnit4SpringContextTests</tt>&#12290;
                  &#20351;&#29992;&#23427;&#25191;&#34892;bean&#30340;&#26597;&#25214;&#25110;&#32773;&#27979;&#35797;&#25972;&#20010;&#19978;&#19979;&#25991;&#30340;&#29366;&#24577;</p></li><li><p><tt class="literal">simpleJdbcTemplate</tt>&#65306;&#24403;&#36890;&#36807;&#26597;&#35810;&#26469;&#30830;&#35748;&#29366;&#24577;&#26102;&#38750;&#24120;&#26377;&#29992;&#12290;&#20363;&#22914;&#65292;&#24212;&#29992;&#20195;&#30721;&#35201;&#21019;&#24314;&#19968;&#20010;&#23545;&#35937;&#65292;
                  &#28982;&#21518;&#20351;&#29992;ORM&#24037;&#20855;&#23558;&#20854;&#25345;&#20037;&#21270;&#65292;&#36825;&#26102;&#20320;&#24819;&#22312;&#27979;&#35797;&#20195;&#30721;&#25191;&#34892;&#21069;&#21518;&#23545;&#20854;&#36827;&#34892;&#26597;&#35810;&#65292;&#20197;&#30830;&#23450;&#25968;&#25454;&#26159;&#21542;&#25554;&#20837;&#21040;&#25968;&#25454;&#24211;&#20013;&#12290;
                  &#65288;Spring&#20250;&#20445;&#35777;&#35813;&#26597;&#35810;&#36816;&#34892;&#22312;&#30456;&#21516;&#20107;&#21153;&#20869;&#12290;&#65289;&#20320;&#38656;&#35201;&#21578;&#35785;&#20320;&#30340;ORM&#24037;&#20855;&#8216;flush&#8217;&#20854;&#25913;&#21464;&#20197;&#27491;&#30830;&#23436;&#25104;&#20219;&#21153;&#65292;&#20363;&#22914;&#65292;
                  &#20351;&#29992;Hibernate<tt class="classname">Session</tt>&#25509;&#21475;&#30340;<tt class="methodname">flush()</tt>&#26041;&#27861;&#12290;</p></li></ul></div></li></ul></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Tip" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Tip]" src="tip.png"></td><th align="left">Tip</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#36825;&#20123;&#31867;&#20165;&#20165;&#20026;&#25193;&#23637;&#25552;&#20379;&#20102;&#26041;&#20415;&#12290; &#22914;&#26524;&#20320;&#19981;&#24819;&#23558;&#20320;&#30340;&#27979;&#35797;&#31867;&#32465;&#23450;&#21040;Spring&#30340;&#31867;&#19978; - &#20363;&#22914;&#65292;&#22914;&#26524;&#20320;&#35201;&#30452;&#25509;&#25193;&#23637;&#20320;&#24819;&#27979;&#35797;&#30340;&#31867; - &#21482;&#38656;&#35201;&#36890;&#36807;<tt class="interfacename">@RunWith(SpringJUnit4ClassRunner.class)</tt>&#12289;
            <tt class="interfacename">@ContextConfiguration</tt>&#12289;<tt class="interfacename">@TestExecutionListeners</tt>&#31561;&#27880;&#35299;&#26469;&#37197;&#32622;&#20320;&#33258;&#24049;&#30340;&#27979;&#35797;&#31867;&#23601;&#21487;&#20197;&#20102;&#12290;</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="testcontext-junit4-runner"></a>8.3.7.5.3.&nbsp;&#23450;&#21046;JUnit 4.4&#36816;&#34892;&#22120;</h5></div></div><div></div></div><p><span class="emphasis"><em>Spring TestContext Framework</em></span>&#36890;&#36807;&#19968;&#20010;&#21487;&#23450;&#21046;&#30340;&#36816;&#34892;&#22120;&#25552;&#20379;&#20102;&#19982;JUnit 4.4&#30340;&#23436;&#20840;&#38598;&#25104;&#12290;
          &#36890;&#36807;&#20351;&#29992;<tt class="literal">@Runwith(SpringJUnit4ClassRunner.class)</tt>&#26469;&#27880;&#35299;&#27979;&#35797;&#31867;&#65292;&#24320;&#21457;&#32773;&#21487;&#20197;&#23454;&#29616;&#26631;&#20934;&#30340;JUnit 4.4&#21333;&#20803;&#21644;&#38598;&#25104;&#27979;&#35797;&#65292;
          &#21516;&#26102;&#36824;&#33021;&#33719;&#24471;TestContext&#26694;&#26550;&#30340;&#22909;&#22788;&#65292;&#22914;&#23545;&#21152;&#36733;&#24212;&#29992;&#19978;&#19979;&#25991;&#30340;&#25903;&#25345;&#65292;&#27979;&#35797;&#23454;&#20363;&#30340;&#20381;&#36182;&#27880;&#20837;&#65292;&#25191;&#34892;&#20107;&#21153;&#24615;&#27979;&#35797;&#26041;&#27861;&#31561;&#31561;&#12290;
          &#19979;&#38754;&#30340;&#20195;&#30721;&#28165;&#21333;&#26174;&#31034;&#20102;&#20351;&#29992;&#23450;&#21046;&#30340;Spring Runner&#26469;&#37197;&#32622;&#19968;&#20010;&#27979;&#35797;&#31867;&#30340;&#26368;&#23567;&#38656;&#27714;&#12290;
          <span class="emphasis"><em>&#27880;&#24847;&#65292;&#25105;&#20204;&#20351;&#29992;&#19968;&#20010;&#31354;&#30340;&#21015;&#34920;&#26469;&#37197;&#32622;<tt class="interfacename">@TestExecutionListeners</tt>&#20197;&#20415;&#31105;&#29992;&#40664;&#35748;&#30340;&#30417;&#21548;&#22120;&#65292;
          &#21542;&#21017;&#38656;&#35201;&#36890;&#36807;<tt class="interfacename">@ContextConfiguration</tt>&#37197;&#32622;&#19968;&#20010; <tt class="interfacename">ApplicationContext</tt>&#12290;</em></span></p><pre class="programlisting">@RunWith(SpringJUnit4ClassRunner.class)
@TestExecutionListeners({})
public class SimpleTest {

	@Test
	public void testMethod() {
		<i class="lineannotation"><span class="lineannotation">// execute test logic...</span></i>
	}
}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="testcontext-support-classes-testng"></a>8.3.7.5.4.&nbsp;TestNG&#25903;&#25345;&#31867;</h5></div></div><div></div></div><p><tt class="literal">org.springframework.test.context.testng</tt>&#21253;&#20026;&#22522;&#20110;TestNG&#30340;&#27979;&#35797;&#29992;&#20363;&#25552;&#20379;&#20102;&#25903;&#25345;&#31867;&#12290;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="classname">AbstractTestNGSpringContextTests</tt>&#65306;</p><p>&#23545;&#38598;&#25104;&#20102;<span class="emphasis"><em>Spring TestContext Framework</em></span>&#19982;TestNG&#29615;&#22659;&#20013;&#30340;<tt class="classname">ApplicationContext</tt>&#27979;&#35797;&#25903;&#25345;&#30340;&#22522;&#30784;&#27979;&#35797;&#31867;&#36827;&#34892;&#20102;&#25277;&#35937;&#12290;</p><p>&#24403;&#20320;&#32487;&#25215;<tt class="classname">AbstractTestNGSpringContextTests</tt>&#26102;&#65292;&#23601;&#21487;&#20197;&#35775;&#38382;&#21040;&#19979;&#21015;<tt class="literal">protected</tt>&#30340;&#25104;&#21592;&#21464;&#37327;&#65306;</p><div class="itemizedlist"><ul type="circle"><li><p><tt class="literal">applicationContext</tt>&#65306;&#20351;&#29992;&#23427;&#36827;&#34892;&#26174;&#24335;&#30340;bean&#26597;&#25214;&#25110;&#32773;&#27979;&#35797;&#25972;&#20010;&#19978;&#19979;&#25991;&#30340;&#29366;&#24577;&#12290;</p></li></ul></div></li><li><p><tt class="classname">AbstractTransactionalTestNGSpringContextTests</tt>&#65306;</p><p>&#23545;&#20026;JDBC&#35775;&#38382;&#22686;&#21152;&#20415;&#25463;&#21151;&#33021;&#30340;<tt class="classname">AbstractTestNGSpringContextTests</tt>&#30340;<span class="emphasis"><em>&#20107;&#21153;</em></span>&#25193;&#23637;&#36827;&#34892;&#25277;&#35937;&#12290;
              &#38656;&#35201;&#22312;<tt class="classname">ApplicationContext</tt>&#20013;&#23450;&#20041;&#19968;&#20010;<tt class="classname">javax.sql.DataSource</tt> bean&#21644;&#19968;&#20010;<tt class="interfacename">PlatformTransactionManager</tt> bean&#12290;</p><p>&#24403;&#20320;&#32487;&#25215;<tt class="classname">AbstractTransactionalTestNGSpringContextTests</tt>&#31867;&#26102;&#65292;&#23601;&#21487;&#20197;&#35775;&#38382;&#19979;&#21015;<tt class="literal">protected</tt>&#30340;&#25104;&#21592;&#21464;&#37327;&#65306;</p><div class="itemizedlist"><ul type="circle"><li><p><tt class="literal">applicationContext</tt>&#65306;&#32487;&#25215;&#33258;&#29238;&#31867;<tt class="classname">AbstractTestNGSpringContextTests</tt>&#12290;&#20351;&#29992;&#23427;&#25191;&#34892;bean&#30340;&#26597;&#25214;&#25110;&#32773;&#27979;&#35797;&#25972;&#20010;&#19978;&#19979;&#25991;&#30340;&#29366;&#24577;&#12290;</p></li><li><p><tt class="literal">simpleJdbcTemplate</tt>&#65306;&#24403;&#36890;&#36807;&#26597;&#35810;&#26469;&#30830;&#35748;&#29366;&#24577;&#26102;&#38750;&#24120;&#26377;&#29992;&#12290;&#20363;&#22914;&#65292;&#24212;&#29992;&#20195;&#30721;&#35201;&#21019;&#24314;&#19968;&#20010;&#23545;&#35937;&#65292;
                  &#28982;&#21518;&#20351;&#29992;ORM&#24037;&#20855;&#23558;&#20854;&#25345;&#20037;&#21270;&#65292;&#36825;&#26102;&#20320;&#24819;&#22312;&#27979;&#35797;&#20195;&#30721;&#25191;&#34892;&#21069;&#21518;&#23545;&#20854;&#36827;&#34892;&#26597;&#35810;&#65292;&#20197;&#30830;&#23450;&#25968;&#25454;&#26159;&#21542;&#25554;&#20837;&#21040;&#25968;&#25454;&#24211;&#20013;&#12290;&#65288;Spring&#20250;&#20445;&#35777;&#35813;&#26597;&#35810;&#36816;&#34892;&#22312;&#30456;&#21516;&#20107;&#21153;&#20869;&#12290;&#65289;
                  &#20320;&#38656;&#35201;&#21578;&#35785;&#20320;&#30340;ORM&#24037;&#20855;&#8216;flush&#8217;&#20854;&#25913;&#21464;&#20197;&#27491;&#30830;&#23436;&#25104;&#20219;&#21153;&#65292;&#20363;&#22914;&#65292;&#20351;&#29992;Hibernate<tt class="classname">Session</tt>&#25509;&#21475;&#30340;<tt class="methodname">flush()</tt>&#26041;&#27861;&#12290;</p></li></ul></div></li></ul></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Tip" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Tip]" src="tip.png"></td><th align="left">Tip</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#36825;&#20123;&#31867;&#20165;&#20165;&#20026;&#25193;&#23637;&#25552;&#20379;&#20102;&#26041;&#20415;&#12290; &#22914;&#26524;&#20320;&#19981;&#24819;&#23558;&#20320;&#30340;&#27979;&#35797;&#31867;&#32465;&#23450;&#21040;Spring&#30340;&#31867;&#19978; - &#20363;&#22914;&#65292;&#22914;&#26524;&#20320;&#35201;&#30452;&#25509;&#25193;&#23637;&#20320;&#24819;&#27979;&#35797;&#30340;&#31867; - &#21482;&#38656;&#35201;&#36890;&#36807;
            <tt class="interfacename">@ContextConfiguration</tt>&#12289;<tt class="interfacename">@TestExecutionListeners</tt>&#31561;&#27880;&#35299;&#26469;&#37197;&#32622;&#20320;&#33258;&#24049;&#30340;&#27979;&#35797;&#31867;&#23601;&#21487;&#20197;&#20102;&#12290;
            &#24182;&#20351;&#29992;<tt class="classname">TestContextManager</tt>&#26469;&#25163;&#24037;&#30417;&#27979;&#20320;&#30340;&#27979;&#35797;&#31867;&#12290;
            &#35831;&#26597;&#30475;<tt class="classname">AbstractTestNGSpringContextTests</tt>&#30340;&#28304;&#20195;&#30721;&#20197;&#20102;&#35299;&#22914;&#20309;&#26816;&#27979;&#20320;&#33258;&#24049;&#30340;&#27979;&#35797;&#31867;&#12290;</p></td></tr></tbody></table></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="testcontext-annotations"></a>8.3.7.6.&nbsp;TestContext&#26694;&#26550;&#27880;&#35299;&#25903;&#25345;</h4></div></div><div></div></div><p>Spring TestContext Framework&#25903;&#25345;<a href="#integration-testing-common-annotations" title="8.3.5.&nbsp;&#24120;&#29992;&#27880;&#35299;">&#36890;&#29992;&#27880;&#35299;</a>&#31456;&#33410;&#25552;&#21040;&#30340;&#25152;&#26377;&#27880;&#35299;&#12290;
        &#28982;&#32780;&#19979;&#38754;&#30340;&#36825;&#20123;&#27880;&#35299;<span class="emphasis"><em>&#21482;&#26377;&#37197;&#21512;JUnit&#25165;&#33021;&#20351;&#29992;&#65288;&#27604;&#22914;&#25645;&#37197;<a href="#testcontext-junit4-runner" title="8.3.7.5.3.&nbsp;&#23450;&#21046;JUnit 4.4&#36816;&#34892;&#22120;">SpringJUnit4ClassRunner</a>&#25110;&#32773;
        <a href="#testcontext-support-classes-junit38" title="8.3.7.5.1.&nbsp;JUnit 3.8&#25903;&#25345;&#31867;">JUnit 3.8</a>&#21450;<a href="#testcontext-support-classes-junit44" title="8.3.7.5.2.&nbsp;JUnit 4.4&#25903;&#25345;&#31867;">JUnit 4.4</a>&#25903;&#25345;&#31867;&#65289;&#12290;</em></span></p><div class="itemizedlist"><ul type="disc"><li><p><tt class="interfacename">@IfProfileValue</tt></p></li><li><p><tt class="interfacename">@ProfileValueSourceConfiguration</tt></p></li><li><p><tt class="interfacename">@ExpectedException</tt></p><p>&#21327;&#21516;&#20351;&#29992;Spring&#30340;<tt class="interfacename">@ExpectedException</tt>&#27880;&#35299;&#19982;JUnit 4&#30340;<tt class="interfacename">@Test(expected=...)</tt>&#20250;&#23548;&#33268;&#19968;&#20010;&#19981;&#21487;&#36991;&#20813;&#30340;&#20914;&#31361;&#12290;
            &#22240;&#27492;&#24403;&#19982;JUnit 4&#38598;&#25104;&#26102;&#65292;&#24320;&#21457;&#32773;&#24517;&#39035;&#36873;&#25321;&#20854;&#20013;&#19968;&#20010;&#65292;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#24314;&#35758;&#20351;&#29992;&#26174;&#24335;&#30340;JUnit 4&#37197;&#32622;&#12290;</p></li><li><p><tt class="interfacename">@Timed</tt></p><p>Spring&#30340;<tt class="interfacename">@Timed</tt>&#27880;&#35299;&#19982;JUnit 4&#30340;<tt class="interfacename">@Test(timeout=...)</tt>&#25903;&#25345;&#20855;&#26377;&#19981;&#21516;&#30340;&#35821;&#20041;&#12290;
            &#29305;&#21035;&#22320;&#65292;&#37492;&#20110;JUnit 4&#22788;&#29702;&#27979;&#35797;&#25191;&#34892;&#36229;&#26102;&#65288;&#22914;&#36890;&#36807;&#22312;&#19968;&#20010;&#21333;&#29420;&#30340;<tt class="interfacename">&#32447;&#31243;</tt>&#20013;&#25191;&#34892;&#27979;&#35797;&#26041;&#27861;&#65289;&#30340;&#26041;&#24335;&#65292;
            &#25105;&#20204;&#19981;&#21487;&#33021;&#22312;&#19968;&#20010;&#20107;&#21153;&#19978;&#19979;&#25991;&#20013;&#30340;&#27979;&#35797;&#26041;&#27861;&#19978;&#20351;&#29992;JUnit&#30340;<tt class="interfacename">@Test(timeout=...)</tt>&#37197;&#32622;&#12290;&#22240;&#27492;&#65292;
            &#22914;&#26524;&#20320;&#24819;&#23558;&#19968;&#20010;&#27979;&#35797;&#26041;&#27861;&#37197;&#32622;&#25104;<span class="emphasis"><em>&#35745;&#26102;</em></span>&#19988;<span class="emphasis"><em>&#20855;&#20107;&#21153;&#24615;</em></span>&#30340;&#65292;
            &#20320;&#23601;&#24517;&#39035;&#32852;&#21512;&#20351;&#29992;Spring&#30340;<tt class="interfacename">@Timed</tt>&#21450;<tt class="interfacename">@Transactional</tt>&#27880;&#35299;&#12290;
            &#36824;&#20540;&#24471;&#27880;&#24847;&#30340;&#26159;<tt class="interfacename">@Test(timeout=...)</tt>&#21482;&#31649;&#27979;&#35797;&#26041;&#27861;&#26412;&#36523;&#25191;&#34892;&#30340;&#27425;&#25968;&#65292;&#22914;&#26524;&#36229;&#20986;&#30340;&#35805;&#31435;&#21051;&#23601;&#20250;&#22833;&#36133;&#65307;
            &#28982;&#32780;&#65292;<tt class="interfacename">@Timed</tt>&#20851;&#27880;&#30340;&#26159;&#27979;&#35797;&#25191;&#34892;&#30340;&#24635;&#26102;&#38388;&#65288;&#21253;&#25324;&#24314;&#31435;&#21644;&#38144;&#27585;&#25805;&#20316;&#20197;&#21450;&#37325;&#22797;&#65289;&#65292;&#24182;&#19988;&#19981;&#20250;&#20196;&#27979;&#35797;&#22833;&#36133;&#12290;
            </p></li><li><p><tt class="interfacename">@Repeat</tt></p></li></ul></div><p>Spring TestContext Framework&#36824;&#25903;&#25345;&#19979;&#38754;&#36825;&#20123;&#38750;&#29305;&#23450;&#20110;&#27979;&#35797;&#30340;&#27880;&#35299;&#65292;&#24182;&#19988;&#20445;&#25345;&#20854;&#35821;&#20041;&#19981;&#21464;&#12290;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="interfacename">@Autowired</tt></p></li><li><p><tt class="interfacename">@Qualifier</tt></p></li><li><p><tt class="interfacename">@Resource</tt> (javax.annotation)<span class="emphasis"><em>&#22914;&#26524;JSR-250&#21487;&#29992;</em></span></p></li><li><p><tt class="interfacename">@PersistenceContext</tt> (javax.persistence)<span class="emphasis"><em>&#22914;&#26524;JPA&#21487;&#29992;</em></span></p></li><li><p><tt class="interfacename">@PersistenceUnit</tt> (javax.persistence)<span class="emphasis"><em>&#22914;&#26524;JPA&#21487;&#29992;</em></span></p></li><li><p><tt class="interfacename">@Required</tt></p></li><li><p><tt class="interfacename">@Transactional</tt></p></li></ul></div><p>&#19979;&#38754;&#30340;&#21015;&#34920;&#21253;&#21547;&#20102;&#29305;&#23450;&#20110;Spring TestContext Framework&#30340;&#25152;&#26377;&#27880;&#35299;&#12290;&#35831;&#26597;&#30475;&#30456;&#24212;&#30340;JavaDoc&#20197;&#20102;&#35299;&#36827;&#19968;&#27493;&#30340;&#20449;&#24687;&#65292;&#21253;&#25324;&#40664;&#35748;&#30340;&#23646;&#24615;&#20540;&#31561;&#31561;&#12290;</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><b><tt class="interfacename">@ContextConfiguration</tt></b></span></p><p>&#23450;&#20041;&#31867;&#32423;&#21035;&#30340;&#20803;&#25968;&#25454;&#20197;&#20915;&#23450;&#22914;&#20309;&#21152;&#36733;&#21644;&#37197;&#32622;<tt class="interfacename">ApplicationContext</tt>&#12290;&#29305;&#21035;&#22320;&#65292;
            @ContextConfiguration&#23450;&#20041;&#20102;&#35201;&#21152;&#36733;&#30340;&#24212;&#29992;&#19978;&#19979;&#25991;&#36164;&#28304;<tt class="literal">&#20301;&#32622;</tt>&#20197;&#21450;&#29992;&#26469;&#21152;&#36733;&#19978;&#19979;&#25991;&#30340;<tt class="interfacename">ContextLoader</tt>&#31574;&#30053;&#12290;</p><pre class="programlisting">@ContextConfiguration(locations={"example/test-context.xml"}, loader=CustomContextLoader.class)
public class CustomConfiguredApplicationContextTests {
    <i class="lineannotation"><span class="lineannotation">// class body...</span></i>
}</pre><p>&#27880;&#24847;&#65306;<tt class="interfacename">@ContextConfiguration</tt>&#40664;&#35748;&#24773;&#20917;&#19979;&#20026;<span class="emphasis"><em>&#32487;&#25215;</em></span>&#30340;&#36164;&#28304;&#20301;&#32622;&#25552;&#20379;&#20102;&#25903;&#25345;&#12290;
            &#26597;&#30475;<a href="#testcontext-ctx-management" title="8.3.7.2.&nbsp;&#19978;&#19979;&#25991;&#31649;&#29702;&#21644;&#32531;&#23384;">&#19978;&#19979;&#25991;&#31649;&#29702;&#21644;&#32531;&#23384;</a>&#31456;&#33410;&#21450;JavaDoc&#26469;&#20102;&#35299;&#26356;&#22810;&#30340;&#31034;&#20363;&#21644;&#32454;&#33410;&#20449;&#24687;&#12290;</p></li><li><p><span class="bold"><b><tt class="interfacename">@TestExecutionListeners</tt></b></span></p><p>&#23450;&#20041;&#31867;&#32423;&#21035;&#30340;&#20803;&#25968;&#25454;&#65292;<tt class="interfacename">TestExecutionListener</tt>s&#20250;&#20351;&#29992;<tt class="classname">TestContextManager</tt>&#36827;&#34892;&#27880;&#20876;&#12290;
            &#36890;&#24120;&#65292;<tt class="interfacename">@TestExecutionListeners</tt>&#19982;<tt class="interfacename">@ContextConfiguration</tt>&#20250;&#25645;&#37197;&#20351;&#29992;&#12290;</p><pre class="programlisting">@ContextConfiguration
@TestExecutionListeners({CustomTestExecutionListener.class, AnotherTestExecutionListener.class})
public class CustomTestExecutionListenerTests {
    <i class="lineannotation"><span class="lineannotation">// class body...</span></i>
}</pre><p>&#27880;&#24847;&#65306;<tt class="interfacename">@TestExecutionListeners</tt>&#40664;&#35748;&#24773;&#20917;&#19979;&#20026;<span class="emphasis"><em>&#32487;&#25215;</em></span>&#30340;&#30417;&#21548;&#22120;&#25552;&#20379;&#20102;&#25903;&#25345;&#12290;&#26597;&#30475;JavaDoc&#26469;&#20102;&#35299;&#26356;&#22810;&#30340;&#31034;&#20363;&#21644;&#32454;&#33410;&#20449;&#24687;&#12290;</p></li><li><p><span class="bold"><b><tt class="interfacename">@TransactionConfiguration</tt></b></span></p><p>&#20026;&#37197;&#32622;&#20107;&#21153;&#24615;&#27979;&#35797;&#23450;&#20041;&#20102;&#31867;&#32423;&#21035;&#30340;&#20803;&#25968;&#25454;&#12290;&#29305;&#21035;&#22320;&#65292;&#22914;&#26524;&#38656;&#35201;&#30340;PlatformTransactionManager&#19981;&#26159;&#8220;transactionManager&#8221;&#30340;&#35805;&#65292;
            &#37027;&#20040;&#21487;&#20197;&#26174;&#24335;&#37197;&#32622;&#39537;&#21160;&#20107;&#21153;&#30340;<tt class="interfacename">PlatformTransactionManager</tt>&#30340;bean&#21517;&#23383;&#12290;&#27492;&#22806;&#65292;
            &#21487;&#20197;&#23558;<tt class="literal">defaultRollback</tt>&#26631;&#24535;&#25913;&#20026;<tt class="literal">false</tt>&#12290;&#36890;&#24120;&#65292;
            <tt class="interfacename">@TransactionConfiguration</tt>&#19982;<tt class="interfacename">@ContextConfiguration</tt>&#25645;&#37197;&#20351;&#29992;&#12290;</p><pre class="programlisting">@ContextConfiguration
@TransactionConfiguration(transactionManager="txMgr", defaultRollback=false)
public class CustomConfiguredTransactionalTests {
    <i class="lineannotation"><span class="lineannotation">// class body...</span></i>
}</pre></li><li><p><span class="bold"><b><tt class="interfacename">@BeforeTransaction</tt></b></span></p><p>&#34920;&#26126;&#34987;&#27880;&#35299;&#30340;<tt class="literal">public void</tt>&#26041;&#27861;&#24212;&#35813;&#22312;&#27979;&#35797;&#26041;&#27861;&#30340;&#20107;&#21153;&#24320;&#22987;<span class="emphasis"><em>&#20043;&#21069;</em></span>&#25191;&#34892;&#65292;
            &#35813;&#20107;&#21153;&#26159;&#36890;&#36807;<tt class="interfacename">@Transactional</tt>&#27880;&#35299;&#26469;&#37197;&#32622;&#30340;&#12290;
           </p><pre class="programlisting">@BeforeTransaction
public void beforeTransaction() {
    <i class="lineannotation"><span class="lineannotation">// logic to be executed before a transaction is started</span></i>
}</pre></li><li><p><span class="bold"><b><tt class="interfacename">@AfterTransaction</tt></b></span></p><p>&#34920;&#26126;&#34987;&#27880;&#35299;&#30340;<tt class="literal">public void</tt>&#26041;&#27861;&#24212;&#35813;&#22312;&#27979;&#35797;&#26041;&#27861;&#30340;&#20107;&#21153;&#32467;&#26463;<span class="emphasis"><em>&#20043;&#21518;</em></span>&#25191;&#34892;&#65292;
            &#35813;&#20107;&#21153;&#26159;&#36890;&#36807;<tt class="interfacename">@Transactional</tt>&#27880;&#35299;&#26469;&#37197;&#32622;&#30340;&#12290;
           </p><pre class="programlisting">@AfterTransaction
public void afterTransaction() {
    <i class="lineannotation"><span class="lineannotation">// logic to be executed after a transaction has ended</span></i>
}</pre></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="testing-examples-petclinic"></a>8.3.8.&nbsp;PetClinic&#31034;&#20363;</h3></div></div><div></div></div><p>&#22312;Spring&#30340;&#23436;&#25972;&#21457;&#34892;&#21253;&#37324;&#21253;&#21547;&#20102;PetClinic&#31034;&#20363;&#24212;&#29992;&#65292;&#23427;&#20197;JUnit 4.4&#29615;&#22659;&#38416;&#36848;&#20102;<span class="emphasis"><em>Spring TestContext Framework</em></span>&#30340;&#20960;&#20010;&#29305;&#24615;&#12290;
      &#22823;&#22810;&#25968;&#21151;&#33021;&#21253;&#21547;&#22312;<tt class="classname">AbstractClinicTests</tt>&#37324;&#65292;&#37096;&#20998;&#20869;&#23481;&#21015;&#20030;&#22914;&#19979;&#65306;</p><pre class="programlisting"><span class="bold"><b>@ContextConfiguration</b></span>
public abstract class AbstractClinicTests <span class="bold"><b>extends AbstractTransactionalJUnit4SpringContextTests</b></span> {

	<span class="bold"><b>@Autowired</b></span>
	protected Clinic clinic;

	@Test
	public void getVets() {
		Collection&lt;Vet&gt; vets = this.clinic.getVets();
		assertEquals("JDBC query must show the same number of vets",
			<span class="bold"><b>super.countRowsInTable("VETS")</b></span>, vets.size());
		Vet v1 = EntityUtils.getById(vets, Vet.class, 2);
		assertEquals("Leary", v1.getLastName());
		assertEquals(1, v1.getNrOfSpecialties());
		assertEquals("radiology", (v1.getSpecialties().get(0)).getName());
		<i class="lineannotation"><span class="lineannotation">// ...</span></i>
	}
	
	<i class="lineannotation"><span class="lineannotation">// ...</span></i>
}</pre><p>&#27880;&#24847;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#35813;&#27979;&#35797;&#29992;&#20363;&#32487;&#25215;&#20102;<tt class="classname">AbstractTransactionalJUnit4SpringContextTests</tt>&#31867;&#65292;
          &#20174;&#36825;&#37324;&#23427;&#32487;&#25215;&#20102;&#38024;&#23545;&#20381;&#36182;&#27880;&#20837;&#30340;&#37197;&#32622;&#65288;&#36890;&#36807;<tt class="classname">DependencyInjectionTestExecutionListener</tt>&#65289;&#21644;&#20107;&#21153;&#24615;&#34892;&#20026;&#65288;&#36890;&#36807;<tt class="classname">TransactionalTestExecutionListener</tt>&#65289;&#12290;</p></li><li><p><tt class="literal">clinic</tt>&#25104;&#21592;&#21464;&#37327; - &#35201;&#27979;&#35797;&#30340;&#24212;&#29992;&#31243;&#24207;&#23545;&#35937; - &#26159;&#36890;&#36807;<tt class="interfacename">@Autowired</tt>&#36827;&#34892;&#20381;&#36182;&#27880;&#20837;&#30340;&#12290;</p></li><li><p><tt class="methodname">testGetVets()</tt>&#26041;&#27861;&#35828;&#26126;&#22914;&#20309;&#20351;&#29992;&#32487;&#25215;&#19979;&#26469;&#30340;<tt class="methodname">countRowsInTable()</tt>&#26041;&#27861;&#26469;&#36731;&#26494;&#39564;&#35777;&#34920;&#20013;&#30340;&#34892;&#25968;&#65292;
          &#36827;&#32780;&#27979;&#35797;&#24212;&#29992;&#20195;&#30721;&#30340;&#27491;&#30830;&#34892;&#20026;&#12290;&#36825;&#28857;&#20801;&#35768;&#23454;&#29616;&#26356;&#24378;&#22823;&#30340;&#27979;&#35797;&#65292;&#20943;&#23569;&#20102;&#23545;&#30830;&#20999;&#27979;&#35797;&#25968;&#25454;&#30340;&#20381;&#36182;&#12290;&#20363;&#22914;&#65292;&#26080;&#38656;&#25171;&#26029;&#27979;&#35797;&#23601;&#21487;&#20197;&#21521;&#25968;&#25454;&#24211;&#20013;&#22686;&#21152;&#26032;&#34892;&#12290;</p></li><li><p>&#20687;&#24456;&#22810;&#20351;&#29992;&#25968;&#25454;&#24211;&#30340;&#38598;&#25104;&#27979;&#35797;&#19968;&#26679;&#65292;<tt class="classname">AbstractClinicTests</tt>&#20013;&#30340;&#22823;&#22810;&#25968;&#27979;&#35797;&#20381;&#36182;&#20110;&#27979;&#35797;&#36816;&#34892;&#21069;&#25968;&#25454;&#24211;&#20013;&#24050;&#26377;&#30340;&#26368;&#23567;&#37327;&#30340;&#25968;&#25454;&#12290;
          &#20294;&#26159;&#20320;&#21487;&#33021;&#22312;&#27979;&#35797;&#29992;&#20363;&#20013;&#25913;&#21464;&#25968;&#25454;&#24211;&#8212;&#8212;&#24403;&#28982;&#65292;&#22312;&#21516;&#19968;&#20010;&#20107;&#21153;&#20013;&#12290;</p></li></ul></div><p>PetClinic&#24212;&#29992;&#25903;&#25345;&#19977;&#31181;&#25968;&#25454;&#35775;&#38382;&#25216;&#26415; - JDBC&#12289;Hibernate&#21450;JPA&#12290;&#26080;&#38656;&#20219;&#20309;&#29305;&#23450;&#30340;&#36164;&#28304;&#20301;&#32622;&#65292;
      &#21482;&#35201;&#22768;&#26126;&#20102;<tt class="interfacename">@ContextConfiguration</tt>&#65292;&#37027;&#20040;<tt class="classname">AbstractClinicTests</tt>&#31867;&#23601;&#20250;&#20174;&#40664;&#35748;&#20301;&#32622;&#21152;&#36733;&#20854;&#24212;&#29992;&#19978;&#19979;&#25991;&#65292;
      &#35813;&#40664;&#35748;&#20301;&#32622;&#20026;<tt class="literal">"AbstractClinicTests-context.xml"</tt>&#65292;&#36825;&#37324;&#22768;&#26126;&#20102;&#19968;&#20010;&#36890;&#29992;&#30340;<tt class="classname">DataSource</tt>&#12290;
      &#23376;&#31867;&#25351;&#23450;&#20102;&#39069;&#22806;&#30340;&#19978;&#19979;&#25991;&#20301;&#32622;&#65292;&#36825;&#23601;&#35201;&#27714;&#23427;&#24517;&#39035;&#22768;&#26126;&#19968;&#20010;<tt class="interfacename">PlatformTransactionManager</tt>&#21644;<tt class="interfacename">Clinic</tt>&#30340;&#19968;&#20010;&#20855;&#20307;&#23454;&#29616;&#12290;</p><p>&#20363;&#22914;&#65292;PetClinic&#27979;&#35797;&#30340;Hibernate&#23454;&#29616;&#21253;&#21547;&#20197;&#19979;&#23454;&#29616;&#12290;&#38024;&#23545;&#36825;&#20010;&#20363;&#23376;&#35831;&#27880;&#24847;&#65292;<tt class="classname">HibernateClinicTests</tt>&#27809;&#26377;&#21253;&#21547;&#19968;&#34892;&#20195;&#30721;&#65306;
      &#25105;&#20204;&#21482;&#38656;&#22768;&#26126;<tt class="interfacename">@ContextConfiguration</tt>&#24182;&#19988;&#27979;&#35797;&#32487;&#25215;&#20110;<tt class="classname">AbstractClinicTests</tt>&#12290;
      &#26082;&#28982;&#26080;&#38656;&#20219;&#20309;&#29305;&#23450;&#30340;&#36164;&#28304;&#20301;&#32622;&#23601;&#21487;&#20197;&#22768;&#26126;<tt class="interfacename">@ContextConfiguration</tt>&#65292;
      &#37027;&#20040;<span class="emphasis"><em>Spring TestContext Framework</em></span>&#23601;&#20250;&#20174;<tt class="literal">"AbstractClinicTests-context.xml"</tt> (&#20363;&#22914;&#32487;&#25215;&#30340;&#20301;&#32622;)&#21644;
      <tt class="literal">"HibernateClinicTests-context.xml"</tt>&#20013;&#21152;&#36733;&#24212;&#29992;&#19978;&#19979;&#25991;&#65292;
      &#21516;&#26102;<tt class="literal">"HibernateClinicTests-context.xml"</tt> &#20013;&#23450;&#20041;&#30340;bean&#20250;&#35206;&#30422;&#25481;<tt class="literal">"AbstractClinicTests-context.xml"</tt>&#20013;&#23450;&#20041;&#30340;bean&#12290;</p><pre class="programlisting"><span class="bold"><b>@ContextConfiguration</b></span>
public class HibernateClinicTests extends AbstractClinicTests { }
</pre><p>&#27491;&#22914;&#20320;&#22312;PetClinic&#24212;&#29992;&#20013;&#25152;&#30475;&#21040;&#30340;&#65292;Spring&#37197;&#32622;&#25991;&#20214;&#34987;&#21010;&#20998;&#25104;&#22810;&#20010;&#25991;&#20214;&#12290;&#23545;&#20110;&#22823;&#22411;&#24212;&#29992;&#26469;&#35828;&#37117;&#26159;&#36825;&#26679;&#20570;&#30340;&#65292;
      &#37197;&#32622;&#20301;&#32622;&#36890;&#24120;&#34987;&#25351;&#23450;&#22312;&#19968;&#20010;&#38024;&#23545;&#35813;&#24212;&#29992;&#31243;&#24207;&#38598;&#25104;&#27979;&#35797;&#30340;&#36890;&#29992;&#22522;&#31867;&#20013;&#12290;
      &#36825;&#26679;&#30340;&#22522;&#31867;&#36824;&#21487;&#20197;&#22686;&#21152;&#26377;&#29992;&#30340;&#23454;&#20363;&#21464;&#37327; - &#24456;&#33258;&#28982;&#22320;&#30001;&#20381;&#36182;&#27880;&#20837;&#32452;&#35013; - &#20363;&#22914;&#20351;&#29992;Hibernate&#30340;&#24212;&#29992;&#20013;&#30340;<tt class="classname">HibernateTemplate</tt>&#12290;</p><p>&#20174;&#38271;&#36828;&#26469;&#30475;&#65292;&#38598;&#25104;&#27979;&#35797;&#20013;&#30340;Spring&#37197;&#32622;&#25991;&#20214;&#24212;&#35813;&#19982;&#37096;&#32626;&#29615;&#22659;&#20013;&#30340;&#19968;&#26679;&#12290;&#19968;&#20010;&#21487;&#33021;&#30340;&#19981;&#21516;&#28857;&#26159;&#25968;&#25454;&#24211;&#36830;&#25509;&#27744;&#21644;&#20107;&#21153;&#22522;&#30784;&#35774;&#26045;&#12290;
      &#22914;&#26524;&#20320;&#27491;&#37096;&#32626;&#21040;&#19968;&#20010;&#23436;&#25972;&#30340;&#24212;&#29992;&#26381;&#21153;&#22120;&#19978;&#65292;&#37027;&#20320;&#21487;&#33021;&#20250;&#20351;&#29992;&#20854;&#36830;&#25509;&#27744;&#65288;&#36890;&#36807;JNDI&#35775;&#38382;&#65289;&#21644;JTA&#23454;&#29616;&#12290;
      &#36825;&#26679;&#20381;&#36182;&#65292;&#22312;&#29983;&#20135;&#38454;&#27573;&#20320;&#20250;&#20351;&#29992;<tt class="classname">JndiObjectFactoryBean</tt>&#26469;&#33719;&#24471;<tt class="classname">DataSource</tt>&#21644;<tt class="classname">JtaTransactionManager</tt>&#12290;
      &#22312;&#23481;&#22120;&#22806;&#30340;&#38598;&#25104;&#27979;&#35797;&#20013;&#26080;&#27861;&#20351;&#29992;JNDI&#21644;JTA&#65292;&#22240;&#27492;&#20320;&#24212;&#35813;&#20026;&#20182;&#20204;&#20351;&#29992;&#19968;&#20010;&#26367;&#20195;&#30340;&#32452;&#21512;&#65292;
      &#22914;Commons DBCP <tt class="classname">BasicDataSource</tt>&#21644;<tt class="classname">DataSourceTransactionManager</tt>&#25110;&#32773;<tt class="classname">HibernateTransactionManager</tt>&#12290;
      &#20320;&#21487;&#20197;&#23558;&#36825;&#31181;&#19981;&#21516;&#30340;&#34892;&#20026;&#25918;&#21040;&#19968;&#20010;&#21333;&#29420;&#30340;XML&#25991;&#20214;&#20013;&#65292;&#22312;&#24212;&#29992;&#26381;&#21153;&#22120;&#21644;&#29420;&#31435;&#20110;&#20854;&#20182;&#37197;&#32622;&#30340;'&#26412;&#22320;'&#37197;&#32622;&#20013;&#33258;&#30001;&#36873;&#25321;&#65292;&#36825;&#19981;&#20250;&#22312;&#27979;&#35797;&#21644;&#20135;&#21697;&#29615;&#22659;&#20013;&#36896;&#25104;&#24046;&#24322;&#12290;
      &#27492;&#22806;&#65292;&#24314;&#35758;&#20351;&#29992;&#23646;&#24615;&#25991;&#20214;&#26469;&#23384;&#25918;&#36830;&#25509;&#20449;&#24687;&#65306;&#35831;&#26597;&#30475;PetClinic&#24212;&#29992;&#20197;&#20102;&#35299;&#36825;&#20123;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="testing-resources"></a>8.4.&nbsp;&#26356;&#22810;&#36164;&#28304;</h2></div></div><div></div></div><p>&#26412;&#31456;&#21253;&#25324;&#20851;&#20110;&#19968;&#33324;&#24615;&#27979;&#35797;&#30340;&#26356;&#22810;&#20449;&#24687;&#12290;</p><div class="itemizedlist"><ul type="disc"><li><p><a href="http://www.junit.org/" target="_top">JUnit &#20027;&#39029;</a>&#12290;Spring&#26694;&#26550;&#30340;&#21333;&#20803;&#27979;&#35797;&#22871;&#20214;&#26159;&#20197;JUnit 3.8&#20316;&#20026;&#27979;&#35797;&#26694;&#26550;&#32780;&#32534;&#20889;&#30340;&#12290;</p></li><li><p><a href="http://testng.org/" target="_top">TestNG &#20027;&#39029;</a>&#12290;TestNG&#26159;&#19968;&#20010;&#27979;&#35797;&#26694;&#26550;&#65292;&#20854;&#28789;&#24863;&#26469;&#28304;&#20110;JUnit 3.8&#65292;&#24182;&#22686;&#21152;&#20102;&#23545;Java 5&#27880;&#35299;&#12289;&#27979;&#35797;&#32452;&#12289;&#25968;&#25454;&#39537;&#21160;&#30340;&#27979;&#35797;&#12289;&#20998;&#24067;&#24335;&#27979;&#35797;&#31561;&#30340;&#25903;&#25345;&#12290;
       </p></li><li><p><a href="http://www.mockobjects.com/" target="_top">Mock Objects &#20027;&#39029;</a>&#12290;Mock Objects&#26159;&#19968;&#31181;&#22312;&#27979;&#35797;&#39537;&#21160;&#24320;&#21457;&#30340;&#26465;&#20214;&#19979;&#25913;&#36827;&#20195;&#30721;&#35774;&#35745;&#30340;&#19968;&#31181;&#25216;&#26415;&#12290;</p></li><li><p><a href="http://en.wikipedia.org/wiki/Mock_Object" target="_top">&#32500;&#22522;&#30334;&#31185;&#19978;&#20851;&#20110;&#8220;MockObjects&#8221;&#30340;&#25991;&#31456;</a>&#12290;</p></li><li><p><a href="http://www.easymock.org/" target="_top">EasyMock &#20027;&#39029;</a>&#12290;Spring&#26694;&#26550;&#22312;&#20854;&#27979;&#35797;&#22871;&#20214;&#20013;&#22823;&#37327;&#20351;&#29992;&#20102;EasyMock&#12290;</p></li><li><p><a href="http://www.jmock.org/" target="_top">JMock &#20027;&#39029;</a>&#12290;JMock&#26159;&#19968;&#20010;&#20351;&#29992;mock&#23545;&#35937;&#25903;&#25345;Java&#20195;&#30721;&#30340;&#27979;&#35797;&#39537;&#21160;&#24320;&#21457;&#30340;&#24211;&#12290;
       </p></li><li><p><a href="http://dbunit.sourceforge.net/" target="_top">DbUnit &#20027;&#39029;</a>&#12290;DbUnit&#26159;JUnit&#30340;&#19968;&#20010;&#25193;&#23637;&#65288;&#20351;&#29992;Ant&#20063;&#21487;&#20197;&#36816;&#34892;&#23427;&#65289;&#65292;&#20854;&#30446;&#26631;&#22312;&#20110;&#25968;&#25454;&#24211;&#39537;&#21160;&#30340;&#39033;&#30446;&#65292;&#23427;&#22312;&#27979;&#35797;&#36816;&#34892;&#26399;&#38388;&#23558;&#20320;&#30340;&#25968;&#25454;&#24211;&#25918;&#32622;&#22312;&#19968;&#20010;&#24050;&#30693;&#30340;&#29366;&#24577;&#12290;</p></li><li><p><a href="http://grinder.sourceforge.net/" target="_top">Grinder &#20027;&#39029;</a>&#12290;Grinder&#26159;&#19968;&#20010;&#22522;&#20110;Java&#30340;&#21387;&#21147;&#27979;&#35797;&#26694;&#26550;&#12290;</p></li></ul></div></div></div></div><div class="part" lang="en"><div class="titlepage"><div><div><h1 class="title"><a name="spring-middle-tier"></a>&#20013;&#38388;&#23618;&#25968;&#25454;&#35775;&#38382;</h1></div></div><div></div></div><div class="partintro" lang="en"><div><div></div><div></div></div><p>
				&#24320;&#21457;&#25163;&#20876;&#30340;&#36825;&#19968;&#37096;&#20998;&#20851;&#27880;&#20110;&#20013;&#38388;&#23618;&#24320;&#21457;&#65292;&#24182;&#26126;&#30830;&#25551;&#36848;&#20102;&#36825;&#19968;&#23618;&#30340;&#25968;&#25454;&#35775;&#38382;&#32844;&#36131;&#12290;
			</p><p>
				&#39318;&#20808;&#65292;&#35814;&#32454;&#38416;&#36848;&#20102;Spring&#20840;&#38754;&#30340;&#20107;&#21153;&#31649;&#29702;&#25903;&#25345;&#65292;&#38543;&#21518;&#65292;&#35814;&#32454;&#35828;&#26126;&#20102;Spring Framework&#22914;&#20309;&#25903;&#25345;&#22810;&#31181;&#20013;&#38388;&#23618;&#25968;&#25454;&#35775;&#38382;&#30340;&#26694;&#26550;&#21644;&#25216;&#26415;&#12290;
			</p><div class="itemizedlist"><ul type="disc"><li><p><a href="#transaction" title="Chapter&nbsp;9.&nbsp;&#20107;&#21153;&#31649;&#29702;">Chapter&nbsp;9, <i>&#20107;&#21153;&#31649;&#29702;</i></a></p></li><li><p><a href="#dao" title="Chapter&nbsp;10.&nbsp;DAO&#25903;&#25345;">Chapter&nbsp;10, <i>DAO&#25903;&#25345;</i></a></p></li><li><p><a href="#jdbc" title="Chapter&nbsp;11.&nbsp;&#20351;&#29992;JDBC&#36827;&#34892;&#25968;&#25454;&#35775;&#38382;">Chapter&nbsp;11, <i>&#20351;&#29992;JDBC&#36827;&#34892;&#25968;&#25454;&#35775;&#38382;</i></a></p></li><li><p><a href="#orm" title="Chapter&nbsp;12.&nbsp;&#20351;&#29992;ORM&#24037;&#20855;&#36827;&#34892;&#25968;&#25454;&#35775;&#38382;">Chapter&nbsp;12, <i>&#20351;&#29992;ORM&#24037;&#20855;&#36827;&#34892;&#25968;&#25454;&#35775;&#38382;</i></a></p></li></ul></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="transaction"></a>Chapter&nbsp;9.&nbsp;&#20107;&#21153;&#31649;&#29702;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="transaction-intro"></a>9.1.&nbsp;&#31616;&#20171;</h2></div></div><div></div></div><p>Spring&#26694;&#26550;&#24341;&#20154;&#27880;&#30446;&#30340;&#37325;&#35201;&#22240;&#32032;&#20043;&#19968;&#26159;&#23427;&#20840;&#38754;&#30340;&#20107;&#21153;&#25903;&#25345;&#12290;Spring&#26694;&#26550;&#25552;&#20379;&#20102;&#19968;&#33268;&#30340;&#20107;&#21153;&#31649;&#29702;&#25277;&#35937;&#65292;&#36825;&#24102;&#26469;&#20102;&#20197;&#19979;&#22909;&#22788;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#20026;&#22797;&#26434;&#30340;&#20107;&#21153;API&#25552;&#20379;&#20102;&#19968;&#33268;&#30340;&#32534;&#31243;&#27169;&#22411;&#65292;&#22914;JTA&#12289;JDBC&#12289;Hibernate&#12289;JPA&#21644;JDO</p></li><li><p>&#25903;&#25345; <a href="#transaction-declarative" title="9.5.&nbsp;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;">&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;</a></p></li><li><p>&#25552;&#20379;&#27604;&#22823;&#22810;&#25968;&#22797;&#26434;&#30340;&#20107;&#21153;API&#65288;&#35832;&#22914;JTA&#65289;&#26356;&#31616;&#21333;&#30340;&#65292;&#26356;&#26131;&#20110;&#20351;&#29992;&#30340; <a href="#transaction-programmatic" title="9.6.&nbsp;&#32534;&#31243;&#24335;&#20107;&#21153;&#31649;&#29702;">&#32534;&#31243;&#24335;</a> &#20107;&#21153;&#31649;&#29702;API</p></li><li><p>&#38750;&#24120;&#22909;&#22320;&#25972;&#21512;Spring&#30340;&#21508;&#31181;&#25968;&#25454;&#35775;&#38382;&#25277;&#35937;</p></li></ul></div><p>
		&#36825;&#31456;&#34987;&#20998;&#25104;&#20960;&#20010;&#23567;&#33410;&#65292;&#27599;&#19968;&#33410;&#23558;&#25551;&#36848;&#19968;&#31181;Spring&#26694;&#26550;&#20107;&#21153;&#25903;&#25345;&#30340;&#38468;&#21152;&#20540;&#25110;&#25216;&#26415;&#12290;&#26412;&#31456;&#26411;&#23614;&#35752;&#35770;&#20102;&#19968;&#20123;&#20851;&#20110;&#20107;&#21153;&#31649;&#29702;&#30340;&#26368;&#20339;&#23454;&#36341;&#65288;&#27604;&#22914;&#65292;&#22914;&#20309;&#22312;&#32534;&#31243;&#24335;&#21644;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;&#20043;&#38388;&#20570;&#36873;&#25321;&#65289;&#12290;
        </p><div class="itemizedlist"><ul type="disc"><li><p>&#31532;&#19968;&#33410;&#65292;<a href="#transaction-motivation" title="9.2.&nbsp;&#21160;&#26426;">&#21160;&#26426;</a>&#65292;&#25551;&#36848; <span class="emphasis"><em>&#20026;&#20309;</em></span> &#24895;&#24847;&#20351;&#29992;Spring&#26694;&#26550;&#30340;&#20107;&#21153;&#25277;&#35937;&#65292;&#32780;&#19981;&#26159;EJB CMT&#25110;&#32773;&#19968;&#20010;&#31169;&#26377;&#30340;API&#65292;&#27604;&#22914;Hibernate&#30340;&#20107;&#21153;&#22788;&#29702;&#12290;</p></li><li><p>&#31532;&#20108;&#33410;&#65292;<a href="#transaction-strategies" title="9.3.&nbsp;&#20851;&#38190;&#25277;&#35937;">&#20851;&#38190;&#25277;&#35937;</a>&#65292;&#21015;&#20030;&#20102;Spring&#26694;&#26550;&#20107;&#21153;&#25903;&#25345;&#30340;&#26680;&#24515;&#31867;&#65292;&#20197;&#21450;&#22914;&#20309;&#20174;&#22810;&#31181;&#19981;&#21516;&#30340;&#25968;&#25454;&#28304;&#21435;&#37197;&#32622;&#24182;&#33719;&#24471;&#19968;&#20010; <tt class="interfacename">DataSource</tt> &#23454;&#20363;&#12290;
                </p></li><li><p>&#31532;&#19977;&#33410;&#65292;<a href="#transaction-declarative" title="9.5.&nbsp;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;">&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;</a>&#65292;&#35762;&#36848;&#20102;Spring&#26694;&#26550;&#22914;&#20309;&#25903;&#25345;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;&#12290;</p></li><li><p>&#31532;&#22235;&#33410;&#65292;<a href="#transaction-programmatic" title="9.6.&nbsp;&#32534;&#31243;&#24335;&#20107;&#21153;&#31649;&#29702;">&#32534;&#31243;&#24335;&#20107;&#21153;&#31649;&#29702;</a>&#65292;&#20171;&#32461;&#20102;Spring&#26694;&#26550;&#22914;&#20309;&#25903;&#25345;&#32534;&#31243;&#24335;&#65288;&#21363;&#30828;&#32534;&#30721;&#65289;&#20107;&#21153;&#31649;&#29702;&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="transaction-motivation"></a>9.2.&nbsp;&#21160;&#26426;</h2></div></div><div></div></div><div class="sidebar"><p class="title"><b>&#20107;&#21153;&#31649;&#29702;&#31350;&#31455;&#26159;&#21542;&#38656;&#35201;&#24212;&#29992;&#26381;&#21153;&#22120;&#65311;</b></p><p>Spring&#26694;&#26550;&#23545;&#20107;&#21153;&#31649;&#29702;&#30340;&#25903;&#25345;&#26497;&#22823;&#22320;&#25913;&#21464;&#20102;&#20256;&#32479;&#19978;&#35748;&#20026;J2EE&#24212;&#29992;&#38656;&#35201;&#24212;&#29992;&#26381;&#21153;&#22120;&#30340;&#35748;&#35782;&#12290;</p><p>&#36825;&#31181;&#25913;&#21464;&#23588;&#20854;&#22312;&#20110;&#20320;&#19981;&#38656;&#35201;&#20165;&#20165;&#20026;&#20102;&#36890;&#36807;EJB&#26469;&#20351;&#29992;&#22768;&#26126;&#24335;&#20107;&#21153;&#32780;&#20351;&#29992;&#24212;&#29992;&#26381;&#21153;&#22120;&#12290;&#20107;&#23454;&#19978;&#65292;&#21363;&#20351;&#20320;&#30340;&#24212;&#29992;&#26381;&#21153;&#22120;&#25317;&#26377;&#24378;&#22823;&#30340;JTA&#21151;&#33021;&#65292;&#20320;&#20063;&#26377;&#20805;&#20998;&#30340;&#29702;&#30001;&#21487;&#20197;&#21457;&#29616;&#65292;Spring&#26694;&#26550;&#30340;&#22768;&#26126;&#24335;&#20107;&#21153;&#25552;&#20379;&#20102;&#27604;EJB CMT&#26356;&#21152;&#24378;&#22823;&#12289;&#39640;&#25928;&#30340;&#32534;&#31243;&#27169;&#22411;&#12290;</p><p>&#19968;&#33324;&#26469;&#35828;&#65292;&#21482;&#26377;&#24403;&#20320;&#38656;&#35201;&#25903;&#25345;&#22810;&#20010;&#20107;&#21153;&#24615;&#36164;&#28304;&#26102;&#65292;&#20320;&#25165;&#38656;&#35201;&#24212;&#29992;&#26381;&#21153;&#22120;&#30340;JTA&#21151;&#33021;&#12290;&#32780;&#22823;&#22810;&#25968;&#24212;&#29992;&#24182;&#19981;&#38656;&#35201;&#33021;&#22815;&#22788;&#29702;&#36328;&#36234;&#22810;&#31181;&#36164;&#28304;&#12290;&#35768;&#22810;&#39640;&#31471;&#24212;&#29992;&#20351;&#29992;&#21333;&#19968;&#30340;&#12289;&#39640;&#20280;&#32553;&#24615;&#30340;&#25968;&#25454;&#24211;&#65292;&#27604;&#22914;Oracle 9i RAC&#12290;</p><p>&#65288;&#24403;&#28982;&#65292;&#20063;&#35768;&#20320;&#38656;&#35201;&#24212;&#29992;&#26381;&#21153;&#22120;&#30340;&#20854;&#20182;&#21151;&#33021;&#65292;&#27604;&#22914;JMS&#25110;JCA&#12290;&#65289;</p><p>&#26368;&#37325;&#35201;&#30340;&#19968;&#28857;&#26159;&#65292;&#20351;&#29992;Spring&#65292;<span class="emphasis"><em>&#20320;&#21487;&#20197;&#36873;&#25321;&#20309;&#26102;&#25226;&#20320;&#30340;&#24212;&#29992;&#36801;&#31227;&#21040;&#20840;&#21151;&#33021;&#30340;&#24212;&#29992;&#26381;&#21153;&#22120;</em></span>&#12290;&#29992;&#30828;&#32534;&#30721;&#21435;&#23454;&#29616;&#26412;&#22320;&#20107;&#21153;&#26469;&#26367;&#20195;EJB CMT&#25110;JTA&#65292;&#22788;&#29702;JDBC&#36830;&#25509;&#65292;&#25110;&#32773;&#36824;&#38656;&#35201;&#20351;&#29992;&#30828;&#32534;&#30721;&#26469;&#22788;&#29702;&#37027;&#20123;&#20840;&#23616;&#30340;&#12289;&#21463;&#21040;&#23481;&#22120;&#31649;&#29702;&#30340;&#20107;&#21153;&#65292;&#36825;&#26679;&#30340;&#26085;&#23376;&#23558;&#19968;&#21435;&#19981;&#22797;&#36820;&#20102;&#12290;&#20351;&#29992;Spring&#65292;&#20320;&#20165;&#38656;&#35201;&#25913;&#21160;&#37197;&#32622;&#25991;&#20214;&#65292;&#32780;&#19981;&#24517;&#25913;&#21160;&#20320;&#30340;&#20195;&#30721;&#12290;</p></div><p>&#20256;&#32479;&#19978;&#65292;J2EE&#24320;&#21457;&#32773;&#26377;&#20004;&#20010;&#20107;&#21153;&#31649;&#29702;&#30340;&#36873;&#25321;&#65306; <span class="emphasis"><em>&#20840;&#23616;</em></span> &#25110; <span class="emphasis"><em>&#26412;&#22320;</em></span>
&#20107;&#21153;&#12290;&#20840;&#23616;&#20107;&#21153;&#30001;&#24212;&#29992;&#26381;&#21153;&#22120;&#31649;&#29702;&#65292;&#20351;&#29992;JTA&#12290;&#23616;&#37096;&#20107;&#21153;&#26159;&#21644;&#36164;&#28304;&#30456;&#20851;&#30340;&#65292;&#27604;&#22914;&#19968;&#20010;&#21644;JDBC&#36830;&#25509;&#20851;&#32852;&#30340;&#20107;&#21153;&#12290;&#36825;&#20010;&#36873;&#25321;&#26377;&#28145;&#21051;&#30340;&#21547;&#20041;&#12290;&#20363;&#22914;&#65292;&#20840;&#23616;&#20107;&#21153;&#21487;&#20197;&#29992;
&#20110;&#22810;&#20010;&#20107;&#21153;&#24615;&#30340;&#36164;&#28304;&#65288;&#20856;&#22411;&#20363;&#23376;&#26159;&#20851;&#31995;&#25968;&#25454;&#24211;&#21644;&#28040;&#24687;&#38431;&#21015;&#65289;&#12290;&#20351;&#29992;&#23616;&#37096;&#20107;&#21153;&#65292;&#24212;&#29992;&#26381;&#21153;&#22120;&#19981;&#38656;&#35201;&#21442;&#19982;&#20107;&#21153;&#31649;&#29702;&#65292;&#24182;&#19988;&#19981;&#33021;&#24110;&#21161;&#30830;&#20445;&#36328;&#36234;&#22810;&#20010;&#36164;&#28304;&#65288;&#38656;&#35201;&#25351;&#20986;&#30340;&#26159;&#22810;&#25968;
&#24212;&#29992;&#20351;&#29992;&#21333;&#19968;&#20107;&#21153;&#24615;&#30340;&#36164;&#28304;&#65289;&#30340;&#20107;&#21153;&#30340;&#27491;&#30830;&#24615;&#12290;</p><p><b>&#20840;&#23616;&#20107;&#21153;.&nbsp;</b>
				&#20840;&#23616;&#20107;&#21153;&#26377;&#19968;&#20010;&#37325;&#22823;&#30340;&#32570;&#38519;&#65292;&#20195;&#30721;&#38656;&#35201;&#20351;&#29992;JTA&#65306;&#19968;&#20010;&#31528;&#37325;&#30340;API&#65288;&#37096;&#20998;&#26159;&#22240;&#20026;&#23427;&#30340;&#24322;&#24120;&#27169;&#22411;&#65289;&#12290;&#27492;&#22806;&#65292;JTA&#30340;<tt class="interfacename">UserTransaction</tt>&#36890;&#24120;&#38656;&#35201;&#20174;JNDI&#33719;&#24471;&#65292;&#36825;&#24847;&#21619;&#30528;&#25105;&#20204;&#20026;&#20102;JTA&#65292;&#38656;&#35201; <span class="emphasis"><em>&#21516;&#26102;</em></span> &#20351;&#29992;JNDI <span class="emphasis"><em>&#21644;</em></span> JTA&#12290;&#26174;&#28982;&#20840;&#37096;&#20351;&#29992;&#20840;&#23616;&#20107;&#21153;&#38480;&#21046;&#20102;&#24212;&#29992;&#20195;&#30721;&#30340;&#37325;&#29992;&#24615;&#65292;&#22240;&#20026;JTA&#36890;&#24120;&#21482;&#22312;&#24212;&#29992;&#26381;&#21153;&#22120;&#30340;&#29615;&#22659;&#20013;&#25165;&#33021;&#20351;&#29992;&#12290;
				&#20197;&#21069;&#65292;&#20351;&#29992;&#20840;&#23616;&#20107;&#21153;&#30340;&#39318;&#36873;&#26041;&#24335;&#26159;&#36890;&#36807;EJB&#30340; <span class="emphasis"><em>CMT</em></span>&#65288;<span class="emphasis"><em>&#23481;&#22120;&#31649;&#29702;&#20107;&#21153;</em></span>&#65289;&#65306;CMT&#26159; <span class="bold"><b>&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;</b></span> &#30340;&#19968;&#31181;&#24418;&#24335;&#65288;&#21306;&#21035;&#20110; <span class="bold"><b>&#32534;&#31243;&#24335;&#20107;&#21153;&#31649;&#29702;</b></span>&#65289;&#12290;
EJB&#30340;CMT&#19981;&#38656;&#35201;&#20219;&#20309;&#21644;&#20107;&#21153;&#30456;&#20851;&#30340;JNDI&#26597;&#25214;&#65292;&#34429;&#28982;&#20351;&#29992;EJB&#26412;&#36523;&#32943;&#23450;&#38656;&#35201;&#20351;&#29992;JNDI&#12290;&#23427;&#28040;&#38500;&#20102;&#22823;&#22810;&#25968;&#65288;&#19981;&#26159;&#20840;&#37096;&#65289;&#30828;&#32534;&#30721;&#30340;&#26041;&#24335;&#21435;&#25511;&#21046;&#20107;&#21153;&#12290;&#37325;&#22823;
&#30340;&#32570;&#38519;&#26159;CMT&#32465;&#23450;&#22312;JTA&#21644;&#24212;&#29992;&#26381;&#21153;&#22120;&#29615;&#22659;&#19978;&#65292;&#24182;&#19988;&#21482;&#26377;&#25105;&#20204;&#36873;&#25321;&#20351;&#29992;EJB&#23454;&#29616;&#19994;&#21153;&#36923;&#36753;&#65292;&#25110;&#32773;&#33267;&#23569;&#22788;&#20110;&#19968;&#20010;&#20107;&#21153;&#21270;EJB&#30340;&#22806;&#35266;&#65288;Facade&#65289;&#21518;&#25165;&#33021;&#20351;
&#29992;&#23427;&#12290;EJB&#26377;&#22914;&#27492;&#22810;&#30340;&#35807;&#30149;&#65292;&#23588;&#20854;&#26159;&#23384;&#22312;&#20854;&#23427;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;&#26102;&#65292;EJB&#19981;&#26159;&#19968;&#20010;&#21560;&#24341;&#20154;&#30340;&#24314;&#35758;&#12290;</p><p><b>&#26412;&#22320;&#20107;&#21153;.&nbsp;</b>&#26412;&#22320;&#20107;&#21153;&#23481;&#26131;&#20351;&#29992;&#65292;&#20294;&#20063;&#26377;&#26126;&#26174;&#30340;&#32570;&#28857;&#65306;&#23427;&#20204;&#19981;&#33021;&#29992;&#20110;&#22810;&#20010;&#20107;&#21153;&#24615;&#36164;&#28304;&#12290;&#20363;&#22914;&#65292;&#20351;&#29992;JDBC&#36830;&#25509;&#20107;&#21153;&#31649;&#29702;&#30340;&#20195;&#30721;&#19981;&#33021;&#29992;&#20110;&#20840;&#23616;&#30340;JTA&#20107;&#21153;&#20013;&#12290;&#21478;&#19968;&#20010;&#32570;&#28857;&#26159;&#23616;&#37096;&#20107;&#21153;&#36235;&#21521;&#20110;&#20837;&#20405;&#24335;&#30340;&#32534;&#31243;&#27169;&#22411;&#12290;</p><p>Spring&#35299;&#20915;&#20102;&#36825;&#20123;&#38382;&#39064;&#12290;&#23427;&#20351;&#24212;&#29992;&#24320;&#21457;&#32773;&#33021;&#22815;&#20351;&#29992;&#22312; <span class="emphasis"><em>&#20219;&#20309;&#29615;&#22659;</em></span> &#19979;&#20351;&#29992; <span class="emphasis"><em>&#19968;&#33268;</em></span> &#30340;&#32534;&#31243;&#27169;&#22411;&#12290;&#20320;&#21487;&#20197;&#21482;&#20889;&#19968;&#27425;&#20320;&#30340;&#20195;&#30721;&#65292;&#36825;&#22312;&#19981;&#21516;&#29615;&#22659;&#19979;&#30340;&#19981;&#21516;&#20107;&#21153;&#31649;&#29702;&#31574;&#30053;&#20013;&#24456;&#26377;&#30410;&#22788;&#12290;Spring&#26694;&#26550;&#21516;&#26102;&#25552;&#20379;&#22768;&#26126;&#24335;&#21644;&#32534;&#31243;&#24335;&#20107;&#21153;&#31649;&#29702;&#12290;&#22768;&#26126;&#20107;&#21153;&#31649;&#29702;&#26159;&#22810;&#25968;&#20351;&#29992;&#32773;&#30340;&#39318;&#36873;&#65292;&#22312;&#22810;&#25968;&#24773;&#20917;&#19979;&#26159;&#34987;&#25512;&#33616;&#20351;&#29992;&#30340;&#12290;</p><p>&#20351;&#29992;&#32534;&#31243;&#24335;&#20107;&#21153;&#31649;&#29702;&#65292;&#24320;&#21457;&#32773;&#30452;&#25509;&#20351;&#29992;Spring&#26694;&#26550;&#20107;&#21153;&#25277;&#35937;&#65292;&#36825;&#20010;&#25277;&#35937;&#21487;&#20197;&#20351;&#29992;&#22312;&#20219;&#20309;&#24213;&#23618;&#20107;&#21153;&#22522;&#30784;&#20043;&#19978;&#12290;&#20351;&#29992;&#39318;&#36873;&#30340;&#22768;&#26126;&#24335;&#27169;&#22411;&#65292;&#24320;&#21457;&#32773;&#36890;&#24120;&#20070;&#20889;&#24456;&#23569;&#30340;&#25110;&#27809;&#26377;&#19982;&#20107;&#21153;&#30456;&#20851;&#30340;&#20195;&#30721;&#65292;&#22240;&#27492;&#19981;&#20381;&#36182;Spring&#26694;&#26550;&#25110;&#20219;&#20309;&#20854;&#20182;&#20107;&#21153;API&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="transaction-strategies"></a>9.3.&nbsp;&#20851;&#38190;&#25277;&#35937;</h2></div></div><div></div></div><p>Spring&#20107;&#21153;&#25277;&#35937;&#30340;&#20851;&#38190;&#26159;<span class="emphasis"><em>&#20107;&#21153;&#31574;&#30053;</em></span>&#30340;&#27010;&#24565;&#12290;&#36825;&#20010;&#27010;&#24565;&#30001;<tt class="interfacename">org.springframework.transaction.PlatformTransactionManager</tt>&#25509;&#21475;&#23450;&#20041;&#22914;&#19979;&#65306;</p><pre class="programlisting">public interface PlatformTransactionManager {

    TransactionStatus getTransaction(TransactionDefinition definition)
        throws TransactionException;

    void commit(TransactionStatus status) throws TransactionException;

    void rollback(TransactionStatus status) throws TransactionException;
}</pre><p>&#36825;&#39318;&#20808;&#26159;&#19968;&#20010;SPI&#25509;&#21475;&#65292;&#34429;&#28982;&#23427;&#20063;&#21487;&#20197;&#22312; <a href="#transaction-programmatic-ptm" title="9.6.2.&nbsp;&#20351;&#29992;PlatformTransactionManager">&#32534;&#31243;</a> &#20013;&#20351;&#29992;&#12290;&#27880;&#24847;&#25353;&#29031;Spring&#26694;&#26550;&#30340;&#21746;&#23398;&#65292;<tt class="interfacename">PlatformTransactionManager</tt> &#26159;&#19968;&#20010; <span class="emphasis"><em>&#25509;&#21475;</em></span>&#12290;&#22240;&#32780;&#22914;&#26524;&#38656;&#35201;&#23427;&#21487;&#20197;&#24456;&#23481;&#26131;&#22320;&#34987;&#27169;&#25311;&#21644;&#26729;&#21270;&#12290;&#23427;&#20063;&#27809;&#26377;&#21644;&#19968;&#20010;&#26597;&#25214;&#31574;&#30053;&#22914;JNDI&#25414;&#32465;&#22312;&#19968;&#36215;&#65306;<tt class="interfacename">PlatformTransactionManager</tt> &#30340;&#23454;&#29616;&#23450;&#20041;&#21644;&#20854;&#20182;Spring IoC&#23481;&#22120;&#20013;&#30340;&#23545;&#35937;&#19968;&#26679;&#12290;&#36825;&#20010;&#22909;&#22788;&#20351;&#24471;&#21363;&#20351;&#20351;&#29992;JTA&#65292;&#20063;&#26159;&#19968;&#20010;&#24456;&#26377;&#20215;&#20540;&#30340;&#25277;&#35937;&#65306;&#20107;&#21153;&#20195;&#30721;&#21487;&#20197;&#27604;&#30452;&#25509;&#20351;&#29992;JTA&#26356;&#21152;&#23481;&#26131;&#27979;&#35797;&#12290;</p><p>&#32487;&#32493;Spring&#21746;&#23398;&#65292;&#21487;&#30001;&#20219;&#20309; <tt class="interfacename">PlatformTransactionManager</tt> &#30340;&#25509;&#21475;&#26041;&#27861;&#25243;&#20986;&#30340; <tt class="exceptionname">TransactionException</tt> &#26159;unchecked exception&#65288;&#32487;&#25215;&#33258;<tt class="exceptionname">java.lang.RuntimeException</tt>&#65289;&#30340;&#12290;&#24213;&#23618;&#30340;&#20107;&#21153;&#22833;&#36133;&#20960;&#20046;&#24635;&#26159;&#33268;&#21629;&#30340;&#12290;&#24456;&#23569;&#24773;&#20917;&#19979;&#24212;&#29992;&#31243;&#24207;&#20195;&#30721;&#21487;&#20197;&#20174;&#23427;&#20204;&#20013;&#24674;&#22797;&#65292;&#19981;&#36807;&#24212;&#29992;&#24320;&#21457;&#32773;&#20381;&#28982;&#21487;&#20197;&#25429;&#33719;&#24182;&#22788;&#29702;<tt class="exceptionname">TransactionException</tt>&#65292;&#20182;&#20204;&#21487;&#20197;&#33258;&#30001;&#20915;&#23450;&#24590;&#20040;&#24178;&#12290;</p><p>
			<tt class="methodname">getTransaction(..)</tt>&#26041;&#27861;&#26681;&#25454;&#19968;&#20010;&#31867;&#22411;&#20026; <tt class="interfacename">TransactionDefinition</tt> &#30340;&#21442;&#25968;&#36820;&#22238;&#19968;&#20010; <tt class="interfacename">TransactionStatus</tt> &#23545;&#35937;&#12290;&#36820;&#22238;&#30340; <tt class="interfacename">TransactionStatus</tt> &#23545;&#35937;&#21487;&#33021;&#20195;&#34920;&#19968;&#20010;&#26032;&#30340;&#25110;&#24050;&#32463;&#23384;&#22312;&#30340;&#20107;&#21153;&#65288;&#22914;&#26524;&#22312;&#24403;&#21069;&#35843;&#29992;&#22534;&#26632;&#26377;&#19968;&#20010;&#31526;&#21512;&#26465;&#20214;&#30340;&#20107;&#21153;&#12290;&#22914;&#21516;J2EE&#20107;&#21153;&#29615;&#22659;&#65292;&#19968;&#20010; <tt class="interfacename">TransactionStatus</tt> &#20063;&#26159;&#21644;&#25191;&#34892; <span class="bold"><b>&#32447;&#31243;</b></span> &#32465;&#23450;&#30340;&#65289;&#12290;</p><p>
			<tt class="interfacename">TransactionDefinition</tt>&#25509;&#21475;&#25351;&#23450;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>
					<span class="bold"><b>&#20107;&#21153;&#38548;&#31163;</b></span>&#65306;&#24403;&#21069;&#20107;&#21153;&#21644;&#20854;&#23427;&#20107;&#21153;&#30340;&#38548;&#31163;&#30340;&#31243;&#24230;&#12290;&#20363;&#22914;&#65292;&#36825;&#20010;&#20107;&#21153;&#33021;&#21542;&#30475;&#21040;&#20854;&#20182;&#20107;&#21153;&#26410;&#25552;&#20132;&#30340;&#20889;&#25968;&#25454;&#65311;</p></li><li><p>
					<span class="bold"><b>&#20107;&#21153;&#20256;&#25773;</b></span>&#65306;&#36890;&#24120;&#22312;&#19968;&#20010;&#20107;&#21153;&#20013;&#25191;&#34892;&#30340;&#25152;&#26377;&#20195;&#30721;&#37117;&#20250;&#22312;&#36825;&#20010;&#20107;&#21153;&#20013;&#36816;&#34892;&#12290;&#20294;&#26159;&#65292;&#22914;&#26524;&#19968;&#20010;&#20107;&#21153;&#19978;&#19979;&#25991;&#24050;&#32463;&#23384;&#22312;&#65292;&#26377;&#20960;&#20010;&#36873;&#39033;&#21487;&#20197;&#25351;&#23450;&#19968;&#20010;&#20107;&#21153;&#24615;&#26041;&#27861;&#30340;&#25191;&#34892;&#34892;&#20026;&#65306;&#20363;&#22914;&#65292;&#31616;&#21333;&#22320;&#22312;&#29616;&#26377;&#30340;&#20107;&#21153;&#20013;&#32487;&#32493;&#36816;&#34892;&#65288;&#22823;&#22810;&#25968;&#24773;&#20917;&#65289;&#65307;&#25110;&#32773;&#25346;&#36215;&#29616;&#26377;&#20107;&#21153;&#65292;&#21019;&#24314;&#19968;&#20010;&#26032;&#30340;&#20107;&#21153;&#12290;<span class="emphasis"><em>Spring&#25552;&#20379;EJB CMT&#20013;&#24120;&#35265;&#30340;&#20107;&#21153;&#20256;&#25773;&#36873;&#39033;</em></span>&#12290;</p></li><li><p>
					<span class="bold"><b>&#20107;&#21153;&#36229;&#26102;</b></span>: &#20107;&#21153;&#22312;&#36229;&#26102;&#21069;&#33021;&#36816;&#34892;&#22810;&#20037;&#65288;&#33258;&#21160;&#34987;&#24213;&#23618;&#30340;&#20107;&#21153;&#22522;&#30784;&#35774;&#26045;&#22238;&#28378;&#65289;&#12290;</p></li><li><p>
					<span class="bold"><b>&#21482;&#35835;&#29366;&#24577;</b></span>: &#21482;&#35835;&#20107;&#21153;&#19981;&#20462;&#25913;&#20219;&#20309;&#25968;&#25454;&#12290;&#21482;&#35835;&#20107;&#21153;&#22312;&#26576;&#20123;&#24773;&#20917;&#19979;&#65288;&#20363;&#22914;&#24403;&#20351;&#29992;Hibernate&#26102;&#65289;&#65292;&#26159;&#19968;&#31181;&#38750;&#24120;&#26377;&#29992;&#30340;&#20248;&#21270;&#12290;</p></li></ul></div><p>&#36825;&#20123;&#35774;&#32622;&#21453;&#26144;&#20102;&#26631;&#20934;&#27010;&#24565;&#12290;&#22914;&#26524;&#38656;&#35201;&#65292;&#35831;&#26597;&#38405;&#35752;&#35770;&#20107;&#21153;&#38548;&#31163;&#23618;&#27425;&#21644;&#20854;&#20182;&#26680;&#24515;&#20107;&#21153;&#27010;&#24565;&#30340;&#36164;&#28304;&#65306;&#29702;&#35299;&#36825;&#20123;&#27010;&#24565;&#22312;&#20351;&#29992;Spring&#26694;&#26550;&#21644;&#20854;&#20182;&#20107;&#21153;&#31649;&#29702;&#35299;&#20915;&#26041;&#26696;&#26102;&#26159;&#38750;&#24120;&#20851;&#38190;&#30340;&#12290;</p><p>
			<tt class="interfacename">TransactionStatus</tt> &#25509;&#21475;&#20026;&#22788;&#29702;&#20107;&#21153;&#30340;&#20195;&#30721;&#25552;&#20379;&#19968;&#20010;&#31616;&#21333;&#30340;&#25511;&#21046;&#20107;&#21153;&#25191;&#34892;&#21644;&#26597;&#35810;&#20107;&#21153;&#29366;&#24577;&#30340;&#26041;&#27861;&#12290;&#36825;&#20010;&#27010;&#24565;&#24212;&#35813;&#26159;&#29087;&#24713;&#30340;&#65292;&#22240;&#20026;&#23427;&#20204;&#22312;&#25152;&#26377;&#30340;&#20107;&#21153;API&#20013;&#26159;&#30456;&#21516;&#30340;:</p><pre class="programlisting">public interface TransactionStatus {

    boolean isNewTransaction();

    void setRollbackOnly();

    boolean isRollbackOnly();
}</pre><p>&#20351;&#29992;Spring&#26102;&#65292;&#26080;&#35770;&#20320;&#36873;&#25321;&#32534;&#31243;&#24335;&#36824;&#26159;&#22768;&#26126;&#24335;&#30340;&#20107;&#21153;&#31649;&#29702;&#65292;&#23450;&#20041;&#19968;&#20010;&#27491;&#30830;&#30340; <tt class="interfacename">PlatformTransactionManager</tt> &#23454;&#29616;&#37117;&#26159;&#33267;&#20851;&#37325;&#35201;&#30340;&#12290;&#25353;&#29031;Spring&#30340;&#33391;&#22909;&#39118;&#26684;&#65292;&#36825;&#31181;&#37325;&#35201;&#23450;&#20041;&#37117;&#26159;&#36890;&#36807;IoC&#23454;&#29616;&#30340;&#12290;</p><p>&#19968;&#33324;&#26469;&#35828;&#65292;&#36873;&#25321;<tt class="interfacename">PlatformTransactionManager</tt>&#23454;&#29616;&#26102;&#38656;&#35201;&#30693;&#36947;&#24403;&#21069;&#30340;&#24037;&#20316;&#29615;&#22659;&#65292;&#22914;JDBC&#12289;JTA&#12289;Hibernate&#31561;&#12290;&#19979;&#38754;&#30340;&#20363;&#23376;&#26469;&#33258;Spring&#31034;&#20363;&#24212;&#29992;&#8212;&#8212;<span class="bold"><b>jPetStore</b></span>&#8212;&#8212;&#20013;&#30340;<tt class="literal">dataAccessContext-local.xml</tt>&#25991;&#20214;&#65292;&#20854;&#20013;&#23637;&#31034;&#20102;&#19968;&#20010;&#23616;&#37096;<tt class="interfacename">PlatformTransactionManager</tt>&#23454;&#29616;&#26159;&#24590;&#20040;&#23450;&#20041;&#30340;&#65288;&#20165;&#38480;&#20110;&#32431;&#31929;JDBC&#29615;&#22659;&#65289;</p><p>&#25105;&#20204;&#24517;&#39035;&#20808;&#23450;&#20041;&#19968;&#20010;JDBC <tt class="interfacename">DataSource</tt>&#65292;&#28982;&#21518;&#20351;&#29992;Spring&#30340;<tt class="classname">DataSourceTransactionManager</tt>&#65292;&#24182;&#20256;&#20837;&#25351;&#21521;<tt class="interfacename">DataSource</tt>&#30340;&#24341;&#29992;&#12290;</p><pre class="programlisting">&lt;bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close"&gt;
  &lt;property name="driverClassName" value="${jdbc.driverClassName}" /&gt;
  &lt;property name="url" value="${jdbc.url}" /&gt;
  &lt;property name="username" value="${jdbc.username}" /&gt;
  &lt;property name="password" value="${jdbc.password}" /&gt;
&lt;/bean&gt;</pre><p>
			<tt class="interfacename">PlatformTransactionManager</tt> bean&#30340;&#23450;&#20041;&#22914;&#19979;&#65306;</p><pre class="programlisting">&lt;bean id="txManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager"&gt;
  &lt;property name="dataSource" ref="dataSource"/&gt;
&lt;/bean&gt;</pre><p>&#22914;&#26524;&#25105;&#20204;&#22312;J2EE&#23481;&#22120;&#37324;&#20351;&#29992;JTA&#65292;&#23601;&#20687;&#31034;&#20363;&#20013; <tt class="filename">'dataAccessContext-jta.xml'</tt> &#25991;&#20214;&#25152;&#31034;&#65292;&#25105;&#20204;&#23558;&#36890;&#36807;JNDI&#21644;Spring&#30340; <tt class="classname">JtaTransactionManager</tt> &#26469;&#33719;&#21462;&#19968;&#20010;&#23481;&#22120;&#31649;&#29702;&#30340; <tt class="interfacename">DataSource</tt>&#12290;<tt class="classname">JtaTransactionManager</tt> &#19981;&#38656;&#35201;&#30693;&#36947; <tt class="interfacename">DataSource</tt> &#21644;&#20854;&#20182;&#29305;&#23450;&#30340;&#36164;&#28304;&#65292;&#22240;&#20026;&#23427;&#23558;&#20351;&#29992;&#23481;&#22120;&#25552;&#20379;&#30340;&#20840;&#23616;&#20107;&#21153;&#31649;&#29702;&#12290;</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:jee="http://www.springframework.org/schema/jee"
xsi:schemaLocation="
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
       http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-2.0.xsd"&gt;

  &lt;jee:jndi-lookup id="dataSource" jndi-name="jdbc/jpetstore"/&gt;

  &lt;bean id="txManager" class="org.springframework.transaction.jta.JtaTransactionManager" /&gt;

  <i class="lineannotation"><span class="lineannotation">&lt;!-- other <tt class="literal">&lt;bean/&gt;</tt> definitions here --&gt;</span></i>

&lt;/beans&gt;</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#19978;&#38754; <tt class="literal">'dataSource'</tt> &#30340;bean&#23450;&#20041;&#20351;&#29992;&#20102; <tt class="literal">'jee'</tt> &#21517;&#31216;&#31354;&#38388;&#19979;&#30340; <tt class="literal">&lt;jndi-lookup/&gt;</tt> &#26631;&#31614;&#12290;&#24819;&#20102;&#35299;&#26356;&#22810;&#30340;&#37197;&#32622;&#20449;&#24687;, &#35831;&#30475; <a href="#xsd-config" title="Appendix&nbsp;A.&nbsp;XML Schema-based configuration">Appendix&nbsp;A, <i>XML Schema-based configuration</i></a>&#65292;&#20851;&#20110; <tt class="literal">&lt;jee/&gt;</tt> &#26631;&#31614;&#30340;&#20449;&#24687;&#65292;&#21487;&#21442;&#32771; <a href="#xsd-config-body-schemas-jee" title="A.2.3.&nbsp;The jee schema">Section&nbsp;A.2.3, &#8220;The jee schema&#8221;</a> &#33410;&#12290;</p></td></tr></tbody></table></div><p>&#25105;&#20204;&#20063;&#21487;&#20197;&#24456;&#23481;&#26131;&#22320;&#20351;&#29992;Hibernate&#23616;&#37096;&#20107;&#21153;&#65292;&#23601;&#20687;&#19979;&#38754;&#30340;Spring&#26694;&#26550;&#30340; <span class="bold"><b>PetClinic</b></span> &#31034;&#20363;&#24212;&#29992;&#20013;&#30340;&#20363;&#23376;&#19968;&#26679;&#65289;&#12290;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#25105;&#20204;&#38656;&#35201;&#23450;&#20041;&#19968;&#20010;Hibernate&#30340; <tt class="classname">LocalSessionFactoryBean</tt>&#65292;&#24212;&#29992;&#31243;&#24207;&#20174;&#20013;&#33719;&#21462;&#21040;Hibernate <tt class="interfacename">Session</tt> &#23454;&#20363;&#12290;</p><p>
			<tt class="interfacename">DataSource</tt> &#30340;bean&#23450;&#20041;&#21516;&#19978;&#20363;&#31867;&#20284;&#65288;&#36825;&#37324;&#19981;&#20877;&#23637;&#31034;&#65289;&#12290;&#19981;&#36807;&#65292;&#22914;&#26524;&#26159;&#19968;&#20010;JEE&#23481;&#22120;&#25552;&#20379;&#30340; <tt class="interfacename">DataSource</tt>&#65292;&#23427;&#23558;&#30001;JEE&#23481;&#22120;&#33258;&#36523;&#65292;&#32780;&#19981;&#26159;Spring&#26694;&#26550;&#26469;&#31649;&#29702;&#20107;&#21153;&#12290;</p><p>&#36825;&#31181;&#24773;&#20917;&#20013;<tt class="literal">'txManager'</tt> bean&#30340;&#31867;&#22411;&#20026; <tt class="classname">HibernateTransactionManager</tt>&#12290;&#21516;&#26679;&#22320;&#65292;<tt class="classname">DataSourceTransactionManager</tt> &#38656;&#35201;&#19968;&#20010;&#25351;&#21521; <tt class="interfacename">DataSource</tt> &#30340;&#24341;&#29992;&#65292;&#32780; <tt class="classname">HibernateTransactionManager</tt> &#38656;&#35201;&#19968;&#20010;&#25351;&#21521; <tt class="interfacename">SessionFactory</tt> &#30340;&#24341;&#29992;&#12290;</p><pre class="programlisting">&lt;bean id="sessionFactory" class="org.springframework.orm.hibernate.LocalSessionFactoryBean"&gt;
  &lt;property name="dataSource" ref="dataSource" /&gt;
  &lt;property name="mappingResources"&gt;
    &lt;list&gt;
      &lt;value&gt;org/springframework/samples/petclinic/hibernate/petclinic.hbm.xml&lt;/value&gt;
    &lt;/list&gt;
  &lt;/property&gt;
  &lt;property name="hibernateProperties"&gt;
    &lt;value&gt;
	  hibernate.dialect=${hibernate.dialect}
	&lt;/value&gt;
  &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id="txManager" class="org.springframework.orm.hibernate.HibernateTransactionManager"&gt;
  &lt;property name="sessionFactory" ref="sessionFactory" /&gt;
&lt;/bean&gt;</pre><p>&#25105;&#20204;&#21487;&#20197;&#31616;&#21333;&#22320;&#20351;&#29992; <tt class="classname">JtaTransactionManager</tt> &#26469;&#22788;&#29702;Hibernate&#20107;&#21153;&#21644;JTA&#20107;&#21153;&#65292;&#23601;&#20687;&#25105;&#20204;&#22788;&#29702;JDBC&#65292;&#25110;&#32773;&#20219;&#20309;&#20854;&#23427;&#30340;&#36164;&#28304;&#31574;&#30053;&#19968;&#26679;&#12290;</p><pre class="programlisting">&lt;bean id="txManager" class="org.springframework.transaction.jta.JtaTransactionManager"/&gt;</pre><p>&#27880;&#24847;&#20219;&#20309;&#36164;&#28304;&#30340;JTA&#37197;&#32622;&#37117;&#26159;&#36825;&#26679;&#30340;&#65292;&#22240;&#20026;&#23427;&#20204;&#37117;&#26159;&#20840;&#23616;&#20107;&#21153;&#65292;&#21487;&#20197;&#25903;&#25345;&#20219;&#20309;&#20107;&#21153;&#24615;&#36164;&#28304;&#12290;</p><p>
			<i><span class="remark">
			&#22312;&#25152;&#26377;&#36825;&#20123;&#24773;&#20917;&#19979;&#65292;&#24212;&#29992;&#31243;&#24207;&#20195;&#30721;&#26681;&#26412;&#19981;&#38656;&#35201;&#20570;&#20219;&#20309;&#25913;&#21160;&#12290;&#25105;&#20204;&#20165;&#20165;&#36890;&#36807;&#25913;&#21464;&#37197;&#32622;&#23601;&#21487;&#20197;&#25913;&#21464;&#20107;&#21153;&#31649;&#29702;&#26041;&#24335;&#65292;&#21363;&#20351;&#36825;&#20123;&#26356;&#25913;&#26159;&#22312;&#23616;&#37096;&#20107;&#21153;&#21644;&#20840;&#23616;&#20107;&#21153;&#38388;&#20999;&#25442;&#12290;
			</span></i>
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="tx-resource-synchronization"></a>9.4.&nbsp;&#20351;&#29992;&#36164;&#28304;&#21516;&#27493;&#30340;&#20107;&#21153;</h2></div></div><div></div></div><p>&#29616;&#22312;&#24212;&#35813;&#27604;&#36739;&#28165;&#26970;&#30340;&#26159;&#65306;&#19981;&#21516;&#30340;&#20107;&#21153;&#31649;&#29702;&#22120;&#26159;&#22914;&#20309;&#21019;&#24314;&#30340;&#65292;&#20197;&#21450;&#23427;&#20204;&#22914;&#20309;&#34987;&#36830;&#25509;&#21040;&#30456;&#24212;&#30340;&#38656;&#35201;&#34987;&#21516;&#27493;&#21040;&#20107;&#21153;&#30340;&#36164;&#28304;&#19978;&#65288;&#20363;&#22914;&#65292;<tt class="classname">DataSourceTransactionManager</tt> &#23545;&#24212;&#21040;JDBC <tt class="interfacename">DataSource</tt>&#65292;
			<tt class="classname">HibernateTransactionManager</tt> &#23545;&#24212;&#21040;Hibernate&#30340; <tt class="interfacename">SessionFactory</tt> &#31561;&#65289;&#12290;&#21487;&#26159;&#65292;&#21097;&#19979;&#30340;&#38382;&#39064;&#26159;&#65292;&#30452;&#25509;&#25110;&#38388;&#25509;&#22320;&#20351;&#29992;&#19968;&#31181;&#25345;&#20037;&#21270;API&#65288;JDBC&#12289;Hibernate&#12289;JDO&#31561;&#65289;&#30340;&#24212;&#29992;&#20195;&#30721;&#65292;&#22914;&#20309;&#30830;&#20445;&#36890;&#36807;&#30456;&#20851;&#30340; <tt class="interfacename">PlatformTransactionManager</tt> &#26469;&#24688;&#24403;&#22320;&#33719;&#21462;&#24182;&#25805;&#20316;&#36164;&#28304;&#65292;&#26469;&#28385;&#36275;&#20107;&#21153;&#21516;&#27493;&#65292;&#36825;&#20123;&#25805;&#20316;&#21253;&#25324;&#65306;&#21019;&#24314;&#12289;&#22797;&#29992;&#12289;&#28165;&#29702; &#21644; &#35302;&#21457;&#65288;&#21487;&#33021;&#27809;&#26377;&#65289;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tx-resource-synchronization-high"></a>9.4.1.&nbsp;&#39640;&#23618;&#27425;&#26041;&#26696;</h3></div></div><div></div></div><p>&#39318;&#36873;&#30340;&#26041;&#27861;&#26159;&#20351;&#29992;Spring&#30340;&#39640;&#23618;&#25345;&#20037;&#21270;&#38598;&#25104;API&#12290;&#36825;&#31181;&#26041;&#24335;&#19981;&#20250;&#26367;&#25442;&#21407;&#22987;&#30340;API&#65292;&#32780;&#26159;&#22312;&#20869;&#37096;&#23553;&#35013;&#20102;&#36164;&#28304;&#21019;&#24314;&#12289;&#22797;&#29992;&#12289;&#28165;&#29702;&#12289;&#20107;&#21153;&#21516;&#27493;&#20197;&#21450;&#24322;&#24120;&#26144;&#23556;&#31561;&#21151;&#33021;&#65292;&#36825;&#26679;&#29992;&#25143;&#30340;&#25968;&#25454;&#35775;&#38382;&#20195;&#30721;&#23601;&#19981;&#24517;&#20851;&#24515;&#36825;&#20123;&#65292;&#32780;&#38598;&#20013;&#31934;&#21147;&#20110;&#33258;&#24049;&#30340;&#25345;&#20037;&#21270;&#36923;&#36753;&#12290;&#36890;&#24120;&#65292;&#23545;&#25152;&#26377;&#25345;&#20037;&#21270;API&#37117;&#37319;&#29992;&#36825;&#31181; <span class="emphasis"><em>&#27169;&#26495;</em></span> &#26041;&#27861;&#65292;&#21253;&#25324; <tt class="classname">JdbcTemplate</tt>&#12289;<tt class="classname">HibernateTemplate</tt>&#21644;<tt class="classname">JdoTemplate</tt>&#31867;&#65288;&#36825;&#20123;&#22312;&#36825;&#20221;&#21442;&#32771;&#25991;&#26723;&#21518;&#38754;&#30340;&#31456;&#33410;&#20013;&#35814;&#32454;&#21465;&#36848;&#65289;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tx-resource-synchronization-low"></a>9.4.2.&nbsp;&#20302;&#23618;&#27425;&#26041;&#26696;</h3></div></div><div></div></div><p>&#22312;&#36739;&#20302;&#23618;&#27425;&#19978;&#65292;&#26377;&#20197;&#19979;&#36825;&#20123;&#31867;&#65306;<tt class="classname">DataSourceUtils</tt>&#65288;&#38024;&#23545;JDBC&#65289;&#65292;<tt class="classname">SessionFactoryUtils</tt>&#65288;&#38024;&#23545;Hibernate&#65289;&#65292;<tt class="classname">PersistenceManagerFactoryUtils</tt>&#65288;&#38024;&#23545;JDO&#65289;&#31561;&#31561;&#12290;&#24403;&#23545;&#24212;&#29992;&#20195;&#30721;&#26469;&#35828;&#65292;&#30452;&#25509;&#21516;&#21407;&#22987;&#25345;&#20037;&#21270;API&#29305;&#26377;&#30340;&#36164;&#28304;&#31867;&#22411;&#25171;&#20132;&#36947;&#26159;&#26356;&#22909;&#30340;&#36873;&#25321;&#26102;&#65292;&#36825;&#20123;&#31867;&#30830;&#20445;&#24212;&#29992;&#20195;&#30721;&#33719;&#21462;&#21040;&#27491;&#30830;&#30340;Spring&#26694;&#26550;&#25152;&#31649;&#29702;&#30340;bean&#65292;&#20107;&#21153;&#34987;&#27491;&#30830;&#21516;&#27493;&#65292;&#22788;&#29702;&#36807;&#31243;&#20013;&#30340;&#24322;&#24120;&#34987;&#26144;&#23556;&#21040;&#19968;&#33268;&#30340;API&#12290;</p><p>&#20363;&#22914;&#65292;&#22312;JDBC&#29615;&#22659;&#19979;&#65292;&#20320;&#19981;&#20877;&#20351;&#29992;&#20256;&#32479;&#30340;&#35843;&#29992; <tt class="interfacename">DataSource</tt> &#30340; <tt class="literal">getConnection()</tt> &#26041;&#27861;&#30340;&#26041;&#24335;&#65292;&#32780;&#26159;&#20351;&#29992;Spring&#30340; <tt class="classname">org.springframework.jdbc.datasource.DataSourceUtils</tt>&#65292;&#20687;&#36825;&#26679;&#65306;</p><pre class="programlisting">Connection conn = DataSourceUtils.getConnection(dataSource);</pre><p>&#22914;
&#26524;&#24050;&#26377;&#19968;&#20010;&#20107;&#21153;&#21450;&#19982;&#20043;&#20851;&#32852;&#30340;connection&#23384;&#22312;&#65292;&#35813;&#23454;&#20363;&#23558;&#34987;&#36820;&#22238;&#12290;&#21542;&#21017;&#65292;&#35813;&#26041;&#27861;&#35843;&#29992;&#23558;&#35302;&#21457;&#36215;&#19968;&#20010;&#26032;&#30340;connection&#30340;&#21019;&#24314;&#21160;&#20316;&#65292;&#35813;
connection&#65288;&#21487;&#36873;&#22320;&#65289;&#34987;&#21516;&#27493;&#21040;&#20219;&#20309;&#29616;&#26377;&#30340;&#20107;&#21153;&#65292;&#24182;&#21487;&#20197;&#22312;&#21516;&#19968;&#20107;&#21153;&#33539;&#22260;&#20869;&#34987;&#21518;&#32493;&#30340;&#35843;&#29992;&#22797;&#29992;&#12290;&#27491;&#22914;&#19978;&#38754;&#25552;&#21040;&#30340;&#65292;&#36825;&#20010;&#36807;&#31243;&#26377;&#19968;&#20010;&#39069;&#22806;&#30340;&#22909;&#22788;&#65292;&#23601;&#26159;&#20219;&#20309;
<tt class="exceptionname">SQLException</tt>&#23558;&#34987;&#21253;&#35013;&#20026;Spring&#26694;&#26550;&#30340; <tt class="exceptionname">CannotGetJdbcConnectionException</tt>&#65292;&#35813;&#31867;&#26159;Spring&#26694;&#26550;&#30340;unchecked&#30340;DataAccessExceptions&#23618;&#27425;&#20307;&#31995;&#20013;&#30340;&#19968;&#21592;&#12290;&#36825;&#23558;&#32473;&#20320;&#27604;&#20174; <tt class="exceptionname">SQLException</tt> &#20013;&#31616;&#21333;&#25152;&#24471;&#26356;&#22810;&#30340;&#20449;&#24687;&#65292;&#32780;&#19988;&#20445;&#35777;&#20102;&#36328;&#25968;&#25454;&#24211;&#8212;&#8212;&#29978;&#33267;&#20854;&#20182;&#25345;&#20037;&#21270;&#25216;&#26415;&#8212;&#8212;&#30340;&#31227;&#26893;&#24615;&#12290;</p><p>&#24212;&#35813;&#25351;&#20986;&#30340;&#26159;&#65292;&#36825;&#20123;&#31867;&#21516;&#26679;&#21487;&#20197;&#22312;&#27809;&#26377;Spring&#20107;&#21153;&#31649;&#29702;&#30340;&#29615;&#22659;&#20013;&#24037;&#20316;&#33391;&#22909;&#65288;&#20107;&#21153;&#21516;&#27493;&#33021;&#21147;&#26159;&#21487;&#36873;&#30340;&#65289;&#65292;&#25152;&#20197;&#26080;&#35770;&#20320;&#26159;&#21542;&#20351;&#29992;Spring&#30340;&#20107;&#21153;&#31649;&#29702;&#65292;&#20320;&#37117;&#21487;&#20197;&#20351;&#29992;&#36825;&#20123;&#31867;&#12290;</p><p>&#24403;&#28982;&#65292;&#19968;&#26086;&#20320;&#29992;&#36807;Spring&#30340;JDBC&#25903;&#25345;&#25110;Hibernate&#25903;&#25345;&#65292;&#20320;&#19968;&#33324;&#23601;&#19981;&#20877;&#20250;&#36873;&#25321; <tt class="classname">DataSourceUtils</tt> &#25110;&#26159;&#21035;&#30340;&#36741;&#21161;&#31867;&#20102;&#65292;&#22240;&#20026;&#20320;&#20250;&#26356;&#20048;&#24847;&#19982;Spring&#25277;&#35937;&#19968;&#36215;&#24037;&#20316;&#65292;&#32780;&#19981;&#26159;&#30452;&#25509;&#20351;&#29992;&#30456;&#20851;&#30340;API&#12290;&#20363;&#22914;&#65292;&#22914;&#26524;&#20320;&#20351;&#29992;Spring&#30340; <tt class="classname">JdbcTemplate</tt> &#25110; <tt class="literal">jdbc.object</tt> &#21253;&#26469;&#31616;&#21270;&#20351;&#29992;JDBC&#65292;Spring&#20250;&#22312;&#24149;&#21518;&#26367;&#20320;&#27491;&#30830;&#22320;&#33719;&#21462;&#36830;&#25509;&#65292;&#32780;&#20320;&#19981;&#38656;&#35201;&#20889;&#20219;&#20309;&#29305;&#27530;&#20195;&#30721;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tx-resource-synchronization-tadsp"></a>9.4.3.&nbsp;
				<tt class="classname">TransactionAwareDataSourceProxy</tt>
			</h3></div></div><div></div></div><p>&#24037;&#20316;&#22312;&#26368;&#24213;&#23618;&#30340;&#26159; <tt class="classname">TransactionAwareDataSourceProxy</tt> &#31867;&#12290;&#36825;&#26159;&#19968;&#20010;&#23545;&#30446;&#26631; <tt class="interfacename">DataSource</tt> &#30340;&#20195;&#29702;&#65292;&#23427;&#21253;&#35013;&#20102;&#30446;&#26631; <tt class="interfacename">DataSource</tt>&#65292;&#25552;&#20379;&#23545;Spring&#31649;&#29702;&#20107;&#21153;&#30340;&#21487;&#30693;&#24615;&#12290;&#22312;&#36825;&#28857;&#19978;&#65292;&#23427;&#31867;&#20284;&#20110;&#19968;&#20010;J2EE&#26381;&#21153;&#22120;&#25552;&#20379;&#30340;&#20107;&#21153;&#24615;JNDI <tt class="interfacename">DataSource</tt>&#12290;</p><p>&#35813;&#31867;&#24212;&#35813;&#27704;&#36828;&#19981;&#38656;&#35201;&#34987;&#24212;&#29992;&#20195;&#30721;&#20351;&#29992;&#65292;&#38500;&#38750;&#29616;&#26377;&#20195;&#30721;&#23384;&#22312;&#38656;&#35201;&#30452;&#25509;&#20256;&#36882;&#19968;&#20010;&#26631;&#20934;&#30340;JDBC&#30340; <tt class="interfacename">DataSource</tt> &#30340;&#24773;&#20917;&#12290;&#36825;&#26102;&#21487;&#20197;&#36890;&#36807;&#21442;&#19982;Spring&#31649;&#29702;&#20107;&#21153;&#35753;&#36825;&#20123;&#20195;&#30721;&#20173;&#28982;&#26377;&#29992;&#12290;&#20070;&#20889;&#26032;&#30340;&#20195;&#30721;&#26102;&#65292;&#39318;&#36873;&#30340;&#26041;&#27861;&#26159;&#37319;&#29992;&#19978;&#38754;&#25552;&#21040;&#30340;Spring&#39640;&#23618;&#25277;&#35937;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="transaction-declarative"></a>9.5.&nbsp;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;</h2></div></div><div></div></div><i><span class="remark">&#22823;&#22810;&#25968;Spring&#29992;&#25143;&#36873;&#25321;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;&#12290;&#36825;&#26159;&#23545;&#24212;&#29992;&#20195;&#30721;&#24433;&#21709;&#26368;&#23567;&#30340;&#36873;&#25321;&#65292;&#22240;&#27492;&#20063;&#26368;&#31526;&#21512; <span class="emphasis"><em>&#38750;&#20405;&#20837;&#24335;</em></span> &#36731;&#37327;&#32423;&#23481;&#22120;&#30340;&#29702;&#24565;&#12290;</span></i><p>Spring&#30340;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;&#26159;&#36890;&#36807;Spring AOP&#23454;&#29616;&#30340;&#65292;&#22240;&#20026;&#20107;&#21153;&#26041;&#38754;&#30340;&#20195;&#30721;&#19982;Spring&#32465;&#23450;&#24182;&#20197;&#19968;&#31181;&#26679;&#26495;&#24335;&#39118;&#26684;&#20351;&#29992;&#65292;
   &#19981;&#36807;&#23613;&#31649;&#22914;&#27492;&#65292;&#20320;&#19968;&#33324;&#24182;&#19981;&#38656;&#35201;&#29702;&#35299;AOP&#27010;&#24565;&#23601;&#21487;&#20197;&#26377;&#25928;&#22320;&#20351;&#29992;Spirng&#30340;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;&#12290;</p><p>&#20174;&#32771;&#34385;EJB CMT&#21644;Spring&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;&#30340;&#30456;&#20284;&#20197;&#21450;&#19981;&#21516;&#20043;&#22788;&#20986;&#21457;&#26159;&#24456;&#26377;&#30410;&#30340;&#12290;&#23427;&#20204;&#30340;&#22522;&#26412;&#26041;&#27861;&#26159;&#30456;&#20284;&#30340;&#65306;
		&#37117;&#21487;&#20197;&#25351;&#23450;&#20107;&#21153;&#31649;&#29702;&#21040;&#21333;&#29420;&#30340;&#26041;&#27861;&#65307;&#22914;&#26524;&#38656;&#35201;&#21487;&#20197;&#22312;&#20107;&#21153;&#19978;&#19979;&#25991;&#35843;&#29992; <tt class="methodname">setRollbackOnly()</tt> &#26041;&#27861;&#12290;&#19981;&#21516;&#20043;&#22788;&#22312;&#20110;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#19981;&#20687;EJB CMT&#32465;&#23450;&#22312;JTA&#19978;&#65292;Spring&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;&#21487;&#20197;&#22312;&#20219;&#20309;&#29615;&#22659;&#19979;&#20351;&#29992;&#12290;&#21482;&#38656;&#26356;&#25913;&#37197;&#32622;&#25991;&#20214;&#65292;
	&#23427;&#23601;&#21487;&#20197;&#21644;JDBC&#12289;JDO&#12289;Hibernate&#25110;&#20854;&#20182;&#30340;&#20107;&#21153;&#26426;&#21046;&#19968;&#36215;&#24037;&#20316;&#12290;</p></li><li><p>Spring&#30340;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;&#21487;&#20197;&#34987;&#24212;&#29992;&#21040;&#20219;&#20309;&#31867;&#65288;&#20197;&#21450;&#37027;&#20010;&#31867;&#30340;&#23454;&#20363;&#65289;&#19978;&#65292;&#19981;&#20165;&#20165;&#26159;&#20687;EJB&#37027;&#26679;&#30340;&#29305;&#27530;&#31867;&#12290;</p></li><li><p>Spring&#25552;&#20379;&#20102;&#22768;&#26126;&#24335;&#30340;	<a href="#transaction-declarative-rolling-back" title="9.5.3.&nbsp;&#22238;&#28378;"><span class="emphasis"><em>&#22238;&#28378;&#35268;&#21017;</em></span></a>&#65306;EJB&#27809;&#26377;&#23545;&#24212;&#30340;&#29305;&#24615;&#65292;&#25105;&#20204;&#23558;&#22312;&#19979;&#38754;&#35752;&#35770;&#12290;&#22238;&#28378;&#21487;&#20197;&#22768;&#26126;&#24335;&#30340;&#25511;&#21046;&#65292;&#19981;&#20165;&#20165;&#26159;&#32534;&#31243;&#24335;&#30340;&#12290;</p></li><li><p>Spring&#20801;&#35768;&#20320;&#36890;&#36807;AOP&#23450;&#21046;&#20107;&#21153;&#34892;&#20026;&#12290;&#20363;&#22914;&#65292;&#22914;&#26524;&#38656;&#35201;&#65292;&#20320;&#21487;&#20197;&#22312;&#20107;&#21153;&#22238;&#28378;&#20013;&#25554;&#20837;&#23450;&#21046;&#30340;&#34892;&#20026;&#12290;
				&#20320;&#20063;&#21487;&#20197;&#22686;&#21152;&#20219;&#24847;&#30340;&#36890;&#30693;&#65292;&#23601;&#35937;&#20107;&#21153;&#36890;&#30693;&#19968;&#26679;&#12290;&#20351;&#29992;EJB CMT&#65292;&#38500;&#20102;&#20351;&#29992;<tt class="literal">setRollbackOnly()</tt>&#65292;&#20320;&#27809;&#26377;&#21150;&#27861;&#33021;&#22815;&#24433;&#21709;&#23481;&#22120;&#30340;&#20107;&#21153;&#31649;&#29702;&#12290;</p></li><li><p>Spring&#19981;&#25552;&#20379;&#39640;&#31471;&#24212;&#29992;&#26381;&#21153;&#22120;&#25552;&#20379;&#30340;&#36328;&#36234;&#36828;&#31243;&#35843;&#29992;&#30340;&#20107;&#21153;&#19978;&#19979;&#25991;&#20256;&#25773;&#12290;&#22914;&#26524;&#20320;&#38656;&#35201;&#36825;&#20123;&#29305;&#24615;&#65292;&#25105;&#20204;&#25512;&#33616;&#20320;&#20351;&#29992;EJB&#12290;
				&#28982;&#32780;&#65292;&#19981;&#35201;&#36731;&#26131;&#20351;&#29992;&#36825;&#20123;&#29305;&#24615;&#12290;&#22240;&#20026;&#36890;&#24120;&#25105;&#20204;&#24182;&#19981;&#24076;&#26395;&#20107;&#21153;&#36328;&#36234;&#36828;&#31243;&#35843;&#29992;&#12290;</p></li></ul></div><div class="sidebar"><p class="title"><b><tt class="classname">TransactionProxyFactoryBean</tt>&#22312;&#21738;&#20799;&#65311;</b></p><p>Spring2.0&#21450;&#20197;&#21518;&#30340;&#29256;&#26412;&#20013;&#22768;&#26126;&#24335;&#20107;&#21153;&#30340;&#37197;&#32622;&#19982;&#20043;&#21069;&#30340;&#29256;&#26412;&#26377;&#30456;&#24403;&#22823;&#30340;&#19981;&#21516;&#12290;&#20027;&#35201;&#24046;&#24322;&#22312;&#20110;&#19981;&#20877;&#38656;&#35201;&#37197;&#32622;<tt class="classname">TransactionProxyFactoryBean</tt>&#20102;&#12290;</p><p>Spring2.0&#20043;&#21069;&#30340;&#26087;&#29256;&#26412;&#39118;&#26684;&#30340;&#37197;&#32622;&#20173;&#28982;&#26159;&#26377;&#25928;&#30340;&#65307;&#20320;&#21487;&#20197;&#31616;&#21333;&#22320;&#35748;&#20026;&#26032;&#30340;<tt class="literal">&lt;tx:tags/&gt;</tt>&#26367;&#20320;&#23450;&#20041;&#20102;<tt class="classname">TransactionProxyFactoryBean</tt>&#12290;</p></div><p>&#22238;&#28378;&#35268;&#21017;&#30340;&#27010;&#24565;&#27604;&#36739;&#37325;&#35201;&#65306;&#23427;&#20351;&#25105;&#20204;&#33021;&#22815;&#25351;&#23450;&#20160;&#20040;&#26679;&#30340;&#24322;&#24120;&#65288;&#21644;throwable&#65289;&#23558;&#23548;&#33268;&#33258;&#21160;&#22238;&#28378;&#12290;
&#25105;&#20204;&#22312;&#37197;&#32622;&#25991;&#20214;&#20013;&#22768;&#26126;&#24335;&#22320;&#25351;&#23450;&#65292;&#26080;&#39035;&#22312;Java&#20195;&#30721;&#20013;&#12290;&#21516;&#26102;&#65292;&#25105;&#20204;&#20173;&#26087;&#21487;&#20197;&#36890;&#36807;&#35843;&#29992; <tt class="interfacename">TransactionStatus</tt> &#30340;
 <tt class="methodname">setRollbackOnly()</tt> &#26041;&#27861;&#32534;&#31243;&#24335;&#22320;&#22238;&#28378;&#24403;&#21069;&#20107;&#21153;&#12290;&#36890;&#24120;&#65292;&#25105;&#20204;&#23450;&#20041;&#19968;&#26465;&#35268;&#21017;&#65292;
 &#22768;&#26126; <tt class="exceptionname">MyApplicationException</tt> &#24517;&#39035;&#24635;&#26159;&#23548;&#33268;&#20107;&#21153;&#22238;&#28378;&#12290;
 &#36825;&#31181;&#26041;&#24335;&#24102;&#26469;&#20102;&#26174;&#33879;&#30340;&#22909;&#22788;&#65292;&#23427;&#20351;&#20320;&#30340;&#19994;&#21153;&#23545;&#35937;&#19981;&#24517;&#20381;&#36182;&#20110;&#20107;&#21153;&#35774;&#26045;&#12290;&#20856;&#22411;&#30340;&#20363;&#23376;&#26159;&#20320;&#19981;&#24517;&#22312;&#20195;&#30721;&#20013;&#23548;&#20837;Spring API&#65292;&#20107;&#21153;&#31561;&#12290;</p><p>&#23545;EJB&#26469;&#35828;&#65292;&#40664;&#35748;&#30340;&#34892;&#20026;&#26159;EJB&#23481;&#22120;&#22312;&#36935;&#21040; <span class="emphasis"><em>&#31995;&#32479;&#24322;&#24120;</em></span>&#65288;&#36890;&#24120;&#25351;&#36816;&#34892;&#26102;&#24322;&#24120;&#65289;&#26102;&#33258;&#21160;&#22238;&#28378;&#24403;&#21069;&#20107;&#21153;&#12290;
	EJB CMT&#36935;&#21040; <span class="emphasis"><em>&#24212;&#29992;&#24322;&#24120;</em></span>&#65288;&#20363;&#22914;&#65292;&#38500;&#20102; <tt class="exceptionname">java.rmi.RemoteException</tt> &#22806;&#21035;&#30340;checked exception&#65289;&#26102;&#24182;&#19981;&#20250;&#33258;&#21160;&#22238;&#28378;&#12290;
	&#40664;&#35748;&#24335;Spring&#22788;&#29702;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;&#30340;&#35268;&#21017;&#36981;&#23432;EJB&#20064;&#24815;&#65288;&#21482;&#22312;&#36935;&#21040;unchecked exceptions&#26102;&#33258;&#21160;&#22238;&#28378;&#65289;&#65292;&#20294;&#36890;&#24120;&#23450;&#21046;&#36825;&#26465;&#35268;&#21017;&#20250;&#26356;&#26377;&#29992;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tx-decl-explained"></a>9.5.1.&nbsp;&#29702;&#35299;Spring&#30340;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;&#23454;&#29616;</h3></div></div><div></div></div><p>&#26412;&#33410;&#30340;&#30446;&#30340;&#26159;&#28040;&#38500;&#19982;&#20351;&#29992;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;&#26377;&#20851;&#30340;&#31070;&#31192;&#24615;&#12290;&#31616;&#21333;&#28857;&#20799;&#24635;&#26159;&#22909;&#30340;&#65292;&#36825;&#20221;&#21442;&#32771;&#25991;&#26723;&#21482;&#26159;&#21578;&#35785;&#20320;&#32473;&#20320;&#30340;&#31867;&#21152;&#19978;<tt class="interfacename">@Transactional</tt>&#27880;&#35299;&#65292;&#22312;&#37197;&#32622;&#25991;&#20214;&#20013;&#28155;&#21152;&#65288;<tt class="literal">'&lt;tx:annotation-driven/&gt;'</tt>&#65289;&#34892;&#65292;&#28982;&#21518;&#26399;&#26395;&#20320;&#29702;&#35299;&#25972;&#20010;&#36807;&#31243;&#26159;&#24590;&#20040;&#24037;&#20316;&#30340;&#12290;&#27492;&#33410;&#35762;&#36848;Spring&#30340;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;&#20869;&#37096;&#30340;&#24037;&#20316;&#26426;&#21046;&#65292;&#20197;&#24110;&#21161;&#20320;&#22312;&#38754;&#23545;&#20107;&#21153;&#30456;&#20851;&#30340;&#38382;&#39064;&#26102;&#19981;&#33267;&#20110;&#35823;&#20837;&#36855;&#36884;&#65292;&#22238;&#26388;&#21040;&#19978;&#28216;&#24179;&#38745;&#30340;&#27700;&#22495;&#12290;</p><p>&#22312;&#29702;&#35299;Spring&#30340;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;&#26041;&#38754;&#26368;&#37325;&#35201;&#30340;&#27010;&#24565;&#26159;&#65306;Spring&#30340;&#20107;&#21153;&#31649;&#29702;&#26159;&#36890;&#36807;AOP<span class="emphasis"><em>&#20195;&#29702;</em></span>&#23454;&#29616;&#30340;&#12290;
	 &#20854;&#20013;&#30340;&#20107;&#21153;&#36890;&#30693;&#30001;<span class="emphasis"><em>&#20803;&#25968;&#25454;</em></span>&#65288;&#30446;&#21069;&#22522;&#20110;XML&#25110;&#27880;&#35299;&#65289;&#39537;&#21160;&#12290;
	 &#20195;&#29702;&#23545;&#35937;&#19982;&#20107;&#21153;&#20803;&#25968;&#25454;&#32467;&#21512;&#20135;&#29983;&#20102;&#19968;&#20010;AOP&#20195;&#29702;&#65292;&#23427;&#20351;&#29992;&#19968;&#20010;<tt class="classname">PlatformTransactionManager</tt>
	 &#23454;&#29616;&#21697;&#37197;&#21512;<tt class="classname">TransactionInterceptor</tt>&#65292;&#22312;<span class="emphasis"><em>&#26041;&#27861;&#35843;&#29992;</em></span>&#21069;&#21518;&#23454;&#26045;&#20107;&#21153;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#23613;&#31649;&#20351;&#29992;Spring&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;&#19981;&#38656;&#35201;AOP&#65288;&#23588;&#20854;&#26159;Spring AOP&#65289;&#30340;&#30693;&#35782;&#65292;&#20294;&#20102;&#35299;&#36825;&#20123;&#26159;&#24456;&#26377;&#24110;&#21161;&#30340;&#12290;&#20320;&#21487;&#20197;&#22312; <a href="#aop" title="Chapter&nbsp;6.&nbsp;&#20351;&#29992;Spring&#36827;&#34892;&#38754;&#21521;&#20999;&#38754;&#32534;&#31243;&#65288;AOP&#65289;">Chapter&nbsp;6, <i>&#20351;&#29992;Spring&#36827;&#34892;&#38754;&#21521;&#20999;&#38754;&#32534;&#31243;&#65288;AOP&#65289;</i></a> &#31456;&#25214;&#21040;&#20851;&#20110;Spring AOP&#30340;&#20840;&#37096;&#20869;&#23481;&#12290;</p></td></tr></tbody></table></div><p>&#27010;&#24565;&#19978;&#26469;&#35828;&#65292;&#22312;&#20107;&#21153;&#20195;&#29702;&#19978;&#35843;&#29992;&#26041;&#27861;&#30340;&#24037;&#20316;&#36807;&#31243;&#30475;&#36215;&#26469;&#20687;&#36825;&#26679;&#65306;</p><p>
				</p><div class="mediaobject" align="center"><img src="tx.png" align="middle"></div><p>
			</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="transaction-declarative-first-example"></a>9.5.2.&nbsp;&#31532;&#19968;&#20010;&#20363;&#23376;</h3></div></div><div></div></div><p>&#35831;&#30475;&#19979;&#38754;&#30340;&#25509;&#21475;&#21644;&#23427;&#30340;&#23454;&#29616;&#12290;&#36825;&#20010;&#20363;&#23376;&#30340;&#24847;&#22270;&#26159;&#20171;&#32461;&#27010;&#24565;&#65292;&#20351;&#29992; <tt class="classname">Foo</tt> &#21644; <tt class="classname">Bar</tt> 
	 &#36825;&#26679;&#30340;&#21517;&#23383;&#21482;&#26159;&#20026;&#20102;&#35753;&#20320;&#20851;&#27880;&#20110;&#20107;&#21153;&#30340;&#29992;&#27861;&#65292;&#32780;&#19981;&#26159;&#39046;&#22495;&#27169;&#22411;&#12290;</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">// &#25105;&#20204;&#24819;&#20570;&#25104;&#20107;&#21153;&#24615;&#30340;&#26381;&#21153;&#25509;&#21475;</span></i>

package x.y.service;

public interface FooService {

  Foo getFoo(String fooName);

  Foo getFoo(String fooName, String barName);

  void insertFoo(Foo foo);

  void updateFoo(Foo foo);

}</pre><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">// &#19978;&#36848;&#25509;&#21475;&#30340;&#19968;&#20010;&#23454;&#29616;</span></i>

package x.y.service;

public class DefaultFooService implements FooService {

  public Foo getFoo(String fooName) {
    throw new UnsupportedOperationException();
  }

  public Foo getFoo(String fooName, String barName) {
    throw new UnsupportedOperationException();
  }

  public void insertFoo(Foo foo) {
    throw new UnsupportedOperationException();
  }

  public void updateFoo(Foo foo) {
    throw new UnsupportedOperationException();
  }

}</pre><p>
	 	<span class="emphasis"><em>&#65288;&#23545;&#35813;&#20363;&#30340;&#30446;&#30340;&#26469;&#35828;&#65292;&#19978;&#20363;&#20013;&#23454;&#29616;&#31867;&#65288;<tt class="classname">DefaultFooService</tt>&#65289;&#30340;&#27599;&#20010;&#26041;&#27861;&#22312;&#20854;&#26041;&#27861;&#20307;&#20013;&#25243;&#20986;
		<tt class="exceptionname">UnsupportedOperationException</tt> &#30340;&#20570;&#27861;&#26159;&#24688;&#24403;&#30340;&#65292;&#25105;&#20204;&#21487;&#20197;&#30475;&#21040;&#65292;&#20107;&#21153;&#34987;&#21019;&#24314;&#20986;&#26469;&#65292;
		&#21709;&#24212; <tt class="exceptionname">UnsupportedOperationException</tt> &#30340;&#25243;&#20986;&#65292;&#28982;&#21518;&#22238;&#28378;&#12290;&#65289;</em></span>
	</p><p>&#25105;&#20204;&#20551;&#23450;&#65292;<tt class="interfacename">FooService</tt>&#30340;&#21069;&#20004;&#20010;&#26041;&#27861;&#65288;<tt class="literal">getFoo(String)</tt>
	&#21644;<tt class="literal">getFoo(String, String)</tt>&#65289;&#24517;&#39035;&#25191;&#34892;&#22312;&#21482;&#35835;&#20107;&#21153;&#19978;&#19979;&#25991;&#20013;&#65292;&#20854;&#20182;&#30340;&#26041;&#27861;&#65288;<tt class="literal">insertFoo(Foo)</tt>&#21644;
	<tt class="literal">updateFoo(Foo)</tt>&#65289;&#24517;&#39035;&#25191;&#34892;&#22312;&#21487;&#35835;&#20889;&#20107;&#21153;&#19978;&#19979;&#25991;&#20013;&#12290;&#19981;&#35201;&#24819;&#30528;&#19968;&#27425;&#29702;&#35299;&#19979;&#38754;&#30340;&#37197;&#32622;&#65292;&#25152;&#26377;&#20869;&#23481;&#37117;&#20250;&#22312;&#21518;&#38754;&#30340;&#31456;&#33410;&#35814;&#32454;&#35752;&#35770;&#12290;</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">&lt;!-- from the file <tt class="literal">'context.xml'</tt> --&gt;</span></i>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xmlns:aop="http://www.springframework.org/schema/aop"
     <i class="lineannotation"><span class="lineannotation"><span class="bold"><b>xmlns:tx="http://www.springframework.org/schema/tx"</b></span></span></i>
     xsi:schemaLocation="
     http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
     <i class="lineannotation"><span class="lineannotation"><span class="bold"><b>http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd</b></span></span></i>
     http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd"&gt;
  
  <i class="lineannotation"><span class="lineannotation">&lt;!-- this is the service object that we want to make transactional --&gt;</span></i>
  &lt;bean id="fooService" class="x.y.service.DefaultFooService"/&gt;

  <i class="lineannotation"><span class="lineannotation">&lt;!-- the transactional advice (what 'happens'; see the <tt class="literal">&lt;aop:advisor/&gt;</tt> bean below) --&gt;</span></i>
  &lt;tx:advice id="txAdvice" transaction-manager="txManager"&gt;
  <i class="lineannotation"><span class="lineannotation">&lt;!-- the transactional semantics... --&gt;</span></i>
  &lt;tx:attributes&gt;
    <i class="lineannotation"><span class="lineannotation">&lt;!-- all methods starting with <tt class="literal">'get'</tt> are read-only --&gt;</span></i>
    &lt;tx:method name="get*" read-only="true"/&gt;
    <i class="lineannotation"><span class="lineannotation">&lt;!-- other methods use the default transaction settings (see below) --&gt;</span></i>
    &lt;tx:method name="*"/&gt;
  &lt;/tx:attributes&gt;
  &lt;/tx:advice&gt;
  
  <i class="lineannotation"><span class="lineannotation">&lt;!-- ensure that the above transactional advice runs for any execution
    of an operation defined by the <tt class="interfacename">FooService</tt> interface --&gt;</span></i>
  &lt;aop:config&gt;
  &lt;aop:pointcut id="fooServiceOperation" expression="execution(* x.y.service.FooService.*(..))"/&gt;
  &lt;aop:advisor advice-ref="txAdvice" pointcut-ref="fooServiceOperation"/&gt;
  &lt;/aop:config&gt;
  
  <i class="lineannotation"><span class="lineannotation">&lt;!-- don't forget the <tt class="interfacename">DataSource</tt> --&gt;</span></i>
  &lt;bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close"&gt;
  &lt;property name="driverClassName" value="oracle.jdbc.driver.OracleDriver"/&gt;
  &lt;property name="url" value="jdbc:oracle:thin:@rj-t42:1521:elvis"/&gt;
  &lt;property name="username" value="scott"/&gt;
  &lt;property name="password" value="tiger"/&gt;
  &lt;/bean&gt;

  <i class="lineannotation"><span class="lineannotation">&lt;!-- similarly, don't forget the <tt class="interfacename">PlatformTransactionManager</tt> --&gt;</span></i>
  &lt;bean id="txManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager"&gt;
  &lt;property name="dataSource" ref="dataSource"/&gt;
  &lt;/bean&gt;
  
  <i class="lineannotation"><span class="lineannotation">&lt;!-- other <tt class="literal">&lt;bean/&gt;</tt> definitions here --&gt;</span></i>

&lt;/beans&gt;</pre><p>
				&#25105;&#20204;&#26469;&#20998;&#26512;&#19968;&#19979;&#19978;&#38754;&#30340;&#37197;&#32622;&#12290;&#25105;&#20204;&#35201;&#25226;&#19968;&#20010;&#26381;&#21153;&#23545;&#35937;&#65288;<tt class="literal">'fooService'</tt> bean&#65289;&#20570;&#25104;&#20107;&#21153;&#24615;&#30340;&#12290;
				&#25105;&#20204;&#24819;&#26045;&#21152;&#30340;&#20107;&#21153;&#35821;&#20041;&#23553;&#35013;&#22312;<tt class="literal">&lt;tx:advice/&gt;</tt>&#23450;&#20041;&#20013;&#12290;<tt class="literal">&lt;tx:advice/&gt;</tt>
				&#8220;<span class="quote"><span class="emphasis"><em>&#25226;&#25152;&#26377;&#20197; <tt class="literal">'get'</tt> &#24320;&#22836;&#30340;&#26041;&#27861;&#30475;&#20570;&#25191;&#34892;&#22312;&#21482;&#35835;&#20107;&#21153;&#19978;&#19979;&#25991;&#20013;&#65292;
				&#20854;&#20313;&#30340;&#26041;&#27861;&#25191;&#34892;&#22312;&#40664;&#35748;&#35821;&#20041;&#30340;&#20107;&#21153;&#19978;&#19979;&#25991;&#20013;</em></span></span>&#8221;&#12290;
				&#20854;&#20013;&#30340; <tt class="literal">'transaction-manager'</tt> &#23646;&#24615;&#34987;&#35774;&#32622;&#20026;&#19968;&#20010;&#25351;&#21521;
				<tt class="interfacename">PlatformTransactionManager</tt> bean&#30340;&#21517;&#23383;&#65288;&#36825;&#37324;&#25351; <tt class="literal">'txManager'</tt>&#65289;&#65292;
				&#35813;bean&#23558;&#20250;&#30495;&#27491;&#31649;&#29702;&#20107;&#21153;&#12290;</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Tip" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Tip]" src="tip.png"></td><th align="left">Tip</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#20107;&#23454;&#19978;&#65292;&#22914;&#26524; <tt class="interfacename">PlatformTransactionManager</tt> bean&#30340;&#21517;&#23383;&#26159; 
				<tt class="literal">'transactionManager'</tt> &#30340;&#35805;&#65292;&#20320;&#30340;&#20107;&#21153;&#36890;&#30693;&#65288;<tt class="literal">&lt;tx:advice/&gt;</tt>&#65289;&#20013;&#30340; 
				<tt class="literal">'transaction-manager'</tt> &#23646;&#24615;&#21487;&#20197;&#24573;&#30053;&#12290;&#21542;&#21017;&#20320;&#21017;&#38656;&#35201;&#20687;&#19978;&#20363;&#37027;&#26679;&#26126;&#30830;&#25351;&#23450;&#12290;</p></td></tr></tbody></table></div><p>&#37197;&#32622;&#20013;&#26368;&#21518;&#19968;&#27573;&#26159; <tt class="literal">&lt;aop:config/&gt;</tt> &#30340;&#23450;&#20041;&#65292;
	  &#23427;&#30830;&#20445;&#30001; <tt class="literal">'txAdvice'</tt> bean&#23450;&#20041;&#30340;&#20107;&#21153;&#36890;&#30693;&#22312;&#24212;&#29992;&#20013;&#21512;&#36866;&#30340;&#28857;&#34987;&#25191;&#34892;&#12290;
	  &#39318;&#20808;&#25105;&#20204;&#23450;&#20041;&#20102; &#19968;&#20010;&#20999;&#38754;&#65292;&#23427;&#21305;&#37197; <tt class="interfacename">FooService</tt> &#25509;&#21475;&#23450;&#20041;&#30340;&#25152;&#26377;&#25805;&#20316;&#65292;
	  &#25105;&#20204;&#25226;&#35813;&#20999;&#38754;&#21483;&#20570; <tt class="literal">'fooServiceOperation'</tt>&#12290;&#28982;&#21518;&#25105;&#20204;&#29992;&#19968;&#20010;&#36890;&#30693;&#22120;&#65288;advisor&#65289;&#25226;&#36825;&#20010;&#20999;&#38754;&#19982; <tt class="literal">'txAdvice'</tt> &#32465;&#23450;&#22312;&#19968;&#36215;&#65292;
	  &#34920;&#31034;&#24403; <tt class="literal">'fooServiceOperation'</tt> &#25191;&#34892;&#26102;&#65292;<tt class="literal">'txAdvice'</tt> &#23450;&#20041;&#30340;&#36890;&#30693;&#36923;&#36753;&#23558;&#34987;&#25191;&#34892;&#12290;</p><p><tt class="literal">&lt;aop:pointcut/&gt;</tt> &#20803;&#32032;&#23450;&#20041;&#26159;AspectJ&#30340;&#20999;&#38754;&#34920;&#31034;&#27861;&#65292;&#21487;&#21442;&#32771;Spring 2.0 <a href="#aop" title="Chapter&nbsp;6.&nbsp;&#20351;&#29992;Spring&#36827;&#34892;&#38754;&#21521;&#20999;&#38754;&#32534;&#31243;&#65288;AOP&#65289;">Chapter&nbsp;6, <i>&#20351;&#29992;Spring&#36827;&#34892;&#38754;&#21521;&#20999;&#38754;&#32534;&#31243;&#65288;AOP&#65289;</i></a>&#31456;&#33719;&#24471;&#26356;&#35814;&#32454;&#30340;&#20869;&#23481;&#12290;</p><p>&#19968;&#20010;&#26222;&#36941;&#24615;&#30340;&#38656;&#27714;&#26159;&#35753;&#25972;&#20010;&#26381;&#21153;&#23618;&#25104;&#20026;&#20107;&#21153;&#24615;&#30340;&#12290;&#28385;&#36275;&#35813;&#38656;&#27714;&#30340;&#26368;&#22909;&#26041;&#24335;&#26159;&#35753;&#20999;&#38754;&#34920;&#36798;&#24335;&#21305;&#37197;&#26381;&#21153;&#23618;&#30340;&#25152;&#26377;&#25805;&#20316;&#26041;&#27861;&#12290;&#20363;&#22914;&#65306;</p><pre class="programlisting">&lt;aop:config&gt;
  &lt;aop:pointcut id="fooServiceMethods" expression="execution(* x.y.service.*.*(..))"/&gt;
  &lt;aop:advisor advice-ref="txAdvice" pointcut-ref="fooServiceMethods"/&gt;
  &lt;/aop:config&gt;</pre><p>
			<span class="emphasis"><em>&#65288;&#36825;&#20010;&#20363;&#23376;&#20013;&#20551;&#23450;&#20320;&#25152;&#26377;&#30340;&#26381;&#21153;&#25509;&#21475;&#23450;&#20041;&#22312; <tt class="literal">'x.y.service'</tt> &#21253;&#20013;&#12290;&#20320;&#21516;&#26679;&#21487;&#20197;&#21442;&#32771; <a href="#aop" title="Chapter&nbsp;6.&nbsp;&#20351;&#29992;Spring&#36827;&#34892;&#38754;&#21521;&#20999;&#38754;&#32534;&#31243;&#65288;AOP&#65289;">Chapter&nbsp;6, <i>&#20351;&#29992;Spring&#36827;&#34892;&#38754;&#21521;&#20999;&#38754;&#32534;&#31243;&#65288;AOP&#65289;</i></a> &#31456;&#33719;&#24471;&#26356;&#35814;&#32454;&#20869;&#23481;&#12290;&#65289;</em></span>
			</p><p>&#29616;&#22312;&#65292;&#26082;&#28982;&#25105;&#20204;&#24050;&#32463;&#20998;&#26512;&#20102;&#25972;&#20010;&#37197;&#32622;&#65292;&#20320;&#21487;&#33021;&#20250;&#38382;&#20102;&#65292;&#8220;<span class="quote"><span class="emphasis"><em>&#22909;&#21543;&#65292;&#20294;&#26159;&#25152;&#26377;&#36825;&#20123;&#37197;&#32622;&#20570;&#20102;&#20160;&#20040;&#65311;</em></span></span>&#8221;&#12290;</p><p>&#19978;&#38754;&#30340;&#37197;&#32622;&#23558;&#20026;<tt class="literal">'fooService'</tt> bean&#21019;&#24314;&#19968;&#20010;&#20195;&#29702;&#23545;&#35937;&#65292;&#36825;&#20010;&#20195;&#29702;&#23545;&#35937;&#34987;&#35013;&#37197;&#20102;&#20107;&#21153;&#36890;&#30693;&#65292;&#25152;&#20197;&#24403;&#23427;&#30340;&#30456;&#24212;&#26041;&#27861;&#34987;&#35843;&#29992;&#26102;&#65292;&#19968;&#20010;&#20107;&#21153;&#23558;&#34987;&#21551;&#21160;&#12289;&#25346;&#36215;&#12289;&#34987;&#26631;&#35760;&#20026;&#21482;&#35835;&#65292;&#25110;&#32773;&#20854;&#23427;&#65288;&#26681;&#25454;&#35813;&#26041;&#27861;&#25152;&#37197;&#32622;&#30340;&#20107;&#21153;&#35821;&#20041;&#65289;&#12290;&#25105;&#20204;&#26469;&#30475;&#30475;&#19979;&#38754;&#30340;&#20363;&#23376;&#65292;&#27979;&#35797;&#19968;&#19979;&#19978;&#38754;&#30340;&#37197;&#32622;&#12290;</p><pre class="programlisting">public final class Boot {

  public static void main(final String[] args) throws Exception {
    ApplicationContext ctx = new ClassPathXmlApplicationContext("context.xml", Boot.class);
    FooService fooService = (FooService) ctx.getBean("fooService");
    fooService.insertFoo (new Foo());
  }
}</pre><p>&#36816;&#34892;&#19978;&#38754;&#31243;&#24207;&#30340;&#36755;&#20986;&#32467;&#26524;&#30475;&#36215;&#26469;&#20687;&#36825;&#26679;&#65288;&#27880;&#24847;&#20026;&#20102;&#28165;&#26970;&#36215;&#35265;&#65292;Log4J&#30340;&#28040;&#24687;&#21644;&#20174; <tt class="classname">DefaultFooService</tt> &#30340; <tt class="methodname">insertFoo(..)</tt> &#26041;&#27861;&#25243;&#20986;&#30340; <tt class="exceptionname">UnsupportedOperationException</tt> &#24322;&#24120;&#22534;&#26632;&#20449;&#24687;&#34987;&#30465;&#30053;&#20102;&#65289;&#12290;</p><pre class="programlisting">				<i class="lineannotation"><span class="lineannotation">&lt;!-- Spring&#23481;&#22120;&#24320;&#22987;&#21551;&#21160;... --&gt;
				</span></i>
[AspectJInvocationContextExposingAdvisorAutoProxyCreator] - Creating implicit proxy
        for bean 'fooService' with 0 common interceptors and 1 specific interceptors
    <i class="lineannotation"><span class="lineannotation">&lt;!-- the <tt class="classname">DefaultFooService</tt> is actually proxied --&gt;
    </span></i>
[JdkDynamicAopProxy] - Creating JDK dynamic proxy for [x.y.service.DefaultFooService]

    <i class="lineannotation"><span class="lineannotation">&lt;!-- ... the <tt class="literal">insertFoo(..)</tt> method is now being invoked on the proxy --&gt;
    </span></i>

[TransactionInterceptor] - Getting transaction for x.y.service.FooService.insertFoo
    <i class="lineannotation"><span class="lineannotation">&lt;!-- the transactional advice kicks in here... --&gt;
    </span></i>
[DataSourceTransactionManager] - Creating new transaction with name [x.y.service.FooService.insertFoo]
[DataSourceTransactionManager] - Acquired Connection
        [org.apache.commons.dbcp.PoolableConnection@a53de4] for JDBC transaction

    <i class="lineannotation"><span class="lineannotation">&lt;!-- the <tt class="literal">insertFoo(..)</tt> method from <tt class="classname">DefaultFooService</tt> throws an exception... --&gt;
    </span></i>
[RuleBasedTransactionAttribute] - Applying rules to determine whether transaction should
        rollback on java.lang.UnsupportedOperationException
[TransactionInterceptor] - Invoking rollback for transaction on x.y.service.FooService.insertFoo
        due to throwable [java.lang.UnsupportedOperationException]

   <i class="lineannotation"><span class="lineannotation">&lt;!-- and the transaction is rolled back (by default, <tt class="exceptionname">RuntimeException</tt> instances cause rollback) --&gt;
   </span></i>
[DataSourceTransactionManager] - Rolling back JDBC transaction on Connection
        [org.apache.commons.dbcp.PoolableConnection@a53de4]
[DataSourceTransactionManager] - Releasing JDBC Connection after transaction
[DataSourceUtils] - Returning JDBC Connection to DataSource

Exception in thread "main" java.lang.UnsupportedOperationException
	at x.y.service.DefaultFooService.insertFoo(DefaultFooService.java:14)
   <i class="lineannotation"><span class="lineannotation">&lt;!-- AOP infrastructure stack trace elements removed for clarity --&gt;
   </span></i>
	at $Proxy0.insertFoo(Unknown Source)
	at Boot.main(Boot.java:11)</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="transaction-declarative-rolling-back"></a>9.5.3.&nbsp;&#22238;&#28378;</h3></div></div><div></div></div><p>
            &#22312;&#21069;&#38754;&#30340;&#31456;&#33410;&#37324;&#65292;&#27010;&#36848;&#20102;&#22914;&#20309;&#22312;&#20320;&#30340;&#24212;&#29992;&#20013;&#29992;&#22768;&#26126;&#30340;&#39118;&#26684;&#20026;&#31867;&#65288;&#29305;&#21035;&#26159;&#26381;&#21153;&#23618;&#30340;&#31867;&#65289;&#25351;&#23450;&#20107;&#21153;&#37197;&#32622;&#12290;
			&#36825;&#19968;&#31456;&#23558;&#25551;&#36848;&#22914;&#20309;&#20351;&#29992;&#19968;&#20010;&#31616;&#21333;&#30340;&#22768;&#26126;&#24335;&#37197;&#32622;&#26469;&#25511;&#21046;&#20107;&#21153;&#30340;&#22238;&#28378;&#12290;</p><p>
             &#25105;&#20204;&#25512;&#33616;&#20570;&#27861;&#26159;&#22312;Spring&#26694;&#26550;&#30340;&#20107;&#21153;&#26550;&#26500;&#37324;&#25351;&#20986;&#24403;context&#30340;&#20107;&#21153;&#37324;&#30340;&#20195;&#30721;&#25243;&#20986; 
			<tt class="exceptionname">Exception</tt> &#26102;&#20107;&#21153;&#36827;&#34892;&#22238;&#28378;&#12290;Spring&#26694;&#26550;&#30340;&#20107;&#21153;&#22522;&#30784;&#26550;&#26500;&#20195;&#30721;&#23558;&#20174;&#35843;&#29992;&#30340;&#22534;&#26632;&#37324;&#25429;&#33719;&#21040;&#20219;&#20309;&#26410;&#22788;&#29702;&#30340; 
			<tt class="exceptionname">Exception</tt>&#65292;&#24182;&#23558;&#26631;&#35782;&#20107;&#21153;&#23558;&#22238;&#28378;&#12290;
            </p><p>
            &#28982;&#32780;&#65292;&#35831;&#27880;&#24847;Spring&#26694;&#26550;&#30340;&#20107;&#21153;&#22522;&#30784;&#26550;&#26500;&#20195;&#30721;&#23558;&#40664;&#35748;&#22320; <span class="emphasis"><em>&#21482;</em></span> &#22312;&#25243;&#20986;&#36816;&#34892;&#26102;&#21644;unchecked exceptions&#26102;&#25165;&#26631;&#35782;&#20107;&#21153;&#22238;&#28378;&#12290;
            &#20063;&#23601;&#26159;&#35828;&#65292;&#24403;&#25243;&#20986;&#19968;&#20010; <tt class="exceptionname">RuntimeException</tt> &#25110;&#20854;&#23376;&#31867;&#20363;&#30340;&#23454;&#20363;&#26102;&#12290;&#65288;<tt class="literal">Errors</tt> &#20063;&#19968;&#26679; - &#40664;&#35748;&#22320; - &#26631;&#35782;&#20107;&#21153;&#22238;&#28378;&#12290;&#65289;&#20174;&#20107;&#21153;&#26041;&#27861;&#20013;&#25243;&#20986;&#30340;Checked exceptions&#23558; <span class="emphasis"><em>&#19981;</em></span> &#34987;&#26631;&#35782;&#36827;&#34892;&#20107;&#21153;&#22238;&#28378;&#12290;
            </p><p>&#21487;&#20197;&#37197;&#32622;&#21738;&#20123; <tt class="exceptionname">Exception</tt>&#31867;&#22411;&#23558;&#34987;&#26631;&#35782;&#36827;&#34892;&#20107;&#21153;&#22238;&#28378;&#12290;
	      &#19979;&#38754;&#30340;XML&#37197;&#32622;&#29255;&#26029;&#37324;&#31034;&#33539;&#20102;&#22914;&#20309;&#37197;&#32622;&#19968;&#20010;&#29992;&#20110;&#22238;&#28378;&#30340;checked&#12289;&#24212;&#29992;&#31243;&#24207;&#29305;&#23450;&#30340; <tt class="exceptionname">Exception</tt> &#31867;&#22411;&#12290; </p><pre class="programlisting">&lt;tx:advice id="txAdvice" transaction-manager="txManager"&gt;
  &lt;tx:attributes&gt;
  &lt;tx:method name="get*" read-only="true" <i class="lineannotation"><span class="lineannotation"><span class="bold"><b>rollback-for="NoProductInStockException"</b></span></span></i>/&gt;
  &lt;tx:method name="*"/&gt;
  &lt;/tx:attributes&gt;
&lt;/tx:advice&gt;</pre><p>&#26377;&#26102;&#20505;&#20320;<span class="emphasis"><em>&#19981;</em></span>&#24819;&#22312;&#24322;&#24120;&#25243;&#20986;&#30340;&#26102;&#20505;&#22238;&#28378;&#20107;&#21153;&#65292;&#23601;&#21487;&#20197;&#20351;&#29992;&#8220;&#19981;&#22238;&#28378;&#35268;&#21017;&#8221;&#12290;
				&#22312;&#19979;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#21578;&#35785;Spring &#26694;&#26550;&#21363;&#20351;&#36935;&#21040;&#27809;&#26377;&#32463;&#36807;&#22788;&#29702;&#30340;<tt class="exceptionname">InstrumentNotFoundException</tt>&#24322;&#24120;&#65292;&#20063;&#19981;&#35201;&#22238;&#28378;&#20107;&#21153;&#12290;</p><pre class="programlisting">&lt;tx:advice id="txAdvice"&gt;
  &lt;tx:attributes&gt;
  &lt;tx:method name="updateStock" <i class="lineannotation"><span class="lineannotation"><span class="bold"><b>no-rollback-for="InstrumentNotFoundException"</b></span></span></i>/&gt;
  &lt;tx:method name="*"/&gt;
  &lt;/tx:attributes&gt;
&lt;/tx:advice&gt;</pre><p>&#24403;Spring&#26694;&#26550;&#25429;&#33719;&#21040;&#19968;&#20010;&#24322;&#24120;&#21518;&#20250;&#26816;&#26597;&#37197;&#32622;&#22238;&#28378;&#35268;&#21017;&#26469;&#20915;&#23450;&#26159;&#19981;&#26159;&#35201;&#22238;&#28378;&#20107;&#21153;&#65292;&#36825;&#26102;&#20505;&#20250;&#36981;&#24490;<span class="emphasis"><em>&#26368;&#21305;&#37197;</em></span>&#30340;&#35268;&#21017;&#12290;
			&#25152;&#20197;&#22312;&#19979;&#38754;&#36825;&#31181;&#37197;&#32622;&#20013;&#65292;&#38500;&#20102;<tt class="exceptionname">InstrumentNotFoundException</tt>&#36825;&#31181;&#31867;&#22411;&#30340;&#24322;&#24120;&#19981;&#20250;&#23548;&#33268;&#20107;&#21153;&#22238;&#28378;&#20197;&#22806;&#65292;&#20854;&#20182;&#20219;&#20309;&#31867;&#22411;&#30340;&#24322;&#24120;&#37117;&#20250;&#12290;</p><pre class="programlisting">&lt;tx:advice id="txAdvice"&gt;
  &lt;tx:attributes&gt;
  &lt;tx:method name="*" rollback-for="Throwable" no-rollback-for="InstrumentNotFoundException"/&gt;
  &lt;/tx:attributes&gt;
&lt;/tx:advice&gt;</pre><p>
            &#31532;&#20108;&#31181;&#26041;&#27861;&#26159;&#36890;&#36807; <span class="emphasis"><em>&#32534;&#31243;&#24335;</em></span> &#26041;&#24335;&#26469;&#25351;&#23450;&#22238;&#28378;&#20107;&#21153;&#12290;
            &#34429;&#28982;&#20889;&#27861;&#38750;&#24120;&#30340;&#31616;&#21333;&#65292;&#20294;&#26159;&#36825;&#20010;&#26041;&#27861;&#26159;&#39640;&#20405;&#20837;&#24615;&#30340;&#65292;&#24182;&#19988;&#20351;&#20320;&#30340;&#20195;&#30721;&#19982;Spring&#26694;&#26550;&#30340;&#20107;&#21153;&#26550;&#26500;&#39640;&#24230;&#32806;&#21512;&#12290;
            &#19979;&#38754;&#30340;&#20195;&#30721;&#29255;&#26029;&#37324;&#31034;&#33539;&#20102;Spring&#26694;&#26550;&#31649;&#29702;&#20107;&#21153;&#30340;&#32534;&#31243;&#24335;&#22238;&#28378;&#65306;
            </p><pre class="programlisting">public void resolvePosition() {
  try {
    <i class="lineannotation"><span class="lineannotation">// some business logic...</span></i>
  } catch (NoProductInStockException ex) {
    <i class="lineannotation"><span class="lineannotation">// trigger rollback programmatically</span></i>
    TransactionAspectSupport.currentTransactionStatus().setRollbackOnly();
  }
}</pre><p>
            &#24378;&#28872;&#25512;&#33616;&#20320;&#23613;&#21487;&#33021;&#22320;&#20351;&#29992;&#22768;&#26126;&#24335;&#20107;&#21153;&#22238;&#28378;&#26041;&#27861;&#12290;
            &#32534;&#31243;&#24335;&#26041;&#27861;&#30340;&#22238;&#28378;&#23545;&#20320;&#26469;&#35828;&#26159;&#21487;&#35265;&#65292;&#22914;&#26524;&#20320;&#38656;&#35201;&#23427;&#20320;&#23601;&#21487;&#20197;&#20351;&#29992;&#65292;&#20294;&#26159;&#20351;&#29992;&#23427;&#23601;&#30452;&#25509;&#36829;&#21453;&#20102;&#22312;&#20320;&#30340;&#24212;&#29992;&#20013;&#20351;&#29992;&#19968;&#20010;&#32431;&#22522;&#20110;POJO&#30340;&#27169;&#22411;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="transaction-declarative-diff-tx"></a>9.5.4.&nbsp;&#20026;&#19981;&#21516;&#30340;bean&#37197;&#32622;&#19981;&#21516;&#30340;&#20107;&#21153;&#35821;&#20041;</h3></div></div><div></div></div><p>&#29616;&#22312;&#35753;&#25105;&#20204;&#32771;&#34385;&#19968;&#19979;&#36825;&#26679;&#30340;&#22330;&#26223;&#65292;&#20551;&#35774;&#20320;&#26377;&#35768;&#22810;&#26381;&#21153;&#23545;&#35937;&#65292;&#20320;&#24819;&#20026;&#20182;&#20204;&#20998;&#21035;&#35774;&#32622; <span class="emphasis"><em>&#23436;&#20840;&#19981;&#21516;</em></span> &#30340;&#20107;&#21153;&#35821;&#20041;&#12290;
			&#22312;Spring&#20013;&#65292;&#20320;&#21487;&#20197;&#36890;&#36807;&#20998;&#21035;&#23450;&#20041;&#29305;&#23450;&#30340; <tt class="literal">&lt;aop:advisor/&gt;</tt> &#20803;&#32032;&#65292;
			&#35753;&#27599;&#20010;advisor&#37319;&#29992;&#19981;&#21516;&#30340; <tt class="literal">'pointcut'</tt> &#21644; <tt class="literal">'advice-ref'</tt> &#23646;&#24615;&#65292;&#26469;&#36798;&#21040;&#30446;&#30340;&#12290;</p><p>&#35753;&#25105;&#20204;&#20551;&#23450;&#20320;&#25152;&#26377;&#30340;&#26381;&#21153;&#23618;&#31867;&#23450;&#20041;&#22312;&#20197; <tt class="literal">'x.y.service'</tt> &#20026;&#26681;&#30340;&#21253;&#20869;&#12290;
			&#20026;&#20102;&#35753;service&#21253;&#65288;&#25110;&#23376;&#21253;&#65289;&#19979;&#25152;&#26377;&#21517;&#23383;&#20197; <tt class="literal">'Service'</tt> &#32467;&#23614;&#30340;&#31867;&#30340;&#23545;&#35937;&#25317;&#26377;&#40664;&#35748;&#30340;&#20107;&#21153;&#35821;&#20041;&#65292;&#20320;&#21487;&#20197;&#20570;&#22914;&#19979;&#30340;&#37197;&#32622;&#65306;</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:aop="http://www.springframework.org/schema/aop"
  xmlns:tx="http://www.springframework.org/schema/tx"
  xsi:schemaLocation="
  http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
  http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
  http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd"&gt;

  &lt;aop:config&gt;

    &lt;aop:pointcut id="serviceOperation"
          expression="<i class="lineannotation"><span class="lineannotation">execution(* x.y.service..*Service.*(..))</span></i>"/&gt;

    &lt;aop:advisor pointcut-ref="serviceOperation" advice-ref="txAdvice"/&gt;

  &lt;/aop:config&gt;

  <i class="lineannotation"><span class="lineannotation">&lt;!-- these two beans will be transactional... --&gt;</span></i>
  &lt;bean id="fooService" class="x.y.service.DefaultFooService"/&gt;
  &lt;bean id="barService" class="x.y.service.extras.SimpleBarService"/&gt;

  <i class="lineannotation"><span class="lineannotation">&lt;!-- ... and these two beans won't --&gt;</span></i>
  &lt;bean id="anotherService" class="org.xyz.SomeService"/&gt; <i class="lineannotation"><span class="lineannotation">&lt;!-- (not in the right package) --&gt;</span></i>
  &lt;bean id="barManager" class="x.y.service.SimpleBarManager"/&gt; <i class="lineannotation"><span class="lineannotation">&lt;!-- (doesn't end in 'Service') --&gt;</span></i>

  &lt;tx:advice id="txAdvice"&gt;
    &lt;tx:attributes&gt;
      &lt;tx:method name="get*" read-only="true"/&gt;
      &lt;tx:method name="*"/&gt;
    &lt;/tx:attributes&gt;
  &lt;/tx:advice&gt;

  <i class="lineannotation"><span class="lineannotation">&lt;!-- other transaction infrastructure beans such as a <tt class="interfacename">PlatformTransactionManager</tt> omitted... --&gt;</span></i>

&lt;/beans&gt;</pre><p>
        &#19979;&#38754;&#30340;&#37197;&#32622;&#31034;&#20363;&#28436;&#31034;&#20102;&#20004;&#20010;&#25317;&#26377;&#23436;&#20840;&#19981;&#21516;&#30340;&#20107;&#21153;&#37197;&#32622;&#30340;bean&#12290;
        </p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:aop="http://www.springframework.org/schema/aop"
  xmlns:tx="http://www.springframework.org/schema/tx"
  xsi:schemaLocation="
  http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
  http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
  http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd"&gt;

  &lt;aop:config&gt;

    &lt;aop:pointcut id="defaultServiceOperation"
          expression="<i class="lineannotation"><span class="lineannotation">execution(* x.y.service.*Service.*(..))</span></i>"/&gt;

    &lt;aop:pointcut id="noTxServiceOperation"
          expression="<i class="lineannotation"><span class="lineannotation">execution(* x.y.service.ddl.DefaultDdlManager.*(..))</span></i>"/&gt;

    &lt;aop:advisor pointcut-ref="defaultServiceOperation" advice-ref="defaultTxAdvice"/&gt;

    &lt;aop:advisor pointcut-ref="noTxServiceOperation" advice-ref="noTxAdvice"/&gt;

  &lt;/aop:config&gt;

  <i class="lineannotation"><span class="lineannotation">&lt;!-- this bean will be transactional (see the <tt class="literal">'defaultServiceOperation'</tt> pointcut) --&gt;</span></i>
  &lt;bean id="fooService" class="x.y.service.DefaultFooService"/&gt;

  <i class="lineannotation"><span class="lineannotation">&lt;!-- this bean will also be transactional, but with totally different transactional settings --&gt;</span></i>
  &lt;bean id="anotherFooService" class="x.y.service.ddl.DefaultDdlManager"/&gt;

  &lt;tx:advice id="defaultTxAdvice"&gt;
    &lt;tx:attributes&gt;
      &lt;tx:method name="get*" read-only="true"/&gt;
      &lt;tx:method name="*"/&gt;
    &lt;/tx:attributes&gt;
  &lt;/tx:advice&gt;

  &lt;tx:advice id="noTxAdvice"&gt;
    &lt;tx:attributes&gt;
      &lt;tx:method name="*" propagation="NEVER"/&gt;
    &lt;/tx:attributes&gt;
  &lt;/tx:advice&gt;

  <i class="lineannotation"><span class="lineannotation">&lt;!-- other transaction infrastructure beans such as a <tt class="interfacename">PlatformTransactionManager</tt> omitted... --&gt;</span></i>

&lt;/beans&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="transaction-declarative-txadvice-settings"></a>9.5.5.&nbsp;<tt class="literal">&lt;tx:advice/&gt;</tt> &#26377;&#20851;&#30340;&#35774;&#32622;</h3></div></div><div></div></div><p>
			&#36825;&#19968;&#33410;&#37324;&#23558;&#25551;&#36848;&#36890;&#36807; <tt class="literal">&lt;tx:advice/&gt;</tt> &#26631;&#31614;&#26469;&#25351;&#23450;&#19981;&#21516;&#30340;&#20107;&#21153;&#24615;&#35774;&#32622;&#12290;&#40664;&#35748;&#30340; <tt class="literal">&lt;tx:advice/&gt;</tt> &#35774;&#32622;&#22914;&#19979;&#65306;
            </p><p>
        </p><div class="itemizedlist"><ul type="disc"><li><p> <a href="#tx-propagation" title="9.5.7.&nbsp;&#20107;&#21153;&#20256;&#25773;">&#20107;&#21153;&#20256;&#25773;&#35774;&#32622;</a> &#26159; <tt class="literal">REQUIRED</tt></p></li><li><p>&#38548;&#31163;&#32423;&#21035;&#26159;<tt class="literal">DEFAULT</tt></p></li><li><p>&#20107;&#21153;&#26159; &#35835;/&#20889;</p></li><li><p>&#20107;&#21153;&#36229;&#26102;&#40664;&#35748;&#26159;&#20381;&#36182;&#20110;&#20107;&#21153;&#31995;&#32479;&#30340;&#65292;&#25110;&#32773;&#20107;&#21153;&#36229;&#26102;&#27809;&#26377;&#34987;&#25903;&#25345;&#12290;</p></li><li><p>&#20219;&#20309; <tt class="exceptionname">RuntimeException</tt> &#23558;&#35302;&#21457;&#20107;&#21153;&#22238;&#28378;&#65292;&#20294;&#26159;&#20219;&#20309; checked <tt class="exceptionname">Exception</tt> &#23558;&#19981;&#35302;&#21457;&#20107;&#21153;&#22238;&#28378;</p></li></ul></div><p>
      </p><p>
            &#36825;&#20123;&#40664;&#35748;&#30340;&#35774;&#32622;&#24403;&#28982;&#20063;&#26159;&#21487;&#20197;&#34987;&#25913;&#21464;&#30340;&#12290; 
            <tt class="literal">&lt;tx:advice/&gt;</tt> &#21644; <tt class="literal">&lt;tx:attributes/&gt;</tt> &#26631;&#31614;&#37324;&#30340; <tt class="literal">&lt;tx:method/&gt;</tt> &#21508;&#31181;&#23646;&#24615;&#35774;&#32622;&#24635;&#32467;&#22914;&#19979;&#65306;
            </p><p>
                </p><div class="table"><a name="d0e17347"></a><p class="title"><b>Table&nbsp;9.1.&nbsp;<tt class="literal">&lt;tx:method/&gt;</tt> &#26377;&#20851;&#30340;&#35774;&#32622;</b></p><table summary="&lt;tx:method/&gt; &#26377;&#20851;&#30340;&#35774;&#32622;" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>&#23646;&#24615;</th><th>&#26159;&#21542;&#38656;&#35201;&#65311;</th><th>&#40664;&#35748;&#20540;</th><th>&#25551;&#36848;</th></tr></thead><tbody><tr><td><tt class="literal">name</tt></td><td>&#26159;</td><td>&nbsp;</td><td><p>
                                    &#19982;&#20107;&#21153;&#23646;&#24615;&#20851;&#32852;&#30340;&#26041;&#27861;&#21517;&#12290;&#36890;&#37197;&#31526;&#65288;*&#65289;&#21487;&#20197;&#29992;&#26469;&#25351;&#23450;&#19968;&#25209;&#20851;&#32852;&#21040;&#30456;&#21516;&#30340;&#20107;&#21153;&#23646;&#24615;&#30340;&#26041;&#27861;&#12290;
                                    &#22914;&#65306;<tt class="literal">'get*'</tt>&#12289;<tt class="literal">'handle*'</tt>&#12289;<tt class="literal">'on*Event'</tt>&#31561;&#31561;&#12290;
                                    </p></td></tr><tr><td><tt class="literal">propagation</tt></td><td>&#19981;</td><td>REQUIRED</td><td>&#20107;&#21153;&#20256;&#25773;&#34892;&#20026;</td></tr><tr><td><tt class="literal">isolation</tt></td><td>&#19981;</td><td>DEFAULT</td><td>&#20107;&#21153;&#38548;&#31163;&#32423;&#21035;</td></tr><tr><td><tt class="literal">timeout</tt></td><td>&#19981;</td><td>-1</td><td>&#20107;&#21153;&#36229;&#26102;&#30340;&#26102;&#38388;&#65288;&#20197;&#31186;&#20026;&#21333;&#20301;&#65289;</td></tr><tr><td><tt class="literal">read-only</tt></td><td>&#19981;</td><td>false</td><td>&#20107;&#21153;&#26159;&#21542;&#21482;&#35835;&#65311;</td></tr><tr><td><tt class="literal">rollback-for</tt></td><td>&#19981;</td><td>&nbsp;</td><td><p>
                                    &#23558;&#34987;&#35302;&#21457;&#36827;&#34892;&#22238;&#28378;&#30340; <tt class="literal">Exception(s)</tt>&#65307;&#20197;&#36887;&#21495;&#20998;&#24320;&#12290;
	                                &#22914;&#65306;<tt class="literal">'com.foo.MyBusinessException,ServletException'</tt>
	                                </p></td></tr><tr><td><tt class="literal">no-rollback-for</tt></td><td>&#19981;</td><td>&nbsp;</td><td><p>
                                    <span class="emphasis"><em>&#19981;</em></span> &#34987;&#35302;&#21457;&#36827;&#34892;&#22238;&#28378;&#30340; <tt class="literal">Exception(s)</tt>&#65307;&#20197;&#36887;&#21495;&#20998;&#24320;&#12290;
	                                &#22914;&#65306;<tt class="literal">'com.foo.MyBusinessException,ServletException'</tt>
	                                </p></td></tr></tbody></table></div><p>
            </p><p>&#22312;&#20889;&#20195;&#30721;&#30340;&#26102;&#20505;&#65292;&#19981;&#21487;&#33021;&#23545;&#20107;&#21153;&#30340;&#21517;&#23383;&#26377;&#20010;&#24456;&#28165;&#26224;&#30340;&#35748;&#35782;&#65292;&#36825;&#37324;&#30340;&#21517;&#23383;&#26159;&#25351;&#20250;&#22312;&#20107;&#21153;&#30417;&#35270;&#22120;&#65288;&#27604;&#22914;WebLogic&#30340;&#20107;&#21153;&#31649;&#29702;&#22120;&#65289;&#25110;&#32773;&#26085;&#24535;&#36755;&#20986;&#20013;&#26174;&#31034;&#30340;&#21517;&#23383;&#65292;
			&#23545;&#20110;&#22768;&#26126;&#24335;&#30340;&#20107;&#21153;&#35774;&#32622;&#65292;&#20107;&#21153;&#21517;&#23383;&#24635;&#26159;&#21253;&#21547;&#23436;&#25972;&#21253;&#21517;&#30340;&#31867;&#21517;&#21152;&#19978;"."&#21644;&#26041;&#27861;&#21517;&#65292;&#27604;&#22914; <tt class="literal">'com.foo.BusinessService.handlePayment'</tt>.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="transaction-declarative-annotations"></a>9.5.6.&nbsp;&#20351;&#29992; <tt class="interfacename">@Transactional</tt></h3></div></div><div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>
					<tt class="interfacename">@Transactional</tt> &#27880;&#35299;&#21450;&#20854;&#25903;&#25345;&#31867;&#25152;&#25552;&#20379;&#30340;&#21151;&#33021;&#26368;&#20302;&#35201;&#27714;&#20351;&#29992;Java 5&#65288;Tiger&#65289;&#12290;
				</p></td></tr></tbody></table></div><p>
			&#38500;&#20102;&#22522;&#20110;XML&#25991;&#20214;&#30340;&#22768;&#26126;&#24335;&#20107;&#21153;&#37197;&#32622;&#22806;&#65292;&#20320;&#20063;&#21487;&#20197;&#37319;&#29992;&#22522;&#20110;&#27880;&#35299;&#24335;&#30340;&#20107;&#21153;&#37197;&#32622;&#26041;&#27861;&#12290;&#30452;&#25509;&#22312;Java&#28304;&#20195;&#30721;&#20013;&#22768;&#26126;&#20107;&#21153;&#35821;&#20041;&#30340;&#20570;&#27861;&#35753;&#20107;&#21153;&#22768;&#26126;&#21644;&#23558;&#21463;&#20854;&#24433;&#21709;&#30340;&#20195;&#30721;&#36317;&#31163;&#26356;&#36817;&#20102;&#65292;&#32780;&#19988;&#19968;&#33324;&#26469;&#35828;&#19981;&#20250;&#26377;&#19981;&#24688;&#24403;&#30340;&#32806;&#21512;&#30340;&#39118;&#38505;&#65292;&#22240;&#20026;&#65292;&#20351;&#29992;&#20107;&#21153;&#24615;&#30340;&#20195;&#30721;&#20960;&#20046;&#24635;&#26159;&#34987;&#37096;&#32626;&#22312;&#20107;&#21153;&#29615;&#22659;&#20013;&#12290;
			</p><p>&#19979;&#38754;&#30340;&#20363;&#23376;&#24456;&#22909;&#22320;&#28436;&#31034;&#20102; <tt class="interfacename">@Transactional</tt> &#27880;&#35299;&#30340;&#26131;&#29992;&#24615;&#65292;&#38543;&#21518;&#35299;&#37322;&#20854;&#20013;&#30340;&#32454;&#33410;&#12290;&#20808;&#30475;&#30475;&#20854;&#20013;&#30340;&#31867;&#23450;&#20041;&#65306;</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">// the service class that we want to make transactional</span></i>
<span class="bold"><b>@Transactional</b></span>
public class DefaultFooService implements FooService {

  Foo getFoo(String fooName);

  Foo getFoo(String fooName, String barName);

  void insertFoo(Foo foo);

  void updateFoo(Foo foo);
}</pre><p>&#24403;&#19978;&#36848;&#30340;POJO&#23450;&#20041;&#22312;Spring IoC&#23481;&#22120;&#37324;&#26102;&#65292;&#19978;&#36848;bean&#23454;&#20363;&#20165;&#20165;&#36890;&#36807;<span class="emphasis"><em>&#19968;</em></span> &#34892;xml&#37197;&#32622;&#23601;&#21487;&#20197;&#20351;&#23427;&#20855;&#26377;&#20107;&#21153;&#24615;&#30340;&#12290;&#22914;&#19979;&#65306;</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">&lt;!-- from the file <tt class="literal">'context.xml'</tt> --&gt;</span></i>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xmlns:aop="http://www.springframework.org/schema/aop"
     xmlns:tx="http://www.springframework.org/schema/tx"
     xsi:schemaLocation="
     http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
     http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
     http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd"&gt;
  
  <i class="lineannotation"><span class="lineannotation">&lt;!-- this is the service object that we want to make transactional --&gt;</span></i>
  &lt;bean id="fooService" class="x.y.service.DefaultFooService"/&gt;

  <i class="lineannotation"><span class="lineannotation">&lt;!-- enable the configuration of transactional behavior based on annotations --&gt;</span></i>
  <span class="bold"><b>&lt;tx:annotation-driven transaction-manager="txManager"/&gt;</b></span>

  <i class="lineannotation"><span class="lineannotation">&lt;!-- a <tt class="interfacename">PlatformTransactionManager</tt> is still required --&gt;</span></i>
  &lt;bean id="txManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager"&gt;
  <i class="lineannotation"><span class="lineannotation">&lt;!-- (this dependency is defined somewhere else) --&gt;</span></i>
  &lt;property name="dataSource" ref="dataSource"/&gt;
  &lt;/bean&gt;
  
  <i class="lineannotation"><span class="lineannotation">&lt;!-- other <tt class="literal">&lt;bean/&gt;</tt> definitions here --&gt;</span></i>

&lt;/beans&gt;</pre><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Tip" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Tip]" src="tip.png"></td><th align="left">Tip</th></tr><tr><td colspan="2" valign="top" align="left"><p>
                &#23454;&#38469;&#19978;&#65292;&#22914;&#26524;&#20320;&#29992;  <tt class="literal">'transactionManager'</tt> &#26469;&#23450;&#20041; <tt class="interfacename">PlatformTransactionManager</tt> bean&#30340;&#21517;&#23383;&#30340;&#35805;&#65292;&#20320;&#23601;&#21487;&#20197;&#24573;&#30053; <tt class="literal">&lt;tx:annotation-driven/&gt;</tt> &#26631;&#31614;&#37324;&#30340; <tt class="literal">'transaction-manager'</tt> &#23646;&#24615;&#12290;
                &#22914;&#26524; <tt class="interfacename">PlatformTransactionManager</tt> bean&#20320;&#35201;&#36890;&#36807;&#20854;&#23427;&#21517;&#31216;&#26469;&#27880;&#20837;&#30340;&#35805;&#65292;&#20320;&#24517;&#39035;&#29992; <tt class="literal">'transaction-manager'</tt> &#23646;&#24615;&#26469;&#25351;&#23450;&#23427;&#65292;&#22914;&#19978;&#25152;&#31034;&#12290;
                </p></td></tr></tbody></table></div><div class="sidebar"><p class="title"><b>&#26041;&#27861;&#30340;&#21487;&#35265;&#24230;&#21644; <tt class="interfacename">@Transactional</tt></b></p><p>
                &#22312;&#20351;&#29992;&#20195;&#29702;&#30340;&#26102;&#20505;&#65292;<tt class="interfacename">@Transactional</tt> &#27880;&#35299;&#24212;&#35813;&#21482;&#34987;&#24212;&#29992;&#21040; <span class="emphasis"><em>public</em></span> &#21487;&#35265;&#24230;&#30340;&#26041;&#27861;&#19978;&#12290;
                &#22914;&#26524;&#20320;&#22312; protected&#12289;private &#25110;&#32773; package-visible &#30340;&#26041;&#27861;&#19978;&#20351;&#29992; <tt class="interfacename">@Transactional</tt> &#27880;&#35299;&#65292;&#31995;&#32479;&#20063;&#19981;&#20250;&#25253;&#38169;&#65292;
                &#20294;&#26159;&#36825;&#20010;&#34987;&#27880;&#35299;&#30340;&#26041;&#27861;&#23558;&#19981;&#20250;&#25191;&#34892;&#24050;&#37197;&#32622;&#30340;&#20107;&#21153;&#35774;&#32622;&#12290;&#22914;&#26524;&#20320;&#38750;&#35201;&#27880;&#35299;&#38750;&#20844;&#20849;&#26041;&#27861;&#30340;&#35805;&#65292;&#35831;&#21442;&#32771;&#20351;&#29992;AspectJ (&#21442;&#35265;&#19979;&#38754;)&#12290;
                </p></div><p>
				<tt class="interfacename">@Transactional</tt> &#27880;&#35299;&#21487;&#20197;&#34987;&#24212;&#29992;&#20110;&#25509;&#21475;&#23450;&#20041;&#21644;&#25509;&#21475;&#26041;&#27861;&#12289;&#31867;&#23450;&#20041;&#21644;&#31867;&#30340; <span class="emphasis"><em>public</em></span> &#26041;&#27861;&#19978;&#12290;
				&#28982;&#32780;&#65292;&#35831;&#27880;&#24847;&#21482;&#26159;&#20351;&#29992; <tt class="interfacename">@Transactional</tt> &#27880;&#35299;&#24182;&#19981;&#20250;&#21551;&#29992;&#20107;&#21153;&#34892;&#20026;&#65292;
				&#23427;&#20165;&#20165; <span class="emphasis"><em>&#26159;&#19968;&#31181;&#20803;&#25968;&#25454;</em></span>&#65292;&#33021;&#22815;&#34987;&#21487;&#20197;&#35782;&#21035; <tt class="interfacename">@Transactional</tt> 
				&#27880;&#35299;&#21644;&#19978;&#36848;&#30340;&#37197;&#32622;&#36866;&#24403;&#30340;&#20855;&#26377;&#20107;&#21153;&#34892;&#20026;&#30340;beans&#25152;&#20351;&#29992;&#12290;&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#20854;&#23454;&#27491;&#26159; <tt class="literal">&lt;tx:annotation-driven/&gt;</tt>&#20803;&#32032;&#30340;&#20986;&#29616; 
				<span class="emphasis"><em>&#24320;&#21551;</em></span> &#20102;&#20107;&#21153;&#34892;&#20026;&#12290;</p><p>
            Spring&#22242;&#38431;&#30340;&#24314;&#35758;&#26159;&#20320;&#21482;&#22312;&#20855;&#20307;&#30340;&#31867;&#19978;&#20351;&#29992; <tt class="interfacename">@Transactional</tt> &#27880;&#35299;&#65292;
            &#32780;&#19981;&#35201;&#27880;&#35299;&#22312;&#25509;&#21475;&#19978;&#12290;&#20320;&#24403;&#28982;&#21487;&#20197;&#22312;&#25509;&#21475;&#65288;&#25110;&#25509;&#21475;&#26041;&#27861;&#65289;&#19978;&#20351;&#29992; <tt class="interfacename">@Transactional</tt> &#27880;&#35299;&#65292;
            &#20294;&#26159;&#36825;&#21482;&#26377;&#22312;&#20320;&#20351;&#29992;&#22522;&#20110;&#25509;&#21475;&#30340;&#20195;&#29702;&#26102;&#23427;&#25165;&#20250;&#29983;&#25928;&#12290;&#22240;&#20026;&#27880;&#35299;&#26159; <span class="emphasis"><em>&#19981;&#33021;&#32487;&#25215;</em></span> &#30340;&#65292;
            &#36825;&#23601;&#24847;&#21619;&#30528;&#22914;&#26524;&#20320;&#27491;&#22312;&#20351;&#29992;&#22522;&#20110;&#31867;&#30340;&#20195;&#29702;&#26102;&#65292;&#20107;&#21153;&#30340;&#35774;&#32622;&#23558;&#19981;&#33021;&#34987;&#22522;&#20110;&#31867;&#30340;&#20195;&#29702;&#25152;&#35782;&#21035;&#65292;&#32780;&#19988;&#23545;&#35937;&#20063;&#19981;&#20250;&#34987;&#20107;&#21153;&#20195;&#29702;&#25152;&#21253;&#35013;
            &#65288;&#36825;&#26159;&#24456;<span class="emphasis"><em>&#31967;&#31957;&#30340;</em></span>&#65289;&#12290;
			&#22240;&#27492;&#65292;&#35831;&#25509;&#21463;Spring&#22242;&#38431;&#30340;&#24314;&#35758;&#65292;&#22312;&#20855;&#20307;&#30340;&#31867;&#65288;&#21253;&#25324;&#35813;&#31867;&#30340;&#26041;&#27861;&#65289;&#19978;&#20351;&#29992; <tt class="interfacename">@Transactional</tt> &#27880;&#35299;&#12290;
            </p><p><span class="emphasis"><em>&#27880;&#24847;&#65306;&#22312;&#20195;&#29702;&#27169;&#24335;&#19979;&#65288;&#40664;&#35748;&#30340;&#24773;&#20917;&#65289;&#65292;&#21482;&#26377;&#20174;&#20195;&#29702;&#20256;&#36807;&#26469;&#30340;&#8216;&#22806;&#37096;&#8217;&#26041;&#27861;&#35843;&#29992;&#25165;&#20250;&#34987;&#25318;&#25130;&#12290;</em></span>
	  &#36825;&#23601;&#24847;&#21619;&#30528;&#8216;&#33258;&#25105;&#35843;&#29992;&#8217;&#26159;&#19981;&#20250;&#35302;&#21457;&#20107;&#21153;&#30340;&#65292;&#27604;&#22914;&#35828;&#65292;&#19968;&#20010;&#22312;&#30446;&#26631;&#23545;&#35937;&#20013;&#35843;&#29992;&#30446;&#26631;&#23545;&#35937;&#20854;&#20182;&#26041;&#27861;&#30340;&#26041;&#27861;&#26159;&#19981;&#20250;&#35302;&#21457;&#19968;&#20010;&#20107;&#21153;&#30340;&#65292;&#21363;&#20351;&#36825;&#20010;&#26041;&#27861;&#34987;&#26631;&#35760;&#20026; 
      <tt class="interfacename">@Transactional</tt>!</p><p>&#22914;&#26524;&#20320;&#26399;&#26395;&#8216;&#33258;&#25105;&#35843;&#29992;&#8217;&#34987;&#20107;&#21153;&#35206;&#30422;&#21040;&#65292;&#21487;&#20197;&#32771;&#34385;&#20351;&#29992;AspectJ &#27169;&#24335;&#65288;&#22914;&#19979;&#25152;&#31034;&#65289;&#12290;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#19968;&#24320;&#22987;&#23601;&#27809;&#26377;&#20219;&#20309;&#20195;&#29702;&#30340;&#23384;&#22312;&#65307;
      &#20026;&#20102;&#25226;<tt class="interfacename">@Transactional</tt>&#30340;&#26041;&#27861;&#21464;&#25104;&#36816;&#34892;&#26102;&#30340;&#34892;&#20026;&#65292;&#30446;&#26631;&#31867;&#20250;&#34987;&#8216;&#32534;&#32455;&#8217;&#36215;&#26469;&#65288;&#27604;&#22914;&#20462;&#25913;&#23427;&#30340;&#23383;&#33410;&#30721;&#65289;&#12290;
   </p><p>
        </p><div class="table"><a name="tx-annotation-driven-settings"></a><p class="title"><b>Table&nbsp;9.2.&nbsp;<tt class="literal">&lt;tx:annotation-driven/&gt;</tt> &#35774;&#32622;</b></p><table summary="&lt;tx:annotation-driven/&gt; &#35774;&#32622;" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>&#23646;&#24615;</th><th>&#40664;&#35748;&#20540;</th><th>&#25551;&#36848;</th></tr></thead><tbody><tr><td><tt class="literal">transaction-manager</tt></td><td>transactionManager</td><td><p>&#20351;&#29992;&#30340;&#20107;&#21153;&#31649;&#29702;&#22120;&#30340;&#21517;&#23383;&#12290;&#21482;&#26377;&#20687;&#22312;&#19978;&#38754;&#30340;&#20363;&#23376;&#37027;&#26679;&#65292;&#20107;&#21153;&#31649;&#29702;&#22120;&#19981;&#26159; <tt class="literal">transactionManager</tt>&#30340;&#24773;&#20917;&#19979;&#25165;&#38656;&#35201;&#12290;</p></td></tr><tr><td><tt class="literal">mode</tt></td><td>proxy</td><td><p>&#40664;&#35748;&#30340;&#27169;&#24335;&#8220;proxy&#8221;&#20250;&#29992;Spring&#30340;AOP&#26694;&#26550;&#26469;&#20195;&#29702;&#27880;&#35299;&#36807;&#30340;bean&#65288;&#23601;&#20687;&#22312;&#21069;&#38754;&#35752;&#35770;&#36807;&#30340;&#37027;&#26679;&#65292;
				&#19979;&#38754;&#20195;&#29702;&#30340;&#35821;&#20041;&#21482;&#23545;&#36890;&#36807;&#20195;&#29702;&#20256;&#36882;&#36807;&#26469;&#30340;&#26041;&#27861;&#35843;&#29992;&#36215;&#25928;&#65289;&#12290;
				&#21478;&#19968;&#31181;&#21487;&#34892;&#30340;&#27169;&#24335;"aspectj"&#20250;&#20351;&#29992;Spring&#30340;AspectJ&#20107;&#21153;&#20999;&#38754;&#26469;&#32534;&#32455;&#31867;&#65288;&#36890;&#36807;&#20462;&#25913;&#30446;&#26631;&#23545;&#35937;&#30340;&#23383;&#33410;&#30721;&#24212;&#29992;&#21040;&#20219;&#20309;&#26041;&#27861;&#35843;&#29992;&#19978;&#65289;&#12290;
                AspectJ&#32455;&#20837;&#38656;&#35201;&#22312;classpath&#20013;&#26377;spring-aspects.jar&#36825;&#20010;&#25991;&#20214;&#65292;&#24182;&#19988;&#21551;&#29992;&#35013;&#36733;&#26102;&#32455;&#20837; (&#25110;&#32773;&#32534;&#35793;&#26102;&#32455;&#20837;).
                (&#20851;&#20110;&#22914;&#20309;&#35774;&#32622;&#35013;&#36733;&#26102;&#32534;&#32455;&#30340;&#35814;&#24773;&#35831;&#21442;&#35265; <a href="#aop-aj-ltw-spring" title="6.8.4.5.&nbsp;Spring&#37197;&#32622;">Section&nbsp;6.8.4.5, &#8220;Spring&#37197;&#32622;&#8221;</a> )</p></td></tr><tr></tr><tr><td><tt class="literal">proxy-target-class</tt></td><td>false</td><td><p>&#21482;&#23545;&#20195;&#29702;&#27169;&#24335;&#26377;&#25928;&#12290;&#25511;&#21046;&#37027;&#20123;&#20026;&#20351;&#29992;<tt class="interfacename">@Transactional</tt>&#20511;&#21475;&#26469;&#27880;&#35299;&#31867;&#32780;&#21019;&#24314;&#30340;&#20107;&#21153;&#24615;&#20195;&#29702;&#12290; 
                &#22914;&#26524; "<tt class="literal">proxy-target-class</tt>" &#23646;&#24615;&#34987;&#35774;&#20026; 
                "<tt class="literal">true</tt>"&#65292; &#37027;&#20040;&#22522;&#20110;&#31867;&#30340;&#20195;&#29702;&#23601;&#20250;&#34987;&#21019;&#24314;&#12290;&#22914;&#26524; "<tt class="literal">proxy-target-class</tt>"&#23646;&#24615;&#34987;&#35774;&#20026;  "<tt class="literal">false</tt>"
                &#25110;&#32773;&#27809;&#35774;&#65292;&#37027;&#20040;&#22522;&#20110;&#20511;&#21475;&#30340;&#26631;&#20934;JDK&#20195;&#29702;&#23601;&#20250;&#34987;&#21019;&#24314; (&#20851;&#20110;&#19981;&#21516;&#20195;&#29702;&#31867;&#22411;&#30340;&#35299;&#37322;&#35831;&#21442;&#35265; <a href="#aop-proxying" title="6.6.&nbsp;&#20195;&#29702;&#26426;&#21046;">Section&nbsp;6.6, &#8220;&#20195;&#29702;&#26426;&#21046;&#8221;</a> )</p></td></tr><tr><td><tt class="literal">order</tt></td><td>Ordered.LOWEST_PRECEDENCE</td><td><p>&#23450;&#20041;&#20107;&#21153;&#36890;&#30693;&#30340;&#39034;&#24207;&#20250;&#20316;&#29992;&#21040;&#20351;&#29992;<tt class="interfacename">@Transactional</tt>&#27880;&#35299;&#30340;bean&#19978;&#12290;
                &#26356;&#22810;&#30340;&#20851;&#20110;AOP&#36890;&#30693;&#39034;&#24207;&#30340;&#23450;&#20041;&#21487;&#20197;&#22312;&#31456;&#33410;(&#21442;&#35265; <a href="#aop-ataspectj-advice-ordering" title="6.2.4.7.&nbsp;&#36890;&#30693;&#39034;&#24207;">Section&nbsp;6.2.4.7, &#8220;&#36890;&#30693;&#39034;&#24207;&#8221;</a>)&#12290;
                &#35831;&#27880;&#24847;&#22914;&#26524;&#19981;&#25351;&#23450;&#20219;&#20309;&#39034;&#24207;&#23558;&#20250;&#25226;&#20915;&#23450;&#26435;&#20132;&#32473;AOP&#23376;&#31995;&#32479;&#12290; </p></td></tr></tbody></table></div><p>
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#22312;<tt class="literal">&lt;tx:annotation-driven/&gt;</tt>&#20803;&#32032;&#19978;&#30340;"<tt class="literal">proxy-target-class</tt>" &#23646;&#24615; 
       &#25511;&#21046;&#20102;&#26377;&#20160;&#20040;&#31867;&#22411;&#30340;&#20107;&#21153;&#24615;&#20195;&#29702;&#20250;&#20026;&#20351;&#29992;<tt class="interfacename">@Transactional</tt> &#26469;&#27880;&#35299;&#30340;&#31867;&#21019;&#24314;&#20195;&#29702;&#12290;
	   &#22914;&#26524;"<tt class="literal">proxy-target-class</tt>" &#23646;&#24615;&#34987;&#35774;&#20026;"<tt class="literal">true</tt>"&#65292;&#37027;&#20040;&#22522;&#20110;&#31867;&#30340;&#20195;&#29702;&#23601;&#20250;&#34987;&#21019;&#24314;&#12290;
	   &#22914;&#26524;"<tt class="literal">proxy-target-class</tt>" &#23646;&#24615;&#34987;&#35774;&#20026;"<tt class="literal">false</tt>"
    &#25110;&#32773;&#27809;&#35774;&#65292;&#37027;&#20040;&#20250;&#21019;&#24314;&#22522;&#20110;&#25509;&#21475;&#30340;&#26631;&#20934;JDK&#20195;&#29702;&#12290;&#65288;&#20851;&#20110;&#19981;&#21516;&#20195;&#29702;&#31867;&#22411;&#30340;&#35299;&#37322;&#35831;&#21442;&#35265; <a href="#aop-proxying" title="6.6.&nbsp;&#20195;&#29702;&#26426;&#21046;">Section&nbsp;6.6, &#8220;&#20195;&#29702;&#26426;&#21046;&#8221;</a>)</p></td></tr></tbody></table></div><p>
            &#22312;&#22810;&#25968;&#24773;&#24418;&#19979;&#65292;&#26041;&#27861;&#30340;&#20107;&#21153;&#35774;&#32622;&#23558;&#34987;&#20248;&#20808;&#25191;&#34892;&#12290;&#22312;&#19979;&#21015;&#24773;&#20917;&#19979;&#65292;&#20363;&#22914;&#65306;
            <tt class="classname">DefaultFooService</tt> &#31867;&#22312;&#31867;&#30340;&#32423;&#21035;&#19978;&#34987;&#27880;&#35299;&#20026;&#21482;&#35835;&#20107;&#21153;&#65292;&#20294;&#26159;&#65292;&#36825;&#20010;&#31867;&#20013;&#30340; <tt class="methodname">updateFoo(Foo)</tt> &#26041;&#27861;&#30340; <tt class="interfacename">@Transactional</tt> &#27880;&#35299;&#30340;&#20107;&#21153;&#35774;&#32622;&#23558;&#20248;&#20808;&#20110;&#31867;&#32423;&#21035;&#27880;&#35299;&#30340;&#20107;&#21153;&#35774;&#32622;&#12290;
      </p><pre class="programlisting">@Transactional(readOnly = true)
public class DefaultFooService implements FooService {

  public Foo getFoo(String fooName) {
    <i class="lineannotation"><span class="lineannotation">// do something</span></i>
  }

    <i class="lineannotation"><span class="lineannotation">// <span class="bold"><b>these</b></span> settings have precedence for this method</span></i>
    @Transactional(readOnly = false, propagation = Propagation.REQUIRES_NEW)
    public void updateFoo(Foo foo) {
        <i class="lineannotation"><span class="lineannotation">// do something
        </span></i>
    }
}</pre><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="transaction-declarative-attransactional-settings"></a>9.5.6.1.&nbsp;<tt class="interfacename">@Transactional</tt> &#26377;&#20851;&#30340;&#35774;&#32622;</h4></div></div><div></div></div><p>
                <tt class="interfacename">@Transactional</tt> &#27880;&#35299;&#26159;&#29992;&#26469;&#25351;&#23450;&#25509;&#21475;&#12289;&#31867;&#25110;&#26041;&#27861;&#24517;&#39035;&#25317;&#26377;&#20107;&#21153;&#35821;&#20041;&#30340;&#20803;&#25968;&#25454;&#12290;
                &#22914;&#65306;&#8220;<span class="quote"><span class="emphasis"><em>&#24403;&#19968;&#20010;&#26041;&#27861;&#24320;&#22987;&#35843;&#29992;&#26102;&#23601;&#24320;&#21551;&#19968;&#20010;&#26032;&#30340;&#21482;&#35835;&#20107;&#21153;&#65292;&#24182;&#20572;&#27490;&#25481;&#20219;&#20309;&#29616;&#23384;&#30340;&#20107;&#21153;</em></span></span>&#8221;&#12290;
                &#40664;&#35748;&#30340; <tt class="interfacename">@Transactional</tt> &#35774;&#32622;&#22914;&#19979;&#65306;
                </p><div class="itemizedlist"><ul type="disc"><li><p>&#20107;&#21153;&#20256;&#25773;&#35774;&#32622;&#26159; <tt class="literal">PROPAGATION_REQUIRED</tt></p></li><li><p>&#20107;&#21153;&#38548;&#31163;&#32423;&#21035;&#26159; <tt class="literal">ISOLATION_DEFAULT</tt></p></li><li><p>&#20107;&#21153;&#26159; &#35835;/&#20889;</p></li><li><p>&#20107;&#21153;&#36229;&#26102;&#40664;&#35748;&#26159;&#20381;&#36182;&#20110;&#20107;&#21153;&#31995;&#32479;&#30340;&#65292;&#25110;&#32773;&#20107;&#21153;&#36229;&#26102;&#27809;&#26377;&#34987;&#25903;&#25345;&#12290;</p></li><li><p>&#20219;&#20309; <tt class="exceptionname">RuntimeException</tt> &#23558;&#35302;&#21457;&#20107;&#21153;&#22238;&#28378;&#65292;&#20294;&#26159;&#20219;&#20309; checked <tt class="exceptionname">Exception</tt> &#23558;&#19981;&#35302;&#21457;&#20107;&#21153;&#22238;&#28378;</p></li></ul></div><p>
	            &#36825;&#20123;&#40664;&#35748;&#30340;&#35774;&#32622;&#24403;&#28982;&#20063;&#26159;&#21487;&#20197;&#34987;&#25913;&#21464;&#30340;&#12290; 
	            <tt class="interfacename">@Transactional</tt> &#27880;&#35299;&#30340;&#21508;&#31181;&#23646;&#24615;&#35774;&#32622;&#24635;&#32467;&#22914;&#19979;&#65306;
				</p><p>
          </p><div class="table"><a name="tx-attransactional-properties"></a><p class="title"><b>Table&nbsp;9.3.&nbsp;<tt class="interfacename">@Transactional</tt> &#27880;&#35299;&#30340;&#23646;&#24615;</b></p><table summary="@Transactional &#27880;&#35299;&#30340;&#23646;&#24615;" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>&#23646;&#24615;</th><th>&#31867;&#22411;</th><th>&#25551;&#36848;</th></tr></thead><tbody><tr><td><tt class="literal"><a href="#tx-propagation" title="9.5.7.&nbsp;&#20107;&#21153;&#20256;&#25773;">propagation</a></tt></td><td>&#26522;&#20030;&#22411;&#65306;<tt class="classname">Propagation</tt></td><td>&#21487;&#36873;&#30340;&#20256;&#25773;&#24615;&#35774;&#32622;</td></tr><tr><td><tt class="literal">isolation</tt></td><td>&#26522;&#20030;&#22411;&#65306;<tt class="classname">Isolation</tt></td><td>&#21487;&#36873;&#30340;&#38548;&#31163;&#24615;&#32423;&#21035;&#65288;&#40664;&#35748;&#20540;&#65306;<tt class="literal">ISOLATION_DEFAULT</tt>&#65289;</td></tr><tr><td><tt class="literal">readOnly</tt></td><td>&#24067;&#23572;&#22411;</td><td>&#35835;&#20889;&#22411;&#20107;&#21153; vs. &#21482;&#35835;&#22411;&#20107;&#21153;</td></tr><tr><td><tt class="literal">timeout</tt></td><td>int&#22411;&#65288;&#20197;&#31186;&#20026;&#21333;&#20301;&#65289;</td><td>&#20107;&#21153;&#36229;&#26102;</td></tr><tr><td><tt class="literal">rollbackFor</tt></td><td>&#19968;&#32452; <tt class="classname">Class</tt> &#31867;&#30340;&#23454;&#20363;&#65292;&#24517;&#39035;&#26159;<tt class="classname">Throwable</tt> &#30340;&#23376;&#31867;</td><td>&#19968;&#32452;&#24322;&#24120;&#31867;&#65292;&#36935;&#21040;&#26102; <span class="bold"><b>&#24517;&#39035;</b></span> &#36827;&#34892;&#22238;&#28378;&#12290;&#40664;&#35748;&#24773;&#20917;&#19979;checked exceptions&#19981;&#36827;&#34892;&#22238;&#28378;&#65292;&#20165;unchecked  exceptions&#65288;&#21363;<tt class="classname">RuntimeException</tt>&#30340;&#23376;&#31867;&#65289;&#25165;&#36827;&#34892;&#20107;&#21153;&#22238;&#28378;&#12290;</td></tr><tr><td><tt class="literal">rollbackForClassname</tt></td><td>&#19968;&#32452; <tt class="classname">Class</tt> &#31867;&#30340;&#21517;&#23383;&#65292;&#24517;&#39035;&#26159;<tt class="classname">Throwable</tt>&#30340;&#23376;&#31867;</td><td>&#19968;&#32452;&#24322;&#24120;&#31867;&#21517;&#65292;&#36935;&#21040;&#26102; <span class="bold"><b>&#24517;&#39035;</b></span> &#36827;&#34892;&#22238;&#28378;</td></tr><tr><td><tt class="literal">noRollbackFor</tt></td><td>&#19968;&#32452; <tt class="classname">Class</tt> &#31867;&#30340;&#23454;&#20363;&#65292;&#24517;&#39035;&#26159;<tt class="classname">Throwable</tt> &#30340;&#23376;&#31867;</td><td>&#19968;&#32452;&#24322;&#24120;&#31867;&#65292;&#36935;&#21040;&#26102; <span class="bold"><b>&#24517;&#39035;&#19981;</b></span> &#22238;&#28378;&#12290;</td></tr><tr><td><tt class="literal">noRollbackForClassname</tt></td><td>&#19968;&#32452; <tt class="classname">Class</tt> &#31867;&#30340;&#21517;&#23383;&#65292;&#24517;&#39035;&#26159;<tt class="classname">Throwable</tt> &#30340;&#23376;&#31867;</td><td>&#19968;&#32452;&#24322;&#24120;&#31867;&#65292;&#36935;&#21040;&#26102; <span class="bold"><b>&#24517;&#39035;&#19981;</b></span> &#22238;&#28378;</td></tr></tbody></table></div><p>
        </p><p>&#22312;&#20889;&#20195;&#30721;&#30340;&#26102;&#20505;&#65292;&#19981;&#21487;&#33021;&#23545;&#20107;&#21153;&#30340;&#21517;&#23383;&#26377;&#20010;&#24456;&#28165;&#26224;&#30340;&#35748;&#35782;&#65292;&#36825;&#37324;&#30340;&#21517;&#23383;&#26159;&#25351;&#20250;&#22312;&#20107;&#21153;&#30417;&#35270;&#22120;&#65288;&#27604;&#22914;WebLogic&#30340;&#20107;&#21153;&#31649;&#29702;&#22120;&#65289;&#25110;&#32773;&#26085;&#24535;&#36755;&#20986;&#20013;&#26174;&#31034;&#30340;&#21517;&#23383;&#65292;
			&#23545;&#20110;&#22768;&#26126;&#24335;&#30340;&#20107;&#21153;&#35774;&#32622;&#65292;&#20107;&#21153;&#21517;&#23383;&#24635;&#26159;&#20840;&#38480;&#23450;&#21517;+"."+&#20107;&#21153;&#36890;&#30693;&#30340;&#31867;&#30340;&#26041;&#27861;&#21517;&#12290;&#27604;&#22914;<tt class="classname">BusinessService</tt>&#31867;&#30340;<tt class="methodname">handlePayment(..)</tt>&#26041;&#27861;&#21551;&#21160;&#20102;&#19968;&#20010;&#20107;&#21153;&#65292;&#20107;&#21153;&#30340;&#21517;&#31216;&#26159;&#65306;</p><pre class="programlisting">com.foo.BusinessService.handlePayment</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tx-propagation"></a>9.5.7.&nbsp;&#20107;&#21153;&#20256;&#25773;</h3></div></div><div></div></div><p><span class="emphasis"><em>&#35831;&#27880;&#24847;&#36825;&#37096;&#20998;&#30340;Spring&#21442;&#32771;&#25991;&#26723;<span class="emphasis"><em>&#19981;&#26159;</em></span> &#20107;&#21153;&#20256;&#25773;&#30340;&#20171;&#32461;&#65292;
			&#32780;&#26159;&#35814;&#32454;&#20171;&#32461;&#20102;&#22312;Spring&#20013;&#19982;&#20107;&#21153;&#20256;&#25773;&#30456;&#20851;&#30340;&#19968;&#20123;&#35821;&#20041;&#12290; </em></span></p><p>&#22312;&#30001;Spring&#31649;&#29702;&#30340;&#20107;&#21153;&#20013;&#65292;&#35831;&#35760;&#20303; <span class="emphasis"><em>&#29289;&#29702;</em></span> &#21644; <span class="emphasis"><em>&#36923;&#36753;</em></span> &#20107;&#21153;&#23384;&#22312;&#30340;&#24046;&#24322;&#65292;
			&#20197;&#21450;&#20256;&#25773;&#35774;&#32622;&#26159;&#22914;&#20309;&#24433;&#21709;&#21040;&#36825;&#20123;&#24046;&#24322;&#30340;&#12290; </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="tx-propagation-required"></a>9.5.7.1.&nbsp;required</h4></div></div><div></div></div><p>
					</p><div class="mediaobject" align="center"><img src="tx_prop_required.png" align="middle"><div class="caption"><p>PROPAGATION_REQUIRED</p></div></div><p>
				</p><p>&#24403;&#20107;&#21153;&#20256;&#25773;&#34987;&#35774;&#32622;<tt class="literal">PROPAGATION_REQUIRED</tt>&#30340;&#26102;&#20505;&#65292;
				&#20250;&#20026;&#27599;&#19968;&#20010;&#34987;&#24212;&#29992;&#21040;&#30340;&#26041;&#27861;&#21019;&#24314;&#19968;&#20010;<span class="emphasis"><em>&#36923;&#36753;</em></span>&#20107;&#21153;&#20316;&#29992;&#22495;&#12290;
				&#27599;&#19968;&#20010;&#36825;&#26679;&#30340;&#36923;&#36753;&#20107;&#21153;&#20316;&#29992;&#22495;&#37117;&#21487;&#20197;&#33258;&#20027;&#22320;&#20915;&#23450;rollback-only&#29366;&#24577;&#65292;&#24403;&#36825;&#26679;&#30340;&#36923;&#36753;&#20107;&#21153;&#20316;&#29992;&#22495;&#34987;&#22806;&#37096;&#30340;&#19968;&#20010;&#36923;&#36753;&#20107;&#21153;&#20316;&#29992;&#22495;&#25152;&#21253;&#21547;&#30340;&#26102;&#20505;&#65292;
				&#20182;&#20204;&#22312;&#36923;&#36753;&#19978;&#26159;&#29420;&#31435;&#30340;&#12290;&#24403;&#28982;&#20102;&#65292;&#23545;&#20110;&#27491;&#24120;&#30340; <tt class="literal">PROPAGATION_REQUIRED</tt>&#35774;&#32622;&#26469;&#35828;&#65292;&#20182;&#20250;&#34987;&#26144;&#23556;&#21040;&#30456;&#21516;&#30340;&#29289;&#29702;&#20107;&#21153;&#19978;&#12290;
				&#25152;&#20197;&#19968;&#20010;&#26631;&#35760;&#26377;rollback-only&#30340;&#20869;&#37096;&#36923;&#36753;&#20107;&#21153;&#20316;&#29992;&#22495;&#30340;&#30830;&#20250;&#24433;&#21709;&#21040;&#22806;&#37096;&#30340;&#36923;&#36753;&#20107;&#21153;&#20316;&#29992;&#22495;&#65288;&#23601;&#20687;&#20320;&#25152;&#39044;&#26009;&#30340;&#37027;&#26679;&#65289;&#12290; </p><p>&#28982;&#32780;&#65292;&#24403;&#20869;&#37096;&#30340;&#20107;&#21153;&#20316;&#29992;&#22495;&#26631;&#35760;&#20026;rollback-only&#65292;&#21516;&#26102;&#22806;&#37096;&#30340;&#20107;&#21153;&#20316;&#29992;&#22495;&#24182;&#27809;&#26377;&#20915;&#23450;&#35201;&#22238;&#28378;&#65292;
				&#36825;&#26679;&#30340;&#22238;&#28378;&#26159;&#24847;&#26009;&#19981;&#21040;&#30340;&#65288;&#38745;&#24708;&#24708;&#22320;&#30001;&#20869;&#37096;&#20107;&#21153;&#20316;&#29992;&#22495;&#35302;&#21457;&#30340;&#65289;&#65306;
				&#19968;&#20010;&#23545;&#24212;&#30340;<tt class="classname">UnexpectedRollbackException</tt> &#24322;&#24120;&#20250;&#22312;&#36825;&#20010;&#26102;&#20505;&#34987;&#25243;&#20986;&#12290;&#36825;&#26159; <span class="emphasis"><em>&#21487;&#20197;&#39044;&#26009;&#21040;&#30340;&#34892;&#20026;</em></span>&#65292;
				&#21482;&#26377;&#36825;&#26679;&#65292;&#36825;&#20010;&#20107;&#21153;&#30340;&#35843;&#29992;&#32773;&#25165;&#19981;&#20250;&#34987;&#35823;&#23548;&#65292;&#22312;&#20107;&#21153;&#27809;&#26377;&#25552;&#20132;&#30340;&#24773;&#20917;&#19979;&#35823;&#20197;&#20026;&#20107;&#21153;&#24050;&#32463;&#25552;&#20132;&#12290;&#25152;&#20197;&#22914;&#26524;&#20869;&#37096;&#30340;&#20107;&#21153;&#65288;&#22806;&#37096;&#30340;&#35843;&#29992;&#32773;&#24182;&#19981;&#30693;&#24773;&#65289;&#26631;&#35760;&#35813;&#20107;&#21153;&#20026;
				rollback-only&#65292;&#32780;&#22806;&#37096;&#30340;&#35843;&#29992;&#32773;&#21364;&#20381;&#26087;&#22312;&#19981;&#30693;&#24773;&#30340;&#24773;&#20917;&#19979;&#25552;&#20132;&#21518;&#65292;&#23427;&#38656;&#35201;&#25910;&#21040;&#19968;&#20010; <tt class="classname">UnexpectedRollbackException</tt>
				&#24322;&#24120;&#26469;&#28165;&#26970;&#30340;&#20102;&#35299;&#20107;&#21153;&#24182;&#27809;&#26377;&#25552;&#20132;&#32780;&#26159;&#21457;&#29983;&#20102;&#22238;&#28378;&#12290;
				 </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="tx-propagation-requires_new"></a>9.5.7.2.&nbsp;RequiresNew</h4></div></div><div></div></div><p>
					</p><div class="mediaobject" align="center"><img src="tx_prop_requires_new.png" align="middle"><div class="caption"><p>PROPAGATION_REQUIRES_NEW</p></div></div><p>
				</p><p><tt class="literal">PROPAGATION_REQUIRES_NEW</tt>&#65292;&#19982;&#20043;&#21069;&#30456;&#21453;&#65292;&#20026;&#27599;&#19968;&#20010;&#30456;&#20851;&#30340;&#20107;&#21153;&#20316;&#29992;&#22495;&#20351;&#29992;&#20102;&#19968;&#20010;<span class="emphasis"><em>&#23436;&#20840;</em></span>
				&#29420;&#31435;&#30340;&#20107;&#21153;&#12290;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#29289;&#29702;&#20107;&#21153;&#20063;&#23558;&#26159;&#19981;&#21516;&#30340;&#65292;&#22240;&#27492;&#22806;&#37096;&#20107;&#21153;&#21487;&#20197;&#19981;&#21463;&#20869;&#37096;&#20107;&#21153;&#22238;&#28378;&#29366;&#24577;&#30340;&#24433;&#21709;&#29420;&#31435;&#25552;&#20132;&#25110;&#32773;&#22238;&#28378;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="tx-propagation-nested"></a>9.5.7.3.&nbsp;Nested</h4></div></div><div></div></div><p><tt class="literal">PROPAGATION_NESTED</tt> &#26159;&#19968;&#20010;&#23436;&#20840;&#19981;&#21516;&#30340;&#35774;&#32622;&#12290;&#23427;&#20351;&#29992;&#20102;&#19968;&#20010;<span class="emphasis"><em>&#21333;&#29420;</em></span>&#30340;&#29289;&#29702;&#20107;&#21153;&#65292;
				&#36825;&#20010;&#20107;&#21153;&#25317;&#26377;&#22810;&#20010;&#21487;&#20197;&#22238;&#28378;&#30340;&#20445;&#23384;&#28857;&#12290;&#36825;&#26679;&#37096;&#20998;&#22238;&#28378;&#20801;&#35768;&#20869;&#37096;&#20107;&#21153;<span class="emphasis"><em>&#22312;&#23427;&#30340;&#20316;&#29992;&#22495;&#20869;</em></span>&#35302;&#21457;&#19968;&#20010;&#22238;&#28378;&#65292;
				&#24182;&#19988;&#22806;&#37096;&#20107;&#21153;&#33021;&#22815;&#19981;&#21463;&#24433;&#21709;&#30340;&#32487;&#32493;&#12290; &#36825;&#36890;&#24120;&#26159;&#23545;&#24212;&#20110;JDBC&#30340;&#20445;&#23384;&#28857;&#65292;&#25152;&#20197;&#21482;&#20250;&#22312; JDBC &#36164;&#28304;&#20107;&#21153;&#31649;&#29702;&#19978;&#36215;&#25928;
				(&#20855;&#20307;&#35831;&#21442;&#35265; Spring&#30340;<tt class="classname">DataSourceTransactionManager</tt>).</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="transaction-declarative-applying-more-than-just-tx-advice"></a>9.5.8.&nbsp;&#36890;&#30693;&#20107;&#21153;&#25805;&#20316;</h3></div></div><div></div></div><p>&#32771;&#34385;&#19968;&#19979;&#36825;&#26679;&#30340;&#24773;&#20917;&#65292;&#22914;&#26524;&#20320;&#24076;&#26395; <span class="emphasis"><em>&#21516;&#26102;</em></span>&#25191;&#34892;&#20107;&#21153;&#24615;&#36890;&#30693;&#65288;advice&#65289;<span class="emphasis"><em>&#21644;</em></span>&#19968;&#20123;&#22522;&#26412;&#30340;&#21078;&#26512;&#65288;profiling&#65289;&#36890;&#30693;&#12290;
			&#37027;&#20040;&#65292;&#22312;<tt class="literal">&lt;tx:annotation-driven/&gt;</tt>&#29615;&#22659;&#20013;&#35813;&#24590;&#20040;&#20570;&#65311;</p><p>&#25105;&#20204;&#35843;&#29992; <tt class="methodname">updateFoo(Foo)</tt> &#26041;&#27861;&#26102;&#24076;&#26395;&#36825;&#26679;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#37197;&#32622;&#30340;&#21078;&#26512;&#20999;&#38754;&#65288;profiling aspect&#65289;&#24320;&#22987;&#21551;&#21160;&#65292;</p></li><li><p>&#28982;&#21518;&#36827;&#20837;&#20107;&#21153;&#36890;&#30693;&#65288;&#26681;&#25454;&#37197;&#32622;&#21019;&#24314;&#19968;&#20010;&#26032;&#20107;&#21153;&#25110;&#21152;&#20837;&#19968;&#20010;&#24050;&#32463;&#23384;&#22312;&#30340;&#20107;&#21153;&#65289;&#65292;</p></li><li><p>&#28982;&#21518;&#25191;&#34892;&#21407;&#22987;&#23545;&#35937;&#30340;&#26041;&#27861;&#65292;</p></li><li><p>&#28982;&#21518;&#20107;&#21153;&#25552;&#20132;&#65288;&#25105;&#20204;&#20551;&#23450;&#36825;&#37324;&#19968;&#20999;&#27491;&#24120;&#65289;&#65292;</p></li><li><p>&#26368;&#21518;&#21078;&#26512;&#20999;&#38754;&#25253;&#21578;&#25972;&#20010;&#20107;&#21153;&#26041;&#27861;&#25191;&#34892;&#36807;&#31243;&#33457;&#20102;&#22810;&#23569;&#26102;&#38388;&#12290;</p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#36825;&#31456;&#19981;&#20250;&#19987;&#38376;&#35762;&#36848;AOP&#30340;&#25152;&#26377;&#32454;&#33410;&#65288;&#38500;&#20102;&#24212;&#29992;&#20110;&#20107;&#21153;&#26041;&#38754;&#30340;&#20043;&#22806;&#65289;&#12290;
				&#35831;&#21442;&#32771; <a href="#aop" title="Chapter&nbsp;6.&nbsp;&#20351;&#29992;Spring&#36827;&#34892;&#38754;&#21521;&#20999;&#38754;&#32534;&#31243;&#65288;AOP&#65289;">Chapter&nbsp;6, <i>&#20351;&#29992;Spring&#36827;&#34892;&#38754;&#21521;&#20999;&#38754;&#32534;&#31243;&#65288;AOP&#65289;</i></a> &#31456;&#33410;&#20197;&#33719;&#24471;&#23545;&#21508;&#31181;AOP&#37197;&#32622;&#21450;&#20854;&#19968;&#33324;&#27010;&#24565;&#30340;&#35814;&#32454;&#21465;&#36848;&#12290;
                </p></td></tr></tbody></table></div><p>&#36825;&#37324;&#26377;&#19968;&#20221;&#31616;&#21333;&#30340;&#21078;&#26512;&#20999;&#38754;&#65288;profiling aspect&#65289;&#30340;&#20195;&#30721;&#12290;<span class="emphasis"><em>
			&#65288;&#35831;&#27880;&#24847;&#65292;&#36890;&#30693;&#30340;&#39034;&#24207;&#26159;&#30001; <tt class="interfacename">Ordered</tt> &#25509;&#21475;&#26469;&#25511;&#21046;&#30340;&#12290;
			&#35201;&#24819;&#20102;&#35299;&#26356;&#22810;&#32454;&#33410;&#65292;&#35831;&#21442;&#32771; <a href="#aop-ataspectj-advice-ordering" title="6.2.4.7.&nbsp;&#36890;&#30693;&#39034;&#24207;">Section&nbsp;6.2.4.7, &#8220;&#36890;&#30693;&#39034;&#24207;&#8221;</a> &#33410;&#12290;&#65289;</em></span>
			</p><pre class="programlisting">package x.y;

import org.aspectj.lang.ProceedingJoinPoint;
import org.springframework.util.StopWatch;
import org.springframework.core.Ordered;

public class SimpleProfiler implements Ordered {

  private int order;

  <i class="lineannotation"><span class="lineannotation">// allows us to control the ordering of advice</span></i>
  public int getOrder() {
    return this.order;
  }

  public void setOrder(int order) {
    this.order = order;
  }

  <i class="lineannotation"><span class="lineannotation">// this method <span class="emphasis"><em>is</em></span> the around advice</span></i>
  public Object profile(ProceedingJoinPoint call) throws Throwable {
    Object returnValue;
    StopWatch clock = new StopWatch(getClass().getName());
    try {
      clock.start(call.toShortString());
      returnValue = call.proceed();
    } finally {
      clock.stop();
      System.out.println(clock.prettyPrint());
    }
    return returnValue;
  }
}
</pre><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xmlns:aop="http://www.springframework.org/schema/aop"
     xmlns:tx="http://www.springframework.org/schema/tx"
     xsi:schemaLocation="
   http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
   http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
   http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd"&gt;

  &lt;bean id="fooService" class="x.y.service.DefaultFooService"/&gt;

  <i class="lineannotation"><span class="lineannotation">&lt;!-- this is the aspect --&gt;</span></i>
  &lt;bean id="profiler" class="x.y.SimpleProfiler"&gt;
    <i class="lineannotation"><span class="lineannotation">&lt;!-- execute before the transactional advice (hence the lower order number) --&gt;</span></i>
    &lt;property name="order" <span class="bold"><b>value="1"</b></span>/&gt;
  &lt;/bean&gt;

  &lt;tx:annotation-driven transaction-manager="txManager" <span class="bold"><b>order="200"</b></span>/&gt;

  &lt;aop:config&gt;
    <i class="lineannotation"><span class="lineannotation">&lt;!-- this advice will execute <span class="bold"><b>around</b></span> the transactional advice --&gt;</span></i>
    &lt;aop:aspect id="profilingAspect" ref="profiler"&gt;
      &lt;aop:pointcut id="serviceMethodWithReturnValue"
              expression="execution(!void x.y..*Service.*(..))"/&gt;
      &lt;aop:around method="profile" pointcut-ref="serviceMethodWithReturnValue"/&gt;
    &lt;/aop:aspect&gt;
  &lt;/aop:config&gt;

  &lt;bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close"&gt;
    &lt;property name="driverClassName" value="oracle.jdbc.driver.OracleDriver"/&gt;
    &lt;property name="url" value="jdbc:oracle:thin:@rj-t42:1521:elvis"/&gt;
    &lt;property name="username" value="scott"/&gt;
    &lt;property name="password" value="tiger"/&gt;
  &lt;/bean&gt;

  &lt;bean id="txManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager"&gt;
    &lt;property name="dataSource" ref="dataSource"/&gt;
  &lt;/bean&gt;

&lt;/beans&gt;</pre><p>
            &#19978;&#38754;&#37197;&#32622;&#30340;&#32467;&#26524;&#23558;&#33719;&#24471;&#21040;&#19968;&#20010;&#25317;&#26377;&#21078;&#26512;&#21644;&#20107;&#21153;&#26041;&#38754;&#30340; <span class="emphasis"><em>&#25353;&#37027;&#26679;&#30340;&#39034;&#24207;</em></span> &#24212;&#29992;&#20110;&#23427;&#19978;&#38754;&#30340; <tt class="literal">'fooService'</tt> bean&#12290;
            &#35768;&#22810;&#38468;&#21152;&#30340;&#26041;&#38754;&#30340;&#37197;&#32622;&#23558;&#19968;&#36215;&#36798;&#21040;&#36825;&#26679;&#30340;&#25928;&#26524;&#12290;
            </p><p>
            &#26368;&#21518;&#65292;&#19979;&#38754;&#30340;&#19968;&#20123;&#31034;&#20363;&#28436;&#31034;&#20102;&#20351;&#29992;&#32431;XML&#22768;&#26126;&#30340;&#26041;&#27861;&#26469;&#36798;&#21040;&#19978;&#38754;&#19968;&#26679;&#30340;&#35774;&#32622;&#25928;&#26524;&#12290;
            </p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xmlns:aop="http://www.springframework.org/schema/aop"
     xmlns:tx="http://www.springframework.org/schema/tx"
     xsi:schemaLocation="
   http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
   http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
   http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd"&gt;

  &lt;bean id="fooService" class="x.y.service.DefaultFooService"/&gt;

  <i class="lineannotation"><span class="lineannotation">&lt;!-- the profiling advice --&gt;</span></i>
  &lt;bean id="profiler" class="x.y.SimpleProfiler"&gt;
    <i class="lineannotation"><span class="lineannotation">&lt;!-- execute before the transactional advice (hence the lower order number) --&gt;</span></i>
    <span class="bold"><b>&lt;property name="order" value="1</b></span>"/&gt;
  &lt;/bean&gt;

  &lt;aop:config&gt;

    &lt;aop:pointcut id="entryPointMethod" expression="execution(* x.y..*Service.*(..))"/&gt;

    <i class="lineannotation"><span class="lineannotation">&lt;!-- will execute after the profiling advice (c.f. the order attribute) --&gt;</span></i>
    &lt;aop:advisor
        advice-ref="txAdvice"
        pointcut-ref="entryPointMethod"
        <span class="bold"><b>order="2</b></span>"/&gt; <i class="lineannotation"><span class="lineannotation">&lt;!-- order value is higher than the profiling aspect --&gt;</span></i>

    &lt;aop:aspect id="profilingAspect" ref="profiler"&gt;
      &lt;aop:pointcut id="serviceMethodWithReturnValue"
              expression="execution(!void x.y..*Service.*(..))"/&gt;
      &lt;aop:around method="profile" pointcut-ref="serviceMethodWithReturnValue"/&gt;
    &lt;/aop:aspect&gt;

  &lt;/aop:config&gt;

  &lt;tx:advice id="txAdvice" transaction-manager="txManager"&gt;
    &lt;tx:attributes&gt;
      &lt;tx:method name="get*" read-only="true"/&gt;
      &lt;tx:method name="*"/&gt;
    &lt;/tx:attributes&gt;
  &lt;/tx:advice&gt;

  <i class="lineannotation"><span class="lineannotation">&lt;!-- other &lt;bean/&gt; definitions such as a <tt class="interfacename">DataSource</tt> and a <tt class="interfacename">PlatformTransactionManager</tt> here --&gt;</span></i>

&lt;/beans&gt;</pre><p>&#19978;&#38754;&#37197;&#32622;&#30340;&#32467;&#26524;&#26159;&#21019;&#24314;&#20102;&#19968;&#20010; <tt class="literal">'fooService'</tt> bean&#65292;&#21078;&#26512;&#26041;&#38754;&#21644;&#20107;&#21153;&#26041;&#38754;&#34987; <span class="emphasis"><em>&#20381;&#29031;&#39034;&#24207;</em></span> &#26045;&#21152;&#20854;&#19978;&#12290;&#22914;&#26524;&#25105;&#20204;&#24076;&#26395;&#21078;&#26512;&#36890;&#30693;&#22312;&#30446;&#26631;&#26041;&#27861;&#25191;&#34892;&#20043;&#21069; <span class="emphasis"><em>&#21518;&#20110;</em></span> &#20107;&#21153;&#36890;&#30693;&#25191;&#34892;&#65292;&#32780;&#19988;&#22312;&#30446;&#26631;&#26041;&#27861;&#25191;&#34892;&#20043;&#21518; <span class="emphasis"><em>&#20808;&#20110;</em></span> &#20107;&#21153;&#36890;&#30693;&#65292;&#25105;&#20204;&#21487;&#20197;&#31616;&#21333;&#22320;&#20132;&#25442;&#20004;&#20010;&#36890;&#30693;bean&#30340;order&#20540;&#12290;</p><p>&#22914;&#26524;&#37197;&#32622;&#20013;&#21253;&#21547;&#26356;&#22810;&#30340;&#26041;&#38754;&#65292;&#23427;&#20204;&#23558;&#20197;&#21516;&#26679;&#30340;&#26041;&#24335;&#21463;&#21040;&#24433;&#21709;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="transaction-declarative-aspectj"></a>9.5.9.&nbsp;&#32467;&#21512;AspectJ&#20351;&#29992; <tt class="interfacename">@Transactional</tt></h3></div></div><div></div></div><p>&#36890;&#36807;AspectJ&#20999;&#38754;&#65292;&#20320;&#20063;&#21487;&#20197;&#22312;Spring&#23481;&#22120;&#20043;&#22806;&#20351;&#29992;Spring&#26694;&#26550;&#30340; <tt class="interfacename">@Transactional</tt> &#21151;&#33021;&#12290;&#35201;&#20351;&#29992;&#36825;&#39033;&#21151;&#33021;&#20320;&#24517;&#39035;&#20808;&#32473;&#30456;&#24212;&#30340;&#31867;&#21644;&#26041;&#27861;&#21152;&#19978; <tt class="interfacename">@Transactional</tt>&#27880;&#35299;&#65292;&#28982;&#21518;&#25226; <tt class="filename">spring-aspects.jar</tt> &#25991;&#20214;&#20013;&#23450;&#20041;&#30340; <tt class="classname">org.springframework.transaction.aspectj.AnnotationTransactionAspect</tt> &#20999;&#38754;&#36830;&#25509;&#36827;&#65288;&#32455;&#20837;&#65289;&#20320;&#30340;&#24212;&#29992;&#12290;&#21516;&#26679;&#65292;&#35813;&#20999;&#38754;&#24517;&#39035;&#37197;&#32622;&#19968;&#20010;&#20107;&#21153;&#31649;&#29702;&#22120;&#12290;&#20320;&#24403;&#28982;&#21487;&#20197;&#36890;&#36807;Spring&#26694;&#26550;&#23481;&#22120;&#26469;&#22788;&#29702;&#27880;&#20837;&#65292;&#20294;&#22240;&#20026;&#25105;&#20204;&#36825;&#37324;&#20851;&#27880;&#20110;&#22312;Spring&#23481;&#22120;&#20043;&#22806;&#36816;&#34892;&#24212;&#29992;&#65292;&#25105;&#20204;&#23558;&#21521;&#20320;&#23637;&#31034;&#22914;&#20309;&#36890;&#36807;&#25163;&#21160;&#20070;&#20889;&#20195;&#30721;&#26469;&#23436;&#25104;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#22312;&#25105;&#20204;&#32487;&#32493;&#20043;&#21069;&#65292;&#20320;&#21487;&#33021;&#38656;&#35201;&#22909;&#22909;&#35835;&#19968;&#19979;&#21069;&#38754;&#30340;<a href="#transaction-declarative-annotations" title="9.5.6.&nbsp;&#20351;&#29992; @Transactional">Section&nbsp;9.5.6, &#8220;&#20351;&#29992; @Transactional&#8221;</a> &#21644; <a href="#aop" title="Chapter&nbsp;6.&nbsp;&#20351;&#29992;Spring&#36827;&#34892;&#38754;&#21521;&#20999;&#38754;&#32534;&#31243;&#65288;AOP&#65289;">Chapter&nbsp;6, <i>&#20351;&#29992;Spring&#36827;&#34892;&#38754;&#21521;&#20999;&#38754;&#32534;&#31243;&#65288;AOP&#65289;</i></a> &#20004;&#31456;&#12290;</p></td></tr></tbody></table></div><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">// construct an appropriate transaction manager </span></i>
DataSourceTransactionManager txManager = new DataSourceTransactionManager(getDataSource());

<i class="lineannotation"><span class="lineannotation">// configure the <tt class="classname">AnnotationTransactionAspect</tt> to use it; this must be done before executing any transactional methods</span></i>
AnnotationTransactionAspect.aspectOf().setTransactionManager(txManager); </pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>
	            &#20351;&#29992;&#27492;&#20999;&#38754;&#65288;aspect&#65289;&#65292;&#20320;&#24517;&#39035;&#22312; <span class="emphasis"><em>&#23454;&#29616;</em></span> &#31867;&#65288;&#21644;/&#25110;&#31867;&#37324;&#30340;&#26041;&#27861;&#65289;&#12289;&#32780; <span class="emphasis"><em>&#19981;&#26159;</em></span> &#31867;&#30340;&#20219;&#20309;&#25152;&#23454;&#29616;&#30340;&#25509;&#21475;&#19978;&#38754;&#36827;&#34892;&#27880;&#35299;&#12290;AspectJ&#36981;&#24490;Java&#30340;&#25509;&#21475;&#19978;&#30340;&#27880;&#35299; <span class="emphasis"><em>&#19981;&#34987;&#32487;&#25215;</em></span> &#30340;&#35268;&#21017;&#12290;
	            </p></td></tr></tbody></table></div><p>
	        &#23450;&#20041;&#22312;&#31867;&#19978;&#30340; <tt class="interfacename">@Transactional</tt> &#27880;&#35299;&#25351;&#23450;&#20102;&#31867;&#20013;&#25152;&#26377;&#26041;&#27861;&#25191;&#34892;&#26102;&#30340;&#40664;&#35748;&#20107;&#21153;&#35821;&#20041;&#12290;
	        </p><p>
	        &#23450;&#20041;&#22312;&#31867;&#30340;&#26041;&#27861;&#19978;&#30340; <tt class="interfacename">@Transactional</tt> &#27880;&#35299;&#23558;&#35206;&#30422;&#25481;&#31867;&#19978;&#27880;&#35299;&#30340;&#25152;&#25351;&#23450;&#30340;&#40664;&#35748;&#20107;&#21153;&#35821;&#20041;&#65288;&#22914;&#36807;&#23384;&#22312;&#30340;&#35805;&#65289;&#12290;
	        &#25152;&#26377;&#30340;&#26041;&#27861;&#37117;&#21487;&#20197;&#27880;&#35299;&#65292;&#19981;&#31649;&#23427;&#30340;&#21487;&#35265;&#24230;&#26159;&#20160;&#20040;&#26679;&#30340;&#12290;
	        </p><p>
			&#35201;&#25226; <tt class="classname">AnnotationTransactionAspect</tt> &#32455;&#20837;&#20320;&#30340;&#24212;&#29992;&#65292;&#20320;&#25110;&#32773;&#22522;&#20110;AspectJ&#26500;&#24314;&#20320;&#30340;&#24212;&#29992;&#65288;&#21442;&#32771; <a href="http://www.eclipse.org/aspectj/doc/released/devguide/index.html" target="_top">AspectJ Development Guide</a>&#65289;&#65292;&#25110;&#32773;&#37319;&#21462;&#8220;&#36733;&#20837;&#26102;&#32455;&#20837;&#8221;&#65288;load-time weaving&#65289;&#65292;&#21442;&#32771; <a href="#aop-aj-ltw" title="6.8.4.&nbsp;&#22312;Spring&#24212;&#29992;&#20013;&#20351;&#29992;AspectJ&#21152;&#36733;&#26102;&#32455;&#20837;&#65288;LTW&#65289;">Section&nbsp;6.8.4, &#8220;&#22312;Spring&#24212;&#29992;&#20013;&#20351;&#29992;AspectJ&#21152;&#36733;&#26102;&#32455;&#20837;&#65288;LTW&#65289;&#8221;</a> &#33719;&#24471;&#20851;&#20110;&#20351;&#29992;AspectJ&#36827;&#34892;&#8220;&#36733;&#20837;&#26102;&#32455;&#20837;&#8221;&#30340;&#35752;&#35770;&#12290;
			</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="transaction-programmatic"></a>9.6.&nbsp;&#32534;&#31243;&#24335;&#20107;&#21153;&#31649;&#29702;</h2></div></div><div></div></div><p>Spring&#25552;&#20379;&#20004;&#31181;&#26041;&#24335;&#30340;&#32534;&#31243;&#24335;&#20107;&#21153;&#31649;&#29702;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#20351;&#29992; <tt class="classname">TransactionTemplate</tt></p></li><li><p>&#30452;&#25509;&#20351;&#29992;&#19968;&#20010; <tt class="interfacename">PlatformTransactionManager</tt> &#23454;&#29616;</p></li></ul></div><p>&#22914;&#26524;&#20320;&#36873;&#25321;&#32534;&#31243;&#24335;&#20107;&#21153;&#31649;&#29702;&#65292;Spring&#23567;&#32452;&#25512;&#33616;&#20351;&#29992; <tt class="classname">TransactionTemplate</tt>&#12290;
	&#31532;&#20108;&#31181;&#26041;&#27861;&#21017;&#31867;&#20284;&#20351;&#29992;JTA&#30340; <tt class="interfacename">UserTransaction</tt> API &#65288;&#38500;&#20102;&#24322;&#24120;&#22788;&#29702;&#30340;&#37096;&#20998;&#31245;&#24494;&#31616;&#21333;&#28857;&#65289;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tx-prog-template"></a>9.6.1.&nbsp;&#20351;&#29992;<tt class="classname">TransactionTemplate</tt></h3></div></div><div></div></div><p><tt class="classname">TransactionTemplate</tt> &#37319;&#29992;&#19982;Spring&#20013;&#21035;&#30340; <span class="emphasis"><em>&#27169;&#26495;</em></span> &#21516;&#26679;&#30340;&#26041;&#27861;&#65292;
	  &#22914; <tt class="classname">JdbcTemplate</tt> &#12290;&#23427;&#20351;&#29992;&#22238;&#35843;&#26426;&#21046;&#65292;&#23558;&#24212;&#29992;&#20195;&#30721;&#20174;&#26679;&#26495;&#24335;&#30340;&#36164;&#28304;&#33719;&#21462;&#21644;&#37322;&#25918;&#20195;&#30721;&#20013;&#35299;&#25918;&#20986;&#26469;&#65292;
	  &#36825;&#26679;&#20889;&#20986;&#30340;&#20195;&#30721;&#26159;&#30446;&#30340;&#39537;&#21160;&#30340;&#65292;&#25226;&#31934;&#21147;&#38598;&#20013;&#22312;&#24320;&#21457;&#32773;&#24819;&#35201;&#20570;&#30340;&#20107;&#24773;&#19978;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#23601;&#20687;&#20320;&#39532;&#19978;&#35201;&#22312;&#21518;&#38754;&#30340;&#20363;&#23376;&#20013;&#30475;&#21040;&#30340;&#37027;&#26679;&#65292;
				&#20351;&#29992; <tt class="classname">TransactionTemplate</tt> &#32477;&#23545;&#20250;&#22686;&#21152;&#20320;&#30340;&#20195;&#30721;&#19982;Spring&#30340;&#20107;&#21153;&#26694;&#26550;&#21644;API&#38388;&#30340;&#32806;&#21512;&#12290;
				&#21040;&#24213;&#32534;&#31243;&#24335;&#20107;&#21153;&#31649;&#29702;&#26159;&#19981;&#26159;&#36866;&#21512;&#20320;&#30340;&#39033;&#30446;&#38656;&#35201;&#30001;&#20320;&#33258;&#24049;&#26469;&#20915;&#23450;&#12290; </p></td></tr></tbody></table></div><p>&#24212;&#29992;&#30340;&#20195;&#30721;&#24517;&#39035;&#22312;&#19968;&#20010;&#20107;&#21153;&#24615;&#30340;&#19978;&#19979;&#25991;&#20013;&#25191;&#34892;&#65292;&#36825;&#26679;&#23601;&#20250;&#20687;&#36825;&#26679;&#19968;&#26679;&#26174;&#24335;&#30340;&#20351;&#29992;<tt class="classname">TransactionTemplate</tt>&#12290;&#20320;&#20316;&#20026;&#19968;&#20010;&#24212;&#29992;&#31243;&#24207;&#21592;&#65292;
			&#20250;&#20889;&#19968;&#20010; <tt class="interfacename">TransactionCallback</tt> &#30340;&#23454;&#29616;&#65292;
			(&#36890;&#24120;&#20250;&#29992;&#21311;&#21517;&#31867;&#26469;&#23454;&#29616; )&#36825;&#26679;&#30340;&#23454;&#29616;&#20250;&#21253;&#21547;&#25152;&#20197;&#20320;&#38656;&#35201;&#22312;&#35813;&#20107;&#21153;&#19978;&#19979;&#25991;&#20013;&#25191;&#34892;&#30340;&#20195;&#30721;&#12290;
			&#28982;&#21518;&#20320;&#20250;&#25226;&#19968;&#20010;&#20320;&#33258;&#24049;&#23454;&#29616;<tt class="interfacename">TransactionCallback</tt>&#30340;&#23454;&#20363;&#20256;&#36882;&#32473;<tt class="classname">TransactionTemplate</tt>&#26292;&#38706;&#30340;<tt class="methodname">execute(..)</tt> &#26041;&#27861;&#12290;</p><pre class="programlisting">public class SimpleService implements Service {

  <i class="lineannotation"><span class="lineannotation">// single <tt class="classname">TransactionTemplate</tt> shared amongst all methods in this instance</span></i>
  private final TransactionTemplate transactionTemplate;

  <i class="lineannotation"><span class="lineannotation">// use constructor-injection to supply the <tt class="interfacename">PlatformTransactionManager</tt></span></i>
  public SimpleService(PlatformTransactionManager transactionManager) {
    Assert.notNull(transactionManager, "The 'transactionManager' argument must not be null.");
    this.transactionTemplate = new TransactionTemplate(transactionManager);
  }

  public Object someServiceMethod() {
    return transactionTemplate.execute(new TransactionCallback() {

      <i class="lineannotation"><span class="lineannotation">// the code in this method executes in a transactional context</span></i>
      public Object doInTransaction(TransactionStatus status) {
        updateOperation1();
        return resultOfUpdateOperation2();
      }
    });
  }
}</pre><p>&#22914;&#26524;&#19981;&#38656;&#35201;&#36820;&#22238;&#20540;&#65292;&#26356;&#26041;&#20415;&#30340;&#26041;&#24335;&#26159;&#21019;&#24314;&#19968;&#20010; <tt class="classname">TransactionCallbackWithoutResult</tt> &#30340;&#21311;&#21517;&#31867;&#65292;&#22914;&#19979;&#65306;</p><pre class="programlisting">transactionTemplate.execute(new <span class="bold"><b>TransactionCallbackWithoutResult</b></span>() {

  protected void doInTransactionWithoutResult(TransactionStatus status) {
    updateOperation1();
    updateOperation2();
  }
});</pre><p>&#22238;&#35843;&#26041;&#27861;&#20869;&#30340;&#20195;&#30721;&#21487;&#20197;&#36890;&#36807;&#35843;&#29992; <tt class="interfacename">TransactionStatus</tt> &#23545;&#35937;&#30340; <tt class="literal">setRollbackOnly()</tt> &#26041;&#27861;&#26469;&#22238;&#28378;&#20107;&#21153;&#12290;</p><pre class="programlisting">transactionTemplate.execute(new TransactionCallbackWithoutResult() {

  protected void doInTransactionWithoutResult(TransactionStatus status) {
    try {
      updateOperation1();
      updateOperation2();
    } catch (SomeBusinessExeption ex) {
      <span class="bold"><b>status.setRollbackOnly();</b></span>
    }
  }
});</pre><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="tx-prog-template-settings"></a>9.6.1.1.&nbsp;&#25351;&#23450;&#20107;&#21153;&#35774;&#32622;</h4></div></div><div></div></div><p>&#35832;&#22914;&#20256;&#25773;&#27169;&#24335;&#12289;&#38548;&#31163;&#31561;&#32423;&#12289;&#36229;&#26102;&#31561;&#31561;&#30340;&#20107;&#21153;&#35774;&#32622;&#37117;&#21487;&#20197;&#22312;<tt class="classname">TransactionTemplate</tt>&#20013;&#25110;&#32773;&#36890;&#36807;&#37197;&#32622;&#25110;&#32773;&#32534;&#31243;&#24335;&#22320;&#23454;&#29616;&#12290;
				<tt class="classname">TransactionTemplate</tt>&#23454;&#20363;&#40664;&#35748;&#32487;&#25215;&#20102;<a href="#transaction-declarative-txadvice-settings" title="9.5.5.&nbsp;&lt;tx:advice/&gt; &#26377;&#20851;&#30340;&#35774;&#32622;">&#40664;&#35748;&#20107;&#21153;&#35774;&#32622;</a>&#12290;
				&#19979;&#38754;&#26377;&#20010;&#32534;&#31243;&#24335;&#30340;&#20026;&#19968;&#20010;&#29305;&#23450;&#30340;<tt class="classname">TransactionTemplate</tt>&#23450;&#21046;&#20107;&#21153;&#35774;&#32622;&#30340;&#20363;&#23376;&#12290;
				</p><pre class="programlisting">public class SimpleService implements Service {

  private final TransactionTemplate transactionTemplate;

  public SimpleService(PlatformTransactionManager transactionManager) {
    Assert.notNull(transactionManager, "The 'transactionManager' argument must not be null.");
    this.transactionTemplate = new TransactionTemplate(transactionManager);

    <i class="lineannotation"><span class="lineannotation">// the transaction settings can be set here explicitly if so desired</span></i>
    this.transactionTemplate.setIsolationLevel(TransactionDefinition.ISOLATION_READ_UNCOMMITTED);
    this.transactionTemplate.setTimeout(30); <i class="lineannotation"><span class="lineannotation">// 30 seconds</span></i>
    <i class="lineannotation"><span class="lineannotation">// and so forth...</span></i>
  }
}</pre><p>&#22312;&#19979;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#23558;&#20250;&#28436;&#31034;&#22914;&#20309;&#20351;&#29992;Spring XML&#37197;&#32622;&#26469;&#23450;&#21046;<tt class="classname">TransactionTemplate</tt>&#30340;&#20107;&#21153;&#23646;&#24615;&#12290;
				'<tt class="literal">sharedTransactionTemplate</tt>'&#21487;&#20197;&#34987;&#27880;&#20837;&#21040;&#25152;&#26377;&#38656;&#35201;&#30340;&#26381;&#21153;&#20013;&#21435;&#12290; </p><pre class="programlisting">&lt;bean id="sharedTransactionTemplate"
    class="org.springframework.transaction.support.TransactionTemplate"&gt;
  &lt;property name="isolationLevelName" value="ISOLATION_READ_UNCOMMITTED"/&gt;
  &lt;property name="timeout" value="30"/&gt;
&lt;/bean&gt;"</pre></div><p>
			&#26368;&#21518;&#65292;<tt class="classname">TransactionTemplate</tt> &#31867;&#30340;&#23454;&#20363;&#26159;&#32447;&#31243;&#23433;&#20840;&#30340;&#65292;&#20219;&#20309;&#29366;&#24577;&#37117;&#19981;&#20250;&#34987;&#20445;&#23384;&#12290;
			<tt class="classname">TransactionTemplate</tt> &#23454;&#20363; <span class="emphasis"><em>&#30340;&#30830;&#20250;</em></span>
			&#32500;&#25252;&#37197;&#32622;&#29366;&#24577;&#65292;&#25152;&#20197;&#24403;&#19968;&#20123;&#31867;&#36873;&#25321;&#20849;&#20139;&#19968;&#20010;&#21333;&#29420;&#30340; <tt class="classname">TransactionTemplate</tt>&#23454;&#20363;&#26102;&#65292;
			&#22914;&#26524;&#19968;&#20010;&#31867;&#38656;&#35201;&#20351;&#29992;&#19981;&#21516;&#37197;&#32622;&#30340;<tt class="classname">TransactionTemplate</tt>(&#27604;&#22914;&#65292;&#19981;&#21516;&#30340;&#38548;&#31163;&#31561;&#32423;)&#65292;
			&#37027;&#23601;&#38656;&#35201;&#21019;&#24314;&#21644;&#20351;&#29992;&#20004;&#20010;&#19981;&#21516;&#30340;<tt class="classname">TransactionTemplate</tt>&#12290;
			</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="transaction-programmatic-ptm"></a>9.6.2.&nbsp;&#20351;&#29992;<tt class="interfacename">PlatformTransactionManager</tt></h3></div></div><div></div></div><p>&#20320;&#20063;&#21487;&#20197;&#20351;&#29992; <tt class="interfacename">org.springframework.transaction.PlatformTransactionManager</tt>
			&#26469;&#30452;&#25509;&#31649;&#29702;&#20320;&#30340;&#20107;&#21153;&#12290;&#21482;&#38656;&#36890;&#36807;bean&#30340;&#24341;&#29992;&#65292;&#31616;&#21333;&#30340;&#25226;&#20320;&#22312;&#20351;&#29992;&#30340;<tt class="interfacename">PlatformTransactionManager</tt> &#20256;&#36882;&#32473;&#20320;&#30340;bean&#12290;
	  		&#28982;&#21518;&#65292;&#20351;&#29992;<tt class="interfacename">TransactionDefinition</tt>&#21644;<tt class="interfacename">TransactionStatus</tt>&#23545;&#35937;&#65292;
	  		&#20320;&#21487;&#20197;&#21551;&#21160;&#65292;&#22238;&#28378;&#21644;&#25552;&#20132;&#20107;&#21153;&#12290;</p><pre class="programlisting">DefaultTransactionDefinition def = new DefaultTransactionDefinition();
<i class="lineannotation"><span class="lineannotation">// explicitly setting the transaction name is something that can only be done programmatically</span></i>
def.setName("SomeTxName");
def.setPropagationBehavior(TransactionDefinition.PROPAGATION_REQUIRED);

TransactionStatus status = txManager.getTransaction(def);
try {
  <i class="lineannotation"><span class="lineannotation">// execute your business logic here</span></i>
}
catch (MyException ex) {
  txManager.rollback(status);
  throw ex;
}
txManager.commit(status);</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="tx-decl-vs-prog"></a>9.7.&nbsp;&#36873;&#25321;&#32534;&#31243;&#24335;&#20107;&#21153;&#31649;&#29702;&#36824;&#26159;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;</h2></div></div><div></div></div><p>&#24403;&#20320;&#21482;&#26377;&#24456;&#23569;&#30340;&#20107;&#21153;&#25805;&#20316;&#26102;&#65292;&#32534;&#31243;&#24335;&#20107;&#21153;&#31649;&#29702;&#36890;&#24120;&#27604;&#36739;&#21512;&#36866;&#12290;&#20363;&#22914;&#65292;&#22914;&#26524;&#20320;&#26377;&#19968;&#20010;Web&#24212;&#29992;&#65292;&#20854;&#20013;&#21482;&#26377;&#29305;&#23450;&#30340;&#26356;&#26032;&#25805;&#20316;&#26377;&#20107;&#21153;&#35201;&#27714;&#65292;
	&#20320;&#21487;&#33021;&#19981;&#24895;&#20351;&#29992;Spring&#25110;&#20854;&#20182;&#25216;&#26415;&#35774;&#32622;&#20107;&#21153;&#20195;&#29702;&#12290;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#20351;&#29992; <tt class="classname">TransactionTemplate</tt> <span class="emphasis"><em>&#21487;&#33021;</em></span> &#26159;&#20010;&#22909;&#21150;&#27861;&#12290;
	&#21482;&#26377;&#32534;&#31243;&#24335;&#20107;&#21153;&#31649;&#29702;&#25165;&#33021;&#26174;&#24335;&#30340;&#35774;&#32622;&#20107;&#21153;&#21517;&#31216;&#12290;
	</p><p>&#21478;&#19968;&#26041;&#38754;&#65292;&#22914;&#26524;&#20320;&#30340;&#24212;&#29992;&#20013;&#23384;&#22312;&#22823;&#37327;&#20107;&#21153;&#25805;&#20316;&#65292;&#37027;&#20040;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;&#36890;&#24120;&#26159;&#20540;&#24471;&#30340;&#12290;&#23427;&#23558;&#20107;&#21153;&#31649;&#29702;&#19982;&#19994;&#21153;&#36923;&#36753;&#20998;&#31163;&#65292;
	&#32780;&#19988;&#22312;Spring&#20013;&#37197;&#32622;&#20063;&#19981;&#38590;&#12290;&#20351;&#29992;Spring&#65292;&#32780;&#19981;&#26159;EJB CMT&#65292;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;&#22312;&#37197;&#32622;&#19978;&#30340;&#25104;&#26412;&#26497;&#22823;&#22320;&#38477;&#20302;&#20102;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="transaction-application-server-integration"></a>9.8.&nbsp;&#19982;&#29305;&#23450;&#24212;&#29992;&#26381;&#21153;&#22120;&#38598;&#25104;</h2></div></div><div></div></div><p>&#19968;&#33324;&#26469;&#35828;&#65292;Spring&#30340;&#20107;&#21153;&#25277;&#35937;&#19982;&#24212;&#29992;&#26381;&#21153;&#22120;&#26159;&#26080;&#20851;&#30340;&#12290;&#27492;&#22806;&#65292;&#20351;&#29992;Spring&#30340; <tt class="classname">JtaTransactionManager</tt> &#31867;&#26102;&#65292;
	&#19968;&#31181;&#21487;&#36873;&#30340;&#26041;&#24335;&#26159;&#36890;&#36807;JNDI&#26597;&#35810;&#33719;&#24471;JTA <tt class="interfacename">UserTransaction</tt> &#21644; <tt class="interfacename">TransactionManager</tt> &#23545;&#35937;&#65292;
	&#20854;&#20013;&#21518;&#32773;&#21487;&#20197;&#34987;&#35774;&#32622;&#20026;&#33258;&#21160;&#25506;&#27979;&#65292;&#36825;&#26102;&#38024;&#23545;&#19981;&#21516;&#30340;&#24212;&#29992;&#26381;&#21153;&#22120;&#26377;&#19981;&#21516;&#30340;&#26041;&#24335;&#12290;&#33021;&#22815;&#30452;&#25509;&#35775;&#38382; <tt class="interfacename">TransactionManager</tt>&#65292;
	&#30830;&#23454;&#22312;&#24456;&#22823;&#31243;&#24230;&#19978;&#22686;&#24378;&#20102;&#20107;&#21153;&#35821;&#20041;&#65292;&#21487;&#20197;&#21442;&#32771; <tt class="classname">JtaTransactionManager</tt> &#31867;&#30340;javadoc&#33719;&#24471;&#26356;&#22810;&#32454;&#33410;&#12290;</p><p>&#24403;&#22312;J2EE&#24212;&#29992;&#26381;&#21153;&#22120;&#19978;&#36816;&#34892;&#26102;&#65292;Spring&#30340;<tt class="classname">JtaTransactionManager</tt>&#26159;&#19968;&#20010;&#26631;&#20934;&#30340;&#36873;&#25321;&#65292;&#23427;&#22312;&#24050;&#30693;&#30340;&#25152;&#26377;&#36890;&#29992;&#26381;&#21153;&#22120;&#19978;&#37117;&#33021;&#27491;&#24120;&#24037;&#20316;&#12290;
	&#23427;&#30340;&#19968;&#20123;&#35832;&#22914;&#20107;&#21153;&#25346;&#36215;&#31561;&#39640;&#32423;&#21151;&#33021;&#20063;&#21487;&#20197;&#22312;&#26080;&#39035;&#29305;&#27530;&#37197;&#32622;&#30340;&#24773;&#20917;&#19979;&#22312;&#24050;&#30693;&#30340;&#35768;&#22810;&#26381;&#21153;&#22120;&#19978;&#24037;&#20316;&#65288;&#21253;&#25324; GlassFish&#12289;JBoss&#12289;Geronimo&#21644;Oracle OC4J&#65289;&#65292;
	&#28982;&#32780;&#65292;&#20026;&#20102;&#23436;&#20840;&#25903;&#25345;&#20107;&#21153;&#25346;&#36215;&#31561;&#39640;&#32423;&#21151;&#33021;&#65292;Spring&#20026;IBM WebSphere &#12289;BEA WebLogic&#20197;&#21450;Oracle OC4J&#25552;&#20379;&#20102;&#29305;&#27530;&#25903;&#25345;&#12290;&#25105;&#20204;&#20250;&#22312;&#21518;&#38754;&#30340;&#31456;&#33410;&#20013;&#35752;&#35770;&#36825;&#20010;&#35805;&#39064;.</p><p><span class="emphasis"><em>&#22312;&#26631;&#20934;&#30340;&#22330;&#26223;&#20013;&#65292;&#21253;&#25324; WebLogic&#12289;WebSphere&#21644;OC4J&#65292;&#35831;&#32771;&#34385;&#31616;&#21333;&#30340;&#20351;&#29992;<tt class="literal">'&lt;tx:jta-transaction-manager/&gt;'</tt>&#37197;&#32622;&#20803;&#32032;&#12290;
    </em></span> &#23427;&#20250;&#33258;&#21160;&#26816;&#27979;&#24213;&#23618;&#25152;&#20351;&#29992;&#30340;&#26381;&#21153;&#22120;&#20197;&#27492;&#26469;&#36873;&#25321;&#26368;&#21512;&#36866;&#30340;&#20107;&#21153;&#31649;&#29702;&#22120;&#12290; 
	&#36825;&#24847;&#21619;&#30528;&#20320;&#19981;&#38656;&#35201;&#26174;&#24335;&#30340;&#20026;&#26381;&#21153;&#22120;&#37197;&#32622;&#29305;&#27530;&#30340;&#36866;&#37197;&#22120;&#65288;&#23601;&#20687;&#22312;&#21518;&#38754;&#30340;&#37096;&#20998;&#35752;&#35770;&#30340;&#37027;&#26679;&#65289;&#65292;&#36873;&#25321;&#20250;&#33258;&#21160;&#23436;&#25104;&#65292;
	&#24182;&#19988;&#22914;&#26524;&#25214;&#19981;&#21040;&#30340;&#35805;&#20250;&#21551;&#29992;&#26631;&#20934;&#30340; <tt class="classname">JtaTransactionManager</tt>&#26469;&#31649;&#29702;&#12290;
	 </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="transaction-application-server-integration-websphere"></a>9.8.1.&nbsp;IBM WebSphere</h3></div></div><div></div></div><p>&#22312;WebSphere 6.0&#20197;&#21450;&#21518;&#32493;&#29256;&#26412;&#20013;&#65292;&#25512;&#33616;&#20351;&#29992;&#30340;Spring JTA &#20107;&#21153;&#31649;&#29702;&#22120;&#26159;<tt class="classname">WebSphereUowTransactionManager</tt>&#12290;
	  &#36825;&#20010;&#36866;&#37197;&#22120;&#20805;&#20998;&#21033;&#29992;&#20102;WebSphere&#24212;&#29992;&#26381;&#21153;&#22120; &#65288;6.0.2.19 &#20197;&#21450;&#26356;&#39640;&#30340;&#29256;&#26412;&#21644;6.1.0.9&#20197;&#21450;&#26356;&#39640;&#30340;&#29256;&#26412;&#65289;&#20013;&#25552;&#20379;&#30340; <tt class="interfacename">UOWManager</tt> API&#12290;
	  &#36890;&#36807;&#20351;&#29992;&#36825;&#20010;&#36866;&#37197;&#22120;&#65292;Spring&#39537;&#21160;&#30340;&#20107;&#21153;&#25346;&#36215;&#65288;<tt class="literal">PROPAGATION_REQUIRES_NEW</tt>&#21457;&#36215;&#30340;&#25346;&#36215;/&#24674;&#22797;&#65289;&#24471;&#21040;&#20102;IBM&#30340;&#23448;&#26041;&#25903;&#25345;&#12290;
	  </p><p>&#22312;WebSphere 5.1&#29615;&#22659;&#19979;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;Spring&#30340; <tt class="classname">WebSphereTransactionManagerFactoryBean</tt> &#31867;&#12290; 
	  &#36825;&#26159;&#19968;&#20010;&#24037;&#21378;&#31867;&#65292;&#36890;&#36807;WebSphere&#30340; <tt class="literal">&#38745;&#24577;</tt> &#35775;&#38382;&#26041;&#27861;&#33719;&#21462;&#21040;JTA <tt class="literal">TransactionManager</tt> &#23454;&#20363;&#12290;
	  &#19968;&#26086;&#36890;&#36807;&#24037;&#21378;bean&#33719;&#21462;&#21040;JTA <tt class="interfacename">TransactionManager</tt> &#23454;&#20363;&#65292;
	  &#23601;&#21487;&#20197;&#20351;&#29992;&#35813;&#23454;&#20363;&#35013;&#37197;&#19968;&#20010;Spring&#30340; <tt class="classname">JtaTransactionManager</tt> bean&#65292;
	  &#23427;&#23553;&#35013;&#20102;JTA <tt class="interfacename">UserTransaction</tt>&#65292;&#25552;&#20379;&#22686;&#24378;&#30340;&#20107;&#21153;&#35821;&#20041;&#12290;&#35831;&#21442;&#32771;&#30456;&#20851;javadoc&#20197;&#33719;&#24471;&#23436;&#25972;&#20449;&#24687;&#12290;</p><p><span class="emphasis"><em>&#35831;&#27880;&#24847;<tt class="classname">WebSphereTransactionManagerFactoryBean</tt>&#34429;&#28982;&#21487;&#20197;&#22312;WAS 5.1&#21644;6.0&#19978;&#27491;&#24120;&#24037;&#20316;&#65292;&#20294;&#26159;&#24182;&#27809;&#26377;&#24471;&#21040;&#23448;&#26041;&#30340;&#27491;&#24335;&#25903;&#25345;&#12290;
	 </em></span> &#22914;&#26524;&#38656;&#35201;&#36816;&#34892;&#22312;WAS6.0&#25110;&#32773;&#26356;&#39640;&#30340;&#29256;&#26412;&#19978;&#65292;&#35831;&#21442;&#32771;&#19978;&#38754;&#30340;<tt class="classname">WebSphereUowTransactionManager</tt>&#37096;&#20998;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="transaction-application-server-integration-weblogic"></a>9.8.2.&nbsp;BEA WebLogic</h3></div></div><div></div></div><p>&#22312;&#19968;&#20010;&#20351;&#29992;WebLogic 8.1&#25110;&#26356;&#39640;&#29256;&#26412;&#30340;&#29615;&#22659;&#20013;&#65292;&#20320;&#19968;&#33324;&#20250;&#20248;&#20808;&#36873;&#29992;&#29305;&#23450;&#20110;WebLogic&#30340; <tt class="classname">WebLogicJtaTransactionManager</tt> &#31867;&#12290; 
		&#26469;&#21462;&#20195;<tt class="classname">JtaTransactionManager</tt> &#31867;&#12290;&#22312;WebLogic&#29615;&#22659;&#20013;&#65292;&#35813;&#31867;&#25552;&#20379;&#20102;&#23545;Spring&#20107;&#21153;&#23450;&#20041;&#30340;&#23436;&#20840;&#25903;&#25345;&#65292;&#36229;&#36807;&#20102;&#26631;&#20934;&#30340;JTA&#35821;&#20041;&#12290;
		&#23427;&#30340;&#29305;&#24615;&#21253;&#25324;&#65306;&#25903;&#25345;&#20107;&#21153;&#21517;&#65292;&#25903;&#25345;&#20026;&#27599;&#20010;&#20107;&#21153;&#23450;&#20041;&#38548;&#31163;&#32423;&#21035;&#65292;&#20197;&#21450;&#22312;&#20219;&#20309;&#29615;&#22659;&#19979;&#27491;&#30830;&#22320;&#24674;&#22797;&#20107;&#21153;&#30340;&#33021;&#21147;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="transaction-application-server-integration-oc4j"></a>9.8.3.&nbsp;Oracle OC4J</h3></div></div><div></div></div><p>Spring&#20026;OC4J 10.1.3&#20197;&#21450;&#26356;&#39640;&#30340;&#29256;&#26412;&#25552;&#20379;&#20102;&#19968;&#20010;&#29305;&#27530;&#30340;&#36866;&#37197;&#22120;&#65306;
	  <tt class="classname">OC4JJtaTransactionManager</tt>&#12290;&#36825;&#20010;&#36866;&#37197;&#22120;&#36319;&#21069;&#38754;&#30340;<tt class="classname">WebLogicJtaTransactionManager</tt>&#24456;&#31867;&#20284;&#65292;
	  &#22312;OC4J&#19978;&#25552;&#20379;&#31867;&#20284;&#30340;&#36741;&#21161;&#21151;&#33021;&#65306;&#20107;&#21153;&#21517;&#31216;&#21644;&#38024;&#23545;&#27599;&#20010;&#20107;&#21153;&#19981;&#21516;&#30340;&#29420;&#31435;&#31561;&#32423;&#12290; </p><p>&#35831;&#27880;&#24847;&#25152;&#26377;&#30340; JTA &#21151;&#33021;&#65292;&#21253;&#25324;&#20107;&#21153;&#25346;&#36215;&#65292;&#37117;&#21487;&#20197;&#24456;&#22909;&#30340;&#36890;&#36807;Spring&#30340; <tt class="classname">JtaTransactionManager</tt>&#22312; OC4J &#24037;&#20316;&#12290;
	  &#29305;&#27530;&#30340;<tt class="classname">OC4JJtaTransactionManager</tt>&#25552;&#20379;&#20102;&#27604;&#26631;&#20934;JTA&#26356;&#22810;&#30340;&#36229;&#20540;&#21151;&#33021;&#12290; </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="transaction-solutions-to-common-problems"></a>9.9.&nbsp;&#24120;&#35265;&#38382;&#39064;&#30340;&#35299;&#20915;&#26041;&#27861;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="transaction-solutions-to-common-problems-wrong-ptm"></a>9.9.1.&nbsp;&#23545;&#19968;&#20010;&#29305;&#23450;&#30340; <tt class="interfacename">DataSource</tt> &#20351;&#29992;&#20102;&#38169;&#35823;&#30340;&#20107;&#21153;&#31649;&#29702;&#22120;</h3></div></div><div></div></div><p>&#20320;&#38656;&#35201;&#25353;&#29031;&#38656;&#27714;&#20180;&#32454;&#22320;&#36873;&#25321; <span class="emphasis"><em>&#27491;&#30830;&#30340;</em></span><tt class="interfacename">PlatformTransactionManager</tt> &#23454;&#29616;&#12290;
		&#21482;&#35201;&#20351;&#29992;&#24471;&#24403;&#23601;&#21487;&#20197;&#24471;&#21040;&#19968;&#20010;Spring&#25552;&#20379;&#30340;&#30452;&#35266;&#30340;&#12289;&#21487;&#31227;&#26893;&#30340;&#25277;&#35937;&#23618;&#12290;&#22914;&#26524;&#20320;&#20351;&#29992;&#20840;&#23616;&#20107;&#21153;&#65292;
		&#20320;<span class="emphasis"><em>&#24517;&#39035;</em></span>&#20026;&#25152;&#26377;&#20107;&#21153;&#25805;&#20316;&#20351;&#29992;Spring&#30340;<tt class="classname">org.springframework.transaction.jta.JtaTransactionManager</tt>&#31867;
	   &#65288;&#25110; <a href="#transaction-application-server-integration" title="9.8.&nbsp;&#19982;&#29305;&#23450;&#24212;&#29992;&#26381;&#21153;&#22120;&#38598;&#25104;">&#29305;&#23450;&#20110;&#26576;&#31181;&#24212;&#29992;&#26381;&#21153;&#22120;&#30340;&#23376;&#31867;</a>&#65289;&#12290;
	   &#21542;&#21017;Spring&#23558;&#35797;&#22270;&#22312;&#20687;&#23481;&#22120;&#25968;&#25454;&#28304;&#36825;&#26679;&#30340;&#36164;&#28304;&#19978;&#25191;&#34892;&#23616;&#37096;&#20107;&#21153;&#12290;&#36825;&#26679;&#30340;&#23616;&#37096;&#20107;&#21153;&#27809;&#26377;&#20219;&#20309;&#24847;&#20041;&#65292;&#20248;&#31168;&#30340;&#24212;&#29992;&#26381;&#21153;&#22120;&#20250;&#25226;&#36825;&#20123;&#24773;&#20917;&#35270;&#20026;&#38169;&#35823;&#12290;<tt class="literal"></tt>
	   </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="transaction-resources"></a>9.10.&nbsp;&#26356;&#22810;&#30340;&#36164;&#28304;</h2></div></div><div></div></div><p>&#20174;&#19979;&#38754;&#30340;&#38142;&#25509;&#20013;&#20320;&#21487;&#20197;&#25214;&#21040;&#26356;&#22810;&#20851;&#20110;Spring&#26694;&#26550;&#20107;&#21153;&#25903;&#25345;&#26041;&#38754;&#30340;&#36164;&#28304;</p><div class="itemizedlist"><ul type="disc"><li><p>&#26469;&#33258; <a href="http://www.infoq.com/" target="_top">InfoQ</a> &#30340; <a href="http://www.infoq.com/minibooks/JTDS" target="_top">
				Java&#20107;&#21153;&#35774;&#35745;&#31574;&#30053;&#65288;Java Transaction Design Strategies&#65289;</a> &#26159;&#19968;&#26412;&#20171;&#32461;Java&#20107;&#21153;&#26041;&#38754;&#30456;&#24403;&#22909;&#30340;&#20070;&#12290;
				&#21516;&#26102;&#23427;&#20063;&#21253;&#21547;&#20102;&#22914;&#20309;&#22312;Spring&#26694;&#26550;&#21644;EJB3&#20013;&#37197;&#32622;&#19982;&#20351;&#29992;&#20107;&#21153;&#30340;&#23545;&#27604;&#31034;&#20363;&#12290;</p></li></ul></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="dao"></a>Chapter&nbsp;10.&nbsp;DAO&#25903;&#25345;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="dao-introduction"></a>10.1.&nbsp;&#31616;&#20171;</h2></div></div><div></div></div><p>
			Spring&#25552;&#20379;&#30340;DAO(&#25968;&#25454;&#35775;&#38382;&#23545;&#35937;)&#25903;&#25345;&#30446;&#30340;&#26159;&#20415;&#20110;&#20197;&#19968;&#33268;&#30340;&#26041;&#24335;&#20351;&#29992;&#19981;&#21516;&#30340;&#25968;&#25454;&#35775;&#38382;&#25216;&#26415;&#65292;
			&#22914;JDBC&#65292;Hibernate&#25110;&#32773;JDO&#31561;&#12290;&#23427;&#19981;&#20165;&#21487;&#20197;&#35753;&#20320;&#26041;&#20415;&#22320;&#22312;&#36825;&#20123;&#25345;&#20037;&#21270;&#25216;&#26415;&#38388;&#20999;&#25442;&#65292;
			&#32780;&#19988;&#35753;&#20320;&#22312;&#32534;&#30721;&#30340;&#26102;&#20505;&#19981;&#29992;&#32771;&#34385;&#22788;&#29702;&#21508;&#31181;&#25216;&#26415;&#20013;&#29305;&#23450;&#30340;&#24322;&#24120;&#12290;
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="dao-exceptions"></a>10.2.&nbsp;&#19968;&#33268;&#30340;&#24322;&#24120;&#23618;&#27425;</h2></div></div><div></div></div><p>
			Spring&#25552;&#20379;&#20102;&#19968;&#31181;&#26041;&#20415;&#30340;&#26041;&#27861;&#65292;&#25226;&#29305;&#23450;&#20110;&#26576;&#31181;&#25216;&#26415;&#30340;&#24322;&#24120;&#65292;&#22914;<tt class="classname">SQLException</tt>&#65292;
			&#36716;&#21270;&#20026;&#33258;&#24049;&#30340;&#24322;&#24120;&#65292;&#36825;&#31181;&#24322;&#24120;&#23646;&#20110;&#20197;<tt class="classname">DataAccessException</tt>
			&#20026;&#26681;&#30340;&#24322;&#24120;&#23618;&#27425;&#12290;&#36825;&#20123;&#24322;&#24120;&#23553;&#35013;&#20102;&#21407;&#22987;&#24322;&#24120;&#23545;&#35937;&#65292;&#36825;&#26679;&#23601;&#19981;&#20250;&#26377;&#20002;&#22833;&#20219;&#20309;&#38169;&#35823;&#20449;&#24687;&#30340;&#39118;&#38505;&#12290;
		</p><p>
			&#38500;&#20102;&#23545;JDBC&#24322;&#24120;&#30340;&#23553;&#35013;&#65292;Spring&#20063;&#23545;Hibernate&#24322;&#24120;&#36827;&#34892;&#20102;&#23553;&#35013;&#65292;&#25226;&#23427;&#20204;&#20174;&#19968;&#31181;&#19987;&#26377;&#30340;checked&#24322;&#24120;
			&#65288;Hibernate3.0&#20197;&#21069;&#30340;&#29256;&#26412;&#65289;&#65292;&#36716;&#21270;&#20026;&#19968;&#31995;&#21015;&#25277;&#35937;&#30340;&#36816;&#34892;&#26102;&#24322;&#24120;&#12290;&#23545;JDO&#20063;&#26159;&#36825;&#26679;&#12290;
			&#23427;&#21487;&#20197;&#35753;&#20320;&#36731;&#26494;&#22788;&#29702;&#22823;&#22810;&#25968;&#25345;&#20037;&#21270;&#24322;&#24120;&#65288;&#36825;&#20123;&#24322;&#24120;&#22823;&#22810;&#26159;&#19981;&#21487;&#24674;&#22797;&#30340;&#65292;&#32780;&#19988;&#21482;&#20986;&#29616;&#22312;&#29305;&#23450;
			&#30340;&#23618;&#27425;&#65289;&#65292;&#32780;&#19981;&#20877;&#38656;&#35201;&#22312;DAO&#20013;&#32534;&#20889;&#35752;&#21388;&#30340;&#26679;&#26495;&#24335;&#30340;catch/throw&#20195;&#30721;&#22359;&#21644;&#24322;&#24120;&#22768;&#26126;&#12290;&#20320;&#20173;&#28982;&#21487;&#20197;&#22312;&#38656;&#35201;
			&#30340;&#22320;&#26041;&#25429;&#33719;&#24182;&#22788;&#29702;&#36825;&#20123;&#24322;&#24120;&#12290;&#23601;&#20687;&#25105;&#20204;&#19978;&#38754;&#25552;&#21040;&#30340;&#65292;JDBC&#24322;&#24120;&#65288;&#21253;&#25324;&#29305;&#23450;&#20110;&#26576;&#31181;&#25968;&#25454;&#24211;
			&#26041;&#35328;&#30340;&#24322;&#24120;&#65289;&#20063;&#21487;&#20197;&#34987;&#36716;&#21270;&#20026;&#21516;&#26679;&#30340;&#24322;&#24120;&#23618;&#27425;&#65292;&#36825;&#24847;&#21619;&#30528;&#20320;&#21487;&#20197;&#22312;&#19968;&#33268;&#30340;&#32534;&#31243;&#27169;&#22411;&#19979;&#65292;&#36890;
			&#36807;JDBC&#26469;&#25191;&#34892;&#26576;&#20123;&#25805;&#20316;&#12290;
		</p><p>
			&#19978;&#36848;&#24773;&#20917;&#36866;&#29992;&#20110;Spring&#25903;&#25345;&#30340;&#21508;&#31181;ORM&#26694;&#26550;&#30340;&#27169;&#26495;&#31867;&#12290;&#22914;&#26524;&#20351;&#29992;&#22522;&#20110;&#25318;&#25130;&#22120;&#30340;&#31867;&#65292;&#20320;&#22312;&#24212;&#29992;&#20013;
			&#23601;&#24471;&#33258;&#24049;&#23567;&#24515;&#22788;&#29702;<tt class="classname">HibernateException</tt>&#12289;
			<tt class="classname">JDOException</tt>&#31561;&#65292;&#26368;&#22909;&#26159;&#22996;&#25176;&#32473;
			<tt class="classname">SessionFactoryUtils</tt>&#30340;
			<tt class="methodname">convertHibernateAccessException</tt>&#12289;
			<tt class="methodname">convertJdoAccessException</tt>&#31561;&#26041;&#27861;&#12290;&#36825;&#20123;&#26041;&#27861;&#21487;&#20197;&#25226;&#30456;&#24212;&#30340;&#24322;&#24120;&#36716;
			&#21270;&#20026;&#19982;<tt class="literal">org.springframework.dao</tt>&#20013;&#23450;&#20041;&#30340;&#24322;&#24120;&#23618;&#27425;&#30456;&#20860;&#23481;&#30340;&#24322;&#24120;&#12290;
			&#20854;&#20013;<tt class="classname">JDOException</tt>&#23646;unchecked&#24322;&#24120;&#65292;&#23427;&#20204;&#20063;&#21487;&#20197;&#34987;&#31616;&#21333;&#22320;&#25243;&#20986;&#65292;
			&#20294;&#36825;&#26679;&#20570;&#22312;&#24322;&#24120;&#22788;&#29702;&#26041;&#38754;&#29306;&#29298;&#20102;&#36890;&#29992;&#30340;DAO&#25277;&#35937;&#12290;
		</p><p>
			&#19979;&#22270;&#23637;&#31034;&#20102;Spring&#25552;&#20379;&#30340;&#24322;&#24120;&#23618;&#27425;&#12290;
			&#65288;&#27880;&#24847;&#22270;&#19978;&#25152;&#21253;&#21547;&#30340;&#24322;&#24120;&#31867;&#21482;&#26159;&#25972;&#20010;&#24222;&#22823;&#30340;<tt class="classname">DataAccessException</tt>
			&#24322;&#24120;&#23618;&#27425;&#20013;&#30340;&#19968;&#37096;&#20998;&#12290;&#65289;
		</p><div class="mediaobject" align="center"><img src="DataAccessException.gif" align="middle"></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="dao-abstract-superclasses"></a>10.3.&nbsp;&#19968;&#33268;&#30340;DAO&#25903;&#25345;&#25277;&#35937;&#31867;</h2></div></div><div></div></div><p>
			&#20026;&#20102;&#20415;&#20110;&#20197;&#19968;&#31181;&#19968;&#33268;&#30340;&#26041;&#24335;&#20351;&#29992;&#21508;&#31181;&#25968;&#25454;&#35775;&#38382;&#25216;&#26415;&#65292;&#22914;JDBC&#12289;JDO&#21644;Hibernate&#65292;
			Spring&#25552;&#20379;&#20102;&#19968;&#22871;<tt class="literal">&#25277;&#35937;</tt>DAO&#31867;&#20379;&#20320;&#25193;&#23637;&#12290;&#36825;&#20123;&#25277;&#35937;&#31867;&#25552;&#20379;&#20102;&#19968;&#20123;&#26041;&#27861;&#65292;&#36890;&#36807;&#23427;&#20204;&#20320;&#21487;&#20197;
			&#33719;&#24471;&#19982;&#25968;&#25454;&#35775;&#38382;&#25216;&#26415;&#30456;&#20851;&#30340;&#25968;&#25454;&#28304;&#21644;&#20854;&#20182;&#37197;&#32622;&#20449;&#24687;&#12290;
		</p><div class="itemizedlist"><ul type="disc"><li><p>
					<tt class="classname">JdbcDaoSupport</tt> - JDBC&#25968;&#25454;&#35775;&#38382;&#23545;&#35937;&#30340;&#22522;&#31867;&#12290;
					&#38656;&#35201;&#19968;&#20010;<tt class="interfacename">DataSource</tt>&#65292;&#21516;&#26102;&#20026;&#23376;&#31867;&#25552;&#20379;
					<tt class="classname">JdbcTemplate</tt>&#12290;
				</p></li><li><p>
					<tt class="classname">HibernateDaoSupport</tt> - Hibernate&#25968;&#25454;&#35775;&#38382;&#23545;&#35937;&#30340;&#22522;&#31867;&#12290;
					&#38656;&#35201;&#19968;&#20010;<tt class="interfacename">SessionFactory</tt>&#65292;&#21516;&#26102;&#20026;&#23376;&#31867;&#25552;&#20379;
					<tt class="classname">HibernateTemplate</tt>&#12290;&#20063;&#21487;&#20197;&#36873;&#25321;&#30452;&#25509;&#36890;&#36807;
					&#25552;&#20379;&#19968;&#20010;<tt class="classname">HibernateTemplate</tt>&#26469;&#21021;&#22987;&#21270;&#65292;
					&#36825;&#26679;&#23601;&#21487;&#20197;&#37325;&#29992;&#21518;&#32773;&#30340;&#35774;&#32622;&#65292;&#20363;&#22914;<tt class="interfacename">SessionFactory</tt>&#65292;
					flush&#27169;&#24335;&#65292;&#24322;&#24120;&#32763;&#35793;&#22120;&#65288;exception translator&#65289;&#31561;&#31561;&#12290;
				</p></li><li><p>
					<tt class="classname">JdoDaoSupport</tt> - JDO&#25968;&#25454;&#35775;&#38382;&#23545;&#35937;&#30340;&#22522;&#31867;&#12290;
					&#38656;&#35201;&#35774;&#32622;&#19968;&#20010;<tt class="interfacename">PersistenceManagerFactory</tt>&#65292;
					&#21516;&#26102;&#20026;&#23376;&#31867;&#25552;&#20379;<tt class="classname">JdoTemplate</tt>&#12290;
				</p></li><li><p>
					<tt class="classname">JpaDaoSupport</tt> - JPA&#25968;&#25454;&#35775;&#38382;&#23545;&#35937;&#30340;&#22522;&#31867;&#12290;
					&#38656;&#35201;&#19968;&#20010;<tt class="interfacename">EntityManagerFactory</tt>&#65292;&#21516;&#26102;
					&#20026;&#23376;&#31867;&#25552;&#20379;<tt class="classname">JpaTemplate</tt>&#12290;
				</p></li></ul></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="jdbc"></a>Chapter&nbsp;11.&nbsp;&#20351;&#29992;JDBC&#36827;&#34892;&#25968;&#25454;&#35775;&#38382;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="jdbc-introduction"></a>11.1.&nbsp;&#31616;&#20171;</h2></div></div><div></div></div><p>
			Spring JDBC&#25277;&#35937;&#26694;&#26550;&#25152;&#24102;&#26469;&#30340;&#20215;&#20540;&#23558;&#22312;&#20197;&#19979;&#20960;&#20010;&#26041;&#38754;&#24471;&#20197;&#20307;&#29616;&#65306;&#65288;&#27880;&#65306;&#20351;&#29992;&#20102;Spring JDBC&#25277;&#35937;&#26694;&#26550;&#20043;&#21518;&#65292;&#24212;&#29992;&#24320;&#21457;&#20154;&#21592;&#21482;&#38656;&#35201;&#23436;&#25104;&#26012;&#20307;&#23383;&#37096;&#20998;&#30340;&#32534;&#30721;&#24037;&#20316;&#12290;&#65289;
		</p><div class="orderedlist"><ol type="1"><li><p>&#23450;&#20041;&#25968;&#25454;&#24211;&#36830;&#25509;&#21442;&#25968;</p></li><li><p>&#25171;&#24320;&#25968;&#25454;&#24211;&#36830;&#25509;</p></li><li><p><span class="emphasis"><em>&#22768;&#26126;SQL&#35821;&#21477;</em></span></p></li><li><p>&#39044;&#32534;&#35793;&#24182;&#25191;&#34892;SQL&#35821;&#21477;</p></li><li><p>&#36941;&#21382;&#26597;&#35810;&#32467;&#26524;&#65288;&#22914;&#26524;&#38656;&#35201;&#30340;&#35805;&#65289;</p></li><li><p><span class="emphasis"><em>&#22788;&#29702;&#27599;&#19968;&#27425;&#36941;&#21382;&#25805;&#20316;</em></span></p></li><li><p>&#22788;&#29702;&#25243;&#20986;&#30340;&#20219;&#20309;&#24322;&#24120;</p></li><li><p>&#22788;&#29702;&#20107;&#21153;</p></li><li><p>&#20851;&#38381;&#25968;&#25454;&#24211;&#36830;&#25509;</p></li></ol></div><p>
			Spring&#23558;&#26367;&#25105;&#20204;&#23436;&#25104;&#25152;&#26377;&#20351;&#29992;JDBC API&#36827;&#34892;&#24320;&#21457;&#30340;&#21333;&#35843;&#20047;&#21619;&#30340;&#12289;&#24213;&#23618;&#32454;&#33410;&#22788;&#29702;&#24037;&#20316;&#12290;
		</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-choose-style"></a>11.1.1.&nbsp;&#36873;&#25321;&#19968;&#31181;&#24037;&#20316;&#27169;&#24335;</h3></div></div><div></div></div><p>
&#20351;&#29992;Spring&#36827;&#34892;&#22522;&#26412;&#30340;JDBC&#35775;&#38382;&#25968;&#25454;&#24211;&#26377;&#22810;&#31181;&#36873;&#25321;&#12290;Spring&#33267;&#23569;&#25552;&#20379;&#20102;&#19977;&#31181;&#19981;&#21516;&#30340;&#24037;&#20316;&#27169;&#24335;&#65306;JdbcTemplate,
&#19968;&#20010;&#22312;Spring2.5&#20013;&#26032;&#25552;&#20379;&#30340;SimpleJdbc&#31867;&#33021;&#22815;&#26356;&#22909;&#30340;&#22788;&#29702;&#25968;&#25454;&#24211;&#20803;&#25968;&#25454;; &#36824;&#26377;&#19968;&#31181;&#31216;&#20043;&#20026;RDBMS
Object&#30340;&#39118;&#26684;&#30340;&#38754;&#21521;&#23545;&#35937;&#23553;&#35013;&#26041;&#24335;, &#26377;&#28857;&#31867;&#20284;&#20110;JDO&#30340;&#26597;&#35810;&#35774;&#35745;&#12290; &#25105;&#20204;&#22312;&#36825;&#37324;&#31616;&#35201;&#21015;&#20030;&#20320;&#37319;&#21462;&#26576;&#19968;&#31181;&#24037;&#20316;&#26041;&#24335;&#30340;&#20027;&#35201;&#29702;&#30001;. &#19981;&#36807;&#35831;&#27880;&#24847;,
&#21363;&#20351;&#20320;&#36873;&#25321;&#20102;&#20854;&#20013;&#30340;&#19968;&#31181;&#24037;&#20316;&#27169;&#24335;, &#20320;&#20381;&#28982;&#21487;&#20197;&#22312;&#20320;&#30340;&#20195;&#30721;&#20013;&#28151;&#29992;&#20854;&#20182;&#20219;&#20309;&#19968;&#31181;&#27169;&#24335;&#20197;&#33719;&#21462;&#20854;&#24102;&#26469;&#30340;&#22909;&#22788;&#21644;&#20248;&#21183;&#12290; &#25152;&#26377;&#30340;&#24037;&#20316;&#27169;&#24335;&#37117;&#24517;&#39035;&#35201;&#27714;JDBC
2.0&#20197;&#19978;&#30340;&#25968;&#25454;&#24211;&#39537;&#21160;&#30340;&#25903;&#25345;, &#20854;&#20013;&#19968;&#20123;&#39640;&#32423;&#30340;&#21151;&#33021;&#21487;&#33021;&#38656;&#35201;JDBC 3.0&#20197;&#19978;&#30340;&#25968;&#25454;&#24211;&#39537;&#21160;&#25903;&#25345;&#12290; </p><div class="itemizedlist"><ul type="disc"><li><p>
          	<span class="bold"><b>JdbcTemplate</b></span> - &#36825;&#26159;&#32463;&#20856;&#30340;&#20063;&#26159;&#26368;&#24120;&#29992;&#30340;Spring&#23545;&#20110;JDBC&#35775;&#38382;&#30340;&#26041;&#26696;&#12290;&#36825;&#20063;&#26159;&#26368;&#20302;&#32423;&#21035;&#30340;&#23553;&#35013;, &#20854;&#20182;&#30340;&#24037;&#20316;&#27169;&#24335;&#20107;&#23454;&#19978;&#22312;&#24213;&#23618;&#20351;&#29992;&#20102;JdbcTemplate&#20316;&#20026;&#20854;&#24213;&#23618;&#30340;&#23454;&#29616;&#22522;&#30784;&#12290;JdbcTemplate&#22312;JDK 1.4&#20197;&#19978;&#30340;&#29615;&#22659;&#19978;&#24037;&#20316;&#24471;&#24456;&#22909;&#12290;
          </p></li><li><p>
           		<span class="bold"><b>NamedParameterJdbcTemplate</b></span> - &#23545;JdbcTemplate&#20570;&#20102;&#23553;&#35013;&#65292;&#25552;&#20379;&#20102;&#26356;&#21152;&#20415;&#25463;&#30340;&#22522;&#20110;&#21629;&#21517;&#21442;&#25968;&#30340;&#20351;&#29992;&#26041;&#24335;&#32780;&#19981;&#26159;&#20256;&#32479;&#30340;JDBC&#25152;&#20351;&#29992;&#30340;&#8220;?&#8221;&#20316;&#20026;&#21442;&#25968;&#30340;&#21344;&#20301;&#31526;&#12290;&#36825;&#31181;&#26041;&#24335;&#22312;&#20320;&#38656;&#35201;&#20026;&#26576;&#20010;SQL&#25351;&#23450;&#35768;&#22810;&#20010;&#21442;&#25968;&#26102;&#65292;&#26174;&#24471;&#26356;&#21152;&#30452;&#35266;&#32780;&#26131;&#29992;&#12290;&#35813;&#29305;&#24615;&#24517;&#39035;&#24037;&#20316;&#22312;JDK 1.4&#20197;&#19978;&#12290;
           </p></li><li><p>
          		<span class="bold"><b>SimpleJdbcTemplate</b></span>
- &#36825;&#20010;&#31867;&#32467;&#21512;&#20102;JdbcTemplate&#21644;NamedParameterJdbcTemplate&#30340;&#26368;&#24120;&#29992;&#30340;&#21151;&#33021;&#65292;&#21516;&#26102;&#23427;&#20063;&#21033;&#29992;&#20102;&#19968;&#20123;Java
5&#30340;&#29305;&#24615;&#25152;&#24102;&#26469;&#30340;&#20248;&#21183;&#65292;&#20363;&#22914;&#27867;&#22411;&#12289;varargs&#21644;autoboxing&#31561;&#65292;&#20174;&#32780;&#25552;&#20379;&#20102;&#26356;&#21152;&#31616;&#20415;&#30340;API&#35775;&#38382;&#26041;&#24335;&#12290;&#38656;&#35201;&#24037;&#20316;&#22312;Java
5&#20197;&#19978;&#30340;&#29615;&#22659;&#20013;&#12290; </p></li><li><p>
          		<span class="bold"><b>SimpleJdbcInsert &#21644; SimpleJdbcCall</b></span>
-
&#36825;&#20004;&#20010;&#31867;&#21487;&#20197;&#20805;&#20998;&#21033;&#29992;&#25968;&#25454;&#24211;&#20803;&#25968;&#25454;&#30340;&#29305;&#24615;&#26469;&#31616;&#21270;&#37197;&#32622;&#12290;&#36890;&#36807;&#20351;&#29992;&#36825;&#20004;&#20010;&#31867;&#36827;&#34892;&#32534;&#31243;&#65292;&#20320;&#21487;&#20197;&#20165;&#20165;&#25552;&#20379;&#25968;&#25454;&#24211;&#34920;&#21517;&#25110;&#32773;&#23384;&#20648;&#36807;&#31243;&#30340;&#21517;&#31216;&#20197;&#21450;&#19968;&#20010;Map&#20316;&#20026;&#21442;&#25968;&#12290;&#20854;
&#20013;Map&#30340;key&#38656;&#35201;&#19982;&#25968;&#25454;&#24211;&#34920;&#20013;&#30340;&#23383;&#27573;&#20445;&#25345;&#19968;&#33268;&#12290;&#36825;&#20004;&#20010;&#31867;&#36890;&#24120;&#21644;SimpleJdbcTemplate&#37197;&#21512;&#20351;&#29992;&#12290;&#36825;&#20004;&#20010;&#31867;&#38656;&#35201;&#24037;&#20316;&#22312;JDK
5&#20197;&#19978;&#65292;&#21516;&#26102;&#25968;&#25454;&#24211;&#38656;&#35201;&#25552;&#20379;&#36275;&#22815;&#30340;&#20803;&#25968;&#25454;&#20449;&#24687;&#12290; </p></li><li><p>
          	<span class="bold"><b>RDBMS &#23545;&#35937;&#21253;&#25324;MappingSqlQuery, SqlUpdate and StoredProcedure</b></span> - &#36825;&#31181;&#26041;&#24335;&#20801;&#35768;&#20320;&#22312;&#21021;&#22987;&#21270;&#20320;&#30340;&#25968;&#25454;&#35775;&#38382;&#23618;&#26102;&#21019;&#24314;&#21487;&#37325;&#29992;&#24182;&#19988;&#32447;&#31243;&#23433;&#20840;&#30340;&#23545;&#35937;&#12290;&#35813;&#23545;&#35937;&#22312;&#20320;&#23450;&#20041;&#20102;&#20320;&#30340;&#26597;&#35810;&#35821;&#21477;&#65292;&#22768;&#26126;&#26597;&#35810;&#21442;&#25968;&#24182;&#32534;&#35793;&#30456;&#24212;&#30340;Query&#20043;&#21518;&#34987;&#27169;&#22411;&#21270;&#12290;&#19968;&#26086;&#27169;&#22411;&#21270;&#23436;&#25104;&#65292;&#20219;&#20309;&#25191;&#34892;&#20989;&#25968;&#23601;&#21487;&#20197;&#20256;&#20837;&#19981;&#21516;&#30340;&#21442;&#25968;&#23545;&#20043;&#36827;&#34892;&#22810;&#27425;&#35843;&#29992;&#12290;&#36825;&#31181;&#26041;&#24335;&#38656;&#35201;&#24037;&#20316;&#22312;JDK 1.4&#20197;&#19978;&#12290;
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-packages"></a>11.1.2.&nbsp;Spring JDBC&#21253;&#32467;&#26500;</h3></div></div><div></div></div><p>
			Spring Framework&#30340;JDBC&#25277;&#35937;&#26694;&#26550;&#30001;&#22235;&#20010;&#21253;&#26500;&#25104;&#65306;<tt class="literal">core</tt>&#12289; <tt class="literal">dataSource</tt>&#12289;<tt class="literal">object</tt>&#20197;&#21450;<tt class="literal">support</tt>&#12290;
	  </p><p>
			<tt class="literal">org.springframework.jdbc.core</tt>&#21253;&#30001;<tt class="classname">JdbcTemplate</tt>&#31867;&#20197;&#21450;&#30456;&#20851;&#30340;&#22238;&#35843;&#25509;&#21475;&#65288;callback interface&#65289;&#21644;&#31867;&#32452;&#25104;&#12290;
			<tt class="literal">org.springframework.jdbc.core.simple</tt> &#23376;&#21253;&#21017;&#21253;&#21547;&#20102;
 <tt class="classname">SimpleJdbcTemplate</tt> &#31867;&#20197;&#21450;&#30456;&#20851;&#30340;<tt class="classname">SimpleJdbcInsert</tt> &#31867;&#21644;<tt class="classname">SimpleJdbcCall</tt> &#31867;&#12290;
			<tt class="literal">org.springframework.jdbc.core.namedparam</tt> &#23376;&#21253;&#21017;&#21253;&#21547;&#20102;<tt class="classname">NamedParameterJdbcTemplate</tt>	&#31867;&#20197;&#21450;&#20854;&#30456;&#20851;&#30340;&#25903;&#25345;&#31867;&#12290;
	  </p><p>
		<tt class="literal">org.springframework.jdbc.datasource</tt>&#21253;&#25552;&#20379;&#20102;&#19968;&#20123;&#24037;&#20855;&#31867;&#26469;&#31616;&#21270;&#23545;<tt class="interfacename">DataSource</tt>&#30340;&#35775;&#38382;&#12290;&#21516;&#26102;&#25552;&#20379;&#20102;&#22810;&#31181;&#31616;&#21333;&#30340;<tt class="interfacename">DataSource</tt>&#23454;&#29616;&#12290;&#36825;&#20123;&#23454;&#29616;&#21487;&#20197;&#33073;&#31163;J2EE&#23481;&#22120;&#36827;&#34892;&#29420;&#31435;&#27979;&#35797;&#21644;&#36816;&#34892;&#12290;
      &#36825;&#20123;&#24037;&#20855;&#31867;&#25552;&#20379;&#20102;&#19968;&#20123;&#38745;&#24577;&#26041;&#27861;&#65292;&#20801;&#35768;&#20320;&#36890;&#36807;JNDI&#26469;&#33719;&#21462;&#25968;&#25454;&#24211;&#36830;&#25509;&#21644;&#20851;&#38381;&#36830;&#25509;&#12290;&#21516;&#26102;&#25903;&#25345;&#32465;&#23450;&#21040;&#24403;&#21069;&#32447;&#31243;&#30340;&#25968;&#25454;&#24211;&#36830;&#25509;&#12290;&#20363;&#22914;&#20351;&#29992;<tt class="classname">DataSourceTransactionManager</tt>&#12290;
      </p><p>
	  	&#25509;&#30528;<tt class="literal">org.springframework.jdbc.object</tt>&#21253;&#21253;&#21547;&#20102;&#19968;&#20123;&#31867;&#65292;&#29992;&#20110;&#23558;RDBMS&#26597;&#35810;&#12289;&#26356;&#26032;&#20197;&#21450;&#23384;&#20648;&#36807;&#31243;&#34920;&#36848;&#20026;&#19968;&#20123;&#21487;&#37325;&#29992;&#30340;&#12289;&#32447;&#31243;&#23433;&#20840;&#30340;&#23545;&#35937;&#12290;&#36825;&#31181;&#26041;&#24335;&#36890;&#36807;JDO&#36827;&#34892;&#27169;&#22411;&#21270;&#65292;&#19981;&#36807;&#36825;&#20123;&#36890;&#36807;&#26597;&#35810;&#36820;&#22238;&#30340;&#23545;&#35937;&#26159;&#19982;&#25968;&#25454;&#24211;&#33073;&#31163;&#30340;&#23545;&#35937;&#12290; &#36825;&#31181;&#23545;&#20110;JDBC&#30340;&#39640;&#23618;&#27425;&#30340;&#23553;&#35013;&#26159;&#22522;&#20110;<tt class="literal">org.springframework.jdbc.core</tt>&#21253;&#23545;JDBC&#30340;&#20302;&#23618;&#27425;&#23553;&#35013;&#20043;&#19978;&#30340;&#12290;
	  </p><p>
		&#26368;&#21518;&#65292;<tt class="literal">org.springframework.jdbc.support</tt>&#21253;&#23450;&#20041;&#20102;<tt class="classname">SQLException</tt>&#36716;&#21270;&#31867;&#20197;&#21450;&#19968;&#20123;&#20854;&#20182;&#30340;&#24037;&#20855;&#31867;&#12290;
		</p><p>
      &#22312;JDBC&#35843;&#29992;&#36807;&#31243;&#20013;&#25152;&#25243;&#20986;&#30340;&#24322;&#24120;&#37117;&#20250;&#34987;&#36716;&#21270;&#20026;&#22312;<tt class="literal">org.springframework.dao</tt>&#21253;
&#20013;&#23450;&#20041;&#30340;&#24322;&#24120;&#12290;&#20063;&#23601;&#26159;&#35828;&#65292;&#20961;&#26159;&#20351;&#29992;Spring&#30340;JDBC&#23553;&#35013;&#23618;&#30340;&#20195;&#30721;&#26080;&#38656;&#23454;&#29616;&#20219;&#20309;JDBC&#25110;&#32773;RDBMS&#30456;&#20851;&#30340;&#24322;&#24120;&#22788;&#29702;&#12290;&#25152;&#26377;&#30340;&#36825;&#20123;&#34987;&#36716;&#21270;&#30340;&#24322;&#24120;&#37117;&#26159;
unchecked&#24322;&#24120;&#65292;&#22240;&#32780;&#20063;&#32473;&#20102;&#20320;&#19968;&#31181;&#39069;&#22806;&#30340;&#36873;&#25321;&#65292;&#20320;&#21487;&#20197;&#25235;&#20303;&#36825;&#20123;&#24322;&#24120;&#65292;&#20174;&#32780;&#36716;&#21270;&#25104;&#20854;&#20182;&#31867;&#22411;&#30340;&#24322;&#24120;&#34987;&#20801;&#35768;&#35843;&#29992;&#32773;&#20256;&#25773;&#12290; </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="jdbc-core"></a>11.2.&nbsp;&#21033;&#29992;JDBC&#26680;&#24515;&#31867;&#25511;&#21046;JDBC&#30340;&#22522;&#26412;&#25805;&#20316;&#21644;&#38169;&#35823;&#22788;&#29702;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-JdbcTemplate"></a>11.2.1.&nbsp;<tt class="classname">JdbcTemplate</tt>&#31867;</h3></div></div><div></div></div><p>
			<tt class="classname">JdbcTemplate</tt>&#26159;core&#21253;&#30340;&#26680;&#24515;&#31867;&#12290;&#23427;&#26367;&#25105;&#20204;&#23436;&#25104;&#20102;&#36164;&#28304;&#30340;&#21019;&#24314;&#20197;&#21450;&#37322;&#25918;&#24037;&#20316;&#65292;&#20174;&#32780;&#31616;&#21270;&#20102;&#25105;&#20204;&#23545;JDBC&#30340;&#20351;&#29992;&#12290;
			&#23427;&#36824;&#21487;&#20197;&#24110;&#21161;&#25105;&#20204;&#36991;&#20813;&#19968;&#20123;&#24120;&#35265;&#30340;&#38169;&#35823;&#65292;&#27604;&#22914;&#24536;&#35760;&#20851;&#38381;&#25968;&#25454;&#24211;&#36830;&#25509;&#12290;
			JdbcTemplate&#23558;&#23436;&#25104;JDBC&#26680;&#24515;&#22788;&#29702;&#27969;&#31243;&#65292;&#27604;&#22914;SQL&#35821;&#21477;&#30340;&#21019;&#24314;&#12289;&#25191;&#34892;&#65292;&#32780;&#25226;SQL&#35821;&#21477;&#30340;&#29983;&#25104;&#20197;&#21450;&#26597;&#35810;&#32467;&#26524;&#30340;&#25552;&#21462;&#24037;&#20316;&#30041;&#32473;&#25105;&#20204;&#30340;&#24212;&#29992;&#20195;&#30721;&#12290;
			&#23427;&#21487;&#20197;&#23436;&#25104;SQL&#26597;&#35810;&#12289;&#26356;&#26032;&#20197;&#21450;&#35843;&#29992;&#23384;&#20648;&#36807;&#31243;&#65292;&#21487;&#20197;&#23545;<tt class="interfacename">ResultSet</tt>&#36827;&#34892;&#36941;&#21382;&#24182;&#21152;&#20197;&#25552;&#21462;&#12290;
			&#23427;&#36824;&#21487;&#20197;&#25429;&#33719;JDBC&#24322;&#24120;&#24182;&#23558;&#20854;&#36716;&#25442;&#25104;<tt class="literal">org.springframework.dao</tt>&#21253;&#20013;&#23450;&#20041;&#30340;&#65292;&#36890;&#29992;&#30340;&#65292;&#20449;&#24687;&#26356;&#20016;&#23500;&#30340;&#24322;&#24120;&#12290;
		</p><p>
			&#20351;&#29992;JdbcTemplate&#36827;&#34892;&#32534;&#30721;&#21482;&#38656;&#35201;&#26681;&#25454;&#26126;&#30830;&#23450;&#20041;&#30340;&#19968;&#32452;&#22865;&#32422;&#26469;&#23454;&#29616;&#22238;&#35843;&#25509;&#21475;&#12290;
			<tt class="interfacename">PreparedStatementCreator</tt>&#22238;&#35843;&#25509;&#21475;&#36890;&#36807;&#32473;&#23450;&#30340;<tt class="interfacename">Connection</tt>&#21019;&#24314;&#19968;&#20010;PreparedStatement&#65292;&#21253;&#21547;SQL&#21644;&#20219;&#20309;&#30456;&#20851;&#30340;&#21442;&#25968;&#12290;
			<tt class="literal">CallableStatementCreateor</tt>&#23454;&#29616;&#21516;&#26679;&#30340;&#22788;&#29702;&#65292;&#21482;&#19981;&#36807;&#23427;&#21019;&#24314;&#30340;&#26159;CallableStatement&#12290;
			<tt class="literal">RowCallbackHandler</tt>&#25509;&#21475;&#21017;&#20174;&#25968;&#25454;&#38598;&#30340;&#27599;&#19968;&#34892;&#20013;&#25552;&#21462;&#20540;&#12290;
		</p><p>
			&#25105;&#20204;&#21487;&#20197;&#22312;DAO&#23454;&#29616;&#31867;&#20013;&#36890;&#36807;&#20256;&#36882;&#19968;&#20010;<tt class="interfacename">DataSource</tt>&#24341;&#29992;&#26469;&#23436;&#25104;JdbcTemplate&#30340;&#23454;&#20363;&#21270;&#65292;&#20063;&#21487;&#20197;&#22312;Spring&#30340;IoC&#23481;&#22120;&#20013;&#37197;&#32622;&#19968;&#20010;JdbcTemplate&#30340;bean&#24182;&#36171;&#20104;DAO&#23454;&#29616;&#31867;&#20316;&#20026;&#19968;&#20010;&#23454;&#20363;&#12290;
			&#38656;&#35201;&#27880;&#24847;&#30340;&#26159;<tt class="interfacename">DataSource</tt>&#22312;Spring&#30340;IoC&#23481;&#22120;&#20013;&#24635;&#26159;&#37197;&#21046;&#25104;&#19968;&#20010;bean&#65292;&#31532;&#19968;&#31181;&#24773;&#20917;&#19979;&#65292;<tt class="interfacename">DataSource</tt> bean&#23558;&#20256;&#36882;&#32473;service&#65292;&#31532;&#20108;&#31181;&#24773;&#20917;&#19979;<tt class="interfacename">DataSource</tt> bean&#20256;&#36882;&#32473;JdbcTemplate bean&#12290;
		</p><p>
			&#26368;&#21518;&#65292;JdbcTemplate&#20013;&#20351;&#29992;&#30340;&#25152;&#26377;SQL&#23558;&#20250;&#20197;&#8220;DEBUG&#8221;&#32423;&#21035;&#35760;&#20837;&#26085;&#24535;&#65288;&#19968;&#33324;&#24773;&#20917;&#19979;&#26085;&#24535;&#30340;category&#26159;<tt class="classname">JdbcTemplate</tt>&#30456;&#24212;&#30340;&#20840;&#38480;&#23450;&#31867;&#21517;&#65292;&#19981;&#36807;&#22914;&#26524;&#38656;&#35201;&#23545;<tt class="classname">JdbcTemplate</tt>&#36827;&#34892;&#23450;&#21046;&#30340;&#35805;&#65292;&#21487;&#33021;&#26159;&#23427;&#30340;&#23376;&#31867;&#21517;&#65289;&#12290;
		</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="jdbc-JdbcTemplate-examples"></a>11.2.1.1.&nbsp;&#19968;&#20123;&#31034;&#20363;</h4></div></div><div></div></div><p>
		&#19979;&#38754;&#26159;&#19968;&#20123;&#20351;&#29992;<tt class="classname">JdbcTemplate</tt>&#31867;&#30340;&#31034;&#20363;&#12290;&#65288;&#36825;&#20123;&#31034;&#20363;&#24182;&#19981;&#26159;&#23436;&#25972;&#23637;&#31034;&#25152;&#26377;&#30340;<tt class="classname">JdbcTemplate</tt>&#25152;&#26292;&#38706;&#20986;&#26469;&#30340;&#21151;&#33021;&#12290;&#35831;&#26597;&#30475;&#19982;&#20043;&#30456;&#20851;&#30340;Javadoc&#65289;&#12290;
		</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="jdbc-JdbcTemplate-examples-query"></a>11.2.1.1.1.&nbsp;&#26597;&#35810;&#65288;SELECT&#65289;</h5></div></div><div></div></div><p>&#19968;&#20010;&#31616;&#21333;&#30340;&#20363;&#23376;&#29992;&#20110;&#23637;&#31034;&#22914;&#20309;&#33719;&#21462;&#19968;&#20010;&#34920;&#20013;&#30340;&#25152;&#26377;&#34892;&#25968;&#12290;</p><pre class="programlisting">int rowCount = this.jdbcTemplate.queryForInt("select count(0) from t_accrual");</pre><p>&#19968;&#20010;&#31616;&#21333;&#30340;&#20363;&#23376;&#23637;&#31034;&#22914;&#20309;&#36827;&#34892;&#21442;&#25968;&#32465;&#23450;&#12290;</p><pre class="programlisting">int countOfActorsNamedJoe = this.jdbcTemplate.queryForInt(
        "select count(0) from t_actors where first_name = ?", new Object[]{"Joe"});</pre><p>&#26597;&#35810;&#19968;&#20010;<tt class="classname">String</tt>&#12290;</p><pre class="programlisting">String surname = (String) this.jdbcTemplate.queryForObject(
        "select surname from t_actor where id = ?", 
        new Object[]{new Long(1212)}, String.class);</pre><p>&#26597;&#35810;&#24182;&#23558;&#32467;&#26524;&#35760;&#24405;&#20026;&#19968;&#20010;&#31616;&#21333;&#30340;&#25968;&#25454;&#27169;&#22411;&#12290;</p><pre class="programlisting">Actor actor = (Actor) this.jdbcTemplate.queryForObject(
    "select first_name, surname from t_actor where id = ?",
    new Object[]{new Long(1212)},
    new RowMapper() {

        public Object mapRow(ResultSet rs, int rowNum) throws SQLException {
            Actor actor = new Actor();
            actor.setFirstName(rs.getString("first_name"));
            actor.setSurname(rs.getString("surname"));
            return actor;
        }
    });</pre><p>&#26597;&#35810;&#24182;&#32452;&#35013;&#22810;&#20010;&#25968;&#25454;&#27169;&#22411;&#12290;</p><pre class="programlisting">Collection actors = this.jdbcTemplate.query(
    "select first_name, surname from t_actor",
    new RowMapper() {

        public Object mapRow(ResultSet rs, int rowNum) throws SQLException {
            Actor actor = new Actor();
            actor.setFirstName(rs.getString("first_name"));
            actor.setSurname(rs.getString("surname"));
            return actor;
        }
    });</pre><p>
		&#22914;&#26524;&#26368;&#21518;2&#20010;&#31034;&#20363;&#20013;&#30340;&#20195;&#30721;&#20986;&#29616;&#22312;&#21516;&#19968;&#27573;&#31243;&#24207;&#20013;&#65292;&#25105;&#20204;&#26377;&#24517;&#35201;&#21435;&#25481;&#36825;&#20123;&#37325;&#22797;&#30340;<tt class="interfacename">RowMapper</tt>&#21311;&#21517;&#31867;&#20195;&#30721;&#65292;&#23558;&#36825;&#20123;&#20195;&#30721;&#25277;&#21462;&#21040;&#19968;&#20010;&#21333;&#29420;&#30340;&#31867;&#20013;&#65288;&#36890;&#24120;&#26159;&#19968;&#20010;&#38745;&#24577;&#30340;&#20869;&#37096;&#31867;&#65289;&#12290;
			&#36825;&#26679;&#65292;&#36825;&#20010;&#20869;&#37096;&#31867;&#23601;&#21487;&#20197;&#22312;DAO&#30340;&#26041;&#27861;&#20013;&#34987;&#20849;&#20139;&#12290;&#22240;&#32780;&#65292;&#26368;&#21518;2&#20010;&#31034;&#20363;&#20889;&#25104;&#22914;&#19979;&#30340;&#24418;&#24335;&#23558;&#26356;&#21152;&#22909;&#65306;
		</p><pre class="programlisting">public Collection findAllActors() {
    return this.jdbcTemplate.query( "select first_name, surname from t_actor", new ActorMapper());
}

private static final class ActorMapper implements RowMapper {

    public Object mapRow(ResultSet rs, int rowNum) throws SQLException {
        Actor actor = new Actor();
        actor.setFirstName(rs.getString("first_name"));
        actor.setSurname(rs.getString("surname"));
        return actor;
    }
}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="jdbc-JdbcTemplate-examples-update"></a>11.2.1.1.2.&nbsp;&#26356;&#26032;&#65288;INSERT/UPDATE/DELETE&#65289;</h5></div></div><div></div></div><pre class="programlisting">this.jdbcTemplate.update(
        "insert into t_actor (first_name, surname) values (?, ?)", 
        new Object[] {"Leonor", "Watling"});</pre><pre class="programlisting">this.jdbcTemplate.update(
        "update t_actor set weapon = ? where id = ?", 
        new Object[] {"Banjo", new Long(5276)});</pre><pre class="programlisting">this.jdbcTemplate.update(
        "delete from actor where id = ?",
        new Object[] {new Long.valueOf(actorId)});</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="jdbc-JdbcTemplate-examples-other"></a>11.2.1.1.3.&nbsp;&#20854;&#20182;&#25805;&#20316;</h5></div></div><div></div></div><p>
			<tt class="methodname">execute(..)</tt>&#26041;&#27861;&#21487;&#20197;&#34987;&#29992;&#20316;&#25191;&#34892;&#20219;&#20309;&#31867;&#22411;&#30340;SQL&#65292;&#29978;&#33267;&#26159;DDL&#35821;&#21477;&#12290;
					&#36825;&#20010;&#26041;&#27861;&#30340;&#23454;&#29616;&#38656;&#35201;&#20256;&#20837;&#19968;&#20010;&#22238;&#35843;&#25509;&#21475;&#12289;&#38656;&#35201;&#32465;&#23450;&#30340;&#21442;&#25968;&#25968;&#32452;&#31561;&#20316;&#20026;&#21442;&#25968;&#12290;
			</p><pre class="programlisting">this.jdbcTemplate.execute("create table mytable (id integer, name varchar(100))");</pre><p>&#35843;&#29992;&#19968;&#20010;&#31616;&#21333;&#30340;&#23384;&#20648;&#36807;&#31243;&#65288;&#26356;&#22810;&#22797;&#26434;&#30340;&#23384;&#20648;&#36807;&#31243;&#25903;&#25345;&#35831;&#21442;&#35265;<a href="#jdbc-StoredProcedure" title="11.6.4.&nbsp;StoredProcedure&#31867;">&#23384;&#20648;&#36807;&#31243;&#25903;&#25345;</a>&#65289;&#12290;</p><pre class="programlisting">this.jdbcTemplate.update(
        "call SUPPORT.REFRESH_ACTORS_SUMMARY(?)", 
        new Object[]{Long.valueOf(unionId)});</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="jdbc-JdbcTemplate-idioms"></a>11.2.1.2.&nbsp;<tt class="classname">JdbcTemplate</tt> &#30340;&#26368;&#20339;&#23454;&#36341;</h4></div></div><div></div></div><p>
		<tt class="classname">JdbcTemplate</tt>&#31867;&#30340;&#23454;&#20363;&#26159;&#32447;&#31243;&#23433;&#20840;&#30340;&#23454;&#20363;&#12290;&#36825;&#19968;&#28857;&#38750;&#24120;&#37325;&#35201;&#65292;&#27491;&#22240;&#20026;&#22914;&#27492;&#65292;&#20320;&#21487;&#20197;&#37197;&#32622;&#19968;&#20010;&#31616;&#21333;&#30340;<tt class="classname">JdbcTemplate</tt>&#23454;&#20363;&#65292;&#24182;&#23558;&#36825;&#20010;&#8220;&#20849;&#20139;&#30340;&#8221;&#12289;&#8220;&#23433;&#20840;&#30340;&#8221;&#23454;&#20363;&#27880;&#20837;&#21040;&#19981;&#21516;&#30340;DAO&#31867;&#20013;&#21435;&#12290;
			&#21478;&#22806;&#65292; <tt class="classname">JdbcTemplate</tt> &#26159;&#26377;&#29366;&#24577;&#30340;&#65292;&#22240;&#20026;&#20182;&#25152;&#32500;&#25252;&#30340;<tt class="interfacename">DataSource</tt> &#23454;&#20363;&#26159;&#26377;&#29366;&#24577;&#30340;&#65292;&#20294;&#26159;&#36825;&#31181;&#29366;&#24577;&#26159;&#26080;&#27861;&#21464;&#21270;&#30340;&#12290;
		</p><p>&#20351;&#29992;<tt class="classname">JdbcTemplate</tt>&#30340;&#19968;&#20010;&#24120;&#35265;&#30340;&#26368;&#20339;&#23454;&#36341;&#65288;&#21516;&#26102;&#20063;&#26159;<a href="#jdbc-SimpleJdbcTemplate" title="11.2.3.&nbsp;SimpleJdbcTemplate&#31867;"><tt class="classname">SimpleJdbcTemplate</tt></a>&#21644;<a href="#jdbc-NamedParameterJdbcTemplate" title="11.2.2.&nbsp;NamedParameterJdbcTemplate&#31867;"><tt class="classname">NamedParameterJdbcTemplate</tt></a>
        &#31867;&#30340;&#26368;&#20339;&#23454;&#36341;&#65289;&#23601;&#26159;&#22312;Spring&#37197;&#32622;&#25991;&#20214;&#20013;&#37197;&#32622;&#19968;&#20010;<tt class="interfacename">DataSource</tt>&#23454;&#20363;&#65292;&#28982;&#21518;&#23558;&#36825;&#20010;&#20849;&#20139;&#30340;<tt class="interfacename">DataSource</tt>&#23454;&#20363;&#21161;&#20110;&#21040;&#20320;&#30340;DAO&#20013;&#21435;&#12290;
        &#32780;<tt class="classname">JdbcTemplate</tt>&#30340;&#23454;&#20363;&#23558;&#22312;<tt class="interfacename">DataSource</tt>&#30340;setter&#26041;&#27861;&#20013;&#34987;&#21019;&#24314;&#12290;&#36825;&#26679;&#30340;&#35805;&#65292;DAO&#21487;&#33021;&#30475;&#19978;&#21435;&#20687;&#36825;&#26679;&#65306;</p><pre class="programlisting">public class JdbcCorporateEventDao implements CorporateEventDao {

    private JdbcTemplate jdbcTemplate;

    public void setDataSource(DataSource dataSource) {
        <span class="bold"><b>this.jdbcTemplate = new JdbcTemplate(dataSource);</b></span>
    }

    <i class="lineannotation"><span class="lineannotation">// JDBC-backed implementations of the methods on the <tt class="interfacename">CorporateEventDao</tt> follow...</span></i>
}</pre><p>&#30456;&#20851;&#30340;&#37197;&#32622;&#30475;&#19978;&#21435;&#23601;&#20687;&#36825;&#26679;&#12290;</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans 
       http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"&gt;

    &lt;bean id="corporateEventDao" class="com.example.JdbcCorporateEventDao"&gt;
        &lt;property name="dataSource" ref="dataSource"/&gt;
    &lt;/bean&gt;

    <i class="lineannotation"><span class="lineannotation">&lt;!-- the <tt class="interfacename">DataSource</tt> (parameterized for configuration via a <a href="#beans-factory-placeholderconfigurer" title="3.7.2.1.&nbsp;PropertyPlaceholderConfigurer&#31034;&#20363;"><tt class="classname">PropertyPlaceHolderConfigurer</tt></a>) --&gt;</span></i>
    &lt;bean id="dataSource" destroy-method="close" class="org.apache.commons.dbcp.BasicDataSource"&gt;
        &lt;property name="driverClassName" value="${jdbc.driverClassName}"/&gt;
        &lt;property name="url" value="${jdbc.url}"/&gt;
        &lt;property name="username" value="${jdbc.username}"/&gt;
        &lt;property name="password" value="${jdbc.password}"/&gt;
    &lt;/bean&gt;

&lt;/beans&gt;</pre><p>
		&#22914;&#26524;&#20320;&#20351;&#29992;Spring&#25552;&#20379;&#30340;<tt class="classname">JdbcDaoSupport</tt>&#31867;&#65292;&#24182;&#19988;&#20320;&#30340;&#37027;&#20123;&#22522;&#20110;JDBC&#30340;DAO&#37117;&#32487;&#25215;&#33258;&#36825;&#20010;&#31867;&#65292;&#37027;&#20040;&#20320;&#20250;&#33258;&#21160;&#22320;&#20174;<tt class="classname">JdbcDaoSupport</tt>&#31867;&#20013;&#32487;&#25215;&#20102;<tt class="methodname">setDataSource(..)</tt>&#26041;&#27861;&#12290;
		&#26159;&#21542;&#23558;&#20320;&#30340;DAO&#31867;&#32487;&#25215;&#33258;&#36825;&#20123;&#31867;&#23436;&#20840;&#21462;&#20915;&#20110;&#20320;&#33258;&#24049;&#30340;&#20915;&#23450;&#65292;&#20107;&#23454;&#19978;&#36825;&#24182;&#19981;&#26159;&#24517;&#39035;&#30340;&#65292;&#22914;&#26524;&#20320;&#30475;&#19968;&#19979;<tt class="classname">JdbcDaoSupport</tt>&#31867;&#20320;&#20250;&#21457;&#29616;&#65292;&#36825;&#37324;&#21482;&#26159;&#25552;&#20379;&#20102;&#19968;&#20010;&#31616;&#20415;&#30340;&#26041;&#24335;&#32780;&#24050;&#12290;
		</p><p>
        &#26080;&#35770;&#20320;&#26159;&#21542;&#20351;&#29992;&#19978;&#36848;&#36825;&#31181;&#21021;&#22987;&#21270;&#26041;&#24335;&#65292;&#37117;&#26080;&#38656;&#22312;&#25191;&#34892;&#26576;&#20123;SQL&#25805;&#20316;&#26102;&#22810;&#27425;&#21019;&#24314;&#19968;&#20010;<tt class="classname">JdbcTemplate</tt>&#23454;&#20363;&#12290;&#35760;&#20303;&#65292;&#19968;&#26086;<tt class="classname">JdbcTemplate</tt>&#34987;&#21019;&#24314;&#65292;&#20182;&#26159;&#19968;&#20010;&#32447;&#31243;&#23433;&#20840;&#30340;&#23545;&#35937;&#12290;
        &#19968;&#20010;&#20320;&#38656;&#35201;&#21019;&#24314;&#22810;&#27425;<tt class="classname">JdbcTemplate</tt>&#23454;&#20363;&#30340;&#29702;&#30001;&#21487;&#33021;&#22312;&#20110;&#65292;&#20320;&#30340;&#24212;&#29992;&#38656;&#35201;&#35775;&#38382;&#22810;&#20010;&#19981;&#21516;&#30340;&#25968;&#25454;&#24211;&#65292;&#20174;&#32780;&#38656;&#35201;&#19981;&#21516;&#30340;<tt class="interfacename">DataSources</tt>&#26469;&#21019;&#24314;&#19981;&#21516;&#30340;<tt class="classname">JdbcTemplates</tt>&#23454;&#20363;&#12290;
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-NamedParameterJdbcTemplate"></a>11.2.2.&nbsp;<tt class="classname">NamedParameterJdbcTemplate</tt>&#31867;</h3></div></div><div></div></div><p>
      <tt class="classname">NamedParameterJdbcTemplate</tt>&#31867;&#20026;JDBC&#25805;&#20316;&#22686;&#21152;&#20102;&#21629;&#21517;&#21442;&#25968;&#30340;&#29305;&#24615;&#25903;&#25345;&#65292;&#32780;&#19981;&#26159;&#20256;&#32479;&#30340;&#20351;&#29992;&#65288;<tt class="literal">'?'</tt>&#65289;&#20316;&#20026;&#21442;&#25968;&#30340;&#21344;&#20301;&#31526;&#12290;<tt class="classname">NamedParameterJdbcTemplate</tt>&#31867;&#23545;<tt class="classname">JdbcTemplate</tt>&#31867;&#36827;&#34892;&#20102;&#23553;&#35013;&#65292;
      &#22312;&#24213;&#23618;&#65292;<tt class="classname">JdbcTemplate</tt>&#23436;&#25104;&#20102;&#22810;&#25968;&#30340;&#24037;&#20316;&#12290;&#36825;&#19968;&#20010;&#31456;&#33410;&#23558;&#20027;&#35201;&#25551;&#36848;<tt class="classname">NamedParameterJdbcTemplate</tt>&#31867;&#19982;<tt class="classname">JdbcTemplate</tt>&#31867;&#30340;&#19968;&#20123;&#21306;&#21035;&#65292;&#20063;&#23601;&#26159;&#20351;&#29992;&#21629;&#21517;&#21442;&#25968;&#36827;&#34892;JDBC&#25805;&#20316;&#12290;
      </p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">// some JDBC-backed DAO class...</span></i>
private NamedParameterJdbcTemplate namedParameterJdbcTemplate;

public void setDataSource(DataSource dataSource) {
    this.namedParameterJdbcTemplate = new NamedParameterJdbcTemplate(dataSource);
}

public int countOfActorsByFirstName(String firstName) {

    String sql = "select count(0) from T_ACTOR where first_name = :first_name";

    SqlParameterSource namedParameters = new MapSqlParameterSource("first_name", firstName);

    return namedParameterJdbcTemplate.queryForInt(sql, namedParameters);
}</pre><p>
			&#27880;&#24847;&#36825;&#37324;&#22312;<tt class="literal">'sql'</tt>&#20013;&#20351;&#29992;&#20102;&#21629;&#21517;&#21442;&#25968;&#20316;&#20026;&#21464;&#37327;&#65292;&#32780;&#36825;&#20010;&#21517;&#31216;&#25152;&#23545;&#24212;&#30340;&#20540;&#34987;&#23450;&#20041;&#22312;&#20256;&#20837;&#30340;<tt class="literal">'namedParameters'</tt>
&#20013;&#20316;&#20026;&#21442;&#25968;&#65288;&#20063;&#21487;&#20197;&#20256;&#20837;&#21040;<tt class="classname">MapSqlParameterSource</tt>&#20013;&#20316;&#20026;&#21442;&#25968;&#65289;&#12290;
		</p><p>
			&#20320;&#20063;&#21487;&#20197;&#20256;&#20837;&#35768;&#22810;&#21629;&#21517;&#21442;&#25968;&#20197;&#21450;&#20182;&#20204;&#25152;&#23545;&#24212;&#30340;&#20540;&#65292;&#20197;<tt class="interfacename">Map</tt>&#30340;&#26041;&#24335;&#65292;&#20316;&#20026;&#38190;&#20540;&#23545;&#20256;&#20837;&#21040;<tt class="classname">NamedParameterJdbcTemplate</tt>&#20013;&#12290;
      &#65288;&#20854;&#20313;&#30340;&#34987;<tt class="interfacename">NamedParameterJdbcOperations</tt>&#25152;&#26292;&#38706;&#30340;&#25509;&#21475;&#20197;&#21450;<tt class="classname">NamedParameterJdbcTemplate</tt>&#23454;&#29616;&#31867;&#36981;&#24490;&#20102;&#31867;&#20284;&#30340;&#26041;&#24335;&#65292;&#27492;&#22788;&#19981;&#21253;&#21547;&#30456;&#20851;&#20869;&#23481;&#65289;&#12290;
      		</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">// some JDBC-backed DAO class...</span></i>
private NamedParameterJdbcTemplate namedParameterJdbcTemplate;

public void setDataSource(DataSource dataSource) {
    this.namedParameterJdbcTemplate = new NamedParameterJdbcTemplate(dataSource);
}

public int countOfActorsByFirstName(String firstName) {

    String sql = "select count(0) from T_ACTOR where first_name = :first_name";

    Map namedParameters = Collections.singletonMap("first_name", firstName);

    return this.namedParameterJdbcTemplate.queryForInt(sql, namedParameters);
}</pre><p>
		<tt class="classname">NamedParameterJdbcTemplate</tt>&#31867;&#25152;&#20855;&#22791;&#30340;&#21478;&#22806;&#19968;&#20010;&#27604;&#36739;&#22909;&#30340;&#29305;&#24615;&#23601;&#26159;&#21487;&#20197;&#25509;&#25910;<tt class="interfacename">SqlParameterSource</tt>&#20316;&#20026;&#20256;&#20837;&#21442;&#25968; (&#36825;&#20010;&#31867;&#20301;&#20110;&#30456;&#21516;&#30340;&#21253;&#23450;&#20041;&#20013;)&#12290;
			&#20320;&#24050;&#32463;&#22312;&#20808;&#21069;&#30340;&#19968;&#20010;&#20363;&#23376;&#20013;&#30475;&#21040;&#20102;&#36825;&#20010;&#25509;&#21475;&#30340;&#19968;&#20010;&#20855;&#20307;&#23454;&#29616;&#31867;&#12290;&#65288;
<tt class="classname">MapSqlParameterSource</tt>&#31867;&#65289;&#12290;&#32780;<tt class="interfacename">SqlParameterSource</tt>
			&#36825;&#20010;&#25509;&#21475;&#23545;&#20110;<tt class="classname">NamedParameterJdbcTemplate</tt>&#31867;&#30340;&#25805;&#20316;&#32780;&#35328;&#26159;&#19968;&#20010;&#20256;&#20837;&#30340;&#21442;&#25968;&#12290;<tt class="classname">MapSqlParameterSource</tt>&#21482;&#26159;&#19968;&#20010;&#38750;&#24120;&#31616;&#21333;&#30340;&#23454;&#29616;&#65292;&#20351;&#29992;&#20102;<tt class="interfacename">java.util.Map</tt>&#20316;&#20026;&#36716;&#25509;&#22120;&#65292; 
			&#20854;&#20013;&#65292;Map&#20013;&#30340;Key&#34920;&#31034;&#21442;&#25968;&#21517;&#31216;&#65292;&#32780;Map&#20013;&#30340;Value&#34920;&#31034;&#21442;&#25968;&#20540;&#12290;
		</p><p>
		&#21478;&#22806;&#19968;&#20010;<tt class="interfacename">SqlParameterSource</tt>
&#30340;&#23454;&#29616;&#31867;&#26159;<tt class="classname">BeanPropertySqlParameterSource</tt>&#12290;&#36825;&#20010;&#31867;&#23545;&#20256;&#32479;&#30340;Java&#36827;&#34892;&#20102;&#23553;&#35013;&#65288;&#20063;&#23601;&#26159;&#37027;&#20123;&#31526;&#21512;<a href="http://java.sun.com/products/javabeans/docs/spec.html" target="_top">JavaBean</a>&#26631;&#20934;&#30340;&#31867;&#65289;&#65292;
			&#24182;&#19988;&#20351;&#29992;&#20102;JavaBean&#30340;&#23646;&#24615;&#20316;&#20026;&#21442;&#25968;&#30340;&#21517;&#31216;&#21644;&#20540;&#12290;</p><pre class="programlisting">public class Actor {

    private Long id;
    private String firstName;
    private String lastName;
    
    public String getFirstName() {
        return this.firstName;
    }
    
    public String getLastName() {
        return this.lastName;
    }
    
    public Long getId() {
        return this.id;
    }
    
    <i class="lineannotation"><span class="lineannotation">// setters omitted...</span></i>

}</pre><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">// some JDBC-backed DAO class...</span></i>
private NamedParameterJdbcTemplate namedParameterJdbcTemplate;

public void setDataSource(DataSource dataSource) {
    this.namedParameterJdbcTemplate = new NamedParameterJdbcTemplate(dataSource);
}

public int countOfActors(Actor exampleActor) {

    <i class="lineannotation"><span class="lineannotation">// notice how the named parameters match the properties of the above '<tt class="classname">Actor</tt>' class</span></i>
    String sql = "select count(0) from T_ACTOR where first_name = :firstName and last_name = :lastName";

    SqlParameterSource namedParameters = new BeanPropertySqlParameterSource(exampleActor);

    return this.namedParameterJdbcTemplate.queryForInt(sql, namedParameters);
}</pre><p>
			&#27880;&#24847;&#65292;<tt class="classname">NamedParameterJdbcTemplate</tt>&#31867;&#21482;&#26159;<span class="emphasis"><em>&#23553;&#35013;</em></span>&#20102;<tt class="classname">JdbcTemplate</tt>&#27169;&#26495;&#65307; 
			&#22240;&#32780;&#22914;&#26524;&#20320;&#38656;&#35201;&#35775;&#38382;&#30456;&#24212;&#34987;&#23553;&#35013;&#30340;<tt class="classname">JdbcTemplate</tt>&#31867;&#65292;&#24182;&#35775;&#38382;&#19968;&#20123;&#21482;&#26377;&#22312;<tt class="classname">JdbcTemplate</tt>&#20013;&#25317;&#26377;&#30340;&#21151;&#33021;&#65292;&#20320;&#38656;&#35201;&#20351;&#29992;<tt class="methodname">getJdbcOperations()</tt>&#26041;&#27861;&#26469;&#36827;&#34892;&#35775;&#38382;&#12290;
		</p><p>
      &#35831;&#21442;&#29031;<a href="#jdbc-JdbcTemplate-idioms" title="11.2.1.2.&nbsp;JdbcTemplate &#30340;&#26368;&#20339;&#23454;&#36341;">Section&nbsp;11.2.1.2, &#8220;JdbcTemplate &#30340;&#26368;&#20339;&#23454;&#36341;&#8221;</a>&#26469;&#33719;&#21462;&#19968;&#20123;&#20351;&#29992;<tt class="classname">NamedParameterJdbcTemplate</tt>&#30340;&#26368;&#20339;&#23454;&#36341;&#12290;
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-SimpleJdbcTemplate"></a>11.2.3.&nbsp;<tt class="classname">SimpleJdbcTemplate</tt>&#31867;</h3></div></div><div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p><span class="emphasis"><em><tt class="classname">SimpleJdbcTemplate</tt>&#25152;&#25552;&#20379;&#30340;&#19968;&#20123;&#29305;&#24615;&#24517;&#39035;&#24037;&#20316;&#22312;Java 5&#21450;&#20197;&#19978;&#29256;&#26412;&#12290;</em></span></p></td></tr></tbody></table></div><p>
	<tt class="classname">SimpleJdbcTemplate</tt>&#31867;&#26159;&#23545;<tt class="classname">JdbcTemplate</tt>&#31867;&#36827;&#34892;&#30340;&#23553;&#35013;&#65292;&#20174;&#32780;&#21487;&#20197;&#20805;&#20998;&#21033;&#29992;Java 5&#25152;&#24102;&#26469;&#30340;varargs&#21644;autoboxing&#31561;&#29305;&#24615;&#12290;
      <tt class="classname">SimpleJdbcTemplate</tt>&#31867;&#23436;&#20840;&#21033;&#29992;&#20102;Java 5&#35821;&#27861;&#25152;&#24102;&#26469;&#30340;&#34588;&#31958;&#25928;&#24212;&#12290;&#20961;&#26159;&#20351;&#29992;&#36807;Java 5&#30340;&#31243;&#24207;&#21592;&#20204;&#22914;&#26524;&#35201;&#20174;Java 5&#36801;&#31227;&#22238;&#20043;&#21069;&#30340;JDK&#29256;&#26412;&#65292;&#26080;&#30097;&#20250;&#21457;&#29616;&#36825;&#20123;&#29305;&#24615;&#25152;&#24102;&#26469;&#30340;&#34588;&#31958;&#25928;&#24212;&#12290;
      </p><p>
		<span class="emphasis"><em>&#8220;before and after&#8221;</em></span>&#31034;&#20363;&#21487;&#20197;&#25104;&#20026;<tt class="classname">SimpleJdbcTemplate</tt>&#31867;&#25152;&#24102;&#26469;&#30340;&#34588;&#31958;&#25928;&#24212;&#30340;&#26368;&#20339;&#35808;&#37322;&#12290;
			&#19979;&#38754;&#30340;&#20195;&#30721;&#31034;&#20363;&#39318;&#20808;&#23637;&#31034;&#20102;&#20351;&#29992;&#20256;&#32479;&#30340;<tt class="classname">JdbcTemplate</tt>&#36827;&#34892;JDBC&#35775;&#38382;&#30340;&#20195;&#30721;&#65292;&#25509;&#30528;&#26159;&#20351;&#29992;<tt class="classname">SimpleJdbcTemplate</tt>&#31867;&#20570;&#21516;&#26679;&#30340;&#20107;&#24773;&#12290;
		</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">// classic <tt class="classname">JdbcTemplate</tt>-style...</span></i>
private JdbcTemplate jdbcTemplate;

public void setDataSource(DataSource dataSource) {
    this.jdbcTemplate = new JdbcTemplate(dataSource);
}

public Actor findActor(long id) {
    String sql = "select id, first_name, last_name from T_ACTOR where id = ?";
    
    RowMapper mapper = new RowMapper() {
    
        public Object mapRow(ResultSet rs, int rowNum) throws SQLException {
            Actor actor = new Actor();
            actor.setId(rs.getLong("id"));
            actor.setFirstName(rs.getString("first_name"));
            actor.setLastName(rs.getString("last_name"));
            return actor;
        }
    };
    
    <i class="lineannotation"><span class="lineannotation">// notice the cast, the wrapping up of the 'id' argument
    // in an array, and the boxing of the 'id' argument as a reference type</span></i>
    return (Actor) jdbcTemplate.queryForObject(sql, mapper, new Object[] {Long.valueOf(id)});
}</pre><p>&#19979;&#38754;&#26159;&#21516;&#26679;&#30340;&#36923;&#36753;&#65292;&#20351;&#29992;&#20102;<tt class="classname">SimpleJdbcTemplate</tt>&#65307;&#21487;&#20197;&#30475;&#21040;&#20195;&#30721;&#8220;&#24178;&#20928;&#8221;&#22810;&#20102;&#65306;</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">// <tt class="classname">SimpleJdbcTemplate</tt>-style...</span></i>
private SimpleJdbcTemplate simpleJdbcTemplate;

public void setDataSource(DataSource dataSource) {
    this.simpleJdbcTemplate = new SimpleJdbcTemplate(dataSource);
}

public Actor findActor(long id) {
    String sql = "select id, first_name, last_name from T_ACTOR where id = ?";

    ParameterizedRowMapper&lt;Actor&gt; mapper = new ParameterizedRowMapper&lt;Actor&gt;() {
    
        <i class="lineannotation"><span class="lineannotation">// notice the return type with respect to Java 5 covariant return types</span></i>
        public Actor mapRow(ResultSet rs, int rowNum) throws SQLException {
            Actor actor = new Actor();
            actor.setId(rs.getLong("id"));
            actor.setFirstName(rs.getString("first_name"));
            actor.setLastName(rs.getString("last_name"));
            return actor;
        }
    };

    return this.simpleJdbcTemplate.queryForObject(sql, mapper, id);
}</pre><p>&#35831;&#21516;&#26679;&#21442;&#29031;<a href="#jdbc-JdbcTemplate-idioms" title="11.2.1.2.&nbsp;JdbcTemplate &#30340;&#26368;&#20339;&#23454;&#36341;">Section&nbsp;11.2.1.2, &#8220;JdbcTemplate &#30340;&#26368;&#20339;&#23454;&#36341;&#8221;</a>&#26469;&#33719;&#21462;&#19968;&#20123;<tt class="classname">SimpleJdbcTemplate</tt>&#30340;&#26368;&#20339;&#23454;&#36341;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p><tt class="classname">SimpleJdbcTemplate</tt>&#21482;&#26159;&#25552;&#20379;&#20102;<tt class="classname">JdbcTemplate</tt>&#25152;&#25552;&#20379;&#30340;&#21151;&#33021;&#30340;&#23376;&#31867;&#12290;
        &#22914;&#26524;&#20320;&#38656;&#35201;&#20351;&#29992;<tt class="classname">JdbcTemplate</tt>&#30340;&#26041;&#27861;&#65292;&#32780;&#36825;&#20123;&#26041;&#27861;&#21448;&#27809;&#26377;&#22312;<tt class="classname">SimpleJdbcTemplate</tt>&#20013;&#23450;&#20041;&#65292;&#20320;&#38656;&#35201;&#35843;&#29992;<tt class="methodname">getJdbcOperations()</tt>&#26041;&#27861;
        &#33719;&#21462;&#30456;&#24212;&#30340;&#26041;&#27861;&#35843;&#29992;&#12290;<tt class="interfacename">JdbcOperations</tt>&#25509;&#21475;&#20013;&#23450;&#20041;&#30340;&#26041;&#27861;&#38656;&#35201;&#22312;&#36825;&#36793;&#20570;&#24378;&#21046;&#36716;&#21270;&#25165;&#33021;&#20351;&#29992;&#12290;</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-datasource"></a>11.2.4.&nbsp;<tt class="interfacename">DataSource</tt>&#25509;&#21475;</h3></div></div><div></div></div><p>
		&#20026;&#20102;&#20174;&#25968;&#25454;&#24211;&#20013;&#21462;&#24471;&#25968;&#25454;&#65292;&#25105;&#20204;&#39318;&#20808;&#38656;&#35201;&#33719;&#21462;&#19968;&#20010;&#25968;&#25454;&#24211;&#36830;&#25509;&#12290;Spring&#36890;&#36807;<tt class="interfacename">DataSource</tt>&#23545;&#35937;&#26469;&#23436;&#25104;&#36825;&#20010;&#24037;&#20316;&#12290;
		<tt class="interfacename">DataSource</tt>&#26159;JDBC&#35268;&#33539;&#30340;&#19968;&#37096;&#20998;&#65292;&#23427;&#34987;&#35270;&#20026;&#19968;&#20010;&#36890;&#29992;&#30340;&#25968;&#25454;&#24211;&#36830;&#25509;&#24037;&#21378;&#12290;&#36890;&#36807;&#20351;&#29992;DataSource&#65292;
		Container&#25110;Framework&#21487;&#20197;&#23558;&#36830;&#25509;&#27744;&#20197;&#21450;&#20107;&#21153;&#31649;&#29702;&#30340;&#32454;&#33410;&#20174;&#24212;&#29992;&#20195;&#30721;&#20013;&#20998;&#31163;&#20986;&#26469;&#12290;
		&#20316;&#20026;&#19968;&#20010;&#24320;&#21457;&#20154;&#21592;&#65292;&#22312;&#24320;&#21457;&#21644;&#27979;&#35797;&#20135;&#21697;&#30340;&#36807;&#31243;&#20013;&#65292;&#20320;&#21487;&#33021;&#38656;&#35201;&#30693;&#36947;&#36830;&#25509;&#25968;&#25454;&#24211;&#30340;&#32454;&#33410;&#12290;&#20294;&#22312;&#20135;&#21697;&#23454;&#26045;&#26102;&#65292;&#20320;&#19981;&#38656;&#35201;&#30693;&#36947;&#36825;&#20123;&#32454;&#33410;&#12290;&#36890;&#24120;&#25968;&#25454;&#24211;&#31649;&#29702;&#21592;&#20250;&#24110;&#20320;&#35774;&#32622;&#22909;&#25968;&#25454;&#28304;&#12290;
	</p><p>
		&#22312;&#20351;&#29992;Spring JDBC&#26102;&#65292;&#20320;&#26082;&#21487;&#20197;&#36890;&#36807;JNDI&#33719;&#24471;&#25968;&#25454;&#28304;&#65292;&#20063;&#21487;&#20197;&#33258;&#34892;&#37197;&#32622;&#25968;&#25454;&#28304;&#65288;&#20351;&#29992;Spring&#25552;&#20379;&#30340;DataSource&#23454;&#29616;&#31867;&#65289;&#12290;&#20351;&#29992;&#21518;&#32773;&#21487;&#20197;&#26356;&#26041;&#20415;&#30340;&#33073;&#31163;Web&#23481;&#22120;&#26469;&#36827;&#34892;&#21333;&#20803;&#27979;&#35797;&#12290;
		&#36825;&#37324;&#25105;&#20204;&#23558;&#20351;&#29992;<tt class="classname">DriverManagerDataSource</tt>&#65292;&#19981;&#36807;DataSource&#26377;&#22810;&#31181;&#23454;&#29616;&#65292;
		&#21518;&#38754;&#25105;&#20204;&#20250;&#35762;&#21040;&#12290;&#20351;&#29992;<tt class="classname">DriverManagerDataSource</tt>&#21644;&#20320;&#20197;&#21069;&#33719;&#21462;&#19968;&#20010;JDBC&#36830;&#25509;
		&#30340;&#20570;&#27861;&#27809;&#20160;&#20040;&#20004;&#26679;&#12290;&#20320;&#39318;&#20808;&#24517;&#39035;&#25351;&#23450;JDBC&#39537;&#21160;&#31243;&#24207;&#30340;&#20840;&#38480;&#23450;&#21517;&#65292;&#36825;&#26679;<tt class="classname">DriverManager</tt>
		&#25165;&#33021;&#21152;&#36733;JDBC&#39537;&#21160;&#31867;&#65292;&#25509;&#30528;&#20320;&#24517;&#39035;&#25552;&#20379;&#19968;&#20010;url&#65288;&#22240;JDBC&#39537;&#21160;&#32780;&#24322;&#65292;&#20026;&#20102;&#20445;&#35777;&#35774;&#32622;&#27491;&#30830;&#35831;&#21442;&#32771;&#30456;&#20851;JDBC&#39537;&#21160;&#30340;&#25991;&#26723;&#65289;&#65292;
		&#26368;&#21518;&#20320;&#24517;&#39035;&#25552;&#20379;&#19968;&#20010;&#29992;&#25143;&#36830;&#25509;&#25968;&#25454;&#24211;&#30340;&#29992;&#25143;&#21517;&#21644;&#23494;&#30721;&#12290;&#19979;&#38754;&#25105;&#20204;&#23558;&#36890;&#36807;&#19968;&#20010;&#20363;&#23376;&#26469;&#35828;&#26126;&#22914;&#20309;&#37197;&#32622;&#19968;&#20010;<tt class="classname">DriverManagerDataSource</tt>&#65306;
		</p><pre class="programlisting">DriverManagerDataSource dataSource = new DriverManagerDataSource();
dataSource.setDriverClassName("org.hsqldb.jdbcDriver");
dataSource.setUrl("jdbc:hsqldb:hsql://localhost:");
dataSource.setUsername("sa");
dataSource.setPassword("");</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-SQLExceptionTranslator"></a>11.2.5.&nbsp;<tt class="interfacename">SQLExceptionTranslator</tt>&#25509;&#21475;</h3></div></div><div></div></div><p>
			<tt class="interfacename">SQLExceptionTranslator</tt>&#26159;&#19968;&#20010;&#25509;&#21475;&#65292;&#22914;&#26524;&#20320;&#38656;&#35201;&#22312;
			<tt class="classname">SQLException</tt>&#21644;<tt class="classname">org.springframework.dao.DataAccessException</tt>&#20043;&#38388;&#20316;&#36716;&#25442;&#65292;&#37027;&#20040;&#24517;&#39035;&#23454;&#29616;&#35813;&#25509;&#21475;&#12290;
			&#36716;&#25442;&#22120;&#31867;&#30340;&#23454;&#29616;&#21487;&#20197;&#37319;&#29992;&#19968;&#33324;&#36890;&#29992;&#30340;&#20570;&#27861;(&#27604;&#22914;&#20351;&#29992;JDBC&#30340;SQLState code)&#65292;&#22914;&#26524;&#20026;&#20102;&#20351;&#36716;&#25442;&#26356;&#20934;&#30830;&#65292;&#20063;&#21487;&#20197;&#36827;&#34892;&#23450;&#21046;&#65288;&#27604;&#22914;&#20351;&#29992;Oracle&#30340;error code&#65289;&#12290;
		</p><p>
			<tt class="classname">SQLErrorCodeSQLExceptionTranslator</tt>&#26159;SQLExceptionTranslator&#30340;&#40664;&#35748;&#23454;&#29616;&#12290;
			&#35813;&#23454;&#29616;&#20351;&#29992;&#25351;&#23450;&#25968;&#25454;&#24211;&#21378;&#21830;&#30340;error code&#65292;&#27604;&#37319;&#29992;<tt class="literal">SQLState</tt>&#26356;&#31934;&#30830;&#12290;&#36716;&#25442;&#36807;&#31243;&#22522;&#20110;&#19968;&#20010;JavaBean&#65288;&#31867;&#22411;&#20026;<tt class="classname">SQLErrorCodes</tt>&#65289;&#20013;&#30340;error code&#12290;
			&#36825;&#20010;JavaBean&#30001;<tt class="classname">SQLErrorCodesFactory</tt>&#24037;&#21378;&#31867;&#21019;&#24314;&#65292;&#20854;&#20013;&#30340;&#20869;&#23481;&#26469;&#33258;&#20110;
			&#8220;sql-error-codes.xml&#8221;&#37197;&#32622;&#25991;&#20214;&#12290;&#35813;&#25991;&#20214;&#20013;&#30340;&#25968;&#25454;&#24211;&#21378;&#21830;&#20195;&#30721;&#22522;&#20110; <tt class="interfacename">Database MetaData</tt> &#20449;&#24687;&#20013;&#30340;DatabaseProductName&#65292;&#20174;&#32780;&#37197;&#21512;&#24403;&#21069;&#25968;&#25454;&#24211;&#30340;&#20351;&#29992;&#12290;
		</p><p>
      <tt class="classname">SQLErrorCodeSQLExceptionTranslator</tt>&#20351;&#29992;&#20197;&#19979;&#30340;&#21305;&#37197;&#35268;&#21017;&#65306;
      </p><div class="itemizedlist"><ul compact="compact" type="disc"><li><p>
				&#39318;&#20808;&#26816;&#26597;&#26159;&#21542;&#23384;&#22312;&#23436;&#25104;&#23450;&#21046;&#36716;&#25442;&#30340;&#23376;&#31867;&#23454;&#29616;&#12290;&#36890;&#24120;<tt class="classname">SQLErrorCodeSQLExceptionTranslator</tt>
				&#36825;&#20010;&#31867;&#21487;&#20197;&#20316;&#20026;&#19968;&#20010;&#20855;&#20307;&#31867;&#20351;&#29992;&#65292;&#19981;&#38656;&#35201;&#36827;&#34892;&#23450;&#21046;&#65292;&#37027;&#20040;&#36825;&#20010;&#35268;&#21017;&#23558;&#19981;&#36866;&#29992;&#12290;
			</p></li><li><p>
				&#25509;&#30528;&#23558;SQLException&#30340;error code&#19982;&#38169;&#35823;&#20195;&#30721;&#38598;&#20013;&#30340;error code&#36827;&#34892;&#21305;&#37197;&#12290;
				&#40664;&#35748;&#24773;&#20917;&#19979;&#38169;&#35823;&#20195;&#30721;&#38598;&#23558;&#20174;<tt class="classname">SQLErrorCodesFactory</tt>&#21462;&#24471;&#12290;
				&#38169;&#35823;&#20195;&#30721;&#38598;&#26469;&#33258;classpath&#19979;&#30340;sql-error-codes.xml&#25991;&#20214;&#65292;&#23427;&#20204;&#23558;&#19982;&#25968;&#25454;&#24211;metadata&#20449;&#24687;&#20013;&#30340;database name&#36827;&#34892;&#26144;&#23556;&#12290;
			</p></li><li><p>
				&#20351;&#29992;fallback&#32763;&#35793;&#22120;&#12290;<tt class="classname">SQLStateSQLExceptionTranslator</tt>&#31867;&#26159;&#32570;&#30465;&#30340;fallback&#32763;&#35793;&#22120;&#12290;
			</p></li></ul></div><p>
        </p><p>
			<tt class="classname">SQLErrorCodeSQLExceptionTranslator</tt>&#21487;&#20197;&#37319;&#29992;&#19979;&#38754;&#30340;&#26041;&#24335;&#36827;&#34892;&#25193;&#23637;&#65306;
		</p><pre class="programlisting">public class MySQLErrorCodesTranslator extends SQLErrorCodeSQLExceptionTranslator {

    protected DataAccessException customTranslate(String task, String sql, SQLException sqlex) {
        if (sqlex.getErrorCode() == -12345) {
            return new DeadlockLoserDataAccessException(task, sqlex);
        }
        return null;
    }
}</pre><p>
		&#22312;&#19978;&#38754;&#30340;&#36825;&#20010;&#20363;&#23376;&#20013;&#65292;error code&#20026;<tt class="literal">'-12345'</tt>&#30340;SQLException&#23558;&#37319;&#29992;&#35813;&#36716;&#25442;&#22120;&#36827;&#34892;&#36716;&#25442;&#65292;&#32780;&#20854;&#20182;&#30340;error code&#23558;&#30001;&#40664;&#35748;&#30340;&#36716;&#25442;&#22120;&#36827;&#34892;&#36716;&#25442;&#12290;
		&#20026;&#20102;&#20351;&#29992;&#35813;&#36716;&#25442;&#22120;&#65292;&#24517;&#39035;&#23558;&#20854;&#20316;&#20026;&#21442;&#25968;&#20256;&#36882;&#32473;<tt class="classname">JdbcTemplate</tt>&#31867;&#30340;<tt class="literal">setExceptionTranslator</tt>&#26041;&#27861;&#65292;&#24182;&#22312;&#38656;&#35201;&#20351;&#29992;&#36825;&#20010;&#36716;&#25442;&#22120;&#22120;&#30340;&#25968;&#25454;
		&#23384;&#21462;&#25805;&#20316;&#20013;&#20351;&#29992;&#35813;<tt class="classname">JdbcTemplate</tt>&#12290;&#19979;&#38754;&#30340;&#20363;&#23376;&#28436;&#31034;&#20102;&#22914;&#20309;&#20351;&#29992;&#35813;&#23450;&#21046;&#36716;&#25442;&#22120;&#65306;
	  </p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">// create a <tt class="classname">JdbcTemplate</tt> and set data source</span></i> 
JdbcTemplate jt = new JdbcTemplate(); 
jt.setDataSource(dataSource); 
<i class="lineannotation"><span class="lineannotation">// create a custom translator and set the <tt class="interfacename">DataSource</tt> for the default translation lookup</span></i> 
MySQLErrorCodesTransalator tr = new MySQLErrorCodesTransalator(); 
tr.setDataSource(dataSource); 
jt.setExceptionTranslator(tr); 
<i class="lineannotation"><span class="lineannotation">// use the <tt class="classname">JdbcTemplate</tt> for this <tt class="classname">SqlUpdate</tt></span></i>
SqlUpdate su = new SqlUpdate(); 
su.setJdbcTemplate(jt); 
su.setSql("update orders set shipping_charge = shipping_charge * 1.05"); 
su.compile(); 
su.update();</pre><p>
		&#22312;&#19978;&#38754;&#30340;&#23450;&#21046;&#36716;&#25442;&#22120;&#20013;&#65292;&#25105;&#20204;&#32473;&#23427;&#27880;&#20837;&#20102;&#19968;&#20010;&#25968;&#25454;&#28304;&#65292;&#22240;&#20026;&#25105;&#20204;&#20173;&#28982;&#38656;&#35201;
		&#20351;&#29992;&#40664;&#35748;&#30340;&#36716;&#25442;&#22120;&#20174;<tt class="literal">sql-error-codes.xml</tt>&#20013;&#33719;&#21462;&#38169;&#35823;&#20195;&#30721;&#38598;&#12290;
	</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-statements-executing"></a>11.2.6.&nbsp;&#25191;&#34892;SQL&#35821;&#21477;</h3></div></div><div></div></div><p>
		&#25105;&#20204;&#20165;&#38656;&#35201;&#38750;&#24120;&#23569;&#30340;&#20195;&#30721;&#23601;&#21487;&#20197;&#36798;&#21040;&#25191;&#34892;SQL&#35821;&#21477;&#30340;&#30446;&#30340;&#65292;&#19968;&#26086;&#33719;&#24471;&#19968;&#20010;
		<tt class="interfacename">DataSource</tt>&#21644;&#19968;&#20010;<tt class="classname">JdbcTemplate</tt>&#65292;
		&#25105;&#20204;&#23601;&#21487;&#20197;&#20351;&#29992;<tt class="classname">JdbcTemplate</tt>&#25552;&#20379;&#30340;&#20016;&#23500;&#21151;&#33021;&#23454;&#29616;&#25105;&#20204;&#30340;&#25805;&#20316;&#12290;&#19979;&#38754;&#30340;&#20363;&#23376;&#20351;&#29992;&#20102;&#26497;&#23569;&#30340;&#20195;&#30721;&#23436;&#25104;&#21019;&#24314;&#19968;&#24352;&#34920;&#30340;&#24037;&#20316;&#12290;
		</p><pre class="programlisting">import javax.sql.DataSource;
import org.springframework.jdbc.core.JdbcTemplate;

public class ExecuteAStatement {

    private JdbcTemplate jdbcTemplate;

    public void setDataSource(DataSource dataSource) {
        this.jdbcTemplate = new JdbcTemplate(dataSource);
    }

    public void doExecute() {
        this.jdbcTemplate.execute("create table mytable (id integer, name varchar(100))");
    }
}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-statements-querying"></a>11.2.7.&nbsp;&#25191;&#34892;&#26597;&#35810;</h3></div></div><div></div></div><p>
			&#38500;&#20102;execute&#26041;&#27861;&#20043;&#22806;&#65292;<tt class="classname">JdbcTemplate</tt>&#36824;&#25552;&#20379;&#20102;&#22823;&#37327;&#30340;&#26597;&#35810;&#26041;&#27861;&#12290;
			&#22312;&#36825;&#20123;&#26597;&#35810;&#26041;&#27861;&#20013;&#65292;&#26377;&#24456;&#22823;&#19968;&#37096;&#20998;&#26159;&#29992;&#26469;&#26597;&#35810;&#21333;&#20540;&#30340;&#12290;&#27604;&#22914;&#36820;&#22238;&#19968;&#20010;&#27719;&#24635;&#65288;count&#65289;&#32467;&#26524;
			&#25110;&#32773;&#20174;&#36820;&#22238;&#34892;&#32467;&#26524;&#20013;&#21462;&#24471;&#25351;&#23450;&#21015;&#30340;&#20540;&#12290;&#36825;&#26102;&#25105;&#20204;&#21487;&#20197;&#20351;&#29992;<tt class="literal">queryForInt(..)</tt>&#12289;
			<tt class="literal">queryForLong(..)</tt>&#25110;&#32773;<tt class="literal">queryForObject(..)</tt>&#26041;&#27861;&#12290;
			queryForObject&#26041;&#27861;&#29992;&#26469;&#23558;&#36820;&#22238;&#30340;JDBC&#31867;&#22411;&#23545;&#35937;&#36716;&#25442;&#25104;&#25351;&#23450;&#30340;Java&#23545;&#35937;&#65292;&#22914;&#26524;&#31867;&#22411;&#36716;&#25442;&#22833;&#36133;&#23558;&#25243;&#20986;
			<tt class="classname">InvalidDataAccessApiUsageException</tt>&#24322;&#24120;&#12290;
			&#19979;&#38754;&#30340;&#20363;&#23376;&#28436;&#31034;&#20102;&#20004;&#20010;&#26597;&#35810;&#30340;&#29992;&#27861;&#65292;&#19968;&#20010;&#36820;&#22238;<tt class="literal">int</tt>&#20540;&#65292;&#21478;&#19968;&#20010;&#36820;&#22238;<tt class="classname">String</tt>&#12290;
		</p><pre class="programlisting">import javax.sql.DataSource;
import org.springframework.jdbc.core.JdbcTemplate;

public class RunAQuery {

    private JdbcTemplate jdbcTemplate;

    public void setDataSource(DataSource dataSource) {
        this.jdbcTemplate = new JdbcTemplate(dataSource);
    }
  
    public int getCount() {
        return this.jdbcTemplate.queryForInt("select count(*) from mytable");
    }

    public String getName() {
        return (String) this.jdbcTemplate.queryForObject("select name from mytable", String.class);
    }

    public void setDataSource(DataSource dataSource) {
        this.dataSource = dataSource;
    }
}</pre><p>
		&#38500;&#20102;&#36820;&#22238;&#21333;&#20540;&#30340;&#26597;&#35810;&#26041;&#27861;&#65292;<tt class="classname">JdbcTemplate</tt>&#36824;&#25552;&#20379;&#20102;&#19968;&#32452;&#36820;&#22238;List&#32467;&#26524;
		&#30340;&#26041;&#27861;&#12290;List&#20013;&#30340;&#27599;&#19968;&#39033;&#23545;&#24212;&#26597;&#35810;&#36820;&#22238;&#32467;&#26524;&#20013;&#30340;&#19968;&#34892;&#12290;&#20854;&#20013;&#26368;&#31616;&#21333;&#30340;&#26159;<tt class="literal">queryForList</tt>&#26041;&#27861;&#65292;
		&#35813;&#26041;&#27861;&#23558;&#36820;&#22238;&#19968;&#20010;<tt class="interfacename">List</tt>&#65292;&#35813;<tt class="interfacename">List</tt>&#20013;&#30340;&#27599;&#19968;&#26465;
		&#35760;&#24405;&#26159;&#19968;&#20010;<tt class="interfacename">Map</tt>&#23545;&#35937;&#65292;&#23545;&#24212;&#24212;&#25968;&#25454;&#24211;&#20013;&#26576;&#19968;&#34892;&#65307;&#32780;&#35813;<tt class="interfacename">Map</tt>
		&#20013;&#30340;&#27599;&#19968;&#39033;&#23545;&#24212;&#35813;&#25968;&#25454;&#24211;&#34892;&#20013;&#30340;&#26576;&#19968;&#21015;&#20540;&#12290;&#19979;&#38754;&#30340;&#20195;&#30721;&#29255;&#26029;&#25509;&#30528;&#19978;&#38754;&#30340;&#20363;&#23376;&#28436;&#31034;&#20102;&#22914;&#20309;&#29992;&#35813;&#26041;&#27861;&#36820;&#22238;&#34920;&#20013;&#25152;&#26377;&#35760;&#24405;&#65306;
		</p><pre class="programlisting">private JdbcTemplate jdbcTemplate;

public void setDataSource(DataSource dataSource) {
    this.jdbcTemplate = new JdbcTemplate(dataSource);
}

public List getList() {
    return this.jdbcTemplate.queryForList("select * from mytable");
}</pre><p>
		&#36820;&#22238;&#30340;&#32467;&#26524;&#38598;&#31867;&#20284;&#19979;&#38754;&#36825;&#31181;&#24418;&#24335;&#65306;
	</p><pre class="programlisting">[{name=Bob, id=1}, {name=Mary, id=2}]</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-updates"></a>11.2.8.&nbsp;&#26356;&#26032;&#25968;&#25454;&#24211;</h3></div></div><div></div></div><p>
			<tt class="classname">JdbcTemplate</tt>&#36824;&#25552;&#20379;&#20102;&#19968;&#20123;&#26356;&#26032;&#25968;&#25454;&#24211;&#30340;&#26041;&#27861;&#12290;
			&#22312;&#19979;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#26681;&#25454;&#32473;&#23450;&#30340;&#20027;&#38190;&#20540;&#23545;&#25351;&#23450;&#30340;&#21015;&#36827;&#34892;&#26356;&#26032;&#12290;
			&#20363;&#23376;&#20013;&#30340;SQL&#35821;&#21477;&#20013;&#20351;&#29992;&#20102;&#8220;?&#8221;&#21344;&#20301;&#31526;&#26469;&#25509;&#21463;&#21442;&#25968;&#65288;&#36825;&#31181;&#20570;&#27861;&#22312;&#26356;&#26032;&#21644;&#26597;&#35810;SQL&#35821;&#21477;&#20013;&#24456;&#24120;&#35265;&#65289;&#12290;
			&#20256;&#36882;&#30340;&#21442;&#25968;&#20540;&#20301;&#20110;&#19968;&#20010;&#23545;&#35937;&#25968;&#32452;&#20013;&#65288;&#22522;&#26412;&#31867;&#22411;&#38656;&#35201;&#34987;&#21253;&#35013;&#25104;&#20854;&#23545;&#24212;&#30340;&#23545;&#35937;&#31867;&#22411;&#65289;&#12290;
		</p><pre class="programlisting">import javax.sql.DataSource;

import org.springframework.jdbc.core.JdbcTemplate;

public class ExecuteAnUpdate {

    private JdbcTemplate jdbcTemplate;

    public void setDataSource(DataSource dataSource) {
        this.jdbcTemplate = new JdbcTemplate(dataSource);
    }

    public void setName(int id, String name) {
        this.jdbcTemplate.update(
                "update mytable set name = ? where id = ?", 
                new Object[] {name, new Integer(id)});
    }
}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-auto-genereted-keys"></a>11.2.9.&nbsp;&#33719;&#21462;&#33258;&#21160;&#29983;&#25104;&#30340;&#20027;&#38190;</h3></div></div><div></div></div><p>
      <tt class="classname">JdbcTemplate</tt>&#20013;&#26377;&#19968;&#20010;<tt class="methodname">update</tt>&#26041;&#27861;&#65292;&#21487;&#20197;&#26041;&#20415;&#22320;&#20174;&#25968;&#25454;&#24211;&#20013;&#33719;&#21462;&#25968;&#25454;&#24211;&#33258;&#21160;&#21019;&#24314;&#30340;&#20027;&#38190;&#12290;&#65288;&#36825;&#26159;JDBC 3.0&#30340;&#26631;&#20934; - &#21487;&#20197;&#21442;&#35265;13.6&#33410;&#33719;&#21462;&#35814;&#32454;&#20449;&#24687;&#65289;&#12290;
      &#36825;&#20010;&#26041;&#27861;&#20351;&#29992;&#20102;<tt class="classname">PreparedStatementCreator</tt>&#25509;&#21475;&#20316;&#20026;&#31532;&#19968;&#20010;&#21442;&#25968;&#65292; &#21487;&#20197;&#36890;&#36807;&#36825;&#20010;&#25509;&#21475;&#30340;&#23454;&#29616;&#31867;&#26469;&#23450;&#20041;&#30456;&#24212;&#30340;Insert&#35821;&#21477;&#12290;&#21478;&#22806;&#19968;&#20010;&#21442;&#25968;&#26159;<tt class="classname">KeyHolder</tt>&#65292;
      &#19968;&#26086;update&#26041;&#27861;&#25104;&#21151;&#65292;&#36825;&#20010;&#21442;&#25968;&#23558;&#21253;&#21547;&#29983;&#25104;&#30340;&#20027;&#38190;&#12290;&#36825;&#37324;&#23545;&#20110;&#21019;&#24314;&#21512;&#36866;&#30340;<tt class="classname">PreparedStatement</tt>&#24182;&#27809;&#26377;&#19968;&#20010;&#32479;&#19968;&#30340;&#26631;&#20934;&#12290;&#65288;&#36825;&#20063;&#35299;&#37322;&#20102;&#20989;&#25968;&#31614;&#21517;&#22914;&#27492;&#23450;&#20041;&#30340;&#21407;&#22240;&#65289;&#12290;&#19979;&#38754;&#26159;&#19968;&#20010;&#22312;Oracle&#19978;&#36816;&#34892;&#33391;&#22909;&#30340;&#31034;&#20363;&#65292;&#23427;&#21487;&#33021;&#22312;&#20854;&#20182;&#24179;&#21488;&#19978;&#26080;&#27861;&#24037;&#20316;&#65306;
      </p><pre class="programlisting">final String INSERT_SQL = "insert into my_test (name) values(?)";
final String name = "Rob";

KeyHolder keyHolder = new GeneratedKeyHolder();
jdbcTemplate.update(
    new PreparedStatementCreator() {
        public PreparedStatement createPreparedStatement(Connection connection) throws SQLException {
            PreparedStatement ps =
                connection.prepareStatement(INSERT_SQL, new String[] {"id"});
            ps.setString(1, name);
            return ps;
        }
    },
    keyHolder);

<i class="lineannotation"><span class="lineannotation">// keyHolder.getKey() now contains the generated key</span></i></pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="jdbc-connections"></a>11.3.&nbsp;&#25511;&#21046;&#25968;&#25454;&#24211;&#36830;&#25509;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-DataSourceUtils"></a>11.3.1.&nbsp;<tt class="classname">DataSourceUtils</tt>&#31867;</h3></div></div><div></div></div><p>
			<tt class="classname">DataSourceUtils</tt>&#20316;&#20026;&#19968;&#20010;&#24110;&#21161;&#31867;&#25552;&#20379;&#26131;&#29992;&#19988;&#24378;&#22823;&#30340;&#25968;&#25454;&#24211;&#35775;&#38382;&#33021;&#21147;&#65292;
			&#25105;&#20204;&#21487;&#20197;&#20351;&#29992;&#35813;&#31867;&#25552;&#20379;&#30340;<tt class="literal">&#38745;&#24577;</tt>&#26041;&#27861;&#20174;JNDI&#33719;&#21462;&#25968;&#25454;&#24211;&#36830;&#25509;&#20197;&#21450;&#22312;&#24517;&#35201;&#30340;&#26102;&#20505;&#20851;&#38381;&#20043;&#12290;
			&#23427;&#25552;&#20379;&#25903;&#25345;&#32447;&#31243;&#32465;&#23450;&#30340;&#25968;&#25454;&#24211;&#36830;&#25509;&#65288;&#27604;&#22914;&#20351;&#29992;<tt class="classname">DataSourceTransactionManager</tt>&#30340;&#26102;&#20505;&#65292;&#23558;&#25226;&#25968;&#25454;&#24211;&#36830;&#25509;&#32465;&#23450;&#21040;&#24403;&#21069;&#30340;&#32447;&#31243;&#19978;&#65289;&#12290;
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-SmartDataSource"></a>11.3.2.&nbsp;<tt class="interfacename">SmartDataSource</tt>&#25509;&#21475;</h3></div></div><div></div></div><p>
			<tt class="interfacename">SmartDataSource</tt>&#26159;<tt class="interfacename">DataSource</tt>
			&#25509;&#21475;&#30340;&#19968;&#20010;&#25193;&#23637;&#65292;&#29992;&#26469;&#25552;&#20379;&#25968;&#25454;&#24211;&#36830;&#25509;&#12290;&#20351;&#29992;&#35813;&#25509;&#21475;&#30340;&#31867;&#22312;&#25351;&#23450;&#30340;&#25805;&#20316;&#20043;&#21518;&#21487;&#20197;&#26816;&#26597;&#26159;&#21542;&#38656;&#35201;&#20851;&#38381;&#36830;&#25509;&#12290;&#35813;&#25509;&#21475;&#22312;&#26576;&#20123;&#24773;&#20917;&#19979;&#38750;&#24120;&#26377;&#29992;&#65292;&#27604;&#22914;&#26377;&#20123;&#24773;&#20917;&#38656;&#35201;&#37325;&#29992;&#25968;&#25454;&#24211;&#36830;&#25509;&#12290;
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-AbstractDataSource"></a>11.3.3.&nbsp;<tt class="classname">AbstractDataSource</tt>&#31867;</h3></div></div><div></div></div><p>
			<tt class="classname">AbstractDataSource</tt>&#26159;&#19968;&#20010;&#23454;&#29616;&#20102;<tt class="interfacename">DataSource</tt>
			&#25509;&#21475;&#30340;<tt class="literal">abstract</tt>&#22522;&#31867;&#12290;&#23427;&#23454;&#29616;&#20102;<tt class="interfacename">DataSource</tt>&#25509;&#21475;&#30340;
			&#19968;&#20123;&#26080;&#20851;&#30171;&#30162;&#30340;&#26041;&#27861;&#65292;&#22914;&#26524;&#20320;&#38656;&#35201;&#23454;&#29616;&#33258;&#24049;&#30340;<tt class="interfacename">DataSource</tt>&#65292;&#37027;&#20040;&#21487;&#20197;&#32487;&#25215;&#35813;&#31867;&#12290;
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-SingleConnectionDataSource"></a>11.3.4.&nbsp;<tt class="classname">SingleConnectionDataSource</tt>&#31867;</h3></div></div><div></div></div><p>
		<tt class="classname">SingleConnectionDataSource</tt>&#26159;<tt class="literal">SmartDataSource</tt>&#25509;&#21475;
		&#30340;&#19968;&#20010;&#23454;&#29616;&#65292;&#20854;&#20869;&#37096;&#21253;&#35013;&#20102;&#19968;&#20010;&#21333;&#36830;&#25509;&#12290;&#35813;&#36830;&#25509;&#22312;&#20351;&#29992;&#20043;&#21518;&#23558;&#19981;&#20250;&#20851;&#38381;&#65292;&#24456;&#26174;&#28982;&#23427;&#19981;&#33021;&#22312;&#22810;&#32447;&#31243;&#30340;&#29615;&#22659;&#19979;&#20351;&#29992;&#12290;
	</p><p>
		&#24403;&#23458;&#25143;&#31471;&#20195;&#30721;&#35843;&#29992;close&#26041;&#27861;&#30340;&#26102;&#20505;&#65292;&#22914;&#26524;&#23427;&#24635;&#26159;&#20551;&#35774;&#25968;&#25454;&#24211;&#36830;&#25509;&#26469;&#33258;&#36830;&#25509;&#27744;&#65288;&#23601;&#20687;&#20351;&#29992;&#25345;&#20037;&#21270;&#24037;&#20855;&#26102;&#19968;&#26679;&#65289;&#65292;
		&#20320;&#24212;&#35813;&#23558;<tt class="literal">suppressClose</tt>&#35774;&#32622;&#20026;true&#12290;&#36825;&#26679;&#65292;&#36890;&#36807;&#35813;&#31867;&#33719;&#21462;&#30340;&#23558;&#26159;&#20195;&#29702;&#36830;&#25509;&#65288;&#31105;&#27490;&#20851;&#38381;&#65289;&#32780;&#19981;&#26159;&#21407;&#26377;&#30340;&#29289;&#29702;&#36830;&#25509;&#12290;
		&#38656;&#35201;&#27880;&#24847;&#30340;&#26159;&#65292;&#25105;&#20204;&#19981;&#33021;&#25226;&#20351;&#29992;&#35813;&#31867;&#33719;&#21462;&#30340;&#25968;&#25454;&#24211;&#36830;&#25509;&#36896;&#22411;&#65288;cast&#65289;&#20026;Oracle Connection&#20043;&#31867;&#30340;&#26412;&#22320;&#25968;&#25454;&#24211;&#36830;&#25509;&#12290;
		</p><p>
			<tt class="classname">SingleConnectionDataSource</tt>&#20027;&#35201;&#22312;&#27979;&#35797;&#30340;&#26102;&#20505;&#20351;&#29992;&#12290;&#23427;&#20351;&#24471;&#27979;&#35797;&#20195;&#30721;&#24456;&#23481;&#26131;&#33073;&#31163;&#24212;&#29992;&#26381;&#21153;&#22120;&#32780;&#22312;&#19968;&#20010;&#31616;&#21333;&#30340;JNDI&#29615;&#22659;&#19979;&#36816;&#34892;&#12290;
			&#19982;<tt class="classname">DriverManagerDataSource</tt>&#19981;&#21516;&#30340;&#26159;&#65292;&#23427;&#22987;&#32456;&#21482;&#20250;&#20351;&#29992;&#21516;&#19968;&#20010;&#25968;&#25454;&#24211;&#36830;&#25509;&#65292;&#20174;&#32780;&#36991;&#20813;&#27599;&#27425;&#24314;&#31435;&#29289;&#29702;&#36830;&#25509;&#30340;&#24320;&#38144;&#12290;
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-DriverManagerDataSource"></a>11.3.5.&nbsp;<tt class="classname">DriverManagerDataSource</tt>&#31867;</h3></div></div><div></div></div><p>
			<tt class="classname">DriverManagerDataSource</tt>&#31867;&#23454;&#29616;&#20102;
<tt class="interfacename">SmartDataSource</tt>&#25509;&#21475;&#12290;&#21487;&#20197;&#20351;&#29992;bean properties&#26469;&#35774;&#32622;JDBC Driver&#23646;&#24615;&#65292;&#35813;&#31867;&#27599;&#27425;&#36820;&#22238;&#30340;&#37117;&#26159;&#19968;&#20010;&#26032;&#30340;&#36830;&#25509;&#12290;
		</p><p>
			&#35813;&#31867;&#20027;&#35201;&#22312;&#27979;&#35797;&#20197;&#21450;&#33073;&#31163;J2EE&#23481;&#22120;&#30340;&#29420;&#31435;&#29615;&#22659;&#20013;&#20351;&#29992;&#12290;&#23427;&#26082;&#21487;&#20197;&#29992;&#26469;&#22312;application context&#20013;&#20316;&#20026;&#19968;&#20010;<tt class="interfacename">DataSource</tt> bean&#65292;&#20063;&#21487;&#20197;&#22312;&#31616;&#21333;&#30340;JNDI&#29615;&#22659;&#19979;&#20351;&#29992;&#12290;
			&#30001;&#20110;<tt class="literal">Connection.close()</tt>&#20165;&#20165;&#21482;&#26159;&#31616;&#21333;&#30340;&#20851;&#38381;&#25968;&#25454;&#24211;&#36830;&#25509;&#65292;&#22240;&#27492;&#20219;&#20309;&#33021;&#22815;&#33719;&#21462;<tt class="interfacename">DataSource</tt>&#30340;&#25345;&#20037;&#21270;&#20195;&#30721;&#37117;&#33021;&#24456;&#22909;&#30340;&#24037;&#20316;&#12290;&#19981;&#36807;&#20351;&#29992;JavaBean&#39118;&#26684;&#30340;&#36830;&#25509;&#27744;
			&#65288;&#27604;&#22914;commons-dbcp&#65289;&#20063;&#24182;&#38750;&#38590;&#20107;&#12290;&#21363;&#20351;&#26159;&#22312;&#27979;&#35797;&#29615;&#22659;&#19979;&#65292;&#20351;&#29992;&#36830;&#25509;&#27744;&#20063;&#26159;&#19968;&#31181;&#27604;&#20351;&#29992;<tt class="classname">DriverManagerDataSource</tt>&#26356;&#22909;&#30340;&#20570;&#27861;&#12290;
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-TransactionAwareDataSourceProxy"></a>11.3.6.&nbsp;<tt class="classname">TransactionAwareDataSourceProxy</tt>&#31867;</h3></div></div><div></div></div><p>
			<tt class="classname">TransactionAwareDataSourceProxy</tt>&#20316;&#20026;&#30446;&#26631;<tt class="interfacename">DataSource</tt>&#30340;&#19968;&#20010;&#20195;&#29702;&#65292;
			&#22312;&#23545;&#30446;&#26631;<tt class="interfacename">DataSource</tt>&#21253;&#35013;&#30340;&#21516;&#26102;&#65292;&#36824;&#22686;&#21152;&#20102;Spring&#30340;&#20107;&#21153;&#31649;&#29702;&#33021;&#21147;&#65292;
			&#22312;&#36825;&#19968;&#28857;&#19978;&#65292;&#36825;&#20010;&#31867;&#30340;&#21151;&#33021;&#38750;&#24120;&#20687;J2EE&#26381;&#21153;&#22120;&#25152;&#25552;&#20379;&#30340;&#20107;&#21153;&#21270;&#30340;JNDI <tt class="interfacename">DataSource</tt>&#12290;
		</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>
			&#35813;&#31867;&#20960;&#20046;&#24456;&#23569;&#34987;&#29992;&#21040;&#65292;&#38500;&#38750;&#29616;&#26377;&#20195;&#30721;&#22312;&#34987;&#35843;&#29992;&#30340;&#26102;&#20505;&#38656;&#35201;&#19968;&#20010;&#26631;&#20934;&#30340; JDBC <tt class="interfacename">DataSource</tt>&#25509;&#21475;&#23454;&#29616;&#20316;&#20026;&#21442;&#25968;&#12290;
			&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#36825;&#20010;&#31867;&#21487;&#20197;&#20351;&#29616;&#26377;&#20195;&#30721;&#21442;&#19982;Spring&#30340;&#20107;&#21153;&#31649;&#29702;&#12290;&#36890;&#24120;&#26368;&#22909;&#30340;&#20570;&#27861;&#26159;&#20351;&#29992;&#26356;&#39640;&#23618;&#30340;&#25277;&#35937;
			&#26469;&#23545;&#25968;&#25454;&#28304;&#36827;&#34892;&#31649;&#29702;&#65292;&#27604;&#22914;<tt class="classname">JdbcTemplate</tt>&#21644;<tt class="classname">DataSourceUtils</tt>&#31561;&#31561;&#12290;
			</p></td></tr></tbody></table></div><p>
			<span class="emphasis"><em>&#22914;&#26524;&#38656;&#35201;&#26356;&#35814;&#32454;&#30340;&#36164;&#26009;&#65292;&#35831;&#21442;&#32771; <tt class="classname">TransactionAwareDataSourceProxy</tt> JavaDocs&#12290;</em></span>
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-DataSourceTransactionManager"></a>11.3.7.&nbsp;<tt class="classname">DataSourceTransactionManager</tt>&#31867;</h3></div></div><div></div></div><p>
			<tt class="classname">DataSourceTransactionManager</tt>&#31867;&#26159;
			<tt class="interfacename">PlatformTransactionManager</tt>&#25509;&#21475;&#30340;&#19968;&#20010;&#23454;&#29616;&#65292;&#29992;&#20110;&#22788;&#29702;&#21333;JDBC&#25968;&#25454;&#28304;&#12290;
			&#23427;&#23558;&#20174;&#25351;&#23450;DataSource&#21462;&#24471;&#30340;JDBC&#36830;&#25509;&#32465;&#23450;&#21040;&#24403;&#21069;&#32447;&#31243;&#65292;&#22240;&#27492;&#23427;&#20063;&#25903;&#25345;&#20102;&#27599;&#20010;&#25968;&#25454;&#28304;&#23545;&#24212;&#21040;&#19968;&#20010;&#32447;&#31243;&#12290;
		</p><p>
				&#25105;&#20204;&#25512;&#33616;&#22312;&#24212;&#29992;&#20195;&#30721;&#20013;&#20351;&#29992;<tt class="literal">DataSourceUtils.getConnection(DataSource)</tt>&#26469;&#33719;&#21462;
				JDBC&#36830;&#25509;&#65292;&#32780;&#19981;&#26159;&#20351;&#29992;J2EE&#26631;&#20934;&#30340;<tt class="literal">DataSource.getConnection</tt>&#12290;&#22240;&#20026;&#21069;&#32773;&#23558;&#25243;&#20986;
				unchecked&#30340;<tt class="literal">org.springframework.dao</tt>&#24322;&#24120;&#65292;&#32780;&#19981;&#26159;checked&#30340;
				<tt class="classname">SQLException</tt>&#24322;&#24120;&#12290;Spring Framework&#20013;&#25152;&#26377;&#30340;&#31867;&#65288;&#27604;&#22914;
				<tt class="classname">JdbcTemplate</tt>&#65289;&#37117;&#37319;&#29992;&#36825;&#31181;&#20570;&#27861;&#12290;&#22914;&#26524;&#19981;&#38656;&#35201;&#21644;&#36825;&#20010;
				<tt class="classname">DataSourceTransactionManager</tt>&#31867;&#19968;&#36215;&#20351;&#29992;&#65292;DataSourceUtils
				&#25552;&#20379;&#30340;&#21151;&#33021;&#36319;&#19968;&#33324;&#30340;&#25968;&#25454;&#24211;&#36830;&#25509;&#31574;&#30053;&#27809;&#26377;&#20160;&#20040;&#20004;&#26679;&#65292;&#22240;&#27492;&#23427;&#21487;&#20197;&#22312;&#20219;&#20309;&#22330;&#26223;&#19979;&#20351;&#29992;&#12290;
		</p><p>
			<tt class="classname">DataSourceTransactionManager</tt>&#31867;&#25903;&#25345;&#23450;&#21046;&#38548;&#31163;&#32423;&#21035;&#65292;&#20197;&#21450;&#23545;SQL&#35821;&#21477;&#26597;&#35810;&#36229;&#26102;&#30340;&#35774;&#23450;&#12290;
			&#20026;&#20102;&#25903;&#25345;&#21518;&#32773;&#65292;&#24212;&#29992;&#20195;&#30721;&#24517;&#39035;&#20351;&#29992;<tt class="classname">JdbcTemplate</tt>&#25110;&#32773;&#22312;&#27599;&#27425;&#21019;&#24314;SQL&#35821;&#21477;&#26102;&#35843;&#29992;<tt class="literal">DataSourceUtils.applyTransactionTimeout(..)</tt>&#26041;&#27861;&#12290;
		</p><p>
				&#22312;&#20351;&#29992;&#21333;&#20010;&#25968;&#25454;&#28304;&#30340;&#24773;&#24418;&#19979;&#65292;&#20320;&#21487;&#20197;&#29992;<tt class="classname">DataSourceTransactionManager</tt>&#26469;&#26367;&#20195;<tt class="classname">JtaTransactionManager</tt>&#65292;
				&#22240;&#20026;<tt class="classname">DataSourceTransactionManager</tt>&#19981;&#38656;&#35201;&#23481;&#22120;&#25903;&#25345;JTA&#12290;&#22914;&#26524;&#20320;&#20351;&#29992;<tt class="literal">DataSourceUtils.getConnection(DataSource)</tt>&#26469;&#33719;&#21462;
				JDBC&#36830;&#25509;&#65292;&#20108;&#32773;&#20043;&#38388;&#30340;&#20999;&#25442;&#21482;&#38656;&#35201;&#26356;&#25913;&#19968;&#20123;&#37197;&#32622;&#12290;&#26368;&#21518;&#38656;&#35201;&#27880;&#24847;&#30340;&#19968;&#28857;&#23601;&#26159;<tt class="classname">JtaTransactionManager</tt>&#19981;&#25903;&#25345;&#38548;&#31163;&#32423;&#21035;&#30340;&#23450;&#21046;&#65281;
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-NativeJdbcExtractor"></a>11.3.8.&nbsp;NativeJdbcExtractor</h3></div></div><div></div></div><p>&#26377;&#26102;&#25105;&#20204;&#38656;&#35201;&#25191;&#34892;&#29305;&#27530;&#30340;&#65292;&#30001;&#29305;&#23450;&#21378;&#21830;&#25552;&#20379;&#30340;&#19982;&#26631;&#20934;JDBC&#30340;API&#19981;&#21516;&#30340;JDBC&#26041;&#27861;&#12290;&#27492;&#26102;&#65292;&#24403;&#25105;&#20204;&#22312;&#26576;&#20010;&#24212;&#29992;&#26381;&#21153;&#22120;&#19978;&#36816;&#34892;&#21253;&#35013;&#20102;&#36825;&#20123;&#21378;&#21830;&#21508;&#33258;&#23454;&#29616;&#30340;<tt class="classname">Connection</tt>, <tt class="classname">Statement</tt>&#21644;<tt class="classname">ResultSet</tt>&#23545;&#35937;&#30340;<tt class="classname">DataSource</tt>
&#26102;&#65292;&#21487;&#33021;&#20250;&#36935;&#21040;&#19968;&#20123;&#38382;&#39064;&#12290;&#22914;&#26524;&#20320;&#35201;&#35775;&#38382;&#36825;&#20123;&#23545;&#35937;&#65292;&#20320;&#21487;&#20197;&#37197;&#32622;&#19968;&#20010;&#21253;&#21547;<tt class="classname">NativeJdbcExtractor</tt>&#30340;<tt class="classname">JdbcTemplate</tt>&#25110;&#32773;<tt class="classname">OracleLobHandler</tt>&#12290;</p><p>NativeJdbcExtractor&#26681;&#25454;&#25191;&#34892;&#29615;&#22659;&#30340;&#19981;&#21516;&#65292;&#20250;&#26377;&#19981;&#21516;&#30340;&#39118;&#26684;&#30340;&#23454;&#29616;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>SimpleNativeJdbcExtractor</p></li><li><p>C3P0NativeJdbcExtractor</p></li><li><p>CommonsDbcpNativeJdbcExtractor</p></li><li><p>JBossNativeJdbcExtractor</p></li><li><p>WebLogicNativeJdbcExtractor</p></li><li><p>WebSphereNativeJdbcExtractor</p></li><li><p>XAPoolNativeJdbcExtractor</p></li></ul></div><p>&#36890;&#24120;&#26469;&#35828;<tt class="classname">SimpleNativeJdbcExtractor</tt>&#31867;&#23545;&#20110;&#32477;&#22823;&#22810;&#25968;&#29615;&#22659;&#65292;&#24050;&#32463;&#36275;&#20197;&#23631;&#34109; <tt class="classname">Connection</tt> &#23545;&#35937;&#12290;&#21487;&#20197;&#21442;&#35265;Java Docs&#33719;&#21462;&#35814;&#32454;&#20449;&#24687;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="jdbc-advanced-jdbc"></a>11.4.&nbsp;JDBC&#25209;&#37327;&#25805;&#20316;</h2></div></div><div></div></div><p>
		&#32477;&#22823;&#22810;&#25968;JDBC&#39537;&#21160;&#38024;&#23545;&#25209;&#37327;&#35843;&#29992;&#30456;&#21516;&#30340;prepared statement&#23545;&#35937;&#25552;&#20379;&#20102;&#24615;&#33021;&#25552;&#21319;&#12290;&#36890;&#36807;&#23558;&#36825;&#20123;&#26356;&#26032;&#25805;&#20316;&#23553;&#35013;&#21040;&#19968;&#20010;&#25209;&#37327;&#25805;&#20316;&#20013;&#65292;&#21487;&#20197;&#22823;&#37327;&#20943;&#23569;&#19982;&#25968;&#25454;&#24211;&#30340;&#25805;&#20316;&#39057;&#32321;&#24230;&#12290;
		&#26412;&#31456;&#33410;&#23558;&#35814;&#32454;&#25551;&#36848;&#20351;&#29992;JdbcTemplate&#25110;&#32773;SimpleJdbcTemplate&#36827;&#34892;&#25209;&#37327;&#25805;&#20316;&#30340;&#27969;&#31243;&#12290;
		</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-advanced-classic"></a>11.4.1.&nbsp;&#20351;&#29992;JdbcTemplate&#36827;&#34892;&#25209;&#37327;&#25805;&#20316;</h3></div></div><div></div></div><p>
			JdbcTemplate&#30340;&#25209;&#37327;&#25805;&#20316;&#29305;&#24615;&#38656;&#35201;&#23454;&#29616;&#29305;&#23450;&#30340;&#25509;&#21475;<tt class="classname">BatchPreparedStatementSetter</tt>&#26469;&#36827;&#34892;&#30340;, &#36890;&#36807;&#23454;&#29616;&#36825;&#20010;&#25509;&#21475;&#65292;&#24182;&#23558;&#20854;&#20256;&#20837;<tt class="classname">batchUpdate</tt>&#26041;&#27861;&#36827;&#34892;&#35843;&#29992;&#12290;
			&#36825;&#20010;&#25509;&#21475;&#26377;&#20004;&#20010;&#26041;&#27861;&#38656;&#35201;&#23454;&#29616;&#12290;&#19968;&#20010;&#21483;&#20570;<tt class="classname">getBatchSize</tt>&#26469;&#25552;&#20379;&#24403;&#21069;&#38656;&#35201;&#25209;&#37327;&#25805;&#20316;&#30340;&#25968;&#37327;&#12290;&#21478;&#22806;&#19968;&#20010;&#26041;&#27861;&#26159;<tt class="classname">setValues</tt>
 &#20801;&#35768;&#20320;&#20026;prepared statement&#35774;&#32622;&#21442;&#25968;&#12290;&#36825;&#20010;&#26041;&#27861;&#23558;&#22312;&#25972;&#20010;&#36807;&#31243;&#20013;&#34987;&#35843;&#29992;&#30340;&#27425;&#25968;&#65292;&#21017;&#21462;&#20915;&#20110;&#20320;&#22312;<tt class="classname">getBatchSize</tt>&#20013;&#25152;&#25351;&#23450;&#30340;&#22823;&#23567;&#12290;
			&#19979;&#38754;&#30340;&#31034;&#20363;&#23637;&#31034;&#20102;&#26681;&#25454;&#20256;&#20837;&#30340;list&#21442;&#25968;&#26356;&#26032;actor&#34920;&#65292;&#32780;&#20256;&#20837;&#30340;list&#21516;&#26102;&#20316;&#20026;&#25209;&#37327;&#25805;&#20316;&#30340;&#21442;&#25968;&#12290;
		</p><p>
      </p><pre class="programlisting">public class JdbcActorDao implements ActorDao {
    private JdbcTemplate jdbcTemplate;

    public void setDataSource(DataSource dataSource) {
        this.jdbcTemplate = new JdbcTemplate(dataSource);
    }

    public int[] batchUpdate(final List actors) {
        int[] updateCounts = jdbcTemplate.batchUpdate(
                "update t_actor set first_name = ?, last_name = ? where id = ?",
                new BatchPreparedStatementSetter() {
                    public void setValues(PreparedStatement ps, int i) throws SQLException {
                        ps.setString(1, ((Actor)actors.get(i)).getFirstName());
                        ps.setString(2, ((Actor)actors.get(i)).getLastName());
                        ps.setLong(3, ((Actor)actors.get(i)).getId().longValue());
                    }

                    public int getBatchSize() {
                        return actors.size();
                    }
                } );
        return updateCounts;
    }

    //  ... additional methods
}</pre><p>
     &#22914;&#26524;&#20320;&#26159;&#36890;&#36807;&#35835;&#21462;&#25991;&#20214;&#36827;&#34892;&#25209;&#37327;&#25805;&#20316;&#65292;&#37027;&#20040;&#20320;&#21487;&#33021;&#38656;&#35201;&#19968;&#20010;&#29305;&#23450;&#30340;&#25209;&#37327;&#25805;&#20316;&#30340;&#25968;&#37327;&#65292;&#19981;&#36807;&#26368;&#21518;&#19968;&#27425;&#30340;&#25209;&#37327;&#25805;&#20316;&#65292;&#20320;&#21487;&#33021;&#27809;&#26377;&#37027;&#20040;&#22810;&#25968;&#37327;&#30340;&#35760;&#24405;&#12290;
     &#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#20320;&#21487;&#20197;&#23454;&#29616;<tt class="classname">InterruptibleBatchPreparedStatementSetter</tt>&#25509;&#21475;&#65292;&#20174;&#32780;&#20801;&#35768;&#20320;&#22312;&#26576;&#20123;&#24773;&#20917;&#20013;&#26029;&#25209;&#37327;&#25805;&#20316;&#65292;<tt class="classname">isBatchExhausted</tt> &#26041;&#27861;&#20801;&#35768;&#20320;&#25351;&#23450;&#19968;&#20010;&#32456;&#27490;&#25209;&#37327;&#25805;&#20316;&#30340;&#20449;&#21495;&#37327;&#12290;
     </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-advanced-simple"></a>11.4.2.&nbsp;&#20351;&#29992;SimpleJdbcTemplate&#36827;&#34892;&#25209;&#37327;&#25805;&#20316;</h3></div></div><div></div></div><p><tt class="classname">SimpleJdbcTemplate</tt>&#31867;
&#25552;&#20379;&#20102;&#21478;&#22806;&#19968;&#31181;&#25209;&#37327;&#25805;&#20316;&#30340;&#26041;&#24335;&#12290;&#26080;&#38656;&#23454;&#29616;&#19968;&#20010;&#29305;&#23450;&#30340;&#25509;&#21475;&#65292;&#20320;&#21482;&#38656;&#35201;&#25552;&#20379;&#25152;&#26377;&#22312;&#35843;&#29992;&#36807;&#31243;&#20013;&#35201;&#29992;&#21040;&#30340;&#21442;&#25968;&#65292;&#26694;&#26550;&#20250;&#36941;&#21382;&#36825;&#20123;&#21442;&#25968;&#20540;&#65292;&#24182;&#20351;&#29992;&#20869;&#32622;&#30340;
prepared statement&#31867;&#36827;&#34892;&#25209;&#37327;&#25805;&#20316;&#12290;API&#23558;&#26681;&#25454;&#20320;&#26159;&#21542;&#20351;&#29992;&#21629;&#21517;&#21442;&#25968;&#32780;&#26377;&#25152;&#19981;&#21516;&#12290;&#23545;&#20110;&#20351;&#29992;&#21629;&#21517;&#21442;&#25968;&#30340;&#24773;&#20917;&#65292;&#20320;&#38656;&#35201;&#25552;&#20379;&#19968;&#20010;<tt class="classname">SqlParameterSource</tt>&#30340;&#25968;&#32452;, &#20854;&#20013;&#30340;&#27599;&#20010;&#20803;&#32032;&#23558;&#23558;&#20316;&#20026;&#25209;&#37327;&#25805;&#20316;&#30340;&#21442;&#25968;&#12290;
			&#20320;&#21487;&#20197;&#20351;&#29992;<tt class="classname">SqlParameterSource.createBatch</tt>&#26041;&#27861;&#65292;&#36890;&#36807;&#20256;&#20837;&#19968;&#20010;JavaBean&#30340;&#25968;&#32452;&#25110;&#32773;&#19968;&#20010;&#21253;&#21547;&#20102;&#21442;&#25968;&#38190;&#20540;&#23545;&#30340;Map&#25968;&#32452;&#26469;&#21019;&#24314;&#36825;&#20010;&#25968;&#32452;&#12290;
		</p><p>&#19979;&#38754;&#30340;&#31034;&#20363;&#23637;&#31034;&#20102;&#20351;&#29992;&#21629;&#21517;&#21442;&#25968;&#36827;&#34892;&#25209;&#37327;&#26356;&#26032;&#30340;&#26041;&#27861;&#65306;</p><p>
      </p><pre class="programlisting">public class JdbcActorDao implements ActorDao {
    private SimpleJdbcTemplate simpleJdbcTemplate;

    public void setDataSource(DataSource dataSource) {
        this.simpleJdbcTemplate = new SimpleJdbcTemplate(dataSource);
    }

    public int[] batchUpdate(final List&lt;Actor&gt; actors) {
        SqlParameterSource[] batch = SqlParameterSourceUtils.createBatch(actors.toArray());
        int[] updateCounts = simpleJdbcTemplate.batchUpdate(
                "update t_actor set first_name = :firstName, last_name = :lastName where id = :id",
                batch);
        return updateCounts;
    }

    //  ... additional methods
}</pre><p>
		&#23545;&#20110;&#20351;&#29992;&#20256;&#32479;&#30340;&#8220;?&#8221;&#20316;&#20026;&#21442;&#25968;&#21344;&#20301;&#31526;&#30340;&#24773;&#20917;&#65292;&#20320;&#21487;&#20197;&#20256;&#20837;&#19968;&#20010;List&#65292;&#21253;&#21547;&#20102;&#25152;&#26377;&#38656;&#35201;&#36827;&#34892;&#25209;&#37327;&#26356;&#26032;&#30340;&#23545;&#35937;&#12290;&#36825;&#26679;&#30340;&#23545;&#35937;&#25968;&#32452;&#24517;&#39035;&#19982;&#27599;&#20010;SQL Statement&#30340;&#21344;&#20301;&#31526;&#20197;&#21450;&#20182;&#20204;&#22312;SQL Statement&#20013;&#20986;&#29616;&#30340;&#20301;&#32622;&#19968;&#19968;&#23545;&#24212;&#12290;
		</p><p>&#19979;&#38754;&#26159;&#21516;&#26679;&#30340;&#20363;&#23376;&#65292;&#20351;&#29992;&#30340;&#20256;&#32479;&#30340;&#8220;?&#8221;&#20316;&#20026;&#21442;&#25968;&#21344;&#20301;&#31526;&#65306;</p><p>
      </p><pre class="programlisting">public class JdbcActorDao implements ActorDao {
    private SimpleJdbcTemplate simpleJdbcTemplate;

    public void setDataSource(DataSource dataSource) {
        this.simpleJdbcTemplate = new SimpleJdbcTemplate(dataSource);
    }

    public int[] batchUpdate(final List&lt;Actor&gt; actors) {
        List&lt;Object[]&gt; batch = new ArrayList&lt;Object[]&gt;();
        for (Actor actor : actors) {
            Object[] values = new Object[] {
                    actor.getFirstName(),
                    actor.getLastName(),
                    actor.getId()};
            batch.add(values);
        }
        int[] updateCounts = simpleJdbcTemplate.batchUpdate(
                "update t_actor set first_name = ?, last_name = ? where id = ?",
                batch);
        return updateCounts;
    }

    //  ... additional methods
}</pre><p>
			&#25152;&#26377;&#30340;&#25209;&#37327;&#26356;&#26032;&#30340;&#26041;&#27861;&#37117;&#20250;&#36820;&#22238;&#19968;&#32452;int&#30340;&#25968;&#32452;&#65292;&#34920;&#31034;&#22312;&#25972;&#20010;&#25805;&#20316;&#36807;&#31243;&#20013;&#26377;&#22810;&#23569;&#35760;&#24405;&#34987;&#25209;&#37327;&#26356;&#26032;&#12290;
			&#36825;&#20010;&#25968;&#37327;&#26159;&#30001;JDBC&#39537;&#21160;&#25152;&#36820;&#22238;&#30340;&#65292;&#26377;&#26102;&#36825;&#20010;&#36820;&#22238;&#24182;&#19981;&#21487;&#38752;&#65292;&#23588;&#20854;&#23545;&#20110;&#26576;&#20123;JDBC&#39537;&#21160;&#21482;&#26159;&#31616;&#21333;&#30340;&#36820;&#22238;-2&#20316;&#20026;&#36820;&#22238;&#20540;&#12290;   
		</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="jdbc-simple-jdbc"></a>11.5.&nbsp;&#36890;&#36807;&#20351;&#29992;SimpleJdbc&#31867;&#31616;&#21270;JDBC&#25805;&#20316;</h2></div></div><div></div></div><p>
		<tt class="classname">SimpleJdbcInsert</tt>&#31867;&#21644;<tt class="classname">SimpleJdbcCall</tt>&#31867;&#20027;&#35201;&#21033;&#29992;&#20102;JDBC&#39537;&#21160;&#25152;&#25552;&#20379;&#30340;&#25968;&#25454;&#24211;&#20803;&#25968;&#25454;&#30340;&#19968;&#20123;&#29305;&#24615;&#26469;&#31616;&#21270;&#25968;&#25454;&#24211;&#25805;&#20316;&#37197;&#32622;&#12290;
		 &#36825;&#24847;&#21619;&#30528;&#20320;&#21487;&#20197;&#23613;&#21487;&#33021;&#30340;&#31616;&#21270;&#20320;&#30340;&#25968;&#25454;&#24211;&#25805;&#20316;&#37197;&#32622;&#12290;&#24403;&#28982;&#65292;&#20320;&#21487;&#20197;&#21487;&#20197;&#23558;&#20803;&#25968;&#25454;&#22788;&#29702;&#30340;&#29305;&#24615;&#20851;&#38381;&#65292;&#20174;&#32780;&#22312;&#20320;&#30340;&#20195;&#30721;&#20013;&#35814;&#32454;&#25351;&#23450;&#36825;&#20123;&#29305;&#24615;&#12290;
	</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-simple-jdbc-insert-1"></a>11.5.1.&nbsp;&#20351;&#29992;SimpleJdbcInsert&#25554;&#20837;&#25968;&#25454;</h3></div></div><div></div></div><p>
		&#35753;&#25105;&#20204;&#20174;<tt class="classname">SimpleJdbcInsert</tt>&#31867;&#24320;&#22987;&#12290;&#25105;&#20204;&#23558;&#23613;&#21487;&#33021;&#20351;&#29992;&#26368;&#23569;&#37327;&#30340;&#37197;&#32622;&#12290;<tt class="classname">SimpleJdbcInsert</tt>&#31867;&#24517;&#39035;&#22312;&#25968;&#25454;&#35775;&#38382;&#23618;&#30340;&#21021;&#22987;&#21270;&#26041;&#27861;&#20013;&#34987;&#21021;&#22987;&#21270;&#12290;
			&#22312;&#36825;&#20010;&#20363;&#23376;&#20013;&#65292;&#21021;&#22987;&#21270;&#26041;&#27861;&#20026;<tt class="classname">setDataSource</tt>&#26041;&#27861;&#12290;&#20320;&#26080;&#38656;&#32487;&#25215;&#33258;<tt class="classname">SimpleJdbcInsert</tt>
&#31867;&#65292;&#21482;&#38656;&#35201;&#21019;&#24314;&#19968;&#20010;&#26032;&#30340;&#23454;&#20363;&#65292;&#24182;&#36890;&#36807;<tt class="classname">withTableName</tt>&#26041;&#27861;&#35774;&#32622;table&#21517;&#31216;&#12290;
			&#36825;&#20010;&#31867;&#20351;&#29992;&#20102;&#8220;fluid&#8221;&#27169;&#24335;&#36820;&#22238;<tt class="classname">SimpleJdbcInsert</tt>&#65292;&#20174;&#32780;&#20320;&#21487;&#20197;&#35775;&#38382;&#21040;&#25152;&#26377;&#30340;&#21487;&#20197;&#36827;&#34892;&#37197;&#32622;&#30340;&#26041;&#27861;&#12290;&#22312;&#36825;&#20010;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#21482;&#20351;&#29992;&#20102;&#19968;&#20010;&#26041;&#27861;&#65292;&#31245;&#21518;&#25105;&#20204;&#20250;&#30475;&#21040;&#26356;&#22810;&#30340;&#37197;&#32622;&#26041;&#27861;&#12290;
			</p><pre class="programlisting">public class JdbcActorDao implements ActorDao {
    private SimpleJdbcTemplate simpleJdbcTemplate;
    private SimpleJdbcInsert insertActor;

    public void setDataSource(DataSource dataSource) {
        this.simpleJdbcTemplate = new SimpleJdbcTemplate(dataSource);
        this.insertActor = 
                new SimpleJdbcInsert(dataSource).withTableName("t_actor");
    }

    public void add(Actor actor) {
        Map&lt;String, Object&gt; parameters = new HashMap&lt;String, Object&gt;(3);
        parameters.put("id", actor.getId());
        parameters.put("first_name", actor.getFirstName());
        parameters.put("last_name", actor.getLastName());
        insertActor.execute(parameters);
    }

    //  ... additional methods
}</pre><p>&#36825;&#20010;&#26041;&#27861;&#36890;&#36807;&#25509;&#25910; <tt class="classname">java.utils.Map</tt> &#20316;&#20026;&#23427;&#21807;&#19968;&#30340;&#21442;&#25968;&#12290;
     	&#22312;&#36825;&#37324;&#38656;&#35201;&#37325;&#28857;&#27880;&#24847;&#30340;&#26159;&#65292;&#22312;Map&#20013;&#30340;&#25152;&#26377;&#30340;key&#65292;&#24517;&#39035;&#21644;&#25968;&#25454;&#24211;&#20013;&#23450;&#20041;&#30340;&#21015;&#21517;&#23436;&#20840;&#21305;&#37197;&#12290;&#36825;&#26159;&#22240;&#20026;&#25105;&#20204;&#26159;&#36890;&#36807;&#35835;&#21462;&#20803;&#25968;&#25454;&#26469;&#26500;&#36896;&#23454;&#38469;&#30340;Insert&#35821;&#21477;&#30340;&#12290;
     	</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-simple-jdbc-insert-2"></a>11.5.2.&nbsp;&#20351;&#29992;SimpleJdbcInsert&#26469;&#33719;&#21462;&#33258;&#21160;&#29983;&#25104;&#30340;&#20027;&#38190;</h3></div></div><div></div></div><p>&#25509;&#19979;&#26469;&#65292;&#25105;&#20204;&#23545;&#20110;&#21516;&#26679;&#30340;&#25554;&#20837;&#35821;&#21477;&#65292;&#25105;&#20204;&#24182;&#19981;&#20256;&#20837;id&#65292;&#32780;&#26159;&#36890;&#36807;&#25968;&#25454;&#24211;&#33258;&#21160;&#33719;&#21462;&#20027;&#38190;&#30340;&#26041;&#24335;&#26469;&#21019;&#24314;&#26032;&#30340;Actor&#23545;&#35937;&#24182;&#25554;&#20837;&#25968;&#25454;&#24211;&#12290;
		&#24403;&#25105;&#20204;&#21019;&#24314;<tt class="classname">SimpleJdbcInsert</tt>&#23454;&#20363;&#26102;, &#25105;&#20204;&#19981;&#20165;&#38656;&#35201;&#25351;&#23450;&#34920;&#21517;&#65292;&#21516;&#26102;&#25105;&#20204;&#36890;&#36807;<tt class="classname">usingGeneratedKeyColumns</tt>&#26041;&#27861;&#25351;&#23450;&#38656;&#35201;&#25968;&#25454;&#24211;&#33258;&#21160;&#29983;&#25104;&#20027;&#38190;&#30340;&#21015;&#21517;&#12290;
		</p><p>
      </p><pre class="programlisting">public class JdbcActorDao implements ActorDao {
    private SimpleJdbcTemplate simpleJdbcTemplate;
    private SimpleJdbcInsert insertActor;

    public void setDataSource(DataSource dataSource) {
        this.simpleJdbcTemplate = new SimpleJdbcTemplate(dataSource);
        this.insertActor =
                new SimpleJdbcInsert(dataSource)
                        .withTableName("t_actor")
                        .usingGeneratedKeyColumns("id");
    }

    public void add(Actor actor) {
        Map&lt;String, Object&gt; parameters = new HashMap&lt;String, Object&gt;(2);
        parameters.put("first_name", actor.getFirstName());
        parameters.put("last_name", actor.getLastName());
        Number newId = insertActor.executeAndReturnKey(parameters);
        actor.setId(newId.longValue());
    }

    //  ... additional methods
}</pre><p>
		&#36825;&#26679;&#25105;&#20204;&#21487;&#20197;&#30475;&#21040;&#19982;&#20043;&#21069;&#25191;&#34892;&#30340;insert&#25805;&#20316;&#30340;&#19981;&#21516;&#20043;&#22788;&#22312;&#20110;&#65292;&#25105;&#20204;&#26080;&#38656;&#28155;&#21152;id&#21040;&#21442;&#25968;&#30340;Map&#20013;&#21435;&#65292;&#21482;&#38656;&#35201;&#35843;&#29992;<tt class="literal">executeReturningKey</tt>&#26041;&#27861;&#12290;
		&#36825;&#20010;&#26041;&#27861;&#23558;&#36820;&#22238;&#19968;&#20010;<tt class="literal">java.lang.Number</tt>&#23545;&#35937;&#65292;&#25105;&#20204;&#21487;&#20197;&#20351;&#29992;&#36825;&#20010;&#23545;&#35937;&#26469;&#21019;&#24314;&#19968;&#20010;&#23383;&#31526;&#31867;&#22411;&#30340;&#23454;&#20363;&#20316;&#20026;&#25105;&#20204;&#30340;&#22495;&#27169;&#22411;&#30340;&#23646;&#24615;&#12290;
		&#26377;&#19968;&#28857;&#24456;&#37325;&#35201;&#30340;&#22320;&#26041;&#38656;&#35201;&#27880;&#24847;&#65292;&#25105;&#20204;&#26080;&#27861;&#20381;&#36182;&#25152;&#26377;&#30340;&#25968;&#25454;&#24211;&#26469;&#36820;&#22238;&#25105;&#20204;&#25351;&#23450;&#30340;Java&#31867;&#22411;&#65292;&#22240;&#20026;&#25105;&#20204;&#21482;&#30693;&#36947;&#36825;&#20123;&#23545;&#35937;&#30340;&#22522;&#31867;&#26159;<tt class="literal">java.lang.Number</tt>&#12290;
		&#22914;&#26524;&#20320;&#26377;&#32852;&#21512;&#20027;&#38190;&#25110;&#32773;&#37027;&#20123;&#38750;&#25968;&#23383;&#31867;&#22411;&#30340;&#20027;&#38190;&#38656;&#35201;&#29983;&#25104;&#65292;&#37027;&#20040;&#20320;&#21487;&#20197;&#20351;&#29992;<tt class="literal">executeReturningKeyHolder</tt>&#26041;&#27861;&#36820;&#22238;&#30340;<tt class="literal">KeyHolder</tt>&#23545;&#35937;&#12290;		
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-simple-jdbc-insert-3"></a>11.5.3.&nbsp;&#25351;&#23450;SimpleJdbcInsert&#25152;&#20351;&#29992;&#30340;&#23383;&#27573;</h3></div></div><div></div></div><p>
      &#36890;&#36807;&#25351;&#23450;&#25152;&#20351;&#29992;&#30340;&#23383;&#27573;&#21517;&#31216;&#65292;&#21487;&#20197;&#20351;SimpleJdbcInsert&#20165;&#20351;&#29992;&#36825;&#20123;&#23383;&#27573;&#20316;&#20026;insert&#35821;&#21477;&#25152;&#20351;&#29992;&#30340;&#23383;&#27573;&#12290;&#36825;&#21487;&#20197;&#36890;&#36807;<tt class="classname">usingColumns</tt>&#26041;&#27861;&#36827;&#34892;&#37197;&#32622;&#12290;
      </p><p>
      </p><pre class="programlisting">public class JdbcActorDao implements ActorDao {
    private SimpleJdbcTemplate simpleJdbcTemplate;
    private SimpleJdbcInsert insertActor;

    public void setDataSource(DataSource dataSource) {
        this.simpleJdbcTemplate = new SimpleJdbcTemplate(dataSource);
        this.insertActor =
                new SimpleJdbcInsert(dataSource)
                        .withTableName("t_actor")
                        .usingColumns("first_name", "last_name")
                        .usingGeneratedKeyColumns("id");
    }

    public void add(Actor actor) {
        Map&lt;String, Object&gt; parameters = new HashMap&lt;String, Object&gt;(2);
        parameters.put("first_name", actor.getFirstName());
        parameters.put("last_name", actor.getLastName());
        Number newId = insertActor.executeAndReturnKey(parameters);
        actor.setId(newId.longValue());
    }

    //  ... additional methods
}</pre><p>
     &#25191;&#34892;&#36825;&#26679;&#30340;insert&#35821;&#21477;&#25152;&#20351;&#29992;&#30340;&#23383;&#27573;&#65292;&#19982;&#20043;&#21069;&#25105;&#20204;&#25152;&#20381;&#36182;&#30340;&#25968;&#25454;&#24211;&#20803;&#25968;&#25454;&#26159;&#19968;&#33268;&#30340;&#12290; 
	</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-simple-jdbc-parameters"></a>11.5.4.&nbsp;&#20351;&#29992;SqlParameterSource&#25552;&#20379;&#21442;&#25968;&#20540;</h3></div></div><div></div></div><p>&#20351;&#29992;Map&#26469;&#25351;&#23450;&#21442;&#25968;&#20540;&#26377;&#26102;&#20505;&#24037;&#20316;&#24471;&#38750;&#24120;&#22909;&#65292;&#20294;&#26159;&#36825;&#24182;&#19981;&#26159;&#26368;&#31616;&#21333;&#30340;&#20351;&#29992;&#26041;&#24335;&#12290;Spring&#25552;&#20379;&#20102;&#19968;&#20123;&#20854;&#20182;&#30340;<tt class="classname">SqlParameterSource</tt>&#23454;&#29616;&#31867;&#26469;&#25351;&#23450;&#21442;&#25968;&#20540;&#12290;
			&#25105;&#20204;&#39318;&#20808;&#21487;&#20197;&#30475;&#30475;<tt class="classname">BeanPropertySqlParameterSource</tt>&#31867;&#65292;&#36825;&#26159;&#19968;&#20010;&#38750;&#24120;&#31616;&#20415;&#30340;&#25351;&#23450;&#21442;&#25968;&#30340;&#23454;&#29616;&#31867;&#65292;&#21482;&#35201;&#20320;&#26377;&#19968;&#20010;&#31526;&#21512;JavaBean&#35268;&#33539;&#30340;&#31867;&#23601;&#34892;&#20102;&#12290;&#23427;&#23558;&#20351;&#29992;&#20854;&#20013;&#30340;getter&#26041;&#27861;&#26469;&#33719;&#21462;&#21442;&#25968;&#20540;&#12290;
			&#19979;&#38754;&#26159;&#19968;&#20010;&#20363;&#23376;&#65306;
		</p><p>
      </p><pre class="programlisting">public class JdbcActorDao implements ActorDao {
    private SimpleJdbcTemplate simpleJdbcTemplate;
    private SimpleJdbcInsert insertActor;

    public void setDataSource(DataSource dataSource) {
        this.simpleJdbcTemplate = new SimpleJdbcTemplate(dataSource);
        this.insertActor =
                new SimpleJdbcInsert(dataSource)
                        .withTableName("t_actor")
                        .usingGeneratedKeyColumns("id");
    }

    public void add(Actor actor) {
        SqlParameterSource parameters = new BeanPropertySqlParameterSource(actor);
        Number newId = insertActor.executeAndReturnKey(parameters);
        actor.setId(newId.longValue());
    }

    //  ... additional methods
}</pre><p>
        &#21478;&#22806;&#19968;&#20010;&#23454;&#29616;&#31867;&#65306;<tt class="classname">MapSqlParameterSource</tt>&#20063;&#20351;&#29992;Map&#26469;&#25351;&#23450;&#21442;&#25968;&#65292;&#20294;&#26159;&#20182;&#21478;&#22806;&#25552;&#20379;&#20102;&#19968;&#20010;&#38750;&#24120;&#31616;&#20415;&#30340;<tt class="classname">addValue</tt>&#26041;&#27861;&#65292;&#21487;&#20197;&#34987;&#36830;&#32493;&#35843;&#29992;&#65292;&#26469;&#22686;&#21152;&#21442;&#25968;&#12290;
        </p><p>
      </p><pre class="programlisting">public class JdbcActorDao implements ActorDao {
    private SimpleJdbcTemplate simpleJdbcTemplate;
    private SimpleJdbcInsert insertActor;

    public void setDataSource(DataSource dataSource) {
        this.simpleJdbcTemplate = new SimpleJdbcTemplate(dataSource);
        this.insertActor =
                new SimpleJdbcInsert(dataSource)
                        .withTableName("t_actor")
                        .usingGeneratedKeyColumns("id");
    }

    public void add(Actor actor) {
        SqlParameterSource parameters = new MapSqlParameterSource()
                .addValue("first_name", actor.getFirstName())
                .addValue("last_name", actor.getLastName());
        Number newId = insertActor.executeAndReturnKey(parameters);
        actor.setId(newId.longValue());
    }

    //  ... additional methods
}</pre><p>
		&#27491;&#22914;&#20320;&#30475;&#21040;&#30340;&#65292;&#37197;&#32622;&#26159;&#19968;&#26679;&#30340;&#65292;&#21306;&#21035;&#21482;&#26159;&#20999;&#25442;&#20102;&#19981;&#21516;&#30340;&#25552;&#20379;&#21442;&#25968;&#30340;&#23454;&#29616;&#26041;&#24335;&#26469;&#25191;&#34892;&#35843;&#29992;&#12290;
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-simple-jdbc-call-1"></a>11.5.5.&nbsp;&#20351;&#29992;SimpleJdbcCall&#35843;&#29992;&#23384;&#20648;&#36807;&#31243;</h3></div></div><div></div></div><p>
		&#25509;&#19979;&#26469;&#25105;&#20204;&#25226;&#25105;&#20204;&#30340;&#20851;&#27880;&#28857;&#25918;&#22312;&#20351;&#29992; <tt class="classname">SimpleJdbcCall</tt> &#26469;&#36827;&#34892;&#23384;&#20648;&#36807;&#31243;&#30340;&#35843;&#29992;&#19978;&#12290;
			&#35774;&#35745;&#36825;&#20010;&#31867;&#30340;&#30446;&#30340;&#22312;&#20110;&#20351;&#24471;&#35843;&#29992;&#23384;&#20648;&#36807;&#31243;&#23613;&#21487;&#33021;&#31616;&#21333;&#12290;&#23427;&#21516;&#26679;&#21033;&#29992;&#30340;&#25968;&#25454;&#24211;&#20803;&#25968;&#25454;&#30340;&#29305;&#24615;&#26469;&#26597;&#25214;&#20256;&#20837;&#30340;&#21442;&#25968;&#21644;&#36820;&#22238;&#20540;&#12290;
			&#36825;&#24847;&#21619;&#30528;&#20320;&#26080;&#38656;&#26126;&#30830;&#22768;&#26126;&#37027;&#20123;&#21442;&#25968;&#12290;&#24403;&#28982;&#65292;&#22914;&#26524;&#20320;&#21916;&#27426;&#65292;&#21487;&#20197;&#20381;&#28982;&#22768;&#26126;&#36825;&#20123;&#21442;&#25968;&#65292;&#23588;&#20854;&#23545;&#20110;&#26576;&#20123;&#21442;&#25968;&#65292;&#20320;&#26080;&#27861;&#30452;&#25509;&#23558;&#20182;&#20204;&#26144;&#23556;&#21040;Java&#31867;&#19978;&#65292;&#20363;&#22914;ARRAY&#31867;&#22411;&#21644;STRUCT&#31867;&#22411;&#30340;&#21442;&#25968;&#12290;
			&#22312;&#25105;&#20204;&#30340;&#31532;&#19968;&#20010;&#31034;&#20363;&#20013;&#65292;&#25105;&#20204;&#21487;&#20197;&#30475;&#21040;&#19968;&#20010;&#31616;&#21333;&#30340;&#23384;&#20648;&#36807;&#31243;&#35843;&#29992;&#65292;&#23427;&#20165;&#20165;&#36820;&#22238;VARCHAR&#21644;DATE&#31867;&#22411;&#12290;
			&#36825;&#37324;&#65292;&#25105;&#29305;&#22320;&#20026;Actor&#31867;&#22686;&#21152;&#20102;&#19968;&#20010;birthDate&#30340;&#23646;&#24615;&#65292;&#20174;&#32780;&#21487;&#20197;&#20351;&#24471;&#36820;&#22238;&#20540;&#25317;&#26377;&#19981;&#21516;&#30340;&#25968;&#25454;&#31867;&#22411;&#12290;
			&#36825;&#20010;&#23384;&#20648;&#36807;&#31243;&#35835;&#21462;actor&#30340;&#20027;&#38190;&#65292;&#24182;&#36820;&#22238;first_name&#65292;last_name&#65292;&#21644;birth_date&#23383;&#27573;&#20316;&#20026;&#36820;&#22238;&#20540;&#12290;
			&#19979;&#38754;&#26159;&#36825;&#20010;&#23384;&#20648;&#36807;&#31243;&#30340;&#28304;&#30721;&#65292;&#23427;&#21487;&#20197;&#24037;&#20316;&#22312;MySQL&#25968;&#25454;&#24211;&#19978;&#65306;
		</p><p>
      </p><pre class="programlisting">CREATE PROCEDURE read_actor ( 
  IN in_id INTEGER, 
  OUT out_first_name VARCHAR(100), 
  OUT out_last_name VARCHAR(100), 
  OUT out_birth_date DATE) 
BEGIN 
  SELECT first_name, last_name, birth_date 
  INTO out_first_name, out_last_name, out_birth_date 
  FROM t_actor where id = in_id;
END;</pre><p>
		&#27491;&#22914;&#20320;&#30475;&#21040;&#30340;&#65292;&#36825;&#37324;&#26377;&#22235;&#20010;&#21442;&#25968;&#65292;&#20854;&#20013;&#19968;&#20010;&#26159;&#20256;&#20837;&#30340;&#21442;&#25968;&#8220;in_id&#8221;&#65292;&#34920;&#31034;&#20102;Actor&#30340;&#20027;&#38190;&#65292;&#21097;&#19979;&#30340;&#21442;&#25968;&#26159;&#20316;&#20026;&#35835;&#21462;&#25968;&#25454;&#24211;&#34920;&#20013;&#30340;&#25968;&#25454;&#25152;&#36820;&#22238;&#30340;&#36820;&#22238;&#20540;&#12290;	
	</p><p>
		<tt class="classname">SimpleJdbcCall</tt>&#30340;&#22768;&#26126;&#19982;<tt class="classname">SimpleJdbcInsert</tt>&#31867;&#20284;&#65292;&#20320;&#26080;&#38656;&#32487;&#25215;&#36825;&#20010;&#31867;&#65292;&#32780;&#21482;&#38656;&#35201;&#22312;&#21021;&#22987;&#21270;&#26041;&#27861;&#20013;&#36827;&#34892;&#21021;&#22987;&#21270;&#12290;
			&#22312;&#36825;&#37324;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#21482;&#38656;&#35201;&#25351;&#23450;&#23384;&#20648;&#36807;&#31243;&#30340;&#21517;&#31216;&#12290;
		</p><p>
      </p><pre class="programlisting">public class JdbcActorDao implements ActorDao {
    private SimpleJdbcTemplate simpleJdbcTemplate;
    private SimpleJdbcCall procReadActor;

    public void setDataSource(DataSource dataSource) {
        this.simpleJdbcTemplate = new SimpleJdbcTemplate(dataSource);
        this.procReadActor =
                new SimpleJdbcCall(dataSource)
                        .withProcedureName("read_actor");
    }

    public Actor readActor(Long id) {
        SqlParameterSource in = new MapSqlParameterSource()
                .addValue("in_id", id); 
        Map out = procReadActor.execute(in);
        Actor actor = new Actor();
        actor.setId(id);
        actor.setFirstName((String) out.get("out_first_name"));
        actor.setLastName((String) out.get("out_last_name"));
        actor.setBirthDate((Date) out.get("out_birth_date"));
        return actor;
    }

    //  ... additional methods
}</pre><p>
      &#36890;&#36807;SimpleJdbcCall&#25191;&#34892;&#23384;&#20648;&#36807;&#31243;&#38656;&#35201;&#21019;&#24314;&#19968;&#20010;<tt class="classname">SqlParameterSource</tt>&#30340;&#23454;&#29616;&#31867;&#26469;&#25351;&#23450;&#20256;&#20837;&#30340;&#21442;&#25968;&#12290;
      &#38656;&#35201;&#27880;&#24847;&#30340;&#26159;&#65292;&#20256;&#20837;&#21442;&#25968;&#30340;&#21517;&#31216;&#19982;&#23384;&#20648;&#36807;&#31243;&#20013;&#23450;&#20041;&#30340;&#21517;&#31216;&#24517;&#39035;&#20445;&#25345;&#19968;&#33268;&#12290;&#36825;&#37324;&#65292;&#25105;&#20204;&#26080;&#38656;&#20445;&#25345;&#19968;&#33268;&#65292;&#22240;&#20026;&#25105;&#20204;&#20351;&#29992;&#25968;&#25454;&#24211;&#30340;&#20803;&#25968;&#25454;&#20449;&#24687;&#26469;&#20915;&#23450;&#25105;&#20204;&#38656;&#35201;&#20160;&#20040;&#26679;&#30340;&#25968;&#25454;&#24211;&#23545;&#35937;&#12290;
      &#24403;&#28982;&#65292;&#20320;&#22312;&#28304;&#20195;&#30721;&#20013;&#25152;&#25351;&#23450;&#30340;&#21517;&#31216;&#21487;&#33021;&#21644;&#25968;&#25454;&#24211;&#20013;&#23436;&#20840;&#19981;&#21516;&#65292;&#26377;&#30340;&#25968;&#25454;&#24211;&#20250;&#25226;&#36825;&#20123;&#21517;&#31216;&#20840;&#37096;&#36716;&#21270;&#25104;&#22823;&#20889;&#65292;&#32780;&#26377;&#20123;&#25968;&#25454;&#24211;&#20250;&#25226;&#36825;&#20123;&#21517;&#31216;&#36716;&#21270;&#20026;&#23567;&#20889;&#12290;    
      </p><p><tt class="classname">execute</tt>&#26041;&#27861;&#25509;&#25910;&#20256;&#20837;&#30340;&#21442;&#25968;&#65292;&#24182;&#36820;&#22238;&#19968;&#20010;Map&#20316;&#20026;&#36820;&#22238;&#20540;&#65292;&#36825;&#20010;Map&#21253;&#21547;&#25152;&#26377;&#22312;&#23384;&#20648;&#36807;&#31243;&#20013;&#25351;&#23450;&#30340;&#21442;&#25968;&#21517;&#31216;&#20316;&#20026;key&#12290;
			&#22312;&#36825;&#20010;&#20363;&#23376;&#20013;&#65292;&#20182;&#20204;&#20998;&#21035;&#26159;<tt class="classname">out_first_name&#65292;out_last_name</tt>&#21644;
      <tt class="classname">out_birth_date</tt>&#12290;
      </p><p>
		<tt class="classname">execute</tt>&#26041;&#27861;&#30340;&#26368;&#21518;&#37096;&#20998;&#26159;&#20351;&#29992;&#23384;&#20648;&#36807;&#31243;&#25152;&#36820;&#22238;&#30340;&#20540;&#21019;&#24314;&#19968;&#20010;&#26032;&#30340;Actor&#23454;&#20363;&#12290;
			&#21516;&#26679;&#30340;&#65292;&#36825;&#37324;&#25105;&#20204;&#23558;&#21517;&#31216;&#19982;&#23384;&#20648;&#36807;&#31243;&#20013;&#23450;&#20041;&#30340;&#21517;&#31216;&#20445;&#25345;&#19968;&#33268;&#38750;&#24120;&#37325;&#35201;&#12290;&#22312;&#36825;&#20010;&#20363;&#23376;&#20013;&#65292;&#22312;&#36820;&#22238;&#30340;Map&#20013;&#25152;&#23450;&#20041;&#30340;key&#20540;&#21644;&#25968;&#25454;&#24211;&#30340;&#23384;&#20648;&#36807;&#31243;&#20013;&#23450;&#20041;&#30340;&#20540;&#19968;&#33268;&#12290;
			&#20320;&#21487;&#33021;&#38656;&#35201;&#22312;&#36825;&#37324;&#25351;&#23450;Spring&#20351;&#29992;Jakarta Commons&#25552;&#20379;&#30340;<tt class="classname">CaseInsensitiveMap</tt>&#12290;&#36825;&#26679;&#20570;&#65292;&#20320;&#38656;&#35201;&#22312;&#21019;&#24314;&#20320;&#33258;&#24049;&#30340;<tt class="classname">JdbcTemplate</tt>&#31867;&#26102;&#65292;&#35774;&#32622;<tt class="classname">setResultsMapCaseInsensitive</tt>&#23646;&#24615;&#20026;True&#12290;
			&#28982;&#21518;&#65292;&#20320;&#23558;&#36825;&#20010;&#33258;&#23450;&#20041;&#30340;<tt class="classname">JdbcTemplate</tt>&#20256;&#20837;<tt class="classname">SimpleJdbcCall</tt>&#30340;&#26500;&#36896;&#20989;&#25968;&#12290;&#24403;&#28982;&#65292;&#20320;&#38656;&#35201;&#25226;<tt class="classname">commons-collections.jar</tt>&#21152;&#20837;&#21040;classpath&#20013;&#21435;&#12290;
			&#19979;&#38754;&#26159;&#37197;&#32622;&#31034;&#20363;&#65306;
		</p><p>
      </p><pre class="programlisting">public class JdbcActorDao implements ActorDao {
    private SimpleJdbcCall procReadActor;

    public void setDataSource(DataSource dataSource) {
        JdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);
        jdbcTemplate.setResultsMapCaseInsensitive(true);
        this.procReadActor =
                new SimpleJdbcCall(jdbcTemplate)
                        .withProcedureName("read_actor");
    }


    //  ... additional methods
}</pre><p>
         &#36890;&#36807;&#36825;&#26679;&#30340;&#37197;&#32622;&#65292;&#20320;&#23601;&#21487;&#20197;&#26080;&#38656;&#25285;&#24515;&#36820;&#22238;&#21442;&#25968;&#20540;&#30340;&#22823;&#23567;&#20889;&#38382;&#39064;&#12290;      
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-simple-jdbc-call-2"></a>11.5.6.&nbsp;&#22768;&#26126;SimpleJdbcCall&#20351;&#29992;&#30340;&#21442;&#25968;</h3></div></div><div></div></div><p>&#20320;&#24050;&#32463;&#30475;&#21040;&#22914;&#20309;&#36890;&#36807;&#20803;&#25968;&#25454;&#26469;&#31616;&#21270;&#21442;&#25968;&#37197;&#32622;&#65292;&#20294;&#26159;&#20320;&#20063;&#21487;&#20197;&#26126;&#30830;&#22320;&#25351;&#23450;&#36825;&#20123;&#21442;&#25968;&#12290;&#21487;&#20197;&#22312;&#21019;&#24314;<tt class="classname">SimpleJdbcCall</tt>&#26102;&#65292;&#36890;&#36807;&#20351;&#29992;<tt class="classname">declareParameters</tt>&#26041;&#27861;&#26469;&#22768;&#26126;&#21442;&#25968;&#12290;
			&#36825;&#20010;&#26041;&#27861;&#25509;&#25910;&#19968;&#32452;<tt class="classname">SqlParameter</tt>&#23545;&#35937;&#20316;&#20026;&#21442;&#25968;&#12290;&#25105;&#20204;&#21487;&#20197;&#21442;&#29031;&#19979;&#19968;&#20010;&#31456;&#33410;&#65292;&#22914;&#20309;&#21019;&#24314;<tt class="classname">SqlParameter</tt>&#12290;
		</p><p>
		&#25105;&#20204;&#21487;&#20197;&#26377;&#36873;&#25321;&#24615;&#30340;&#26174;&#31034;&#22768;&#26126;&#19968;&#20010;&#12289;&#22810;&#20010;&#12289;&#29978;&#33267;&#25152;&#26377;&#30340;&#21442;&#25968;&#12290;&#21442;&#25968;&#20803;&#25968;&#25454;&#22312;&#36825;&#37324;&#20250;&#34987;&#21516;&#26102;&#20351;&#29992;&#12290;
			&#36890;&#36807;&#35843;&#29992;<tt class="classname">withoutProcedureColumnMetaDataAccess</tt>&#26041;&#27861;&#65292;&#25105;&#20204;&#21487;&#20197;&#25351;&#23450;&#25968;&#25454;&#24211;&#24573;&#30053;&#25152;&#26377;&#30340;&#20803;&#25968;&#25454;&#22788;&#29702;&#24182;&#20351;&#29992;&#26174;&#31034;&#22768;&#26126;&#30340;&#21442;&#25968;&#12290;
			&#21478;&#22806;&#19968;&#31181;&#24773;&#20917;&#26159;&#65292;&#20854;&#20013;&#30340;&#26576;&#20123;&#21442;&#25968;&#20540;&#20855;&#26377;&#40664;&#35748;&#30340;&#36820;&#22238;&#20540;&#65292;&#25105;&#20204;&#38656;&#35201;&#22312;&#36820;&#22238;&#20540;&#20013;&#25351;&#23450;&#36825;&#20123;&#36820;&#22238;&#20540;&#12290;&#20026;&#20102;&#23454;&#29616;&#36825;&#20010;&#29305;&#24615;&#65292;&#25105;&#20204;&#21487;&#20197;&#20351;&#29992;<tt class="classname">useInParameterNames</tt>&#26469;&#25351;&#23450;&#19968;&#32452;&#38656;&#35201;&#34987;&#21253;&#21547;&#30340;&#21442;&#25968;&#21517;&#31216;&#12290;
		</p><p>&#36825;&#26159;&#19968;&#20010;&#23436;&#25972;&#30340;&#22768;&#26126;&#23384;&#20648;&#36807;&#31243;&#35843;&#29992;&#30340;&#20363;&#23376;&#65306;</p><p>
      </p><pre class="programlisting">public class JdbcActorDao implements ActorDao {
    private SimpleJdbcCall procReadActor;

    public void setDataSource(DataSource dataSource) {
        JdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);
        jdbcTemplate.setResultsMapCaseInsensitive(true);
        this.procReadActor =
                new SimpleJdbcCall(jdbcTemplate)
                        .withProcedureName("read_actor")
                        .withoutProcedureColumnMetaDataAccess()
                        .useInParameterNames("in_id")
                        .declareParameters(
                                new SqlParameter("in_id", Types.NUMERIC),
                                new SqlOutParameter("out_first_name", Types.VARCHAR),
                                new SqlOutParameter("out_last_name", Types.VARCHAR),
                                new SqlOutParameter("out_birth_date", Types.DATE)
                        );
    }


    //  ... additional methods
}</pre><p>
      &#25191;&#34892;&#21644;&#26368;&#32456;&#30340;&#36820;&#22238;&#22788;&#29702;&#26159;&#30456;&#21516;&#30340;&#65292;&#25105;&#20204;&#22312;&#36825;&#37324;&#21482;&#26159;&#26126;&#30830;&#22768;&#26126;&#20102;&#21442;&#25968;&#31867;&#22411;&#65292;&#32780;&#19981;&#26159;&#20381;&#36182;&#25968;&#25454;&#24211;&#20803;&#25968;&#25454;&#29305;&#24615;&#12290;
      &#36825;&#19968;&#28857;&#24456;&#37325;&#35201;&#65292;&#23588;&#20854;&#23545;&#20110;&#37027;&#20123;&#25968;&#25454;&#24211;&#24182;&#19981;&#25903;&#25345;&#20803;&#25968;&#25454;&#30340;&#24773;&#20917;&#12290;&#24403;&#21069;&#65292;&#25105;&#20204;&#25903;&#25345;&#20803;&#25968;&#25454;&#30340;&#29305;&#24615;&#30340;&#25968;&#25454;&#21253;&#21547;&#65306;Apache Derby&#12289;DB2&#12289;MySQL&#12289;
      Microsoft SQL Server&#12289;Oracle&#21644;Sybase&#12290;&#25105;&#20204;&#21516;&#26102;&#23545;&#26576;&#20123;&#25968;&#25454;&#24211;&#20869;&#32622;&#20989;&#25968;&#25903;&#25345;&#20803;&#25968;&#25454;&#29305;&#24615;&#65306;MySQL&#12289;Microsoft SQL Server&#21644;Oracle&#12290;
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-params"></a>11.5.7.&nbsp;&#22914;&#20309;&#23450;&#20041;SqlParameters</h3></div></div><div></div></div><p>
		&#20026;SimpleJdbc&#31867;&#25110;&#32773;&#21518;&#32493;&#31456;&#33410;&#25552;&#21040;&#30340;RDBMS&#25805;&#20316;&#25351;&#23450;&#21442;&#25968;&#65292;&#20320;&#38656;&#35201;&#20351;&#29992;<tt class="classname">SqlParameter</tt>&#25110;&#32773;&#20182;&#30340;&#23376;&#31867;&#12290;
			&#20320;&#21487;&#20197;&#36890;&#36807;&#25351;&#23450;&#21442;&#25968;&#21517;&#31216;&#20197;&#21450;&#23545;&#24212;&#30340;SQL&#31867;&#22411;&#24182;&#20256;&#20837;&#26500;&#36896;&#20989;&#25968;&#20316;&#20026;&#21442;&#25968;&#26469;&#25351;&#23450;<tt class="classname">SqlParameter</tt>&#65292;&#20854;&#20013;&#65292;SQL&#31867;&#22411;&#26159;<tt class="classname">java.sql.Types</tt>&#20013;&#25152;&#23450;&#20041;&#30340;&#24120;&#37327;&#12290;
			&#25105;&#20204;&#24050;&#32463;&#30475;&#21040;&#36807;&#31867;&#20284;&#30340;&#22768;&#26126;&#65306;
		</p><p>
      </p><pre class="programlisting">   new SqlParameter("in_id", Types.NUMERIC),
   new SqlOutParameter("out_first_name", Types.VARCHAR),</pre><p>
   </p><p>&#31532;&#19968;&#34892;&#30340;<tt class="classname">SqlParameter</tt>&#23450;&#20041;&#20102;&#19968;&#20010;&#20256;&#20837;&#21442;&#25968;&#12290;&#20256;&#20837;&#21442;&#25968;&#21487;&#20197;&#22312;&#25152;&#26377;&#30340;&#23384;&#20648;&#36807;&#31243;&#20013;&#20351;&#29992;&#65292;&#20063;&#21487;&#20197;&#22312;&#31245;&#21518;&#31456;&#33410;&#20013;&#25552;&#21040;&#30340;<tt class="classname">SqlQuery</tt>&#31867;&#21450;&#20854;&#23376;&#31867;&#20013;&#20351;&#29992;&#12290;
		</p><p>&#31532;&#20108;&#34892;<tt class="classname">SqlOutParameter</tt>&#23450;&#20041;&#20102;&#19968;&#20010;&#36820;&#22238;&#20540;&#12290;&#23427;&#21487;&#20197;&#34987;&#23384;&#20648;&#36807;&#31243;&#35843;&#29992;&#25152;&#20351;&#29992;&#12290;&#24403;&#28982;&#65292;&#36824;&#26377;&#19968;&#20010;<tt class="classname">SqlInOutParameter</tt>&#31867;&#65292;&#21487;&#20197;&#29992;&#20110;&#36755;&#20837;&#36755;&#20986;&#21442;&#25968;&#12290;
			&#20063;&#23601;&#26159;&#35828;&#65292;&#23427;&#26082;&#26159;&#19968;&#20010;&#20256;&#20837;&#21442;&#25968;&#65292;&#20063;&#26159;&#19968;&#20010;&#36820;&#22238;&#20540;&#12290;
		</p><p>
      &#38500;&#20102;&#21442;&#25968;&#21517;&#31216;&#21644;SQL&#31867;&#22411;&#65292;&#20320;&#36824;&#21487;&#20197;&#22768;&#26126;&#19968;&#20123;&#20854;&#20182;&#39069;&#22806;&#30340;&#36873;&#39033;&#12290;&#23545;&#20110;&#20256;&#20837;&#21442;&#25968;&#65292;&#20320;&#21487;&#20197;&#20026;numeric&#25968;&#25454;&#31867;&#22411;&#25351;&#23450;&#31934;&#24230;&#65292;&#25110;&#32773;&#23545;&#20110;&#29305;&#23450;&#30340;&#25968;&#25454;&#24211;&#25351;&#23450;&#29305;&#27530;&#31867;&#22411;&#12290;
      &#23545;&#20110;&#36820;&#22238;&#20540;&#65292;&#20320;&#21487;&#20197;&#25552;&#20379;&#19968;&#20010;<tt class="classname">RowMapper</tt>&#25509;&#21475;&#26469;&#22788;&#29702;&#25152;&#26377;&#20174;REF cursor&#36820;&#22238;&#30340;&#21015;&#12290;&#21478;&#22806;&#19968;&#20010;&#36873;&#39033;&#26159;&#25351;&#23450;&#19968;&#20010;<tt class="classname">SqlReturnType</tt>&#31867;&#65292;&#20174;&#32780;&#21487;&#20197;&#23450;&#21046;&#36820;&#22238;&#20540;&#30340;&#22788;&#29702;&#26041;&#24335;&#12290;
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-simple-jdbc-call-3"></a>11.5.8.&nbsp;&#20351;&#29992;SimpleJdbcCall&#35843;&#29992;&#20869;&#32622;&#20989;&#25968;</h3></div></div><div></div></div><p>&#20869;&#32622;&#20989;&#25968;&#30340;&#35843;&#29992;&#20960;&#20046;&#21644;&#23384;&#20648;&#36807;&#31243;&#30340;&#35843;&#29992;&#26159;&#19968;&#26679;&#30340;&#12290;&#21807;&#19968;&#30340;&#19981;&#21516;&#22312;&#20110;&#65292;&#20320;&#38656;&#35201;&#22768;&#26126;&#30340;&#26159;&#19968;&#20010;&#20989;&#25968;&#30340;&#21517;&#31216;&#32780;&#19981;&#26159;&#23384;&#20648;&#36807;&#31243;&#30340;&#21517;&#31216;&#12290;
			&#36825;&#21487;&#20197;&#36890;&#36807;<tt class="classname">withFunctionName</tt>&#26041;&#27861;&#26469;&#23436;&#25104;&#12290;&#20351;&#29992;&#36825;&#20010;&#26041;&#27861;&#65292;&#34920;&#26126;&#20320;&#30340;&#35843;&#29992;&#26159;&#19968;&#20010;&#20989;&#25968;&#12290;&#20320;&#25152;&#25351;&#23450;&#30340;&#36825;&#20010;&#20989;&#25968;&#21517;&#31216;&#23558;&#34987;&#20316;&#20026;&#35843;&#29992;&#23545;&#35937;&#12290;
			&#21516;&#26102;&#26377;&#19968;&#20010;&#21483;&#20570;<tt class="classname">executeFunction</tt>&#30340;&#26041;&#27861;&#65292;&#23558;&#33719;&#24471;&#29305;&#23450;&#30340;Java&#31867;&#22411;&#30340;&#20989;&#25968;&#35843;&#29992;&#30340;&#36820;&#22238;&#20540;&#12290;
			&#27492;&#26102;&#65292;&#20320;&#26080;&#38656;&#36890;&#36807;&#36820;&#22238;&#30340;Map&#26469;&#33719;&#21462;&#36820;&#22238;&#20540;&#12290;&#21478;&#22806;&#26377;&#19968;&#20010;&#31867;&#20284;&#30340;&#20415;&#25463;&#26041;&#27861;<tt class="classname">executeObject</tt>&#29992;&#20110;&#23384;&#20648;&#36807;&#31243;&#65292;&#20294;&#26159;&#20182;&#21482;&#33021;&#22788;&#29702;&#21333;&#20010;&#36820;&#22238;&#20540;&#30340;&#24773;&#20917;&#12290;
			&#19979;&#38754;&#30340;&#31034;&#20363;&#23637;&#31034;&#20102;&#19968;&#20010;&#21483;&#20570;<tt class="classname">get_actor_name</tt>
&#30340;&#20989;&#25968;&#35843;&#29992;&#65292;&#36820;&#22238;actor&#30340;&#23436;&#25972;&#30340;&#21517;&#31216;&#12290;
			&#36825;&#20010;&#20989;&#25968;&#23558;&#24037;&#20316;&#22312;MySQL&#25968;&#25454;&#24211;&#19978;&#12290;
		</p><p>
      </p><pre class="programlisting">CREATE FUNCTION get_actor_name (in_id INTEGER)
RETURNS VARCHAR(200) READS SQL DATA 
BEGIN
  DECLARE out_name VARCHAR(200);
  SELECT concat(first_name, ' ', last_name)
    INTO out_name
    FROM t_actor where id = in_id;
  RETURN out_name;
END;</pre><p>
</p><p>&#35843;&#29992;&#36825;&#20010;&#20989;&#25968;&#65292;&#25105;&#20204;&#20381;&#28982;&#22312;&#21021;&#22987;&#21270;&#26041;&#27861;&#20013;&#21019;&#24314;<tt class="classname">SimpleJdbcCall</tt></p><p>
      </p><pre class="programlisting">public class JdbcActorDao implements ActorDao {
    private SimpleJdbcTemplate simpleJdbcTemplate;
    private SimpleJdbcCall funcGetActorName;

    public void setDataSource(DataSource dataSource) {
        this.simpleJdbcTemplate = new SimpleJdbcTemplate(dataSource);
        JdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);
        jdbcTemplate.setResultsMapCaseInsensitive(true);
        this.funcGetActorName =
                new SimpleJdbcCall(jdbcTemplate)
                        .withFunctionName("get_actor_name");
    }

    public String getActorName(Long id) {
        SqlParameterSource in = new MapSqlParameterSource()
                .addValue("in_id", id); 
        String name = funcGetActorName.executeFunction(String.class, in);
        return name;
    }

    //  ... additional methods
}</pre><p>
			&#34987;&#35843;&#29992;&#30340;&#20989;&#25968;&#36820;&#22238;&#19968;&#20010;<tt class="classname">String</tt>&#31867;&#22411;&#12290;
			</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-simple-jdbc-call-4"></a>11.5.9.&nbsp;&#20351;&#29992;SimpleJdbcCall&#36820;&#22238;&#30340;ResultSet/REF Cursor</h3></div></div><div></div></div><p>&#26399;&#26395;&#36890;&#36807;&#35843;&#29992;&#23384;&#20648;&#36807;&#31243;&#25110;&#32773;&#20989;&#25968;&#26469;&#36820;&#22238;ResultSet&#19968;&#30452;&#26159;&#19968;&#20010;&#38382;&#39064;&#12290;&#19968;&#20123;&#25968;&#25454;&#24211;&#22312;JDBC&#32467;&#26524;&#22788;&#29702;&#20013;&#36820;&#22238;&#32467;&#26524;&#38598;&#65292;&#32780;&#21478;&#22806;&#19968;&#20123;&#25968;&#25454;&#24211;&#21017;&#38656;&#35201;&#26126;&#30830;&#25351;&#23450;&#36820;&#22238;&#20540;&#30340;&#31867;&#22411;&#12290;
			&#26080;&#35770;&#21738;&#31181;&#26041;&#27861;&#65292;&#37117;&#38656;&#35201;&#22312;&#24490;&#29615;&#36941;&#21382;&#32467;&#26524;&#38598;&#26102;&#65292;&#20570;&#20986;&#19968;&#20123;&#39069;&#22806;&#30340;&#24037;&#20316;&#65292;&#20174;&#32780;&#22788;&#29702;&#27599;&#19968;&#26465;&#35760;&#24405;&#12290;
			&#36890;&#36807;<tt class="classname">SimpleJdbcCall</tt>&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;<tt class="classname">returningResultSet</tt>&#26041;&#27861;&#65292;&#24182;&#23450;&#20041;&#19968;&#20010;<tt class="classname">RowMapper</tt>&#30340;&#23454;&#29616;&#31867;&#26469;&#22788;&#29702;&#29305;&#23450;&#30340;&#36820;&#22238;&#20540;&#12290; 
			&#24403;&#32467;&#26524;&#38598;&#22312;&#36820;&#22238;&#32467;&#26524;&#22788;&#29702;&#36807;&#31243;&#20013;&#27809;&#26377;&#34987;&#23450;&#20041;&#21517;&#31216;&#26102;&#65292;&#36820;&#22238;&#30340;&#32467;&#26524;&#38598;&#24517;&#39035;&#19982;&#23450;&#20041;&#30340;<tt class="classname">RowMapper</tt>&#30340;&#23454;&#29616;&#31867;&#25351;&#23450;&#30340;&#39034;&#24207;&#20445;&#25345;&#19968;&#33268;&#12290;
			&#32780;&#25351;&#23450;&#30340;&#21517;&#23383;&#20063;&#20250;&#34987;&#29992;&#20316;&#36820;&#22238;&#32467;&#26524;&#38598;&#20013;&#30340;&#21517;&#31216;&#12290;
		</p><p>&#22312;&#36825;&#20010;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#23558;&#20351;&#29992;&#19968;&#20010;&#23384;&#20648;&#36807;&#31243;&#65292;&#23427;&#24182;&#19981;&#25509;&#25910;&#20219;&#20309;&#21442;&#25968;&#65292;&#36820;&#22238;t_actor&#34920;&#20013;&#30340;&#25152;&#26377;&#30340;&#34892;&#65292;&#19979;&#38754;&#26159;MySQL&#25968;&#25454;&#24211;&#20013;&#30340;&#23384;&#20648;&#36807;&#31243;&#28304;&#30721;&#65306;
      </p><pre class="programlisting">CREATE PROCEDURE read_all_actors()
BEGIN
 SELECT a.id, a.first_name, a.last_name, a.birth_date FROM t_actor a;
END;</pre><p>
      &#35201;&#35843;&#29992;&#36825;&#20010;&#23384;&#20648;&#36807;&#31243;&#65292;&#25105;&#20204;&#38656;&#35201;&#23450;&#20041;&#19968;&#20010;<tt class="classname">RowMapper</tt>&#30340;&#23454;&#29616;&#31867;&#12290;&#25105;&#20204;&#25152;&#20351;&#29992;&#30340;&#31867;&#36981;&#24490;JavaBean&#30340;&#35268;&#33539;&#65292;&#25152;&#20197;&#25105;&#20204;&#21487;&#20197;&#20351;&#29992;<tt class="classname">ParameterizedBeanPropertyRowMapper</tt>&#20316;&#20026;&#23454;&#29616;&#31867;&#12290;
      &#36890;&#36807;&#23558;&#30456;&#24212;&#30340;class&#31867;&#20316;&#20026;&#21442;&#25968;&#20256;&#20837;&#21040;newInstance&#26041;&#27861;&#20013;&#65292;&#25105;&#20204;&#21487;&#20197;&#21019;&#24314;&#36825;&#20010;&#23454;&#29616;&#31867;&#12290;
      </p><p>
      </p><pre class="programlisting">public class JdbcActorDao implements ActorDao {
    private SimpleJdbcTemplate simpleJdbcTemplate;
    private SimpleJdbcCall procReadAllActors;

    public void setDataSource(DataSource dataSource) {
        this.simpleJdbcTemplate = new SimpleJdbcTemplate(dataSource);
        JdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);
        jdbcTemplate.setResultsMapCaseInsensitive(true);
        this.procReadAllActors =
                new SimpleJdbcCall(jdbcTemplate)
                        .withProcedureName("read_all_actors")
                        .returningResultSet("actors",
                                ParameterizedBeanPropertyRowMapper.newInstance(Actor.class));
    }

    public List getActorsList() {
        Map m = procReadAllActors.execute(new HashMap&lt;String, Object&gt;(0));
        return (List) m.get("actors");
    }

    //  ... additional methods
}</pre><p>
			&#36825;&#20010;&#20989;&#25968;&#35843;&#29992;&#20256;&#20837;&#19968;&#20010;&#31354;&#30340;Map&#36827;&#20837;&#65292;&#22240;&#20026;&#36825;&#37324;&#19981;&#38656;&#35201;&#20219;&#20309;&#30340;&#21442;&#25968;&#20256;&#20837;&#12290;&#32780;&#20989;&#25968;&#35843;&#29992;&#25152;&#36820;&#22238;&#30340;&#32467;&#26524;&#38598;&#23558;&#36820;&#22238;&#30340;&#26159;Actors&#21015;&#34920;&#12290;     
</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="jdbc-object"></a>11.6.&nbsp;&#29992;Java&#23545;&#35937;&#26469;&#34920;&#36798;JDBC&#25805;&#20316;</h2></div></div><div></div></div><p>
			<tt class="literal">org.springframework.jdbc.object</tt>&#21253;&#19979;&#30340;&#31867;&#20801;&#35768;&#29992;&#25143;&#20197;&#26356;&#21152;
			&#38754;&#21521;&#23545;&#35937;&#30340;&#26041;&#24335;&#21435;&#35775;&#38382;&#25968;&#25454;&#24211;&#12290;&#27604;&#22914;&#35828;&#65292;&#29992;&#25143;&#21487;&#20197;&#25191;&#34892;&#26597;&#35810;&#24182;&#36820;&#22238;&#19968;&#20010;list&#65292;
			&#35813;list&#20316;&#20026;&#19968;&#20010;&#32467;&#26524;&#38598;&#23558;&#25226;&#20174;&#25968;&#25454;&#24211;&#20013;&#21462;&#20986;&#30340;&#21015;&#25968;&#25454;&#26144;&#23556;&#21040;&#19994;&#21153;&#23545;&#35937;&#30340;&#23646;&#24615;&#19978;&#12290;
			&#29992;&#25143;&#20063;&#21487;&#20197;&#25191;&#34892;&#23384;&#20648;&#36807;&#31243;&#65292;&#20197;&#21450;&#36816;&#34892;&#26356;&#26032;&#12289;&#21024;&#38500;&#20197;&#21450;&#25554;&#20837;SQL&#35821;&#21477;&#12290;
	</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>
			&#22312;&#35768;&#22810;Spring&#24320;&#21457;&#20154;&#21592;&#20013;&#38388;&#23384;&#22312;&#26377;&#19968;&#31181;&#35266;&#28857;&#65292;&#37027;&#23601;&#26159;&#19979;&#38754;&#23558;&#35201;&#25552;&#21040;&#30340;&#21508;&#31181;RDBMS&#25805;&#20316;&#31867;
			&#65288;<a href="#jdbc-StoredProcedure" title="11.6.4.&nbsp;StoredProcedure&#31867;"><tt class="classname">StoredProcedure</tt></a>&#31867;&#38500;&#22806;&#65289;
			&#36890;&#24120;&#20063;&#21487;&#20197;&#30452;&#25509;&#20351;&#29992;<tt class="classname">JdbcTemplate</tt>&#30456;&#20851;&#30340;&#26041;&#27861;&#26469;&#26367;&#25442;&#12290;
			&#30456;&#23545;&#20110;&#25226;&#19968;&#20010;&#26597;&#35810;&#25805;&#20316;&#23553;&#35013;&#25104;&#19968;&#20010;&#31867;&#32780;&#35328;&#65292;&#30452;&#25509;&#35843;&#29992;<tt class="classname">JdbcTemplate</tt>&#26041;&#27861;&#23558;&#26356;&#31616;&#21333;&#32780;&#19988;&#26356;&#23481;&#26131;&#29702;&#35299;&#12290;
		</p><p>
			&#24517;&#39035;&#24378;&#35843;&#30340;&#19968;&#28857;&#26159;&#65292;&#36825;&#20165;&#20165;&#21482;&#26159;&#19968;&#31181;<span class="emphasis"><em>&#35266;&#28857;</em></span>&#32780;&#24050;&#65292;
			&#22914;&#26524;&#20320;&#35748;&#20026;&#20320;&#21487;&#20197;&#20174;&#30452;&#25509;&#20351;&#29992;RDBMS&#25805;&#20316;&#31867;&#20013;&#33719;&#21462;&#19968;&#20123;&#39069;&#22806;&#30340;&#22909;&#22788;&#65292;&#20320;&#19981;&#22952;&#26681;&#25454;&#33258;&#24049;&#30340;&#38656;&#35201;&#21644;&#21916;&#22909;&#36827;&#34892;&#19981;&#21516;&#30340;&#36873;&#25321;&#12290;
		</p></td></tr></tbody></table></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-SqlQuery"></a>11.6.1.&nbsp;<tt class="classname">SqlQuery</tt>&#31867;</h3></div></div><div></div></div><p>
			<tt class="classname">SqlQuery</tt>&#26159;&#19968;&#20010;&#21487;&#37325;&#29992;&#12289;&#32447;&#31243;&#23433;&#20840;&#30340;&#31867;&#65292;&#23427;&#23553;&#35013;&#20102;&#19968;&#20010;SQL&#26597;&#35810;&#12290;
			&#20854;&#23376;&#31867;&#24517;&#39035;&#23454;&#29616;<tt class="literal">newResultReader()</tt>&#26041;&#27861;&#65292;&#35813;&#26041;&#27861;&#29992;&#26469;&#22312;&#36941;&#21382;
			<tt class="interfacename">ResultSet</tt>&#30340;&#26102;&#20505;&#33021;&#20351;&#29992;&#19968;&#20010;&#31867;&#26469;&#20445;&#23384;&#32467;&#26524;&#12290;
			&#25105;&#20204;&#24456;&#23569;&#38656;&#35201;&#30452;&#25509;&#20351;&#29992;<tt class="classname">SqlQuery</tt>&#65292;&#22240;&#20026;&#20854;&#23376;&#31867;
			<tt class="classname">MappingSqlQuery</tt>&#20316;&#20026;&#19968;&#20010;&#26356;&#21152;&#26131;&#29992;&#30340;&#23454;&#29616;&#33021;&#22815;&#23558;&#32467;&#26524;&#38598;&#20013;&#30340;&#34892;&#26144;&#23556;&#20026;Java&#23545;&#35937;&#12290;
			<tt class="classname">SqlQuery</tt>&#36824;&#26377;&#21478;&#22806;&#20004;&#20010;&#25193;&#23637;&#20998;&#21035;&#26159;
			<tt class="classname">MappingSqlQueryWithParameters</tt>&#21644;<tt class="classname">UpdatableSqlQuery</tt>&#12290;
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-MappingSqlQuery"></a>11.6.2.&nbsp;<tt class="classname">MappingSqlQuery</tt>&#31867;</h3></div></div><div></div></div><p>
			<tt class="classname">MappingSqlQuery</tt>&#26159;&#19968;&#20010;&#21487;&#37325;&#29992;&#30340;&#26597;&#35810;&#25277;&#35937;&#31867;&#65292;&#20854;&#20855;&#20307;&#31867;&#24517;&#39035;&#23454;&#29616;
			<tt class="literal">mapRow(ResultSet, int)</tt>&#25277;&#35937;&#26041;&#27861;&#26469;&#23558;&#32467;&#26524;&#38598;&#20013;&#30340;&#27599;&#19968;&#34892;&#36716;&#25442;&#25104;Java&#23545;&#35937;&#12290;
			&#19979;&#38754;&#36825;&#20010;&#20363;&#23376;&#28436;&#31034;&#20102;&#19968;&#20010;&#23450;&#21046;&#26597;&#35810;&#65292;&#23427;&#23558;&#20174;&#23458;&#25143;&#34920;&#20013;&#21462;&#24471;&#30340;&#25968;&#25454;&#26144;&#23556;&#21040;&#19968;&#20010;<tt class="classname">Customer</tt>&#31867;&#23454;&#20363;&#12290;
	</p><pre class="programlisting">private class CustomerMappingQuery extends MappingSqlQuery {

    public CustomerMappingQuery(DataSource ds) {
        super(ds, "SELECT id, name FROM customer WHERE id = ?");
        super.declareParameter(new SqlParameter("id", Types.INTEGER));
        compile();
    }

    public Object mapRow(ResultSet rs, int rowNumber) throws SQLException {
        Customer cust = new Customer();
        cust.setId((Integer) rs.getObject("id"));
        cust.setName(rs.getString("name"));
        return cust;
    } 
}</pre><p>
			&#22312;&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#20026;&#29992;&#25143;&#26597;&#35810;&#25552;&#20379;&#20102;&#19968;&#20010;&#26500;&#36896;&#20989;&#25968;&#24182;&#20026;&#26500;&#36896;&#20989;&#25968;&#20256;&#36882;&#20102;&#19968;&#20010;
			<tt class="interfacename">DataSource</tt>&#21442;&#25968;&#12290;&#22312;&#26500;&#36896;&#20989;&#25968;&#37324;&#38754;&#25105;&#20204;&#25226;
			<tt class="interfacename">DataSource</tt>&#21644;&#19968;&#20010;&#29992;&#26469;&#36820;&#22238;&#26597;&#35810;&#32467;&#26524;&#30340;SQL&#35821;&#21477;&#20316;&#20026;&#21442;&#25968;
			&#35843;&#29992;&#29238;&#31867;&#30340;&#26500;&#36896;&#20989;&#25968;&#12290;SQL&#35821;&#21477;&#23558;&#34987;&#29992;&#20110;&#29983;&#25104;&#19968;&#20010;<tt class="interfacename">PreparedStatement</tt>&#23545;&#35937;&#65292;
			&#22240;&#27492;&#23427;&#21487;&#20197;&#21253;&#21547;&#21344;&#20301;&#31526;&#26469;&#20256;&#36882;&#21442;&#25968;&#12290;&#32780;&#27599;&#19968;&#20010;SQL&#35821;&#21477;&#30340;&#21442;&#25968;&#24517;&#39035;&#36890;&#36807;&#35843;&#29992;
			<tt class="literal">declareParameter</tt>&#26041;&#27861;&#26469;&#36827;&#34892;&#22768;&#26126;&#65292;&#35813;&#26041;&#27861;&#38656;&#35201;&#19968;&#20010;
			<tt class="classname">SqlParameter</tt>&#65288;&#23553;&#35013;&#20102;&#19968;&#20010;&#23383;&#27573;&#21517;&#23383;&#21644;&#19968;&#20010;
			<tt class="classname">java.sql.Types</tt>&#20013;&#23450;&#20041;&#30340;JDBC&#31867;&#22411;&#65289;&#23545;&#35937;&#20316;&#20026;&#21442;&#25968;&#12290;
			&#25152;&#26377;&#21442;&#25968;&#23450;&#20041;&#23436;&#20043;&#21518;&#65292;&#25105;&#20204;&#35843;&#29992;<tt class="literal">compile()</tt>&#26041;&#27861;&#26469;&#23545;SQL&#35821;&#21477;&#36827;&#34892;&#39044;&#32534;&#35793;&#12290;
		</p><pre class="programlisting">public Customer getCustomer(Integer id) {
    CustomerMappingQuery custQry = new CustomerMappingQuery(dataSource); 
    Object[] parms = new Object[1];
    parms[0] = id;
    List customers = custQry.execute(parms);
    if (customers.size() &gt; 0) {
        return (Customer) customers.get(0);
    }
    else {
        return null;
    }
}</pre><p>
			&#22312;&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;getCustomer&#26041;&#27861;&#36890;&#36807;&#20256;&#36882;&#24799;&#19968;&#21442;&#25968;id&#26469;&#36820;&#22238;&#19968;&#20010;&#23458;&#25143;&#23545;&#35937;&#12290;
			&#35813;&#26041;&#27861;&#20869;&#37096;&#22312;&#21019;&#24314;<tt class="classname">CustomerMappingQuery</tt>&#23454;&#20363;&#20043;&#21518;&#65292;
			&#25105;&#20204;&#21019;&#24314;&#20102;&#19968;&#20010;&#23545;&#35937;&#25968;&#32452;&#29992;&#26469;&#21253;&#21547;&#35201;&#20256;&#36882;&#30340;&#26597;&#35810;&#21442;&#25968;&#12290;&#36825;&#37324;&#25105;&#20204;&#21482;&#26377;&#21807;&#19968;&#30340;&#19968;&#20010;
			<tt class="classname">Integer</tt>&#21442;&#25968;&#12290;&#25191;&#34892;<tt class="classname">CustomerMappingQuery</tt>&#30340;
			execute&#26041;&#27861;&#20043;&#21518;&#65292;&#25105;&#20204;&#24471;&#21040;&#20102;&#19968;&#20010;<tt class="literal">List</tt>&#65292;&#35813;List&#20013;&#21253;&#21547;&#19968;&#20010;
			<tt class="classname">Customer</tt>&#23545;&#35937;&#65292;&#22914;&#26524;&#26377;&#23545;&#35937;&#28385;&#36275;&#26597;&#35810;&#26465;&#20214;&#30340;&#35805;&#12290;
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-SqlUpdate"></a>11.6.3.&nbsp;<tt class="classname">SqlUpdate</tt>&#31867;</h3></div></div><div></div></div><p>
			<tt class="classname">SqlUpdate</tt>&#31867;&#23553;&#35013;&#20102;&#19968;&#20010;&#21487;&#37325;&#22797;&#20351;&#29992;&#30340;SQL&#26356;&#26032;&#25805;&#20316;&#12290;
			&#36319;&#25152;&#26377;<tt class="classname">RdbmsOperation</tt>&#31867;&#19968;&#26679;&#65292;SqlUpdate&#21487;&#20197;&#22312;SQL&#20013;&#23450;&#20041;&#21442;&#25968;&#12290;
			&#35813;&#31867;&#25552;&#20379;&#20102;&#19968;&#31995;&#21015;<tt class="literal">update()</tt>&#26041;&#27861;&#65292;&#23601;&#20687;SqlQuery&#25552;&#20379;&#30340;&#19968;&#31995;&#21015;<tt class="literal">execute()</tt>&#26041;&#27861;&#19968;&#26679;&#12290; 
			<tt class="classname">SqlUpdate</tt>&#26159;&#19968;&#20010;&#20855;&#20307;&#30340;&#31867;&#12290;&#36890;&#36807;&#22312;SQL&#35821;&#21477;&#20013;&#23450;&#20041;&#21442;&#25968;&#65292;&#36825;&#20010;&#31867;&#21487;&#20197;&#25903;&#25345;&#19981;&#21516;&#30340;&#26356;&#26032;&#26041;&#27861;&#65292;&#25105;&#20204;&#19968;&#33324;&#19981;&#38656;&#35201;&#36890;&#36807;&#32487;&#25215;&#26469;&#23454;&#29616;&#23450;&#21046;&#12290;
		</p><pre class="programlisting">import java.sql.Types;

import javax.sql.DataSource;

import org.springframework.jdbc.core.SqlParameter;
import org.springframework.jdbc.object.SqlUpdate;

public class UpdateCreditRating extends SqlUpdate {

    public UpdateCreditRating(DataSource ds) {
        setDataSource(ds);
        setSql("update customer set credit_rating = ? where id = ?");
        declareParameter(new SqlParameter(Types.NUMERIC));
        declareParameter(new SqlParameter(Types.NUMERIC));
        compile();
    }

    <i class="lineannotation"><span class="lineannotation">/**
     * @param id for the Customer to be updated
     * @param rating the new value for credit rating
     * @return number of rows updated
     */</span></i>
    public int run(int id, int rating) {
        Object[] params =
            new Object[] {
                new Integer(rating),
                new Integer(id)};
        return update(params);
    }
}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-StoredProcedure"></a>11.6.4.&nbsp;<tt class="classname">StoredProcedure</tt>&#31867;</h3></div></div><div></div></div><p>
			<tt class="classname">StoredProcedure</tt>&#31867;&#26159;&#19968;&#20010;&#25277;&#35937;&#22522;&#31867;&#65292;&#23427;&#26159;&#23545;RDBMS&#23384;&#20648;&#36807;&#31243;&#30340;&#19968;&#31181;&#25277;&#35937;&#12290;
			&#35813;&#31867;&#25552;&#20379;&#20102;&#22810;&#31181;<tt class="literal">execute(..)</tt>&#26041;&#27861;&#65292;&#19981;&#36807;&#36825;&#20123;&#26041;&#27861;&#30340;&#35775;&#38382;&#31867;&#22411;&#37117;&#26159;<tt class="literal">protected</tt>&#30340;&#12290;
		</p><p>
			&#20174;&#29238;&#31867;&#32487;&#25215;&#30340;<tt class="literal">sql</tt>&#23646;&#24615;&#29992;&#26469;&#25351;&#23450;RDBMS&#23384;&#20648;&#36807;&#31243;&#30340;&#21517;&#23383;&#12290;
			&#23613;&#31649;&#35813;&#31867;&#25552;&#20379;&#20102;&#35768;&#22810;&#24517;&#39035;&#22312;JDBC3.0&#19979;&#20351;&#29992;&#30340;&#21151;&#33021;&#65292;&#20294;&#26159;&#25105;&#20204;&#26356;&#20851;&#27880;&#30340;&#26159;JDBC 3.0&#20013;&#24341;&#20837;&#30340;&#21629;&#21517;&#21442;&#25968;&#29305;&#24615;&#12290;
		</p><p>
			&#19979;&#38754;&#30340;&#31243;&#24207;&#28436;&#31034;&#20102;&#22914;&#20309;&#35843;&#29992;Oracle&#20013;&#30340;<tt class="literal">sysdate()</tt>&#20989;&#25968;&#12290;
			&#36825;&#37324;&#25105;&#20204;&#21019;&#24314;&#20102;&#19968;&#20010;&#32487;&#25215;<tt class="classname">StoredProcedure</tt>&#30340;&#23376;&#31867;&#65292;&#34429;&#28982;&#23427;&#27809;&#26377;&#36755;&#20837;&#21442;&#25968;&#65292;
			&#20294;&#26159;&#25105;&#24517;&#39035;&#36890;&#36807;&#20351;&#29992;<tt class="classname">SqlOutParameter</tt>&#26469;&#22768;&#26126;&#19968;&#20010;&#26085;&#26399;&#31867;&#22411;&#30340;&#36755;&#20986;&#21442;&#25968;&#12290;
			<tt class="literal">execute()</tt>&#26041;&#27861;&#23558;&#36820;&#22238;&#19968;&#20010;map&#65292;map&#20013;&#30340;&#27599;&#20010;entry&#26159;&#19968;&#20010;&#29992;&#21442;&#25968;&#21517;&#20316;key&#65292;&#20197;&#36755;&#20986;&#21442;&#25968;&#20026;value&#30340;&#21517;&#20540;&#23545;&#12290;
		</p><pre class="programlisting">import java.sql.Types;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;

import javax.sql.DataSource;

import org.springframework.jdbc.core.SqlOutParameter;
import org.springframework.jdbc.datasource.*;
import org.springframework.jdbc.object.StoredProcedure;

public class TestStoredProcedure {

    public static void main(String[] args)  {
        TestStoredProcedure t = new TestStoredProcedure();
        t.test();
        System.out.println("Done!");
    }
    
    void test() {
        DriverManagerDataSource ds = new DriverManagerDataSource();
        ds.setDriverClassName("oracle.jdbc.OracleDriver");
        ds.setUrl("jdbc:oracle:thin:@localhost:1521:mydb");
        ds.setUsername("scott");
        ds.setPassword("tiger");

        MyStoredProcedure sproc = new MyStoredProcedure(ds);
        Map results = sproc.execute();
        printMap(results);
    }

    private class MyStoredProcedure extends StoredProcedure {
        
        private static final String SQL = "sysdate";

        public MyStoredProcedure(DataSource ds) {
            setDataSource(ds);
            setFunction(true);
            setSql(SQL);
            declareParameter(new SqlOutParameter("date", Types.DATE));
            compile();
        }

        public Map execute() {
            <i class="lineannotation"><span class="lineannotation">// the 'sysdate' sproc has no input parameters, so an empty Map is supplied...</span></i>
            return execute(new HashMap());
        }
    }

    private static void printMap(Map results) {
        for (Iterator it = results.entrySet().iterator(); it.hasNext(); ) {
            System.out.println(it.next());  
        }
    }
}</pre><p>
			&#19979;&#38754;&#26159;<tt class="classname">StoredProcedure</tt>&#30340;&#21478;&#19968;&#20010;&#20363;&#23376;&#65292;&#23427;&#20351;&#29992;&#20102;&#20004;&#20010;Oracle&#28216;&#26631;&#31867;&#22411;&#30340;&#36755;&#20986;&#21442;&#25968;&#12290;
		</p><pre class="programlisting">import oracle.jdbc.driver.OracleTypes;
import org.springframework.jdbc.core.SqlOutParameter;
import org.springframework.jdbc.object.StoredProcedure;

import javax.sql.DataSource;
import java.util.HashMap;
import java.util.Map;

public class TitlesAndGenresStoredProcedure extends StoredProcedure {

    private static final String SPROC_NAME = "AllTitlesAndGenres";

    public TitlesAndGenresStoredProcedure(DataSource dataSource) {
        super(dataSource, SPROC_NAME);
        declareParameter(new SqlOutParameter("titles", OracleTypes.CURSOR, new TitleMapper()));
        declareParameter(new SqlOutParameter("genres", OracleTypes.CURSOR, new GenreMapper()));
        compile();
    }

    public Map execute() {
        <i class="lineannotation"><span class="lineannotation">// again, this sproc has no input parameters, so an empty Map is supplied...</span></i>
        return super.execute(new HashMap());
    }
}</pre><p>
			&#20540;&#24471;&#27880;&#24847;&#30340;&#26159;<tt class="classname">TitlesAndGenresStoredProcedure</tt>&#26500;&#36896;&#20989;&#25968;&#20013;
			<tt class="literal">declareParameter(..)</tt>&#30340;<tt class="classname">SqlOutParameter</tt>&#21442;&#25968;&#65292;
			&#35813;&#21442;&#25968;&#20351;&#29992;&#20102;<tt class="interfacename">RowMapper</tt>&#25509;&#21475;&#30340;&#23454;&#29616;&#12290;&#36825;&#26159;&#19968;&#31181;&#38750;&#24120;&#26041;&#20415;&#32780;&#24378;&#22823;&#30340;&#37325;&#29992;&#26041;&#24335;&#12290;
			&#19979;&#38754;&#25105;&#20204;&#26469;&#30475;&#19968;&#19979;<tt class="interfacename">RowMapper</tt>&#30340;&#20004;&#20010;&#20855;&#20307;&#23454;&#29616;&#12290;
		</p><p>
			&#39318;&#20808;&#26159;<tt class="classname">TitleMapper</tt>&#31867;&#65292;&#23427;&#31616;&#21333;&#30340;&#25226;<tt class="interfacename">ResultSet</tt>&#20013;&#30340;&#27599;&#19968;&#34892;&#26144;&#23556;&#20026;&#19968;&#20010;<tt class="classname">Title</tt>Domain Object&#12290;
		</p><pre class="programlisting">import com.foo.sprocs.domain.Title;
import org.springframework.jdbc.core.RowMapper;

import java.sql.ResultSet;
import java.sql.SQLException;

public final class TitleMapper implements RowMapper {
    
    public Object mapRow(ResultSet rs, int rowNum) throws SQLException {
        Title title = new Title();
        title.setId(rs.getLong("id"));
        title.setName(rs.getString("name"));
        return title;
    }
}</pre><p>
			&#21478;&#19968;&#20010;&#26159;<tt class="classname">GenreMapper</tt>&#31867;&#65292;&#20063;&#26159;&#38750;&#24120;&#31616;&#21333;&#30340;&#23558;<tt class="interfacename">ResultSet</tt>&#20013;&#30340;&#27599;&#19968;&#34892;&#26144;&#23556;&#20026;&#19968;&#20010;<tt class="classname">Genre</tt>Domain Object&#12290;
		</p><pre class="programlisting">import org.springframework.jdbc.core.RowMapper;

import java.sql.ResultSet;
import java.sql.SQLException;

import com.foo.domain.Genre;

public final class GenreMapper implements RowMapper {
    
    public Object mapRow(ResultSet rs, int rowNum) throws SQLException {
        return new Genre(rs.getString("name"));
    }
}</pre><p>
			&#22914;&#26524;&#20320;&#38656;&#35201;&#32473;&#23384;&#20648;&#36807;&#31243;&#20256;&#36755;&#20837;&#21442;&#25968;&#65288;&#36825;&#20123;&#36755;&#20837;&#21442;&#25968;&#26159;&#22312;RDBMS&#23384;&#20648;&#36807;&#31243;&#20013;&#23450;&#20041;&#22909;&#20102;&#30340;&#65289;&#65292;
			&#21017;&#38656;&#35201;&#25552;&#20379;&#19968;&#20010;&#25351;&#23450;&#31867;&#22411;&#30340;<tt class="literal">execute(..)</tt>&#26041;&#27861;&#65292;
			&#35813;&#26041;&#27861;&#23558;&#35843;&#29992;&#22522;&#31867;&#30340;<tt class="literal">protected</tt> <tt class="literal">execute(Map parameters)</tt>&#26041;&#27861;&#12290;&#20363;&#22914;&#65306;
		</p><pre class="programlisting">import oracle.jdbc.driver.OracleTypes;
import org.springframework.jdbc.core.SqlOutParameter;
import org.springframework.jdbc.object.StoredProcedure;

import javax.sql.DataSource;
import java.util.HashMap;
import java.util.Map;

public class TitlesAfterDateStoredProcedure extends StoredProcedure {

    private static final String SPROC_NAME = "TitlesAfterDate";
    private static final String CUTOFF_DATE_PARAM = "cutoffDate";

    public TitlesAfterDateStoredProcedure(DataSource dataSource) {
        super(dataSource, SPROC_NAME);
        declareParameter(new SqlParameter(CUTOFF_DATE_PARAM, Types.DATE);
        declareParameter(new SqlOutParameter("titles", OracleTypes.CURSOR, new TitleMapper()));
        compile();
    }

    public Map execute(Date cutoffDate) {
        Map inputs = new HashMap();
        inputs.put(CUTOFF_DATE_PARAM, cutoffDate);
        return super.execute(inputs);
    }
}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-SqlFunction"></a>11.6.5.&nbsp;<tt class="classname">SqlFunction</tt>&#31867;</h3></div></div><div></div></div><p>
			<tt class="classname">SqlFunction</tt> RDBMS&#25805;&#20316;&#31867;&#23553;&#35013;&#20102;&#19968;&#20010;SQL&#8220;&#20989;&#25968;&#8221;&#21253;&#35013;&#22120;&#65288;wrapper&#65289;&#65292;
			&#35813;&#21253;&#35013;&#22120;&#36866;&#29992;&#20110;&#26597;&#35810;&#24182;&#36820;&#22238;&#19968;&#20010;&#21333;&#34892;&#32467;&#26524;&#38598;&#12290;&#40664;&#35748;&#36820;&#22238;&#30340;&#26159;&#19968;&#20010;<tt class="literal">int</tt>&#20540;&#65292;
			&#19981;&#36807;&#25105;&#20204;&#21487;&#20197;&#37319;&#29992;&#31867;&#20284;<tt class="classname">JdbcTemplate</tt>&#20013;&#30340;<tt class="literal">queryForXxx</tt>
			&#20570;&#27861;&#33258;&#24049;&#23454;&#29616;&#26469;&#36820;&#22238;&#20854;&#23427;&#31867;&#22411;&#12290;<tt class="classname">SqlFunction</tt>&#20248;&#21183;&#22312;&#20110;&#25105;&#20204;&#19981;&#24517;&#21019;&#24314;
			<tt class="classname">JdbcTemplate</tt>&#65292;&#36825;&#20123;&#23427;&#37117;&#22312;&#20869;&#37096;&#26367;&#25105;&#20204;&#20570;&#20102;&#12290;
		</p><p>
			&#35813;&#31867;&#30340;&#20027;&#35201;&#29992;&#36884;&#26159;&#35843;&#29992;SQL&#20989;&#25968;&#26469;&#36820;&#22238;&#19968;&#20010;&#21333;&#20540;&#30340;&#32467;&#26524;&#38598;&#65292;&#27604;&#22914;&#31867;&#20284;&#8220;select user()&#8221;&#12289;
			&#8220;select sysdate from dual&#8221;&#30340;&#26597;&#35810;&#12290;&#22914;&#26524;&#38656;&#35201;&#35843;&#29992;&#26356;&#22797;&#26434;&#30340;&#23384;&#20648;&#20989;&#25968;&#65292;
			&#65288;&#21487;&#20197;&#20026;&#36825;&#31181;&#31867;&#22411;&#30340;&#22788;&#29702;&#20351;&#29992;<tt class="classname">StoredProcedure</tt>&#25110;<tt class="classname">SqlCall&#65289;</tt>&#12290;
		</p><p>
			<tt class="classname">SqlFunction</tt>&#26159;&#19968;&#20010;&#20855;&#20307;&#31867;&#65292;&#36890;&#24120;&#25105;&#20204;&#19981;&#38656;&#35201;&#23427;&#30340;&#23376;&#31867;&#12290;
			&#20854;&#29992;&#27861;&#26159;&#21019;&#24314;&#35813;&#31867;&#30340;&#23454;&#20363;&#65292;&#28982;&#21518;&#22768;&#26126;SQL&#35821;&#21477;&#20197;&#21450;&#21442;&#25968;&#23601;&#21487;&#20197;&#35843;&#29992;&#30456;&#20851;&#30340;run&#26041;&#27861;&#21435;&#22810;&#27425;&#25191;&#34892;&#20989;&#25968;&#12290;
			&#19979;&#38754;&#30340;&#20363;&#23376;&#29992;&#26469;&#36820;&#22238;&#25351;&#23450;&#34920;&#30340;&#35760;&#24405;&#34892;&#25968;&#65306;
		</p><pre class="programlisting">public int countRows() {
    SqlFunction sf = new SqlFunction(dataSource, "select count(*) from mytable");
    sf.compile();
    return sf.run();
}</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="jdbc-parameter-handling"></a>11.7.&nbsp;&#21442;&#25968;&#21644;&#25968;&#25454;&#22788;&#29702;&#30340;&#22522;&#26412;&#21407;&#21017;</h2></div></div><div></div></div><p>&#22312;Spring&#30340;JDBC&#26694;&#26550;&#30340;&#25152;&#26377;&#24037;&#20316;&#27169;&#24335;&#20013;&#36143;&#24443;&#20102;&#19968;&#20123;&#19982;&#21442;&#25968;&#21644;&#25968;&#25454;&#22788;&#29702;&#30456;&#20851;&#30340;&#22522;&#26412;&#21407;&#21017;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-type-information"></a>11.7.1.&nbsp;&#20026;&#21442;&#25968;&#35774;&#32622;SQL&#31867;&#22411;&#20449;&#24687;</h3></div></div><div></div></div><p>&#22810;&#25968;&#24773;&#20917;&#19979;&#65292;Spring&#20250;&#26681;&#25454;&#20256;&#20837;&#30340;&#21442;&#25968;&#20540;&#26469;&#35774;&#23450;&#30456;&#24212;&#30340;SQL&#31867;&#22411;&#12290;&#26377;&#26102;&#65292;&#25105;&#20204;&#26377;&#24517;&#35201;&#26126;&#30830;&#25351;&#23450;&#20256;&#20837;&#21442;&#25968;&#25152;&#20195;&#34920;&#30340;SQL&#31867;&#22411;&#65292;&#36825;&#19968;&#28857;&#23545;&#20110;&#27491;&#30830;&#35774;&#32622;NULL&#20540;&#30340;&#26102;&#20505;&#21487;&#33021;&#27604;&#36739;&#26377;&#29992;&#12290;</p><p>&#21478;&#22806;&#36824;&#26377;&#19968;&#20123;&#20854;&#20182;&#30340;&#19981;&#21516;&#26041;&#38754;&#30340;&#20316;&#29992;:</p><div class="itemizedlist"><ul type="disc"><li><p>&#22810;&#25968;<tt class="classname">JdbcTemplate</tt>&#30340;update&#25110;&#32773;query&#26041;&#27861;&#20250;&#25509;&#25910;&#19968;&#20010;&#39069;&#22806;&#30340;int&#25968;&#32452;&#26500;&#25104;&#30340;&#21442;&#25968;&#12290;
          &#36825;&#20010;&#25968;&#32452;&#38656;&#35201;&#25552;&#20379;&#30340;&#26159;&#20351;&#29992;<tt class="classname">java.sql.Types</tt>&#20013;&#25152;&#23450;&#20041;&#30340;SQL&#31867;&#22411;&#12290;&#32780;&#36825;&#20010;&#25968;&#32452;&#20013;&#23450;&#20041;&#30340;&#31867;&#22411;&#38656;&#35201;&#19982;&#27599;&#20010;&#20256;&#20837;&#30340;&#21442;&#25968;&#25152;&#23545;&#24212;&#12290;
          </p></li></ul></div><div class="itemizedlist"><ul type="disc"><li><p>&#20320;&#21487;&#20197;&#20351;&#29992;<tt class="classname">SqlParameterValue</tt>&#23545;&#21442;&#25968;&#36827;&#34892;&#39069;&#22806;&#30340;&#23553;&#35013;&#20174;&#32780;&#21253;&#35013;&#26356;&#22810;&#30340;&#21442;&#25968;&#20449;&#24687;&#12290;&#36890;&#36807;&#20256;&#20837;&#21442;&#25968;&#20540;&#21644;&#23545;&#24212;&#30340;SQL&#31867;&#22411;&#20316;&#20026;&#26500;&#36896;&#20989;&#25968;&#30340;&#21442;&#25968;&#65292;&#20320;&#21487;&#20197;&#21019;&#24314;&#36825;&#20010;&#31867;&#30340;&#19968;&#20010;&#23454;&#20363;&#12290;
          &#20320;&#20063;&#21487;&#20197;&#20026;numeric&#30340;&#20540;&#25552;&#20379;&#19968;&#20123;&#39069;&#22806;&#30340;&#31934;&#24230;&#35201;&#27714;&#12290;
          </p></li></ul></div><div class="itemizedlist"><ul type="disc"><li><p>&#23545;&#20110;&#37027;&#20123;&#20351;&#29992;&#21629;&#21517;&#21442;&#25968;&#30340;&#24773;&#20917;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;<tt class="classname">SqlParameterSource</tt>&#12289;<tt class="classname">BeanPropertySqlParameterSource</tt>&#25110;&#32773;<tt class="classname">MapSqlParameterSource</tt>&#31867;&#12290;
         &#20182;&#20204;&#37117;&#20855;&#22791;&#20102;&#20026;&#21629;&#21517;&#21442;&#25968;&#27880;&#20876;SQL&#31867;&#22411;&#30340;&#21151;&#33021;&#12290;
         </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-lob"></a>11.7.2.&nbsp;&#22788;&#29702;BLOB &#21644; CLOB&#23545;&#35937;</h3></div></div><div></div></div><p>&#20320;&#21487;&#20197;&#22312;&#25968;&#25454;&#24211;&#20013;&#23384;&#20648;&#22270;&#20687;&#12289;&#20108;&#36827;&#21046;&#23545;&#35937;&#25110;&#32773;&#22823;&#25991;&#26412;&#31561;&#23545;&#35937;&#12290;&#36825;&#20123;&#36739;&#22823;&#30340;&#20108;&#36827;&#21046;&#23545;&#35937;&#34987;&#31216;&#20043;&#20026;BLOB&#31867;&#22411;&#65292;&#32780;&#23545;&#24212;&#30340;&#22823;&#25991;&#26412;&#23545;&#35937;&#34987;&#31216;&#20043;&#20026;CLOB&#23545;&#35937;&#12290;
			Spring&#20801;&#35768;&#20320;&#20351;&#29992;JdbcTemplate&#12289;&#26356;&#39640;&#23618;&#27425;&#23553;&#35013;&#30340;RDBMS&#23545;&#35937;&#21644;SimpleJdbc&#31867;&#23545;&#36825;&#20123;&#22823;&#23545;&#35937;&#36827;&#34892;&#25805;&#20316;&#12290; &#25152;&#26377;&#30340;&#36825;&#20123;&#25805;&#20316;&#26041;&#24335;&#37117;&#23454;&#29616;&#20102;<tt class="classname">LobHandler</tt>&#25509;&#21475;&#26469;&#22788;&#29702;LOB&#31867;&#22411;&#30340;&#25968;&#25454;&#12290;
			<tt class="classname">LobHandler</tt>&#25509;&#21475;&#25552;&#20379;&#20102;&#35775;&#38382;<tt class="classname">LobCreator</tt>&#30340;&#26041;&#27861;&#65292;&#36890;&#36807;&#35843;&#29992;<tt class="classname">getLobCreator</tt>&#65292;&#20320;&#21487;&#20197;&#21019;&#24314;&#19968;&#20010;&#26032;&#30340;LOB&#31867;&#22411;&#30340;&#25968;&#25454;&#12290;
		</p><p><tt class="classname">LobCreator/LobHandler</tt>&#25509;&#21475;&#38024;&#23545;LOB&#31867;&#22411;&#30340;&#25968;&#25454;&#25805;&#20316;&#25552;&#20379;&#20102;&#19979;&#21015;&#25903;&#25345;&#65306;</p><p>
      </p><div class="itemizedlist"><ul type="disc"><li><p>BLOB</p><div class="itemizedlist"><ul type="circle"><li><p>byte[] &#8211; getBlobAsBytes and setBlobAsBytes</p><p>byte[] &#8211; getBlobAsBytes &#21644; setBlobAsBytes</p></li><li><p>InputStream &#8211; getBlobAsBinaryStream and
                setBlobAsBinaryStream</p><p>InputStream &#8211; getBlobAsBinaryStream&#21644;setBlobAsBinaryStream</p></li></ul></div></li></ul></div><div class="itemizedlist"><ul type="disc"><li><p>CLOB</p><div class="itemizedlist"><ul type="circle"><li><p>String &#8211; getClobAsString and setClobAsString</p><p>String &#8211; getClobAsString&#21644;setClobAsString</p></li><li><p>InputStream &#8211; getClobAsAsciiStream and
                setClobAsAsciiStream</p><p>InputStream &#8211; getClobAsAsciiStream&#21644;setClobAsAsciiStream</p></li><li><p>Reader &#8211; getClobAsCharacterStream and
                setClobAsCharacterStream</p><p>Reader &#8211; getClobAsCharacterStream&#21644;setClobAsCharacterStream</p></li></ul></div></li></ul></div><p>
        </p><p>&#29616;&#22312;&#25105;&#20204;&#36890;&#36807;&#19968;&#20010;&#31034;&#20363;&#26469;&#23637;&#31034;&#22914;&#20309;&#21019;&#24314;&#19968;&#20010;BLOB&#25968;&#25454;&#24182;&#25554;&#20837;&#25968;&#25454;&#24211;&#12290;&#31245;&#21518;&#30340;&#20363;&#23376;&#65292;&#25105;&#20204;&#23558;&#23637;&#31034;&#22914;&#20309;&#20174;&#25968;&#25454;&#24211;&#20013;&#23558;BLOB&#25968;&#25454;&#35835;&#21462;&#20986;&#26469;&#12290;</p><p>&#36825;&#20010;&#20363;&#23376;&#20351;&#29992;JdbcTemplate&#21644;&#19968;&#20010;AbstractLobCreatingPreparedStatementCallback&#30340;&#23454;&#29616;&#31867;&#12290;
			&#36825;&#37324;&#21807;&#19968;&#38656;&#35201;&#23454;&#29616;&#30340;&#26041;&#27861;&#23601;&#26159;"setValues"&#12290;&#22312;&#36825;&#20010;&#26041;&#27861;&#20013;&#65292;&#23558;&#25552;&#20379;&#19968;&#20010;LobCreator&#25509;&#21475;&#65292;&#34987;&#29992;&#20316;&#22312;&#20320;&#30340;&#25554;&#20837;&#35821;&#21477;&#20013;&#35774;&#32622;LOB&#23383;&#27573;&#30340;&#20540;&#12290;
		</p><p>&#25105;&#20204;&#20551;&#35774;&#26377;&#19968;&#20010;&#21464;&#37327;&#21483;&#20570;&#8220;lobHandler&#8221;&#24050;&#32463;&#34987;&#35774;&#32622;&#21040;<tt class="classname">DefaultLobHandler</tt>&#30340;&#23454;&#20363;&#20013;&#12290;&#24403;&#28982;&#65292;&#36825;&#26159;&#30001;&#27880;&#20837;&#23436;&#25104;&#30340;&#12290;
		</p><div class="programlistingco"><pre class="programlisting">final File blobIn = new File("spring2004.jpg");
final InputStream blobIs = new FileInputStream(blobIn);
final File clobIn = new File("large.txt");
final InputStream clobIs = new FileInputStream(clobIn);
final InputStreamReader clobReader = new InputStreamReader(clobIs);
jdbcTemplate.execute(
  "INSERT INTO lob_table (id, a_clob, a_blob) VALUES (?, ?, ?)",
  new AbstractLobCreatingPreparedStatementCallback(lobhandler) {                         <span class="co"><img src="1.png" alt="(1)"></span>
      protected void setValues(PreparedStatement ps, LobCreator lobCreator) 
          throws SQLException {
        ps.setLong(1, 1L);
        lobCreator.setClobAsCharacterStream(ps, 2, clobReader, (int)clobIn.length());    <span class="co"><img src="2.png" alt="(2)"></span>
        lobCreator.setBlobAsBinaryStream(ps, 3, blobIs, (int)blobIn.length());           <span class="co"><img src="3.png" alt="(3)"></span>
      }
  }
);
blobIs.close();
clobReader.close();</pre><div class="calloutlist"><table summary="Callout list" border="0"><tbody><tr><td valign="top" width="5%" align="left"><img src="1.png" alt="1" border="0"></td><td valign="top" align="left"><p>&#25105;&#20204;&#22312;&#36825;&#37324;&#20351;&#29992;&#30340;lobHandler&#23454;&#29616;&#31867;&#26159;&#19968;&#20010;&#26222;&#36890;&#30340;<tt class="classname">DefaultLobHandler</tt></p></td></tr><tr><td valign="top" width="5%" align="left"><img src="2.png" alt="2" border="0"></td><td valign="top" align="left"><p>&#20351;&#29992;<tt class="classname">setClobAsCharacterStream</tt>&#65292;&#25105;&#20204;&#20256;&#20837;CLOB&#30340;&#20869;&#23481;</p></td></tr><tr><td valign="top" width="5%" align="left"><img src="3.png" alt="3" border="0"></td><td valign="top" align="left"><p>&#20351;&#29992;<tt class="classname">setBlobAsBinartStream</tt>&#65292;&#25105;&#20204;&#20256;&#20837;BLOB&#30340;&#20869;&#23481;</p></td></tr></tbody></table></div></div><p>&#29616;&#22312;&#25105;&#20204;&#26469;&#31034;&#33539;&#20174;&#25968;&#25454;&#24211;&#20013;&#35835;&#21462;LOB&#25968;&#25454;&#12290;&#25105;&#20204;&#36825;&#37324;&#20877;&#27425;&#20351;&#29992;JdbcTempate&#24182;&#20351;&#29992;&#30456;&#21516;&#30340;<tt class="classname">DefaultLobHandler</tt>&#23454;&#20363;&#12290;
		</p><div class="programlistingco"><pre class="programlisting">List l = jdbcTemplate.query("select id, a_clob, a_blob from lob_table",
    new RowMapper() {
      public Object mapRow(ResultSet rs, int i) throws SQLException {
        Map results = new HashMap();
        String clobText = lobHandler.getClobAsString(rs, "a_clob");                      <span class="co"><img src="1.png" alt="(1)"></span>
        results.put("CLOB", clobText);
        byte[] blobBytes = lobHandler.getBlobAsBytes(rs, "a_blob");                      <span class="co"><img src="2.png" alt="(2)"></span>
        results.put("BLOB", blobBytes);
        return results;
      }
    });
</pre><div class="calloutlist"><table summary="Callout list" border="0"><tbody><tr><td valign="top" width="5%" align="left"><img src="2.png" alt="2" border="0"></td><td valign="top" align="left"><p>&#20351;&#29992;<tt class="classname">getClobAsString </tt>&#33719;&#21462;CLOB&#20869;&#23481;</p></td></tr><tr><td valign="top" width="5%" align="left"><img src="3.png" alt="3" border="0"></td><td valign="top" align="left"><p>&#20351;&#29992;<tt class="classname">getBlobAsBytes</tt>&#33719;&#21462;BLOB&#20869;&#23481;</p></td></tr></tbody></table></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-in-clause"></a>11.7.3.&nbsp;&#22312;IN&#35821;&#21477;&#20013;&#20256;&#20837;&#19968;&#32452;&#21442;&#25968;&#20540;</h3></div></div><div></div></div><p>SQL&#26631;&#20934;&#20801;&#35768;&#22522;&#20110;&#19968;&#20010;&#24102;&#21442;&#25968;&#21015;&#34920;&#30340;&#34920;&#36798;&#24335;&#36827;&#34892;&#26597;&#35810;&#12290;&#19968;&#20010;&#20856;&#22411;&#30340;&#20363;&#23376;&#21487;&#33021;&#20687;&#36825;&#26679;&#65306;"select * from T_ACTOR where id in (1, 2, 3)"&#12290;
			&#19981;&#36807;&#36825;&#31181;&#21442;&#25968;&#21015;&#34920;&#30340;&#26041;&#24335;&#24182;&#19981;&#33021;&#30452;&#25509;&#34987;JDBC&#26631;&#20934;&#25152;&#25903;&#25345; - &#22240;&#20026;&#24182;&#19981;&#23384;&#22312;&#36825;&#31181;&#22768;&#26126;&#19968;&#20010;&#21015;&#34920;&#21442;&#25968;&#20316;&#20026;&#21344;&#20301;&#31526;&#30340;&#26041;&#24335;&#12290;
			&#20320;&#19981;&#24471;&#19981;&#20026;&#27492;&#20889;&#22810;&#20010;&#21344;&#20301;&#31526;&#26469;&#34920;&#31034;&#22810;&#20010;&#21442;&#25968;&#65292;&#25110;&#32773;&#24403;&#20320;&#30693;&#36947;&#21344;&#20301;&#31526;&#30340;&#25968;&#37327;&#26102;&#65292;&#20320;&#21487;&#20197;&#21160;&#24577;&#26500;&#24314;SQL&#23383;&#31526;&#20018;&#12290;
      <tt class="classname">NamedParameterJdbcTemplate</tt>&#21644;<tt class="classname">SimpleJdbcTemplate</tt>&#20013;&#25152;&#25552;&#20379;&#30340;&#21629;&#21517;&#21442;&#25968;&#30340;&#29305;&#24615;&#65292;&#37319;&#29992;&#30340;&#26159;&#21518;&#38754;&#19968;&#31181;&#20570;&#27861;&#12290;
      &#24403;&#20320;&#20256;&#20837;&#21442;&#25968;&#26102;&#65292;&#20320;&#38656;&#35201;&#20256;&#20837;&#19968;&#20010;<tt class="classname">java.util.List</tt>&#31867;&#22411;&#65292;&#25903;&#25345;&#22522;&#26412;&#31867;&#22411;&#12290;&#32780;&#36825;&#20010;list&#23558;&#20250;&#22312;SQL&#25191;&#34892;&#26102;&#26367;&#25442;&#21344;&#20301;&#31526;&#24182;&#20256;&#20837;&#21442;&#25968;&#12290;
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#22312;&#20351;&#29992;IN&#35821;&#21477;&#26102;&#65292;&#24403;&#20320;&#20256;&#20837;&#22823;&#25209;&#37327;&#30340;&#20540;&#26102;&#35201;&#23567;&#24515;&#65292;JDBC&#26631;&#20934;&#24182;&#19981;&#30830;&#20445;&#36229;&#36807;100&#20010;&#20803;&#32032;&#22312;IN&#35821;&#21477;&#20013;&#12290;
        &#26377;&#19981;&#23569;&#25968;&#25454;&#24211;&#21487;&#20197;&#36229;&#20986;&#36825;&#20010;&#20540;&#30340;&#38480;&#21046;&#65292;&#20294;&#26159;&#19981;&#21516;&#30340;&#25968;&#25454;&#24211;&#20250;&#26377;&#19981;&#21516;&#30340;&#25968;&#37327;&#38480;&#21046;&#65292;&#27604;&#22914;Oracle&#30340;&#38480;&#21046;&#25968;&#37327;&#26159;1000&#20010;&#12290;
        </p></td></tr></tbody></table></div><p>&#38500;&#20102;&#22522;&#26412;&#31867;&#22411;&#20043;&#22806;&#65292;&#20320;&#36824;&#21487;&#20197;&#21019;&#24314;&#19968;&#20010;<tt class="classname">java.util.List</tt>&#30340;&#23545;&#35937;&#25968;&#32452;&#65292;&#36825;&#21487;&#20197;&#35753;&#20320;&#25903;&#25345;&#22312;IN&#34920;&#36798;&#24335;&#20013;&#32534;&#20889;&#22810;&#37325;&#34920;&#36798;&#24335;&#65292;&#20363;&#22914;"select * from T_ACTOR where (id, last_name) in ((1,
      'Johnson'), (2, 'Harrop'))". &#24403;&#28982;&#65292;&#36825;&#26679;&#20570;&#30340;&#21069;&#25552;&#26159;&#25968;&#25454;&#24211;&#24213;&#23618;&#30340;&#35821;&#27861;&#25903;&#25345;&#12290;
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-complex-types"></a>11.7.4.&nbsp;&#22788;&#29702;&#22797;&#26434;&#31867;&#22411;&#30340;&#23384;&#20648;&#36807;&#31243;&#35843;&#29992;</h3></div></div><div></div></div><p>&#24403;&#35843;&#29992;&#23384;&#20648;&#36807;&#31243;&#26102;&#65292;&#26377;&#26102;&#38656;&#35201;&#20351;&#29992;&#25968;&#25454;&#24211;&#29305;&#23450;&#30340;&#22797;&#26434;&#31867;&#22411;&#12290;&#20026;&#20102;&#36866;&#24212;&#36825;&#20123;&#31867;&#22411;&#65292;Spring&#25552;&#20379;&#20102;<tt class="classname">SqlReturnType</tt>&#31867;&#26469;&#22788;&#29702;&#23384;&#20648;&#36807;&#31243;&#30340;&#36820;&#22238;&#20540;&#65292;&#32780;&#20351;&#29992;<tt class="classname">SqlTypeValue</tt>&#26469;&#22788;&#29702;&#20256;&#20837;&#30340;&#21442;&#25968;&#12290;
		</p><p>&#19979;&#38754;&#36825;&#20010;&#20363;&#23376;&#65292;&#23558;Oracle&#30340;STRUCT&#23545;&#35937;&#20316;&#20026;&#36820;&#22238;&#20540;&#65292;&#36825;&#26159;&#19968;&#20010;&#30001;&#29992;&#25143;&#33258;&#23450;&#20041;&#30340;&#8220;ITEM_TYPE&#8221;&#12290;
		<tt class="classname">SqlReturnType</tt>&#25509;&#21475;&#26377;&#21807;&#19968;&#30340;&#26041;&#27861;&#8220;<tt class="classname">getTypeValue</tt>&#8221;&#38656;&#35201;&#34987;&#23454;&#29616;&#12290;&#32780;&#36825;&#20010;&#25509;&#21475;&#30340;&#23454;&#29616;&#23558;&#34987;&#29992;&#20316;<tt class="classname">SqlOutParameter</tt>&#22768;&#26126;&#30340;&#19968;&#37096;&#20998;&#12290;
		</p><p>
      </p><pre class="programlisting">declareParameter(new SqlOutParameter("item", OracleTypes.STRUCT, "ITEM_TYPE",
    new SqlReturnType() {
      public Object getTypeValue(CallableStatement cs, int colIndx, int sqlType, String typeName) 
          throws SQLException {
        STRUCT struct = (STRUCT)cs.getObject(colIndx);
        Object[] attr = struct.getAttributes();
        TestItem item = new TestItem();
        item.setId(((Number) attr[0]).longValue());
        item.setDescription((String)attr[1]);
        item.setExpirationDate((java.util.Date)attr[2]);
        return item;
      }
    }));</pre><p>
			&#36890;&#36807;Java&#20195;&#30721;&#35843;&#29992;&#23384;&#20648;&#36807;&#31243;&#20351;&#29992;<tt class="classname">SqlTypeValue</tt>&#26469;&#20256;&#20837;&#19968;&#20010;<tt class="classname">TestItem</tt>&#20316;&#20026;&#21442;&#25968;&#12290;
			<tt class="classname">SqlTypeValue</tt>&#25509;&#21475;&#26377;&#19968;&#20010;&#26041;&#27861;"<tt class="classname">createTypeValue</tt>"&#38656;&#35201;&#34987;&#23454;&#29616;&#12290;
			&#19968;&#20010;&#27963;&#21160;&#30340;&#25968;&#25454;&#24211;&#36830;&#25509;&#20063;&#21516;&#26102;&#34987;&#20256;&#20837;&#65292;&#23427;&#23558;&#34987;&#29992;&#20316;&#21019;&#24314;&#25968;&#25454;&#24211;&#29305;&#23450;&#30340;&#23545;&#35937;&#65292;&#31867;&#20284;<tt class="classname">StructDescriptor</tt>&#21644;<tt class="classname">ArrayDescriptor</tt> 
			</p><p>
      </p><pre class="programlisting">SqlTypeValue value = new AbstractSqlTypeValue() {
  protected Object createTypeValue(Connection conn, int sqlType, String typeName) throws SQLException {
    StructDescriptor itemDescriptor = new StructDescriptor(typeName, conn);
    Struct item = new STRUCT(itemDescriptor, conn,
        new Object[] {
            testItem.getId(),
            testItem.getDescription(),
            new java.sql.Date(testItem.getExpirationDate().getTime())
        });
    return item;
  }
};</pre><p>
		&#36825;&#37324;&#30340;<tt class="classname">SqlTypeValue</tt> &#29616;&#22312;&#21487;&#20197;&#34987;&#21152;&#20837;&#21040;&#20316;&#20026;&#21442;&#25968;&#30340;Map&#20013;&#21435;&#65292;&#20174;&#32780;&#21487;&#20197;&#25191;&#34892;&#30456;&#24212;&#30340;&#23384;&#20648;&#36807;&#31243;&#12290;
	</p></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="orm"></a>Chapter&nbsp;12.&nbsp;&#20351;&#29992;ORM&#24037;&#20855;&#36827;&#34892;&#25968;&#25454;&#35775;&#38382;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="orm-introduction"></a>12.1.&nbsp;&#31616;&#20171;</h2></div></div><div></div></div><p>Spring Framework&#22312;&#36164;&#28304;&#31649;&#29702;&#65292;DAO&#23454;&#29616;&#25903;&#25345;&#20197;&#21450;&#20107;&#21153;&#31574;&#30053;&#31561;&#26041;&#38754;&#25552;&#20379;&#20102;&#19982; <span class="emphasis"><em>Hibernate&#12289;JDO&#12289;Oracle TopLink&#12289;iBATIS SQL Mappings</em></span> &#20197;&#21450; <span class="emphasis"><em>JPA</em></span> &#30340;&#38598;&#25104;&#12290;
&#20197;Hibernate&#20026;&#20363;&#65292;Spring&#36890;&#36807;&#20351;&#29992;&#35768;&#22810;IoC&#30340;&#20415;&#25463;&#29305;&#24615;&#23545;&#23427;&#25552;&#20379;&#20102;&#19968;&#27969;&#30340;&#25903;&#25345;&#65292;&#24110;&#21161;&#20320;&#22788;&#29702;&#24456;&#22810;&#20856;&#22411;&#30340;Hibernate&#25972;&#21512;&#30340;&#38382;&#39064;&#12290;
&#25152;&#26377;&#29992;&#20110;&#25903;&#25345;O/R&#65288;&#23545;&#35937;&#20851;&#31995;&#65289;&#26144;&#23556;&#30340;&#21253;&#65292;&#37117;&#36981;&#24490;Spring&#36890;&#29992;&#30340;&#20107;&#21153;&#21644;DAO&#24322;&#24120;&#20307;&#31995;&#12290;&#36890;&#24120;&#26469;&#35828;&#26377;&#20004;&#31181;&#19981;&#21516;&#30340;&#25972;&#21512;&#39118;&#26684;&#65306;&#20320;&#21487;&#20197;&#20351;&#29992;Spring&#25552;&#20379;&#30340;DAO&#27169;&#26495;&#65292;&#25110;&#32773;&#30452;&#25509;&#20351;&#29992;Hibernate/JDO/TopLink&#31561;&#24037;&#20855;&#30340;&#21407;&#29983;API&#32534;&#20889;DAO&#12290;
&#26080;&#35770;&#37319;&#21462;&#21738;&#31181;&#39118;&#26684;&#65292;&#36825;&#20123;DAO&#37117;&#21487;&#20197;&#36890;&#36807;IoC&#36827;&#34892;&#37197;&#32622;&#65292;&#24182;&#21442;&#19982;&#21040;Spring&#30340;&#36164;&#28304;&#21644;&#20107;&#21153;&#31649;&#29702;&#20013;&#21435;&#12290;</p><p>&#24403;&#29992;&#25143;&#36873;&#25321;O/R Mapping&#26469;&#21019;&#24314;&#25968;&#25454;&#35775;&#38382;&#30340;&#24212;&#29992;&#26102;&#65292;Spring&#25552;&#20379;&#20102;&#24378;&#22823;&#30340;&#25903;&#25345;&#12290;
&#39318;&#20808;&#24212;&#35813;&#20102;&#35299;&#30340;&#26159;&#65292;&#19968;&#26086;&#20351;&#29992;&#20102;Spring&#23545;O/R Mapping&#30340;&#25903;&#25345;&#65292;&#20320;&#19981;&#38656;&#35201;&#20146;&#33258;&#20570;&#25152;&#26377;&#30340;&#20107;&#24773;&#12290;
&#26080;&#35770;&#22914;&#20309;&#65292;&#22312;&#20915;&#23450;&#33457;&#36153;&#21147;&#27668;&#24182;&#20882;&#30528;&#39118;&#38505;&#21435;&#26500;&#36896;&#31867;&#20284;&#30340;&#20869;&#37096;&#24213;&#23618;&#26550;&#26500;&#20043;&#21069;&#65292;&#25105;&#20204;&#37117;&#24314;&#35758;&#20320;&#32771;&#34385;&#21644;&#20351;&#29992;Spring&#30340;&#35299;&#20915;&#26041;&#26696;&#12290;
&#26080;&#35770;&#24744;&#37319;&#29992;&#20309;&#31181;&#25216;&#26415;&#65292;Spring&#23545;&#22823;&#37096;&#20998;O/R Mapping&#30340;&#25903;&#25345;&#37117;&#21487;&#20197;&#20197;library&#30340;&#24418;&#24335;&#34987;&#35843;&#29992;&#65292;&#22240;&#20026;&#25152;&#26377;&#30340;&#20869;&#23481;&#37117;&#34987;&#35774;&#35745;&#25104;&#19968;&#32452;&#21487;&#37325;&#29992;&#30340;JavaBeans&#12290;
&#22312;Spring&#30340;IoC&#23481;&#22120;&#20013;&#20351;&#29992;&#36825;&#20123;&#31867;&#65292;&#26356;&#26159;&#26377;&#30528;&#37197;&#32622;&#21644;&#37096;&#32626;&#31616;&#21333;&#30340;&#22909;&#22788;&#12290;
&#22240;&#32780;&#65292;&#22312;&#36825;&#19968;&#31456;&#20013;&#20320;&#30475;&#21040;&#30340;&#22823;&#22810;&#25968;&#20363;&#23376;&#37117;&#26159;&#22312;Spring&#23481;&#22120;&#20013;&#36827;&#34892;&#30340;&#37197;&#32622;&#12290;</p><p>&#20351;&#29992;Spring Framework&#26500;&#24314;&#20320;&#30340;O/R Mapping DAO&#30340;&#22909;&#22788;&#21253;&#25324;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><span class="emphasis"><em>&#20415;&#20110;&#27979;&#35797;&#12290;</em></span> Spring&#30340;IoC&#26041;&#24335;&#20351;&#24471;&#26367;&#25442;&#19981;&#21516;&#30340;&#23454;&#29616;&#21644;&#37197;&#32622;&#21464;&#24471;&#38750;&#24120;&#31616;&#21333;&#65292;
&#36825;&#20123;&#20869;&#23481;&#21253;&#25324;&#65306;Hibernate <tt class="interfacename">SessionFactory</tt> &#23454;&#20363;&#30340;&#20301;&#32622;&#65292;JDBC <tt class="interfacename">DataSource</tt>&#23454;&#20363;&#65292;&#20107;&#21153;&#31649;&#29702;&#22120;&#20197;&#21450;&#26144;&#23556;&#23545;&#35937;&#30340;&#23454;&#29616;&#65288;&#22914;&#26524;&#38656;&#35201;&#65289;&#31561;&#12290;&#36825;&#26679;&#20063;&#23601;&#24456;&#23481;&#26131;&#38548;&#31163;&#24182;&#27979;&#35797;&#25345;&#20037;&#21270;&#30456;&#20851;&#30340;&#20195;&#30721;&#30340;&#21508;&#20010;&#37096;&#20998;&#12290;
        </p></li><li><p><span class="emphasis"><em>&#36890;&#29992;&#25968;&#25454;&#35775;&#38382;&#24322;&#24120;&#23553;&#35013;&#12290;</em></span> Spring&#33021;&#22815;&#23553;&#35013;&#20320;&#25152;&#36873;&#25321;&#30340;O/R Mapping&#24037;&#20855;&#25152;&#25243;&#20986;&#30340;&#24322;&#24120;&#65292;
&#23558;&#23427;&#20204;&#20174;&#19987;&#26377;&#30340;&#65288;&#28508;&#22312;&#30340;checked&#65289;&#24322;&#24120;&#36716;&#21270;&#20026;&#19968;&#32452;&#25277;&#35937;&#30340;runtime DataAccessException&#20307;&#31995;&#12290;
&#36825;&#21487;&#20197;&#20351;&#20320;&#20165;&#38656;&#35201;&#22312;&#24688;&#24403;&#30340;&#24212;&#29992;&#31243;&#24207;&#23618;&#27425;&#21435;&#22788;&#29702;&#22823;&#37096;&#20998;&#19981;&#21487;&#24674;&#22797;&#30340;&#25345;&#20037;&#23618;&#24322;&#24120;&#65292;&#20174;&#32780;&#36991;&#20813;&#20102;&#24456;&#22810;&#20196;&#20154;&#35752;&#21388;&#30340;catch/throw&#20197;&#21450;&#24322;&#24120;&#22768;&#26126;&#12290;
&#24403;&#28982;&#65292;&#20320;&#36824;&#26159;&#21487;&#20197;&#22312;&#20320;&#38656;&#35201;&#30340;&#22320;&#26041;&#25429;&#25417;&#21644;&#22788;&#29702;&#24322;&#24120;&#12290;&#22238;&#24819;&#19968;&#19979;JDBC&#24322;&#24120;&#65288;&#21253;&#25324;&#19982;DB&#30456;&#20851;&#30340;Dialect&#65289;&#34987;&#36716;&#21464;&#20026;&#21516;&#26679;&#30340;&#24322;&#24120;&#20307;&#31995;&#65292;&#36825;&#23601;&#24847;&#21619;&#30528;&#20320;&#21487;&#20197;&#22312;&#19968;&#33268;&#30340;&#32534;&#31243;&#27169;&#22411;&#20013;&#22788;&#29702;JDBC&#25805;&#20316;&#12290;</p></li><li><p><span class="emphasis"><em>&#36890;&#29992;&#30340;&#36164;&#28304;&#31649;&#29702;&#12290;</em></span> Spring&#30340;application context&#33021;&#22815;&#22788;&#29702;&#35832;&#22914;Hibernate&#30340; <tt class="interfacename">SessionFactory</tt>&#23454;&#20363;&#65292;
JDBC&#30340; <tt class="interfacename">DataSource</tt>&#23454;&#20363;&#65292;iBATIS&#30340;SQL Maps&#37197;&#32622;&#23545;&#35937;&#20197;&#21450;&#20854;&#20182;&#30456;&#20851;&#36164;&#28304;&#30340;&#23450;&#20301;&#21644;&#37197;&#32622;&#12290;
&#36825;&#26679;&#65292;&#36825;&#20123;&#37197;&#32622;&#30340;&#20540;&#24456;&#23481;&#26131;&#34987;&#31649;&#29702;&#21644;&#20462;&#25913;&#12290;Spring&#25552;&#20379;&#20102;&#31616;&#21333;&#12289;&#39640;&#25928;&#12289;&#23433;&#20840;&#30340;&#23545;&#25345;&#20037;&#23618;&#36164;&#28304;&#30340;&#22788;&#29702;&#12290;
&#20197;Hibernate&#20026;&#20363;&#65292;&#36890;&#24120;&#22312;&#20351;&#29992;Hibernate&#26102;&#65292;&#38656;&#35201;&#20351;&#29992;&#21516;&#19968;&#20010;Hibernate <tt class="interfacename">Session</tt> &#23454;&#20363;&#20197;&#30830;&#20445;&#39640;&#25928;&#21644;&#24688;&#24403;&#22320;&#20107;&#21153;&#22788;&#29702;&#12290;
Spring&#35753;&#25105;&#20204;&#33021;&#22815;&#24456;&#23481;&#26131;&#36879;&#26126;&#22320;&#21019;&#24314;&#24182;&#32465;&#23450;&#19968;&#20010; <tt class="interfacename">Session</tt> &#21040;&#24403;&#21069;&#32447;&#31243;&#12290;
&#20320;&#21487;&#20197;&#20351;&#29992;&#20197;&#19979;&#20004;&#31181;&#21150;&#27861;&#20043;&#19968;&#65306;&#36890;&#36807;&#20351;&#29992;&#19968;&#20010;&#22806;&#37096;&#30340;template&#21253;&#35013;&#31867;&#22312;Java&#20195;&#30721;&#23618;&#27425;&#23454;&#29616;&#65292;
&#25110;&#32773;&#36890;&#36807;Hibernate&#30340; <tt class="interfacename">SessionFactory</tt> &#26292;&#38706;&#24403;&#21069; <tt class="interfacename">Session</tt> &#23545;&#35937;&#65288;&#23545;&#20110;&#37027;&#20123;&#24314;&#31435;&#22312;Hibernate&#21407;&#29983;&#30340;API&#19978;&#30340;DAO&#65289;&#12290;
&#36825;&#26679;&#65292;&#23545;&#20110;&#20219;&#20309;&#30340;&#20107;&#21153;&#29615;&#22659;&#65288;&#26412;&#22320;&#20107;&#21153;&#25110;&#32773;JTA&#65289;&#65292;Spring&#35299;&#20915;&#20102;&#35768;&#22810;&#22312;&#20856;&#22411;Hibernate&#20351;&#29992;&#20013;&#19981;&#26029;&#20986;&#29616;&#30340;&#36825;&#26679;&#37027;&#26679;&#30340;&#38382;&#39064;&#12290;
        </p></li><li><p><span class="emphasis"><em>&#23436;&#25972;&#30340;&#20107;&#21153;&#31649;&#29702;&#12290;</em></span> Spring&#20801;&#35768;&#20320;&#23553;&#35013;&#20320;&#30340;O/R Mapping&#20195;&#30721;&#65292;
&#36825;&#21487;&#20197;&#36890;&#36807;&#22768;&#26126;&#24335;&#30340;AOP&#26041;&#27861;&#25318;&#25130;&#22120;&#25110;&#32773;&#22312;Java&#20195;&#30721;&#32423;&#21035;&#19978;&#20351;&#29992;&#19968;&#20010;&#22806;&#37096;&#30340;template&#21253;&#35013;&#31867;&#12290;
&#26080;&#35770;&#20351;&#29992;&#21738;&#19968;&#31181;&#26041;&#24335;&#65292;&#20107;&#21153;&#25511;&#21046;&#37117;&#20250;&#24110;&#21161;&#20320;&#20570;&#30456;&#20851;&#22788;&#29702;&#65292;&#20363;&#22914;&#19968;&#26086;&#26377;&#24322;&#24120;&#21457;&#29983;&#26102;&#30340;&#20107;&#21153;&#25805;&#20316;&#65288;rollback&#31561;&#65289;&#12290;
&#27491;&#22914;&#25105;&#20204;&#19979;&#38754;&#35201;&#35752;&#35770;&#30340;&#19968;&#26679;&#65292;&#20320;&#33021;&#22815;&#20351;&#29992;&#21644;&#26367;&#25442;&#21508;&#31181;&#20107;&#21153;&#31649;&#29702;&#22120;&#65292;&#21364;&#19981;&#20250;&#20351;&#20320;&#30340;Hibernate/JDO&#30456;&#20851;&#30340;&#20195;&#30721;&#21463;&#21040;&#24433;&#21709;&#12290;
&#20363;&#22914;&#65292;&#19981;&#31649;&#37319;&#29992;&#26412;&#22320;&#20107;&#21153;&#36824;&#26159;JTA&#65292;&#23436;&#25972;&#30340;Service&#23618;&#30340;&#20195;&#30721;&#65288;&#22914;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;&#65289;&#22312;&#36825;&#31181;&#22330;&#26223;&#19979;&#37117;&#26159;&#30456;&#21516;&#30340;&#12290;
&#20316;&#20026;&#19968;&#20010;&#38468;&#21152;&#30340;&#21151;&#33021;&#65292;JDBC&#30456;&#20851;&#30340;&#20195;&#30721;&#33021;&#22815;&#22312;&#20107;&#21153;&#32423;&#21035;&#19978;&#19982;&#20320;&#25152;&#20351;&#29992;&#30340;O/R&#26144;&#23556;&#20195;&#30721;&#26080;&#32541;&#25972;&#21512;&#12290;
&#36825;&#19968;&#21151;&#33021;&#23545;&#20110;&#37027;&#20123;&#35832;&#22914;&#25209;&#37327;&#22788;&#29702;&#12289;BLOB&#30340;&#25805;&#20316;&#31561;&#24182;&#19981;&#36866;&#21512;&#37319;&#29992;O/R Mapping&#25805;&#20316;&#30340;&#65292;&#20294;&#26159;&#38656;&#35201;&#19982;ORM&#25805;&#20316;&#19968;&#36215;&#21442;&#19982;&#30456;&#21516;&#30340;&#20107;&#21153;&#26469;&#35828;&#26159;&#30456;&#24403;&#26377;&#29992;&#30340;&#12290;</p></li></ul></div><p>&#22312;Spring&#21457;&#24067;&#21253;&#20013;&#30340;PetClinic&#25552;&#20379;&#20102;&#21508;&#31181;&#21487;&#36873;&#25321;&#30340;DAO&#23454;&#29616;&#21644;application context&#23545;JDBC&#12289;Hibernate&#12289;Oracle TopLink&#21644;JPA&#30340;&#37197;&#32622;&#12290;
&#22240;&#32780;PetClinic&#33021;&#22815;&#20316;&#20026;&#19968;&#20010;Spring&#30340;web&#24212;&#29992;&#31034;&#20363;&#31243;&#24207;&#26469;&#25551;&#36848;Hibernate&#12289;TopLink&#21644;JPA&#30340;&#20351;&#29992;&#26041;&#27861;&#30340;&#12290;&#23427;&#21516;&#26102;&#28085;&#30422;&#20102;&#22768;&#26126;&#24335;&#20107;&#21153;&#20013;&#19981;&#21516;&#20107;&#21153;&#31574;&#30053;&#30340;&#37197;&#32622;&#12290;</p><p>JPetStore&#31034;&#20363;&#20027;&#35201;&#20030;&#20363;&#35828;&#26126;&#20102;iBATIS SQL Maps&#22312;Spring&#29615;&#22659;&#20013;&#30340;&#20351;&#29992;&#12290;&#23427;&#21516;&#26102;&#21253;&#21547;&#20102;&#20004;&#22871;&#19981;&#21516;&#30340;Web&#23618;&#36873;&#25321;&#65292;&#19968;&#22871;&#22522;&#20110;Spring Web MVC&#65292;&#32780;&#21478;&#22806;&#19968;&#22871;&#21017;&#22522;&#20110;Struts&#12290;</p><p>&#38500;&#20102;Spring&#33258;&#36523;&#25552;&#20379;&#30340;&#31034;&#20363;&#20043;&#22806;&#65292;&#26377;&#24456;&#22810;&#20854;&#20182;&#30340;&#22522;&#20110;Spring&#30340;O/R Mapping&#30340;&#31034;&#20363;&#65292;&#20182;&#20204;&#30001;&#21508;&#33258;&#30340;&#20379;&#24212;&#21830;&#25552;&#20379;&#12290;
&#20363;&#22914;&#65306;JDO&#30340;JPOX&#23454;&#29616;&#65288;<a href="http://www.jpox.org/" target="_top">http://www.jpox.org/</a>&#65289;&#20197;&#21450;Kodo&#65288;<a href="http://www.bea.com/kodo" target="_top">http://www.bea.com/kodo</a>&#65289;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="orm-hibernate"></a>12.2.&nbsp;Hibernate</h2></div></div><div></div></div><p>&#25105;&#20204;&#23558;&#39318;&#20808;&#20174;Hibernate3 &#65288;<a href="http://www.hibernate.org/" target="_top">http://www.hibernate.org/</a>&#65289;&#24320;&#22987;&#65292;&#36890;&#36807;&#35762;&#35299;Hibernate&#22312;Spring&#29615;&#22659;&#20013;&#30340;&#20351;&#29992;&#26469;&#38416;&#36848;Spring&#26694;&#26550;&#23545;&#20110;O/R Mapping&#24037;&#20855;&#30340;&#25972;&#21512;&#26041;&#24335;&#12290;
&#26412;&#31456;&#33410;&#23558;&#28041;&#21450;&#21040;&#35768;&#22810;&#32454;&#33410;&#38382;&#39064;&#65292;&#24182;&#21521;&#20320;&#23637;&#31034;&#21508;&#31181;&#19981;&#21516;&#30340;DAO&#23454;&#29616;&#26041;&#24335;&#21644;&#20107;&#21153;&#21010;&#20998;&#12290;&#36825;&#20854;&#20013;&#30340;&#32477;&#22823;&#22810;&#25968;&#27169;&#24335;&#33021;&#22815;&#34987;Spring&#25903;&#25345;&#30340;&#20854;&#20182;O/R Mapping&#24037;&#20855;&#25152;&#20351;&#29992;&#12290;
&#36825;&#19968;&#31456;&#33410;&#30340;&#20854;&#20182;&#37096;&#20998;&#23558;&#20026;&#20320;&#35762;&#36848;&#20854;&#20182;&#30340;O/R Mapping&#25216;&#26415;&#65292;&#24182;&#32473;&#20986;&#19968;&#20123;&#31616;&#30701;&#30340;&#20363;&#23376;&#12290;</p><p><span class="emphasis"><em>&#27880;&#24847;&#65306;Spring2.5&#29256;&#26412;&#38656;&#35201;Hibernate3.1&#25110;&#26356;&#39640;&#29256;&#26412;&#65292;&#19981;&#20877;&#25552;&#20379;&#23545;Hibernate2.1&#19982;Hibernate3.0&#29256;&#26412;&#30340;&#25903;&#25345;&#12290;</em></span></p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="orm-resource-mngmnt"></a>12.2.1.&nbsp;&#36164;&#28304;&#31649;&#29702;</h3></div></div><div></div></div><p>&#20856;&#22411;&#30340;&#19994;&#21153;&#31243;&#24207;&#32463;&#24120;&#20250;&#34987;&#37325;&#22797;&#30340;&#36164;&#28304;&#31649;&#29702;&#20195;&#30721;&#25630;&#24471;&#28151;&#20081;&#12290;&#24456;&#22810;&#39033;&#30446;&#37117;&#35797;&#22270;&#21019;&#24314;&#33258;&#24049;&#30340;&#26041;&#26696;&#26469;&#35299;&#20915;&#36825;&#20010;&#38382;&#39064;&#65292;&#26377;&#26102;&#20250;&#20026;&#20102;&#32534;&#31243;&#26041;&#20415;&#32780;&#29306;&#29298;&#24688;&#24403;&#30340;&#38169;&#35823;&#22788;&#29702;&#12290;
&#23545;&#20110;&#24688;&#24403;&#30340;&#36164;&#28304;&#31649;&#29702;&#65292;Spring&#25552;&#20513;&#19968;&#31181;&#30633;&#30446;&#32780;&#21448;&#31616;&#27905;&#30340;&#35299;&#20915;&#26041;&#26696;&#65306;&#20351;&#29992;&#27169;&#26495;&#21270;&#30340;IoC&#65292;&#35832;&#22914;&#22522;&#30784;&#26500;&#24314;&#31867;&#12289;&#22238;&#35843;&#25509;&#21475;&#20197;&#21450;&#20351;&#29992;AOP&#25318;&#25130;&#22120;&#12290;
&#22522;&#30784;&#26500;&#24314;&#31867;&#36127;&#36131;&#24688;&#24403;&#30340;&#36164;&#28304;&#22788;&#29702;&#65292;&#20197;&#21450;&#23558;&#29305;&#23450;&#30340;&#24322;&#24120;&#20195;&#30721;&#36716;&#25442;&#20026;unchecked exception&#20307;&#31995;&#12290;Spring&#24341;&#36827;&#20102;DAO&#24322;&#24120;&#20307;&#31995;&#65292;&#21487;&#36866;&#29992;&#20110;&#20219;&#20309;&#25968;&#25454;&#35775;&#38382;&#31574;&#30053;&#12290;
&#23545;&#20110;&#30452;&#25509;&#20351;&#29992;JDBC&#30340;&#24773;&#20917;&#65292;&#21069;&#38754;&#31456;&#33410;&#25552;&#21040;&#30340; <tt class="classname">JdbcTemplate</tt> &#31867;&#36127;&#36131;&#22788;&#29702;connection&#65292;&#24182;&#27491;&#30830;&#22320;&#25226; <tt class="classname">SQLException</tt> &#36716;&#25442;&#20026; <tt class="classname">DataAccessException</tt> &#20307;&#31995;&#65292;&#21253;&#25324;&#23558;&#19982;&#25968;&#25454;&#24211;&#30456;&#20851;&#30340;SQL&#38169;&#35823;&#20195;&#30721;&#21464;&#25104;&#26377;&#24847;&#20041;&#30340;&#24322;&#24120;&#31867;&#12290;
Spring&#21516;&#26102;&#36890;&#36807;&#23427;&#20204;&#21508;&#33258;&#30340;&#20107;&#21153;&#31649;&#29702;&#22120;&#25903;&#25345;JTA&#21644;JDBC&#20107;&#21153;&#12290;</p><p>Spring&#21516;&#26679;&#20063;&#25552;&#20379;&#20102;&#23545;Hibernate&#21644;JDO&#30340;&#25903;&#25345;&#65292;&#21253;&#25324; <tt class="classname">HibernateTemplate</tt> / <tt class="classname">JdoTemplate</tt> &#31867;&#20284;&#20110; <tt class="classname">JdbcTemplate</tt>&#65292;
<tt class="classname">HibernateInterceptor</tt> / <tt class="classname">JdoInterceptor</tt> &#20197;&#21450;&#19968;&#20010; Hibernate / JDO &#20107;&#21153;&#31649;&#29702;&#22120;&#12290;
&#36825;&#26679;&#20570;&#30340;&#20027;&#35201;&#30446;&#30340;&#26159;&#20026;&#20102;&#33021;&#22815;&#28165;&#26224;&#22320;&#21010;&#20998;&#24212;&#29992;&#31243;&#24207;&#23618;&#27425;&#32780;&#19981;&#31649;&#20351;&#29992;&#20309;&#31181;&#25968;&#25454;&#35775;&#38382;&#21644;&#20107;&#21153;&#31649;&#29702;&#25216;&#26415;&#65292;&#20174;&#32780;&#38477;&#20302;&#21508;&#20010;&#24212;&#29992;&#31243;&#24207;&#23545;&#35937;&#20043;&#38388;&#30340;&#32806;&#21512;&#12290;
&#19994;&#21153;&#36923;&#36753;&#19981;&#20877;&#20381;&#36182;&#20110;&#29305;&#23450;&#30340;&#25968;&#25454;&#35775;&#38382;&#19982;&#20107;&#21153;&#31574;&#30053;&#65307;&#19981;&#20877;&#26377;&#30828;&#32534;&#30721;&#30340;&#36164;&#28304;&#26597;&#25214;&#12289;&#19981;&#20877;&#26377;&#38590;&#20197;&#26367;&#25442;&#30340;singletons&#12289;&#19981;&#20877;&#26377;&#29992;&#25143;&#33258;&#23450;&#20041;&#30340;&#26381;&#21153;&#27880;&#20876;&#12290;
Spring&#25552;&#20379;&#20102;&#19968;&#20010;&#31616;&#21333;&#19988;&#31283;&#22266;&#30340;&#26041;&#26696;&#20351;&#24471;&#21508;&#31181;&#24212;&#29992;&#36923;&#36753;&#23545;&#35937;&#36830;&#25509;&#22312;&#19968;&#36215;&#65292;&#20351;&#36825;&#20123;&#23545;&#35937;&#21487;&#37325;&#29992;&#65292;&#24182;&#23613;&#21487;&#33021;&#19981;&#20381;&#36182;&#23481;&#22120;&#12290;
&#25152;&#26377;&#30340;&#25968;&#25454;&#35775;&#38382;&#25216;&#26415;&#37117;&#33021;&#29420;&#31435;&#20351;&#29992;&#65292;&#20294;&#26159;&#20182;&#20204;&#22312;Spring&#25552;&#20379;&#30340;&#22522;&#20110;XML&#37197;&#32622;&#19988;&#26080;&#38656;&#20381;&#36182;Spring&#30340;&#26222;&#36890;JavaBean&#19979;&#20250;&#19982;application Context&#25972;&#21512;&#30340;&#26356;&#22909;&#12290;
&#22312;&#20856;&#22411;&#30340;Spring&#24212;&#29992;&#31243;&#24207;&#20013;&#65292;&#24456;&#22810;&#37325;&#35201;&#30340;&#23545;&#35937;&#37117;&#26159;JavaBeans&#65306;&#25968;&#25454;&#35775;&#38382;template&#12289;&#25968;&#25454;&#35775;&#38382;&#23545;&#35937;&#65288;&#20351;&#29992;template&#65289;&#12289;&#20107;&#21153;&#31649;&#29702;&#22120;&#12289;&#19994;&#21153;&#36923;&#36753;&#23545;&#35937;&#65288;&#20351;&#29992;&#25968;&#25454;&#35775;&#38382;&#23545;&#35937;&#21644;&#20107;&#21153;&#31649;&#29702;&#22120;&#65289;&#12289;web&#35270;&#22270;&#35299;&#26512;&#22120;&#12289;web&#25511;&#21046;&#22120;&#65288;&#20351;&#29992;&#19994;&#21153;&#26381;&#21153;&#65289;&#31561;&#31561;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="orm-session-factory-setup"></a>12.2.2.&nbsp;&#22312;Spring&#23481;&#22120;&#20013;&#21019;&#24314; <tt class="interfacename">SessionFactory</tt></h3></div></div><div></div></div><p>&#20026;&#20102;&#36991;&#20813;&#30828;&#32534;&#30721;&#30340;&#36164;&#28304;&#26597;&#25214;&#19982;&#24212;&#29992;&#31243;&#24207;&#23545;&#35937;&#32039;&#23494;&#32806;&#21512;&#65292;Spring&#20801;&#35768;&#20320;&#22312;Spring&#23481;&#22120;&#20013;&#20197;bean&#30340;&#26041;&#24335;&#23450;&#20041;&#35832;&#22914;JDBC <tt class="interfacename">DataSource</tt>&#25110;&#32773;Hibernate <tt class="interfacename">SessionFactory</tt> &#30340;&#25968;&#25454;&#35775;&#38382;&#36164;&#28304;&#12290;
&#20219;&#20309;&#38656;&#35201;&#36827;&#34892;&#36164;&#28304;&#35775;&#38382;&#30340;&#24212;&#29992;&#31243;&#24207;&#23545;&#35937;&#21482;&#38656;&#35201;&#25345;&#26377;&#36825;&#20123;&#20107;&#20808;&#23450;&#20041;&#22909;&#30340;&#23454;&#20363;&#30340;&#24341;&#29992;&#65288;DAO&#23450;&#20041;&#22312;&#19979;&#19968;&#31456;&#33410;&#20171;&#32461;&#65289;&#65292;&#19979;&#38754;&#30340;&#20195;&#30721;&#28436;&#31034;&#22914;&#20309;&#21019;&#24314;&#19968;&#20010;JDBC <tt class="classname">DataSource</tt> &#21644;Hibernate <tt class="interfacename">SessionFactory</tt>
	  </p><pre class="programlisting">&lt;beans&gt;

  &lt;bean id="myDataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close"&gt;
    &lt;property name="driverClassName" value="org.hsqldb.jdbcDriver"/&gt;
    &lt;property name="url" value="jdbc:hsqldb:hsql://localhost:9001"/&gt;
    &lt;property name="username" value="sa"/&gt;
    &lt;property name="password" value=""/&gt;
  &lt;/bean&gt;

  &lt;bean id="mySessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean"&gt;
    &lt;property name="dataSource" ref="myDataSource"/&gt;
    &lt;property name="mappingResources"&gt;
      &lt;list&gt;
        &lt;value&gt;product.hbm.xml&lt;/value&gt;
      &lt;/list&gt;
    &lt;/property&gt;
    &lt;property name="hibernateProperties"&gt;
      &lt;value&gt;
        hibernate.dialect=org.hibernate.dialect.HSQLDialect
      &lt;/value&gt;
    &lt;/property&gt;
  &lt;/bean&gt;

&lt;/beans&gt;</pre><p>&#23558;&#19968;&#20010;&#26412;&#22320;&#23450;&#20041;&#30340;&#65292;&#22914;Jakarta Commons DBCP&#30340; <tt class="classname">BasicDataSource</tt> &#20999;&#25442;&#20026;&#19968;&#20010;JNDI&#23450;&#20301;&#30340;DataSource&#65288;&#36890;&#24120;&#30001;&#24212;&#29992;&#31243;&#24207;&#26381;&#21153;&#22120;&#31649;&#29702;&#65289;&#65292;&#20165;&#20165;&#38656;&#35201;&#25913;&#21464;&#37197;&#32622;:</p><pre class="programlisting">&lt;beans&gt;

  &lt;bean id="myDataSource" class="org.springframework.jndi.JndiObjectFactoryBean"&gt;
    &lt;property name="jndiName" value="java:comp/env/jdbc/myds"/&gt;
  &lt;/bean&gt;

&lt;/beans&gt;</pre><p>&#36890;&#36807;&#20351;&#29992;Spring&#30340; <tt class="classname">JndiObjectFactoryBean</tt> &#26469;&#26292;&#38706;&#21644;&#33719;&#65292;&#20320;&#20063;&#21487;&#20197;&#35775;&#38382;&#19968;&#20010;JNDI&#23450;&#20301;&#30340;Hibernate <tt class="interfacename">SessionFactory</tt>&#12290;
		&#24403;&#28982;&#65292;&#22914;&#26524;&#22312;EJB&#19978;&#19979;&#25991;&#20043;&#22806;&#65292;&#36825;&#26159;&#19981;&#24517;&#35201;&#30340;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="orm-hibernate-template"></a>12.2.3.&nbsp;The <tt class="classname">HibernateTemplate</tt></h3></div></div><div></div></div><p>&#23545;&#20110;&#29305;&#23450;&#30340;&#25968;&#25454;&#35775;&#38382;&#23545;&#35937;&#25110;&#19994;&#21153;&#23545;&#35937;&#30340;&#26041;&#27861;&#65292;&#22522;&#26412;&#30340;&#27169;&#26495;&#32534;&#31243;&#27169;&#22411;&#30475;&#36215;&#26469;&#20687;&#19979;&#38754;&#25152;&#31034;&#30340;&#20195;&#30721;&#37027;&#26679;&#12290;
		&#23545;&#20110;&#36825;&#20123;&#22806;&#37096;&#23545;&#35937;&#26469;&#35828;&#65292;&#27809;&#26377;&#20219;&#20309;&#23454;&#29616;&#29305;&#23450;&#25509;&#21475;&#30340;&#32422;&#26463;&#65292;&#20165;&#20165;&#35201;&#27714;&#25552;&#20379;&#19968;&#20010;Hibernate <tt class="interfacename">SessionFactory</tt>&#12290;
		&#23427;&#21487;&#20197;&#20174;&#20219;&#20309;&#22320;&#26041;&#24471;&#21040;&#65292;&#19981;&#36807;&#27604;&#36739;&#36866;&#23452;&#30340;&#26041;&#27861;&#26159;&#20174;Spring&#30340;IoC&#23481;&#22120;&#20013;&#21462;&#24471;bean&#30340;&#24341;&#29992;&#65306;&#36890;&#36807;&#31616;&#21333;&#30340; <tt class="literal">setSessionFactory(..)</tt> &#36825;&#20010;bean&#30340;setter&#26041;&#27861;&#12290;
		&#19979;&#38754;&#30340;&#20195;&#30721;&#29255;&#27573;&#23637;&#31034;&#20102;&#22312;Spring&#23481;&#22120;&#20013;&#19968;&#20010;DAO&#30340;&#23450;&#20041;&#65292;&#23427;&#24341;&#29992;&#20102;&#19978;&#38754;&#23450;&#20041;&#30340; <tt class="interfacename">SessionFactory</tt>&#65292;&#21516;&#26102;&#23637;&#31034;&#20102;&#19968;&#20010;DAO&#26041;&#27861;&#30340;&#20855;&#20307;&#23454;&#29616;&#12290;
      </p><pre class="programlisting">&lt;beans&gt;

  &lt;bean id="myProductDao" class="product.ProductDaoImpl"&gt;
    &lt;property name="sessionFactory" ref="mySessionFactory"/&gt;
  &lt;/bean&gt;

&lt;/beans&gt;</pre><pre class="programlisting">public class ProductDaoImpl implements ProductDao {

    private HibernateTemplate hibernateTemplate;

    public void setSessionFactory(SessionFactory sessionFactory) {
        this.hibernateTemplate = new HibernateTemplate(sessionFactory);
    }

    public Collection loadProductsByCategory(String category) throws DataAccessException {
    	return this.hibernateTemplate.find("from test.Product product where product.category=?", category);
    }
}</pre><p>&#38500;&#20102;&#24456;&#22810;&#31867;&#20284;&#19978;&#20363;&#20013;&#26131;&#29992;&#30340;&#26041;&#27861;&#22806;&#65292;<tt class="classname">HibernateTemplate</tt>&#31867;&#25552;&#20379;&#20102;&#22823;&#37327;&#26041;&#27861;&#23545;&#24212;Hibernate <tt class="interfacename">Session</tt>&#25509;&#21475;&#20013;&#26292;&#38706;&#30340;&#26041;&#27861;&#12290;&#24403;&#20320;&#38656;&#35201;&#20351;&#29992;&#30340;<tt class="interfacename">Session</tt>&#26041;&#27861;&#27809;&#26377;&#22312;<tt class="classname">HibernateTemplate</tt>&#20013;&#25552;&#20379;&#26102;&#65292;&#21487;&#20197;&#36890;&#36807;&#19979;&#38754;&#25552;&#20379;&#30340;&#22522;&#20110;&#22238;&#35843;&#30340;&#26041;&#26696;&#26469;&#23454;&#29616;&#12290;</p><pre class="programlisting">public class ProductDaoImpl implements ProductDao {

    private HibernateTemplate hibernateTemplate;

    public void setSessionFactory(SessionFactory sessionFactory) {
        this.hibernateTemplate = new HibernateTemplate(sessionFactory);
    }

    public Collection loadProductsByCategory(final String category) throws DataAccessException {
        return this.hibernateTemplate.execute(new HibernateCallback() {

            public Object doInHibernate(Session session) {
                Criteria criteria = session.createCriteria(Product.class);
                criteria.add(Expression.eq("category", category));
                criteria.setMaxResults(6);
                return criteria.list();
            }
        };
    }
}</pre><p>&#19968;&#20010;&#22238;&#35843;&#23454;&#29616;&#33021;&#22815;&#26377;&#25928;&#22320;&#22312;&#20219;&#20309;Hibernate&#25968;&#25454;&#35775;&#38382;&#20013;&#20351;&#29992;&#12290;<tt class="classname">HibernateTemplate</tt> &#20250;&#30830;&#20445;&#24403;&#21069;Hibernate&#30340; <tt class="interfacename">Session</tt> &#23454;&#20363;&#30340;&#27491;&#30830;&#25171;&#24320;&#21644;&#20851;&#38381;&#65292;&#24182;&#30452;&#25509;&#21442;&#19982;&#21040;&#20107;&#21153;&#31649;&#29702;&#20013;&#21435;&#12290;
		Template&#23454;&#20363;&#19981;&#20165;&#26159;&#32447;&#31243;&#23433;&#20840;&#30340;&#65292;&#21516;&#26102;&#23427;&#20063;&#26159;&#21487;&#37325;&#29992;&#30340;&#12290;&#22240;&#32780;&#20182;&#20204;&#21487;&#20197;&#20316;&#20026;&#22806;&#37096;&#23545;&#35937;&#30340;&#23454;&#20363;&#21464;&#37327;&#32780;&#34987;&#25345;&#26377;&#12290;&#23545;&#20110;&#37027;&#20123;&#31616;&#21333;&#30340;&#35832;&#22914;find&#12289;load&#12289;saveOrUpdate&#25110;&#32773;delete&#25805;&#20316;&#30340;&#35843;&#29992;&#65292;<tt class="classname">HibernateTemplate</tt> &#25552;&#20379;&#21487;&#36873;&#25321;&#30340;&#24555;&#25463;&#20989;&#25968;&#26469;&#26367;&#25442;&#36825;&#31181;&#22238;&#35843;&#30340;&#23454;&#29616;&#12290;
		&#19981;&#20165;&#22914;&#27492;&#65292;Spring&#36824;&#25552;&#20379;&#20102;&#19968;&#20010;&#31616;&#20415;&#30340; <tt class="classname">HibernateDaoSupport</tt> &#22522;&#31867;&#65292;&#36825;&#20010;&#31867;&#25552;&#20379;&#20102; <tt class="methodname">setSessionFactory(..)</tt> &#26041;&#27861;&#26469;&#25509;&#21463;&#19968;&#20010; <tt class="interfacename">SessionFactory</tt> &#23545;&#35937;&#65292;&#21516;&#26102;&#25552;&#20379;&#20102; <tt class="methodname">getSessionFactory()</tt> &#21644; <tt class="methodname">getHibernateTemplate()</tt> &#26041;&#27861;&#32473;&#23376;&#31867;&#20351;&#29992;&#12290;
		&#32508;&#21512;&#20102;&#36825;&#20123;&#65292;&#23545;&#20110;&#37027;&#20123;&#20856;&#22411;&#30340;&#19994;&#21153;&#38656;&#27714;&#65292;&#23601;&#26377;&#20102;&#19968;&#20010;&#38750;&#24120;&#31616;&#21333;&#30340;DAO&#23454;&#29616;: </p><pre class="programlisting">public class ProductDaoImpl extends HibernateDaoSupport implements ProductDao {

    public Collection loadProductsByCategory(String category) throws DataAccessException {
        return this.getHibernateTemplate().find(
            "from test.Product product where product.category=?", category);
    }
}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="orm-hibernate-daos"></a>12.2.4.&nbsp;&#19981;&#20351;&#29992;&#22238;&#35843;&#30340;&#22522;&#20110;Spring&#30340;DAO&#23454;&#29616;</h3></div></div><div></div></div><p>&#20316;&#20026;&#19981;&#20351;&#29992;Spring&#30340; <tt class="classname">HibernateTemplate</tt> &#26469;&#23454;&#29616;DAO&#30340;&#26367;&#20195;&#35299;&#20915;&#26041;&#26696;&#65292;&#20320;&#20381;&#28982;&#21487;&#20197;&#29992;&#20256;&#32479;&#30340;&#32534;&#31243;&#39118;&#26684;&#26469;&#32534;&#20889;&#20320;&#30340;&#25968;&#25454;&#35775;&#38382;&#20195;&#30721;&#12290;
		&#26080;&#38656;&#23558;&#20320;&#30340;Hibernate&#35775;&#38382;&#20195;&#30721;&#21253;&#35013;&#22312;&#19968;&#20010;&#22238;&#35843;&#20013;&#65292;&#21482;&#38656;&#31526;&#21512;Spring&#30340;&#36890;&#29992;&#30340; <tt class="classname">DataAccessException</tt> &#24322;&#24120;&#20307;&#31995;&#12290;
		<tt class="classname">HibernateDaoSupport</tt> &#22522;&#31867;&#25552;&#20379;&#20102;&#35775;&#38382;&#19982;&#24403;&#21069;&#20107;&#21153;&#32465;&#23450;&#30340; <tt class="interfacename">Session</tt> &#23545;&#35937;&#30340;&#20989;&#25968;&#65292;&#22240;&#32780;&#33021;&#20445;&#35777;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#24322;&#24120;&#30340;&#27491;&#30830;&#36716;&#21270;&#12290;
		&#31867;&#20284;&#30340;&#20989;&#25968;&#21516;&#26679;&#21487;&#20197;&#22312; <tt class="classname">SessionFactoryUtils</tt> &#31867;&#20013;&#25214;&#21040;&#65292;&#20294;&#20182;&#20204;&#20197;&#38745;&#24577;&#26041;&#27861;&#30340;&#24418;&#24335;&#20986;&#29616;&#12290;
		&#20540;&#24471;&#27880;&#24847;&#30340;&#26159;&#65292;&#36890;&#24120;&#23558; '<tt class="literal">false</tt>' &#20316;&#20026;&#21442;&#25968;&#20540;&#65288;&#34920;&#31034;&#26159;&#21542;&#20801;&#35768;&#21019;&#24314;&#65289;&#20256;&#36882;&#32473; <tt class="methodname">getSession(..)</tt> &#26041;&#27861;&#36827;&#34892;&#35843;&#29992;&#12290;
		&#27492;&#26102;&#65292;&#25972;&#20010;&#35843;&#29992;&#23558;&#22312;&#21516;&#19968;&#20010;&#20107;&#21153;&#20869;&#23436;&#25104;&#65288;&#23427;&#30340;&#25972;&#20010;&#29983;&#21629;&#21608;&#26399;&#30001;&#20107;&#21153;&#25511;&#21046;&#65292;&#36991;&#20813;&#20102;&#20851;&#38381;&#36820;&#22238;&#30340; <tt class="interfacename">Session</tt> &#30340;&#38656;&#35201;&#65289;&#12290;
      </p><pre class="programlisting">public class HibernateProductDao extends HibernateDaoSupport implements ProductDao {

    public Collection loadProductsByCategory(String category) throws DataAccessException, MyException {
        Session session = getSession(false);
        try {
            Query query = session.createQuery("from test.Product product where product.category=?");
            query.setString(0, category);
            List result = query.list();
            if (result == null) {
                throw new MyException("No search results.");
            }
            return result;
        }
        catch (HibernateException ex) {
            throw convertHibernateAccessException(ex);
        }
    }
}</pre><p>&#36825;&#31181;&#30452;&#25509;&#20351;&#29992;Hibernate&#35775;&#38382;&#20195;&#30721;&#30340;&#22909;&#22788;&#22312;&#20110;&#23427;&#20801;&#35768;&#20320;&#22312;&#25968;&#25454;&#35775;&#38382;&#20195;&#30721;&#20013;&#25243;&#20986; <span class="emphasis"><em>&#20219;&#20309;</em></span> checked exception&#65292;&#32780; <tt class="classname">HibernateTemplate</tt> &#21364;&#21463;&#38480;&#20110;&#22238;&#35843;&#20013;&#30340;unchecked exception&#12290;
		&#27880;&#24847;&#65292;&#20320;&#36890;&#24120;&#21487;&#20197;&#23558;&#36825;&#20123;&#24212;&#29992;&#31243;&#24207;&#30340;&#24322;&#24120;&#22788;&#29702;&#25512;&#36831;&#21040;&#22238;&#35843;&#20989;&#25968;&#20043;&#21518;&#65292;&#36825;&#26679;&#65292;&#20320;&#20381;&#28982;&#21487;&#20197;&#27491;&#24120;&#20351;&#29992; <tt class="classname">HibernateTemplate</tt>&#12290;
		&#19968;&#33324;&#26469;&#35828;&#65292;<tt class="classname">HibernateTemplate</tt> &#31867;&#25152;&#25552;&#20379;&#30340;&#35768;&#22810;&#26041;&#27861;&#22312;&#35768;&#22810;&#24773;&#20917;&#19979;&#30475;&#19978;&#21435;&#26356;&#31616;&#21333;&#21644;&#20415;&#25463;&#12290;
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="orm-hibernate-straight"></a>12.2.5.&nbsp;&#22522;&#20110;Hibernate3&#30340;&#21407;&#29983;API&#23454;&#29616;DAO</h3></div></div><div></div></div><p>Hibernate3 &#24341;&#20837;&#20102;&#19968;&#20010;&#26032;&#30340;&#29305;&#24615;&#65306;&#8220;&#24102;&#19978;&#19979;&#25991;&#29615;&#22659;&#30340;Session&#8221;&#12290; &#36825;&#19968;&#29305;&#24615;&#20351;&#24471;Hibernate&#33258;&#36523;&#20855;&#22791;&#20102;&#27599;&#20010;&#20107;&#21153;&#32465;&#23450;&#24403;&#21069; <tt class="interfacename">Session</tt> &#23545;&#35937;&#30340;&#21151;&#33021;&#12290;
		&#36825;&#19982;Spring&#20013;&#27599;&#20010;Hibernate&#30340; <tt class="interfacename">Session</tt> &#19982;&#20107;&#21153;&#21516;&#27493;&#30340;&#21151;&#33021;&#22823;&#33268;&#30456;&#21516;&#12290;&#19968;&#20010;&#30456;&#24212;&#30340;&#22522;&#20110;&#21407;&#29983;&#30340;Hibernate API&#30340;DAO&#23454;&#29616;&#27491;&#22914;&#19979;&#20363;&#25152;&#31034;&#65306;
      </p><pre class="programlisting">public class ProductDaoImpl implements ProductDao {

    private SessionFactory sessionFactory;

    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

    public Collection loadProductsByCategory(String category) {
        return this.sessionFactory.getCurrentSession()
                .createQuery("from test.Product product where product.category=?")
                .setParameter(0, category)
                .list();
    }
}</pre><p>&#36825;&#31181;&#39118;&#26684;&#19982;&#20320;&#22312;Hibernate&#25991;&#26723;&#21644;&#31034;&#20363;&#20013;&#35265;&#21040;&#30340;&#38750;&#24120;&#31867;&#20284;&#65292;&#38500;&#20102;DAO&#23454;&#29616;&#31867;&#20013;&#25345;&#26377;&#20102;&#19968;&#20010; <tt class="interfacename">SessionFactory</tt> &#30340;&#23454;&#20363;&#21464;&#37327;&#12290;
		&#25105;&#20204;&#24378;&#28872;&#25512;&#33616;&#36825;&#31181;&#22522;&#20110;&#23454;&#20363;&#21464;&#37327;&#30340;DAO&#26500;&#24314;&#26041;&#24335;&#65292;&#32780;&#19981;&#26159;&#20351;&#29992;&#37027;&#31181;&#36807;&#21435;&#30001;Hibernate&#30340;&#31034;&#20363;&#31243;&#24207;&#20013;&#25552;&#21040;&#30340; <tt class="literal">&#38745;&#24577;&#30340;</tt>
				<tt class="classname">HibernateUtil</tt> &#31867;&#12290;
		&#65288;&#36890;&#24120;&#26469;&#35828;&#65292;&#19981;&#35201;&#22312;&#38745;&#24577;&#21464;&#37327;&#20013;&#20445;&#23384;&#20219;&#20309;&#36164;&#28304;&#20449;&#24687;&#38500;&#38750; <span class="emphasis"><em>&#30830;&#23454;</em></span> &#26377;&#36825;&#20010;&#24517;&#35201;&#65289;&#12290;
      </p><p>&#19978;&#36848;DAO&#36981;&#24490;&#20381;&#36182;&#27880;&#20837;&#27169;&#24335;&#65306;&#23427;&#22914;&#21516;&#20351;&#29992;Spring&#30340; <tt class="classname">HibernateTemplate</tt> &#36827;&#34892;&#32534;&#31243;&#37027;&#26679;&#65292;&#36866;&#21512;&#22312;Spring IoC&#23481;&#22120;&#20013;&#36827;&#34892;&#37197;&#32622;&#12290;
		&#24403;&#28982;&#65292;&#36825;&#26679;&#30340;DAO&#36824;&#21487;&#20197;&#24314;&#31435;&#22312;&#19968;&#20010;&#26222;&#36890;&#30340;Java&#31867;&#20013;&#65288;&#35832;&#22914;&#22312;Unit Test&#20013;&#65289;: &#20165;&#20165;&#38656;&#35201;&#21021;&#22987;&#21270;&#36825;&#20010;&#31867;&#65292;
		&#35843;&#29992; <tt class="methodname">setSessionFactory(..)</tt> &#26041;&#27861;&#35774;&#32622;&#20320;&#25152;&#26399;&#26395;&#30340;&#24037;&#21378;&#36164;&#28304;&#12290; &#20197;Spring&#30340;bean&#30340;&#23450;&#20041;&#26041;&#24335;&#65292;&#23427;&#30475;&#19978;&#21435;&#23601;&#20687;&#36825;&#26679;&#65306;
	  </p><pre class="programlisting">&lt;beans&gt;

  &lt;bean id="myProductDao" class="product.ProductDaoImpl"&gt;
    &lt;property name="sessionFactory" ref="mySessionFactory"/&gt;
  &lt;/bean&gt;

&lt;/beans&gt;</pre><p>&#36825;&#31181;DAO&#35775;&#38382;&#26041;&#24335;&#30340;&#20027;&#35201;&#20248;&#21183;&#22312;&#20110;&#23427;&#20165;&#20165;&#20381;&#36182;&#20110;Hibernate API&#26412;&#36523;&#32780;&#26080;&#38656;&#24341;&#20837;&#20219;&#20309;Spring&#30340;&#31867;&#12290;
		&#20174;&#26080;&#20837;&#20405;&#24615;&#30340;&#35282;&#24230;&#26469;&#30475;&#65292;&#36825;&#19968;&#28857;&#38750;&#24120;&#21560;&#24341;&#20154;&#12290;&#23545;&#20110;Hibernate&#24320;&#21457;&#20154;&#21592;&#26469;&#35828;&#20063;&#26080;&#30097;&#26356;&#21152;&#33258;&#28982;&#12290;</p><p>&#28982;&#32780;&#65292;&#36825;&#26679;&#30340;DAO&#35775;&#38382;&#26041;&#24335;&#20250;&#25243;&#20986;&#21407;&#29983; <tt class="classname">HibernateException</tt> &#65288;&#36825;&#26159;&#19968;&#20010;&#26080;&#38656;&#22768;&#26126;&#25110;&#25429;&#33719;&#30340;unchecked exception&#65289;&#65292;
		&#36825;&#24847;&#21619;&#30528;&#65292;DAO&#30340;&#35843;&#29992;&#32773;&#21482;&#33021;&#20197;&#33268;&#21629;&#30340;&#38169;&#35823;&#26469;&#22788;&#29702;&#36825;&#20123;&#24322;&#24120;&#65292;&#38500;&#38750;&#23436;&#20840;&#20381;&#36182;Hibernate&#33258;&#36523;&#30340;&#24322;&#24120;&#20307;&#31995;&#12290;
		&#22240;&#32780;&#65292;&#38500;&#38750;&#20320;&#23558;DAO&#30340;&#35843;&#29992;&#32773;&#32465;&#23450;&#21040;&#20855;&#20307;&#30340;&#23454;&#29616;&#31574;&#30053;&#19978;&#21435;&#65292;&#21542;&#21017;&#20320;&#23558;&#26080;&#27861;&#25429;&#33719;&#29305;&#23450;&#30340;&#24322;&#24120;&#21407;&#22240;&#65292;&#35832;&#22914;&#20048;&#35266;&#38145;&#24322;&#24120;&#12290;
		&#36825;&#31181;&#25240;&#20013;&#24179;&#34913;&#25110;&#35768;&#21487;&#20197;&#34987;&#25509;&#21463;&#65292;&#22914;&#26524;&#20320;&#30340;&#24212;&#29992;&#23436;&#20840;&#22522;&#20110;Hibernate&#25110;&#32773;&#26080;&#38656;&#36827;&#34892;&#29305;&#27530;&#30340;&#24322;&#24120;&#22788;&#29702;&#12290;</p><p>&#24184;&#36816;&#30340;&#26159;&#65292;Spring&#30340; <tt class="classname">LocalSessionFactoryBean</tt> &#21487;&#20197;&#22312;&#20219;&#20309;Spring&#30340;&#20107;&#21153;&#31649;&#29702;&#31574;&#30053;&#19979;&#65292;
	      &#25552;&#20379;&#23545;Hibernate&#30340; <tt class="methodname">SessionFactory.getCurrentSession()</tt> &#26041;&#27861;&#30340;&#25903;&#25345;&#65292;&#23427;&#23558;&#36820;&#22238;&#24403;&#21069;&#21463;Spring&#20107;&#21153;&#31649;&#29702;&#65288;&#29978;&#33267;&#26159; <tt class="classname">HibernateTransactionManager</tt> &#31649;&#29702;&#30340;&#65289;&#30340; <tt class="interfacename">Session</tt> &#23545;&#35937;&#12290;
		 &#24403;&#28982;&#65292;&#35813;&#20989;&#25968;&#30340;&#26631;&#20934;&#34892;&#20026;&#20381;&#28982;&#26377;&#25928;&#65306;&#36820;&#22238;&#24403;&#21069;&#19982;&#27491;&#22312;&#36827;&#34892;&#30340;JTA&#20107;&#21153;&#65288;&#26080;&#35770;&#26159;Spring&#30340; <tt class="classname">JtaTransactionManager</tt>&#12289;EJB CMT&#25110;&#32773;&#26222;&#36890;&#30340;JTA&#65289;&#32465;&#23450;&#30340; <tt class="interfacename">Session</tt> &#23545;&#35937;&#12290;
      </p><p>&#24635;&#20307;&#26469;&#35828;&#65292;DAO&#21487;&#20197;&#22522;&#20110;Hibernate3&#30340;&#21407;&#29983;API&#23454;&#29616;&#65292;&#21516;&#26102;&#65292;&#23427;&#20381;&#26087;&#38656;&#35201;&#33021;&#22815;&#21442;&#19982;&#21040;Spring&#30340;&#20107;&#21153;&#31649;&#29702;&#20013;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="orm-hibernate-tx-programmatic"></a>12.2.6.&nbsp;&#32534;&#31243;&#24335;&#30340;&#20107;&#21153;&#21010;&#20998;</h3></div></div><div></div></div><p>&#25105;&#20204;&#21487;&#20197;&#22312;&#36825;&#20123;&#20302;&#23618;&#27425;&#30340;&#25968;&#25454;&#35775;&#38382;&#26381;&#21153;&#20043;&#19978;&#30340;&#24212;&#29992;&#31243;&#24207;&#36827;&#34892;&#26356;&#39640;&#23618;&#27425;&#30340;&#20107;&#21153;&#21010;&#20998;&#65292;&#20174;&#32780;&#35753;&#20107;&#21153;&#33021;&#22815;&#27178;&#36328;&#22810;&#20010;&#25805;&#20316;&#12290;
		&#36825;&#37324;&#23545;&#20110;&#30456;&#20851;&#30340;&#19994;&#21153;&#36923;&#36753;&#23545;&#35937;&#21516;&#26679;&#27809;&#26377;&#23454;&#29616;&#25509;&#21475;&#30340;&#38480;&#21046;&#65292;&#23427;&#21482;&#38656;&#35201;&#19968;&#20010;Spring&#30340; <tt class="classname">PlatformTransactionManager</tt>&#12290;
		&#21516;SessionFactory&#19968;&#26679;&#65292;&#23427;&#21487;&#20197;&#26469;&#33258;&#20219;&#20309;&#22320;&#26041;&#65292;&#20294;&#26159;&#26368;&#22909;&#26159;&#19968;&#20010;&#32463;&#30001; <tt class="methodname">setTransactionManager(..)</tt> &#26041;&#27861;&#27880;&#20837;&#30340;bean&#30340;&#24341;&#29992;&#65292;&#27491;&#22914;&#20351;&#29992; <tt class="methodname">setProductDao</tt> &#26041;&#27861;&#26469;&#35774;&#32622; <tt class="classname">productDAO</tt> &#19968;&#26679;&#12290;
		&#19979;&#38754;&#28436;&#31034;&#20102;&#22312;Spring&#30340;application context&#20013;&#23450;&#20041;&#19968;&#20010;&#20107;&#21153;&#31649;&#29702;&#22120;&#21644;&#19968;&#20010;&#19994;&#21153;&#23545;&#35937;&#65292;&#20197;&#21450;&#20855;&#20307;&#30340;&#19994;&#21153;&#26041;&#27861;&#23454;&#29616;&#65306;
      </p><pre class="programlisting">&lt;beans&gt;

  &lt;bean id="myTxManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager"&gt;
    &lt;property name="sessionFactory" ref="mySessionFactory"/&gt;
  &lt;/bean&gt;

  &lt;bean id="myProductService" class="product.ProductServiceImpl"&gt;
    &lt;property name="transactionManager" ref="myTxManager"/&gt;
    &lt;property name="productDao" ref="myProductDao"/&gt;
  &lt;/bean&gt;

&lt;/beans&gt;</pre><pre class="programlisting">public class ProductServiceImpl implements ProductService {

    private TransactionTemplate transactionTemplate;
    private ProductDao productDao;

    public void setTransactionManager(PlatformTransactionManager transactionManager) {
        this.transactionTemplate = new TransactionTemplate(transactionManager);
    }

    public void setProductDao(ProductDao productDao) {
        this.productDao = productDao;
    }

    public void increasePriceOfAllProductsInCategory(final String category) {
        this.transactionTemplate.execute(new TransactionCallbackWithoutResult() {

                public void doInTransactionWithoutResult(TransactionStatus status) {
                    List productsToChange = this.productDao.loadProductsByCategory(category);
                    <i class="lineannotation"><span class="lineannotation">// do the price increase...</span></i>
                }
            }
        );
    }
}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="orm-hibernate-tx-declarative"></a>12.2.7.&nbsp;&#22768;&#26126;&#24335;&#30340;&#20107;&#21153;&#21010;&#20998;</h3></div></div><div></div></div><p>&#20316;&#20026;&#21487;&#36873;&#26041;&#26696;&#65292;&#25105;&#20204;&#21487;&#20197;&#20351;&#29992;Spring&#22768;&#26126;&#24335;&#30340;&#20107;&#21153;&#25903;&#25345;&#12290;&#22768;&#26126;&#24335;&#30340;&#20107;&#21153;&#25903;&#25345;&#36890;&#36807;&#37197;&#32622;Spring&#23481;&#22120;&#20013;&#30340;AOP Transaction Interceptor&#26469;&#26367;&#25442;&#20107;&#21153;&#21010;&#20998;&#30340;&#30828;&#32534;&#30721;&#12290;
		&#36825;&#23558;&#20351;&#20320;&#21487;&#20197;&#20174;&#27599;&#20010;&#19994;&#21153;&#26041;&#27861;&#20013;&#37325;&#22797;&#30340;&#20107;&#21153;&#21010;&#20998;&#20195;&#30721;&#20013;&#35299;&#25918;&#20986;&#26469;&#65292;&#30495;&#27491;&#19987;&#27880;&#20110;&#20026;&#20320;&#30340;&#24212;&#29992;&#28155;&#21152;&#26377;&#20215;&#20540;&#30340;&#19994;&#21153;&#36923;&#36753;&#20195;&#30721;&#12290;&#27492;&#22806;&#65292;&#31867;&#20284;&#20256;&#25773;&#34892;&#20026;&#21644;&#38548;&#31163;&#32423;&#21035;&#31561;&#20107;&#21153;&#35821;&#20041;&#33021;&#22815;&#22312;&#37197;&#32622;&#25991;&#20214;&#20013;&#25913;&#21464;&#65292;&#32780;&#19981;&#20250;&#24433;&#21709;&#20855;&#20307;&#30340;&#19994;&#21153;&#23545;&#35937;&#23454;&#29616;&#12290;
      </p><pre class="programlisting">&lt;beans&gt;

  &lt;bean id="myTxManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager"&gt;
    &lt;property name="sessionFactory" ref="mySessionFactory"/&gt;
  &lt;/bean&gt;

  &lt;bean id="myProductService" class="org.springframework.aop.framework.ProxyFactoryBean"&gt;
    &lt;property name="proxyInterfaces" value="product.ProductService"/&gt;
    &lt;property name="target"&gt;
        &lt;bean class="product.DefaultProductService"&gt;
            &lt;property name="productDao" ref="myProductDao"/&gt;
        &lt;/bean&gt;
    &lt;/property&gt;
    &lt;property name="interceptorNames"&gt;
      &lt;list&gt;
        &lt;value&gt;myTxInterceptor&lt;/value&gt; <i class="lineannotation"><span class="lineannotation">&lt;!-- the transaction interceptor (configured elsewhere) --&gt;</span></i>
      &lt;/list&gt;
    &lt;/property&gt;
  &lt;/bean&gt;

&lt;/beans&gt;</pre><pre class="programlisting">public class ProductServiceImpl implements ProductService {

    private ProductDao productDao;

    public void setProductDao(ProductDao productDao) {
        this.productDao = productDao;
    }

    <i class="lineannotation"><span class="lineannotation">// notice the absence of transaction demarcation code in this method</span></i>
    <i class="lineannotation"><span class="lineannotation">// Spring's declarative transaction infrastructure will be demarcating transactions on your behalf </span></i>
    public void increasePriceOfAllProductsInCategory(final String category) {
        List productsToChange = this.productDao.loadProductsByCategory(category);
        <i class="lineannotation"><span class="lineannotation">// ...</span></i>
    }
}</pre><p>Spring&#30340; <tt class="classname">TransactionInterceptor</tt> &#20801;&#35768;&#20219;&#20309;&#24212;&#29992;&#31243;&#24207;&#30340;checked exception&#22312;&#22238;&#35843;&#20195;&#30721;&#20013;&#25243;&#20986;&#65292;&#32780; <tt class="classname">TransactionTemplate</tt> &#22312;&#22238;&#35843;&#20013;&#21017;&#20005;&#26684;&#35201;&#27714;&#34987;&#23553;&#35013;&#25104;unchecked exception&#12290;
<tt class="classname">TransactionTemplate</tt> &#20250;&#22312;&#19968;&#20010;unchecked exception&#25243;&#20986;&#26102;&#65292;&#25110;&#32773;&#24403;&#20107;&#21153;&#34987;&#24212;&#29992;&#31243;&#24207;&#36890;&#36807; <tt class="classname">TransactionStatus</tt> &#26631;&#35760;&#20026;rollback-only&#26102;&#35302;&#21457;&#19968;&#20010;&#25968;&#25454;&#24211;&#22238;&#28378;&#25805;&#20316;&#12290;
<tt class="classname">TransactionInterceptor</tt> &#40664;&#35748;&#36827;&#34892;&#21516;&#26679;&#30340;&#25805;&#20316;&#65292;&#20294;&#26159;&#23427;&#20801;&#35768;&#23545;&#27599;&#20010;&#26041;&#27861;&#37197;&#32622;&#33258;&#24049;&#30340;rollback&#31574;&#30053;&#12290;
      </p><p>&#19979;&#38754;&#21015;&#20986;&#30340;&#39640;&#32423;&#21035;&#30340;&#22768;&#26126;&#24335;&#30340;&#20107;&#21153;&#31649;&#29702;&#26041;&#26696;&#24182;&#27809;&#26377;&#20351;&#29992; <tt class="classname">ProxyFactoryBean</tt>&#65292;&#23427;&#23558;&#20351;&#37027;&#20123;&#22823;&#37327;&#30340;&#19994;&#21153;&#23545;&#35937;&#38656;&#35201;&#34987;&#32435;&#20837;&#21040;&#20107;&#21153;&#31649;&#29702;&#20013;&#26102;&#30340;&#37197;&#32622;&#21464;&#24471;&#38750;&#24120;&#31616;&#21333;&#12290;
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#22312;&#20320;&#25171;&#31639;&#32487;&#32493;&#38405;&#35835;&#19979;&#19968;&#37096;&#20998;&#20043;&#21069;&#65292;&#25105;&#20204; <span class="emphasis"><em>&#24378;&#28872;</em></span> &#25512;&#33616;&#20320;&#24819;&#21435;&#38405;&#35835; <a href="#transaction-declarative" title="9.5.&nbsp;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;">Section&nbsp;9.5, &#8220;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;&#8221;</a> &#36825;&#19968;&#31456;&#33410;&#12290;</p></td></tr></tbody></table></div><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd"&gt;

  <i class="lineannotation"><span class="lineannotation">&lt;!-- <tt class="interfacename">SessionFactory</tt>, <tt class="interfacename">DataSource</tt>, etc. omitted --&gt;</span></i>

  &lt;bean id="myTxManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager"&gt;
    &lt;property name="sessionFactory" ref="mySessionFactory"/&gt;
  &lt;/bean&gt;
  
  &lt;aop:config&gt;
    &lt;aop:pointcut id="productServiceMethods" expression="execution(* product.ProductService.*(..))"/&gt;
    &lt;aop:advisor advice-ref="txAdvice" pointcut-ref="productServiceMethods"/&gt;
  &lt;/aop:config&gt;

  &lt;tx:advice id="txAdvice" transaction-manager="myTxManager"&gt;
    &lt;tx:attributes&gt;
      &lt;tx:method name="increasePrice*" propagation="REQUIRED"/&gt;
      &lt;tx:method name="someOtherBusinessMethod" propagation="REQUIRES_NEW"/&gt;
      &lt;tx:method name="*" propagation="SUPPORTS" read-only="true"/&gt;
    &lt;/tx:attributes&gt;
  &lt;/tx:advice&gt;

  &lt;bean id="myProductService" class="product.SimpleProductService"&gt;
    &lt;property name="productDao" ref="myProductDao"/&gt;
  &lt;/bean&gt;

&lt;/beans&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="orm-hibernate-tx-strategies"></a>12.2.8.&nbsp;&#20107;&#21153;&#31649;&#29702;&#31574;&#30053;</h3></div></div><div></div></div><p><tt class="classname">TransactionTemplate</tt> &#21644; <tt class="classname">TransactionInterceptor</tt> &#37117;&#23558;&#30495;&#27491;&#30340;&#20107;&#21153;&#22788;&#29702;&#22996;&#25176;&#32473;&#19968;&#20010; <tt class="classname">PlatformTransactionManager</tt> &#23454;&#20363;&#26469;&#22788;&#29702;&#12290;
&#22312;Hibernate&#24212;&#29992;&#20013;&#65292;&#23427;&#21487;&#20197;&#26159;&#19968;&#20010; <tt class="classname">HibernateTransactionManager</tt>&#65288;&#23545;&#20110;&#21333;&#29420;&#19968;&#20010;&#30340;Hibernate <tt class="interfacename">SessionFactory</tt> &#20351;&#29992;&#19968;&#20010; <tt class="classname">ThreadLocal</tt> &#30340; <tt class="interfacename">Session</tt>&#65289;&#25110;&#19968;&#20010; <tt class="classname">JtaTransactionManager</tt>&#65288;&#20195;&#29702;&#32473;&#23481;&#22120;&#30340;JTA&#23376;&#31995;&#32479;&#65289;&#12290;
&#20320;&#29978;&#33267;&#21487;&#20197;&#20351;&#29992;&#33258;&#23450;&#20041;&#30340; <tt class="classname">PlatformTransactionManager</tt> &#30340;&#23454;&#29616;&#12290;&#22240;&#32780;&#65292;&#22312;&#20320;&#30340;&#24212;&#29992;&#30896;&#21040;&#20102;&#29305;&#23450;&#30340;&#20998;&#24067;&#24335;&#20107;&#21153;&#30340;&#37096;&#32626;&#38656;&#27714;&#26102;&#65288;&#31867;&#20284;&#23558;&#21407;&#26469;&#30340;Hibernate&#20107;&#21153;&#31649;&#29702;&#36716;&#21464;&#20026;JTA&#65289;&#65292;&#20165;&#20165;&#38656;&#35201;&#25913;&#21464;&#37197;&#32622;&#32780;&#24050;&#65306;&#31616;&#21333;&#23558;Hibernate&#30340;&#20107;&#21153;&#31649;&#29702;&#22120;&#26367;&#25442;&#25104;JTA&#20107;&#21153;&#23454;&#29616;&#12290;
&#20219;&#20309;&#30340;&#20107;&#21153;&#21010;&#20998;&#21644;&#25968;&#25454;&#35775;&#38382;&#30340;&#20195;&#30721;&#37117;&#26080;&#38656;&#22240;&#27492;&#32780;&#25913;&#21464;&#65292;&#22240;&#20026;&#20182;&#20204;&#20165;&#20165;&#20351;&#29992;&#20102;&#36890;&#29992;&#30340;&#20107;&#21153;&#31649;&#29702;API&#12290;</p><p>&#23545;&#20110;&#27178;&#36328;&#22810;&#20010;Hibernate SessionFacotry&#30340;&#20998;&#24067;&#24335;&#20107;&#21153;&#65292;&#21482;&#38656;&#31616;&#21333;&#22320;&#23558; <tt class="classname">JtaTransactionManager</tt> &#21516;&#22810;&#20010; <tt class="classname">LocalSessionFactoryBean</tt> &#30340;&#23450;&#20041;&#32467;&#21512;&#36215;&#26469;&#20316;&#20026;&#20107;&#21153;&#31574;&#30053;&#12290;
&#20320;&#30340;&#27599;&#19968;&#20010;DAO&#36890;&#36807;bean&#23646;&#24615;&#24471;&#21040;&#21508;&#33258;&#30340; <tt class="interfacename">SessionFactory</tt> &#24341;&#29992;&#12290;&#22914;&#26524;&#25152;&#26377;&#30340;&#24213;&#23618;JDBC&#25968;&#25454;&#28304;&#37117;&#26159;&#25903;&#25345;&#20107;&#21153;&#30340;&#23481;&#22120;&#65292;&#37027;&#20040;&#21482;&#35201;&#19994;&#21153;&#23545;&#35937;&#20351;&#29992;&#20102; <tt class="classname">JtaTransactionManager</tt> &#20316;&#20026;&#20107;&#21153;&#31574;&#30053;&#65292;&#23427;&#23601;&#21487;&#20197;&#27178;&#36328;&#22810;&#20010;DAO&#21644;&#22810;&#20010;session factories&#26469;&#21010;&#20998;&#20107;&#21153;&#65292;&#32780;&#19981;&#38656;&#35201;&#20570;&#20219;&#20309;&#29305;&#27530;&#22788;&#29702;&#12290;
      </p><pre class="programlisting">&lt;beans&gt;

  &lt;bean id="myDataSource1" class="org.springframework.jndi.JndiObjectFactoryBean"&gt;
    &lt;property name="jndiName value="java:comp/env/jdbc/myds1"/&gt;
  &lt;/bean&gt;

  &lt;bean id="myDataSource2" class="org.springframework.jndi.JndiObjectFactoryBean"&gt;
    &lt;property name="jndiName" value="java:comp/env/jdbc/myds2"/&gt;
  &lt;/bean&gt;

  &lt;bean id="mySessionFactory1" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean"&gt;
    &lt;property name="dataSource" ref="myDataSource1"/&gt;
    &lt;property name="mappingResources"&gt;
      &lt;list&gt;
        &lt;value&gt;product.hbm.xml&lt;/value&gt;
      &lt;/list&gt;
    &lt;/property&gt;
    &lt;property name="hibernateProperties"&gt;
      &lt;value&gt;
        hibernate.dialect=org.hibernate.dialect.MySQLDialect
        hibernate.show_sql=true
      &lt;/value&gt;
    &lt;/property&gt;
  &lt;/bean&gt;

  &lt;bean id="mySessionFactory2" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean"&gt;
    &lt;property name="dataSource" ref="myDataSource2"/&gt;
    &lt;property name="mappingResources"&gt;
      &lt;list&gt;
        &lt;value&gt;inventory.hbm.xml&lt;/value&gt;
      &lt;/list&gt;
    &lt;/property&gt;
    &lt;property name="hibernateProperties"&gt;
      &lt;value&gt;
        hibernate.dialect=org.hibernate.dialect.OracleDialect
      &lt;/value&gt;
    &lt;/property&gt;
  &lt;/bean&gt;

  &lt;bean id="myTxManager" class="org.springframework.transaction.jta.JtaTransactionManager"/&gt;

  &lt;bean id="myProductDao" class="product.ProductDaoImpl"&gt;
    &lt;property name="sessionFactory" ref="mySessionFactory1"/&gt;
  &lt;/bean&gt;

  &lt;bean id="myInventoryDao" class="product.InventoryDaoImpl"&gt;
    &lt;property name="sessionFactory" ref="mySessionFactory2"/&gt;
  &lt;/bean&gt;

  <i class="lineannotation"><span class="lineannotation">&lt;!-- this shows the Spring 1.x style of declarative transaction configuration --&gt;</span></i>
  <i class="lineannotation"><span class="lineannotation">&lt;!-- it is totally supported, 100% legal in Spring 2.x, but see also above for the sleeker, Spring 2.0 style --&gt;</span></i>
  &lt;bean id="myProductService"
      class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean"&gt;
    &lt;property name="transactionManager" ref="myTxManager"/&gt;
    &lt;property name="target"&gt;
      &lt;bean class="product.ProductServiceImpl"&gt;
        &lt;property name="productDao" ref="myProductDao"/&gt;
        &lt;property name="inventoryDao" ref="myInventoryDao"/&gt;
      &lt;/bean&gt;
    &lt;/property&gt;
    &lt;property name="transactionAttributes"&gt;
      &lt;props&gt;
        &lt;prop key="increasePrice*"&gt;PROPAGATION_REQUIRED&lt;/prop&gt;
        &lt;prop key="someOtherBusinessMethod"&gt;PROPAGATION_REQUIRES_NEW&lt;/prop&gt;
        &lt;prop key="*"&gt;PROPAGATION_SUPPORTS,readOnly&lt;/prop&gt;
      &lt;/props&gt;
    &lt;/property&gt;
  &lt;/bean&gt;

&lt;/beans&gt;</pre><p><tt class="classname">HibernateTransactionManager</tt> &#21644; <tt class="classname">JtaTransactionManager</tt> &#37117;&#20801;&#35768;&#24688;&#24403;&#30340;JVM&#32423;&#21035;&#30340;Hibernate&#32531;&#23384;&#22788;&#29702;&#65292;&#32780;&#26080;&#38656;&#20351;&#29992;&#19982;&#23481;&#22120;&#30456;&#20851;&#30340;&#20107;&#21153;&#31649;&#29702;&#22120;&#25110;JCA&#36830;&#25509;&#22120;&#12290;&#65288;&#21482;&#35201;&#19981;&#26159;&#30001;EJB&#21457;&#36215;&#30340;&#20107;&#21153;&#65289;</p><p>&#23545;&#20110;&#29305;&#23450;&#30340; <tt class="interfacename">DataSource</tt>&#65292;<tt class="classname">HibernateTransactionManager</tt> &#33021;&#22815;&#20026;&#26222;&#36890;&#30340;JDBC&#35775;&#38382;&#20195;&#30721;&#25552;&#20379;Hibernate&#25152;&#20351;&#29992;&#30340; <tt class="interfacename">Connection</tt>&#12290;
		&#36825;&#19968;&#21151;&#33021;&#20801;&#35768;&#20320;&#21487;&#20197;&#23436;&#20840;&#28151;&#21644;&#20351;&#29992;Hibernate/JDBC&#36827;&#34892;&#25968;&#25454;&#35775;&#38382;&#32780;&#26080;&#38656;&#20381;&#36182;JTA&#22312;&#39640;&#23618;&#27425;&#20195;&#30721;&#20013;&#36827;&#34892;&#20107;&#21153;&#21010;&#20998;&#65292;&#21482;&#35201;&#20320;&#20381;&#28982;&#35775;&#38382;&#30340;&#26159;&#21516;&#19968;&#20010;&#25968;&#25454;&#24211;&#65281;
		<tt class="classname">HibernateTransactionManager</tt> &#33021;&#22815;&#33258;&#21160;&#22320;&#23558;Hibernate&#20107;&#21153;&#26292;&#38706;&#20026;JDBC&#20107;&#21153;&#65292;&#22914;&#26524;&#20320;&#36890;&#36807;&#35774;&#32622; <tt class="interfacename">DataSource</tt>&#26469;&#24314;&#31435;<tt class="interfacename">SessionFactory</tt> &#23545;&#35937;&#65288;&#36890;&#36807;&#35774;&#32622; <tt class="classname">LocalSessionFactoryBean</tt> &#20013;&#30340;&#8220;dataSource&#8221;&#23646;&#24615;&#65289;&#12290;
		&#21478;&#22806;&#19968;&#31181;&#37197;&#32622;&#26041;&#27861;&#26159;&#36890;&#36807;&#35774;&#32622; <tt class="classname">HibernateTransactionManager</tt> &#30340;&#8220;dataSource&#8221;&#23646;&#24615;&#65292;&#26126;&#30830;&#25351;&#23450;&#20107;&#21153;&#38656;&#35201;&#26292;&#38706;&#30340; <tt class="interfacename">DataSource</tt>&#12290;
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="orm-hibernate-resources"></a>12.2.9.&nbsp;&#23481;&#22120;&#36164;&#28304; vs &#26412;&#22320;&#36164;&#28304;</h3></div></div><div></div></div><p>Spring&#30340;&#36164;&#28304;&#31649;&#29702;&#20801;&#35768;&#20320;&#31616;&#21333;&#22320;&#22312;&#19968;&#20010;JNDI&#30340; <tt class="interfacename">SessionFactory</tt> &#21644;&#19968;&#20010;&#26412;&#22320;&#30340; <tt class="interfacename">SessionFactory</tt> &#20043;&#38388;&#20999;&#25442;&#32780;&#26080;&#38656;&#26356;&#25913;&#20219;&#20309;&#19968;&#34892;&#24212;&#29992;&#31243;&#24207;&#20195;&#30721;&#12290;
      	&#25226;&#36164;&#28304;&#23450;&#20041;&#25918;&#22312;&#23481;&#22120;&#20013;&#36824;&#26159;&#25918;&#22312;&#24212;&#29992;&#31243;&#24207;&#26412;&#22320;&#20013;&#20027;&#35201;&#26159;&#30001;&#20351;&#29992;&#30340;&#20107;&#21153;&#31574;&#30053;&#20915;&#23450;&#30340;&#12290;&#19982;Spring&#23450;&#20041;&#30340;&#26412;&#22320; <tt class="interfacename">SessionFactory</tt> &#30456;&#27604;&#65292;&#19968;&#20010;&#25163;&#24037;&#27880;&#20876;&#30340;JNDI <tt class="interfacename">SessionFactory</tt> &#24182;&#27809;&#26377;&#20307;&#29616;&#20986;&#22810;&#22823;&#30340;&#20248;&#21183;&#12290;
	 	&#36890;&#36807;Hibernate&#30340;JCA&#36830;&#25509;&#22120;&#26469;&#37096;&#32626;&#19968;&#20010; <tt class="interfacename">SessionFactory</tt> &#25552;&#20379;&#20102;&#33021;&#20351;&#20043;&#21442;&#19982;&#21040;J2EE&#26381;&#21153;&#22120;&#31649;&#29702;&#26550;&#26500;&#30340;&#22686;&#20540;&#26381;&#21153;&#65292;&#19981;&#36807;&#38500;&#27492;&#20043;&#22806;&#20063;&#24182;&#27809;&#26377;&#22686;&#21152;&#23454;&#38469;&#30340;&#20215;&#20540;&#12290;
      </p><p>Spring&#23545;&#20107;&#21153;&#31649;&#29702;&#30340;&#25903;&#25345;&#26377;&#19968;&#20010;&#38750;&#24120;&#37325;&#35201;&#30340;&#22909;&#22788;&#65306;&#23427;&#19981;&#20381;&#36182;&#20110;&#20219;&#20309;&#23481;&#22120;&#12290;&#20351;&#29992;&#38750;JTA&#30340;&#20219;&#20309;&#20854;&#20182;&#20107;&#21153;&#31574;&#30053;&#30340;&#37197;&#32622;&#65292;&#31243;&#24207;&#20063;&#33021;&#22312;&#29420;&#31435;&#30340;&#27979;&#35797;&#29615;&#22659;&#19979;&#27491;&#24120;&#24037;&#20316;&#12290;
		&#23588;&#20854;&#23545;&#20110;&#37027;&#20123;&#20856;&#22411;&#30340;&#21333;&#25968;&#25454;&#24211;&#20107;&#21153;&#24773;&#20917;&#19979;&#65292;&#36825;&#23558;&#26159;&#19968;&#20010;&#38750;&#24120;&#36731;&#37327;&#32423;&#32780;&#21448;&#24378;&#22823;&#30340;JTA&#26367;&#20195;&#26041;&#26696;&#12290;&#24403;&#20320;&#20351;&#29992;&#19968;&#20010;&#26412;&#22320;&#30340;EJB SLSB&#26469;&#39537;&#21160;&#20107;&#21153;&#26102;&#65292;&#21363;&#26102;&#20320;&#21487;&#33021;&#21482;&#35775;&#38382;&#19968;&#20010;&#25968;&#25454;&#24211;&#32780;&#19988;&#20165;&#20165;&#36890;&#36807;CMT&#20351;&#29992;SLSB&#30340;&#22768;&#26126;&#24615;&#20107;&#21153;&#65292;&#20320;&#20173;&#28982;&#35201;&#20381;&#36182;&#20110;EJB&#23481;&#22120;&#21644;JTA&#12290;
		&#20351;&#29992;&#32534;&#31243;&#24335;JTA&#26367;&#25442;&#26041;&#26696;&#20381;&#28982;&#38656;&#35201;J2EE&#29615;&#22659;&#65292;JTA&#19981;&#20165;&#23545;&#20110;JTA&#26412;&#36523;&#65292;&#36824;&#23545;&#20110;JNDI&#30340; <tt class="interfacename">DataSource</tt> &#23454;&#20363;&#24341;&#20837;&#20102;&#23481;&#22120;&#20381;&#36182;&#12290;
		&#23545;&#20110;&#38750;Spring&#29615;&#22659;&#30340;JTA&#39537;&#21160;&#30340;Hibernate&#20107;&#21153;&#65292;&#20320;&#24517;&#39035;&#20351;&#29992;Hibernate JCA&#36830;&#25509;&#22120;&#25110;&#32773;&#39069;&#22806;&#30340;Hibernate&#20107;&#21153;&#20195;&#30721;&#21450; <tt class="interfacename">TransactionManagerLookup</tt> &#37197;&#32622;&#65292;&#26469;&#24688;&#24403;&#22320;&#22788;&#29702;JVM&#32423;&#21035;&#30340;&#32531;&#23384;&#12290;
      </p><p>Spring&#39537;&#21160;&#30340;&#20107;&#21153;&#31649;&#29702;&#19982;&#26412;&#22320;&#23450;&#20041;&#30340; <tt class="interfacename">SessionFactory</tt> &#33021;&#22815;&#24037;&#20316;&#24471;&#38750;&#24120;&#22909;&#65292;&#23601;&#20687;&#20351;&#29992;&#26412;&#22320;&#30340;JDBC <tt class="interfacename">DataSource</tt> &#19968;&#26679;&#65292;&#24403;&#28982;&#21069;&#25552;&#24517;&#39035;&#26159;&#35775;&#38382;&#21333;&#20010;&#25968;&#25454;&#24211;&#12290;
		&#22240;&#27492;&#24403;&#20320;&#30495;&#27491;&#38754;&#23545;&#20998;&#24067;&#24335;&#20107;&#21153;&#30340;&#38656;&#27714;&#26102;&#65292;&#21487;&#20197;&#39532;&#19978;&#22238;&#21040;Spring&#30340;JTA&#20107;&#21153;&#12290;&#24517;&#39035;&#35201;&#27880;&#24847;&#65292;&#19968;&#20010;JCA&#36830;&#25509;&#22120;&#38656;&#35201;&#29305;&#23450;&#23481;&#22120;&#30340;&#37096;&#32626;&#27493;&#39588;&#65292;&#32780;&#19988;&#39318;&#20808;&#23481;&#22120;&#35201;&#25903;&#25345;JCA&#12290;
		&#36825;&#35201;&#27604;&#20351;&#29992;&#26412;&#22320;&#36164;&#28304;&#23450;&#20041;&#21644;Spring&#39537;&#21160;&#20107;&#21153;&#26469;&#37096;&#32626;&#19968;&#20010;&#31616;&#21333;&#30340;Web&#24212;&#29992;&#40635;&#28902;&#24471;&#22810;&#12290;&#32780;&#19988;&#20320;&#36890;&#24120;&#38656;&#35201;&#29305;&#23450;&#20225;&#19994;&#29256;&#26412;&#30340;&#23481;&#22120;&#65292;&#20294;&#26159;&#20687;&#31867;&#20284;WebLogic&#30340;Express&#29256;&#26412;&#24182;&#19981;&#25552;&#20379;JCA&#12290;
		&#19968;&#20010;&#20165;&#20351;&#29992;&#26412;&#22320;&#36164;&#28304;&#24182;&#19988;&#38024;&#23545;&#19968;&#20010;&#25968;&#25454;&#24211;&#30340;&#20107;&#21153;&#25805;&#20316;&#30340;Spring&#24212;&#29992;&#23558;&#21487;&#20197;&#22312;&#20219;&#20309;&#19968;&#31181;J2EE&#30340;Web&#23481;&#22120;&#20013;&#24037;&#20316;&#65288;&#19981;&#38656;&#35201;JTA&#12289;JCA&#25110;&#32773;EJB&#65289;&#65292;&#27604;&#22914;Tomcat&#12289;Resin&#29978;&#33267;&#26222;&#36890;&#30340;Jetty&#12290;
		&#38500;&#27492;&#20043;&#22806;&#65292;&#36825;&#26679;&#30340;&#20013;&#38388;&#23618;&#21487;&#20197;&#22312;&#26700;&#38754;&#24212;&#29992;&#25110;&#27979;&#35797;&#29992;&#20363;&#20013;&#34987;&#31616;&#21333;&#22320;&#37325;&#29992;&#12290;
	  </p><p>&#32771;&#34385;&#19968;&#19979;&#25152;&#26377;&#30340;&#24773;&#20917;&#65306;&#22914;&#26524;&#20320;&#19981;&#20351;&#29992;EJB&#65292;&#22362;&#25345;&#20351;&#29992;&#26412;&#22320; <tt class="interfacename">SessionFactory</tt> &#20197;&#21450;Spring&#30340; <tt class="classname">HibernateTransactionManager</tt> &#25110;&#32773; <tt class="classname">JtaTransactionManager</tt>&#65292;
      	&#20320;&#23558;&#33719;&#24471;&#21253;&#25324;&#36866;&#24403;&#30340;JVM&#32423;&#21035;&#19978;&#30340;&#32531;&#23384;&#20197;&#21450;&#20998;&#24067;&#24335;&#20107;&#21153;&#22312;&#20869;&#30340;&#25152;&#26377;&#22909;&#22788;&#65292;&#32780;&#19981;&#20250;&#26377;&#20219;&#20309;&#23481;&#22120;&#37096;&#32626;&#30340;&#40635;&#28902;&#12290;&#36890;&#36807;JCA&#36830;&#25509;&#22120;&#30340;Hibernate&#30340; <tt class="interfacename">SessionFactory</tt> &#30340;JNDI&#27880;&#20876;&#20165;&#20165;&#22312;EJB&#20013;&#20351;&#29992;&#20250;&#24102;&#26469;&#22909;&#22788;&#12290;
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="orm-hibernate-invalid-jdbc-access-error"></a>12.2.10.&nbsp;&#22312;&#24212;&#29992;&#26381;&#21153;&#22120;&#20013;&#20351;&#29992;Hibernate&#30340;&#27880;&#24847;&#20107;&#39033;</h3></div></div><div></div></div><p>&#22312;&#19968;&#20123;&#20855;&#26377;&#38750;&#24120;&#20005;&#26684;&#30340; <tt class="interfacename">XADataSource</tt> &#23454;&#29616;&#30340;JTA&#29615;&#22659;&#20013;&#65288;&#30446;&#21069;&#26469;&#35828;&#21482;&#26159;WebLogic&#21644;WebSphere&#30340;&#26576;&#20123;&#29256;&#26412;&#65289;&#24403;&#20320;&#23558;Hibernate&#37197;&#32622;&#25104;&#19981;&#24863;&#30693;JTA <tt class="interfacename">PlatformTransactionManager</tt> &#23545;&#35937;&#26102;&#65292;&#23481;&#22120;&#21487;&#33021;&#20250;&#22312;&#24212;&#29992;&#26381;&#21153;&#22120;&#26085;&#24535;&#20013;&#25253;&#20986;&#19968;&#20123;&#35686;&#21578;&#21644;&#24322;&#24120;&#12290;
		&#36825;&#20123;&#35686;&#21578;&#21644;&#24322;&#24120;&#36890;&#24120;&#20250;&#35828;&#65306;&#8220;&#27491;&#22312;&#34987;&#35775;&#38382;&#30340;&#36830;&#25509;&#19981;&#20877;&#26377;&#25928;&#65292;&#25110;&#32773;JDBC&#36830;&#25509;&#19981;&#20877;&#26377;&#25928;&#65292;&#21487;&#33021;&#30001;&#20110;&#20107;&#21153;&#19981;&#20877;&#22788;&#20110;&#28608;&#27963;&#29366;&#24577;&#8221;&#12290;&#19979;&#38754;&#26159;&#19968;&#20010;&#20174;WebLogic&#19978;&#25243;&#20986;&#30340;&#24322;&#24120;&#65306;</p><pre class="programlisting">java.sql.SQLException: The transaction is no longer active - status: 'Committed'.
   No further JDBC access is allowed within this transaction.</pre><p>&#36825;&#26679;&#30340;&#38169;&#35823;&#35686;&#21578;&#24456;&#23481;&#26131;&#35299;&#20915;&#65306;&#21482;&#35201;&#31616;&#21333;&#30340;&#25226;Hibernate&#37197;&#32622;&#25104;&#24863;&#30693;&#21040;JTA <tt class="interfacename">PlatformTransactionManager</tt> &#23454;&#20363;&#30340;&#23384;&#22312;&#21363;&#21487;&#65292;&#21516;&#26102;&#23558;&#20182;&#20204;&#36827;&#34892;&#21516;&#27493;&#65288;&#19982;Spring&#21516;&#27493;&#65289;&#12290;&#21487;&#20197;&#26377;&#20004;&#31181;&#26041;&#27861;&#36798;&#21040;&#36825;&#31181;&#25928;&#26524;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#22914;&#26524;&#20320;&#24050;&#32463;&#22312;application context&#20013;&#23450;&#20041;&#24182;&#33719;&#21462;&#20102;JTA <tt class="interfacename">PlatformTransactionManager</tt> &#23545;&#35937;&#65288;&#25110;&#35768;&#26469;&#33258;&#36890;&#36807; <tt class="literal">JndiObjectFactoryBean</tt> &#24471;&#21040;&#30340;JNDI&#65289;&#24182;&#24050;&#32463;&#23558;&#23427;&#27880;&#20837;&#21040;&#31867;&#20284;Spring&#30340; <tt class="classname">JtaTransactionManager</tt> &#20013;&#65292;
          	&#37027;&#20040;&#26368;&#31616;&#21333;&#30340;&#26041;&#24335;&#23601;&#26159;&#25351;&#23450;&#36825;&#20010;bean&#30340;&#24341;&#29992;&#20316;&#20026; <tt class="classname">LocalSessionFactoryBean</tt> &#30340; <span class="emphasis"><em>jtaTransactionManager</em></span> &#23646;&#24615;&#12290;Spring&#23558;&#20351;&#36825;&#20010;&#23545;&#35937;&#34987;Hibernate&#25152;&#24863;&#30693;&#12290;
          </p></li><li><p>&#22810;&#25968;&#24773;&#20917;&#19979;&#65292;&#20320;&#36824;&#27809;&#26377;&#24471;&#21040;JTA&#30340; <tt class="interfacename">PlatformTransactionManager</tt> &#23454;&#20363;&#65288;&#30001;&#20110;Spring&#30340; <tt class="classname">JtaTransactionManager</tt> &#33021;&#22815;&#33258;&#24049;&#25214;&#21040;&#23427;&#65289;&#65292;&#25152;&#20197;&#20320;&#38656;&#35201;&#33258;&#34892;&#37197;&#32622;Hibernate&#24182;&#30452;&#25509;&#23547;&#25214;&#36164;&#28304;&#12290;
			&#27491;&#22914;Hibernate&#25991;&#26723;&#20013;&#25552;&#21040;&#30340;&#65292;&#36825;&#21487;&#20197;&#36890;&#36807;&#22312;Hibernate&#37197;&#32622;&#19968;&#20010;&#24212;&#29992;&#26381;&#21153;&#22120;&#29305;&#23450;&#30340; <tt class="literal">TransactionManagerLookup</tt> &#31867;&#26469;&#23436;&#25104;&#12290;
          </p></li></ul></div><p>&#23545;&#20110;&#24688;&#24403;&#30340;&#20351;&#29992;&#26041;&#27861;&#65292;&#20320;&#26080;&#38656;&#20102;&#35299;&#26356;&#22810;&#30340;&#19996;&#35199;&#12290;&#20294;&#26159;&#25105;&#20204;&#22312;&#36825;&#37324;&#23558;&#25551;&#36848;&#19968;&#19979;&#65292;&#23545;&#20110;&#23558;Hibernate&#37197;&#32622;&#20026;&#24863;&#30693;&#25110;&#32773;&#19981;&#24863;&#30693;JTA&#30340; <tt class="interfacename">PlatformTransactionManager</tt> &#23545;&#35937;&#36825;&#20004;&#31181;&#24773;&#20917;&#19979;&#65292;&#25972;&#20010;&#20107;&#21153;&#30340;&#25191;&#34892;&#39034;&#24207;&#12290;</p><p>Hibernate&#34987;&#37197;&#32622;&#25104;&#19981;&#24863;&#30693;JTA <tt class="interfacename">PlatformTransactionManager</tt> &#30340;&#24773;&#20917;&#19979;&#65292;&#24403;&#19968;&#20010;JTA&#20107;&#21153;&#25552;&#20132;&#26102;&#65292;&#25972;&#20010;&#20107;&#20214;&#30340;&#25191;&#34892;&#39034;&#24207;&#22914;&#19979;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>JTA &#20107;&#21153;&#25552;&#20132;</p></li><li><p>Spring&#30340; <tt class="classname">JtaTransactionManager</tt> &#21516;&#27493;&#21040;JTA&#20107;&#21153;&#65292;&#23427;&#34987;JTA&#20107;&#21153;&#31649;&#29702;&#22120;&#36890;&#36807;&#35843;&#29992; <span class="emphasis"><em>afterCompletion</em></span> &#25191;&#34892;&#22238;&#35843;&#12290;</p></li><li><p>&#22312;&#25152;&#26377;&#20854;&#20182;&#27963;&#21160;&#20013;&#65292;&#36825;&#23558;&#30001;Spring&#21521;Hibernate&#35302;&#21457;&#19968;&#20010;&#22238;&#35843;&#65292;&#36890;&#36807;Hibernate&#30340; <tt class="literal">afterTransactionCompletion</tt> &#22238;&#35843;&#65288;&#29992;&#20110;&#28165;&#38500;Hibernate&#32531;&#23384;&#65289;&#65292;&#28982;&#21518;&#32039;&#36319;&#30528;&#19968;&#20010;&#26126;&#30830;&#30340;Hibernate Session&#30340; <tt class="literal">close()</tt> &#35843;&#29992;&#12290;
			&#36825;&#23558;&#20351;Hibernate&#35797;&#22270;&#21435;&#20851;&#38381;JDBC&#30340;Connection&#12290;</p></li><li><p>&#22312;&#26576;&#20123;&#29615;&#22659;&#20013;&#65292;<tt class="methodname">Connection.close()</tt> &#30340;&#35843;&#29992;&#23558;&#20250;&#35302;&#21457;&#19968;&#20010;&#35686;&#21578;&#25110;&#32773;&#38169;&#35823;&#20449;&#24687;&#12290;
			&#36825;&#26159;&#30001;&#20110;&#29305;&#23450;&#30340;&#24212;&#29992;&#26381;&#21153;&#22120;&#23558;&#19981;&#20877;&#32771;&#34385; <tt class="interfacename">Connection</tt> &#30340;&#21487;&#29992;&#24615;&#65292;&#22240;&#20026;&#27492;&#26102;&#20107;&#21153;&#24050;&#32463;&#34987;&#25552;&#20132;&#20102;&#12290;</p></li></ul></div><p>&#22312;Hibernate&#34987;&#37197;&#32622;&#25104;&#24863;&#30693;JTA&#30340; <tt class="interfacename">PlatformTransactionManager</tt> &#30340;&#24773;&#20917;&#19979;&#65292;&#24403;&#19968;&#20010;JTA&#20107;&#21153;&#25552;&#20132;&#26102;&#65292;&#25972;&#20010;&#20107;&#20214;&#30340;&#25191;&#34892;&#39034;&#24207;&#22914;&#19979;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>JTA &#20107;&#21153;&#20934;&#22791;&#25552;&#20132;</p></li><li><p>Spring&#30340; <tt class="classname">JtaTransactionManager</tt> &#21516;&#27493;&#21040;JTA&#20107;&#21153;&#65292;&#22240;&#32780;&#23427;&#34987;JTA&#20107;&#21153;&#31649;&#29702;&#22120;&#36890;&#36807;&#35843;&#29992; <span class="emphasis"><em>beforeCompletion</em></span> &#25191;&#34892;&#22238;&#35843;&#12290;</p></li><li><p>Spring&#33021;&#24863;&#30693;&#21040;Hibernate&#33258;&#36523;&#34987;&#21516;&#27493;&#21040;JTA Transaction&#65292;&#22240;&#32780;&#34920;&#29616;&#24471;&#19982;&#20808;&#21069;&#37027;&#31181;&#24773;&#20917;&#26377;&#25152;&#19981;&#21516;&#12290;
			&#20551;&#35774;Hibernate&#30340; <tt class="interfacename">Session</tt> &#38656;&#35201;&#34987;&#20851;&#38381;&#65292;Spring&#23558;&#36127;&#36131;&#20851;&#38381;&#23427;&#12290;</p></li><li><p>JTA &#20107;&#21153;&#25552;&#20132;</p></li><li><p>Hibernate&#23558;&#19982;JTA transaction&#36827;&#34892;&#21516;&#27493;&#65292;&#22240;&#32780;&#23427;&#34987;JTA&#20107;&#21153;&#31649;&#29702;&#22120;&#36890;&#36807;&#35843;&#29992; <span class="emphasis"><em>afterCompletion</em></span> &#25191;&#34892;&#22238;&#35843;&#65292;&#24182;&#19988;&#36866;&#26102;&#22320;&#28165;&#38500;&#32531;&#23384;&#12290;</p></li></ul></div><p></p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="orm-jdo"></a>12.3.&nbsp;JDO</h2></div></div><div></div></div><p>Spring&#25903;&#25345;&#26631;&#20934;&#30340;JDO 1.0/2.0 API&#20316;&#20026;&#25968;&#25454;&#35775;&#38382;&#31574;&#30053;&#65292;&#21516;&#26679;&#36981;&#24490;&#31867;&#20284;&#20110;Spring&#23545;Hibernate&#30340;&#25903;&#25345;&#39118;&#26684;&#12290;&#23545;&#24212;&#30340;&#25903;&#25345;&#19982;&#25972;&#21512;&#31867;&#20301;&#20110; <tt class="literal">org.springframework.orm.jdo</tt> &#21253;&#20013;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="orm-jdo-setup"></a>12.3.1.&nbsp;&#24314;&#31435;<tt class="interfacename">PersistenceManagerFactory</tt>
      </h3></div></div><div></div></div><p>Spring&#25552;&#20379;&#20102;&#19968;&#20010; <tt class="classname">LocalPersistenceManagerFactoryBean</tt> &#31867;&#65292;&#20801;&#35768;&#20320;&#36890;&#36807;Spring&#30340;application context&#26469;&#23450;&#20041;&#19968;&#20010;&#26412;&#22320;&#30340;JDO <tt class="interfacename">PersistenceManagerFactory</tt>&#65306;
      </p><pre class="programlisting">&lt;beans&gt;

  &lt;bean id="myPmf" class="org.springframework.orm.jdo.LocalPersistenceManagerFactoryBean"&gt;
    &lt;property name="configLocation" value="classpath:kodo.properties"/&gt;
  &lt;/bean&gt;

&lt;/beans&gt;</pre><p>&#20316;&#20026;&#21487;&#36873;&#26041;&#26696;&#65292;<tt class="interfacename">PersistenceManagerFactory</tt> &#20063;&#21487;&#20197;&#36890;&#36807;&#30452;&#25509;&#23454;&#20363;&#21270;&#19968;&#20010; <tt class="interfacename">PersistenceManagerFactory</tt> &#30340;&#23454;&#29616;&#31867;&#24471;&#21040;&#12290;
		&#19968;&#20010;JDO <tt class="interfacename">PersistenceManagerFactory</tt> &#30340;&#23454;&#29616;&#31867;&#36981;&#24490;JavaBeans&#30340;&#27169;&#24335;&#65292;&#23427;&#38750;&#24120;&#20687;&#19968;&#20010;JDBC <tt class="interfacename">DataSource</tt> &#30340;&#23454;&#29616;&#31867;&#65292;&#36825;&#20351;&#24471;&#23427;&#22825;&#28982;&#30340;&#38750;&#24120;&#36866;&#21512;&#20316;&#20026;&#19968;&#20010;Spring&#30340;bean&#23450;&#20041;&#12290;
		&#36825;&#31181;&#21019;&#24314;&#39118;&#26684;&#36890;&#24120;&#25903;&#25345;&#19968;&#20010;Spring&#23450;&#20041;&#30340;JDBC <tt class="interfacename">DataSource</tt>&#65292;&#23558;&#23427;&#20256;&#20837;&#21040;&#23545;&#24212;&#30340;&#23454;&#29616;&#31867;&#30340;connectionFactory&#30340;&#23646;&#24615;&#20013;&#36827;&#34892;bean&#30340;&#21019;&#24314;&#12290;&#20855;&#20307;&#30340;&#20363;&#23376;&#21442;&#35265;&#24320;&#28304;&#30340;JDO&#23454;&#29616;JPOX&#65288;<a href="http://www.jpox.org/" target="_top">http://www.jpox.org</a>&#65289;&#65306;</p><pre class="programlisting">&lt;beans&gt;

 &lt;bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close"&gt;
   &lt;property name="driverClassName" value="${jdbc.driverClassName}"/&gt;
   &lt;property name="url" value="${jdbc.url}"/&gt;
   &lt;property name="username" value="${jdbc.username}"/&gt;
   &lt;property name="password" value="${jdbc.password}"/&gt;
 &lt;/bean&gt;

 &lt;bean id="myPmf" class="org.jpox.PersistenceManagerFactoryImpl" destroy-method="close"&gt;
   &lt;property name="connectionFactory" ref="dataSource"/&gt;
   &lt;property name="nontransactionalRead" value="true"/&gt;
 &lt;/bean&gt;

&lt;/beans&gt;</pre><p>&#19968;&#20010;JDO&#30340; <tt class="interfacename">PersistenceManagerFactory</tt> &#33021;&#22815;&#21516;&#26679;&#22312;&#19968;&#20010;J2EE&#24212;&#29992;&#26381;&#21153;&#22120;&#30340;JNDI&#29615;&#22659;&#19979;&#34987;&#21019;&#24314;&#12290;
		&#36825;&#36890;&#24120;&#30001;&#29305;&#23450;&#30340;JDO&#23454;&#29616;&#25152;&#25552;&#20379;&#30340;JCA&#36830;&#25509;&#22120;&#26469;&#23436;&#25104;&#12290;Spring&#26631;&#20934;&#30340; <tt class="literal">JndiObjectFactoryBean</tt> &#20063;&#33021;&#22815;&#34987;&#29992;&#26469;&#33719;&#21462;&#21644;&#26292;&#38706;&#36825;&#20010; <tt class="interfacename">PersistenceManagerFactory</tt>&#12290;
		&#24403;&#28982;&#65292;&#36890;&#24120;&#22312;&#19968;&#20010;EJB&#29615;&#22659;&#20043;&#22806;&#65292;&#22312;JNDI&#20013;&#25345;&#26377; <tt class="interfacename">PersistenceManagerFactory</tt> &#30340;&#23454;&#20363;&#27809;&#26377;&#20160;&#20040;&#29305;&#21035;&#21560;&#24341;&#20154;&#30340;&#22909;&#22788;&#65292;&#22240;&#32780;&#25105;&#20204;&#19968;&#33324;&#21482;&#22312;&#26377;&#38750;&#24120;&#20805;&#36275;&#30340;&#29702;&#30001;&#26102;&#36873;&#25321;&#36825;&#31181;&#24314;&#31435;&#26041;&#24335;&#12290;
		&#35831;&#21442;&#30475;Hibernate&#31456;&#33410;&#20013;&#8220;&#23481;&#22120;&#36164;&#28304; vs &#26412;&#22320;&#36164;&#28304;&#8221;&#36825;&#19968;&#33410;&#30340;&#35752;&#35770;&#65292;&#37027;&#37324;&#30340;&#35752;&#35770;&#21516;&#26679;&#36866;&#29992;&#20110;JDO&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="orm-jdo-template"></a>12.3.2.&nbsp;<tt class="classname">JdoTemplate</tt>&#21644;<tt class="classname">JdoDaoSupport</tt></h3></div></div><div></div></div><p>
      
       &#27599;&#19968;&#20010;&#22522;&#20110;JDO&#30340;DAO&#31867;&#37117;&#38656;&#35201;&#36890;&#36807;IoC&#26469;&#27880;&#20837;&#19968;&#20010; 
      <tt class="interfacename">PersistenceManagerFactory</tt>&#12290;
			&#36825;&#26679;&#30340;DAO&#31867;&#21487;&#20197;&#22312; <tt class="interfacename">PersistenceManagerFactory</tt> &#30340;&#24110;&#21161;&#19979;&#26469;&#25805;&#20316;&#21407;&#29983;&#30340;JDO API&#36827;&#34892;&#32534;&#31243;&#65292;
			&#20294;&#26159;&#36890;&#24120;&#26469;&#35828;&#25105;&#20204;&#26356;&#24895;&#24847;&#20351;&#29992;Spring&#25552;&#20379;&#30340; <tt class="classname">JdoTemplate</tt>&#65306;
      </p><pre class="programlisting">&lt;beans&gt;
  
  &lt;bean id="myProductDao" class="product.ProductDaoImpl"&gt;
    &lt;property name="persistenceManagerFactory" ref="myPmf"/&gt;
  &lt;/bean&gt;
  
&lt;/beans&gt;</pre><pre class="programlisting">public class ProductDaoImpl implements ProductDao {
  
    private JdoTemplate jdoTemplate;

    public void setPersistenceManagerFactory(PersistenceManagerFactory pmf) {
        this.jdoTemplate = new JdoTemplate(pmf);
    }

    public Collection loadProductsByCategory(final String category) throws DataAccessException {
        return (Collection) this.jdoTemplate.execute(new JdoCallback() {
            public Object doInJdo(PersistenceManager pm) throws JDOException {
                Query query = pm.newQuery(Product.class, "category = pCategory");
                query.declareParameters("String pCategory"); 
                List result = query.execute(category);
                <i class="lineannotation"><span class="lineannotation">// do some further stuff with the result list</span></i>
                return result;
            }
        });
    }
}</pre><p>
       &#19968;&#20010;&#22238;&#35843;&#30340;&#23454;&#29616;&#33021;&#22815;&#26377;&#25928;&#22320;&#22312;&#20219;&#20309;JDO&#25968;&#25454;&#35775;&#38382;&#20013;&#20351;&#29992;&#12290;
      <tt class="classname">JdoTemplate</tt> &#20250;&#30830;&#20445;&#24403;&#21069;&#30340; <tt class="classname">PersistenceManager</tt> 
       &#23545;&#35937;&#30340;&#27491;&#30830;&#25171;&#24320;&#21644;&#20851;&#38381;&#65292;&#24182;&#33258;&#21160;&#21442;&#19982;&#21040;&#20107;&#21153;&#31649;&#29702;&#20013;&#21435;&#12290;
		  Template&#23454;&#20363;&#19981;&#20165;&#26159;&#32447;&#31243;&#23433;&#20840;&#30340;&#65292;&#21516;&#26102;&#23427;&#20063;&#26159;&#21487;&#37325;&#29992;&#30340;&#65292;&#22240;&#32780;&#20182;&#20204;&#21487;&#20197;&#20316;&#20026;&#22806;&#37096;&#23545;&#35937;&#30340;&#23454;&#20363;&#21464;&#37327;&#32780;&#34987;&#25345;&#26377;&#12290;
		  &#23545;&#20110;&#37027;&#20123;&#31616;&#21333;&#30340;&#35832;&#22914; <tt class="literal">find</tt>&#12289;<tt class="literal">load</tt>&#12289;
		  <tt class="literal">makePersistent</tt> &#25110;&#32773; <tt class="literal">delete</tt> &#25805;&#20316;&#30340;&#35843;&#29992;&#65292;
		  <tt class="classname">JdoTemplate</tt> &#25552;&#20379;&#21487;&#36873;&#25321;&#30340;&#24555;&#25463;&#20989;&#25968;&#26469;&#26367;&#25442;&#36825;&#31181;&#22238;&#35843;&#30340;&#23454;&#29616;&#12290;
		  &#19981;&#20165;&#22914;&#27492;&#65292;Spring&#36824;&#25552;&#20379;&#20102;&#19968;&#20010;&#31616;&#20415;&#30340; <tt class="classname">JdoDaoSupport</tt> &#22522;&#31867;&#65292;
		  &#36825;&#20010;&#31867;&#25552;&#20379;&#20102; <tt class="literal">setPersistenceManagerFactory(..)</tt> &#26041;&#27861;&#26469;&#25509;&#21463;&#19968;&#20010; 
		  <tt class="classname">PersistenceManagerFactory</tt> &#23545;&#35937;&#65292;
		  &#21516;&#26102;&#25552;&#20379;&#20102; <tt class="methodname">getPersistenceManagerFactory()</tt> 
		  &#21644; <tt class="methodname">getJdoTemplate()</tt> &#32473;&#23376;&#31867;&#20351;&#29992;&#12290;
		  &#32508;&#21512;&#20102;&#36825;&#20123;&#65292;&#23545;&#20110;&#37027;&#20123;&#20856;&#22411;&#30340;&#19994;&#21153;&#38656;&#27714;&#65292;&#23601;&#26377;&#20102;&#19968;&#20010;&#38750;&#24120;&#31616;&#21333;&#30340;DAO&#23454;&#29616;&#65306;
      </p><pre class="programlisting">public class ProductDaoImpl extends JdoDaoSupport implements ProductDao {
  
    public Collection loadProductsByCategory(String category) throws DataAccessException {
        return getJdoTemplate().find(
            Product.class, "category = pCategory", "String category", new Object[] {category});
    }
}</pre><p>&#20316;&#20026;&#19981;&#20351;&#29992;Spring&#30340; <tt class="classname">JdoTemplate</tt> &#26469;&#23454;&#29616;DAO&#30340;&#26367;&#20195;&#35299;&#20915;&#26041;&#26696;&#65292;&#20320;&#20381;&#28982;&#21487;&#20197;&#36890;&#36807;&#22312;&#21407;&#29983;JDO API&#30340;&#32423;&#21035;&#23545;&#37027;&#20123;&#22522;&#20110;Spring&#30340;DAO&#36827;&#34892;&#32534;&#31243;&#65292;&#27492;&#26102;&#20320;&#24517;&#39035;&#26126;&#30830;&#22320;&#25171;&#24320;&#21644;&#20851;&#38381;&#19968;&#20010; <tt class="interfacename">PersistenceManager</tt>&#12290;
		&#27491;&#22914;&#22312;&#30456;&#24212;&#30340;Hibernate&#31456;&#33410;&#25551;&#36848;&#30340;&#19968;&#26679;&#65292;&#36825;&#31181;&#20570;&#27861;&#30340;&#20027;&#35201;&#20248;&#28857;&#22312;&#20110;&#20320;&#30340;&#25968;&#25454;&#35775;&#38382;&#20195;&#30721;&#21487;&#20197;&#22312;&#25972;&#20010;&#36807;&#31243;&#20013;&#25243;&#20986;checked exceptions&#12290;<tt class="classname">JdoDaoSupport</tt> &#20026;&#36825;&#31181;&#24773;&#20917;&#25552;&#20379;&#20102;&#22810;&#31181;&#20989;&#25968;&#25903;&#25345;&#65292;
		&#21253;&#25324;&#33719;&#21462;&#21644;&#37322;&#25918;&#19968;&#20010;&#20855;&#22791;&#20107;&#21153;&#31649;&#29702;&#21151;&#33021;&#30340; <tt class="interfacename">PersistenceManager</tt> &#21644;&#30456;&#20851;&#30340;&#24322;&#24120;&#36716;&#21270;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="orm-jdo-daos-straight"></a>12.3.3.&nbsp;
      
      &#22522;&#20110;&#21407;&#29983;&#30340;JDO API&#23454;&#29616;DAO
      </h3></div></div><div></div></div><p>&#25105;&#20204;&#21487;&#20197;&#30452;&#25509;&#25805;&#20316;JDO API&#26469;&#23454;&#29616;DAO&#65292;&#36890;&#36807;&#30452;&#25509;&#20351;&#29992;&#19968;&#20010;&#27880;&#20837;&#30340; <tt class="interfacename">PersistenceManagerFactory</tt>&#65292;&#32780;&#26080;&#38656;&#23545;Spring&#20135;&#29983;&#30340;&#20219;&#20309;&#20381;&#36182;&#12290;
		&#19968;&#20010;&#30456;&#24212;&#30340;DAO&#23454;&#29616;&#30475;&#19978;&#21435;&#23601;&#20687;&#19979;&#38754;&#36825;&#26679;&#65306;</p><pre class="programlisting">public class ProductDaoImpl implements ProductDao {

    private PersistenceManagerFactory persistenceManagerFactory;

    public void setPersistenceManagerFactory(PersistenceManagerFactory pmf) {
        this.persistenceManagerFactory = pmf;
    }

    public Collection loadProductsByCategory(String category) {
        PersistenceManager pm = this.persistenceManagerFactory.getPersistenceManager();
        try {
            Query query = pm.newQuery(Product.class, "category = pCategory");
            query.declareParameters("String pCategory"); 
            return query.execute(category);
        }
        finally {
          pm.close();
        }
    }
}</pre><p>
      
      &#19978;&#38754;&#25105;&#20204;&#25152;&#21015;&#20986;&#30340;DAO&#23436;&#20840;&#36981;&#24490;IoC&#65292;&#23427;&#22914;&#21516;&#20351;&#29992;Spring&#30340; 
      <tt class="classname">JdoTemplate</tt> &#36827;&#34892;&#32534;&#30721;&#37027;&#26679;&#65292;&#38750;&#24120;&#36866;&#21512;&#22312;Spring&#23481;&#22120;&#20013;&#36827;&#34892;&#37197;&#32622;&#65306;
      </p><pre class="programlisting">&lt;beans&gt;

  &lt;bean id="myProductDao" class="product.ProductDaoImpl"&gt;
    &lt;property name="persistenceManagerFactory" ref="myPmf"/&gt;
  &lt;/bean&gt;

&lt;/beans&gt;</pre><p>&#36825;&#31867;DAO&#30340;&#20027;&#35201;&#38382;&#39064;&#22312;&#20110;&#20182;&#20204;&#27599;&#27425;&#24635;&#26159;&#20174;&#24037;&#21378;&#20013;&#24471;&#21040;&#19968;&#20010;&#26032;&#30340; <tt class="interfacename">PersistenceManager</tt> 
       &#23454;&#20363;&#12290;&#20026;&#20102;&#20381;&#28982;&#33021;&#22815;&#35775;&#38382;&#21463;&#21040;Spring&#31649;&#29702;&#30340;&#12289;&#20855;&#22791;&#20107;&#21153;&#31649;&#29702;&#21151;&#33021;&#30340; <tt class="interfacename">PersistenceManager</tt>&#65292;
       &#19981;&#22952;&#32771;&#34385;&#19968;&#19979;&#22312;&#30446;&#26631; <tt class="interfacename">PersistenceManagerFactory</tt> &#20043;&#21069;&#65292;
			&#23450;&#20041;&#19968;&#20010; <tt class="classname">TransactionAwarePersistenceManagerFactoryProxy</tt>&#65288;Spring&#24050;&#32463;&#25552;&#20379;&#65289;&#65292;
			&#28982;&#21518;&#23558;&#36825;&#20010;&#20195;&#29702;&#27880;&#20837;&#21040;&#20320;&#30340;DAO&#20013;&#21435;&#12290;
      </p><pre class="programlisting">&lt;beans&gt;

  &lt;bean id="myPmfProxy"
      class="org.springframework.orm.jdo.TransactionAwarePersistenceManagerFactoryProxy"&gt;
    &lt;property name="targetPersistenceManagerFactory" ref="myPmf"/&gt;
  &lt;/bean&gt;

  &lt;bean id="myProductDao" class="product.ProductDaoImpl"&gt;
    &lt;property name="persistenceManagerFactory" ref="myPmfProxy"/&gt;
  &lt;/bean&gt;

&lt;/beans&gt;</pre><p>
      	&#36825;&#26679;&#65292;&#20320;&#30340;&#25968;&#25454;&#35775;&#38382;&#20195;&#30721;&#23601;&#21487;&#20197;&#36890;&#36807; <tt class="methodname">PersistenceManagerFactory.getPersistenceManager()</tt> 
       	&#26041;&#27861;&#24471;&#21040;&#19968;&#20010;&#20855;&#22791;&#20107;&#21153;&#31649;&#29702;&#21151;&#33021;&#30340; <tt class="interfacename">PersistenceManager</tt>&#12290;
				&#32780;&#36825;&#19968;&#26041;&#27861;&#23558;&#36890;&#36807;&#20195;&#29702;&#31867;&#30340;&#22788;&#29702;&#65306;&#22312;&#20174;&#24037;&#21378;&#33719;&#21462;&#19968;&#20010;&#26032;&#30340; <tt class="interfacename">PersistenceManager</tt> 
				&#23454;&#20363;&#20043;&#21069;&#26816;&#26597;&#19968;&#19979;&#24403;&#21069;&#20855;&#22791;&#20107;&#21153;&#31649;&#29702;&#21151;&#33021;&#30340; <tt class="interfacename">PersistenceManager</tt>&#65292;
				&#22914;&#26524;&#36825;&#26159;&#19968;&#20010;&#20855;&#22791;&#20107;&#21153;&#31649;&#29702;&#21151;&#33021;&#30340; <tt class="interfacename">PersistenceManager</tt>&#65292;
				<tt class="methodname">close()</tt> &#35843;&#29992;&#22312;&#27492;&#26102;&#23558;&#34987;&#24573;&#30053;&#12290;
      </p><p>
      	&#22914;&#26524;&#20320;&#30340;&#25968;&#25454;&#35775;&#38382;&#20195;&#30721;&#24635;&#26159;&#22312;&#19968;&#20010;&#22788;&#20110;&#27963;&#36291;&#29366;&#24577;&#30340;&#20107;&#21153;&#20013;&#25191;&#34892;&#65288;&#25110;&#32773;&#33267;&#23569;&#22312;&#19968;&#20010;&#27963;&#36291;&#30340;&#20107;&#21153;&#21516;&#27493;&#20013;&#65289;&#65292;
      	&#37027;&#20040;&#20320;&#33021;&#22815;&#38750;&#24120;&#23433;&#20840;&#22320;&#24573;&#30053; <tt class="methodname">PersistenceManager.close()</tt> &#30340;&#35843;&#29992;&#21644;&#25972;&#20010; 
      	<tt class="literal">finally</tt> &#22359;&#30340;&#20195;&#30721;&#12290;&#36825;&#23558;&#20351;&#20320;&#30340;DAO&#23454;&#29616;&#21464;&#24471;&#27604;&#36739;&#31616;&#27905;&#65306;
      </p><pre class="programlisting">public class ProductDaoImpl implements ProductDao {

    private PersistenceManagerFactory persistenceManagerFactory;

    public void setPersistenceManagerFactory(PersistenceManagerFactory pmf) {
        this.persistenceManagerFactory = pmf;
    }

    public Collection loadProductsByCategory(String category) {
        PersistenceManager pm = this.persistenceManagerFactory.getPersistenceManager();
        Query query = pm.newQuery(Product.class, "category = pCategory");
        query.declareParameters("String pCategory"); 
        return query.execute(category);
    }
}</pre><p>&#23545;&#20110;&#36825;&#31181;&#20381;&#36182;&#20110;&#27963;&#36291;&#20107;&#21153;&#30340;DAO&#65292;&#27604;&#36739;&#25512;&#33616;&#30340;&#20570;&#27861;&#26159;&#23558; 
      <tt class="classname">TransactionAwarePersistenceManagerFactoryProxy</tt> 
      &#20013;&#30340;"allowCreate"&#26631;&#24535;&#20851;&#38381;&#65292;&#20174;&#32780;&#24378;&#21046;&#27963;&#36291;&#20107;&#21153;&#12290;</p><pre class="programlisting">&lt;beans&gt;

  &lt;bean id="myPmfProxy"
      class="org.springframework.orm.jdo.TransactionAwarePersistenceManagerFactoryProxy"&gt;
    &lt;property name="targetPersistenceManagerFactory" ref="myPmf"/&gt;
    &lt;property name="allowCreate" value="false"/&gt;
  &lt;/bean&gt;

  &lt;bean id="myProductDao" class="product.ProductDaoImpl"&gt;
    &lt;property name="persistenceManagerFactory" ref="myPmfProxy"/&gt;
  &lt;/bean&gt;

&lt;/beans&gt;</pre><p>&#36825;&#31181;DAO&#35775;&#38382;&#26041;&#24335;&#30340;&#20027;&#35201;&#20248;&#21183;&#22312;&#20110;&#23427;&#20165;&#20165;&#20381;&#36182;&#20110;JDO API&#26412;&#36523;&#32780;&#26080;&#38656;&#24341;&#20837;&#20219;&#20309;&#30340;Spring&#30340;&#31867;&#12290;
      &#20174;&#26080;&#20837;&#20405;&#24615;&#30340;&#35282;&#24230;&#26469;&#30475;&#65292;&#36825;&#19968;&#28857;&#38750;&#24120;&#21560;&#24341;&#20154;&#12290;&#21516;&#26102;&#65292;&#23545;&#20110;JDO&#24320;&#21457;&#20154;&#21592;&#26469;&#35828;&#20063;&#26356;&#33258;&#28982;&#12290;</p><p>
      	&#28982;&#32780;&#65292;&#36825;&#26679;&#30340;DAO&#35775;&#38382;&#26041;&#24335;&#20250;&#25243;&#20986; <tt class="exceptionname">JDOException</tt>&#65292;
      	&#36825;&#26159;&#19968;&#20010;&#26080;&#38656;&#22768;&#26126;&#25110;&#25429;&#33719;&#30340;unchecked exception&#12290;&#36825;&#24847;&#21619;&#30528;&#65292;DAO&#30340;&#35843;&#29992;&#32773;&#21482;&#33021;&#20197;&#26222;&#36890;&#30340;&#38169;&#35823;&#26469;&#22788;&#29702;&#36825;&#20123;&#24322;&#24120;&#65292;
      	&#38500;&#38750;&#23436;&#20840;&#20381;&#36182;JDO&#33258;&#36523;&#30340;&#24322;&#24120;&#20307;&#31995;&#12290;&#22240;&#32780;&#65292;&#38500;&#38750;&#20320;&#23558;DAO&#30340;&#35843;&#29992;&#32773;&#32465;&#23450;&#21040;&#20855;&#20307;&#30340;&#23454;&#29616;&#31574;&#30053;&#19978;&#21435;&#65292;
      	&#21542;&#21017;&#20320;&#23558;&#26080;&#27861;&#25429;&#33719;&#29305;&#23450;&#30340;&#24322;&#24120;&#21407;&#22240;&#65288;&#35832;&#22914;&#20048;&#35266;&#38145;&#24322;&#24120;&#65289;&#12290;&#36825;&#31181;&#25240;&#20013;&#24179;&#34913;&#25110;&#35768;&#21487;&#20197;&#34987;&#25509;&#21463;&#65292;
      	&#22914;&#26524;&#20320;&#30340;&#24212;&#29992;&#23436;&#20840;&#22522;&#20110;JDO&#25110;&#32773;&#26080;&#38656;&#36827;&#34892;&#29305;&#27530;&#30340;&#24322;&#24120;&#22788;&#29702;&#12290;
      </p><p>
      	&#24635;&#20307;&#26469;&#35828;&#65292;DAO&#21487;&#20197;&#22522;&#20110;JDO&#30340;&#21407;&#29983;API&#23454;&#29616;&#65292;&#21516;&#26102;&#65292;&#23427;&#20381;&#26087;&#38656;&#35201;&#33021;&#22815;&#21442;&#19982;&#21040;Spring&#30340;&#20107;&#21153;&#31649;&#29702;&#20013;&#12290;
			&#36825;&#23545;&#20110;&#37027;&#20123;&#24050;&#32463;&#23545;JDO&#38750;&#24120;&#29087;&#24713;&#30340;&#20154;&#26469;&#35828;&#24456;&#26377;&#21560;&#24341;&#21147;&#65292;&#22240;&#20026;&#36825;&#31181;&#26041;&#24335;&#26356;&#21152;&#33258;&#28982;&#12290;
			&#19981;&#36807;&#65292;&#36825;&#31181;DAO&#23558;&#25243;&#20986; <tt class="exceptionname">JDOException</tt>&#65292;&#22240;&#32780;&#65292;
			&#22914;&#26524;&#26377;&#24517;&#35201;&#30340;&#35805;&#38656;&#35201;&#26126;&#30830;&#22320;&#21435;&#20570;&#30001; <tt class="exceptionname">JDOException</tt> &#21040;Spring&#30340; 
			<tt class="exceptionname">DataAccessException</tt> &#30340;&#36716;&#21270;&#12290;
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="orm-jdo-tx"></a>12.3.4.&nbsp;&#20107;&#21153;&#31649;&#29702;</h3></div></div><div></div></div><p>&#23558;&#20107;&#21153;&#31649;&#29702;&#32435;&#20837;&#21040;Service&#25805;&#20316;&#30340;&#25191;&#34892;&#20013;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;Spring&#36890;&#29992;&#30340;&#22768;&#26126;&#24335;&#30340;&#20107;&#21153;&#31649;&#29702;&#21151;&#33021;&#65292;
      &#21442;&#21152;&#19979;&#38754;&#30340;&#20363;&#23376;&#65306;</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans
        xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:aop="http://www.springframework.org/schema/aop"
        xmlns:tx="http://www.springframework.org/schema/tx"
        xsi:schemaLocation="
   http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
   http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
   http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd"&gt;

  &lt;bean id="myTxManager" class="org.springframework.orm.jdo.JdoTransactionManager"&gt;
    &lt;property name="persistenceManagerFactory" ref="myPmf"/&gt;
  &lt;/bean&gt;

  &lt;bean id="myProductService" class="product.ProductServiceImpl"&gt;
    &lt;property name="productDao" ref="myProductDao"/&gt;
  &lt;/bean&gt;

  &lt;tx:advice id="txAdvice" transaction-manager="txManager"&gt;
    &lt;tx:attributes&gt;
      &lt;tx:method name="increasePrice*" propagation="REQUIRED"/&gt;
      &lt;tx:method name="someOtherBusinessMethod" propagation="REQUIRES_NEW"/&gt;
      &lt;tx:method name="*" propagation="SUPPORTS" read-only="true"/&gt;
    &lt;/tx:attributes&gt;
  &lt;/tx:advice&gt;

  &lt;aop:config&gt;
    &lt;aop:pointcut id="productServiceMethods" expression="execution(* product.ProductService.*(..))"/&gt;
    &lt;aop:advisor advice-ref="txAdvice" pointcut-ref="productServiceMethods"/&gt;
  &lt;/aop:config&gt;

&lt;/beans&gt;</pre><p>&#27880;&#24847;&#65292;JDO&#35201;&#27714;&#20320;&#24517;&#39035;&#22312;&#19968;&#20010;&#27963;&#36291;&#30340;&#20107;&#21153;&#20013;&#20462;&#25913;&#19968;&#20010;&#25345;&#20037;&#21270;&#23545;&#35937;&#12290;
       &#19982;Hibernate&#30456;&#27604;&#65292;&#22312;JDO&#20013;&#24182;&#27809;&#26377;&#19968;&#31181;&#31867;&#20284;&#33073;&#31163;&#20107;&#21153;&#21047;&#20986;&#65288;non-transactional flush&#65289;&#30340;&#27010;&#24565;&#12290;
			&#22522;&#20110;&#36825;&#31181;&#21407;&#22240;&#65292;&#20320;&#25152;&#36873;&#25321;&#30340;JDO&#23454;&#29616;&#38656;&#35201;&#34987;&#24314;&#31435;&#22312;&#29305;&#23450;&#30340;&#29615;&#22659;&#20013;&#65292;&#23588;&#20854;&#26159;&#23427;&#38656;&#35201;&#20026;JTA&#21516;&#27493;&#20570;&#26126;&#30830;&#30340;&#21019;&#24314;&#65292;
			&#30001;&#27492;&#26469;&#33258;&#34892;&#26816;&#27979;&#19968;&#20010;JTA&#20107;&#21153;&#12290;&#36825;&#19968;&#28857;&#23545;&#20110;&#26412;&#22320;&#20107;&#21153;&#19981;&#26159;&#24517;&#35201;&#30340;&#65292;&#30001;&#20110;&#23427;&#24050;&#32463;&#34987;Spring&#30340; 
			<tt class="classname">JdoTransactionManager</tt> &#22788;&#29702;&#65292;&#20294;&#26159;&#23545;&#20110;&#38656;&#35201;&#21442;&#19982;&#21040;JTA&#20107;&#21153;&#20013;&#30340;&#24773;&#20917;&#65292;&#26159;&#24517;&#39035;&#30340;
			&#65288;&#26080;&#35770;&#26159;&#30001;Spring&#30340; <tt class="classname">JtaTransactionManager</tt>&#12289;EJB CMT&#25110;&#32773;&#26222;&#36890;&#30340;JTA&#25152;&#39537;&#21160;&#30340;&#20107;&#21153;&#65289;&#12290;
			</p><p>
      	<tt class="classname">JdoTransactionManager</tt> &#33021;&#22815;&#23558;&#19968;&#20010;JDO&#20107;&#21153;&#26292;&#38706;&#32473;&#35775;&#38382;&#30456;&#21516;&#30340;JDBC 
      	<tt class="interfacename">DataSource</tt> &#30340;JDBC&#35775;&#38382;&#20195;&#30721;&#12290;&#21069;&#25552;&#26465;&#20214;&#26159;&#65292;&#34987;&#27880;&#20876;&#30340; 
      	<tt class="classname">JdoDialect</tt> &#33021;&#22815;&#25903;&#25345;&#33719;&#21462;&#24213;&#23618;&#30340;JDBC <tt class="interfacename">Connection</tt>&#12290;
				&#36825;&#19968;&#21151;&#33021;&#40664;&#35748;&#34987;&#22522;&#20110;JDBC&#30340;JDO 2.0 &#23454;&#29616;&#12290;&#23545;&#20110;JDO 1.0&#30340;&#23454;&#29616;&#65292;&#24517;&#39035;&#27880;&#20876;&#19968;&#20010;&#29992;&#25143;&#33258;&#23450;&#20041;&#30340; 
				<tt class="classname">JdoDialect</tt>&#12290;&#20855;&#20307;&#21442;&#35265;&#19979;&#19968;&#33410;&#26377;&#20851; <tt class="classname">JdoDialect</tt> &#30340;&#26426;&#21046;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="orm-jdo-dialect"></a>12.3.5.&nbsp;<tt class="interfacename">JdoDialect</tt></h3></div></div><div></div></div><p>
      
      	&#20316;&#20026;&#39640;&#32423;&#29305;&#24615;&#65292;<tt class="classname">JdoTemplate</tt> &#21644; <tt class="classname">interfacename</tt> 
      	&#37117;&#25903;&#25345;&#19968;&#20010;&#29992;&#25143;&#33258;&#23450;&#20041;&#30340; <tt class="interfacename">JdoDialect</tt> &#20316;&#20026;&#8220;jdoDialect&#8221;&#30340;bean&#23646;&#24615;&#36827;&#34892;&#27880;&#20837;&#12290;
				&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;DAO&#23558;&#19981;&#20877;&#25509;&#25910; <tt class="interfacename">PersistenceManagerFactory</tt> &#30340;&#24341;&#29992;&#20316;&#20026;&#21442;&#25968;&#65292;
				&#32780;&#26159;&#25509;&#25910;&#19968;&#20010;&#23436;&#25972;&#30340; <tt class="classname">JdoTemplate</tt> &#23454;&#20363;&#65288;&#20063;&#23601;&#26159;&#23558;&#23427;&#27880;&#20837;&#21040; 
				<tt class="classname">JdoDaoSupport</tt> &#30340;"jdoTemplate"&#23646;&#24615;&#20013;&#21435;&#65289;&#12290;&#19968;&#20010; <tt class="interfacename">JdoDialect</tt> 
				&#23454;&#29616;&#33021;&#22815;&#28608;&#27963;&#19968;&#20123;&#30001;Spring&#25903;&#25345;&#30340;&#39640;&#32423;&#29305;&#24615;&#65292;&#36825;&#36890;&#24120;&#30001;&#29305;&#23450;&#30340;&#23454;&#29616;&#20379;&#24212;&#21830;&#25351;&#23450;&#65306;
      </p><div class="itemizedlist"><ul type="disc"><li><p>&#25191;&#34892;&#29305;&#23450;&#30340;&#20107;&#21153;&#35821;&#20041;&#65288;&#20363;&#22914;&#29992;&#25143;&#33258;&#23450;&#20041;&#30340;&#20107;&#21153;&#38548;&#31163;&#32423;&#21035;&#21644;&#20107;&#21153;&#36229;&#26102;&#65289;</p></li><li><p>&#33719;&#21462;&#20855;&#22791;&#20107;&#21153;&#21151;&#33021;&#30340;JDBC <tt class="interfacename">Connection</tt> &#65288;&#26292;&#38706;&#32473;&#22522;&#20110;JDBC&#30340;DAO&#65289;</p></li><li><p>&#24212;&#29992;&#26597;&#35810;&#36229;&#26102;&#21151;&#33021;&#65288;&#33258;&#21160;&#22320;&#20174;Spring&#31649;&#29702;&#30340;&#20107;&#21153;&#36229;&#26102;&#20013;&#35745;&#31639;&#65289;</p></li><li><p>&#21450;&#26102;&#21047;&#20986; <tt class="interfacename">PersistenceManager</tt> &#65288;&#20351;&#24471;&#20107;&#21153;&#21464;&#21270;&#23545;&#20110;&#22522;&#20110;JDBC&#30340;&#25968;&#25454;&#35775;&#38382;&#20195;&#30721;&#21487;&#35265;&#65289;</p></li><li><p>&#20174; <tt class="literal">JDOExceptions</tt> &#21040;Spring&#30340; <tt class="literal">DataAccessExceptions</tt> &#30340;&#39640;&#32423;&#36716;&#21270;</p></li></ul></div><p>&#36825;&#23545;&#20110;JDO 1.0&#30340;&#23454;&#29616;&#26377;&#29305;&#21035;&#30340;&#20215;&#20540;&#65292;&#30001;&#20110;&#36825;&#20123;&#29305;&#24615;&#37117;&#27809;&#26377;&#22312;&#20854;&#26631;&#20934;&#30340;API&#20013;&#21253;&#21547;&#12290;
			&#23545;&#20110;JDO 2.0&#65292;&#20854;&#20013;&#30340;&#32477;&#22823;&#22810;&#25968;&#30340;&#29305;&#24615;&#24050;&#32463;&#20197;&#26631;&#20934;&#30340;&#26041;&#24335;&#34987;&#25903;&#25345;&#12290;&#22240;&#32780;&#65292;Spring&#30340; <tt class="literal">DefaultJdoDialect</tt> 
			&#22312;&#40664;&#35748;&#24773;&#20917;&#19979;&#65288;Spring 1.2&#21518;&#65289;&#20351;&#29992;&#30456;&#24212;&#30340;JDO 2.0 API&#20989;&#25968;&#12290;&#23545;&#20110;&#29305;&#27530;&#30340;&#20107;&#21153;&#35821;&#20041;&#21644;&#24322;&#24120;&#30340;&#39640;&#32423;&#36716;&#21270;&#36825;&#26679;&#30340;&#39640;&#32423;&#29305;&#24615;&#65292;
			&#33719;&#21462;&#21644;&#20351;&#29992;JDO&#23454;&#29616;&#20379;&#24212;&#21830;&#29305;&#23450;&#30340; <tt class="classname">JdoDialect</tt> &#23376;&#31867;&#36824;&#26159;&#27604;&#36739;&#26377;&#20215;&#20540;&#30340;&#12290;
			</p><p>&#26356;&#22810;&#26377;&#20851;&#23427;&#30340;&#25805;&#20316;&#20197;&#21450;&#23427;&#22914;&#20309;&#22312;Spring&#30340;JDO&#25903;&#25345;&#20013;&#20351;&#29992;&#30340;&#35814;&#32454;&#20449;&#24687;&#35831;&#21442;&#30475;
       <tt class="classname">JdoDialect</tt> &#30340;Javadoc&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="orm-toplink"></a>12.4.&nbsp;Oracle TopLink</h2></div></div><div></div></div><p>
    Spring&#20174;Spring 1.2&#29256;&#26412;&#24320;&#22987;&#25903;&#25345;Oracle TopLink &#65288;<a href="http://www.oracle.com/technology/products/ias/toplink" target="_top">http://www.oracle.com/technology/products/ias/toplink</a>&#65289;
    &#20316;&#20026;&#25968;&#25454;&#35775;&#38382;&#31574;&#30053;&#65292;&#21516;&#26679;&#36981;&#24490;&#31867;&#20284;&#20110;Spring&#23545;Hibernate&#30340;&#25903;&#25345;&#39118;&#26684;&#12290;Spring&#23545;&#20854;&#30340;&#25903;&#25345;&#21253;&#25324;
    TopLink 9.0.4&#65288;Spring 1.2&#25903;&#25345;&#30340;&#20135;&#21697;&#29256;&#26412;&#65289;&#21644;TopLink 10.1.3&#65288;Spring 1.2&#25903;&#25345;&#30340;&#65292;&#20381;&#28982;&#22788;&#20110;beta&#29256;&#65289;&#12290;
		&#23545;&#24212;&#30340;&#25903;&#25345;&#19982;&#25972;&#21512;&#31867;&#20301;&#20110; <tt class="literal">org.springframework.orm.toplink</tt> &#21253;&#20013;&#12290;
		</p><p>
    TopLink&#25903;&#25345;&#30001;Spring&#21644;Oracle TopLink&#22242;&#38431;&#20849;&#21516;&#24320;&#21457;&#12290;
		&#38750;&#24120;&#24863;&#35874;TopLink&#22242;&#38431;&#65292;&#23588;&#20854;&#26159;Jim Clark&#65292;&#26367;&#25105;&#20204;&#38416;&#26126;&#20102;&#25152;&#26377;&#26041;&#38754;&#30340;&#32454;&#33410;&#65281;
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="orm-toplink-abstraction"></a>12.4.1.&nbsp;<tt class="interfacename">SessionFactory</tt> &#25277;&#35937;&#23618;</h3></div></div><div></div></div><p>
      	TopLink&#26412;&#36523;&#24182;&#27809;&#26377;&#25552;&#20379;SessionFactory&#25277;&#35937;&#23618;&#36923;&#36753;&#65292;&#22810;&#32447;&#31243;&#30340;&#25968;&#25454;&#35775;&#38382;&#26159;&#24314;&#31435;&#22312;&#20013;&#22830; 
      	<tt class="literal">ServerSession</tt> &#19978;&#30340;&#12290;&#23545;&#20110;&#21333;&#32447;&#31243;&#35775;&#38382;&#65292;
      	&#36825;&#20010;&#20013;&#22830; <tt class="literal">ServerSession</tt> &#20250;&#20026;&#23427;&#19968;&#20010; 
      	<tt class="literal">ClientSession</tt> &#30340;&#23454;&#20363;&#20379;&#20854;&#20351;&#29992;&#12290;&#20026;&#20102;&#25552;&#20379;&#28789;&#27963;&#20415;&#25463;&#30340;&#21019;&#24314;&#36873;&#39033;&#65292;
      	Spring&#20026;TopLink&#23450;&#20041;&#20102;&#19968;&#20010; <tt class="interfacename">SessionFactory</tt> &#25509;&#21475;&#65292;
      	&#20174;&#32780;&#20351;&#20320;&#21487;&#20197;&#20219;&#24847;&#22320;&#22312;&#19981;&#21516;&#30340; <tt class="interfacename">Session</tt> &#21019;&#24314;&#31574;&#30053;&#20043;&#38388;&#36827;&#34892;&#20999;&#25442;&#12290;
      </p><p>
      	&#20316;&#20026;&#19968;&#20010;&#19968;&#31449;&#24335;&#30340;&#21830;&#24215;&#65292;Spring&#25552;&#20379;&#20102;&#19968;&#20010; <tt class="classname">LocalSessionFactoryBean</tt> &#31867;&#65292;
     	 	&#20801;&#35768;&#20320;&#20197;bean&#39118;&#26684;&#30340;&#37197;&#32622;&#26041;&#24335;&#26469;&#23450;&#20041;&#19968;&#20010;TopLink&#30340; <tt class="interfacename">SessionFactory</tt>&#12290;
				&#38656;&#35201;&#36827;&#34892;&#37197;&#32622;&#30340;&#22320;&#26041;&#20027;&#35201;&#26159;TopLink session&#37197;&#32622;&#25991;&#20214;&#65292;&#36890;&#24120;&#26469;&#35828;&#36824;&#38656;&#37197;&#32622;&#19968;&#20010;&#21463;&#21040;Spring&#31649;&#29702;&#30340;JDBC 
				<tt class="interfacename">DataSource</tt>&#12290;
      </p><pre class="programlisting">&lt;beans&gt;

  &lt;bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close"&gt;
    &lt;property name="driverClassName" value="${jdbc.driverClassName}"/&gt;
    &lt;property name="url" value="${jdbc.url}"/&gt;
    &lt;property name="username" value="${jdbc.username}"/&gt;
    &lt;property name="password" value="${jdbc.password}"/&gt;
  &lt;/bean&gt;

  &lt;bean id="mySessionFactory" class="org.springframework.orm.toplink.LocalSessionFactoryBean"&gt;
    &lt;property name="configLocation" value="toplink-sessions.xml"/&gt;
    &lt;property name="dataSource" ref="dataSource"/&gt;
  &lt;/bean&gt;
    
&lt;/beans&gt;</pre><pre class="programlisting">&lt;toplink-configuration&gt;

  &lt;session&gt;
    &lt;name&gt;Session&lt;/name&gt;
    &lt;project-xml&gt;toplink-mappings.xml&lt;/project-xml&gt;
    &lt;session-type&gt;
      &lt;server-session/&gt;
    &lt;/session-type&gt;
    &lt;enable-logging&gt;true&lt;/enable-logging&gt;
    &lt;logging-options/&gt;
  &lt;/session&gt;

&lt;/toplink-configuration&gt;</pre><p>
      	&#36890;&#24120;&#24773;&#20917;&#19979;&#65292;<tt class="classname">LocalSessionFactoryBean</tt> &#22312;&#24213;&#23618;&#23558;&#25345;&#26377;&#19968;&#20010;&#22810;&#32447;&#31243;&#30340;TopLink 
      	<tt class="literal">ServerSession</tt> &#24182;&#21019;&#24314;&#21512;&#36866;&#30340;&#23458;&#25143;&#31471; <tt class="interfacename">Session</tt>&#65306;
				&#23427;&#25110;&#32773;&#26159;&#19968;&#20010;&#26222;&#36890;&#30340; <tt class="interfacename">Session</tt>&#65288;&#20856;&#22411;&#24773;&#20917;&#65289; &#8212;&#8212; &#19968;&#20010;&#21463;&#31649;&#29702;&#30340; <tt class="literal">ClientSession</tt>&#65307;
				&#25110;&#32773;&#26159;&#19968;&#20010;&#20855;&#22791;&#20107;&#21153;&#21151;&#33021;&#30340; <tt class="interfacename">Session</tt> &#65288;&#21518;&#32773;&#20027;&#35201;&#22312;Spring&#20869;&#37096;&#23545;TopLink&#30340;&#25903;&#25345;&#20013;&#34987;&#20351;&#29992;&#65289;&#12290;
				&#36824;&#26377;&#19968;&#31181;&#24773;&#20917;&#65292;<tt class="classname">LocalSessionFactoryBean</tt> &#21487;&#33021;&#20250;&#25345;&#26377;&#19968;&#20010;&#21333;&#32447;&#31243;&#30340;TopLink&#30340; 
				<tt class="literal">DatabaseSession</tt>&#65292;&#36825;&#26159;&#38750;&#24120;&#29305;&#27530;&#30340;&#24773;&#20917;&#20102;&#12290;
			</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="orm-toplink-template"></a>12.4.2.&nbsp;<tt class="classname">TopLinkTemplate</tt> and
      <tt class="classname">TopLinkDaoSupport</tt></h3></div></div><div></div></div><p>
      	&#27599;&#20010;&#22522;&#20110;TopLink&#30340;DAO&#23558;&#36890;&#36807;IoC&#34987;&#27880;&#20837;&#19968;&#20010; <tt class="interfacename">SessionFactory</tt>&#65292;
      	&#20320;&#21487;&#20197;&#36890;&#36807;Setter&#26041;&#24335;&#27880;&#20837;&#65292;&#20063;&#21487;&#20197;&#29992;&#26500;&#36896;&#20989;&#25968;&#26041;&#24335;&#27880;&#20837;&#12290;&#36825;&#26679;&#30340;DAO&#21487;&#20197;&#30452;&#25509;&#25805;&#20316;&#21407;&#29983;&#30340;TopLink API&#65292;&#36890;&#36807; 
      	<tt class="interfacename">SessionFactory</tt> &#26469;&#33719;&#21462;&#19968;&#20010; <tt class="interfacename">Session</tt>&#65292;
      	&#20294;&#26159;&#36890;&#24120;&#24773;&#20917;&#19979;&#65292;&#20320;&#26356;&#24895;&#24847;&#20351;&#29992;Spring&#30340; <tt class="literal">TopLinkTemplate</tt>&#65306;
      </p><pre class="programlisting">&lt;beans&gt;
  
  &lt;bean id="myProductDao" class="product.ProductDaoImpl"&gt;
    &lt;property name="sessionFactory" ref="mySessionFactory"/&gt;
  &lt;/bean&gt;
  
&lt;/beans&gt;</pre><pre class="programlisting">public class TopLinkProductDao implements ProductDao {
  
    private TopLinkTemplate tlTemplate;

    public void setSessionFactory(SessionFactory sessionFactory) {
        this.tlTemplate = new TopLinkTemplate(sessionFactory);
    }

    public Collection loadProductsByCategory(final String category) throws DataAccessException {
        return (Collection) this.tlTemplate.execute(new TopLinkCallback() {
            public Object doInTopLink(Session session) throws TopLinkException {
                ReadAllQuery findOwnersQuery = new ReadAllQuery(Product.class);
                findOwnersQuery.addArgument("Category");
                ExpressionBuilder builder = this.findOwnersQuery.getExpressionBuilder();
                findOwnersQuery.setSelectionCriteria(
                    builder.get("category").like(builder.getParameter("Category")));

                Vector args = new Vector();
                args.add(category);
                List result = session.executeQuery(findOwnersQuery, args);
                <i class="lineannotation"><span class="lineannotation">// do some further stuff with the result list</span></i>
                return result;
            }
        });
    }
}</pre><p>
      	&#19968;&#20010;&#22238;&#35843;&#30340;&#23454;&#29616;&#33021;&#22815;&#26377;&#25928;&#22320;&#22312;&#20219;&#20309;TopLink&#25968;&#25454;&#35775;&#38382;&#20013;&#20351;&#29992;&#12290;<tt class="classname">TopLinkTemplate</tt> 
      	&#20250;&#30830;&#20445;&#24403;&#21069;&#30340; <tt class="interfacename">Session</tt> &#23545;&#35937;&#30340;&#27491;&#30830;&#25171;&#24320;&#21644;&#20851;&#38381;&#65292;&#24182;&#33258;&#21160;&#21442;&#19982;&#21040;&#20107;&#21153;&#31649;&#29702;&#20013;&#21435;&#12290;
				Template&#23454;&#20363;&#19981;&#20165;&#26159;&#32447;&#31243;&#23433;&#20840;&#30340;&#65292;&#21516;&#26102;&#23427;&#20063;&#26159;&#21487;&#37325;&#29992;&#30340;&#12290;&#22240;&#32780;&#20182;&#20204;&#21487;&#20197;&#20316;&#20026;&#22806;&#37096;&#23545;&#35937;&#30340;&#23454;&#20363;&#21464;&#37327;&#32780;&#34987;&#25345;&#26377;&#12290;&#23545;&#20110;&#37027;&#20123;&#31616;&#21333;&#30340;&#35832;&#22914; 
				<tt class="literal">executeQuery</tt>&#12289;<tt class="literal">readAll</tt>&#12289;<tt class="literal">readById</tt> &#21644; 
				<tt class="literal">merge</tt> &#25805;&#20316;&#30340;&#35843;&#29992;&#65292;<tt class="classname">TopLinkTemplate</tt>
				&#65288;&#35793;&#32773;&#27880;&#65306;&#21407;&#25991;&#35823;&#20889;&#25104;<tt class="classname">JdoTemplate</tt>&#65289;&#25552;&#20379;&#21487;&#36873;&#25321;&#30340;&#24555;&#25463;&#20989;&#25968;&#26469;&#26367;&#25442;&#36825;&#31181;&#22238;&#35843;&#30340;&#23454;&#29616;&#12290;
				&#19981;&#20165;&#22914;&#27492;&#65292;Spring&#36824;&#25552;&#20379;&#20102;&#19968;&#20010;&#31616;&#20415;&#30340; <tt class="classname">TopLinkDaoSupport</tt> &#22522;&#31867;&#65292;&#36825;&#20010;&#31867;&#25552;&#20379;&#20102; 
				<tt class="literal">setSessionFactory(..)</tt> &#26041;&#27861;&#26469;&#25509;&#21463;&#19968;&#20010; <tt class="interfacename">SessionFactory</tt> 
				&#23545;&#35937;&#65292;&#21516;&#26102;&#25552;&#20379;&#20102; <tt class="literal">getSessionFactory()</tt> &#21644; <tt class="literal">getTopLinkTemplate()</tt> 
				&#26041;&#27861;&#32473;&#23376;&#31867;&#20351;&#29992;&#12290;&#32508;&#21512;&#20102;&#36825;&#20123;&#65292;&#23545;&#20110;&#37027;&#20123;&#20856;&#22411;&#30340;&#19994;&#21153;&#38656;&#27714;&#65292;&#23601;&#26377;&#20102;&#19968;&#20010;&#38750;&#24120;&#31616;&#21333;&#30340;DAO&#23454;&#29616;&#12290;
      </p><pre class="programlisting">public class ProductDaoImpl extends TopLinkDaoSupport implements ProductDao {
  
    public Collection loadProductsByCategory(String category) throws DataAccessException {
        ReadAllQuery findOwnersQuery = new ReadAllQuery(Product.class);
        findOwnersQuery.addArgument("Category");
        ExpressionBuilder builder = this.findOwnersQuery.getExpressionBuilder();
        findOwnersQuery.setSelectionCriteria(
            builder.get("category").like(builder.getParameter("Category")));

        return getTopLinkTemplate().executeQuery(findOwnersQuery, new Object[] {category});
    }
}</pre><p>&#36793;&#27880;&#65306;TopLink&#26597;&#35810;&#23545;&#35937;&#26159;&#32447;&#31243;&#23433;&#20840;&#30340;&#65292;&#24182;&#19988;&#33021;&#22815;&#22312;DAO&#23618;&#34987;&#32531;&#23384;&#12290;&#22312;&#19968;&#24320;&#22987;&#34987;&#21019;&#24314;&#26102;&#20197;&#23454;&#20363;&#21464;&#37327;&#30340;&#26041;&#24335;&#34987;&#20445;&#25345;&#12290;</p><p>
      	&#20316;&#20026;&#19981;&#20351;&#29992;Spring&#30340; <tt class="classname">TopLinkTemplate</tt> &#26469;&#23454;&#29616;DAO&#30340;&#26367;&#20195;&#35299;&#20915;&#26041;&#26696;&#65292;
      	&#20320;&#20381;&#28982;&#21487;&#20197;&#36890;&#36807;&#21407;&#29983;TopLink API&#23545;&#37027;&#20123;&#22522;&#20110;Spring&#30340;DAO&#36827;&#34892;&#32534;&#31243;&#65292;&#27492;&#26102;&#20320;&#24517;&#39035;&#26126;&#30830;&#22320;&#25171;&#24320;&#21644;&#20851;
      	&#38381;&#19968;&#20010; <tt class="interfacename">Session</tt>&#12290;&#27491;&#22914;&#22312;&#30456;&#24212;&#30340;Hibernate&#31456;&#33410;&#25551;&#36848;&#30340;
      	&#19968;&#26679;&#65292;&#36825;&#31181;&#20570;&#27861;&#30340;&#20027;&#35201;&#20248;&#28857;&#22312;&#20110;&#20320;&#30340;&#25968;&#25454;&#35775;&#38382;&#20195;&#30721;&#21487;&#20197;&#22312;&#25972;&#20010;&#36807;&#31243;&#20013;&#25243;&#20986;checked exceptions&#12290;
				<tt class="classname">TopLinkDaoSupport</tt> &#20026;&#36825;&#31181;&#24773;&#20917;&#25552;&#20379;&#20102;&#22810;&#31181;&#20989;&#25968;&#25903;&#25345;&#65292;&#21253;&#25324;&#33719;&#21462;&#21644;&#37322;&#25918;
				&#19968;&#20010;&#20855;&#22791;&#20107;&#21153;&#30340; <tt class="interfacename">Session</tt> &#24182;&#20570;&#30456;&#20851;&#30340;&#24322;&#24120;&#36716;&#21270;&#12290;
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="orm-toplink-straight"></a>12.4.3.&nbsp;&#22522;&#20110;&#21407;&#29983;&#30340;TopLink API&#30340;DAO&#23454;&#29616;</h3></div></div><div></div></div><p>
      	&#25105;&#20204;&#21487;&#20197;&#30452;&#25509;&#25805;&#20316;TopLink API&#26469;&#23454;&#29616;DAO&#65292;&#30452;&#25509;&#20351;&#29992;&#19968;&#20010;&#27880;&#20837;&#30340; <tt class="interfacename">Session</tt> 
      	&#32780;&#26080;&#38656;&#23545;Spring&#20135;&#29983;&#30340;&#20219;&#20309;&#20381;&#36182;&#12290;&#23427;&#36890;&#24120;&#22522;&#20110;&#19968;&#20010;&#30001; <tt class="classname">LocalSessionFactoryBean</tt> 
      	&#23450;&#20041;&#30340; <tt class="interfacename">SessionFactory</tt>&#65292;&#24182;&#36890;&#36807;Spring&#30340; 
      	<tt class="literal">TransactionAwareSessionAdapter</tt> &#26292;&#38706;&#25104;&#20026;&#19968;&#20010; <tt class="interfacename">Session</tt> 
      	&#31867;&#22411;&#30340;&#24341;&#29992;&#12290;
      </p><p>
      	TopLink&#30340; <tt class="interfacename">Session</tt> &#25509;&#21475;&#20013;&#23450;&#20041;&#30340; 
      	<tt class="literal">getActiveSession()</tt> &#26041;&#27861;&#23558;&#36820;&#22238;&#24403;&#21069;&#20855;&#22791;&#20107;&#21153;&#31649;&#29702;&#21151;&#33021;&#30340; 
      	<tt class="interfacename">Session</tt> &#23545;&#35937;&#12290;&#22914;&#26524;&#24403;&#21069;&#27809;&#26377;&#22788;&#20110;&#27963;&#36291;&#29366;&#24577;&#30340;&#20107;&#21153;&#65292;
      	&#36825;&#20010;&#20989;&#25968;&#23558;&#36820;&#22238;&#19968;&#20010;&#20849;&#20139;&#30340;TopLink&#30340; <tt class="literal">ServerSession</tt>&#65292;&#20063;&#23601;&#26159;&#35828;&#65292;
      	&#36825;&#31181;&#24773;&#20917;&#24212;&#35813;&#21482;&#26159;&#19968;&#20010;&#30452;&#25509;&#20351;&#29992;&#30340;&#21482;&#35835;&#35775;&#38382;&#12290;&#21478;&#22806;&#36824;&#26377;&#19968;&#20010; <tt class="methodname">getActiveUnitOfWork()</tt> 
      	&#26041;&#27861;, &#36820;&#22238;TopLink&#30340;&#19982;&#24403;&#21069;&#20107;&#21153;&#32465;&#23450;&#30340; <tt class="interfacename">UnitOfWork</tt> 
      	&#65288;&#22914;&#26524;&#27809;&#26377;&#24403;&#21069;&#20107;&#21153;&#21017;&#36820;&#22238; <tt class="literal">null</tt>&#65289;&#12290;
      </p><p>&#19968;&#20010;&#30456;&#24212;&#30340;DAO&#23454;&#29616;&#31867;&#30475;&#19978;&#21435;&#23601;&#20687;&#19979;&#38754;&#37027;&#26679;:</p><pre class="programlisting">public class ProductDaoImpl implements ProductDao {

    private Session session;

    public void setSession(Session session) {
        this.session = session;
    }

    public Collection loadProductsByCategory(String category) {
        ReadAllQuery findOwnersQuery = new ReadAllQuery(Product.class);
        findOwnersQuery.addArgument("Category");
        ExpressionBuilder builder = this.findOwnersQuery.getExpressionBuilder();
        findOwnersQuery.setSelectionCriteria(
            builder.get("category").like(builder.getParameter("Category")));

        Vector args = new Vector();
        args.add(category);
        return session.getActiveSession().executeQuery(findOwnersQuery, args);
    }
}</pre><p>
      	&#19978;&#38754;&#25105;&#20204;&#25152;&#21015;&#20986;&#30340;DAO&#23436;&#20840;&#36981;&#24490;IoC&#65306;&#23427;&#22914;&#21516;&#20351;&#29992;Spring&#30340; <tt class="classname">TopLinkTemplate</tt> 
      	&#36827;&#34892;&#32534;&#30721;&#37027;&#26679;&#65292;&#38750;&#24120;&#36866;&#21512;&#22312;application context&#20013;&#36827;&#34892;&#37197;&#32622;&#12290;Spring&#30340; 
      	<tt class="literal">TransactionAwareSessionAdapter</tt> &#23558;&#26292;&#38706;&#19968;&#20010; 
      	<tt class="interfacename">Session</tt> &#31867;&#22411;&#30340;bean&#30340;&#24341;&#29992;&#65292;&#24182;&#20256;&#20837;&#21040;DAO&#20013;&#21435;&#65306;
      </p><pre class="programlisting">&lt;beans&gt;

  &lt;bean id="mySessionAdapter"
      class="org.springframework.orm.toplink.support.TransactionAwareSessionAdapter"&gt;
    &lt;property name="sessionFactory" ref="mySessionFactory"/&gt;
  &lt;/bean&gt;

  &lt;bean id="myProductDao" class="product.ProductDaoImpl"&gt;
    &lt;property name="session" ref="mySessionAdapter"/&gt;
  &lt;/bean&gt;

&lt;/beans&gt;</pre><p>
      	&#36825;&#31181;DAO&#39118;&#26684;&#30340;&#20027;&#35201;&#22909;&#22788;&#22312;&#20110;&#23427;&#20165;&#20165;&#20381;&#36182;&#20110;TopLink&#33258;&#36523;&#30340;API&#65292;&#32780;&#26080;&#38656;&#24341;&#20837;&#20219;&#20309;&#30340;Spring
      	&#30340;&#31867;&#12290;&#20174;&#26080;&#20837;&#20405;&#24615;&#30340;&#35282;&#24230;&#26469;&#30475;&#65292;&#36825;&#19968;&#28857;&#38750;&#24120;&#21560;&#24341;&#20154;&#12290;&#21516;&#26102;&#65292;&#23545;&#20110;TopLink&#30340;&#24320;&#21457;&#20154;&#21592;&#26469;&#35828;&#20063;&#26356;&#33258;&#28982;&#12290;
      </p><p>
      
      	&#28982;&#32780;&#65292;&#36825;&#26679;&#30340;DAO&#35775;&#38382;&#26041;&#24335;&#20250;&#25243;&#20986; <tt class="exceptionname">TopLinkException</tt>
      	&#65288;&#36825;&#26159;&#19968;&#20010;&#26080;&#38656;&#22768;&#26126;&#25110;&#25429;&#33719;&#30340;unchecked exception&#65289;&#65292;&#36825;&#24847;&#21619;&#30528;&#65292;DAO&#30340;&#35843;&#29992;&#32773;&#21482;&#33021;&#20197;&#26222;&#36890;&#30340;
      	&#38169;&#35823;&#26469;&#22788;&#29702;&#36825;&#20123;&#24322;&#24120;&#65292;&#38500;&#38750;&#23436;&#20840;&#20381;&#36182;TopLink&#33258;&#36523;&#30340;&#24322;&#24120;&#20307;&#31995;&#12290;&#22240;&#32780;&#65292;&#38500;&#38750;&#20320;&#23558;DAO&#30340;&#35843;&#29992;&#32773;&#32465;&#23450;
      	&#21040;&#20855;&#20307;&#30340;&#23454;&#29616;&#31574;&#30053;&#19978;&#21435;&#65292;&#21542;&#21017;&#20320;&#23558;&#26080;&#27861;&#25429;&#33719;&#29305;&#23450;&#30340;&#24322;&#24120;&#21407;&#22240;&#65288;&#35832;&#22914;&#20048;&#35266;&#38145;&#24322;&#24120;&#65289;&#12290;&#36825;&#31181;&#25240;&#20013;&#24179;&#34913;&#25110;&#35768;
      	&#21487;&#20197;&#34987;&#25509;&#21463;&#65292;&#22914;&#26524;&#20320;&#30340;&#24212;&#29992;&#23436;&#20840;&#22522;&#20110;TopLink&#25110;&#32773;&#26080;&#38656;&#36827;&#34892;&#29305;&#27530;&#30340;&#24322;&#24120;&#22788;&#29702;&#12290;
      </p><p>
      
      &#36825;&#26679;&#30340;DAO&#39118;&#26684;&#26377;&#19968;&#20010;&#19981;&#21033;&#22240;&#32032;&#22312;&#20110;TopLink&#30340;&#26631;&#20934;&#30340; <tt class="methodname">getActiveSession()</tt> 
      &#20989;&#25968;&#20165;&#20165;&#22312;JTA&#20107;&#21153;&#20013;&#26377;&#25928;&#12290;&#32780;&#23545;&#20110;&#20854;&#20182;&#30340;&#20107;&#21153;&#31649;&#29702;&#31574;&#30053;&#23588;&#20854;&#26102;&#26412;&#22320;&#30340;TopLink&#20107;&#21153;&#65292;&#23427;&#23558; <span class="emphasis"><em>&#26080;&#27861;</em></span> &#24037;&#20316;&#12290;
      </p><p>
      	&#24184;&#36816;&#30340;&#26159;&#65292;Spring&#30340; <tt class="literal">TransactionAwareSessionAdapter</tt> 
      	&#20026;TopLink&#30340; <tt class="literal">ServerSession</tt> &#26292;&#38706;&#20102;&#19968;&#20010;&#30456;&#24212;&#30340;&#20195;&#29702;&#31867;&#12290;
				&#36825;&#20010;&#20195;&#29702;&#31867;&#33021;&#22815;&#22312;&#20219;&#20309;&#30340;&#20107;&#21153;&#31574;&#30053;&#20043;&#19978;&#25903;&#25345;TopLink&#30340; <tt class="literal">Session.getActiveSession()</tt> 
				&#21644; <tt class="literal">Session.getActiveUnitOfWork()</tt> &#20989;&#25968;&#65292;&#36820;&#22238;&#24403;&#21069;&#25910;&#21040;Spring&#31649;&#29702;
				&#65288;&#21363;&#20415;&#30001; <tt class="literal">TopLinkTransactionManager</tt> &#31649;&#29702;&#65289;&#30340;&#20855;&#22791;&#20107;&#21153;&#31649;&#29702;&#21151;&#33021;&#30340; 
				<tt class="interfacename">Session</tt> &#23454;&#20363;&#12290;&#24403;&#28982;&#65292;&#36825;&#20010;&#20989;&#25968;&#30340;&#26631;&#20934;&#34892;&#20026;&#20381;&#28982;&#26377;&#25928;&#65306;
				&#36820;&#22238;&#19982;&#24403;&#21069;&#30340;JTA&#20107;&#21153;&#32465;&#23450;&#30340; <tt class="interfacename">Session</tt> &#23545;&#35937;&#12290;
				&#65288;&#26080;&#35770;&#36825;&#20010;JTA&#20107;&#21153;&#26159;&#30001;Spring&#30340; <tt class="classname">JtaTransactionManager</tt>&#12289;
				EJB CMT&#25110;&#32773;&#26222;&#36890;&#30340;JTA&#25152;&#39537;&#21160;&#30340;&#20107;&#21153;&#65289;&#12290;
      </p><p>
      	&#24635;&#20307;&#26469;&#35828;&#65292;DAO&#21487;&#20197;&#22522;&#20110;TopLink&#30340;&#21407;&#29983;API&#23454;&#29616;&#65292;&#21516;&#26102;&#65292;&#23427;&#20381;&#26087;&#38656;&#35201;&#33021;&#22815;&#21442;&#19982;&#21040;Spring&#30340;&#20107;&#21153;&#31649;&#29702;&#20013;&#12290;
				&#36825;&#23545;&#20110;&#37027;&#20123;&#24050;&#32463;&#23545;TopLink&#38750;&#24120;&#29087;&#24713;&#30340;&#20154;&#26469;&#35828;&#24456;&#26377;&#21560;&#24341;&#21147;&#65292;&#22240;&#20026;&#36825;&#31181;&#26041;&#24335;&#26356;&#21152;&#33258;&#28982;&#12290;&#19981;&#36807;&#65292;&#36825;&#31181;DAO&#23558;&#25243;&#20986; 
				<tt class="exceptionname">TopLinkException</tt>&#65292;&#22240;&#32780;&#65292;&#22914;&#26524;&#26377;&#24517;&#35201;&#30340;&#35805;&#38656;&#35201;&#26126;&#30830;&#22320;&#21435;&#20570;&#30001; 
				<tt class="exceptionname">TopLinkException</tt> &#21040;Spring&#30340; <tt class="classname">DataAccessException</tt> 
				&#30340;&#36716;&#21270;&#12290;
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="orm-toplink-tx"></a>12.4.4.&nbsp;&#20107;&#21153;&#31649;&#29702;</h3></div></div><div></div></div><p>&#23558;&#20107;&#21153;&#31649;&#29702;&#32435;&#20837;&#21040;Service&#25805;&#20316;&#30340;&#25191;&#34892;&#20013;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;Spring&#36890;&#29992;&#30340;&#22768;&#26126;&#24335;&#30340;&#20107;&#21153;&#31649;&#29702;&#21151;&#33021;&#65292;&#21442;&#21152;&#19979;&#38754;&#30340;&#20363;&#23376;&#65306;</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans
        xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:aop="http://www.springframework.org/schema/aop"
        xmlns:tx="http://www.springframework.org/schema/tx"
        xsi:schemaLocation="
   http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
   http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
   http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd"&gt;

  &lt;bean id="myTxManager" class="org.springframework.orm.toplink.TopLinkTransactionManager"&gt;
    &lt;property name="sessionFactory" ref="mySessionFactory"/&gt;
  &lt;/bean&gt;

  &lt;bean id="myProductService" class="product.ProductServiceImpl"&gt;
    &lt;property name="productDao" ref="myProductDao"/&gt;
  &lt;/bean&gt;
  
  &lt;aop:config&gt;
    &lt;aop:pointcut id="productServiceMethods" expression="execution(* product.ProductService.*(..))"/&gt;
    &lt;aop:advisor advice-ref="txAdvice" pointcut-ref="productServiceMethods"/&gt;
  &lt;/aop:config&gt;

  &lt;tx:advice id="txAdvice" transaction-manager="myTxManager"&gt;
    &lt;tx:attributes&gt;
      &lt;tx:method name="increasePrice*" propagation="REQUIRED"/&gt;
      &lt;tx:method name="someOtherBusinessMethod" propagation="REQUIRES_NEW"/&gt;
      &lt;tx:method name="*" propagation="SUPPORTS" read-only="true"/&gt;
    &lt;/tx:attributes&gt;
  &lt;/tx:advice&gt;

&lt;/beans&gt;</pre><p>
      	&#27880;&#24847;&#65292;TopLink&#35201;&#27714;&#20320;&#24517;&#39035;&#22312;&#19968;&#20010;&#27963;&#36291;&#30340; <tt class="interfacename">&#24037;&#20316;&#21333;&#20803;&#65288;UnitOfWork&#65289;</tt> 
      	&#20013;&#20462;&#25913;&#19968;&#20010;&#25345;&#20037;&#21270;&#23545;&#35937;&#65288;&#20320;&#36890;&#24120;&#19981;&#33021;&#20462;&#25913;&#30001;&#26222;&#36890;&#30340;TopLink&#30340; <tt class="interfacename">Session</tt> 
      	&#26597;&#35810;&#36820;&#22238;&#30340;&#23545;&#35937;&#65292;&#22240;&#20026;&#36825;&#20123;&#23545;&#35937;&#36890;&#24120;&#26159;&#19968;&#20123;&#20174;&#20108;&#32423;&#32531;&#23384;&#20013;&#35835;&#20986;&#30340;&#21482;&#35835;&#23545;&#35937;&#65289;&#12290;&#19982;Hibernate&#30456;&#27604;&#65292;
      	&#22312;TopLink&#20013;&#24182;&#27809;&#26377;&#19968;&#31181;&#31867;&#20284;&#33073;&#31163;&#20107;&#21153;&#21047;&#20986;&#65288;non-transactional flush&#65289;&#30340;&#27010;&#24565;&#12290;&#22522;&#20110;&#36825;
      	&#31181;&#21407;&#22240;&#65292;TopLink&#38656;&#35201;&#34987;&#24314;&#31435;&#22312;&#29305;&#23450;&#30340;&#29615;&#22659;&#20013;&#65292;&#23588;&#20854;&#26159;&#23427;&#38656;&#35201;&#20026;JTA&#21516;&#27493;&#20570;&#26126;&#30830;&#30340;&#21019;&#24314;&#65292;&#30001;&#27492;&#26469;
      	&#33258;&#34892;&#26816;&#27979;&#19968;&#20010;JTA&#20107;&#21153;&#20197;&#21450;&#26292;&#38706;&#19968;&#20010;&#30456;&#24212;&#30340;&#27963;&#36291;&#30340; <tt class="interfacename">Session</tt> 
      	&#21644; <tt class="interfacename">UnitOfWork</tt>&#12290;&#36825;&#19968;&#28857;&#23545;&#20110;&#26412;&#22320;&#20107;&#21153;&#19981;&#26159;&#24517;&#35201;&#30340;&#65292;&#30001;&#20110;&#23427;&#24050;&#32463;&#34987;
      	Spring&#30340; <tt class="literal">TopLinkTransactionManager</tt> &#22788;&#29702;&#65292;&#20294;&#26159;&#23545;&#20110;
      	&#38656;&#35201;&#21442;&#19982;&#21040;JTA&#20107;&#21153;&#20013;&#30340;&#24773;&#20917;&#65292;&#26159;&#24517;&#39035;&#30340;&#65288;&#26080;&#35770;&#26159;&#30001;Spring&#30340; 
      	<tt class="classname">JtaTransactionManager</tt>&#12289;EJB CMT&#25110;&#32773;&#26222;&#36890;&#30340;JTA&#25152;&#39537;&#21160;&#30340;&#20107;&#21153;&#65289;&#12290;
      </p><p>
      	&#22312;&#20320;&#30340;&#22522;&#20110;TopLink&#30340;DAO&#20195;&#30721;&#20013;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992; <tt class="literal">Session.getActiveUnitOfWork()</tt> 
      	&#26041;&#27861;&#26469;&#35775;&#38382;&#24403;&#21069;&#30340; <tt class="interfacename">UnitOfWork</tt> &#24182;&#36890;&#36807;&#23427;&#26469;&#25191;&#34892;&#20889;&#25805;&#20316;&#12290;&#36825;&#23558;&#21482;&#22312;&#19968;&#20010;&#27963;&#36291;&#30340;&#20107;&#21153;&#20013;&#26377;&#25928;
      	&#65288;&#22312;&#19968;&#20010;&#25910;&#21040;Spring&#31649;&#29702;&#30340;&#20107;&#21153;&#25110;&#32773;JTA&#20107;&#21153;&#20013;&#65289;&#12290;&#23545;&#20110;&#29305;&#27530;&#30340;&#38656;&#27714;&#65292;&#20320;&#21516;&#26679;&#21487;&#20197;&#33719;&#21462;&#21333;&#29420;&#30340; 
      	<tt class="interfacename">UnitOfWork</tt> &#23454;&#20363;&#65292;&#23427;&#23558;&#19981;&#21442;&#19982;&#21040;&#24403;&#21069;&#30340;&#20107;&#21153;&#20013;&#21435;&#65292;&#19981;&#36807;&#36825;&#31181;&#24773;&#20917;&#38750;&#24120;&#23569;&#12290;
      </p><p>
      	<tt class="classname">TopLinkTransactionManager</tt> &#33021;&#22815;&#23558;&#19968;&#20010;TopLink&#20107;&#21153;&#26292;&#38706;&#32473;
      	&#35775;&#38382;&#30456;&#21516;&#30340;JDBC <tt class="interfacename">DataSource</tt> &#30340;JDBC&#35775;&#38382;&#20195;&#30721;&#12290;
				&#21069;&#25552;&#26465;&#20214;&#26159;&#65292;TopLink&#22312;&#24213;&#23618;&#26159;&#20197;JDBC&#26041;&#24335;&#24037;&#20316;&#30340;&#24182;&#19988;&#33021;&#22815;&#26292;&#38706;&#24213;&#23618;&#30340;JDBC <tt class="interfacename">Connection</tt>&#12290;
				&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#29992;&#20110;&#26292;&#38706;&#20107;&#21153;&#30340; <tt class="interfacename">DataSource</tt> &#24517;&#39035;&#34987;&#26126;&#30830;&#25351;&#23450;&#65292;
				&#23427;&#26159;&#26080;&#27861;&#34987;&#33258;&#21160;&#26816;&#27979;&#21040;&#30340;&#12290;
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="orm-ibatis"></a>12.5.&nbsp;iBATIS SQL Maps</h2></div></div><div></div></div><p>
    
    &#22312;Spring&#26694;&#26550;&#20013;&#65292;iBatis&#30340;&#25903;&#25345;&#24456;&#31867;&#20284;JDBC&#25110;&#32773;Hibernate&#30340;&#25903;&#25345;&#65292;&#22240;&#20026;&#23427;&#21644;JDBC&#25110;Hibernate&#19968;&#26679;&#25903;&#25345;&#30456;&#21516;&#30340;&#27169;&#26495;&#24335;&#32534;&#31243;&#65292; 
    iBatis&#30340;&#25903;&#25345;&#33021;&#19982;Spring&#30340;&#24322;&#24120;&#20307;&#31995;&#19968;&#36215;&#24037;&#20316;&#24182;&#35753;&#20320;&#20139;&#29992;&#25152;&#26377;Spring&#30340;Ioc&#29305;&#28857;&#12290;
    </p><p>
    	&#20107;&#21153;&#31649;&#29702;&#21487;&#20197;&#30001;Spring&#26631;&#20934;&#26426;&#21046;&#36827;&#34892;&#22788;&#29702;&#12290;&#23545;&#20110;iBATIS&#26469;&#35828;&#27809;&#26377;&#29305;&#21035;&#30340;&#20107;&#21153;&#31574;&#30053;&#65292;&#38500;&#20102;JDBC 
    	<tt class="interfacename">Connection</tt> &#20197;&#22806;&#65292;&#20063;&#27809;&#26377;&#29305;&#21035;&#30340;&#20107;&#21153;&#36164;&#28304;&#12290;&#22240;&#27492;&#65292;Spring
    	&#26631;&#20934;&#30340;JDBC <tt class="classname">DataSourceTransactionManager</tt> &#25110;&#32773; <tt class="classname">
    	JtaTransactionManager</tt> &#24050;&#32463;&#33021;&#22815;&#23436;&#20840;&#36275;&#22815;&#20102;&#12290;
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>
      
      Spring&#30340;&#30830;&#25903;&#25345;iBatis&#30340;1.x&#21644;2.x.&#20294;&#26159;&#65292;&#21482;&#26377;iBatis 2.x&#30340;&#25903;&#25345;&#21253;&#21547;&#22312;&#26680;&#24515;Spring&#21457;&#24067;&#29256;&#26412;&#20013;&#12290;
			iBatis1.x&#30340;&#25903;&#25345;&#31867;&#34987;&#36716;&#31227;&#21040;Spring 2.0&#30340;Spring Modules project&#65292;&#20320;&#21487;&#20197;&#22312;&#37027;&#37324;&#25214;&#21040;&#25991;&#26723;&#25351;&#23548;&#12290;
      </p></td></tr></tbody></table></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="orm-ibatis-setup"></a>12.5.1.&nbsp;
      
      &#21019;&#24314;SqlMapClient
      </h3></div></div><div></div></div><p>
      
      &#22914;&#26524;&#25105;&#20204;&#24076;&#26395;&#20351;&#29992;iBATIS 2.x&#26469;&#26144;&#23556;&#21018;&#25165;&#30340;&#37027;&#20010;Account&#31867;&#65292;&#21017;&#38656;&#35201;&#21019;&#24314;&#36825;&#26679;&#19968;&#20010;SQL map <tt class="literal">Account.xml</tt>&#65306;
      </p><pre class="programlisting">&lt;sqlMap namespace="Account"&gt;

  &lt;resultMap id="result" class="examples.Account"&gt;
    &lt;result property="name" column="NAME" columnIndex="1"/&gt;
    &lt;result property="email" column="EMAIL" columnIndex="2"/&gt;
  &lt;/resultMap&gt;

  &lt;select id="getAccountByEmail" resultMap="result"&gt;
    select ACCOUNT.NAME, ACCOUNT.EMAIL
    from ACCOUNT
    where ACCOUNT.EMAIL = #value#
  &lt;/select&gt;

  &lt;insert id="insertAccount"&gt;
    insert into ACCOUNT (NAME, EMAIL) values (#name#, #email#)
  &lt;/insert&gt;

&lt;/sqlMap&gt;</pre><p>
      
      iBATIS2&#30340;&#37197;&#32622;&#25991;&#20214;&#30475;&#36215;&#26469;&#20687;&#36825;&#26679;&#65306;
      </p><pre class="programlisting">&lt;sqlMapConfig&gt;

  &lt;sqlMap resource="example/Account.xml"/&gt;

&lt;/sqlMapConfig&gt;</pre><p>
      
      &#35760;&#20303;iBATIS&#20174;CLASSPATH&#19979;&#21152;&#36733;&#36164;&#28304;&#65292;&#25152;&#20197;&#24517;&#39035;&#30830;&#20445; <tt class="literal">Account.xml</tt> &#22312;CLASSPATH&#19979;&#12290;
      </p><p>
      
      	&#25105;&#20204;&#21487;&#20197;&#20351;&#29992;Spring container&#20013;&#30340; <tt class="classname">SqlMapClientFactoryBean</tt>&#12290;
				&#27880;&#24847;iBATIS SQL Map 2.x&#20013;&#65292;JDBC <tt class="interfacename">DataSource</tt> &#36890;&#24120;&#30001; 
				<tt class="classname">SqlMapClientFactoryBean</tt> &#25351;&#23450;&#65292;&#24182;&#24320;&#21551;&#20102;&#24310;&#36831;&#21152;&#36733;&#12290;
      </p><pre class="programlisting">&lt;beans&gt;

  &lt;bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close"&gt;
    &lt;property name="driverClassName" value="${jdbc.driverClassName}"/&gt;
    &lt;property name="url" value="${jdbc.url}"/&gt;
    &lt;property name="username" value="${jdbc.username}"/&gt;
    &lt;property name="password" value="${jdbc.password}"/&gt;
  &lt;/bean&gt;

  &lt;bean id="sqlMapClient" class="org.springframework.orm.ibatis.SqlMapClientFactoryBean"&gt;
    &lt;property name="configLocation" value="WEB-INF/sqlmap-config.xml"/&gt;
    &lt;property name="dataSource" ref="dataSource"/&gt;
  &lt;/bean&gt;

&lt;/beans&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="orm-ibatis-template"></a>12.5.2.&nbsp;
      
      	&#20351;&#29992; <tt class="classname">SqlMapClientTemplate</tt> &#21644; <tt class="classname">SqlMapClientDaoSupport</tt>
      </h3></div></div><div></div></div><p>
      <tt class="classname">SqlMapClientDaoSupport</tt> &#25552;&#20379;&#20102;&#31867;&#20284; <tt class="classname">SqlMapDaoSupport</tt> &#30340;&#21151;&#33021;&#12290;&#25105;&#20204;&#21487;&#20197;&#32487;&#25215;&#23427;&#26469;&#23454;&#29616;&#25105;&#20204;&#33258;&#24049;&#30340;DAO&#65306;
      </p><pre class="programlisting">public class SqlMapAccountDao extends SqlMapClientDaoSupport implements AccountDao {

    public Account getAccount(String email) throws DataAccessException {
        return (Account) getSqlMapClientTemplate().queryForObject("getAccountByEmail", email);
    }

    public void insertAccount(Account account) throws DataAccessException {
        getSqlMapClientTemplate().update("insertAccount", account);
    }
}</pre><p>
      &#25105;&#20204;&#21487;&#20197;&#22312;application context&#20013;&#21019;&#24314;&#20102; <tt class="literal">SqlMapAccountDao</tt> 
      &#24182;&#19988;&#27880;&#20837; <tt class="literal">SqlMapClient</tt> &#23454;&#20363;&#65292;&#36825;&#26679;&#25105;&#20204;&#23601;&#21487;&#20197;&#22312;DAO&#20013;&#20351;&#29992;&#39044;&#20808;&#37197;&#32622;&#30340; 
      <tt class="classname">SqlMapClientTemplate</tt> &#26469;&#25191;&#34892;&#26597;&#35810;&#20102;&#65306;
      </p><pre class="programlisting">&lt;beans&gt;

  &lt;bean id="accountDao" class="example.SqlMapAccountDao"&gt;
    &lt;property name="sqlMapClient" ref="sqlMapClient"/&gt;
  &lt;/bean&gt;

&lt;/beans&gt;</pre><p>
      	&#27880;&#24847; <tt class="classname">SqlMapTemplate</tt> &#23454;&#20363;&#20063;&#21487;&#20197;&#25163;&#24037;&#21019;&#24314;&#65292;&#20351;&#29992; 
      	<tt class="literal">SqlMapClient</tt> &#20316;&#20026;&#26500;&#36896;&#20989;&#25968;&#21442;&#25968;&#12290;
      	<tt class="literal">SqlMapClientDaoSupport</tt> &#22522;&#31867;&#20026;&#25105;&#20204;&#39044;&#20808;&#21021;&#22987;&#21270;&#20102;&#19968;&#20010; 
      	<tt class="classname">SqlMapClientTemplate</tt> &#23454;&#20363;&#12290;
      </p><p>
      	<tt class="classname">SqlMapClientTemplate</tt> &#36824;&#25552;&#20379;&#20102;&#19968;&#20010;&#36890;&#29992;&#30340; 
      	<tt class="literal">execute</tt> &#26041;&#27861;&#65292;&#23558;&#29992;&#25143;&#33258;&#23450;&#20041;&#30340; <tt class="literal">SqlMapClientCallback</tt> 
      	&#30340;&#23454;&#29616;&#20316;&#20026;&#21442;&#25968;&#12290;&#20030;&#20363;&#26469;&#35828;&#65292;&#36825;&#21487;&#20197;&#23454;&#29616;&#25209;&#37327;&#25805;&#20316;&#65306;
      </p><pre class="programlisting">public class SqlMapAccountDao extends SqlMapClientDaoSupport implements AccountDao {

    public void insertAccount(Account account) throws DataAccessException {
        getSqlMapClientTemplate().execute(new SqlMapClientCallback() {
            public Object doInSqlMapClient(SqlMapExecutor executor) throws SQLException {
                executor.startBatch();
                executor.update("insertAccount", account);
                executor.update("insertAddress", account.getAddress());
                executor.executeBatch();
            }
        });
    }
}</pre><p>
      &#19968;&#33324;&#26469;&#35828;&#65292;&#20219;&#20309;&#30001; <tt class="literal">SqlMapExecutor</tt> API&#25552;&#20379;&#30340;&#25805;&#20316;&#32452;&#21512;&#37117;&#20197;&#36825;&#26679;&#30340;&#22238;&#35843;&#24418;&#24335;&#34987;&#20351;&#29992;&#12290;
			&#32780;&#22312;&#36825;&#20010;&#36807;&#31243;&#20013;&#20135;&#29983;&#30340;&#20219;&#20309; <tt class="literal">SQLException</tt> &#37117;&#23558;&#34987;&#33258;&#21160;&#22320;&#36716;&#21270;&#20026;Spring&#30340;&#36890;&#29992;&#30340; <tt class="classname">DataAccessException</tt> &#24322;&#24120;&#20307;&#31995;&#12290;
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="orm-ibatis-straight"></a>12.5.3.&nbsp;&#22522;&#20110;&#21407;&#29983;&#30340;iBATIS API&#30340;DAO&#23454;&#29616;</h3></div></div><div></div></div><p>
      	&#20320;&#20063;&#21487;&#20197;&#22522;&#20110;&#21407;&#29983;&#30340;iBATIS API&#26469;&#32534;&#31243;&#65292;&#32780;&#26080;&#38656;&#23545;Spring&#20135;&#29983;&#20219;&#20309;&#20381;&#36182;&#12290;&#30452;&#25509;&#20351;&#29992;&#27880;&#20837;&#30340; 
      	<tt class="literal">SqlMapClient</tt>&#12290;&#19968;&#20010;&#30456;&#24212;&#30340;DAO&#23454;&#29616;&#31867;&#30475;&#19978;&#21435;&#23601;&#20687;&#19979;&#38754;&#36825;&#26679;&#65306;
      </p><pre class="programlisting">public class SqlMapAccountDao implements AccountDao {
        
    private SqlMapClient sqlMapClient;
    
    public void setSqlMapClient(SqlMapClient sqlMapClient) {
        this.sqlMapClient = sqlMapClient;
    }

    public Account getAccount(String email) {
        try {
            return (Account) this.sqlMapClient.queryForObject("getAccountByEmail", email);
        }
        catch (SQLException ex) {
            throw new MyDaoException(ex);
        }
    }

    public void insertAccount(Account account) throws DataAccessException {
        try {
            this.sqlMapClient.update("insertAccount", account);
        }
        catch (SQLException ex) {
            throw new MyDaoException(ex);
        }
    }
}</pre><p>
      	&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#30001;iBATIS API&#25243;&#20986;&#30340; <tt class="literal">SQLException</tt> &#24322;&#24120;&#38656;&#35201;&#20197;
      	&#29992;&#25143;&#33258;&#23450;&#20041;&#30340;&#26041;&#24335;&#36827;&#34892;&#22788;&#29702;&#65306;&#36890;&#24120;&#23553;&#35013;&#25104;&#20026;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#33258;&#36523;&#30340;DAO&#24322;&#24120;&#12290;&#22312;application context
      	&#20013;&#36827;&#34892;&#30340;&#25972;&#21512;&#30475;&#19978;&#21435;&#20381;&#28982;&#20687;&#20197;&#21069;&#19968;&#26679;&#65292;&#36825;&#26159;&#30001;&#20110;&#22522;&#20110;&#21407;&#29983;&#30340;iBATIS&#30340;DAO&#20381;&#28982;&#36981;&#24490;IoC&#30340;&#27169;&#24335;&#65306;
      </p><pre class="programlisting">&lt;beans&gt;

  &lt;bean id="accountDao" class="example.SqlMapAccountDao"&gt;
    &lt;property name="sqlMapClient" ref="sqlMapClient"/&gt;
  &lt;/bean&gt;

&lt;/beans&gt;</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="orm-jpa"></a>12.6.&nbsp;JPA</h2></div></div><div></div></div><p>&#65288;<tt class="literal">org.springframework.orm.jpa</tt> &#21253;&#19979;&#30340;&#65289;Spring JPA&#20197;&#31867;&#20284;&#25972;&#21512;Hibernate&#25110;&#32773;JDO&#30340;&#26041;&#24335;&#65292;
		&#25552;&#20379;&#20102;&#23545; <a href="http://java.sun.com/developer/technicalArticles/J2EE/jpa/index.html" target="_top">Java Persistence API</a>
		&#30340;&#20840;&#38754;&#25903;&#25345;&#65292;&#21516;&#26102;&#20026;&#25552;&#20379;&#38468;&#21152;&#30340;&#29305;&#24615;&#65292;&#24517;&#39035;&#20102;&#35299;&#24213;&#23618;&#30340;&#23454;&#29616;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="orm-jpa-setup"></a>12.6.1.&nbsp;&#22312;Spring&#29615;&#22659;&#20013;&#24314;&#31435;JPA</h3></div></div><div></div></div><p>Spring JPA &#25552;&#20379;&#20102;&#19977;&#31181;&#26041;&#27861;&#21019;&#24314;JPA <tt class="interfacename">EntityManagerFactory</tt>&#65306;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="orm-jpa-setup-lemfb"></a>12.6.1.1.&nbsp;<tt class="classname">LocalEntityManagerFactoryBean</tt></h4></div></div><div></div></div><p>
			<tt class="classname">LocalEntityManagerFactoryBean</tt>&#36127;&#36131;&#21019;&#24314;&#19968;&#20010;&#36866;&#21512;&#20110;&#20165;&#20351;&#29992;JPA&#36827;&#34892;&#25968;&#25454;&#35775;&#38382;&#30340;&#29615;&#22659;&#30340;
					<tt class="interfacename">EntityManager</tt>&#12290;
			Factory bean&#23558;&#20351;&#29992;JPA <tt class="interfacename">PersistenceProvider</tt> &#31867;&#30340;&#33258;&#21160;&#26816;&#27979;&#26426;&#21046;&#65288;&#26681;&#25454;JPA&#30340;
			Java SE&#21551;&#21160;&#65289;&#65292;&#32780;&#22312;&#32477;&#22823;&#22810;&#25968;&#24773;&#20917;&#19979;&#65292;&#21482;&#38656;&#35201;&#25351;&#23450;persistence unit&#21517;&#31216;&#65306;</p><pre class="programlisting">&lt;beans&gt;

   &lt;bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalEntityManagerFactoryBean"&gt;
      &lt;property name="persistenceUnitName" value="myPersistenceUnit"/&gt;
   &lt;/bean&gt;

&lt;/beans&gt;</pre><p>&#36825;&#31181;JPA&#37096;&#32626;&#26041;&#24335;&#26368;&#20026;&#31616;&#21333;&#65292;&#20294;&#21364;&#26368;&#21463;&#38480;&#21046;&#12290;&#20363;&#22914;&#65292;&#19981;&#33021;&#36830;&#25509;&#21040;&#29616;&#26377;&#30340;JDBC<tt class="interfacename">DataSource</tt>&#65292;
        &#24182;&#19988;&#19981;&#25903;&#25345;&#20840;&#23616;&#20107;&#21153;&#12290;&#29978;&#33267;&#65292;&#25345;&#20037;&#21270;&#31867;&#30340;&#32455;&#20837;&#65288;&#23383;&#33410;&#30721;&#36716;&#25442;&#65289;&#20063;&#26159;&#29305;&#23450;&#20110;&#25552;&#20379;&#32773;&#30340;&#65292;&#32463;&#24120;&#38656;&#35201;&#22312;&#21551;&#21160;&#26102;&#25351;&#23450;&#19968;&#20010;&#29305;&#23450;&#30340;JVM&#20195;&#29702;&#12290;
        &#24635;&#20043;&#65292;&#36825;&#31181;&#26041;&#27861;&#23454;&#38469;&#19978;&#21482;&#36866;&#29992;&#20110;&#29420;&#31435;&#30340;&#24212;&#29992;&#31243;&#24207;&#21644;&#27979;&#35797;&#29615;&#22659;&#65288;&#36825;&#27491;&#26159;JPA&#35268;&#33539;&#35774;&#35745;&#23427;&#30340;&#21407;&#22240;&#65289;&#12290;</p><p><span class="emphasis"><em>&#20165;&#22312;&#31616;&#21333;&#37096;&#32626;&#29615;&#22659;&#20013;&#21482;&#20351;&#29992;&#36825;&#31181;&#26041;&#24335;&#65292;&#27604;&#22914;&#29420;&#31435;&#30340;&#24212;&#29992;&#31243;&#24207;&#21644;&#38598;&#25104;&#27979;&#35797;&#12290;</em></span></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="orm-jpa-setup-jndi"></a>12.6.1.2.&nbsp;&#20174;JNDI&#20013;&#33719;&#21462; <tt class="classname">EntityManagerFactory</tt> </h4></div></div><div></div></div><p>&#20174;JNDI&#33719;&#21462; <tt class="interfacename">EntityManagerFactory</tt> &#65288;&#20363;&#22914;&#22312;Java EE 5&#29615;&#22659;&#20013;&#65289;&#65292;&#20165;&#36890;&#36807;&#20462;&#25913;XML&#37197;&#32622;&#21363;&#21487;&#23454;&#29616;&#65306;</p><pre class="programlisting">&lt;beans&gt;

    &lt;jee:jndi-lookup id="entityManagerFactory" jndi-name="persistence/myPersistenceUnit"/&gt;

&lt;/beans&gt;</pre><p>&#22312;&#26631;&#20934;&#30340;Java EE 5&#21551;&#21160;&#36807;&#31243;&#20013;&#65292;Java EE&#26381;&#21153;&#22120;&#33258;&#21160;&#26816;&#27979;&#25345;&#20037;&#21270;&#21333;&#20803;&#65288;&#20363;&#22914;&#24212;&#29992;&#31243;&#24207;&#25991;&#20214;&#21253;&#20013;&#30340;<tt class="literal">META-INF/persistence.xml</tt>&#65289;
        &#65292;&#20197;&#21450;Java EE&#37096;&#32626;&#25551;&#36848;&#31526;&#20013;&#23450;&#20041;&#32473;&#37027;&#20123;&#25345;&#20037;&#21270;&#21333;&#20803;&#21629;&#21517;&#19978;&#19979;&#25991;&#20301;&#32622;&#30340;&#29615;&#22659;&#30340;<tt class="literal">persistence-unit-ref</tt>&#39033;&#65288;&#20363;&#22914;<tt class="literal">web.xml</tt>&#65289;&#12290;</p><p>&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#25972;&#20010;&#25345;&#20037;&#21270;&#21333;&#20803;&#37096;&#32626;&#65292;&#21253;&#25324;&#25345;&#20037;&#21270;&#31867;&#30340;&#32455;&#20837;&#65288;&#23383;&#30721;&#30721;&#36716;&#25442;&#65289;&#37117;&#21462;&#20915;&#20110;Java EE&#26381;&#21153;&#22120;&#12290;
        JDBC <tt class="interfacename">DataSource</tt> &#36890;&#36807;&#22312;<tt class="literal">META-INF/persistence.xml</tt>
        &#25991;&#20214;&#20013;&#30340;JNDI&#20301;&#32622;&#36827;&#34892;&#23450;&#20041;&#65307;EntityManager&#20107;&#21153;&#19982;&#26381;&#21153;&#22120;&#30340;JTA&#23376;&#31995;&#32479;&#25972;&#21512;&#12290;Spring&#20165;&#20165;&#29992;&#33719;&#24471;&#30340;<tt class="interfacename">EntityManagerFactory</tt>,
        &#36890;&#36807;&#20381;&#36182;&#27880;&#20837;&#23558;&#23427;&#20256;&#36882;&#32473;&#24212;&#29992;&#31243;&#24207;&#23545;&#35937;&#65292;&#24182;&#20026;&#23427;&#31649;&#29702;&#20107;&#21153;&#65288;&#19968;&#33324;&#36890;&#36807;<tt class="classname">JtaTransactionManager</tt>&#65289;&#12290;</p><p>&#27880;&#24847;&#65292;&#22914;&#26524;&#22312;&#21516;&#19968;&#20010;&#24212;&#29992;&#31243;&#24207;&#20013;&#20351;&#29992;&#20102;&#22810;&#20010;&#25345;&#20037;&#21270;&#21333;&#20803;&#65292;JNDI&#33719;&#21462;&#30340;&#36825;&#31181;&#25345;&#20037;&#21270;&#21333;&#20803;&#30340;bean&#21517;&#31216;
        &#24212;&#35813;&#19982;&#24212;&#29992;&#31243;&#24207;&#29992;&#26469;&#24341;&#29992;&#23427;&#20204;&#30340;&#25345;&#20037;&#21270;&#21333;&#20803;&#21517;&#31216;&#30456;&#31526;&#65288;&#20363;&#22914;<tt class="literal">@PersistenceUnit</tt>&#21644;
        <tt class="literal">@PersistenceContext&#27880;&#35299;&#65289;&#12290;</tt></p><p><span class="emphasis"><em>&#22312;&#37096;&#32626;&#21040;Java EE 5&#26381;&#21153;&#22120;&#26102;&#20351;&#29992;&#35813;&#26041;&#27861;&#12290;&#20851;&#20110;&#22914;&#20309;&#23558;&#33258;&#23450;&#20041;JPA&#25552;&#20379;&#32773;&#37096;&#32626;&#21040;&#26381;&#21153;&#22120;&#65292;&#20197;&#21450;&#20801;&#35768;&#20351;&#29992;&#26381;&#21153;&#22120;&#25552;&#20379;&#30340;&#32570;&#30465;&#25552;&#20379;&#32773;&#20043;&#22806;&#30340;JPA&#25552;&#20379;&#32773;&#65292;&#35831;&#26597;&#30475;&#26381;&#21153;&#22120;&#25991;&#26723;&#30340;&#30456;&#20851;&#35828;&#26126;&#12290;</em></span></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="orm-jpa-setup-lcemfb"></a>12.6.1.3.&nbsp;<tt class="classname">LocalContainerEntityManagerFactoryBean</tt></h4></div></div><div></div></div><p><tt class="classname">LocalContainerEntityManagerFactoryBean</tt> &#25552;&#20379;&#20102;&#23545;JPA <tt class="interfacename">EntityManagerFactory</tt> 
		&#30340;&#20840;&#38754;&#25511;&#21046;&#65292;&#38750;&#24120;&#36866;&#21512;&#37027;&#31181;&#38656;&#35201;&#32454;&#31890;&#24230;&#23450;&#21046;&#30340;&#29615;&#22659;&#12290;<tt class="classname">LocalContainerEntityManagerFactoryBean</tt> &#23558;&#22522;&#20110; 
		<tt class="literal">persistence.xml</tt> &#25991;&#20214;&#21019;&#24314; <tt class="interfacename">PersistenceUnitInfo</tt> &#31867;&#65292;&#24182;&#25552;&#20379; <tt class="literal">dataSourceLookup</tt> &#31574;&#30053;&#21644; <tt class="literal">loadTimeWeaver</tt>&#12290;
		&#22240;&#27492;&#23427;&#21487;&#20197;&#22312;JNDI&#20043;&#22806;&#30340;&#29992;&#25143;&#23450;&#20041;&#30340;&#25968;&#25454;&#28304;&#20043;&#19978;&#24037;&#20316;&#65292;&#24182;&#25511;&#21046;&#32455;&#20837;&#27969;&#31243;&#12290;</p><pre class="programlisting">&lt;beans&gt;
        
 &lt;bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"&gt;
  &lt;property name="dataSource" ref="someDataSource"/&gt;
  &lt;property name="loadTimeWeaver"&gt;
    &lt;bean class="org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver"/&gt;
  &lt;/property&gt;
 &lt;/bean&gt;
 
&lt;/beans&gt;</pre><p>&#36825;&#26159;&#26368;&#20026;&#24378;&#22823;&#30340;JPA&#37197;&#32622;&#26041;&#24335;&#65292;&#20801;&#35768;&#22312;&#24212;&#29992;&#31243;&#24207;&#20013;&#28789;&#27963;&#36827;&#34892;&#26412;&#22320;&#37197;&#32622;&#12290;&#23427;&#25903;&#25345;&#36830;&#25509;&#29616;&#26377;JDBC <tt class="interfacename">DataSource</tt> &#65292;
        &#25903;&#25345;&#26412;&#22320;&#20107;&#21153;&#21644;&#20840;&#23616;&#20107;&#21153;&#31561;&#31561;&#12290;&#28982;&#32780;&#65292;&#23427;&#20063;&#23558;&#38656;&#27714;&#24378;&#21152;&#21040;&#20102;&#36816;&#34892;&#26102;&#29615;&#22659;&#20013;&#65292;&#20363;&#22914;&#65292;&#22914;&#26524;&#25345;&#20037;&#21270;&#25552;&#20379;&#32773;&#38656;&#35201;&#23383;&#33410;&#30721;&#36716;&#25442;&#65292;&#21017;&#24517;&#39035;&#26377;&#32455;&#20837;ClassLoader&#30340;&#33021;&#21147;&#12290;</p><p>&#27880;&#24847;&#65292;&#36825;&#20010;&#36873;&#39033;&#21487;&#33021;&#19982;Java EE 5&#26381;&#21153;&#22120;&#20869;&#24314;&#30340;JPA&#21151;&#33021;&#30456;&#20914;&#31361;&#12290;&#22240;&#27492;&#65292;&#24403;&#36816;&#34892;&#22312;&#23436;&#20840;Java EE 5&#29615;&#22659;&#20013;&#26102;&#65292;
        &#35201;&#32771;&#34385;&#20174;JNDI&#33719;&#21462;<tt class="interfacename">EntityManagerFactory</tt>&#12290;&#21478;&#19968;&#31181;&#21487;&#20197;&#26367;&#20195;&#30340;&#26041;&#27861;&#26159;&#65292;&#22312;
        <tt class="classname">LocalContainerEntityManagerFactoryBean</tt>&#23450;&#20041;&#20013;&#36890;&#36807;&#8220;persistenceXmlLocation&#8221;&#25351;&#23450;&#30456;&#20851;&#20301;&#32622;&#65292;
        &#20363;&#22914;&#8220;META-INF/my-persistence.xml&#8221;&#65292;&#24182;&#19988;&#21482;&#23558;&#21253;&#21547;&#35813;&#21517;&#31216;&#30340;&#25551;&#36848;&#31526;&#25918;&#22312;&#24212;&#29992;&#31243;&#24207;&#21253;&#25991;&#20214;&#20013;&#12290;&#22240;&#20026;Java EE 5&#26381;&#21153;&#22120;&#23558;&#21482;
        &#26597;&#25214;&#40664;&#35748;&#30340;<tt class="literal">META-INF/persistence.xml</tt>&#25991;&#20214;&#65292;&#23427;&#20250;&#24573;&#30053;&#36825;&#31181;&#23450;&#21046;&#30340;&#25345;&#20037;&#21270;&#21333;&#20803;&#65292;&#22240;&#32780;&#36991;&#20813;&#19982;&#21069;&#38754;Spring
        &#39537;&#21160;&#30340;JPA&#37197;&#32622;&#20914;&#31361;&#12290;&#65288;&#20363;&#22914;&#65292;&#36866;&#29992;&#20110;Rdsin 3.1&#65289;&#12290;</p><p><span class="emphasis"><em>&#22312;&#22522;&#20110;Spring&#30340;&#24212;&#29992;&#31243;&#24207;&#29615;&#22659;&#20013;&#20351;&#29992;&#35813;&#26041;&#24335;&#21487;&#33719;&#24471;&#20840;&#37096;JPA&#21151;&#33021;&#12290;&#36825;&#21253;&#25324;web&#23481;&#22120;&#65292;&#22914;Tomcat&#65292;
        &#20197;&#21450;&#29420;&#31435;&#30340;&#24212;&#29992;&#31243;&#24207;&#21644;&#21253;&#21547;&#22797;&#26434;&#25345;&#20037;&#21270;&#38656;&#27714;&#30340;&#38598;&#25104;&#27979;&#35797;&#12290;</em></span></p><div class="sidebar"><p class="title"><b>&#20309;&#26102;&#38656;&#35201;&#21152;&#36733;&#26102;&#32455;&#20837;&#65311;</b></p><p>&#24182;&#38750;&#25152;&#26377;&#30340;JPA&#25552;&#20379;&#32773;&#37117;&#38656;&#35201;JVM&#20195;&#29702;(Hibernate&#23601;&#26159;&#19968;&#20010;&#20363;&#23376;)&#12290;
          &#22914;&#26524;&#20320;&#30340;&#25552;&#20379;&#32773;&#19981;&#38656;&#35201;&#20195;&#29702;(agent)&#25110;&#32773;&#20320;&#26377;&#20854;&#20182;&#36873;&#25321;(&#20363;&#22914;&#36890;&#36807;&#33258;&#23450;&#20041;&#32534;&#35793;&#22120;&#25110;&#32773;ant&#20219;&#21153;&#22312;&#26500;&#24314;&#26102;&#36827;&#34892;&#22686;&#24378;)&#65292;&#37027;&#20040;&#23601;<span class="bold"><b>&#19981;&#24212;&#35813;</b></span>&#20351;&#29992;&#21152;&#36733;&#26102;&#32455;&#20837;&#12290;</p></div><p><tt class="interfacename">LoadTimeWeaver</tt> &#25509;&#21475;&#30001;Spring&#25552;&#20379;&#65292;&#20801;&#35768;JPA <tt class="interfacename">ClassTransformer</tt> &#23454;&#20363;
		&#33021;&#22815;&#26681;&#25454;&#29615;&#22659;&#65288;web&#23481;&#22120;/&#24212;&#29992;&#26381;&#21153;&#22120;&#65289;&#20197;&#29305;&#23450;&#30340;&#26041;&#24335;&#25554;&#20837;&#12290;
		&#36890;&#36807;Java 5 <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/instrument/package-summary.html" target="_top">&#20195;&#29702;</a>&#25346;&#38057;
		<tt class="literal">ClassTransformers</tt>&#32463;&#24120;&#26159;&#26080;&#25928;&#30340; &#8212;&#8212; &#20195;&#29702;&#36890;&#24120;&#22312; <span class="emphasis"><em>&#25972;&#20010;&#34394;&#25311;&#26426;</em></span> &#29615;&#22659;&#19979;&#24037;&#20316;&#65292;&#24182;&#19988;&#30417;&#25511;
		<span class="emphasis"><em>&#27599;&#19968;&#20010;</em></span> &#34987;&#21152;&#36733;&#30340;&#31867; &#8212;&#8212; &#36825;&#22312;&#29983;&#20135;&#29615;&#22659;&#19979;&#19968;&#33324;&#26159;&#19981;&#25552;&#20513;&#30340;&#12290;</p><p>Spring&#25552;&#20379;&#20102;&#22823;&#37327;&#29992;&#20110;&#19981;&#21516;&#29615;&#22659;&#30340; <tt class="interfacename">LoadTimeWeaver</tt> &#23454;&#29616;&#31867;&#65292;
		&#20801;&#35768; <tt class="interfacename">ClassTransformer</tt> &#23454;&#20363;&#33021;&#22815;&#20165;&#29992;&#20110;<span class="emphasis"><em>&#27599;&#20010;classloader</em></span> &#65292;&#32780;&#19981;&#26159;&#27599;&#20010;&#34394;&#25311;&#26426;&#12290;</p><p>&#25509;&#19979;&#26469;&#30340;&#19968;&#33410;&#23558;&#35752;&#35770;&#22312;Tomcat&#20197;&#21450;&#20351;&#29992;Spring&#30340;VM&#20195;&#29702;&#24773;&#20917;&#19979;&#30340;&#20856;&#22411;JPA&#32455;&#20837;&#37197;&#32622;&#12290;&#20851;&#20110;&#35774;&#32622;&#24120;&#29992;&#21152;&#36733;&#26102;&#32455;&#20837;&#30340;&#35814;&#32454;&#20869;&#23481;&#65292;
        &#35831;&#21442;&#35265;AOP&#19968;&#31456;&#20013;&#30340;<a href="#aop-aj-ltw-spring" title="6.8.4.5.&nbsp;Spring&#37197;&#32622;">Section&nbsp;6.8.4.5, &#8220;Spring&#37197;&#32622;&#8221;</a>&#19968;&#33410;&#65292;&#23427;&#28085;&#30422;&#20102;Tomcat&#12289;VM&#20195;&#29702;&#20197;&#21450;WebLogic&#12289;OC4J&#12289;GlassFish&#21644;Resin&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="orm-jpa-setup-lcemfb-tomcat"></a>12.6.1.3.1.&nbsp;Tomcat&#65288;5.0&#20197;&#19978;&#65289;&#21152;&#36733;&#26102;&#30340;&#32455;&#20837;&#37197;&#32622;</h5></div></div><div></div></div><p><a href="http://tomcat.apache.org/" target="_top">Apache Tomcat</a> &#32570;&#30465;&#30340;ClassLoader&#65288;&#31867;&#35013;&#36733;&#22120;&#65289;&#24182;&#19981;&#25903;&#25345;&#31867;&#30340;&#20999;&#25442;&#65292;
		  &#20294;&#26159;&#23427;&#20801;&#35768;&#20351;&#29992;&#29992;&#25143;&#33258;&#23450;&#20041;&#30340;&#31867;&#35013;&#36733;&#22120;&#12290;Spring&#25552;&#20379;&#20102; <tt class="classname">TomcatInstrumentableClassLoader</tt> &#31867;
		  &#65288;&#22312;<tt class="literal">org.springframework.instrument.classloading.tomcat</tt> &#21253;&#20013;&#65289;&#65292;&#36825;&#20010;&#31867;&#32487;&#25215;&#33258;Tomcat&#30340;&#31867;&#35013;&#36733;&#22120;
		  &#65288;<tt class="classname">WebappClassLoader</tt>&#65289;&#24182;&#19988;&#20801;&#35768;JPA <tt class="classname">ClassTransformer</tt> &#30340;&#23454;&#20363;&#26469;&#8220;&#22686;&#24378;&#8221;&#25152;&#26377;&#30001;&#23427;&#21152;&#36733;&#30340;&#31867;&#12290;
		&#31616;&#21333;&#35828;&#65292;JPA&#36716;&#21270;&#22120;&#65288;JPA transformer&#65289;&#20165;&#20165;&#22312;&#65288;&#20351;&#29992; <tt class="classname">TomcatInstrumentableClassLoader</tt> &#30340;&#65289;&#29305;&#23450;web&#24212;&#29992;&#31243;&#24207;&#20013;&#25165;&#33021;&#34987;&#20351;&#29992;&#12290;</p><p>&#20026;&#20351;&#29992;&#29992;&#25143;&#33258;&#23450;&#20041;&#30340;&#31867;&#35013;&#36733;&#22120;&#65306;</p><div class="itemizedlist"><div class="orderedlist"><ol type="1"><li><p>&#23558; <tt class="literal">spring-tomcat-weaver.jar</tt> &#22797;&#21046;&#21040; <span class="emphasis"><em>$CATALINA_HOME</em></span>/server/lib &#19979;
				&#65288;&#20854;&#20013;<span class="emphasis"><em>$CATALINA_HOME</em></span> &#34920;&#31034;Tomcat&#30340;&#23433;&#35013;&#36335;&#24452;&#65289;&#12290;</p></li><li><p>&#36890;&#36807;&#20462;&#25913;web application context&#20351;Tomcat&#20351;&#29992;&#29992;&#25143;&#33258;&#23450;&#20041;&#30340;&#31867;&#35013;&#36733;&#22120;&#65288;&#32780;&#19981;&#26159;&#40664;&#35748;&#30340;&#31867;&#35013;&#36733;&#22120;&#65289;&#65306;</p><pre class="programlisting">&lt;Context path="/myWebApp" docBase="/my/webApp/location"&gt;
    &lt;Loader loaderClass="org.springframework.instrument.classloading.tomcat.TomcatInstrumentableClassLoader"/&gt;
&lt;/Context&gt;</pre><p>Tomcat 5.0.x &#21644; 5.5.x &#31995;&#21015;&#25903;&#25345;&#22810;&#20010;&#19978;&#19979;&#25991;&#36335;&#24452;&#65288;context locations&#65289;&#65306;
							&#26381;&#21153;&#22120;&#37197;&#32622;&#25991;&#20214;(<span class="emphasis"><em>$CATALINA_HOME/conf/server.xml</em></span>)&#65292;
							&#40664;&#35748;&#30340;&#19978;&#19979;&#25991;&#37197;&#32622;&#65288;<span class="emphasis"><em>$CATALINA_HOME/conf/context.xml</em></span>&#65289;&#20250;&#24433;&#21709;&#25152;&#26377;&#34987;&#37096;&#32626;&#30340;web&#24212;&#29992;&#31243;&#24207;&#12289;
							&#21333;&#29420;&#37096;&#32626;&#22312;Server&#31471;&#30340;web&#24212;&#29992;&#31243;&#24207;&#30340;&#37197;&#32622;<span class="emphasis"><em>&#65288;$CATALINA_HOME/conf/[enginename]/[hostname]/my-webapp-context.xml</em></span>&#65289;
							&#25110;&#32773;&#19982;web&#24212;&#29992;&#31243;&#24207;&#19968;&#36215;&#65288;<span class="emphasis"><em>your-webapp.war/META-INF/context.xml</em></span>&#65289;&#12290;&#20174;&#25928;&#29575;&#30340;&#35282;&#24230;&#35828;&#65292;
							&#25105;&#20204;&#25512;&#33616;&#22312;web-app&#30340;&#20869;&#37096;&#37197;&#32622;&#30340;&#26041;&#24335;&#65292;&#22240;&#20026;&#20165;&#20165;&#20351;&#29992;JPA&#30340;&#24212;&#29992;&#31243;&#24207;&#20250;&#20351;&#29992;&#29992;&#25143;&#33258;&#23450;&#20041;&#30340;&#31867;&#35013;&#36733;&#22120;&#12290;
							&#26356;&#22810;&#20855;&#20307;&#26377;&#20851;&#21487;&#29992;&#30340;&#19978;&#19979;&#25991;&#36335;&#24452;&#30340;&#20869;&#23481;&#35831;&#21442;&#35265;Tomcat 5.x&#30340;<a href="http://tomcat.apache.org/tomcat-5.5-doc/config/context.html" target="_top">&#25991;&#26723;</a>&#12290;</p><p>&#27880;&#24847;&#65292;5.5.20&#20043;&#21069;&#30340;&#29256;&#26412;&#26377;&#19968;&#20010;XML&#37197;&#32622;&#35299;&#26512;&#30340;bug&#65292;&#36896;&#25104;<span class="emphasis"><em> server.xml </em></span>
							&#20013;&#26080;&#27861;&#20351;&#29992;<tt class="literal">Loader</tt>&#26631;&#31614;&#65292;&#26080;&#35770;&#26159;&#21542;&#25351;&#23450;&#20102;classloader&#65292;&#20063;&#19981;&#31649;&#36825;&#20010;classloader&#26159;&#23448;&#26041;&#30340;&#36824;&#26159;&#33258;&#23450;&#20041;&#30340;&#12290;</p>

&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<p>&#22914;&#26524;&#20320;&#27491;&#22312;&#20351;&#29992;&#30340;&#26159;Tomcat 5.5.20&#20197;&#19978;&#30340;&#29256;&#26412;&#65292;&#23601;&#21487;&#20197;&#23558;<span class="emphasis"><em>useSystemClassLoaderAsParent</em></span>&#35774;&#32622;&#25104;
&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;<tt class="literal">false</tt>&#26469;&#35299;&#20915;&#36825;&#20010;&#38382;&#39064;&#65306;</p><pre class="programlisting">&lt;Context path="/myWebApp" docBase="/my/webApp/location"&gt;
    &lt;Loader loaderClass="org.springframework.instrument.classloading.tomcat.TomcatInstrumentableClassLoader"
            useSystemClassLoaderAsParent="false"/&gt;
&lt;/Context&gt;</pre></li></ol></div><div class="orderedlist"><ol type="1"><li><p>&#23558;<tt class="literal">spring-tomcat-weaver.jar</tt>&#22797;&#21046;&#21040;<span class="emphasis"><em>$CATALINA_HOME</em></span>/lib (where
                <span class="emphasis"><em>$CATALINA_HOME</em></span>&#34920;&#31034;Tomcat&#23433;&#35013;&#26681;&#30446;&#24405;&#30340;&#20301;&#32622;&#65289;&#12290;</p></li><li><p>&#36890;&#36807;&#32534;&#36753;web&#24212;&#29992;&#31243;&#24207;&#19978;&#19979;&#25991;&#25991;&#20214;&#65292;&#20351;Tomcat&#20351;&#29992;&#33258;&#23450;&#20041;&#30340;ClassLoader&#65288;&#32780;&#19981;&#26159;&#40664;&#35748;&#30340;ClassLoader&#65289;&#65306;</p><pre class="programlisting">&lt;Context path="/myWebApp" docBase="/my/webApp/location"&gt;
    &lt;Loader loaderClass="org.springframework.instrument.classloading.tomcat.TomcatInstrumentableClassLoader"/&gt;
&lt;/Context&gt;</pre><p>Tomcat 6.0.x (&#31867;&#20284;&#20110;5.0.x/5.5.x)&#31995;&#21015;&#25903;&#25345;&#20960;&#31181;&#19978;&#19979;&#25991;&#36335;&#24452;&#65306;&#65288;context locations&#65289;&#65306;
							&#26381;&#21153;&#22120;&#37197;&#32622;&#25991;&#20214;(<span class="emphasis"><em>$CATALINA_HOME/conf/server.xml</em></span>)&#65292;
							&#40664;&#35748;&#30340;&#19978;&#19979;&#25991;&#37197;&#32622;&#65288;<span class="emphasis"><em>$CATALINA_HOME/conf/context.xml</em></span>&#65289;&#20250;&#24433;&#21709;&#25152;&#26377;&#34987;&#37096;&#32626;&#30340;web&#24212;&#29992;&#31243;&#24207;&#12289;
							&#21333;&#29420;&#37096;&#32626;&#22312;Server&#31471;&#30340;web&#24212;&#29992;&#31243;&#24207;&#30340;&#37197;&#32622;<span class="emphasis"><em>&#65288;$CATALINA_HOME/conf/[enginename]/[hostname]/my-webapp-context.xml</em></span>&#65289;
							&#25110;&#32773;&#19982;web&#24212;&#29992;&#31243;&#24207;&#19968;&#36215;&#65288;<span class="emphasis"><em>your-webapp.war/META-INF/context.xml</em></span>&#65289;&#12290;&#20174;&#25928;&#29575;&#30340;&#35282;&#24230;&#35828;&#65292;
							&#25105;&#20204;&#25512;&#33616;&#22312;web-app&#30340;&#20869;&#37096;&#37197;&#32622;&#30340;&#26041;&#24335;&#65292;&#22240;&#20026;&#20165;&#20165;&#20351;&#29992;JPA&#30340;&#24212;&#29992;&#31243;&#24207;&#20250;&#20351;&#29992;&#29992;&#25143;&#33258;&#23450;&#20041;&#30340;&#31867;&#35013;&#36733;&#22120;&#12290;
							&#26356;&#22810;&#20855;&#20307;&#26377;&#20851;&#21487;&#29992;&#30340;&#19978;&#19979;&#25991;&#36335;&#24452;&#30340;&#20869;&#23481;&#35831;&#21442;&#35265;Tomcat 5.x <a href="http://tomcat.apache.org/tomcat-6.0-doc/config/context.html" target="_top">documentation</a>&#12290;</p></li></ol></div><ul type="disc"><li><p>Tomcat 5.0.x/5.5.x</p></li><li><p>Tomcat 6.0.x</p></li></ul></div><p>&#25152;&#26377;Tomcat&#29256;&#26412;&#25152;&#38656;&#30340;&#26368;&#21518;&#19968;&#27493;&#65292;&#26159;&#22312;&#37197;&#32622;<tt class="classname">LocalContainerEntityManagerFactoryBean</tt>&#30340;&#26102;&#65292;&#20351;&#29992;
          &#30456;&#24212;&#30340;<tt class="interfacename">LoadTimeWeaver</tt>&#65306;</p><pre class="programlisting">&lt;bean id="emf" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"&gt;
  &lt;property name="loadTimeWeaver"&gt;
    &lt;bean class="org.springframework.instrument.classloading.ReflectiveLoadTimeWeaver"/&gt;
  &lt;/property&gt;
&lt;/bean&gt;</pre><p>&#21033;&#29992;&#36825;&#31181;&#26041;&#27861;&#65292;&#20381;&#36182;&#24037;&#20855;&#30340;JPA&#24212;&#29992;&#31243;&#24207;&#26080;&#38656;&#20195;&#29702;&#23601;&#21487;&#20197;&#22312;Tomcat&#19978;&#36816;&#34892;&#12290;&#36825;&#22312;&#23487;&#20027;&#24212;&#29992;&#31243;&#24207;&#20381;&#36182;&#19981;&#21516;&#30340;JPA&#23454;&#29616;&#26102;&#23588;&#20026;&#37325;&#35201;&#65292;
          &#22240;&#20026;JPA&#36716;&#21270;&#22120;&#21482;&#36866;&#29992;&#20110;ClassLoader&#32423;&#21035;&#65292;&#23427;&#20204;&#20043;&#38388;&#26159;&#24444;&#27492;&#38548;&#31163;&#30340;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#22914;&#26524;Tomcat&#20351;&#29992;TopLink&#20316;&#20026;JPA&#25552;&#20379;&#32773;&#65292;&#35831;&#23558;&#26680;&#24515;&#30340;toplink jar&#21253;&#25918;&#22312;<span class="emphasis"><em>$CATALINA_HOME</em></span>/shared/lib&#25991;&#20214;&#22841;&#20013;&#65292;&#32780;&#19981;&#20877;&#25918;&#21040;war&#20013;&#12290;</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="orm-jpa-setup-lcemfb-agent"></a>12.6.1.3.2.&nbsp;&#20351;&#29992;VM&#20195;&#29702;&#30340;&#20840;&#23616;&#21152;&#36733;&#26102;&#32455;&#20837;</h5></div></div><div></div></div><p>&#23545;&#20110;&#38656;&#35201;&#31867;&#24037;&#20855;&#65292;&#21516;&#26102;&#29616;&#26377;&#30340;LoadTimeWeaver&#23454;&#29616;&#19981;&#25552;&#20379;&#36825;&#31181;&#25903;&#25345;&#30340;&#29615;&#22659;&#65292;JDK&#20195;&#29702;&#26159;&#21807;&#19968;&#30340;&#35299;&#20915;&#26041;&#26696;&#12290;&#23545;&#20110;&#36825;&#31181;&#24773;&#20917;&#65292;Spring&#25552;&#20379;&#20102;
          &#38656;&#35201;&#29305;&#23450;&#20110;Spring&#65288;&#20294;&#38750;&#24120;&#24120;&#29992;&#65289;&#30340;VM&#20195;&#29702;&#65288;<tt class="filename">spring-agent.jar</tt>&#65289;&#30340;<tt class="classname">InstrumentationLoadTimeWeaver</tt>&#65306;</p><pre class="programlisting">&lt;bean id="emf" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"&gt;
  &lt;property name="loadTimeWeaver"&gt;
    &lt;bean class="org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver"/&gt;
  &lt;/property&gt;
&lt;/bean&gt;</pre><p>&#35831;&#27880;&#24847;&#22312;&#21551;&#21160;&#34394;&#25311;&#26426;&#26102;&#65292;&#21516;&#26102;&#21551;&#21160;Spring&#20195;&#29702;&#65292;&#26041;&#27861;&#26159;&#25552;&#20379;&#19979;&#21015;JVM&#36873;&#39033;&#65306;</p><pre class="programlisting">-javaagent:/path/to/spring-agent.jar</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="orm-jpa-setup-lcemfb-weaver"></a>12.6.1.3.3.&nbsp;&#19978;&#19979;&#25991;&#33539;&#22260;&#20869;&#30340;&#21152;&#36733;&#26102;&#32455;&#20837;&#37197;&#32622;</h5></div></div><div></div></div><p>&#33258;Spring 2.5&#65292;&#21487;&#20197;&#20351;&#29992;<tt class="literal">context:load-time-weaver</tt>&#20803;&#32032;&#26469;&#37197;&#32622;
          &#19978;&#19979;&#25991;&#33539;&#22260;&#30340;<tt class="interfacename">LoadTimeWeaver</tt>&#20102;&#12290;&#36825;&#31181;&#8220;&#20840;&#23616;&#8221;&#32455;&#20837;&#22120;&#30001;&#25152;&#26377;JPA
          <tt class="classname">LocalContainerEntityManagerFactoryBeans</tt>&#33258;&#21160;&#25315;&#36873;&#12290;</p><p>&#36825;&#26159;&#37197;&#32622;&#21152;&#36733;&#26102;&#32455;&#20837;&#22120;&#30340;&#25512;&#33616;&#26041;&#27861;&#65292;&#25552;&#20379;&#24179;&#21488;&#65288;ebLogic, OC4J, GlassFish, Tomcat, Resin, VM agent&#65289;&#30340;&#33258;&#21160;&#26816;&#27979;&#65292;&#20197;&#21450;&#32455;&#20837;&#22120;&#21040;&#25152;&#26377;&#32455;&#20837;&#22120;&#30693;&#36947;&#30340;bean&#30340;&#33258;&#21160;&#20256;&#25773;&#12290;</p><pre class="programlisting">&lt;context:load-time-weaver/&gt;

&lt;bean id="emf" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"&gt;
    ...
&lt;/bean&gt;</pre><p>&#20851;&#20110;&#22914;&#20309;&#24314;&#31435;&#24120;&#29992;&#21152;&#36733;&#26102;&#32455;&#20837;&#30340;&#35814;&#32454;&#20869;&#23481;&#65292;&#35831;&#21442;&#35265;<a href="#aop-aj-ltw-spring" title="6.8.4.5.&nbsp;Spring&#37197;&#32622;">Section&nbsp;6.8.4.5, &#8220;Spring&#37197;&#32622;&#8221;</a>&#19968;&#33410;&#65292;&#23427;&#28085;&#30422;&#20102;
          Tomcat&#12289;VM&#20195;&#29702;&#65292;&#20197;&#21450;WebLogic, OC4J, GlassFish&#21644;Resin&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="orm-jpa-multiple-pu"></a>12.6.1.4.&nbsp;&#22788;&#29702;&#22810;&#25345;&#20037;&#21270;&#21333;&#20803;</h4></div></div><div></div></div><p>&#23545;&#20110;&#37027;&#20123;&#20381;&#38752;&#22810;&#20010;&#25345;&#20037;&#21270;&#21333;&#20803;&#20301;&#32622;(&#20363;&#22914;&#23384;&#25918;&#22312;classpath&#20013;&#30340;&#22810;&#20010;jar&#20013;)&#30340;&#24212;&#29992;&#31243;&#24207;&#65292;
        Spring&#25552;&#20379;&#20102;&#20316;&#20026;&#20013;&#22830;&#20179;&#24211;&#30340;<tt class="literal">PersistenceUnitManager</tt>&#65292;
        &#36991;&#20813;&#20102;&#25345;&#20037;&#21270;&#21333;&#20803;&#26597;&#25214;&#36807;&#31243;(&#30340;&#28508;&#22312;&#24320;&#38144;)&#12290;&#32570;&#30465;&#23454;&#29616;&#20801;&#35768;&#25351;&#23450;&#22810;&#20010;&#20301;&#32622;
        (&#40664;&#35748;&#24773;&#20917;&#19979;classpath&#20250;&#25628;&#32034;META-INF/persistence.xml&#25991;&#20214;)&#65292;&#23427;&#20204;&#20250;&#34987;&#35299;&#26512;&#28982;&#21518;&#36890;&#36807;&#25345;&#20037;&#21270;&#21333;&#20803;&#21517;&#31216;&#34987;&#33719;&#21462;&#65306;</p><pre class="programlisting">&lt;bean id="pum" class="org.springframework.orm.jpa.persistenceunit.DefaultPersistenceUnitManager"&gt;
  &lt;property name="persistenceXmlLocation"&gt;
    &lt;list&gt;
     &lt;value&gt;org/springframework/orm/jpa/domain/persistence-multi.xml&lt;/value&gt;
     &lt;value&gt;classpath:/my/package/**/custom-persistence.xml&lt;/value&gt;
     &lt;value&gt;classpath*:META-INF/persistence.xml&lt;/value&gt;
    &lt;/list&gt;
  &lt;/property&gt;
  &lt;property name="dataSources"&gt;
   &lt;map&gt;
    &lt;entry key="localDataSource" value-ref="local-db"/&gt;
    &lt;entry key="remoteDataSource" value-ref="remote-db"/&gt;
   &lt;/map&gt;
  &lt;/property&gt;
  <i class="lineannotation"><span class="lineannotation">&lt;!-- if no datasource is specified, use this one --&gt;</span></i>
  &lt;property name="defaultDataSource" ref="remoteDataSource"/&gt;
&lt;/bean&gt;

&lt;bean id="emf" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"&gt;
  &lt;property name="persistenceUnitManager" ref="pum"/&gt;
&lt;/bean&gt;</pre><p>&#35201;&#27880;&#24847;&#30340;&#26159;&#65292;&#32570;&#30465;&#23454;&#29616;&#20801;&#35768;&#22312;&#23558;&#25345;&#20037;&#21270;&#21333;&#20803;&#20449;&#24687;&#20256;&#20837;JPA provider&#20043;&#21069;&#29992;
        <tt class="literal">PersistenceUnitPostProcessor</tt>(&#23427;&#20801;&#35768;&#36873;&#25321;&#25345;&#20037;&#21270;&#21333;&#20803;)&#20462;&#25913;&#23427;&#20204;&#65292;
        &#20256;&#20837;&#30340;&#36807;&#31243;&#21487;&#20197;&#26159;&#36890;&#36807;&#23646;&#24615;&#22768;&#26126;&#24335;&#22320;&#20256;&#20837;(&#24433;&#21709;&#20854;&#20013;&#25152;&#26377;&#30340;&#21333;&#20803;)&#25110;&#32534;&#31243;&#24335;&#22320;&#20256;&#20837;&#12290;
        &#22914;&#26524;&#27809;&#26377;&#25351;&#23450;persistenceUnitManager&#65292;<tt class="literal">LocalContainerEntityManagerFactoryBean</tt>
        &#20250;&#21019;&#24314;&#19968;&#20010;&#24182;&#22312;&#20869;&#37096;&#20351;&#29992;&#23427;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="orm-jpa-template"></a>12.6.2.&nbsp;<tt class="classname">JpaTemplate</tt> &#21644; <tt class="classname">JpaDaoSupport</tt></h3></div></div><div></div></div><p>&#27599;&#20010;&#22522;&#20110;JPA&#30340;DAO&#37117;&#23558;&#36890;&#36807;&#20381;&#36182;&#27880;&#20837;&#25509;&#25910;&#19968;&#20010; <tt class="interfacename">EntityManagerFactory</tt> &#23454;&#20363;&#12290;
		&#36825;&#26679;&#30340;DAO&#21487;&#20197;&#36890;&#36807;&#25351;&#23450;&#30340; <tt class="interfacename">EntityManagerFactory</tt> &#26469;&#25805;&#20316;&#21407;&#29983;JPA&#30340;API&#36827;&#34892;&#25968;&#25454;&#35775;&#38382;&#65292;
		&#20063;&#21487;&#20197;&#30452;&#25509;&#20351;&#29992;Spring&#30340; <tt class="classname">JpaTemplate</tt>&#65306;</p><pre class="programlisting">&lt;beans&gt;

  &lt;bean id="myProductDao" class="product.ProductDaoImpl"&gt;
    &lt;property name="entityManagerFactory" ref="entityManagerFactory"/&gt;
  &lt;/bean&gt;

&lt;/beans&gt;</pre><pre class="programlisting">public class JpaProductDao implements ProductDao {
  
    private JpaTemplate jpaTemplate;

    public void setEntityManagerFactory(EntityManagerFactory emf) {
        this.jpaTemplate = new JpaTemplate(emf);
    }

    public Collection loadProductsByCategory(final String category) throws DataAccessException {
        return (Collection) this.jpaTemplate.execute(new JpaCallback() {
            public Object doInJpa(EntityManager em) throws PersistenceException {
                Query query = em.createQuery("from Product as p where p.category = :category");
                query.setParameter("category", category);
                List result = query.getResultList(); 
                <i class="lineannotation"><span class="lineannotation">// do some further processing with the result list</span></i>
                return result;
            }
        });
    }
}</pre><p>
	<tt class="interfacename">JpaCallback</tt> &#23454;&#29616;&#20801;&#35768;&#20219;&#24847;&#31867;&#22411;&#30340;JPA&#25968;&#25454;&#35775;&#38382;&#12290;
<tt class="classname">JpaTemplate</tt> &#23558;&#30830;&#20445; <tt class="interfacename">EntityManager</tt> &#27491;&#30830;&#22320;&#25171;&#24320;&#21644;&#20851;&#38381;&#65292;&#24182;&#19988;&#33021;&#22815;&#33258;&#21160;&#22320;&#21442;&#19982;&#21040;&#20107;&#21153;&#20013;&#21435;&#12290;
&#38500;&#27492;&#20043;&#22806;&#65292;<tt class="classname">JpaTemplate</tt> &#33021;&#22815;&#24688;&#24403;&#22320;&#22788;&#29702;&#24322;&#24120;&#65292;&#30830;&#20445;&#36164;&#28304;&#30340;&#21450;&#26102;&#28165;&#29702;&#20197;&#21450;&#24517;&#35201;&#26102;&#30340;&#20107;&#21153;&#22238;&#28378;&#12290;
Template&#23454;&#20363;&#19981;&#20165;&#26159;&#32447;&#31243;&#23433;&#20840;&#30340;&#65292;&#32780;&#19988;&#23427;&#26159;&#21487;&#37325;&#29992;&#30340;&#65292;&#22240;&#32780;&#23427;&#33021;&#22815;&#20316;&#20026;&#23454;&#20363;&#21464;&#37327;&#34987;&#19968;&#20010;&#31867;&#25345;&#26377;&#12290;
&#27880;&#24847;&#65292; <tt class="classname">JpaTemplate</tt> &#25552;&#20379;&#20102;&#31616;&#21333;&#30340;&#35832;&#22914;find&#12289;load&#12289;merge&#31561;&#25805;&#20316;&#30340;&#24555;&#25463;&#20989;&#25968;&#26469;&#26367;&#20195;&#40664;&#35748;&#30340;&#22238;&#35843;&#23454;&#29616;&#12290;</p><p>&#19981;&#20165;&#22914;&#27492;&#65292;Spring&#36824;&#25552;&#20379;&#20102;&#19968;&#20010;&#26041;&#20415;&#30340; <tt class="classname">JpaDaoSupport</tt> &#22522;&#31867;&#65292;&#25552;&#20379;&#20102;
			<tt class="literal">get/setEntityManagerFactory</tt> &#26041;&#27861;&#20197;&#21450; <tt class="literal">getJpaTemplate()</tt> &#26041;&#27861;&#20379;&#23376;&#31867;&#35843;&#29992;&#65306;</p><pre class="programlisting">public class ProductDaoImpl extends JpaDaoSupport implements ProductDao {
  
    public Collection loadProductsByCategory(String category) throws DataAccessException {
        Map&lt;String, String&gt; params = new HashMap&lt;String, String&gt;();
        params.put("category", category);
        return getJpaTemplate().findByNamedParams("from Product as p where p.category = :category", params);
    }
}</pre><p>&#38500;&#20102;&#30452;&#25509;&#20351;&#29992;Spring&#30340; <tt class="classname">JpaTemplate</tt>&#20043;&#22806;&#65292;&#20063;&#21487;&#20197;&#20351;&#29992;&#21407;&#29983;JPA&#30340;API&#26469;&#23454;&#29616;&#22522;&#20110;Spring&#30340;DAO&#65292;
		&#27492;&#26102;&#20320;&#38656;&#35201;&#33258;&#34892;&#26126;&#30830;&#22320;&#22788;&#29702;<tt class="literal">EntityManager</tt>&#12290;&#27491;&#22914;&#22312;&#30456;&#24212;&#30340;Hibernate&#31456;&#33410;&#25551;&#36848;&#30340;&#19968;&#26679;&#65292;&#36825;&#31181;&#20570;&#27861;&#30340;&#20027;&#35201;&#20248;
		&#28857;&#22312;&#20110;&#20320;&#30340;&#25968;&#25454;&#35775;&#38382;&#20195;&#30721;&#21487;&#20197;&#22312;&#25972;&#20010;&#36807;&#31243;&#20013;&#25243;&#20986;checked exceptions&#12290;<tt class="classname">JpaDaoSupport</tt> &#20026;&#36825;&#31181;&#24773;&#20917;&#25552;
		&#20379;&#20102;&#22810;&#31181;&#20989;&#25968;&#25903;&#25345;&#65292;&#21253;&#25324;&#33719;&#21462;&#21644;&#37322;&#25918;&#19968;&#20010;&#20855;&#22791;&#20107;&#21153;&#31649;&#29702;&#21151;&#33021;&#30340; <tt class="interfacename">EntityManager</tt> &#21644;&#30456;&#20851;&#30340;&#24322;&#24120;&#36716;&#21270;&#12290;</p><p><span class="emphasis"><em>JpaTemplate&#20027;&#35201;&#20197;JdoTemplate&#21644;HibernateTemplate&#30340;&#21516;&#32990;&#32780;&#23384;&#22312;&#65292;&#20026;&#20351;&#29992;&#23427;&#30340;&#20154;&#20204;&#25552;&#20379;&#30456;&#21516;&#30340;&#39118;&#26684;&#12290;
      &#23545;&#20110;&#26032;&#21551;&#21160;&#30340;&#39033;&#30446;&#65292;&#35201;&#32771;&#34385;&#37319;&#29992;&#21407;&#29983;&#30340;JPA&#39118;&#26684;&#32534;&#20889;&#25968;&#25454;&#35775;&#38382;&#23545;&#35937;&#30340;&#20195;&#30721;&#65292;&#22522;&#20110;&#36890;&#36807;JPA<tt class="literal">@PersistenceContext</tt>&#27880;&#35299;
      &#33719;&#21462;&#30340;&#19968;&#20010;&#8220;&#20849;&#20139;EntityManager&#8221;&#24341;&#29992;&#65288;&#21033;&#29992;Spring&#30340;<tt class="classname">PersistenceAnnotationBeanPostProcessor</tt>&#65307;&#35814;&#24773;&#22914;&#19979;&#12290;&#65289;</em></span></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="orm-jpa-straight"></a>12.6.3.&nbsp;&#22522;&#20110;&#21407;&#29983;&#30340;JPA&#23454;&#29616;DAO</h3></div></div><div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#34429;&#28982;<tt class="interfacename">EntityManagerFactory</tt>&#23454;&#20363;&#26159;&#32447;&#31243;&#23433;&#20840;&#30340;&#65292;
        &#20294;<tt class="interfacename">EntityManager</tt>&#23454;&#20363;&#30830;&#23454;&#19981;&#26159;&#36825;&#26679;&#12290;&#34987;&#27880;&#20837;&#30340;JPA 
        <tt class="interfacename">EntityManager</tt>&#30340;&#34892;&#20026;&#21644;&#20174;&#24212;&#29992;&#26381;&#21153;&#22120;JNDI&#29615;&#22659;&#20013;&#33719;&#21462;&#30340;&#27809;&#26377;&#21306;&#21035;&#65292;
        &#21644;JPA&#35268;&#33539;&#23450;&#20041;&#30340;&#19968;&#26679;&#12290;&#22914;&#26524;&#23384;&#22312;&#19968;&#20010;&#34987;&#27880;&#20837;&#30340;JPA <tt class="interfacename">EntityManager</tt>&#65292;
        &#23427;&#20250;&#20195;&#29702;&#23545;&#24403;&#21069;&#20107;&#21153;&#21270;&#30340;<tt class="interfacename">EntityManager</tt>&#30340;&#25152;&#26377;&#35843;&#29992;&#65307;
        &#21542;&#21017;&#27599;&#20010;&#25805;&#20316;&#37117;&#20250;&#21019;&#24314;&#19968;&#20010;<tt class="interfacename">EntityManager</tt>&#65292;&#30830;&#20445;&#32447;&#31243;&#23433;&#20840;&#12290;</p></td></tr></tbody></table></div><p>&#20320;&#23436;&#20840;&#21487;&#20197;&#20351;&#29992;&#21407;&#29983;&#30340;JPA&#30340;API&#36827;&#34892;&#32534;&#31243;&#65292;&#32780;&#26080;&#38656;&#23545;Spring&#20135;&#29983;&#20219;&#20309;&#20381;&#36182;&#65292;&#36825;&#21487;&#20197;&#36890;&#36807;&#19968;&#20010;&#34987;&#27880;&#20837;&#30340; 
			<tt class="interfacename">EntityManagerFactory</tt> &#25110; <tt class="interfacename">EntityManager</tt> &#26469;&#23436;&#25104;&#12290;
		&#27880;&#24847;&#65292;&#22914;&#26524; <tt class="classname">PersistenceAnnotationBeanPostProcessor</tt> &#34987;&#21551;&#29992;&#65292;Spring&#23601;&#33021;&#22815;&#35782;&#21035;&#23383;&#27573;&#25110;&#32773;&#26041;&#27861;&#32423;&#21035;&#30340; <tt class="interfacename">@PersistenceUnit</tt> &#21644; 
		<tt class="interfacename">@PersistenceContext</tt> &#27880;&#35299;&#12290;&#30456;&#24212;&#30340;DAO&#23454;&#29616;&#30475;&#36215;&#26469;&#20687;&#36825;&#26679;&#65306;</p><pre class="programlisting">public class ProductDaoImpl implements ProductDao {

    private EntityManagerFactory emf;

    @PersistenceUnit
    public void setEntityManagerFactory(EntityManagerFactory emf) {
        this.emf = emf;
    }

    public Collection loadProductsByCategory(String category) {
        EntityManager em = this.emf.createEntityManager();
        try {
             Query query = em.createQuery("from Product as p where p.category = ?1");
             query.setParameter(1, category);
             return query.getResultList();
        }
        finally {
            if (em != null) {
                em.close();
            }
        }
    }
}</pre><p>&#19978;&#36848;&#30340;DAO&#19981;&#23545;Spring&#20135;&#29983;&#20219;&#20309;&#20381;&#36182;&#65292;&#32780;&#23427;&#23601;&#22914;&#21516;&#20351;&#29992;Spring&#30340; <tt class="classname">JpaTemplate</tt> &#37027;&#26679;&#65292;&#20173;&#28982;&#38750;&#24120;&#36866;&#21512;
			&#22312;Spring&#30340;application context&#20013;&#36827;&#34892;&#37197;&#32622;&#12290;&#27492;&#22806;&#65292;&#36825;&#26679;&#30340;DAO&#21487;&#20197;&#21033;&#29992;&#27880;&#35299;&#26469;&#35201;&#27714;&#32570;&#30465;<tt class="interfacename">EntityManagerFactory</tt> &#30340;&#27880;&#20837;&#65306;</p><pre class="programlisting">&lt;beans&gt;

  <i class="lineannotation"><span class="lineannotation">&lt;!-- bean post-processor for JPA annotations --&gt;</span></i>
  &lt;bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor"/&gt;

  &lt;bean id="myProductDao" class="product.ProductDaoImpl"/&gt;

&lt;/beans&gt;</pre><p>&#27880;&#24847;&#65306;&#20316;&#20026;&#26174;&#24335;&#23450;&#20041;<tt class="classname">PersistenceAnnotationBeanPostProcessor</tt>&#30340;&#21478;&#19968;&#31181;&#26041;&#27861;&#65292;
      &#21487;&#20197;&#32771;&#34385;&#22312;&#24212;&#29992;&#31243;&#24207;&#19978;&#19979;&#25991;&#37197;&#32622;&#20013;&#20351;&#29992;Spring 2.5&#30340;<tt class="literal">context:annotation-config</tt> XML&#20803;&#32032;&#12290;
      &#23427;&#20250;&#33258;&#21160;&#20026;&#22522;&#20110;&#27880;&#35299;&#30340;&#37197;&#32622;&#27880;&#20876;Spring&#25152;&#26377;&#26631;&#20934;&#30340;&#21518;&#32622;&#22788;&#29702;&#22120;&#65288;&#21253;&#25324;<tt class="classname">CommonAnnotationBeanPostProcessor</tt>&#31561;&#31561;&#65289;&#12290;</p><pre class="programlisting">&lt;beans&gt;

  <i class="lineannotation"><span class="lineannotation">&lt;!-- post-processors for all standard config annotations --&gt;</span></i>
  &lt;context:annotation-config/&gt;

  &lt;bean id="myProductDao" class="product.ProductDaoImpl"/&gt;

&lt;/beans&gt;</pre><p>&#36825;&#31867;DAO&#30340;&#20027;&#35201;&#38382;&#39064;&#22312;&#20110;&#27599;&#27425;&#24635;&#26159;&#20174;&#24037;&#21378;&#20013;&#33719;&#21462;&#19968;&#20010;&#26032;&#30340; <tt class="interfacename">EntityManager</tt> &#23454;&#20363;&#12290;
&#36825;&#19968;&#28857;&#21487;&#20197;&#36890;&#36807;&#23545; <tt class="interfacename">EntityManager</tt> &#32780;&#19981;&#26159;factory&#36827;&#34892;&#27880;&#20837;&#26469;&#35299;&#20915;&#65306;</p><pre class="programlisting">public class ProductDaoImpl implements ProductDao {

    @PersistenceContext
    private EntityManager em;

    public Collection loadProductsByCategory(String category) {
       Query query = em.createQuery("from Product as p where p.category = :category");
       query.setParameter("category", category);
       return query.getResultList(); 
    }
}</pre><p>&#27880;&#24847;&#65306;<tt class="literal">@PersistenceContext</tt>&#27880;&#35299;&#26377;&#19968;&#20010;&#21487;&#36873;&#30340;&#23646;&#24615;<tt class="literal">type</tt>&#65292;&#23427;&#30340;&#40664;&#35748;&#20540;&#26159;
      <tt class="literal">PersistenceContextType.TRANSACTION</tt>&#12290;&#35813;&#40664;&#35748;&#38656;&#35201;&#20320;&#25509;&#25910;&#19968;&#20010;&#8220;&#20849;&#20139;EntityManager&#8221;&#20195;&#29702;&#12290;
      &#21478;&#19968;&#31181;&#26041;&#24335;&#65292;<tt class="literal">PersistenceContextType.EXTENDED</tt>&#21017;&#23436;&#20840;&#19981;&#21516;&#65306;&#23427;&#20250;&#20135;&#29983;&#19968;&#20010;&#25152;&#35859;&#30340;&#8220;&#25193;&#23637;EntityManager&#8221;,
      &#36825;&#20010;<span class="emphasis"><em>&#19981;&#26159;&#32447;&#31243;&#23433;&#20840;&#30340;</em></span>&#65292;&#22240;&#27492;&#19981;&#24212;&#35813;&#29992;&#22312;&#24403;&#21069;&#34987;&#35775;&#38382;&#30340;&#32452;&#20214;&#20013;&#65292;&#20363;&#22914;Spring&#31649;&#29702;&#30340;singleton bean&#12290;
      &#25193;&#23637;&#30340;EntityManager&#21482;&#33021;&#29992;&#22312;&#26377;&#29366;&#24577;&#30340;&#32452;&#20214;&#20013;&#65292;&#20363;&#22914;&#65292;&#22312;&#20250;&#35805;&#20013;&#65292;EntityManager&#30340;&#29983;&#21629;&#21608;&#26399;&#19982;&#24403;&#21069;&#20107;&#21153;&#26080;&#20851;&#65292;&#23436;&#20840;&#21462;&#20915;&#20110;&#24212;&#29992;&#31243;&#24207;&#12290;</p><div class="sidebar"><p class="title"><b>&#26041;&#27861;&#32423;&#21644;&#23646;&#24615;&#32423;&#30340;&#27880;&#20837;</b></p><p>&#34920;&#26126;&#20381;&#36182;&#27880;&#20837;&#30340;&#27880;&#35299;(&#20363;&#22914;@PersistenceUnit&#21644;@PersistenceContext)&#33021;&#34987;&#29992;&#20110;&#31867;&#20869;&#30340;&#23646;&#24615;&#25110;&#32773;&#26041;&#27861;&#65292;
        &#36825;&#23601;&#21483;&#20570;&#8220;&#26041;&#27861;/&#23646;&#24615;&#32423;&#27880;&#20837;&#8221;&#12290;&#23646;&#24615;&#32423;&#27880;&#35299;&#30340;&#20351;&#29992;&#21313;&#20998;&#31616;&#21333;&#12289;&#31616;&#27905;&#65292;&#32780;&#26041;&#27861;&#32423;&#27880;&#35299;&#21017;&#20801;&#35768;&#22788;&#29702;&#27880;&#20837;&#30340;&#20381;&#36182;&#12290;
        &#36825;&#20004;&#31181;&#24773;&#20917;&#23545;&#25104;&#21592;&#21487;&#35265;&#24615;(public, protected, private)&#22343;&#27809;&#26377;&#35201;&#27714;&#12290;</p><p>&#37027;&#20040;&#31867;&#32423;&#30340;&#27880;&#35299;&#21448;&#20250;&#24590;&#20040;&#26679;&#21602;&#65311;</p><p>&#22312;JEE 5&#24179;&#21488;&#19978;&#65292;&#23427;&#20204;&#26159;&#29992;&#20110;&#20381;&#36182;&#22768;&#26126;&#65292;&#32780;&#38750;&#36164;&#28304;&#27880;&#20837;&#12290;</p></div><p>&#34987;&#27880;&#20837;&#30340; <tt class="interfacename">EntityManager</tt> &#30001;Spring&#31649;&#29702;&#65288;&#33021;&#22815;&#24863;&#30693;&#24403;&#21069;&#30340;&#20107;&#21153;&#65289;&#12290;
		&#20540;&#24471;&#27880;&#24847;&#30340;&#26159;&#65292;&#21363;&#20351;&#36825;&#31181;&#26032;&#30340;&#23454;&#29616;&#26356;&#20542;&#21521;&#20110;&#26041;&#27861;&#32423;&#21035;&#30340;&#27880;&#20837;&#65288;&#20351;&#29992; <tt class="interfacename">EntityManager</tt> 
		&#32780;&#19981;&#26159; <tt class="interfacename">EntityManagerFactory</tt>&#65289;&#65292;
		&#23545;&#20110;&#27880;&#35299;&#30340;&#20351;&#29992;&#65292;application context&#30340;XML&#37197;&#32622;&#21017;&#26080;&#38656;&#20219;&#20309;&#25913;&#21464;&#12290;</p><p>&#36825;&#31181;DAO&#39118;&#26684;&#30340;&#20027;&#35201;&#20248;&#28857;&#22312;&#20110;&#23427;&#20165;&#20165;&#20381;&#36182;JPA&#65292;&#32780;&#26080;&#38656;&#20381;&#36182;&#20219;&#20309;&#30340;Spring&#30340;&#31867;&#12290;&#38500;&#27492;&#20043;&#22806;&#65292;&#30001;&#20110;JPA&#30340;&#27880;&#35299;&#21487;&#34987;&#29702;&#35299;&#65292;&#27880;&#20837;&#33021;&#22815;&#34987;Spring&#23481;&#22120;&#33258;&#21160;&#24212;&#29992;&#12290;
&#20174;&#26080;&#20837;&#20405;&#24615;&#30340;&#35282;&#24230;&#26469;&#35828;&#65292;&#36825;&#19968;&#28857;&#38750;&#24120;&#26377;&#21560;&#24341;&#21147;&#65292;&#23427;&#23545;&#20110;JPA&#24320;&#21457;&#32773;&#26469;&#35828;&#20063;&#26356;&#33258;&#28982;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="orm-jpa-exceptions"></a>12.6.4.&nbsp;&#24322;&#24120;&#36716;&#21270;</h3></div></div><div></div></div><p>&#28982;&#32780;&#65292;DAO&#19981;&#20165;&#20250;&#25243;&#20986;&#26222;&#36890;&#30340; <tt class="classname">PersistenceException</tt> &#24322;&#24120;&#65288;&#36825;&#26159;&#19968;&#20010;&#26080;&#38656;&#22768;&#26126;&#21644;&#25429;&#33719;&#30340;unchecked exception&#65289;&#65292;
			&#36824;&#20250;&#25243;&#20986;&#35832;&#22914; <tt class="classname">IllegalArgumentException</tt> &#21644; <tt class="classname">IllegalStateException</tt> &#20043;&#31867;&#30340;&#24322;&#24120;&#12290;
		&#36825;&#24847;&#21619;&#30528;&#65292;DAO&#30340;&#35843;&#29992;&#32773;&#21482;&#33021;&#20197;&#26222;&#36890;&#30340;&#38169;&#35823;&#26469;&#22788;&#29702;&#36825;&#20123;&#24322;&#24120;&#65292;&#38500;&#38750;&#23436;&#20840;&#20381;&#36182;JPA&#33258;&#36523;&#30340;&#24322;&#24120;&#20307;&#31995;&#12290;&#22240;&#32780;&#65292;&#38500;&#38750;&#20320;&#23558;DAO&#30340;&#35843;&#29992;&#32773;&#32465;&#23450;&#21040;&#20855;&#20307;&#30340;&#23454;&#29616;&#31574;&#30053;&#19978;&#21435;&#65292;
		&#21542;&#21017;&#23558;&#26080;&#27861;&#25429;&#33719;&#29305;&#23450;&#30340;&#24322;&#24120;&#21407;&#22240;&#65288;&#35832;&#22914;&#20048;&#35266;&#38145;&#24322;&#24120;&#65289;&#12290;&#36825;&#31181;&#25240;&#20013;&#24179;&#34913;&#25110;&#35768;&#21487;&#20197;&#34987;&#25509;&#21463;&#65292;&#22914;&#26524;&#20320;&#30340;&#24212;&#29992;&#23436;&#20840;&#22522;&#20110;JPA&#25110;&#32773;&#26080;&#38656;&#36827;&#34892;&#29305;&#27530;&#30340;&#24322;&#24120;&#22788;&#29702;&#12290;&#19981;&#36807;&#65292;
		Spring&#25552;&#20379;&#20102;&#19968;&#20010;&#20801;&#35768;&#20320;&#36827;&#34892;&#36879;&#26126;&#30340;&#24322;&#24120;&#36716;&#21270;&#30340;&#35299;&#20915;&#26041;&#26696;&#65306;&#36890;&#36807;&#20351;&#29992; <tt class="interfacename">@Repository</tt> &#27880;&#35299;&#65306;</p><pre class="programlisting">@Repository
public class ProductDaoImpl implements ProductDao {

    <i class="lineannotation"><span class="lineannotation">// class body here...</span></i>

}</pre><pre class="programlisting">&lt;beans&gt;

  <i class="lineannotation"><span class="lineannotation">&lt;!-- <tt class="classname">Exception</tt> translation bean post processor --&gt;</span></i>
  &lt;bean class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor"/&gt;

  &lt;bean id="myProductDao" class="product.ProductDaoImpl"/&gt;

&lt;/beans&gt;</pre><p>&#21518;&#32622;&#22788;&#29702;&#22120;&#23558;&#33258;&#21160;&#22320;&#23547;&#25214;&#25152;&#26377;&#30340;&#24322;&#24120;&#36716;&#21270;&#22120;&#65288;<tt class="interfacename">PersistenceExceptionTranslator</tt> &#25509;&#21475;&#30340;&#23454;&#29616;&#65289;&#65292;
			&#24182;&#36890;&#30693;&#25152;&#26377;&#26631;&#26377; <tt class="interfacename">@Repository</tt> &#27880;&#35299;&#30340;bean&#65292;&#20174;&#32780;&#33021;&#22815;&#20351;&#24471;&#34987;&#25214;&#21040;&#30340;&#24322;&#24120;&#36716;&#21270;&#22120;&#33021;&#22815;&#22312;&#25243;&#20986;&#24322;&#24120;&#26102;&#36827;&#34892;&#30456;&#24212;&#30340;&#24322;&#24120;&#36716;&#21270;&#24037;&#20316;&#12290;</p><p>&#24635;&#20043;&#65306;DAO&#33021;&#22815;&#22522;&#20110;&#26222;&#36890;&#30340;Java&#25345;&#20037;&#23618;API&#21644;&#27880;&#35299;&#26469;&#23454;&#29616;&#65292;&#20294;&#21516;&#26679;&#20063;&#33021;&#20139;&#21463;&#21040;&#30001;Spring&#31649;&#29702;&#20107;&#21153;&#12289;IoC&#21644;&#36879;&#26126;&#30340;&#24322;&#24120;&#36716;&#21270;
			&#65288;&#36716;&#21270;&#25104;&#20026;Spring&#30340;&#24322;&#24120;&#20307;&#31995;&#65289;&#31561;&#22909;&#22788;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="orm-jpa-tx"></a>12.7.&nbsp;&#20107;&#21153;&#31649;&#29702;</h2></div></div><div></div></div><p>&#23558;&#20107;&#21153;&#31649;&#29702;&#32435;&#20837;&#21040;Service&#25805;&#20316;&#30340;&#25191;&#34892;&#20013;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;Spring&#36890;&#29992;&#30340;&#22768;&#26126;&#24335;&#30340;&#20107;&#21153;&#31649;&#29702;&#21151;&#33021;&#12290;&#20363;&#22914;&#65306;</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd"&gt;

  &lt;bean id="myTxManager" class="org.springframework.orm.jpa.JpaTransactionManager"&gt;
    &lt;property name="entityManagerFactory" ref="myEmf"/&gt;
  &lt;/bean&gt;

  &lt;bean id="myProductService" class="product.ProductServiceImpl"&gt;
    &lt;property name="productDao" ref="myProductDao"/&gt;
  &lt;/bean&gt;
  
  &lt;aop:config&gt;
    &lt;aop:pointcut id="productServiceMethods" expression="execution(* product.ProductService.*(..))"/&gt;
    &lt;aop:advisor advice-ref="txAdvice" pointcut-ref="productServiceMethods"/&gt;
  &lt;/aop:config&gt;

  &lt;tx:advice id="txAdvice" transaction-manager="myTxManager"&gt;
    &lt;tx:attributes&gt;
      &lt;tx:method name="increasePrice*" propagation="REQUIRED"/&gt;
      &lt;tx:method name="someOtherBusinessMethod" propagation="REQUIRES_NEW"/&gt;
      &lt;tx:method name="*" propagation="SUPPORTS" read-only="true"/&gt;
    &lt;/tx:attributes&gt;
  &lt;/tx:advice&gt;

&lt;/beans&gt;</pre><p>Spring JPA&#20801;&#35768;&#23558;&#19968;&#20010;&#24050;&#37197;&#32622;&#30340;<tt class="classname">JpaTransactionManager</tt>&#26292;&#38706;&#19968;&#20010;JPA&#20107;&#21153;&#32473;&#35775;&#38382;&#21516;&#19968;&#20010;JDBC <tt class="interfacename">DataSource</tt> &#30340;JDBC&#35775;&#38382;&#20195;&#30721;&#65292;
	&#21069;&#25552;&#26465;&#20214;&#26159;&#65292;&#34987;&#27880;&#20876;&#30340; <tt class="interfacename">JpaDialect</tt> &#33021;&#22815;&#25903;&#25345;&#33719;&#21462;&#24213;&#23618;&#30340;JDBC <tt class="interfacename">Connection</tt>&#12290;
		Spring&#25552;&#20379;&#20102;&#38024;&#23545;Toplink&#21644;Hibernate&#30340;JPA&#23454;&#29616;&#30340;Dialect&#12290;&#20855;&#20307;&#21442;&#35265;&#19979;&#19968;&#33410;&#26377;&#20851; <tt class="interfacename">JpaDialect</tt> &#30340;&#26426;&#21046;&#12290;
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="orm-jpa-dialect"></a>12.8.&nbsp;<tt class="interfacename">JpaDialect</tt></h2></div></div><div></div></div><p>&#20316;&#20026;&#19968;&#20010;&#39640;&#32423;&#29305;&#24615;&#65292;<tt class="classname">JpaTemplate</tt>&#12289;<tt class="classname">JpaTransactionManager</tt> &#21644;
			<tt class="classname">AbstractEntityManagerFactoryBean</tt> &#30340;&#23376;&#31867;&#25903;&#25345;&#29992;&#25143;&#33258;&#23450;&#20041;&#30340; <tt class="interfacename">JpaDialect</tt> 
			&#20316;&#20026;"jpaDialect"&#30340;bean&#23646;&#24615;&#36827;&#34892;&#27880;&#20837;&#12290;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;DAO&#23558;&#19981;&#20877;&#25509;&#25910; <tt class="interfacename">EntityManagerFactory</tt> &#30340;&#24341;&#29992;
			&#20316;&#20026;&#21442;&#25968;&#65292;&#32780;&#26159;&#25509;&#25910;&#19968;&#20010;&#23436;&#25972;&#30340; <tt class="classname">JpaTemplate</tt>&#65288;&#20063;&#23601;&#26159;&#23558;&#23427;&#27880;&#20837;&#21040; <tt class="classname">JpaDaoSupport</tt> 
			&#30340;"jpaTemplate"&#23646;&#24615;&#20013;&#21435;&#65289;&#12290;<tt class="interfacename">JpaDialect</tt> &#23454;&#29616;&#33021;&#22815;&#28608;&#27963;&#19968;&#20123;&#30001;Spring&#25903;&#25345;&#30340;&#39640;&#32423;&#29305;&#24615;&#65292;&#36825;&#36890;&#24120;&#30001;&#29305;&#23450;&#30340;
			&#23454;&#29616;&#20379;&#24212;&#21830;&#25351;&#23450;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#20351;&#29992;&#29305;&#23450;&#30340;&#20107;&#21153;&#35821;&#20041;&#65288;&#20363;&#22914;&#29992;&#25143;&#33258;&#23450;&#20041;&#30340;&#20107;&#21153;&#38548;&#31163;&#32423;&#21035;&#21644;&#20107;&#21153;&#36229;&#26102;&#65289;</p></li><li><p>&#33719;&#21462;&#20855;&#22791;&#20107;&#21153;&#21151;&#33021;&#30340;Connection&#23545;&#35937;&#65288;&#26292;&#38706;&#32473;&#22522;&#20110;JDBC&#30340;DAO&#65289;</p></li><li><p>&#20174; <tt class="literal">PersistenceExceptions</tt> &#21040;Spring&#30340; <tt class="literal">DataAccessExceptions</tt> &#39640;&#32423;&#36716;&#21270;</p></li></ul></div><p>&#36825;&#23545;&#20110;&#29305;&#27530;&#30340;&#20107;&#21153;&#35821;&#20041;&#21644;&#24322;&#24120;&#30340;&#39640;&#32423;&#36716;&#21270;&#36825;&#26679;&#30340;&#39640;&#32423;&#29305;&#24615;&#29305;&#21035;&#26377;&#20215;&#20540;&#12290;&#27880;&#24847;&#65292;&#25152;&#29992;&#30340;&#40664;&#35748;&#23454;&#29616;&#65288;<tt class="classname">DefaultJpaDialect</tt>&#65289;
	&#24182;&#19981;&#25552;&#20379;&#20219;&#20309;&#29305;&#27530;&#30340;&#21151;&#33021;&#65292;&#22914;&#26524;&#38656;&#35201;&#19978;&#36848;&#30340;&#29305;&#27530;&#21151;&#33021;&#65292;&#24517;&#39035;&#25351;&#23450;&#30456;&#24212;&#30340;Dialect&#12290;</p><p>&#26356;&#22810;&#26377;&#20851;&#23427;&#30340;&#25805;&#20316;&#20197;&#21450;&#23427;&#22914;&#20309;&#22312;Spring&#30340;JPA&#25903;&#25345;&#20013;&#20351;&#29992;&#30340;&#35814;&#32454;&#20449;&#24687;&#35831;&#21442;&#35265; <tt class="interfacename">JpaDialect</tt> &#30340;Javadoc&#12290;</p></div></div></div><div class="part" lang="en"><div class="titlepage"><div><div><h1 class="title"><a name="spring-web"></a>The Web</h1></div></div><div></div></div><div class="partintro" lang="en"><div><div></div><div></div></div><p>
				&#21442;&#32771;&#25163;&#20876;&#36825;&#37096;&#20998;&#28085;&#25324;&#20102;Sprint Framework&#23545;&#34920;&#29616;&#23618;&#65288;&#29305;&#21035;&#26159;&#22522;&#20110;web&#30340;&#34920;&#29616;&#23618;&#65289;&#30340;&#25903;&#25345;&#12290;
			</p><p>
				&#22312;&#36825;&#31456;&#30340;&#21069;&#20004;&#33410;&#20171;&#32461;&#20102;Spring Framework&#33258;&#24049;&#30340;web&#26694;&#26550;&#65292;<a href="#mvc" title="Chapter&nbsp;13.&nbsp;Web MVC framework Web&#26694;&#26550;">Spring Web MVC</a>&#65292;
				&#36825;&#37096;&#20998;&#20013;&#21097;&#19979;&#30340;&#19968;&#20123;&#31456;&#33410;&#20171;&#32461;&#20102;Spring Framework&#19982;&#20854;&#20182;web&#23454;&#29616;&#30340;&#25972;&#21512;&#25216;&#26415;&#65292;
				&#20363;&#22914; <a href="#struts" title="15.4.&nbsp;Struts">Struts</a> &#21644; <a href="#jsf" title="15.3.&nbsp;JavaServer Faces">JSF</a>&#65288;&#20316;&#20026;&#33539;&#20363;&#65292;&#20165;&#21015;&#20986;&#20004;&#20010;&#65289;&#12290;
			</p><p>
				&#36825;&#37096;&#20998;&#20197;Spring&#30340;MVC <a href="#portlet" title="Chapter&nbsp;16.&nbsp;Portlet MVC&#26694;&#26550;">Portlet&#26694;&#26550;</a> &#20316;&#20026;&#32467;&#26463;&#12290;
			</p><div class="itemizedlist"><ul type="disc"><li><p><a href="#mvc" title="Chapter&nbsp;13.&nbsp;Web MVC framework Web&#26694;&#26550;">Chapter&nbsp;13, <i>Web MVC framework Web&#26694;&#26550;</i></a></p></li><li><p><a href="#view" title="Chapter&nbsp;14.&nbsp;&#38598;&#25104;&#35270;&#22270;&#25216;&#26415;">Chapter&nbsp;14, <i>&#38598;&#25104;&#35270;&#22270;&#25216;&#26415;</i></a></p></li><li><p><a href="#webintegration" title="Chapter&nbsp;15.&nbsp;&#38598;&#25104;&#20854;&#23427;Web&#26694;&#26550;">Chapter&nbsp;15, <i>&#38598;&#25104;&#20854;&#23427;Web&#26694;&#26550;</i></a></p></li><li><p><a href="#portlet" title="Chapter&nbsp;16.&nbsp;Portlet MVC&#26694;&#26550;">Chapter&nbsp;16, <i>Portlet MVC&#26694;&#26550;</i></a></p></li></ul></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="mvc"></a>Chapter&nbsp;13.&nbsp;Web MVC framework Web&#26694;&#26550;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="mvc-introduction"></a>13.1.&nbsp;&#27010;&#36848;</h2></div></div><div></div></div><p>Spring&#30340;web&#26694;&#26550;&#22260;&#32469;<tt class="classname">DispatcherServlet</tt>&#35774;&#35745;&#12290;
      <tt class="classname">DispatcherServlet</tt>&#30340;&#20316;&#29992;&#26159;&#23558;&#35831;&#27714;&#20998;&#21457;&#21040;&#19981;&#21516;&#30340;&#22788;&#29702;&#22120;&#12290;
      Spring&#30340;web&#26694;&#26550;&#21253;&#25324;&#21487;&#37197;&#32622;&#30340;&#22788;&#29702;&#22120;&#65288;handler&#65289;&#26144;&#23556;&#12289;&#35270;&#22270;&#65288;view&#65289;&#35299;&#26512;&#12289;&#26412;&#22320;&#21270;&#65288;local&#65289;&#35299;&#26512;&#12289;
      &#20027;&#39064;&#65288;theme&#65289;&#35299;&#26512;&#20197;&#21450;&#23545;&#25991;&#20214;&#19978;&#20256;&#30340;&#25903;&#25345;&#12290;Spring&#30340;Web&#26694;&#26550;&#20013;&#32570;&#30465;&#30340;&#22788;&#29702;&#22120;&#26159;<tt class="interfacename">Controller</tt>
      &#25509;&#21475;&#65292;&#36825;&#26159;&#19968;&#20010;&#38750;&#24120;&#31616;&#21333;&#30340;&#25509;&#21475;&#65292;&#20165;&#21253;&#21547;<tt class="literal">ModelAndView  handleRequest(request, response)</tt>
      &#26041;&#27861;&#12290;&#21487;&#20197;&#36890;&#36807;&#23454;&#29616;&#36825;&#20010;&#25509;&#21475;&#26469;&#21019;&#24314;&#33258;&#24049;&#30340;&#25511;&#21046;&#22120;&#65288;&#20063;&#21487;&#20197;&#31216;&#20043;&#20026;&#22788;&#29702;&#22120;&#65289;&#65292;&#20294;&#26159;&#26356;&#25512;&#33616;&#32487;&#25215;Spring&#25552;&#20379;&#30340;&#19968;&#31995;&#21015;&#25511;&#21046;&#22120;&#65292;
      &#27604;&#22914;<tt class="classname">AbstractController</tt>&#12289;<tt class="classname">AbstractCommandController</tt>
      &#21644;<tt class="classname">SimpleFormController</tt>&#12290;&#27880;&#24847;&#65292;&#38656;&#35201;&#36873;&#25321;&#27491;&#30830;&#30340;&#22522;&#31867;&#65306;&#22914;&#26524;&#27809;&#26377;&#34920;&#21333;&#65292;&#23601;&#19981;&#38656;&#35201;&#19968;&#20010;FormController&#12290;
      &#36825;&#26159;&#21644;Struts&#30340;&#19968;&#20010;&#20027;&#35201;&#21306;&#21035;&#12290;
     </p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Tip" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Tip]" src="tip.png"></td><th align="left">Tip</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#20174;Spring 2.5&#24320;&#22987;&#65292;&#20351;&#29992;Java 5&#25110;&#32773;&#20197;&#19978;&#29256;&#26412;&#30340;&#29992;&#25143;&#21487;&#20197;&#37319;&#29992;&#22522;&#20110;&#27880;&#35299;&#30340;controller&#26041;&#24335;&#12290;
      &#22312;&#23454;&#29616;&#20256;&#32479;&#30340;<tt class="interfacename">Controller</tt>&#21450;&#20854;&#23376;&#31867;&#26102;&#36825;&#26159;&#19968;&#31181;&#26356;&#22909;&#30340;&#26367;&#25442;&#26041;&#26696;&#65292;
          &#20854;&#20013;&#25552;&#20379;&#20102;&#26356;&#20026;&#28789;&#27963;&#30340;&#22788;&#29702;multi-action&#30340;&#33021;&#21147;&#12290;&#26356;&#22810;&#20449;&#24687;&#35831;&#21442;&#32771;<a href="#mvc-annotation" title="13.12.&nbsp;&#22522;&#20110;&#27880;&#35299;&#30340;&#25511;&#21046;&#22120;&#37197;&#32622;">Section&nbsp;13.12, &#8220;&#22522;&#20110;&#27880;&#35299;&#30340;&#25511;&#21046;&#22120;&#37197;&#32622;&#8221;</a>&#12290;</p></td></tr></tbody></table></div><div class="sidebar"><a name="mvc-open-for-extension"></a><p class="title"><b>&#8220;<span class="quote">&#36981;&#24490;&#24320;&#38381;&#21407;&#21017;</span>&#8221;</b></p><p>&#36143;&#31359;&#25972;&#20010;Spring web&#26694;&#26550;&#65288;&#29978;&#33267;&#25972;&#20010;Spring&#26694;&#26550;&#65289;&#30340;&#19968;&#20010;&#35774;&#35745;&#21407;&#21017;&#26159;&#65306;&#8220;<span class="quote">
          <span class="emphasis"><em>&#23545;&#25193;&#23637;&#24320;&#25918;&#65292;&#23545;&#20462;&#25913;&#23553;&#38381;&#65288;&#24320;&#38381;&#21407;&#21017; OCP&#65289;</em></span></span>&#8221;&#12290;</p><p>&#25105;&#20204;&#20043;&#25152;&#20197;&#22312;&#36825;&#37324;&#25552;&#21040;&#36825;&#20010;&#35774;&#35745;&#21407;&#21017;&#65292;&#26159;&#22240;&#20026;Spring Web MVC &#26694;&#26550;&#20013;&#26680;&#24515;&#31867;&#30340;&#24456;&#22810;&#26041;&#27861;
          &#37117;&#34987;&#26631;&#35760;&#25104;<tt class="literal">final</tt>&#12290;&#36825;&#24847;&#21619;&#30528;&#20320;&#19981;&#21487;&#20197;&#36890;&#36807;&#22797;&#20889;&#65288;override)&#26469;&#25913;&#21464;
          &#36825;&#20123;&#26041;&#27861;&#30340;&#34892;&#20026;&#12290;&#36825;&#26159;&#19968;&#31181;<span class="emphasis"><em>&#25353;&#35774;&#35745;&#24212;&#24403;&#22914;&#27492;&#65288;by design&#65289;</em></span>&#30340;&#20915;&#23450;&#65292;
          &#24182;&#38750;&#38543;&#24847;&#35774;&#32622;&#38556;&#30861;&#12290;
       </p><p>&#22312;Seth Ladd&#31561;&#20154;&#25152;&#33879;&#12298;Expert Spring Web MVC and Web Flow&#12299;&#19968;&#20070;&#20013;&#35814;&#32454;&#22320;&#35299;&#37322;&#20102;
      &#36825;&#20010;&#35774;&#35745;&#21407;&#21017;&#20197;&#21450;&#20026;&#20160;&#20040;&#35201;&#36981;&#23432;&#23427;&#12290;&#22914;&#26524;&#26377;&#20852;&#36259;&#30340;&#35805;&#65292;&#21487;&#20197;&#21442;&#32771;&#35813;&#20070;&#31532;&#19968;&#29256;117&#39029;&#12290;&#37027;&#19968;&#37096;&#20998;&#30340;&#26631;&#39064;&#20026;&#8220;A Look At Design&#8221;&#12290;</p><p>&#22914;&#26524;&#25214;&#19981;&#21040;&#37027;&#26412;&#20070;&#65292;&#20063;&#21487;&#20197;&#21442;&#32771;&#19979;&#38754;&#36825;&#31687;&#25991;&#26723;&#65288;&#23588;&#20854;&#24403;&#20320;&#21457;&#29616;&#33258;&#24049;&#20877;&#19968;&#27425;&#24525;&#19981;&#20303;&#21898;&#20986;
      &#8220;<span class="quote">&#21834;&#65281;&#20026;&#20160;&#20040;&#25105;&#19981;&#33021;&#22797;&#20889;&#36825;&#20010;&#26041;&#27861;&#65311;</span>&#8221;&#26102;&#65289;&#12290;</p><div class="orderedlist"><ol type="1"><li><p><a href="http://www.objectmentor.com/resources/articles/ocp.pdf" target="_top">Bob
          Martin, The Open-Closed Principle (PDF)</a></p></li></ol></div><p>&#27880;&#24847;&#65292;&#19981;&#33021;&#32473;Spring MVC&#20013;&#30340;final&#26041;&#27861;&#28155;&#21152;advice&#12290;&#36825;&#24847;&#21619;&#30528;&#27809;&#27861;&#25318;&#25130;&#20687;
      <tt class="literal">AbstractController.handleRequest()</tt>&#36825;&#26679;&#30340;&#26041;&#27861;&#12290;&#20851;&#20110;AOP&#20195;&#29702;&#65292;
      &#20197;&#21450;&#20026;&#20160;&#20040;&#19981;&#33021;&#25318;&#25130;final&#26041;&#27861;&#65292;&#21487;&#20197;&#21442;&#32771;<a href="#aop-understanding-aop-proxies" title="6.6.1.&nbsp;&#29702;&#35299;AOP&#20195;&#29702;">Section&nbsp;6.6.1, &#8220;&#29702;&#35299;AOP&#20195;&#29702;&#8221;</a>
      </p></div><p>Spring Web MVC&#20801;&#35768;&#20351;&#29992;&#20219;&#20309;&#23545;&#35937;&#20316;&#20026;&#21629;&#20196;&#23545;&#35937;&#65288;&#25110;&#34920;&#21333;&#23545;&#35937;&#65289;- &#19981;&#24517;&#23454;&#29616;&#26576;&#20010;&#29305;&#23450;&#20110;&#26694;&#26550;&#30340;&#25509;&#21475;&#25110;&#20174;&#26576;&#20010;&#22522;&#31867;&#32487;&#25215;&#12290;
    Spring&#30340;&#25968;&#25454;&#32465;&#23450;&#30456;&#24403;&#28789;&#27963;&#65292;&#20363;&#22914;&#65292;&#23427;&#35748;&#20026;&#31867;&#22411;&#19981;&#21305;&#37197;&#36825;&#26679;&#30340;&#38169;&#35823;&#24212;&#35813;&#26159;&#24212;&#29992;&#32423;&#30340;&#39564;&#35777;&#38169;&#35823;&#65292;&#32780;&#19981;&#26159;&#31995;&#32479;&#38169;&#35823;&#12290;
    &#25152;&#20197;&#20320;&#19981;&#38656;&#35201;&#20026;&#20102;&#20445;&#35777;&#34920;&#21333;&#20869;&#23481;&#30340;&#27491;&#30830;&#25552;&#20132;&#65292;&#32780;&#37325;&#22797;&#23450;&#20041;&#19968;&#20010;&#21644;&#19994;&#21153;&#23545;&#35937;&#26377;&#30456;&#21516;&#23646;&#24615;&#30340;&#34920;&#21333;&#23545;&#35937;&#26469;&#22788;&#29702;&#31616;&#21333;&#30340;&#26080;
    &#31867;&#22411;&#23383;&#31526;&#20018;&#25110;&#32773;&#23545;&#23383;&#31526;&#20018;&#36827;&#34892;&#36716;&#25442;&#12290;&#36825;&#20063;&#26159;&#21644;Struts&#30456;&#27604;&#30340;&#21478;&#19968;&#20010;&#37325;&#35201;&#21306;&#21035;&#65292;Struts&#26159;&#22260;&#32469;
    <tt class="classname">Action</tt>&#21644;<tt class="classname">ActionForm</tt>&#31561;&#22522;&#31867;&#26500;&#24314;&#30340;&#12290;
    </p><p>&#21644;WebWork&#30456;&#27604;&#65292;Spring&#23558;&#23545;&#35937;&#32454;&#20998;&#25104;&#26356;&#22810;&#19981;&#21516;&#30340;&#35282;&#33394;&#65306;&#25511;&#21046;&#22120;&#65288;<tt class="interfacename">
    Controller</tt>&#65289;&#12289;&#21487;&#36873;&#30340;&#21629;&#20196;&#23545;&#35937;&#65288;Command Object&#65289;&#25110;&#34920;&#21333;&#23545;&#35937;&#65288;Form Object&#65289;&#65292;
    &#20197;&#21450;&#20256;&#36882;&#21040;&#35270;&#22270;&#30340;&#27169;&#22411;&#65288;Model&#65289;&#12290;&#27169;&#22411;&#19981;&#20165;&#21253;&#21547;&#21629;&#20196;&#23545;&#35937;&#25110;&#34920;&#21333;&#23545;&#35937;&#65292;&#32780;&#19988;&#20063;&#21487;&#20197;&#21253;&#21547;&#20219;&#20309;&#24341;&#29992;&#25968;&#25454;&#12290;
    &#30456;&#27604;&#20043;&#19979;&#65292;WebWork&#30340;<tt class="interfacename">Action</tt>&#23558;&#25152;&#26377;&#30340;&#36825;&#20123;&#35282;&#33394;&#37117;&#21512;&#24182;&#22312;&#19968;&#20010;&#21333;&#29420;&#30340;&#23545;&#35937;&#37324;&#12290;
    &#34429;&#28982;WebWork&#30340;&#30830;&#20801;&#35768;&#22312;&#34920;&#21333;&#20013;&#20351;&#29992;&#29616;&#26377;&#30340;&#19994;&#21153;&#23545;&#35937;&#65292;&#20294;&#26159;&#24517;&#39035;&#25226;&#23427;&#20204;&#23450;&#20041;&#25104;&#30456;&#24212;&#30340;<tt class="interfacename">Action
    </tt>&#31867;&#30340;bean&#23646;&#24615;&#12290;&#26356;&#37325;&#35201;&#30340;&#26159;&#65292;&#22312;&#36827;&#34892;&#35270;&#22270;&#23618;&#65288;View&#65289;&#36816;&#31639;&#21644;&#34920;&#21333;&#36171;&#20540;&#26102;&#65292;WebWork&#20351;&#29992;&#30340;&#26159;&#21516;&#19968;&#20010;&#22788;&#29702;&#35831;&#27714;&#30340;
    <tt class="interfacename">Action</tt>&#23454;&#20363;&#12290;&#22240;&#27492;&#65292;&#24341;&#29992;&#25968;&#25454;&#20063;&#38656;&#35201;&#34987;&#23450;&#20041;&#25104;<tt class="interfacename">Action
    </tt>&#30340;bean&#23646;&#24615;&#12290;&#36825;&#26679;&#19968;&#20010;&#23545;&#35937;&#23601;&#25215;&#25285;&#20102;&#22826;&#22810;&#30340;&#35282;&#33394;&#65288;&#24403;&#28982;&#65292;&#23545;&#20110;&#36825;&#20010;&#35266;&#28857;&#20173;&#26377;&#20105;&#35758;&#65289;&#12290;
    </p><p>Spring&#30340;&#35270;&#22270;&#35299;&#26512;&#30456;&#24403;&#28789;&#27963;&#12290;&#19968;&#20010;&#25511;&#21046;&#22120;&#29978;&#33267;&#21487;&#20197;&#30452;&#25509;&#21521;response&#36755;&#20986;&#19968;&#20010;&#35270;&#22270;
    &#65288;&#27492;&#26102;&#25511;&#21046;&#22120;&#36820;&#22238;ModelAndView&#30340;&#20540;&#24517;&#39035;&#26159;null&#65289;&#12290;&#22312;&#19968;&#33324;&#30340;&#24773;&#20917;&#19979;&#65292;&#19968;&#20010;ModelAndView
    &#23454;&#20363;&#21253;&#21547;&#19968;&#20010;&#35270;&#22270;&#21517;&#23383;&#21644;&#19968;&#20010;&#31867;&#22411;&#20026;<tt class="interfacename">Map</tt>&#30340;model&#65292;
    &#19968;&#20010;model&#26159;&#19968;&#20123;&#20197;bean&#30340;&#21517;&#23383;&#20026;key&#65292;&#20197;bean&#23545;&#35937;&#65288;&#21487;&#20197;&#26159;&#21629;&#20196;&#25110;form&#65292;&#20063;&#21487;&#20197;&#26159;&#20854;&#20182;&#30340;JavaBean&#65289;
    &#20026;value&#30340;&#38190;&#20540;&#23545;&#12290;&#23545;&#35270;&#22270;&#21517;&#31216;&#30340;&#35299;&#26512;&#22788;&#29702;&#20063;&#26159;&#39640;&#24230;&#21487;&#37197;&#32622;&#30340;&#65292;&#21487;&#20197;&#36890;&#36807;bean&#30340;&#21517;&#23383;&#12289;&#23646;&#24615;&#25991;&#20214;&#25110;&#32773;&#33258;&#23450;&#20041;&#30340;
    <tt class="interfacename">ViewResolver</tt>&#23454;&#29616;&#26469;&#36827;&#34892;&#35299;&#26512;&#12290;&#23454;&#38469;&#19978;&#22522;&#20110;<tt class="interfacename">
    Map</tt>&#30340;model&#65288;&#20063;&#23601;&#26159;MVC&#20013;&#30340;M&#65289;&#26159;&#39640;&#24230;&#25277;&#35937;&#30340;&#65292;&#36866;&#29992;&#20110;&#21508;&#31181;&#34920;&#29616;&#23618;&#25216;&#26415;&#12290;
    &#20063;&#23601;&#26159;&#35828;&#65292;&#20219;&#20309;&#34920;&#29616;&#23618;&#37117;&#21487;&#20197;&#30452;&#25509;&#21644;Spring&#38598;&#25104;&#65292;&#26080;&#35770;&#26159;JSP&#12289;Velocity&#36824;&#26159;&#20854;&#23427;&#34920;&#29616;&#23618;&#25216;&#26415;&#12290;
    Map model&#21487;&#20197;&#34987;&#36716;&#25442;&#25104;&#21512;&#36866;&#30340;&#26684;&#24335;&#65292;&#27604;&#22914;JSP request attribute&#25110;&#32773;Velocity template model&#12290;
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-introduction-pluggability"></a>13.1.1.&nbsp;&#19982;&#20854;&#20182;MVC&#23454;&#29616;&#26694;&#26550;&#30340;&#38598;&#25104;</h3></div></div><div></div></div><p>&#30001;&#20110;&#31181;&#31181;&#21407;&#22240;&#65292;&#35768;&#22810;&#22242;&#38431;&#20542;&#21521;&#20110;&#20351;&#29992;&#20854;&#20182;&#30340;web&#26694;&#26550;&#12290;&#27604;&#22914;&#65292;&#26576;&#20123;&#22242;&#38431;&#24050;&#32463;&#22312;&#20854;&#20182;&#30340;&#25216;&#26415;&#21644;&#24037;&#20855;&#26041;&#38754;&#36827;&#34892;&#20102;
      &#25237;&#20837;&#65292;&#20182;&#20204;&#24076;&#26395;&#20805;&#20998;&#21033;&#29992;&#24050;&#26377;&#30340;&#32463;&#39564;&#12290;&#21478;&#22806;&#65292;Struts&#19981;&#20165;&#26377;&#22823;&#37327;&#30340;&#20070;&#31821;&#21644;&#24037;&#20855;&#65292;&#32780;&#19988;&#26377;&#35768;&#22810;&#24320;&#21457;&#20154;&#21592;&#37117;&#29087;&#24713;&#23427;&#12290;
      &#22240;&#27492;&#65292;&#22914;&#26524;&#33021;&#24525;&#21463;Struts&#30340;&#26550;&#26500;&#24615;&#32570;&#38519;&#65292;&#23427;&#20173;&#28982;&#26159;web&#23618;&#19968;&#20010;&#19981;&#38169;&#30340;&#36873;&#25321;&#12290;WebWork&#21644;&#20854;&#23427;&#30340;web&#26694;&#26550;&#20063;&#26159;&#36825;&#26679;&#12290;
      </p><p>&#22914;&#26524;&#19981;&#25171;&#31639;&#20351;&#29992;Spring&#30340;web MVC&#26694;&#26550;&#65292;&#20294;&#20173;&#24076;&#26395;&#20351;&#29992;Spring&#25552;&#20379;&#30340;&#20854;&#23427;&#21151;&#33021;&#65292;
      &#21487;&#20197;&#24456;&#23481;&#26131;&#22320;&#23558;&#25152;&#36873;&#25321;&#30340;web&#26694;&#26550;&#21644;Spring&#32467;&#21512;&#36215;&#26469;&#12290;&#21482;&#38656;&#36890;&#36807;Spring&#30340;<tt class="classname">
      ContextLoadListener</tt>&#21551;&#21160;&#19968;&#20010;root application context&#65292;&#23601;&#21487;&#20197;&#22312;
      Struts&#25110;WebWork&#30340;Action&#20013;&#65292;&#36890;&#36807;<tt class="interfacename">ServletContext</tt>&#23646;&#24615;
      &#65288;&#25110;&#32773;Spring&#25552;&#20379;&#30340;&#30456;&#24212;&#36741;&#21161;&#26041;&#27861;&#65289;&#36827;&#34892;&#35775;&#38382;&#12290;&#35831;&#27880;&#24847;&#25105;&#20204;&#27809;&#26377;&#25552;&#21040;&#20219;&#20309;&#20855;&#20307;&#30340;&#8220;plugins&#8221;&#65292;&#22240;&#27492;&#20063;&#20320;&#19981;
      &#38656;&#35201;&#20219;&#20309;&#19987;&#38376;&#30340;&#38598;&#25104;&#24037;&#20855;&#12290;&#20174;web&#23618;&#30340;&#35282;&#24230;&#30475;&#65292;&#21487;&#20197;&#20197;root application context&#23454;&#20363;&#20026;&#20837;&#21475;&#65292;&#25226;Spring&#20316;&#20026;&#19968;&#20010;library&#20351;&#29992;&#12290;</p><p>&#21363;&#20415;&#19981;&#20351;&#29992;Spring&#30340;web MVC&#65292;&#20173;&#21487;&#20197;&#20351;&#29992;Spring&#25552;&#20379;&#30340;&#26381;&#21153;&#20197;&#21450;&#25152;&#26377;&#27880;&#20876;&#30340;bean&#12290;
      &#22312;&#36825;&#37324;&#65292;Spring&#19981;&#20250;&#21644;Struts&#25110;WebWork&#31454;&#20105;&#65292;&#23427;&#21482;&#26159;&#25552;&#20379;&#36825;&#20123;&#32431;&#31929;&#30340;web MVC&#26694;&#26550;&#25152;&#27809;&#26377;&#30340;&#21151;&#33021;&#65292;
      &#20363;&#22914;&#65306;bean&#30340;&#37197;&#32622;&#12289;&#25968;&#25454;&#35775;&#38382;&#21644;&#20107;&#21153;&#22788;&#29702;&#12290;&#22240;&#27492;&#21487;&#20197;&#20351;&#29992;Spring&#30340;&#20013;&#38388;&#23618;&#25110;&#32773;&#25968;&#25454;&#35775;&#38382;&#23618;&#26469;&#22686;&#24378;&#20320;&#30340;&#24212;&#29992;&#65292;
      &#27604;&#22914;&#20320;&#21487;&#33021;&#21482;&#38656;&#35201;JDBC&#25110;Hibernate&#20107;&#21153;&#25277;&#35937;&#12290;
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-features"></a>13.1.2.&nbsp;Spring Web MVC&#26694;&#26550;&#30340;&#29305;&#28857;</h3></div></div><div></div></div><div class="sidebar"><p class="title"><b>Spring WebFlow</b></p><p>Spring Web Flow&#65288;SWF&#65289;&#30340;&#30446;&#26631;&#26159;&#25104;&#20026;Web&#24212;&#29992;&#31243;&#24207;&#39029;&#38754;&#27969;&#36716;&#31649;&#29702;&#30340;&#26368;&#20339;&#35299;&#20915;&#26041;&#26696;&#12290;</p><p>SWF&#22312;servlet&#21644;portlet&#29615;&#22659;&#20013;&#37117;&#19982;&#27604;&#22914;Spring MVC&#65292;Struts&#65292;&#21644;JSF&#36825;&#26679;&#30340;&#29616;&#23384;&#26694;&#26550;&#38598;&#25104;&#22312;&#19968;&#36215;&#12290;
  &#22914;&#26524;&#20320;&#38754;&#23545;&#30340;&#26159;&#19968;&#20010;&#26356;&#33021;&#24471;&#30410;&#20110;&#20316;&#20026;&#23545;&#35805;&#27169;&#22411;&#65292;&#32780;&#19981;&#26159;&#21333;&#32431;&#30340;&#35831;&#27714;&#27169;&#22411;&#30340;&#19994;&#21153;&#27969;&#31243;&#65288;&#25110;&#22810;&#20010;&#27969;&#31243;&#65289;&#30340;&#35805;&#65292;
  &#37027;&#20040;SWF&#21487;&#33021;&#23601;&#26159;&#35299;&#20915;&#26041;&#26696;&#20102;&#12290;</p><p>SWF&#20351;&#20320;&#33021;&#22815;&#25226;&#36923;&#36753;&#19978;&#30340;&#39029;&#38754;&#27969;&#36716;&#25429;&#25417;&#20026;&#33258;&#23481;&#32435;&#30340;&#27169;&#22359;&#65292;&#24182;&#22312;&#19981;&#21516;&#30340;&#24773;&#24418;&#19979;&#34987;&#22797;&#29992;&#12290;
  &#32780;&#36825;&#23545;&#20110;&#24320;&#21457;&#35201;&#24341;&#23548;&#29992;&#25143;&#23436;&#25104;&#21463;&#25511;&#30340;&#27983;&#35272;&#21160;&#20316;&#65292;&#20174;&#32780;&#39537;&#21160;&#19994;&#21153;&#27969;&#31243;&#30340;Web&#24212;&#29992;&#31243;&#24207;&#27169;&#22359;&#27491;&#26159;&#29702;&#24819;&#30340;&#12290;</p><p>&#20851;&#20110;SWF&#30340;&#26356;&#22810;&#20449;&#24687;&#65292;&#35831;&#35775;&#38382;<a href="http://www.springframework.org/webflow" target="_top">Spring WebFlow&#31449;&#28857;</a>&#12290;</p></div><p>Spring&#30340;web&#27169;&#22359;&#25552;&#20379;&#20102;&#22823;&#37327;&#29420;&#29305;&#30340;&#21151;&#33021;&#65292;&#21253;&#25324;:</p><div class="itemizedlist"><ul type="disc"><li><p>&#28165;&#26224;&#30340;&#35282;&#33394;&#21010;&#20998;&#65306;&#25511;&#21046;&#22120;&#65288;controller&#65289;&#12289;&#39564;&#35777;&#22120;&#65288;validator&#65289;&#12289;
          &#21629;&#20196;&#23545;&#35937;&#65288;command object&#65289;&#12289;&#34920;&#21333;&#23545;&#35937;&#65288;form object&#65289;&#12289;&#27169;&#22411;&#23545;&#35937;&#65288;model object&#65289;&#12289;
          Servlet&#20998;&#21457;&#22120;&#65288;<tt class="classname">DispatcherServlet</tt>&#65289;&#12289;
          &#22788;&#29702;&#22120;&#26144;&#23556;&#65288;handler mapping&#65289;&#12289;&#35270;&#22270;&#35299;&#26512;&#22120;&#65288;view resolver&#65289;&#31561;&#31561;&#12290; &#27599;&#19968;&#20010;&#35282;&#33394;&#37117;&#21487;&#20197;&#30001;&#19968;&#20010;&#19987;&#38376;&#30340;&#23545;&#35937;&#26469;&#23454;&#29616;&#12290;
          </p></li><li><p>&#24378;&#22823;&#32780;&#30452;&#25509;&#30340;&#37197;&#32622;&#26041;&#24335;&#65306;&#23558;&#26694;&#26550;&#31867;&#21644;&#24212;&#29992;&#31243;&#24207;&#31867;&#37117;&#33021;&#20316;&#20026;JavaBean&#37197;&#32622;&#65292;&#25903;&#25345;&#36328;&#22810;&#20010;context&#30340;&#24341;&#29992;&#65292;&#20363;&#22914;&#65292;&#22312;web&#25511;&#21046;&#22120;&#20013;&#23545;&#19994;&#21153;&#23545;&#35937;&#21644;&#39564;&#35777;&#22120;&#65288;validator&#65289;&#30340;&#24341;&#29992;&#12290;
          </p></li><li><p>&#21487;&#36866;&#37197;&#12289;&#38750;&#20405;&#20837;&#65306;&#21487;&#20197;&#26681;&#25454;&#19981;&#21516;&#30340;&#24212;&#29992;&#22330;&#26223;&#65292;&#36873;&#25321;&#21512;&#36866;&#30340;&#25511;&#21046;&#22120;&#23376;&#31867;
          &#65288;simple&#22411;&#12289;command&#22411;&#12289;form&#22411;&#12289;wizard&#22411;&#12289;multi-action&#22411;&#25110;&#32773;&#33258;&#23450;&#20041;&#65289;&#65292;&#32780;&#19981;&#26159;&#20174;&#21333;&#19968;&#25511;&#21046;&#22120;
          &#65288;&#27604;&#22914;Action/ActionForm&#65289;&#32487;&#25215;&#12290;</p></li><li><p>&#21487;&#37325;&#29992;&#30340;&#19994;&#21153;&#20195;&#30721;&#65306;&#21487;&#20197;&#20351;&#29992;&#29616;&#26377;&#30340;&#19994;&#21153;&#23545;&#35937;&#20316;&#20026;&#21629;&#20196;&#25110;&#34920;&#21333;&#23545;&#35937;&#65292;&#32780;&#19981;&#38656;&#35201;&#21435;&#25193;&#23637;&#26576;&#20010;&#29305;&#23450;&#26694;&#26550;&#30340;&#22522;&#31867;&#12290;</p></li><li><p>&#21487;&#23450;&#21046;&#30340;&#32465;&#23450;&#65288;binding&#65289; &#21644;&#39564;&#35777;&#65288;validation&#65289;&#65306;&#27604;&#22914;&#23558;&#31867;&#22411;&#19981;&#21305;&#37197;&#20316;&#20026;&#24212;&#29992;&#32423;&#30340;&#39564;&#35777;&#38169;&#35823;&#65292;
          &#36825;&#21487;&#20197;&#20445;&#23384;&#38169;&#35823;&#30340;&#20540;&#12290;&#20877;&#27604;&#22914;&#26412;&#22320;&#21270;&#30340;&#26085;&#26399;&#21644;&#25968;&#23383;&#32465;&#23450;&#31561;&#31561;&#12290;&#22312;&#20854;&#20182;&#26576;&#20123;&#26694;&#26550;&#20013;&#65292;&#20320;&#21482;&#33021;&#20351;&#29992;&#23383;&#31526;&#20018;&#34920;&#21333;&#23545;&#35937;&#65292;
          &#38656;&#35201;&#25163;&#21160;&#35299;&#26512;&#23427;&#24182;&#36716;&#25442;&#21040;&#19994;&#21153;&#23545;&#35937;&#12290;
          </p></li><li><p>&#21487;&#23450;&#21046;&#30340;handler mapping&#21644;view resolution&#65306;Spring&#25552;&#20379;&#20174;&#26368;&#31616;&#21333;&#30340;URL&#26144;&#23556;&#65292;
          &#21040;&#22797;&#26434;&#30340;&#12289;&#19987;&#29992;&#30340;&#23450;&#21046;&#31574;&#30053;&#12290;&#19982;&#26576;&#20123;web MVC&#26694;&#26550;&#24378;&#21046;&#24320;&#21457;&#20154;&#21592;&#20351;&#29992;&#21333;&#19968;&#29305;&#23450;&#25216;&#26415;&#30456;&#27604;&#65292;Spring&#26174;&#24471;&#26356;&#21152;&#28789;&#27963;&#12290;
          </p></li><li><p>&#28789;&#27963;&#30340;model&#36716;&#25442;&#65306;&#22312;Springweb&#26694;&#26550;&#20013;&#65292;&#20351;&#29992;&#22522;&#20110;<tt class="interfacename">Map</tt>&#30340;
          &#38190;/&#20540;&#23545;&#26469;&#36798;&#21040;&#36731;&#26131;&#22320;&#19982;&#21508;&#31181;&#35270;&#22270;&#25216;&#26415;&#30340;&#38598;&#25104;&#12290;
          </p></li><li><p>&#21487;&#23450;&#21046;&#30340;&#26412;&#22320;&#21270;&#21644;&#20027;&#39064;&#65288;theme&#65289;&#35299;&#26512;&#65306;&#25903;&#25345;&#22312;JSP&#20013;&#21487;&#36873;&#25321;&#22320;&#20351;&#29992;Spring&#26631;&#31614;&#24211;&#12289;&#25903;&#25345;JSTL&#12289;&#25903;&#25345;Velocity&#65288;&#19981;&#38656;&#35201;&#39069;&#22806;&#30340;&#20013;&#38388;&#23618;&#65289;&#31561;&#31561;&#12290;</p></li><li><p>&#31616;&#21333;&#32780;&#24378;&#22823;&#30340;JSP&#26631;&#31614;&#24211;&#65288;Spring Tag Library&#65289;&#65306;&#25903;&#25345;&#21253;&#25324;&#35832;&#22914;&#25968;&#25454;&#32465;&#23450;&#21644;&#20027;&#39064;&#65288;theme&#65289;
          &#20043;&#31867;&#30340;&#35768;&#22810;&#21151;&#33021;&#12290;&#23427;&#25552;&#20379;&#22312;&#26631;&#35760;&#26041;&#38754;&#30340;&#26368;&#22823;&#28789;&#27963;&#24615;&#12290;&#22914;&#27442;&#20102;&#35299;&#35814;&#24773;&#65292;&#35831;&#21442;&#38405;&#38468;&#24405;<a href="#spring.tld" title="Appendix&nbsp;D.&nbsp;spring.tld">Appendix&nbsp;D, <i>spring.tld</i></a>
          </p></li><li><p>JSP&#34920;&#21333;&#26631;&#31614;&#24211;&#65306;&#22312;Spring2.0&#20013;&#24341;&#20837;&#30340;&#34920;&#21333;&#26631;&#31614;&#24211;&#65292;&#20351;&#24471;&#22312;JSP&#20013;&#32534;&#20889;
          &#34920;&#21333;&#26356;&#21152;&#23481;&#26131;&#12290;&#22914;&#27442;&#20102;&#35299;&#26631;&#31614;&#24211;&#35814;&#24773;&#65292;&#35831;&#21442;&#38405;&#38468;&#24405;<a href="#spring-form.tld" title="Appendix&nbsp;E.&nbsp;spring-form.tld">Appendix&nbsp;E, <i>spring-form.tld</i></a>
          </p></li><li><p>Spring Bean&#30340;&#29983;&#21629;&#21608;&#26399;&#21487;&#20197;&#34987;&#38480;&#21046;&#22312;&#24403;&#21069;&#30340;HTTP Request&#25110;&#32773;HTTP <tt class="interfacename">Session</tt>&#12290;
          &#20934;&#30830;&#30340;&#35828;&#65292;&#36825;&#24182;&#38750;Spring MVC&#26694;&#26550;&#26412;&#36523;&#29305;&#24615;&#65292;&#32780;&#24212;&#24402;&#23646;&#20110;Sping MVC&#20351;&#29992;&#30340;WebApplicationContext&#23481;&#22120;&#12290;
          &#35813;&#21151;&#33021;&#22312;<a href="#beans-factory-scopes-other" title="3.4.4.&nbsp;&#20854;&#20182;&#20316;&#29992;&#22495;">Section&nbsp;3.4.4, &#8220;&#20854;&#20182;&#20316;&#29992;&#22495;&#8221;</a>&#26377;&#35814;&#32454;&#25551;&#36848;&#12290;
          </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="mvc-servlet"></a>13.2.&nbsp;<tt class="classname">DispatcherServlet</tt></h2></div></div><div></div></div><p>&#19982;&#20854;&#23427;web MVC&#26694;&#26550;&#19968;&#26679;&#65292;Spring&#30340;web MVC&#26694;&#26550;&#26159;&#19968;&#20010;&#35831;&#27714;&#39537;&#21160;&#30340;web&#26694;&#26550;&#65292;&#20854;&#35774;&#35745;&#22260;&#32469;&#19968;&#20010;&#20013;&#24515;&#30340;servlet&#36827;&#34892;&#65292;
    &#23427;&#33021;&#23558;&#35831;&#27714;&#20998;&#21457;&#32473;&#25511;&#21046;&#22120;&#65292;&#24182;&#25552;&#20379;&#20854;&#23427;&#21151;&#33021;&#24110;&#21161;web&#24212;&#29992;&#24320;&#21457;&#12290;&#28982;&#32780;&#65292;Spring&#30340;<tt class="classname">DispatcherServlet
    </tt>&#25152;&#20570;&#30340;&#19981;&#20165;&#20165;&#26159;&#36825;&#20123;&#65292;&#23427;&#21644;Spring&#30340;IoC&#23481;&#22120;&#23436;&#20840;&#38598;&#25104;&#22312;&#19968;&#36215;&#65292;&#20174;&#32780;&#20801;&#35768;&#20320;&#20351;&#29992;Spring&#30340;&#20854;&#23427;&#21151;&#33021;&#12290;
    </p><p>&#19979;&#22270;&#23637;&#31034;&#20102;Spring Web MVC <tt class="classname">DispatcherServlet</tt>&#22788;&#29702;&#35831;&#27714;&#30340;&#27969;&#31243;&#12290;
    &#29087;&#24713;&#35774;&#35745;&#27169;&#24335;&#30340;&#35835;&#32773;&#21487;&#33021;&#20250;&#21457;&#29616;<tt class="classname">DispatcherServlet</tt>&#24212;&#29992;&#20102;&#8220;<span class="quote">
    Front Controller</span>&#8221;&#27169;&#24335;&#65288;&#24456;&#22810;&#20854;&#20182;&#30340;&#20027;&#27969;web&#26694;&#26550;&#20063;&#37117;&#29992;&#21040;&#20102;&#35813;&#27169;&#24335;&#65289;&#12290;
    </p><div class="mediaobject" align="center"><img src="mvc.png" align="middle"><div class="caption"><p>Spring Web MVC&#35831;&#27714;&#22788;&#29702;&#27969;&#31243;</p></div></div><p><tt class="classname">DispatcherServlet</tt>&#23454;&#38469;&#19978;&#26159;&#19968;&#20010;<tt class="interfacename">Servlet
    </tt>&#65288;&#23427;&#32487;&#25215;&#20102;<tt class="classname">HttpServlet</tt>&#65289;&#12290;&#19982;&#20854;&#23427;Servlet&#19968;&#26679;&#65292;
    <tt class="classname">DispatcherServlet</tt>&#23450;&#20041;&#22312;web&#24212;&#29992;&#30340;<tt class="literal">web.xml</tt>&#25991;&#20214;&#20013;&#12290;
    DispatcherServlet&#22788;&#29702;&#30340;&#35831;&#27714;&#24517;&#39035;&#22312;&#21516;&#19968;&#20010;<tt class="literal">web.xml</tt>&#25991;&#20214;&#37324;&#20351;&#29992;url-mapping&#23450;&#20041;&#26144;&#23556;&#12290;
    &#19979;&#38754;&#30340;&#20363;&#23376;&#28436;&#31034;&#20102;&#22914;&#20309;&#37197;&#32622;<tt class="classname">DispatcherServlet</tt>&#12290;
    </p><pre class="programlisting">&lt;web-app&gt;

    &lt;servlet&gt;
        &lt;servlet-name&gt;example&lt;/servlet-name&gt;
        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;
        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
    &lt;/servlet&gt;

    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;example&lt;/servlet-name&gt;
        &lt;url-pattern&gt;*.form&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;

&lt;/web-app&gt;</pre><p>&#22312;&#19978;&#38754;&#30340;&#20363;&#23376;&#37324;&#65292;&#25152;&#26377;&#20197;<tt class="literal">.form</tt>&#32467;&#23614;&#30340;&#35831;&#27714;&#37117;&#20250;&#30001;&#21517;&#20026;<tt class="literal">
    example</tt>&#30340;<tt class="classname">DispatcherServlet</tt>&#22788;&#29702;&#12290;&#36825;&#21482;&#26159;&#37197;&#32622;Spring Web MVC
    &#30340;&#31532;&#19968;&#27493;&#12290;&#25509;&#19979;&#26469;&#38656;&#35201;&#37197;&#32622;<tt class="classname">DispatcherServlet</tt>&#26412;&#36523;&#21644;Spring Web MVC &#26694;&#26550;&#29992;&#21040;&#30340;&#20854;&#20182;&#30340;bean&#12290;
    </p><p>&#27491;&#22914;&#22312;<a href="#context-introduction" title="3.8.&nbsp;The ApplicationContext">Section&nbsp;3.8, &#8220;The ApplicationContext&#8221;</a>&#20013;&#25152;&#25551;&#36848;&#30340;&#65292;Spring&#20013;&#30340;<tt class="interfacename">
    ApplicationContext</tt>&#23454;&#20363;&#21487;&#20197;&#34987;&#38480;&#21046;&#22312;&#19981;&#21516;&#30340;&#20316;&#29992;&#22495;&#65288;scope&#65289;&#20013;&#12290;&#22312;web MVC&#26694;&#26550;&#20013;&#65292;&#27599;&#20010;
    <tt class="classname">DispatcherServlet</tt>&#26377;&#23427;&#33258;&#24049;&#30340;<tt class="interfacename">WebApplicationContext
    </tt>&#65292;&#36825;&#20010;context&#32487;&#25215;&#20102;&#26681; <tt class="interfacename">WebApplicationContext</tt>
    &#30340;&#25152;&#26377;bean&#23450;&#20041;&#12290;&#36825;&#20123;&#32487;&#25215;&#30340;bean&#20063;&#21487;&#20197;&#22312;&#27599;&#20010;serlvet&#33258;&#24049;&#30340;&#25152;&#23646;&#30340;&#22495;&#20013;&#34987;&#35206;&#30422;&#65288;override&#65289;&#65292;&#35206;&#30422;&#21518;&#30340;bean
    &#21487;&#20197;&#34987;&#35774;&#32622;&#25104;&#21482;&#26377;&#36825;&#20010;servlet&#23454;&#20363;&#33258;&#24049;&#25165;&#21487;&#20197;&#20351;&#29992;&#30340;&#23646;&#24615;&#12290;
    </p><div class="mediaobject" align="center"><img src="mvc-contexts.gif" align="middle"><div class="caption"><p>Spring Web MVC&#20013;&#30340;Context&#20307;&#31995;</p></div></div><p>&#22312;<tt class="classname">DispatcherServlet</tt>&#30340;&#21021;&#22987;&#21270;&#36807;&#31243;&#20013;&#65292;&#26694;&#26550;&#20250;&#22312;web&#24212;&#29992;&#30340;
    <tt class="literal">WEB-INF</tt>&#25991;&#20214;&#22841;&#19979;&#23547;&#25214;&#21517;&#20026;<tt class="literal">[servlet-name]-servlet.xml</tt>
    &#30340;&#37197;&#32622;&#25991;&#20214;&#65292;&#29983;&#25104;&#25991;&#20214;&#20013;&#23450;&#20041;&#30340;bean&#12290;&#36825;&#20123;bean&#20250;&#35206;&#30422;&#22312;&#20840;&#23616;&#33539;&#22260;&#65288;global cope&#65289;&#20013;&#23450;&#20041;&#30340;&#21516;&#21517;&#30340;bean&#12290;
    </p><p>&#19979;&#38754;&#36825;&#20010;&#20363;&#23376;&#23637;&#31034;&#20102;&#22312;<tt class="literal">web.xml</tt>&#20013;<tt class="classname">DispatcherServlet</tt>&#30340;&#37197;&#32622;&#65306;</p><pre class="programlisting">&lt;web-app&gt;
    ...
    &lt;servlet&gt;
        &lt;servlet-name&gt;<span class="bold"><b>golfing</b></span>&lt;/servlet-name&gt;
        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;
        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
    &lt;/servlet&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;<span class="bold"><b>golfing</b></span>&lt;/servlet-name&gt;
        &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;
&lt;/web-app&gt;</pre><p>&#19978;&#36848;servlet&#37197;&#32622;&#23436;&#25104;&#21518;&#65292;&#36824;&#38656;&#35201;&#37197;&#32622;<tt class="literal">/WEB-INF/<span class="bold"><b>
    golfing</b></span>-servlet.xml</tt>&#25991;&#20214;&#12290;golfing-servlet.xml&#36825;&#20010;&#25991;&#20214;&#24212;&#35813;&#22768;&#26126;&#22312;
    <span class="emphasis"><em>Spring Web MVC &#26694;&#26550;&#20013;</em></span>&#38656;&#35201;&#30340;bean&#12290; &#36825;&#20010;&#25991;&#20214;&#30340;&#36335;&#24452;&#20063;&#21487;&#20197;&#36890;&#36807;web.xml&#20013;servlet
    &#30340;&#21021;&#22987;&#21270;&#21442;&#25968;&#26469;&#26356;&#25913;&#65288;&#35814;&#24773;&#35265;&#19979;&#38754;&#30340;&#20363;&#23376;&#65289;&#12290;
    </p><p><tt class="interfacename">WebApplicationContext</tt>&#20165;&#20165;&#26159;&#19968;&#20010;&#25317;&#26377;web&#24212;&#29992;&#24517;&#35201;&#21151;&#33021;&#30340;&#26222;&#36890;
    <tt class="interfacename">ApplicationContext</tt>&#12290;&#23427;&#19982;&#19968;&#20010;&#26631;&#20934;&#30340;<tt class="interfacename">
    ApplicationContext</tt>&#30340;&#19981;&#21516;&#20043;&#22788;&#22312;&#20110;&#65292;&#23427;&#33021;&#22815;&#35299;&#26512;theme
    &#65288;&#21442;&#32771;<a href="#mvc-themeresolver" title="13.7.&nbsp;&#20351;&#29992;&#20027;&#39064;">Section&nbsp;13.7, &#8220;&#20351;&#29992;&#20027;&#39064;&#8221;</a>&#65289;&#65292;&#24182;&#19988;&#23427;&#30693;&#36947;&#33258;&#24049;&#19982;&#21738;&#20010;servlet&#30456;&#20851;&#32852;
    &#65288;&#36890;&#36807;<tt class="interfacename">ServletContext</tt>&#65289;&#12290;<tt class="interfacename">WebApplicationContext
    </tt>&#34987;&#32465;&#23450;&#22312;<tt class="interfacename">ServletContext</tt>&#19978;&#65292;&#38656;&#35201;&#26102;&#65292;&#21487;&#20197;&#20351;&#29992;
    <tt class="classname">RequestContextUtils</tt>&#25552;&#20379;&#30340;&#38745;&#24577;&#26041;&#27861;&#25214;&#21040;<tt class="interfacename">WebApplicationContext</tt>&#12290;
    </p><p>Spring&#30340;<tt class="classname">DispatcherServlet</tt>&#26377;&#19968;&#32452;&#29305;&#27530;&#30340;bean&#65292;
    &#29992;&#26469;&#22788;&#29702;&#35831;&#27714;&#21644;&#28210;&#26579;&#30456;&#24212;&#30340;&#35270;&#22270;&#12290;&#36825;&#20123;bean&#21253;&#21547;&#22312;Spring&#30340;&#26694;&#26550;&#37324;&#65292;&#21487;&#20197;&#22312;<tt class="interfacename">
    WebApplicationContext</tt>&#20013;&#37197;&#32622;&#65292;&#37197;&#32622;&#26041;&#24335;&#19982;&#37197;&#32622;&#20854;&#23427;bean&#30456;&#21516;&#12290;&#36825;&#20123;bean
    &#20013;&#30340;&#27599;&#19968;&#20010;&#37117;&#22312;&#19979;&#25991;&#20316;&#35814;&#32454;&#25551;&#36848;&#12290;&#27492;&#21051;&#35835;&#32773;&#21482;&#38656;&#30693;&#36947;&#23427;&#20204;&#30340;&#23384;&#22312;&#65292;&#20197;&#20415;&#25105;&#20204;&#32487;&#32493;&#23545;DispatcherServlet
    &#36827;&#34892;&#35752;&#35770;&#12290;&#23545;&#22823;&#22810;&#25968;bean&#65292;Spring&#37117;&#25552;&#20379;&#20102;&#21512;&#29702;&#30340;&#32570;&#30465;&#20540;&#65292;&#25152;&#20197;&#22312;&#24320;&#22987;&#38454;&#27573;&#65292;&#20320;&#19981;&#24517;&#25285;&#24515;&#22914;&#20309;&#23545;&#20854;&#36827;&#34892;&#37197;&#32622;&#12290;
    </p><div class="table"><a name="mvc-webappctx-special-beans-tbl"></a><p class="title"><b>Table&nbsp;13.1.&nbsp;<tt class="interfacename">WebApplicationContext</tt>&#20013;&#29305;&#27530;&#30340;bean</b></p><table summary="WebApplicationContext&#20013;&#29305;&#27530;&#30340;bean" border="1"><colgroup><col><col></colgroup><thead><tr><th>Bean&#31867;&#22411;</th><th>&#25551;&#36848;</th></tr></thead><tbody><tr><td>&#25511;&#21046;&#22120;&#65288;Controllers&#65289;</td><td><a href="#mvc-controller" title="13.3.&nbsp;&#25511;&#21046;&#22120;">&#25511;&#21046;&#22120;</a> &#23454;&#29616;&#30340;&#26159;MVC&#20013;&#30340;<tt class="literal">C</tt> &#12290;
            </td></tr><tr><td>&#22788;&#29702;&#22120;&#26144;&#23556;&#65288;Handler mapping&#65289;</td><td><a href="#mvc-handlermapping" title="13.4.&nbsp;&#22788;&#29702;&#22120;&#26144;&#23556;&#65288;handler mapping&#65289;">&#22788;&#29702;&#22120;&#26144;&#23556;</a>&#21253;&#21547;&#39044;&#22788;&#29702;&#22120;&#65288;pre-processor&#65289;&#65292;
            &#21518;&#32622;&#22788;&#29702;&#22120;&#65288;post-processor&#65289;&#21644;&#25511;&#21046;&#22120;&#30340;&#21015;&#34920;&#65292;&#23427;&#20204;&#22312;&#31526;&#21512;&#26576;&#31181;&#26465;&#20214;&#26102;&#25165;&#34987;&#25191;&#34892;&#65288;&#20363;&#22914;&#31526;&#21512;&#25511;&#21046;&#22120;&#25351;&#23450;&#30340;URL&#65289;&#12290;
            </td></tr><tr><td>&#35270;&#22270;&#35299;&#26512;&#22120;&#65288;View resolvers&#65289;</td><td><a href="#mvc-viewresolver" title="13.5.&nbsp;&#35270;&#22270;&#19982;&#35270;&#22270;&#35299;&#26512;">&#35270;&#22270;&#35299;&#26512;&#22120;</a> &#21487;&#20197;&#23558;&#35270;&#22270;&#21517;&#35299;&#26512;&#20026;&#23545;&#24212;&#30340;&#35270;&#22270;&#12290;
            </td></tr><tr><td>&#26412;&#22320;&#21270;&#35299;&#26512;&#22120;&#65288;Locale resolver&#65289;</td><td><a href="#mvc-localeresolver" title="13.6.&nbsp;&#26412;&#22320;&#21270;&#35299;&#26512;&#22120;">&#26412;&#22320;&#21270;&#35299;&#26512;&#22120;</a>&#33021;&#22815;&#35299;&#26512;&#29992;&#25143;&#27491;&#22312;&#20351;&#29992;&#30340;&#26412;&#22320;&#21270;&#35774;&#32622;&#65292;&#20197;&#25552;&#20379;&#22269;&#38469;&#21270;&#35270;&#22270;&#12290;
            </td></tr><tr><td>&#20027;&#39064;&#35299;&#26512;&#22120;&#65288;Theme resolver&#65289;</td><td><a href="#mvc-themeresolver" title="13.7.&nbsp;&#20351;&#29992;&#20027;&#39064;">&#20027;&#39064;&#35299;&#26512;&#22120;</a>&#33021;&#22815;&#35299;&#26512;&#20320;&#30340;web&#24212;&#29992;&#25152;&#20351;&#29992;&#30340;&#20027;&#39064;&#65292;&#20197;&#25552;&#20379;&#20010;&#24615;&#21270;&#30340;&#24067;&#23616;&#12290;
            </td></tr><tr><td>&#25991;&#20214;&#19978;&#20256;&#35299;&#26512;&#22120;&#65288;Multipart File resolver&#65289;</td><td><a href="#mvc-multipart" title="13.8.&nbsp;Spring&#23545;&#20998;&#27573;&#25991;&#20214;&#19978;&#20256;&#65288;multipart file upload&#65289;&#30340;&#25903;&#25345;">&#25991;&#20214;&#19978;&#20256;&#35299;&#26512;&#22120;</a>&#25552;&#20379;HTML&#34920;&#21333;&#25991;&#20214;&#19978;&#20256;&#21151;&#33021;&#12290;
            </td></tr><tr><td>&#22788;&#29702;&#22120;&#24322;&#24120;&#35299;&#26512;&#22120;(Handler exception resolver(s))</td><td><a href="#mvc-exceptionhandlers" title="13.10.&nbsp;&#22788;&#29702;&#24322;&#24120;">&#22788;&#29702;&#22120;&#24322;&#24120;&#35299;&#26512;&#22120;</a>&#21487;&#20197;&#23558;&#24322;&#24120;&#23545;&#24212;&#21040;&#35270;&#22270;&#65292;&#25110;&#32773;&#23454;&#29616;&#26356;&#21152;&#22797;&#26434;&#30340;&#24322;&#24120;&#22788;&#29702;&#36923;&#36753;&#12290;
            </td></tr></tbody></table></div><p><tt class="classname">DispatcherServlet</tt>&#37197;&#32622;&#23436;&#25104;&#21518;&#65292;&#24403;&#30456;&#24212;&#30340;&#35831;&#27714;&#21040;&#36798;&#26102;&#65292;&#22788;&#29702;&#23601;&#24320;&#22987;&#20102;&#12290;
    &#19979;&#38754;&#30340;&#21015;&#34920;&#25551;&#36848;&#20102;<tt class="classname">DispatcherServlet</tt>&#22788;&#29702;&#35831;&#27714;&#30340;&#20840;&#36807;&#31243;&#65306;
    </p><div class="orderedlist"><ol type="1"><li><p>&#25214;&#21040;<tt class="interfacename">WebApplicationContext</tt>&#24182;&#23558;&#20854;&#32465;&#23450;&#21040;&#35831;&#27714;&#30340;&#19968;&#20010;&#23646;&#24615;&#19978;&#65292;
        &#20197;&#20415;&#25511;&#21046;&#22120;&#21644;&#22788;&#29702;&#38142;&#19978;&#30340;&#20854;&#23427;&#22788;&#29702;&#22120;&#33021;&#20351;&#29992;<tt class="interfacename">WebApplicationContext</tt>&#12290;
        &#40664;&#35748;&#30340;&#23646;&#24615;&#21517;&#20026;<tt class="literal">DispatcherServlet.WEB_APPLICATION_CONTEXT_ATTRIBUTE</tt>&#12290;
        </p></li><li><p>&#23558;&#26412;&#22320;&#21270;&#35299;&#26512;&#22120;&#65288;localResolver&#65289;&#32465;&#23450;&#21040;&#35831;&#27714;&#19978;&#65292;&#36825;&#26679;&#20351;&#24471;&#22788;&#29702;&#38142;&#19978;&#30340;&#22788;&#29702;&#22120;&#22312;&#22788;&#29702;&#35831;&#27714;&#65288;&#20934;&#22791;&#25968;&#25454;&#12289;&#26174;&#31034;&#35270;&#22270;&#31561;&#31561;&#65289;
        &#26102;&#33021;&#36827;&#34892;&#26412;&#22320;&#21270;&#22788;&#29702;&#12290;&#33509;&#19981;&#20351;&#29992;&#26412;&#22320;&#21270;&#35299;&#26512;&#22120;&#65292;&#20063;&#19981;&#20250;&#26377;&#20219;&#20309;&#21103;&#20316;&#29992;&#65292;&#22240;&#27492;&#22914;&#26524;&#19981;&#38656;&#35201;&#26412;&#22320;&#21270;&#35299;&#26512;&#65292;&#24573;&#30053;&#23427;&#21363;&#21487;&#12290;
        </p></li><li><p>&#23558;&#20027;&#39064;&#35299;&#26512;&#22120;&#32465;&#23450;&#21040;&#35831;&#27714;&#19978;&#65292;&#36825;&#26679;&#35270;&#22270;&#21487;&#20197;&#20915;&#23450;&#20351;&#29992;&#21738;&#20010;&#20027;&#39064;&#12290;&#22914;&#26524;&#20320;&#19981;&#38656;&#35201;&#20027;&#39064;&#65292;&#21487;&#20197;&#24573;&#30053;&#23427;&#65292;&#19981;&#20250;&#26377;&#20219;&#20309;&#24433;&#21709;&#12290;</p></li><li><p>&#22914;&#26524;&#19978;&#20256;&#25991;&#20214;&#35299;&#26512;&#22120;&#34987;&#25351;&#23450;&#65292;Spring&#20250;&#26816;&#26597;&#27599;&#20010;&#25509;&#25910;&#21040;&#30340;&#35831;&#27714;&#26159;&#21542;&#23384;&#22312;&#19978;&#20256;&#25991;&#20214;&#65292;&#22914;&#26524;&#23384;&#22312;&#65292;
        &#36825;&#20010;&#35831;&#27714;&#23558;&#34987;&#23553;&#35013;&#25104;<tt class="classname">MultipartHttpServletRequest</tt>&#20197;&#20415;&#34987;&#22788;&#29702;&#38142;&#20013;&#30340;&#20854;&#23427;&#22788;&#29702;&#22120;&#20351;&#29992;
        &#65288;&#20851;&#20110;&#25991;&#20214;&#19978;&#20256;&#30340;&#26356;&#22810;&#20869;&#23481;&#35831;&#21442;&#32771;<a href="#mvc-multipart-resolver" title="13.8.2.&nbsp;&#20351;&#29992;MultipartResolver">Section&nbsp;13.8.2, &#8220;&#20351;&#29992;MultipartResolver&#8221;</a>&#65289;&#12290;
        </p></li><li><p>&#25214;&#21040;&#21512;&#36866;&#30340;&#22788;&#29702;&#22120;&#65292;&#25191;&#34892;&#21644;&#36825;&#20010;&#22788;&#29702;&#22120;&#30456;&#20851;&#30340;&#25191;&#34892;&#38142;&#65288;&#39044;&#22788;&#29702;&#22120;&#65292;&#21518;&#32622;&#22788;&#29702;&#22120;&#65292;&#25511;&#21046;&#22120;&#65289;&#65292;&#20197;&#20415;&#20026;&#35270;&#22270;&#20934;&#22791;&#27169;&#22411;&#25968;&#25454;&#65288;&#29992;&#20110;&#28210;&#26579;&#65289;&#12290;</p></li><li><p>&#22914;&#26524;&#27169;&#22411;&#25968;&#25454;&#34987;&#36820;&#22238;&#65292;&#23601;&#20351;&#29992;&#37197;&#32622;&#22312;<tt class="interfacename">WebApplicationContext</tt>&#20013;&#30340;&#35270;&#22270;&#35299;&#26512;&#22120;&#26174;&#31034;&#35270;&#22270;&#65292;
        &#21542;&#21017;&#35270;&#22270;&#19981;&#20250;&#34987;&#26174;&#31034;&#12290;&#26377;&#22810;&#31181;&#21407;&#22240;&#21487;&#20197;&#23548;&#33268;&#36820;&#22238;&#30340;&#25968;&#25454;&#27169;&#22411;&#20026;&#31354;&#65292;&#27604;&#22914;&#39044;&#22788;&#29702;&#22120;&#25110;&#21518;&#22788;&#29702;&#22120;&#21487;&#33021;&#25130;&#21462;&#20102;&#35831;&#27714;&#65292;&#36825;&#21487;&#33021;&#26159;&#20986;&#20110;&#23433;&#20840;&#21407;&#22240;&#65292;
        &#20063;&#21487;&#33021;&#26159;&#35831;&#27714;&#24050;&#32463;&#34987;&#22788;&#29702;&#65292;&#27809;&#26377;&#24517;&#35201;&#20877;&#22788;&#29702;&#19968;&#27425;&#12290;
        </p></li></ol></div><p>&#35831;&#27714;&#22788;&#29702;&#36807;&#31243;&#20013;&#25243;&#20986;&#30340;&#24322;&#24120;&#65292;&#21487;&#20197;&#34987;&#20219;&#20309;&#23450;&#20041;&#22312;<tt class="interfacename">WebApplicationContext</tt>&#20013;&#30340;&#24322;&#24120;&#35299;&#26512;&#22120;&#25152;&#33719;&#21462;&#12290;
    &#20351;&#29992;&#36825;&#20123;&#24322;&#24120;&#35299;&#26512;&#22120;&#65292;&#21487;&#20197;&#22312;&#24322;&#24120;&#25243;&#20986;&#26102;&#26681;&#25454;&#38656;&#35201;&#23450;&#20041;&#29305;&#23450;&#34892;&#20026;&#12290;
    </p><p>Spring&#30340;<tt class="classname">DispatcherServlet</tt>&#20063;&#25903;&#25345;&#36820;&#22238;Servlet API&#23450;&#20041;&#30340;<span class="emphasis"><em>last-modification-date</em></span>&#12290;
    &#20915;&#23450;&#26576;&#20010;&#35831;&#27714;&#30340;&#26368;&#21518;&#20462;&#25913;&#26085;&#26399;&#24456;&#31616;&#21333;&#65306;<tt class="classname">DispatcherServlet</tt>&#20250;&#39318;&#20808;&#23547;&#25214;&#19968;&#20010;&#21512;&#36866;&#30340;handler mapping&#65292;&#26816;&#26597;&#20174;&#20013;&#21462;&#24471;&#25351;&#23450;&#30340;&#22788;&#29702;&#22120;&#26159;&#21542;&#23454;&#29616;&#20102;
    <tt class="interfacename">LastModified</tt>&#25509;&#21475;&#65292;&#22914;&#26524;&#26159;&#65292;&#23558;&#35843;&#29992;<tt class="literal">long getLastModified(request)</tt>&#26041;&#27861;&#65292;&#24182;&#23558;&#32467;&#26524;&#36820;&#22238;&#32473;&#23458;&#25143;&#31471;&#12290;
    </p><p>&#21487;&#20197;&#36890;&#36807;&#20004;&#31181;&#26041;&#24335;&#23450;&#21046;Spring&#30340;<tt class="classname">DispatcherServlet</tt>&#65306;&#22312;<tt class="literal">web.xml</tt>&#25991;&#20214;&#20013;&#22686;&#21152;&#28155;&#21152;context&#21442;&#25968;&#65292;
    &#25110;servlet&#21021;&#22987;&#21270;&#21442;&#25968;&#12290;&#19979;&#38754;&#26159;&#21487;&#33021;&#29992;&#21040;&#30340;&#21442;&#25968;&#12290;
    </p><div class="table"><a name="mvc-disp-servlet-init-params-tbl"></a><p class="title"><b>Table&nbsp;13.2.&nbsp;<tt class="classname">DispatcherServlet</tt>&#21021;&#22987;&#21270;&#21442;&#25968;</b></p><table summary="DispatcherServlet&#21021;&#22987;&#21270;&#21442;&#25968;" border="1"><colgroup><col><col></colgroup><thead><tr><th>&#21442;&#25968;</th><th>&#25551;&#36848;</th></tr></thead><tbody><tr><td><tt class="literal">contextClass</tt></td><td>
            &#23454;&#29616;<tt class="interfacename">WebApplicationContext</tt>&#25509;&#21475;&#30340;&#31867;&#65292;&#24403;&#21069;&#30340;servlet&#29992;&#23427;&#26469;&#21019;&#24314;&#19978;&#19979;&#25991;&#12290;&#22914;&#26524;&#36825;&#20010;&#21442;&#25968;&#27809;&#26377;&#25351;&#23450;&#65292;
            &#40664;&#35748;&#20351;&#29992;<tt class="classname">XmlWebApplicationContext</tt>&#12290;
            </td></tr><tr><td><tt class="literal">contextConfigLocation</tt></td><td>
            &#20256;&#32473;&#19978;&#19979;&#25991;&#23454;&#20363;&#65288;&#30001;contextClass&#25351;&#23450;&#65289;&#30340;&#23383;&#31526;&#20018;&#65292;&#29992;&#26469;&#25351;&#23450;&#19978;&#19979;&#25991;&#30340;&#20301;&#32622;&#12290;&#36825;&#20010;&#23383;&#31526;&#20018;&#21487;&#20197;&#34987;&#20998;&#25104;&#22810;&#20010;&#23383;&#31526;&#20018;&#65288;&#20351;&#29992;&#36887;&#21495;&#20316;&#20026;&#20998;&#38548;&#31526;&#65289;
            &#26469;&#25903;&#25345;&#22810;&#20010;&#19978;&#19979;&#25991;&#65288;&#22312;&#22810;&#19978;&#19979;&#25991;&#30340;&#24773;&#20917;&#19979;&#65292;&#22914;&#26524;&#21516;&#19968;&#20010;bean&#34987;&#23450;&#20041;&#20004;&#27425;&#65292;&#21518;&#38754;&#19968;&#20010;&#20248;&#20808;&#65289;&#12290;
            </td></tr><tr><td><tt class="literal">namespace</tt></td><td><tt class="interfacename">WebApplicationContext</tt>&#21629;&#21517;&#31354;&#38388;&#12290;&#40664;&#35748;&#20540;&#26159;<tt class="literal">[server-name]-servlet</tt>&#12290;
            </td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="mvc-controller"></a>13.3.&nbsp;&#25511;&#21046;&#22120;</h2></div></div><div></div></div><p>&#25511;&#21046;&#22120;&#30340;&#27010;&#24565;&#26159;MVC&#35774;&#35745;&#27169;&#24335;&#30340;&#19968;&#37096;&#20998;&#65288;&#30830;&#20999;&#22320;&#35828;&#65292;&#26159;MVC&#20013;&#30340;<span class="emphasis"><em>C</em></span>&#65289;&#12290;&#24212;&#29992;&#31243;&#24207;&#30340;&#34892;&#20026;&#36890;&#24120;&#34987;&#23450;&#20041;&#20026;&#26381;&#21153;&#25509;&#21475;&#65292;
    &#32780;&#25511;&#21046;&#22120;&#20351;&#24471;&#29992;&#25143;&#21487;&#20197;&#35775;&#38382;&#24212;&#29992;&#25152;&#25552;&#20379;&#30340;&#26381;&#21153;&#12290;&#25511;&#21046;&#22120;&#35299;&#26512;&#29992;&#25143;&#36755;&#20837;&#65292;&#24182;&#23558;&#20854;&#36716;&#25442;&#25104;&#21512;&#29702;&#30340;&#27169;&#22411;&#25968;&#25454;&#65292;&#20174;&#32780;&#21487;&#20197;&#36827;&#19968;&#27493;&#30001;&#35270;&#22270;&#23637;&#31034;&#32473;&#29992;&#25143;&#12290;
    Spring&#20197;&#19968;&#31181;&#25277;&#35937;&#30340;&#26041;&#24335;&#23454;&#29616;&#20102;&#25511;&#21046;&#22120;&#27010;&#24565;&#65292;&#36825;&#26679;&#21487;&#20197;&#25903;&#25345;&#19981;&#21516;&#31867;&#22411;&#30340;&#25511;&#21046;&#22120;&#12290;Spring&#26412;&#36523;&#21253;&#21547;&#34920;&#21333;&#25511;&#21046;&#22120;&#12289;&#21629;&#20196;&#25511;&#21046;&#22120;&#12289;&#21521;&#23548;&#22411;&#25511;&#21046;&#22120;&#31561;&#22810;&#31181;&#22810;&#26679;&#30340;&#25511;&#21046;&#22120;&#12290;
    </p><p>Spring&#25511;&#21046;&#22120;&#26550;&#26500;&#30340;&#22522;&#30784;&#26159;<tt class="interfacename">org.springframework.mvc.Controller</tt>&#25509;&#21475;&#65292;&#20854;&#20195;&#30721;&#22914;&#19979;&#65306;</p><pre class="programlisting">public interface Controller {

    /**
     * Process the request and return a ModelAndView object which the DispatcherServlet
     * will render.
     */
    ModelAndView handleRequest(
        HttpServletRequest request,
        HttpServletResponse response) throws Exception;

}</pre><p>&#21487;&#20197;&#21457;&#29616;<tt class="interfacename">Controller</tt>&#25509;&#21475;&#20165;&#20165;&#22768;&#26126;&#20102;&#19968;&#20010;&#26041;&#27861;&#65292;&#23427;&#36127;&#36131;&#22788;&#29702;&#35831;&#27714;&#24182;&#36820;&#22238;&#21512;&#36866;&#30340;&#27169;&#22411;&#21644;&#35270;&#22270;&#12290;Spring MVC&#23454;&#29616;&#30340;&#22522;&#30784;
    &#23601;&#26159;&#36825;&#19977;&#20010;&#27010;&#24565;&#65306;Mdel&#12289;View&#65288;<tt class="classname">ModelAndView</tt>&#65289;&#20197;&#21450; <tt class="interfacename">Controller</tt>&#12290;&#34429;&#28982;<tt class="interfacename">
    Controller</tt>&#25509;&#21475;&#26159;&#23436;&#20840;&#25277;&#35937;&#30340;&#65292;&#20294;Spring&#20063;&#25552;&#20379;&#20102;&#35768;&#22810;&#20320;&#21487;&#33021;&#20250;&#29992;&#21040;&#30340;&#25511;&#21046;&#22120;&#12290;Controller&#25509;&#21475;&#20165;&#20165;&#23450;&#20041;&#20102;&#27599;&#20010;&#25511;&#21046;&#22120;&#37117;&#24517;&#39035;&#25552;&#20379;&#30340;&#22522;&#26412;&#21151;&#33021;&#65306;
    &#22788;&#29702;&#35831;&#27714;&#24182;&#36820;&#22238;&#19968;&#20010;&#27169;&#22411;&#21644;&#19968;&#20010;&#35270;&#22270;&#12290;
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-controller-abstractcontroller"></a>13.3.1.&nbsp;<tt class="classname">AbstractController</tt> &#21644; <tt class="classname">WebContentGenerator</tt></h3></div></div><div></div></div><p>&#20026;&#25552;&#20379;&#19968;&#22871;&#22522;&#30784;&#35774;&#26045;&#65292;&#25152;&#26377;&#30340;Spring&#25511;&#21046;&#22120;&#37117;&#32487;&#25215;&#20102; <tt class="classname">AbstractController</tt> &#65292;<tt class="classname">AbstractController
      </tt> &#25552;&#20379;&#20102;&#35832;&#22914;&#32531;&#23384;&#25903;&#25345;&#21644;mimetype&#35774;&#32622;&#36825;&#26679;&#30340;&#21151;&#33021;&#12290;
      </p><div class="table"><a name="mvc-controller-abstract-features"></a><p class="title"><b>Table&nbsp;13.3.&nbsp;<tt class="classname">AbstractController</tt>&#25552;&#20379;&#30340;&#21151;&#33021;</b></p><table summary="AbstractController&#25552;&#20379;&#30340;&#21151;&#33021;" border="1"><colgroup><col><col></colgroup><thead><tr><th>&#21151;&#33021;</th><th>&#25551;&#36848;</th></tr></thead><tbody><tr><td><tt class="literal">supportedMethods</tt></td><td>
              &#25351;&#23450;&#36825;&#20010;&#25511;&#21046;&#22120;&#24212;&#35813;&#25509;&#21463;&#20160;&#20040;&#26679;&#30340;&#35831;&#27714;&#26041;&#27861;&#12290;&#36890;&#24120;&#23427;&#34987;&#35774;&#32622;&#25104;&#21516;&#26102;&#25903;&#25345;GET&#21644;POST&#65292;&#20294;&#26159;&#21487;&#20197;&#36873;&#25321;&#20320;&#24819;&#25903;&#25345;&#30340;&#26041;&#27861;&#12290;&#22914;&#26524;&#25511;&#21046;&#22120;&#19981;&#25903;&#25345;&#35831;&#27714;&#21457;&#36865;&#30340;&#26041;&#27861;&#65292;
              &#23458;&#25143;&#31471;&#20250;&#24471;&#21040;&#36890;&#30693;&#65288;&#36890;&#24120;&#26159;&#25243;&#20986;&#19968;&#20010;<tt class="classname">ServletException</tt>&#65289;&#12290;
              </td></tr><tr><td><tt class="literal">requiresSession</tt></td><td>
              &#34920;&#26126;&#36825;&#20010;&#25511;&#21046;&#22120;&#26159;&#21542;&#38656;&#35201;HTTP session&#25165;&#33021;&#27491;&#24120;&#24037;&#20316;&#12290;&#22914;&#26524;&#25511;&#21046;&#22120;&#22312;&#27809;&#26377;session&#30340;&#24773;&#20917;&#19979;&#25509;&#25910;&#21040;&#35831;&#27714;&#65292;&#23458;&#25143;&#31471;&#20250;&#22240;&#20026;&#25243;&#20986;<tt class="classname">ServletException
              </tt>&#32780;&#24471;&#21040;&#36890;&#30693;&#12290;
              </td></tr><tr><td><tt class="literal">synchronizeOnSession</tt></td><td>
              &#25351;&#23450;controller&#26159;&#21542;&#21516;&#27493;&#29992;&#25143;&#30340;HTTP session&#12290;</td></tr><tr><td><tt class="literal">cacheSeconds</tt></td><td>
              &#25351;&#23450;controller&#36890;&#30693;&#23458;&#25143;&#31471;&#23545;&#25968;&#25454;&#20869;&#23481;&#32531;&#23384;&#30340;&#31186;&#25968;&#65292;&#19968;&#33324;&#20026;&#22823;&#20110;&#38646;&#30340;&#25972;&#25968;&#12290;&#40664;&#35748;&#20540;&#20026;<span class="emphasis"><em>-1</em></span>&#65292;&#21363;&#19981;&#32531;&#23384;&#12290;</td></tr><tr><td><tt class="literal">useExpiresHeader</tt></td><td>
              &#25351;&#23450;Controller&#22312;&#21709;&#24212;&#35831;&#27714;&#26102;&#26159;&#21542;&#20860;&#23481;HTTP 1.0 <span class="emphasis"><em>Expires</em></span> header&#12290;&#32570;&#30465;&#20540;&#20026;<tt class="literal">true</tt>&#12290;</td></tr><tr><td><tt class="literal">useCacheHeader</tt></td><td>
              &#25351;&#23450;Controller&#22312;&#30456;&#24212;&#35831;&#27714;&#26102;&#26159;&#21542;&#20860;&#23481;HTTP 1.1 <span class="emphasis"><em>Cache-Control</em></span> header&#12290;&#40664;&#35748;&#20540;&#20026;<tt class="literal">true</tt>&#12290;</td></tr></tbody></table></div><p>&#24403;&#20174;<tt class="classname">AbstractController</tt>&#32487;&#25215;&#26102;&#65292;&#21482;&#38656;&#35201;&#23454;&#29616;<tt class="literal">handleRequestInternal(HttpServletRequest, 
      HttpServletResponse)</tt>&#25277;&#35937;&#26041;&#27861;&#65292;&#35813;&#26041;&#27861;&#23558;&#29992;&#26469;&#23454;&#29616;&#33258;&#23450;&#20041;&#30340;&#36923;&#36753;&#65292;&#24182;&#36820;&#22238;&#19968;&#20010;<tt class="classname">ModelAndView</tt>&#23545;&#35937;&#12290;&#19979;&#38754;&#36825;&#20010;&#31616;&#21333;&#30340;&#20363;&#23376;&#28436;&#31034;
      &#20102;&#22914;&#20309;&#20174;<tt class="classname">AbstractController</tt>&#32487;&#25215;&#20197;&#21450;&#22914;&#20309;&#22312;applicationContext.xml&#20013;&#36827;&#34892;&#37197;&#32622;&#12290;
      </p><pre class="programlisting">package samples;

public class SampleController extends AbstractController {

    public ModelAndView handleRequestInternal(
        HttpServletRequest request,
        HttpServletResponse response) throws Exception {

        ModelAndView mav = new ModelAndView("hello");
        mav.addObject("message", "Hello World!");
        return mav;        
    }
}</pre><pre class="programlisting">&lt;bean id="sampleController" class="samples.SampleController"&gt;
    &lt;property name="cacheSeconds" value="120"/&gt;
&lt;/bean&gt;</pre><p>&#35201;&#35753;&#35813;&#31616;&#21333;&#25511;&#21046;&#22120;&#24037;&#20316;&#65292;
      &#38500;&#21019;&#24314;&#19968;&#20010;handler mapping&#65288;&#35831;&#21442;&#32771;<a href="#mvc-handlermapping" title="13.4.&nbsp;&#22788;&#29702;&#22120;&#26144;&#23556;&#65288;handler mapping&#65289;">Section&nbsp;13.4, &#8220;&#22788;&#29702;&#22120;&#26144;&#23556;&#65288;handler mapping&#65289;&#8221;</a>&#19968;&#33410;&#65289;&#22806;&#65292;
      &#38656;&#35201;&#30340;&#20840;&#37096;&#23601;&#26159;&#19978;&#38754;&#30340;&#31867;&#21644;&#22312;web application context&#20013;&#30340;&#22768;&#26126;&#12290;
      &#35813;controller&#22312;&#20877;&#27425;&#26816;&#26597;&#21069;&#65292;&#36890;&#30693;&#23458;&#25143;&#31471;&#23558;&#21709;&#24212;&#25968;&#25454;&#32531;&#23384;2&#20998;&#38047;&#65292;&#24182;&#36820;&#22238;&#20351;&#29992;&#30828;&#32534;&#30721;&#30340;&#35270;&#22270;&#21517;&#65288;&#23613;&#31649;&#36825;&#26679;&#20570;&#19981;&#22909;&#65289;&#12290;
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-controller-othersimplecontrollers"></a>13.3.2.&nbsp;&#20854;&#23427;&#30340;&#31616;&#21333;&#25511;&#21046;&#22120;</h3></div></div><div></div></div><p>&#23613;&#31649;&#21487;&#20197;&#32487;&#25215;<tt class="classname">AbstractController</tt>&#26469;&#23454;&#29616;&#33258;&#24049;&#30340;&#25511;&#21046;&#22120;&#65292;&#19981;&#36807;Spring&#25552;&#20379;&#30340;&#20247;&#22810;&#25511;&#21046;&#22120;&#20943;&#36731;&#20102;&#25105;&#20204;&#24320;&#21457;&#31616;&#21333;MVC&#24212;&#29992;&#26102;&#30340;&#36127;&#25285;&#12290;
      <tt class="classname">ParameterizableViewController</tt>&#22522;&#26412;&#19978;&#21644;&#19978;&#38754;&#20363;&#23376;&#20013;&#30340;&#19968;&#26679;&#65292;&#19981;&#21516;&#30340;&#26159;&#65292;&#21487;&#20197;&#22312;application context&#20013;&#25351;&#23450;&#36820;&#22238;&#30340;&#35270;&#22270;&#21517;&#31216;&#65288;&#20174;&#32780;
      &#36991;&#20813;&#20102;&#22312;Java&#20195;&#30721;&#20013;&#30340;&#30828;&#32534;&#30721;&#65289;&#12290;
      </p><p><tt class="classname">UrlFilenameViewController</tt>&#20250;&#26816;&#26597;URL&#65292;&#33719;&#21462;&#25991;&#20214;&#35831;&#27714;&#30340;&#25991;&#20214;&#21517;&#65292;&#24182;&#25226;&#23427;&#20316;&#20026;&#35270;&#22270;&#21517;&#21152;&#20197;&#20351;&#29992;&#12290;&#12290;&#20363;&#22914;&#65292;<tt class="literal">
      http://www.springframework.org/index.html</tt>&#23545;&#24212;&#30340;&#35270;&#22270;&#25991;&#20214;&#21517;&#26159;<tt class="literal">index</tt>&#12290;
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-controller-multiaction"></a>13.3.3.&nbsp;<tt class="classname">MultiActionController</tt></h3></div></div><div></div></div><p>Spring&#25552;&#20379;&#20102;<tt class="classname">MultiActionController</tt>&#26469;&#23558;&#22810;&#20010;&#35831;&#27714;&#22788;&#29702;&#26041;&#27861;&#21512;&#24182;&#22312;&#19968;&#20010;&#25511;&#21046;&#22120;&#37324;&#65292;&#36825;&#26679;&#21487;&#20197;&#25226;&#30456;&#20851;&#21151;&#33021;&#32452;&#21512;&#22312;&#19968;&#36215;&#12290;<tt class="classname">
      &#65288;&#22914;&#26524;&#20320;&#24456;&#29087;&#24713;Struts&#65292;&#20250;&#21457;&#29616;&#36825;&#19982;Struts&#30340;<tt class="classname">DispatchAction</tt>&#24456;&#20687;&#65289;
      MultiActionController</tt>&#20301;&#20110;<tt class="literal">org.springframework.web.mvc.multiaction</tt>&#21253;&#20013;&#65292;&#23427;&#21487;&#20197;&#23450;&#20041;&#39029;&#38754;&#35831;&#27714;&#21040;&#25511;&#21046;&#22120;&#26041;&#27861;&#21517;&#30340;&#26144;&#23556;&#65292;
      &#28982;&#21518;&#22312;&#22788;&#29702;&#30456;&#24212;&#35831;&#27714;&#26102;&#35843;&#29992;&#35813;&#26041;&#27861;&#12290;&#24403;&#20320;&#26377;&#24456;&#22810;&#27604;&#36739;&#23567;&#30340;&#19988;&#30456;&#20851;&#30340;&#21151;&#33021;&#26102;&#20351;&#29992;<tt class="classname">MultiActionController</tt>&#24456;&#26041;&#20415;&#65292;&#36825;&#26679;&#23601;&#19981;&#24517;&#20026;&#27599;&#20010;&#23567;&#21151;&#33021;&#21019;&#24314;
      &#19968;&#20010;&#21333;&#29420;&#30340;<tt class="interfacename">Controller</tt>&#20102;&#12290;&#20294;&#26159;&#19968;&#33324;&#26469;&#35828;<tt class="classname">MultiActionController</tt>&#19981;&#36866;&#21512;&#22788;&#29702;&#22797;&#26434;&#36923;&#36753;&#65292;&#25110;&#32773;&#23436;&#20840;&#19981;&#30456;&#20851;
      &#30340;&#21151;&#33021;&#65292;&#36825;&#26102;&#24212;&#35813;&#22362;&#25345;&#20351;&#29992;&#26631;&#20934;&#26041;&#27861;&#65292;&#24403;&#22312;&#19968;&#20010;&#25511;&#21046;&#22120;&#23384;&#22312;&#22823;&#37327;&#20844;&#20849;&#30340;&#34892;&#20026;&#65292;&#20294;&#26159;&#26377;&#22810;&#20010;&#35843;&#29992;&#20837;&#21475;&#26102;&#65292;&#20351;&#29992;<tt class="classname">MultiActionController</tt>&#23601;&#29305;&#21035;&#26041;&#20415;&#12290;
      </p><p><tt class="classname">MultiActionController</tt>&#26377;&#20004;&#31181;&#20351;&#29992;&#26041;&#24335;&#65306;&#19968;&#26159;&#21019;&#24314;<tt class="classname">MultiActionController</tt>&#30340;&#23376;&#31867;&#65292;&#24182;&#25351;&#23450;&#23558;&#34987;
      <tt class="interfacename">MethodNameResolver</tt>&#35299;&#26512;&#30340;&#26041;&#27861;&#65288;&#36825;&#31181;&#24773;&#20917;&#19979;&#19981;&#38656;&#35201;&#36825;&#20010;delegate&#21442;&#25968;&#65289;&#65307;&#20108;&#26159;&#23450;&#20041;&#19968;&#20010;&#22996;&#25176;&#23545;&#35937;&#65292;<tt class="interfacename">
      MethodNameResolver</tt>&#35299;&#26512;&#20986;&#30446;&#26631;&#26041;&#27861;&#21518;&#23558;&#35843;&#29992;&#35813;&#23545;&#35937;&#30340;&#30456;&#24212;&#26041;&#27861;&#12290;&#36825;&#31181;&#24773;&#20917;&#19979;&#38656;&#35201;&#23450;&#20041;<tt class="classname">MultiActionController</tt>
      &#30340;&#23454;&#20363;&#24182;&#23558;&#22996;&#25176;&#23545;&#35937;&#20316;&#20026;&#21327;&#20316;&#32773;&#27880;&#20837;&#65288;&#21487;&#36890;&#36807;&#26500;&#36896;&#21442;&#25968;&#25110;&#32773;<tt class="methodname">setDelegate</tt>&#26041;&#27861;&#65289;&#12290;
      </p><p><tt class="classname">MultiActionController</tt>&#38656;&#35201;&#19968;&#31181;&#31574;&#30053;&#65292;&#20351;&#20854;&#21487;&#20197;&#36890;&#36807;&#35299;&#26512;&#35831;&#27714;&#20449;&#24687;&#26469;&#33719;&#24471;&#35201;&#35843;&#29992;&#30340;&#26041;&#27861;&#12290;&#36825;&#20010;&#35299;&#26512;&#31574;&#30053;&#30001;<tt class="interfacename">
      MethodNameResolver</tt>&#25509;&#21475;&#23450;&#20041;&#12290;<tt class="classname">MultiActionController</tt>&#25552;&#20379;&#20102;'<tt class="literal">methodNameResolver</tt>'
      &#23646;&#24615;&#20351;&#24471;&#20320;&#21487;&#20197;&#27880;&#20837;&#38656;&#35201;&#30340;<tt class="interfacename">MethodNameResolver</tt>&#12290;&#22312;&#33258;&#24049;&#30340;<tt class="classname">MultiActionController</tt>&#65288;&#25110;&#32773;&#21069;&#38754;&#35828;&#30340;&#22996;&#25176;&#23545;&#35937;&#65289;
      &#19978;&#23450;&#20041;&#30340;&#35831;&#27714;&#22788;&#29702;&#26041;&#27861;&#24517;&#39035;&#31526;&#21512;&#22914;&#19979;&#31614;&#21517;&#65306;
      </p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">// '<tt class="literal">anyMeaningfulName</tt>'&#25351;&#20219;&#24847;&#26041;&#27861;&#21517;</span></i>
public [ModelAndView | Map | void] anyMeaningfulName(HttpServletRequest, HttpServletResponse [,HttpSession] [,AnyObject])</pre><p>&#19978;&#36848;&#26041;&#27861;&#30340;&#35814;&#32454;&#20449;&#24687;&#21487;&#21442;&#32771;<a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/web/servlet/mvc/multiaction/MultiActionController.html" target="_top">
      MultiActionController&#31867; Javadoc</a>&#12290;&#22914;&#26524;&#25171;&#31639;&#20351;&#29992;<tt class="classname">MultiActionController</tt>&#65292;&#37027;&#26368;&#22909;&#30475;&#30475;&#23427;&#30340;Javadoc&#12290;&#19981;&#36807;&#65292;&#19979;&#38754;&#25552;&#20379;&#20102;
      &#19968;&#20123;&#20851;&#20110;&#21512;&#27861;&#30340;&#35831;&#27714;&#22788;&#29702;&#26041;&#27861;&#30340;&#22522;&#26412;&#20363;&#23376;&#12290;</p><p>&#26631;&#20934;&#26684;&#24335;&#65288;&#36319;<tt class="interfacename">Controller</tt>&#25509;&#21475;&#23450;&#20041;&#30340;&#19968;&#26679;&#65289;&#12290;</p><pre class="programlisting">public ModelAndView displayCatalog(HttpServletRequest, HttpServletResponse)</pre><p>&#19979;&#38754;&#36825;&#20010;&#26041;&#27861;&#25509;&#25910;<tt class="classname">Login</tt>&#21442;&#25968;&#65292;&#35813;&#21442;&#25968;&#20013;&#21253;&#21547;&#20174;&#35831;&#27714;&#20013;&#25277;&#21462;&#20986;&#26469;&#30340;&#20449;&#24687;&#12290;</p><pre class="programlisting">public ModelAndView login(HttpServletRequest, HttpServletResponse, Login)</pre><p>&#19979;&#38754;&#36825;&#20010;&#26041;&#27861;&#35201;&#27714;&#35831;&#27714;&#20013;&#24050;&#32463;&#23384;&#22312;&#21512;&#27861;&#30340;session&#23545;&#35937;&#12290;</p><pre class="programlisting">public ModelAndView viewCart(HttpServletRequest, HttpServletResponse, HttpSession)</pre><p>&#19979;&#38754;&#36825;&#20010;&#26041;&#27861;&#25509;&#21463;&#19968;&#20010;<tt class="classname">Product</tt>&#21442;&#25968;&#65292;&#36825;&#20010;&#21442;&#25968;&#21253;&#21547;&#20174;&#35831;&#27714;&#20013;&#25277;&#21462;&#20986;&#26469;&#30340;&#20449;&#24687;&#65292;<span class="emphasis"><em>&#24182;&#19988;</em></span>&#35201;&#27714;&#35831;&#27714;&#20013;&#24050;&#32463;&#23384;&#22312;&#19968;&#20010;
      &#21512;&#27861;&#30340;session&#23545;&#35937;&#12290;&#27880;&#24847;&#21442;&#25968;&#30340;&#39034;&#24207;&#24456;&#37325;&#35201;&#65306;session&#24517;&#39035;&#26159;&#31532;&#19977;&#20010;&#21442;&#25968;&#65292;&#32780;&#32465;&#23450;&#21442;&#25968;&#24517;&#39035;&#26159;final&#30340;&#65292;&#24182;&#20301;&#20110;session&#20043;&#21518;&#12290;
      </p><pre class="programlisting">public ModelAndView updateCart(HttpServletRequest, HttpServletResponse, HttpSession, Product)</pre><p>&#19979;&#38754;&#36825;&#20010;&#26041;&#27861;&#22768;&#26126;&#36820;&#22238;<tt class="literal">void</tt>&#31867;&#22411;&#65292;&#36825;&#35828;&#26126;&#23427;&#20250;&#30452;&#25509;&#20889;response&#12290;</p><pre class="programlisting">public void home(HttpServletRequest, HttpServletResponse)</pre><p>&#19979;&#38754;&#36825;&#20010;&#26041;&#27861;&#36820;&#22238;<tt class="interfacename">Map</tt>&#65292;&#34920;&#26126;&#35270;&#22270;&#35299;&#26512;&#22120;&#24212;&#35813;&#20174;&#35831;&#27714;&#20013;&#25277;&#21462;&#35270;&#22270;&#21517;&#65292;&#32780;&#36820;&#22238;&#25968;&#25454;&#23558;&#34987;&#25918;&#20837;model
      &#65288;&#21442;&#32771;<a href="#mvc-coc" title="13.11.&nbsp;&#24815;&#20363;&#20248;&#20808;&#21407;&#21017;&#65288;convention over configuration&#65289;">Section&nbsp;13.11, &#8220;&#24815;&#20363;&#20248;&#20808;&#21407;&#21017;&#65288;convention over configuration&#65289;&#8221;</a>&#65289;&#12290;
      </p><pre class="programlisting">public Map list(HttpServletRequest, HttpServletResponse)</pre><p><tt class="interfacename">MethodNameResolver</tt>&#36127;&#36131;&#20174;&#35831;&#27714;&#20013;&#35299;&#26512;&#20986;&#38656;&#35201;&#35843;&#29992;&#30340;&#26041;&#27861;&#21517;&#31216;&#12290;Spring&#26412;&#36523;&#24050;&#32463;&#25552;&#20379;&#20102;&#19968;&#31995;&#21015;<tt class="interfacename">
      MethodNameResolver</tt>&#30340;&#23454;&#29616;&#65292;&#24403;&#28982;&#20063;&#21487;&#20197;&#32534;&#20889;&#33258;&#24049;&#30340;&#23454;&#29616;&#12290;&#27880;&#24847;&#65292;&#22914;&#26524;&#27809;&#26377;&#26126;&#30830;&#27880;&#20837;&#33258;&#24049;&#30340;&#23454;&#29616;&#65292;Spring&#40664;&#35748;&#20351;&#29992;<tt class="classname">
      InternalPathMethodNameResolver</tt>&#12290;
      </p><div class="itemizedlist"><ul type="disc"><li><p><tt class="classname">InternalPathMethodNameResolver</tt> -&#20174;&#35831;&#27714;&#36335;&#24452;&#20013;&#33719;&#21462;&#25991;&#20214;&#21517;&#20316;&#20026;&#26041;&#27861;&#21517;</p><p>&#27604;&#22914;&#65292;<tt class="literal">http://www.sf.net/testing.view</tt>&#30340;&#35831;&#27714;&#20250;&#35843;&#29992;<tt class="literal">testing(HttpServletRequest,HttpServletResponse)</tt>&#26041;&#27861;&#12290;</p></li><li><p><tt class="classname">ParameterMethodNameResolver</tt> - &#35299;&#26512;&#35831;&#27714;&#21442;&#25968;&#65292;&#24182;&#23558;&#23427;&#20316;&#20026;&#26041;&#27861;&#21517;&#12290;</p><p>&#27604;&#22914;&#65292;&#23545;&#24212;<tt class="literal">http://www.sf.net/index.view?method=testIt</tt>&#30340;&#35831;&#27714;&#65292;&#20250;&#35843;&#29992;
          <tt class="literal">testIt(HttpServletRequest, HttpServletResponse)</tt>&#26041;&#27861;)&#12290;&#20351;&#29992;<tt class="literal">paramName</tt>&#23646;&#24615;&#23450;&#20041;&#35201;&#20351;&#29992;&#30340;&#35831;&#27714;&#21442;&#25968;&#21517;&#31216;&#12290;
          </p></li><li><p><tt class="classname">PropertiesMethodNameResolver</tt> - &#20351;&#29992;&#29992;&#25143;&#33258;&#23450;&#20041;&#30340;&#23646;&#24615;&#65288;Properties&#65289;&#23545;&#35937;&#65292;&#23558;&#35831;&#27714;&#30340;URL&#26144;&#23556;&#21040;&#26041;&#27861;&#21517;&#12290;&#27604;&#22914;&#65292;&#24403;&#23646;&#24615;&#20013;&#21253;&#21547;
          <tt class="literal">/index/welcome.html=doIt</tt>&#26102;&#65292;&#23545;<tt class="literal">/index/welcome.html</tt> &#30340;&#35831;&#27714;&#20250;&#35843;&#29992;
          <tt class="literal">doIt(HttpServletRequest, HttpServletResponse)</tt>&#26041;&#27861;&#12290; <tt class="classname">PropertiesMethodNameResolver</tt>&#20869;&#37096;&#20351;&#29992;&#20102;
          Spring&#30340;<tt class="literal">PathMatcher</tt>&#65292;&#25152;&#20197;&#25903;&#25345;&#36335;&#24452;&#36890;&#37197;&#31526;&#65292;&#27604;&#22914;&#19978;&#36793;&#37027;&#20010;URL&#20889;&#25104;<tt class="literal">/**/welcom?.html</tt>&#20063;&#26159;&#21487;&#20197;&#30340;&#12290;
          </p></li></ul></div><p>&#21487;&#20197;&#22768;&#26126;&#33258;&#24049;&#30340;&#26041;&#27861;&#26469;&#22788;&#29702;&#35831;&#27714;&#22788;&#29702;&#36807;&#31243;&#20013;&#20135;&#29983;&#30340;<tt class="classname">Exceptions</tt>&#12290;&#35813;&#26041;&#27861;&#30340;&#31614;&#21517;&#19982;&#35831;&#27714;&#22788;&#29702;&#26041;&#27861;&#30340;&#31614;&#21517;&#31867;&#20284;&#65306;&#31532;&#19968;&#20010;&#21442;&#25968;&#24517;&#39035;&#26159;
      <tt class="interfacename">HttpServletRequest</tt>&#65292;&#31532;&#20108;&#20010;&#21442;&#25968;&#24517;&#39035;&#26159;<tt class="interfacename">HttpServletResponse</tt>&#12290;&#19981;&#36807;&#19982;&#35831;&#27714;&#22788;&#29702;
      &#26041;&#27861;&#19981;&#21516;&#30340;&#26159;&#65292;&#35813;&#26041;&#27861;&#30340;&#21517;&#23383;&#21487;&#20197;&#20219;&#24847;&#65292;&#20855;&#20307;&#21305;&#37197;&#31574;&#30053;&#30001;&#35813;&#26041;&#27861;&#30340;&#31532;&#19977;&#20010;&#21442;&#25968;&#65288;&#21442;&#25968;&#31867;&#22411;&#24517;&#39035;&#26159;&#19968;&#31181;<tt class="classname">Exception</tt>&#65289;&#20915;&#23450;&#12290;Spring&#26681;&#25454;&#26368;&#25509;&#36817;&#30340;
      &#24322;&#24120;&#31867;&#22411;&#36827;&#34892;&#21305;&#37197;&#12290;&#19979;&#38754;&#26159;&#19968;&#20010;&#36825;&#31181;&#24322;&#24120;&#22788;&#29702;&#26041;&#27861;&#31614;&#21517;&#30340;&#20363;&#23376;&#65306;
      </p><pre class="programlisting">public ModelAndView processException(HttpServletRequest, HttpServletResponse, IllegalArgumentException)</pre><p>&#25105;&#20204;&#26469;&#30475;&#19968;&#20010;&#20363;&#23376;&#65292;&#20854;&#20013;&#23637;&#31034;&#20102;<tt class="classname">MultiActionController</tt>&#19982;<tt class="classname">ParameterMethodNameResolver</tt>&#19968;&#21516;&#20351;&#29992;&#30340;&#22996;&#25176;&#26041;&#24335;&#12290;</p><pre class="programlisting">&lt;bean id="paramMultiController"
      class="org.springframework.web.servlet.mvc.multiaction.MultiActionController"&gt;

    &lt;property name="methodNameResolver"&gt;
        &lt;bean class="org.springframework.web.servlet.mvc.multiaction.ParameterMethodNameResolver"&gt;
            &lt;property name="paramName" value="method"/&gt;
        &lt;/bean&gt;
    &lt;/property&gt;

    &lt;property name="delegate"&gt;
        &lt;bean class="samples.SampleDelegate"/&gt;
    &lt;/property&gt;

&lt;/bean&gt;
}</pre><pre class="programlisting">public class SampleDelegate {

    public ModelAndView retrieveIndex(HttpServletRequest req, HttpServletResponse resp) {
        return new ModelAndView("index", "date", new Long(System.currentTimeMillis()));
    }
}</pre><p>&#24403;&#20351;&#29992;&#19978;&#36848;&#30340;&#22996;&#25176;&#26041;&#24335;&#26102;&#65292;&#25105;&#20204;&#38656;&#35201;&#37197;&#32622;<tt class="classname">PropertiesMethodNameResolver</tt>&#65292;&#26469;&#23436;&#25104;&#19982;&#25105;&#20204;&#23450;&#20041;&#30340;&#26041;&#27861;&#30340;&#20219;&#24847;&#25968;&#37327;&#30340;URL&#30340;&#21305;&#37197;&#12290;</p><pre class="programlisting">&lt;bean id="propsResolver"
      class="org....mvc.multiaction.PropertiesMethodNameResolver"&gt;
    &lt;property name="mappings"&gt;
        &lt;value&gt;
/index/welcome.html=retrieveIndex
/**/notwelcome.html=retrieveIndex
/*/user?.html=retrieveIndex
        &lt;/value&gt;
    &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id="paramMultiController" class="org....mvc.multiaction.MultiActionController"&gt;

    &lt;property name="methodNameResolver" ref="propsResolver"/&gt;
    &lt;property name="delegate"&gt;
        &lt;bean class="samples.SampleDelegate"/&gt;
    &lt;/property&gt;

&lt;/bean&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-controller-command"></a>13.3.4.&nbsp;&#21629;&#20196;&#25511;&#21046;&#22120;</h3></div></div><div></div></div><p>Spring&#30340;<span class="emphasis"><em>command controllers</em></span>&#26159;Spring MVC&#30340;&#37325;&#35201;&#37096;&#20998;&#12290;
      &#21629;&#20196;&#25511;&#21046;&#22120;&#25552;&#20379;&#20102;&#19968;&#31181;&#21644;&#25968;&#25454;&#23545;&#35937;&#20132;&#20114;&#30340;&#26041;&#24335;&#65292;&#24182;&#21160;&#24577;&#22320;&#23558;&#26469;&#33258;<tt class="interfacename">HttpServletRequest</tt>&#30340;&#21442;&#25968;&#32465;&#23450;&#21040;&#25351;&#23450;&#30340;&#25968;&#25454;&#23545;&#35937;&#19978;&#12290;
      &#23427;&#30340;&#21151;&#33021;&#21644;Struts&#20013;&#30340;<tt class="classname">ActionForm</tt>&#26377;&#28857;&#20687;&#65292;&#19981;&#36807;&#22312;Spring&#20013;&#65292;&#19981;&#38656;&#35201;&#23454;&#29616;&#20219;&#20309;&#25509;&#21475;&#26469;&#23454;&#29616;&#25968;&#25454;&#32465;&#23450;&#12290;
      &#39318;&#20808;&#65292;&#35753;&#25105;&#20204;&#30475;&#19968;&#19979;&#26377;&#21738;&#20123;&#21487;&#20197;&#20351;&#29992;&#30340;&#21629;&#20196;&#25511;&#21046;&#22120;&#65306;
      </p><div class="itemizedlist"><ul compact="compact" type="disc"><li><p><tt class="classname">AbstractCommandController</tt> &#65293; &#21487;&#20197;&#20351;&#29992;&#35813;&#25277;&#35937;&#21629;&#20196;&#25511;&#21046;&#22120;&#26469;&#21019;&#24314;&#33258;&#24049;&#30340;&#21629;&#20196;&#25511;&#21046;&#22120;&#65292;&#23427;&#33021;&#22815;&#23558;&#35831;&#27714;&#21442;&#25968;&#32465;&#23450;&#21040;&#25351;&#23450;&#30340;&#21629;&#20196;&#23545;&#35937;&#12290;
          &#36825;&#20010;&#31867;&#24182;&#19981;&#25552;&#20379;&#20219;&#20309;&#34920;&#21333;&#21151;&#33021;&#65292;&#20294;&#26159;&#23427;&#25552;&#20379;&#39564;&#35777;&#21151;&#33021;&#65292;&#24182;&#19988;&#35753;&#20320;&#22312;&#25511;&#21046;&#22120;&#20013;&#21435;&#23454;&#29616;&#22914;&#20309;&#22788;&#29702;&#30001;&#35831;&#27714;&#21442;&#25968;&#20540;&#20135;&#29983;&#30340;&#21629;&#20196;&#23545;&#35937;&#12290;			
			</p></li><li><p><tt class="classname">AbstractFormController</tt> &#65293; &#19968;&#20010;&#25903;&#25345;&#34920;&#21333;&#25552;&#20132;&#30340;&#25277;&#35937;&#25511;&#21046;&#22120;&#31867;&#12290;
          &#20351;&#29992;&#36825;&#20010;&#25511;&#21046;&#22120;&#65292;&#21487;&#20197;&#23450;&#20041;&#34920;&#21333;&#65292;&#24182;&#20351;&#29992;&#20174;&#25511;&#21046;&#22120;&#33719;&#21462;&#30340;&#25968;&#25454;&#23545;&#35937;&#26500;&#24314;&#34920;&#21333;&#12290;
          &#24403;&#29992;&#25143;&#36755;&#20837;&#34920;&#21333;&#20869;&#23481;&#65292;<tt class="classname">AbstractFormController</tt>&#23558;&#29992;&#25143;&#36755;&#20837;&#30340;&#20869;&#23481;&#32465;&#23450;&#21040;&#21629;&#20196;&#23545;&#35937;&#65292;&#39564;&#35777;&#34920;&#21333;&#20869;&#23481;&#65292;
          &#24182;&#23558;&#35813;&#23545;&#35937;&#20132;&#32473;&#25511;&#21046;&#22120;&#65292;&#23436;&#25104;&#30456;&#24212;&#30340;&#25805;&#20316;&#12290;&#23427;&#25903;&#25345;&#30340;&#21151;&#33021;&#26377;&#38450;&#27490;&#37325;&#22797;&#25552;&#20132;&#12289;&#34920;&#21333;&#39564;&#35777;&#20197;&#21450;&#19968;&#33324;&#30340;&#34920;&#21333;&#22788;&#29702;&#27969;&#31243;&#12290;
          &#23376;&#31867;&#38656;&#35201;&#23454;&#29616;&#33258;&#24049;&#30340;&#26041;&#27861;&#26469;&#25351;&#23450;&#37319;&#29992;&#21738;&#20010;&#35270;&#22270;&#26469;&#26174;&#31034;&#36755;&#20837;&#34920;&#21333;&#65292;&#21738;&#20010;&#35270;&#22270;&#26174;&#31034;&#34920;&#21333;&#27491;&#30830;&#25552;&#20132;&#21518;&#30340;&#32467;&#26524;&#12290;
          &#22914;&#26524;&#38656;&#35201;&#34920;&#21333;&#65292;&#20294;&#19981;&#24819;&#22312;&#24212;&#29992;&#19978;&#19979;&#25991;&#20013;&#25351;&#23450;&#26174;&#31034;&#32473;&#29992;&#25143;&#30340;&#35270;&#22270;&#65292;&#21487;&#20351;&#29992;&#35813;&#25511;&#21046;&#22120;&#12290;
			</p></li><li><p>
            <tt class="classname">SimpleFormController</tt> &#65293; &#36825;&#26159;&#19968;&#20010;form controller&#65292;&#24403;&#38656;&#35201;&#26681;&#25454;&#21629;&#20196;&#23545;&#35937;&#26469;&#21019;&#24314;&#30456;&#24212;&#30340;form&#30340;&#26102;&#20505;&#65292;&#35813;&#31867;&#21487;&#20197;&#25552;&#20379;&#26356;&#22810;&#30340;&#25903;&#25345;&#12290;
            &#21487;&#20197;&#20026;&#20854;&#25351;&#23450;&#19968;&#20010;&#21629;&#20196;&#23545;&#35937;&#65292;&#26174;&#31034;&#34920;&#21333;&#30340;&#35270;&#22270;&#21517;&#65292;&#24403;&#34920;&#21333;&#25552;&#20132;&#25104;&#21151;&#21518;&#26174;&#31034;&#32473;&#29992;&#25143;&#30340;&#35270;&#22270;&#21517;&#31561;&#31561;&#12290;
          </p></li><li><p><tt class="classname">AbstractWizardFormController</tt> &#65293; &#36825;&#26159;&#19968;&#20010;&#25277;&#35937;&#31867;&#65292;&#32487;&#25215;&#36825;&#20010;&#31867;&#38656;&#35201;&#23454;&#29616;<tt class="literal">validatePage()</tt>&#12289;<tt class="literal">processFinish()</tt> &#21644;<tt class="literal">processCancel()</tt> &#26041;&#27861;&#12290;</p><p>&#20320;&#26377;&#21487;&#33021;&#20063;&#38656;&#35201;&#20889;&#19968;&#20010;contractor&#65292;&#23427;&#33267;&#23569;&#38656;&#35201;&#35843;&#29992;<tt class="literal">setPages()</tt>&#21644;<tt class="literal">setCommandName()</tt>&#26041;&#27861;&#12290;setPages()&#30340;&#21442;&#25968;&#26159;&#19968;&#20010;String&#25968;&#32452;&#65292;&#36825;&#20010;&#25968;&#32452;&#21253;&#21547;&#20102;&#32452;&#25104;&#21521;&#23548;&#30340;&#35270;&#22270;&#21517;&#12290;
            setCommandName()&#30340;&#21442;&#25968;&#26159;&#19968;&#20010;String&#65292;&#35813;&#21442;&#25968;&#23558;&#29992;&#26469;&#22312;&#35270;&#22270;&#20013;&#35843;&#29992;&#20320;&#30340;&#21629;&#20196;&#23545;&#35937;&#12290;
            </p><p>&#21644;<tt class="classname">AbstractFormController</tt>&#30340;&#23454;&#20363;&#19968;&#26679;, &#38656;&#35201;&#20351;&#29992;&#21629;&#20196;&#23545;&#35937;&#65288;&#20854;&#23454;&#23601;&#26159;&#19968;&#20010;JavaBean&#65292; &#36825;&#20010;bean&#20013;&#21253;&#21547;&#20102;&#34920;&#21333;&#30340;&#20449;&#24687;&#65289;&#12290;
            &#36825;&#37324;&#26377;&#20004;&#20010;&#36873;&#25321;&#65306;&#22312;&#26500;&#36896;&#20989;&#25968;&#20013;&#35843;&#29992;<tt class="literal">setCommandClass()</tt>&#26041;&#27861;&#65288;&#21442;&#25968;&#26159;&#21629;&#20196;&#23545;&#35937;&#30340;&#31867;&#21517;&#65289;&#65292;&#25110;&#32773;&#23454;&#29616;<tt class="literal">formBackingObject()</tt>&#26041;&#27861;&#12290;
            </p><p><tt class="classname">AbstractWizardFormController</tt> &#26377;&#22810;&#20010;&#21487;&#20197;&#35206;&#20889;&#65288;override&#65289;&#30340;&#26041;&#27861;&#12290;
            &#26368;&#26377;&#29992;&#30340;&#19968;&#20010;&#26159;<tt class="literal">referenceData(..)</tt>&#12290;
            &#36825;&#20010;&#26041;&#27861;&#20801;&#35768;&#25226;&#27169;&#22411;&#25968;&#25454;&#20197;<tt class="interfacename">Map</tt>&#30340;&#26684;&#24335;&#20256;&#36882;&#32473;&#35270;&#22270;&#65307;<tt class="literal">getTargetPage()</tt> &#20801;&#35768;&#21160;&#24577;&#22320;&#26356;&#25913;&#21521;&#23548;&#30340;&#39029;&#38754;&#39034;&#24207;&#65292;
            &#25110;&#32773;&#30452;&#25509;&#36339;&#36807;&#26576;&#20123;&#39029;&#38754;&#65307;<tt class="literal">onBindAndValidate()</tt> &#20801;&#35768;&#35206;&#20889;&#20869;&#32622;&#30340;&#32465;&#23450;&#21644;&#39564;&#35777;&#27969;&#31243;&#12290;
            </p><p>&#26368;&#21518;&#65292;&#25105;&#20204;&#26377;&#24517;&#35201;&#25552;&#19968;&#19979;<tt class="literal">setAllowDirtyBack()</tt> &#21644;<tt class="literal">setAllowDirtyForward()</tt>&#20004;&#20010;&#26041;&#27861;&#12290; 
            &#21487;&#20197;&#22312;<tt class="literal">getTargetPage()</tt>&#20013;&#35843;&#29992;&#36825;&#20004;&#20010;&#26041;&#27861;&#65292;&#36825;&#20004;&#20010;&#26041;&#27861;&#23558;&#20915;&#23450;&#22312;&#24403;&#21069;&#39029;&#38754;&#39564;&#35777;&#22833;&#36133;&#26102;&#65292;&#26159;&#21542;&#20801;&#35768;&#21521;&#23548;&#21069;&#31227;&#21644;&#21518;&#36864;&#12290;
            </p><p><tt class="classname">AbstractWizardFormController</tt>&#30340;&#26356;&#23436;&#25972;&#30340;&#26041;&#27861;&#21015;&#34920;&#35831;&#21442;&#32771;JavaDoc&#12290;
            &#22312;Spring&#21457;&#34892;&#29256;&#26412;&#38468;&#24102;&#30340;&#20363;&#23376;jPetStore&#20013;&#65292;&#26377;&#19968;&#20010;&#20851;&#20110;&#21521;&#23548;&#23454;&#29616;&#30340;&#20363;&#23376;&#65306;
            <tt class="classname">org.springframework.samples.jpetstore.web.spring.OrderFormController</tt>&#12290;
            </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="mvc-handlermapping"></a>13.4.&nbsp;&#22788;&#29702;&#22120;&#26144;&#23556;&#65288;handler mapping&#65289;</h2></div></div><div></div></div><p>&#36890;&#36807;&#22788;&#29702;&#22120;&#26144;&#23556;&#65292;&#21487;&#20197;&#23558;web&#35831;&#27714;&#26144;&#23556;&#21040;&#27491;&#30830;&#30340;&#22788;&#29702;&#22120;&#65288;handler&#65289;&#19978;&#12290;
      Spring&#20869;&#32622;&#20102;&#24456;&#22810;&#22788;&#29702;&#22120;&#26144;&#23556;&#31574;&#30053;&#65292;&#20363;&#22914;&#65306;<tt class="classname">SimpleUrlHandlerMapping</tt>&#25110;&#32773;<tt class="classname">BeanNameUrlHandlerMapping</tt>&#12290;
      &#29616;&#22312;&#25105;&#20204;&#20808;&#26469;&#30475;&#19968;&#19979;<tt class="interfacename">HandlerMapping</tt>&#30340;&#22522;&#26412;&#27010;&#24565;&#12290;
      </p><p><tt class="interfacename">HandlerMapping</tt>&#30340;&#22522;&#26412;&#21151;&#33021;&#26159;&#23558;&#35831;&#27714;&#20256;&#36882;&#21040;<tt class="literal">HandlerExecutionChain</tt>&#19978;&#12290;
      &#39318;&#20808;&#65292;&#36825;&#20010;<tt class="literal">HandlerExecutionChain</tt>&#24517;&#39035;&#21253;&#21547;&#19968;&#20010;&#33021;&#22788;&#29702;&#35813;&#35831;&#27714;&#30340;&#22788;&#29702;&#22120;&#12290;
      &#20854;&#27425;&#65292;&#36825;&#20010;&#38142;&#20063;&#21487;&#20197;&#21253;&#21547;&#19968;&#31995;&#21015;&#21487;&#20197;&#25318;&#25130;&#35831;&#27714;&#30340;&#25318;&#25130;&#22120;&#12290;
      &#24403;&#25910;&#21040;&#35831;&#27714;&#26102;&#65292;<tt class="classname">DispatcherServlet</tt>&#23558;&#35831;&#27714;&#20132;&#32473;&#22788;&#29702;&#22120;&#26144;&#23556;&#65292;&#35753;&#23427;&#26816;&#26597;&#35831;&#27714;&#24182;&#25214;&#21040;&#19968;&#20010;&#36866;&#24403;&#30340;<tt class="literal">HandlerExecutionChain</tt>&#12290;
      &#28982;&#21518;&#65292;<tt class="classname">DispatcherServlet</tt>&#25191;&#34892;&#23450;&#20041;&#22312;&#38142;&#20013;&#30340;&#22788;&#29702;&#22120;&#21644;&#25318;&#25130;&#22120;&#65288;interceptor&#65289;&#12290;
      </p><p>&#22312;&#22788;&#29702;&#22120;&#26144;&#23556;&#20013;&#36890;&#36807;&#37197;&#32622;&#25318;&#25130;&#22120;&#65288;&#21253;&#25324;&#22788;&#29702;&#22120;&#25191;&#34892;&#21069;&#12289;&#25191;&#34892;&#21518;&#12289;&#25110;&#32773;&#25191;&#34892;&#21069;&#21518;&#36816;&#34892;&#25318;&#25130;&#22120;&#65289;&#23558;&#20351;&#20854;&#21151;&#33021;&#26356;&#24378;&#22823;&#12290;
      &#21516;&#26102;&#20063;&#21487;&#20197;&#36890;&#36807;&#33258;&#23450;&#20041;<tt class="interfacename">HandlerMapping</tt>&#26469;&#25903;&#25345;&#26356;&#22810;&#30340;&#21151;&#33021;&#12290;
      &#27604;&#22914;&#65292;&#19968;&#20010;&#33258;&#23450;&#20041;&#30340;&#22788;&#29702;&#22120;&#26144;&#23556;&#19981;&#20165;&#21487;&#20197;&#26681;&#25454;&#35831;&#27714;&#30340;URL&#65292;&#32780;&#19988;&#36824;&#21487;&#20197;&#26681;&#25454;&#21644;&#35831;&#27714;&#30456;&#20851;&#30340;&#29305;&#23450;session&#29366;&#24577;&#26469;&#36873;&#25321;&#22788;&#29702;&#22120;&#12290;
	</p><p>&#19979;&#38754;&#25105;&#20204;&#23558;&#35762;&#36848;Spring&#20013;&#26368;&#24120;&#29992;&#30340;&#20004;&#20010;&#22788;&#29702;&#22120;&#26144;&#23556;&#12290;
      &#23427;&#20204;&#37117;&#26159;<tt class="literal">AbstractHandlerMapping</tt>&#30340;&#23376;&#31867;&#65292;&#21516;&#26102;&#32487;&#25215;&#20102;&#19979;&#38754;&#36825;&#20123;&#23646;&#24615;&#65306;
      </p><div class="itemizedlist"><ul compact="compact" type="disc"><li><p><tt class="literal">interceptors</tt>&#65306; &#22312;&#26144;&#23556;&#20013;&#20351;&#29992;&#30340;&#25318;&#25130;&#22120;&#21015;&#34920;&#12290;
          <tt class="interfacename">HandlerInterceptor</tt>&#23558;&#22312;<a href="#mvc-handlermapping-interceptor" title="13.4.3.&nbsp;&#25318;&#25130;&#22120;&#65288;HandlerInterceptor&#65289;">Section&nbsp;13.4.3, &#8220;&#25318;&#25130;&#22120;&#65288;HandlerInterceptor&#65289;&#8221;</a>&#36825;&#19968;&#33410;&#35762;&#36848;&#12290;
          </p></li><li><p><tt class="literal">defaultHandler</tt>&#65306; &#32570;&#30465;&#30340;&#22788;&#29702;&#22120;&#12290;
          &#24403;&#27809;&#26377;&#21512;&#36866;&#30340;&#22788;&#29702;&#22120;&#21487;&#20197;&#21305;&#37197;&#35831;&#27714;&#26102;&#65292;&#35813;&#22788;&#29702;&#22120;&#23601;&#20250;&#34987;&#20351;&#29992;&#12290;
          </p></li><li><p><tt class="literal">order</tt>&#65306; &#26681;&#25454;&#27599;&#20010;&#26144;&#23556;&#30340;order&#23646;&#24615;&#20540; (&#30001;<tt class="literal">org.springframework.core.Ordered</tt> &#25509;&#21475;&#23450;&#20041;)&#65292;Spring &#23558;&#19978;&#19979;&#25991;&#20013;&#21487;&#29992;&#30340;&#26144;&#23556;&#36827;&#34892;&#25490;&#24207;&#65292;&#28982;&#21518;&#36873;&#29992;&#31532;&#19968;&#20010;&#21644;&#35831;&#27714;&#21305;&#37197;&#30340;&#22788;&#29702;&#22120;&#12290;
          </p></li><li><p><tt class="literal">alwaysUseFullPath</tt>&#65306;&#22914;&#26524;&#36825;&#20010;&#23646;&#24615;&#34987;&#35774;&#25104;<tt class="literal">true</tt>&#65292;Spring &#23558;&#20250;&#20351;&#29992;&#32477;&#23545;&#36335;&#24452;&#22312;&#24403;&#21069;&#30340;servlet context&#20013;&#23547;&#25214;&#21512;&#36866;&#30340;&#22788;&#29702;&#22120;&#12290; 
          &#36825;&#20010;&#23646;&#24615;&#30340;&#40664;&#35748;&#20540;&#26159;<tt class="literal">false</tt>&#65292;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;Spring&#20250;&#20351;&#29992;&#24403;&#21069;servlet context&#20013;&#30340;&#30456;&#23545;&#36335;&#24452;&#12290;
          &#20363;&#22914;&#65292;&#22914;&#26524;&#19968;&#20010;servlet&#22312;servlet-mapping&#20013;&#29992;&#30340;&#20540;&#26159;<tt class="literal">/testing/*</tt>&#65292;&#24403;<tt class="literal">alwaysUseFullPath</tt> &#35774;&#25104;true&#26102;&#65292;
          &#22788;&#29702;&#22120;&#26144;&#23556;&#20013;&#30340;URL&#26684;&#24335;&#24212;&#35813;&#20351;&#29992;<tt class="literal">/testing/viewPage.html</tt>&#65292;&#24403;&#36825;&#20010;&#23646;&#24615;&#35774;&#25104;false&#65292;&#21516;&#19968;&#20010;URL&#24212;&#35813;&#20889;&#25104;
		  <tt class="literal">/viewPage.html</tt>&#12290;
		  </p></li><li><p><tt class="literal">urlDecode</tt>&#65306;&#36825;&#20010;&#23646;&#24615;&#30340;&#40664;&#35748;&#20540;&#26159;<tt class="literal">true</tt>&#65292;&#21644;2.5&#29256;&#26412;&#19968;&#26679;&#12290;
          &#22914;&#26524;&#24819;&#27604;&#36739;&#32534;&#30721;&#21518;&#30340;&#36335;&#24452;&#65292;&#21487;&#20197;&#25226;&#36825;&#20010;&#23646;&#24615;&#35774;&#20026;<tt class="literal">false</tt>&#12290;
          &#19981;&#36807;&#65292;&#38656;&#35201;&#27880;&#24847;&#30340;&#26159;&#65292;<tt class="interfacename">HttpServletRequest</tt>&#24635;&#26159;&#36820;&#22238;&#35299;&#30721;&#21518;&#30340;servlet&#36335;&#24452;&#65292;
          &#19982;&#32534;&#30721;&#21518;&#30340;&#26684;&#24335;&#36827;&#34892;&#27604;&#36739;&#26102;&#21487;&#33021;&#19981;&#20250;&#21305;&#37197;&#12290;
          </p></li><li><p><tt class="literal">lazyInitHandlers</tt>&#65306;&#36825;&#20010;&#23646;&#24615;&#20801;&#35768;&#35774;&#32622;&#26159;&#21542;&#24310;&#36831;<span class="emphasis"><em>singleton</em></span>&#22788;&#29702;&#22120;&#30340;&#21021;&#22987;&#21270;&#24037;&#20316;&#65288;prototype&#22788;&#29702;&#22120;&#30340;&#21021;&#22987;&#21270;&#37117;&#26159;&#24310;&#36831;&#30340;)&#12290;
          &#36825;&#20010;&#23646;&#24615;&#30340;&#40664;&#35748;&#20540;&#26159;<tt class="literal">false</tt>&#12290;
          </p></li></ul></div><p>&#65288;<span class="emphasis"><em>&#27880;&#24847;&#65306;&#26368;&#21518;&#19977;&#20010;&#23646;&#24615;&#21482;&#26377;<tt class="classname">org.springframework.web.servlet.handler.AbstractUrlHandlerMapping</tt>&#30340;&#23376;&#31867;&#25165;&#26377;&#12290;</em></span>&#65289;
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-handlermapping-beanname"></a>13.4.1.&nbsp;<tt class="classname">BeanNameUrlHandlerMapping</tt></h3></div></div><div></div></div><p><tt class="classname">BeanNameUrlHandlerMapping</tt>&#26159;&#19968;&#20010;&#31616;&#21333;&#20294;&#24456;&#24378;&#22823;&#30340;&#22788;&#29702;&#22120;&#26144;&#23556;&#65292;&#23427;&#23558;&#25910;&#21040;&#30340;HTTP&#35831;&#27714;&#26144;&#23556;&#21040;bean&#30340;&#21517;&#31216;&#65288;&#36825;&#20123;bean&#38656;&#35201;&#22312;web&#24212;&#29992;&#19978;&#19979;&#25991;&#20013;&#23450;&#20041;&#65289;&#12290;
        &#20363;&#22914;&#65292;&#20026;&#20102;&#23454;&#29616;&#19968;&#20010;&#29992;&#25143;&#26032;&#24314;&#36134;&#21495;&#30340;&#21151;&#33021;&#65292;&#25105;&#20204;&#25552;&#20379;&#20102;FormController
	  &#65288;&#20851;&#20110;CommandController&#21644;FormController&#35831;&#21442;&#32771;<a href="#mvc-controller-command" title="13.3.4.&nbsp;&#21629;&#20196;&#25511;&#21046;&#22120;">Section&nbsp;13.3.4, &#8220;&#21629;&#20196;&#25511;&#21046;&#22120;&#8221;</a>&#65289;&#21644;&#26174;&#31034;&#34920;&#21333;&#30340;JSP&#35270;&#22270;&#65288;&#25110;Velocity&#27169;&#29256;&#65289;&#12290;
	  &#24403;&#20351;&#29992;<tt class="classname">BeanNameUrlHandlerMapping</tt>&#26102;&#65292;&#25105;&#20204;&#29992;&#22914;&#19979;&#26041;&#24335;&#23558;&#21253;&#21547;<tt class="literal">http://samples.com/editaccount.form</tt>&#30340;&#35775;&#38382;&#35831;&#27714;&#26144;&#23556;&#21040;&#25351;&#23450;&#30340;FormController&#19978;&#65306;
	  </p><pre class="programlisting">&lt;beans&gt;
  &lt;bean id="handlerMapping" class="org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping"/&gt;

  &lt;bean name="/editaccount.form" class="org.springframework.web.servlet.mvc.SimpleFormController"&gt;
    &lt;property name="formView" value="account"/&gt;
    &lt;property name="successView" value="account-created"/&gt;
    &lt;property name="commandName" value="account"/&gt;
    &lt;property name="commandClass" value="samples.Account"/&gt;
  &lt;/bean&gt;
&lt;beans&gt;</pre><p><tt class="literal">&#25152;&#26377;&#23545;/editaccount.form</tt>&#30340;&#35831;&#27714;&#23601;&#20250;&#30001;&#19978;&#38754;&#30340;FormController&#22788;&#29702;&#12290;
        &#24403;&#28982;&#25105;&#20204;&#24471;&#22312;<tt class="literal">web.xml</tt>&#20013;&#23450;&#20041;servlet-mapping&#65292;&#25509;&#21463;&#25152;&#26377;&#20197;<tt class="literal">.form</tt>&#32467;&#23614;&#30340;&#35831;&#27714;&#12290;
        </p><pre class="programlisting">&lt;web-app&gt;
    ...
    &lt;servlet&gt;
        &lt;servlet-name&gt;sample&lt;/servlet-name&gt;
        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;
        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
    &lt;/servlet&gt;

   <i class="lineannotation"><span class="lineannotation">&lt;!-- maps the sample dispatcher to <tt class="literal">*.form</tt> --&gt;</span></i>
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;sample&lt;/servlet-name&gt;
        &lt;url-pattern&gt;*.form&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;
    ...
&lt;/web-app&gt;</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#35201;&#20351;&#29992;<tt class="classname">BeanNameUrlHandlerMapping</tt>&#65292;&#26080;&#39035;&#65288;&#22914;&#19978;&#25152;&#31034;&#65289;&#22312;web&#24212;&#29992;&#19978;&#19979;&#25991;&#20013;&#23450;&#20041;&#23427;&#12290;
          &#32570;&#30465;&#24773;&#20917;&#19979;&#65292;&#22914;&#26524;&#22312;&#19978;&#19979;&#25991;&#20013;&#27809;&#26377;&#25214;&#21040;&#22788;&#29702;&#22120;&#26144;&#23556;&#65292;<tt class="classname">DispatcherServlet</tt>&#20250;&#20026;&#20320;&#21019;&#24314;&#19968;&#20010;<tt class="classname">BeanNameUrlHandlerMapping</tt>&#65281;
          </p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-handlermapping-urlhandlermapping"></a>13.4.2.&nbsp;<tt class="classname">SimpleUrlHandlerMapping</tt></h3></div></div><div></div></div><p>&#21478;&#19968;&#20010;&#26356;&#21152;&#24378;&#22823;&#30340;&#22788;&#29702;&#22120;&#26144;&#23556;&#26159;<tt class="classname">SimpleUrlHandlerMapping</tt>&#12290;
        &#23427;&#22312;&#24212;&#29992;&#19978;&#19979;&#25991;&#20013;&#21487;&#20197;&#36827;&#34892;&#37197;&#32622;&#65292;&#24182;&#19988;&#26377;Ant&#39118;&#26684;&#30340;&#36335;&#24452;&#21305;&#37197;&#21151;&#33021;&#12290;
       &#65288;&#35831;&#21442;&#32771;<tt class="classname">org.springframework.util.PathMatcher</tt>&#30340;JavaDoc&#65289;&#12290;&#19979;&#38754;&#20960;&#20010;&#20363;&#23376;&#21487;&#20197;&#24110;&#21161;&#29702;&#35299;&#65306;
        </p><pre class="programlisting">&lt;web-app&gt;
    ...
    &lt;servlet&gt;
        &lt;servlet-name&gt;sample&lt;/servlet-name&gt;
        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;
        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
    &lt;/servlet&gt;

    <i class="lineannotation"><span class="lineannotation">&lt;!-- maps the sample dispatcher to *.form --&gt;</span></i>
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;sample&lt;/servlet-name&gt;
        &lt;url-pattern&gt;*.form&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;

    <i class="lineannotation"><span class="lineannotation">&lt;!-- maps the sample dispatcher to *.html --&gt;</span></i>
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;sample&lt;/servlet-name&gt;
        &lt;url-pattern&gt;*.html&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;
    ...
&lt;/web-app&gt;</pre><p>&#19978;&#38754;&#30340;web.xml&#35774;&#32622;&#20801;&#35768;&#25152;&#26377;&#20197;<tt class="literal">.html</tt>&#21644;<tt class="literal">.form</tt>&#32467;&#23614;&#30340;&#35831;&#27714;&#37117;&#30001;&#36825;&#20010;sample <tt class="classname">DispatcherServlet</tt>&#22788;&#29702;&#12290;</p><pre class="programlisting">&lt;beans&gt;
        
    <i class="lineannotation"><span class="lineannotation">&lt;!-- no <tt class="literal">'id'</tt> required, <tt class="interfacename">HandlerMapping</tt> beans are automatically detected by the <tt class="classname">DispatcherServlet</tt> --&gt;</span></i>
    &lt;bean class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping"&gt;
        &lt;property name="mappings"&gt;
            &lt;value&gt;
                /*/account.form=editAccountFormController
                /*/editaccount.form=editAccountFormController
                /ex/view*.html=helpController
                /**/help.html=helpController
            &lt;/value&gt;
        &lt;/property&gt;
    &lt;/bean&gt;

    &lt;bean id="helpController"
          class="org.springframework.web.servlet.mvc.UrlFilenameViewController"/&gt;

    &lt;bean id="editAccountFormController"
          class="org.springframework.web.servlet.mvc.SimpleFormController"&gt;
        &lt;property name="formView" value="account"/&gt;
        &lt;property name="successView" value="account-created"/&gt;
        &lt;property name="commandName" value="Account"/&gt;
        &lt;property name="commandClass" value="samples.Account"/&gt;
    &lt;/bean&gt;
&lt;beans&gt;</pre><p>&#36825;&#20010;&#22788;&#29702;&#22120;&#26144;&#23556;&#39318;&#20808;&#23558;&#23545;&#25152;&#26377;&#30446;&#24405;&#20013;&#25991;&#20214;&#21517;&#20026;<tt class="literal">help.html</tt>&#30340;&#35831;&#27714;&#20256;&#36882;&#32473;<tt class="literal">helpController</tt>&#12290; 
        <tt class="literal">helpController</tt>&#26159;&#19968;&#20010;<tt class="classname">UrlFilenameViewController</tt>
        &#65288;&#35201;&#20102;&#35299;&#26356;&#22810;&#20851;&#20110;&#25511;&#21046;&#22120;&#30340;&#20449;&#24687;&#65292;&#35831;&#21442;&#38405;<a href="#mvc-controller" title="13.3.&nbsp;&#25511;&#21046;&#22120;">Section&nbsp;13.3, &#8220;&#25511;&#21046;&#22120;&#8221;</a>&#65289;&#12290;
        &#23545;<tt class="literal">ex</tt>&#30446;&#24405;&#20013;&#25152;&#26377;&#20197;<tt class="literal">view</tt>&#24320;&#22987;&#65292;&#20197;<tt class="literal">.html</tt>
		&#32467;&#23614;&#30340;&#35831;&#27714;&#37117;&#20250;&#34987;&#20256;&#36882;&#32473;<tt class="literal">helpController</tt>&#12290;
		&#21516;&#26679;&#30340;&#65292;&#25105;&#20204;&#20063;&#20026;<tt class="literal">editAccountFormController</tt>&#23450;&#20041;&#20102;&#20004;&#20010;&#26144;&#23556;&#12290;
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-handlermapping-interceptor"></a>13.4.3.&nbsp;&#25318;&#25130;&#22120;&#65288;<tt class="interfacename">HandlerInterceptor</tt>&#65289;</h3></div></div><div></div></div><p>Spring&#30340;&#22788;&#29702;&#22120;&#26144;&#23556;&#25903;&#25345;&#25318;&#25130;&#22120;&#12290;&#24403;&#20320;&#24819;&#35201;&#20026;&#26576;&#20123;&#35831;&#27714;&#25552;&#20379;&#29305;&#27530;&#21151;&#33021;&#26102;&#65292;&#20363;&#22914;&#23545;&#29992;&#25143;&#36827;&#34892;&#36523;&#20221;&#35748;&#35777;&#65292;&#36825;&#23601;&#38750;&#24120;&#26377;&#29992;&#12290;</p><p>&#22788;&#29702;&#22120;&#26144;&#23556;&#20013;&#30340;&#25318;&#25130;&#22120;&#24517;&#39035;&#23454;&#29616;<tt class="literal">org.springframework.web.servlet</tt>&#21253;&#20013;&#30340;<tt class="interfacename">HandlerInterceptor</tt>&#25509;&#21475;&#12290;
        &#36825;&#20010;&#25509;&#21475;&#23450;&#20041;&#20102;&#19977;&#20010;&#26041;&#27861;&#65292;&#19968;&#20010;&#22312;&#22788;&#29702;&#22120;<span class="emphasis"><em>&#25191;&#34892;&#21069;</em></span>&#34987;&#35843;&#29992;&#65292;&#19968;&#20010;&#22312;&#22788;&#29702;&#22120;<span class="emphasis"><em>&#25191;&#34892;&#21518;</em></span>&#34987;&#35843;&#29992;&#65292;&#21478;&#19968;&#20010;<span class="emphasis"><em>&#22312;&#25972;&#20010;&#35831;&#27714;&#22788;&#29702;&#23436;&#21518;</em></span>&#35843;&#29992;&#12290;
        &#36825;&#19977;&#20010;&#26041;&#27861;&#25552;&#20379;&#20320;&#36275;&#22815;&#30340;&#28789;&#27963;&#24230;&#20570;&#20219;&#20309;&#22788;&#29702;&#21069;&#21518;&#30340;&#25805;&#20316;&#12290;
        </p><p><tt class="literal">preHandle(..)</tt>&#26041;&#27861;&#26377;&#19968;&#20010;boolean&#36820;&#22238;&#20540;&#12290;
        &#20351;&#29992;&#36825;&#20010;&#20540;&#65292;&#21487;&#20197;&#35843;&#25972;&#25191;&#34892;&#38142;&#30340;&#34892;&#20026;&#12290;
        &#24403;&#36820;&#22238;<tt class="literal">true</tt>&#26102;&#65292;&#22788;&#29702;&#22120;&#25191;&#34892;&#38142;&#23558;&#32487;&#32493;&#25191;&#34892;&#65292;&#24403;&#36820;&#22238;<tt class="literal">false</tt>&#26102;&#65292;<tt class="classname">DispatcherServlet</tt>&#35748;&#20026;&#35813;&#25318;&#25130;&#22120;&#24050;&#32463;&#22788;&#29702;&#23436;&#20102;&#35831;&#27714;&#65288;&#27604;&#22914;&#26174;&#31034;&#27491;&#30830;&#30340;&#35270;&#22270;&#65289;&#65292;&#32780;&#19981;&#32487;&#32493;&#25191;&#34892;&#25191;&#34892;&#38142;&#20013;&#30340;&#20854;&#23427;&#25318;&#25130;&#22120;&#21644;&#22788;&#29702;&#22120;&#12290;
        </p><p>&#19979;&#38754;&#30340;&#20363;&#23376;&#25552;&#20379;&#20102;&#19968;&#20010;&#25318;&#25130;&#22120;&#65292;&#23427;&#25318;&#25130;&#25152;&#26377;&#35831;&#27714;&#65292;&#22914;&#26524;&#24403;&#21069;&#26102;&#38388;&#19981;&#26159;&#22312;&#19978;&#21320;9&#28857;&#21040;&#19979;&#21320;6&#28857;&#65292;&#23427;&#23558;&#29992;&#25143;&#37325;&#23450;&#21521;&#21040;&#26576;&#20010;&#39029;&#38754;&#12290;</p><pre class="programlisting">&lt;beans&gt;
    &lt;bean id="handlerMapping"
          class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping"&gt;
        &lt;property name="interceptors"&gt;
            &lt;list&gt;
                &lt;ref bean="officeHoursInterceptor"/&gt;
            &lt;/list&gt;
        &lt;/property&gt;
        &lt;property name="mappings"&gt;
            &lt;value&gt;
                /*.form=editAccountFormController
                /*.view=editAccountFormController
            &lt;/value&gt;
        &lt;/property&gt;
    &lt;/bean&gt;

    &lt;bean id="officeHoursInterceptor"
          class="samples.TimeBasedAccessInterceptor"&gt;
        &lt;property name="openingTime" value="9"/&gt;
        &lt;property name="closingTime" value="18"/&gt;
    &lt;/bean&gt;
&lt;beans&gt;</pre><pre class="programlisting">package samples;

public class TimeBasedAccessInterceptor extends HandlerInterceptorAdapter {

    private int openingTime;
    private int closingTime;

    public void setOpeningTime(int openingTime) {
        this.openingTime = openingTime;
    }

    public void setClosingTime(int closingTime) {
        this.closingTime = closingTime;
    }

    public boolean preHandle(
            HttpServletRequest request,
            HttpServletResponse response,
            Object handler) throws Exception {

        Calendar cal = Calendar.getInstance();
        int hour = cal.get(HOUR_OF_DAY);
        if (openingTime &lt;= hour &lt; closingTime) {
            return true;
        } else {
            response.sendRedirect("http://host.com/outsideOfficeHours.html");
            return false;
        }
    }
}</pre><p>&#25152;&#26377;&#30340;&#35831;&#27714;&#37117;&#23558;&#34987;<tt class="classname">TimeBasedAccessInterceptor</tt>&#25130;&#33719;&#65292;
        &#22914;&#26524;&#24403;&#21069;&#26102;&#38388;&#19981;&#22312;&#19978;&#29677;&#26102;&#38388;&#65292;&#29992;&#25143;&#20250;&#34987;&#37325;&#23450;&#21521;&#21040;&#19968;&#20010;&#38745;&#24577;html&#39029;&#38754;&#65292;&#25552;&#20379;&#35832;&#22914;&#21482;&#26377;&#19978;&#29677;&#26102;&#38388;&#25165;&#33021;&#35775;&#38382;&#32593;&#31449;&#20043;&#31867;&#30340;&#21578;&#31034;&#12290;
        </p><p>Spring&#36824;&#25552;&#20379;&#20102;&#19968;&#20010;adapter&#31867;<tt class="classname">HandlerInterceptorAdapter</tt>&#35753;&#29992;&#25143;&#26356;&#26041;&#20415;&#30340;&#25193;&#23637;<tt class="interfacename">HandlerInterceptor</tt>&#25509;&#21475;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="mvc-viewresolver"></a>13.5.&nbsp;&#35270;&#22270;&#19982;&#35270;&#22270;&#35299;&#26512;</h2></div></div><div></div></div><p>&#25152;&#26377;web&#24212;&#29992;&#30340;MVC&#26694;&#26550;&#37117;&#26377;&#23427;&#20204;&#23450;&#20301;&#35270;&#22270;&#30340;&#26041;&#24335;&#12290;
      Spring&#25552;&#20379;&#20102;&#35270;&#22270;&#35299;&#26512;&#22120;&#20379;&#20320;&#22312;&#27983;&#35272;&#22120;&#26174;&#31034;&#27169;&#22411;&#25968;&#25454;&#65292;&#32780;&#19981;&#24517;&#34987;&#26463;&#32538;&#22312;&#29305;&#23450;&#30340;&#35270;&#22270;&#25216;&#26415;&#19978;&#12290;
      Spring&#20869;&#32622;&#20102;&#23545;JSP&#65292;Velocity&#27169;&#29256;&#21644;XSLT&#35270;&#22270;&#30340;&#25903;&#25345;&#12290; 
      <a href="#view" title="Chapter&nbsp;14.&nbsp;&#38598;&#25104;&#35270;&#22270;&#25216;&#26415;">Chapter&nbsp;14, <i>&#38598;&#25104;&#35270;&#22270;&#25216;&#26415;</i></a>&#36825;&#19968;&#31456;&#35814;&#32454;&#35828;&#26126;&#20102;Spring&#22914;&#20309;&#19982;&#19981;&#21516;&#30340;&#35270;&#22270;&#25216;&#26415;&#38598;&#25104;&#12290;
      </p><p><tt class="interfacename">ViewResolver</tt>&#21644;<tt class="interfacename">View</tt>&#26159;Spring&#30340;&#35270;&#22270;&#22788;&#29702;&#26041;&#24335;&#20013;&#29305;&#21035;&#37325;&#35201;&#30340;&#20004;&#20010;&#25509;&#21475;&#12290;
      <tt class="interfacename">ViewResolver</tt>&#25552;&#20379;&#20102;&#20174;&#35270;&#22270;&#21517;&#31216;&#21040;&#23454;&#38469;&#35270;&#22270;&#30340;&#26144;&#23556;&#12290;
      <tt class="interfacename">View</tt>&#22788;&#29702;&#35831;&#27714;&#30340;&#20934;&#22791;&#24037;&#20316;&#65292;&#24182;&#23558;&#35813;&#35831;&#27714;&#25552;&#20132;&#32473;&#26576;&#31181;&#20855;&#20307;&#30340;&#35270;&#22270;&#25216;&#26415;&#12290;
	</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-viewresolver-resolver"></a>13.5.1.&nbsp;&#35270;&#22270;&#35299;&#26512;&#22120;&#65288;<tt class="interfacename">ViewResolver</tt>&#65289;</h3></div></div><div></div></div><p>&#27491;&#22914;&#21069;&#38754;&#65288;<a href="#mvc-controller" title="13.3.&nbsp;&#25511;&#21046;&#22120;">Section&nbsp;13.3, &#8220;&#25511;&#21046;&#22120;&#8221;</a>&#65289;&#25152;&#35752;&#35770;&#30340;&#65292;
        SpringWeb&#26694;&#26550;&#30340;&#25152;&#26377;&#25511;&#21046;&#22120;&#37117;&#36820;&#22238;&#19968;&#20010;<tt class="classname">ModelAndView</tt>&#23454;&#20363;&#12290;
        Sprnig&#20013;&#30340;&#35270;&#22270;&#20197;&#21517;&#23383;&#20026;&#26631;&#35782;&#65292;&#35270;&#22270;&#35299;&#26512;&#22120;&#36890;&#36807;&#21517;&#23383;&#26469;&#35299;&#26512;&#35270;&#22270;&#12290;Spring&#25552;&#20379;&#20102;&#22810;&#31181;&#35270;&#22270;&#35299;&#26512;&#22120;&#12290;&#25105;&#20204;&#23558;&#20030;&#20363;&#21152;&#20197;&#35828;&#26126;&#12290;
        </p><div class="table"><a name="mvc-view-resolvers-tbl"></a><p class="title"><b>Table&nbsp;13.4.&nbsp;&#35270;&#22270;&#35299;&#26512;&#22120;</b></p><table summary="&#35270;&#22270;&#35299;&#26512;&#22120;" border="1"><colgroup><col><col></colgroup><thead><tr><th><tt class="interfacename">ViewResolver</tt></th><th>&#25551;&#36848;</th></tr></thead><tbody><tr><td><tt class="classname">AbstractCachingViewResolver</tt></td><td>
			  &#25277;&#35937;&#35270;&#22270;&#35299;&#26512;&#22120;&#23454;&#29616;&#20102;&#23545;&#35270;&#22270;&#30340;&#32531;&#23384;&#12290;&#22312;&#35270;&#22270;&#34987;&#20351;&#29992;&#20043;&#21069;&#65292;&#36890;&#24120;&#38656;&#35201;&#36827;&#34892;&#19968;&#20123;&#20934;&#22791;&#24037;&#20316;&#12290;
			  &#20174;&#23427;&#32487;&#25215;&#30340;&#35270;&#22270;&#35299;&#26512;&#22120;&#23558;&#23545;&#35201;&#35299;&#26512;&#30340;&#35270;&#22270;&#36827;&#34892;&#32531;&#23384;&#12290;
			  </td></tr><tr><td><tt class="classname">XmlViewResolver</tt></td><td>
			  XmlViewResolver&#23454;&#29616;<tt class="interfacename">ViewResolver</tt>&#65292;&#25903;&#25345;XML&#26684;&#24335;&#30340;&#37197;&#32622;&#25991;&#20214;&#12290;
			  &#35813;&#37197;&#32622;&#25991;&#20214;&#24517;&#39035;&#37319;&#29992;&#19982;Spring XML Bean Factory&#30456;&#21516;&#30340;DTD&#12290;&#40664;&#35748;&#30340;&#37197;&#32622;&#25991;&#20214;&#26159;
			  <tt class="literal">/WEB-INF/views.xml</tt>&#12290;
			  </td></tr><tr><td><tt class="classname">ResourceBundleViewResolver</tt></td><td>
			  ResourceBundleViewResolver&#23454;&#29616;<tt class="interfacename">ViewResolver</tt>&#65292;
			  &#22312;&#19968;&#20010;<tt class="classname">ResourceBundle</tt>&#20013;&#23547;&#25214;&#25152;&#38656;bean&#30340;&#23450;&#20041;&#12290;
			  &#36825;&#20010;bundle&#36890;&#24120;&#23450;&#20041;&#22312;&#19968;&#20010;&#20301;&#20110;classpath&#20013;&#30340;&#23646;&#24615;&#25991;&#20214;&#20013;&#12290;&#40664;&#35748;&#30340;&#23646;&#24615;&#25991;&#20214;&#26159;<tt class="literal">views.properties</tt>&#12290;
			  </td></tr><tr><td><tt class="classname">UrlBasedViewResolver</tt></td><td>
			  UrlBasedViewResolver&#23454;&#29616;<tt class="interfacename">ViewResolver</tt>&#65292;
			  &#23558;&#35270;&#22270;&#21517;&#30452;&#25509;&#35299;&#26512;&#25104;&#23545;&#24212;&#30340;URL&#65292;&#19981;&#38656;&#35201;&#26174;&#24335;&#30340;&#26144;&#23556;&#23450;&#20041;&#12290;
			  &#22914;&#26524;&#20320;&#30340;&#35270;&#22270;&#21517;&#21644;&#35270;&#22270;&#36164;&#28304;&#30340;&#21517;&#23383;&#26159;&#19968;&#33268;&#30340;&#65292;&#23601;&#21487;&#20351;&#29992;&#35813;&#35299;&#26512;&#22120;&#65292;&#32780;&#26080;&#38656;&#36827;&#34892;&#26144;&#23556;&#12290;
			  </td></tr><tr><td><tt class="classname">InternalResourceViewResolver</tt></td><td>
			  &#20316;&#20026;<tt class="classname">UrlBasedViewResolver</tt>&#30340;&#23376;&#31867;&#65292;
			  &#23427;&#25903;&#25345;<tt class="classname">InternalResourceView</tt>&#65288;&#23545;Servlet&#21644;JSP&#30340;&#21253;&#35013;&#65289;&#65292;
			  &#20197;&#21450;&#20854;&#23376;&#31867;<tt class="classname">JstlView</tt>&#21644;<tt class="classname">TilesView</tt>&#12290;
			  &#36890;&#36807;<tt class="literal">setViewClass</tt>&#26041;&#27861;&#65292;&#21487;&#20197;&#25351;&#23450;&#29992;&#20110;&#35813;&#35299;&#26512;&#22120;&#29983;&#25104;&#35270;&#22270;&#20351;&#29992;&#30340;&#35270;&#22270;&#31867;&#12290;
			  &#26356;&#22810;&#20449;&#24687;&#35831;&#21442;&#32771;<tt class="classname">UrlBasedViewResolver</tt>&#30340;Javadoc&#12290;
			  </td></tr><tr><td><tt class="classname">VelocityViewResolver</tt> /
              <tt class="classname">FreeMarkerViewResolver</tt></td><td>
			  &#20316;&#20026;<tt class="classname">UrlBasedViewResolver</tt>&#30340;&#23376;&#31867;&#65292;
			  &#23427;&#33021;&#25903;&#25345;<tt class="classname">VelocityView</tt>&#65288;&#23545;Velocity&#27169;&#29256;&#30340;&#21253;&#35013;&#65289;&#21644;<tt class="classname">FreeMarkerView</tt>&#20197;&#21450;&#23427;&#20204;&#30340;&#23376;&#31867;&#12290;
			  </td></tr></tbody></table></div><p>&#20030;&#20363;&#26469;&#35828;&#65292;&#24403;&#20351;&#29992;JSP&#20316;&#20026;&#35270;&#22270;&#23618;&#25216;&#26415;&#26102;&#65292;&#23601;&#21487;&#20197;&#20351;&#29992;<tt class="classname">UrlBasedViewResolver</tt>&#12290;
        &#36825;&#20010;&#35270;&#22270;&#35299;&#26512;&#22120;&#20250;&#23558;&#35270;&#22270;&#21517;&#35299;&#26512;&#25104;URL&#65292;&#24182;&#23558;&#35831;&#27714;&#20256;&#36882;&#32473;RequestDispatcher&#26469;&#26174;&#31034;&#35270;&#22270;&#12290;
        </p><pre class="programlisting">&lt;bean id="viewResolver"
      class="org.springframework.web.servlet.view.UrlBasedViewResolver"&gt;
    &lt;property name="prefix" value="/WEB-INF/jsp/"/&gt;
    &lt;property name="suffix" value=".jsp"/&gt;
&lt;/bean&gt;</pre><p>&#24403;&#36820;&#22238;&#30340;&#35270;&#22270;&#21517;&#20026;<tt class="literal">test</tt>&#26102;&#65292;
        &#36825;&#20010;&#35270;&#22270;&#35299;&#26512;&#22120;&#23558;&#35831;&#27714;&#20256;&#36882;&#32473;<tt class="classname">RequestDispatcher</tt>&#65292;<tt class="classname">RequestDispatcher</tt>&#20877;&#23558;&#35831;&#27714;&#20256;&#36882;&#32473;<tt class="literal">/WEB-INF/jsp/test.jsp</tt>&#12290;
        </p><p>&#24403;&#22312;&#19968;&#20010;web&#24212;&#29992;&#20013;&#28151;&#21512;&#20351;&#29992;&#19981;&#21516;&#30340;&#35270;&#22270;&#25216;&#26415;&#26102;&#65292;&#21487;&#20197;&#20351;&#29992;<tt class="classname">ResourceBundleViewResolver</tt>&#65306;</p><pre class="programlisting">&lt;bean id="viewResolver"
      class="org.springframework.web.servlet.view.ResourceBundleViewResolver"&gt;
    &lt;property name="basename" value="views"/&gt;
    &lt;property name="defaultParentView" value="parentView"/&gt;
&lt;/bean&gt;</pre><p><tt class="classname">ResourceBundleViewResolver</tt>&#36890;&#36807;basename&#25152;&#25351;&#23450;&#30340;<tt class="classname">ResourceBundle</tt>&#35299;&#26512;&#35270;&#22270;&#21517;&#12290;
        &#23545;&#27599;&#20010;&#24453;&#35299;&#26512;&#30340;&#35270;&#22270;&#65292;ResourceBundle&#37324;<tt class="literal">&#30340;[&#35270;&#22270;&#21517;].class</tt>&#25152;&#23545;&#24212;&#30340;&#20540;&#23601;&#26159;&#23454;&#29616;&#35813;&#35270;&#22270;&#30340;&#31867;&#12290;
        &#21516;&#26679;&#65292;<tt class="literal">[&#35270;&#22270;&#21517;].url</tt>&#25152;&#23545;&#24212;&#30340;&#20540;&#26159;&#35813;&#35270;&#22270;&#25152;&#23545;&#24212;&#30340;URL&#12290;
        &#20174;&#19978;&#38754;&#30340;&#20363;&#23376;&#37324;&#33021;&#22815;&#21457;&#29616;&#65292;&#21487;&#20197;&#25351;&#23450;&#19968;&#20010;parent view&#65292;&#20854;&#23427;&#30340;&#35270;&#22270;&#37117;&#21487;&#20197;&#20174;parent view&#25193;&#23637;&#12290;&#29992;&#36825;&#31181;&#26041;&#27861;&#65292;&#21487;&#20197;&#22768;&#26126;&#19968;&#20010;&#40664;&#35748;&#30340;&#35270;&#22270;&#12290;
        </p><p><span class="emphasis"><em>&#20851;&#20110;&#35270;&#22270;&#32531;&#23384;&#30340;&#27880;&#24847;&#20107;&#39033;</em></span> &#65293; &#32487;&#25215;<tt class="classname">AbstractCachingViewResolver</tt>&#30340;&#35299;&#26512;&#22120;&#21487;&#20197;&#32531;&#23384;&#23427;&#26366;&#32463;&#35299;&#26512;&#36807;&#30340;&#35270;&#22270;&#12290;
        &#24403;&#20351;&#29992;&#26576;&#20123;&#35270;&#22270;&#25216;&#26415;&#26102;&#65292;&#36825;&#21487;&#20197;&#22823;&#24133;&#24230;&#30340;&#25552;&#21319;&#24615;&#33021;&#12290;
        &#20063;&#21487;&#20197;&#20851;&#25481;&#32531;&#23384;&#21151;&#33021;&#65292;&#21482;&#35201;&#25226;<tt class="literal">cache</tt>&#23646;&#24615;&#35774;&#25104;<tt class="literal">false</tt>&#23601;&#21487;&#20197;&#20102;&#12290;
        &#32780;&#19988;&#65292;&#22914;&#26524;&#38656;&#35201;&#22312;&#31995;&#32479;&#36816;&#34892;&#26102;&#21160;&#24577;&#22320;&#26356;&#26032;&#26576;&#20123;&#35270;&#22270;&#65288;&#27604;&#22914;&#65292;&#24403;&#19968;&#20010;Velocity&#27169;&#26495;&#34987;&#20462;&#25913;&#20102;&#65289;&#65292;
        &#21487;&#20197;&#35843;&#29992;<tt class="literal">removeFromCache(String viewName, Locale loc)</tt>&#26041;&#27861;&#26469;&#36798;&#21040;&#30446;&#30340;&#12290;
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-viewresolver-chaining"></a>13.5.2.&nbsp;&#35270;&#22270;&#35299;&#26512;&#38142;</h3></div></div><div></div></div><p>Spring&#25903;&#25345;&#22810;&#20010;&#35270;&#22270;&#35299;&#26512;&#22120;&#19968;&#36215;&#20351;&#29992;&#12290;&#21487;&#20197;&#25226;&#23427;&#20204;&#24403;&#20316;&#19968;&#20010;&#35299;&#26512;&#38142;&#12290;
        &#36825;&#26679;&#26377;&#24456;&#22810;&#22909;&#22788;&#65292;&#27604;&#22914;&#22312;&#29305;&#23450;&#24773;&#20917;&#19979;&#37325;&#26032;&#23450;&#20041;&#26576;&#20123;&#35270;&#22270;&#12290;
        &#23450;&#20041;&#35270;&#22270;&#35299;&#26512;&#38142;&#24456;&#23481;&#26131;&#65292;&#21482;&#35201;&#22312;&#24212;&#29992;&#19978;&#19979;&#25991;&#20013;&#23450;&#20041;&#22810;&#20010;&#35299;&#26512;&#22120;&#23601;&#21487;&#20197;&#20102;&#12290;
        &#24517;&#35201;&#26102;&#65292;&#20063;&#21487;&#20197;&#36890;&#36807;<tt class="literal">order</tt>&#23646;&#24615;&#26469;&#22768;&#26126;&#27599;&#20010;&#35299;&#26512;&#22120;&#30340;&#24207;&#21015;&#12290;
        &#35201;&#35760;&#20303;&#30340;&#26159;&#65292;&#26576;&#20010;&#35299;&#26512;&#22120;&#30340;order&#36234;&#39640;, &#23427;&#22312;&#35299;&#26512;&#38142;&#20013;&#30340;&#20301;&#32622;&#36234;&#38752;&#21518;&#12290;
        </p><p>&#19979;&#38754;&#36825;&#20010;&#20363;&#23376;&#23637;&#31034;&#20102;&#19968;&#20010;&#21253;&#21547;&#20004;&#20010;&#35299;&#26512;&#22120;&#30340;&#35299;&#26512;&#38142;&#12290;
        &#19968;&#20010;&#26159;<tt class="classname">InternalResourceViewResolver</tt>&#65292;&#36825;&#20010;&#35299;&#26512;&#22120;&#24635;&#26159;&#34987;&#33258;&#21160;&#30340;&#25918;&#21040;&#38142;&#30340;&#26411;&#31471;&#12290;
        &#21478;&#19968;&#20010;&#26159;<tt class="classname">XmlViewResolver</tt>&#65292;&#23427;&#25903;&#25345;&#35299;&#26512;Excel&#35270;&#22270;&#65288;&#32780;<tt class="classname">InternalResourceViewResolver</tt>&#19981;&#21487;&#20197;&#65289;&#12290;
        </p><pre class="programlisting">&lt;bean id="jspViewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt;
  &lt;property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/&gt;
  &lt;property name="prefix" value="/WEB-INF/jsp/"/&gt;
  &lt;property name="suffix" value=".jsp"/&gt;
&lt;/bean&gt;

&lt;bean id="excelViewResolver" class="org.springframework.web.servlet.view.XmlViewResolver"&gt;
  &lt;property name="order" value="1"/&gt;
  &lt;property name="location" value="/WEB-INF/views.xml"/&gt;
&lt;/bean&gt;

<i class="lineannotation"><span class="lineannotation">&lt;!-- in <tt class="literal">views.xml</tt> --&gt;</span></i>

&lt;beans&gt;
  &lt;bean name="report" class="org.springframework.example.ReportExcelView"/&gt;
&lt;/beans&gt;</pre><p>&#22914;&#26524;&#26576;&#20010;&#35299;&#26512;&#22120;&#27809;&#26377;&#25214;&#21040;&#21512;&#36866;&#30340;&#35270;&#22270;&#65292;Spring&#20250;&#22312;&#19978;&#19979;&#25991;&#20013;&#23547;&#25214;&#26159;&#21542;&#37197;&#32622;&#20102;&#20854;&#23427;&#30340;&#35299;&#26512;&#22120;&#12290;
        &#22914;&#26524;&#26377;&#65292;&#23427;&#20250;&#32487;&#32493;&#36827;&#34892;&#35299;&#26512;&#65292;&#21542;&#21017;&#65292;Srping&#20250;&#25243;&#20986;&#19968;&#20010;<tt class="classname">Exception</tt>&#12290;
        </p><p>&#35201;&#35760;&#20303;&#65292;&#24403;&#19968;&#20010;&#35270;&#22270;&#35299;&#26512;&#22120;&#25214;&#19981;&#21040;&#21512;&#36866;&#30340;&#35270;&#22270;&#26102;&#65292;&#23427;<span class="emphasis"><em>&#21487;&#33021;</em></span> &#36820;&#22238;null&#20540;&#12290;
        &#20294;&#26159;&#65292;&#19981;&#26159;&#27599;&#20010;&#35299;&#26512;&#22120;&#37117;&#36825;&#20040;&#20570;&#12290;&#36825;&#26159;&#22240;&#20026;&#65292;&#22312;&#26576;&#20123;&#24773;&#20917;&#19979;&#65292;&#35299;&#26512;&#22120;&#21487;&#33021;&#26080;&#27861;&#20390;&#27979;&#20986;&#31526;&#21512;&#35201;&#27714;&#30340;&#35270;&#22270;&#26159;&#21542;&#23384;&#22312;&#12290;
        &#27604;&#22914;&#65292;<tt class="classname">InternalResourceViewResolver</tt>&#22312;&#20869;&#37096;&#35843;&#29992;&#20102;<tt class="classname">RequestDispatcher</tt>&#12290;
        &#35831;&#27714;&#20998;&#21457;&#26159;&#26816;&#26597;&#19968;&#20010;JSP&#25991;&#20214;&#26159;&#21542;&#23384;&#22312;&#30340;&#21807;&#19968;&#26041;&#27861;&#65292;&#19981;&#24184;&#30340;&#26159;&#65292;&#36825;&#20010;&#26041;&#27861;&#21482;&#33021;&#29992;&#19968;&#27425;&#12290;
        &#21516;&#26679;&#30340;&#38382;&#39064;&#22312;<tt class="classname">VelocityViewResolver</tt>&#21644;&#20854;&#23427;&#35299;&#26512;&#22120;&#20013;&#20063;&#26377;&#12290;
        &#24403;&#20351;&#29992;&#36825;&#20123;&#35299;&#26512;&#22120;&#26102;&#65292;&#26368;&#22909;&#20180;&#32454;&#38405;&#35835;&#23427;&#20204;&#30340;Javadoc&#65292;&#30475;&#30475;&#38656;&#35201;&#30340;&#35299;&#26512;&#22120;&#26159;&#21542;&#26080;&#27861;&#21457;&#29616;&#19981;&#23384;&#22312;&#30340;&#35270;&#22270;&#12290;
        &#36825;&#20010;&#38382;&#39064;&#20135;&#29983;&#30340;&#21103;&#20316;&#29992;&#26159;&#65292;&#22914;&#26524;<tt class="classname">InternalResourceViewResolver</tt>&#35299;&#26512;&#22120;&#27809;&#26377;&#25918;&#22312;&#38142;&#30340;&#26411;&#31471;&#65292;
        <tt class="classname">InternalResourceViewResolver</tt>&#21518;&#38754;&#30340;&#37027;&#20123;&#35299;&#26512;&#22120;&#26681;&#26412;&#24471;&#19981;&#21040;&#20351;&#29992;&#65292;
        &#22240;&#20026;<tt class="classname">InternalResourceViewResolver</tt><span class="emphasis"><em>&#24635;&#26159;</em></span>&#36820;&#22238;&#19968;&#20010;&#35270;&#22270;&#65281;
	  </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-redirecting"></a>13.5.3.&nbsp;&#37325;&#23450;&#21521;&#65288;Rediret&#65289;&#21040;&#21478;&#19968;&#20010;&#35270;&#22270;</h3></div></div><div></div></div><p>&#22312;&#21069;&#38754;&#25105;&#20204;&#25552;&#21040;&#36807;&#65292;&#19968;&#20010;&#25511;&#21046;&#22120;&#36890;&#24120;&#20250;&#36820;&#22238;&#35270;&#22270;&#21517;&#65292;&#28982;&#21518;&#30001;&#35270;&#22270;&#35299;&#26512;&#22120;&#35299;&#26512;&#21040;&#26576;&#31181;&#35270;&#22270;&#23454;&#29616;&#12290;
        &#23545;&#20110;&#20687;JSP&#36825;&#26679;&#23454;&#38469;&#19978;&#30001;Servlet/JSP&#24341;&#25806;&#22788;&#29702;&#30340;&#35270;&#22270;&#65292;
        &#25105;&#20204;&#36890;&#24120;&#20351;&#29992;<tt class="classname">InternalResourceViewResolver</tt>&#21644;<tt class="classname">InternalResourceView</tt>&#12290;
        &#36825;&#31181;&#35270;&#22270;&#23454;&#29616;&#26368;&#32456;&#20250;&#35843;&#29992;Servlet API&#30340;<tt class="literal">RequestDispatcher.forward(..)</tt>&#26041;&#27861;&#25110;<tt class="literal">RequestDispatcher.include()</tt>&#26041;&#27861;&#23558;&#29992;&#25143;&#25351;&#21521;&#26368;&#32456;&#39029;&#38754;&#12290;
        &#23545;&#20110;&#21035;&#30340;&#35270;&#22270;&#25216;&#26415;&#32780;&#35328;&#65288;&#27604;&#22914;Velocity&#12289;XSLT&#31561;&#31561;&#65289;&#65292;&#35270;&#22270;&#26412;&#36523;&#23601;&#20250;&#29983;&#25104;&#36820;&#22238;&#32473;&#29992;&#25143;&#30340;&#20869;&#23481;&#12290;
        </p><p>&#26377;&#20123;&#26102;&#20505;&#65292;&#22312;&#35270;&#22270;&#26174;&#31034;&#20197;&#21069;&#65292;&#25105;&#20204;&#21487;&#33021;&#38656;&#35201;&#32473;&#29992;&#25143;&#21457;&#19968;&#20010;HTTP redirect&#37325;&#23450;&#21521;&#25351;&#20196;&#12290;
        &#27604;&#22914;&#65292;&#19968;&#20010;&#25511;&#21046;&#22120;&#25104;&#21151;&#30340;&#22788;&#29702;&#20102;&#19968;&#20010;&#34920;&#21333;&#25552;&#20132;&#65288;&#25968;&#25454;&#20197;HTTP POST&#30340;&#26041;&#24335;&#21457;&#36865;&#65289;&#65292;&#23427;&#26368;&#32456;&#21487;&#33021;&#22996;&#25176;&#32473;&#21478;&#19968;&#20010;&#25511;&#21046;&#22120;&#26469;&#23436;&#25104;&#21097;&#19979;&#30340;&#24037;&#20316;&#12290;
        &#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#22914;&#26524;&#25105;&#20204;&#20351;&#29992;&#20869;&#37096;forward&#65292;&#25509;&#25163;&#24037;&#20316;&#30340;&#37027;&#20010;&#25511;&#21046;&#22120;&#23558;&#20250;&#24471;&#21040;&#25152;&#26377;&#20197;POST&#26041;&#24335;&#25552;&#20132;&#30340;&#34920;&#21333;&#25968;&#25454;&#65292;
        &#36825;&#21487;&#33021;&#20250;&#24341;&#36215;&#28508;&#22312;&#30340;&#28151;&#28102;&#65292;&#24178;&#25200;&#37027;&#20010;&#25511;&#21046;&#22120;&#30340;&#27491;&#24120;&#24037;&#20316;&#12290; 
        &#21478;&#19968;&#20010;&#22312;&#26174;&#31034;&#35270;&#22270;&#20043;&#21069;&#36820;&#22238;HTTP redirect&#30340;&#21407;&#22240;&#26159;&#36825;&#21487;&#20197;&#38450;&#27490;&#29992;&#25143;&#37325;&#22797;&#25552;&#20132;&#21516;&#19968;&#34920;&#21333;&#12290;
        &#20855;&#20307;&#19968;&#28857;&#35762;&#65292;&#27983;&#35272;&#22120;&#20808;&#29992;<tt class="literal">POST</tt>&#30340;&#26041;&#24335;&#25552;&#20132;&#34920;&#21333;,&#28982;&#21518;&#23427;&#25509;&#25910;&#21040;&#37325;&#23450;&#21521;&#30340;&#25351;&#20196;&#65292;&#23427;&#32487;&#32493;&#29992;<tt class="literal">GET</tt>&#30340;&#26041;&#24335;&#21435;&#19979;&#36733;&#26032;&#30340;&#39029;&#38754;&#12290;
        &#20174;&#27983;&#35272;&#22120;&#30340;&#35282;&#24230;&#30475;&#65292;&#36825;&#20010;&#26032;&#30340;&#39029;&#38754;&#19981;&#26159;<tt class="literal">POST</tt>&#30340;&#36820;&#22238;&#32467;&#26524;&#65292;&#32780;&#26159;<tt class="literal">GET</tt>&#30340;&#12290;
        &#36825;&#26679;&#65292;&#29992;&#25143;&#19981;&#21487;&#33021;&#22312;&#28857;&#20987;&#21047;&#26032;&#30340;&#26102;&#20505;&#19981;&#23567;&#24515;&#20877;&#27425;&#25552;&#20132;&#34920;&#21333;&#65292;&#22240;&#20026;&#21047;&#26032;&#30340;&#32467;&#26524;&#26159;&#20877;&#27425;&#29992;<tt class="literal">GET</tt> &#21435;&#19979;&#36733;&#34920;&#21333;&#25552;&#20132;&#21518;&#30340;&#32467;&#26524;&#39029;&#38754;&#65292;&#32780;&#19981;&#26159;&#37325;&#26032;&#25552;&#20132;&#21021;&#22987;&#30340;<tt class="literal">POST</tt>&#25968;&#25454;&#12290;
        </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mvc-redirecting-redirect-view"></a>13.5.3.1.&nbsp;<tt class="classname">RedirectView</tt></h4></div></div><div></div></div><p>&#22312;&#25511;&#21046;&#22120;&#20013;&#24378;&#21046;&#37325;&#23450;&#21521;&#30340;&#26041;&#27861;&#20043;&#19968;&#26159;&#35753;&#25511;&#21046;&#22120;&#21019;&#24314;&#24182;&#36820;&#22238;&#19968;&#20010;Spring&#30340;<tt class="classname">RedirectView</tt>&#30340;&#23454;&#20363;&#12290;
          &#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;<tt class="classname">DispatcherServlet</tt>&#19981;&#20250;&#20351;&#29992;&#36890;&#24120;&#30340;&#35270;&#22270;&#35299;&#26512;&#26426;&#21046;&#65292;
          &#26082;&#28982;&#23427;&#24050;&#32463;&#25343;&#21040;&#20102;&#19968;&#20010;&#65288;&#37325;&#23450;&#21521;&#65289;&#35270;&#22270;&#65292;&#23427;&#23601;&#35753;&#36825;&#20010;&#35270;&#22270;&#21435;&#23436;&#25104;&#20313;&#19979;&#30340;&#24037;&#20316;&#12290;
          </p><p><tt class="classname">RedirectView</tt>&#20250;&#35843;&#29992;<tt class="literal">HttpServletResponse.sendRedirect()</tt>&#26041;&#27861;&#65292;
          &#20854;&#32467;&#26524;&#26159;&#32473;&#29992;&#25143;&#30340;&#27983;&#35272;&#22120;&#21457;&#22238;&#19968;&#20010;HTTP redirect&#12290;&#25152;&#26377;&#30340;&#27169;&#22411;&#23646;&#24615;&#37117;&#34987;&#36716;&#25442;&#25104;&#20197;HTTP&#35831;&#27714;&#30340;&#35775;&#38382;&#21442;&#25968;&#12290;
          &#36825;&#24847;&#21619;&#30528;&#36825;&#20010;&#27169;&#22411;&#21482;&#33021;&#21253;&#21547;&#21487;&#20197;&#34987;&#31616;&#20415;&#30340;&#36716;&#25442;&#25104;string&#24418;&#24335;&#30340;HTTP&#35831;&#27714;&#35775;&#38382;&#21442;&#25968;&#30340;&#23545;&#35937;&#65292;&#27604;&#22914;String&#25110;&#32773;&#21487;&#20197;&#34987;&#36716;&#25442;&#25104;String&#30340;&#31867;&#22411;&#12290;
          </p><p>&#22914;&#26524;&#20351;&#29992;<tt class="classname">RedirectView</tt>&#35270;&#22270;&#65292;&#24182;&#19988;&#23427;&#26159;&#30001;&#25511;&#21046;&#22120;&#21019;&#24314;&#30340;&#65292;
          &#37325;&#23450;&#21521;&#30340;URL&#26368;&#22909;&#26159;&#29992;Spring&#25152;&#25552;&#20379;&#30340;IoC&#21151;&#33021;&#27880;&#23556;&#21040;&#25511;&#21046;&#22120;&#20013;&#12290;
          &#36825;&#26679;&#36825;&#20010;URL&#23601;&#21487;&#20197;&#21644;&#35270;&#22270;&#21517;&#19968;&#36215;&#22312;&#19978;&#19979;&#25991;&#20013;&#34987;&#22768;&#26126;&#65292;&#32780;&#19981;&#26159;&#22266;&#21270;&#22312;&#25511;&#21046;&#22120;&#20869;&#12290;
          </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mvc-redirecting-redirect-prefix"></a>13.5.3.2.&nbsp;<tt class="literal">redirect:</tt>&#21069;&#32512;</h4></div></div><div></div></div><p>&#23613;&#31649;&#20351;&#29992;<tt class="classname">RedirectView</tt>&#24110;&#25105;&#20204;&#36798;&#21040;&#20102;&#30446;&#30340;&#65292;&#20294;&#26159;&#22914;&#26524;&#25511;&#21046;&#22120;&#29983;&#25104;<tt class="classname">RedirectView</tt>&#30340;&#35805;&#65292;
          &#25511;&#21046;&#22120;&#19981;&#21487;&#36991;&#20813;&#22320;&#35201;&#30693;&#36947;&#26576;&#20010;&#35831;&#27714;&#30340;&#32467;&#26524;&#26159;&#35753;&#29992;&#25143;&#37325;&#23450;&#21521;&#21040;&#21478;&#19968;&#20010;&#39029;&#38754;&#12290;&#36825;&#19981;&#26159;&#26368;&#20339;&#30340;&#23454;&#29616;&#65292;&#22240;&#20026;&#36825;&#20351;&#24471;&#31995;&#32479;&#19981;&#21516;&#27169;&#22359;&#20043;&#38388;&#32467;&#21512;&#24471;&#36807;&#20110;&#32039;&#23494;&#12290;
          &#20854;&#23454;&#25511;&#21046;&#22120;&#19981;&#24212;&#35813;&#36807;&#38382;&#36820;&#22238;&#32467;&#26524;&#26159;&#22914;&#20309;&#29983;&#25104;&#30340;&#65292;&#36890;&#24120;&#24773;&#20917;&#19979;&#65292;&#23427;&#24212;&#35813;&#21482;&#20851;&#24515;&#27880;&#20837;&#32473;&#23427;&#30340;&#35270;&#22270;&#21517;&#31216;&#12290;
          </p><p>&#35299;&#20915;&#19978;&#36848;&#38382;&#39064;&#30340;&#26041;&#27861;&#26159;&#20381;&#38752;<tt class="literal">redirect:</tt>&#21069;&#32512;&#12290;
          &#22914;&#26524;&#36820;&#22238;&#30340;&#35270;&#22270;&#21517;&#21253;&#21547;redirect:&#21069;&#32512;&#65292;<tt class="classname">UrlBasedViewResolver</tt> &#65288;&#20197;&#21450;&#23427;&#30340;&#23376;&#31867;&#65289;
          &#20250;&#30693;&#36947;&#31995;&#32479;&#35201;&#29983;&#25104;&#19968;&#20010;HTTP redirect&#12290; &#35270;&#22270;&#21517;&#20854;&#20313;&#30340;&#37096;&#20998;&#20250;&#34987;&#24403;&#20316;&#37325;&#23450;&#21521;URL&#12290;
          </p><p>&#36825;&#26679;&#20570;&#30340;&#26368;&#32456;&#32467;&#26524;&#36319;&#25511;&#21046;&#22120;&#36820;&#22238;<tt class="classname">RedirectView</tt>&#26159;&#19968;&#26679;&#30340;&#65292;&#20294;&#29616;&#22312;&#25511;&#21046;&#22120;&#21482;&#38656;&#35201;&#21644;&#36923;&#36753;&#19978;&#30340;&#35270;&#22270;&#21517;&#25171;&#20132;&#36947;&#12290;
        <tt class="literal">redirect:/my/response/controller.html</tt>&#36825;&#20010;&#36923;&#36753;&#35270;&#22270;&#21517;&#20013;&#30340;URL&#26159;&#24403;&#21069;servlet context&#20013;&#30340;&#30456;&#23545;&#36335;&#24452;&#12290;
        &#19982;&#20043;&#30456;&#27604;&#65292;<tt class="literal">redirect:http://myhost.com/some/arbitrary/path.html</tt>&#20013;&#30340;URL&#26159;&#32477;&#23545;&#36335;&#24452;&#12290; 
        &#37325;&#35201;&#30340;&#26159;&#65292;&#21482;&#35201;&#36825;&#20010;&#37325;&#23450;&#21521;&#35270;&#22270;&#21517;&#21644;&#20854;&#20182;&#35270;&#22270;&#21517;&#20197;&#30456;&#21516;&#30340;&#26041;&#24335;&#27880;&#20837;&#21040;&#25511;&#21046;&#22120;&#20013;&#65292;&#25511;&#21046;&#22120;&#26681;&#26412;&#19981;&#30693;&#36947;&#37325;&#23450;&#21521;&#26159;&#21542;&#21457;&#29983;&#12290;
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mvc-redirecting-forward-prefix"></a>13.5.3.3.&nbsp;<tt class="literal">forward:</tt>&#21069;&#32512;</h4></div></div><div></div></div><p>&#31867;&#20284;&#30340;&#65292;&#25105;&#20204;&#20063;&#21487;&#20197;&#20351;&#29992;&#21253;&#21547;&#26377;<tt class="literal">forward:</tt>&#21069;&#32512;&#30340;&#35270;&#22270;&#21517;&#12290;
          &#36825;&#20123;&#35270;&#22270;&#21517;&#20250;&#34987;<tt class="classname">UrlBasedViewResolver</tt>&#21644;&#23427;&#30340;&#23376;&#31867;&#27491;&#30830;&#35299;&#26512;&#12290;
          &#35299;&#26512;&#30340;&#20869;&#37096;&#23454;&#29616;&#26159;&#29983;&#25104;&#19968;&#20010;<tt class="classname">InternalResourceView</tt>&#65292;
          &#36825;&#20010;&#35270;&#22270;&#26368;&#32456;&#20250;&#35843;&#29992;<tt class="literal">RequestDispatcher.forward()</tt>&#26041;&#27861;&#65292;&#23558;forward&#35270;&#22270;&#21517;&#30340;&#20854;&#20313;&#37096;&#20998;&#20316;&#20026;URL&#12290;
          &#25152;&#20197;&#65292;&#24403;&#20351;&#29992;<tt class="classname">InternalResourceViewResolver</tt>/<tt class="classname">InternalResourceView</tt>&#65292;
          &#24182;&#19988;&#20320;&#25152;&#29992;&#30340;&#35270;&#22270;&#25216;&#26415;&#26159;JSP&#26102;&#65292;&#20320;&#27809;&#26377;&#24517;&#35201;&#20351;&#29992;&#36825;&#20010;&#21069;&#32512;&#12290;
          &#20294;&#26159;&#65292;&#24403;&#20320;&#20027;&#35201;&#20351;&#29992;&#20854;&#23427;&#30340;&#35270;&#22270;&#25216;&#26415;&#65292;&#20294;&#20173;&#38656;&#35201;&#23545;Servlet/JSP engine&#22788;&#29702;&#30340;&#39029;&#38754;&#24378;&#21046;forward&#26102;&#65292;
          &#36825;&#20010;forward&#21069;&#32512;&#36824;&#26159;&#24456;&#26377;&#29992;&#30340;&#65288;&#20294;&#23601;&#36825;&#20010;&#38382;&#39064;&#32780;&#35328;&#65292;&#22914;&#26524;&#19981;&#24819;&#20351;&#29992;forward&#21069;&#32512;&#65292;&#20063;&#21487;&#20197;&#20351;&#29992;&#35270;&#22270;&#35299;&#26512;&#38142;&#65289;&#12290;
		</p><p>&#21644;<tt class="literal">redirect:</tt>&#21069;&#32512;&#19968;&#26679;&#65292;&#22914;&#26524;&#21547;&#26377;forward&#21069;&#32512;&#30340;&#35270;&#22270;&#21517;&#21644;&#20854;&#20182;&#35270;&#22270;&#21517;&#19968;&#26679;&#34987;&#27880;&#20837;&#25511;&#21046;&#22120;&#65292;
          &#25511;&#21046;&#22120;&#26681;&#26412;&#19981;&#38656;&#35201;&#30693;&#36947;&#22312;&#22788;&#29702;&#21709;&#24212;&#30340;&#36807;&#31243;&#20013;&#26159;&#21542;&#21457;&#29983;&#20219;&#20309;&#29305;&#27530;&#24773;&#20917;&#12290;
          </p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="mvc-localeresolver"></a>13.6.&nbsp;&#26412;&#22320;&#21270;&#35299;&#26512;&#22120;</h2></div></div><div></div></div><p>Spring&#26550;&#26500;&#30340;&#32477;&#22823;&#37096;&#20998;&#37117;&#25903;&#25345;&#22269;&#38469;&#21270;&#65292;Spring&#30340;web MVC&#26694;&#26550;&#20063;&#19981;&#20363;&#22806;&#12290;
      <tt class="classname">DispatcherServlet</tt> &#20801;&#35768;&#20351;&#29992;&#23458;&#25143;&#31471;&#26412;&#22320;&#21270;&#20449;&#24687;&#33258;&#21160;&#35299;&#26512;&#28040;&#24687;&#12290;
      &#36825;&#20010;&#24037;&#20316;&#30001;<tt class="interfacename">LocaleResolver</tt>&#23545;&#35937;&#23436;&#25104;&#12290;
      </p><p>&#24403;&#25910;&#21040;&#35831;&#27714;&#26102;&#65292;<tt class="classname">DispatcherServlet</tt>&#26597;&#25214;&#19968;&#20010;&#26412;&#22320;&#21270;&#35299;&#26512;&#22120;&#65292;&#22914;&#26524;&#25214;&#21040;&#65292;&#23601;&#20351;&#29992;&#23427;&#35774;&#32622;&#26412;&#22320;&#21270;&#20449;&#24687;&#12290;
      &#36890;&#36807;<tt class="literal">RequestContext.getLocale()</tt>&#26041;&#27861;&#65292;&#24635;&#21487;&#20197;&#33719;&#21462;&#30001;&#26412;&#22320;&#21270;&#35299;&#26512;&#22120;&#35299;&#26512;&#30340;&#23458;&#25143;&#31471;&#30340;&#26412;&#22320;&#21270;&#20449;&#24687;&#12290;
      </p><p>&#38500;&#33258;&#21160;&#30340;&#26412;&#22320;&#21270;&#35299;&#26512;&#20197;&#22806;&#65292;&#36824;&#21487;&#20197;&#23558;&#19968;&#20010;&#25318;&#25130;&#22120;&#32622;&#20110;&#22788;&#29702;&#22120;&#26144;&#23556;&#20013;&#65288;&#21442;&#32771; <a href="#mvc-handlermapping-interceptor" title="13.4.3.&nbsp;&#25318;&#25130;&#22120;&#65288;HandlerInterceptor&#65289;">Section&nbsp;13.4.3, &#8220;&#25318;&#25130;&#22120;&#65288;HandlerInterceptor&#65289;&#8221;</a>&#65289;&#65292;
      &#20197;&#20415;&#22312;&#26576;&#31181;&#29615;&#22659;&#19979;&#21487;&#20197;&#25913;&#21464;&#26412;&#22320;&#21270;&#20449;&#24687;&#65292;&#20363;&#22914;&#65292;&#21487;&#20197;&#22522;&#20110;&#35831;&#27714;&#20013;&#30340;&#21442;&#25968;&#21464;&#26356;&#26412;&#22320;&#21270;&#20449;&#24687;&#12290;
      </p><p>&#26412;&#22320;&#21270;&#35299;&#26512;&#22120;&#21644;&#25318;&#25130;&#22120;&#37117;&#23450;&#20041;&#22312;<tt class="literal">org.springframework.web.servlet.i18n</tt>&#21253;&#20013;&#65292;
      &#21487;&#20197;&#22312;&#24212;&#29992;&#30340;&#19978;&#19979;&#25991;&#20013;&#37197;&#32622;&#23427;&#20204;&#12290;&#19979;&#25991;&#20171;&#32461;&#20102;&#19968;&#20123;Spring&#25552;&#20379;&#30340;&#26412;&#22320;&#21270;&#35299;&#26512;&#22120;&#12290;
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-localeresolver-acceptheader"></a>13.6.1.&nbsp;<tt class="classname">AcceptHeaderLocaleResolver</tt></h3></div></div><div></div></div><p>&#36825;&#20010;&#26412;&#22320;&#21270;&#35299;&#26512;&#22120;&#26816;&#26597;&#35831;&#27714;&#20013;&#23458;&#25143;&#31471;&#27983;&#35272;&#22120;&#21457;&#36865;&#30340;<tt class="literal">accept-language</tt>&#22836;&#20449;&#24687;&#65292;
        &#36890;&#24120;&#36825;&#20010;HTTP Header&#21253;&#21547;&#23458;&#25143;&#31471;&#25805;&#20316;&#31995;&#32479;&#30340;&#26412;&#22320;&#21270;&#20449;&#24687;&#12290;
	  </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-localeresolver-cookie"></a>13.6.2.&nbsp;<tt class="classname">CookieLocaleResolver</tt></h3></div></div><div></div></div><p>&#36825;&#20010;&#26412;&#22320;&#21270;&#35299;&#26512;&#22120;&#26816;&#26597;&#23458;&#25143;&#31471;&#20013;&#30340;<tt class="classname">Cookie</tt>&#26159;&#21542;&#21253;&#21547;&#26412;&#22320;&#21270;&#20449;&#24687;&#12290;
        &#22914;&#26524;&#26377;&#30340;&#35805;&#65292;&#23601;&#20351;&#29992;&#12290;&#24403;&#37197;&#32622;&#36825;&#20010;&#35299;&#26512;&#22120;&#30340;&#26102;&#20505;&#65292;&#21487;&#20197;&#25351;&#23450;cookie&#21517;&#65292;&#20197;&#21450;cookie&#30340;&#26368;&#38271;&#29983;&#23384;&#26399;&#65288;Max Age&#65289;&#12290; 
        &#19979;&#38754;&#36825;&#20010;&#20363;&#23376;&#23450;&#20041;&#20102;&#19968;&#20010;<tt class="classname">CookieLocaleResolver</tt>&#12290;
        </p><pre class="programlisting">&lt;bean id="localeResolver" class="org.springframework.web.servlet.i18n.CookieLocaleResolver"&gt;

    &lt;property name="cookieName" value="clientlanguage"/&gt;
    
    <i class="lineannotation"><span class="lineannotation">&lt;!-- in seconds. If set to <tt class="literal">-1</tt>, the cookie is not persisted (deleted when browser shuts down) --&gt;</span></i>
    &lt;property name="cookieMaxAge" value="100000"&gt;

&lt;/bean&gt;</pre><div class="table"><a name="mvc-cookie-locale-resolver-props-tbl"></a><p class="title"><b>Table&nbsp;13.5.&nbsp;<tt class="classname">CookieLocaleResolver</tt>&#30340;&#23646;&#24615;</b></p><table summary="CookieLocaleResolver&#30340;&#23646;&#24615;" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>&#23646;&#24615;</th><th>&#32570;&#30465;&#20540;</th><th>&#25551;&#36848;</th></tr></thead><tbody><tr><td>cookieName</td><td>classname + LOCALE</td><td>cookie&#30340;&#21517;&#23383;</td></tr><tr><td>cookieMaxAge</td><td>Integer.MAX_INT</td><td>
              cookie&#22312;&#23458;&#25143;&#31471;&#23384;&#22312;&#30340;&#26368;&#38271;&#26102;&#38388;&#12290;&#22914;&#26524;&#35813;&#20540;&#26159;-1&#65292;&#36825;&#20010;cookie&#21482;&#34987;&#20445;&#30041;&#22312;&#20869;&#23384;&#20013;&#65292;&#24403;&#23458;&#25143;&#20851;&#38381;&#27983;&#35272;&#22120;&#26102;&#65292;&#36825;&#20010;cookie&#23601;&#19981;&#23384;&#22312;&#20102;</td></tr><tr><td>cookiePath</td><td>/</td><td>
              &#36890;&#36807;&#36825;&#20010;&#21442;&#25968;&#65292;&#21487;&#20197;&#23558;&#35813;cookie&#30340;&#20316;&#29992;&#38480;&#21046;&#22312;&#19968;&#37096;&#20998;&#29305;&#23450;&#30340;&#12290;
              &#20855;&#20307;&#22320;&#35828;&#65292;&#21482;&#26377;&#35813;&#30446;&#24405;(cookiePath)&#21450;&#20854;&#23376;&#30446;&#24405;&#19979;&#30340;&#39029;&#38754;&#21487;&#20197;&#20351;&#29992;&#36825;&#20010;cookie</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-localeresolver-session"></a>13.6.3.&nbsp;<tt class="classname">SessionLocaleResolver</tt></h3></div></div><div></div></div><p><tt class="classname">SessionLocaleResolver</tt>&#20801;&#35768;&#20174;&#29992;&#25143;&#35831;&#27714;&#30456;&#20851;&#30340;session&#20013;&#33719;&#21462;&#26412;&#22320;&#21270;&#20449;&#24687;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-localeresolver-interceptor"></a>13.6.4.&nbsp;<tt class="classname">LocaleChangeInterceptor</tt></h3></div></div><div></div></div><p>&#21487;&#20197;&#20351;&#29992;<tt class="classname">LocaleChangeInterceptor</tt>&#20462;&#25913;&#26412;&#22320;&#21270;&#20449;&#24687;&#12290;
        &#36825;&#20010;&#25318;&#25130;&#22120;&#38656;&#35201;&#34987;&#28155;&#21152;&#21040;&#22788;&#29702;&#22120;&#26144;&#23556;&#20013;&#65288;&#21442;&#32771;<a href="#mvc-handlermapping" title="13.4.&nbsp;&#22788;&#29702;&#22120;&#26144;&#23556;&#65288;handler mapping&#65289;">Section&nbsp;13.4, &#8220;&#22788;&#29702;&#22120;&#26144;&#23556;&#65288;handler mapping&#65289;&#8221;</a>&#65289;&#12290;
        &#23427;&#21487;&#20197;&#20390;&#27979;&#35831;&#27714;&#20013;&#26576;&#20010;&#29305;&#23450;&#30340;&#21442;&#25968;&#65292;&#28982;&#21518;&#35843;&#29992;&#19978;&#19979;&#25991;&#20013;&#30340;LocaleResolver&#20013;&#30340; setLocale()&#26041;&#27861;&#65292;&#30456;&#24212;&#22320;&#20462;&#25913;&#26412;&#22320;&#21270;&#20449;&#24687;&#12290;
	  </p><pre class="programlisting">&lt;bean id="localeChangeInterceptor"
      class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor"&gt;
    &lt;property name="paramName" value="siteLanguage"/&gt;
&lt;/bean&gt;

&lt;bean id="localeResolver"
      class="org.springframework.web.servlet.i18n.CookieLocaleResolver"/&gt;

&lt;bean id="urlMapping"
      class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping"&gt;
    &lt;property name="interceptors"&gt;
        &lt;list&gt;
            &lt;ref bean="localeChangeInterceptor"/&gt;
        &lt;/list&gt;
    &lt;/property&gt;
    &lt;property name="mappings"&gt;
        &lt;value&gt;/**/*.view=someController&lt;/value&gt;
    &lt;/property&gt;
&lt;/bean&gt;</pre><p>&#22312;&#19978;&#38754;&#36825;&#20010;&#20363;&#23376;&#20013;&#65292;&#25152;&#26377;&#23545;<tt class="literal">*.view</tt>&#36164;&#28304;&#30340;&#35831;&#27714;&#65292;&#21482;&#35201;&#21253;&#21547;&#21442;&#25968;<tt class="literal">siteLanguage</tt>&#65292;
        &#37117;&#20250;&#25913;&#21464;&#26412;&#22320;&#21270;&#20449;&#24687;&#12290;&#27604;&#22914;&#19979;&#38754;&#36825;&#20010;&#35831;&#27714;<tt class="literal">http://www.sf.net/home.view?siteLanguage=nl</tt>&#20250;&#23558;&#32593;&#31449;&#35821;&#35328;&#20462;&#25913;&#20026;&#33655;&#20848;&#35821;&#12290;
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="mvc-themeresolver"></a>13.7.&nbsp;&#20351;&#29992;&#20027;&#39064;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-themeresolver-introduction"></a>13.7.1.&nbsp;&#31616;&#20171;</h3></div></div><div></div></div><p>Sping&#30340;web MVC&#26694;&#26550;&#20801;&#35768;&#20320;&#36890;&#36807;<span class="emphasis"><em>&#20027;&#39064;&#65288;theme&#65289;</em></span>&#26469;&#25511;&#21046;&#32593;&#39029;&#30340;&#39118;&#26684;&#65292;&#36825;&#23558;&#36827;&#19968;&#27493;&#25913;&#21892;&#29992;&#25143;&#30340;&#20307;&#39564;&#12290;
        &#31616;&#21333;&#26469;&#35828;&#65292;&#19968;&#20010;&#20027;&#39064;&#23601;&#26159;&#19968;&#32452;&#38745;&#24577;&#30340;&#36164;&#28304;&#65288;&#27604;&#22914;&#26679;&#24335;&#34920;&#21644;&#22270;&#29255;&#65289;&#65292;&#23427;&#20204;&#21487;&#20197;&#24433;&#21709;&#24212;&#29992;&#31243;&#24207;&#30340;&#35270;&#35273;&#25928;&#26524;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-themeresolver-defining"></a>13.7.2.&nbsp;&#22914;&#20309;&#23450;&#20041;&#20027;&#39064;</h3></div></div><div></div></div><p>&#20026;&#20102;&#22312;web&#24212;&#29992;&#20013;&#20351;&#29992;&#20027;&#39064;&#65292;&#38656;&#35201;&#35774;&#32622;<tt class="interfacename">org.springframework.ui.context.ThemeSource</tt>&#12290;
        <tt class="interfacename">WebApplicationContext</tt>&#26159;&#20174;<tt class="interfacename">ThemeSource</tt>&#25193;&#23637;&#32780;&#26469;&#65292;
        &#20294;&#26159;&#23427;&#26412;&#36523;&#24182;&#27809;&#26377;&#23454;&#29616;<tt class="interfacename">ThemeSource</tt>&#23450;&#20041;&#30340;&#26041;&#27861;&#65292;&#23427;&#25226;&#36825;&#20123;&#20219;&#21153;&#36716;&#20132;&#32473;&#21035;&#30340;&#19987;&#29992;&#27169;&#22359;&#12290;
        &#22914;&#26524;&#27809;&#26377;&#26126;&#30830;&#35774;&#32622;&#65292;&#30495;&#27491;&#23454;&#29616;<tt class="interfacename">ThemeSource</tt>&#30340;&#31867;&#26159;<tt class="classname">org.springframework.ui.context.support.ResourceBundleThemeSource</tt>&#12290;
        &#36825;&#20010;&#31867;&#22312;classpath&#30340;&#26681;&#37096;&#65288;&#27604;&#22914;&#22312;<tt class="literal">/WEB-INF/classes</tt>&#30446;&#24405;&#19979;&#65289;&#23547;&#25214;&#21512;&#36866;&#30340;&#23646;&#24615;&#25991;&#20214;&#26469;&#23436;&#25104;&#37197;&#32622;&#12290;
        &#22914;&#26524;&#24819;&#33258;&#24049;&#23454;&#29616;<tt class="interfacename">ThemeSource</tt>&#25509;&#21475;&#65292;
        &#25110;&#32773;&#38656;&#35201;&#37197;&#32622;<tt class="classname">ResourceBundleThemeSource</tt>&#25152;&#38656;&#30340;&#23646;&#24615;&#25991;&#20214;&#30340;&#21069;&#32512;&#21517;&#65288;basename prefix&#65289;&#65292;
        &#21487;&#20197;&#22312;&#24212;&#29992;&#19978;&#19979;&#25991;&#20013;&#23450;&#20041;&#19968;&#20010;&#21517;&#20026;"themeSource"&#30340;bean&#65288;&#27880;&#24847;&#65292;&#24517;&#39035;&#29992;&#36825;&#20010;&#21517;&#23383;&#65289;&#12290;
        web application context&#20250;&#33258;&#21160;&#26816;&#27979;&#24182;&#20351;&#29992;&#36825;&#20010;bean&#12290;</p><p>&#22312;&#20351;&#29992;<tt class="classname">ResourceBundleThemeSource</tt>&#26102;&#65292;&#27599;&#20010;&#20027;&#39064;&#26159;&#29992;&#19968;&#20010;&#23646;&#24615;&#25991;&#20214;&#26469;&#37197;&#32622;&#30340;&#12290;
        &#36825;&#20010;&#23646;&#24615;&#25991;&#20214;&#20013;&#21015;&#20030;&#20102;&#26500;&#25104;&#19968;&#20010;&#20027;&#39064;&#25152;&#38656;&#30340;&#36164;&#28304;&#12290;&#27604;&#22914;:</p><pre class="programlisting">styleSheet=/themes/cool/style.css
background=/themes/cool/img/coolBg.jpg</pre><p>&#36825;&#20123;&#23646;&#24615;&#30340;&#21517;&#23383;&#24212;&#35813;&#21644;&#35270;&#22270;&#20013;&#30340;&#26576;&#20123;&#20027;&#39064;&#20803;&#32032;&#65288;themed element&#65289;&#19968;&#19968;&#23545;&#24212;&#12290;
        &#22312;JSP&#35270;&#22270;&#20013;&#65292;&#36825;&#20123;&#20803;&#32032;&#36890;&#24120;&#29992;<tt class="literal">spring:theme</tt>&#26631;&#31614;&#22768;&#26126;&#65288;&#36825;&#20010;&#26631;&#31614;&#30340;&#29992;&#27861;&#21644;<tt class="literal">spring:message</tt>&#24456;&#30456;&#20284;&#65289;&#12290;
        &#19979;&#25991;&#36825;&#20010;JSP&#29255;&#27573;&#20351;&#29992;&#20102;&#25105;&#20204;&#22312;&#21069;&#38754;&#23450;&#20041;&#30340;&#20027;&#39064;&#65306;
        </p><pre class="programlisting">&lt;%@ taglib prefix="spring" uri="http://www.springframework.org/tags"%&gt;
&lt;html&gt;
   &lt;head&gt;
      &lt;link rel="stylesheet" href="&lt;spring:theme code="styleSheet"/&gt;" type="text/css"/&gt;
   &lt;/head&gt;
   &lt;body background="&lt;spring:theme code="background"/&gt;"&gt;
      ...
   &lt;/body&gt;
&lt;/html&gt;</pre><p>&#38500;&#38750;&#26377;&#29305;&#27530;&#37197;&#32622;&#65292;&#24403;<tt class="classname">ResourceBundleThemeSource</tt>&#23547;&#25214;&#25152;&#38656;&#30340;&#23646;&#24615;&#25991;&#20214;&#26102;&#65292;&#23427;&#40664;&#35748;&#22312;&#37197;&#32622;&#30340;&#23646;&#24615;&#25991;&#20214;&#21517;&#20013;&#27809;&#26377;&#20219;&#20309;&#21069;&#32512;&#65292;
        &#20063;&#23601;&#26159;&#35828;&#65292;&#23427;&#21482;&#20250;&#22312;classpath&#30340;&#26681;&#37096;&#23547;&#25214;&#12290;&#20030;&#20363;&#26469;&#35828;&#65292;&#22914;&#26524;&#19968;&#20010;&#20027;&#39064;&#30340;&#23450;&#20041;&#21253;&#21547;&#22312;<tt class="literal">cool.properties</tt>&#36825;&#20010;&#23646;&#24615;&#25991;&#20214;&#20013;&#65292;
        &#38656;&#35201;&#25226;&#36825;&#20010;&#25991;&#20214;&#25918;&#22312;classpath&#30340;&#26681;&#37096;&#65292;&#27604;&#22914;&#22312;<tt class="literal">/WEB-INF/classes</tt>&#30446;&#24405;&#19979;&#12290;
        &#21516;&#26102;&#65292;<tt class="classname">ResourceBundleThemeSource</tt> &#20351;&#29992;&#26631;&#20934;&#30340;Java resource bundle&#31649;&#29702;&#26426;&#21046;&#65292;
        &#36825;&#24847;&#21619;&#30528;&#23454;&#29616;&#20027;&#39064;&#30340;&#22269;&#38469;&#21270;&#26159;&#24456;&#23481;&#26131;&#30340;&#12290;
        &#27604;&#22914;&#65292;<tt class="literal">/WEB-INF/classes/cool_nl.properties</tt>&#36825;&#20010;&#23646;&#24615;&#25991;&#20214;&#20013;&#21487;&#20197;&#25351;&#21521;&#19968;&#20010;&#26174;&#31034;&#33655;&#20848;&#25991;&#23383;&#30340;&#22270;&#29255;&#12290;</p><p>&#35793;&#32773;&#27880;&#65306;&#22914;&#26524;&#23545;ResourceBundle&#21644;&#23427;&#30340;&#23646;&#24615;&#25991;&#20214;&#21517;&#30340;&#35268;&#33539;&#19981;&#29087;&#24713;&#65292;&#35831;&#21442;&#38405;JavaDoc&#20013;&#20851;&#20110;ResourceBundle.getBundle(String baseName,Locale locale)&#36825;&#20010;API&#12290;
        &#36825;&#20010;baseName&#21442;&#25968;&#21644;&#23646;&#24615;&#25991;&#20214;&#21517;&#26377;&#19968;&#23450;&#20851;&#31995;&#12290;
        &#27604;&#22914;&#65292;&#22914;&#26524;cool.properties&#36825;&#20010;&#23646;&#24615;&#25991;&#20214;&#25918;&#32622;&#22312;&#20102;/WEB-INF/classes/com/aa/bb/cc&#30446;&#24405;&#19979;&#65292;
        &#37027;&#20040;&#36825;&#20010;baseName&#30340;&#20540;&#24212;&#35813;&#20026;com.aa.bb.cc.cool&#12290;
        &#22312;&#36825;&#37324;&#65292;com.aa.bb.cc&#23601;&#26159;&#36825;&#20010;&#23646;&#24615;&#25991;&#20214;&#21517;&#30340;&#21069;&#32512;(basename prefix)&#12290;
        &#25903;&#25345;&#21069;&#32512;&#30340;API&#20250;&#22312;&#21069;&#32512;&#25152;&#22768;&#26126;&#30340;&#30446;&#24405;&#19979;&#23547;&#25214;&#30456;&#24212;&#30340;&#25991;&#20214;&#65292;&#27604;&#22914;getBundle(&#65289;&#12290;
        &#22914;&#26524;&#27809;&#26377;&#29305;&#27530;&#30340;&#37197;&#32622;&#65292;<tt class="classname">ResourceBundleThemeSource</tt>&#19981;&#25903;&#25345;&#21069;&#32512;&#65292;
        &#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#20320;&#35201;&#25226;&#23427;&#25152;&#38656;&#35201;&#30340;&#23646;&#24615;&#25991;&#20214;&#25918;&#22312;<tt class="literal">/WEB-INF/classes</tt>&#30446;&#24405;&#19979;&#12290;
	  </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-themeresolver-resolving"></a>13.7.3.&nbsp;&#20027;&#39064;&#35299;&#26512;&#22120;</h3></div></div><div></div></div><p>&#29616;&#22312;&#25105;&#20204;&#24050;&#32463;&#30693;&#36947;&#22914;&#20309;&#23450;&#20041;&#20027;&#39064;&#20102;&#65292;&#21097;&#19979;&#30340;&#20107;&#23601;&#26159;&#20915;&#23450;&#35813;&#29992;&#21738;&#20010;&#20027;&#39064;&#12290;
        <tt class="classname">DispatcherServlet</tt>&#20250;&#23547;&#25214;&#19968;&#20010;&#21483;&#8220;themeResolver&#8221;&#30340;bean&#65292;
        &#36825;&#20010;bean&#24212;&#35813;&#23454;&#29616;&#20102;<tt class="interfacename">ThemeResolver</tt>&#25509;&#21475;&#12290;
        &#20027;&#39064;&#35299;&#26512;&#22120;&#30340;&#24037;&#20316;&#27969;&#31243;&#21644;<tt class="interfacename">LocaleResolver</tt>&#24046;&#19981;&#22810;&#12290;
        &#23427;&#21487;&#20197;&#35299;&#26512;&#27599;&#20010;&#35831;&#27714;&#25152;&#23545;&#24212;&#30340;&#20027;&#39064;&#65292;&#20063;&#21487;&#20197;&#21160;&#24577;&#22320;&#26356;&#25442;&#20027;&#39064;&#12290;&#19979;&#38754;&#26159;Spring&#25552;&#20379;&#30340;&#20960;&#20010;&#20027;&#39064;&#35299;&#26512;&#22120;&#65306;
        </p><div class="table"><a name="mvc-theme-resolver-impls-tbl"></a><p class="title"><b>Table&nbsp;13.6.&nbsp;<tt class="interfacename">ThemeResolver</tt>&#30340;&#23454;&#29616;</b></p><table summary="ThemeResolver&#30340;&#23454;&#29616;" border="1"><colgroup><col><col></colgroup><thead><tr><th>Java&#31867;</th><th>&#25551;&#36848;</th></tr></thead><tbody><tr><td><tt class="classname">FixedThemeResolver</tt></td><td>
              &#36873;&#29992;&#19968;&#20010;&#22266;&#23450;&#30340;&#20027;&#39064;&#65292;&#36825;&#20010;&#20027;&#39064;&#30001;&#8220;defaultThemeName&#8221;&#23646;&#24615;&#20915;&#23450;&#12290;</td></tr><tr><td><tt class="classname">SessionThemeResolver</tt></td><td>
              &#20027;&#39064;&#20445;&#23384;&#22312;&#29992;&#25143;&#30340;HTTP session&#12290;&#22312;&#27599;&#20010;session&#20013;&#65292;&#36825;&#20010;&#20027;&#39064;&#21482;&#38656;&#35201;&#34987;&#35774;&#32622;&#19968;&#27425;&#65292;&#20294;&#26159;&#27599;&#20010;&#26032;session&#30340;&#20027;&#39064;&#37117;&#35201;&#37325;&#26032;&#35774;&#32622;&#12290;</td></tr><tr><td><tt class="classname">CookieThemeResolver</tt></td><td>
              &#29992;&#25143;&#25152;&#36873;&#25321;&#30340;&#20027;&#39064;&#20197;cookie&#30340;&#24418;&#24335;&#23384;&#22312;&#23458;&#25143;&#31471;&#30340;&#26426;&#22120;&#19978;&#38754;&#12290;</td></tr></tbody></table></div><p>Spring &#20063;&#25903;&#25345;&#19968;&#20010;&#21483;<tt class="classname">ThemeChangeInterceptor</tt>
	  &#30340;&#35831;&#27714;&#25318;&#25130;&#22120;&#12290;&#23427;&#21487;&#20197;&#26681;&#25454;&#35831;&#27714;&#20013;&#21253;&#21547;&#30340;&#21442;&#25968;&#26469;&#21160;&#24577;&#22320;&#25913;&#21464;&#20027;&#39064;&#12290;
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="mvc-multipart"></a>13.8.&nbsp;Spring&#23545;&#20998;&#27573;&#25991;&#20214;&#19978;&#20256;&#65288;multipart file upload&#65289;&#30340;&#25903;&#25345;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-multipart-introduction"></a>13.8.1.&nbsp;&#20171;&#32461;</h3></div></div><div></div></div><p>
			Spring&#25903;&#25345;web&#24212;&#29992;&#20013;&#30340;&#20998;&#27573;&#25991;&#20214;&#19978;&#20256;&#12290;&#36825;&#31181;&#25903;&#25345;&#26159;&#30001;&#21363;&#25554;&#21363;&#29992;&#30340;<tt class="interfacename">MultipartResolver</tt>&#26469;&#23454;&#29616;&#12290;
			&#36825;&#20123;&#35299;&#26512;&#22120;&#37117;&#23450;&#20041;&#22312;<tt class="literal">org.springframework.web.multipart</tt>&#21253;&#37324;&#12290;
			Spring&#25552;&#20379;&#20102;&#29616;&#25104;&#30340;<tt class="interfacename">MultipartResolver</tt>&#21487;&#20197;&#25903;&#25345;<span class="emphasis"><em>Commons FileUpload</em></span>&#65288;<a href="http://jakarta.apache.org/commons/fileupload" target="_top">http://jakarta.apache.org/commons/fileupload</a>&#65289;&#21644;
			<span class="emphasis"><em>COS FileUpload</em></span>(<a href="http://www.servlets.com/cos" target="_top">http://www.servlets.com/cos</a>)&#12290;
			&#26412;&#31456;&#21518;&#38754;&#30340;&#37096;&#20998;&#25551;&#36848;&#20102;Spring&#26159;&#22914;&#20309;&#25903;&#25345;&#25991;&#20214;&#19978;&#20256;&#30340;&#12290;
      </p><p>
			&#36890;&#24120;&#24773;&#20917;&#19979;&#65292;Spring&#26159;&#19981;&#22788;&#29702;&#25991;&#20214;&#19978;&#20256;&#30340;&#65292;&#22240;&#20026;&#19968;&#20123;&#24320;&#21457;&#32773;&#24819;&#35201;&#33258;&#24049;&#22788;&#29702;&#23427;&#20204;&#12290;
			&#22914;&#26524;&#24819;&#20351;&#29992;Spring&#30340;&#36825;&#20010;&#21151;&#33021;&#65292;&#38656;&#35201;&#22312;web&#24212;&#29992;&#30340;&#19978;&#19979;&#25991;&#20013;&#28155;&#21152;&#20998;&#27573;&#25991;&#20214;&#35299;&#26512;&#22120;&#12290;
			&#36825;&#26679;&#65292;&#27599;&#20010;&#35831;&#27714;&#23601;&#20250;&#34987;&#26816;&#26597;&#26159;&#21542;&#21253;&#21547;&#25991;&#20214;&#19978;&#20256;&#12290;&#22914;&#26524;&#27809;&#26377;&#65292;&#36825;&#20010;&#35831;&#27714;&#23601;&#34987;&#27491;&#24120;&#30340;&#22788;&#29702;&#65292;
			&#21542;&#21017;&#65292;&#24212;&#29992;&#19978;&#19979;&#25991;&#20013;&#24050;&#32463;&#23450;&#20041;&#30340;<tt class="classname">MultipartResolver</tt>&#23601;&#20250;&#34987;&#35843;&#29992;&#12290;
			&#28982;&#21518;&#65292;&#35831;&#27714;&#20013;&#30340;&#25991;&#20214;&#23646;&#24615;&#23601;&#20250;&#20687;&#20854;&#23427;&#23646;&#24615;&#19968;&#26679;&#34987;&#22788;&#29702;&#12290;
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-multipart-resolver"></a>13.8.2.&nbsp;&#20351;&#29992;<tt class="interfacename">MultipartResolver</tt></h3></div></div><div></div></div><p>
			&#19979;&#38754;&#30340;&#20363;&#23376;&#35828;&#26126;&#20102;&#22914;&#20309;&#20351;&#29992;<tt class="classname">CommonsMultipartResolver</tt>&#65306;
      </p><pre class="programlisting">&lt;bean id="multipartResolver"
    class="org.springframework.web.multipart.commons.CommonsMultipartResolver"&gt;

    <i class="lineannotation"><span class="lineannotation">&lt;!-- one of the properties available; the maximum file size in bytes --&gt;</span></i>
    &lt;property name="maxUploadSize" value="100000"/&gt;
&lt;/bean&gt;</pre><p>
			&#19979;&#38754;&#36825;&#20010;&#20363;&#23376;&#20351;&#29992;<tt class="classname">CosMultipartResolver</tt>&#65306;
	  </p><pre class="programlisting">&lt;bean id="multipartResolver" class="org.springframework.web.multipart.cos.CosMultipartResolver"&gt;

    <i class="lineannotation"><span class="lineannotation">&lt;!-- one of the properties available; the maximum file size in bytes --&gt;</span></i>
    &lt;property name="maxUploadSize" value="100000"/&gt;
&lt;/bean&gt;</pre><p>
			&#24403;&#28982;&#65292;&#38656;&#35201;&#22312;classpath&#20013;&#20026;&#20998;&#27573;&#25991;&#20214;&#35299;&#26512;&#22120;&#25552;&#20379;&#27491;&#30830;&#30340;jar&#25991;&#20214;&#12290;
			&#22914;&#26524;&#26159;<tt class="classname">CommonsMultipartResolver</tt>&#65292;
			&#38656;&#35201;&#20351;&#29992;<tt class="literal">commons-fileupload.jar</tt>&#65292;&#22914;&#26524;&#26159;<tt class="classname">CosMultipartResolver</tt>&#65292;
			&#21017;&#20351;&#29992;<tt class="literal">cos.jar</tt>&#12290;
	  </p><p>
			&#24050;&#32463;&#30475;&#21040;&#22914;&#20309;&#35774;&#32622;Spring&#22788;&#29702;&#25991;&#20214;&#19978;&#20256;&#35831;&#27714;&#65292;&#25509;&#19979;&#26469;&#25105;&#20204;&#30475;&#30475;&#22914;&#20309;&#20351;&#29992;&#23427;&#12290;
			&#24403;Spring&#30340;<tt class="classname">DispatcherServlet</tt>&#21457;&#29616;&#25991;&#20214;&#19978;&#20256;&#35831;&#27714;&#26102;&#65292;&#23427;&#20250;&#28608;&#27963;&#23450;&#20041;&#22312;&#19978;&#19979;&#25991;&#20013;&#30340;&#35299;&#26512;&#22120;&#26469;&#22788;&#29702;&#35831;&#27714;&#12290;
			&#36825;&#20010;&#35299;&#26512;&#22120;&#38543;&#21518;&#26159;&#23558;&#24403;&#21069;&#30340;<tt class="classname">HttpServletRequest</tt>&#23553;&#35013;&#25104;<tt class="classname">MultipartHttpServletRequest</tt>&#65292;&#21518;&#32773;&#25903;&#25345;&#20998;&#27573;&#25991;&#20214;&#19978;&#20256;&#12290;
			&#20351;&#29992;<tt class="classname">MultipartHttpServletRequest</tt>&#65292;&#21487;&#20197;&#33719;&#21462;&#35831;&#27714;&#25152;&#21253;&#21547;&#30340;&#19978;&#20256;&#20449;&#24687;&#65292;&#29978;&#33267;&#21487;&#20197;&#22312;&#25511;&#21046;&#22120;&#20013;&#33719;&#21462;&#20998;&#27573;&#25991;&#20214;&#30340;&#20869;&#23481;&#12290;
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-multipart-forms"></a>13.8.3.&nbsp;&#22312;&#34920;&#21333;&#20013;&#22788;&#29702;&#20998;&#27573;&#25991;&#20214;&#19978;&#20256;</h3></div></div><div></div></div><p>
			&#22312;<tt class="classname">MultipartResolver</tt>&#23436;&#25104;&#20998;&#27573;&#25991;&#20214;&#35299;&#26512;&#21518;&#65292;&#36825;&#20010;&#35831;&#27714;&#23601;&#20250;&#21644;&#20854;&#23427;&#35831;&#27714;&#19968;&#26679;&#34987;&#22788;&#29702;&#12290;
			&#20026;&#20102;&#20351;&#29992;&#25991;&#20214;&#19978;&#20256;&#65292;&#20320;&#38656;&#35201;&#21019;&#24314;&#19968;&#20010;&#24102;&#25991;&#20214;&#19978;&#20256;&#22495;&#65288;upload field&#65289;&#30340;&#65288;HTML&#65289;&#34920;&#21333;&#65292;&#35753;Spring&#23558;&#25991;&#20214;&#32465;&#23450;&#21040;&#20320;&#30340;&#34920;&#21333;&#19978;&#65288;&#22914;&#19979;&#25152;&#31034;&#65289;&#65306;
      </p><pre class="programlisting">&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Upload a file please&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;Please upload a file&lt;/h1&gt;
        &lt;form method="post" action="upload.form" enctype="multipart/form-data"&gt;
            &lt;input type="file" name="file"/&gt;
            &lt;input type="submit"/&gt;
        &lt;/form&gt;
    &lt;/body&gt;
&lt;/html&gt;</pre><p>
			&#21487;&#20197;&#30475;&#21040;&#65292;&#22312;&#19978;&#38754;&#36825;&#20010;&#34920;&#21333;&#37324;&#26377;&#19968;&#20010;input&#20803;&#32032;&#65292;&#36825;&#20010;&#20803;&#32032;&#30340;&#21517;&#23383;&#65288;&#8220;file&#8221;&#65289;&#21644;&#26381;&#21153;&#22120;&#31471;&#22788;&#29702;&#36825;&#20010;&#34920;&#21333;&#30340;bean&#65288;&#22312;&#19979;&#38754;&#23558;&#20250;&#25552;&#21040;&#65289;&#20013;&#31867;&#22411;&#20026;<tt class="literal">byte[]</tt>&#30340;&#23646;&#24615;&#21517;&#30456;&#21516;&#12290; 
			&#22312;&#36825;&#20010;&#34920;&#21333;&#37324;&#25105;&#20204;&#20063;&#22768;&#26126;&#20102;&#32534;&#30721;&#21442;&#25968;&#65288;<tt class="literal">enctype="multipart/form-data"</tt>&#65289;&#20197;&#20415;&#35753;&#27983;&#35272;&#22120;&#30693;&#36947;&#22914;&#20309;&#23545;&#36825;&#20010;&#25991;&#20214;&#19978;&#20256;&#34920;&#21333;&#36827;&#34892;&#32534;&#30721;&#65288;&#21315;&#19975;&#19981;&#35201;&#24536;&#35760;&#36825;&#20040;&#20570;&#65281;&#65289;&#12290;
		</p><p>
			&#21644;&#20854;&#23427;&#19981;&#33021;&#33258;&#21160;&#36716;&#20026;&#23383;&#31526;&#20018;&#31867;&#22411;&#25110;&#32773;&#22522;&#26412;&#31867;&#22411;&#65288;primitive type&#65289;&#30340;&#23646;&#24615;&#19968;&#26679;&#65292;&#20026;&#20102;&#23558;&#19978;&#20256;&#30340;&#20108;&#36827;&#21046;&#25968;&#25454;&#23384;&#25104;bean&#30340;&#23646;&#24615;&#65292;
			&#24517;&#39035;&#36890;&#36807;<tt class="classname">ServletRequestDatabinder</tt>&#27880;&#20876;&#19968;&#20010;&#23646;&#24615;&#32534;&#36753;&#22120;&#12290;
			Spring&#20013;&#20869;&#32622;&#20102;&#20960;&#20010;&#36825;&#26679;&#30340;&#32534;&#36753;&#22120;&#65292;&#23427;&#20204;&#21487;&#20197;&#22788;&#29702;&#25991;&#20214;&#65292;&#28982;&#21518;&#23558;&#32467;&#26524;&#23384;&#25104;bean&#30340;&#23646;&#24615;&#12290;
			&#27604;&#22914;&#65292;<tt class="classname">StringMultipartEditor</tt>&#21487;&#20197;&#23558;&#25991;&#20214;&#36716;&#25442;&#25104;&#19968;&#20010;&#23383;&#31526;&#20018;&#65288;&#20351;&#29992;&#29992;&#25143;&#22768;&#26126;&#30340;&#23383;&#31526;&#38598;&#65289;&#12290;
			<tt class="classname">ByteArrayMultipartEditor</tt>&#21487;&#20197;&#20197;&#23558;&#25991;&#20214;&#36716;&#25442;&#20026;byte&#25968;&#32452;&#12290;
			&#20182;&#20204;&#30340;&#21151;&#33021;&#21644;<tt class="classname">CustomDateEditor</tt>&#30456;&#20284;&#12290;
      </p><p>
			&#24635;&#32780;&#35328;&#20043;&#65292;&#20026;&#20102;&#20351;&#29992;&#65288;HTML&#65289;&#34920;&#21333;&#19978;&#20256;&#25991;&#20214;&#65292;&#38656;&#35201;&#22768;&#26126;&#19968;&#20010;&#35299;&#26512;&#22120;&#65292;&#19968;&#20010;&#25511;&#21046;&#22120;&#65292;&#20877;&#23558;&#25991;&#20214;&#19978;&#20256;&#30340;URL&#26144;&#23556;&#21040;&#25511;&#21046;&#22120;&#26469;&#22788;&#29702;&#36825;&#20010;&#35831;&#27714;&#12290;
			&#19979;&#38754;&#26159;&#36825;&#20960;&#20010;bean&#30340;&#22768;&#26126;&#12290;
	  </p><pre class="programlisting">&lt;beans&gt;
	<i class="lineannotation"><span class="lineannotation">&lt;!-- lets use the Commons-based implementation of the MultipartResolver interface --&gt;</span></i>
    &lt;bean id="multipartResolver"
        class="org.springframework.web.multipart.commons.CommonsMultipartResolver"/&gt;

    &lt;bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping"&gt;
        &lt;property name="mappings"&gt;
            &lt;value&gt;
                /upload.form=fileUploadController
            &lt;/value&gt;
        &lt;/property&gt;
    &lt;/bean&gt;

    &lt;bean id="fileUploadController" class="examples.FileUploadController"&gt;
        &lt;property name="commandClass" value="examples.FileUploadBean"/&gt;
        &lt;property name="formView" value="fileuploadform"/&gt;
        &lt;property name="successView" value="confirmation"/&gt;
    &lt;/bean&gt;

&lt;/beans&gt;</pre><p>
			&#19979;&#38754;&#30340;&#20195;&#30721;&#23450;&#20041;&#20102;&#25511;&#21046;&#22120;&#21644;&#29992;&#26469;&#23384;&#25918;&#25991;&#20214;&#30340;&#37027;&#20010;bean&#12290;
	  </p><pre class="programlisting">public class FileUploadController extends SimpleFormController {

    protected ModelAndView onSubmit(
        HttpServletRequest request,
        HttpServletResponse response,
        Object command,
        BindException errors) throws ServletException, IOException {

        <i class="lineannotation"><span class="lineannotation"> // cast the bean</span></i>
        FileUploadBean bean = (FileUploadBean) command;

        <i class="lineannotation"><span class="lineannotation"> let's see if there's content there</span></i>
        byte[] file = bean.getFile();
        if (file == null) {
            <i class="lineannotation"><span class="lineannotation"> // hmm, that's strange, the user did not upload anything</span></i>
        }

        <i class="lineannotation"><span class="lineannotation"> // well, let's do nothing with the bean for now and return</span></i>
        return super.onSubmit(request, response, command, errors);
    }

    protected void initBinder(HttpServletRequest request, ServletRequestDataBinder binder)
        throws ServletException {
        // to actually be able to convert Multipart instance to byte[]
        // we have to register a custom editor
        binder.registerCustomEditor(byte[].class, new ByteArrayMultipartFileEditor());
        // now Spring knows how to handle multipart object and convert them
    }

}

public class FileUploadBean {

    private byte[] file;

    public void setFile(byte[] file) {
        this.file = file;
    }

    public byte[] getFile() {
        return file;
    }
}</pre><p>
			<tt class="classname">FileUploadBean</tt>&#29992;&#19968;&#20010;<tt class="literal">byte[]</tt>&#31867;&#22411;&#30340;&#23646;&#24615;&#26469;&#23384;&#25918;&#25991;&#20214;&#12290;
			&#21069;&#38754;&#24050;&#32463;&#25552;&#21040;&#36807;&#65292;&#36890;&#24120;&#25511;&#21046;&#22120;&#27880;&#20876;&#19968;&#20010;&#33258;&#23450;&#20041;&#30340;&#32534;&#36753;&#22120;&#20197;&#20415;&#35753;Spring&#30693;&#36947;&#22914;&#20309;&#23558;&#35299;&#26512;&#22120;&#25214;&#21040;&#30340;multipart&#23545;&#35937;&#36716;&#25442;&#25104;bean&#25351;&#23450;&#30340;&#23646;&#24615;&#65292;
			&#20294;&#22312;&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#38500;&#20102;&#23558;byte&#25968;&#32452;&#35760;&#24405;&#19979;&#26469;&#20197;&#22806;&#65292;&#27809;&#26377;&#23545;&#36825;&#20010;&#25991;&#20214;&#36827;&#34892;&#20219;&#20309;&#25805;&#20316;&#65292;
			&#22312;&#23454;&#38469;&#30340;&#24212;&#29992;&#31243;&#24207;&#20013;&#20320;&#21487;&#20197;&#20570;&#20219;&#20309;&#20320;&#24819;&#20570;&#30340;&#20107;&#24773;&#65288;&#27604;&#22914;&#23558;&#25991;&#20214;&#23384;&#20648;&#22312;&#25968;&#25454;&#24211;&#20013;&#65292;&#36890;&#36807;&#30005;&#23376;&#37038;&#20214;&#21457;&#36865;&#32473;&#26576;&#20154;&#31561;&#31561;&#65289;&#12290;
      </p><p>
			&#22312;&#19979;&#38754;&#36825;&#20010;&#20363;&#23376;&#37324;&#65292;&#19978;&#20256;&#30340;&#25991;&#20214;&#34987;&#32465;&#23450;&#20026;&#65288;&#34920;&#21333;&#25903;&#25345;&#30340;&#65289;&#23545;&#35937;&#65288;form backing&#65289;&#30340;String&#23646;&#24615;&#65306;
      </p><pre class="programlisting">public class FileUploadController extends SimpleFormController {

    protected ModelAndView onSubmit(
        HttpServletRequest request,
        HttpServletResponse response,
        Object command,
        BindException errors) throws ServletException, IOException {

        <i class="lineannotation"><span class="lineannotation"> // cast the bean</span></i>
        FileUploadBean bean = (FileUploadBean) command;

        <i class="lineannotation"><span class="lineannotation"> let's see if there's content there</span></i>
        String file = bean.getFile();
        if (file == null) {
            <i class="lineannotation"><span class="lineannotation"> // hmm, that's strange, the user did not upload anything</span></i>
        }

        <i class="lineannotation"><span class="lineannotation"> // well, let's do nothing with the bean for now and return</span></i>
        return super.onSubmit(request, response, command, errors);
    }

    protected void initBinder(HttpServletRequest request, ServletRequestDataBinder binder)
        throws ServletException {
        // to actually be able to convert Multipart instance to a String
        // we have to register a custom editor
        binder.registerCustomEditor(String.class, new StringMultipartFileEditor());
        // now Spring knows how to handle multipart object and convert them
    }

}

public class FileUploadBean {

    private String file;

    public void setFile(String file) {
        this.file = file;
    }

    public String getFile() {
        return file;
    }
}</pre><p>
            &#22914;&#26524;&#20165;&#20165;&#26159;&#22788;&#29702;&#19968;&#20010;&#25991;&#26412;&#25991;&#20214;&#30340;&#19978;&#20256;&#65292;&#19978;&#38754;&#36825;&#20010;&#20363;&#23376;&#30340;&#20570;&#27861;&#36824;&#26159;&#21512;&#29702;&#30340;&#65288;&#20294;&#22914;&#26524;&#19978;&#20256;&#30340;&#26159;&#19968;&#24352;&#22270;&#29255;&#65292;
			&#37027;&#27573;&#20195;&#30721;&#23601;&#20250;&#20986;&#38382;&#39064;&#65289;&#12290;
        </p><p>
            &#26368;&#21518;&#30340;&#35299;&#20915;&#26041;&#27861;&#23601;&#26159;&#23558;&#34920;&#21333;&#25903;&#25345;&#23545;&#35937;&#65288;form backing&#65289;&#30340;&#30456;&#20851;&#23646;&#24615;&#35774;&#25104;<tt class="interfacename">MultipartFile</tt>&#31867;&#22411;&#12290;
			&#36825;&#26679;&#30340;&#35805;&#65292;&#27809;&#26377;&#31867;&#22411;&#36716;&#25442;&#30340;&#38656;&#35201;&#65292;&#25105;&#20204;&#20063;&#23601;&#19981;&#38656;&#35201;&#22768;&#26126;&#20219;&#20309;&#23646;&#24615;&#32534;&#36753;&#22120;&#65288;<tt class="interfacename">PropertyEditor</tt>&#65289;&#12290;
        </p><pre class="programlisting">public class FileUploadController extends SimpleFormController {

    protected ModelAndView onSubmit(
        HttpServletRequest request,
        HttpServletResponse response,
        Object command,
        BindException errors) throws ServletException, IOException {

        <i class="lineannotation"><span class="lineannotation"> // cast the bean</span></i>
        FileUploadBean bean = (FileUploadBean) command;

        <i class="lineannotation"><span class="lineannotation"> let's see if there's content there</span></i>
        MultipartFile file = bean.getFile();
        if (file == null) {
            <i class="lineannotation"><span class="lineannotation"> // hmm, that's strange, the user did not upload anything</span></i>
        }

        <i class="lineannotation"><span class="lineannotation"> // well, let's do nothing with the bean for now and return</span></i>
        return super.onSubmit(request, response, command, errors);
    }
}

public class FileUploadBean {

    private MultipartFile file;

    public void setFile(MultipartFile file) {
        this.file = file;
    }

    public MultipartFile getFile() {
        return file;
    }
}</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="mvc-formtaglib"></a>13.9.&nbsp;&#20351;&#29992;Spring&#30340;&#34920;&#21333;&#26631;&#31614;&#24211;</h2></div></div><div></div></div><p>&#20174;2.0&#29256;&#26412;&#24320;&#22987;&#65292;&#22914;&#26524;&#20351;&#29992;JSP&#21644;Spring Web MVC&#30340;&#35805;&#65292;Spring&#25552;&#20379;&#20102;&#19968;&#22871;&#25903;&#25345;&#25968;&#25454;&#32465;&#23450;&#30340;&#26631;&#31614;&#38598;&#21512;&#65292;&#29992;&#20110;&#22788;&#29702;&#34920;&#21333;&#20803;&#32032;&#12290;
    &#27599;&#20010;&#26631;&#31614;&#25152;&#25903;&#25345;&#30340;&#23646;&#24615;&#38598;&#21512;&#21644;&#19982;&#20854;&#23545;&#24212;&#30340;HTML&#26631;&#31614;&#30456;&#21516;&#65292;&#36825;&#23601;&#35753;&#36825;&#20123;&#26631;&#31614;&#30475;&#36215;&#26469;&#24456;&#29087;&#24713;&#65292;&#32780;&#19988;&#29992;&#36215;&#26469;&#24456;&#30452;&#35266;&#12290;
    &#30001;&#36825;&#20123;&#26631;&#31614;&#24211;&#29983;&#25104;&#30340;HTML&#39029;&#38754;&#31526;&#21512;HTML 4.01/XHTML 1.0&#26631;&#20934;&#12290;
    </p><p>&#19982;&#20854;&#23427;&#34920;&#21333;/&#36755;&#20837;&#26631;&#31614;&#24211;&#19981;&#21516;&#65292;Spring&#30340;&#34920;&#21333;&#26631;&#31614;&#24211;&#19982;Spring Web MVC&#38598;&#25104;&#22312;&#19968;&#36215;&#65292;
    &#20351;&#26631;&#31614;&#21487;&#20197;&#20351;&#29992;&#21629;&#20196;&#23545;&#35937;&#65288;command object&#65289;&#21644;&#20320;&#30340;&#25511;&#21046;&#22120;&#22788;&#29702;&#30340;&#21442;&#32771;&#25968;&#25454;&#65288;reference data&#65289;&#12290;
    &#23601;&#20687;&#19979;&#38754;&#36825;&#20123;&#20363;&#23376;&#23637;&#31034;&#30340;&#19968;&#26679;&#65292;&#34920;&#21333;&#26631;&#31614;&#35753;JSP&#26356;&#26131;&#20110;&#24320;&#21457;&#12289;&#38405;&#35835;&#21644;&#32500;&#25252;&#12290;
    </p><p>&#35753;&#25105;&#20204;&#36827;&#20837;&#34920;&#21333;&#26631;&#31614;&#30340;&#39046;&#22495;&#65292;&#24182;&#36890;&#36807;&#19968;&#20010;&#20363;&#23376;&#30740;&#31350;&#27599;&#20010;&#26631;&#31614;&#22914;&#20309;&#20351;&#29992;&#12290;
    &#24403;&#26576;&#20123;&#26631;&#31614;&#38656;&#35201;&#26356;&#36827;&#19968;&#27493;&#30340;&#35299;&#37322;&#26102;&#65292;&#25105;&#20204;&#24050;&#32463;&#25226;&#25152;&#29983;&#25104;&#30340;HTML&#29255;&#27573;&#20063;&#19968;&#36215;&#21015;&#20102;&#36827;&#26469;&#12290;
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-formtaglib-configuration"></a>13.9.1.&nbsp;&#37197;&#32622;</h3></div></div><div></div></div><p>Spring&#30340;&#34920;&#21333;&#26631;&#31614;&#24211;&#21253;&#21547;&#22312;<tt class="literal">spring.jar</tt>&#20013;&#12290;
      &#36825;&#20010;&#24211;&#30340;&#25551;&#36848;&#31526;&#65288;descriptor)&#21483;&#20570;<tt class="literal">spring-form.tld</tt>&#12290;
      </p><p>&#35201;&#20351;&#29992;&#36825;&#20010;&#24211;&#20013;&#30340;&#26631;&#31614;&#65292;&#22312;JSP&#39029;&#38754;&#30340;&#24320;&#22836;&#21152;&#20837;&#19979;&#38754;&#22768;&#26126;&#65306;</p><pre class="programlisting">&lt;%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %&gt;</pre><p>&#22312;&#19978;&#38754;&#30340;&#22768;&#26126;&#20013;&#65292;<tt class="literal">form</tt>&#23601;&#26159;&#20026;&#24819;&#35201;&#20351;&#29992;&#30340;&#36825;&#20010;&#24211;&#20013;&#30340;&#26631;&#31614;&#25152;&#30830;&#23450;&#30340;&#26631;&#31614;&#21629;&#21517;&#21069;&#32512;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-formtaglib-formtag"></a>13.9.2.&nbsp;<tt class="literal">form</tt>&#26631;&#31614;</h3></div></div><div></div></div><p>&#36825;&#20010;&#26631;&#31614;&#20250;&#29983;&#25104;&#19968;&#20010;HTML&#30340;&#8220;form&#8221;&#26631;&#31614;&#65292;&#21516;&#26102;&#20026;&#20869;&#37096;&#26631;&#31614;&#30340;&#32465;&#23450;&#26292;&#38706;&#20102;&#19968;&#20010;&#32465;&#23450;&#36335;&#24452;&#65288;binding path&#65289;&#12290;
      &#23427;&#25226;&#21629;&#20196;&#23545;&#35937;&#65288;command object&#65289;&#25918;&#22312;<tt class="literal">PageContext</tt>&#20013;&#65292;&#36825;&#26679;&#20869;&#37096;&#30340;&#26631;&#31614;&#23601;&#21487;&#20197;&#35775;&#38382;&#36825;&#20010;&#21629;&#20196;&#23545;&#35937;&#20102;&#12290;
      <span class="emphasis"><em>&#36825;&#20010;&#24211;&#20013;&#30340;&#20854;&#20182;&#26631;&#31614;&#37117;&#26159;<tt class="literal">form</tt>&#26631;&#31614;&#30340;&#23884;&#22871;&#26631;&#31614;</em></span>&#12290;
      </p><p>&#20551;&#35774;&#25105;&#20204;&#26377;&#19968;&#20010;&#21483;&#20570;<tt class="classname">User</tt>&#30340;&#39046;&#22495;&#23545;&#35937;&#65292;&#23427;&#26159;&#19968;&#20010;JavaBean&#65292;
      &#25317;&#26377;&#35832;&#22914;<tt class="literal">firstName</tt>&#21644;<tt class="literal">lastName</tt>&#36825;&#26679;&#30340;&#23646;&#24615;&#12290;
      &#25105;&#20204;&#23558;&#25226;&#23427;&#24403;&#20316;&#36820;&#22238;<tt class="literal">form.jsp</tt>&#30340;&#34920;&#21333;&#25511;&#21046;&#22120;&#30340;&#34920;&#21333;&#25903;&#25345;&#23545;&#35937;&#65288;form backing object)&#12290;
      &#19979;&#38754;&#26159;&#19968;&#20010;<tt class="literal">form.jsp</tt>&#21487;&#33021;&#30340;&#26679;&#23376;&#30340;&#20363;&#23376;&#65306;
      </p><pre class="programlisting">&lt;form:form&gt;
    &lt;table&gt;
        &lt;tr&gt;
            &lt;td&gt;First Name:&lt;/td&gt;
            &lt;td&gt;&lt;form:input path="firstName" /&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;Last Name:&lt;/td&gt;
            &lt;td&gt;&lt;form:input path="lastName" /&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td colspan="2"&gt;
                &lt;input type="submit" value="Save Changes" /&gt;
            &lt;/td&gt;
        &lt;/tr&gt;
    &lt;/table&gt;
&lt;/form:form&gt;</pre><p>&#19978;&#38754;<tt class="literal">firstName</tt>&#21644;<tt class="literal">lastName</tt>&#30340;&#20540;&#26159;&#20174;&#30001;&#39029;&#38754;&#25511;&#21046;&#22120;&#25918;&#32622;&#22312;<tt class="interfacename">PageContext</tt>&#20013;&#30340;&#21629;&#20196;&#23545;&#35937;&#20013;&#24471;&#21040;&#30340;&#12290;
      &#35831;&#32487;&#32493;&#35835;&#19979;&#21435;&#26469;&#30475;&#20960;&#20010;&#20851;&#20110;&#22914;&#20309;&#20351;&#29992;<tt class="literal">form</tt>&#26631;&#31614;&#30340;&#20869;&#37096;&#26631;&#31614;&#30340;&#20363;&#23376;&#12290;
      </p><p>&#29983;&#25104;&#30340;HTML&#30475;&#36215;&#26469;&#23601;&#26159;&#19968;&#20010;&#26631;&#20934;&#30340;form&#65306;</p><pre class="programlisting">&lt;form method="POST"&gt;
    &lt;table&gt;
      &lt;tr&gt;
          &lt;td&gt;First Name:&lt;/td&gt;
          &lt;td&gt;&lt;input name="firstName" type="text" value="Harry"/&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Last Name:&lt;/td&gt;
          &lt;td&gt;&lt;input name="lastName" type="text" value="Potter"/&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td colspan="2"&gt;
            &lt;input type="submit" value="Save Changes" /&gt;
          &lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
&lt;/form&gt;</pre><p>&#19978;&#38754;&#30340;JSP&#26377;&#19968;&#20010;&#39044;&#35774;&#21069;&#25552;&#65292;&#23601;&#26159;&#34920;&#21333;&#25903;&#25345;&#23545;&#35937;&#65288;form backing&#65289;&#30340;&#21464;&#37327;&#21517;&#26159;&#8220;<tt class="literal">command</tt>&#8221;&#12290;
      &#22914;&#26524;&#20320;&#23558;&#36825;&#20010;&#34920;&#21333;&#25903;&#25345;&#23545;&#35937;&#29992;&#20854;&#20182;&#21517;&#31216;&#21152;&#20197;&#23450;&#20041;&#65288;&#36825;&#21487;&#31639;&#26159;&#19968;&#31181;&#26368;&#20339;&#23454;&#36341;&#65289;&#65292;&#20320;&#23601;&#21487;&#20197;&#23558;&#36825;&#20010;&#21629;&#21517;&#21464;&#37327;&#32465;&#23450;&#21040;&#34920;&#21333;&#19978;&#65292;&#22914;&#19979;&#20363;&#25152;&#31034;&#65306;
      </p><pre class="programlisting">&lt;form:form <i class="lineannotation"><span class="lineannotation"><span class="bold"><b>commandName="user"</b></span></span></i>&gt;
    &lt;table&gt;
        &lt;tr&gt;
            &lt;td&gt;First Name:&lt;/td&gt;
            &lt;td&gt;&lt;form:input path="firstName" /&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;Last Name:&lt;/td&gt;
            &lt;td&gt;&lt;form:input path="lastName" /&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td colspan="2"&gt;
                &lt;input type="submit" value="Save Changes" /&gt;
            &lt;/td&gt;
        &lt;/tr&gt;
    &lt;/table&gt;
&lt;/form:form&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-formtaglib-inputtag"></a>13.9.3.&nbsp;<tt class="literal">input</tt>&#26631;&#31614;</h3></div></div><div></div></div><p>&#36825;&#20010;&#26631;&#31614;&#29983;&#25104;&#19968;&#20010;&#8220;text&#8221;&#31867;&#22411;&#30340;HTML&#8220;input&#8221;&#26631;&#31614;&#12290;
      &#20851;&#20110;&#36825;&#20010;&#26631;&#31614;&#30340;&#31034;&#20363;&#65292;&#35831;&#35265;<a href="#mvc-formtaglib-formtag" title="13.9.2.&nbsp;form&#26631;&#31614;">Section&nbsp;13.9.2, &#8220;form&#26631;&#31614;&#8221;</a>&#12290;
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-formtaglib-checkboxtag"></a>13.9.4.&nbsp;<tt class="literal">checkbox</tt>&#26631;&#31614;</h3></div></div><div></div></div><p>&#36825;&#20010;&#26631;&#31614;&#29983;&#25104;&#19968;&#20010;&#8220;checkbox&#8221;&#31867;&#22411;&#30340;HTML&#8220;input&#8221;&#26631;&#31614;&#12290;</p><p>&#35753;&#25105;&#20204;&#20551;&#35774;&#25105;&#20204;&#30340;<tt class="classname">User</tt>&#26377;&#27604;&#22914;&#26032;&#38395;&#35746;&#38405;&#21644;&#20854;&#20182;&#19968;&#32452;&#19994;&#20313;&#29233;&#22909;&#36825;&#26679;&#30340;&#20559;&#22909;&#12290;
      &#19979;&#38754;&#23601;&#26159;&#19968;&#20010;<tt class="classname">Preferences</tt>&#31867;&#30340;&#20363;&#23376;&#65306;
      </p></div><pre class="programlisting">public class Preferences {

    private boolean receiveNewsletter;

    private String[] interests;

    private String favouriteWord;

    public boolean isReceiveNewsletter() {
        return receiveNewsletter;
    }

    public void setReceiveNewsletter(boolean receiveNewsletter) {
        this.receiveNewsletter = receiveNewsletter;
    }

    public String[] getInterests() {
        return interests;
    }

    public void setInterests(String[] interests) {
        this.interests = interests;
    }

    public String getFavouriteWord() {
        return favouriteWord;
    }

    public void setFavouriteWord(String favouriteWord) {
        this.favouriteWord = favouriteWord;
    }
}</pre><p><tt class="literal">form.jsp</tt>&#22914;&#19979;&#65306;</p><pre class="programlisting">&lt;form:form&gt;
    &lt;table&gt;
        &lt;tr&gt;
            &lt;td&gt;Subscribe to newsletter?:&lt;/td&gt;
            <i class="lineannotation"><span class="lineannotation">&lt;%-- Approach 1: Property is of type <tt class="classname">java.lang.Boolean</tt> --%&gt;</span></i>
            &lt;td&gt;&lt;form:checkbox path="preferences.receiveNewsletter"/&gt;&lt;/td&gt;
        &lt;/tr&gt;

        &lt;tr&gt;
            &lt;td&gt;Interests:&lt;/td&gt;
            &lt;td&gt;
                <i class="lineannotation"><span class="lineannotation">&lt;%-- Approach 2: Property is of an array or of type <tt class="interfacename">java.util.Collection</tt> --%&gt;</span></i>
                Quidditch: &lt;form:checkbox path="preferences.interests" value="Quidditch"/&gt;
                Herbology: &lt;form:checkbox path="preferences.interests" value="Herbology"/&gt;
                Defence Against the Dark Arts: &lt;form:checkbox path="preferences.interests"
                    value="Defence Against the Dark Arts"/&gt;
            &lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;Favourite Word:&lt;/td&gt;
            &lt;td&gt;
                <i class="lineannotation"><span class="lineannotation">&lt;%-- Approach 3: Property is of type <tt class="classname">java.lang.Object</tt> --%&gt;</span></i>
                Magic: &lt;form:checkbox path="preferences.favouriteWord" value="Magic"/&gt;
            &lt;/td&gt;
        &lt;/tr&gt;
    &lt;/table&gt;
&lt;/form:form&gt;</pre><p>&#26377;&#19977;&#31181;<tt class="literal">checkbox</tt>&#26631;&#31614;&#30340;&#20351;&#29992;&#26041;&#27861;&#28385;&#36275;&#20320;&#23545;checkbox&#30340;&#38656;&#27714;&#12290;</p><div class="itemizedlist"><ul type="disc"><li><p>&#31532;&#19968;&#31181;&#29992;&#27861;&#65306;&#33509;&#32465;&#23450;&#20540;&#26159;<tt class="literal">java.lang.Boolean</tt>&#31867;&#22411;&#65292;&#21017;&#20540;&#20026;<tt class="literal">true</tt>&#26102;&#65292;<tt class="literal">input(checkbox)</tt>&#23601;&#26631;&#35760;&#20026;&#36873;&#20013;&#12290;&#20854;<tt class="literal">value</tt>&#23646;&#24615;&#23545;&#24212;&#20110;<tt class="literal">setValue(Object)</tt>&#20540;&#30340;&#23646;&#24615;&#30340;&#35299;&#26512;&#20540;&#12290;</p></li><li><p>&#31532;&#20108;&#31181;&#29992;&#27861;&#65306;&#33509;&#32465;&#23450;&#20540;&#26159;<tt class="literal">array</tt>&#25110;<tt class="interfacename">java.util.Collection</tt>&#31867;&#22411;&#65292;&#21017;&#24403;&#35774;&#23450;&#30340;<tt class="literal">setValue(Object)</tt>&#20540;&#20986;&#29616;&#22312;&#32465;&#23450;&#30340;<tt class="interfacename">Collection</tt>&#20013;&#26102;&#65292;<tt class="literal">input(checkbox)</tt>&#23601;&#26631;&#35760;&#20026;&#36873;&#20013;&#12290;</p></li><li><p>&#31532;&#19977;&#31181;&#29992;&#27861;&#65306;&#33509;&#32465;&#23450;&#20540;&#20026;&#20854;&#20182;&#31867;&#22411;&#65292;&#21017;&#24403;&#35774;&#23450;&#30340;<tt class="literal">setValue(Object)</tt>&#19982;&#20854;&#32465;&#23450;&#20540;&#30456;&#31561;&#26102;&#65292;<tt class="literal">input(checkbox)</tt>&#25165;&#26631;&#35760;&#20026;&#36873;&#20013;&#12290;</p></li></ul></div><p>&#27880;&#24847;&#65292;&#19981;&#31649;&#20351;&#29992;&#21738;&#31181;&#26041;&#27861;&#65292;&#29983;&#25104;&#30340;HTML&#32467;&#26500;&#37117;&#26159;&#30456;&#21516;&#30340;&#12290;&#19979;&#38754;&#26159;&#21253;&#21547;&#19968;&#20123;checkbox&#30340;HTML&#29255;&#27573;&#65306;</p><pre class="programlisting">&lt;tr&gt;
    &lt;td&gt;Interests:&lt;/td&gt;
    &lt;td&gt;
        Quidditch: &lt;input name="preferences.interests" type="checkbox" value="Quidditch"/&gt;
        &lt;input type="hidden" value="1" name="_preferences.interests"/&gt;
        Herbology: &lt;input name="preferences.interests" type="checkbox" value="Herbology"/&gt;
        &lt;input type="hidden" value="1" name="_preferences.interests"/&gt;
        Defence Against the Dark Arts: &lt;input name="preferences.interests" type="checkbox"
            value="Defence Against the Dark Arts"/&gt;
        &lt;input type="hidden" value="1" name="_preferences.interests"/&gt;
    &lt;/td&gt;
&lt;/tr&gt;</pre><p>&#20063;&#35768;&#27809;&#26377;&#27880;&#24847;&#21040;&#30340;&#26159;&#22312;&#27599;&#20010;checkbox&#32972;&#21518;&#36824;&#38544;&#34255;&#20102;&#20854;&#20182;&#23383;&#27573;&#65288;field&#65289;&#12290;
    &#24403;&#19968;&#20010;HTML&#39029;&#38754;&#20013;&#30340;checkbox<span class="emphasis"><em>&#27809;&#26377;</em></span>&#34987;&#36873;&#20013;&#26102;&#65292;&#23427;&#30340;&#20540;&#19981;&#20250;&#22312;&#34920;&#21333;&#25552;&#20132;&#26102;&#20316;&#20026;HTTP&#35831;&#27714;&#21442;&#25968;&#30340;&#19968;&#37096;&#20998;&#21457;&#36865;&#21040;&#26381;&#21153;&#22120;&#31471;&#65292;
    &#22240;&#27492;&#25105;&#20204;&#38656;&#35201;&#32473;&#36825;&#20010;HTML&#30340;&#22855;&#24618;&#21160;&#20316;&#24819;&#20986;&#19968;&#20010;&#21464;&#36890;&#26041;&#26696;&#65292;&#26469;&#35753;Spring&#30340;&#34920;&#21333;&#25968;&#25454;&#32465;&#23450;&#21487;&#20197;&#24037;&#20316;&#12290;
    <tt class="literal">checkbox</tt>&#26631;&#31614;&#36981;&#24490;&#20102;Spring&#29616;&#26377;&#30340;&#24815;&#20363;&#65292;&#23601;&#26159;&#23545;&#20110;&#27599;&#20010;checkbox&#37117;&#21253;&#21547;&#20102;&#19968;&#20010;&#19979;&#21010;&#32447;&#65288;"_"&#65289;&#65292;&#20877;&#36319;&#19978;&#19968;&#20010;&#38544;&#34255;&#21442;&#25968;&#12290;
    &#36825;&#26679;&#19968;&#26469;&#65292;&#23601;&#30456;&#24403;&#20110;&#21578;&#35785;Spring&#8220;<span class="quote">
        <span class="emphasis"><em>&#36825;&#20010;checkbox&#22312;&#34920;&#21333;&#20013;&#26159;&#21487;&#35265;&#30340;&#65292;&#24182;&#19988;&#24076;&#26395;&#34920;&#21333;&#25968;&#25454;&#23558;&#35201;&#34987;&#32465;&#23450;&#21040;&#30340;&#23545;&#35937;&#33021;&#22815;&#21453;&#26144;&#20986;&#20219;&#24847;&#30340;checkbox&#30340;&#29366;&#24577;</em></span></span>&#8221;&#12290;
        </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-formtaglib-checkboxestag"></a>13.9.5.&nbsp;<tt class="literal">checkboxes</tt>&#26631;&#31614;</h3></div></div><div></div></div><p>&#36825;&#20010;&#26631;&#31614;&#29983;&#25104;&#22810;&#20010;&#8220;checkbox&#8221;&#31867;&#22411;&#30340;HTML&#8220;input&#8221;&#26631;&#31614;&#12290;</p><p>&#36825;&#19968;&#33410;&#24314;&#31435;&#22312;&#19978;&#19968;&#33410;<tt class="classname">checkbox</tt>&#26631;&#31614;&#30340;&#20363;&#23376;&#20043;&#19978;&#12290;
      &#26377;&#26102;&#20542;&#21521;&#20110;&#24182;&#19981;&#22312;JSP&#39029;&#38754;&#20013;&#21015;&#20986;&#20840;&#37096;&#21487;&#33021;&#30340;&#19994;&#20313;&#29233;&#22909;&#65292;&#32780;&#26159;&#24819;&#22312;&#36816;&#34892;&#26102;&#25552;&#20379;&#19968;&#20010;&#21487;&#29992;&#36873;&#39033;&#30340;&#28165;&#21333;&#65292;&#24182;&#25226;&#23427;&#20256;&#36882;&#32473;&#30456;&#24212;&#26631;&#31614;&#12290;
      &#36825;&#23601;&#26159;<tt class="classname">checkboxes</tt>&#26631;&#31614;&#30340;&#30446;&#26631;&#12290;
      &#20256;&#20837;&#19968;&#20010;<tt class="classname">Array</tt>&#12289;<tt class="classname">List</tt>&#65292;&#25110;&#32773;<tt class="classname">Map</tt>&#65292;
      &#24182;&#25226;&#21487;&#29992;&#36873;&#39033;&#21253;&#21547;&#22312;&#8220;items&#8221;&#23646;&#24615;&#20013;&#12290;&#20856;&#22411;&#30340;&#24773;&#20917;&#26159;&#65292;&#36825;&#20010;&#32465;&#23450;&#30340;&#23646;&#24615;&#26159;&#19968;&#20010;&#38598;&#21512;&#65292;&#36825;&#26679;&#23427;&#25165;&#33021;&#25345;&#26377;&#29992;&#25143;&#36873;&#25321;&#30340;&#22810;&#20010;&#20540;&#12290;
      &#19979;&#38754;&#26159;&#20351;&#29992;&#20102;&#36825;&#20010;&#26631;&#31614;&#30340;JSP&#30340;&#19968;&#20010;&#20363;&#23376;&#65306;</p></div><pre class="programlisting">&lt;form:form&gt;
    &lt;table&gt;
        &lt;tr&gt;
            &lt;td&gt;Interests:&lt;/td&gt;
            &lt;td&gt;
                <i class="lineannotation"><span class="lineannotation">&lt;%-- Property is of an array or of type <tt class="interfacename">java.util.Collection</tt> --%&gt;</span></i>
                &lt;form:checkboxes path="preferences.interests" items="${interestList}"/&gt;
            &lt;/td&gt;
        &lt;/tr&gt;
    &lt;/table&gt;
&lt;/form:form&gt;</pre><p>&#36825;&#20010;&#20363;&#23376;&#20551;&#23450;&#20102;&#8220;interestList&#8221;&#26159;&#19968;&#20010;<tt class="classname">List</tt>&#65292;&#20316;&#20026;&#27169;&#22411;&#23646;&#24615;&#23427;&#21253;&#21547;&#20102;&#29992;&#20110;&#34987;&#36873;&#25321;&#30340;&#23383;&#31526;&#20018;&#30340;&#20540;&#12290;
    &#32780;&#22312;&#20351;&#29992;&#19968;&#20010;<tt class="classname">Map</tt>&#30340;&#24773;&#20917;&#19979;&#65292;map&#26465;&#30446;&#30340;&#38190;&#34987;&#29992;&#20316;&#20540;&#65292;map&#26465;&#30446;&#30340;&#20540;&#34987;&#29992;&#20316;&#26174;&#31034;&#30340;&#25991;&#26412;&#26631;&#35760;&#12290;
    &#20063;&#21487;&#20197;&#20351;&#29992;&#19968;&#20010;&#23450;&#21046;&#30340;&#23545;&#35937;&#65292;&#25552;&#20379;&#8220;itemValue&#8221;&#23646;&#24615;&#23384;&#25918;&#20540;&#65292;&#8220;itemLabel&#8221;&#23646;&#24615;&#23384;&#25918;&#25991;&#26412;&#26631;&#35760;&#12290;
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-formtaglib-radiobuttontag"></a>13.9.6.&nbsp;<tt class="literal">radiobutton</tt>&#26631;&#31614;</h3></div></div><div></div></div><p>&#36825;&#20010;&#26631;&#31614;&#29983;&#25104;&#19968;&#20010;&#8220;radio&#8221;&#31867;&#22411;&#30340;HTML&#8220;input&#8221;&#26631;&#31614;&#12290;</p><p>&#19968;&#20010;&#20856;&#22411;&#29992;&#27861;&#26159;&#25226;&#22810;&#20010;&#26631;&#31614;&#23454;&#20363;&#32465;&#23450;&#21040;&#21516;&#19968;&#23646;&#24615;&#19978;&#65292;&#20294;&#23427;&#20204;&#26377;&#19981;&#21516;&#30340;&#20540;&#12290;</p><pre class="programlisting">&lt;tr&gt;
    &lt;td&gt;Sex:&lt;/td&gt;
    &lt;td&gt;Male: &lt;form:radiobutton path="sex" value="M"/&gt; &lt;br/&gt;
        Female: &lt;form:radiobutton path="sex" value="F"/&gt; &lt;/td&gt;
&lt;/tr&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-formtaglib-radiobuttonstag"></a>13.9.7.&nbsp;<tt class="literal">radiobuttons</tt>&#26631;&#31614;</h3></div></div><div></div></div><p>&#36825;&#20010;&#26631;&#31614;&#29983;&#25104;&#22810;&#20010;&#8220;radio&#8221;&#31867;&#22411;&#30340;HTML&#8220;input&#8221;&#26631;&#31614;&#12290;</p><p>&#27491;&#20687;&#19978;&#38754;&#25552;&#21040;&#30340;<tt class="classname">checkboxes</tt>&#26631;&#31614;&#65292;&#20320;&#21487;&#33021;&#24076;&#26395;&#20256;&#20837;&#19968;&#20010;&#36816;&#34892;&#26102;&#30340;&#21464;&#37327;&#20316;&#20026;&#21487;&#29992;&#30340;&#36873;&#39033;&#12290;
      &#36825;&#31181;&#29992;&#27861;&#19979;&#23601;&#38656;&#35201;&#20351;&#29992;<tt class="classname">radiobuttons</tt>&#26631;&#31614;&#12290;
      &#20256;&#20837;&#19968;&#20010;<tt class="classname">Array</tt>&#12289;<tt class="classname">List</tt>&#65292;&#25110;&#32773;<tt class="classname">Map</tt>&#65292;
      &#24182;&#25226;&#21487;&#29992;&#36873;&#39033;&#21253;&#21547;&#22312;&#8220;items&#8221;&#23646;&#24615;&#20013;&#12290;&#22312;&#20351;&#29992;<tt class="classname">Map</tt>&#30340;&#24773;&#20917;&#19979;&#65292;map&#26465;&#30446;&#30340;&#38190;&#34987;&#29992;&#20316;&#20540;&#65292;
      map&#26465;&#30446;&#30340;&#20540;&#34987;&#29992;&#20316;&#26174;&#31034;&#30340;&#25991;&#26412;&#26631;&#35760;&#12290;&#20063;&#21487;&#20197;&#20351;&#29992;&#19968;&#20010;&#23450;&#21046;&#30340;&#23545;&#35937;&#65292;&#25552;&#20379;&#8220;itemValue&#8221;&#23646;&#24615;&#23384;&#25918;&#20540;&#65292;&#8220;itemLabel&#8221;&#23646;&#24615;&#23384;&#25918;&#25991;&#26412;&#26631;&#35760;&#12290;
      </p><pre class="programlisting">&lt;tr&gt;
    &lt;td&gt;Sex:&lt;/td&gt;
    &lt;td&gt;&lt;form:radiobuttons path="sex" items="${sexOptions}"/&gt;&lt;/td&gt;
&lt;/tr&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-formtaglib-passwordtag"></a>13.9.8.&nbsp;<tt class="literal">password</tt>&#26631;&#31614;</h3></div></div><div></div></div><p>&#36825;&#20010;&#26631;&#31614;&#29983;&#25104;&#19968;&#20010;&#8220;password&#8221;&#31867;&#22411;&#30340;HTML&#8220;input&#8221;&#26631;&#31614;&#65292;&#24182;&#36171;&#20197;&#32465;&#23450;&#30340;&#20540;&#12290;</p><pre class="programlisting">&lt;tr&gt;
    &lt;td&gt;Password:&lt;/td&gt;
    &lt;td&gt;
        &lt;form:password path="password" /&gt;
    &lt;/td&gt;
&lt;/tr&gt;</pre><p>&#35831;&#27880;&#24847;&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#21475;&#20196;&#30340;&#20540;<span class="emphasis"><em>&#19981;&#20250;</em></span>&#34987;&#26174;&#31034;&#20986;&#26469;&#12290;
      &#22914;&#26524;&#19968;&#23450;&#35201;&#26174;&#31034;&#21475;&#20196;&#30340;&#20540;&#65292;&#23601;&#25226;&#8220;<tt class="literal">showPassword</tt>&#8221;&#23646;&#24615;&#30340;&#20540;&#32622;&#20026;true&#12290;
      </p><pre class="programlisting">&lt;tr&gt;
    &lt;td&gt;Password:&lt;/td&gt;
    &lt;td&gt;
        &lt;form:password path="password" value="^76525bvHGq" showPassword="true" /&gt;
    &lt;/td&gt;
&lt;/tr&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-formtaglib-selecttag"></a>13.9.9.&nbsp;<tt class="literal">select</tt>&#26631;&#31614;</h3></div></div><div></div></div><p>&#36825;&#20010;&#26631;&#31614;&#29983;&#25104;&#19968;&#20010;HTML&#8220;select&#8221;&#20803;&#32032;&#12290;&#23427;&#25903;&#25345;&#34987;&#36873;&#20013;&#30340;&#36873;&#39033;&#30340;&#25968;&#25454;&#32465;&#23450;&#65292;
      &#20063;&#25903;&#25345;&#20351;&#29992;&#23884;&#22871;&#30340;<tt class="literal">option</tt>&#21644;<tt class="literal">options</tt>&#26631;&#31614;&#12290;
      </p><p>&#25105;&#20204;&#20551;&#35774;&#26377;&#19968;&#20010;<tt class="classname">User</tt>&#25317;&#26377;&#22810;&#39033;&#19987;&#38271;&#12290;</p><pre class="programlisting">&lt;tr&gt;
    &lt;td&gt;Skills:&lt;/td&gt;
    &lt;td&gt;&lt;form:select path="skills" items="${skills}"/&gt;&lt;/td&gt;
&lt;/tr&gt;</pre><p>&#22914;&#26524;&#36825;&#20010;<tt class="literal">User</tt>&#30340;&#19987;&#38271;&#26159;&#33609;&#33647;&#23398;&#65292;&#37027;&#20040;&#8220;Skills&#8221;&#36825;&#19968;&#34892;&#30340;HTML&#28304;&#20195;&#30721;&#23601;&#22914;&#19979;&#25152;&#31034;&#65306;</p><pre class="programlisting">&lt;tr&gt;
    &lt;td&gt;Skills:&lt;/td&gt;
    &lt;td&gt;&lt;select name="skills" multiple="true"&gt;
        &lt;option value="Potions"&gt;Potions&lt;/option&gt;
        &lt;option value="Herbology" selected="selected"&gt;Herbology&lt;/option&gt;
        &lt;option value="Quidditch"&gt;Quidditch&lt;/option&gt;&lt;/select&gt;
    &lt;/td&gt;
&lt;/tr&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-formtaglib-optiontag"></a>13.9.10.&nbsp;<tt class="literal">option</tt>&#26631;&#31614;</h3></div></div><div></div></div><p>&#36825;&#20010;&#26631;&#31614;&#29983;&#25104;&#19968;&#20010;HTML&#30340;&#8220;option&#8221;&#12290;&#26681;&#25454;&#32465;&#23450;&#30340;&#20540;&#65292;&#23427;&#20250;&#24688;&#24403;&#30340;&#35774;&#32622;&#8220;selected&#8221;&#23646;&#24615;&#12290;</p><pre class="programlisting">&lt;tr&gt;
    &lt;td&gt;House:&lt;/td&gt;
    &lt;td&gt;
        &lt;form:select path="house"&gt;
            &lt;form:option value="Gryffindor"/&gt;
            &lt;form:option value="Hufflepuff"/&gt;
            &lt;form:option value="Ravenclaw"/&gt;
            &lt;form:option value="Slytherin"/&gt;
        &lt;/form:select&gt;
    &lt;/td&gt;
&lt;/tr&gt;</pre><p>&#22914;&#26524;&#36825;&#20010;<tt class="literal">User</tt>&#30340;&#23487;&#33293;&#22312;Gryffindor&#65288;Gryffindor&#26159;&#21704;&#21033;&#27874;&#29305;&#22312;Hogwarts&#30340;&#23487;&#33293;&#8212;&#8212;&#35793;&#32773;&#27880;&#65289;&#65292;
      &#37027;&#20040;&#8220;House&#8221;&#36825;&#19968;&#34892;&#30340;HTML&#28304;&#20195;&#30721;&#23601;&#22914;&#19979;&#25152;&#31034;&#65306;</p><pre class="programlisting">&lt;tr&gt;
    &lt;td&gt;House:&lt;/td&gt;
    &lt;td&gt;
        &lt;select name="house"&gt;
            &lt;option value="Gryffindor" selected="selected"&gt;Gryffindor&lt;/option&gt;
            &lt;option value="Hufflepuff"&gt;Hufflepuff&lt;/option&gt;
            &lt;option value="Ravenclaw"&gt;Ravenclaw&lt;/option&gt;
            &lt;option value="Slytherin"&gt;Slytherin&lt;/option&gt;
        &lt;/select&gt;
    &lt;/td&gt;
 &lt;/tr&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-formtaglib-optionstag"></a>13.9.11.&nbsp;<tt class="literal">options</tt>&#26631;&#31614;</h3></div></div><div></div></div><p>&#36825;&#20010;&#26631;&#31614;&#29983;&#25104;&#19968;&#20010;HTML&#30340;&#8220;option&#8221;&#26631;&#31614;&#30340;&#21015;&#34920;&#12290;&#26681;&#25454;&#32465;&#23450;&#30340;&#20540;&#65292;&#23427;&#20250;&#24688;&#24403;&#30340;&#35774;&#32622;&#8220;selected&#8221;&#23646;&#24615;&#12290;</p><pre class="programlisting">&lt;tr&gt;
    &lt;td&gt;Country:&lt;/td&gt;
    &lt;td&gt;
        &lt;form:select path="country"&gt;
            &lt;form:option value="-" label="--Please Select"/&gt;
            &lt;form:options items="${countryList}" itemValue="code" itemLabel="name"/&gt;
        &lt;/form:select&gt;
    &lt;/td&gt;
&lt;/tr&gt;</pre><p>&#22914;&#26524;&#36825;&#20010;<tt class="literal">User</tt>&#29983;&#27963;&#22312;&#33521;&#22269;&#65292;&#37027;&#20040;&#8220;Country&#8221;&#36825;&#19968;&#34892;&#30340;HTML&#28304;&#20195;&#30721;&#23601;&#22914;&#19979;&#25152;&#31034;&#65306;</p><pre class="programlisting">&lt;tr&gt;
    &lt;td&gt;Country:&lt;/td&gt;
    &lt;td&gt;
        &lt;select name="country"&gt;
            &lt;option value="-"&gt;--Please Select&lt;/option&gt;
            &lt;option value="AT"&gt;Austria&lt;/option&gt;
            &lt;option value="UK" selected="selected"&gt;United Kingdom&lt;/option&gt;
            &lt;option value="US"&gt;United States&lt;/option&gt;
        &lt;/select&gt;
    &lt;/td&gt;
&lt;/tr&gt;</pre><p>&#19978;&#38754;&#30340;&#20363;&#23376;&#23637;&#31034;&#20102;&#32467;&#21512;&#20351;&#29992;<tt class="literal">option</tt>&#26631;&#31614;&#21644;<tt class="literal">options</tt>&#26631;&#31614;&#20135;&#29983;&#30456;&#21516;&#30340;&#26631;&#20934;HTML&#65292;
      &#20063;&#35753;&#20320;&#22312;JSP&#20013;&#26174;&#24335;&#30340;&#25351;&#23450;&#19968;&#20010;&#20540;&#21482;&#29992;&#20110;&#26174;&#31034;&#30446;&#30340;&#65288;&#22312;&#23427;&#25152;&#22788;&#30340;&#20301;&#32622;&#65289;&#65292;&#20363;&#22914;&#20363;&#23376;&#20013;&#30340;&#40664;&#35748;&#23383;&#31526;&#20018;&#65306;&#8220;--Please Select&#8221;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-formtaglib-textAreatag"></a>13.9.12.&nbsp;<tt class="literal">textarea</tt>&#26631;&#31614;</h3></div></div><div></div></div><p>&#36825;&#20010;&#26631;&#31614;&#29983;&#25104;&#19968;&#20010;HTML&#30340;&#8220;textarea&#8221;&#12290;</p><pre class="programlisting">&lt;tr&gt;
    &lt;td&gt;Notes:&lt;/td&gt;
    &lt;td&gt;&lt;form:textarea path="notes" rows="3" cols="20" /&gt;&lt;/td&gt;
    &lt;td&gt;&lt;form:errors path="notes" /&gt;&lt;/td&gt;
&lt;/tr&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-formtaglib-hiddeninputtag"></a>13.9.13.&nbsp;<tt class="literal">hidden</tt>&#26631;&#31614;</h3></div></div><div></div></div><p>&#36825;&#20010;&#26631;&#31614;&#20351;&#29992;&#32465;&#23450;&#30340;&#20540;&#29983;&#25104;&#31867;&#22411;&#20026;&#8220;hidden&#8221;&#30340;HTML&#8220;input&#8221;&#26631;&#31614;&#12290;
      &#22312;&#29983;&#25104;&#30340;HTML&#20195;&#30721;&#20013;&#65292;input&#26631;&#31614;&#30340;&#20540;&#21644;&#34920;&#21333;&#25903;&#25345;&#23545;&#35937;&#30456;&#24212;&#23646;&#24615;&#30340;&#20540;&#20445;&#25345;&#19968;&#33268;&#12290;
      &#22914;&#26524;&#35201;&#25552;&#20132;&#19968;&#20010;&#26410;&#32465;&#23450;&#30340;&#20540;&#65292;&#23601;&#21482;&#33021;&#20351;&#29992;&#31867;&#22411;&#20026;&#8220;hidden&#8221;&#30340;HTML <tt class="literal">input</tt>&#26631;&#31614;&#20102;&#12290;
      </p><pre class="programlisting">&lt;form:hidden path="house" /&gt;
</pre><p>&#22914;&#26524;&#25105;&#20204;&#36873;&#25321;&#20197;&#38544;&#34255;&#24418;&#24335;&#25552;&#20132;&#8220;house&#8221;&#30340;&#20540;&#65292;HTML&#20195;&#30721;&#23558;&#22914;&#19979;&#25152;&#31034;&#65306;</p><pre class="programlisting">&lt;input name="house" type="hidden" value="Gryffindor"/&gt;
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-formtaglib-errorstag"></a>13.9.14.&nbsp;<tt class="literal">errors</tt>&#26631;&#31614;</h3></div></div><div></div></div><p>&#36825;&#20010;&#26631;&#31614;&#36890;&#36807;&#19968;&#20010;HTML&#8220;span&#8221;&#26631;&#31614;&#23637;&#29616;&#23383;&#27573;&#30340;&#38169;&#35823;&#12290;&#23427;&#25552;&#20379;&#20102;&#35775;&#38382;&#30001;&#20320;&#30340;&#25511;&#21046;&#22120;&#25110;&#32773;&#19982;&#20320;&#30340;&#25511;&#21046;&#22120;&#20851;&#32852;&#30340;&#20219;&#20309;&#39564;&#35777;&#22120;&#20135;&#29983;&#30340;&#38169;&#35823;&#30340;&#36884;&#24452;&#12290;</p><p>&#20551;&#35774;&#25105;&#20204;&#24819;&#35201;&#22312;&#34920;&#21333;&#25552;&#20132;&#26102;&#26174;&#31034;&#25152;&#26377;&#19982;<tt class="literal">firstName</tt>&#21644;<tt class="literal">lastName</tt>&#23383;&#27573;&#26377;&#20851;&#30340;&#38169;&#35823;&#12290;
      &#25105;&#20204;&#20026;<tt class="classname">User</tt>&#31867;&#30340;&#23454;&#20363;&#32534;&#20889;&#20102;&#21517;&#20026;<tt class="classname">UserValidator</tt>&#30340;&#39564;&#35777;&#22120;&#12290;
      </p><pre class="programlisting">public class UserValidator implements Validator {

    public boolean supports(Class candidate) {
        return User.class.isAssignableFrom(candidate);
    }

    public void validate(Object obj, Errors errors) {
        ValidationUtils.rejectIfEmptyOrWhitespace(errors, "firstName", "required", "Field is required.");
        ValidationUtils.rejectIfEmptyOrWhitespace(errors, "lastName", "required", "Field is required.");
    }
}</pre><p><tt class="literal">form.jsp</tt>&#23558;&#22914;&#19979;&#25152;&#31034;&#65306;</p><pre class="programlisting">&lt;form:form&gt;
    &lt;table&gt;
        &lt;tr&gt;
            &lt;td&gt;First Name:&lt;/td&gt;
            &lt;td&gt;&lt;form:input path="firstName" /&gt;&lt;/td&gt;
            <i class="lineannotation"><span class="lineannotation">&lt;%-- Show errors for firstName field --%&gt;</span></i>
            &lt;td&gt;&lt;form:errors path="firstName" /&gt;&lt;/td&gt;
        &lt;/tr&gt;

        &lt;tr&gt;
            &lt;td&gt;Last Name:&lt;/td&gt;
            &lt;td&gt;&lt;form:input path="lastName" /&gt;&lt;/td&gt;
            <i class="lineannotation"><span class="lineannotation">&lt;%-- Show errors for lastName field --%&gt;</span></i>
            &lt;td&gt;&lt;form:errors path="lastName"  /&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td colspan="3"&gt;
                &lt;input type="submit" value="Save Changes" /&gt;
            &lt;/td&gt;
        &lt;/tr&gt;
    &lt;/table&gt;
&lt;/form:form&gt;</pre><p>&#22914;&#26524;&#25105;&#20204;&#25552;&#20132;&#30340;&#34920;&#21333;&#30340;<tt class="literal">firstName</tt>&#21644;<tt class="literal">lastName</tt>&#23383;&#27573;&#22343;&#20026;&#31354;&#20540;&#65292;
      HTML&#39029;&#38754;&#23558;&#22914;&#19979;&#25152;&#31034;&#65306;</p><pre class="programlisting">&lt;form method="POST"&gt;
    &lt;table&gt;
        &lt;tr&gt;
            &lt;td&gt;First Name:&lt;/td&gt;
            &lt;td&gt;&lt;input name="firstName" type="text" value=""/&gt;&lt;/td&gt;
            <i class="lineannotation"><span class="lineannotation">&lt;%-- Associated errors to firstName field displayed --%&gt;</span></i>
            &lt;td&gt;&lt;span name="firstName.errors"&gt;Field is required.&lt;/span&gt;&lt;/td&gt;
        &lt;/tr&gt;

        &lt;tr&gt;
            &lt;td&gt;Last Name:&lt;/td&gt;
            &lt;td&gt;&lt;input name="lastName" type="text" value=""/&gt;&lt;/td&gt;
            <i class="lineannotation"><span class="lineannotation">&lt;%-- Associated errors to lastName field displayed --%&gt;</span></i>
            &lt;td&gt;&lt;span name="lastName.errors"&gt;Field is required.&lt;/span&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td colspan="3"&gt;
                &lt;input type="submit" value="Save Changes" /&gt;
            &lt;/td&gt;
        &lt;/tr&gt;
    &lt;/table&gt;
&lt;/form&gt;</pre><p>&#22914;&#26524;&#25105;&#20204;&#24819;&#35201;&#26174;&#31034;&#19968;&#20010;&#25351;&#23450;&#39029;&#38754;&#19978;&#30340;&#25152;&#26377;&#38169;&#35823;&#28165;&#21333;&#65292;&#21448;&#35813;&#22914;&#20309;&#21602;&#65311;
      &#19979;&#38754;&#30340;&#20363;&#23376;&#23637;&#31034;&#20102;<tt class="literal">errors</tt>&#26631;&#31614;&#20063;&#25903;&#25345;&#19968;&#20123;&#22522;&#26412;&#30340;&#36890;&#37197;&#31526;&#21151;&#33021;&#12290;
      </p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">path="*"</tt>&#65306;&#26174;&#31034;&#25152;&#26377;&#38169;&#35823;</p></li><li><p><tt class="literal">path="lastName*"</tt>&#65306;&#26174;&#31034;&#25152;&#26377;&#19982;<tt class="literal">lastName</tt>&#23383;&#27573;&#26377;&#20851;&#30340;&#38169;&#35823;</p></li></ul></div><p>&#19979;&#38754;&#30340;&#20363;&#23376;&#23558;&#20250;&#22312;&#39029;&#38754;&#22836;&#37096;&#26174;&#31034;&#19968;&#20010;&#38169;&#35823;&#28165;&#21333;&#65292;&#21518;&#38754;&#21017;&#22312;&#27599;&#20010;&#23383;&#27573;&#26049;&#36793;&#26174;&#31034;&#35813;&#23383;&#27573;&#29305;&#26377;&#30340;&#38169;&#35823;&#65306;</p><pre class="programlisting">&lt;form:form&gt;
    &lt;form:errors path="*" cssClass="errorBox" /&gt;
    &lt;table&gt;
        &lt;tr&gt;
            &lt;td&gt;First Name:&lt;/td&gt;
            &lt;td&gt;&lt;form:input path="firstName" /&gt;&lt;/td&gt;
            &lt;td&gt;&lt;form:errors path="firstName" /&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;Last Name:&lt;/td&gt;
            &lt;td&gt;&lt;form:input path="lastName" /&gt;&lt;/td&gt;
            &lt;td&gt;&lt;form:errors path="lastName"  /&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td colspan="3"&gt;
                &lt;input type="submit" value="Save Changes" /&gt;
            &lt;/td&gt;
        &lt;/tr&gt;
    &lt;/table&gt;
&lt;/form:form&gt;</pre><p>HTML&#20195;&#30721;&#23558;&#22914;&#19979;&#25152;&#31034;&#65306;</p><pre class="programlisting">&lt;form method="POST"&gt;
    &lt;span name="*.errors" class="errorBox"&gt;Field is required.&lt;br/&gt;Field is required.&lt;/span&gt;
    &lt;table&gt;
        &lt;tr&gt;
            &lt;td&gt;First Name:&lt;/td&gt;
            &lt;td&gt;&lt;input name="firstName" type="text" value=""/&gt;&lt;/td&gt;
            &lt;td&gt;&lt;span name="firstName.errors"&gt;Field is required.&lt;/span&gt;&lt;/td&gt;
        &lt;/tr&gt;

        &lt;tr&gt;
            &lt;td&gt;Last Name:&lt;/td&gt;
            &lt;td&gt;&lt;input name="lastName" type="text" value=""/&gt;&lt;/td&gt;
            &lt;td&gt;&lt;span name="lastName.errors"&gt;Field is required.&lt;/span&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td colspan="3"&gt;
                &lt;input type="submit" value="Save Changes" /&gt;
            &lt;/td&gt;
        &lt;/tr&gt;
&lt;/form&gt;</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="mvc-exceptionhandlers"></a>13.10.&nbsp;&#22788;&#29702;&#24322;&#24120;</h2></div></div><div></div></div><p>&#24403;&#19982;&#35831;&#27714;&#21305;&#37197;&#30340;&#25511;&#21046;&#22120;&#22788;&#29702;&#35831;&#27714;&#26102;&#65292;&#21487;&#33021;&#20250;&#21457;&#29983;&#24847;&#26009;&#20043;&#22806;&#30340;&#24322;&#24120;&#12290;
    Spring&#25552;&#20379;&#20102;<tt class="literal">HandlerExceptionResolvers</tt>&#26469;&#20943;&#36731;&#36825;&#20123;&#24322;&#24120;&#24102;&#26469;&#30340;&#30171;&#33510;&#12290;
    <tt class="literal">HandlerExceptionResolvers</tt>&#26377;&#28857;&#20687;&#22312;Web&#24212;&#29992;&#31243;&#24207;&#25551;&#36848;&#31526;<tt class="literal">web.xml</tt>&#20013;&#23450;&#20041;&#30340;&#24322;&#24120;&#26144;&#23556;&#65288;exception mappings&#65289;&#65292;
    &#20294;&#26159;&#23427;&#22788;&#29702;&#24322;&#24120;&#30340;&#26041;&#24335;&#26356;&#21152;&#28789;&#27963;&#12290;&#23427;&#21487;&#20197;&#25552;&#20379;&#24403;&#24322;&#24120;&#34987;&#25243;&#20986;&#26102;&#26159;&#20160;&#20040;&#22788;&#29702;&#31243;&#24207;&#22312;&#25191;&#34892;&#30340;&#20449;&#24687;&#12290;
    &#26356;&#36827;&#19968;&#27493;&#65292;&#19968;&#20010;&#20197;&#32534;&#31243;&#26041;&#24335;&#22788;&#29702;&#24322;&#24120;&#30340;&#36884;&#24452;&#65292;&#35753;&#20320;&#23545;&#20110;&#22312;&#35831;&#27714;&#34987;&#25351;&#21521;&#21478;&#19968;&#20010;URL&#65288;&#19982;&#20351;&#29992;&#25353;servlet&#30340;&#24322;&#24120;&#26144;&#23556;&#30340;&#26368;&#32456;&#32467;&#26524;&#19968;&#26679;&#65289;&#20043;&#21069;&#22914;&#20309;&#24688;&#24403;&#30340;&#21709;&#24212;&#26377;&#20102;&#26356;&#22810;&#36873;&#25321;&#12290;
    </p><p>&#23454;&#29616;<tt class="interfacename">HandlerExceptionResolver</tt>&#25509;&#21475;&#24456;&#31616;&#21333;&#65292;
    &#21482;&#38656;&#23454;&#29616;<tt class="literal">resolveException&#65288;Exception&#65292;Handler&#65289;</tt>&#26041;&#27861;&#65292;
    &#24182;&#36820;&#22238;&#19968;&#20010;<tt class="classname">ModelAndView</tt>&#65292;&#38500;&#27492;&#20043;&#22806;&#65292;
    &#20063;&#21487;&#20197;&#30452;&#25509;&#20351;&#29992;<tt class="classname">SimpleMappingExceptionResolver</tt>&#12290;
    &#36825;&#20010;&#35299;&#26512;&#22120;&#20801;&#35768;&#20320;&#21462;&#24471;&#20219;&#20309;&#21487;&#33021;&#34987;&#25243;&#20986;&#30340;&#24322;&#24120;&#30340;&#31867;&#21517;&#65292;&#24182;&#25226;&#23427;&#26144;&#23556;&#21040;&#19968;&#20010;&#35270;&#22270;&#21517;&#12290;
    &#36825;&#21644;Servlet API&#20013;&#25552;&#20379;&#30340;&#24322;&#24120;&#26144;&#23556;&#29305;&#24615;&#22312;&#21151;&#33021;&#19978;&#26159;&#30456;&#24403;&#30340;&#65292;&#20294;&#26159;&#65292;&#23427;&#36824;&#20801;&#35768;&#23545;&#26469;&#33258;&#19981;&#21516;&#22788;&#29702;&#31243;&#24207;&#30340;&#24322;&#24120;&#23454;&#29616;&#26356;&#32454;&#31890;&#24230;&#30340;&#24322;&#24120;&#26144;&#23556;&#12290;
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="mvc-coc"></a>13.11.&nbsp;&#24815;&#20363;&#20248;&#20808;&#21407;&#21017;&#65288;convention over configuration&#65289;</h2></div></div><div></div></div><p>&#23545;&#20110;&#24456;&#22810;&#39033;&#30446;&#26469;&#35828;&#65292;&#20005;&#26684;&#36981;&#20174;&#24050;&#26377;&#24815;&#20363;&#21644;&#20351;&#29992;&#21512;&#29702;&#30340;&#32570;&#30465;&#36873;&#39033;&#22823;&#27010;&#26159;&#36825;&#20123;&#39033;&#30446;&#38656;&#35201;&#30340;&#8230;&#8230;&#29616;&#22312;Spring Web MVC&#26126;&#30830;&#30340;&#25903;&#25345;&#20102;&#36825;&#31181;&#24815;&#20363;&#20248;&#20808;&#21407;&#21017;&#30340;&#20027;&#26088;&#12290;
    &#36825;&#24847;&#21619;&#30528;&#65292;&#22914;&#26524;&#24314;&#31435;&#20102;&#19968;&#22871;&#21629;&#21517;&#35268;&#33539;&#65292;&#35832;&#22914;&#27492;&#31867;&#65292;&#23601;&#21487;&#20197;<span class="emphasis"><em>&#26174;&#33879;&#22320;</em></span>&#20943;&#23569;&#31995;&#32479;&#25152;&#38656;&#37197;&#32622;&#39033;&#30446;&#30340;&#25968;&#37327;&#65292;
    &#26469;&#24314;&#31435;&#22788;&#29702;&#22120;&#26144;&#23556;&#12289;&#35270;&#22270;&#35299;&#26512;&#22120;&#12289;<tt class="classname">ModelAndView</tt>&#23454;&#20363;&#65292;&#31561;&#31561;&#12290;
    &#36825;&#20026;&#24555;&#36895;&#21407;&#22411;&#24320;&#21457;&#25552;&#20379;&#20102;&#24456;&#22823;&#26041;&#20415;&#12290;&#21516;&#26102;&#25552;&#20379;&#20102;&#19968;&#23450;&#31243;&#24230;&#30340;&#65288;&#36890;&#24120;&#26159;&#22909;&#20107;&#24773;&#65289;&#20195;&#30721;&#24211;&#30340;&#19968;&#33268;&#24615;&#65292;&#36827;&#32780;&#21487;&#20197;&#20174;&#20013;&#36873;&#25321;&#24182;&#21457;&#23637;&#20026;&#25104;&#22411;&#20135;&#21697;&#12290;
    </p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Tip" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Tip]" src="tip.png"></td><th align="left">Tip</th></tr><tr><td colspan="2" valign="top" align="left"><p>Spring&#20998;&#21457;&#29256;&#26412;&#21253;&#21547;&#20102;&#19968;&#20010;&#23637;&#29616;&#20102;&#24815;&#20363;&#20248;&#20808;&#21407;&#21017;&#25903;&#25345;&#30340;Web&#24212;&#29992;&#31243;&#24207;&#65292;&#25105;&#20204;&#23558;&#22312;&#36825;&#19968;&#33410;&#25551;&#36848;&#36825;&#19968;&#21407;&#21017;&#12290;
      &#36825;&#20010;&#24212;&#29992;&#31243;&#24207;&#21487;&#20197;&#22312;<tt class="literal">samples/showcases/mvc-convention</tt>&#30446;&#24405;&#20013;&#25214;&#21040;&#12290;
      </p></td></tr></tbody></table></div><p>&#24815;&#20363;&#20248;&#20808;&#21407;&#21017;&#25903;&#25345;&#20307;&#29616;&#22312;MVC&#30340;&#19977;&#20010;&#26680;&#24515;&#39046;&#22495;&#65306;&#27169;&#22411;&#12289;&#35270;&#22270;&#21644;&#25511;&#21046;&#22120;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-coc-ccnhm"></a>13.11.1.&nbsp;&#23545;&#25511;&#21046;&#22120;&#30340;&#25903;&#25345;&#65306;<tt class="classname">ControllerClassNameHandlerMapping</tt></h3></div></div><div></div></div><p><tt class="classname">ControllerClassNameHandlerMapping</tt>&#31867;&#26159;<tt class="interfacename">HandlerMapping</tt>&#25509;&#21475;&#30340;&#19968;&#20010;&#23454;&#29616;&#12290;
      &#23427;&#20351;&#29992;&#24815;&#20363;&#26469;&#30830;&#23450;&#35831;&#27714;&#30340;URL&#21644;&#29992;&#20110;&#22788;&#29702;&#23427;&#20204;&#30340;<tt class="interfacename">Controller</tt>&#23454;&#20363;&#38388;&#30340;&#26144;&#23556;&#20851;&#31995;&#12290;
      </p><p>&#20030;&#20010;&#20363;&#23376;&#65292;&#32771;&#34385;&#19979;&#38754;&#30340;&#65288;&#30452;&#35266;&#30340;&#65289;<tt class="interfacename">Controller</tt>&#23454;&#29616;&#65292;
      &#35831;&#29305;&#21035;&#27880;&#24847;&#36825;&#20010;&#31867;&#30340;<span class="emphasis"><em>&#21517;&#31216;</em></span>&#12290;
      </p><pre class="programlisting">public class <span class="bold"><b>ViewShoppingCartController</b></span> implements Controller {

    public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) {
        <i class="lineannotation"><span class="lineannotation">// the implementation is not hugely important for this example...</span></i>
    }
}</pre><p>&#19979;&#38754;&#26159;&#19982;&#20043;&#20276;&#38543;&#30340;Spring Web MVC&#37197;&#32622;&#25991;&#20214;&#30340;&#19968;&#20010;&#29255;&#27573;&#65306;</p><pre class="programlisting">&lt;bean class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping"/&gt;
                
&lt;bean id="<span class="bold"><b>viewShoppingCart</b></span>" class="x.y.z.ViewShoppingCartController"&gt;
    <i class="lineannotation"><span class="lineannotation">&lt;!-- inject dependencies as required... --&gt;</span></i>
&lt;/bean&gt;</pre><p><tt class="classname">ControllerClassNameHandlerMapping</tt>&#22312;&#23427;&#30340;&#24212;&#29992;&#19978;&#19979;&#25991;&#20013;&#25214;&#20986;&#25152;&#26377;&#19981;&#21516;&#30340;&#22788;&#29702;&#22120;&#65288;handler&#65289;&#65288;&#25110;<tt class="interfacename">Controller</tt>&#65289;bean&#65292;
      &#24182;&#21435;&#25481;&#21517;&#31216;&#20013;&#30340;<tt class="literal">Controller</tt>&#65292;&#26469;&#23450;&#20041;&#23427;&#30340;&#22788;&#29702;&#22120;&#26144;&#23556;&#12290;</p><p>&#35753;&#25105;&#20204;&#30475;&#26356;&#22810;&#30340;&#20363;&#23376;&#65292;&#36825;&#26679;&#20854;&#20013;&#30340;&#20013;&#24515;&#24605;&#24819;&#23601;&#39532;&#19978;&#23601;&#28165;&#26970;&#20102;&#12290;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="classname">WelcomeController</tt>&#26144;&#23556;&#21040;&#8220;<tt class="literal">/welcome*</tt>&#8221;&#35831;&#27714;URL</p></li><li><p><tt class="classname">HomeController</tt>&#26144;&#23556;&#21040;&#8220;<tt class="literal">/home*</tt>&#8221;&#35831;&#27714;URL</p></li><li><p><tt class="classname">IndexController</tt>&#26144;&#23556;&#21040;&#8220;<tt class="literal">/index*</tt>&#8221;&#35831;&#27714;URL</p></li><li><p><tt class="classname">RegisterController</tt>&#26144;&#23556;&#21040;&#8220;<tt class="literal">/register*</tt>&#8221;&#35831;&#27714;URL</p></li><li><p><tt class="classname">DisplayShoppingCartController</tt>&#26144;&#23556;&#21040;&#8220;<tt class="literal">/displayshoppingcart*</tt>&#35831;&#27714;URL</p><p><span class="emphasis"><em>&#65288;&#27880;&#24847;&#22823;&#23567;&#20889;&#8212;&#8212;&#20840;&#37096;&#23567;&#20889;&#8212;&#8212;&#23545;&#20110;&#39548;&#23792;&#24335;&#22823;&#23567;&#20889;&#65288;&#31532;&#19968;&#20010;&#35789;&#30340;&#39318;&#23383;&#27597;&#23567;&#20889;&#65292;&#38543;&#21518;&#30340;&#27599;&#20010;&#35789;&#39318;&#23383;&#27597;&#22823;&#20889;&#65289;&#30340;<tt class="interfacename">Controller</tt>&#31867;&#21517;&#12290;&#65289;</em></span></p></li></ul></div><p>&#24403;&#25511;&#21046;&#22120;&#26159;<tt class="classname">MultiActionController</tt>&#22788;&#29702;&#22120;&#31867;&#26102;&#65292;&#29983;&#25104;&#30340;&#26144;&#23556;&#23601;&#65288;&#26377;&#19968;&#28857;&#28857;&#65289;&#26356;&#20026;&#22797;&#26434;&#65292;&#20294;&#24184;&#32780;&#27809;&#26377;&#26356;&#38590;&#29702;&#35299;&#12290;
      &#19979;&#38754;&#20363;&#23376;&#20013;&#30340;&#20960;&#20010;<tt class="interfacename">Controller</tt>&#21517;&#23383;&#20551;&#35774;&#37117;&#26159;<tt class="classname">MultiActionController</tt>&#30340;&#23454;&#29616;&#12290;
      </p><div class="itemizedlist"><ul type="disc"><li><p><tt class="classname">AdminController</tt>&#26144;&#23556;&#21040;&#8220;<tt class="literal">/admin<span class="bold"><b>/*</b></span></tt>&#8221;&#35831;&#27714;URL</p></li><li><p><tt class="classname">CatalogController</tt>&#26144;&#23556;&#21040;&#8220;<tt class="literal">/catalog<span class="bold"><b>/*</b></span></tt>&#8221;&#35831;&#27714;URL</p></li></ul></div><p>&#22914;&#26524;&#36981;&#24490;&#28418;&#20142;&#32780;&#19988;&#26631;&#20934;&#30340;&#35268;&#33539;&#25226;&#20320;&#30340;<tt class="interfacename">Controller</tt>&#23454;&#29616;&#21629;&#21517;&#20026;<tt class="literal">xxx<span class="bold"><b>Controller</b></span></tt>&#65292;
      &#37027;&#20040;<tt class="classname">ControllerClassNameHandlerMapping</tt>&#23558;&#20351;&#20320;&#20813;&#20110;&#24525;&#21463;&#24517;&#39035;&#39318;&#20808;&#23450;&#20041;&#23427;&#20204;&#65292;
      &#28982;&#21518;&#36824;&#35201;&#32500;&#25252;<span class="emphasis"><em>&#20887;&#8212;&#8212;&#38271;&#8212;&#8212;&#30340;&#8212;&#8212;</em></span><tt class="classname">SimpleUrlHandlerMapping</tt>&#65288;&#25110;&#32773;&#31867;&#20284;&#30340;&#19996;&#35199;&#65289;&#30340;&#26543;&#29157;&#12290;
      </p><p><tt class="classname">ControllerClassNameHandlerMapping</tt>&#26159;<tt class="classname">AbstractHandlerMapping</tt>&#30340;&#23376;&#31867;&#65292;
      &#20174;&#32780;&#20351;&#20320;&#33021;&#22815;&#20687;&#23545;&#24453;&#22823;&#37327;&#20854;&#20182;<tt class="interfacename">HandlerMapping</tt>&#23454;&#29616;&#19968;&#26679;&#30340;&#23450;&#20041;<tt class="interfacename">HandlerInterceptor</tt>&#23454;&#20363;&#21644;&#20854;&#20182;&#20219;&#20309;&#19996;&#35199;&#12290;
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-coc-modelmap"></a>13.11.2.&nbsp;&#23545;&#27169;&#22411;&#30340;&#25903;&#25345;&#65306;<tt class="classname">ModelMap</tt>&#65288;<tt class="classname">ModelAndView</tt>&#65289;</h3></div></div><div></div></div><p><tt class="classname">ModelMap</tt>&#31867;&#39318;&#20808;&#26159;&#19968;&#20010;&#32474;&#20029;&#30340;<tt class="interfacename">Map</tt>&#23454;&#29616;&#65292;
      &#23427;&#21487;&#20197;&#20351;&#26032;&#22686;&#30340;&#23558;&#35201;&#26174;&#31034;&#22312;<tt class="interfacename">View</tt>&#20013;&#65288;&#25110;&#19978;&#65289;&#30340;&#23545;&#35937;&#20063;&#36981;&#24490;&#21516;&#19968;&#21629;&#21517;&#35268;&#33539;&#12290;
      &#32771;&#34385;&#19979;&#38754;&#30340;<tt class="interfacename">Controller</tt>&#23454;&#29616;&#65292;&#27880;&#24847;&#23545;&#35937;&#34987;&#21152;&#20837;<tt class="classname">ModelAndView</tt>&#65292;
      &#32780;&#24182;&#27809;&#26377;&#25351;&#23450;&#20219;&#20309;&#21517;&#31216;&#12290;</p><pre class="programlisting">public class DisplayShoppingCartController implements Controller {

    public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) {
        
        List cartItems = <i class="lineannotation"><span class="lineannotation">// get a <tt class="interfacename">List</tt> of <tt class="classname">CartItem</tt> objects</span></i>
        User user = <i class="lineannotation"><span class="lineannotation">// get the <tt class="classname">User</tt> doing the shopping</span></i>
        
        ModelAndView mav = new ModelAndView("displayShoppingCart"); <i class="lineannotation"><span class="lineannotation">&lt;-- the logical view name</span></i>

        mav.addObject(cartItems); <i class="lineannotation"><span class="lineannotation">&lt;-- look ma, no name, just the object</span></i>
        mav.addObject(user); <i class="lineannotation"><span class="lineannotation">&lt;-- and again ma!</span></i>

        return mav;
    }
}</pre><p><tt class="classname">ModelAndView</tt>&#31867;&#20351;&#29992;&#30340;<tt class="classname">ModelMap</tt>&#31867;&#26159;&#19968;&#20010;&#33258;&#23450;&#20041;&#30340;<tt class="interfacename">Map</tt>&#30340;&#23454;&#29616;&#12290;
      &#24403;&#26377;&#19968;&#20010;&#26032;&#23545;&#35937;&#21152;&#20837;&#30340;&#26102;&#20505;&#65292;&#23427;&#23601;&#34987;&#29992;&#20110;&#20026;&#36825;&#20010;&#23545;&#35937;&#33258;&#21160;&#29983;&#25104;&#19968;&#20010;&#38190;&#12290;
      &#20915;&#23450;&#26576;&#20010;&#21152;&#20837;&#30340;&#23545;&#35937;&#30340;&#21517;&#23383;&#30340;&#31574;&#30053;&#26159;&#65292;&#24403;&#23427;&#26159;&#19968;&#20010;&#26631;&#37327;&#23545;&#35937;&#65288;scalar object&#65289;&#65292;&#27604;&#22914;<tt class="classname">User</tt>&#26102;&#65292;
      &#23601;&#20351;&#29992;&#36825;&#20010;&#23545;&#35937;&#25152;&#23646;&#31867;&#30340;&#31616;&#30701;&#31867;&#21517;&#12290;&#19979;&#38754;&#30340;&#20960;&#20010;&#20363;&#23376;&#20013;&#65292;&#20960;&#20010;&#20026;&#26631;&#37327;&#23545;&#35937;&#29983;&#25104;&#30340;&#21517;&#23383;&#34987;&#21152;&#20837;<tt class="classname">ModelMap</tt>&#23454;&#20363;&#20013;&#12290;</p><div class="itemizedlist"><ul type="disc"><li><p>&#23558;&#20250;&#20026;&#19968;&#20010;&#26032;&#22686;&#30340;<tt class="classname">x.y.User</tt>&#23454;&#20363;&#29983;&#25104;&#8220;<tt class="literal">user</tt>&#8221;&#20316;&#20026;&#21517;&#31216;</p></li><li><p>&#23558;&#20250;&#20026;&#19968;&#20010;&#26032;&#22686;&#30340;<tt class="classname">x.y.Registration</tt>&#23454;&#20363;&#29983;&#25104;&#8220;<tt class="literal">registration</tt>&#8221;&#20316;&#20026;&#21517;&#31216;</p></li><li><p>&#23558;&#20250;&#20026;&#19968;&#20010;&#26032;&#22686;&#30340;<tt class="classname">x.y.Foo</tt>&#23454;&#20363;&#29983;&#25104;&#8220;<tt class="literal">foo</tt>&#8221;&#20316;&#20026;&#21517;&#31216;</p></li><li><p>&#23558;&#20250;&#20026;&#19968;&#20010;&#26032;&#22686;&#30340;<tt class="classname">java.util.HashMap</tt>&#23454;&#20363;&#29983;&#25104;&#8220;<tt class="literal">hashMap</tt>&#8221;&#20316;&#20026;&#21517;&#23383;&#65288;&#22312;&#36825;&#20010;&#24773;&#24418;&#19979;&#20320;&#21487;&#33021;&#24819;&#35201;&#35753;&#21517;&#23383;&#26356;&#21152;&#26126;&#30830;&#19968;&#20123;&#65292;&#22240;&#20026;&#8220;<tt class="literal">hashMap</tt>&#19981;&#22826;&#30452;&#35266;&#65289;&#12290;</p></li><li><p>&#26032;&#22686;<tt class="literal">null</tt>&#23558;&#20250;&#23548;&#33268;&#25243;&#20986;&#19968;&#20010;<tt class="classname">IllegalArgumentException</tt>&#12290;
          &#22914;&#26524;&#27491;&#22312;&#21152;&#20837;&#30340;&#36825;&#20010;&#65288;&#25110;&#36825;&#20123;&#65289;&#23545;&#35937;&#21487;&#33021;&#28508;&#22312;&#30340;&#26159;<tt class="literal">null</tt>&#30340;&#35805;&#65292;&#23601;&#35201;&#35753;&#21517;&#23383;&#26356;&#26126;&#30830;&#19968;&#20123;&#12290;</p></li></ul></div><div class="sidebar"><p class="title"><b>&#20160;&#20040;&#65311;&#19981;&#33021;&#33258;&#21160;&#29983;&#25104;&#22797;&#25968;&#65311;</b></p><p>Spring Web MVC&#30340;&#24815;&#20363;&#20248;&#20808;&#21407;&#21017;&#30340;&#25903;&#25345;&#20869;&#23481;&#20013;&#19981;&#21253;&#25324;&#33258;&#21160;&#29983;&#25104;&#22797;&#25968;&#12290;
        &#36825;&#23601;&#26159;&#35828;&#65292;&#24403;&#21152;&#20837;&#19968;&#20010;<tt class="classname">Person</tt>&#23545;&#35937;&#30340;<tt class="interfacename">List</tt>&#21040;&#19968;&#20010;<tt class="classname">ModelAndView</tt>&#26102;&#65292;
        &#19981;&#35201;&#25351;&#26395;&#29983;&#25104;&#30340;&#21517;&#23383;&#20250;&#26159;&#8220;people&#8221;&#12290;</p><p>&#36825;&#26159;&#32463;&#36807;&#19968;&#31995;&#21015;&#35752;&#35770;&#20043;&#21518;&#20316;&#20986;&#30340;&#20915;&#23450;&#65292;&#26368;&#21518;&#8220;<span class="quote">&#26368;&#23567;&#24778;&#35766;&#21407;&#21017;&#65288;Principle of Least Surprise&#65289;</span>&#8221;&#32988;&#20986;&#12290;</p></div><p>&#22312;&#21152;&#20837;&#19968;&#20010;<tt class="interfacename">Set</tt>&#12289;<tt class="interfacename">List</tt>&#25110;&#32773;&#23545;&#35937;&#25968;&#32452;&#20043;&#21518;&#65292;
      &#29983;&#25104;&#21517;&#31216;&#30340;&#31574;&#30053;&#26159;&#28145;&#20837;&#36825;&#20010;&#38598;&#21512;&#65292;&#21462;&#20986;&#38598;&#21512;&#20013;&#31532;&#19968;&#20010;&#23545;&#35937;&#30340;&#31616;&#30701;&#31867;&#21517;&#65292;&#24182;&#20351;&#29992;&#36825;&#20010;&#21517;&#31216;&#24182;&#22312;&#21518;&#38754;&#21152;&#19978;<tt class="literal">List</tt>&#12290;
      &#19968;&#20123;&#20363;&#23376;&#23558;&#20250;&#35753;&#38598;&#21512;&#30340;&#21517;&#31216;&#29983;&#25104;&#26041;&#24335;&#26356;&#28165;&#26224;&#8230;&#8230;</p><div class="itemizedlist"><ul type="disc"><li><p>&#23558;&#20250;&#20026;&#19968;&#20010;&#26032;&#22686;&#30340;&#21253;&#21547;&#20102;&#19968;&#20010;&#25110;&#22810;&#20010;<tt class="classname">x.y.User</tt>&#20803;&#32032;&#30340;<tt class="classname">x.y.User[]</tt>&#23454;&#20363;&#29983;&#25104;&#8220;<tt class="literal">userList</tt>&#8221;&#20316;&#20026;&#21517;&#31216;</p></li><li><p>&#23558;&#20250;&#20026;&#19968;&#20010;&#26032;&#22686;&#30340;&#21253;&#21547;&#20102;&#19968;&#20010;&#25110;&#22810;&#20010;<tt class="classname">x.y.User</tt>&#20803;&#32032;&#30340;<tt class="classname">x.y.Foo[]</tt>&#23454;&#20363;&#29983;&#25104;&#8220;<tt class="literal">fooList</tt>&#8221;&#20316;&#20026;&#21517;&#31216;</p></li><li><p>&#23558;&#20250;&#20026;&#19968;&#20010;&#26032;&#22686;&#30340;&#21253;&#21547;&#20102;&#19968;&#20010;&#25110;&#22810;&#20010;<tt class="classname">x.y.User</tt>&#20803;&#32032;&#30340;<tt class="classname">java.util.ArrayList</tt>&#23454;&#20363;&#29983;&#25104;&#8220;<tt class="literal">userList</tt>&#8221;&#20316;&#20026;&#21517;&#31216;</p></li><li><p>&#23558;&#20250;&#20026;&#19968;&#20010;&#26032;&#22686;&#30340;&#21253;&#21547;&#20102;&#19968;&#20010;&#25110;&#22810;&#20010;<tt class="classname">x.y.Foo</tt>&#20803;&#32032;&#30340;<tt class="classname">java.util.HashSet</tt>&#23454;&#20363;&#29983;&#25104;&#8220;<tt class="literal">fooList</tt>&#8221;&#20316;&#20026;&#21517;&#31216;</p></li><li><p>&#19968;&#20010;<span class="bold"><b>&#31354;</b></span><tt class="classname">java.util.ArrayList</tt>&#26681;&#26412;&#19981;&#20250;&#34987;&#21152;&#20837;&#65288;&#20063;&#23601;&#26159;&#35828;&#65292;<tt class="methodname">addObject(..)</tt>&#35843;&#29992;&#20854;&#23454;&#20160;&#20040;&#37117;&#27809;&#20570;&#65289;&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-coc-r2vnt"></a>13.11.3.&nbsp;&#23545;&#35270;&#22270;&#30340;&#25903;&#25345;&#65306;<tt class="interfacename">RequestToViewNameTranslator</tt></h3></div></div><div></div></div><p><tt class="interfacename">RequestToViewNameTranslator</tt>&#25509;&#21475;&#30340;&#21151;&#33021;&#26159;&#24403;&#27809;&#26377;&#26174;&#24335;&#30340;&#25552;&#20379;&#36825;&#26679;&#19968;&#20010;&#36923;&#36753;&#35270;&#22270;&#21517;&#31216;&#30340;&#26102;&#20505;&#65292;
      &#30830;&#23450;&#19968;&#20010;&#36923;&#36753;&#30340;<tt class="interfacename">View</tt>&#21517;&#31216;&#12290;
      &#36825;&#20010;&#25509;&#21475;&#21482;&#26377;&#19968;&#20010;&#23454;&#29616;&#65292;&#31934;&#26126;&#30340;&#21629;&#21517;&#20026;<tt class="classname">DefaultRequestToViewNameTranslator</tt>&#12290;
      </p><p>&#20026;&#20102;&#35299;&#37322;<tt class="classname">DefaultRequestToViewNameTranslator</tt>&#23558;&#35831;&#27714;&#30340;URL&#26144;&#23556;&#21040;&#36923;&#36753;&#30340;&#35270;&#22270;&#21517;&#30340;&#26041;&#24335;&#65292;
      &#26368;&#22909;&#36824;&#26159;&#27714;&#21161;&#20110;&#19968;&#20010;&#20363;&#23376;&#12290;</p><pre class="programlisting">public class RegistrationController implements Controller {
                
    public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) {
        <i class="lineannotation"><span class="lineannotation">// process the request...</span></i>
        ModelAndView mav = new ModelAndView();
        <i class="lineannotation"><span class="lineannotation">// add <span class="bold"><b>data</b></span> as necessary to the model...</span></i>
        return mav;
        <i class="lineannotation"><span class="lineannotation">// notice that no <tt class="interfacename">View</tt> or logical view name has been set</span></i>
    }
}</pre><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN 2.0//EN"
        "http://www.springframework.org/dtd/spring-beans-2.0.dtd"&gt;
&lt;beans&gt;

    <i class="lineannotation"><span class="lineannotation">&lt;!-- this bean with the well known name generates view names for us --&gt;</span></i>
    &lt;bean id="viewNameTranslator" class="org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator"/&gt;

    &lt;bean class="x.y.RegistrationController"&gt;
        <i class="lineannotation"><span class="lineannotation">&lt;!-- inject dependencies as necessary --&gt;</span></i>
    &lt;/bean&gt;
    
    <i class="lineannotation"><span class="lineannotation">&lt;!-- maps request URLs to Controller names --&gt;</span></i>
    &lt;bean class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping"/&gt;

    &lt;bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt;
        &lt;property name="prefix" value="/WEB-INF/jsp/"/&gt;
        &lt;property name="suffix" value=".jsp"/&gt;
    &lt;/bean&gt;

&lt;/beans&gt;
</pre><p>&#35831;&#27880;&#24847;&#65292;&#22312;&#36825;&#20010;<tt class="literal">handleRequest(..)</tt>&#26041;&#27861;&#30340;&#23454;&#29616;&#20013;&#65292;
      &#27809;&#26377;&#22312;&#36820;&#22238;&#30340;<tt class="classname">ModelAndView</tt>&#19978;&#35774;&#32622;&#20219;&#20309;&#30340;<tt class="interfacename">View</tt>&#25110;&#32773;&#36923;&#36753;&#35270;&#22270;&#21517;&#31216;&#12290;
      &#32780;&#26159;&#25226;&#20174;&#35831;&#27714;&#30340;URL&#29983;&#25104;&#19968;&#20010;<span class="emphasis"><em>&#36923;&#36753;&#35270;&#22270;&#21517;&#31216;</em></span>&#30340;&#20219;&#21153;&#20132;&#32473;&#20102;<tt class="classname">DefaultRequestToViewNameTranslator</tt>&#12290;
      &#22312;&#19978;&#38754;&#36825;&#20010;<tt class="classname">RegistrationController</tt>&#19982;<tt class="classname">ControllerClassNameHandlerMapping</tt>&#32852;&#21512;&#20351;&#29992;&#30340;&#20363;&#23376;&#20013;&#65292;
      &#19968;&#20010;&#8220;<tt class="literal">http://localhost/registration.html</tt>&#8221;&#35831;&#27714;URL&#23558;&#20250;&#30001;<tt class="classname">DefaultRequestToViewNameTranslator</tt>&#29983;&#25104;&#19968;&#20010;&#8220;<tt class="literal">registration</tt>&#8221;&#36923;&#36753;&#35270;&#22270;&#21517;&#31216;&#12290;
      &#36825;&#20010;&#36923;&#36753;&#35270;&#22270;&#21517;&#31216;&#25509;&#19979;&#26469;&#23601;&#20250;&#34987;<tt class="classname">InternalResourceViewResolver</tt> bean&#35299;&#26512;&#20026;&#8220;<tt class="literal">/WEB-INF/jsp/registration.jsp</tt>&#8221;&#35270;&#22270;&#12290;
      </p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Tip" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Tip]" src="tip.png"></td><th align="left">Tip</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#29978;&#33267;&#19981;&#38656;&#35201;&#26174;&#24335;&#30340;&#23450;&#20041;&#19968;&#20010;<tt class="classname">DefaultRequestToViewNameTranslator</tt> bean&#12290;
        &#22914;&#26524;<tt class="classname">DefaultRequestToViewNameTranslator</tt>&#30340;&#32570;&#30465;&#35774;&#32622;&#31526;&#21512;&#20320;&#30340;&#35201;&#27714;&#65292;
        &#23601;&#21487;&#20197;&#20381;&#36182;&#36825;&#26679;&#19968;&#20010;&#20107;&#23454;&#65292;Spring Web MVC&#30340;<tt class="classname">DispatcherServlet</tt>&#23558;&#20250;&#22312;&#27809;&#26377;&#26174;&#24335;&#37197;&#32622;&#30340;&#24773;&#20917;&#19979;&#33258;&#21160;&#30340;&#29983;&#25104;&#36825;&#20010;&#31867;&#30340;&#19968;&#20010;&#23454;&#20363;&#12290;
        </p></td></tr></tbody></table></div><p>&#24403;&#28982;&#65292;&#22914;&#26524;&#38656;&#35201;&#20462;&#25913;&#32570;&#30465;&#35774;&#32622;&#65292;&#37027;&#20040;&#23601;&#38656;&#35201;&#26174;&#24335;&#30340;&#37197;&#32622;&#33258;&#24049;&#30340;<tt class="classname">DefaultRequestToViewNameTranslator</tt> bean&#12290;
      &#20851;&#20110;&#21487;&#20197;&#35774;&#32622;&#30340;&#21508;&#31181;&#23646;&#24615;&#30340;&#32454;&#33410;&#65292;&#35831;&#21442;&#38405;<tt class="classname">DefaultRequestToViewNameTranslator</tt>&#30340;&#30456;&#24403;&#35814;&#32454;&#30340;Javadoc&#12290;
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="mvc-annotation"></a>13.12.&nbsp;&#22522;&#20110;&#27880;&#35299;&#30340;&#25511;&#21046;&#22120;&#37197;&#32622;</h2></div></div><div></div></div><p>&#29616;&#26102;&#23545;&#20110;&#19968;&#20123;&#31867;&#22411;&#30340;&#37197;&#32622;&#25968;&#25454;&#26377;&#19968;&#20010;&#36235;&#21183;&#65292;&#23601;&#26159;&#20559;&#29233;&#27880;&#35299;&#26041;&#24335;&#32780;&#19981;&#26159;XML&#25991;&#20214;&#12290;&#20026;&#20102;&#26041;&#20415;&#23454;&#29616;&#65292;Spring&#29616;&#22312;&#65288;&#20174;2.5&#24320;&#22987;&#65289;&#25552;&#20379;&#20102;&#20351;&#29992;&#27880;&#35299;&#37197;&#32622;MVC&#26694;&#26550;&#19979;&#30340;&#32452;&#20214;&#30340;&#25903;&#25345;&#12290;</p><p>Spring 2.5&#20026;MVC&#25511;&#21046;&#22120;&#24341;&#20837;&#20102;&#19968;&#31181;&#22522;&#20110;&#27880;&#35299;&#30340;&#32534;&#31243;&#27169;&#22411;&#65292;&#22312;&#20854;&#20013;&#20351;&#29992;&#35832;&#22914;<tt class="interfacename">@RequestMapping</tt>&#12289;<tt class="interfacename">@RequestParam</tt>&#12289;<tt class="interfacename">@ModelAttribute</tt>&#65292;&#31561;&#31561;&#12290;
    &#36825;&#31181;&#27880;&#35299;&#25903;&#25345;&#22312;Servlet MVC&#21644;Portlet MVC&#20013;&#22343;&#21487;&#20351;&#29992;&#12290;&#36890;&#36807;&#36825;&#31181;&#26041;&#24335;&#23454;&#29616;&#30340;&#25511;&#21046;&#22120;&#19981;&#24517;&#30001;&#29305;&#23450;&#30340;&#22522;&#31867;&#32487;&#25215;&#32780;&#26469;&#65292;&#25110;&#32773;&#23454;&#29616;&#29305;&#23450;&#30340;&#25509;&#21475;&#12290;
    &#26356;&#36827;&#19968;&#27493;&#30340;&#65292;&#23427;&#20204;&#36890;&#24120;&#24182;&#19981;&#30452;&#25509;&#20381;&#36182;&#20110;Servlet&#25110;Portlet API&#65292;&#34429;&#28982;&#22914;&#26524;&#38656;&#35201;&#65292;&#23427;&#20204;&#21487;&#20197;&#26041;&#20415;&#30340;&#35775;&#38382;Servlet&#25110;Portlet&#30340;&#21151;&#33021;&#12290;</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Tip" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Tip]" src="tip.png"></td><th align="left">Tip</th></tr><tr><td colspan="2" valign="top" align="left"><p>Spring&#21457;&#34892;&#29256;&#26412;&#38468;&#24102;&#20102;<span class="emphasis"><em>PetClinic</em></span>&#31034;&#20363;&#65292;&#23427;&#26159;&#19968;&#20010;&#22312;&#31616;&#21333;&#30340;&#34920;&#21333;&#22788;&#29702;&#30340;&#19978;&#19979;&#25991;&#20013;&#65292;
      &#21033;&#29992;&#20102;&#26412;&#33410;&#20013;&#35828;&#26126;&#30340;&#27880;&#35299;&#25903;&#25345;&#30340;Web&#24212;&#29992;&#31243;&#24207;&#12290;
      &#21487;&#20197;&#22312;&#8220;<tt class="literal">samples/petclinic</tt>&#8221;&#30446;&#24405;&#20013;&#25214;&#21040;<span class="emphasis"><em>PetClinic</em></span>&#24212;&#29992;&#31243;&#24207;&#12290;</p><p>&#21478;&#22806;&#19968;&#20010;&#24314;&#31435;&#22312;&#22522;&#20110;&#27880;&#35299;&#30340;Web MVC&#19978;&#30340;&#31034;&#20363;&#24212;&#29992;&#31243;&#24207;&#65292;&#35831;&#35265;<span class="emphasis"><em>imagedb</em></span>&#12290;
      &#36825;&#20010;&#31034;&#20363;&#38598;&#20013;&#22312;&#26080;&#29366;&#24577;&#30340;multi-action&#25511;&#21046;&#22120;&#65292;&#21253;&#25324;&#22810;&#27573;&#25991;&#20214;&#19978;&#20256;&#30340;&#22788;&#29702;&#12290;
      &#21487;&#20197;&#22312;&#8220;<tt class="literal">samples/imagedb</tt>&#8221;&#30446;&#24405;&#25214;&#21040;<span class="emphasis"><em>imagedb</em></span>&#24212;&#29992;&#31243;&#24207;&#12290;</p></td></tr></tbody></table></div><p>&#19979;&#38754;&#30340;&#31456;&#33410;&#35760;&#24405;&#20102;&#36825;&#20123;&#27880;&#35299;&#20197;&#21450;&#36890;&#24120;&#22914;&#20309;&#20351;&#29992;&#23427;&#20204;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-ann-setup"></a>13.12.1.&nbsp;&#24314;&#31435;dispatcher&#23454;&#29616;&#27880;&#35299;&#25903;&#25345;</h3></div></div><div></div></div><p>&#21482;&#26377;&#23545;&#24212;&#30340;<tt class="interfacename">HandlerMapping</tt>&#65288;&#20026;&#20102;&#23454;&#29616;&#31867;&#22411;&#32423;&#21035;&#30340;&#27880;&#35299;&#65289;&#21644;/&#25110;<tt class="interfacename">HandlerAdapter</tt>&#65288;&#20026;&#20102;&#23454;&#29616;&#26041;&#27861;&#32423;&#21035;&#30340;&#27880;&#35299;&#65289;&#20986;&#29616;&#22312;dispatcher&#20013;&#26102;&#65292;
      <span class="emphasis"><em><tt class="interfacename">@RequestMapping</tt>&#25165;&#20250;&#34987;&#22788;&#29702;&#12290;
      </em></span>&#36825;&#22312;<tt class="classname">DispatcherServlet</tt>&#21644;<tt class="classname">DispatcherPortlet</tt>&#20013;&#37117;&#26159;&#32570;&#30465;&#30340;&#34892;&#20026;&#12290;
      </p><p>&#28982;&#32780;&#65292;&#22914;&#26524;&#26159;&#22312;&#23450;&#20041;&#33258;&#24049;&#30340;<tt class="interfacename">HandlerMappings</tt>&#25110;<tt class="interfacename">HandlerAdapters</tt>&#65292;
      &#23601;&#38656;&#35201;&#30830;&#20445;&#19968;&#20010;&#23545;&#24212;&#30340;&#33258;&#23450;&#20041;&#30340;<tt class="classname">DefaultAnnotationHandlerMapping</tt>&#21644;/&#25110;<tt class="classname">AnnotationMethodHandlerAdapter</tt>&#21516;&#26679;&#34987;&#23450;&#20041;&#8212;&#8212;&#20551;&#35774;&#24819;&#35201;&#20351;&#29992;<tt class="interfacename">@RequestMapping</tt>&#12290;</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"&gt;

    &lt;bean class="org.springframework.web.servlet.mvc.DefaultAnnotationHandlerMapping"/&gt;

    &lt;bean class="org.springframework.web.servlet.mvc.AnnotationMethodHandlerAdapter"/&gt;

    ... (controller bean definitions) ...

&lt;/beans&gt;
</pre><p>&#22914;&#26524;&#20320;&#24819;&#35201;&#33258;&#23450;&#20041;&#26144;&#23556;&#31574;&#30053;&#65292;&#26174;&#24335;&#30340;&#23450;&#20041;&#19968;&#20010;<tt class="classname">DefaultAnnotationHandlerMapping</tt>&#21644;/&#25110;<tt class="classname">AnnotationMethodHandlerAdapter</tt>&#20063;&#26377;&#23454;&#38469;&#24847;&#20041;&#12290;
      &#20363;&#22914;&#65292;&#25351;&#23450;&#19968;&#20010;&#33258;&#23450;&#20041;&#30340;<tt class="interfacename">PathMatcher</tt>&#25110;&#32773;<tt class="interfacename">WebBindingInitializer</tt>&#65288;&#35265;&#19979;&#38754;&#65289;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-ann-controller"></a>13.12.2.&nbsp;&#20351;&#29992;<tt class="interfacename">@Controller</tt>&#23450;&#20041;&#19968;&#20010;&#25511;&#21046;&#22120;</h3></div></div><div></div></div><p>&#27880;&#35299;<tt class="interfacename">@Controller</tt>&#25351;&#26126;&#19968;&#20010;&#29305;&#23450;&#30340;&#31867;&#25215;&#25285;<span class="emphasis"><em>&#25511;&#21046;&#22120;</em></span>&#30340;&#32844;&#36131;&#65292;
      &#32780;&#27809;&#26377;&#25193;&#23637;&#20219;&#20309;&#25511;&#21046;&#22120;&#22522;&#31867;&#25110;&#32773;&#24341;&#29992;Servlet API&#30340;&#24517;&#35201;&#12290;&#24403;&#28982;&#65292;&#22914;&#26524;&#38656;&#35201;&#36824;&#26159;&#21487;&#20197;&#24341;&#29992;&#29305;&#23450;Servlet&#21151;&#33021;&#12290;</p><p>&#27880;&#35299;<tt class="interfacename">@Controller</tt>&#30340;&#22522;&#26412;&#30446;&#26631;&#26159;&#25285;&#20219;&#25152;&#27880;&#35299;&#30340;&#31867;&#30340;&#21407;&#22411;&#30340;&#35282;&#33394;&#65292;&#25351;&#26126;&#23427;&#30340;&#32844;&#36131;&#12290;
      Dispatcher&#23558;&#20250;&#22312;&#36825;&#26679;&#34987;&#27880;&#35299;&#30340;&#31867;&#20013;&#25195;&#25551;&#26144;&#23556;&#30340;&#26041;&#27861;&#65292;&#25506;&#27979;&#27880;&#35299;<tt class="interfacename">@RequestMapping</tt>&#65288;&#35265;&#19979;&#19968;&#33410;&#65289;&#12290;
      </p><p>&#25152;&#27880;&#35299;&#30340;&#25511;&#21046;&#22120;bean&#21487;&#20197;&#34987;&#26174;&#24335;&#23450;&#20041;&#65292;&#36825;&#20010;&#36807;&#31243;&#26159;&#22312;dispatcher&#30340;&#19978;&#19979;&#25991;&#20013;&#20351;&#29992;&#19968;&#20010;&#26631;&#20934;&#30340;Spring bean&#23450;&#20041;&#23436;&#25104;&#30340;&#12290;
      &#28982;&#32780;&#65292;<tt class="interfacename">@Controller</tt>&#21407;&#22411;&#20063;&#20801;&#35768;&#33258;&#21160;&#25506;&#27979;&#65292;&#23601;&#20687;Spring 2.5&#23545;&#25506;&#27979;&#32452;&#20214;&#30340;&#31867;&#20197;&#21450;&#20026;&#23427;&#20204;&#33258;&#21160;&#27880;&#20876;bean&#23450;&#20041;&#30340;&#26222;&#36941;&#25903;&#25345;&#19968;&#26679;&#12290;</p><p>&#35201;&#23454;&#29616;&#23545;&#36825;&#26679;&#30340;&#25152;&#27880;&#35299;&#30340;&#25511;&#21046;&#22120;&#30340;&#33258;&#21160;&#25506;&#27979;&#65292;&#24517;&#39035;&#35201;&#21521;&#37197;&#32622;&#20013;&#21152;&#20837;&#32452;&#20214;&#25195;&#25551;&#30340;&#37096;&#20998;&#12290;
      &#36890;&#36807;&#20351;&#29992;&#22312;&#19979;&#38754;&#30340;XML&#29255;&#27573;&#20013;&#25152;&#23637;&#31034;&#20986;&#30340;<span class="emphasis"><em>spring-context</em></span> schema&#65292;&#36825;&#24456;&#23481;&#26131;&#23454;&#29616;&#65306;</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p" 
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-2.5.xsd"&gt;

    &lt;context:component-scan base-package="org.springframework.samples.petclinic.web"/&gt;

    ...

&lt;/beans&gt;
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-ann-requestmapping"></a>13.12.3.&nbsp;&#20351;&#29992;<tt class="interfacename">@RequestMapping</tt>&#26144;&#23556;&#35831;&#27714;</h3></div></div><div></div></div><p>&#27880;&#35299;<tt class="interfacename">@RequestMapping</tt>&#34987;&#29992;&#20110;&#26144;&#23556;&#22914;&#8220;/editPet.do&#8221;&#36825;&#26679;&#30340;URL&#21040;&#19968;&#20010;&#23436;&#25972;&#30340;&#31867;&#25110;&#32773;&#19968;&#20010;&#29305;&#23450;&#30340;&#22788;&#29702;&#26041;&#27861;&#12290;
      &#20856;&#22411;&#30340;&#65292;&#39030;&#23618;&#30340;&#27880;&#35299;&#26144;&#23556;&#19968;&#20010;&#29305;&#23450;&#30340;&#35831;&#27714;&#36335;&#24452;&#65288;&#25110;&#32773;&#36335;&#24452;&#27169;&#24335;&#65289;&#21040;&#19968;&#20010;&#34920;&#21333;&#25511;&#21046;&#22120;&#65292;&#21478;&#22806;&#30340;&#26041;&#27861;&#19968;&#32423;&#30340;&#27880;&#35299;&#21487;&#20197;&#32553;&#23567;&#36825;&#20010;&#20027;&#35201;&#26144;&#23556;&#30340;&#33539;&#22260;&#65292;&#21253;&#25324;&#23545;&#20110;&#19968;&#20010;&#29305;&#23450;&#30340;HTTP&#35831;&#27714;&#26041;&#27861;&#65288;&#8220;GET/POST&#8221;&#65289;&#25110;&#32773;&#29305;&#23450;&#30340;HTTP&#35831;&#27714;&#21442;&#25968;&#12290;</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Tip" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Tip]" src="tip.png"></td><th align="left">Tip</th></tr><tr><td colspan="2" valign="top" align="left"><p><tt class="interfacename">@RequestMapping</tt>&#22312;&#31867;&#22411;&#19968;&#32423;&#20063;&#21487;&#20197;&#34987;&#29992;&#20110;<tt class="interfacename">Controller</tt>&#25509;&#21475;&#30340;&#26222;&#36890;&#23454;&#29616;&#12290;
        &#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#35831;&#27714;&#22788;&#29702;&#30340;&#20195;&#30721;&#20250;&#36981;&#24490;&#20256;&#32479;&#30340;<tt class="literal">handleRequest</tt>&#27169;&#26679;&#65292;&#32780;&#25511;&#21046;&#22120;&#30340;&#26144;&#23556;&#23558;&#20250;&#36890;&#36807;&#19968;&#20010;<tt class="interfacename">@RequestMapping</tt>&#27880;&#35299;&#20307;&#29616;&#12290;
        &#36825;&#23545;&#20110;&#39044;&#20808;&#26500;&#24314;&#30340;<tt class="interfacename">Controller</tt>&#22522;&#31867;&#65292;&#35832;&#22914;<tt class="classname">SimpleFormController</tt>&#65292;&#20063;&#19968;&#26679;&#26377;&#25928;&#12290;
        </p><p>&#22312;&#19979;&#38754;&#30340;&#35752;&#35770;&#20013;&#65292;&#25105;&#20204;&#23558;&#20250;&#20851;&#27880;&#22522;&#20110;&#36890;&#36807;&#27880;&#35299;&#23454;&#29616;&#30340;&#22788;&#29702;&#26041;&#27861;&#30340;&#25511;&#21046;&#22120;&#12290;</p></td></tr></tbody></table></div><p>&#19979;&#38754;&#26159;&#19968;&#20010;&#20351;&#29992;&#20102;&#36825;&#31181;&#27880;&#35299;&#30340;&#34920;&#21333;&#25511;&#21046;&#22120;&#30340;&#20363;&#23376;&#65292;&#23427;&#36873;&#33258;PetClinic&#65306;</p><pre class="programlisting">@Controller
<span class="bold"><b>@RequestMapping("/editPet.do")</b></span>
@SessionAttributes("pet")
public class EditPetForm {

	private final Clinic clinic;

	@Autowired
	public EditPetForm(Clinic clinic) {
		this.clinic = clinic;
	}

	@ModelAttribute("types")
	public Collection&lt;PetType&gt; populatePetTypes() {
		return this.clinic.getPetTypes();
	}

	<span class="bold"><b>@RequestMapping(method = RequestMethod.GET)</b></span>
	public String setupForm(@RequestParam("petId") int petId, ModelMap model) {
		Pet pet = this.clinic.loadPet(petId);
		model.addAttribute("pet", pet);
		return "petForm";
	}

	<span class="bold"><b>@RequestMapping(method = RequestMethod.POST)</b></span>
	public String processSubmit(@ModelAttribute("pet") Pet pet, BindingResult result, 
			SessionStatus status) {
		new PetValidator().validate(pet, result);
		if (result.hasErrors()) {
			return "petForm";
		}
		else {
			this.clinic.storePet(pet);
			status.setComplete();
			return "redirect:owner.do?ownerId=" + pet.getOwner().getId();
		}
	}

}
</pre><p>&#23545;&#20110;&#19968;&#20010;&#20256;&#32479;&#30340;multi-action&#25511;&#21046;&#22120;&#65292;&#30001;&#20110;&#25511;&#21046;&#22120;&#20250;&#21709;&#24212;&#22810;&#20010;URL&#65292;URL&#23601;&#36890;&#24120;&#34987;&#30452;&#25509;&#26144;&#23556;&#21040;&#26041;&#27861;&#19978;&#12290;
      &#19979;&#38754;&#26159;&#19968;&#20010;&#20351;&#29992;&#20102;<tt class="classname">@RequestMapping</tt>&#30340;multi-action&#25511;&#21046;&#22120;&#30340;&#20363;&#23376;&#65292;&#23427;&#36873;&#33258;PetClinic&#65306;</p><pre class="programlisting">@Controller
public class ClinicController {

	private final Clinic clinic;

	@Autowired
	public ClinicController(Clinic clinic) {
		this.clinic = clinic;
	}

	/**
	 * Custom handler for the welcome view.
	 * Note that this handler relies on the RequestToViewNameTranslator to
	 * determine the logical view name based on the request URL: "/welcome.do"
	 * -&gt; "welcome".
	 */
	<span class="bold"><b>@RequestMapping("/welcome.do")</b></span>
	public void welcomeHandler() {
	}

	/**
	 * Custom handler for displaying vets.
	 * Note that this handler returns a plain {@link ModelMap} object instead of
	 * a ModelAndView, thus leveraging convention-based model attribute names.
	 * It relies on the RequestToViewNameTranslator to determine the logical
	 * view name based on the request URL: "/vets.do" -&gt; "vets".
	 *
	 * @return a ModelMap with the model attributes for the view
	 */
	<span class="bold"><b>@RequestMapping("/vets.do")</b></span>
	public ModelMap vetsHandler() {
		return new ModelMap(this.clinic.getVets());
	}

	/**
	 * Custom handler for displaying an owner.
	 * Note that this handler returns a plain {@link ModelMap} object instead of
	 * a ModelAndView, thus leveraging convention-based model attribute names.
	 * It relies on the RequestToViewNameTranslator to determine the logical
	 * view name based on the request URL: "/owner.do" -&gt; "owner".
	 *
	 * @param ownerId the ID of the owner to display
	 * @return a ModelMap with the model attributes for the view
	 */
	<span class="bold"><b>@RequestMapping("/owner.do")</b></span>
	public ModelMap ownerHandler(@RequestParam("ownerId") int ownerId) {
		return new ModelMap(this.clinic.loadOwner(ownerId));
	}

}
</pre><p>
      
      &#20351;&#29992;<tt class="classname">@RequestMapping</tt>&#27880;&#35299;&#30340;&#22788;&#29702;&#22120;&#26041;&#27861;&#20801;&#35768;&#20855;&#26377;&#38750;&#24120;&#28789;&#27963;&#30340;&#22806;&#35266;&#12290;
      &#23427;&#20204;&#21487;&#20197;&#25317;&#26377;&#19979;&#38754;&#31867;&#22411;&#30340;&#21442;&#25968;&#65292;&#22312;&#20219;&#24847;&#30340;&#39034;&#24207;&#19979;&#65288;&#38500;&#38750;&#26159;&#23545;&#20110;&#39564;&#35777;&#32467;&#26524;&#65292;&#23427;&#38656;&#35201;&#32039;&#36319;&#22312;&#23545;&#24212;&#30340;&#21629;&#20196;&#23545;&#35937;&#21518;&#38754;&#65292;&#22914;&#26524;&#38656;&#35201;&#65289;&#65306;

      </p><div class="itemizedlist"><ul type="disc"><li><p>&#35831;&#27714;&#21644;/&#25110;&#21709;&#24212;&#23545;&#35937;&#65288;Servlet API&#25110;&#32773;Portlet API&#65289;&#12290;
          &#21487;&#20197;&#36873;&#25321;&#20219;&#20309;&#29305;&#23450;&#30340;&#35831;&#27714;/&#21709;&#24212;&#31867;&#22411;&#65292;&#20363;&#22914;&#65292;ServletRequest/HttpServletRequest&#25110;&#32773;PortletRequest/ActionRequest/RenderRequest&#12290;
          &#27880;&#24847;&#37027;&#20010;Portlet&#30340;&#20363;&#23376;&#37324;&#65292;&#19968;&#20010;&#34987;&#26174;&#24335;&#22768;&#26126;&#20102;&#30340;action/render&#21442;&#25968;&#34987;&#29992;&#20110;&#26144;&#23556;&#29305;&#23450;&#30340;&#35831;&#27714;&#31867;&#22411;&#21040;&#19968;&#20010;&#22788;&#29702;&#26041;&#27861;&#65288;&#22312;&#27809;&#26377;&#25552;&#20379;&#20854;&#20182;&#20449;&#24687;&#26469;&#21306;&#20998;action&#21644;render requests&#30340;&#24773;&#20917;&#19979;&#65289;&#12290;</p></li><li><p>&#20250;&#35805;&#23545;&#35937;&#65288;Servlet API&#25110;&#32773;Portlet API&#65289;&#65306;&#19981;&#31649;&#26159;HttpSession&#36824;&#26159;PortletSession&#12290;
          &#19968;&#20010;&#27492;&#31181;&#31867;&#22411;&#30340;&#21442;&#25968;&#23558;&#20250;&#20445;&#35777;&#20986;&#29616;&#19968;&#20010;&#23545;&#24212;&#30340;&#20250;&#35805;&#12290;&#36825;&#26679;&#23601;&#36896;&#25104;&#65292;&#36825;&#26679;&#19968;&#20010;&#21442;&#25968;&#27704;&#36828;&#20063;&#19981;&#21487;&#20197;&#26159;<font color="red">&lt;code&gt;null&lt;/code&gt;</font>&#12290;
          <span class="emphasis"><em>&#27880;&#24847;&#20250;&#35805;&#35775;&#38382;&#21487;&#20197;&#24182;&#19981;&#26159;&#32447;&#31243;&#23433;&#20840;&#30340;&#65292;&#29305;&#21035;&#26159;&#22312;Servlet&#29615;&#22659;&#20013;&#65306;&#22914;&#26524;&#20801;&#35768;&#22810;&#20010;&#35831;&#27714;&#21516;&#26102;&#35775;&#38382;&#19968;&#20010;&#20250;&#35805;&#65292;&#23601;&#32771;&#34385;&#25226;<tt class="classname">AnnotationMethodHandlerAdapter</tt>&#30340;&#8220;synchronizeOnSession&#8221;&#26071;&#26631;&#32622;&#20026;&#8220;true&#8221;</em></span></p></li><li><p><tt class="classname">org.springframework.web.context.request.WebRequest</tt>&#25110;<tt class="classname">org.springframework.web.context.request.NativeWebRequest</tt>&#12290;
          &#20801;&#35768;&#20687;&#35775;&#38382;&#35831;&#27714;/&#20250;&#35805;&#23646;&#24615;&#19968;&#26679;&#30340;&#35775;&#38382;&#19968;&#33324;&#30340;&#35831;&#27714;&#21442;&#25968;&#65292;&#32780;&#19981;&#26159;&#38145;&#23450;&#22312;&#21407;&#29983;&#30340;Servlet/Portlet API&#19978;&#12290;</p></li><li><p><tt class="classname">java.util.Locale</tt>&#29992;&#20110;&#24403;&#21069;&#35831;&#27714;&#21306;&#22495;&#23646;&#24615;&#65288;&#30001;&#21487;&#29992;&#30340;&#26368;&#25509;&#36817;&#30340;&#21306;&#22495;&#23646;&#24615;&#35299;&#26512;&#22120;&#20915;&#23450;&#65292;&#20063;&#23601;&#26159;&#65292;
          &#22312;Servlet&#29615;&#22659;&#20013;&#37197;&#32622;&#22909;&#30340;<tt class="interfacename">LocaleResolver</tt>&#20197;&#21450;&#22312;Portlet&#29615;&#22659;&#20013;&#30340;portal locale&#65289;&#12290;</p></li><li><p><tt class="classname">java.io.InputStream</tt>/<tt class="classname">java.io.Reader</tt>&#29992;&#20110;&#35775;&#38382;&#35831;&#27714;&#30340;&#20869;&#23481;&#12290;
          &#36825;&#23558;&#26159;Servlet/Portlet API&#26292;&#38706;&#20986;&#30340;&#22825;&#28982;&#30340;InputStream/Reader&#12290;</p></li><li><p><tt class="classname">java.io.OutputStream</tt>/<tt class="classname">java.io.Writer</tt>&#29992;&#20110;&#29983;&#25104;&#21709;&#24212;&#30340;&#20869;&#23481;&#12290;
          &#36825;&#23558;&#26159;Servlet/Portlet API&#26292;&#38706;&#20986;&#30340;&#22825;&#28982;&#30340;OutputStream/Writer&#12290;</p></li><li><p>&#20197;<tt class="classname">@RequestParam</tt>&#27880;&#35299;&#30340;&#21442;&#25968;&#29992;&#20110;&#35775;&#38382;&#29305;&#23450;&#30340;Servlet/Portlet&#35831;&#27714;&#21442;&#25968;&#12290;
          &#21442;&#25968;&#30340;&#20540;&#23558;&#34987;&#36716;&#25442;&#20026;&#22768;&#26126;&#30340;&#26041;&#27861;&#21442;&#25968;&#31867;&#22411;&#12290;</p></li><li><p><tt class="interfacename">java.util.Map</tt>/<tt class="interfacename">org.springframework.ui.Model</tt>/<tt class="classname">org.springframework.ui.ModelMap</tt>&#29992;&#20110;&#20805;&#23454;&#23558;&#34987;&#26292;&#38706;&#21040;Web&#35270;&#22270;&#30340;&#38544;&#21547;&#27169;&#22411;&#12290;</p></li><li><p>&#32465;&#23450;&#21442;&#25968;&#21040;&#30340;&#21629;&#20196;/&#34920;&#21333;&#23545;&#35937;&#65306;&#24102;&#26377;&#33258;&#23450;&#20041;&#30340;&#31867;&#22411;&#36716;&#25442;&#30340;bean&#23646;&#24615;&#25110;&#32773;&#22495;&#65292;&#20381;&#36182;&#20110;<tt class="classname">@InitBinder</tt>&#26041;&#27861;&#21644;/&#25110;HandlerAdapter&#37197;&#32622;&#8212;&#8212;&#21442;&#35265;<tt class="classname">AnnotationMethodHandlerAdapter</tt>&#30340;&#8220;<tt class="literal">webBindingInitializer</tt>&#8221;&#23646;&#24615;&#12290;
          &#36825;&#26679;&#30340;&#21629;&#20196;&#23545;&#35937;&#65292;&#21253;&#25324;&#23427;&#20204;&#30340;&#39564;&#35777;&#32467;&#26524;&#65292;&#23558;&#20250;&#26292;&#38706;&#20026;&#27169;&#22411;&#23646;&#24615;&#65292;&#40664;&#35748;&#30340;&#20250;&#22312;&#23646;&#24615;&#27880;&#35299;&#20013;&#20351;&#29992;&#38750;&#38480;&#23450;&#30340;&#21629;&#20196;&#31867;&#21517;&#65288;&#20363;&#22914;&#65292;&#23545;&#20110;&#31867;&#22411;&#8220;mypackage.OrderAddress&#8221;&#20351;&#29992;&#8220;orderAddress&#8221;&#65289;&#12290;
          &#20026;&#22768;&#26126;&#19968;&#20010;&#29305;&#23450;&#30340;&#27169;&#22411;&#23646;&#24615;&#21517;&#31216;&#25351;&#23450;&#19968;&#20010;&#21442;&#25968;&#32423;&#21035;&#30340;<tt class="classname">ModelAttribute</tt>&#27880;&#35299;&#12290;</p></li><li><p><tt class="classname">org.springframework.validation.Errors</tt>/<tt class="classname">org.springframework.validation.BindingResult</tt>&#39564;&#35777;&#32467;&#26524;&#29992;&#20110;&#21069;&#38754;&#30340;&#19968;&#20010;&#21629;&#20196;/&#34920;&#21333;&#23545;&#35937;&#65288;&#21069;&#38754;&#32039;&#25509;&#30340;&#21442;&#25968;&#65289;&#12290;</p></li><li><p><tt class="classname">org.springframework.web.bind.support.SessionStatus</tt>&#29366;&#24577;&#22788;&#29702;&#29992;&#20110;&#25226;&#34920;&#21333;&#22788;&#29702;&#36807;&#31243;&#26631;&#35760;&#20026;&#24050;&#23436;&#25104;&#65288;&#35302;&#21457;&#20250;&#35805;&#23646;&#24615;&#30340;&#28165;&#29702;&#65292;&#36825;&#20123;&#20250;&#35805;&#23646;&#24615;&#26159;&#22312;&#21477;&#26564;&#31867;&#22411;&#32423;&#21035;&#30001;<tt class="classname">@SessionAttributes</tt>&#27880;&#35299;&#25351;&#31034;&#20986;&#30340;&#65289;&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-ann-requestparam"></a>13.12.4.&nbsp;&#20351;&#29992;<tt class="classname">@RequestParam</tt>&#32465;&#23450;&#35831;&#27714;&#21442;&#25968;&#21040;&#26041;&#27861;&#21442;&#25968;</h3></div></div><div></div></div><p><tt class="classname">@RequestParam</tt>&#27880;&#35299;&#26159;&#29992;&#20110;&#22312;&#25511;&#21046;&#22120;&#20013;&#32465;&#23450;&#35831;&#27714;&#21442;&#25968;&#21040;&#26041;&#27861;&#21442;&#25968;&#12290;</p><p>&#19979;&#38754;&#21462;&#33258;PetClinic&#23454;&#20363;&#31243;&#24207;&#30340;&#20195;&#30721;&#29255;&#27573;&#35828;&#26126;&#20102;&#36825;&#31181;&#29992;&#27861;&#65306;</p><pre class="programlisting">@Controller
@RequestMapping("/editPet.do")
@SessionAttributes("pet")
public class EditPetForm {

    <i class="lineannotation"><span class="lineannotation">// ...</span></i>

	@RequestMapping(method = RequestMethod.GET)
	public String setupForm(<span class="bold"><b>@RequestParam("petId") int petId</b></span>, ModelMap model) {
		Pet pet = this.clinic.loadPet(petId);
		model.addAttribute("pet", pet);
		return "petForm";
	}

    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
</pre><p>&#20351;&#29992;&#36825;&#20010;&#27880;&#35299;&#30340;&#21442;&#25968;&#40664;&#35748;&#26159;&#24517;&#38656;&#30340;&#65292;&#20294;&#26159;&#21487;&#20197;&#25226;<tt class="interfacename">@RequestParam</tt>&#30340;<tt class="literal">required</tt>&#23646;&#24615;&#32622;&#20026;<tt class="literal">false</tt>&#20174;&#32780;&#35753;&#36825;&#20010;&#21442;&#25968;&#21487;&#36873;&#65288;&#20363;&#22914;&#65292;<tt class="literal">@RequestParam(value="id", required="false")</tt>&#65289;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-ann-modelattrib"></a>13.12.5.&nbsp;&#20351;&#29992;<tt class="classname">@ModelAttribute</tt>&#25552;&#20379;&#19968;&#20010;&#20174;&#27169;&#22411;&#21040;&#25968;&#25454;&#30340;&#38142;&#25509;</h3></div></div><div></div></div><p><tt class="classname">@ModelAttribute</tt>&#22312;&#25511;&#21046;&#22120;&#20013;&#26377;&#20004;&#31181;&#20351;&#29992;&#22330;&#26223;&#12290;
      &#24403;&#20316;&#20026;&#19968;&#20010;&#26041;&#27861;&#21442;&#25968;&#26102;&#65292;<tt class="classname">@ModelAttribute</tt>&#29992;&#20110;&#26144;&#23556;&#19968;&#20010;&#27169;&#22411;&#23646;&#24615;&#21040;&#29305;&#23450;&#30340;&#27880;&#35299;&#30340;&#26041;&#27861;&#21442;&#25968;&#65288;&#35265;&#19979;&#38754;&#30340;<tt class="literal">processSubmit()</tt>&#26041;&#27861;&#65289;&#12290;
      &#36825;&#26159;&#25511;&#21046;&#22120;&#33719;&#24471;&#25345;&#26377;&#34920;&#21333;&#25968;&#25454;&#30340;&#23545;&#35937;&#24341;&#29992;&#30340;&#26041;&#27861;&#12290;&#21478;&#22806;&#65292;&#36825;&#20010;&#21442;&#25968;&#20063;&#21487;&#20197;&#34987;&#22768;&#26126;&#20026;&#29305;&#23450;&#31867;&#22411;&#30340;&#34920;&#21333;&#25903;&#25345;&#23545;&#35937;&#65292;&#32780;&#19981;&#26159;&#19968;&#33324;&#30340;<tt class="classname">java.lang.Object</tt>&#65292;&#36825;&#23601;&#22686;&#21152;&#20102;&#31867;&#22411;&#23433;&#20840;&#24615;&#12290;</p><p><tt class="classname">@ModelAttribute</tt>&#20063;&#29992;&#20110;&#22312;&#26041;&#27861;&#32423;&#21035;&#20026;&#27169;&#22411;&#25552;&#20379;<span class="emphasis"><em>&#24341;&#29992;&#25968;&#25454;</em></span>&#65288;&#35265;&#19979;&#38754;&#30340;<tt class="literal">populatePetTypes()</tt>&#26041;&#27861;&#65289;&#12290;
      &#22312;&#36825;&#31181;&#29992;&#27861;&#20013;&#65292;&#26041;&#27861;&#32534;&#20889;&#21487;&#20197;&#21253;&#21547;&#19982;&#19978;&#38754;&#25551;&#36848;&#30340;<tt class="classname">@RequestMapping</tt>&#27880;&#35299;&#30456;&#21516;&#30340;&#31867;&#22411;&#12290;</p><p><span class="emphasis"><em>&#27880;&#24847;&#65306;</em></span>&#20351;&#29992;<tt class="classname">@ModelAttribute</tt>&#27880;&#35299;&#30340;&#26041;&#27861;&#23558;&#20250;&#22312;&#36873;&#23450;&#30340;&#20351;&#29992;<tt class="classname">@RequestMapping</tt>&#27880;&#35299;&#30340;&#26041;&#27861;<span class="emphasis"><em>&#20043;&#21069;</em></span>&#25191;&#34892;&#12290;
      &#23427;&#20204;&#26377;&#25928;&#30340;&#20351;&#29992;&#29305;&#23450;&#30340;&#23646;&#24615;&#39044;&#20808;&#22635;&#20805;&#38544;&#21547;&#30340;&#27169;&#22411;&#65292;&#36825;&#20123;&#23646;&#24615;&#24120;&#24120;&#26469;&#33258;&#19968;&#20010;&#25968;&#25454;&#24211;&#12290;
      &#36825;&#26679;&#19968;&#20010;&#23646;&#24615;&#20063;&#23601;&#21487;&#20197;&#36890;&#36807;&#22312;&#36873;&#23450;&#30340;&#26041;&#27861;&#20013;&#20351;&#29992;<tt class="classname">@ModelAttribute</tt>&#27880;&#35299;&#30340;&#21477;&#26564;&#26041;&#27861;&#21442;&#25968;&#26469;&#35775;&#38382;&#20102;&#65292;&#28508;&#22312;&#30340;&#21487;&#20197;&#24212;&#29992;&#32465;&#23450;&#21644;&#39564;&#35777;&#12290;</p><p>&#19979;&#38754;&#30340;&#20195;&#30721;&#29255;&#27573;&#23637;&#31034;&#20102;&#27492;&#27880;&#35299;&#30340;&#36825;&#20004;&#31181;&#29992;&#27861;&#65306;</p><pre class="programlisting">@Controller
@RequestMapping("/editPet.do")
@SessionAttributes("pet")
public class EditPetForm {

	<i class="lineannotation"><span class="lineannotation">// ...</span></i>

	<span class="bold"><b>@ModelAttribute("types")</b></span>
	public Collection&lt;PetType&gt; populatePetTypes() {
		return this.clinic.getPetTypes();
	}

	@RequestMapping(method = RequestMethod.POST)
	public String processSubmit(<span class="bold"><b>@ModelAttribute("pet") Pet pet</b></span>, BindingResult result,
			SessionStatus status) {
		new PetValidator().validate(pet, result);
		if (result.hasErrors()) {
			return "petForm";
		}
		else {
			this.clinic.storePet(pet);
			status.setComplete();
			return "redirect:owner.do?ownerId=" + pet.getOwner().getId();
		}
	}

}
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-ann-sessionattrib"></a>13.12.6.&nbsp;&#20351;&#29992;<tt class="classname">@SessionAttributes</tt>&#25351;&#23450;&#23384;&#20648;&#22312;&#20250;&#35805;&#20013;&#30340;&#23646;&#24615;</h3></div></div><div></div></div><p>&#31867;&#22411;&#32423;&#21035;&#30340;<tt class="classname">@SessionAttributes</tt>&#27880;&#35299;&#20351;&#29992;&#19968;&#20010;&#29305;&#23450;&#30340;&#21477;&#26564;&#22768;&#26126;&#20250;&#35805;&#23646;&#24615;&#12290;
      &#36825;&#36890;&#24120;&#20250;&#21015;&#20986;&#27169;&#22411;&#23646;&#24615;&#30340;&#21517;&#31216;&#65292;&#36825;&#20123;&#23646;&#24615;&#24212;&#34987;&#36879;&#26126;&#30340;&#20445;&#23384;&#22312;&#20250;&#35805;&#25110;&#32773;&#23545;&#35805;&#23384;&#20648;&#20013;&#65292;&#29992;&#20110;&#22312;&#21518;&#32493;&#30340;&#35831;&#27714;&#20043;&#38388;&#20316;&#20026;&#34920;&#21333;&#25903;&#25345;beans&#12290;</p><p>&#19979;&#38754;&#30340;&#20195;&#30721;&#29255;&#27573;&#23637;&#31034;&#20102;&#27492;&#27880;&#35299;&#30340;&#36825;&#31181;&#29992;&#27861;&#65306;</p><pre class="programlisting">@Controller
@RequestMapping("/editPet.do")
<span class="bold"><b>@SessionAttributes("pet")</b></span>
public class EditPetForm {
    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mvc-ann-webdatabinder"></a>13.12.7.&nbsp;&#33258;&#23450;&#20041;<tt class="classname">WebDataBinder</tt>&#21021;&#22987;&#21270;</h3></div></div><div></div></div><p>&#20026;&#20102;&#36890;&#36807;Spring&#30340;<tt class="classname">WebDataBinder</tt>&#20351;&#29992;PropertyEditors&#31561;&#33258;&#23450;&#20041;&#35831;&#27714;&#21442;&#25968;&#32465;&#23450;&#65292;&#21487;&#20197;&#25110;&#32773;&#20351;&#29992;<tt class="interfacename">@InitBinder</tt>&#8212;&#8212;&#22312;&#25511;&#21046;&#22120;&#20043;&#20869;&#30340;&#27880;&#35299;&#30340;&#26041;&#27861;&#65292;
      &#25110;&#32773;&#36890;&#36807;&#25552;&#20379;&#19968;&#20010;&#23450;&#21046;&#30340;<tt class="interfacename">WebBindingInitializer</tt>&#25226;&#37197;&#32622;&#20855;&#20307;&#21270;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mvc-ann-initbinder"></a>13.12.7.1.&nbsp;&#20351;&#29992;<tt class="interfacename">@InitBinder</tt>&#33258;&#23450;&#20041;&#25968;&#25454;&#32465;&#23450;</h4></div></div><div></div></div><p>&#20351;&#29992;<tt class="interfacename">@InitBinder</tt>&#27880;&#35299;&#25511;&#21046;&#22120;&#26041;&#27861;&#65292;&#21487;&#20197;&#22312;&#25511;&#21046;&#22120;&#31867;&#20869;&#37096;&#30452;&#25509;&#37197;&#32622;Web&#25968;&#25454;&#32465;&#23450;&#12290;
        <tt class="interfacename">@InitBinder</tt>&#25351;&#23450;&#21021;&#22987;&#21270;<tt class="classname">WebDataBinder</tt>&#30340;&#26041;&#27861;&#65292;
        &#21518;&#32773;&#34987;&#29992;&#20110;&#22635;&#20805;&#27880;&#35299;&#30340;&#21477;&#26564;&#26041;&#27861;&#30340;&#21629;&#20196;&#21644;&#34920;&#21333;&#23545;&#35937;&#21442;&#25968;&#12290;</p><p>&#36825;&#20010;init-binder&#26041;&#27861;&#25903;&#25345;<tt class="interfacename">@RequestMapping</tt>&#25903;&#25345;&#30340;&#20840;&#37096;&#21442;&#25968;&#65292;&#38500;&#20102;&#21629;&#20196;/&#34920;&#21333;&#23545;&#35937;&#21644;&#23545;&#24212;&#30340;&#39564;&#35777;&#32467;&#26524;&#23545;&#35937;&#12290;
        Init-binder&#26041;&#27861;&#24517;&#39035;&#27809;&#26377;&#36820;&#22238;&#20540;&#12290;&#22240;&#27492;&#65292;&#23427;&#20204;&#24120;&#34987;&#22768;&#26126;&#20026;<tt class="literal">void</tt>&#12290;
        &#20856;&#22411;&#30340;&#21442;&#25968;&#65292;&#21253;&#25324; <tt class="classname">WebDataBinder</tt>&#20197;&#21450;<tt class="interfacename">WebRequest</tt>&#25110;&#32773;<tt class="classname">java.util.Locale</tt>&#65292;&#20801;&#35768;&#20195;&#30721;&#27880;&#20876;&#19978;&#19979;&#25991;&#29305;&#23450;&#30340;&#32534;&#36753;&#22120;&#12290;</p><p>&#19979;&#38754;&#30340;&#20363;&#23376;&#35828;&#26126;&#20102;<tt class="interfacename">@InitBinder</tt>&#30340;&#29992;&#27861;&#65292;&#20026;&#25152;&#26377;&#30340;<tt class="classname">java.util.Date</tt>&#34920;&#21333;&#23646;&#24615;&#37197;&#32622;&#19968;&#20010;<tt class="classname">CustomDateEditor</tt>&#12290;</p><pre class="programlisting">@Controller
public class MyFormController {

    <span class="bold"><b>@InitBinder</b></span>
    public void initBinder(WebDataBinder binder) {
        SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
        dateFormat.setLenient(false);
        binder.registerCustomEditor(Date.class, new CustomDateEditor(dateFormat, false));
    }

    <i class="lineannotation"><span class="lineannotation">// ...</span></i>
}

</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mvc-ann-webbindinginitializer"></a>13.12.7.2.&nbsp;&#37197;&#32622;&#19968;&#20010;&#23450;&#21046;&#30340;<tt class="interfacename">WebBindingInitializer</tt></h4></div></div><div></div></div><p>&#20026;&#20102;&#22806;&#21270;&#25968;&#25454;&#32465;&#23450;&#21021;&#22987;&#21270;&#30340;&#36807;&#31243;&#65292;&#21487;&#20197;&#25552;&#20379;&#19968;&#20010;<tt class="interfacename">WebBindingInitializer</tt>&#25509;&#21475;&#30340;&#33258;&#23450;&#20041;&#23454;&#29616;&#12290;
        &#36890;&#36807;&#20026;&#19968;&#20010;<tt class="classname">AnnotationMethodHandlerAdapter</tt>&#25552;&#20379;&#19968;&#20010;&#23450;&#21046;&#30340;bean&#37197;&#32622;&#21487;&#20197;&#20351;&#23427;&#21551;&#29992;&#65292;&#36825;&#26679;&#23601;&#35206;&#30422;&#20102;&#40664;&#35748;&#37197;&#32622;&#12290;</p><p>&#19979;&#38754;&#21462;&#33258;PetClinic&#24212;&#29992;&#30340;&#20363;&#23376;&#23637;&#31034;&#20102;&#19968;&#20010;&#20351;&#29992;<tt class="interfacename">WebBindingInitializer</tt>&#25509;&#21475;&#30340;&#33258;&#23450;&#20041;&#23454;&#29616;&#30340;&#37197;&#32622;&#8212;&#8212;<tt class="classname">org.springframework.samples.petclinic.web.ClinicBindingInitializer</tt>&#65292;
        &#23436;&#25104;&#22810;&#20010;PetClinic&#25511;&#21046;&#22120;&#37117;&#38656;&#35201;&#30340;PropertyEditors&#30340;&#37197;&#32622;&#12290;</p><pre class="programlisting">&lt;bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter"&gt;
    &lt;property name="cacheSeconds" value="0" /&gt;
    &lt;property name="webBindingInitializer"&gt;
        &lt;bean class="org.springframework.samples.petclinic.web.ClinicBindingInitializer" /&gt;
    &lt;/property&gt;
&lt;/bean&gt;
</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="mvc-resources"></a>13.13.&nbsp;&#26356;&#22810;&#36164;&#28304;</h2></div></div><div></div></div><p>&#20174;&#19979;&#38754;&#30340;&#38142;&#25509;&#21644;&#25351;&#21521;&#21487;&#20197;&#25214;&#21040;&#20851;&#20110;Spring Web MVC&#30340;&#26356;&#22810;&#36164;&#28304;&#12290;</p><div class="itemizedlist"><ul type="disc"><li><p>Spring&#21457;&#34892;&#29256;&#26412;&#38468;&#24102;&#20102;&#19968;&#20010;Spring Web MVC&#30340;&#25945;&#31243;&#65292;&#29992;&#36880;&#20010;&#27493;&#39588;&#36827;&#34892;&#30340;&#26041;&#27861;&#25351;&#23548;&#35835;&#32773;&#24320;&#21457;&#19968;&#20010;&#23436;&#25972;&#30340;&#22522;&#20110;Spring Web MVC&#30340;&#24212;&#29992;&#31243;&#24207;&#12290;&#25945;&#31243;&#20301;&#20110;Spring&#21457;&#34892;&#29256;&#26412;&#30340;&#8220;<tt class="literal">docs</tt>&#8221;&#30446;&#24405;&#12290;&#22312;&#32447;&#29256;&#26412;&#21487;&#20197;&#22312;<a href="http://springframework.org/" target="_top">Spring Framework&#32593;&#31449;</a>&#19978;&#25214;&#21040;&#12290;</p></li><li><p>Seth Ladd&#21644;&#20854;&#23427;&#20154;&#21512;&#33879;&#30340;&#8220;<span class="quote">Expert Spring Web MVC and WebFlow</span>&#8221;&#65288;&#30001;Apress&#20986;&#29256;&#65289;&#19968;&#20070;&#26159;&#19968;&#26412;&#20248;&#31168;&#30340;&#32440;&#29256;&#20316;&#21697;&#65292;&#20854;&#20013;&#23545;Spring Web MVC&#30340;&#20248;&#21183;&#20570;&#20102;&#35814;&#32454;&#20171;&#32461;&#12290;</p></li></ul></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="view"></a>Chapter&nbsp;14.&nbsp;&#38598;&#25104;&#35270;&#22270;&#25216;&#26415;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="view-introduction"></a>14.1.&nbsp;&#31616;&#20171;</h2></div></div><div></div></div><p>
			Spring&#30340;&#19968;&#20010;&#20248;&#31168;&#20043;&#22788;&#22312;&#20110;&#65292;&#25226;view&#23618;&#25216;&#26415;&#19982;MVC&#26694;&#26550;&#30340;&#20854;&#20182;&#37096;&#20998;&#20998;&#31163;&#24320;&#26469;&#12290;
			&#20363;&#22914;&#65292;&#36873;&#25321;&#20351;&#29992;Velocity&#25110;&#32773;XSLT&#26469;&#20195;&#26367;&#24050;&#26377;&#30340;JSP&#26041;&#24335;&#21482;&#38656;&#35201;&#20462;&#25913;&#37197;&#32622;&#23601;&#21487;&#20197;&#23454;&#29616;&#12290;
			&#26412;&#31456;&#28085;&#30422;&#20102;&#21644;Spring&#21327;&#21516;&#24037;&#20316;&#30340;&#20027;&#27969;view&#23618;&#25216;&#26415;&#24182;&#31616;&#35201;&#20171;&#32461;&#20102;&#22914;&#20309;&#22686;&#21152;&#26032;&#30340;&#26041;&#24335;&#12290; &#36825;&#37324;&#20551;&#35774;&#20320;&#24050;&#32463;&#29087;&#24713;
			<a href="#mvc-viewresolver" title="13.5.&nbsp;&#35270;&#22270;&#19982;&#35270;&#22270;&#35299;&#26512;">Section&nbsp;13.5, &#8220;&#35270;&#22270;&#19982;&#35270;&#22270;&#35299;&#26512;&#8221;</a>
			&#20013;&#8220;mvc-view resolver&#8221;&#30340;&#30693;&#35782;&#65292;&#37027;&#37324;&#35762;&#36848;&#20102;view&#23618;&#19982;MVC&#26694;&#26550;&#21327;&#20316;&#30340;&#22522;&#30784;&#12290;
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="view-jsp"></a>14.2.&nbsp;JSP&#21644;JSTL</h2></div></div><div></div></div><p>
			Spring&#20026;JSP&#21644;JSTL&#36825;&#20123;view&#23618;&#25216;&#26415;&#25552;&#20379;&#20102;&#20960;&#20010;&#21363;&#21462;&#21363;&#29992;&#30340;&#35299;&#20915;&#26041;&#26696;&#12290; &#20351;&#29992;JSP&#21644;JSTL&#30340;&#35805;&#65292;&#37319;&#29992;
			<tt class="interfacename">WebApplicationContext</tt>
			&#20013;&#23450;&#20041;&#30340;&#26222;&#36890;&#35270;&#22270;&#35299;&#26512;&#22120;&#21363;&#21487;&#65307;&#24403;&#28982;&#65292;&#36824;&#38656;&#35201;&#33258;&#34892;&#32534;&#20889;&#19968;&#20123;&#23454;&#38469;&#20570;&#28210;&#26579;&#30340;JSP&#39029;&#38754;&#12290;
			&#26412;&#31456;&#20171;&#32461;&#20102;&#19968;&#20123;Spring&#25552;&#20379;&#30340;&#29992;&#20110;&#31616;&#21270;JSP&#24320;&#21457;&#30340;&#39069;&#22806;&#29305;&#24615;&#12290;
		</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="view-jsp-resolver"></a>14.2.1.&nbsp;&#35270;&#22270;&#35299;&#26512;&#22120;</h3></div></div><div></div></div><p>
				&#19982;&#22312;Spring&#20013;&#37319;&#29992;&#30340;&#20219;&#20309;&#20854;&#20182;&#35270;&#22270;&#25216;&#26415;&#19968;&#26679;&#65292;&#20351;&#29992;JSP&#26041;&#24335;&#38656;&#35201;&#19968;&#20010;&#29992;&#26469;&#35299;&#26512;&#35270;&#22270;&#30340;&#35270;&#22270;&#35299;&#26512;&#22120;&#65292;
				&#24120;&#29992;&#30340;&#26159;&#22312;<tt class="interfacename">WebApplicationContext</tt>
				&#20013;&#23450;&#20041;&#30340;<tt class="classname">InternalResourceViewResolver</tt>&#21644;
				<tt class="classname">ResourceBundleViewResolver</tt>&#12290;
			</p><pre class="programlisting">				<i class="lineannotation"><span class="lineannotation">
					&lt;!-- the
					<tt class="classname">ResourceBundleViewResolver</tt>
					--&gt;
				</span></i>
				
&lt;bean id="viewResolver" class="org.springframework.web.servlet.view.ResourceBundleViewResolver"&gt;
  &lt;property name="basename" value="views"/&gt;
&lt;/bean&gt;

<i class="lineannotation"><span class="lineannotation">
					# And a sample properties file is uses
					(views.properties in WEB-INF/classes):
</span></i>
				
welcome.class=org.springframework.web.servlet.view.JstlView
welcome.url=/WEB-INF/jsp/welcome.jsp

productList.class=org.springframework.web.servlet.view.JstlView
productList.url=/WEB-INF/jsp/productlist.jsp</pre><p>
				&#27491;&#22914;&#20320;&#25152;&#30475;&#21040;&#30340;&#65292;<tt class="classname">ResourceBundleViewResolver</tt>
				&#38656;&#35201;&#19968;&#20010;&#23646;&#24615;&#25991;&#20214;&#26469;&#23450;&#20041;view&#21517;&#31216;&#21040;1) class 2) URL&#30340;&#26144;&#23556;&#12290;&#20351;&#29992;
				<tt class="classname">ResourceBundleViewResolver</tt>&#65292;&#21487;&#20197;&#21482;&#20351;&#29992;&#19968;&#20010;&#35299;&#26512;&#22120;&#26469;&#28151;&#29992;&#19981;&#21516;&#31867;&#22411;&#30340;&#35270;&#22270;&#25216;&#26415;&#12290;
			</p><pre class="programlisting">&lt;bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt;
  &lt;property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/&gt;
  &lt;property name="prefix" value="/WEB-INF/jsp/"/&gt;
  &lt;property name="suffix" value=".jsp"/&gt;
&lt;/bean&gt;</pre><p>
				&#22914;&#19978;&#20363;&#25152;&#31034;&#65292; &#29992;JSP&#26102;&#21487;&#20197;&#37197;&#32622;&#19968;&#20010;
				<tt class="classname">
					InternalResourceBundleViewResolver
				</tt>&#12290; &#20316;&#20026;&#19968;&#20010;&#26368;&#20339;&#23454;&#36341;&#65292;&#25105;&#20204;&#24378;&#28872;&#25512;&#33616;&#20320;&#29992;
				<tt class="filename">WEB-INF</tt>&#19979;&#30340;&#19968;&#20010;&#30446;&#24405;&#26469;&#23384;&#25918;JSP&#25991;&#20214;&#65292;&#20174;&#32780;&#36991;&#20813;&#34987;&#23458;&#25143;&#31471;&#30452;&#25509;&#35775;&#38382;&#12290;
			</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="view-jsp-jstl"></a>14.2.2.&nbsp;
				'Plain-old' JSPs versus JSTL 'Plain-old' JSP&#19982;JSTL
			</h3></div></div><div></div></div><p>
				&#20351;&#29992;JSTL&#26102;&#65292;&#24517;&#39035;&#20351;&#29992;&#19968;&#20010;&#29305;&#21035;&#30340;view&#31867;<tt class="classname">JstlView</tt>
				&#65292;&#22240;&#20026;JSTL&#38656;&#35201;&#19968;&#20123;&#20934;&#22791;&#24037;&#20316;&#65292;&#28982;&#21518;&#20687;i18N&#36825;&#26679;&#30340;&#29305;&#24615;&#25165;&#33021;&#24037;&#20316;&#12290;
			</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="view-jsp-tags"></a>14.2.3.&nbsp;&#24110;&#21161;&#31616;&#21270;&#24320;&#21457;&#30340;&#39069;&#22806;&#30340;&#26631;&#31614;</h3></div></div><div></div></div><p>
				&#21069;&#38754;&#30340;&#31456;&#33410;&#20013;&#25552;&#21040;&#36807;&#65292;Spring&#25552;&#20379;&#20102;&#20174;&#35831;&#27714;&#21442;&#25968;&#21040;&#21629;&#20196;&#23545;&#35937;&#30340;&#25968;&#25454;&#32465;&#23450;&#12290;&#20026;&#20102;&#31616;&#21270;&#19982;&#25968;&#25454;&#32465;&#23450;&#29305;&#24615;&#37197;&#21512;&#20351;&#29992;&#30340;JSP&#39029;&#38754;&#30340;&#24320;&#21457;&#65292;Spring&#25552;&#20379;&#20102;&#19968;&#20123;&#26631;&#31614;&#35753;&#20107;&#24773;&#21464;&#24471;&#26356;&#31616;&#21333;&#12290;&#36825;&#20123;&#26631;&#31614;&#37117;&#25552;&#20379;&#20102;
				<span class="emphasis"><em>html escaping</em></span>&#30340;&#29305;&#24615;&#65292;&#33021;&#22815;&#25171;&#24320;&#25110;&#20851;&#38381;&#23383;&#31526;&#36716;&#30721;&#30340;&#21151;&#33021;&#12290;
			</p><p>
				<tt class="filename">spring.jar</tt>
				&#21253;&#21547;&#20102;&#26631;&#31614;&#24211;&#25551;&#36848;&#31526;(TLD)&#65292;&#23601;&#22909;&#20687;&#23427;&#33258;&#24049;&#30340;tag&#12290;&#20851;&#20110;&#27599;&#20010;tag&#30340;&#26356;&#22810;&#36164;&#26009;&#35831;&#21442;&#38405;&#38468;&#24405;<a href="#spring.tld" title="Appendix&nbsp;D.&nbsp;spring.tld">Appendix&nbsp;D, <i>spring.tld</i></a>&#12290;
			</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="view-tiles"></a>14.3.&nbsp;Tiles</h2></div></div><div></div></div><p>
			&#22312;&#20351;&#29992;&#20102;Spring&#30340;web&#39033;&#30446;&#20013;&#65292;&#24456;&#21487;&#33021;&#20250;&#29992;&#21040;Tiles&#65293;&#65293;&#23601;&#20687;&#20219;&#20309;&#20854;&#23427;&#30340;web&#23618;&#25216;&#26415;&#12290;&#19979;&#38754;&#31616;&#35201;&#35762;&#36848;&#20102;&#22914;&#20309;&#20351;&#29992;&#12290;
		</p><p>
			<span class="emphasis"><em>&#27880;&#24847;&#65306;</em></span>
			&#36825;&#37096;&#20998;&#37325;&#28857;&#22312;&#20110;Spring&#20013;&#30340;
			<tt class="literal">
				org.springframework.web.servlet.view.tiles2
			</tt>
			&#21253;&#23545;Tiles 2&#65288;Tiles&#29420;&#31435;&#29256;&#26412;&#65292;&#35201;&#27714;Java 5+&#65289;&#30340;&#25903;&#25345;&#12290;&#22312;&#26368;&#21021;&#30340;
			<tt class="literal">
				org.springframework.web.servlet.view.tiles
			</tt>
			&#21253;&#20013;Spring&#21516;&#26679;&#32487;&#32493;&#25903;&#25345;Tiles 1.x&#65288;&#20063;&#21487;&#20197;&#21483;&#8220;Struts Tiles&#8221;&#65292;&#20316;&#20026;Struts 1.1+&#30340;&#25104;&#21592;&#65307;&#20860;&#23481; Java 1.4&#65289;&#12290;
		</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="view-tiles-dependencies"></a>14.3.1.&nbsp;&#38656;&#35201;&#30340;&#36164;&#28304;</h3></div></div><div></div></div><p>&#20351;&#29992;Tiles&#39033;&#30446;&#20013;&#24517;&#39035;&#24471;&#21253;&#21547;&#19968;&#20123;&#39069;&#22806;&#30340;&#36164;&#28304;&#65292;&#20197;&#19979;&#26159;&#20320;&#38656;&#35201;&#30340;&#36164;&#28304;&#21015;&#34920;&#65306;</p><p>
				</p><div class="itemizedlist"><ul compact="compact" type="disc"><li><p>
							<tt class="literal">Tiles version 2.0.4&#20197;&#21450;&#26356;&#39640;&#29256;&#26412;</tt>
						</p></li><li><p>
							<tt class="literal">Commons BeanUtils</tt>
						</p></li><li><p>
							<tt class="literal">Commons Digester</tt>
						</p></li><li><p>
							<tt class="literal">Commons Logging</tt>
						</p></li></ul></div><p>
			</p><p>&#36825;&#20123;&#36164;&#28304;&#20840;&#37096;&#21253;&#21547;&#20110;Spring&#30340;&#21457;&#34892;&#21253;&#20013;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="view-tiles-integrate"></a>14.3.2.&nbsp;&#22914;&#20309;&#38598;&#25104;Tiles</h3></div></div><div></div></div><p>
				&#20351;&#29992;Tiles&#65292;&#20320;&#24517;&#39035;&#20026;&#23427;&#37197;&#32622;&#19968;&#20123;&#21253;&#21547;&#20102;&#23450;&#20041;&#20449;&#24687;&#30340;&#25991;&#20214;&#65288;&#20851;&#20110;Tiles&#23450;&#20041;&#21644;&#20854;&#20182;&#27010;&#24565;&#30340;&#20449;&#24687;&#65292;&#21487;&#20197;&#21442;&#32771;
				<a href="http://tiles.apache.org/" target="_top">http://tiles.apache.org</a>&#65289;&#12290;&#22312;Spring&#20013;&#65292;&#21487;&#20197;&#20351;&#29992;
				<tt class="classname">TilesConfigurer</tt>&#26469;&#23436;&#25104;&#36825;&#39033;&#24037;&#20316;&#12290;&#30475;&#30475;&#19979;&#38754;&#36825;&#20010;&#24212;&#29992;&#19978;&#19979;&#25991;&#37197;&#32622;&#30340;&#20363;&#23376;&#65306;
			</p><pre class="programlisting">&lt;bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles2.TilesConfigurer"&gt;
  &lt;property name="definitions"&gt;
    &lt;list&gt;
      &lt;value&gt;/WEB-INF/defs/general.xml&lt;/value&gt;
      &lt;value&gt;/WEB-INF/defs/widgets.xml&lt;/value&gt;
      &lt;value&gt;/WEB-INF/defs/administrator.xml&lt;/value&gt;
      &lt;value&gt;/WEB-INF/defs/customer.xml&lt;/value&gt;
      &lt;value&gt;/WEB-INF/defs/templates.xml&lt;/value&gt;
    &lt;/list&gt;
  &lt;/property&gt;
&lt;/bean&gt;</pre><p>
				&#27491;&#22914;&#20320;&#25152;&#30475;&#21040;&#30340;&#65292;&#26377;&#20116;&#20010;&#21253;&#21547;&#23450;&#20041;&#30340;&#25991;&#20214;&#65292;&#37117;&#25918;&#22312;
				<tt class="filename">'WEB-INF/defs'</tt>
				&#30446;&#24405;&#19979;&#12290;&#22312;<tt class="interfacename">WebApplicationContext</tt>
				&#21021;&#22987;&#21270;&#30340;&#38454;&#27573;&#65292;&#36825;&#20123;&#25991;&#20214;&#34987;&#21152;&#36733;&#65292;&#21516;&#26102;&#30001;
				<tt class="literal">factoryClass</tt>
				&#23646;&#24615;&#23450;&#20041;&#30340;&#24037;&#21378;&#31867;&#34987;&#21021;&#22987;&#21270;&#12290;&#28982;&#21518;&#65292;&#23450;&#20041;&#25991;&#20214;&#20013;&#30340;tiles&#21487;&#20197;&#20570;&#20026;views&#22312;Spring&#30340;web
				&#39033;&#30446;&#20013;&#20351;&#29992;&#12290;&#20026;&#20351;views&#27491;&#24120;&#24037;&#20316;&#65292;&#20320;&#24517;&#39035;&#26377;&#19968;&#20010;
				<tt class="interfacename">ViewResolver</tt>&#65292;&#23601;&#20687;&#20351;&#29992;spring&#25552;&#20379;&#30340;&#20219;&#20309;&#20854;&#23427;view&#23618;&#25216;&#26415;&#19968;&#26679;&#12290;&#23427;&#26377;&#20108;&#31181;&#36873;&#25321;&#65306;
				<tt class="classname">UrlBasedViewResolver</tt>&#21644;<tt class="classname">ResourceBundleViewResolver</tt>&#12290;
			</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="view-tiles-url"></a>14.3.2.1.&nbsp;
					<tt class="classname">UrlBasedViewResolver</tt>&#31867;
				</h4></div></div><div></div></div><p>
					<tt class="classname">UrlBasedViewResolver</tt>
					&#20026;&#23427;&#35299;&#26512;&#30340;&#27599;&#20010;view&#23454;&#20363;&#21270;&#19968;&#20010;<tt class="literal">viewClass</tt>&#31867;&#30340;&#23454;&#20363;&#12290;
				</p><pre class="programlisting">&lt;bean id="viewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver"&gt;
  &lt;property name="viewClass" value="org.springframework.web.servlet.view.tiles2.TilesView"/&gt;
&lt;/bean&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="view-tiles-resource"></a>14.3.2.2.&nbsp;
					<tt class="classname">ResourceBundleViewResolver</tt>&#31867;
				</h4></div></div><div></div></div><p>
					<tt class="classname">ResourceBundleViewResolver</tt>&#31867;
					&#38656;&#35201;&#19968;&#20010;&#23646;&#24615;&#25991;&#20214;&#65292;&#20854;&#20013;&#21253;&#21547;&#20102;&#23427;&#38656;&#35201;&#20351;&#29992;&#30340;&#35270;&#22270;&#21517;&#21644;&#35270;&#22270;&#31867;&#65306;
				</p><pre class="programlisting">&lt;bean id="viewResolver" class="org.springframework.web.servlet.view.ResourceBundleViewResolver"&gt;
  &lt;property name="basename" value="views"/&gt;
&lt;/bean&gt;</pre><pre class="programlisting">...
welcomeView.class=org.springframework.web.servlet.view.tiles2.TilesView
welcomeView.url=welcome <i class="lineannotation"><span class="lineannotation">
						(this is the name of a Tiles definition)
</span></i>
					

vetsView.class=org.springframework.web.servlet.view.tiles2.TilesView
vetsView.url=vetsView <i class="lineannotation"><span class="lineannotation">
						(again, this is the name of a Tiles definition)
</span></i>
					

findOwnersForm.class=org.springframework.web.servlet.view.JstlView
findOwnersForm.url=/WEB-INF/jsp/findOwners.jsp
...</pre><p>
					&#27491;&#22914;&#20320;&#25152;&#30475;&#21040;&#30340;&#65292;&#20351;&#29992;<tt class="classname">ResourceBundleViewResolver</tt>&#31867;&#26102;&#65292;&#20320;&#21487;&#20197;&#28151;&#29992;&#19981;&#21516;&#30340;view&#23618;&#25216;&#26415;&#12290;
				</p></div><p>
				&#27880;&#24847;&#65292;Tiles 2&#30340;<tt class="classname">TilesView</tt>
				&#31867;&#25903;&#25345; JSTL&#65288;JSP&#26631;&#20934;&#26631;&#31614;&#24211;&#65289;&#30340;&#24320;&#31665;&#21363;&#29992;&#65292;&#21516;&#26102;&#65292;&#20026;&#25903;&#25345;Tiles 1.x&#65292;&#25552;&#20379;&#19968;&#20010;&#21333;&#29420;&#30340;<tt class="classname">TilesJstlView</tt>&#23376;&#31867;&#12290;
			</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="view-tiles-preparer"></a>14.3.2.3.&nbsp;
					<tt class="classname">SimpleSpringPreparerFactory</tt>
					&#21644;
					<tt class="classname">SpringBeanPreparerFactory</tt>
				</h4></div></div><div></div></div><p>
					&#20316;&#20026;&#19968;&#20010;&#39640;&#32423;&#30340;&#29305;&#24615;&#65292;Spring&#25903;&#25345;&#20004;&#20010;&#29305;&#23450;&#30340;Tiles 2<tt class="interfacename">PreparerFactory</tt>&#23454;&#29616;&#12290;&#22914;&#20309;Tiles&#23450;&#20041;&#25991;&#20214;&#20013;&#20351;&#29992;
					<tt class="interfacename">ViewPreparer</tt>&#24341;&#29992;&#65292;&#35814;&#32454;&#36164;&#26009;&#26597;&#30475;Tiles&#25991;&#26723;&#12290;
				</p><p>
					&#22522;&#20110;&#25351;&#23450;&#30340;preparer&#31867;&#65292;&#25351;&#23450;<tt class="classname">SimpleSpringPreparerFactory</tt>
					&#33258;&#21160;&#35013;&#37197; ViewPreparer &#23454;&#20307;&#65292;&#19981;&#20294;&#24212;&#29992; Spring&#30340;&#23481;&#22120;&#22238;&#35843;&#32780;&#19988;&#24212;&#29992;&#37197;&#32622;Spring BeanPostProcessors&#12290;&#20551;&#22914;Spring&#30340;&#19978;&#19979;&#25991;&#33539;&#22260;
					annotation-config &#24050;&#32463;&#34987;&#28608;&#27963;&#65292;ViewPreparer &#31867;&#20013;&#30340;&#27880;&#35299;&#23558;&#34987;&#33258;&#21160;&#26816;&#27979;&#21040;&#21450;&#24212;&#29992;&#12290;&#27880;&#24847;&#65292;&#22312; Tiles &#23450;&#20041;&#25991;&#20214;&#20013;&#39044;&#35745;&#30340;preparer
					<span class="emphasis"><em>classes</em></span>&#65292;&#23601;&#20687;&#40664;&#35748;<tt class="classname">PreparerFactory</tt>&#25152;&#20316;&#30340;&#19968;&#26679;&#12290;
				</p><p>
					&#25351;&#23450;<tt class="classname">SpringBeanPreparerFactory</tt>&#26469;&#25805;&#20316;&#25351;&#23450;preparer<span class="emphasis"><em>&#21517;&#31216;</em></span>&#65292;&#32780;&#19981;&#26159;&#31867;&#65292;&#20174;DispatcherServlet&#30340;&#24212;&#29992;&#19978;&#19979;&#25991;
					&#33719;&#21462;&#30456;&#24212;&#30340;Spring bean&#12290;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#23436;&#25972;&#30340; bean &#21019;&#24314;&#36807;&#31243;&#23558;&#22312;Spring&#24212;&#29992;&#19978;&#19979;&#25991;&#25511;&#21046;&#20013;&#65292;&#20801;&#35768;&#26126;&#30830;&#20351;&#29992;&#20381;&#36182;&#27880;&#20837;&#65292;&#33539;&#22260;bean&#31561;&#31561;&#12290;
					&#27880;&#24847;&#65292;&#38656;&#35201;&#23450;&#20041;&#20026;&#27599;&#19968;&#20010;preparer&#21517;&#31216;&#23450;&#20041;&#19968;&#20010;Spring bean&#65288;&#29992;&#20110;Tiles&#23450;&#20041;&#20013;&#65289;&#12290;
				</p><pre class="programlisting">&lt;bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles2.TilesConfigurer"&gt;
  &lt;property name="definitions"&gt;
    &lt;list&gt;
      &lt;value&gt;/WEB-INF/defs/general.xml&lt;/value&gt;
      &lt;value&gt;/WEB-INF/defs/widgets.xml&lt;/value&gt;
      &lt;value&gt;/WEB-INF/defs/administrator.xml&lt;/value&gt;
      &lt;value&gt;/WEB-INF/defs/customer.xml&lt;/value&gt;
      &lt;value&gt;/WEB-INF/defs/templates.xml&lt;/value&gt;
    &lt;/list&gt;
  &lt;/property&gt;

  <i class="lineannotation"><span class="lineannotation">
						&lt;!-- resolving preparer names as Spring bean
						definition names --&gt;
</span></i>
					
  &lt;property name="preparerFactoryClass"
       value="org.springframework.web.servlet.view.tiles2.SpringBeanPreparerFactory"/&gt;

&lt;/bean&gt;</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="view-velocity"></a>14.4.&nbsp;Velocity&#21644;FreeMarker</h2></div></div><div></div></div><p>
			<a href="http://velocity.apache.org/" target="_top">Velocity</a>
			&#21644;<a href="http://www.freemarker.org/" target="_top">FreeMarker</a>
			&#26159;&#20004;&#31181;&#27169;&#26495;&#35821;&#35328;&#65292;&#37117;&#21487;&#20197;&#20570;&#20026;view&#23618;&#25216;&#26415;&#22312;Spring MVC &#24212;&#29992;&#20013;&#20351;&#29992;&#12290;
			&#23427;&#20204;&#30340;&#35821;&#35328;&#39118;&#26684;&#21644;&#36866;&#29992;&#23545;&#35937;&#37117;&#24456;&#30456;&#20284;&#65292;&#36825;&#37324;&#25226;&#23427;&#20204;&#25918;&#22312;&#19968;&#36215;&#35752;&#35770;&#12290;&#33267;&#20110;&#23427;&#20204;&#35821;&#20041;&#21644;&#35821;&#27861;&#19978;&#30340;&#19981;&#21516;&#65292;&#21487;&#20197;&#21442;&#32771;
			<a href="http://www.freemarker.org/" target="_top">FreeMarker</a>&#31449;&#28857;&#12290;
		</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="view-velocity-dependencies"></a>14.4.1.&nbsp;&#38656;&#35201;&#30340;&#36164;&#28304;</h3></div></div><div></div></div><p>
				&#20351;&#29992;Velocity&#25110;FreeMarker&#38656;&#35201;&#21253;&#21547;
				<tt class="filename">
					velocity-1.x.x.jar
				</tt>
				&#25110;
				<tt class="filename">
					freemarker-2.x.jar
				</tt>
				&#12290;&#21478;&#22806;Velocity&#36824;&#38656;&#35201;
				<tt class="filename">
					commons-collections.jar
				</tt>
				&#12290;&#19968;&#33324;&#25226;&#36825;&#20123;jar&#21253;&#25918;&#22312;
				<tt class="literal">WEB-INF/lib</tt>
				&#19979;&#65292;&#36825;&#26679;&#21487;&#20197;&#20445;&#35777;J2EE Server&#25214;&#21040;&#23427;&#20204;&#24182;&#21152;&#21040;web&#24212;&#29992;&#30340;classpath&#19979;&#12290;&#36825;&#37324;&#21516;&#26679;&#20551;&#35774;&#20320;&#30340;
				<tt class="filename">'WEB-INF/lib'</tt>
				&#30446;&#24405;&#19979;&#24050;&#26377;
				<tt class="filename">spring.jar</tt>
				&#65281;Spring&#30340;&#21457;&#24067;&#21253;&#20013;&#24050;&#32463;&#25552;&#20379;&#20102;&#26368;&#26032;&#30340;&#31283;&#23450;&#29256;&#26412;&#30340;Velocity&#12289;FreeMarker&#21644;commons
				collections&#65292;&#21487;&#20197;&#20174;&#30456;&#24212;&#30340;
				<tt class="filename">/lib/</tt>
				&#23376;&#30446;&#24405;&#19979;&#24471;&#21040;&#12290;&#22914;&#26524;&#20320;&#24819;&#22312;Velocity&#20013;&#20351;&#29992;Spring&#30340;dateToolAttribute&#25110;numberToolAttribute&#65292;&#37027;&#20320;&#36824;&#38656;&#35201;
				<tt class="filename">
					velocity-tools-generic-1.x.jar
				</tt>
			</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="view-velocity-contextconfig"></a>14.4.2.&nbsp;Context &#37197;&#32622;</h3></div></div><div></div></div><p>
				&#36890;&#36807;&#22312;
				<tt class="filename">'*-servlet.xml'</tt>
				&#20013;&#22686;&#21152;&#30456;&#20851;&#30340;&#37197;&#32622;bean&#65292;&#21487;&#20197;&#21021;&#22987;&#21270;&#30456;&#24212;&#30340;&#37197;&#32622;&#65292;&#22914;&#19979;&#65306;
			</p><pre class="programlisting">				<i class="lineannotation"><span class="lineannotation">
					&lt;!--
					&#35813;bean&#20351;&#29992;&#19968;&#20010;&#23384;&#25918;&#27169;&#26495;&#25991;&#20214;&#30340;&#26681;&#36335;&#24452;&#26469;&#37197;&#32622;Velocity&#29615;&#22659;&#12290;&#20320;&#20063;&#21487;&#20197;&#36890;&#36807;&#25351;&#23450;&#19968;&#20010;&#23646;&#24615;&#25991;&#20214;&#26469;&#26356;&#31934;&#32454;&#22320;&#25511;&#21046;Velocity&#65292;&#20294;&#23545;&#22522;&#20110;&#25991;&#20214;&#30340;&#27169;&#26495;&#36733;&#20837;&#26469;&#35828;&#65292;&#40664;&#35748;&#30340;&#26041;&#24335;&#24050;&#30456;&#24403;&#20581;&#20840;
					--&gt;
				</span></i>
				
&lt;bean id="velocityConfig" class="org.springframework.web.servlet.view.velocity.VelocityConfigurer"&gt;
  &lt;property name="resourceLoaderPath" value="/WEB-INF/velocity/"/&gt;
&lt;/bean&gt;

<i class="lineannotation"><span class="lineannotation">
					&lt;!--
					&#20063;&#21487;&#20197;&#25226;ResourceBundle&#25110;XML&#25991;&#20214;&#37197;&#32622;&#21040;&#35270;&#22270;&#35299;&#26512;&#22120;&#20013;&#12290;&#22914;&#26524;&#20320;&#38656;&#35201;&#26681;&#25454;Locale&#26469;&#35299;&#26512;&#19981;&#21516;&#30340;&#35270;&#22270;&#65292;&#23601;&#38656;&#35201;&#20351;&#29992;resource bundle&#35299;&#26512;&#22120;&#12290;
					--&gt;
</span></i>
				
&lt;bean id="viewResolver" class="org.springframework.web.servlet.view.velocity.VelocityViewResolver"&gt;
  &lt;property name="cache" value="true"/&gt;
  &lt;property name="prefix" value=""/&gt;
  &lt;property name="suffix" value=".vm"/&gt;
&lt;/bean&gt;</pre><pre class="programlisting">				<i class="lineannotation"><span class="lineannotation">
					&lt;!-- freemarker config --&gt;
				</span></i>
				
&lt;bean id="freemarkerConfig" class="org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer"&gt;
  &lt;property name="templateLoaderPath" value="/WEB-INF/freemarker/"/&gt;
&lt;/bean&gt;

<i class="lineannotation"><span class="lineannotation">
					&lt;!--
					&#20063;&#21487;&#20197;&#25226;ResourceBundle&#25110;XML&#25991;&#20214;&#37197;&#32622;&#21040;&#35270;&#22270;&#35299;&#26512;&#22120;&#20013;&#12290;&#22914;&#26524;&#20320;&#38656;&#35201;&#26681;&#25454;Locale&#26469;&#35299;&#26512;&#19981;&#21516;&#30340;&#35270;&#22270;&#65292;&#23601;&#38656;&#35201;&#20351;&#29992;resource bundle&#35299;&#26512;&#22120;&#12290;
					--&gt;
</span></i>
				
&lt;bean id="viewResolver" class="org.springframework.web.servlet.view.freemarker.FreeMarkerViewResolver"&gt;
  &lt;property name="cache" value="true"/&gt;
  &lt;property name="prefix" value=""/&gt;
  &lt;property name="suffix" value=".ftl"/&gt;
&lt;/bean&gt;</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>
					&#23545;&#20110;&#38750;web&#24212;&#29992;&#65292;&#20320;&#38656;&#35201;&#22312;application context&#30340;&#37197;&#32622;&#25991;&#20214;&#20013;&#22768;&#26126;
					<tt class="classname">
						VelocityConfigurationFactoryBean
					</tt>&#25110;&#32773;
					<tt class="classname">
						FreeMarkerConfigurationFactoryBean
					</tt>

				</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="view-velocity-createtemplates"></a>14.4.3.&nbsp;&#21019;&#24314;&#27169;&#26495;</h3></div></div><div></div></div><p>
				&#27169;&#26495;&#25991;&#20214;&#38656;&#35201;&#23384;&#25918;&#22312;&#37197;&#32622;<tt class="literal">*Configurer</tt>
				bean&#26102;&#25152;&#25351;&#23450;&#30340;&#30446;&#24405;&#19979;&#65292;&#23601;&#20687;&#19978;&#38754;&#30340;&#20363;&#23376;&#25152;&#31034;&#12290;
				&#36825;&#37324;&#19981;&#20934;&#22791;&#35814;&#32454;&#21465;&#36848;&#20351;&#29992;&#36825;&#20004;&#31181;&#35821;&#35328;&#21019;&#24314;&#27169;&#26495;&#30340;&#32454;&#33410;&#65292;&#20320;&#21487;&#20197;&#21442;&#32771;&#30456;&#24212;&#30340;&#31449;&#28857;&#33719;&#21462;&#37027;&#20123;&#20449;&#24687;&#12290;
				&#22914;&#26524;&#20320;&#29992;&#20102;&#25105;&#20204;&#25512;&#33616;&#30340;&#35270;&#22270;&#35299;&#26512;&#22120;&#65292;&#20320;&#20250;&#21457;&#29616;&#20174;&#36923;&#36753;&#35270;&#22270;&#21517;&#21040;&#30456;&#24212;&#27169;&#26495;&#25991;&#20214;&#30340;&#26144;&#23556;&#26041;&#24335;&#19982;&#20351;&#29992;
				<tt class="classname">InternalResourceViewResolver</tt>
				&#22788;&#29702;JSP&#26102;&#30340;&#26144;&#23556;&#26041;&#24335;&#31867;&#20284;&#12290;&#27604;&#22914;&#33509;&#20320;&#30340;&#25511;&#21046;&#22120;&#36820;&#22238;&#20102;ModelAndView&#23545;&#35937;&#65292;&#20854;&#20013;&#21253;&#21547;&#19968;&#20010;&#21483;&#20570;&#8220;welcome&#8221;&#30340;&#35270;&#22270;&#21517;&#65292;&#21017;&#35270;&#22270;&#35299;&#26512;&#22120;&#23558;&#35797;&#22270;&#26597;&#25214;
				<tt class="literal">/WEB-INF/freemarker/welcome.ftl</tt>
				&#25110;<tt class="literal">/WEB-INF/velocity/welcome.vm</tt>&#20316;&#20026;&#21512;&#36866;&#30340;&#27169;&#26495;&#12290;
			</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="view-velocity-advancedconfig"></a>14.4.4.&nbsp;&#39640;&#32423;&#37197;&#32622;</h3></div></div><div></div></div><p>
				&#20197;&#19978;&#30528;&#37325;&#20171;&#32461;&#30340;&#22522;&#26412;&#37197;&#32622;&#36866;&#21512;&#22823;&#37096;&#20998;&#24212;&#29992;&#38656;&#27714;&#65292;&#28982;&#32780;&#20173;&#28982;&#26377;&#19968;&#20123;&#19981;&#24120;&#35265;&#30340;&#25110;&#39640;&#32423;&#38656;&#27714;&#30340;&#24773;&#20917;&#65292;Spring&#25552;&#20379;&#20102;&#21478;&#22806;&#30340;&#37197;&#32622;&#36873;&#39033;&#26469;&#28385;&#36275;&#36825;&#31181;&#38656;&#27714;&#12290;
			</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="view-velocity-example-velocityproperties"></a>14.4.4.1.&nbsp;velocity.properties</h4></div></div><div></div></div><p>
					&#36825;&#20010;&#25991;&#20214;&#26159;&#21487;&#36873;&#30340;&#65292;&#19981;&#36807;&#19968;&#26086;&#25351;&#23450;&#65292;&#20854;&#25152;&#21253;&#21547;&#30340;&#20540;&#21363;&#24433;&#21709;Velocity&#36816;&#34892;&#26102;&#29366;&#24577;&#12290;&#21482;&#26377;&#24403;&#20320;&#35201;&#20570;&#19968;&#20123;&#39640;&#32423;&#37197;&#32622;&#26102;&#25165;&#38656;&#35201;&#36825;&#20010;&#25991;&#20214;&#65292;&#36825;&#26102;&#20320;&#21487;&#20197;&#22312;&#19978;&#38754;&#23450;&#20041;&#30340;
					<tt class="literal">VelocityConfigurer</tt>&#20013;&#25351;&#23450;&#23427;&#30340;&#20301;&#32622;&#12290;
				</p><pre class="programlisting">					&lt;bean id="velocityConfig"
					class="org.springframework.web.servlet.view.velocity.VelocityConfigurer"&gt;
					&lt;property name="configLocation
					value="/WEB-INF/velocity.properties"/&gt;
					&lt;/bean&gt;
				</pre><p>
					&#21478;&#19968;&#31181;&#26041;&#27861;&#65292;&#20320;&#21487;&#20197;&#30452;&#25509;&#22312;Velocity config bean&#30340;&#23450;&#20041;&#20013;&#25351;&#23450;velocity&#23646;&#24615;&#65292;&#26469;&#21462;&#20195;&#8220;configLocation&#8221;&#23646;&#24615;&#12290;
				</p><pre class="programlisting">&lt;bean id="velocityConfig" class="org.springframework.web.servlet.view.velocity.VelocityConfigurer"&gt;
  &lt;property name="velocityProperties"&gt;
    &lt;props&gt;
      &lt;prop key="resource.loader"&gt;file&lt;/prop&gt;
      &lt;prop key="file.resource.loader.class"&gt;
        org.apache.velocity.runtime.resource.loader.FileResourceLoader
      &lt;/prop&gt;
      &lt;prop key="file.resource.loader.path"&gt;${webapp.root}/WEB-INF/velocity&lt;/prop&gt;
      &lt;prop key="file.resource.loader.cache"&gt;false&lt;/prop&gt;
    &lt;/props&gt;
  &lt;/property&gt;
&lt;/bean&gt;</pre><p>
					&#20851;&#20110;Spring&#20013;Velocity&#30340;&#37197;&#32622;&#35831;&#21442;&#32771;
					<a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/ui/velocity/VelocityEngineFactory.html" target="_top">
						API&#25991;&#26723;</a>&#25110;&#32773;&#21442;&#32771;Velocity&#33258;&#36523;&#25991;&#26723;&#20013;&#30340;&#20363;&#23376;&#21644;&#23450;&#20041;&#26469;&#20102;&#35299;&#22914;&#20309;&#37197;&#32622;
					<tt class="filename">'velocity.properties'</tt>&#25991;&#20214;&#12290;
				</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="views-freemarker"></a>14.4.4.2.&nbsp;FreeMarker</h4></div></div><div></div></div><p>
					FreeMarker&#30340;'Settings'&#21644;'SharedVariables'&#37197;&#32622;&#21487;&#20197;&#36890;&#36807;&#30452;&#25509;&#35774;&#32622;
					<tt class="literal">FreeMarkerConfigurer</tt>
					&#30340;&#30456;&#24212;&#23646;&#24615;&#26469;&#20256;&#36882;&#32473;Spring&#31649;&#29702;&#30340;FreeMarker
					<tt class="literal">Configuration</tt>&#23545;&#35937;&#65292;&#20854;&#20013;
					<tt class="literal">freemarkerSettings</tt>
					&#23646;&#24615;&#38656;&#35201;&#19968;&#20010;<tt class="literal">java.util.Properties</tt>&#31867;&#22411;&#23545;&#35937;&#65292;
					<tt class="literal">freemarkerVariables</tt>&#38656;&#35201;&#19968;&#20010;
					<tt class="literal">java.util.Map</tt>&#31867;&#22411;&#23545;&#35937;&#12290;
				</p><pre class="programlisting">&lt;bean id="freemarkerConfig" class="org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer"&gt;
  &lt;property name="templateLoaderPath" value="/WEB-INF/freemarker/"/&gt;
  &lt;property name="freemarkerVariables"&gt;
    &lt;map&gt;
      &lt;entry key="xml_escape" value-ref="fmXmlEscape"/&gt;
    &lt;/map&gt;
  &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id="fmXmlEscape" class="freemarker.template.utility.XmlEscape"/&gt;</pre><p>
					&#20851;&#20110;settings&#21644;variables&#22914;&#20309;&#24433;&#21709;
					<tt class="classname">Configuration</tt>
					&#23545;&#35937;&#30340;&#32454;&#33410;&#20449;&#24687;&#65292;&#35831;&#21442;&#32771;FreeMarker&#30340;&#25991;&#26723;&#12290;
				</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="view-velocity-forms"></a>14.4.5.&nbsp;&#32465;&#23450;&#25903;&#25345;&#21644;&#34920;&#21333;&#22788;&#29702;</h3></div></div><div></div></div><p>
				Spring&#25552;&#20379;&#20102;&#19968;&#20010;&#22312;JSP&#20013;&#20351;&#29992;&#30340;&#26631;&#31614;&#24211;&#65292;&#20854;&#20013;&#21253;&#21547;&#19968;&#20010;
				<tt class="literal">&lt;spring:bind/&gt;</tt>
				&#26631;&#31614;&#65292;&#23427;&#20027;&#35201;&#29992;&#26469;&#22312;&#34920;&#21333;&#20013;&#26174;&#31034;&#25903;&#25345;&#23545;&#35937;&#65288;&#35793;&#32773;&#27880;&#65306;&#21363;&#34920;&#21333;&#25968;&#25454;&#20256;&#36755;&#23545;&#35937;&#65289;&#30340;&#25968;&#25454;&#65292;&#24182;&#22312;&#19968;&#20010;
				<tt class="literal">Validator</tt>
				&#65288;&#24037;&#20316;&#22312;Web&#23618;&#25110;&#19994;&#21153;&#36923;&#36753;&#23618;&#65289;&#26657;&#39564;&#22833;&#36133;&#26102;&#26174;&#31034;&#22833;&#36133;&#20449;&#24687;&#12290;
				&#20174;1.1&#29256;&#26412;&#24320;&#22987;&#65292;Spring&#20026;Velocity&#21644;FreeMarker&#20063;&#25552;&#20379;&#20102;&#21516;&#26679;&#30340;&#21151;&#33021;&#65292;&#32780;&#19988;&#36824;&#21478;&#22806;&#25552;&#20379;&#20102;&#20415;&#20110;&#20351;&#29992;&#30340;&#23439;&#65292;&#29992;&#26469;&#29983;&#25104;&#34920;&#21333;&#36755;&#20837;&#20803;&#32032;&#12290;
			</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="view-bind-macros"></a>14.4.5.1.&nbsp;&#29992;&#20110;&#32465;&#23450;&#30340;&#23439;</h4></div></div><div></div></div><p>					
					<tt class="literal">spring.jar</tt>&#25991;&#20214;&#20026;&#36825;&#20004;&#31181;&#35821;&#35328;&#32500;&#25252;&#20102;&#19968;&#22871;&#26631;&#20934;&#23439;&#65292;&#23545;&#20110;&#27491;&#30830;&#37197;&#32622;&#30340;&#24212;&#29992;&#65292;&#23427;&#20204;&#24635;&#26159;&#21487;&#29992;&#30340;&#12290;
				</p><p>
					&#22312;Spring&#24211;&#20013;&#23450;&#20041;&#30340;&#19968;&#20123;&#23439;&#34987;&#35748;&#20026;&#26159;&#20869;&#37096;&#30340;&#65288;&#31169;&#26377;&#30340;&#65289;&#65292;&#20294;&#24403;&#23439;&#23450;&#20041;&#20013;&#19981;&#23384;&#22312;&#36825;&#26679;&#30340;&#33539;&#22260;&#30028;&#23450;&#26102;&#65292;
					&#20250;&#20351;&#24471;&#25152;&#26377;&#30340;&#23439;&#22343;&#26159;&#21487;&#35265;&#30340;&#65292;&#33021;&#22815;&#20219;&#24847;&#35843;&#29992;&#20195;&#30721;&#21644;&#29992;&#25143;&#27169;&#26495;&#12290;&#19979;&#38754;&#30340;&#19968;&#33410;&#23558;&#38598;&#20013;&#35752;&#35770;&#27169;&#26495;&#20013;&#21487;&#20197;&#30452;&#25509;&#35843;&#29992;&#30340;&#23439;&#12290;
					&#22914;&#26524;&#24076;&#26395;&#30452;&#25509;&#26597;&#30475;&#23439;&#30340;&#20195;&#30721;&#65292;&#23427;&#20204;&#20998;&#21035;&#26159;<tt class="literal">
						org.springframework.web.servlet.view.velocity
					</tt>&#21253;&#20013;&#30340;spring.vm&#25991;&#20214;&#21644;
					<tt class="literal">
						org.springframework.web.servlet.view.freemarker
					</tt>&#21253;&#20013;&#30340;spring.ftl&#25991;&#20214;&#12290;
				</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="view-simple-binding"></a>14.4.5.2.&nbsp;&#31616;&#21333;&#32465;&#23450;</h4></div></div><div></div></div><p>
					&#22312;&#25198;&#28436;Spring&#34920;&#21333;&#25511;&#21046;&#22120;&#23545;&#24212;&#35270;&#22270;&#30340;html&#34920;&#21333;&#65288;&#25110;vm/ftl&#27169;&#26495;&#65289;&#37324;&#65292;
					&#20320;&#21487;&#20197;&#27169;&#20223;&#19979;&#38754;&#30340;&#20195;&#30721;&#26469;&#32465;&#23450;&#34920;&#21333;&#25968;&#25454;&#24182;&#26174;&#31034;&#38169;&#35823;&#20449;&#24687;&#65288;&#21644;JSP&#30340;&#24418;&#24335;&#38750;&#24120;&#30456;&#20284;&#65289;&#12290;
					&#27880;&#24847;&#40664;&#35748;&#24773;&#20917;&#19979;&#21629;&#20196;&#23545;&#35937;&#30340;&#21517;&#23383;&#26159;&#8220;command&#8221;&#65292;&#20320;&#21487;&#20197;&#22312;&#37197;&#32622;&#33258;&#24049;&#30340;&#34920;&#21333;&#25511;&#21046;&#22120;&#26102;&#36890;&#36807;&#35774;&#32622;'commandName'&#23646;&#24615;&#26469;&#35206;&#30422;&#40664;&#35748;&#20540;&#12290;
					&#20363;&#23376;&#20195;&#30721;&#22914;&#19979;&#65288;&#20854;&#20013;&#30340;<tt class="literal">personFormV</tt>
					&#21644;<tt class="literal">personFormF</tt>&#26159;&#21069;&#38754;&#23450;&#20041;&#30340;&#35270;&#22270;&#65289;&#65306;
				</p><pre class="programlisting">					&lt;!-- velocity&#23439;&#33258;&#21160;&#21487;&#29992; --&gt; &lt;html&gt; ...
					&lt;form action="" method="POST"&gt; Name:
					#springBind( "command.name" ) &lt;input type="text"
					name="${status.expression}" value="$!status.value"
					/&gt;&lt;br&gt; #foreach($error in
					$status.errorMessages) &lt;b&gt;$error&lt;/b&gt;
					&lt;br&gt; #end &lt;br&gt; ... &lt;input
					type="submit" value="submit"/&gt; &lt;/form&gt; ...
					&lt;/html&gt;
				</pre><pre class="programlisting">					&lt;!-- FreeMarker&#23439;&#24517;&#39035;&#23548;&#20837;&#21040;&#19968;&#20010;&#21517;&#31216;&#31354;&#38388;&#65292;&#36825;&#37324;&#25512;&#33616;&#20320;&#23450;&#20041;&#20026;'spring'&#31354;&#38388;
					--&gt; &lt;#import "spring.ftl" as spring /&gt;
					&lt;html&gt; ... &lt;form action=""
					method="POST"&gt; Name: &lt;@spring.bind
					"command.name" /&gt; &lt;input type="text"
					name="${spring.status.expression}"
					value="${spring.status.value?default("")}"
					/&gt;&lt;br&gt; &lt;#list
					spring.status.errorMessages as error&gt;
					&lt;b&gt;${error}&lt;/b&gt; &lt;br&gt;
					&lt;/#list&gt; &lt;br&gt; ... &lt;input
					type="submit" value="submit"/&gt; &lt;/form&gt; ...
					&lt;/html&gt;
				</pre><p>
					<tt class="literal">#springBind</tt>
					/
					<tt class="literal">&lt;@spring.bind&gt;</tt>
					&#38656;&#35201;&#19968;&#20010;'path'&#23646;&#24615;&#65292;&#26684;&#24335;&#20026;&#21629;&#20196;&#23545;&#35937;&#30340;&#21517;&#23383;&#65288;&#40664;&#35748;&#20540;&#20026;'command'&#65292;
					&#38500;&#38750;&#20320;&#22312;&#37197;&#32622;FormController&#30340;&#23646;&#24615;&#26102;&#25913;&#21464;&#23427;&#65289;&#21518;&#36319;&#22278;&#28857;&#20877;&#21152;&#19978;&#20320;&#24076;&#26395;&#32465;&#23450;&#21040;&#30340;&#21629;&#20196;&#23545;&#35937;&#30340;&#23646;&#24615;&#21517;&#12290;
					&#20320;&#20063;&#21487;&#20197;&#20351;&#29992;&#31867;&#20284;&#8220;command.address.street&#8221;&#30340;&#26684;&#24335;&#26469;&#22788;&#29702;&#23884;&#22871;&#23545;&#35937;&#12290;&#20351;&#29992;
					<tt class="literal">bind</tt>&#23439;&#26102;&#65292;HTML&#36716;&#30721;&#34892;&#20026;&#30001;web.xml&#20013;&#21517;&#20026;
					<tt class="literal">defaultHtmlEscape</tt>&#30340;ServletContext&#21442;&#25968;&#25351;&#23450;&#12290;
				</p><p>
					&#19978;&#36848;&#23439;&#30340;&#21478;&#19968;&#31181;&#21487;&#36873;&#24418;&#24335;&#26159;
					<tt class="literal">#springBindEscaped</tt>
					/
					<tt class="literal">&lt;@spring.bindEscaped&gt;</tt>
					&#65292;&#23427;&#21478;&#22806;&#25509;&#21463;&#19968;&#20010;&#24067;&#23572;&#22411;&#21442;&#25968;&#65292;&#26174;&#24335;&#25351;&#23450;&#20102;&#36755;&#20986;&#20540;&#25110;&#38169;&#35823;&#20449;&#24687;&#36825;&#20123;&#29366;&#24577;&#20449;&#24687;&#26102;&#26159;&#21542;&#20351;&#29992;HTML&#36716;&#30721;&#12290;
					&#38468;&#21152;&#30340;&#34920;&#21333;&#22788;&#29702;&#23439;&#31616;&#21270;&#20102;HTML&#36716;&#30721;&#30340;&#20351;&#29992;&#65292;&#21482;&#35201;&#26377;&#21487;&#33021;&#65292;&#20320;&#23601;&#24212;&#35813;&#20351;&#29992;&#23427;&#20204;&#12290;&#20851;&#20110;&#23427;&#20204;&#30340;&#32454;&#33410;&#23558;&#22312;&#19979;&#33410;&#35762;&#36848;&#12290;
				</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="views-form-macros"></a>14.4.5.3.&nbsp;&#34920;&#21333;&#36755;&#20837;&#29983;&#25104;&#23439;</h4></div></div><div></div></div><p>
					&#20026;&#36825;&#20004;&#31181;&#35821;&#35328;&#38468;&#21152;&#30340;&#19968;&#20123;&#24456;&#26041;&#20415;&#30340;&#23439;&#21516;&#26102;&#31616;&#21270;&#20102;&#34920;&#21333;&#32465;&#23450;&#21644;&#34920;&#21333;&#29983;&#25104;&#65288;&#21253;&#25324;&#26174;&#31034;&#26657;&#39564;&#38169;&#35823;&#20449;&#24687;&#65289;&#12290;
					&#19981;&#38656;&#35201;&#20351;&#29992;&#36825;&#20123;&#23439;&#26469;&#29983;&#25104;&#34920;&#21333;&#36755;&#20837;&#22495;&#65292;&#23427;&#20204;&#21487;&#20197;&#34987;&#28151;&#26434;&#24182;&#21305;&#37197;&#21040;&#31616;&#21333;HTML&#65292;&#25110;&#32773;&#30452;&#25509;&#35843;&#29992;&#21069;&#38754;&#35762;&#36807;&#30340;spring&#32465;&#23450;&#23439;&#12290;
				</p><p>&#19979;&#34920;&#23637;&#31034;&#20102;&#21487;&#29992;&#30340;&#23439;&#30340;VTL&#23450;&#20041;&#21644;FTL&#23450;&#20041;&#65292;&#20197;&#21450;&#23427;&#20204;&#38656;&#35201;&#30340;&#21442;&#25968;&#12290;</p><div class="table"><a name="views-macros-defs-tbl"></a><p class="title"><b>Table&nbsp;14.1.&nbsp;&#23439;&#23450;&#20041;&#34920;</b></p><table summary="&#23439;&#23450;&#20041;&#34920;" border="1"><colgroup><col align="left"><col><col></colgroup><thead><tr><th align="center">macro</th><th align="center">
									VTL definition
								</th><th align="center">
									FTL definition
								</th></tr></thead><tbody><tr><td align="left"><span class="bold"><b>
										message
									</b></span>
									&#65288;&#36755;&#20986;&#19968;&#20010;&#26681;&#25454;code&#21442;&#25968;&#36873;&#25321;&#30340;&#36164;&#28304;&#32465;&#23450;&#23383;&#31526;&#20018;&#65289;
								</td><td><tt class="literal">
										#springMessage($code)
									</tt></td><td><tt class="literal">
										&lt;@spring.message code/&gt;
									</tt></td></tr><tr><td align="left"><span class="bold"><b>
										messageText
									</b></span>
									&#65288;&#36755;&#20986;&#19968;&#20010;&#26681;&#25454;code&#21442;&#25968;&#36873;&#25321;&#30340;&#36164;&#28304;&#32465;&#23450;&#23383;&#31526;&#20018;&#65292;&#25214;&#19981;&#21040;&#30340;&#35805;&#36755;&#20986;default&#21442;&#25968;&#30340;&#20540;&#65289;
								</td><td><tt class="literal">
										#springMessageText($code $text)
									</tt></td><td><tt class="literal">
										&lt;@spring.messageText code,
										text/&gt;
									</tt></td></tr><tr><td align="left"><span class="bold"><b>url</b></span>
									&#65288;&#22312;URL&#30456;&#23545;&#36335;&#24452;&#21069;&#38754;&#28155;&#21152;&#24212;&#29992;&#19978;&#19979;&#25991;&#26681;&#36335;&#24452;application context root&#65289;
								</td><td><tt class="literal">
										#springUrl($relativeUrl)
									</tt></td><td><tt class="literal">
										&lt;@spring.url relativeUrl/&gt;
									</tt></td></tr><tr><td align="left"><span class="bold"><b>
										formInput
									</b></span>
									&#65288;&#26631;&#20934;&#34920;&#21333;&#36755;&#20837;&#22495;&#65289;
								</td><td><tt class="literal">
										#springFormInput($path
										$attributes)
									</tt></td><td><tt class="literal">
										&lt;@spring.formInput path,
										attributes, fieldType/&gt;
									</tt></td></tr><tr><td align="left"><span class="bold"><b>
										formHiddenInput *
									</b></span>
									&#65288;&#34920;&#21333;&#38544;&#34255;&#36755;&#20837;&#22495;&#65289;
								</td><td><tt class="literal">
										#springFormHiddenInput($path
										$attributes)
									</tt></td><td><tt class="literal">
										&lt;@spring.formHiddenInput
										path, attributes/&gt;
									</tt></td></tr><tr><td align="left"><span class="bold"><b>
										formPasswordInput
									</b></span>
									*&#65288;&#26631;&#20934;&#34920;&#21333;&#23494;&#30721;&#36755;&#20837;&#22495;&#65307;&#27880;&#24847;&#19981;&#20250;&#20026;&#36825;&#31181;&#31867;&#22411;&#30340;&#36755;&#20837;&#22495;&#35013;&#37197;&#25968;&#25454;&#65289;
								</td><td><tt class="literal">
										#springFormPasswordInput($path
										$attributes)
									</tt></td><td><tt class="literal">
										&lt;@spring.formPasswordInput
										path, attributes/&gt;
									</tt></td></tr><tr><td align="left"><span class="bold"><b>
										formTextarea
									</b></span>
									&#65288;&#22823;&#22411;&#25991;&#26412;&#65288;&#33258;&#30001;&#26684;&#24335;&#65289;&#36755;&#20837;&#22495;&#65289;
								</td><td><tt class="literal">
										#springFormTextarea($path
										$attributes)
									</tt></td><td><tt class="literal">
										&lt;@spring.formTextarea path,
										attributes/&gt;
									</tt></td></tr><tr><td align="left"><span class="bold"><b>
										formSingleSelect
									</b></span>
									&#65288;&#21333;&#36873;&#21015;&#34920;&#26694;&#65289;
								</td><td><tt class="literal">
										#springFormSingleSelect( $path
										$options $attributes)
									</tt></td><td><tt class="literal">
										&lt;@spring.formSingleSelect
										path, options, attributes/&gt;
									</tt></td></tr><tr><td align="left"><span class="bold"><b>
										formMultiSelect
									</b></span>
									&#65288;&#22810;&#36873;&#21015;&#34920;&#26694;&#65289;
								</td><td><tt class="literal">
										#springFormMultiSelect($path
										$options $attributes)
									</tt></td><td><tt class="literal">
										&lt;@spring.formMultiSelect
										path, options, attributes/&gt;
									</tt></td></tr><tr><td align="left"><span class="bold"><b>
										formRadioButtons
									</b></span>
									&#65288;&#21333;&#36873;&#26694;&#65289;
								</td><td><tt class="literal">
										#springFormRadioButtons($path
										$options $separator $attributes)
									</tt></td><td><tt class="literal">
										&lt;@spring.formRadioButtons
										path, options separator,
										attributes/&gt;
									</tt></td></tr><tr><td align="left"><span class="bold"><b>
										formCheckboxes
									</b></span>
									&#65288;&#22797;&#36873;&#26694;&#65289;
								</td><td><tt class="literal">
										#springFormCheckboxes($path
										$options $separator $attributes)
									</tt></td><td><tt class="literal">
										&lt;@spring.formCheckboxes path,
										options, separator,
										attributes/&gt;
									</tt></td></tr><tr><td align="left"><span class="bold"><b>
										showErrors
									</b></span>
									&#65288;&#31616;&#21270;&#38024;&#23545;&#25152;&#32465;&#23450;&#36755;&#20837;&#22495;&#30340;&#26657;&#39564;&#38169;&#35823;&#20449;&#24687;&#36755;&#20986;&#65289;
								</td><td><tt class="literal">
										#springShowErrors($separator
										$classOrStyle)
									</tt></td><td><tt class="literal">
										&lt;@spring.showErrors
										separator, classOrStyle/&gt;
									</tt></td></tr></tbody></table></div><p>
					* &#22312;FTL&#65288;FreeMarker&#65289;&#20013;&#65292;&#36825;&#20108;&#31181;&#23439;&#23454;&#38469;&#19978;&#24182;&#19981;&#26159;&#24517;&#38656;&#30340;&#65292;&#22240;&#20026;&#20320;&#21487;&#20197;&#20351;&#29992;&#26222;&#36890;&#30340;
					<tt class="literal">formInput</tt>
					&#23439;&#65292;&#25351;&#23450;<tt class="literal">fieldType</tt>
					&#21442;&#25968;&#30340;&#20540;&#20026; '<tt class="literal">hidden</tt>
					' &#25110; '<tt class="literal">password</tt>'&#21363;&#21487; &#12290;
				</p><p>&#19978;&#38754;&#21015;&#20986;&#30340;&#25152;&#26377;&#23439;&#30340;&#21442;&#25968;&#37117;&#20855;&#26377;&#19968;&#33268;&#30340;&#21547;&#20041;&#65292;&#22914;&#19979;&#36848;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>path:&#24453;&#32465;&#23450;&#23646;&#24615;&#30340;&#21517;&#23383;&#65288;&#22914;&#65306;command.name&#65289;</p></li><li><p>
&#36873;&#39033;&#65306;&#19968;&#20010;Map&#65292;&#20854;&#20013;&#20445;&#23384;&#20102;&#25152;&#26377;&#21487;&#20174;&#36755;&#20837;&#22495;&#20013;&#36873;&#25321;&#30340;&#20540;&#12290;map&#20013;&#30340;&#38190;&#20540;&#65288;keys&#65289;&#20195;&#34920;&#23558;&#20174;&#34920;&#21333;&#32465;&#23450;&#21040;&#21629;&#20196;&#23545;&#35937;&#28982;&#21518;&#25552;&#20132;&#21040;&#21518;&#21488;&#30340;&#23454;&#20540;&#65288;values&#65289;&#12290;
&#23384;&#20648;&#22312;Map&#20013;&#30340;&#19982;&#30456;&#24212;&#38190;&#20540;&#23545;&#24212;&#30340;&#23545;&#35937;&#23601;&#26159;&#37027;&#20123;&#22312;&#34920;&#21333;&#19978;&#26174;&#31034;&#32473;&#29992;&#25143;&#30340;&#26631;&#31614;&#65292;&#23427;&#20204;&#21487;&#33021;&#19982;&#25552;&#20132;&#21040;&#21518;&#21488;&#30340;&#20540;&#19981;&#21516;&#12290;&#36890;&#24120;&#36825;&#26679;&#30340;map&#30001;&#25511;&#21046;&#22120;&#20197;&#24341;&#29992;&#25968;&#25454;&#30340;&#26041;&#24335;&#25552;
&#20379;&#12290;&#20320;&#21487;&#20197;&#26681;&#25454;&#38656;&#27714;&#30340;&#34892;&#20026;&#36873;&#25321;&#19968;&#31181;Map&#23454;&#29616;&#12290;&#27604;&#22914;&#23545;&#39034;&#24207;&#35201;&#27714;&#20005;&#26684;&#26102;&#65292;&#21487;&#20351;&#29992;&#19968;&#20010; <tt class="literal">SortedMap</tt>
							&#65292;&#22914;&#19968;&#20010;<tt class="literal">TreeMap</tt>
							&#21152;&#19978;&#36866;&#24403;&#30340;Comparator&#65307;&#23545;&#35201;&#27714;&#25353;&#25554;&#20837;&#39034;&#24207;&#36820;&#22238;&#30340;&#24773;&#20917;&#65292;&#21487;&#20197;&#20351;&#29992;commons-collections&#25552;&#20379;&#30340;
							<tt class="literal">LinkedHashMap</tt>
							&#25110;<tt class="literal">LinkedMap</tt>&#12290;
						</p></li><li><p>
							&#20998;&#38548;&#31526;&#65306;&#24403;&#20351;&#29992;&#22810;&#36873;&#30340;&#26102;&#20505;&#65288;radio buttons &#25110;&#32773; checkboxes&#65289;&#65292;&#29992;&#20110;&#22312;&#21015;&#34920;&#20013;&#20998;&#38548;&#24444;&#27492;&#30340;&#23383;&#31526;&#24207;&#21015;&#65288;&#22914; "&lt;br&gt;"&#65289;&#12290;
						</p></li><li><p>
							&#23646;&#24615;&#65306;&#19968;&#20010;&#38468;&#21152;&#30340;&#20197;&#20219;&#24847;&#26631;&#31614;&#25110;&#25991;&#26412;&#26500;&#25104;&#30340;&#23383;&#31526;&#20018;&#65292;&#20986;&#29616;&#22312;HTML&#26631;&#31614;&#20869;&#12290;&#35813;&#23383;&#31526;&#20018;&#34987;&#23439;&#29031;&#21407;&#26679;&#36755;&#20986;&#12290;&#20363;&#22914;&#65306;&#22312;&#19968;&#20010;textarea&#26631;&#31614;&#20869;&#20320;&#21487;&#33021;&#20250;&#25552;&#20379;'rows="5"
							cols="60"'&#36825;&#26679;&#30340;&#23646;&#24615;&#65292;&#25110;&#32773;&#20320;&#20250;&#20256;&#36882;'style="border:1px solid silver"'&#36825;&#26679;&#30340;&#26679;&#24335;&#20449;&#24687;&#12290;
						</p></li><li><p>
							classOrStyle&#65306;&#20379;showErrors&#23439;&#29992;&#26469;&#20197;&#36825;&#31181;&#26679;&#24335;&#26174;&#31034;&#38169;&#35823;&#20449;&#24687;&#65292;&#20854;&#20013;&#38169;&#35823;&#20449;&#24687;&#23884;&#22871;&#20110;&#20351;&#29992;&#35813;CSS&#31867;&#21517;&#30340;span&#26631;&#31614;&#20869;&#12290;&#22914;&#26524;&#19981;&#25552;&#20379;&#25110;&#20869;&#23481;&#20026;&#31354;&#65292;&#21017;&#38169;&#35823;&#20449;&#24687;&#23884;&#22871;&#20110;&lt;b&gt;&lt;/b&gt;&#26631;&#31614;&#20869;&#12290;
						</p></li></ul></div><p>
					&#23439;&#30340;&#20363;&#23376;&#22312;&#19979;&#38754;&#25551;&#36848;&#65292;&#20854;&#20013;&#19968;&#20123;&#26159;FTL&#30340;&#65292;&#19968;&#20123;&#26159;VTL&#30340;&#12290;&#20004;&#31181;&#35821;&#35328;&#20043;&#38388;&#30340;&#29992;&#27861;&#24046;&#21035;&#22312;&#26049;&#27880;&#20013;&#35299;&#37322;&#12290;
				</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e27293"></a>14.4.5.3.1.&nbsp;&#36755;&#20837;&#22495;</h5></div></div><div></div></div><p>
						</p><pre class="programlisting">							&lt;!-- &#19978;&#38754;&#25552;&#21040;&#30340;Name&#22495;&#30340;&#20363;&#23376;&#65292;&#20351;&#29992;VTL&#20013;&#23450;&#20041;&#30340;&#34920;&#21333;&#23439; --&gt;
							... Name: #springFormInput("command.name"
							"")&lt;br&gt; #springShowErrors("&lt;br&gt;"
							"")&lt;br&gt;
						</pre><p>
					</p><p>
formInput&#23439;&#25509;&#21463;&#19968;&#20010;path&#21442;&#25968;&#65288;command.name&#65289;&#21644;&#19968;&#20010;&#38468;&#21152;&#30340;&#23646;&#24615;&#21442;&#25968;&#65288;&#22312;&#19978;&#20363;&#20013;&#20026;&#31354;&#65289;&#12290;&#35813;&#23439;&#19982;&#25152;&#26377;&#20854;&#20182;&#34920;&#21333;&#29983;&#25104;&#23439;&#19968;&#26679;&#65292;&#23545;
path&#21442;&#25968;&#20195;&#34920;&#30340;&#23646;&#24615;&#23454;&#26045;&#19968;&#31181;&#38544;&#24335;&#32465;&#23450;&#65292;&#36825;&#31181;&#32465;&#23450;&#20445;&#25345;&#26377;&#25928;&#29366;&#24577;&#30452;&#21040;&#19968;&#27425;&#26032;&#30340;&#32465;&#23450;&#24320;&#22987;&#65292;&#25152;&#20197;showErrors&#23439;&#19981;&#20877;&#38656;&#35201;&#20256;&#36882;path&#21442;&#25968;&#8212;&#8212;&#23427;&#31616;&#21333;&#22320;
&#25805;&#20316;&#26368;&#36817;&#19968;&#27425;&#32465;&#23450;&#30340;&#23646;&#24615;&#65288;field&#65289;&#12290; </p><p>
						showErrors&#23439;&#25509;&#21463;&#20004;&#20010;&#21442;&#25968;&#65306;&#20998;&#38548;&#31526;&#65288;&#29992;&#20110;&#20998;&#38548;&#22810;&#26465;&#38169;&#35823;&#20449;&#24687;&#30340;&#23383;&#31526;&#20018;&#65289;&#21644;CSS&#31867;&#21517;&#25110;&#26679;&#24335;&#23646;&#24615;&#12290;&#27880;&#24847;&#22312;FreeMarker&#20013;&#21487;&#20197;&#20026;&#23646;&#24615;&#21442;&#25968;&#25351;&#23450;&#40664;&#35748;&#20540;&#65288;&#36825;&#28857;&#20799;Velocity&#20570;&#19981;&#21040;&#65289;&#12290;&#19978;&#38754;&#30340;&#20004;&#20010;&#23439;&#35843;&#29992;&#22312;FTL&#20013;&#21487;&#20197;&#36825;&#20040;&#34920;&#36798;&#65306;
					</p><pre class="programlisting">						&lt;@spring.formInput "command.name"/&gt;
						&lt;@spring.showErrors "&lt;br&gt;"/&gt;
					</pre><p>
						&#19978;&#38754;&#23637;&#31034;&#30340;&#29992;&#20110;&#29983;&#25104;name&#34920;&#21333;&#36755;&#20837;&#22495;&#30340;&#20195;&#30721;&#29255;&#26029;&#20135;&#29983;&#30340;&#36755;&#20986;&#22914;&#19979;&#65292;&#21516;&#26102;&#36824;&#26174;&#31034;&#20102;&#36755;&#20837;&#20540;&#20026;&#31354;&#30340;&#24773;&#20917;&#19979;&#25552;&#20132;&#34920;&#21333;&#21518;&#20135;&#29983;&#30340;&#26657;&#39564;&#38169;&#35823;&#20449;&#24687;&#65288;&#26657;&#39564;&#36807;&#31243;&#30001;Spring&#30340;&#39564;&#35777;&#26694;&#26550;&#25552;&#20379;&#65289;&#12290;
					</p><p>&#29983;&#25104;&#30340;HTML&#22914;&#19979;&#65306;</p><pre class="programlisting">						Name: &lt;input type="text" name="name" value=""
						&gt; &lt;br&gt; &lt;b&gt;required&lt;/b&gt;
						&lt;br&gt; &lt;br&gt;
					</pre><p>&#21442;&#25968;&#65288;&#23646;&#24615;&#65289;&#29992;&#26469;&#21521;textarea&#20256;&#36882;&#26679;&#24335;&#20449;&#24687;&#25110;&#34892;&#21015;&#25968;&#23646;&#24615;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e27315"></a>14.4.5.3.2.&nbsp;&#36873;&#25321;&#36755;&#20837;&#22495;</h5></div></div><div></div></div><p>&#26377;&#22235;&#31181;&#29992;&#20110;&#22312;HTML&#34920;&#21333;&#20013;&#29983;&#25104;&#36890;&#29992;&#36873;&#25321;&#36755;&#20837;&#26694;&#30340;&#23439;&#12290;</p><div class="itemizedlist"><ul type="disc"><li><p>formSingleSelect</p></li><li><p>formMultiSelect</p></li><li><p>formRadioButtons</p></li><li><p>formCheckboxes</p></li></ul></div><p>
						&#27599;&#20010;&#23439;&#37117;&#23558;&#25509;&#21463;&#19968;&#20010;&#30001;&#36873;&#39033;&#20540;&#21644;&#36873;&#39033;&#26631;&#31614;&#30340;&#38598;&#21512;&#26500;&#25104;&#30340;Map&#65292;&#20854;&#20013;&#36873;&#39033;&#20540;&#21644;&#20854;&#26631;&#31614;&#21487;&#20197;&#30456;&#21516;&#12290;
					</p><p>
						&#19979;&#38754;&#23637;&#31034;&#20102;&#19968;&#20010;&#22312;FTL&#20013;&#20351;&#29992;radio&#25353;&#38062;&#30340;&#20363;&#23376;&#12290;&#34920;&#21333;&#25903;&#25745;&#23545;&#35937;&#65288;form backing
						object&#65289;&#25552;&#20379;&#20102;&#19968;&#20010;&#40664;&#35748;&#20540;'London'&#65292;&#25152;&#20197;&#35813;&#22495;&#19981;&#38656;&#35201;&#26657;&#39564;&#12290;&#24403;&#28210;&#26579;&#34920;&#21333;&#26102;&#65292;&#25972;&#20010;&#24453;&#23637;&#29616;&#30340;&#22478;&#24066;&#21015;&#34920;&#30001;&#27169;&#22411;&#23545;&#35937;&#30340;'cityMap'&#23646;&#24615;&#20197;&#24341;&#29992;&#25968;&#25454;&#30340;&#26041;&#24335;&#25552;&#20379;&#12290;
					</p><pre class="programlisting">						... Town: &lt;@spring.formRadioButtons
						"command.address.town", cityMap, ""
						/&gt;&lt;br&gt;&lt;br&gt;
					</pre><p>
						&#36825;&#23558;&#20135;&#29983;&#19968;&#34892;radio&#25353;&#38062;&#8212;&#8212;
						<tt class="literal">cityMap</tt>
&#20013;&#19968;&#20010;&#20540;&#23545;&#24212;&#19968;&#20010;&#25353;&#38062;&#65292;&#24182;&#20197;""&#20998;&#38548;&#12290;&#27809;&#26377;&#39069;&#22806;&#30340;&#23646;&#24615;&#65292;&#22240;&#20026;&#23439;&#30340;&#26368;&#21518;&#19968;&#20010;&#21442;&#25968;&#19981;&#23384;&#22312;&#12290;cityMap&#20013;&#25152;&#26377;&#30340;key-value&#37117;&#20351;&#29992;String&#31867;&#22411;
&#20540;&#12290;map&#20013;&#30340;key&#29992;&#20316;&#36755;&#20837;&#22495;&#30340;&#20540;&#65288;&#23558;&#34987;&#20316;&#20026;&#35831;&#27714;&#21442;&#25968;&#20540;&#25552;&#20132;&#21040;&#21518;&#21488;&#65289;&#65292;value&#29992;&#20316;&#26174;&#31034;&#32473;&#29992;&#25143;&#30340;&#26631;&#31614;&#12290;&#19978;&#36848;&#31034;&#20363;&#20013;&#65292;&#34920;&#21333;&#25903;&#25745;&#23545;&#35937;&#25552;&#20379;&#20102;&#19968;&#20010;&#40664;&#35748;&#20540;&#20197;&#21450;
&#19977;&#20010;&#33879;&#21517;&#22478;&#24066;&#20316;&#20026;&#21487;&#36873;&#20540;&#65292;&#23427;&#20135;&#29983;&#30340;HTML&#20195;&#30721;&#22914;&#19979;&#65306; </p><pre class="programlisting">						Town: &lt;input type="radio" name="address.town"
						value="London"&gt; London &lt;input type="radio"
						name="address.town" value="Paris"
						checked="checked"&gt; Paris &lt;input
						type="radio" name="address.town" value="New
						York"&gt; New York
					</pre><p>&#22914;&#26524;&#20320;&#24076;&#26395;&#22312;&#24212;&#29992;&#20013;&#25353;&#29031;&#20869;&#37096;&#20195;&#30721;&#26469;&#22788;&#29702;&#22478;&#24066;&#65292;&#20320;&#24471;&#20197;&#36866;&#24403;&#30340;&#38190;&#20540;&#21019;&#24314;map&#65292;&#22914;&#19979;&#65306;</p><pre class="programlisting">						protected Map referenceData(HttpServletRequest
						request) throws Exception { Map cityMap = new
						LinkedHashMap(); cityMap.put("LDN", "London");
						cityMap.put("PRS", "Paris"); cityMap.put("NYC",
						"New York");

						Map m = new HashMap(); m.put("cityMap",
						cityMap); return m; }
					</pre><p>
						&#29616;&#22312;&#19978;&#36848;&#20195;&#30721;&#23558;&#20135;&#29983;&#20986;&#20197;&#30456;&#20851;&#20195;&#30721;&#20026;&#20540;&#30340;radio&#25353;&#38062;&#65292;&#21516;&#26102;&#20320;&#30340;&#29992;&#25143;&#20173;&#33021;&#30475;&#21040;&#23545;&#20182;&#20204;&#26174;&#31034;&#21451;&#22909;&#30340;&#22478;&#24066;&#21517;&#12290;
					</p><pre class="programlisting">						Town: &lt;input type="radio" name="address.town"
						value="LDN"&gt; London &lt;input type="radio"
						name="address.town" value="PRS"
						checked="checked"&gt; Paris &lt;input
						type="radio" name="address.town" value="NYC"&gt;
						New York
					</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e27354"></a>14.4.5.4.&nbsp;&#37325;&#36733;HTML&#36716;&#30721;&#34892;&#20026;&#24182;&#20351;&#20320;&#30340;&#26631;&#31614;&#31526;&#21512;XHTML</h4></div></div><div></div></div><p>
&#32570;&#30465;&#24773;&#20917;&#19979;&#20351;&#29992;&#19978;&#38754;&#36825;&#20123;&#23439;&#23558;&#20135;&#29983;&#31526;&#21512;HTML
4.01&#26631;&#20934;&#30340;&#26631;&#31614;&#65292;&#24182;&#19988;Spring&#30340;&#32465;&#23450;&#25903;&#25345;&#20351;&#29992;web.xml&#20013;&#23450;&#20041;&#30340;HTML&#36716;&#30721;&#34892;&#20026;&#12290;&#20026;&#20102;&#20135;&#29983;&#31526;&#21512;XHTML&#26631;&#20934;&#30340;&#26631;&#31614;&#20197;&#21450;&#35206;&#30422;&#40664;&#35748;&#30340;HTML
&#36716;&#30721;&#34892;&#20026;&#65292;&#20320;&#21487;&#20197;&#22312;&#20320;&#30340;&#27169;&#26495;&#65288;&#25110;&#32773;&#27169;&#26495;&#21487;&#35265;&#30340;&#27169;&#22411;&#23545;&#35937;&#65289;&#20013;&#25351;&#23450;&#20004;&#20010;&#21464;&#37327;&#12290;&#22312;&#27169;&#26495;&#20013;&#25351;&#23450;&#30340;&#22909;&#22788;&#26159;&#31245;&#21518;&#30340;&#27169;&#26495;&#22788;&#29702;&#20013;&#21487;&#20197;&#20026;&#34920;&#21333;&#20013;&#19981;&#21516;&#30340;&#22495;&#25351;&#23450;&#19981;&#21516;&#30340;&#34892;&#20026;&#12290; </p><p>
					&#35201;&#20999;&#25442;&#21040;&#31526;&#21512;XHTML&#30340;&#36755;&#20986;&#65292;&#20320;&#21487;&#20197;&#35774;&#32622;model/context&#21464;&#37327;xhtmlCompliant&#30340;&#20540;&#20026;true&#65306;
				</p><pre class="programlisting">					## for Velocity.. #set($springXhtmlCompliant = true)

					&lt;#-- for FreeMarker --&gt; &lt;#assign
					xhtmlCompliant = true in spring&gt;
				</pre><p>&#22312;&#36827;&#34892;&#23436;&#36825;&#20123;&#22788;&#29702;&#20043;&#21518;&#65292;&#30001;Spring&#23439;&#20135;&#29983;&#30340;&#25152;&#26377;&#26631;&#31614;&#37117;&#31526;&#21512;XHTML&#26631;&#20934;&#20102;&#12290;</p><p>&#31867;&#20284;&#22320;&#65292;&#21487;&#20197;&#20026;&#27599;&#20010;&#36755;&#20837;&#22495;&#25351;&#23450;HTML&#36716;&#30721;&#34892;&#20026;&#65306;</p><pre class="programlisting">					&lt;#-- &#35813;&#21477;&#35206;&#30422;&#40664;&#35748;HTML&#36716;&#30721;&#34892;&#20026; --&gt;

					&lt;#assign htmlEscape = true in spring&gt; &lt;#--
					next field will use HTML escaping --&gt;
					&lt;@spring.formInput "command.name" /&gt;

					&lt;#assign htmlEscape = false in spring&gt; &lt;#--
					all future fields will be bound with HTML escaping
					off --&gt;
				</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="view-xslt"></a>14.5.&nbsp;XSLT</h2></div></div><div></div></div><p>
			XSLT&#26159;&#19968;&#31181;&#29992;&#20110;XML&#30340;&#36716;&#25442;&#35821;&#35328;&#65292;&#24182;&#20316;&#20026;&#19968;&#31181;&#22312;web&#24212;&#29992;&#20013;&#20351;&#29992;&#30340;view&#23618;&#25216;&#26415;&#24191;&#20026;&#20154;&#30693;&#12290;
			&#22914;&#26524;&#20320;&#30340;&#24212;&#29992;&#26412;&#26469;&#23601;&#35201;&#22788;&#29702;XML&#65292;&#25110;&#32773;&#27169;&#22411;&#25968;&#25454;&#21487;&#20197;&#24456;&#23481;&#26131;&#36716;&#21270;&#20026;XML&#65292;&#37027;&#20040;XSLT&#26159;&#19968;&#20010;&#24456;&#22909;&#30340;&#36873;&#25321;&#12290;
			&#19979;&#38754;&#30340;&#20869;&#23481;&#23637;&#31034;&#20102;&#22312;&#19968;&#20010;Spring MVC &#24212;&#29992;&#20013;&#22914;&#20309;&#29983;&#25104;XML&#26684;&#24335;&#30340;&#27169;&#22411;&#25968;&#25454;&#65292;&#24182;&#29992;XSLT&#36827;&#34892;&#36716;&#25442;&#12290;
		</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="view-xslt-firstwords"></a>14.5.1.&nbsp;&#20889;&#22312;&#27573;&#39318;</h3></div></div><div></div></div><p>
				&#36825;&#26159;&#19968;&#20010;&#24456;&#23567;&#30340;Spring&#24212;&#29992;&#30340;&#20363;&#23376;&#65292;&#23427;&#21482;&#26159;&#22312;
				<tt class="interfacename">Controller</tt>
				&#20013;&#21019;&#24314;&#19968;&#20010;&#35789;&#35821;&#21015;&#34920;&#65292;&#24182;&#23558;&#23427;&#20204;&#21152;&#33267;&#27169;&#22411;&#25968;&#25454;&#65288;model map&#65289;&#12290;&#27169;&#22411;&#25968;&#25454;&#21644;&#25105;&#20204;&#30340;XSLT&#35270;&#22270;&#21517;&#19968;&#21516;&#36820;&#22238;&#12290;
				&#35831;&#21442;&#32771;<a href="#mvc-controller" title="13.3.&nbsp;&#25511;&#21046;&#22120;">Section&nbsp;13.3, &#8220;&#25511;&#21046;&#22120;&#8221;</a>
				&#20013;&#20851;&#20110;Spring MVC<tt class="interfacename">Controller</tt>
				&#25509;&#21475;&#30340;&#32454;&#33410;&#12290;XSLT&#35270;&#22270;&#25226;&#35789;&#35821;&#21015;&#34920;&#36716;&#21270;&#20026;&#19968;&#27573;&#31616;&#21333;XML&#65292;&#31561;&#24453;&#21518;&#32493;&#36716;&#25442;&#12290;
			</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="view-xslt-beandefs"></a>14.5.1.1.&nbsp;Bean &#23450;&#20041;</h4></div></div><div></div></div><p>
					&#36825;&#26159;&#19968;&#20010;&#31616;&#21333;&#30340;Spring&#24212;&#29992;&#30340;&#26631;&#20934;&#37197;&#32622;&#12290;dispatcher servlet&#37197;&#32622;&#25991;&#20214;&#21253;&#21547;&#19968;&#20010;&#25351;&#21521;
					<tt class="interfacename">ViewResolver</tt>&#30340;&#24341;&#29992;&#12289;URL&#26144;&#23556;&#21644;&#19968;&#20010;&#31616;&#21333;&#30340;&#23454;&#29616;&#20102;&#25105;&#20204;&#30340;&#35789;&#35821;&#29983;&#25104;&#36923;&#36753;&#30340;controller bean&#65306;
				</p><pre class="programlisting">&lt;bean id="homeController"class="xslt.HomeController"/&gt;</pre><p>&#23427;&#23454;&#29616;&#20102;&#25105;&#20204;&#30340;&#35789;&#35821;&#29983;&#25104;&#8220;&#36923;&#36753;&#8221;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="view-xslt-controllercode"></a>14.5.1.2.&nbsp;&#26631;&#20934;MVC&#25511;&#21046;&#22120;&#20195;&#30721;</h4></div></div><div></div></div><p>
					&#25511;&#21046;&#22120;&#36923;&#36753;&#23553;&#35013;&#22312;&#19968;&#20010;<tt class="classname">AbstractController</tt>&#30340;&#23376;&#31867;&#65292;&#23427;&#30340;handler&#26041;&#27861;&#23450;&#20041;&#22914;&#19979;&#65306;
				</p><pre class="programlisting">protected ModelAndView handleRequestInternal(
    HttpServletRequest request,
    HttpServletResponse response) throws Exception {
        
    Map map = new HashMap();
    List wordList = new ArrayList();
        
    wordList.add("hello");
    wordList.add("world");
       
    map.put("wordList", wordList);
      
    return new ModelAndView("home", map);
}</pre><p>
					&#21040;&#30446;&#21069;&#20026;&#27490;&#65292;&#25105;&#20204;&#36824;&#27809;&#26377;&#20570;&#20160;&#20040;&#29305;&#23450;&#20110;XSLT&#30340;&#20107;&#24773;&#12290;&#22312;&#20219;&#20309;&#19968;&#31181;Spring
					MVC&#24212;&#29992;&#20013;&#65292;&#27169;&#22411;&#25968;&#25454;&#37117;&#20197;&#21516;&#26679;&#30340;&#26041;&#24335;&#34987;&#21019;&#24314;&#12290;
					&#29616;&#22312;&#26681;&#25454;&#24212;&#29992;&#30340;&#37197;&#32622;&#65292;&#35789;&#35821;&#21015;&#34920;&#21487;&#20197;&#20316;&#20026;&#35831;&#27714;&#23646;&#24615;&#21152;&#20837;&#20174;&#32780;&#34987;JSP/JSTL&#28210;&#26579;&#65292;&#25110;&#32773;&#36890;&#36807;&#21152;&#20837;
					<tt class="classname">VelocityContext</tt>&#26469;&#34987;Velocity&#22788;&#29702;&#12290;
					&#20026;&#20102;&#20351;&#29992;XSLT&#28210;&#26579;&#23427;&#20204;&#65292;&#24212;&#35813;&#20197;&#26576;&#31181;&#26041;&#24335;&#25226;&#23427;&#20204;&#36716;&#21270;&#20026;XML&#25991;&#26723;&#12290;&#26377;&#20123;&#36719;&#20214;&#21253;&#33021;&#33258;&#21160;&#23436;&#25104;&#23545;&#35937;&#22270;&#21040;XML&#25991;&#26723;&#23545;&#35937;&#27169;&#22411;&#30340;&#36716;&#21270;&#12290;
					&#20294;&#22312;Spring&#20013;&#65292;&#20320;&#26377;&#23436;&#20840;&#30340;&#33258;&#30001;&#24230;&#65292;&#33021;&#20197;&#20219;&#20309;&#26041;&#24335;&#23436;&#25104;&#20174;&#27169;&#22411;&#25968;&#25454;&#21040;XML&#30340;&#36716;&#21270;&#12290;
					&#36825;&#21487;&#20197;&#38450;&#27490;XML&#36716;&#21270;&#37096;&#20998;&#22312;&#20320;&#30340;&#27169;&#22411;&#32467;&#26500;&#20013;&#21344;&#25454;&#22826;&#22823;&#30340;&#27604;&#37325;&#65292;&#20351;&#29992;&#39069;&#22806;&#24037;&#20855;&#26469;&#31649;&#29702;&#36716;&#21270;&#36807;&#31243;&#26159;&#19968;&#31181;&#39118;&#38505;&#12290;
				</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="view-xslt-subclassing"></a>14.5.1.3.&nbsp;&#25226;&#27169;&#22411;&#25968;&#25454;&#36716;&#21270;&#20026;XML</h4></div></div><div></div></div><p>
					&#20026;&#20102;&#20174;&#35789;&#35821;&#21015;&#34920;&#25110;&#20219;&#20309;&#20854;&#20182;&#27169;&#22411;&#25968;&#25454;&#21019;&#24314;XML&#25991;&#26723;&#65292;&#25105;&#20204;&#24517;&#39035;&#21019;&#24314;&#19968;&#20010;
					<tt class="classname">
						org.springframework.web.servlet.view.xslt.AbstractXsltView
					</tt>&#30340;&#23376;&#31867;&#65292; &#36890;&#24120;&#25105;&#20204;&#20063;&#24517;&#39035;&#23454;&#29616;&#25277;&#35937;&#26041;&#27861;
					<tt class="methodname">createXsltSource(..)</tt>s&#12290;&#20854;&#31532;&#19968;&#20010;&#21442;&#25968;&#21363;model Map&#12290; &#19979;&#38754;&#26159;&#25105;&#20204;&#36825;&#20010;&#23567;&#24212;&#29992;&#20013;
					<tt class="classname">HomePage</tt>&#31867;&#30340;&#23436;&#25972;&#20195;&#30721;:
				</p><pre class="programlisting">package xslt;

<i class="lineannotation"><span class="lineannotation">// imports omitted for brevity</span></i>
					

public class HomePage extends AbstractXsltView {

    protected Source createXsltSource(Map model, String rootName, HttpServletRequest
        request, HttpServletResponse response) throws Exception {

        Document document = DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument();
        Element root = document.createElement(rootName);

        List words = (List) model.get("wordList");
        for (Iterator it = words.iterator(); it.hasNext();) {
            String nextWord = (String) it.next();
            Element wordNode = document.createElement("word");
            Text textNode = document.createTextNode(nextWord);
            wordNode.appendChild(textNode);
            root.appendChild(wordNode);
        }
        return new DOMSource(root);
    }

}</pre><p>
					&#20320;&#21487;&#20197;&#22312;&#19978;&#36848;&#23376;&#31867;&#20013;&#23450;&#20041;&#19968;&#20123;&#20256;&#32473;&#36716;&#21270;&#23545;&#35937;&#30340;&#21442;&#25968;&#65292;&#23427;&#20204;&#30001;&#20581;&#20540;&#23545;&#65288;name/value pairs&#65289;&#26500;&#25104;&#65292;
					&#20854;&#20013;&#21442;&#25968;&#21517;&#24517;&#39035;&#19982;XSLT&#27169;&#26495;&#20013;&#23450;&#20041;&#30340;
					<tt class="literal">
						&lt;xsl:param
						name="myParam"&gt;defaultValue&lt;/xsl:param&gt;
					</tt>
					&#19968;&#33268;&#12290; &#20026;&#20102;&#25351;&#23450;&#36825;&#20123;&#21442;&#25968;&#65292;&#20320;&#38656;&#35201;&#35206;&#20889;&#32487;&#25215;&#33258;
					<tt class="classname">AbstractXsltView</tt>&#30340;<tt class="methodname">getParameters()</tt>
					&#26041;&#27861;&#24182;&#36820;&#22238;&#19968;&#20010;&#21253;&#21547;&#20581;&#20540;&#23545;&#30340;
					<tt class="interfacename">Map</tt>&#12290; &#22914;&#26524;&#20320;&#38656;&#35201;&#20174;&#24403;&#21069;&#35831;&#27714;&#20013;&#33719;&#21462;&#20449;&#24687;&#65292;&#20320;&#21487;&#20197;&#36873;&#25321;&#35206;&#20889;
					<tt class="methodname">
						getParameters(HttpServletRequest request)
					</tt>
					&#26041;&#27861;&#12290;&#65288;&#36825;&#20010;&#26041;&#27861;&#21482;&#26377;Spring 1.1&#20197;&#21518;&#30340;&#29256;&#26412;&#25165;&#25903;&#25345;&#12290;&#65289;
				</p><p>
					&#27604;&#36215;JSTL&#21644;Velocity&#65292;XSLT&#23545;&#26412;&#22320;&#36135;&#24065;&#21644;&#26085;&#26399;&#26684;&#24335;&#30340;&#25903;&#25345;&#30456;&#23545;&#36739;&#24369;&#12290;
					&#22522;&#20110;&#36825;&#28857;&#65292;Spring&#25552;&#20379;&#20102;&#19968;&#20010;&#36741;&#21161;&#31867;&#65292;&#20320;&#21487;&#20197;&#22312;
					<tt class="methodname">createXsltSource(..)</tt>
					&#26041;&#27861;&#20013;&#35843;&#29992;&#23427;&#26469;&#33719;&#24471;&#36825;&#26679;&#30340;&#25903;&#25345;&#12290; &#35831;&#21442;&#32771;
					<tt class="classname">
						org.springframework.web.servlet.view.xslt.FormatHelper
					</tt>&#31867;&#30340;Javadoc&#12290;
				</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="view-xslt-viewdefinitions"></a>14.5.1.4.&nbsp;&#23450;&#20041;&#35270;&#22270;&#23646;&#24615;</h4></div></div><div></div></div><p>
					&#23545;&#20110;&#8220;&#20889;&#22312;&#27573;&#39318;&#8221;&#20013;&#30340;&#21482;&#26377;&#19968;&#20010;&#35270;&#22270;&#30340;&#24773;&#20917;&#26469;&#35828;&#65292;views.properties&#25991;&#20214;&#65288;&#25110;&#32773;&#31561;&#20215;&#30340;xml&#25991;&#20214;&#65292;&#22914;&#26524;&#20320;&#29992;&#19968;&#31181;&#22522;&#20110;XML&#30340;&#35270;&#22270;&#35299;&#26512;&#22120;&#30340;&#35805;&#65292;&#23601;&#20687;&#22312;&#19978;&#38754;&#30340;Velocity&#20363;&#23376;&#20013;&#65289;&#30475;&#36215;&#26469;&#26159;&#36825;&#26679;&#30340;&#65306;
				</p><pre class="programlisting">home.class=xslt.HomePage
home.stylesheetLocation=/WEB-INF/xsl/home.xslt
home.root=words</pre><p>
					&#36825;&#37324;&#20320;&#21487;&#20197;&#30475;&#21040;&#65292;&#31532;&#19968;&#20010;&#23646;&#24615;
					<tt class="literal">'.class'</tt>
					&#25351;&#23450;&#20102;&#35270;&#22270;&#31867;&#65292;&#21363;&#25105;&#20204;&#30340;<tt class="classname">HomePage</tt>
					&#65292;&#20854;&#20013;&#23436;&#25104;&#20174;&#27169;&#22411;&#25968;&#25454;&#21040;XML&#25991;&#26723;&#30340;&#36716;&#21270;&#12290; &#31532;&#20108;&#20010;&#23646;&#24615;
					<tt class="literal">'stylesheetLocation'</tt>
					&#25351;&#23450;&#20102;XSLT&#25991;&#20214;&#30340;&#20301;&#32622;&#65292;&#23427;&#29992;&#20110;&#23436;&#25104;&#20174;XML&#21040;HTML&#30340;&#36716;&#21270;&#12290; &#26368;&#21518;&#19968;&#20010;&#23646;&#24615;
					<tt class="literal">'.root'</tt>
					&#25351;&#23450;&#20102;&#29992;&#20316;XML&#25991;&#26723;&#26681;&#20803;&#32032;&#30340;&#21517;&#23383;&#65292;&#23427;&#34987;&#20316;&#20026;
					<tt class="methodname">createXsltSource(..)</tt>
					&#26041;&#27861;&#30340;&#31532;&#20108;&#20010;&#21442;&#25968;&#20256;&#32473;<tt class="classname">HomePage</tt>&#31867;&#12290;
				</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="view-xslt-transforming"></a>14.5.1.5.&nbsp;&#25991;&#26723;&#36716;&#25442;</h4></div></div><div></div></div><p>
					&#26368;&#21518;&#65292;&#25105;&#20204;&#26377;&#19968;&#27573;&#36716;&#25442;&#19978;&#36848;&#25991;&#26723;&#30340;XSLT&#20195;&#30721;&#12290; &#27491;&#22914;&#22312;
					<tt class="filename">'views.properties'</tt>&#20013;&#30475;&#21040;&#30340;&#65292;&#23427;&#34987;&#21629;&#21517;&#20026;
					<tt class="filename">'home.xslt'</tt>&#65292;&#23384;&#25918;&#22312;war&#25991;&#20214;&#20013;&#30340;
					<tt class="filename">'WEB-INF/xsl'</tt>&#30446;&#24405;&#19979;&#12290;
				</p><pre class="programlisting">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;

    &lt;xsl:output method="html" omit-xml-declaration="yes"/&gt;

    &lt;xsl:template match="/"&gt;
        &lt;html&gt;
            &lt;head&gt;&lt;title&gt;Hello!&lt;/title&gt;&lt;/head&gt;
            &lt;body&gt;
                &lt;h1&gt;My First Words&lt;/h1&gt;
                &lt;xsl:apply-templates/&gt;
            &lt;/body&gt;
        &lt;/html&gt;
    &lt;/xsl:template&gt;

    &lt;xsl:template match="word"&gt;
        &lt;xsl:value-of select="."/&gt;&lt;br/&gt;
    &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="view-xslt-summary"></a>14.5.2.&nbsp;&#23567;&#32467;</h3></div></div><div></div></div><p>&#19979;&#38754;&#26159;&#19968;&#20010;&#31616;&#21270;&#30340;WAR&#30446;&#24405;&#32467;&#26500;&#65292;&#20854;&#20013;&#24635;&#32467;&#20102;&#19978;&#38754;&#25552;&#21040;&#30340;&#25991;&#20214;&#21644;&#23427;&#20204;&#22312;WAR&#20013;&#30340;&#20301;&#32622;&#65306;</p><pre class="programlisting">				ProjectRoot | +- WebContent | +- WEB-INF | +- classes |
				| | +- xslt | | | | | +- HomePageController.class | | +-
				HomePage.class | | | +- views.properties | +- lib | | |
				+- spring.jar | +- xsl | | | +- home.xslt | +-
				frontcontroller-servlet.xml
			</pre><p>
				&#20320;&#35201;&#30830;&#20445;classpath&#19979;&#23384;&#22312;XML&#35299;&#26512;&#22120;&#21644;XSLT&#24341;&#25806;&#12290;JDK1.4&#40664;&#35748;&#24050;&#25552;&#20379;&#20102;&#36825;&#20123;&#65292;&#22810;&#25968;J2EE&#23481;&#22120;&#20063;&#25552;&#20379;&#65292;&#20294;&#36824;&#26159;&#35201;&#35686;&#24789;&#65292;&#23427;&#21487;&#33021;&#26159;&#19968;&#20123;&#38169;&#35823;&#30340;&#26681;&#28304;&#12290;
			</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="view-document"></a>14.6.&nbsp;&#25991;&#26723;&#35270;&#22270;&#65288;PDF/Excel&#65289;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="view-document-intro"></a>14.6.1.&nbsp;&#31616;&#20171;</h3></div></div><div></div></div><p>
				&#23545;&#30475;&#27169;&#22411;&#25968;&#25454;&#36755;&#20986;&#30340;&#29992;&#25143;&#26469;&#35828;&#65292;&#36820;&#22238;&#19968;&#20010;HTML&#39029;&#38754;&#24182;&#19981;&#24635;&#26159;&#26368;&#22909;&#30340;&#26041;&#27861;&#12290;
				Spring&#31616;&#21270;&#20102;&#26681;&#25454;&#27169;&#22411;&#25968;&#25454;&#21160;&#24577;&#36755;&#20986;PDF&#25991;&#26723;&#25110;Excel&#30005;&#23376;&#34920;&#26684;&#30340;&#24037;&#20316;&#12290;
				&#36825;&#20123;&#25991;&#26723;&#21363;&#26368;&#32456;&#35270;&#22270;&#65292;&#23427;&#20204;&#23558;&#20197;&#36866;&#24403;&#30340;&#20869;&#23481;&#31867;&#22411;&#29992;&#27969;&#30340;&#24418;&#24335;&#20174;&#26381;&#21153;&#22120;&#36755;&#20986;&#65292;&#24182;&#22312;&#23458;&#25143;&#31471;PC&#30456;&#24212;&#22320;&#21551;&#21160;PDF&#25110;&#30005;&#23376;&#34920;&#26684;&#27983;&#35272;&#22120;&#65288;&#24076;&#26395;&#22914;&#27492;&#65289;&#12290;
			</p><p>
				&#20026;&#20102;&#20351;&#29992;Excel&#35270;&#22270;&#65292;&#20320;&#38656;&#35201;&#25226;'poi'&#24211;&#21152;&#21040;classpath&#20013;&#65307;&#20351;&#29992;PDF&#30340;&#35805;&#38656;&#35201;iText.jar&#12290;&#23427;&#20204;&#37117;&#24050;&#32463;&#21253;&#21547;&#22312;Spring&#30340;&#20027;&#21457;&#34892;&#21253;&#37324;&#12290;
			</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="view-document-config"></a>14.6.2.&nbsp;&#37197;&#32622;&#21644;&#23433;&#35013;</h3></div></div><div></div></div><p>
				&#22522;&#20110;&#25991;&#26723;&#30340;&#35270;&#22270;&#20960;&#20046;&#19982;XSLT&#35270;&#22270;&#30340;&#22788;&#29702;&#26041;&#24335;&#30456;&#21516;&#12290;
				&#19979;&#38754;&#30340;&#20869;&#23481;&#23558;&#22312;&#21069;&#25991;&#22522;&#30784;&#19978;&#20171;&#32461;&#65292;XSLT&#20363;&#23376;&#20013;&#30340;controller&#22914;&#20309;&#34987;&#29992;&#26469;&#28210;&#26579;&#21516;&#19968;&#20010;&#30340;&#27169;&#22411;&#25968;&#25454;&#65292;&#20998;&#21035;&#20135;&#29983;PDF&#25110;Excel&#36755;&#20986;&#65288;&#36755;&#20986;&#25991;&#26723;&#21487;&#20197;&#29992;Open Office&#27983;&#35272;&#21644;&#32534;&#36753;&#65289;&#12290;
			</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="view-document-configviews"></a>14.6.2.1.&nbsp;&#25991;&#26723;&#35270;&#22270;&#23450;&#20041;</h4></div></div><div></div></div><p>
					&#39318;&#20808;&#65292;&#25105;&#20204;&#20462;&#25913;view.properties&#65288;&#25110;&#31561;&#20215;&#30340;xml&#25991;&#20214;&#65289;&#65292;&#22686;&#21152;&#20004;&#31181;&#25991;&#26723;&#31867;&#22411;&#30340;&#35270;&#22270;&#23450;&#20041;&#12290;&#25972;&#20010;&#25991;&#20214;&#29616;&#22312;&#30475;&#36215;&#26469;&#26159;&#36825;&#20010;&#26679;&#23376;&#65306;
					</p><pre class="programlisting">						home.class=xslt.HomePage
						home.stylesheetLocation=/WEB-INF/xsl/home.xslt
						home.root=words

						xl.class=excel.HomePage

						pdf.class=pdf.HomePage
					</pre><p>
					<span class="emphasis"><em>
						&#22914;&#26524;&#20320;&#24819;&#22312;&#19968;&#20010;&#30005;&#23376;&#34920;&#26684;&#27169;&#26495;&#22522;&#30784;&#19978;&#28155;&#21152;&#27169;&#22411;&#25968;&#25454;&#65292;&#21487;&#20197;&#22312;&#35270;&#22270;&#23450;&#20041;&#20013;&#20026;'url'&#23646;&#24615;&#25351;&#23450;&#19968;&#20010;&#25991;&#20214;&#20301;&#32622;&#12290;
					</em></span>
				</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="view-document-configcontroller"></a>14.6.2.2.&nbsp;Controller &#20195;&#30721;</h4></div></div><div></div></div><p>
					&#36825;&#37324;&#29992;&#30340;controller&#20195;&#30721;&#65292;&#38500;&#20102;&#35270;&#22270;&#21517;&#20197;&#22806;&#65292;&#20854;&#20182;&#30340;&#19982;XSLT&#20363;&#23376;&#20013;&#30340;&#23436;&#20840;&#19968;&#26679;&#12290;
					&#24403;&#28982;&#65292;&#20320;&#21487;&#33021;&#26377;&#26356;&#32874;&#26126;&#30340;&#20570;&#27861;&#65292;&#36890;&#36807;URL&#21442;&#25968;&#25110;&#20854;&#20182;&#26041;&#24335;&#36873;&#25321;&#35270;&#22270;&#21517;&#65292;&#36825;&#20063;&#35777;&#26126;&#20102;Spirng&#22312;&#25511;&#21046;&#22120;&#19982;&#35270;&#22270;&#30340;&#35299;&#32806;&#26041;&#38754;&#30830;&#23454;&#38750;&#24120;&#20248;&#31168;&#65281;
				</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="view-document-configsubclasses"></a>14.6.2.3.&nbsp;Excel&#35270;&#22270;&#23376;&#31867;</h4></div></div><div></div></div><p>
					&#21644;&#22312;XSLT&#20363;&#23376;&#20013;&#19968;&#26679;&#65292;&#25105;&#20204;&#38656;&#35201;&#20174;&#36866;&#24403;&#30340;&#25277;&#35937;&#31867;&#25193;&#23637;&#19968;&#20010;&#20855;&#20307;&#31867;&#65292;&#20197;&#23454;&#29616;&#36755;&#20986;&#25991;&#26723;&#30340;&#34892;&#20026;&#12290;
					&#23545;Excel&#26469;&#35828;&#65292;&#36825;&#24847;&#21619;&#30528;&#21019;&#24314;&#19968;&#20010;
					<tt class="literal">
						org.springframework.web.servlet.view.document.AbstractExcelView
					</tt>
					&#65288;&#20351;&#29992;POI&#65289;&#25110;
					<tt class="literal">
						org.springframework.web.servlet.view.document.AbstractJExcelView
					</tt>
					&#65288;&#20351;&#29992;JExcelApi&#65289;&#30340;&#23376;&#31867;&#65292; &#24182;&#23454;&#29616;
					<tt class="literal">buildExcelDocument</tt>&#26041;&#27861;&#12290;
				</p><p>
					&#19979;&#38754;&#26159;&#19968;&#27573;&#20351;&#29992;POI&#29983;&#25104;Excel&#35270;&#22270;&#30340;&#23436;&#25972;&#20195;&#30721;&#65292;&#23427;&#20174;&#27169;&#22411;&#25968;&#25454;&#20013;&#21462;&#24471;&#35789;&#35821;&#21015;&#34920;&#65292;&#25226;&#23427;&#26174;&#31034;&#20026;&#30005;&#23376;&#34920;&#26684;&#20013;&#31532;&#19968;&#26639;&#20869;&#36830;&#32493;&#30340;&#34892;&#65306;

					</p><pre class="programlisting">						package excel;

						// imports omitted for brevity

						public class HomePage extends AbstractExcelView
						{

						protected void buildExcelDocument( Map model,
						HSSFWorkbook wb, HttpServletRequest req,
						HttpServletResponse resp) throws Exception {

						HSSFSheet sheet; HSSFRow sheetRow; HSSFCell
						cell;

						// Go to the first sheet // getSheetAt: only if
						wb is created from an existing document //sheet
						= wb.getSheetAt( 0 ); sheet =
						wb.createSheet("Spring");
						sheet.setDefaultColumnWidth((short)12);

						// write a text at A1 cell = getCell( sheet, 0,
						0 ); setText(cell,"Spring-Excel test");

						List words = (List ) model.get("wordList"); for
						(int i=0; i &lt; words.size(); i++) { cell =
						getCell( sheet, 2+i, 0 ); setText(cell, (String)
						words.get(i));

						} } }
					</pre><p>
				</p><p>
					&#36825;&#26159;&#19968;&#20010;&#20351;&#29992;JExcelApi&#30340;&#29256;&#26412;&#65292;&#29983;&#25104;&#21516;&#26679;&#30340;Excel&#25991;&#20214;&#65306;
					</p><pre class="programlisting">						package excel;

						// imports omitted for brevity

						public class HomePage extends AbstractExcelView
						{

						protected void buildExcelDocument(Map model,
						WritableWorkbook wb, HttpServletRequest request,
						HttpServletResponse response) throws Exception {

						WritableSheet sheet = wb.createSheet("Spring");

						sheet.addCell(new Label(0, 0, "Spring-Excel
						test");

						List words = (List)model.get("wordList"); for
						(int i = -; i &lt; words.size(); i++) {
						sheet.addCell(new Label(2+i, 0,
						(String)words.get(i)); } } }
					</pre><p>
				</p><p>
					&#27880;&#24847;&#36825;&#20123;API&#38388;&#30340;&#24046;&#21035;&#12290;&#25105;&#20204;&#21457;&#29616;JExcelApi&#20351;&#29992;&#36215;&#26469;&#26356;&#30452;&#35266;&#65292;&#32780;&#19988;&#22312;&#22270;&#20687;&#22788;&#29702;&#26041;&#38754;&#26356;&#22909;&#12290;
					&#20294;&#20063;&#21457;&#29616;&#20351;&#29992;JExcelApi&#22788;&#29702;&#22823;&#25991;&#20214;&#26102;&#23384;&#22312;&#20869;&#23384;&#38382;&#39064;&#12290;
				</p><p>
					&#22914;&#26524;&#20320;&#29616;&#22312;&#20462;&#25913;controller&#30340;&#20195;&#30721;&#65292;&#35753;&#23427;&#36820;&#22238;&#21517;&#20026;
					<tt class="literal">xl</tt>
					&#30340;&#35270;&#22270;&#65288;
					<tt class="literal">
						return new ModelAndView("xl", map);
					</tt>
					&#65289;&#65292; &#28982;&#21518;&#20877;&#27425;&#36816;&#34892;&#20320;&#30340;&#24212;&#29992;&#65292;&#20320;&#20250;&#21457;&#29616;&#65292;&#24403;&#20320;&#35831;&#27714;&#21516;&#26679;&#30340;&#39029;&#38754;&#26102;&#65292;Excel&#30005;&#23376;&#34920;&#26684;&#34987;&#21019;&#24314;&#20986;&#26469;&#24182;&#33258;&#21160;&#24320;&#22987;&#19979;&#36733;&#12290;
				</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="view-document-configsubclasspdf"></a>14.6.2.4.&nbsp;PDF&#35270;&#22270;&#23376;&#31867;</h4></div></div><div></div></div><p>
					&#29983;&#25104;PDF&#29256;&#26412;&#30340;&#35789;&#35821;&#21015;&#34920;&#23601;&#26356;&#31616;&#21333;&#20102;&#12290; &#29616;&#22312;&#65292;&#20320;&#21019;&#24314;&#19968;&#20010;
					<tt class="literal">
						org.springframework.web.servlet.view.document.AbstractPdfView
					</tt>
					&#30340;&#23376;&#31867;&#65292;&#24182;&#23454;&#29616;
					<tt class="literal">buildPdfDocument()</tt>&#26041;&#27861;&#65292;&#22914;&#19979;&#65306;
					</p><pre class="programlisting">						package pdf;

						// imports omitted for brevity

						public class PDFPage extends AbstractPdfView {

						protected void buildPdfDocument( Map model,
						Document doc, PdfWriter writer,
						HttpServletRequest req, HttpServletResponse
						resp) throws Exception {

						List words = (List) model.get("wordList");

						for (int i=0; i&lt;words.size(); i++) doc.add(
						new Paragraph((String) words.get(i)));

						} }
					</pre><p>
					&#21516;&#26679;&#22320;&#65292;&#20462;&#25913;controller&#65292;&#35753;&#23427;&#36820;&#22238;&#21517;&#20026;
					<tt class="literal">pdf</tt>
					&#30340;&#35270;&#22270;&#65288;
					<tt class="literal">
						return new ModelAndView("pdf", map);
					</tt>
					&#65289;&#65292; &#36816;&#34892;&#24212;&#29992;&#24182;&#35831;&#27714;&#21516;&#26679;&#30340;URL&#65292;&#36825;&#27425;&#23558;&#20250;&#25171;&#24320;&#19968;&#20010;PDF&#25991;&#26723;&#65292;&#21015;&#20986;&#27169;&#22411;&#25968;&#25454;&#20013;&#30340;&#27599;&#20010;&#35789;&#35821;&#12290;
				</p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="view-jasper-reports"></a>14.7.&nbsp;JasperReports</h2></div></div><div></div></div><p>
			JasperReports (
			<a href="http://jasperreports.sourceforge.net/" target="_top">http://jasperreports.sourceforge.net</a>
			) &#26159;&#19968;&#20010;&#21151;&#33021;&#24378;&#22823;&#65292;&#24320;&#28304;&#30340;&#25253;&#34920;&#24341;&#25806;&#65292;
			&#25903;&#25345;&#20351;&#29992;&#19968;&#31181;&#26131;&#20110;&#29702;&#35299;&#30340;XML&#25991;&#26723;&#21019;&#24314;&#25253;&#34920;&#35774;&#35745;&#65292;&#24182;&#21487;&#20197;&#36755;&#20986;4&#31181;&#26684;&#24335;&#30340;&#25253;&#34920;&#65306;CSV&#12289;Excel&#12289;HTML&#21644;PDF&#12290;
		</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="view-jasper-reports-dependencies"></a>14.7.1.&nbsp;&#20381;&#36182;&#30340;&#36164;&#28304;</h3></div></div><div></div></div><p>
				&#24212;&#29992;&#31243;&#24207;&#38656;&#35201;&#21253;&#21547;&#26368;&#26032;&#29256;&#26412;&#30340;JasperReports&#65288;&#20889;&#26412;&#25991;&#26723;&#30340;&#26102;&#20505;&#26159; 0.6.1&#65289;&#12290;
				JasperReports&#33258;&#36523;&#20381;&#36182;&#20110;&#19979;&#38754;&#30340;&#39033;&#30446;:
			</p><div class="itemizedlist"><ul type="bullet"><li style="list-style-type: disc;"><p>BeanShell</p></li><li style="list-style-type: disc;"><p>Commons BeanUtils</p></li><li style="list-style-type: disc;"><p>Commons Collections</p></li><li style="list-style-type: disc;"><p>Commons Digester</p></li><li style="list-style-type: disc;"><p>Commons Logging</p></li><li style="list-style-type: disc;"><p>iText</p></li><li style="list-style-type: disc;"><p>POI</p></li></ul></div><p>JasperReports&#36824;&#38656;&#35201;&#19968;&#20010;JAXP&#35299;&#26512;&#22120;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="view-jasper-reports-configuration"></a>14.7.2.&nbsp;&#37197;&#32622;</h3></div></div><div></div></div><p>
				&#35201;&#22312;
				<tt class="literal">ApplicationContext</tt>&#20013;&#37197;&#32622;JasperReports&#65292;&#20320;&#24517;&#39035;&#23450;&#20041;&#19968;&#20010;
				<tt class="literal">ViewResolver</tt>&#26469;&#25226;&#35270;&#22270;&#21517;&#26144;&#23556;&#21040;&#36866;&#24403;&#30340;&#35270;&#22270;&#31867;&#65292;&#36825;&#21462;&#20915;&#20110;&#20320;&#24076;&#26395;&#36755;&#20986;&#20160;&#20040;&#26684;&#24335;&#30340;&#25253;&#34920;&#12290;
			</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="view-jasper-reports-configuration-resolver"></a>14.7.2.1.&nbsp;
					&#37197;&#32622;<tt class="interfacename">ViewResolver</tt>
				</h4></div></div><div></div></div><p>
					&#36890;&#24120;&#65292;&#20320;&#20250;&#20351;&#29992;<tt class="classname">ResourceBundleViewResolver</tt>
					&#26469;&#26681;&#25454;&#19968;&#20010;&#23646;&#24615;&#25991;&#20214;&#25226;&#35270;&#22270;&#21517;&#26144;&#23556;&#21040;&#35270;&#22270;&#31867;&#21644;&#30456;&#20851;&#25991;&#20214;&#65306;
				</p><pre class="programlisting">&lt;bean id="viewResolver" class="org.springframework.web.servlet.view.ResourceBundleViewResolver"&gt;
    &lt;property name="basename" value="views"/&gt;
&lt;/bean&gt;</pre><p>
					&#36825;&#37324;&#25105;&#20204;&#24050;&#32463;&#23450;&#20041;&#20102;&#19968;&#20010;
					<tt class="classname">ResourceBundleViewResolver</tt>
					&#30340;&#23454;&#20363;&#65292; &#23427;&#23558;&#36890;&#36807;&#22522;&#21517;&#65288;base name&#65289;
					<tt class="literal">views</tt>
					&#22312;&#36164;&#28304;&#25991;&#20214;&#20013;&#26597;&#25214;&#35270;&#22270;&#26144;&#23556;&#12290; &#36825;&#20010;&#25991;&#20214;&#30340;&#35814;&#32454;&#20869;&#23481;&#23558;&#22312;&#19979;&#33410;&#20869;&#23481;&#21465;&#36848;&#12290;
				</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="view-jasper-reports-configuration-views"></a>14.7.2.2.&nbsp;
					&#37197;&#32622;<tt class="literal">View</tt>
				</h4></div></div><div></div></div><p>
					Spring&#20013;&#21253;&#21547;&#20102;JasperReports&#30340;&#20116;&#31181;&#35270;&#22270;&#23454;&#29616;&#65292;&#20854;&#20013;&#22235;&#31181;&#23545;&#24212;&#21040;JasperReports&#25903;&#25345;&#30340;&#22235;&#31181;&#36755;&#20986;&#26684;&#24335;&#65292;&#21478;&#19968;&#31181;&#25903;&#25345;&#22312;&#36816;&#34892;&#26102;&#30830;&#23450;&#36755;&#20986;&#26684;&#24335;&#12290;
				</p><div class="table"><a name="view-jasper-reports-configuration-views-classes"></a><p class="title"><b>Table&nbsp;14.2.&nbsp;
						JasperReports
						<tt class="literal">View</tt>
						Classes
					</b></p><table summary="JasperReports
						View
						Classes" border="1"><colgroup><col><col></colgroup><thead><tr><th>&#31867;&#21517;</th><th>&#28210;&#26579;&#26684;&#24335;</th></tr></thead><tbody><tr><td><tt class="literal">
										JasperReportsCsvView
									</tt></td><td>CSV</td></tr><tr><td><tt class="literal">
										JasperReportsHtmlView
									</tt></td><td>HTML</td></tr><tr><td><tt class="literal">
										JasperReportsPdfView
									</tt></td><td>PDF</td></tr><tr><td><tt class="literal">
										JasperReportsXlsView
									</tt></td><td>Microsoft Excel</td></tr><tr><td><tt class="literal">
										JasperReportsMultiFormatView
									</tt></td><td>
									&#36816;&#34892;&#26102;&#30830;&#23450;&#26684;&#24335;&#65288;&#21442;&#32771;
									<a href="#view-jasper-reports-configuration-multiformat-view" title="14.7.2.4.&nbsp;
					&#20351;&#29992;
					JasperReportsMultiFormatView">Section&nbsp;14.7.2.4, &#8220;
					&#20351;&#29992;
					JasperReportsMultiFormatView
				&#8221;</a>
									&#65289;
								</td></tr></tbody></table></div><p>&#25226;&#36825;&#20123;&#31867;&#26144;&#23556;&#21040;&#35270;&#22270;&#21517;&#21644;&#25253;&#34920;&#25991;&#20214;&#21482;&#38656;&#35201;&#31616;&#21333;&#22320;&#22312;&#21069;&#36848;&#36164;&#28304;&#25991;&#20214;&#20013;&#28155;&#21152;&#36866;&#24403;&#30340;&#26465;&#30446;&#12290;&#22914;&#19979;&#65306;</p><pre class="programlisting">					simpleReport.class=org.springframework.web.servlet.view.jasperreports.JasperReportsPdfView
					simpleReport.url=/WEB-INF/reports/DataSourceReport.jasper
				</pre><p>
					&#36825;&#37324;&#20320;&#21487;&#20197;&#30475;&#21040;&#21517;&#20026;<tt class="literal">simpleReport</tt>
					&#30340;&#35270;&#22270;&#34987;&#26144;&#23556;&#21040;<tt class="literal">JasperReportsPdfView</tt>
					&#31867;&#12290; &#36825;&#23558;&#20135;&#29983;PDF&#26684;&#24335;&#30340;&#25253;&#34920;&#36755;&#20986;&#12290;&#35813;&#35270;&#22270;&#30340;url&#23646;&#24615;&#34987;&#35774;&#32622;&#20026;&#24213;&#23618;&#25253;&#34920;&#25991;&#20214;&#30340;&#20301;&#32622;&#12290;
				</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="view-jasper-reports-configuration-report-files"></a>14.7.2.3.&nbsp;&#20851;&#20110;&#25253;&#34920;&#25991;&#20214;</h4></div></div><div></div></div><p>
					JasperReports&#26377;&#20004;&#31181;&#19981;&#21516;&#30340;&#25253;&#34920;&#25991;&#20214;&#65306;&#19968;&#31181;&#26159;&#35774;&#35745;&#25991;&#20214;&#65292;&#20197;
					<tt class="literal">.jrxml</tt>
					&#20026;&#25193;&#23637;&#21517;&#65307;&#21478;&#19968;&#31181;&#26159;&#32534;&#35793;&#21518;&#30340;&#26684;&#24335;&#65292;&#20197;
					<tt class="literal">.jasper</tt>
					&#20026;&#25193;&#23637;&#21517;&#12290; &#36890;&#24120;&#65292;&#20320;&#20351;&#29992;JasperReports&#33258;&#24102;&#30340;Ant&#20219;&#21153;&#26469;&#25226;&#20320;&#30340;
					<tt class="literal">.jrxml</tt>
					&#25991;&#20214;&#32534;&#35793;&#20026;
					<tt class="literal">.jasper</tt>
					&#25991;&#20214;&#65292;&#28982;&#21518;&#37096;&#32626;&#21040;&#24212;&#29992;&#20013;&#12290;
					&#22312;Spring&#37324;&#20320;&#21487;&#20197;&#25226;&#20219;&#19968;&#31181;&#35774;&#35745;&#25991;&#20214;&#26144;&#23556;&#21040;&#25253;&#34920;&#25991;&#20214;&#65292;Spring&#33021;&#24110;&#20320;&#33258;&#21160;&#32534;&#35793;
					<tt class="literal">.jrxml</tt>
					&#25991;&#20214;&#12290; &#20294;&#20320;&#35201;&#27880;&#24847;&#65292;
					<tt class="literal">.jrxml</tt>
					&#34987;&#32534;&#35793;&#21518;&#21363;&#32531;&#23384;&#36215;&#26469;&#24182;&#22312;&#25972;&#20010;&#24212;&#29992;&#27963;&#21160;&#26399;&#38388;&#26377;&#25928;&#65292;&#22914;&#26524;&#20320;&#35201;&#20570;&#19968;&#20123;&#25913;&#21160;&#65292;&#23601;&#24471;&#37325;&#21551;&#24212;&#29992;&#12290;
				</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="view-jasper-reports-configuration-multiformat-view"></a>14.7.2.4.&nbsp;
					&#20351;&#29992;
					<tt class="literal">JasperReportsMultiFormatView</tt>
				</h4></div></div><div></div></div><p>
					<tt class="literal">JasperReportsMultiFormatView</tt>
					&#20801;&#35768;&#22312;&#36816;&#34892;&#26102;&#25351;&#23450;&#25253;&#34920;&#26684;&#24335;&#65292; &#30495;&#27491;&#35299;&#26512;&#25253;&#34920;&#22996;&#25176;&#32473;&#20854;&#23427;JasperReports&#30340;view&#31867; -
					<tt class="literal">JasperReportsMultiFormatView</tt>&#31867;&#31616;&#21333;&#22320;&#22686;&#21152;&#20102;&#19968;&#23618;&#21253;&#35013;&#65292;&#20801;&#35768;&#22312;&#36816;&#34892;&#26102;&#20934;&#30830;&#22320;&#25351;&#23450;&#23454;&#29616;&#12290;
				</p><p>
					<tt class="literal">JasperReportsMultiFormatView</tt>
					&#31867;&#24341;&#20837;&#20102;&#20004;&#20010;&#27010;&#24565;&#65306;format key&#21644;discriminator key&#12290;
					<tt class="literal">JasperReportsMultiFormatView</tt>
					&#20351;&#29992;mapping key&#26469;&#26597;&#25214;&#23454;&#38469;&#23454;&#29616;&#31867;&#65292;&#32780;&#20351;&#29992;format key&#26469;&#26597;&#25214;mapping key&#12290;
					&#20174;&#32534;&#31243;&#35282;&#24230;&#26469;&#35828;&#65292;&#20320;&#22312;model&#20013;&#28155;&#21152;&#19968;&#20010;&#26465;&#30446;&#65292;&#20197;format key&#20316;&#38190;&#24182;&#20197;mapping key&#20316;&#20540;&#65292;&#20363;&#22914;&#65306;
				</p><pre class="programlisting">					public ModelAndView
					handleSimpleReportMulti(HttpServletRequest request,
					HttpServletResponse response) throws Exception {

					String uri = request.getRequestURI(); String format
					= uri.substring(uri.lastIndexOf(".") + 1);

					Map model = getModel(); model.put("format", format);

					return new ModelAndView("simpleReportMulti", model);
					}
				</pre><p>
					&#22312;&#36825;&#20010;&#20363;&#23376;&#20013;&#65292;mapping key&#30001; request URI&#30340;&#25193;&#23637;&#21517;&#26469;&#20915;&#23450;&#65292;&#24182;&#20197;&#40664;&#35748;&#30340;format key&#20540;
					<tt class="literal">format</tt>
					&#21152;&#20837;&#20102;model&#12290; &#22914;&#26524;&#24076;&#26395;&#20351;&#29992;&#19981;&#21516;&#30340;format key&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;
					<tt class="literal">JasperReportsMultiFormatView</tt>
					&#31867;&#30340;<tt class="literal">formatKey</tt>&#23646;&#24615;&#26469;&#37197;&#32622;&#23427;&#12290;
				</p><p>
					<tt class="literal">JasperReportsMultiFormatView</tt>&#20013;&#40664;&#35748;&#24050;&#32463;&#37197;&#32622;&#20102;&#19979;&#21015;mapping key&#65306;
					</p><div class="table"><a name="view-jasper-reports-configuration-multiformat-view-mappings"></a><p class="title"><b>Table&nbsp;14.3.&nbsp;
							JasperReportsMultiFormatView&#40664;&#35748;Mapping Key&#26144;&#23556;
						</b></p><table summary="JasperReportsMultiFormatView&#40664;&#35748;Mapping Key&#26144;&#23556;" border="1"><colgroup><col><col></colgroup><thead><tr><th>Mapping Key</th><th>View Class</th></tr></thead><tbody><tr><td>csv</td><td><tt class="literal">
											JasperReportsCsvView
										</tt></td></tr><tr><td>html</td><td><tt class="literal">
											JasperReportsHtmlView
										</tt></td></tr><tr><td>pdf</td><td><tt class="literal">
											JasperReportsPdfView
										</tt></td></tr><tr><td>xls</td><td><tt class="literal">
											JasperReportsXlsView
										</tt></td></tr></tbody></table></div><p>
					&#25152;&#20197;&#19978;&#20363;&#20013;&#19968;&#20010;&#23545;/foo/myReport.pdf&#30340;&#35831;&#27714;&#23558;&#34987;&#26144;&#23556;&#33267;
					<tt class="literal">JasperReportsPdfView</tt>&#12290; &#20320;&#21487;&#20197;&#20351;&#29992;
					<tt class="literal">JasperReportsMultiFormatView</tt>
					&#30340;<tt class="literal">formatMappings</tt>&#23646;&#24615;&#35206;&#30422;mapping key&#21040;&#35270;&#22270;&#31867;&#30340;&#26144;&#23556;&#37197;&#32622;&#12290;
				</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="view-jasper-reports-model"></a>14.7.3.&nbsp;
				&#26500;&#36896;<tt class="literal">ModelAndView</tt>
			</h3></div></div><div></div></div><p>
				&#20026;&#20102;&#20197;&#20320;&#36873;&#25321;&#30340;&#26684;&#24335;&#27491;&#30830;&#22320;&#28210;&#26579;&#25253;&#34920;&#65292;&#20320;&#24517;&#39035;&#20026;Spring&#25552;&#20379;&#25152;&#26377;&#38656;&#35201;&#30340;&#25253;&#34920;&#25968;&#25454;&#12290;
				&#23545;JasperReports&#26469;&#35828;&#65292;&#36825;&#23601;&#26159;&#25253;&#34920;&#25968;&#25454;&#28304;&#65288;report datasource&#65289;&#21644;&#21442;&#25968;&#65288;report
				parameters&#65289;&#12290; &#25253;&#34920;&#21442;&#25968;&#23601;&#26159;&#19968;&#20123;&#21487;&#20197;&#21152;&#21040;model&#30340;
				<tt class="interfacename">Map</tt>&#20013;&#30340;&#31616;&#21333;&#38190;&#20540;&#23545;&#12290;
			</p><p>
				&#24403;&#28155;&#21152;&#25968;&#25454;&#28304;&#21040;model&#20013;&#26102;&#65292;&#26377;&#20004;&#31181;&#36873;&#25321;&#12290;&#31532;&#19968;&#31181;&#26159;&#20197;&#20219;&#24847;&#20540;&#20026;key&#65292;&#28155;&#21152;&#19968;&#20010;
				<tt class="literal">JRDataSource</tt>
				&#25110;<tt class="literal">Collection</tt>
				&#21040; model<tt class="interfacename">Map</tt>
				&#12290; Spring&#23558;&#20174;model&#20013;&#25214;&#21040;&#23427;&#24182;&#29992;&#20316;&#25253;&#34920;&#25968;&#25454;&#28304;&#12290;&#20363;&#22914;&#65292;&#20320;&#21487;&#33021;&#36825;&#26679;&#26500;&#36896;model&#65306;
				</p><pre class="programlisting">					private Map getModel() { Map model = new HashMap();
					Collection beanData = getBeanData();
					model.put("myBeanData", beanData); return model; }
				</pre><p>
			</p><p>
				&#31532;&#20108;&#31181;&#26041;&#24335;&#26159;&#20197;&#19968;&#20010;&#29305;&#23450;&#38190;&#20540;&#28155;&#21152;
				<tt class="literal">JRDataSource</tt>
				&#25110;<tt class="literal">Collection</tt>
				&#30340;&#23454;&#20363;&#65292; &#24182;&#25226;&#35813;&#23427;&#36171;&#32473;&#35270;&#22270;&#31867;&#30340;
				<tt class="literal">reportDataKey</tt>
				&#23646;&#24615;&#12290; &#19981;&#31649;&#21738;&#31181;&#26041;&#24335;&#65292;Spring&#37117;&#20250;&#25226;
				<tt class="literal">Collection</tt>
				&#23454;&#20363;&#36716;&#21270;&#20026;
				<tt class="literal">JRBeanCollectionDataSource</tt>
				&#23454;&#20363;&#12290;&#20363;&#22914;&#65306;
				</p><pre class="programlisting">					private Map getModel() { Map model = new HashMap();
					Collection beanData = getBeanData(); Collection
					someData = getSomeData(); model.put("myBeanData",
					beanData); model.put("someData", someData); return
					model; }
				</pre><p>
				&#36825;&#37324;&#20320;&#21487;&#20197;&#30475;&#21040;&#26377;&#20004;&#20010;
				<tt class="literal">Collection</tt>
				&#23454;&#20363;&#34987;&#21152;&#21040;model&#37324;&#12290; &#20026;&#20102;&#30830;&#20445;&#20351;&#29992;&#27491;&#30830;&#30340;&#37027;&#20010;&#65292;&#25105;&#20204;&#24471;&#36866;&#24403;&#22320;&#25913;&#21160;&#19968;&#19979;&#35270;&#22270;&#30340;&#37197;&#32622;&#65306;
				</p><pre class="programlisting">					simpleReport.class=org.springframework.web.servlet.view.jasperreports.JasperReportsPdfView
					simpleReport.url=/WEB-INF/reports/DataSourceReport.jasper
					simpleReport.reportDataKey=myBeanData
				</pre><p>
			</p><p>
				&#27880;&#24847;&#24403;&#20351;&#29992;&#31532;&#19968;&#31181;&#26041;&#24335;&#26102;&#65292;Spring&#23558;&#20351;&#29992;&#23427;&#36935;&#21040;&#30340;&#31532;&#19968;&#20010;
				<tt class="literal">JRDataSource</tt>&#25110;
				<tt class="literal">Collection</tt>
				&#12290; &#22914;&#26524;&#20320;&#35201;&#25918;&#32622;&#22810;&#20010;&#36825;&#26679;&#30340;&#23454;&#20363;&#21040;model&#20013;&#65292;&#20320;&#23601;&#24471;&#20351;&#29992;&#31532;&#20108;&#31181;&#26041;&#24335;&#12290;
			</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="view-jasper-reports-subreports"></a>14.7.4.&nbsp;&#20351;&#29992;&#23376;&#25253;&#34920;</h3></div></div><div></div></div><p>
				JasperReports&#25552;&#20379;&#20102;&#23545;&#23884;&#20837;&#22312;&#20027;&#25253;&#34920;&#25991;&#20214;&#20013;&#30340;&#23376;&#25253;&#34920;&#30340;&#25903;&#25345;&#12290;&#26377;&#22810;&#31181;&#26426;&#21046;&#25903;&#25345;&#22312;&#25253;&#34920;&#25991;&#20214;&#20013;&#21253;&#21547;&#23376;&#25253;&#34920;&#12290;
				&#26368;&#31616;&#21333;&#30340;&#26041;&#27861;&#26159;&#22312;&#35774;&#35745;&#25991;&#20214;&#20013;&#30452;&#25509;&#20889;&#20837;&#23376;&#25253;&#34920;&#30340;&#36335;&#24452;&#21644;SQL&#26597;&#35810;&#12290;
				&#36825;&#31181;&#26041;&#27861;&#30340;&#32570;&#28857;&#24456;&#26126;&#26174;&#65306;&#30456;&#20851;&#20449;&#24687;&#34987;&#30828;&#32534;&#30721;&#36827;&#25253;&#34920;&#25991;&#20214;&#65292;&#38477;&#20302;&#20102;&#21487;&#22797;&#29992;&#24615;&#65292;&#24182;&#20351;&#25253;&#34920;&#35774;&#35745;&#38590;&#20197;&#20462;&#25913;&#12290;
				&#20026;&#20102;&#20811;&#26381;&#36825;&#20123;&#65292;&#20320;&#21487;&#20197;&#22768;&#26126;&#24335;&#22320;&#37197;&#32622;&#23376;&#25253;&#34920;&#65292;&#24182;&#20026;&#20854;&#21253;&#21547;&#26356;&#22810;&#30452;&#25509;&#26469;&#33258;controller&#30340;&#25968;&#25454;&#12290;
			</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="view-jasper-reports-subreports-config-reports"></a>14.7.4.1.&nbsp;&#37197;&#32622;&#23376;&#25253;&#34920;&#25991;&#20214;</h4></div></div><div></div></div><p>
					&#20351;&#29992;Spring&#26102;&#65292;&#20026;&#20102;&#25511;&#21046;&#21738;&#20010;&#23376;&#25253;&#34920;&#25991;&#20214;&#34987;&#21253;&#21547;&#65292;&#20320;&#30340;&#25253;&#34920;&#25991;&#20214;&#24517;&#39035;&#34987;&#37197;&#32622;&#20026;&#33021;&#22815;&#20174;&#22806;&#37096;&#26469;&#28304;&#25509;&#21463;&#23376;&#25253;&#34920;&#12290;
					&#35201;&#23436;&#25104;&#36825;&#20123;&#20320;&#24471;&#22312;&#25253;&#34920;&#25991;&#20214;&#20013;&#22768;&#26126;&#19968;&#20010;&#21442;&#25968;&#65292;&#20687;&#36825;&#26679;&#65306;
					</p><pre class="programlisting">						&lt;parameter name="ProductsSubReport"
						class="net.sf.jasperreports.engine.JasperReport"/&gt;
					</pre><p>
					&#28982;&#21518;&#65292;&#20320;&#29992;&#36825;&#20010;&#21442;&#25968;&#23450;&#20041;&#19968;&#20010;&#23376;&#25253;&#34920;&#65306;
					</p><pre class="programlisting">						&lt;subreport&gt; &lt;reportElement
						isPrintRepeatedValues="false" x="5" y="25"
						width="325" height="20"
						isRemoveLineWhenBlank="true"
						backcolor="#ffcc99"/&gt; &lt;subreportParameter
						name="City"&gt;
						&lt;subreportParameterExpression&gt;&lt;![CDATA[$F{city}]]&gt;&lt;/subreportParameterExpression&gt;
						&lt;/subreportParameter&gt;
						&lt;dataSourceExpression&gt;&lt;![CDATA[$P{SubReportData}]]&gt;&lt;/dataSourceExpression&gt;
						&lt;subreportExpression
						class="net.sf.jasperreports.engine.JasperReport"&gt;
						&lt;![CDATA[$P{ProductsSubReport}]]&gt;&lt;/subreportExpression&gt;
						&lt;/subreport&gt;
					</pre><p>
					&#36825;&#26679;&#23601;&#23450;&#20041;&#20102;&#19968;&#20010;&#20027;&#25253;&#34920;&#25991;&#20214;&#65292;&#25509;&#21463;&#19968;&#20010;&#21517;&#20026;
					<tt class="literal">ProductsSubReport</tt>
					&#30340;&#21442;&#25968;&#65292; &#23427;&#30340;&#20540;&#26159;&#19968;&#20010;
					<tt class="literal">
						net.sf.jasperreports.engine.JasperReports
					</tt>
					&#31867;&#22411;&#23454;&#20363;&#12290; &#28982;&#21518;&#37197;&#32622;Jasper&#35270;&#22270;&#31867;&#26102;&#65292;&#20320;&#36890;&#36807;&#20351;&#29992;
					<tt class="literal">subReportUrls</tt>
					&#23646;&#24615;&#26469;&#21578;&#35785;Spring&#36733;&#20837;&#19968;&#20010;&#25253;&#34920;&#25991;&#20214;&#24182;&#20316;&#20026;&#23376;&#25253;&#34920;&#20256;&#36882;&#32473;JasperReports&#24341;&#25806;&#12290;
					</p><pre class="programlisting">						&lt;property name="subReportUrls"&gt;
						&lt;map&gt; &lt;entry key="ProductsSubReport"
						value="/WEB-INF/reports/subReportChild.jrxml"/&gt;
						&lt;/map&gt; &lt;/property&gt;
					</pre><p>
					&#36825;&#37324;<tt class="interfacename">Map</tt>
					&#20013;&#30340;key&#23545;&#24212;&#20110;&#25253;&#34920;&#35774;&#35745;&#25991;&#20214;&#20013;&#23376;&#25253;&#34920;&#21442;&#25968;&#30340;&#21517;&#23383;&#65292;&#23427;&#30340;&#20540;&#20195;&#34920;&#23376;&#25253;&#34920;&#25991;&#20214;&#30340;URL&#12290;
					Spring&#23558;&#36733;&#20837;&#35813;&#25991;&#20214;&#65292;&#38656;&#35201;&#30340;&#35805;&#36827;&#34892;&#32534;&#35793;&#65292;&#28982;&#21518;&#20197;&#32473;&#23450;&#30340;key&#20026;&#21442;&#25968;&#21517;&#20256;&#36882;&#32473;JasperReports&#24341;&#25806;&#12290;
				</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="view-jasper-reports-subreports-config-datasources"></a>14.7.4.2.&nbsp;&#37197;&#32622;&#23376;&#25253;&#34920;&#25968;&#25454;&#28304;</h4></div></div><div></div></div><p>
					&#24403;&#20351;&#29992;Spring&#37197;&#32622;&#23376;&#25253;&#34920;&#26102;&#65292;&#36825;&#19968;&#27493;&#23436;&#20840;&#26159;&#21487;&#36873;&#30340;&#12290;&#22914;&#26524;&#20320;&#21916;&#27426;&#65292;&#20173;&#21487;&#20197;&#20351;&#29992;&#38745;&#24577;&#26597;&#35810;&#20316;&#20026;&#23376;&#25253;&#34920;&#30340;&#25968;&#25454;&#28304;&#12290;
					&#28982;&#32780;&#65292;&#22914;&#26524;&#20320;&#24076;&#26395;Spring&#25226;&#20320;&#36820;&#22238;&#30340;
					<tt class="literal">ModelAndView</tt>&#20013;&#30340;&#25968;&#25454;&#36716;&#21270;&#20026;
					<tt class="literal">JRDataSource</tt>&#65292; &#20320;&#23601;&#24471;&#21578;&#35785;Spring
					<tt class="literal">ModelAndView</tt>
					&#20013;&#30340;&#37027;&#20010;&#21442;&#25968;&#38656;&#35201;&#34987;&#36716;&#21270;&#12290; &#23454;&#38469;&#25805;&#20316;&#26102;&#65292;&#20320;&#38656;&#35201;&#20351;&#29992;&#25152;&#36873;&#35270;&#22270;&#31867;&#30340;
					<tt class="literal">subReportDataKeys</tt>
					&#23646;&#24615;&#65292;&#20026;&#20854;&#37197;&#32622;&#19968;&#20010;&#21442;&#25968;&#21517;&#21015;&#34920;&#65306;
					</p><pre class="programlisting">						&lt;property name="subReportDataKeys"
						value="SubReportData"/&gt;
					</pre><p>
					&#36825;&#37324;&#25552;&#20379;&#30340;key&#20540;&#24517;&#39035;&#19982;<tt class="literal">ModelAndView</tt>&#21644;&#25253;&#34920;&#35774;&#35745;&#25991;&#20214;&#20013;&#20351;&#29992;&#30340;key&#20540;&#23545;&#24212;&#12290;
				</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="view-jasper-reports-exporter-parameters"></a>14.7.5.&nbsp;&#37197;&#32622;Exporter&#30340;&#21442;&#25968;</h3></div></div><div></div></div><p>
				&#22914;&#26524;&#20320;&#23545;exporter&#30340;&#37197;&#32622;&#26377;&#29305;&#27530;&#35201;&#27714;&#65292;&#27604;&#22914;&#20320;&#21487;&#33021;&#35201;&#27714;&#29305;&#23450;&#39029;&#38754;&#23610;&#23544;&#30340;PDF&#25253;&#34920;&#65292;
				&#37027;&#20320;&#21487;&#20197;&#22312;Spring&#37197;&#32622;&#25991;&#20214;&#20013;&#22768;&#26126;&#24335;&#22320;&#37197;&#32622;&#36825;&#20123;&#65292;&#36890;&#36807;&#20351;&#29992;&#35270;&#22270;&#31867;&#30340;
				<tt class="literal">exporterParameters</tt>
				&#23646;&#24615;&#65292; &#35813;&#23646;&#24615;&#26159;<tt class="interfacename">Map</tt>
				&#22411;&#20540;&#65292;&#20854;&#20013;&#30340;key&#24212;&#35813;&#26159;&#19968;&#20010;&#20195;&#34920;exporter&#21442;&#25968;&#23450;&#20041;&#30340;&#38745;&#24577;&#22495;&#30340;&#20840;&#38480;&#23450;&#21517;&#65292;value&#26159;&#35201;&#36171;&#32473;&#21442;&#25968;&#30340;&#20540;&#12290;
				&#31034;&#20363;&#22914;&#19979;&#65306;
			</p><pre class="programlisting">				&lt;bean id="htmlReport"
				class="org.springframework.web.servlet.view.jasperreports.JasperReportsHtmlView"&gt;
				&lt;property name="url"
				value="/WEB-INF/reports/simpleReport.jrxml"/&gt;
				&lt;property name="exporterParameters"&gt; &lt;map&gt;
				&lt;entry
				key="net.sf.jasperreports.engine.export.JRHtmlExporterParameter.HTML_FOOTER"&gt;
				&lt;value&gt;Footer by Spring!
				&amp;lt;/td&amp;gt;&amp;lt;td
				width="50%"&amp;gt;&amp;amp;nbsp;
				&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;
				&amp;lt;/table&amp;gt;&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;
				&lt;/value&gt; &lt;/entry&gt; &lt;/map&gt;
				&lt;/property&gt; &lt;/bean&gt;
			</pre><p>
				&#36825;&#37324;&#20320;&#21487;&#20197;&#30475;&#21040;&#65292;&#25105;&#20204;&#20026;
				<tt class="classname">JasperReportsHtmlView</tt>
				&#37197;&#32622;&#20102;&#19968;&#20010;exporter&#21442;&#25968;&#65292; &#21442;&#25968;
				<tt class="literal">
					net.sf.jasperreports.engine.export.JRHtmlExporterParameter.HTML_FOOTER
				</tt>
				&#23450;&#20041;&#20102;&#32467;&#26524;HTML&#20013;&#30340;&#39029;&#33050;&#12290;
			</p></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="webintegration"></a>Chapter&nbsp;15.&nbsp;&#38598;&#25104;&#20854;&#23427;Web&#26694;&#26550;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="intro"></a>15.1.&nbsp;&#31616;&#20171;</h2></div></div><div></div></div><p>
            &#26412;&#31456;&#23558;&#35814;&#32454;&#20171;&#32461;Spring&#22914;&#20309;&#19982; <a href="http://struts.apache.org/" target="_top">Struts</a>&#65292;
            <a href="http://java.sun.com/javaee/javaserverfaces/" target="_top">JSF</a>&#65292;
            <a href="http://jakarta.apache.org/tapestry/" target="_top">Tapestry</a>&#20197;&#21450;
            <a href="http://www.opensymphony.com/webwork/" target="_top">WebWork</a> &#31561;&#31532;&#19977;&#26041;&#26694;&#26550;&#38598;&#25104;&#12290;
        </p><div class="sidebar"><p class="title"><b>Spring WebFlow</b></p><p>Spring Web Flow&#65288;SWF&#65289;&#30340;&#30446;&#26631;&#26159;&#25104;&#20026;Web&#24212;&#29992;&#31243;&#24207;&#39029;&#38754;&#27969;&#36716;&#31649;&#29702;&#30340;&#26368;&#20339;&#35299;&#20915;&#26041;&#26696;&#12290;</p><p>SWF&#22312;servlet&#21644;portlet&#29615;&#22659;&#20013;&#37117;&#19982;&#27604;&#22914;Spring MVC&#65292;Struts&#65292;&#21644;JSF&#36825;&#26679;&#30340;&#29616;&#23384;&#26694;&#26550;&#38598;&#25104;&#22312;&#19968;&#36215;&#12290;
  &#22914;&#26524;&#20320;&#38754;&#23545;&#30340;&#26159;&#19968;&#20010;&#26356;&#33021;&#24471;&#30410;&#20110;&#20316;&#20026;&#23545;&#35805;&#27169;&#22411;&#65292;&#32780;&#19981;&#26159;&#21333;&#32431;&#30340;&#35831;&#27714;&#27169;&#22411;&#30340;&#19994;&#21153;&#27969;&#31243;&#65288;&#25110;&#22810;&#20010;&#27969;&#31243;&#65289;&#30340;&#35805;&#65292;
  &#37027;&#20040;SWF&#21487;&#33021;&#23601;&#26159;&#35299;&#20915;&#26041;&#26696;&#20102;&#12290;</p><p>SWF&#20351;&#20320;&#33021;&#22815;&#25226;&#36923;&#36753;&#19978;&#30340;&#39029;&#38754;&#27969;&#36716;&#25429;&#25417;&#20026;&#33258;&#23481;&#32435;&#30340;&#27169;&#22359;&#65292;&#24182;&#22312;&#19981;&#21516;&#30340;&#24773;&#24418;&#19979;&#34987;&#22797;&#29992;&#12290;
  &#32780;&#36825;&#23545;&#20110;&#24320;&#21457;&#35201;&#24341;&#23548;&#29992;&#25143;&#23436;&#25104;&#21463;&#25511;&#30340;&#27983;&#35272;&#21160;&#20316;&#65292;&#20174;&#32780;&#39537;&#21160;&#19994;&#21153;&#27969;&#31243;&#30340;Web&#24212;&#29992;&#31243;&#24207;&#27169;&#22359;&#27491;&#26159;&#29702;&#24819;&#30340;&#12290;</p><p>&#20851;&#20110;SWF&#30340;&#26356;&#22810;&#20449;&#24687;&#65292;&#35831;&#35775;&#38382;<a href="http://www.springframework.org/webflow" target="_top">Spring WebFlow&#31449;&#28857;</a>&#12290;</p></div><p>
          Spring &#26694;&#26550;&#26368;&#20855;&#26680;&#24515;&#20215;&#20540;&#30340;&#19968;&#20010;&#25552;&#35758;&#23601;&#26159;&#20801;&#35768; <span class="emphasis"><em>&#36873;&#25321;</em></span>&#12290;&#24635;&#30340;&#26469;&#35828;&#65292;
        	Spring &#19981;&#20250;&#24378;&#36843;&#22823;&#23478;&#21435;&#20351;&#29992;&#25110;&#32773;&#26159;&#36141;&#20080;&#20219;&#20309;&#29305;&#23450;&#30340;&#26550;&#26500;&#65292;&#25216;&#26415;&#25110;&#32773;&#24320;&#21457;&#26041;&#27861;&#65288;&#34429;&#28982;&#23427;&#32943;&#23450;&#20250;&#26377;&#20542;&#21521;&#24615;&#30340;&#25512;&#33616;&#19968;&#20123;&#65289;&#12290;
        	&#36873;&#25321;&#26550;&#26500;&#12289;&#25216;&#26415;&#12289;&#24320;&#21457;&#26041;&#27861;&#30340;&#33258;&#30001;&#26159;&#19982;&#24320;&#21457;&#20154;&#21592;&#20197;&#21450;&#20182;&#65288;&#22905;&#65289;&#25152;&#22312;&#30340;&#24320;&#21457;&#22242;&#38431;&#25114;&#25114;&#30456;&#20851;&#30340;&#65292;
        	&#36825;&#22312; Web &#39046;&#22495;&#26159;&#20010;&#19981;&#20105;&#30340;&#20107;&#23454;&#12290;Spring &#25552;&#20379;&#20102;&#33258;&#24049;&#30340; Web &#26694;&#26550;&#65288;SpringMVC&#65289;&#65292;
        	&#21516;&#26102;&#23427;&#20063;&#25552;&#20379;&#20102;&#19982;&#20854;&#23427;&#27969;&#34892;&#30340; Web &#26694;&#26550;&#25972;&#21512;&#30340;&#33021;&#21147;&#12290;&#36825;&#23601;&#20801;&#35768;&#24320;&#21457;&#20154;&#21592;&#20805;&#20998;&#21033;&#29992;&#24050;&#32463;&#25484;&#25569;&#30340;&#25216;&#26415;&#65292;
        	&#27604;&#22914;&#26576;&#20154;&#21487;&#20197;&#20351;&#29992;&#20182;&#25152;&#29087;&#24713;&#30340; Struts &#26694;&#26550;&#65292;&#21516;&#26102;&#20182;&#20063;&#21487;&#20197;&#20139;&#21463; Spring &#25552;&#20379;&#30340;&#20854;&#20182;&#21151;&#33021;&#65292;
        	&#20363;&#22914;&#25968;&#25454;&#35775;&#38382;&#65292;&#22768;&#26126;&#24335;&#20107;&#21153;&#22788;&#29702;&#65292;&#20197;&#21450;&#28789;&#27963;&#30340;&#37197;&#32622;&#21644;&#26041;&#20415;&#30340;&#24212;&#29992;&#38598;&#25104;&#12290;
        </p><p>
            &#19978;&#19968;&#27573;&#31616;&#21333;&#20171;&#32461;&#20102;Spring&#30340;&#19968;&#20123;&#21334;&#28857;&#65292;&#36825;&#31456;&#21097;&#19979;&#30340;&#37096;&#20998;&#23558;&#38598;&#20013;&#20171;&#32461;&#22914;&#20309;&#29992; Spring &#38598;&#25104;&#20320;&#25152;&#21916;&#27426;&#30340; Web &#26694;&#26550;&#12290;
        	&#37027;&#20123;&#20174;&#20854;&#20182;&#35821;&#35328;&#36716;&#21521; Java &#30340;&#24320;&#21457;&#32773;&#20204;&#32463;&#24120;&#35828;&#65292;Java &#37324;&#38754;&#30340; Web &#26694;&#26550;&#26159;&#22312;&#22826;&#22810;&#20102;...&#20107;&#23454;&#30340;&#30830;&#22914;&#27492;&#65307;
        	&#36825;&#20063;&#24847;&#21619;&#30528;&#22312;&#19968;&#20010;&#31456;&#33410;&#37324;&#24819;&#35201;&#28085;&#30422;&#25152;&#26377;&#26694;&#26550;&#30340;&#32454;&#33410;&#26159;&#32477;&#23545;&#19981;&#21487;&#33021;&#30340;&#12290;&#36825;&#19968;&#31456;&#36873;&#25321;&#20102; Java &#20013;&#22235;&#20010;&#26368;&#27969;&#34892;&#30340; Web &#26694;&#26550;&#65292;
        	&#39318;&#20808;&#20171;&#32461;&#23545;&#20110;&#25152;&#26377;&#26694;&#26550;&#37117;&#36866;&#29992;&#30340; Spring &#37197;&#32622;&#65292;&#28982;&#21518;&#23545;&#27599;&#20010;&#25903;&#25345;&#30340; Web &#26694;&#26550;&#25552;&#20379;&#35814;&#32454;&#30340;&#38598;&#25104;&#36873;&#39033;&#12290;
        </p><p>
			<span class="emphasis"><em>
				&#35831;&#27880;&#24847;&#36825;&#19968;&#31456;&#24182;&#19981;&#35299;&#37322;&#22914;&#20309;&#20351;&#29992;&#26576;&#31181;&#29305;&#23450;&#30340; Web &#26694;&#26550;&#12290;&#20030;&#20010;&#20363;&#23376;&#65292;&#22914;&#26524;&#20320;&#24819;&#35201;&#20351;&#29992; Struts 
				&#20316;&#20026; Web &#24212;&#29992;&#30340;&#34920;&#29616;&#23618;&#65292;&#22312;&#38405;&#35835;&#26412;&#31456;&#20197;&#21069;&#65292;&#20320;&#24212;&#35813;&#24050;&#32463;&#29087;&#24713;&#20102; Struts&#12290;
				&#22914;&#26524;&#20320;&#24819;&#35201;&#20102;&#35299;&#37027;&#20123; Web &#26694;&#26550;&#30340;&#35814;&#32454;&#20449;&#24687;&#65292;&#35831;&#21442;&#32771;&#26412;&#31456;&#30340;&#32467;&#23614;&#65306;<a href="#webintegration-resources" title="15.7.&nbsp;&#26356;&#22810;&#36164;&#28304;">Section&nbsp;15.7, &#8220;&#26356;&#22810;&#36164;&#28304;&#8221;</a>&#12290;
            </em></span>
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="webintegration-common"></a>15.2.&nbsp;&#36890;&#29992;&#37197;&#32622;</h2></div></div><div></div></div><p>
            &#22312;&#28145;&#20837;&#30740;&#31350;&#22914;&#20309;&#38598;&#25104;&#21463;&#25903;&#25345;&#30340; Web &#26694;&#26550;&#20043;&#21069;&#65292;&#35753;&#25105;&#20204;&#20808;&#30475;&#30475;&#23545;<span class="emphasis"><em>&#25152;&#26377;</em></span>
        	 Web &#26694;&#26550;&#37117;&#36866;&#29992;&#30340; Spring &#37197;&#32622;&#12290;&#65288;&#36825;&#19968;&#33410;&#21516;&#26679;&#36866;&#29992;&#20110; Spring &#33258;&#24049;&#30340; Web &#26694;&#26550;&#65292;SpringMVC&#65289;&#12290;
        </p><p>
            &#22312; Spring &#25152;&#25903;&#25345;&#30340;&#36731;&#37327;&#32423;&#24212;&#29992;&#27169;&#22411;&#20013;&#65292;&#26377;&#19968;&#20010;&#27010;&#24565;&#21483;&#8220;&#20998;&#23618;&#26550;&#26500;&#8221;&#12290;&#22312;&#32463;&#20856;&#30340;&#20998;&#23618;&#26550;&#26500;&#20013;&#65292;
        	Web &#23618;&#21482;&#26159;&#24456;&#22810;&#23618;&#20013;&#30340;&#19968;&#23618;...&#23427;&#26159;&#26381;&#21153;&#22120;&#31471;&#24212;&#29992;&#30340;&#19968;&#20010;&#20837;&#21475;&#65292;&#23427;&#23558;&#35831;&#27714;&#22996;&#27966;&#32473;&#23450;&#20041;&#22312;&#26381;&#21153;&#23618;&#30340;&#26381;&#21153;&#23545;&#35937;
			&#65288;&#38376;&#38754;&#65289;&#20197;&#28385;&#36275;&#19994;&#21153;&#29992;&#20363;&#38656;&#27714;&#65288;&#36825;&#20123;&#26159;&#34920;&#29616;&#23618;&#25216;&#26415;&#35302;&#21450;&#19981;&#21040;&#30340;&#65289;&#12290;&#22312; Spring &#20013;&#65292;&#36825;&#20123;&#26381;&#21153;&#23545;&#35937;&#65292;&#20197;&#21450;&#20854;&#20182;&#30340;&#19994;&#21153;&#23545;&#35937;&#65292;
        	&#25968;&#25454;&#35775;&#38382;&#23545;&#35937;&#31561;&#31561;&#65292;&#37117;&#23384;&#22312;&#20110;&#19968;&#20010;&#29420;&#31435;&#30340;&#8220;businnes context&#8221;&#20013;&#65292;&#36825;&#20010;context<span class="emphasis"><em>&#19981;</em></span>&#21547;&#26377;&#20219;&#20309; Web 
			&#25110;&#32773;&#34920;&#29616;&#23618;&#30340;&#23545;&#35937;&#65288;&#34920;&#29616;&#23618;&#23545;&#35937;&#35832;&#22914; Spring MVC &#25511;&#21046;&#22120;&#36890;&#24120;&#34987;&#37197;&#32622;&#20110;&#19968;&#20010;&#29420;&#31435;&#30340;&#8220;presentation context&#8221;&#20013;&#65289;&#12290;
        	&#36825;&#19968;&#33410;&#35814;&#32454;&#20171;&#32461;&#22312;&#19968;&#20010;&#24212;&#29992;&#20013;&#22914;&#20309;&#37197;&#32622;&#19968;&#20010; Spring &#23481;&#22120;&#65288;<tt class="classname">WebApplicationContext</tt>&#65289;&#26469;&#23481;&#32435;&#25152;&#26377;&#30340;&#8220;business beans&#8221;&#12290;
        </p><p>
			&#29616;&#22312;&#36827;&#20837;&#32454;&#33410;&#37096;&#20998;...&#25152;&#26377;&#20320;&#38656;&#35201;&#20570;&#30340;&#23601;&#26159;&#22312; Web &#24212;&#29992;&#30340; <tt class="literal">web.xml</tt> &#25991;&#20214;&#20013;&#22768;&#26126;&#19968;&#20010;
			<a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/web/context/ContextLoaderListener.html" target="_top"><tt class="classname">ContextLoaderListener</tt></a>&#65292;
			&#24182;&#19988;&#22312;&#21516;&#19968;&#25991;&#20214;&#37324;&#22686;&#21152;&#19968;&#20010; <tt class="literal">contextConfigLocation</tt> &lt;context-param/&gt; &#65292;
			&#36825;&#20010;&#22768;&#26126;&#20915;&#23450;&#20102;&#21738;&#20123; Spring XML &#37197;&#32622;&#25991;&#20214;&#20250;&#34987;&#21152;&#36733;&#12290;
		</p><p>
			&#20197;&#19979;&#26159; &lt;listener/&gt; &#30340;&#37197;&#32622;&#65306;
		</p><pre class="programlisting">&lt;listener&gt;
    &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;
&lt;/listener&gt;</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>
				Listeners &#26159;&#22312; Servlet API 2.3 &#29256;&#26412;&#20013;&#25165;&#21152;&#20837;&#30340;&#65307;&#32780; listener &#30340;&#21551;&#21160;&#39034;&#24207;&#22312; Servlet 2.4 &#29256;&#26412;&#32456;&#20110;&#26126;&#30830;&#12290;
				&#22914;&#26524;&#20320;&#20351;&#29992;&#21482;&#25903;&#25345; Servlet 2.2 &#29256;&#26412;&#30340;&#23481;&#22120;&#65292;&#20320;&#21487;&#20197;&#36890;&#36807;&#32431;&#23884;&#20837;&#26041;&#24335;&#20351;&#29992;
				<a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/web/context/ContextLoaderServlet.html" target="_top"><tt class="classname">ContextLoaderServlet</tt></a>
				&#23436;&#25104;&#30456;&#21516;&#30340;&#21151;&#33021;(&#23601;&#21551;&#21160;&#39034;&#24207;&#32780;&#35328;)&#12290;
			</p></td></tr></tbody></table></div><p>
			&#20197;&#19979;&#26159; &lt;context-param/&gt; &#30340;&#37197;&#32622;&#65306;
		</p><pre class="programlisting">&lt;context-param&gt;
    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
    &lt;param-value&gt;/WEB-INF/applicationContext*.xml&lt;/param-value&gt;
&lt;/context-param&gt;</pre><p>
			&#22914;&#26524;&#27809;&#26377;&#25351;&#23450; <tt class="literal">contextConfigLocation</tt> &#30340;context&#21442;&#25968;&#65292;
			<tt class="classname">ContextLoaderListener</tt>
			&#23558;&#20250;&#26597;&#25214;&#19968;&#20010;&#21517;&#20026; <tt class="literal">/WEB-INF/applicationContext.xml</tt> &#30340;&#25991;&#20214;&#21152;&#36733;&#12290;
			&#19968;&#26086;context&#25991;&#20214;&#34987;&#21152;&#36733;&#65292;Spring &#36890;&#36807;&#25991;&#20214;&#20013; bean &#30340;&#23450;&#20041;&#21019;&#24314;&#19968;&#20010;
			<a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/web/context/WebApplicationContext.html" target="_top"><tt class="classname">WebApplicationContext</tt></a>
			&#23545;&#35937;&#24182;&#19988;&#23558;&#23427;&#20648;&#23384;&#22312; Web &#24212;&#29992;&#30340; <span class="interface">ServletContext</span> &#20013;&#12290;
		</p><p>
			&#25152;&#26377;Java Web&#26694;&#26550;&#37117;&#26500;&#24314;&#22312;Servlet API&#20043;&#19978;&#65292;&#25152;&#20197;&#65292;&#21487;&#20197;&#20351;&#29992;&#19979;&#38754;&#30340;&#20195;&#30721;&#29255;&#26029;&#35775;&#38382;&#36825;&#20010;
			&#30001; <tt class="classname">ContextLoaderListener</tt> &#21019;&#24314;&#30340;<span class="interface">ApplicationContext</span>&#12290;
		</p><pre class="programlisting">WebApplicationContext ctx = WebApplicationContextUtils.getWebApplicationContext(servletContext);</pre><p>
			<a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/web/context/support/WebApplicationContextUtils.html" target="_top"><tt class="classname">WebApplicationContextUtils</tt></a>
			&#36825;&#20010;&#31867;&#25552;&#20379;&#20102;&#26041;&#20415;&#30340;&#21151;&#33021;&#65292;&#36825;&#26679;&#20320;&#23601;&#19981;&#24517;&#21435;&#35760; <span class="interface">ServletContext</span> &#20013;&#23646;&#24615;&#30340;&#21517;&#23383;&#12290;
			&#23427;&#30340; <span class="emphasis"><em>getWebApplicationContext()</em></span> &#26041;&#27861;&#22312;
			<tt class="literal">WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE</tt> 
			&#36825;&#20010;&#38190;&#20540;&#19981;&#23545;&#24212;&#20219;&#20309;&#23545;&#35937;&#30340;&#26102;&#20505;&#23558;&#36820;&#22238; <tt class="literal">null</tt>&#12290;
			&#19981;&#36807;&#65292;&#20026;&#20102;&#36991;&#20813;&#22312;&#24212;&#29992;&#20013;&#24471;&#21040; <tt class="classname">NullPointerExceptions</tt>
			&#65292;&#25105;&#20204;&#25512;&#33616;&#20320;&#20351;&#29992; <tt class="literal">getRequiredWebApplicationContext()</tt> &#26041;&#27861;&#12290;
			&#36825;&#20010;&#26041;&#27861;&#22312;<span class="interface">ApplicationContext</span> &#32570;&#22833;&#30340;&#26102;&#20505;&#20250;&#25243;&#20986;&#19968;&#20010;&#24322;&#24120;&#12290;
		</p><p>
			&#19968;&#26086;&#20320;&#33719;&#24471;&#20102;&#19968;&#20010; <tt class="classname">WebApplicationContext</tt> &#30340;&#24341;&#29992;&#65292;
			&#23601;&#21487;&#20197;&#36890;&#36807; bean &#30340;&#21517;&#23383;&#25110;&#31867;&#22411;&#26469;&#33719;&#24471;&#23427;&#20204;&#12290;&#22823;&#22810;&#25968;&#24320;&#21457;&#20154;&#21592;&#36890;&#36807;&#21517;&#23383;&#33719;&#24471; bean&#65292;&#28982;&#21518;&#23558;&#23427;&#20204;&#36716;&#25442;&#25104;&#30456;&#24212;&#30340;&#25509;&#21475;&#31867;&#22411;&#12290;
		</p><p>
			&#24184;&#36816;&#30340;&#26159;&#65292;&#36825;&#19968;&#33410;&#20013;&#30340;&#22823;&#22810;&#25968;&#26694;&#26550;&#37117;&#26377;&#26356;&#31616;&#21333;&#30340;&#26041;&#27861;&#26469;&#26597;&#35810; bean&#12290;&#25105;&#20204;&#19981;&#20165;&#20165;&#21487;&#20197;&#26356;&#31616;&#21333;&#22320;&#20174; Spring &#23481;&#22120;&#20013;
			&#24471;&#21040; bean&#65292;&#25105;&#20204;&#36824;&#21487;&#20197;&#22312;&#25511;&#21046;&#22120;&#20013;&#20351;&#29992; Spring &#20381;&#36182;&#27880;&#20837;&#30340;&#29305;&#24615;&#12290;&#19979;&#38754;&#30340;&#20960;&#20010;&#23567;&#33410;&#26159;&#27599;&#31181;&#26694;&#26550;&#38598;&#25104;&#31574;&#30053;&#30340;&#35814;&#32454;&#25551;&#36848;&#12290;
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="jsf"></a>15.3.&nbsp;JavaServer Faces</h2></div></div><div></div></div><p>
			JavaServer Faces (JSF) &#26159;&#19968;&#20010;&#22522;&#20110;&#32452;&#20214;&#30340;&#65292;&#20107;&#20214;&#39537;&#21160;&#30340; Web &#26694;&#26550;&#12290;&#36825;&#20010;&#26694;&#26550;&#24456;&#21463;&#27426;&#36814;&#12290;
			Spring &#19982; JSF &#38598;&#25104;&#30340;&#20851;&#38190;&#31867;&#26159; <tt class="classname">DelegatingVariableResolver</tt>&#12290;
		</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jsf-delegatingvariableresolver"></a>15.3.1.&nbsp;DelegatingVariableResolver</h3></div></div><div></div></div><p>
				&#23558; Spring &#20013;&#38388;&#23618;&#19982; JSF Web &#23618;&#25972;&#21512;&#30340;&#26368;&#31616;&#21333;&#21150;&#27861;&#23601;&#26159;&#20351;&#29992;
				<a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/web/jsf/DelegatingVariableResolver.html" target="_top">
				<tt class="classname">DelegatingVariableResolver</tt></a> &#31867;&#12290;
				&#35201;&#22312;&#24212;&#29992;&#20013;&#37197;&#32622;&#21464;&#37327;&#35299;&#26512;&#22120;&#65288;Variable Resolver&#65289;&#65292;&#20320;&#38656;&#35201;&#32534;&#36753; <span class="emphasis"><em>faces-context.xml</em></span> &#25991;&#20214;&#12290;
				&#22312; <tt class="literal">&lt;faces-config/&gt;</tt> &#20803;&#32032;&#37324;&#38754;&#22686;&#21152;&#19968;&#20010; <tt class="literal">&lt;application/&gt;</tt>
				&#20803;&#32032;&#21644;&#19968;&#20010; <tt class="literal">&lt;variable-resolver/&gt;</tt> &#20803;&#32032;&#12290;
				&#21464;&#37327;&#35299;&#26512;&#22120;&#30340;&#20540;&#23558;&#24341;&#29992; Spring &#30340; <tt class="classname">DelegatingVariableResolver</tt>&#12290;&#20363;&#22914;&#65306;
			</p><pre class="programlisting">&lt;faces-config&gt;
  &lt;application&gt;
    &lt;variable-resolver&gt;org.springframework.web.jsf.DelegatingVariableResolver&lt;/variable-resolver&gt;
      &lt;locale-config&gt;
        &lt;default-locale&gt;en&lt;/default-locale&gt;
        &lt;supported-locale&gt;en&lt;/supported-locale&gt;
        &lt;supported-locale&gt;es&lt;/supported-locale&gt;
      &lt;/locale-config&gt;
      &lt;message-bundle&gt;messages&lt;/message-bundle&gt;
    &lt;/application&gt;
&lt;/faces-config&gt;</pre><p>
				<tt class="classname">DelegatingVariableResolver</tt> &#39318;&#20808;&#20250;&#23558;&#26597;&#35810;&#35831;&#27714;&#22996;&#27966;&#21040; JSF &#23454;&#29616;&#30340;
				&#40664;&#35748;&#30340;&#35299;&#26512;&#22120;&#20013;&#65292;&#28982;&#21518;&#25165;&#26159; Spring &#30340;&#8220;business context&#8221; <tt class="classname">WebApplicationContext</tt>&#12290;
				&#36825;&#20351;&#24471;&#22312;JSF &#25152;&#31649;&#29702;&#30340; bean &#20013;&#20351;&#29992;&#20381;&#36182;&#27880;&#23556;&#38750;&#24120;&#23481;&#26131;&#12290;
			</p><p>
				JSF &#25152;&#31649;&#29702;&#30340; bean &#37117;&#23450;&#20041;&#22312; <tt class="literal">faces-config.xml</tt> &#25991;&#20214;&#20013;&#12290;
				&#19979;&#38754;&#20363;&#23376;&#20013;&#30340; <tt class="literal">#{userManager}</tt> &#26159;&#19968;&#20010;&#21462;&#33258; Spring &#30340;&#8220;business context&#8221;&#30340; bean&#12290;
			</p><pre class="programlisting">&lt;managed-bean&gt;
  &lt;managed-bean-name&gt;userList&lt;/managed-bean-name&gt;
	&lt;managed-bean-class&gt;com.whatever.jsf.UserList&lt;/managed-bean-class&gt;
  &lt;managed-bean-scope&gt;request&lt;/managed-bean-scope&gt;
  &lt;managed-property&gt;
    &lt;property-name&gt;userManager&lt;/property-name&gt;
    &lt;value&gt;#{userManager}&lt;/value&gt;
  &lt;/managed-property&gt;
&lt;/managed-bean&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jsf-facescontextutils"></a>15.3.2.&nbsp;FacesContextUtils</h3></div></div><div></div></div><p>
				&#22914;&#26524;&#25152;&#26377;&#23646;&#24615;&#24050;&#32463;&#26144;&#23556;&#21040; <span class="emphasis"><em>faces-config.xml</em></span> &#25991;&#20214;&#20013;&#30456;&#20851;&#30340;bean&#65292;
				&#19968;&#20010;&#33258;&#23450;&#20041;&#30340; <tt class="interfacename">VariableResolver</tt> &#20063;&#21487;&#20197;&#24037;&#20316;&#30340;&#24456;&#22909;&#12290;
				&#20294;&#26159;&#26377;&#20123;&#24773;&#20917;&#19979;&#20320;&#38656;&#35201;&#26174;&#24335;&#33719;&#21462;&#19968;&#20010;bean&#12290;&#36825;&#26102;&#65292;
				<a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/web/jsf/FacesContextUtils.html" target="_top">
				<tt class="classname">FacesContextUtils</tt></a> &#21487;&#20197;&#20351;&#36825;&#20010;&#20219;&#21153;&#21464;&#24471;&#24456;&#23481;&#26131;&#12290;&#23427;&#31867;&#20284;&#20110;
				<tt class="classname">WebApplicationContextUtils</tt>&#65292;
				&#19981;&#36807;&#23427;&#25509;&#21463; <tt class="classname">FacesContext</tt> &#32780;&#19981;&#26159; <span class="interface">ServletContext</span> &#20316;&#20026;&#21442;&#25968;&#12290;
			</p><pre class="programlisting">ApplicationContext ctx = FacesContextUtils.getWebApplicationContext(FacesContext.getCurrentInstance());</pre><p>
				&#25105;&#20204;&#25512;&#33616;&#20351;&#29992; <tt class="classname">DelegatingVariableResolver</tt> &#23454;&#29616; JSF &#21644; Spring &#30340;&#38598;&#25104;&#12290;
				&#22914;&#26524;&#20320;&#24819;&#35201;&#26356;&#20840;&#38754;&#30340;&#38598;&#25104;&#65292;&#21487;&#20197;&#30475;&#30475; 
				<a href="http://jsf-spring.sourceforge.net/" target="_top">JSF-Spring</a> &#36825;&#20010;&#39033;&#30446;&#12290;
			</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="struts"></a>15.4.&nbsp;Struts</h2></div></div><div></div></div><p>
			<a href="http://struts.apache.org/" target="_top">Struts</a> &#26159; <span class="emphasis"><em>&#24212;&#29992;&#26368;&#24191;&#30340;</em></span> 
			Java Web &#24320;&#21457;&#26694;&#26550;&#65292;&#20027;&#35201;&#26159;&#22240;&#20026;&#23427;&#26159;&#26368;&#20808;&#21457;&#34892;&#30340;&#20960;&#20010;&#26694;&#26550;&#20043;&#19968;&#65288;2001&#24180;6&#26376;&#65289;&#12290;&#36825;&#20010;&#26694;&#26550;&#30001;
			Craig McClanahan &#24320;&#21457;&#23436;&#25104;&#65292;&#29616;&#22312;&#20316;&#20026; Apache &#36719;&#20214;&#22522;&#37329;&#20250;&#30340;&#19968;&#20010;&#24320;&#28304;&#39033;&#30446;&#12290;
			&#24403;&#26102;&#65292;&#23427;&#26497;&#22823;&#22320;&#31616;&#21270;&#20102; JSP/Servlet &#32534;&#31243;&#33539;&#20363;&#24182;&#19988;&#36194;&#24471;&#20102;&#22823;&#22810;&#25968;&#27491;&#22312;&#20351;&#29992;&#31169;&#20154;&#26694;&#26550;&#30340;&#24320;&#21457;&#20154;&#21592;&#30340;&#38738;&#30544;&#12290;&#23427;&#31616;&#21270;&#20102;&#32534;&#31243;&#27169;&#22411;&#65292;&#23427;&#26159;&#24320;&#28304;&#30340;&#65292;&#23427;&#20855;&#26377;&#19968;&#20010;
			&#24222;&#22823;&#30340;&#31038;&#21306;&#65292;&#36825;&#20123;&#37117;&#20351;&#24471;&#36825;&#20010;&#39033;&#30446;&#24555;&#36895;&#25104;&#38271;&#65292;&#21516;&#26102;&#21464;&#24471;&#36234;&#26469;&#36234;&#27969;&#34892;&#12290;
		</p><p>
			&#35201;&#38598;&#25104;Struts &#19982; Spring&#65292;&#26377;&#20004;&#20010;&#36873;&#25321;&#65306;
		</p><div class="itemizedlist"><ul type="disc"><li><p>
   					&#37197;&#32622; Spring &#23558; Action &#20316;&#20026; bean &#25176;&#31649;&#65292;&#20351;&#29992; <tt class="classname">ContextLoaderPlugin</tt>&#65292;
						&#24182;&#19988;&#22312; Spring context&#20013;&#35774;&#32622;&#20381;&#36182;&#20851;&#31995;&#12290;
				</p></li><li><p>
   					&#32487;&#25215; Spring &#30340; <tt class="classname">ActionSupport</tt> &#31867;&#24182;&#19988;
						&#20351;&#29992;<span class="emphasis"><em>getWebApplicationContext()</em></span> &#26041;&#27861;&#33719;&#21462; Spring &#31649;&#29702;&#30340; bean&#12290;
				</p></li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="struts-contextloaderplugin"></a>15.4.1.&nbsp;ContextLoaderPlugin</h3></div></div><div></div></div><p>
				<a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/web/struts/ContextLoaderPlugIn.html" target="_top"><tt class="classname">ContextLoaderPlugin</tt></a>
				&#26159; Struts 1.1+ &#30340;&#25554;&#20214;&#65292;&#29992;&#26469;&#20026; Struts &#30340; <tt class="classname">ActionServlet</tt> &#21152;&#36733; Spring context&#25991;&#20214;&#12290;
				&#36825;&#20010;context&#24341;&#29992; <tt class="classname">WebApplicationContext</tt> &#65288;&#30001; <tt class="classname">ContextLoaderListener</tt> &#21152;&#36733;&#65289;
				&#20316;&#20026;&#23427;&#30340;&#29238;&#31867;&#12290;&#40664;&#35748;&#30340;context&#25991;&#20214;&#26159;&#26144;&#23556;&#30340; Servlet &#30340;&#21517;&#23383;&#65292;&#21152;&#19978; <span class="emphasis"><em>-servlet.xml</em></span>&#21518;&#32512;&#12290;
				&#22914;&#26524; <tt class="classname">ActionServlet</tt> &#22312; web.xml &#37324;&#38754;&#30340;&#23450;&#20041;&#26159; <tt class="literal">&lt;servlet-name&gt;action&lt;/servlet-name&gt;</tt>&#65292;
				&#37027;&#20040;&#40664;&#35748;&#30340;&#25991;&#20214;&#23601;&#26159; <span class="emphasis"><em>/WEB-INF/action-servlet.xml</em></span>&#12290;
			</p><p>
				&#35201;&#37197;&#32622;&#36825;&#20010;&#25554;&#20214;&#65292;&#35831;&#25226;&#19979;&#38754;&#30340; XML &#36148;&#21040; <span class="emphasis"><em>struts-config.xml</em></span> &#25991;&#20214;&#20013; plug-ins &#37096;&#20998;&#30340;&#24213;&#31471;&#65306;
			</p><pre class="programlisting">&lt;plug-in className="org.springframework.web.struts.ContextLoaderPlugIn"/&gt;</pre><p>
				context&#37197;&#32622;&#25991;&#20214;&#30340;&#20301;&#32622;&#21487;&#20197;&#36890;&#36807; &#8216;<tt class="literal">contextConfigLocation</tt>&#8217; &#23646;&#24615;&#26469;&#33258;&#23450;&#20041;&#12290;
            </p><pre class="programlisting">&lt;plug-in className="org.springframework.web.struts.ContextLoaderPlugIn"&gt;
  &lt;set-property property="contextConfigLocation"
      value="/WEB-INF/action-servlet.xml,/WEB-INF/applicationContext.xml"/&gt;
&lt;/plug-in&gt;</pre><p>
				&#20063;&#21487;&#20197;&#20351;&#29992;&#36825;&#20010;&#25554;&#20214;&#21152;&#36733;&#25152;&#26377;&#30340;&#37197;&#32622;&#25991;&#20214;&#65292;&#36825;&#22312;&#20351;&#29992;&#27979;&#35797;&#24037;&#20855;&#65288;&#20363;&#22914; StrutsTestCase&#65289;&#30340;&#26102;&#20505;&#29305;&#21035;&#26377;&#29992;&#12290;
				StrutsTestCase &#30340; <tt class="classname">MockStrutsTestCase</tt> &#19981;&#20250;&#22312;&#21551;&#21160;&#30340;&#26102;&#20505;&#21021;&#22987;&#21270; Listener&#65292;
				&#23558;&#20320;&#25152;&#26377;&#30340;&#37197;&#32622;&#25991;&#20214;&#25918;&#22312;plug-in&#37324;&#38754;&#26159;&#19968;&#31181;&#35299;&#20915;&#26041;&#26696;&#12290;&#65288;&#26377;&#20010; <a href="http://sourceforge.net/tracker/index.php?func=detail&amp;aid=1088866&amp;group_id=39190&amp;atid=424562" target="_top">&#24050;&#35760;&#24405;&#30340; bug</a>
				&#23601;&#26159;&#38024;&#23545;&#36825;&#20010;&#38382;&#39064;&#30340;&#65292;&#20294;&#26159;&#24050;&#32463;&#34987;&#26631;&#35760;&#20026;&#8220;&#26080;&#39035;&#25913;&#27491;&#8221;&#65289;&#12290;
			</p><p>
				&#22312; <span class="emphasis"><em>struts-config.xml</em></span> &#20013;&#37197;&#32622;&#22909;&#25554;&#20214;&#20197;&#21518;&#65292;&#20320;&#21487;&#20197;&#37197;&#32622;Sping&#26469;&#31649;&#29702; 
				<tt class="classname">Action</tt>&#12290;Spring (1.1.3&#20197;&#21518;&#30340;&#29256;&#26412;) &#25552;&#20379;&#19979;&#38754;&#20004;&#31181;&#26041;&#24335;&#65306;
			</p><div class="itemizedlist"><ul type="disc"><li><p>
	   					&#29992; Spring &#30340;<tt class="classname">DelegatingRequestProcessor</tt>&#37325;&#36733; Struts 
						&#40664;&#35748;&#30340; <tt class="classname">RequestProcessor</tt> &#12290;
						</p></li><li><p>
	   					&#23558; <tt class="literal">&lt;action-mapping&gt;</tt> &#30340; <tt class="literal">type</tt> &#23646;&#24615;&#35774;&#20026;
						<tt class="classname">DelegatingActionProxy</tt>&#12290;
					</p></li></ul></div><p>
				&#36825;&#20004;&#31181;&#26041;&#27861;&#37117;&#20801;&#35768;&#22312; <span class="emphasis"><em>action-servlet.xml</em></span> &#25991;&#20214;&#20013;&#31649;&#29702;&#20320;&#30340; Action &#20197;&#21450;&#20381;&#36182;&#20851;&#31995;&#12290;
				&#36830;&#25509; <span class="emphasis"><em>struts-config.xml</em></span> &#21644; <span class="emphasis"><em>action-servlet.xml</em></span> &#20013;&#30340; Action &#30340;&#26725;&#26753;
				&#26159; action-mapping &#30340;&#8220;path&#8221;&#21644; bean &#30340;&#8220;name&#8221;&#12290;&#22914;&#26524;&#22312; <span class="emphasis"><em>struts-config.xml</em></span> &#25991;&#20214;&#20013;&#26377;&#22914;&#19979;&#37197;&#32622;&#65306;
			</p><pre class="programlisting">&lt;action path="/users" .../&gt;</pre><p>
				&#20320;&#24517;&#39035;&#22312; <span class="emphasis"><em>action-servlet.xml</em></span> &#20013;&#23558; Action bean &#30340;&#21517;&#23383;&#23450;&#20041;&#20026; &#8220;/users&#8221;&#65306;
			</p><pre class="programlisting">&lt;bean name="/users" .../&gt;</pre><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="struts-delegatingrequestprocessor"></a>15.4.1.1.&nbsp;DelegatingRequestProcessor</h4></div></div><div></div></div><p>
					&#20026;&#20102;&#22312; <span class="emphasis"><em>struts-config.xml</em></span> &#25991;&#20214;&#20013;&#37197;&#32622; <a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/web/struts/DelegatingRequestProcessor.html" target="_top">
					<tt class="literal">DelegatingRequestProcessor</tt></a>&#65292;&#20320;&#38656;&#35201;&#37325;&#36733; &lt;controller&gt; &#20803;&#32032;&#30340; &#8220;processorClass&#8221; &#23646;&#24615;&#12290;
					&#19979;&#38754;&#30340;&#20960;&#34892;&#24212;&#35813;&#25918;&#22312; &lt;action-mapping&gt; &#20803;&#32032;&#30340;&#21518;&#38754;&#12290;
				</p><pre class="programlisting">&lt;controller&gt;
  &lt;set-property property="processorClass"
      value="org.springframework.web.struts.DelegatingRequestProcessor"/&gt;
&lt;/controller&gt;</pre><p>
					&#22686;&#21152;&#36825;&#20123;&#35774;&#32622;&#20043;&#21518;&#65292;&#19981;&#31649;&#20320;&#26597;&#35810;&#20219;&#20309;&#31867;&#22411;&#30340; Action&#65292;Sping&#37117;&#33258;&#21160;&#22312;&#23427;&#30340;context&#37197;&#32622;&#25991;&#20214;&#20013;&#23547;&#25214;&#12290;
					&#23454;&#38469;&#19978;&#65292;&#20320;&#29978;&#33267;&#19981;&#38656;&#35201;&#25351;&#23450;&#31867;&#22411;&#12290;&#19979;&#38754;&#20004;&#20010;&#20195;&#30721;&#29255;&#26029;&#37117;&#21487;&#20197;&#24037;&#20316;&#65306;
				</p><pre class="programlisting">&lt;action path="/user" type="com.whatever.struts.UserAction"/&gt;		
&lt;action path="/user"/&gt;</pre><p>
					&#22914;&#26524;&#20351;&#29992; Struts &#30340; <span class="emphasis"><em>modules</em></span> &#29305;&#24615;&#65292;&#21017; bean &#21629;&#21517;&#24517;&#39035;&#21547;&#26377; module &#30340;&#21069;&#32512;&#12290;
					&#20030;&#20010;&#20363;&#23376;&#65292;&#22914;&#26524;&#19968;&#20010; Action &#30340;&#23450;&#20041;&#20026; <tt class="literal">&lt;action path="/user"/&gt;</tt>&#65292;&#32780;&#19988;&#23427;&#30340; module &#21069;&#32512;&#20026;&#8220;admin&#8221;&#65292;
					&#37027;&#20040;&#23427;&#24212;&#35813;&#23545;&#24212;&#21517;&#20026; <tt class="literal">&lt;bean name="/admin/user"/&gt;</tt> &#30340; bean&#12290;
				</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>
						&#22914;&#26524;&#22312; Struts &#24212;&#29992;&#20013;&#20351;&#29992;&#20102; Tiles&#65292;&#21017;&#38656;&#35201;&#37197;&#32622; &lt;controller&gt; &#20026;
						<a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/web/struts/DelegatingTilesRequestProcessor.html" target="_top"><tt class="classname">DelegatingTilesRequestProcessor</tt></a>
					</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="struts-delegatingactionproxy"></a>15.4.1.2.&nbsp;DelegatingActionProxy</h4></div></div><div></div></div><p>
					&#22914;&#26524;&#20320;&#26377;&#19968;&#20010;&#33258;&#23450;&#20041;&#30340; <tt class="classname">RequestProcessor</tt> &#24182;&#19988;&#19981;&#33021;&#22815;&#20351;&#29992;
					<tt class="classname">DelegatingRequestProcessor</tt> &#25110;&#32773;
					<tt class="classname">DelegatingTilesRequestProcessor</tt>&#65292;&#20320;&#21487;&#20197;&#20351;&#29992; <a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/web/struts/DelegatingActionProxy.html" target="_top">
					<tt class="classname">DelegatingActionProxy</tt></a> &#20316;&#20026;&#20320; action-mapping &#20013;&#30340;&#31867;&#22411;&#12290;
				</p><pre class="programlisting">&lt;action path="/user" type="org.springframework.web.struts.DelegatingActionProxy"
    name="userForm" scope="request" validate="false" parameter="method"&gt;
  &lt;forward name="list" path="/userList.jsp"/&gt;
  &lt;forward name="edit" path="/userForm.jsp"/&gt;
&lt;/action&gt;</pre><p>
					<span class="emphasis"><em>action-servlet.xml</em></span> &#25991;&#20214;&#20013;&#30340;bean&#23450;&#20041;&#20381;&#28982;&#19981;&#21464;&#65292;&#19981;&#31649;&#20320;&#20351;&#29992;&#20102;&#33258;&#23450;&#20041;&#30340; 
					<tt class="literal">RequestProcessor</tt> &#36824;&#26159; <tt class="classname">DelegatingActionProxy</tt>&#12290;
				</p><p>
					&#22914;&#26524;&#25226; <tt class="classname">Action</tt> &#23450;&#20041;&#22312;Spring&#30340;context&#25991;&#20214;&#37324;&#65292;&#37027;&#20040; Spring bean &#23481;&#22120;&#30340;&#25152;&#26377;&#29305;&#24615;&#37117;&#21487;&#29992;&#20102;&#65306;
					&#27604;&#22914;&#65292;&#20381;&#36182;&#27880;&#20837;&#65292;&#20877;&#27604;&#22914;&#65292;&#20026;&#27599;&#20010;&#35831;&#27714;&#21021;&#22987;&#21270;&#19968;&#20010;&#26032;&#30340; <tt class="classname">Action</tt> &#23454;&#20363;&#12290;
					&#22914;&#26524;&#35201;&#20351;&#29992;&#36825;&#20010;&#29305;&#24615;&#65292;Action bean &#23450;&#20041;&#20013;&#38656;&#35201;&#22768;&#26126;<span class="emphasis"><em>scope="prototype"</em></span>&#12290;
				</p><pre class="programlisting">&lt;bean name="/user" scope="prototype" autowire="byName"
    class="org.example.web.UserAction"/&gt;</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="struts-actionsupport"></a>15.4.2.&nbsp;ActionSupport Classes</h3></div></div><div></div></div><p>
				&#27491;&#22914;&#21069;&#38754;&#25552;&#21040;&#30340;&#65292;&#21487;&#20197;&#20351;&#29992; <tt class="classname">WebApplicationContextUtils</tt> &#31867;&#20174;
				<span class="interface">ServletContext</span> &#20013;&#33719;&#24471; <tt class="classname">WebApplicationContext</tt> &#12290; 
				&#21478;&#19968;&#20010;&#31616;&#21333;&#30340;&#21150;&#27861;&#26159;&#32487;&#25215; Spring &#30340; <tt class="classname">Action</tt> &#31867;&#12290;&#20030;&#20010;&#20363;&#23376;&#65292;&#38500;&#20102;&#32487;&#25215; Struts &#30340;
				<tt class="classname">Action</tt> &#20043;&#22806;&#65292;&#20320;&#20063;&#21487;&#20197;&#32487;&#25215; Spring &#30340; <a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/web/struts/ActionSupport.html" target="_top">
				<tt class="classname">ActionSupport</tt></a> &#31867;&#12290;
			</p><p>
				<tt class="classname">ActionSupport</tt> &#31867;&#25552;&#20379;&#20102;&#19968;&#20123;&#20415;&#21033;&#30340;&#26041;&#27861;&#65292;&#20363;&#22914; <span class="emphasis"><em>getWebApplicationContext()</em></span>&#12290;
				&#19979;&#38754;&#30340;&#20363;&#23376;&#23637;&#31034;&#20102;&#22914;&#20309;&#22312; Action &#20013;&#20351;&#29992;&#23427;&#65306;
			</p><pre class="programlisting">public class UserAction extends DispatchActionSupport {

    public ActionForward execute(ActionMapping mapping,
                                 ActionForm form,
                                 HttpServletRequest request,
                                 HttpServletResponse response) throws Exception {
        if (log.isDebugEnabled()) {
            log.debug("entering 'delete' method...");
        }
        WebApplicationContext ctx = getWebApplicationContext();
        UserManager mgr = (UserManager) ctx.getBean("userManager");
        // talk to manager for business logic
        return mapping.findForward("success");
    }
}</pre><p>
			Spring &#21253;&#21547;&#20102;&#25152;&#26377;&#26631;&#20934; Struts Action &#30340;&#23376;&#31867; - Spring &#29256;&#26412;&#22312;&#31867;&#21517;&#26411;&#23614;&#38468;&#21152;&#20102; <span class="emphasis"><em>Support</em></span>&#65306;
			</p><div class="itemizedlist"><ul compact="compact" type="disc"><li><p><a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/web/struts/ActionSupport.html" target="_top"><tt class="classname">ActionSupport</tt></a>,</p></li><li><p><a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/web/struts/DispatchActionSupport.html" target="_top"><tt class="literal">DispatchActionSupport</tt></a>,</p></li><li><p><a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/web/struts/LookupDispatchActionSupport.html" target="_top"><tt class="literal">LookupDispatchActionSupport</tt></a> and</p></li><li><p><a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/web/struts/MappingDispatchActionSupport.html" target="_top"><tt class="literal">MappingDispatchActionSupport</tt></a>.</p></li></ul></div><p>
		</p><p>
			&#24212;&#35813;&#36873;&#25321;&#26368;&#36866;&#21512;&#20320;&#39033;&#30446;&#30340;&#38598;&#25104;&#26041;&#24335;&#12290;&#32487;&#25215;&#20351;&#24471;&#20320;&#30340;&#20195;&#30721;&#26356;&#21487;&#38752;&#65292;&#24182;&#19988;&#20320;&#30830;&#20999;&#22320;&#30693;&#36947;&#20381;&#36182;&#20851;&#31995;&#26159;&#22914;&#20309;&#34987;&#35299;&#26512;&#30340;&#12290;
			&#21478;&#19968;&#26041;&#38754;&#65292;&#20351;&#29992; <tt class="classname">ContextLoaderPlugin</tt> &#20801;&#35768;&#20320;&#26041;&#20415;&#22320;&#22312;context XML &#25991;&#20214;&#37324;&#38754;&#22686;&#21152;&#26032;&#30340;
			&#20381;&#36182;&#20851;&#31995;&#12290;&#36825;&#20004;&#31181;&#38598;&#25104;&#26041;&#27861;&#65292;&#19981;&#31649;&#21738;&#19968;&#31181; Spring &#37117;&#25552;&#20379;&#20102;&#30456;&#24403;&#22909;&#29992;&#30340;&#36873;&#39033;&#12290;
			</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="view-tapestry"></a>15.5.&nbsp;Tapestry</h2></div></div><div></div></div><p>
			&#25688;&#33258; <a href="http://jakarta.apache.org/tapestry/" target="_top">Tapestry &#20027;&#39029;</a>...
		</p>&#8220;<span class="quote">
			<span class="emphasis"><em>
				Tapestry &#26159;&#29992;&#26469;&#21019;&#24314;&#21160;&#24577;&#12289;&#20581;&#22766;&#12289;&#39640;&#20280;&#32553;&#24615; Web &#24212;&#29992;&#30340;&#19968;&#20010; Java &#24320;&#28304;&#26694;&#26550;&#12290;
				Tapestry &#32452;&#20214;&#26500;&#24314;&#20110;&#26631;&#20934;&#30340;Java Servlet API &#20043;&#19978;&#65292;&#25152;&#20197;&#23427;&#21487;&#20197;&#24037;&#20316;&#22312;&#20219;&#20309;
				Servlet &#23481;&#22120;&#25110;&#32773;&#24212;&#29992;&#26381;&#21153;&#22120;&#20043;&#19978;&#12290;
			</em></span>
		</span>&#8221;<p>
			&#23613;&#31649; Spring &#26377;&#33258;&#24049;&#30340; <a href="#mvc" title="Chapter&nbsp;13.&nbsp;Web MVC framework Web&#26694;&#26550;">&#24378;&#26377;&#21147;&#30340; Web &#23618;</a>&#65292;&#20294;&#26159;&#20351;&#29992; Tapestry 
			&#20316;&#20026; Web &#29992;&#25143;&#30028;&#38754;&#65292;&#24182;&#19988;&#32467;&#21512; Spring &#23481;&#22120;&#31649;&#29702;&#20854;&#20182;&#23618;&#27425;&#65292;&#22312;&#26500;&#24314; J2EE &#24212;&#29992;&#19978;&#20855;&#26377;&#19968;&#20123;&#29420;&#21040;&#30340;&#20248;&#21183;&#12290;
			&#36825;&#19968;&#33410;&#23558;&#23581;&#35797;&#20171;&#32461;&#38598;&#25104;&#36825;&#20004;&#31181;&#26694;&#26550;&#30340;&#26368;&#20339;&#23454;&#36341;&#12290;
		</p><p>
			&#19968;&#20010;&#20351;&#29992; Tapestry &#21644; Spring &#26500;&#24314;&#30340; <span class="emphasis"><em>&#20856;&#22411;&#30340;</em></span> J2EE &#24212;&#29992;&#36890;&#24120;&#30001; Tapestry
			&#26500;&#24314;&#19968;&#31995;&#21015;&#30340;&#29992;&#25143;&#30028;&#38754;&#65288;UI&#65289;&#23618;&#65292;&#28982;&#21518;&#36890;&#36807;&#19968;&#20010;&#25110;&#22810;&#20010; Spring&#23481;&#22120;&#26469;&#36830;&#25509;&#24213;&#23618;&#35774;&#26045;&#12290;
			Tapestry &#30340; <a href="http://jakarta.apache.org/tapestry/UsersGuide/hivemind.html" target="_top">&#21442;&#32771;&#25163;&#20876;</a> 
			&#21253;&#21547;&#20102;&#36825;&#20123;&#26368;&#20339;&#23454;&#36341;&#30340;&#29255;&#26029;&#12290;&#65288;&#19979;&#38754;&#24341;&#29992;&#20013;&#30340; <tt class="literal">[]</tt> &#37096;&#20998;&#26159;&#26412;&#31456;&#30340;&#20316;&#32773;&#25152;&#21152;&#12290;&#65289;
		</p>&#8220;<span class="quote">
			<span class="emphasis"><em>
				Tapestry &#20013;&#19968;&#20010;&#38750;&#24120;&#25104;&#21151;&#30340;&#35774;&#35745;&#27169;&#24335;&#26159;&#20445;&#25345;&#31616;&#21333;&#30340;&#39029;&#38754;&#21644;&#32452;&#20214;&#65292;&#23613;&#21487;&#33021;&#22810;&#30340;&#23558;&#20219;&#21153;
				<span class="bold"><b>&#22996;&#27966;&#65288;delegate&#65289;</b></span> &#32473; HiveMind [&#25110;&#32773; Spring&#65292;&#20197;&#21450;&#20854;&#20182;&#23481;&#22120;] &#26381;&#21153;&#12290;
				Listener &#26041;&#27861;&#24212;&#35813;&#20165;&#20165;&#20851;&#24515;&#22914;&#20309;&#32452;&#21512;&#25104;&#27491;&#30830;&#30340;&#20449;&#24687;&#24182;&#19988;&#23558;&#23427;&#20256;&#36882;&#32473;&#19968;&#20010;&#26381;&#21153;&#12290;
			</em></span>
		</span>&#8221;<p>
            &#37027;&#20040;&#20851;&#38190;&#38382;&#39064;&#23601;&#26159;...&#22914;&#20309;&#23558;&#21327;&#20316;&#30340;&#26381;&#21153;&#25552;&#20379;&#32473; Tapestry &#39029;&#38754;&#65311;&#31572;&#26696;&#26159;&#65292;&#22312;&#29702;&#24819;&#24773;&#20917;&#19979;&#65292;&#24212;&#35813;&#23558;&#36825;&#20123;&#26381;&#21153;&#30452;&#25509;
					&#27880;&#20837;&#21040; Tapestry &#39029;&#38754;&#20013;&#12290;&#22312; Tapestry &#20013;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;<a href="http://jakarta.apache.org/tapestry/UsersGuide/injection.html" target="_top">&#20960;&#31181;&#19981;&#21516;&#30340;&#26041;&#27861;</a> 
        	&#26469;&#23454;&#29616;&#20381;&#36182;&#27880;&#20837;&#12290;&#36825;&#19968;&#33410;&#21482;&#35752;&#35770;Spring &#25552;&#20379;&#30340;&#20381;&#36182;&#27880;&#20837;&#30340;&#26041;&#27861;&#12290;Spring-Tapestry &#38598;&#25104;&#30495;&#27491;&#20855;&#26377;&#39749;&#21147;&#30340;&#22320;&#26041;&#26159; Tapestry 
					&#20248;&#38597;&#21448;&#19981;&#22833;&#28789;&#27963;&#30340;&#35774;&#35745;&#65292;&#23427;&#20351;&#24471;&#27880;&#20837; Spring &#25176;&#31649;&#30340; bean &#31616;&#30452;&#23601;&#20687;&#25226;&#39532;&#38797;&#25645;&#22312;&#39532;&#32972;&#19978;&#19968;&#26679;&#31616;&#21333;&#12290;&#65288;&#21478;&#19968;&#20010;&#22909;&#28040;&#24687;&#26159;
					Spring-Tapestry &#38598;&#25104;&#20195;&#30721;&#30340;&#32534;&#20889;&#21644;&#32500;&#25252;&#37117;&#26159;&#30001; Tapestry &#30340;&#21019;&#24314;&#32773; <a href="http://howardlewisship.com/blog/" target="_top">Howard M. Lewis Ship</a> &#19968;&#25163;&#25805;&#21150;&#65292;
        	&#25152;&#20197;&#25105;&#20204;&#24212;&#35813;&#20026;&#20102;&#36825;&#20010;&#22914;&#19997;&#33324;&#39034;&#30021;&#30340;&#38598;&#25104;&#26041;&#26696;&#21521;&#20182;&#33268;&#25964;&#12290;&#65289;
        </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="view-tapestry-di"></a>15.5.1.&nbsp;&#27880;&#20837; Spring &#25176;&#31649;&#30340; beans</h3></div></div><div></div></div><p>
				&#20551;&#35774;&#25105;&#20204;&#26377;&#19979;&#38754;&#36825;&#26679;&#19968;&#20010; Spring &#23481;&#22120;&#23450;&#20041;&#65288;&#20351;&#29992; XML &#26684;&#24335;&#65289;&#65306;
			</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN 2.0//EN" 
        "http://www.springframework.org/dtd/spring-beans-2.0.dtd"&gt;
 
&lt;beans&gt;
    &lt;!-- the DataSource --&gt;
    &lt;bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean"&gt;
        &lt;property name="jndiName" value="java:DefaultDS"/&gt;
    &lt;/bean&gt;

    &lt;bean id="hibSessionFactory" 
          class="org.springframework.orm.hibernate3.LocalSessionFactoryBean"&gt;
        &lt;property name="dataSource" ref="dataSource"/&gt;
    &lt;/bean&gt;

    &lt;bean id="transactionManager" 
          class="org.springframework.transaction.jta.JtaTransactionManager"/&gt;

    &lt;bean id="mapper" 
          class="com.whatever.dataaccess.mapper.hibernate.MapperImpl"&gt;
        &lt;property name="sessionFactory" ref="hibSessionFactory"/&gt;
    &lt;/bean&gt;

    &lt;!-- (transactional) AuthenticationService --&gt;
    &lt;bean id="authenticationService" 
          class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean"&gt;
        &lt;property name="transactionManager" ref="transactionManager"/&gt;
        &lt;property name="target"&gt;
            &lt;bean class="com.whatever.services.service.user.AuthenticationServiceImpl"&gt;
                &lt;property name="mapper" ref="mapper"/&gt;
            &lt;/bean&gt;
        &lt;/property&gt;
        &lt;property name="proxyInterfacesOnly" value="true"/&gt;
        &lt;property name="transactionAttributes"&gt;
            &lt;value&gt;
                *=PROPAGATION_REQUIRED
            &lt;/value&gt;
        &lt;/property&gt;
    &lt;/bean&gt;  
 
    &lt;!-- (transactional) UserService --&gt;
    &lt;bean id="userService" 
          class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean"&gt;
        &lt;property name="transactionManager" ref="transactionManager"/&gt;
        &lt;property name="target"&gt;
             &lt;bean class="com.whatever.services.service.user.UserServiceImpl"&gt;
                 &lt;property name="mapper" ref="mapper"/&gt;
             &lt;/bean&gt;
        &lt;/property&gt;
        &lt;property name="proxyInterfacesOnly" value="true"/&gt;
        &lt;property name="transactionAttributes"&gt;
            &lt;value&gt;
                *=PROPAGATION_REQUIRED
            &lt;/value&gt;
        &lt;/property&gt;
    &lt;/bean&gt;  
 
 &lt;/beans&gt;</pre><p>
	       &#22312; Tapestry &#24212;&#29992;&#20013;&#65292;&#19978;&#38754;&#30340; bean &#23450;&#20041;&#38656;&#35201; <a href="#webintegration-common" title="15.2.&nbsp;&#36890;&#29992;&#37197;&#32622;">&#21152;&#36733;&#21040; Spring &#23481;&#22120;&#20013;</a>&#65292;
				&#24182;&#19988;&#20219;&#20309;&#30456;&#20851;&#30340; Tapestry &#39029;&#38754;&#37117;&#38656;&#35201;&#25552;&#20379;&#65288;&#34987;&#27880;&#20837;&#65289; <tt class="literal">authenticationService</tt> &#21644; <tt class="literal">userService</tt> &#36825;&#20004;&#20010; bean&#65292;
				&#23427;&#20204;&#20998;&#21035;&#23454;&#29616;&#20102; <tt class="interfacename">AuthenticationService</tt> &#21644; <tt class="interfacename">UserService</tt> &#25509;&#21475;&#12290;
			</p><p>
				&#29616;&#22312;&#65292;Web &#24212;&#29992;&#21487;&#20197;&#36890;&#36807;&#35843;&#29992; Spring &#38745;&#24577;&#24037;&#20855;&#20989;&#25968; <tt class="literal">WebApplicationContextUtils.getApplicationContext(servletContext)</tt> 
				&#26469;&#24471;&#21040;application context&#12290;&#36825;&#20010;&#20989;&#25968;&#30340;&#21442;&#25968;servletContext &#26159;J2EE Servlet &#35268;&#33539;&#25152;&#23450;&#20041;&#30340; <span class="interface">ServletContext</span>&#12290;
				&#36825;&#26679;&#19968;&#26469;&#65292;&#39029;&#38754;&#21487;&#20197;&#24456;&#23481;&#26131;&#22320;&#24471;&#21040; <tt class="interfacename">UserService</tt> &#30340;&#23454;&#20363;&#65292;
				&#23601;&#20687;&#19979;&#38754;&#30340;&#36825;&#20010;&#20363;&#23376;&#65306;
			</p><pre class="programlisting">WebApplicationContext appContext = WebApplicationContextUtils.getApplicationContext(
    getRequestCycle().getRequestContext().getServlet().getServletContext());
UserService userService = (UserService) appContext.getBean("userService");
<i class="lineannotation"><span class="lineannotation">... some code which uses UserService</span></i></pre><p>
				&#36825;&#31181;&#26426;&#21046;&#21487;&#20197;&#24037;&#20316;...&#22914;&#26524;&#24819;&#36827;&#19968;&#27493;&#25913;&#36827;&#30340;&#35805;&#65292;&#25105;&#20204;&#21487;&#20197;&#23558;&#22823;&#37096;&#20998;&#30340;&#36923;&#36753;&#23553;&#35013;&#22312;&#39029;&#38754;&#25110;&#32452;&#20214;&#22522;&#31867;&#30340;&#19968;&#20010;&#26041;&#27861;&#20013;&#12290;
				&#28982;&#32780;&#65292;&#36825;&#20010;&#26426;&#21046;&#22312;&#26576;&#20123;&#26041;&#38754;&#36829;&#32972;&#20102; Spring &#25152;&#20513;&#23548;&#30340;IoC&#21407;&#21017;&#12290;&#22312;&#29702;&#24819;&#24773;&#20917;&#19979;&#65292;&#39029;&#38754;
				&#19981;&#24517;&#22312;context&#20013;&#23547;&#25214;&#26576;&#20010;&#21517;&#23383;&#30340; bean&#12290;&#20107;&#23454;&#19978;&#65292;&#39029;&#38754;&#26368;&#22909;&#26159;&#23545;context&#19968;&#26080;&#25152;&#30693;&#12290;
			</p><p>
				&#24184;&#36816;&#30340;&#26159;&#65292;&#26377;&#19968;&#31181;&#26426;&#21046;&#21487;&#20197;&#20570;&#21040;&#36825;&#19968;&#28857;&#12290;&#36825;&#26159;&#22240;&#20026; Tapestry &#24050;&#32463;&#25552;&#20379;&#20102;&#19968;&#31181;&#32473;&#39029;&#38754;&#22768;&#26126;&#23646;&#24615;&#30340;&#26041;&#27861;&#65292;
				&#20107;&#23454;&#19978;&#65292;&#20197;&#22768;&#26126;&#30340;&#26041;&#24335;&#31649;&#29702;&#19968;&#20010;&#39029;&#38754;&#19978;&#30340;&#25152;&#26377;&#23646;&#24615;&#26159;&#39318;&#36873;&#30340;&#26041;&#27861;&#65292;&#36825;&#26679; Tapestry &#33021;&#22815;&#23558;&#23646;&#24615;&#30340;&#29983;&#21629;&#21608;&#26399;
				&#20316;&#20026;&#39029;&#38754;&#21644;&#32452;&#20214;&#29983;&#21629;&#21608;&#26399;&#30340;&#19968;&#37096;&#20998;&#21152;&#20197;&#31649;&#29702;&#12290;
			</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>
			        &#19979;&#19968;&#33410;&#24212;&#29992;&#20110; Tapestry &#29256;&#26412; &lt; 4.0 &#30340;&#24773;&#20917;&#19979;&#12290;&#22914;&#26524;&#20320;&#27491;&#22312;&#20351;&#29992; Tapestry 4.0+&#65292;&#35831;&#21442;&#32771;&#26631;&#26377; 
					<a href="#view-tapestry-40-style-di" title="15.5.1.4.&nbsp;&#23558; Spring Beans &#27880;&#20837;&#21040; Tapestry &#39029;&#38754;&#20013; - Tapestry 4.0+ &#39118;&#26684;">Section&nbsp;15.5.1.4, &#8220;&#23558; Spring Beans &#27880;&#20837;&#21040; Tapestry &#39029;&#38754;&#20013; - Tapestry 4.0+ &#39118;&#26684;&#8221;</a> &#30340;&#23567;&#33410;&#12290;
				</p></td></tr></tbody></table></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="view-tapestry-pre40-style-di"></a>15.5.1.1.&nbsp;&#23558; Spring Beans &#27880;&#20837;&#21040; Tapestry &#39029;&#38754;&#20013;</h4></div></div><div></div></div><p>
					&#39318;&#20808;&#25105;&#20204;&#38656;&#35201; Tapestry &#39029;&#38754;&#32452;&#20214;&#22312;&#27809;&#26377; <span class="interface">ServletContext</span> &#30340;&#24773;&#20917;&#19979;&#35775;&#38382; 
					<span class="interface">ApplicationContext</span>&#65307;&#36825;&#26159;&#22240;&#20026;&#22312;&#39029;&#38754;/&#32452;&#20214;&#29983;&#21629;&#21608;&#26399;&#37324;&#38754;&#65292;&#24403;&#25105;&#20204;&#38656;&#35201;&#35775;&#38382; 
					<span class="interface">ApplicationContext</span> &#26102;&#65292;<span class="interface">ServletContext</span> 
					&#24182;&#19981;&#33021;&#34987;&#39029;&#38754;&#24456;&#26041;&#20415;&#30340;&#35775;&#38382;&#21040;&#65292;&#25152;&#20197;&#25105;&#20204;&#19981;&#33021;&#30452;&#25509;&#20351;&#29992; <tt class="literal">WebApplicationContextUtils.getApplicationContext(servletContext)</tt>&#12290;
					&#19968;&#31181;&#35299;&#20915;&#26041;&#27861;&#23601;&#26159;&#23454;&#29616;&#19968;&#20010;&#33258;&#23450;&#20041;&#30340; Tapestry <tt class="interfacename">IEngine</tt> &#26469;&#25552;&#20379;
					<span class="interface">ApplicationContext</span>&#65306;
				</p><pre class="programlisting">package com.whatever.web.xportal;

import ...

public class MyEngine extends org.apache.tapestry.engine.BaseEngine {
 
    public static final String APPLICATION_CONTEXT_KEY = "appContext";
 
    /**
     * @see org.apache.tapestry.engine.AbstractEngine#setupForRequest(org.apache.tapestry.request.RequestContext)
     */
    protected void setupForRequest(RequestContext context) {
        super.setupForRequest(context);
     
        // insert ApplicationContext in global, if not there
        Map global = (Map) getGlobal();
        ApplicationContext ac = (ApplicationContext) global.get(APPLICATION_CONTEXT_KEY);
        if (ac == null) {
            ac = WebApplicationContextUtils.getWebApplicationContext(
                context.getServlet().getServletContext()
            );
            global.put(APPLICATION_CONTEXT_KEY, ac);
        }
    }
}</pre><p>
					&#36825;&#20010;&#24341;&#25806;&#31867;&#23558; Spring application context&#20316;&#20026;&#19968;&#20010;&#21517;&#20026; &#8220;appContext&#8221; &#30340;&#23646;&#24615;&#23384;&#25918;&#22312; Tapestry &#24212;&#29992;&#30340;
					&#8220;Global&#8221; &#23545;&#35937;&#20013;&#12290;&#22312; Tapestry &#24212;&#29992;&#23450;&#20041;&#25991;&#20214;&#20013;&#24517;&#39035;&#20445;&#35777;&#36825;&#20010;&#29305;&#27530;&#30340; IEngine &#23454;&#20363;&#22312;&#36825;&#20010; Tapestry &#24212;&#29992;&#20013;&#34987;&#20351;&#29992;&#12290;
					&#20030;&#20010;&#20363;&#23376;&#65306;
				</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">file: xportal.application:</span></i> 
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE application PUBLIC 
    "-//Apache Software Foundation//Tapestry Specification 3.0//EN" 
    "http://jakarta.apache.org/tapestry/dtd/Tapestry_3_0.dtd"&gt;
&lt;application
    name="Whatever xPortal"
    engine-class="com.whatever.web.xportal.MyEngine"&gt;
&lt;/application&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="view-tapestry-componentdefs"></a>15.5.1.2.&nbsp;&#32452;&#20214;&#23450;&#20041;&#25991;&#20214;</h4></div></div><div></div></div><p>
					&#29616;&#22312;&#65292;&#25105;&#20204;&#22312;&#39029;&#38754;&#25110;&#32452;&#20214;&#23450;&#20041;&#25991;&#20214;&#65288;*.page &#25110;&#32773; *.jwc&#65289;&#20013;&#28155;&#21152; property-specification &#20803;&#32032;&#23601;&#21487;&#20197;
					&#20174; <tt class="interfacename">ApplicationContext</tt> &#20013;&#33719;&#21462; bean&#65292;&#24182;&#20026;&#36825;&#20123; bean &#21019;&#24314;&#39029;&#38754;&#25110;
					&#32452;&#20214;&#23646;&#24615;&#12290;&#20363;&#22914;&#65306;
				</p><pre class="programlisting">    &lt;property-specification name="userService"
                            type="com.whatever.services.service.user.UserService"&gt;
        global.appContext.getBean("userService")
    &lt;/property-specification&gt;
    &lt;property-specification name="authenticationService"
                            type="com.whatever.services.service.user.AuthenticationService"&gt;
        global.appContext.getBean("authenticationService")
    &lt;/property-specification&gt;</pre><p>
					&#22312; property-specification &#20013;&#23450;&#20041;&#30340; OGNL &#34920;&#36798;&#24335;&#20351;&#29992;context&#20013;&#30340; bean &#26469;&#25351;&#23450;&#23646;&#24615;&#30340;&#21021;&#22987;&#20540;&#12290;
					&#25972;&#20010;&#39029;&#38754;&#23450;&#20041;&#25991;&#20214;&#22914;&#19979;&#65306;
				</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE page-specification PUBLIC 
    "-//Apache Software Foundation//Tapestry Specification 3.0//EN" 
    "http://jakarta.apache.org/tapestry/dtd/Tapestry_3_0.dtd"&gt;
     
&lt;page-specification class="com.whatever.web.xportal.pages.Login"&gt;
 
    &lt;property-specification name="username" type="java.lang.String"/&gt;
    &lt;property-specification name="password" type="java.lang.String"/&gt;
    &lt;property-specification name="error" type="java.lang.String"/&gt;
    &lt;property-specification name="callback" type="org.apache.tapestry.callback.ICallback" persistent="yes"/&gt;
    &lt;property-specification name="userService"
                            type="com.whatever.services.service.user.UserService"&gt;
        global.appContext.getBean("userService")
    &lt;/property-specification&gt;
    &lt;property-specification name="authenticationService"
                            type="com.whatever.services.service.user.AuthenticationService"&gt;
        global.appContext.getBean("authenticationService")
    &lt;/property-specification&gt;
   
    &lt;bean name="delegate" class="com.whatever.web.xportal.PortalValidationDelegate"/&gt;
 
    &lt;bean name="validator" class="org.apache.tapestry.valid.StringValidator" lifecycle="page"&gt;
        &lt;set-property name="required" expression="true"/&gt;
        &lt;set-property name="clientScriptingEnabled" expression="true"/&gt;
    &lt;/bean&gt;
 
    &lt;component id="inputUsername" type="ValidField"&gt;
        &lt;static-binding name="displayName" value="Username"/&gt;
        &lt;binding name="value" expression="username"/&gt;
        &lt;binding name="validator" expression="beans.validator"/&gt;
    &lt;/component&gt;
   
    &lt;component id="inputPassword" type="ValidField"&gt;
        &lt;binding name="value" expression="password"/&gt;
       &lt;binding name="validator" expression="beans.validator"/&gt;
       &lt;static-binding name="displayName" value="Password"/&gt;
       &lt;binding name="hidden" expression="true"/&gt;
    &lt;/component&gt;
 
&lt;/page-specification&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="view-tapestry-getters"></a>15.5.1.3.&nbsp;&#28155;&#21152;&#25277;&#35937;&#35775;&#38382;&#26041;&#27861;</h4></div></div><div></div></div><p>
					&#29616;&#22312;&#22312;&#39029;&#38754;&#25110;&#32452;&#20214;&#26412;&#36523;&#30340; Java &#31867;&#23450;&#20041;&#20013;&#65292;&#25105;&#20204;&#38656;&#35201;&#20026;&#21018;&#21018;&#23450;&#20041;&#30340;&#23646;&#24615;&#28155;&#21152;&#25277;&#35937;&#30340; getter &#26041;&#27861;&#12290;
					&#65288;&#36825;&#26679;&#25165;&#21487;&#20197;&#35775;&#38382;&#37027;&#20123;&#23646;&#24615;&#65289;&#12290;
				</p><pre class="programlisting">// our UserService implementation; will come from page definition
public abstract UserService getUserService();
// our AuthenticationService implementation; will come from page definition
public abstract AuthenticationService getAuthenticationService();</pre><p>
					&#19979;&#38754;&#36825;&#20010;&#20363;&#23376;&#24635;&#32467;&#20102;&#21069;&#38754;&#35762;&#36848;&#30340;&#26041;&#27861;&#12290;&#36825;&#26159;&#20010;&#23436;&#25972;&#30340; Java &#31867;&#65306;
				</p><pre class="programlisting">package com.whatever.web.xportal.pages;
 
/**
 *  Allows the user to login, by providing username and password.
 *  After successfully logging in, a cookie is placed on the client browser
 *  that provides the default username for future logins (the cookie
 *  persists for a week).
 */
public abstract class Login extends BasePage implements ErrorProperty, PageRenderListener {
 
    /** the key under which the authenticated user object is stored in the visit as */
    public static final String USER_KEY = "user";
   
    /** The name of the cookie that identifies a user **/
    private static final String COOKIE_NAME = Login.class.getName() + ".username";  
    private final static int ONE_WEEK = 7 * 24 * 60 * 60;
 
    public abstract String getUsername();
    public abstract void setUsername(String username);
 
    public abstract String getPassword();
    public abstract void setPassword(String password);
 
    public abstract ICallback getCallback();
    public abstract void setCallback(ICallback value);
    
    public abstract UserService getUserService();
    public abstract AuthenticationService getAuthenticationService();
 
    protected IValidationDelegate getValidationDelegate() {
        return (IValidationDelegate) getBeans().getBean("delegate");
    }
 
    protected void setErrorField(String componentId, String message) {
        IFormComponent field = (IFormComponent) getComponent(componentId);
        IValidationDelegate delegate = getValidationDelegate();
        delegate.setFormComponent(field);
        delegate.record(new ValidatorException(message));
    }
 
    /**
     *  Attempts to login. 
     * &lt;p&gt;
     *  If the user name is not known, or the password is invalid, then an error
     *  message is displayed.
     **/
    public void attemptLogin(IRequestCycle cycle) {
     
        String password = getPassword();
 
        // Do a little extra work to clear out the password.
        setPassword(null);
        IValidationDelegate delegate = getValidationDelegate();
 
        delegate.setFormComponent((IFormComponent) getComponent("inputPassword"));
        delegate.recordFieldInputValue(null);
 
        // An error, from a validation field, may already have occurred.
        if (delegate.getHasErrors()) {
            return;
        }

        try {
            User user = getAuthenticationService().login(getUsername(), getPassword());
           loginUser(user, cycle);
        }
        catch (FailedLoginException ex) {
            this.setError("Login failed: " + ex.getMessage());
            return;
        }
    }
 
    /**
     *  Sets up the {@link User} as the logged in user, creates
     *  a cookie for their username (for subsequent logins),
     *  and redirects to the appropriate page, or
     *  a specified page).
     **/
    public void loginUser(User user, IRequestCycle cycle) {
     
        String username = user.getUsername();
 
        // Get the visit object; this will likely force the
        // creation of the visit object and an HttpSession
        Map visit = (Map) getVisit();
        visit.put(USER_KEY, user);
 
        // After logging in, go to the MyLibrary page, unless otherwise specified
        ICallback callback = getCallback();
 
        if (callback == null) {
            cycle.activate("Home");
        }
        else {
            callback.performCallback(cycle);
        }

        IEngine engine = getEngine();
        Cookie cookie = new Cookie(COOKIE_NAME, username);
        cookie.setPath(engine.getServletPath());
        cookie.setMaxAge(ONE_WEEK);
 
        // Record the user's username in a cookie
        cycle.getRequestContext().addCookie(cookie);
        engine.forgetPage(getPageName());
    }
   
    public void pageBeginRender(PageEvent event) {
        if (getUsername() == null) {
            setUsername(getRequestCycle().getRequestContext().getCookieValue(COOKIE_NAME));
        }
    }
}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="view-tapestry-40-style-di"></a>15.5.1.4.&nbsp;&#23558; Spring Beans &#27880;&#20837;&#21040; Tapestry &#39029;&#38754;&#20013; - Tapestry 4.0+ &#39118;&#26684;</h4></div></div><div></div></div><p>
					&#22312; Tapestry 4.0+ &#29256;&#26412;&#20013;&#65292;&#23558; Spring &#25176;&#31649; beans &#27880;&#20837;&#21040; Tapestry &#39029;&#38754;&#26159; <span class="emphasis"><em>&#38750;&#24120;</em></span> &#31616;&#21333;&#30340;&#12290;
					&#21482;&#38656;&#35201;&#19968;&#20010; <a href="http://howardlewisship.com/tapestry-javaforge/tapestry-spring/" target="_top">&#38468;&#21152;&#20989;&#25968;&#24211;</a>&#65292;
					&#21644;&#19968;&#20123;&#65288;&#23569;&#37327;&#65289;&#30340;&#37197;&#32622;&#12290;
					&#21487;&#20197;&#23558;&#36825;&#20010;&#24211;&#21644;Web &#24212;&#29992;&#20854;&#20182;&#30340;&#24211;&#19968;&#36215;&#37096;&#32626;&#12290;&#65288;&#19968;&#33324;&#24773;&#20917;&#19979;&#26159;&#25918;&#22312; <tt class="literal">WEB-INF/lib</tt> &#30446;&#24405;&#19979;&#12290;&#65289;
				</p><p>
					&#20320;&#38656;&#35201;&#20351;&#29992; <a href="#webintegration-common" title="15.2.&nbsp;&#36890;&#29992;&#37197;&#32622;">&#21069;&#38754;&#20171;&#32461;&#30340;&#26041;&#27861;</a> &#26469;&#21019;&#24314;Spring &#23481;&#22120;&#12290;
					&#28982;&#21518;&#23601;&#21487;&#20197;&#23558; Spring &#25176;&#31649;&#30340; beans &#38750;&#24120;&#31616;&#21333;&#30340;&#27880;&#20837;&#32473; Tapestry&#65307;&#22914;&#26524;&#25105;&#20204;&#20351;&#29992; Java 5&#65292;				
					&#25105;&#20204;&#21482;&#38656;&#35201;&#31616;&#21333;&#22320;&#32473; getter &#26041;&#27861;&#28155;&#21152;&#27880;&#37322;&#65288;annotation&#65289;&#65292;&#23601;&#21487;&#20197;&#23558; Spring &#31649;&#29702;&#30340;
					<tt class="literal">userService</tt> &#21644; <tt class="literal">authenticationService</tt> &#23545;&#35937;&#27880;&#20837;&#32473;&#39029;&#38754;&#12290;
					&#27604;&#22914;&#19979;&#38754; <tt class="classname">Login</tt> &#30340;&#20363;&#23376;&#65306;&#65288;&#20026;&#20102;&#20445;&#25345;&#31616;&#27905;&#65292;&#35768;&#22810;&#30340;&#31867;&#23450;&#20041;&#22312;&#36825;&#37324;&#30465;&#30053;&#20102;&#65289;
				</p><pre class="programlisting">package com.whatever.web.xportal.pages;

public abstract class Login extends BasePage implements ErrorProperty, PageRenderListener {
    
    @InjectObject("spring:userService")
    public abstract UserService getUserService();
    
    @InjectObject("spring:authenticationService")
    public abstract AuthenticationService getAuthenticationService();

}</pre><p>
				&#25105;&#20204;&#30340;&#20219;&#21153;&#22522;&#26412;&#19978;&#23436;&#25104;&#20102;...&#21097;&#19979;&#30340;&#24037;&#20316;&#23601;&#26159;&#37197;&#32622;HiveMind&#65292;&#23558;&#23384;&#20648;&#22312;  <tt class="interfacename">ServletContext</tt> &#20013;
				&#30340; Spring &#23481;&#22120;&#37197;&#32622;&#20026;&#19968;&#20010; HiveMind &#26381;&#21153;&#65306;
			</p><pre class="programlisting">&lt;?xml version="1.0"?&gt;
&lt;module id="com.javaforge.tapestry.spring" version="0.1.1"&gt;

    &lt;service-point id="SpringApplicationInitializer"
        interface="org.apache.tapestry.services.ApplicationInitializer"
        visibility="private"&gt;
        &lt;invoke-factory&gt;
            &lt;construct class="com.javaforge.tapestry.spring.SpringApplicationInitializer"&gt;
                &lt;set-object property="beanFactoryHolder"
                    value="service:hivemind.lib.DefaultSpringBeanFactoryHolder" /&gt;
            &lt;/construct&gt;
        &lt;/invoke-factory&gt;
    &lt;/service-point&gt;

    &lt;!-- Hook the Spring setup into the overall application initialization. --&gt;
    &lt;contribution
        configuration-id="tapestry.init.ApplicationInitializers"&gt;
        &lt;command id="spring-context"
            object="service:SpringApplicationInitializer" /&gt;
    &lt;/contribution&gt;

&lt;/module&gt;</pre><p>
					&#22914;&#26524;&#20320;&#20351;&#29992; Java 5&#65288;&#36825;&#26679;&#23601;&#21487;&#20197;&#20351;&#29992;annotation&#65289;&#65292;&#37027;&#20040;&#23601;&#26159;&#36825;&#20040;&#31616;&#21333;&#12290;
				</p><p>
		       &#22914;&#26524;&#20320;&#19981;&#29992; Java 5&#65292;&#20320;&#27809;&#27861;&#36890;&#36807;annotation&#26469;&#27880;&#37322;&#20320;&#30340; Tapestry &#39029;&#38754;&#65307;
					&#20320;&#21487;&#20197;&#20351;&#29992;&#20256;&#32479;&#39118;&#26684;&#30340; XML &#26469;&#22768;&#26126;&#20381;&#36182;&#27880;&#20837;&#65307;&#20363;&#22914;&#65292;&#22312; <tt class="classname">Login</tt> 
					&#39029;&#38754;&#65288;&#25110;&#32452;&#20214;&#65289;&#30340; <tt class="literal">.page</tt> &#25110; <tt class="literal">.jwc</tt> &#25991;&#20214;&#20013;&#65306;
				</p><pre class="programlisting">&lt;inject property="userService" object="spring:userService"/&gt;
&lt;inject property="authenticationService" object="spring:authenticationService"/&gt;</pre></div></div><p>
			&#22312;&#36825;&#20010;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#23581;&#35797;&#20351;&#29992;&#22768;&#26126;&#30340;&#26041;&#24335;&#23558;&#23450;&#20041;&#22312; Spring &#23481;&#22120;&#37324;&#30340; bean &#25552;&#20379;&#32473; Tapestry &#39029;&#38754;&#12290;
			&#39029;&#38754;&#31867;&#24182;&#19981;&#30693;&#36947;&#26381;&#21153;&#23454;&#29616;&#26469;&#33258;&#21738;&#37324;&#65292;&#20107;&#23454;&#19978;&#65292;&#20320;&#20063;&#21487;&#20197;&#24456;&#23481;&#26131;&#22320;&#36716;&#25442;&#21040;&#21478;&#19968;&#20010;&#23454;&#29616;&#12290;&#36825;&#22312;&#27979;&#35797;&#20013;&#26159;&#24456;&#26377;&#29992;&#30340;&#12290;
			&#36825;&#26679;&#30340;&#21453;&#21521;&#25511;&#21046;&#26159; Spring &#26694;&#26550;&#30340;&#20027;&#35201;&#30446;&#26631;&#21644;&#20248;&#28857;&#65292;&#25105;&#20204;&#23558;&#23427;&#25299;&#23637;&#21040;&#20102;Tapestry &#24212;&#29992;&#30340;&#25972;&#20010; J2EE &#22534;&#26632;&#19978;&#12290;
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="webwork"></a>15.6.&nbsp;WebWork</h2></div></div><div></div></div><p>
			&#25688;&#33258; <a href="http://www.opensymphony.com/webwork/" target="_top">WebWork &#20027;&#39029;</a>...
		</p>&#8220;<span class="quote">
			<span class="emphasis"><em>
				WebWork &#26159;&#19968;&#20010; Java Web &#24212;&#29992;&#24320;&#21457;&#26694;&#26550;&#12290;&#36825;&#20010;&#26694;&#26550;&#20805;&#20998;&#32771;&#34385;&#20102;&#22914;&#20309;&#25552;&#39640;&#24320;&#21457;&#32773;&#30340;&#25928;&#29575;&#21644;&#31616;&#21270;&#20195;&#30721;&#12290;
				&#23427;&#25903;&#25345;&#26500;&#24314;&#21487;&#37325;&#22797;&#20351;&#29992;&#30340; UI &#27169;&#29256;&#65288;&#20363;&#22914;&#34920;&#21333;&#25511;&#21046;&#65289;&#65292;UI &#20027;&#39064;&#65292;&#22269;&#38469;&#21270;&#65292;&#21160;&#24577;&#34920;&#21333;&#21442;&#25968;&#26144;&#23556;&#21040; JavaBean&#65292;
				&#20581;&#22766;&#30340;&#23458;&#25143;&#31471;&#19982;&#26381;&#21153;&#22120;&#31471;&#26657;&#39564;&#31561;&#26356;&#22810;&#21151;&#33021;&#12290;
			</em></span>
		</span>&#8221;<p>
          WebWork &#65288;&#22312;&#26412;&#31456;&#20316;&#32773;&#30340;&#30524;&#20013;&#65289;&#26159;&#19968;&#20010;&#38750;&#24120;&#31616;&#27905;&#12289;&#20248;&#38597;&#30340; Web &#26694;&#26550;&#12290;&#23427;&#30340;&#26550;&#26500;&#21644;&#20851;&#38190;&#27010;&#24565;&#23481;&#26131;&#29702;&#35299;&#65292;&#24182;&#19988;&#23427;&#20855;&#26377;&#19968;&#20010;&#20016;&#23500;&#30340;
        	&#26631;&#31614;&#24211;&#65292;&#28418;&#20142;&#30340;&#20998;&#31163;&#20102;&#26657;&#39564;&#65292;&#38750;&#24120;&#31616;&#21333;&#39640;&#25928;&#24182;&#19988;&#33457;&#19981;&#20102;&#22810;&#23569;&#26102;&#38388;&#65288;&#21478;&#22806;&#65292;&#23427;&#30340;&#25991;&#26723;&#21644;&#25351;&#21335;&#37117;&#38750;&#24120;&#23436;&#21892;&#65289;&#12290;
        </p><p>
          WebWork &#25216;&#26415;&#22534;&#26632;&#30340;&#19968;&#20010;&#20851;&#38190;&#30340;&#21019;&#26032;&#23601;&#26159;&#25552;&#20379; <a href="http://www.opensymphony.com/webwork/wikidocs/IoC%20Overview.html" target="_top">&#19968;&#20010; IoC &#23481;&#22120;</a>
        	&#26469;&#31649;&#29702; WebWork Action&#65292;&#22788;&#29702;&#8220;&#32465;&#23450;&#65288;wiring&#65289;&#8221;&#30340;&#19994;&#21153;&#23545;&#35937;&#31561;&#31561;&#12290;WebWork 2.2 &#20197;&#21069;&#65292;WebWork &#20351;&#29992;&#33258;&#24049;&#30340; IoC &#23481;&#22120;
        	&#65288;&#24182;&#19988;&#25552;&#20379;&#20102;&#38598;&#25104;&#28857;&#36825;&#26679;&#23601;&#21487;&#20197;&#38598;&#25104;&#20854;&#20182; IoC &#23481;&#22120;&#20363;&#22914; Spring &#26469;&#28151;&#21512;&#20351;&#29992;&#65289;&#12290;&#22312;WebWork 2.2&#20013;&#65292;&#40664;&#35748;&#20351;&#29992;&#30340; IoC &#23481;&#22120;
        	<span class="emphasis"><em>&#23601;&#26159;</em></span> Spring&#12290;&#23545;&#20110; Spring &#24320;&#21457;&#32773;&#26469;&#35828;&#36825;&#26174;&#28982;&#26159;&#19968;&#20010;&#22909;&#28040;&#24687;&#65292;&#22240;&#20026;&#23427;&#24847;&#21619;&#30528;&#24320;&#21457;&#20154;&#21592;&#31435;&#21363;&#23601;&#29087;&#24713;&#20102;&#22312; WebWork 
        	&#20013;&#30340; IoC &#37197;&#32622;&#65292;&#20064;&#24815;&#29992;&#27861;&#31561;&#31561;&#12290;
        </p><p>
            &#26681;&#25454; DRY &#65288;&#19981;&#35201;&#37325;&#22797;&#33258;&#24049; - Don't Repeat Yourself&#65289;&#30340;&#21407;&#21017;&#65292;&#25105;&#20204;&#27809;&#24517;&#35201;&#20877;&#21435;&#32534;&#20889;&#33258;&#24049;&#30340; Spring-WebWork &#38598;&#25104;&#26041;&#27861;&#20102;&#65292;
        	WebWork &#22242;&#38431;&#24050;&#32463;&#20889;&#20102;&#19968;&#20010;&#12290;&#35831;&#21442;&#32771;&#22312;
        	<a href="http://wiki.opensymphony.com/display/WW/WebWork" target="_top">WebWork wiki</a> &#19978;&#30340; 
        	<a href="http://www.opensymphony.com/webwork/wikidocs/Spring.html" target="_top">Spring-WebWork &#38598;&#25104;&#39029;&#38754;</a>&#12290;
        </p><p>
            &#27880;&#24847;&#65292;Spring-WebWork &#38598;&#25104;&#20195;&#30721;&#26159;&#30001; WebWork &#24320;&#21457;&#32773;&#33258;&#34892;&#24320;&#21457;&#65288;&#24182;&#19988;&#20063;&#26159;&#30001;&#20182;&#20204;&#36127;&#36131;&#32500;&#25252;&#21644;&#25913;&#36827;&#65289;&#65292;&#25152;&#20197;&#22914;&#26524;
        	&#36935;&#21040;&#38598;&#25104;&#19978;&#30340;&#38382;&#39064;&#65292;&#39318;&#20808;&#35831;&#21442;&#32771; WebWork &#31449;&#28857;&#21644;&#35770;&#22363;&#12290;&#20063;&#35831;&#22823;&#23478;&#22312; 
        	<a href="http://forum.springframework.org/forumdisplay.php?f=25" target="_top">Spring &#25903;&#25345;&#35770;&#22363;</a> 
        	&#19978;&#33258;&#30001;&#21457;&#34920;&#35780;&#35770;&#21644;&#26597;&#35810; Spring-WebWork &#38598;&#25104;&#26041;&#38754;&#30340;&#38382;&#39064;&#12290;
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="webintegration-resources"></a>15.7.&nbsp;&#26356;&#22810;&#36164;&#28304;</h2></div></div><div></div></div><p>
            &#19979;&#38754;&#30340;&#36830;&#25509;&#21253;&#21547;&#20102;&#22312;&#36825;&#19968;&#31456;&#25152;&#25552;&#21040;&#30340; Web &#26694;&#26550;&#30340;&#26356;&#22810;&#36164;&#28304;&#12290;
        </p><div class="itemizedlist"><ul type="disc"><li><p>The <a href="http://struts.apache.org/" target="_top">Struts</a> homepage</p></li><li><p>The <a href="http://java.sun.com/javaee/javaserverfaces/" target="_top">JSF</a> homepage</p></li><li><p>The <a href="http://jakarta.apache.org/tapestry/" target="_top">Tapestry</a> homepage</p></li><li><p>The <a href="http://www.opensymphony.com/webwork/" target="_top">WebWork</a> homepage</p></li></ul></div><p>
            &#19979;&#38754;&#30340;&#19968;&#20123; Web &#26694;&#26550;&#30340;&#36164;&#28304;&#21487;&#20197;&#20351;&#20320;&#20102;&#35299;&#26356;&#22810;&#12290;
        </p><div class="itemizedlist"><ul type="disc"><li><p>The <a href="http://wiki.apache.org/struts/StrutsTi" target="_top">StrutsTI</a> project wiki</p></li></ul></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="portlet"></a>Chapter&nbsp;16.&nbsp;Portlet MVC&#26694;&#26550;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="portlet-introduction"></a>16.1.&nbsp;&#20171;&#32461;</h2></div></div><div></div></div><div class="sidebar"><p class="title"><b>JSR-168 Java Portlet&#35268;&#33539;</b></p><p>&#26356;&#22810;&#20851;&#20110;Portlet&#24320;&#21457;&#30340;&#20449;&#24687;&#65292;&#35831;&#21442;&#38405;SUN&#30340;&#30333;&#30382;&#20070;
		    <a href="http://developers.sun.com/prodtech/portalserver/reference/techart/jsr168/" target="_top">&#12298;JSR 168&#20837;&#38376;&#12299;</a>&#65292;
		    &#20197;&#21450; <a href="http://jcp.org/aboutJava/communityprocess/final/jsr168/" target="_top">JSR-168&#35268;&#33539;</a>&#12290;</p></div><p>Spring&#19981;&#20165;&#25903;&#25345;&#20256;&#32479;&#65288;&#22522;&#20110;Servlet&#65289;&#30340;Web&#24320;&#21457;&#65292;&#20063;&#25903;&#25345;JSR-168 Portlet&#24320;&#21457;&#12290;
		Portlet MVC&#26694;&#26550;&#23613;&#21487;&#33021;&#22810;&#22320;&#37319;&#29992;Web MVC&#26694;&#26550;&#65292;&#20351;&#29992;&#30456;&#21516;&#30340;&#24213;&#23618;&#34920;&#29616;&#23618;&#25277;&#35937;&#21644;&#25972;&#21512;&#25216;&#26415;&#12290;&#25152;&#20197;&#65292;
		&#22312;&#32487;&#32493;&#38405;&#35835;&#26412;&#31456;&#21069;&#65292;&#21153;&#24517;&#28201;&#20064;<a href="#mvc" title="Chapter&nbsp;13.&nbsp;Web MVC framework Web&#26694;&#26550;">Chapter&nbsp;13, <i>Web MVC framework Web&#26694;&#26550;</i></a>&#21644;<a href="#view" title="Chapter&nbsp;14.&nbsp;&#38598;&#25104;&#35270;&#22270;&#25216;&#26415;">Chapter&nbsp;14, <i>&#38598;&#25104;&#35270;&#22270;&#25216;&#26415;</i></a>&#20004;&#31456;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#35831;&#29282;&#35760;&#65292;&#22312;Spring MVC&#20013;&#30340;&#27010;&#24565;&#21644;Spring Porlet MVC&#20013;&#30340;&#30456;&#21516;&#30340;&#21516;&#26102;&#65292;JSR-168 Portlet
			&#29420;&#29305;&#30340;&#24037;&#20316;&#27969;&#31243;&#36896;&#25104;&#20102;&#19968;&#20123;&#26174;&#33879;&#30340;&#24046;&#24322;&#12290;</p></td></tr></tbody></table></div><p>Porlet&#24037;&#20316;&#27969;&#31243;&#21644;Servlet&#30340;&#20027;&#35201;&#24046;&#24322;&#22312;&#20110;&#65292;Portlet&#30340;&#35831;&#27714;&#22788;&#29702;&#26377;&#20004;&#20010;&#29420;&#29305;
		&#30340;&#38454;&#27573;&#65306;&#21160;&#20316;&#38454;&#27573;&#21644;&#26174;&#31034;&#38454;&#27573;&#12290;&#21160;&#20316;&#38454;&#27573;&#20250;&#26377;&#8220;&#21518;&#21488;&#8221;&#25968;&#25454;&#25913;&#21464;&#25110;&#21160;&#20316;&#30340;&#20195;&#30721;&#65292;&#36825;&#20123;&#20195;&#30721;
		&#21482;&#20250;&#25191;&#34892;&#19968;&#27425;&#12290;&#26174;&#31034;&#38454;&#27573;&#20250;&#20135;&#29983;&#29992;&#25143;&#27599;&#27425;&#21047;&#26032;&#26102;&#30340;&#30475;&#21040;&#30340;&#26174;&#31034;&#20869;&#23481;&#12290;&#37325;&#35201;&#30340;&#26159;&#65292;
		&#22312;&#21333;&#20010;&#35831;&#27714;&#30340;&#25972;&#20010;&#22788;&#29702;&#36807;&#31243;&#20013;&#65292;&#21160;&#20316;&#38454;&#27573;&#21482;&#20250;&#34987;&#25191;&#34892;&#19968;&#27425;&#65292;&#32780;&#26174;&#31034;&#38454;&#27573;&#21487;&#33021;&#20250;&#34987;&#25191;&#34892;&#22810;&#27425;&#12290;
		&#36825;&#23601;&#25552;&#20379;&#20102;(&#24182;&#19988;&#35201;&#27714;)&#22312;&#25913;&#21464;&#31995;&#32479;&#25345;&#20037;&#29366;&#24577;&#30340;&#27963;&#21160;&#21644;&#20135;&#29983;&#26174;&#31034;&#20869;&#23481;&#30340;&#27963;&#21160;&#20043;&#38388;
		&#26377;&#19968;&#20010;&#28165;&#26224;&#30340;&#20998;&#23618;&#12290;</p><div class="sidebar"><p class="title"><b>Spring WebFlow</b></p><p>Spring Web Flow&#65288;SWF&#65289;&#30340;&#30446;&#26631;&#26159;&#25104;&#20026;Web&#24212;&#29992;&#31243;&#24207;&#39029;&#38754;&#27969;&#36716;&#31649;&#29702;&#30340;&#26368;&#20339;&#35299;&#20915;&#26041;&#26696;&#12290;</p><p>SWF&#22312;servlet&#21644;portlet&#29615;&#22659;&#20013;&#37117;&#19982;&#27604;&#22914;Spring MVC&#65292;Struts&#65292;&#21644;JSF&#36825;&#26679;&#30340;&#29616;&#23384;&#26694;&#26550;&#38598;&#25104;&#22312;&#19968;&#36215;&#12290;
  &#22914;&#26524;&#20320;&#38754;&#23545;&#30340;&#26159;&#19968;&#20010;&#26356;&#33021;&#24471;&#30410;&#20110;&#20316;&#20026;&#23545;&#35805;&#27169;&#22411;&#65292;&#32780;&#19981;&#26159;&#21333;&#32431;&#30340;&#35831;&#27714;&#27169;&#22411;&#30340;&#19994;&#21153;&#27969;&#31243;&#65288;&#25110;&#22810;&#20010;&#27969;&#31243;&#65289;&#30340;&#35805;&#65292;
  &#37027;&#20040;SWF&#21487;&#33021;&#23601;&#26159;&#35299;&#20915;&#26041;&#26696;&#20102;&#12290;</p><p>SWF&#20351;&#20320;&#33021;&#22815;&#25226;&#36923;&#36753;&#19978;&#30340;&#39029;&#38754;&#27969;&#36716;&#25429;&#25417;&#20026;&#33258;&#23481;&#32435;&#30340;&#27169;&#22359;&#65292;&#24182;&#22312;&#19981;&#21516;&#30340;&#24773;&#24418;&#19979;&#34987;&#22797;&#29992;&#12290;
  &#32780;&#36825;&#23545;&#20110;&#24320;&#21457;&#35201;&#24341;&#23548;&#29992;&#25143;&#23436;&#25104;&#21463;&#25511;&#30340;&#27983;&#35272;&#21160;&#20316;&#65292;&#20174;&#32780;&#39537;&#21160;&#19994;&#21153;&#27969;&#31243;&#30340;Web&#24212;&#29992;&#31243;&#24207;&#27169;&#22359;&#27491;&#26159;&#29702;&#24819;&#30340;&#12290;</p><p>&#20851;&#20110;SWF&#30340;&#26356;&#22810;&#20449;&#24687;&#65292;&#35831;&#35775;&#38382;<a href="http://www.springframework.org/webflow" target="_top">Spring WebFlow&#31449;&#28857;</a>&#12290;</p></div><p>&#36825;&#31181;&#20004;&#38454;&#27573;&#30340;&#35831;&#27714;&#22788;&#29702;&#26159;JSR-168&#35268;&#33539;&#30340;&#19968;&#20010;&#20248;&#28857;&#65292;&#27604;&#22914;&#65292;&#21487;&#20197;&#33258;&#21160;&#22320;&#26356;&#26032;&#21160;&#24577;
		&#30340;&#25628;&#32034;&#32467;&#26524;&#65292;&#19981;&#38656;&#35201;&#29992;&#25143;&#29305;&#24847;&#21435;&#20877;&#27425;&#25191;&#34892;&#25628;&#32034;&#12290;&#35768;&#22810;&#20854;&#23427;&#30340;Portlet MVC&#26694;&#26550;&#35797;&#22270;&#21521;&#24320;
		&#21457;&#20154;&#21592;&#24443;&#24213;&#38544;&#34255;&#36825;&#31181;&#20004;&#38454;&#27573;&#22788;&#29702;&#65292;&#35753;&#26694;&#26550;&#30475;&#19978;&#21435;&#23613;&#21487;&#33021;&#21644;&#20256;&#32479;&#30340;Servlet&#24320;&#21457;&#30456;&#21516; - &#22312;&#25105;&#20204;
		&#30475;&#26469;&#65292;&#36825;&#31181;&#26041;&#24335;&#21435;&#25481;&#20102;&#20351;&#29992;Portlet&#30340;&#19968;&#20010;&#20027;&#35201;&#22909;&#22788;&#65292;&#25152;&#20197;&#22312;Spring Portlet MVC
		&#26694;&#26550;&#37324;&#20998;&#31163;&#30340;&#20004;&#38454;&#27573;&#22788;&#29702;&#34987;&#20445;&#30041;&#20102;&#19979;&#26469;&#65292;&#36825;&#20027;&#35201;&#34920;&#29616;&#22312;&#65292;Servlet&#29256;&#26412;&#30340;MVC&#31867;&#23558;&#21482;
		&#26377;&#19968;&#20010;&#26041;&#27861;&#26469;&#22788;&#29702;&#35831;&#27714;&#65292;&#32780;Portlet&#29256;&#26412;&#30340;MVC&#31867;&#37324;&#23558;&#20250;&#26377;&#20004;&#20010;&#26041;&#27861;&#65306;&#19968;&#20010;&#29992;&#22312;&#21160;&#20316;
		&#38454;&#27573;&#65292;&#21478;&#19968;&#20010;&#29992;&#22312;&#26174;&#31034;&#38454;&#27573;&#12290;&#27604;&#22914;&#65292;&#22312;Servlet&#29256;&#26412;&#30340; <tt class="classname">AbstractController</tt> &#26377;
		<tt class="methodname">handleRequestInternal(..)</tt>&#26041;&#27861;&#65292;Portlet&#29256;&#26412;&#30340;
		<tt class="classname">AbstractController</tt>&#26377;
		<tt class="methodname">handleActionRequestInternal(..)</tt>&#21644;
		<tt class="methodname">handleRenderRequestInternal(..)</tt>&#26041;&#27861;&#12290;</p><p>&#36825;&#20010;&#26694;&#26550;&#26159;&#22260;&#32469;&#30528;&#20998;&#21457;&#22120;<tt class="classname">DispatcherPortlet</tt>&#35774;&#35745;&#30340;&#65292;&#20998;&#21457;&#22120;&#25226;&#35831;&#27714;&#36716;&#21457;&#32473;&#22788;&#29702;
		&#22120;&#12290;&#21644;Web&#26694;&#26550;&#30340;<tt class="classname">DispatcherServlet</tt>&#19968;&#26679;&#65292;
		&#36825;&#20010;&#26694;&#26550;&#36824;&#26377;&#21487;&#37197;&#32622;&#30340;&#22788;&#29702;&#22120;&#26144;&#23556;&#21644;&#35270;&#22270;&#35299;&#26512;&#65292;&#21516;&#26102;&#20063;&#25903;&#25345;&#25991;&#20214;&#19978;&#20256;&#12290;</p><p>Portlet MVC&#19981;&#25903;&#25345;&#26412;&#22320;&#21270;&#35299;&#26512;&#21644;&#20027;&#39064;&#35299;&#26512; - &#23427;&#20204;&#26159;portal/portlet&#23481;&#22120;
		&#30340;&#33539;&#30068;&#65292;&#24182;&#19981;&#36866;&#21512;&#25918;&#22312;Spring&#26694;&#26550;&#37324;&#12290;&#20294;&#26159;&#65292;Spring&#37324;&#25152;&#26377;&#20381;&#36182;&#26412;&#22320;&#21270;(&#27604;&#22914;&#28040;&#24687;&#30340;
		&#22269;&#38469;&#21270;)&#20173;&#26087;&#21487;&#20197;&#24037;&#20316;&#65292;&#22240;&#20026;<tt class="classname">DispatcherPortlet</tt>&#22312;&#20197;
		<tt class="classname">DispatcherServlet</tt>&#30456;&#21516;&#30340;&#26041;&#24335;&#26292;&#38706;&#24403;&#21069;&#30340;&#26412;&#22320;&#21270;&#20449;&#24687;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="portlet-introduction-controller"></a>16.1.1.&nbsp;&#25511;&#21046;&#22120; - MVC&#20013;&#30340;C</h3></div></div><div></div></div><p>&#32570;&#30465;&#30340;&#22788;&#29702;&#22120;&#26159;&#19968;&#20010;&#38750;&#24120;&#31616;&#21333;&#30340;
		    <tt class="interfacename">Controller</tt>&#25509;&#21475;&#65292;&#23427;&#25552;&#20379;&#20102;&#20004;&#20010;&#26041;&#27861;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="methodname">void handleActionRequest(request,response)</tt> </p></li><li><p><tt class="methodname">ModelAndView handleRenderRequest(request,response)</tt> </p></li></ul></div><p>&#36825;&#20010;&#26694;&#26550;&#21253;&#21547;&#20102;&#35768;&#22810;&#30456;&#21516;&#30340;&#25511;&#21046;&#22120;&#23454;&#29616;&#23618;&#27425;&#65292;&#27604;&#22914;&#65292;
				<tt class="classname">AbstractController</tt>&#65292;
				<tt class="classname">SimpleFormController</tt>&#31561;&#12290;&#23427;&#22312;&#25968;&#25454;&#32465;&#23450;&#12289;&#21629;&#20196;&#23545;&#35937;&#20351;&#29992;&#12289;
				&#27169;&#22411;&#22788;&#29702;&#21644;&#35270;&#22270;&#35299;&#26512;&#31561;&#26041;&#38754;&#21644;Servlet&#26694;&#26550;&#30456;&#21516;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="portlet-introduction-view"></a>16.1.2.&nbsp;&#35270;&#22270; - MVC&#20013;&#30340;V</h3></div></div><div></div></div><p>&#36825;&#20010;&#26694;&#26550;&#21033;&#29992;&#20102;&#19968;&#20010;&#29305;&#27530;&#30340;&#26725;Servlet
		    <tt class="classname">ViewRendererServlet</tt>&#26469;&#20351;&#29992;Servlet&#26694;&#26550;&#37324;&#30340;&#35270;&#22270;&#26174;&#31034;
				&#21151;&#33021;&#65292;&#36825;&#26679;&#65292;Portlet&#35831;&#27714;&#23601;&#34987;&#36716;&#21270;&#20026;Servlet&#35831;&#27714;&#65292;Portlet&#35270;&#22270;&#33021;&#22815;&#20197;&#36890;&#24120;&#30340;
				Servlet&#24213;&#23618;&#20195;&#30721;&#26469;&#26174;&#31034;&#12290;&#36825;&#24847;&#21619;&#30528;&#65292;&#22312;Portlet&#37324;&#20173;&#33021;&#20351;&#29992;&#24403;&#21069;&#25152;&#26377;&#30340;&#26174;&#31034;&#26041;&#27861;&#65292;
				&#22914;JSP&#12289;Velocity&#31561;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="portlet-introduction-scope"></a>16.1.3.&nbsp;Web&#20316;&#29992;&#33539;&#22260;&#30340;Bean</h3></div></div><div></div></div><p>Spring Portlet MVC&#25903;&#25345;Web Bean&#65292;&#36825;&#20123;Bean&#30340;&#29983;&#21629;&#21608;&#26399;&#22312;&#20110;&#24403;&#21069;&#30340;HTTP&#35831;&#27714;
						&#25110;HTTP <tt class="interfacename">Session</tt>(&#19968;&#33324;&#30340;&#21644;&#20840;&#23616;&#30340;)&#37324;&#65292;&#36825;&#19981;&#26159;
						&#26694;&#26550;&#33258;&#36523;&#30340;&#29305;&#24615;&#65292;&#32780;&#26159;&#30001;&#20351;&#29992;&#30340;&#23481;&#22120;&#30340;
						<tt class="interfacename">WebApplicationContext</tt>&#25552;&#20379;&#30340;&#12290;
						<a href="#beans-factory-scopes-other" title="3.4.4.&nbsp;&#20854;&#20182;&#20316;&#29992;&#22495;">Section&nbsp;3.4.4, &#8220;&#20854;&#20182;&#20316;&#29992;&#22495;&#8221;</a>&#35814;&#32454;&#22320;&#25551;&#36848;&#20102;&#36825;&#20123;Bean&#30340;&#20316;&#29992;&#33539;&#22260;&#12290;</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>
		    Spring&#21457;&#24067;&#21253;&#24102;&#26377;&#23436;&#25972;&#30340;Spring Portlet MVC&#31034;&#20363;&#65292;&#36825;&#20010;&#24212;&#29992;&#28436;&#31034;&#20102;&#25152;&#26377;Spring Portlet MVC&#26694;&#26550;&#30340;&#21151;&#33021;&#21644;&#29305;&#33394;&#12290;
		    &#20320;&#21487;&#20197;&#22312;<tt class="filename">samples/petportal</tt>&#30446;&#24405;&#19979;&#25214;&#21040;&#36825;&#20010;'petportal'&#24212;&#29992;&#12290;
		    </p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="portlet-dispatcher"></a>16.2.&nbsp;
			<tt class="classname">DispatcherPortlet</tt>
		</h2></div></div><div></div></div><p>Portlet MVC&#26159;&#19968;&#20010;&#35831;&#27714;&#39537;&#21160;&#30340;Web MVC&#26694;&#26550;&#65292;&#23427;&#22260;&#32469;&#30528;Portlet&#35774;&#35745;&#65292;&#25226;&#35831;&#27714;
		&#36716;&#21457;&#32473;&#25511;&#21046;&#22120;&#65292;&#25552;&#20379;&#20102;&#20415;&#21033;&#30340;Porltet&#24212;&#29992;&#24320;&#21457;&#21151;&#33021;&#12290;&#32780;&#19988;&#65292;Spring&#30340;
		<tt class="classname">DispatcherPortlet</tt>&#21151;&#33021;&#36828;&#36828;&#19981;&#27490;&#36825;&#20123;&#65292;&#23427;&#21644;Spring
		<tt class="interfacename">ApplicationContext</tt>&#23436;&#20840;&#38598;&#25104;&#65292;&#20351;&#24471;&#24320;&#21457;&#20154;&#21592;
		&#33021;&#22815;&#20351;&#29992;Spring&#20854;&#23427;&#37096;&#20998;&#30340;&#27599;&#20010;&#21151;&#33021;&#12290;</p><p><tt class="classname">DispatcherPortlet</tt>&#21644;&#19968;&#33324;&#30340;Portlet&#19968;&#26679;&#65292;
		&#22312;Web&#24212;&#29992;&#30340;<tt class="literal">portlet.xml</tt>&#20013;&#22768;&#26126;&#65306;</p><pre class="programlisting">&lt;portlet&gt;
	&lt;portlet-name&gt;sample&lt;/portlet-name&gt;
	&lt;portlet-class&gt;org.springframework.web.portlet.DispatcherPortlet&lt;/portlet-class&gt;
	&lt;supports&gt;
		&lt;mime-type&gt;text/html&lt;/mime-type&gt;
		&lt;portlet-mode&gt;view&lt;/portlet-mode&gt;
	&lt;/supports&gt;
	&lt;portlet-info&gt;
		&lt;title&gt;Sample Portlet&lt;/title&gt;
	&lt;/portlet-info&gt;
&lt;/portlet&gt;</pre><p>&#29616;&#22312;&#38656;&#35201;&#37197;&#32622;<tt class="classname">DispatcherPortlet</tt>&#12290;</p><p>&#22312;Portlet MVC&#26694;&#26550;&#37324;&#65292;&#27599;&#20010;<tt class="classname">DispatcherPortlet</tt>&#37117;&#26377;&#33258;&#24049;&#30340;
		<tt class="interfacename">WebApplicationContext</tt>&#65292;&#23427;&#25509;&#31649;&#20102;&#25152;&#26377;&#22312;&#26681;
		<tt class="interfacename">WebApplicationContext</tt>&#23450;&#20041;&#30340;Bean&#12290;&#25105;&#20204;&#21487;&#20197;
		&#22312;Portlet&#20316;&#29992;&#33539;&#22260;&#20869;&#23545;&#36825;&#20123;Bean&#36827;&#34892;&#37325;&#36733;&#65292;&#37325;&#36733;&#21518;&#30340;Bean&#21487;&#20197;&#23450;&#20041;&#25104;&#23545;&#20110;&#29305;&#23450;&#30340;Portlet&#23454;&#20363;&#21487;&#35265;&#12290;</p><p>&#22312;&#21021;&#22987;&#21270;
		<tt class="classname">DispatcherPortlet</tt>&#26102;&#65292;&#26694;&#26550;&#20250;&#22312;Web&#24212;&#29992;&#30340;<tt class="literal">WEB-INF</tt>
		&#30446;&#24405;&#19979;&#23547;&#25214;<tt class="literal">[portlet-name]-portlet.xml</tt>&#65292;&#29983;&#25104;&#22312;&#20854;&#20013;&#23450;&#20041;&#30340;Bean&#65288;&#20250;&#35206;&#30422;&#22312;&#20840;&#23616;&#33539;&#22260;&#37324;&#21517;&#23383;&#30456;&#21516;&#30340;Bean&#30340;&#23450;&#20041;&#65289;&#12290;
		</p><p><tt class="classname">DispatcherPortlet</tt>&#29992;&#21040;&#30340;&#37197;&#32622;&#25991;&#20214;&#20301;&#32622;
		&#21487;&#20197;&#36890;&#36807;Portlet&#21021;&#22987;&#21270;&#21442;&#25968;&#26469;&#20462;&#25913;&#65288;&#19979;&#38754;&#26377;&#35814;&#32454;&#30340;&#25551;&#36848;&#65289;&#12290;</p><p>Spring&#30340;<tt class="classname">DispatcherPortlet</tt>&#20250;&#29992;&#19968;&#20123;&#29305;&#27530;&#30340;Bean
		&#26469;&#22788;&#29702;&#35831;&#27714;&#21644;&#26174;&#31034;&#35270;&#22270;&#12290;&#36825;&#20123;Spring&#21253;&#21547;&#30340;Bean&#21644;&#20854;&#23427;&#30340;Bean&#19968;&#26679;&#65292;&#21487;&#20197;&#22312;
		<tt class="interfacename">WebApplicationContext</tt>&#37324;&#36827;&#34892;&#37197;&#32622;&#12290;&#27599;
		&#20010;Bean&#19979;&#38754;&#37117;&#20250;&#26377;&#35814;&#32454;&#30340;&#25551;&#36848;&#12290;&#36825;&#37324;&#65292;&#21482;&#26159;&#35753;&#20320;&#30693;&#36947;&#23427;&#20204;&#65292;
		&#25105;&#20204;&#32487;&#32493;&#35752;&#35770;<tt class="classname">DispatcherPortlet</tt>&#12290;&#22823;&#22810;&#25968;&#30340;Bean&#37117;&#26377;&#32570;&#30465;&#37197;&#32622;&#65292;&#25152;&#20197;&#19981;&#38656;&#35201;&#25285;&#24515;&#23427;&#20204;&#30340;&#37197;&#32622;&#12290;
		</p><div class="table"><a name="portlet-webappctx-special-beans-tbl"></a><p class="title"><b>Table&nbsp;16.1.&nbsp;<tt class="interfacename">WebApplicationContext</tt>&#20013;&#29305;&#27530;&#30340;Bean</b></p><table summary="WebApplicationContext&#20013;&#29305;&#27530;&#30340;Bean" border="1"><colgroup><col align="left"><col></colgroup><thead><tr><th align="left">&#21517;&#35789;</th><th>&#35299;&#37322;</th></tr></thead><tbody><tr><td align="left">&#22788;&#29702;&#22120;&#26144;&#23556;</td><td>(<a href="#portlet-handlermapping" title="16.5.&nbsp;&#22788;&#29702;&#22120;&#26144;&#23556;">Section&nbsp;16.5, &#8220;&#22788;&#29702;&#22120;&#26144;&#23556;&#8221;</a>)
						&#19968;&#20010;&#21069;&#32622;&#21644;&#21518;&#32622;&#30340;&#22788;&#29702;&#22120;&#20197;&#21450;&#25511;&#21046;&#22120;&#30340;&#21015;&#34920;&#65292;&#36825;&#20123;&#25511;&#21046;&#22120;
						&#36890;&#36807;&#21305;&#37197;&#29305;&#23450;&#30340;&#26465;&#20214;&#65288;&#27604;&#22914;&#65292;&#30001;&#25511;&#21046;&#22120;&#25351;&#23450;&#30340;Portlet&#27169;&#24335;&#65289;&#65292;
						&#20174;&#32780;&#24471;&#21040;&#25191;&#34892;&#12290;</td></tr><tr><td align="left">&#25511;&#21046;&#22120;</td><td>(<a href="#portlet-controller" title="16.4.&nbsp;&#25511;&#21046;&#22120;">Section&nbsp;16.4, &#8220;&#25511;&#21046;&#22120;&#8221;</a>)&#26159;MVC&#30340;&#19968;&#21592;&#65292;
						&#26159;&#25552;&#20379;&#65288;&#25110;&#33267;&#23569;&#21487;&#20197;&#35775;&#38382;&#65289;&#20855;&#20307;&#21151;&#33021;&#30340;Bean</td></tr><tr><td align="left">&#35270;&#22270;&#35299;&#26512;&#22120;</td><td>(<a href="#portlet-viewresolver" title="16.6.&nbsp;&#35270;&#22270;&#21644;&#23427;&#20204;&#30340;&#35299;&#26512;">Section&nbsp;16.6, &#8220;&#35270;&#22270;&#21644;&#23427;&#20204;&#30340;&#35299;&#26512;&#8221;</a>) &#33021;&#22815;&#23558;
						&#35270;&#22270;&#21517;&#23383;&#23545;&#24212;&#21040;&#35270;&#22270;&#23450;&#20041;&#12290;</td></tr><tr><td align="left">&#20998;&#27573;(multipart)&#35299;&#26512;&#22120;</td><td>(<a href="#portlet-multipart" title="16.7.&nbsp;Multipart&#25991;&#20214;&#19978;&#20256;&#25903;&#25345;">Section&nbsp;16.7, &#8220;Multipart&#25991;&#20214;&#19978;&#20256;&#25903;&#25345;&#8221;</a>) &#33021;&#22815;&#22788;&#29702;
						&#20174;HTML&#34920;&#21333;&#19978;&#20256;&#30340;&#25991;&#20214;</td></tr><tr><td align="left">&#22788;&#29702;&#22120;&#24322;&#24120;&#35299;&#26512;&#22120;</td><td>(<a href="#portlet-exceptionresolver" title="16.8.&nbsp;&#24322;&#24120;&#22788;&#29702;">Section&nbsp;16.8, &#8220;&#24322;&#24120;&#22788;&#29702;&#8221;</a>) 
						&#33021;&#22815;&#23558;&#24322;&#24120;&#23545;&#24212;&#21040;&#35270;&#22270;&#65292;&#25110;&#23454;&#29616;&#26576;&#31181;&#22797;&#26434;&#30340;&#24322;&#24120;&#22788;&#29702;&#20195;&#30721;</td></tr></tbody></table></div><p>&#22312;<tt class="classname">DispatcherPortlet</tt>&#37197;&#32622;&#22909;&#21518;&#65292;&#35831;&#27714;&#36827;&#20837;&#21040;&#29305;&#23450;
		<tt class="classname">DispatcherPortlet</tt>&#26102;&#65292;&#23427;&#24320;&#22987;&#22788;&#29702;&#12290;&#19979;&#38754;&#25551;&#36848;&#20102;
		<tt class="classname">DispatcherPortlet</tt>&#22788;&#29702;&#35831;&#27714;&#30340;&#23436;&#25972;&#36807;&#31243;&#65306;</p><div class="orderedlist"><ol type="1"><li><p><tt class="literal">PortletRequest.getLocale()</tt>&#36820;&#22238;
			&#30340;Locale&#32465;&#23450;&#22312;&#35831;&#27714;&#19978;&#65292;&#36825;&#20351;&#24471;&#22312;&#22788;&#29702;&#35831;&#27714;&#26102;&#65288;&#22914;&#26174;&#31034;&#35270;&#22270;&#12289;&#20934;&#22791;&#25968;&#25454;&#31561;&#65289;&#65292;
			&#20195;&#30721;&#33021;&#22815;&#20351;&#29992;Locale&#12290;</p></li><li><p>&#22914;&#26524;&#22312;<tt class="interfacename">ActionRequest</tt>&#37324;
			&#25351;&#23450;&#20102;&#20998;&#27573;&#35299;&#26512;&#22120;&#65292;&#26694;&#26550;&#20250;&#22312;&#35831;&#27714;&#37324;&#23547;&#25214;&#20998;&#27573;&#65292;&#22914;&#26524;&#25214;&#21040;&#20102;&#65292;
			&#20250;&#25226;&#23427;&#20204;&#21253;&#35013;&#22312;<tt class="interfacename">MultipartActionRequest</tt>
			&#37324;&#65292;&#20379;&#22312;&#21518;&#32493;&#22788;&#29702;&#20013;&#20351;&#29992;&#12290;&#65288;&#20851;&#20110;&#20998;&#27573;&#22788;&#29702;&#30340;&#36827;&#19968;&#27493;&#20449;&#24687;&#35265;<a href="#portlet-multipart" title="16.7.&nbsp;Multipart&#25991;&#20214;&#19978;&#20256;&#25903;&#25345;">Section&nbsp;16.7, &#8220;Multipart&#25991;&#20214;&#19978;&#20256;&#25903;&#25345;&#8221;</a>&#65289;&#12290;
			</p></li><li><p>&#23547;&#25214;&#21512;&#36866;&#30340;&#22788;&#29702;&#22120;&#12290;&#22914;&#26524;&#25214;&#21040;&#20102;&#65292;&#36825;&#20010;&#22788;&#29702;&#22120;&#20851;&#32852;&#30340;&#25191;&#34892;&#38142;
			(&#21069;&#32622;&#22788;&#29702;&#22120;&#12289;&#21518;&#32622;&#22788;&#29702;&#22120;&#21644;&#25511;&#21046;&#22120;)&#20250;&#34987;&#25353;&#24207;&#25191;&#34892;&#26469;&#20934;&#22791;&#27169;&#22411;&#12290;</p></li><li><p>&#22914;&#26524;&#26377;&#27169;&#22411;&#36820;&#22238;&#65292;&#35270;&#22270;&#36890;&#36807;&#35270;&#22270;&#35299;&#26512;&#22120;&#36827;&#34892;&#26174;&#31034;&#65292;&#35270;&#22270;&#35299;&#26512;&#22120;&#26159;&#22312;
			<tt class="interfacename">WebApplicationContext</tt>&#37197;&#32622;&#22909;&#30340;&#12290;&#22914;&#26524;&#27809;&#26377;&#27169;&#22411;
			&#36820;&#22238;&#65288;&#21487;&#33021;&#30001;&#20110;&#39044;&#22788;&#29702;&#22120;&#25110;&#21518;&#22788;&#29702;&#22120;&#25318;&#25130;&#20102;&#35831;&#27714;&#65292;&#27604;&#22914;&#23433;&#20840;&#21407;&#22240;&#65289;&#65292;&#23601;&#19981;&#20250;&#26377;&#35270;&#22270;&#26174;&#31034;
			&#22240;&#20026;&#26377;&#21487;&#33021;&#35831;&#27714;&#24050;&#32463;&#34987;&#22788;&#29702;&#20102;&#12290;</p></li></ol></div><p>&#22312;<tt class="interfacename">WebApplicationContext</tt>&#37324;
		&#23450;&#20041;&#30340;&#24322;&#24120;&#22788;&#29702;&#35299;&#26512;&#22120;&#33021;&#22815;&#25429;&#33719;&#22312;&#22788;&#29702;&#35831;&#27714;&#26102;&#21487;&#33021;&#25243;&#20986;&#30340;&#24322;&#24120;&#65292;&#20511;&#21161;&#36825;&#20123;&#35299;&#26512;&#22120;&#65292;
		&#25105;&#20204;&#21487;&#20197;&#23545;&#22312;&#25429;&#33719;&#29305;&#23450;&#24322;&#24120;&#26102;&#30340;&#25805;&#20316;&#36827;&#34892;&#33258;&#23450;&#20041;&#12290;</p><p>&#36890;&#36807;&#22312;<tt class="literal">portlet.xml</tt>&#25991;&#20214;&#37324;&#22686;&#21152;Context&#21442;&#25968;&#25110;&#32773;Portlet
		&#21021;&#22987;&#21270;&#21442;&#25968;&#65292;&#21487;&#20197;&#23545;Spring&#30340;<tt class="classname">DispatcherPortlet</tt>&#36827;&#34892;&#33258;&#23450;&#20041;&#12290;
		&#19979;&#38754;&#21015;&#20986;&#20102;&#20960;&#31181;&#21487;&#33021;&#12290;</p><div class="table"><a name="portlet-dpp-init-params"></a><p class="title"><b>Table&nbsp;16.2.&nbsp;<tt class="classname">DispatcherPortlet</tt> &#30340;&#21021;&#22987;&#21270;&#21442;&#25968;</b></p><table summary="DispatcherPortlet &#30340;&#21021;&#22987;&#21270;&#21442;&#25968;" border="1"><colgroup><col align="left"><col></colgroup><thead><tr><th align="left">&#21442;&#25968;</th><th>&#35299;&#37322;</th></tr></thead><tbody><tr><td align="left"><tt class="literal">contextClass</tt></td><td>&#23454;&#29616;<tt class="interfacename">WebApplicationContext</tt>
						&#30340;&#31867;&#65292;&#22312;Portlet&#21021;&#22987;&#21270;&#26102;&#29992;&#23427;&#21021;&#22987;&#21270;context&#12290;&#22914;&#26524;&#27809;&#26377;&#25351;&#23450;&#36825;&#20010;
						&#21442;&#25968;&#65292;&#20250;&#20351;&#29992;<tt class="classname">XmlPortletApplicationContext</tt>&#12290;</td></tr><tr><td align="left"><tt class="literal">contextConfigLocation</tt></td><td>&#20256;&#32473;context&#23454;&#20363;(&#30001;<tt class="literal">contextClass</tt>&#25351;&#23450;)
						&#30340;&#23383;&#31526;&#20018;&#65292;&#25351;&#26126;context&#30340;&#20301;&#32622;&#12290;&#23427;&#21487;&#20197;(&#20197;&#36887;&#21495;)&#20998;&#38548;&#20026;&#22810;&#20010;&#23383;&#31526;&#20018;&#26469;
						&#25903;&#25345;&#22810;&#20010;context&#65288;&#22312;&#23450;&#20041;&#36807;&#20004;&#27425;&#30340;bean&#26377;&#22810;&#20010;context&#20301;&#32622;&#26102;&#65292;
						&#26368;&#21518;&#30340;&#20301;&#32622;&#36215;&#20316;&#29992;&#65289;&#12290;</td></tr><tr><td align="left"><tt class="literal">namespace</tt></td><td><tt class="interfacename">WebApplicationContext</tt>
						&#30340;&#21629;&#21517;&#31354;&#38388;&#65292;&#32570;&#30465;&#26159;<tt class="literal">[portlet-name]-portlet</tt>&#12290;</td></tr><tr><td align="left"><tt class="literal">viewRendererUrl</tt></td><td><tt class="classname">ViewRendererServlet</tt>&#30340;URL&#65292;
						<tt class="classname">DispatcherPortlet</tt>&#21487;&#20197;&#35775;&#38382;&#12290;
						(&#35265; <a href="#portlet-viewservlet" title="16.3.&nbsp;ViewRendererServlet">Section&nbsp;16.3, &#8220;ViewRendererServlet&#8221;</a>)&#12290;</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="portlet-viewservlet"></a>16.3.&nbsp;<tt class="classname">ViewRendererServlet</tt></h2></div></div><div></div></div><p>Portlet MVC&#20013;&#30340;&#26174;&#31034;&#36807;&#31243;&#27604;Web MVC&#30340;&#22797;&#26434;&#19968;&#28857;&#65292;&#20026;&#20102;&#22797;&#29992;&#25152;&#26377;Spring Web MVC&#37324;
		&#30340;<a href="#view" title="Chapter&nbsp;14.&nbsp;&#38598;&#25104;&#35270;&#22270;&#25216;&#26415;">&#35270;&#22270;&#25216;&#26415;</a>&#65292;&#24517;&#39035;&#25226;
		<tt class="interfacename">PortletRequest</tt> / 
		<tt class="interfacename">PortletResponse</tt> &#36716;&#25442;&#21040; 
		<tt class="interfacename">HttpServletRequest</tt> / 
		<tt class="interfacename">HttpServletResponse</tt>&#65292;&#28982;&#21518;&#35843;&#29992;
		<tt class="interfacename">View</tt>&#30340;
		<tt class="literal">render</tt>&#26041;&#27861;&#12290;&#20026;&#27492;&#65292;<tt class="classname">DispatcherPortlet</tt>
		&#20351;&#29992;&#20102;&#19968;&#20010;&#29305;&#27530;&#30340;servlet&#65306;<tt class="classname">ViewRendererServlet</tt>&#12290;</p><p>&#20026;&#20102;<tt class="classname">DispatcherPortlet</tt>&#33021;&#22815;&#26174;&#31034;&#65292;
		&#24517;&#39035;&#22312;<tt class="literal">web.xml</tt>&#25991;&#20214;&#37324;&#20026;&#20320;&#30340;web&#24212;&#29992;&#22768;&#26126;&#19968;&#20010;
		<tt class="classname">ViewRendererServlet</tt>&#30340;&#23454;&#20363;&#65292;&#22914;&#19979;&#65306;</p><pre class="programlisting">&lt;servlet&gt;
    &lt;servlet-name&gt;ViewRendererServlet&lt;/servlet-name&gt;
    &lt;servlet-class&gt;org.springframework.web.servlet.ViewRendererServlet&lt;/servlet-class&gt;
&lt;/servlet&gt;

&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;ViewRendererServlet&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/WEB-INF/servlet/view&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;</pre><p>&#22312;&#23454;&#38469;&#25191;&#34892;&#26174;&#31034;&#26102;&#65292;<tt class="classname">DispatcherPortlet</tt>&#36825;&#26679;&#20570;&#65306;</p><div class="orderedlist"><ol type="1"><li><p>&#25226;
			<tt class="interfacename">WebApplicationContext</tt>&#20316;&#20026;&#23646;&#24615;&#32465;&#23450;&#22312;&#35831;&#27714;&#19978;&#65292;
			&#20351;&#29992;&#21644;<tt class="classname">DispatcherServlet</tt>&#30456;&#21516;&#30340;
			<tt class="literal">WEB_APPLICATION_CONTEXT_ATTRIBUTE</tt>key&#12290;</p></li><li><p>&#25226;<tt class="interfacename">Model</tt>&#21644;
			<tt class="interfacename">View</tt>&#23545;&#35937;&#32465;&#23450;&#22312;&#35831;&#27714;&#19978;&#65292;&#20351;&#23427;&#20204;&#23545;
			<tt class="classname">ViewRendererServlet</tt>&#21487;&#35265;&#12290;</p></li><li><p>&#26500;&#36896; 
			<tt class="interfacename">PortletRequestDispatcher</tt>&#23545;&#35937;&#65292;&#21033;&#29992;
			&#26144;&#23556;&#21040;<tt class="classname">ViewRendererServlet</tt>&#30340;<tt class="literal">/WEB-
			INF/servlet/view</tt>URL&#26469;&#25191;&#34892;<tt class="literal">include</tt>&#25805;&#20316;&#12290;</p></li></ol></div><p>&#28982;&#21518;&#65292;<tt class="classname">ViewRendererServlet</tt>&#33021;&#22815;&#20197;&#21512;&#36866;&#30340;&#21442;&#25968;
		&#35843;&#29992;<tt class="interfacename">View</tt>&#30340;<tt class="literal">render</tt>&#26041;&#27861;&#12290;</p><p>&#21487;&#20197;&#36890;&#36807;<tt class="classname">DispatcherPortlet</tt>&#30340;<tt class="literal">viewRendererUrl</tt>
		&#37197;&#32622;&#21442;&#25968;&#26469;&#20462;&#25913;<tt class="classname">ViewRendererServlet</tt>&#30340;&#23454;&#38469;URL&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="portlet-controller"></a>16.4.&nbsp;&#25511;&#21046;&#22120;</h2></div></div><div></div></div><p>Portlet MVC&#37324;&#30340;&#25511;&#21046;&#22120;&#21644;Web MVC&#30340;&#24456;&#30456;&#20284;&#65292;&#22312;&#20004;&#32773;&#20043;&#38388;&#31227;&#26893;&#20195;&#30721;&#24456;&#31616;&#21333;&#12290;</p><p>Portlet MVC&#25511;&#21046;&#22120;&#26500;&#26550;&#30340;&#22522;&#30784;&#26159;
		<tt class="interfacename">org.springframework.web.portlet.mvc.Controller</tt> 
		&#25509;&#21475;&#65292;&#22914;&#19979;&#25152;&#31034;&#12290;</p><pre class="programlisting">public interface Controller {

    /**
     * Process the render request and return a ModelAndView object which the
     * DispatcherPortlet will render.
     */
    ModelAndView handleRenderRequest(RenderRequest request, RenderResponse response)
        throws Exception;

    /**
     * Process the action request. There is nothing to return.
     */
    void handleActionRequest(ActionRequest request, ActionResponse response)
        throws Exception;

}</pre><p>&#22914;&#20320;&#25152;&#35265;&#65292;Portlet
		<tt class="interfacename">Controller</tt>&#25509;&#21475;&#38656;&#35201;&#20004;&#20010;&#26041;&#27861;&#26469;&#22788;&#29702;Portlet
		&#35831;&#27714;&#30340;&#20004;&#20010;&#38454;&#27573;&#65306;&#21160;&#20316;&#35831;&#27714;&#21644;&#26174;&#31034;&#35831;&#27714;&#12290;&#21160;&#20316;&#38454;&#27573;&#24212;&#35813;&#33021;&#22815;&#22788;&#29702;&#21160;&#20316;&#35831;&#27714;&#65292;&#26174;&#31034;&#38454;&#27573;&#24212;&#35813;
		&#33021;&#22815;&#22788;&#29702;&#26174;&#31034;&#35831;&#27714;&#65292;&#24182;&#36820;&#22238;&#21512;&#36866;&#30340;&#27169;&#22411;&#21644;&#35270;&#22270;&#12290; 
		&#23613;&#31649;<tt class="interfacename">Controller</tt>&#25509;&#21475;&#26159;&#25277;&#35937;&#30340;&#65292;&#20294;Spring Portlet MVC
		&#25552;&#20379;&#20102;&#24456;&#22810;&#21253;&#21547;&#20102;&#21508;&#31181;&#21508;&#26679;&#20320;&#38656;&#35201;&#30340;&#21151;&#33021;&#30340;&#25511;&#21046;&#22120;-&#23427;&#20204;&#20013;&#30340;&#22823;&#22810;&#25968;&#21644;Spring Web MVC&#37324;&#30340;&#25511;&#21046;&#22120;&#24456;&#31867;&#20284;&#12290;
		<tt class="interfacename">Controller</tt>&#25509;&#21475;&#21482;&#23450;&#20041;&#27599;&#20010;&#25511;&#21046;&#22120;&#38656;&#35201;&#30340;&#36890;&#29992;&#30340;&#21151;&#33021;
		- &#22788;&#29702;&#21160;&#20316;&#35831;&#27714;&#65292;&#22788;&#29702;&#26174;&#31034;&#35831;&#27714;&#65292;&#36820;&#22238;&#27169;&#22411;&#21644;&#35270;&#22270;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="portlet-controller-abstractcontroller"></a>16.4.1.&nbsp;<tt class="classname">AbstractController</tt> &#21644; <tt class="classname">PortletContentGenerator</tt></h3></div></div><div></div></div><p>&#24403;&#28982;&#65292;&#20165;&#19968;&#20010;<tt class="interfacename">Controller</tt> 
			&#26159;&#19981;&#22815;&#30340;&#12290;&#20026;&#20102;&#25552;&#20379;&#22522;&#26412;&#30340;&#21151;&#33021;&#65292;&#25152;&#26377;&#30340;Spring Portlet
			<tt class="interfacename">Controller</tt>&#20174;
			<tt class="classname">AbstractController</tt>&#32487;&#25215;&#65292;&#21518;&#32773;&#21487;&#20197;&#35775;&#38382;Spring
			&#30340;<tt class="interfacename">ApplicationContext</tt>&#21644;&#25511;&#21046;&#32531;&#23384;&#12290;</p><div class="table"><a name="portlet-ac-features"></a><p class="title"><b>Table&nbsp;16.3.&nbsp;<tt class="classname">AbstractController</tt>&#25552;&#20379;&#30340;&#21151;&#33021;</b></p><table summary="AbstractController&#25552;&#20379;&#30340;&#21151;&#33021;" border="1"><colgroup><col align="left"><col></colgroup><thead><tr><th align="left">&#21442;&#25968;</th><th>&#35299;&#37322;</th></tr></thead><tbody><tr><td align="left"><tt class="literal">requireSession</tt></td><td>&#34920;&#26126;&#24403;&#21069;&#30340;
							<tt class="interfacename">Controller</tt>&#26159;&#21542;&#38656;&#35201;session&#12290;
							&#25152;&#26377;&#30340;&#25511;&#21046;&#22120;&#37117;&#33021;&#20351;&#29992;&#36825;&#20010;&#21151;&#33021;&#12290;&#22914;&#26524;&#36825;&#26679;&#30340;&#25511;&#21046;&#22120;&#25910;&#21040;&#35831;&#27714;&#26102;&#65292;
							session&#19981;&#23384;&#22312;&#65292;&#29992;&#25143;&#20250;&#25910;&#21040;
							<tt class="classname">SessionRequiredException</tt>&#24322;&#24120;&#12290;</td></tr><tr><td align="left"><tt class="literal">synchronizeSession</tt></td><td>&#22914;&#26524;&#38656;&#35201;&#25511;&#21046;&#22120;&#22312;&#22788;&#29702;&#29992;&#25143;session&#26102;&#20445;&#25345;&#21516;&#27493;&#65292;&#20351;&#29992;
							&#36825;&#20010;&#21442;&#25968;&#12290;&#26356;&#20855;&#20307;&#26469;&#35828;&#65292;&#25193;&#23637;&#30340;&#25511;&#21046;&#22120;&#20250;&#35206;&#30422;<tt class="methodname">handleRenderRequestInternal(..)</tt>
							&#21644;<tt class="methodname">handleActionRequestInternal(..)</tt>&#26041;&#27861;&#65292;&#22914;&#26524;&#25351;&#23450;&#20102;&#36825;&#20010;&#21442;&#25968;&#65292;
							&#36825;&#20004;&#20010;&#26041;&#27861;&#20250;&#22312;&#22788;&#29702;&#29992;&#25143;session&#26102;&#20445;&#25345;&#21516;&#27493;&#12290;</td></tr><tr><td align="left"><tt class="literal">renderWhenMinimized</tt></td><td>&#22914;&#26524;&#38656;&#35201;&#22312;portlet&#26368;&#23567;&#21270;&#29366;&#24577;&#26102;&#65292;&#25511;&#21046;&#22120;&#20063;&#26174;&#31034;&#35270;&#22270;&#65292;
							&#25226;&#36825;&#20010;&#21442;&#25968;&#35774;&#20026;true&#12290;&#36825;&#20010;&#21442;&#25968;&#32570;&#30465;&#26159;false&#65292;&#25152;&#20197;portlet&#22312;&#26368;&#23567;&#21270;&#29366;&#24577;
							&#26102;&#65292;&#19981;&#26174;&#31034;&#20869;&#23481;&#12290;</td></tr><tr><td align="left"><tt class="literal">cacheSeconds</tt></td><td>&#22312;&#38656;&#35201;&#25511;&#21046;&#22120;&#35206;&#30422;&#24403;&#21069;portlet&#23450;&#20041;&#30340;&#32570;&#30465;&#32531;&#23384;&#22833;&#25928;&#26102;&#38388;&#26102;&#65292;
							&#35774;&#32622;&#19968;&#20010;&#27491;&#30340;&#25972;&#25968;&#12290;&#36825;&#20010;&#21442;&#25968;&#32570;&#30465;&#26159;<tt class="literal">-1</tt>&#65292;
							&#34920;&#31034;&#19981;&#25913;&#21464;&#32570;&#30465;&#30340;&#32531;&#23384;&#65292;&#25226;&#23427;&#35774;&#20026;<tt class="literal">0</tt>&#65292;&#23601;&#26159;
							&#30830;&#20445;&#19981;&#32531;&#23384;&#32467;&#26524;&#12290;</td></tr></tbody></table></div><p><tt class="literal">requireSession</tt>&#21644; 
			<tt class="literal">cacheSeconds</tt>&#23646;&#24615;&#26159;&#22312;
			<tt class="classname">AbstractController</tt>&#30340;&#29238;&#31867;
			<tt class="classname">PortletContentGenerator</tt>&#37324;&#22768;&#26126;&#30340;&#12290;&#20026;&#20102;&#23436;&#25972;&#24615;&#65292;
			&#25226;&#23427;&#20204;&#21015;&#22312;&#36825;&#37324;&#12290;</p><p>&#22312;&#20320;&#33258;&#24049;&#30340;&#25511;&#21046;&#22120;&#37324;&#32487;&#25215;<tt class="classname">AbstractController</tt>&#26102;
			&#65288;&#19981;&#25512;&#33616;&#36825;&#26679;&#20570;&#65292;&#22240;&#20026;&#24050;&#32463;&#26377;&#35768;&#22810;&#29616;&#25104;&#30340;&#25511;&#21046;&#22120;&#65292;&#23427;&#20204;&#21487;&#33021;&#26377;&#20320;&#38656;&#35201;&#30340;&#21151;&#33021;&#65289;&#65292;&#20165;&#38656;&#35201;&#35206;&#30422;
			<tt class="methodname">handleActionRequestInternal(ActionRequest, 
			ActionResponse)</tt>&#26041;&#27861;&#25110; 
			<tt class="methodname">handleRenderRequestInternal(RenderRequest, 
			RenderResponse)</tt>&#26041;&#27861;&#65288;&#25110;&#20004;&#32773;&#37117;&#35206;&#30422;&#65289;&#65292;&#23454;&#29616;&#36923;&#36753;&#65292;
			&#24182;&#36820;&#22238; <tt class="classname">ModelAndView</tt> &#23545;&#35937;&#65288;&#22914;&#26524;&#26159;
			<tt class="literal">handleRenderRequestInternal</tt>&#26041;&#27861;&#65289;&#12290;</p><p><tt class="methodname">handleActionRequestInternal(..)</tt>&#21644; 
			<tt class="methodname">handleRenderRequestInternal(..)</tt>&#26041;&#27861;&#30340;&#32570;&#30465;&#23454;&#29616;&#37117;&#20250;
			&#25243;&#20986;<tt class="classname">PortletException</tt>&#65292;&#36825;&#21644;JSR-168&#35268;&#33539;API&#37324;&#30340;
			<tt class="classname">GenericPortlet</tt>&#30340;&#34892;&#20026;&#26159;&#19968;&#33268;&#30340;&#12290;&#25152;&#20197;&#21482;&#35201;&#35206;&#30422;&#20320;&#30340;&#25511;&#21046;&#22120;
			&#38656;&#35201;&#22788;&#29702;&#30340;&#26041;&#27861;&#12290;</p><p>&#19979;&#38754;&#31616;&#30701;&#30340;&#20363;&#23376;&#21253;&#21547;&#20102;&#19968;&#20010;&#31867;&#21644;&#19968;&#20010;&#22312;web&#24212;&#29992;context&#37324;&#30340;&#22768;&#26126;&#12290;</p><pre class="programlisting">package samples;

import javax.portlet.RenderRequest;
import javax.portlet.RenderResponse;

import org.springframework.web.portlet.mvc.AbstractController;
import org.springframework.web.portlet.ModelAndView;

public class SampleController extends AbstractController {

    public ModelAndView handleRenderRequestInternal(
        RenderRequest request,
        RenderResponse response) throws Exception {

        ModelAndView mav = new ModelAndView("foo");
        mav.addObject("message", "Hello World!");
        return mav;
    }
}

&lt;bean id="sampleController" class="samples.SampleController"&gt;
    &lt;property name="cacheSeconds" value="120"/&gt;
&lt;/bean&gt;</pre><p>&#20026;&#20102;&#20351;&#24471;&#19968;&#20010;&#31616;&#21333;&#30340;&#25511;&#21046;&#22120;&#24037;&#20316;&#65292;&#20320;&#21482;&#38656;&#35201;&#31867;&#20284;&#19978;&#38754;&#30340;&#31867;&#21644;&#22312;web&#24212;&#29992;context&#37324;&#30340;&#22768;&#26126;&#65292;
			&#24182;&#19988;&#20877;&#35774;&#32622;&#19968;&#19979;&#22788;&#29702;&#22120;&#26144;&#23556;&#65288;&#35265; <a href="#portlet-handlermapping" title="16.5.&nbsp;&#22788;&#29702;&#22120;&#26144;&#23556;">Section&nbsp;16.5, &#8220;&#22788;&#29702;&#22120;&#26144;&#23556;&#8221;</a>&#65289;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="portlet-controller-simple"></a>16.4.2.&nbsp;&#20854;&#23427;&#31616;&#21333;&#30340;&#25511;&#21046;&#22120;</h3></div></div><div></div></div><p>&#23613;&#31649;&#20320;&#33021;&#22815;&#32487;&#25215;<tt class="classname">AbstractController</tt>&#65292;
			Spring Portlet MVC&#25552;&#20379;&#20102;&#19981;&#23569;&#20855;&#20307;&#30340;&#23454;&#29616;&#65292;&#23427;&#20204;&#25552;&#20379;&#20102;&#35768;&#22810;&#22312;&#31616;&#21333;MVC&#24212;&#29992;&#37324;&#24120;&#29992;&#30340;&#21151;&#33021;&#12290;
			</p><p><tt class="classname">ParameterizableViewController</tt>&#22522;&#26412;&#19978;
			&#21644;&#19978;&#38754;&#30340;&#20363;&#23376;&#31867;&#20284;&#65292;&#38500;&#20102;&#20320;&#33021;&#25351;&#23450;web&#24212;&#29992;context&#36820;&#22238;&#30340;&#35270;&#22270;&#30340;&#21517;&#23383;&#12290;&#65288;&#19981;&#38656;&#35201;&#20889;&#27515;&#35270;&#22270;&#21517;&#31216;&#65289;&#12290;
			</p><p><tt class="classname">PortletModeNameViewController</tt>&#25226;&#24403;&#21069;&#30340;
			Portlet&#30340;&#29366;&#24577;&#20316;&#20026;&#35270;&#22270;&#21517;&#65292;&#22914;&#26524;Portlet&#22312;View&#27169;&#24335;
			&#65288;&#27604;&#22914;&#65306;<tt class="literal">PortletMode.VIEW</tt>&#65289;&#65292;&#36825;&#20010;&#8220;View&#8221;&#23601;&#26159;&#35270;&#22270;&#21517;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="portlet-controller-command"></a>16.4.3.&nbsp;Command&#25511;&#21046;&#22120;</h3></div></div><div></div></div><p>Spring Portlet MVC&#25552;&#20379;&#20102;&#21644;Spring Web MVC&#23436;&#20840;&#19968;&#33268;&#30340;
			<span class="emphasis"><em>command controllers</em></span>&#23618;&#27425;&#32467;&#26500;&#65292;&#25552;&#20379;&#26041;&#27861;&#26469;&#19982;&#25968;&#25454;&#23545;&#35937;&#20132;&#20114;
			&#24182;&#19988;&#21160;&#24577;&#22320;&#25226;&#21442;&#25968;&#20174;<tt class="interfacename">PortletRequest</tt>
			&#32465;&#23450;&#21040;&#25968;&#25454;&#23545;&#35937;&#19978;&#12290;&#25968;&#25454;&#23545;&#35937;&#19981;&#38656;&#35201;&#23454;&#29616;&#26694;&#26550;&#30456;&#20851;&#30340;&#25509;&#21475;&#65292;&#22240;&#32780;&#20320;&#21487;&#20197;
			&#30452;&#25509;&#25805;&#20316;&#36825;&#20123;&#25345;&#20037;&#21270;&#23545;&#35937;&#12290;&#19979;&#38754;&#35753;&#25105;&#20204;&#26597;&#30475;Command&#25511;&#21046;&#22120;&#25552;&#20379;&#30340;&#21151;&#33021;&#65292;&#26469;&#20102;&#35299;&#23427;&#20204;&#30340;&#20351;&#29992;&#65306;
			</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="classname">AbstractCommandController</tt> 
				- Command&#25511;&#21046;&#22120;&#65292;&#21487;&#20197;&#29992;&#26469;&#21019;&#24314;&#33258;&#24049;&#30340;&#25511;&#21046;&#22120;&#65292;&#23427;&#33021;&#22815;&#23558;&#35831;&#27714;&#37324;&#30340;&#21442;&#25968;
				&#32465;&#23450;&#21040;&#25351;&#23450;&#30340;&#25968;&#25454;&#23545;&#35937;&#12290;&#36825;&#20010;&#31867;&#19981;&#25552;&#20379;&#34920;&#21333;&#21151;&#33021;&#65292;&#20294;&#23427;&#25552;&#20379;&#39564;&#35777;&#21151;&#33021;&#65292;&#24182;&#19988;
				&#21487;&#20197;&#22312;&#25511;&#21046;&#22120;&#37324;&#25351;&#23450;&#22914;&#20309;&#22788;&#29702;&#24102;&#26377;&#35831;&#27714;&#21442;&#25968;&#30340;Command&#23545;&#35937;&#12290;</p></li><li><p><tt class="classname">AbstractFormController</tt> -
				&#25552;&#20379;&#34920;&#21333;&#25552;&#20132;&#25903;&#25345;&#30340;&#25277;&#35937;&#25511;&#21046;&#22120;&#12290;&#20320;&#33021;&#22815;&#23545;&#34920;&#21333;&#36827;&#34892;&#24314;&#27169;&#65292;&#36890;&#36807;&#20174;&#25511;&#21046;&#22120;
				&#37324;&#24471;&#21040;&#30340;Command&#23545;&#35937;&#26469;&#22635;&#20805;&#34920;&#21333;&#12290;&#22312;&#29992;&#25143;&#25552;&#20132;&#34920;&#21333;&#21518;&#65292; 
				<tt class="classname">AbstractFormController</tt>&#20250;&#32465;&#23450;&#23383;&#27573;&#12289;&#36827;&#34892;&#39564;&#35777;&#65292;
				&#28982;&#21518;&#25226;&#23545;&#35937;&#36820;&#22238;&#32473;&#25511;&#21046;&#22120;&#26469;&#20570;&#19979;&#19968;&#27493;&#30340;&#21160;&#20316;&#12290;&#25903;&#25345;&#30340;&#21151;&#33021;&#26377;&#65306;&#26080;&#25928;&#34920;&#21333;&#25552;&#20132;(&#37325;&#26032;
				&#25552;&#20132;)&#12289;&#39564;&#27491;&#21644;&#36890;&#24120;&#30340;&#34920;&#21333;&#27969;&#31243;&#12290;&#20320;&#38656;&#35201;&#23454;&#29616;&#26041;&#27861;&#26469;&#20915;&#23450;&#34920;&#21333;&#30340;&#26174;&#31034;&#21644;&#25104;&#21151;&#26102;&#20351;&#29992;&#30340;
				&#35270;&#22270;&#12290;&#22914;&#26524;&#20320;&#38656;&#35201;&#34920;&#21333;&#65292;&#20294;&#19981;&#24819;&#22312;&#24212;&#29992;context&#37324;&#25351;&#23450;&#29992;&#25143;&#30475;&#21040;&#30340;&#35270;&#22270;&#65292;&#20351;&#29992;&#36825;&#20010;
				&#25511;&#21046;&#22120;&#12290;</p></li><li><p><tt class="classname">SimpleFormController</tt> -
				&#19968;&#20010;&#20855;&#20307;&#30340;<tt class="classname">AbstractFormController</tt>&#65292;
				&#23545;&#20351;&#29992;&#23545;&#24212;&#30340;command&#23545;&#35937;&#29983;&#25104;&#34920;&#21333;&#25552;&#20379;&#20102;&#26356;&#22810;&#30340;&#25903;&#25345;&#12290;
				<tt class="classname">SimpleFormController</tt>&#21487;&#20197;&#35753;&#20320;&#22312;&#29992;&#25143;&#25104;&#21151;&#22320;&#25552;&#20132;
				&#34920;&#21333;&#25110;&#20854;&#23427;&#29366;&#24577;&#26102;&#65292;&#25351;&#23450;command&#23545;&#35937;&#65292;&#34920;&#21333;&#30340;&#35270;&#22270;&#21517;&#20197;&#21450;&#39029;&#38754;&#23545;&#24212;&#30340;&#35270;&#22270;&#21517;&#12290;</p></li><li><p><tt class="classname">AbstractWizardFormController</tt> &#8211;
				&#20855;&#20307;&#30340;<tt class="classname">AbstractFormController</tt>&#65292;&#23427;&#25552;&#20132;&#20102;&#21521;&#23548;&#24335;&#30340;&#25509;&#21475;
				&#26469;&#32534;&#36753;&#36328;&#22810;&#20010;&#39029;&#38754;&#30340;command&#23545;&#35937;&#12290;&#25903;&#25345;&#22810;&#31181;&#29992;&#25143;&#21160;&#20316;&#65306;&#23436;&#25104;&#12289;&#21462;&#28040;&#25110;&#32773;&#39029;&#38754;&#21464;&#21270;&#65292;&#25152;&#26377;&#36825;&#20123;
				&#37117;&#21487;&#20197;&#31616;&#20415;&#22320;&#22312;&#35270;&#22270;&#30340;&#35831;&#27714;&#21442;&#25968;&#37324;&#25351;&#23450;&#12290;</p></li></ul></div><p>&#36825;&#20123;command&#25511;&#21046;&#22120;&#26159;&#38750;&#24120;&#24378;&#22823;&#30340;&#65292;&#20026;&#20102;&#26377;&#25928;&#22320;&#20351;&#29992;&#65292;&#38656;&#35201;&#23545;&#23427;&#20204;&#30340;&#21407;&#29702;&#26377;
			&#32454;&#33268;&#30340;&#29702;&#35299;&#12290;&#22312;&#20320;&#24320;&#22987;&#20351;&#29992;&#23427;&#20204;&#21069;&#65292;&#21153;&#24517;&#20180;&#32454;&#38405;&#35835;&#23427;&#20204;&#23618;&#27425;&#32467;&#26500;&#30340;javadoc&#20197;&#21450;&#31034;&#20363;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="portlet-controller-wrapping"></a>16.4.4.&nbsp;<tt class="classname">PortletWrappingController</tt></h3></div></div><div></div></div><p>&#38500;&#20102;&#24320;&#21457;&#26032;&#30340;&#25511;&#21046;&#22120;&#65292;&#25105;&#20204;&#21487;&#20197;&#37325;&#29992;&#29616;&#26377;&#30340;portlet&#24182;&#19988;&#22312;
			<tt class="classname">DispatcherPortlet</tt>
			&#25226;&#35831;&#27714;&#26144;&#23556;&#25351;&#21521;&#23427;&#20204;&#12290;&#36890;&#36807;<tt class="classname">PortletWrappingController</tt>&#65292;&#20320;&#33021;&#23454;&#20363;&#21270;&#19968;&#20010;
			&#29616;&#26377;&#30340;<tt class="interfacename">Portlet</tt>&#26469;&#20316;
			<tt class="interfacename">Controller</tt>&#65292;&#22914;&#19979;&#25152;&#31034;&#65306;</p><pre class="programlisting">&lt;bean id="wrappingController"
      class="org.springframework.web.portlet.mvc.PortletWrappingController"&gt;
    &lt;property name="portletClass" value="sample.MyPortlet"/&gt;
    &lt;property name="portletName" value="my-portlet"/&gt;
    &lt;property name="initParameters"&gt;
        &lt;value&gt;
            config=/WEB-INF/my-portlet-config.xml
        &lt;/value&gt;
    &lt;/property&gt;
&lt;/bean&gt;</pre><p>&#36825;&#20250;&#24456;&#26377;&#20215;&#20540;&#65292;&#22240;&#20026;&#21487;&#20197;&#20351;&#29992;&#25318;&#25130;&#22120;&#26469;&#23545;&#36865;&#21521;&#36825;&#20123;portlet&#30340;&#35831;&#27714;&#36827;&#34892;&#39044;&#22788;&#29702;&#21644;&#21518;&#22788;&#29702;&#12290;
			&#32780;&#19988;&#20063;&#24456;&#26041;&#20415;&#65292;&#22240;&#20026;JSR-168&#27809;&#26377;&#25552;&#20379;&#23545;&#36807;&#28388;&#26426;&#21046;&#30340;&#25903;&#25345;&#12290;&#27604;&#22914;&#65292;&#21487;&#20197;&#22312;&#19968;&#20010;MyFaces
			JSR Portlet&#22806;&#38754;&#21152;&#19978;Hibernate&#30340;
			<tt class="classname">OpenSessionInViewInterceptor</tt>&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="portlet-handlermapping"></a>16.5.&nbsp;&#22788;&#29702;&#22120;&#26144;&#23556;</h2></div></div><div></div></div><p>&#36890;&#36807;&#22788;&#29702;&#22120;&#26144;&#23556;&#65292;&#21487;&#20197;&#25226;&#36827;&#26469;&#30340;portlet&#35831;&#27714;&#23545;&#24212;&#21040;&#21512;&#36866;&#30340;&#22788;&#29702;&#22120;&#19978;&#12290;&#24050;&#32463;&#26377;&#19968;&#20123;
		&#29616;&#25104;&#30340;&#22788;&#29702;&#22120;&#26144;&#23556;&#21487;&#20197;&#20351;&#29992;&#65292;&#27604;&#22914;<tt class="classname">PortletModeHandlerMapping</tt>&#12290;
		&#20294;&#36824;&#26159;&#35753;&#25105;&#20204;&#20808;&#30475;&#19968;&#19979;<tt class="interfacename">HandlerMapping</tt>&#30340;&#19968;&#33324;&#27010;&#24565;&#12290;</p><p>&#27880;&#24847;&#65292;&#25105;&#20204;&#36825;&#37324;&#26377;&#24847;&#20351;&#29992;&#8220;&#22788;&#29702;&#22120;&#8221;&#26469;&#20195;&#26367;&#8220;&#25511;&#21046;&#22120;&#8221;&#12290;
		<tt class="classname">DispatcherPortlet</tt>&#26159;&#35774;&#35745;&#29992;&#26469;&#21644;&#22810;&#31181;&#26041;&#24335;&#19968;&#36215;&#22788;&#29702;&#35831;&#27714;&#30340;&#65292;
		&#32780;&#19981;&#20165;&#20165;&#26159;&#21644;Spring Portlet MVC&#33258;&#24049;&#30340;&#25511;&#21046;&#22120;&#12290;&#22788;&#29702;&#22120;&#26159;&#20219;&#24847;&#21487;&#20197;&#22788;&#29702;Portlet&#35831;&#27714;&#30340;&#23545;&#35937;&#12290;
		&#25511;&#21046;&#22120;&#24403;&#28982;&#32570;&#30465;&#26159;&#19968;&#31181;&#22788;&#29702;&#22120;&#12290;&#35201;&#23558;<tt class="classname">DispatcherPortlet</tt>
		&#21644;&#19968;&#20123;&#20854;&#20182;&#30340;&#26694;&#26550;&#19968;&#36215;&#20351;&#29992;&#65292;&#21482;&#38656;&#35201;&#23454;&#29616;&#30456;&#24212;&#30340;<tt class="interfacename">HandlerAdapter</tt>&#23601;&#21487;&#20197;&#20102;&#12290;</p><p><tt class="interfacename">HandlerMapping</tt>&#25552;&#20379;&#30340;&#22522;&#26412;&#21151;&#33021;&#26159;&#25552;&#20379;&#19968;&#20010;
		<tt class="classname">HandlerExecutionChain</tt>&#65292;&#21518;&#32773;&#24517;&#39035;&#21253;&#21547;&#21305;&#37197;&#36827;&#26469;&#35831;&#27714;&#30340;
		&#30340;&#22788;&#29702;&#22120;&#65292;&#20063;&#21487;&#33021;&#21253;&#21547;&#38656;&#35201;&#24212;&#29992;&#21040;&#35831;&#27714;&#30340;&#22788;&#29702;&#22120;&#25318;&#25130;&#22120;&#30340;&#21015;&#34920;&#12290;&#24403;&#19968;&#20010;&#35831;&#27714;&#36827;&#26469;&#26102;&#65292;
		<tt class="classname">DispatcherPortlet</tt>&#20250;&#25226;&#23427;&#20132;&#32473;&#22788;&#29702;&#22120;&#23556;&#26144;&#65292;&#35753;&#23427;&#26469;&#26816;&#26597;
		&#35831;&#27714;&#24182;&#24471;&#21040;&#21512;&#36866;&#30340;<tt class="classname">HandlerExecutionChain</tt>&#12290;&#28982;&#21518;
		<tt class="classname">DispatcherPortlet</tt>&#20250;&#25191;&#34892;&#22788;&#29702;&#22120;&#20197;&#21450;chain&#37324;&#30340;&#25318;&#25130;&#22120;&#12290;&#36825;&#20123;
		&#27010;&#24565;&#21644;Spring Web MVC&#20013;&#30340;&#23436;&#20840;&#19968;&#33268;&#12290;</p><p>&#21487;&#37197;&#32622;&#30340;&#22788;&#29702;&#22120;&#26144;&#23556;&#38750;&#24120;&#24378;&#22823;&#65292;&#23427;&#21487;&#20197;&#21253;&#21547;&#25318;&#25130;&#22120;(&#22312;&#23454;&#38469;&#30340;&#22788;&#29702;&#21069;&#12289;&#21518;&#36827;&#34892;&#39044;&#22788;&#29702;&#25110;&#21518;&#22788;&#29702;
		&#25110;&#20004;&#32773;&#37117;&#25191;&#34892;)&#12290;&#21487;&#20197;&#36890;&#36807;&#33258;&#23450;&#20041;&#19968;&#20010;<tt class="interfacename">HandlerMapping</tt>&#26469;&#21152;&#20837;&#35768;&#22810;&#21151;&#33021;&#12290;
		&#24819;&#20687;&#19968;&#19979;&#65292;&#19968;&#20010;&#33258;&#23450;&#20041;&#30340;&#22788;&#29702;&#22120;&#26144;&#23556;&#65292;&#23427;&#19981;&#20165;&#21487;&#20197;&#26681;&#25454;&#25351;&#23450;&#30340;portlet&#27169;&#24335;&#26469;&#36873;&#25321;&#22788;&#29702;&#22120;&#65292;
		&#20063;&#21487;&#20197;&#26681;&#25454;&#35831;&#27714;&#30456;&#32852;&#31995;&#30340;session&#37324;&#30340;&#25351;&#23450;&#29366;&#24577;&#26469;&#36873;&#25321;&#12290;</p><p>&#22312;Spring Web MVC&#37324;&#65292;&#22788;&#29702;&#22120;&#26144;&#23556;&#36890;&#24120;&#26159;&#22522;&#20110;URL&#30340;&#12290;&#22240;&#20026;&#22312;Portlet&#37324;&#30830;&#23454;&#27809;&#26377;URL&#65292;
		&#24517;&#39035;&#20351;&#29992;&#20854;&#23427;&#30340;&#26426;&#21046;&#26469;&#25511;&#21046;&#26144;&#23556;&#12290;&#26368;&#24120;&#35265;&#30340;&#20004;&#20010;&#26159;portlet&#27169;&#24335;&#21644;&#35831;&#27714;&#21442;&#25968;&#65292;
		&#20294;&#22312;portlet&#35831;&#27714;&#37324;&#30340;&#20219;&#20309;&#23545;&#35937;&#37117;&#21487;&#20197;&#29992;&#22312;&#33258;&#23450;&#20041;&#30340;&#22788;&#29702;&#22120;&#26144;&#23556;&#20013;&#12290;</p><p>&#20313;&#19979;&#30340;&#31456;&#33410;&#20250;&#20171;&#32461;&#22312;Spring Portlet MVC&#37324;&#26368;&#24120;&#35265;&#30340;&#19977;&#31181;&#22788;&#29702;&#22120;&#23556;&#26144;&#65292;
		&#23427;&#20204;&#37117;&#32487;&#25215;<tt class="classname">AbstractHandlerMapping</tt>&#24182;&#19988;&#20849;&#20139;&#20197;&#19979;&#30340;&#23646;&#24615;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">interceptors</tt>: &#38656;&#35201;&#20351;&#29992;&#30340;&#25318;&#25130;&#22120;&#21015;&#34920;&#12290;
			<tt class="interfacename">HandlerInterceptor</tt>&#22312; 
			<a href="#portlet-handlermapping-interceptor" title="16.5.4.&nbsp;&#22686;&#21152; HandlerInterceptors">Section&nbsp;16.5.4, &#8220;&#22686;&#21152; HandlerInterceptors&#8221;</a>&#26377;&#35752;&#35770;&#12290;</p></li><li><p><tt class="literal">defaultHandler</tt>: &#22312;&#25214;&#19981;&#21040;&#21305;&#37197;&#30340;&#22788;&#29702;&#22120;&#26102;&#65292;&#32570;&#30465;&#30340;&#22788;&#29702;&#22120;&#12290;
			</p></li><li><p><tt class="literal">order</tt>: Spring&#20250;&#25353;&#29031;order&#23646;&#24615;&#20540;
			(&#35265;<tt class="interfacename">org.springframework.core.Ordered</tt>&#25509;&#21475;)
			&#23545;context&#37324;&#30340;&#25152;&#26377;&#22788;&#29702;&#22120;&#26144;&#23556;&#36827;&#34892;&#25490;&#24207;&#65292;&#24182;&#19988;&#24212;&#29992;&#31532;&#19968;&#20010;&#21305;&#37197;&#30340;&#22788;&#29702;&#22120;&#12290;</p></li><li><p><tt class="literal">lazyInitHandlers</tt>: &#29992;&#26469;Lazy&#21021;&#22987;&#21270;&#21333;&#20363;
			&#22788;&#29702;&#22120;(prototype&#22788;&#29702;&#22120;&#26159;&#22987;&#32456;lazy&#21021;&#22987;&#21270;&#30340;)&#12290;&#32570;&#30465;&#20540;&#26159;false&#12290;&#36825;&#20010;&#23646;&#24615;&#26159;&#22312;&#36825;&#19977;&#20010;&#20855;&#20307;&#22788;&#29702;&#22120;&#37324;&#30452;&#25509;&#23454;&#29616;&#12290;
			</p></li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="portlet-handlermapping-portletmode"></a>16.5.1.&nbsp;<tt class="classname">PortletModeHandlerMapping</tt></h3></div></div><div></div></div><p>&#36825;&#26159;&#19968;&#20010;&#31616;&#21333;&#30340;&#22788;&#29702;&#22120;&#26144;&#23556;&#65292;&#23427;&#26159;&#22522;&#20110;&#24403;&#21069;&#30340;portlet&#27169;&#24335;&#65288;&#27604;&#22914;&#65306;'view', 'edit', 'help'&#65289;&#12290;&#22914;&#19979;&#65306;</p><pre class="programlisting">&lt;bean id="portletModeHandlerMapping"
      class="org.springframework.web.portlet.handler.PortletModeHandlerMapping"&gt;
    &lt;property name="portletModeMap"&gt;
        &lt;map&gt;
            &lt;entry key="view" value-ref="viewHandler"/&gt;
            &lt;entry key="edit" value-ref="editHandler"/&gt;
            &lt;entry key="help" value-ref="helpHandler"/&gt;
        &lt;/map&gt;
    &lt;/property&gt;
&lt;/bean&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="portlet-handlermapping-parameter"></a>16.5.2.&nbsp;<tt class="classname">ParameterHandlerMapping</tt></h3></div></div><div></div></div><p>&#22914;&#26524;&#38656;&#35201;&#22312;&#19981;&#25913;&#21464;portlet&#27169;&#24335;&#30340;&#24773;&#20917;&#19979;&#32780;&#22312;&#22810;&#20010;&#25511;&#21046;&#22120;&#38388;&#20999;&#25442;&#65292;
			&#26368;&#31616;&#21333;&#30340;&#26041;&#27861;&#26159;&#25226;&#19968;&#20010;&#35831;&#27714;&#21442;&#25968;&#20316;&#20026;key&#26469;&#25511;&#21046;&#26144;&#23556;&#12290;</p><p><tt class="classname">ParameterHandlerMapping</tt>&#20351;&#29992;&#19968;&#20010;&#29305;&#23450;&#30340;&#35831;&#27714;&#21442;&#25968;&#26469;&#25511;&#21046;&#26144;&#23556;&#12290;
			&#36825;&#20010;&#21442;&#25968;&#30340;&#32570;&#30465;&#21517;&#26159;<tt class="literal">'action'</tt>&#65292;&#21487;&#20197;&#36890;&#36807;<tt class="literal">'parameterName'</tt>&#23646;&#24615;&#26469;&#25913;&#21464;&#12290;</p><p>&#36825;&#20010;&#26144;&#23556;&#30340;bean&#35774;&#32622;&#20250;&#26159;&#36825;&#26679;&#65306;</p><pre class="programlisting">&lt;bean id="parameterHandlerMapping"
      class="org.springframework.web.portlet.handler.ParameterHandlerMapping&#8221;&gt;
    &lt;property name="parameterMap"&gt;
        &lt;map&gt;
            &lt;entry key="add" value-ref="addItemHandler"/&gt;
            &lt;entry key="edit" value-ref="editItemHandler"/&gt;
            &lt;entry key="delete" value-ref="deleteItemHandler"/&gt;
        &lt;/map&gt;
    &lt;/property&gt;
&lt;/bean&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="portlet-handlermapping-portletmodeparameter"></a>16.5.3.&nbsp;<tt class="classname">PortletModeParameterHandlerMapping</tt></h3></div></div><div></div></div><p>&#26368;&#24378;&#22823;&#30340;&#20869;&#32622;&#22788;&#29702;&#26144;&#23556;
			<tt class="classname">PortletModeParameterHandlerMapping</tt> &#32467;&#21512;&#20102;&#21069;&#20004;&#32773;&#30340;&#21151;&#33021;&#65292;
			&#33021;&#22815;&#22312;&#27599;&#31181;portlet&#27169;&#24335;&#19979;&#36827;&#34892;&#19981;&#21516;&#30340;&#20999;&#25442;&#12290;</p><p>&#21516;&#26679;&#65292;&#21442;&#25968;&#30340;&#32570;&#30465;&#21517;&#26159;&#8220;action&#8221;&#65292;&#20294;&#21487;&#20197;&#36890;&#36807; <tt class="literal">parameterName</tt> &#26469;&#20462;&#25913;&#12290;</p><p>&#32570;&#30465;&#24773;&#20917;&#19979;&#65292;&#21516;&#26679;&#30340;&#21442;&#25968;&#20540;&#19981;&#33021;&#22312;&#20004;&#20010;&#19981;&#21516;&#30340;portlet&#27169;&#24335;&#19979;&#20351;&#29992;&#65292;
			&#22240;&#20026;&#22914;&#26524;portlet&#33258;&#24049;&#25913;&#21464;&#20102;portlet&#27169;&#24335;&#65292;&#37027;&#20040;&#35831;&#27714;&#22312;&#26144;&#23556;&#20013;&#23558;&#19981;&#22312;&#26377;&#25928;&#12290;
			&#25226; <tt class="literal">allowDupParameters</tt> &#23646;&#24615;&#35774;&#20026;true&#21487;&#20197;&#25913;&#21464;&#36825;&#31181;&#34892;&#20026;&#65292;&#20294;&#36825;&#31181;&#20570;&#27861;&#26159;&#19981;&#25512;&#33616;&#30340;&#12290;</p><p>&#36825;&#20010;&#26144;&#23556;&#30340;bean&#35774;&#32622;&#20250;&#26159;&#36825;&#26679;&#65306;</p><pre class="programlisting">&lt;bean id="portletModeParameterHandlerMapping"
      class="org.springframework.web.portlet.handler.PortletModeParameterHandlerMapping"&gt;
    &lt;property name="portletModeParameterMap"&gt;
        &lt;map&gt;
            &lt;entry key="view"&gt; <i class="lineannotation"><span class="lineannotation">&lt;!-- 'view' portlet mode --&gt;</span></i>
                &lt;map&gt;
                    &lt;entry key="add" value-ref="addItemHandler"/&gt;
                    &lt;entry key="edit" value-ref="editItemHandler"/&gt;
                    &lt;entry key="delete" value-ref="deleteItemHandler"/&gt;
                &lt;/map&gt;
            &lt;/entry&gt;
            &lt;entry key="edit"&gt; <i class="lineannotation"><span class="lineannotation">&lt;!-- 'edit' portlet mode --&gt;</span></i>
                &lt;map&gt;
                    &lt;entry key="prefs" value-ref="prefsHandler"/&gt;
                    &lt;entry key="resetPrefs" value-ref="resetPrefsHandler"/&gt;
                &lt;/map&gt;
            &lt;/entry&gt;
        &lt;/map&gt;
    &lt;/property&gt;
&lt;/bean&gt;</pre><p>&#36825;&#20010;&#26144;&#23556;&#21487;&#20197;&#22312;&#22788;&#29702;&#38142;&#20013;&#25918;&#22312;
		<tt class="classname">PortletModeHandlerMapping</tt> &#21069;&#38754;&#65292;&#23427;&#21487;&#20197;&#20026;&#27599;&#20010;&#27169;&#24335;&#20197;&#21450;&#20840;&#23616;&#25552;&#20379;&#32570;&#30465;&#30340;&#26144;&#23556;&#12290;
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="portlet-handlermapping-interceptor"></a>16.5.4.&nbsp;&#22686;&#21152; <tt class="interfacename">HandlerInterceptor</tt>s</h3></div></div><div></div></div><p>Spring&#30340;&#22788;&#29702;&#22120;&#26144;&#23556;&#26426;&#21046;&#37324;&#26377;&#22788;&#29702;&#22120;&#25318;&#25130;&#22120;&#30340;&#27010;&#24565;&#65292;&#22312;&#24076;&#26395;&#23545;&#20110;&#29305;&#23450;&#30340;&#35831;&#27714;
			&#24212;&#29992;&#19981;&#21516;&#30340;&#21151;&#33021;&#26102;&#65292;&#23427;&#26159;&#38750;&#24120;&#26377;&#29992;&#12290;&#27604;&#22914;&#65292;&#26816;&#26597;&#29992;&#25143;&#21517;&#65288;principal&#65289;&#12290;&#21516;&#26679;&#65292;Spring
			Portlet MVC&#20197;Web MVC&#30456;&#21516;&#30340;&#26041;&#24335;&#23454;&#29616;&#20102;&#36825;&#20123;&#27010;&#24565;&#12290;</p><p>&#22312;&#22788;&#29702;&#22120;&#26144;&#23556;&#37324;&#30340;&#25318;&#25130;&#22120;&#24517;&#39035;&#23454;&#29616;<tt class="literal">org.springframework.web.portlet</tt>
			&#37324;&#30340;<tt class="interfacename">HandlerInterceptor</tt>&#25509;&#21475;&#12290;
			&#21644;servlet&#30340;&#29256;&#26412;&#19968;&#26679;&#65292;&#36825;&#20010;&#25509;&#21475;&#23450;&#20041;&#20102;&#19977;&#20010;&#26041;&#27861;&#65306;&#19968;&#20010;&#22312;&#23454;&#38469;&#30340;&#22788;&#29702;&#22120;&#25191;&#34892;&#21069;&#34987;&#35843;&#29992;
			(<tt class="literal">preHandle</tt>)&#65292;&#19968;&#20010;&#22312;&#25191;&#34892;&#21518;&#34987;&#35843;&#29992;(<tt class="literal">postHandle</tt>)
			&#36824;&#26377;&#19968;&#20010;&#26159;&#22312;&#35831;&#27714;&#23436;&#20840;&#32467;&#26463;&#26102;&#34987;&#35843;&#29992;(<tt class="literal">afterCompletion</tt>)&#12290;
			&#36825;&#19977;&#20010;&#26041;&#27861;&#24212;&#35813;&#21487;&#20197;&#20026;&#21508;&#31181;&#21069;&#32622;&#21644;&#21518;&#32622;&#22788;&#29702;&#25552;&#20379;&#36275;&#22815;&#30340;&#28789;&#27963;&#12290;</p><p><tt class="literal">preHandle</tt>&#36820;&#22238;&#19968;&#20010;&#24067;&#23572;&#20540;&#12290;&#21487;&#20197;&#20351;&#29992;&#36825;&#20010;&#26041;&#27861;&#26469;&#20013;&#26029;&#25110;&#32773;&#32487;&#32493;&#25191;&#34892;&#38142;&#30340;&#22788;&#29702;&#12290;
			&#24403;&#36820;&#22238;<tt class="literal">true</tt>&#26102;&#65292;&#22788;&#29702;&#25191;&#34892;&#38142;&#20250;&#32487;&#32493;&#65292;&#24403;&#36820;&#22238;<tt class="literal">false</tt>&#26102;&#65292;
			<tt class="classname">DispatcherPortlet</tt>
			&#20551;&#35774;&#36825;&#20010;&#25318;&#25130;&#22120;&#24050;&#32463;&#22788;&#29702;&#35831;&#27714;&#65288;&#27604;&#22914;&#65292;&#26174;&#31034;&#20102;&#21512;&#36866;&#30340;&#35270;&#22270;&#65289;&#24182;&#19988;&#19981;&#38656;&#35201;&#32487;&#32493;&#25191;&#34892;&#20854;&#23427;&#30340;
			&#25318;&#25130;&#22120;&#21644;&#22312;&#25191;&#34892;&#38142;&#20013;&#23454;&#38469;&#30340;&#22788;&#29702;&#22120;&#12290;</p><p><tt class="literal">postHandle</tt>&#21482;&#20250;&#22312;<tt class="interfacename">RenderRequest</tt>
			&#20013;&#34987;&#35843;&#29992;&#12290;<tt class="interfacename">ActionRequest</tt>&#21644;<tt class="interfacename">RenderRequest</tt>
			&#37117;&#20250;&#35843;&#29992;<tt class="literal">preHandle</tt>&#21644;<tt class="literal">afterCompletion</tt>&#26041;&#27861;&#12290;
			&#22914;&#26524;&#24076;&#26395;&#21482;&#22312;&#20854;&#20013;&#30340;&#19968;&#31181;&#35831;&#27714;&#20013;&#25191;&#34892;&#20320;&#30340;&#20195;&#30721;&#65292;&#21153;&#24517;&#22312;&#22788;&#29702;&#21069;&#26816;&#26597;&#35831;&#27714;&#30340;&#31867;&#22411;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="portlet-handlermapping-interceptoradapter"></a>16.5.5.&nbsp;<tt class="classname">HandlerInterceptorAdapter</tt></h3></div></div><div></div></div><p>&#21644;servlet&#21253;&#31867;&#20284;&#65292;portlet&#21253;&#37324;&#20063;&#26377;&#19968;&#20010; <tt class="interfacename">HandlerInterceptor</tt>
			&#30340;&#20855;&#20307;&#23454;&#29616; <tt class="classname">HandlerInterceptorAdapter</tt> &#12290;&#36825;&#20010;&#31867;&#25152;&#26377;&#26041;&#27861;&#37117;&#26159;&#31354;&#30340;&#65292;
			&#25152;&#20197;&#21487;&#20197;&#32487;&#25215;&#23427;&#65292;&#23454;&#29616;&#19968;&#20010;&#25110;&#20004;&#20010;&#20320;&#25152;&#38656;&#35201;&#30340;&#26041;&#27861;&#12290;
			</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="portlet-handlermapping-parameterinterceptor"></a>16.5.6.&nbsp;<tt class="classname">ParameterMappingInterceptor</tt></h3></div></div><div></div></div><p>Portlet&#21253;&#20063;&#24102;&#19968;&#20010;&#21517;&#20026;<tt class="classname">ParameterMappingInterceptor</tt>
			&#30340;&#20855;&#20307;&#25318;&#25130;&#22120;&#65292;&#23427;&#21487;&#20197;&#21644;<tt class="classname">ParameterHandlerMapping</tt>
			&#20197;&#21450;<tt class="classname">PortletModeParameterHandlerMapping</tt>&#19968;&#36215;&#20351;&#29992;&#12290;
			&#36825;&#20010;&#25318;&#25130;&#22120;&#21487;&#20197;&#25226;&#29992;&#26469;&#25511;&#21046;&#26144;&#23556;&#30340;&#21442;&#25968;&#20174;<tt class="interfacename">ActionRequest</tt>
			&#24102;&#21040;&#38543;&#21518;&#30340;<tt class="interfacename">RenderRequest</tt>&#65292;&#36825;&#33021;&#22815;&#30830;&#20445;
			<tt class="interfacename">RenderRequest</tt>&#26144;&#23556;&#21040;&#21644;
			<tt class="interfacename">ActionRequest</tt>&#30456;&#21516;&#30340;&#22788;&#29702;&#22120;&#12290;&#36825;&#20123;&#37117;&#26159;&#22312;
			<tt class="literal">preHandle</tt>&#26041;&#27861;&#37324;&#23436;&#25104;&#30340;&#65292;&#25152;&#20197;&#22312;&#20320;&#30340;&#22788;&#29702;&#22120;&#37324;&#20173;&#28982;&#21487;&#20197;&#25913;&#21464;&#20915;&#23450;
			<tt class="interfacename">RenderRequest</tt>&#26144;&#23556;&#30340;&#21442;&#25968;&#20540;&#12290;</p><p>&#27880;&#24847;&#36825;&#20010;&#25318;&#25130;&#22120;&#20250;&#35843;&#29992;<tt class="interfacename">ActionResponse</tt>
			&#30340;<tt class="literal">setRenderParameter</tt>&#26041;&#27861;&#65292;&#36825;&#24847;&#21619;&#30528;&#22312;&#20351;&#29992;&#23427;&#30340;&#26102;&#20505;&#65292;
			&#19981;&#33021;&#22312;&#22788;&#29702;&#22120;&#37324;&#35843;&#29992;<tt class="literal">sendRedirect</tt>&#12290;&#22914;&#26524;&#30830;&#23454;&#38656;&#35201;&#37325;&#23450;&#21521;&#65292;
			&#21487;&#20197;&#25163;&#24037;&#22320;&#25226;&#26144;&#23556;&#21442;&#25968;&#21521;&#21069;&#20256;&#65292;&#25110;&#32773;&#21478;&#20889;&#19968;&#20010;&#25318;&#25130;&#22120;&#26469;&#22788;&#29702;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="portlet-viewresolver"></a>16.6.&nbsp;&#35270;&#22270;&#21644;&#23427;&#20204;&#30340;&#35299;&#26512;</h2></div></div><div></div></div><p>&#22914;&#19978;&#38754;&#25552;&#21040;&#30340;&#37027;&#26679;&#65292;Spring Portle MVC&#30452;&#25509;&#37325;&#29992;&#25152;&#26377;Sprint Web MVC&#37324;&#30340;&#35270;&#22270;&#25216;&#26415;&#12290;
		&#19981;&#20165;&#21253;&#21547;&#20102;&#19981;&#21516;&#30340;<tt class="interfacename">View</tt>&#23454;&#29616;&#65292;&#20063;&#21253;&#21547;&#20102;&#35270;&#22270;&#35299;&#26512;&#22120;&#30340;&#23454;&#29616;&#12290;
		&#38656;&#35201;&#26356;&#22810;&#30456;&#20851;&#20449;&#24687;&#65292;&#35831;&#21442;&#32771;<a href="#view" title="Chapter&nbsp;14.&nbsp;&#38598;&#25104;&#35270;&#22270;&#25216;&#26415;">Chapter&nbsp;14, <i>&#38598;&#25104;&#35270;&#22270;&#25216;&#26415;</i></a>&#21644;<a href="#mvc-viewresolver" title="13.5.&nbsp;&#35270;&#22270;&#19982;&#35270;&#22270;&#35299;&#26512;">Section&nbsp;13.5, &#8220;&#35270;&#22270;&#19982;&#35270;&#22270;&#35299;&#26512;&#8221;</a>&#12290;</p><p>&#20197;&#19979;&#26159;&#19968;&#20123;&#22312;<tt class="interfacename">View</tt>&#21644;<tt class="interfacename">ViewResolver</tt>&#20013;&#20540;&#24471;&#25552;&#21450;&#30340;&#65306;
		</p><div class="itemizedlist"><ul type="disc"><li><p>&#22823;&#22810;&#25968;&#30340;&#38376;&#25143;&#24076;&#26395;portlet&#30340;&#26174;&#31034;&#32467;&#26524;&#26159;HTML&#29255;&#26029;&#65292;&#25152;&#20197;&#20687;
			JSP/JSTL&#12289;Velocity&#12289;FreeMaker&#21644;XSLT&#26159;&#34892;&#24471;&#36890;&#30340;&#12290;&#20294;&#26377;&#26102;&#20505;&#35270;&#22270;&#20063;&#21487;&#33021;&#22312;portlet&#37324;&#36820;&#22238;&#20854;&#23427;&#31867;&#22411;&#30340;&#25991;&#26723;&#12290;
			</p></li><li><p>&#22312;portlet&#37324;&#19981;&#23384;&#22312;HTTP&#30340;&#37325;&#23450;&#21521;(<tt class="interfacename">ActionResponse</tt>
			&#30340;<tt class="literal">sendRedirect(..)</tt>&#19981;&#33021;&#22312;portal&#20013;&#20351;&#29992;)&#12290;&#25152;&#20197;&#22312;Portlet MVC&#20013;
			<tt class="classname">RedirectView</tt>&#21644;<tt class="literal">'redirect:'</tt>&#21069;&#32512;&#26159;
			<span class="bold"><b>&#19981;</b></span>&#24037;&#20316;&#30340;&#12290;</p></li><li><p>&#22312;Portlet MVC&#37324;&#21487;&#20197;&#20351;&#29992;<tt class="literal">'forward:'</tt>&#21069;&#32512;&#12290;
			&#20294;&#26159;&#65292;&#35760;&#20303;&#65292;&#22312;portlet&#37324;&#65292;&#24403;&#21069;URL&#26159;&#19981;&#30830;&#23450;&#30340;&#65292;&#36825;&#24847;&#21619;&#30528;&#19981;&#33021;&#20351;&#29992;&#30456;&#23545;URL&#26469;
			&#35775;&#38382;web&#24212;&#29992;&#30340;&#36164;&#28304;&#65292;&#24517;&#39035;&#20351;&#29992;&#32477;&#23545;URL&#12290;</p></li></ul></div><p>&#23545;&#20110;JSP&#24320;&#21457;&#65292;&#26032;&#30340;Spring Taglib&#21644;Spring&#34920;&#21333;taglib&#20250;&#20197;&#22312;Servlet&#35270;&#22270;&#37324;&#30456;&#21516;&#30340;&#26041;&#24335;&#22312;portlet&#35270;&#22270;&#37324;&#24037;&#20316;&#12290;
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="portlet-multipart"></a>16.7.&nbsp;Multipart&#25991;&#20214;&#19978;&#20256;&#25903;&#25345;</h2></div></div><div></div></div><p>Spring Portlet MVC&#21644;Web MVC&#19968;&#26679;&#65292;&#20063;&#25903;&#25345;multipart&#26469;&#22788;&#29702;portlet&#20013;&#30340;&#25991;&#20214;&#19978;&#20256;&#12290;
		&#25554;&#20214;&#24335;&#30340;<tt class="interfacename">PortletMultipartResolver</tt>&#25552;&#20379;&#20102;&#23545;multipart&#30340;&#25903;&#25345;&#65292;
		&#23427;&#22312;<tt class="literal">org.springframework.web.portlet.multipart</tt>&#21253;&#37324;&#12290;
		Spring&#25552;&#20379;&#20102;<tt class="interfacename">PortletMultipartResolver</tt>&#26469;&#21644;
		<a href="http://jakarta.apache.org/commons/fileupload" target="_top">Commons FileUpload</a>
		&#19968;&#36215;&#20351;&#29992;&#12290;&#20313;&#19979;&#30340;&#31687;&#24133;&#20250;&#20171;&#32461;&#25991;&#20214;&#19978;&#20256;&#30340;&#25903;&#25345;&#12290;</p><p>&#32570;&#30465;&#24773;&#20917;&#19979;&#65292;Spring Portlet&#26159;&#19981;&#20250;&#22788;&#29702;multipart&#30340;&#65292;&#22914;&#26524;&#24320;&#21457;&#20154;&#21592;&#38656;&#35201;&#22788;&#29702;multipart&#65292;
		&#23601;&#24517;&#39035;&#22312;web&#24212;&#29992;&#30340;context&#37324;&#28155;&#21152;&#19968;&#20010;multipart&#35299;&#26512;&#22120;&#65292;&#28982;&#21518;&#65292;
		<tt class="classname">DispatcherPortlet</tt>&#20250;&#22312;&#27599;&#20010;&#35831;&#27714;&#37324;&#26816;&#26597;&#26159;&#21542;&#24102;&#26377;multipart&#12290;
		&#22914;&#26524;&#27809;&#25214;&#21040;&#65292;&#35831;&#27714;&#20250;&#32487;&#32493;&#65292;&#22914;&#26524;&#25214;&#21040;&#20102;multipart&#65292;&#22312;context&#20013;&#22768;&#26126;&#30340;
		<tt class="interfacename">PortletMultipartResolver</tt>&#20250;&#34987;&#35843;&#29992;&#12290;&#25509;&#30528;&#65292;
		&#22312;&#35831;&#27714;&#37324;&#30340;multipart&#23646;&#24615;&#20250;&#21644;&#20854;&#23427;&#30340;&#23646;&#24615;&#19968;&#26679;&#34987;&#22788;&#29702;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>
			&#20219;&#20309;&#24050;&#37197;&#32622;&#30340;<tt class="interfacename">PortletMultipartResolver</tt>bean<span class="emphasis"><em>&#24517;&#39035;</em></span>
			&#20351;&#29992;&#19979;&#21015;id&#65288;&#25110;&#21517;&#31216;&#65289;&#65306;"<tt class="literal">PortletMultipartResolver</tt>" &#12290;
			&#22914;&#26524;&#20320;&#24050;&#32463;&#23450;&#20041;&#20102;&#20320;&#30340;<tt class="interfacename">PortletMultipartResolver</tt>&#20026;&#20219;&#20309;&#20854;&#20182;&#21517;&#31216;&#65292;
			&#21738;&#20040;<tt class="classname">DispatcherPortlet</tt>&#23558;&#25214;&#19981;&#21040;&#20320;&#30340;
			<tt class="interfacename">PortletMultipartResolver</tt>&#65292;&#24182;&#22240;&#27492;&#27809;&#26377;multipart&#30340;&#25903;&#25345;&#12290;
			</p></td></tr></tbody></table></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="portlet-multipart-resolver"></a>16.7.1.&nbsp;&#20351;&#29992; <tt class="interfacename">PortletMultipartResolver</tt></h3></div></div><div></div></div><p>&#19979;&#38754;&#30340;&#20363;&#23376;&#20171;&#32461;&#20102; 
			<tt class="classname">CommonsPortletMultipartResolver</tt>&#30340;&#20351;&#29992;&#65306;</p><pre class="programlisting">&lt;bean id="portletMultipartResolver"
    class="org.springframework.web.portlet.multipart.CommonsPortletMultipartResolver"&gt;

    <i class="lineannotation"><span class="lineannotation">&lt;!-- &#19968;&#20010;&#23646;&#24615;&#65307;&#20197;byte&#20026;&#21333;&#20301;&#30340;&#26368;&#22823;&#25991;&#20214;&#38271;&#24230; --&gt;</span></i>
    &lt;property name="maxUploadSize" value="100000"/&gt;
&lt;/bean&gt;</pre><p>&#24403;&#28982;&#20026;&#20102;&#20351;multipart&#35299;&#26512;&#22120;&#33021;&#22815;&#24037;&#20316;&#65292;&#24517;&#39035;&#25226;&#21512;&#36866;&#30340;jar&#25918;&#21040;&#31867;&#36335;&#24452;&#37324;&#12290;&#23545;&#20110;
			<tt class="classname">CommonsMultipartResolver</tt>&#26469;&#35828;&#65292;&#38656;&#35201;
			<tt class="literal">commons-fileupload.jar</tt>&#12290;&#27880;&#24847;&#65292;&#24517;&#39035;&#20351;&#29992;&#33267;&#23569;1.1
			&#29256;&#26412;&#30340;Commons FileUpload&#65292;&#22240;&#20026;&#20197;&#21069;&#30340;&#29256;&#26412;&#19981;&#25903;&#25345;JSR-168&#24212;&#29992;&#12290;</p><p>&#29616;&#22312;&#20320;&#24050;&#32463;&#30475;&#21040;&#22914;&#20309;&#35774;&#32622;Portlet MVC&#26469;&#22788;&#29702;multipart&#35831;&#27714;&#65292;&#25509;&#19979;&#26469;&#25105;&#20204;
			&#35752;&#35770;&#23427;&#30340;&#20351;&#29992;&#12290;&#24403;<tt class="classname">DispatcherPortlet</tt>&#26816;&#27979;&#21040;
			multipart&#26102;&#65292;&#23427;&#20250;&#28608;&#27963;&#22312;context&#37324;&#22768;&#26126;&#30340;&#35299;&#26512;&#22120;&#65292;&#24182;&#25226;&#35831;&#27714;&#20132;&#32473;&#23427;&#12290;&#28982;&#21518;&#35299;&#26512;&#22120;
			&#25226;&#24403;&#21069;&#30340;<tt class="interfacename">ActionRequest</tt>&#25918;&#21040;&#25903;&#25345;&#25991;&#20214;&#19978;&#20256;&#30340;
			<tt class="interfacename">MultipartActionRequest</tt>&#20013;&#12290;&#36890;&#36807;
			<tt class="interfacename">MultipartActionRequest</tt>&#65292;&#21487;&#20197;&#24471;&#21040;
			&#35831;&#27714;&#21253;&#21547;&#30340;multipart&#20449;&#24687;&#65292;&#24182;&#19988;&#22312;&#25511;&#21046;&#22120;&#37324;&#35775;&#38382;multipart&#25991;&#20214;&#12290;</p><p>&#27880;&#24847;&#65292;&#19981;&#33021;&#20174;<tt class="interfacename">RenderRequest</tt>&#25509;&#25910;&#21040;multipart
			&#25991;&#20214;&#65292;&#32780;&#21482;&#33021;&#20174;<tt class="interfacename">ActionRequest</tt>&#37324;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="portlet-multipart-forms"></a>16.7.2.&nbsp;&#22788;&#29702;&#34920;&#21333;&#37324;&#30340;&#25991;&#20214;&#19978;&#20256;</h3></div></div><div></div></div><p>&#22312; <tt class="interfacename">PortletMultipartResolver</tt> &#22788;&#29702;&#23436;&#21518;&#65292;
			&#35831;&#27714;&#20250;&#32487;&#32493;&#34987;&#22788;&#29702;&#12290;&#20320;&#38656;&#35201;&#21019;&#24314;&#19968;&#20010;&#24102;&#26377;&#19978;&#20256;&#23383;&#27573;&#30340;&#34920;&#21333;&#26469;&#20351;&#29992;&#23427;&#65288;&#35265;&#19979;&#38754;&#65289;&#65292;Spring&#20250;
			&#25226;&#25991;&#20214;&#32465;&#23450;&#22312;&#20320;&#30340;&#34920;&#21333;&#19978;&#65288;&#25903;&#25345;&#23545;&#35937;&#65289;&#12290;&#20026;&#20102;&#35753;&#29992;&#25143;&#19978;&#20256;&#25991;&#20214;&#65292;&#24517;&#39035;&#21019;&#24314;&#19968;&#20010;&#65288;JSP/HTML&#65289;&#30340;&#34920;&#21333;&#65306;
			</p><pre class="programlisting">&lt;h1&gt;Please upload a file&lt;/h1&gt;
&lt;form method="post" action="&lt;portlet:actionURL/&gt;" enctype="multipart/form-data"&gt;
    &lt;input type="file" name="file"/&gt;
    &lt;input type="submit"/&gt;
&lt;/form&gt;</pre><p>&#22914;&#20320;&#25152;&#35265;&#65292;&#25105;&#20204;&#22312;bean&#30340;&#23646;&#24615;&#21518;&#38754;&#21019;&#24314;&#21517;&#20026;&#8220;File&#8221;&#30340;&#23383;&#27573;
			&#29992;&#26469;&#23481;&#32435; <tt class="literal">byte[]</tt>&#12290;&#21152;&#19978;&#20102;&#32534;&#30721;&#23646;&#24615;( <tt class="literal">enctype="multipart/form-data"</tt> )&#65292;
			&#35753;&#27983;&#35272;&#22120;&#30693;&#36947;&#24590;&#26679;&#26469;&#32534;&#30721;multipart&#23383;&#27573;&#65288;&#20999;&#35760;&#65281;&#65289;&#12290;</p><p>&#21644;&#20854;&#23427;&#37027;&#20123;&#19981;&#20250;&#33258;&#21160;&#36716;&#21270;&#20026;&#23383;&#31526;&#20018;&#25110;&#21407;&#22987;&#31867;&#22411;&#30340;&#23646;&#24615;&#19968;&#26679;&#65292;&#20026;&#20102;&#25226;&#20108;&#36827;&#21046;&#25968;&#25454;&#25918;&#21040;&#23545;&#35937;
			&#37324;&#65292;&#24517;&#39035;&#27880;&#20876;&#19968;&#20010;&#20351;&#29992; <tt class="classname">PortletRequestDataBinder</tt>
			&#30340;&#33258;&#23450;&#20041;&#30340;&#32534;&#36753;&#22120;&#12290;&#29616;&#25104;&#26377;&#22909;&#20960;&#20010;&#32534;&#36753;&#22120;&#21487;&#20197;&#29992;&#26469;&#22788;&#29702;&#25991;&#20214;&#24182;&#25226;&#32467;&#26524;&#25918;&#21040;&#23545;&#35937;&#19978;&#12290;
			<tt class="classname">StringMultipartFileEditor</tt> &#33021;&#22815;&#25226;&#25991;&#20214;&#36716;&#25442;&#25104;&#23383;&#31526;&#20018;
			(&#20351;&#29992;&#29992;&#25143;&#23450;&#20041;&#30340;&#23383;&#31526;&#38598;)&#65292;<tt class="classname">ByteArrayMultipartFileEditor</tt>
			&#33021;&#22815;&#25226;&#25991;&#20214;&#36716;&#25442;&#25104;&#23383;&#33410;&#25968;&#25454;&#12290;&#20182;&#20204;&#30340;&#21151;&#33021;&#21644; 
			<tt class="classname">CustomDateEditor</tt>&#19968;&#26679;&#12290;
			</p><p>&#25152;&#20197;&#65292;&#20026;&#20102;&#33021;&#22815;&#20351;&#29992;&#34920;&#21333;&#26469;&#19978;&#20256;&#25991;&#20214;&#65292;&#38656;&#35201;&#22768;&#26126;&#35299;&#26512;&#22120;&#65292;&#26144;&#23556;&#21040;&#22788;&#29702;&#36825;&#20010;bean&#30340;&#25511;&#21046;&#22120;&#30340;&#26144;&#23556;&#20197;&#21450;&#25511;&#21046;&#22120;&#12290;
			</p><pre class="programlisting">&lt;bean id="portletMultipartResolver"
      class="org.springframework.web.portlet.multipart.CommonsPortletMultipartResolver"/&gt;

&lt;bean id="portletModeHandlerMapping"
      class="org.springframework.web.portlet.handler.PortletModeHandlerMapping"&gt;
    &lt;property name="portletModeMap"&gt;
        &lt;map&gt;
            &lt;entry key="view" value-ref="fileUploadController"/&gt;
        &lt;/map&gt;
    &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id="fileUploadController" class="examples.FileUploadController"&gt;
    &lt;property name="commandClass" value="examples.FileUploadBean"/&gt;
    &lt;property name="formView" value="fileuploadform"/&gt;
    &lt;property name="successView" value="confirmation"/&gt;
&lt;/bean&gt;</pre><p>&#25509;&#30528;&#65292;&#21019;&#24314;&#25511;&#21046;&#22120;&#20197;&#21450;&#23454;&#38469;&#23481;&#32435;&#36825;&#20010;&#25991;&#20214;&#23646;&#24615;&#30340;&#31867;&#12290;</p><pre class="programlisting">public class FileUploadController extends SimpleFormController {

    public void onSubmitAction(
        ActionRequest request,
        ActionResponse response,
        Object command,
        BindException errors)
        throws Exception {

        <i class="lineannotation"><span class="lineannotation">// cast the bean</span></i>
        FileUploadBean bean = (FileUploadBean) command;

        <i class="lineannotation"><span class="lineannotation">// let's see if there's content there</span></i>
        byte[] file = bean.getFile();
        if (file == null) {
            <i class="lineannotation"><span class="lineannotation">// hmm, that's strange, the user did not upload anything</span></i>
        }

        // do something with the file here
    }

    protected void initBinder(
            PortletRequest request, PortletRequestDataBinder binder)
        throws Exception {
        // to actually be able to convert Multipart instance to byte[]
        // we have to register a custom editor
        binder.registerCustomEditor(byte[].class, new ByteArrayMultipartFileEditor());
        <i class="lineannotation"><span class="lineannotation">// now Spring knows how to handle multipart object and convert</span></i>
    }
}

public class FileUploadBean {

    private byte[] file;

    public void setFile(byte[] file) {
        this.file = file;
    }

    public byte[] getFile() {
        return file;
    }
}</pre><p>&#22914;&#20320;&#25152;&#35265;&#65292;<tt class="classname">FileUploadBean</tt> &#26377;&#19968;&#20010;&#31867;&#22411;&#26159;
			<tt class="literal">byte[]</tt> &#30340;&#23646;&#24615;&#26469;&#23481;&#32435;&#25991;&#20214;&#12290;&#25511;&#21046;&#22120;&#27880;&#20876;&#20102;&#19968;&#20010;&#33258;&#23450;&#20041;&#32534;&#36753;&#22120;&#26469;
			&#35753;Spring&#30693;&#36947;&#22914;&#20309;&#25226;&#35299;&#26512;&#22120;&#21457;&#29616;&#30340;multipart&#36716;&#25442;&#25104;&#25351;&#23450;&#30340;&#23646;&#24615;&#12290;&#22312;&#36825;&#20010;&#20363;&#23376;&#37324;&#65292;
			&#27809;&#26377;&#23545;bean&#30340; <tt class="literal">byte[]</tt> &#23646;&#24615;&#36827;&#34892;&#20219;&#20309;&#25805;&#20316;&#65292;&#20294;&#23454;&#38469;&#19978;&#65292;&#20320;&#21487;&#20197;&#20570;&#20219;
			&#20309;&#25805;&#20316;&#65288;&#25226;&#23427;&#23384;&#21040;&#25968;&#25454;&#24211;&#37324;&#65292;&#25226;&#23427;&#30005;&#37038;&#20986;&#21435;&#65292;&#25110;&#20854;&#23427;&#65289;</p><p>&#19979;&#38754;&#26159;&#19968;&#20010;&#20363;&#23376;&#65292;&#25991;&#20214;&#30452;&#25509;&#32465;&#23450;&#22312;&#30340;&#19968;&#20010;&#65288;&#34920;&#21333;&#25903;&#25345;&#65289;&#23545;&#35937;&#19978;&#30340;&#23383;&#31526;&#20018;&#31867;&#22411;&#23646;&#24615;&#19978;&#38754;&#65306;</p><pre class="programlisting">public class FileUploadController extends SimpleFormController {

    public void onSubmitAction(
        ActionRequest request,
        ActionResponse response,
        Object command,
        BindException errors) throws Exception {

        // cast the bean
        FileUploadBean bean = (FileUploadBean) command;

        // let's see if there's content there
        String file = bean.getFile();
        if (file == null) {
            // hmm, that's strange, the user did not upload anything
        }

        // do something with the file here
    }

    protected void initBinder(
        PortletRequest request, PortletRequestDataBinder binder) throws Exception {

        // to actually be able to convert Multipart instance to a String
        // we have to register a custom editor
        binder.registerCustomEditor(String.class,
            new StringMultipartFileEditor());
        // now Spring knows how to handle multipart objects and convert
    }
}

public class FileUploadBean {

    private String file;

    public void setFile(String file) {
        this.file = file;
    }

    public String getFile() {
        return file;
    }
}</pre><p>&#24403;&#28982;&#65292;&#26368;&#21518;&#30340;&#20363;&#23376;&#22312;&#19978;&#20256;&#25991;&#26412;&#25991;&#20214;&#26102;&#25165;&#26377;&#65288;&#36923;&#36753;&#19978;&#30340;&#65289;&#24847;&#20041;&#65288;&#22312;&#19978;&#20256;&#22270;&#20687;&#25991;&#20214;&#26102;&#65292;&#23427;&#19981;&#20250;&#24037;&#20316;&#65289;&#12290;
			</p><p>&#31532;&#19977;&#20010;&#65288;&#20063;&#26159;&#26368;&#21518;&#19968;&#20010;&#65289;&#36873;&#39033;&#26159;&#65292;&#20160;&#20040;&#24773;&#20917;&#19979;&#38656;&#35201;&#30452;&#25509;&#32465;&#23450;&#22312;&#65288;&#34920;&#21333;&#25903;&#25345;&#65289;&#23545;&#35937;&#30340;
			<tt class="interfacename">MultipartFile</tt> &#23646;&#24615;&#19978;&#12290;&#22312;&#20197;&#19979;&#30340;&#24773;&#20917;&#65292;&#19981;&#38656;&#35201;&#27880;&#20876;&#33258;&#23450;&#20041;&#30340;&#23646;&#24615;&#32534;&#36753;&#22120;&#65292;&#22240;&#20026;&#19981;&#38656;&#35201;&#31867;&#22411;&#36716;&#25442;&#12290;
			</p><pre class="programlisting">public class FileUploadController extends SimpleFormController {

    public void onSubmitAction(
        ActionRequest request,
        ActionResponse response,
        Object command,
        BindException errors) throws Exception {

        // cast the bean
        FileUploadBean bean = (FileUploadBean) command;

        // let's see if there's content there
        MultipartFile file = bean.getFile();
        if (file == null) {
            // hmm, that's strange, the user did not upload anything
        }

        // do something with the file here
    }
}

public class FileUploadBean {

    private MultipartFile file;

    public void setFile(MultipartFile file) {
        this.file = file;
    }

    public MultipartFile getFile() {
        return file;
    }
}</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="portlet-exceptionresolver"></a>16.8.&nbsp;&#24322;&#24120;&#22788;&#29702;</h2></div></div><div></div></div><p>&#21644;Web MVC&#19968;&#26679;&#65292;Portlet MVC&#25552;&#20379;&#20102;
		<tt class="interfacename">HandlerExceptionResolver</tt> &#26469;&#20943;&#36731;&#22788;&#29702;
		&#35831;&#27714;&#22788;&#29702;&#20135;&#29983;&#30340;&#24847;&#22806;&#24322;&#24120;&#26102;&#30340;&#30171;&#33510;&#12290;Portlet MVC&#21516;&#26679;&#20063;&#25552;&#20379;&#20102;&#20855;&#20307;&#30340;
		<tt class="classname">SimpleMappingExceptionResolver</tt> &#65292;&#21487;&#20197;&#23558;&#21487;&#33021;&#25243;&#20986;&#30340;&#24322;&#24120;&#23545;&#24212;&#21040;&#19968;&#20010;&#35270;&#22270;&#21517;&#12290;
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="portlet-deployment"></a>16.9.&nbsp;Portlet&#24212;&#29992;&#30340;&#37096;&#32626;</h2></div></div><div></div></div><p>Spring Portlet MVC&#24212;&#29992;&#30340;&#37096;&#32626;&#36807;&#31243;&#21644;JSR-168 Portlet&#24212;&#29992;&#30340;&#19968;&#26679;&#12290;&#28982;&#32780;&#65292;
		&#36825;&#37096;&#20998;&#20869;&#23481;&#24120;&#24120;&#20351;&#20154;&#24863;&#21040;&#22256;&#24785;&#65292;&#25152;&#20197;&#20540;&#24471;&#22312;&#36825;&#37324;&#31616;&#21333;&#22320;&#20171;&#32461;&#19968;&#19979;&#12290;</p><p>&#36890;&#24120;&#24773;&#20917;&#19979;&#65292;portal/portlet&#23481;&#22120;&#22312;servlet&#23481;&#22120;&#30340;&#26576;&#20010;Web&#24212;&#29992;&#20013;&#36816;&#34892;&#65292;
		&#20320;&#30340;Portlet&#36816;&#34892;&#22312;servlet&#23481;&#22120;&#30340;&#21478;&#19968;&#20010;Web&#24212;&#29992;&#37324;&#12290;&#20026;&#20102;&#20351;&#24471;Portlet&#23481;&#22120;&#33021;&#22815;&#35843;&#29992;
		Portlet&#24212;&#29992;&#65292;Portlet&#23481;&#22120;&#24517;&#39035;&#23545;&#19968;&#20010;&#26174;&#24335;&#30340;Servlet&#36827;&#34892;&#36328;Context&#30340;&#35843;&#29992;&#65292;&#37027;&#20010;Servlet
		&#25552;&#20379;&#20102;&#23545;&#22312; <tt class="literal">portlet.xml</tt> &#23450;&#20041;&#30340;Portlet&#26381;&#21153;&#30340;&#35775;&#38382;&#25903;&#25345;&#12290;
		</p><p>JSR-168&#35268;&#33539;&#23545;&#36825;&#26041;&#38754;&#27809;&#26377;&#35268;&#23450;&#65292;&#25152;&#20197;&#27599;&#20010;Portlet&#23481;&#22120;&#37117;&#26377;&#33258;&#24049;&#30340;&#26426;&#21046;&#65292;&#36890;&#24120;
		&#20250;&#24341;&#20837;&#19968;&#20123;&#8220;&#24067;&#32626;&#26102;&#30340;&#22788;&#29702;&#8221;&#26469;&#25913;&#21464;Portlet&#24212;&#29992;&#24182;&#19988;&#25226;Portlet&#27880;&#20876;&#21040;Portlet&#23481;&#22120;&#37324;&#12290;
		</p><p>&#33267;&#23569;&#65292;&#22312;Portlet&#24212;&#29992;&#20013; <tt class="literal">web.xml</tt> &#25991;&#20214;&#38656;&#35201;&#36890;&#36807;&#20462;&#25913;&#26469;&#27880;&#20837;
		Portlet&#23481;&#22120;&#20250;&#26174;&#24335;&#35843;&#29992;&#30340;Servlet&#12290;&#26377;&#26102;&#20505;&#65292;&#21333;&#20010;Servlet&#23454;&#20363;&#23545;Web&#24212;&#29992;&#20013;&#30340;&#25152;&#26377;
		Portlet&#25552;&#20379;&#25903;&#25345;&#65292;&#26377;&#26102;&#20505;&#65292;&#23545;&#20110;&#27599;&#20010;Portlet&#38656;&#35201;&#19968;&#20010;Servlet&#23454;&#20363;&#12290;
		</p><p>&#26377;&#20123;Portlet&#23481;&#22120;&#20063;&#20250;&#22312;Web&#24212;&#29992;&#20013;&#27880;&#20837;&#31867;&#24211;&#25110;&#32773;&#37197;&#32622;&#25991;&#20214;&#12290;Portlet&#23481;&#22120;&#38656;&#35201;&#23454;&#29616;Portlet JSP Tab&#24211;&#20197;&#20379;&#20351;&#29992;&#12290;
		</p><p>&#26368;&#37325;&#35201;&#30340;&#26159;&#29702;&#35299;&#20320;&#36873;&#25321;&#30340;portal&#23545;Portlet&#24067;&#32626;&#30340;&#35201;&#27714;&#65292;&#24182;&#19988;&#30830;&#20445;&#28385;&#36275;&#23427;&#20204;
		(&#36890;&#24120;&#26159;&#25353;&#29031;&#23427;&#25552;&#20379;&#30340;&#33258;&#21160;&#24067;&#32626;&#31243;&#24207;)&#12290;&#20180;&#32454;&#38405;&#35835;portal&#36825;&#26041;&#38754;&#30340;&#25991;&#26723;&#12290;</p><p>&#22312;&#20320;&#24067;&#32626;&#23436;Portlet&#21518;&#65292;&#26816;&#26597; <tt class="literal">web.xml</tt> &#12290;&#26377;&#20123;&#32769;&#30340;portal
		&#20250;&#30772;&#22351; <tt class="classname">ViewRendererServlet</tt> &#30340;&#23450;&#20041;&#65292;&#30772;&#22351;&#20320;&#30340;Portlet&#26174;&#31034;&#12290;
		</p></div></div></div><div class="part" lang="en"><div class="titlepage"><div><div><h1 class="title"><a name="spring-integration"></a>&#25972;&#21512;</h1></div></div><div></div></div><div class="partintro" lang="en"><div><div></div><div></div></div><p>
				&#25991;&#26723;&#30340;&#36825;&#19968;&#37096;&#20998;&#21253;&#25324;&#20102;Spring Framework&#19982;&#19968;&#31995;&#21015;J2EE&#65288;&#21450;&#30456;&#20851;&#65289;&#25216;&#26415;&#30340;&#25972;&#21512;&#12290;
			</p><div class="itemizedlist"><ul type="disc"><li><p><a href="#remoting" title="Chapter&nbsp;17.&nbsp;&#20351;&#29992;Spring&#36827;&#34892;&#36828;&#31243;&#35775;&#38382;&#19982;Web&#26381;&#21153;">Chapter&nbsp;17, <i>&#20351;&#29992;Spring&#36827;&#34892;&#36828;&#31243;&#35775;&#38382;&#19982;Web&#26381;&#21153;</i></a></p></li><li><p><a href="#ejb" title="Chapter&nbsp;18.&nbsp;Enterprise Java Beans (EJB) &#38598;&#25104;">Chapter&nbsp;18, <i>Enterprise Java Beans (EJB) &#38598;&#25104;</i></a></p></li><li><p><a href="#jms" title="Chapter&nbsp;19.&nbsp;JMS (Java Message Service)">Chapter&nbsp;19, <i>JMS (Java Message Service)</i></a></p></li><li><p><a href="#jmx" title="Chapter&nbsp;20.&nbsp;JMX">Chapter&nbsp;20, <i>JMX</i></a></p></li><li><p><a href="#cci" title="Chapter&nbsp;21.&nbsp;JCA CCI">Chapter&nbsp;21, <i>JCA CCI</i></a></p></li><li><p><a href="#mail" title="Chapter&nbsp;22.&nbsp;Spring&#37038;&#20214;&#25277;&#35937;&#23618;">Chapter&nbsp;22, <i>Spring&#37038;&#20214;&#25277;&#35937;&#23618;</i></a></p></li><li><p><a href="#scheduling" title="Chapter&nbsp;23.&nbsp;Spring&#20013;&#30340;&#23450;&#26102;&#35843;&#24230;(Scheduling)&#21644;&#32447;&#31243;&#27744;(Thread Pooling)">Chapter&nbsp;23, <i>Spring&#20013;&#30340;&#23450;&#26102;&#35843;&#24230;(Scheduling)&#21644;&#32447;&#31243;&#27744;(Thread Pooling)</i></a></p></li><li><p><a href="#dynamic-language" title="Chapter&nbsp;24.&nbsp;&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;">Chapter&nbsp;24, <i>&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;</i></a></p></li><li><p><a href="#metadata" title="Chapter&nbsp;25.&nbsp;&#27880;&#35299;&#21644;&#28304;&#20195;&#30721;&#32423;&#30340;&#20803;&#25968;&#25454;&#25903;&#25345;">Chapter&nbsp;25, <i>&#27880;&#35299;&#21644;&#28304;&#20195;&#30721;&#32423;&#30340;&#20803;&#25968;&#25454;&#25903;&#25345;</i></a></p></li></ul></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="remoting"></a>Chapter&nbsp;17.&nbsp;&#20351;&#29992;Spring&#36827;&#34892;&#36828;&#31243;&#35775;&#38382;&#19982;Web&#26381;&#21153;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="remoting-introduction"></a>17.1.&nbsp;&#31616;&#20171;</h2></div></div><div></div></div><p>Spring&#20026;&#21508;&#31181;&#36828;&#31243;&#35775;&#38382;&#25216;&#26415;&#30340;&#38598;&#25104;&#25552;&#20379;&#20102;&#25972;&#21512;&#31867;&#12290;Spring&#20351;&#24471;&#24320;&#21457;&#20855;&#26377;&#36828;&#31243;&#35775;&#38382;&#21151;&#33021;&#30340;&#26381;&#21153;&#21464;&#24471;&#30456;&#24403;&#23481;&#26131;&#65292;&#32780;&#36825;&#20123;&#36828;&#31243;&#35775;&#38382;&#26381;&#21153;&#30001;&#26222;&#36890;Spring POJO&#23454;&#29616;&#12290;&#30446;&#21069;&#65292;Spring&#25903;&#25345;&#22235;&#31181;&#36828;&#31243;&#25216;&#26415;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><span class="emphasis"><em>&#36828;&#31243;&#26041;&#27861;&#35843;&#29992;&#65288;RMI&#65289;</em></span>&#12290;&#36890;&#36807;&#20351;&#29992; <tt class="classname">RmiProxyFactoryBean</tt> &#21644; <tt class="classname">RmiServiceExporter</tt>&#65292;Spring&#21516;&#26102;&#25903;&#25345;&#20256;&#32479;&#30340;RMI&#65288;&#20351;&#29992;<tt class="interfacename">java.rmi.Remote</tt>&#25509;&#21475;&#21644;<tt class="exceptionname">java.rmi.RemoteException</tt>&#65289;&#21644;&#36890;&#36807;RMI&#35843;&#29992;&#22120;&#23454;&#29616;&#30340;&#36879;&#26126;&#36828;&#31243;&#35843;&#29992;&#65288;&#25903;&#25345;&#20219;&#20309;Java&#25509;&#21475;&#65289;&#12290;</p></li><li><p>
						<span class="emphasis"><em>Spring&#30340;HTTP&#35843;&#29992;&#22120;</em></span>&#12290;Spring&#25552;&#20379;&#20102;&#19968;&#31181;&#20801;&#35768;&#36890;&#36807;HTTP&#36827;&#34892;Java&#20018;&#34892;&#21270;&#30340;&#29305;&#27530;&#36828;&#31243;&#35843;&#29992;&#31574;&#30053;&#65292;&#23427;&#25903;&#25345;&#20219;&#24847;Java&#25509;&#21475;&#65288;&#23601;&#20687;RMI&#35843;&#29992;&#22120;&#65289;&#12290;&#30456;&#23545;&#24212;&#30340;&#25903;&#25345;&#31867;&#26159; <tt class="classname">HttpInvokerProxyFactoryBean</tt> &#21644; <tt class="classname">HttpInvokerServiceExporter</tt>&#12290;
					</p></li><li><p>
						<span class="emphasis"><em>Hessian</em></span>&#12290;&#36890;&#36807; <tt class="classname">HessianProxyFactoryBean</tt> &#21644; <tt class="classname">HessianServiceExporter</tt>&#65292;&#21487;&#20197;&#20351;&#29992;Caucho&#25552;&#20379;&#30340;&#22522;&#20110;HTTP&#30340;&#36731;&#37327;&#32423;&#20108;&#36827;&#21046;&#21327;&#35758;&#26469;&#36879;&#26126;&#22320;&#26292;&#38706;&#26381;&#21153;&#12290;
					</p></li><li><p>
						<span class="emphasis"><em>Burlap</em></span>&#12290; Burlap&#26159;Caucho&#22522;&#20110;XML&#29992;&#26469;&#26367;&#20195;Hessian&#30340;&#39033;&#30446;&#12290;Spring&#25552;&#20379;&#20102;&#35832;&#22914; <tt class="classname">BurlapProxyFactoryBean</tt> &#21644; <tt class="classname">BurlapServiceExporter</tt> &#30340;&#25903;&#25345;&#31867;&#12290;
					</p></li><li><p>
						<span class="emphasis"><em>JAX RPC</em></span>&#12290;Spring&#36890;&#36807;JAX-RPC&#65288;J2EE 1.4's wweb service API&#65289;&#20026;Web services&#25552;&#20379;&#36828;&#31243;&#26381;&#21153;&#25903;&#25345;&#12290;
					</p></li><li><p><span class="emphasis"><em>JAX-WS</em></span>. Spring&#36890;&#36807;(&#22312;Java EE 5&#21644;Java 6&#20013;&#24341;&#20837;&#30340;JAX-RPC&#32487;&#25215;)&#20026;&#36828;&#31243;Web Services&#25552;&#20379;&#25903;&#25345;&#12290;</p></li><li><p><span class="emphasis"><em>JMS</em></span>. &#36890;&#36807;<tt class="classname">JmsInvokerServiceExporter</tt>&#21644;<tt class="classname">JmsInvokerProxyFactoryBean</tt>&#20351;&#29992;JMS&#20570;&#20026;&#24213;&#23618;&#21327;&#35758;&#25552;&#20379;&#36828;&#31243;&#26381;&#21153;.</p></li></ul></div><p>&#22312;&#35752;&#35770;Spring&#23545;&#36828;&#31243;&#35775;&#38382;&#30340;&#25903;&#25345;&#26102;&#65292;&#25105;&#20204;&#23558;&#20351;&#29992;&#19979;&#38754;&#30340;&#22495;&#27169;&#22411;&#21644;&#23545;&#24212;&#30340;&#26381;&#21153;&#65306;</p><pre class="programlisting">public class Account implements Serializable{

    private String name;

    public String getName();

    public void setName(String name) {
      this.name = name;
    }
}</pre><pre class="programlisting">public interface AccountService {

    public void insertAccount(Account account);

    public List getAccounts(String name);
}</pre><pre class="programlisting">public interface RemoteAccountService extends Remote {

    public void insertAccount(Account account) throws RemoteException;

    public List getAccounts(String name) throws RemoteException;
}</pre><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">// &#35813;&#23454;&#29616;&#30446;&#21069;&#20160;&#20040;&#20107;&#24773;&#20063;&#19981;&#20570;</span></i>
public class AccountServiceImpl implements AccountService {

    public void insertAccount(Account acc) {
        <i class="lineannotation"><span class="lineannotation">//  &#20570;&#19968;&#20123;&#20107;&#24773;&#8230;&#8230;</span></i>
    }
  
    public List getAccounts(String name) {
        <i class="lineannotation"><span class="lineannotation">// &#20570;&#19968;&#20123;&#20107;&#24773;&#8230;&#8230;</span></i>
    }
}</pre><p>&#25105;&#20204;&#23558;&#20174;&#20351;&#29992;RMI&#25226;&#26381;&#21153;&#26292;&#38706;&#32473;&#36828;&#31243;&#23458;&#25143;&#31471;&#24320;&#22987;&#65292;&#21516;&#26102;&#25506;&#35752;RMI&#30340;&#19968;&#20123;&#32570;&#28857;&#12290;&#28982;&#21518;&#25105;&#20204;&#23558;&#28436;&#31034;&#19968;&#20010;&#20351;&#29992;Hessian&#30340;&#20363;&#23376;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="remoting-rmi"></a>17.2.&nbsp;&#20351;&#29992;RMI&#26292;&#38706;&#26381;&#21153;</h2></div></div><div></div></div><p>&#20351;
&#29992;Spring&#30340;RMI&#25903;&#25345;&#65292;&#20320;&#21487;&#20197;&#36890;&#36807;RMI&#22522;&#30784;&#35774;&#26045;&#36879;&#26126;&#30340;&#26292;&#38706;&#20320;&#30340;&#26381;&#21153;&#12290;&#35774;&#32622;&#22909;Spring&#30340;RMI&#25903;&#25345;&#21518;&#65292;&#20320;&#20250;&#30475;&#21040;&#19968;&#20010;&#21644;&#36828;&#31243;EJB&#25509;&#21475;&#31867;&#20284;&#30340;&#37197;
&#32622;&#65292;&#21482;&#26159;&#27809;&#26377;&#23545;&#23433;&#20840;&#19978;&#19979;&#25991;&#20256;&#36882;&#21644;&#36828;&#31243;&#20107;&#21153;&#20256;&#36882;&#30340;&#26631;&#20934;&#25903;&#25345;&#12290;&#24403;&#20351;&#29992;RMI&#35843;&#29992;&#22120;&#26102;&#65292;Spring&#23545;&#36825;&#20123;&#39069;&#22806;&#30340;&#35843;&#29992;&#19978;&#19979;&#25991;&#25552;&#20379;&#20102;&#38057;&#23376;&#65292;&#20320;&#21487;&#20197;&#22312;&#27492;&#25554;&#20837;&#23433;&#20840;&#26694;&#26550;
&#25110;&#32773;&#23450;&#21046;&#30340;&#23433;&#20840;&#35777;&#20070;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="remoting-rmi-server"></a>17.2.1.&nbsp;&#20351;&#29992;<tt class="classname">RmiServiceExporter</tt>&#26292;&#38706;&#26381;&#21153;</h3></div></div><div></div></div><p>&#20351;&#29992;<tt class="classname">RmiServiceExporter</tt>&#65292;&#25105;&#20204;&#21487;&#20197;&#25226;AccountService&#23545;&#35937;&#30340;&#25509;&#21475;&#26292;&#38706;&#25104;RMI&#23545;&#35937;&#12290;&#21487;&#20197;&#20351;&#29992; <tt class="classname">RmiProxyFactoryBean</tt> &#25110;&#32773;&#22312;&#20256;&#32479;RMI&#26381;&#21153;&#20013;&#20351;&#29992;&#26222;&#36890;RMI&#26469;&#35775;&#38382;&#35813;&#25509;&#21475;&#12290;<tt class="classname">RmiServiceExporter</tt> &#26174;&#24335;&#22320;&#25903;&#25345;&#20351;&#29992;RMI&#35843;&#29992;&#22120;&#26292;&#38706;&#20219;&#20309;&#38750;RMI&#30340;&#26381;&#21153;&#12290;</p><p>&#24403;&#28982;&#65292;&#25105;&#20204;&#39318;&#20808;&#38656;&#35201;&#22312;Spring&#23481;&#22120;&#20013;&#35774;&#32622;&#25105;&#20204;&#30340;&#26381;&#21153;&#65306;</p><pre class="programlisting">&lt;bean id="accountService" class="example.AccountServiceImpl"&gt;
    <i class="lineannotation"><span class="lineannotation">
	&lt;!--&#20854;&#20182;&#23646;&#24615;&#65292;&#25110;&#32773;&#19968;&#20010;DAO&#23545;&#35937;&#65311;--&gt;
</span></i>
&lt;/bean&gt;</pre><p>&#28982;&#21518;&#25105;&#20204;&#35201;&#20351;&#29992;<tt class="classname">RmiServiceExporter</tt>&#26469;&#26292;&#38706;&#25105;&#20204;&#30340;&#26381;&#21153;&#65306;</p><pre class="programlisting">&lt;bean class="org.springframework.remoting.rmi.RmiServiceExporter"&gt;
    <i class="lineannotation"><span class="lineannotation">&lt;!-- &#19981;&#19968;&#23450;&#35201;&#19982;&#35201;&#36755;&#20986;&#30340;bean&#21516;&#21517;--&gt;</span></i>
    &lt;property name="serviceName" value="AccountService"/&gt;
    &lt;property name="service" ref="accountService"/&gt;
    &lt;property name="serviceInterface" value="example.AccountService"/&gt;
    <i class="lineannotation"><span class="lineannotation">&lt;!--  &#40664;&#35748;&#20026;1199--&gt;</span></i>
    &lt;property name="registryPort" value="1199"/&gt;
&lt;/bean&gt;</pre><p>&#27491;&#22914;&#20320;&#25152;&#35265;&#65292;&#25105;&#20204;&#35206;&#30422;&#20102;RMI&#27880;&#20876;&#30340;&#31471;&#21475;&#21495;&#12290;&#36890;&#24120;&#20320;&#30340;&#24212;&#29992;&#26381;&#21153;&#22120;&#20063;&#20250;&#32500;&#25252;RMI&#27880;&#20876;&#65292;&#26368;&#22909;&#19981;&#35201;&#21644;&#23427;&#20914;&#31361;&#12290;&#26356;&#36827;&#19968;&#27493;&#26469;&#35828;&#65292;&#26381;&#21153;&#21517;&#26159;&#29992;&#26469;&#32465;&#23450;&#26381;&#21153;&#30340;&#12290;&#25152;&#20197;&#26412;&#20363;&#20013;&#65292;&#26381;&#21153;&#32465;&#23450;&#22312; <tt class="literal">rmi://HOST:1199/AccountService</tt>&#12290;&#22312;&#23458;&#25143;&#31471;&#25105;&#20204;&#23558;&#20351;&#29992;&#36825;&#20010;URL&#26469;&#38142;&#25509;&#21040;&#26381;&#21153;&#12290;
			</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p><tt class="literal">servicePort</tt> &#23646;&#24615;&#34987;&#30465;&#30053;&#20102;(&#23427;&#30340;&#40664;&#35748;&#20540;&#20026;0).&#36825;&#34920;&#31034;&#22312;&#19982;&#26381;&#21153;&#36890;&#20449;&#26102;&#23558;&#20351;&#29992;&#21311;&#21517;&#31471;&#21475;.</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="remoting-rmi-client"></a>17.2.2.&nbsp;&#22312;&#23458;&#25143;&#31471;&#38142;&#25509;&#26381;&#21153;</h3></div></div><div></div></div><p>&#25105;&#20204;&#30340;&#23458;&#25143;&#31471;&#26159;&#19968;&#20010;&#20351;&#29992;<tt class="interfacename">AccountService</tt>&#26469;&#31649;&#29702;account&#30340;&#31616;&#21333;&#23545;&#35937;&#65306;</p><pre class="programlisting">public class SimpleObject {

    private AccountService accountService;

    public void setAccountService(AccountService accountService) {
        this.accountService = accountService;
    }
}</pre><p>&#20026;&#20102;&#25226;&#26381;&#21153;&#36830;&#25509;&#21040;&#23458;&#25143;&#31471;&#19978;&#65292;&#25105;&#20204;&#23558;&#21019;&#24314;&#19968;&#20010;&#21333;&#29420;&#30340;Spring&#23481;&#22120;&#65292;&#21253;&#21547;&#36825;&#20010;&#31616;&#21333;&#23545;&#35937;&#21644;&#38142;&#25509;&#37197;&#32622;&#20301;&#30340;&#26381;&#21153;&#65306;</p><pre class="programlisting">&lt;bean class="example.SimpleObject"&gt;
    &lt;property name="accountService" ref="accountService"/&gt;
&lt;/bean&gt;

&lt;bean id="accountService" class="org.springframework.remoting.rmi.RmiProxyFactoryBean"&gt;
    &lt;property name="serviceUrl" value="rmi://HOST:1199/AccountService"/&gt;
    &lt;property name="serviceInterface" value="example.AccountService"/&gt;
&lt;/bean&gt;</pre><p>&#36825;&#23601;&#26159;&#25105;&#20204;&#22312;&#23458;&#25143;&#31471;&#20026;&#25903;&#25345;&#36828;&#31243;account&#26381;&#21153;&#25152;&#38656;&#35201;&#20570;&#30340;&#12290;Spring&#23558;&#36879;&#26126;&#30340;&#21019;&#24314;&#19968;&#20010;&#35843;&#29992;&#22120;&#24182;&#19988;&#36890;&#36807;<tt class="classname">RmiServiceExporter</tt>&#20351;&#24471;account&#26381;&#21153;&#25903;&#25345;&#36828;&#31243;&#26381;&#21153;&#12290;&#22312;&#23458;&#25143;&#31471;&#65292;&#25105;&#20204;&#29992;<tt class="classname">RmiProxyFactoryBean</tt>&#36830;&#25509;&#23427;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="remoting-caucho-protocols"></a>17.3.&nbsp;&#20351;&#29992;Hessian&#25110;&#32773;Burlap&#36890;&#36807;HTTP&#36828;&#31243;&#35843;&#29992;&#26381;&#21153;</h2></div></div><div></div></div><p>Hessian&#25552;&#20379;&#19968;&#31181;&#22522;&#20110;HTTP&#30340;&#20108;&#36827;&#21046;&#36828;&#31243;&#21327;&#35758;&#12290;&#23427;&#26159;&#30001;Caucho&#24320;&#21457;&#30340;&#65292;&#21487;&#20197;&#22312; <a href="http://www.caucho.com/" target="_top">http://www.caucho.com</a> &#25214;&#21040;&#26356;&#22810;&#26377;&#20851;Hessian&#30340;&#20449;&#24687;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="remoting-caucho-protocols-hessian"></a>17.3.1.&nbsp;&#20026;Hessian&#21644;co.&#37197;&#32622;<tt class="classname">DispatcherServlet</tt></h3></div></div><div></div></div><p>Hessian&#20351;&#29992;&#19968;&#20010;&#29305;&#23450;&#30340;Servlet&#36890;&#36807;HTTP&#36827;&#34892;&#36890;&#35759;&#12290;&#20351;&#29992;Spring&#22312;Web MVC&#20013;&#23601;&#24120;&#29992;&#30340; <tt class="classname">DispatcherServlet</tt>&#21407;&#29702;&#65292;&#21487;&#20197;&#24456;&#23481;&#26131;&#30340;&#37197;&#32622;&#36825;&#26679;&#19968;&#20010;Servlet&#26469;&#26292;&#38706;&#20320;&#30340;&#26381;&#21153;&#12290;&#39318;&#20808;&#25105;&#20204;&#35201;&#22312;&#20320;&#30340;&#24212;&#29992;&#37324;&#21019;&#24314;&#19968;&#20010;&#26032;&#30340;Servlet&#65288;&#19979;&#38754;&#26469;&#33258;<tt class="literal">web.xml</tt>&#25991;&#20214;&#65289;&#65306;</p><pre class="programlisting">&lt;servlet&gt;
    &lt;servlet-name&gt;remoting&lt;/servlet-name&gt;
    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;
    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
&lt;/servlet&gt;

&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;remoting&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/remoting/*&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;</pre><p>&#20320;&#21487;&#33021;&#23545;Spring&#30340;<tt class="classname">DispatcherServlet</tt>&#24456;&#29087;&#24713;&#65292;&#36825;&#26679;&#20320;&#23558;&#38656;&#35201;&#22312;<tt class="filename">'WEB-INF'</tt>&#30446;&#24405;&#20013;&#21019;&#24314;&#19968;&#20010;&#21517;&#20026;<tt class="filename">'remoting-servlet.xml'</tt> (&#22312;&#20320;&#30340;servlet&#21517;&#31216;&#21518;) &#30340;Spring&#23481;&#22120;&#37197;&#32622;&#19978;&#19979;&#25991;&#12290;&#36825;&#20010;&#24212;&#29992;&#19978;&#19979;&#25991;&#23558;&#22312;&#19979;&#19968;&#33410;&#20013;&#37324;&#20351;&#29992;&#12290;</p><p>&#21478;&#22806;&#65292;&#21487;&#20197;&#32771;&#34385;&#20351;&#29992;Spring&#20013;&#31616;&#21333;&#30340;<tt class="classname">HttpRequestHandlerServlet</tt>&#12290;&#36825;&#20801;&#35768;&#20320;&#22312;&#26681;&#24212;&#29992;&#19978;&#19979;&#25991;&#65288;&#40664;&#35748;&#26159;<tt class="filename">'WEB-INF/applicationContext.xml'</tt>&#65289;&#20013;&#25554;&#20837;&#36828;&#31243;exporter&#23450;&#20041;&#12290;&#27599;&#20010;servlet&#23450;&#20041;&#25351;&#21521;&#29305;&#23450;&#30340;exporter bean&#12290;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#27599;&#20010;servlet&#30340;&#21517;&#31216;&#38656;&#35201;&#21644;&#30446;&#26631;exporter bean&#30340;&#21517;&#31216;&#30456;&#21305;&#37197;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="remoting-caucho-protocols-hessian-server"></a>17.3.2.&nbsp;&#20351;&#29992;<tt class="classname">HessianServiceExporter</tt>&#26292;&#38706;&#20320;&#30340;bean</h3></div></div><div></div></div><p>&#22312;&#26032;&#21019;&#24314;&#30340; <tt class="literal">remoting-servlet.xml</tt> &#24212;&#29992;&#19978;&#19979;&#25991;&#37324;&#65292;&#25105;&#20204;&#23558;&#21019;&#24314;&#19968;&#20010;<tt class="classname">HessianServiceExporter</tt>&#26469;&#26292;&#38706;&#20320;&#30340;&#26381;&#21153;&#65306;</p><pre class="programlisting">&lt;bean id="accountService" class="example.AccountServiceImpl"&gt;
    <i class="lineannotation"><span class="lineannotation">&lt;!-- any additional properties, maybe a DAO? --&gt;</span></i>
&lt;/bean&gt;

&lt;bean name="/AccountService" class="org.springframework.remoting.caucho.HessianServiceExporter"&gt;
    &lt;property name="service" ref="accountService"/&gt;
    &lt;property name="serviceInterface" value="example.AccountService"/&gt;
&lt;/bean&gt;</pre><p>&#29616;&#22312;&#65292;&#25105;&#20204;&#20934;&#22791;&#22909;&#22312;&#23458;&#25143;&#31471;&#36830;&#25509;&#26381;&#21153;&#20102;&#12290;&#19981;&#24517;&#26174;&#31034;&#25351;&#23450;&#22788;&#29702;&#22120;&#30340;&#26144;&#23556;&#65292;&#21482;&#35201;&#20351;&#29992;<tt class="classname">BeanNameUrlHandlerMapping</tt>&#25226;URL&#35831;&#27714;&#26144;&#23556;&#21040;&#26381;&#21153;&#19978;&#65306;&#25152;&#20197;&#65292;&#36825;&#20010;&#26381;&#21153;&#23558;&#22312;&#30001;bean&#21517;&#31216;&#25351;&#26126;&#30340;URL <tt class="literal">http://HOST:8080/remoting/AccountService</tt> &#20301;&#32622;&#36827;&#34892;&#26292;&#38706;&#12290;</p><p>&#21478;&#22806;&#19968;&#31181;&#36873;&#25321;, &#22312;&#20320;&#30340;&#26681;&#24212;&#29992;&#19978;&#19979;&#25991;&#20013;&#21019;&#24314;&#19968;&#20010; <tt class="classname">HessianServiceExporter</tt> (&#27604;&#22914;&#22312;<tt class="filename">'WEB-INF/applicationContext.xml'</tt>&#20013;):</p><pre class="programlisting">&lt;bean name="accountExporter" class="org.springframework.remoting.caucho.HessianServiceExporter"&gt;
    &lt;property name="service" ref="accountService"/&gt;
    &lt;property name="serviceInterface" value="example.AccountService"/&gt;
&lt;/bean&gt;</pre><p>&#22312;&#21518;&#19968;&#24773;&#20917;&#19979;, &#22312;<tt class="filename">'web.xml'</tt>&#20013;&#20026;exporter&#23450;&#20041;&#19968;&#20010;&#30456;&#24212;&#30340;servlet&#65292;&#20063;&#33021;&#24471;&#21040;&#21516;&#26679;&#30340;&#32467;&#26524;&#65306;&#36825;&#20010;exporter&#26144;&#23556;&#21040;request&#36335;&#24452;<tt class="literal">/remoting/AccountService</tt>&#12290;&#27880;&#24847;&#36825;&#20010;servlet&#21517;&#31216;&#38656;&#35201;&#19982;&#30446;&#26631;exporter bean&#30340;&#21517;&#31216;&#30456;&#21305;&#37197;&#12290;</p><pre class="programlisting">&lt;servlet&gt;
    &lt;servlet-name&gt;accountExporter&lt;/servlet-name&gt;
    &lt;servlet-class&gt;org.springframework.web.context.support.HttpRequestHandlerServlet&lt;/servlet-class&gt;
&lt;/servlet&gt;

&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;accountExporter&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/remoting/AccountService&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="remoting-caucho-protocols-hessian-client"></a>17.3.3.&nbsp;&#22312;&#23458;&#25143;&#31471;&#36830;&#25509;&#26381;&#21153;</h3></div></div><div></div></div><p>&#20351;&#29992;<tt class="classname">HessianProxyFactoryBean</tt>&#65292;&#25105;&#20204;&#21487;&#20197;&#22312;&#23458;&#25143;&#31471;&#36830;&#25509;&#26381;&#21153;&#12290;&#21516;&#26679;&#30340;&#26041;&#24335;&#23545;RMI&#31034;&#20363;&#20063;&#36866;&#29992;&#12290;&#25105;&#20204;&#23558;&#21019;&#24314;&#19968;&#20010;&#21333;&#29420;&#30340;bean&#24037;&#21378;&#25110;&#32773;&#24212;&#29992;&#19978;&#19979;&#25991;&#65292;&#32780;&#21518;&#31616;&#21333;&#22320;&#25351;&#26126;&#19979;&#38754;&#30340;bean <tt class="classname">SimpleObject</tt>&#23558;&#20351;&#29992;<tt class="interfacename">AccountService</tt>&#26469;&#31649;&#29702;accounts&#65306;</p><pre class="programlisting">&lt;bean class="example.SimpleObject"&gt;
    &lt;property name="accountService" ref="accountService"/&gt;
&lt;/bean&gt;

&lt;bean id="accountService" class="org.springframework.remoting.caucho.HessianProxyFactoryBean"&gt;
    &lt;property name="serviceUrl" value="http://remotehost:8080/remoting/AccountService"/&gt;
    &lt;property name="serviceInterface" value="example.AccountService"/&gt;
&lt;/bean&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="remoting-caucho-protocols-burlap"></a>17.3.4.&nbsp;&#20351;&#29992;Burlap</h3></div></div><div></div></div><p>&#25105;&#20204;&#23558;&#19981;&#20250;&#35814;&#32454;&#35752;&#35770;Burlap&#65292;&#23427;&#26159;&#19968;&#20010;&#22522;&#20110;XML&#30340;Hessian&#26367;&#20195;&#26041;&#26696;&#12290;&#23427;&#30340;&#37197;&#32622;&#21644;&#26500;&#24314;&#26041;&#27861;&#21644;&#19978;&#36848;Hessian&#30340;&#19968;&#26679;&#12290;&#21482;&#35201;&#25226; <tt class="literal">Hessian</tt> &#25442;&#25104; <tt class="literal">Burlap</tt> &#23601;&#34892;&#20102;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="remoting-caucho-protocols-security"></a>17.3.5.&nbsp;&#23545;&#36890;&#36807;Hessian&#25110;Burlap&#26292;&#38706;&#30340;&#26381;&#21153;&#20351;&#29992;HTTP Basic&#35748;&#35777;</h3></div></div><div></div></div><p>Hessian&#21644;Burlap&#30340;&#19968;&#20010;&#20248;&#21183;&#26159;&#25105;&#20204;&#21487;&#20197;&#23481;&#26131;&#30340;&#20351;&#29992;HTTP Basic&#35748;&#35777;&#65292;&#22240;&#20026;&#20108;&#32773;&#37117;&#26159;&#22522;&#20110;HTTP&#30340;&#12290;&#20363;&#22914;&#65292;&#26222;&#36890;HTTP Server&#23433;&#20840;&#26426;&#21046;&#21487;&#20197;&#36890;&#36807;&#20351;&#29992; <tt class="literal">web.xml</tt> &#23433;&#20840;&#29305;&#24615;&#26469;&#24212;&#29992;&#12290;&#36890;&#24120;&#65292;&#20320;&#19981;&#20250;&#20026;&#27599;&#20010;&#29992;&#25143;&#37117;&#24314;&#31435;&#19981;&#21516;&#30340;&#23433;&#20840;&#35777;&#20070;&#65292;&#32780;&#26159;&#22312;<tt class="literal">Hessian/BurlapProxyFactoryBean</tt>&#32423;&#21035;&#20849;&#20139;&#23433;&#20840;&#35777;&#20070;&#65288;&#31867;&#20284;&#19968;&#20010;JDBC <tt class="interfacename">DataSource</tt>&#65289;&#12290;</p><pre class="programlisting">&lt;bean class="org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping"&gt;
    &lt;property name="interceptors" ref="authorizationInterceptor"/&gt;
&lt;/bean&gt;

&lt;bean id="authorizationInterceptor" 
      class="org.springframework.web.servlet.handler.UserRoleAuthorizationInterceptor"&gt;
    &lt;property name="authorizedRoles" value="administrator,operator"/&gt;
&lt;/bean&gt;</pre><p>&#36825;&#20010;&#20363;&#23376;&#37324;&#25105;&#20204;&#26174;&#24335;&#20351;&#29992;&#20102;<tt class="classname">BeanNameUrlHandlerMapping</tt>&#65292;&#24182;&#35774;&#32622;&#20102;&#19968;&#20010;&#25318;&#25130;&#22120;&#65292;&#21482;&#20801;&#35768;&#31649;&#29702;&#21592;&#21644;&#25805;&#20316;&#21592;&#35843;&#29992;&#36825;&#20010;&#24212;&#29992;&#19978;&#19979;&#25991;&#20013;&#25552;&#21450;&#30340;bean&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#24403;&#28982;&#65292;&#36825;&#20010;&#20363;&#23376;&#27809;&#26377;&#28436;&#31034;&#28789;&#27963;&#30340;&#23433;&#20840;&#35774;&#26045;&#12290;&#32771;&#34385;&#26356;&#22810;&#26377;&#20851;&#23433;&#20840;&#30340;&#38382;&#39064;&#26102;&#65292;&#35831;&#21442;&#38405; <a href="http://acegisecurity.sourceforge.net/" target="_top">http://acegisecurity.sourceforge.net</a> Acegi Security System for Spring</p> &#12290;
      </td></tr></tbody></table></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="remoting-httpinvoker"></a>17.4.&nbsp;&#20351;&#29992;HTTP&#35843;&#29992;&#22120;&#26292;&#38706;&#26381;&#21153;</h2></div></div><div></div></div><p>&#19982;
&#20351;&#29992;&#33258;&#36523;&#24207;&#21015;&#21270;&#26426;&#21046;&#30340;&#36731;&#37327;&#32423;&#21327;&#35758;Burlap&#21644;Hessian&#30456;&#21453;&#65292;Spring
HTTP&#35843;&#29992;&#22120;&#20351;&#29992;&#26631;&#20934;Java&#24207;&#21015;&#21270;&#26426;&#21046;&#26469;&#36890;&#36807;HTTP&#26292;&#38706;&#19994;&#21153;&#12290;&#22914;&#26524;&#20320;&#30340;&#21442;&#25968;&#25110;&#36820;&#22238;&#20540;&#26159;&#22797;&#26434;&#31867;&#22411;&#65292;&#24182;&#19988;&#19981;&#33021;&#36890;&#36807;Hessian&#21644;Burlap&#30340;&#24207;&#21015;&#21270;
&#26426;&#21046;&#36827;&#34892;&#24207;&#21015;&#21270;&#65292;HTTP&#35843;&#29992;&#22120;&#23601;&#24456;&#26377;&#20248;&#21183;&#65288;&#21442;&#38405;&#19979;&#19968;&#33410;&#65292;&#36873;&#25321;&#36828;&#31243;&#25216;&#26415;&#26102;&#30340;&#32771;&#34385;&#65289;&#12290;</p><p>&#23454;&#38469;&#19978;&#65292;Spring&#21487;&#20197;&#20351;&#29992;J2SE&#25552;&#20379;&#30340;&#26631;&#20934;&#21151;&#33021;&#25110;Commons&#30340;HttpClient&#26469;&#23454;&#29616;HTTP&#35843;&#29992;&#12290;&#22914;&#26524;&#20320;&#38656;&#35201;&#26356;&#20808;&#36827;&#65292;&#26356;&#23481;&#26131;&#20351;&#29992;&#30340;&#21151;&#33021;&#65292;&#23601;&#20351;&#29992;&#21518;&#32773;&#12290;&#20320;&#21487;&#20197;&#21442;&#32771; <a href="http://jakarta.apache.org/commons/httpclient" target="_top">jakarta.apache.org/commons/httpclient</a>&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="remoting-httpinvoker-server"></a>17.4.1.&nbsp;Exposing the service object</h3></div><div><h3 class="title"><a name="remoting-httpinvoker-server"></a>17.4.1.&nbsp;Exposing the service object</h3></div></div><div></div></div><p>&#20026;&#26381;&#21153;&#23545;&#35937;&#35774;&#32622;HTTP&#35843;&#29992;&#22120;&#21644;&#20320;&#22312;Hessian&#25110;Burlap&#20013;&#20351;&#29992;&#30340;&#26041;&#24335;&#31867;&#20284;&#12290;&#23601;&#35937;&#20026;Hessian&#25903;&#25345;&#25552;&#20379;&#30340; <tt class="classname">HessianServiceExporter</tt>&#65292;Spring&#30340;HTTP&#35843;&#29992;&#22120;&#25552;&#20379;&#20102; <tt class="classname">org.springframework.remoting.httpinvoker.HttpInvokerServiceExporter</tt>&#12290;
      </p><p>&#20026;&#20102;&#22312;Spring Web MVC <tt class="classname">DispatcherServlet</tt>&#20013;&#26292;&#38706;<tt class="literal">AccountService</tt> (&#22914;&#19978;&#25152;&#36848;)&#65292; &#38656;&#35201;&#22312;dispatcher&#30340;&#24212;&#29992;&#19978;&#19979;&#25991;&#20013;&#20351;&#29992;&#20197;&#19979;&#37197;&#32622;&#65306;</p><pre class="programlisting">&lt;bean name="/AccountService" class="org.springframework.remoting.httpinvoker.HttpInvokerServiceExporter"&gt;
    &lt;property name="service" ref="accountService"/&gt;
    &lt;property name="serviceInterface" value="example.AccountService"/&gt;
&lt;/bean&gt;
</pre><p>&#21644;&#22312;Hessian&#31456;&#33410;&#35762;&#30340;&#19968;&#26679;&#65292;&#36825;&#20010;exporter&#23450;&#20041;&#23558;&#36890;&#36807; <tt class="classname">DispatcherServlet</tt>&#26631;&#20934;&#30340;&#26144;&#23556;&#24037;&#20855;&#26292;&#38706;&#20986;&#26469;&#12290;</p><p>&#20570;&#20026;&#21487;&#36873;&#39033;, &#22312;&#20320;&#30340;&#26681;&#24212;&#29992;&#19978;&#19979;&#25991;&#20013;(&#27604;&#22914;<tt class="filename">'WEB-INF/applicationContext.xml'</tt>)&#21019;&#24314;&#19968;&#20010;<tt class="classname">HttpInvokerServiceExporter</tt> :</p><pre class="programlisting">&lt;bean name="accountExporter" class="org.springframework.remoting.httpinvoker.HttpInvokerServiceExporter"&gt;
    &lt;property name="service" ref="accountService"/&gt;
    &lt;property name="serviceInterface" value="example.AccountService"/&gt;
&lt;/bean&gt;</pre><p>&#21478;&#22806;,&#22312;<tt class="filename">'web.xml'</tt>&#20013;&#20026;&#36825;&#20010;exporter&#23450;&#20041;&#19968;&#20010;&#30456;&#24212;&#30340;servlet&#65292;&#20854;&#21517;&#31216;&#19982;&#30446;&#26631;exporter bean&#30340;&#21517;&#31216;&#30456;&#21305;&#37197;:</p><pre class="programlisting">&lt;servlet&gt;
    &lt;servlet-name&gt;accountExporter&lt;/servlet-name&gt;
    &lt;servlet-class&gt;org.springframework.web.context.support.HttpRequestHandlerServlet&lt;/servlet-class&gt;
&lt;/servlet&gt;

&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;accountExporter&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/remoting/AccountService&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="remoting-httpinvoker-client"></a>17.4.2.&nbsp;&#22312;&#23458;&#25143;&#31471;&#36830;&#25509;&#26381;&#21153;</h3></div></div><div></div></div><p>
				&#21516;&#26679;&#65292;&#20174;&#23458;&#25143;&#31471;&#36830;&#25509;&#19994;&#21153;&#19982;&#20320;&#20351;&#29992;Hessian&#25110;Burlap&#26102;&#25152;&#20570;&#30340;&#24456;&#30456;&#20284;&#12290;&#20351;&#29992;&#20195;&#29702;&#65292;Spring&#21487;&#20197;&#23558;&#20320;&#35843;&#29992;&#30340;HTTP POST&#35831;&#27714;&#36716;&#25442;&#25104;&#34987;&#26292;&#38706;&#26381;&#21153;&#30340;URL&#12290;
		 </p><pre class="programlisting">&lt;bean id="httpInvokerProxy" class="org.springframework.remoting.httpinvoker.HttpInvokerProxyFactoryBean"&gt;
    &lt;property name="serviceUrl" value="http://remotehost:8080/remoting/AccountService"/&gt;
    &lt;property name="serviceInterface" value="example.AccountService"/&gt;
&lt;/bean&gt;
</pre><p>&#23601;&#35937;&#19978;&#38754;&#35828;&#30340;&#19968;&#26679;&#65292;&#20320;&#21487;&#20197;&#36873;&#25321;&#20351;&#29992;&#20320;&#24819;&#20351;&#29992;&#30340;HTTP&#23458;&#25143;&#31471;&#12290;&#32570;&#30465;&#24773;&#20917;&#19979;&#65292;<tt class="classname">HttpInvokerProxy</tt>&#20351;&#29992;J2SE&#30340;HTTP&#21151;&#33021;&#65292;&#20294;&#26159;&#20320;&#20063;&#21487;&#20197;&#36890;&#36807;&#35774;&#32622;<tt class="literal">httpInvokerRequestExecutor</tt>&#23646;&#24615;&#36873;&#25321;&#20351;&#29992;Commons <tt class="classname">HttpClient</tt>&#65306;</p><pre class="programlisting">&lt;property name="httpInvokerRequestExecutor"&gt;
    &lt;bean class="org.springframework.remoting.httpinvoker.CommonsHttpInvokerRequestExecutor"/&gt;
&lt;/property&gt;
</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="remoting-web-services"></a>17.5.&nbsp;Web Services</h2></div></div><div></div></div><p>Spring&#20026;&#26631;&#20934;Java web&#26381;&#21153;API&#25552;&#20379;&#20102;&#20840;&#38754;&#30340;&#25903;&#25345;:</p><div class="itemizedlist"><ul type="disc"><li><p>&#20351;&#29992;JAX-RPC&#26292;&#38706;web&#26381;&#21153;</p></li><li><p>&#20351;&#29992;JAX-RPC&#35775;&#38382;web&#26381;&#21153;</p></li><li><p>&#20351;&#29992;JAX-WS&#26292;&#38706;web&#26381;&#21153;</p></li><li><p>&#20351;&#29992;JAX-WS&#35775;&#38382;web&#26381;&#21153;</p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#20026;&#20160;&#20040;&#26377;2&#20010;&#26631;&#20934;&#30340;Java web&#26381;&#21153;APIs?</p><p>JAX-RPC
1.1 &#22312;J2EE 1.4 &#20013;&#26159;&#26631;&#20934;&#30340;web&#26381;&#21153;API&#12290;&#27491;&#20687;&#20854;&#21517;&#31216;&#25152;&#31034;&#65292;&#23427;&#20851;&#27880;&#20110;RPC&#32465;&#23450;&#32780;&#19988;&#22312;&#26368;&#36817;&#20960;&#24180;&#36234;&#26469;&#36234;&#19981;&#27969;&#34892;&#12290;&#26368;&#32456;&#34987;Java EE
5&#20013;&#30340;JAX-WS 2.0&#25152;&#21462;&#20195;&#65292;JAX-WS 2.0&#19981;&#20294;&#22312;&#32465;&#23450;&#26041;&#38754;&#26356;&#28789;&#27963;&#65292;&#32780;&#19988;&#20063;&#26159;&#23436;&#20840;&#22522;&#20110;annotation&#30340;&#12290;JAX-WS
2.1&#20063;&#34987;&#21253;&#21547;&#22312;Java 6&#20013;(&#26356;&#35814;&#32454;&#30340;&#35828;&#26159;&#22312;Sun JDK 1.6.0_04&#21644;&#26356;&#39640;&#29256;&#26412;&#20013;&#65292;&#20302;&#29256;&#26412;&#30340;Sun JDK 1.6.0&#21253;&#21547;JAX-WS
2.0)&#65292;&#23427;&#19982;JDK&#20869;&#32622;&#30340;HTTP&#26381;&#21153;&#22120;&#38598;&#25104;&#12290;</p><p>Spring &#21516;&#26102;&#25903;&#25345;&#20004;&#20010;&#26631;&#20934;Java
web&#26381;&#21153;API&#12290;&#36873;&#25321;&#35841;&#20027;&#35201;&#30475;&#36816;&#34892;&#24179;&#21488;&#65306;&#22312;JDK 1.4 / J2EE 1.4&#19978;&#65292;&#21807;&#19968;&#30340;&#36873;&#25321;&#26159;JAX-RPC&#12290;&#22312;Java EE 5 /
Java 6&#19978;&#26174;&#28982;&#24212;&#35813;&#36873;JAX-WS&#12290;&#36816;&#34892;Java 5&#30340;J2EE 1.4&#29615;&#22659;&#19978;&#65292;&#20320;&#21487;&#20197;&#36873;&#25321;&#25554;&#20837;&#19968;&#20010;JAX-WS
provider&#65307;&#35831;&#26597;&#30475;&#20320;&#30340;J2EE&#26381;&#21153;&#22120;&#25991;&#26723;&#12290;</p></td></tr></tbody></table></div><p>&#38500;&#20102;&#22312;Spring Core&#20013;&#25903;&#25345;JAX-RPC and JAX-WS&#65292;Spring portfolio&#20063;&#25552;&#20379;&#20102;&#19968;&#31181;&#29305;&#24615;<a href="http://www.springframework.org/spring-ws" target="_top">Spring Web Services</a>&#65292;&#19968;&#20010;&#20026;&#20248;&#20808;&#25480;&#26435;&#21644;&#25991;&#26723;&#39537;&#21160;&#30340;web&#26381;&#21153;&#25152;&#25552;&#20379;&#30340;&#26041;&#26696; - &#38750;&#24120;&#24314;&#35758;&#29992;&#26469;&#21019;&#24314;&#39640;&#32423;&#24182;&#20855;&#26377;&#21069;&#30651;&#24615;&#30340;web&#26381;&#21153;&#12290;<a href="http://xfire.codehaus.org/" target="_top">XFire</a>&#26159;&#26368;&#21518;&#20294;&#19981;&#26159;&#21807;&#19968;&#30340;Spring&#20869;&#32622;&#25903;&#25345;&#21487;&#20197;&#35753;&#20320;&#23558;Spring&#31649;&#29702;&#30340;bean&#26292;&#38706;&#20026;web&#26381;&#21153;&#30340;&#26041;&#24335;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="remoting-web-services-jaxrpc-export"></a>17.5.1.&nbsp;&#20351;&#29992;JAX-RPC&#26292;&#38706;&#22522;&#20110;servlet&#30340;web&#26381;&#21153;</h3></div></div><div></div></div><p>Spring&#20026;JAX-RPC servlet&#30340;&#31471;&#28857;&#23454;&#29616;&#25552;&#20379;&#20102;&#19968;&#20010;&#26041;&#20415;&#30340;&#22522;&#31867; - <tt class="classname">ServletEndpointSupport</tt>. &#26410;&#26469;&#26292;&#38706;&#25105;&#20204;&#30340; <tt class="interfacename">AccountService</tt>&#25105;&#20204;&#25193;&#23637;Spring&#30340;<tt class="classname">ServletEndpointSupport</tt>&#31867;&#24182;&#22312;&#36825;&#37324;&#23454;&#29616;&#20102;&#25105;&#20204;&#30340;&#19994;&#21153;&#36923;&#36753;&#65292;&#36890;&#24120;&#23558;&#35843;&#29992;&#20132;&#32473;&#19994;&#21153;&#23618;&#12290;</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">/**
 * JAX-RPC compliant RemoteAccountService implementation that simply delegates
 * to the AccountService implementation in the root web application context.
 *
 * This wrapper class is necessary because JAX-RPC requires working with dedicated
 * endpoint classes. If an existing service needs to be exported, a wrapper that
 * extends ServletEndpointSupport for simple application context access is
 * the simplest JAX-RPC compliant way.
 *
 * This is the class registered with the server-side JAX-RPC implementation.
 * In the case of Axis, this happens in "server-config.wsdd" respectively via
 * deployment calls. The web service engine manages the lifecycle of instances
 * of this class: A Spring application context can just be accessed here.
 */</span></i>import org.springframework.remoting.jaxrpc.ServletEndpointSupport;

public class AccountServiceEndpoint extends ServletEndpointSupport implements RemoteAccountService {
    
    private AccountService biz;
	
    protected void onInit() {
        this.biz = (AccountService) getWebApplicationContext().getBean("accountService");
    }

    public void insertAccount(Account acc) throws RemoteException {
        biz.insertAccount(acc);
    }
  
    public Account[] getAccounts(String name) throws RemoteException {
        return biz.getAccounts(name);
    }
}</pre><p>AccountServletEndpoint&#38656;&#35201;&#22312;Spring&#20013;&#21516;&#19968;&#20010;&#19978;&#19979;&#25991;&#30340;web&#24212;&#29992;&#37324;&#36816;&#34892;&#65292;&#20197;&#33719;&#24471;&#23545;Spring&#30340;&#35775;&#38382;&#33021;&#21147;&#12290;&#22914;&#26524;&#20351;&#29992;Axis&#65292;&#25226;<tt class="classname">AxisServlet</tt>&#23450;&#20041;&#22797;&#21046;&#21040;&#20320;&#30340;<tt class="filename">'web.xml'</tt>&#20013;&#65292;&#24182;&#19988;&#22312;<tt class="filename">'server-config.wsdd'</tt>&#20013;&#35774;&#32622;&#31471;&#28857;&#65288;&#25110;&#20351;&#29992;&#21457;&#24067;&#24037;&#20855;&#65289;&#12290;&#21442;&#30475;JPetStore&#36825;&#20010;&#20363;&#23376;&#20013;<tt class="interfacename">OrderService</tt>&#26159;&#22914;&#20309;&#29992;Axis&#21457;&#24067;&#25104;&#19968;&#20010;Web&#26381;&#21153;&#30340;&#12290;
			</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="remoting-web-services-jaxrpc-access"></a>17.5.2.&nbsp;&#20351;&#29992;JAX-RPC&#35775;&#38382;web&#26381;&#21153;</h3></div></div><div></div></div><p>Spring&#25552;&#20379;&#20102;&#20004;&#20010;&#24037;&#21378;bean&#29992;&#26469;&#21019;&#24314;Web&#26381;&#21153;&#20195;&#29702;&#65292;<tt class="classname">LocalJaxRpcServiceFactoryBean</tt> &#21644; <tt class="classname">JaxRpcPortProxyFactoryBean</tt>&#12290;&#21069;&#32773;&#21482;&#36820;&#22238;&#19968;&#20010;JAX-RPC&#26381;&#21153;&#31867;&#20379;&#25105;&#20204;&#20351;&#29992;&#12290;&#21518;&#32773;&#26159;&#19968;&#20010;&#20840;&#21151;&#33021;&#30340;&#29256;&#26412;&#65292;&#21487;&#20197;&#36820;&#22238;&#19968;&#20010;&#23454;&#29616;&#25105;&#20204;&#19994;&#21153;&#26381;&#21153;&#25509;&#21475;&#30340;&#20195;&#29702;&#12290;&#26412;&#20363;&#20013;&#65292;&#25105;&#20204;&#20351;&#29992;&#21518;&#32773;&#26469;&#20026;&#21069;&#38754;&#27573;&#33853;&#20013;&#26292;&#38706;&#30340;<tt class="interfacename">AccountService</tt>&#31471;&#28857;&#21019;&#24314;&#19968;&#20010;&#20195;&#29702;&#12290;&#20320;&#23558;&#30475;&#21040;Spring&#23545;Web&#26381;&#21153;&#25552;&#20379;&#20102;&#26497;&#22909;&#30340;&#25903;&#25345;&#65292;&#21482;&#38656;&#35201;&#24456;&#23569;&#30340;&#20195;&#30721; - &#22823;&#22810;&#25968;&#37117;&#26159;&#36890;&#36807;&#31867;&#20284;&#19979;&#38754;&#30340;Spring&#37197;&#32622;&#25991;&#20214;&#65306;
			</p><pre class="programlisting">&lt;bean id="accountWebService" class="org.springframework.remoting.jaxrpc.JaxRpcPortProxyFactoryBean"&gt;
    &lt;property name="serviceInterface" value="example.RemoteAccountService"/&gt;
    &lt;property name="wsdlDocumentUrl" value="http://localhost:8080/account/services/accountService?WSDL"/&gt;
    &lt;property name="namespaceUri" value="http://localhost:8080/account/services/accountService"/&gt;
    &lt;property name="serviceName" value="AccountService"/&gt;
    &lt;property name="portName" value="AccountPort"/&gt;
&lt;/bean&gt;</pre><p><tt class="literal">serviceInterface</tt>&#26159;&#25105;&#20204;&#23458;&#25143;&#31471;&#23558;&#20351;&#29992;&#30340;&#36828;&#31243;&#19994;&#21153;&#25509;&#21475;&#12290;
      <tt class="literal">wsdlDocumentUrl</tt>&#26159;WSDL&#25991;&#20214;&#30340;URL. Spring&#38656;&#35201;&#29992;&#23427;&#20316;&#20026;&#21551;&#21160;&#28857;&#26469;&#21019;&#24314;JAX-RPC&#26381;&#21153;&#12290;
      <tt class="literal">namespaceUri</tt>&#23545;&#24212;.wsdl&#25991;&#20214;&#20013;&#30340;targetNamespace&#12290;
      <tt class="literal">serviceName</tt> &#23545;&#24212;.wsdl&#25991;&#20214;&#20013;&#30340;&#26381;&#21153;&#21517;&#12290;
      <tt class="literal">portName</tt> &#23545;&#24212;.wsdl&#25991;&#20214;&#20013;&#30340;&#31471;&#21475;&#21495;&#12290;
      </p><p>&#29616;&#22312;&#25105;&#20204;&#21487;&#20197;&#24456;&#26041;&#20415;&#30340;&#35775;&#38382;web&#26381;&#21153;&#65292;&#22240;&#20026;&#25105;&#20204;&#26377;&#19968;&#20010;&#21487;&#20197;&#23558;&#23427;&#26292;&#38706;&#20026;<tt class="literal">RemoteAccountService</tt>&#25509;&#21475;&#30340;bean&#24037;&#21378;&#12290;&#25105;&#20204;&#21487;&#20197;&#22312;Spring&#20013;&#36825;&#26679;&#20351;&#29992;&#65306;</p><pre class="programlisting">&lt;bean id="client" class="example.AccountClientImpl"&gt;
    ...
    &lt;property name="service" ref="accountWebService"/&gt;
&lt;/bean&gt;</pre><p>&#20174;&#23458;&#25143;&#31471;&#20195;&#30721;&#19978;&#30475;&#65292;&#38500;&#20102;&#23427;&#25243;&#20986;<tt class="exceptionname">RemoteException</tt>&#65292;&#25105;&#20204;&#21487;&#20197;&#25226;&#36825;&#20010;web&#26381;&#21153;&#24403;&#25104;&#19968;&#20010;&#26222;&#36890;&#30340;&#31867;&#36827;&#34892;&#35775;&#65292;&#12290;</p><pre class="programlisting">public class AccountClientImpl {

    private RemoteAccountService service;
    
    public void setService(RemoteAccountService service) {
        this.service = service;
    }
    
    public void foo() {
        try {
            service.insertAccount(...);
        }
        catch (RemoteException ex) {
            <i class="lineannotation"><span class="lineannotation">// ouch</span></i>
        }
    }
}
</pre><p>&#25105;&#20204;&#21487;&#20197;&#19981;&#26816;&#26597;&#21463;&#25511;&#24322;&#24120;<tt class="exceptionname">RemoteException</tt>&#65292;&#22240;&#20026;Spring&#23558;&#23427;&#33258;&#21160;&#36716;&#25442;&#25104;&#30456;&#24212;&#30340;&#38750;&#21463;&#25511;&#24322;&#24120;<tt class="exceptionname">RemoteException</tt>&#12290;&#36825;&#20063;&#38656;&#35201;&#25105;&#20204;&#25552;&#20379;&#19968;&#20010;&#38750;RMI&#30340;&#25509;&#21475;&#12290;&#29616;&#22312;&#37197;&#32622;&#25991;&#20214;&#22914;&#19979;&#65306;</p><pre class="programlisting">&lt;bean id="accountWebService" class="org.springframework.remoting.jaxrpc.JaxRpcPortProxyFactoryBean"&gt;
    &lt;property name="serviceInterface" value="example.AccountService"/&gt;
    &lt;property name="portInterface" value="example.RemoteAccountService"/&gt;
&lt;/bean&gt;</pre><p>&#25105;&#20204;&#30340;<tt class="literal">serviceInterface</tt>&#21464;&#25104;&#20102;&#38750;RMI&#25509;&#21475;&#12290;&#25105;&#20204;&#30340;RMI&#25509;&#21475;&#29616;&#22312;&#20351;&#29992;<tt class="literal">portInterface</tt>&#23646;&#24615;&#26469;&#23450;&#20041;&#12290;&#25105;&#20204;&#30340;&#23458;&#25143;&#31471;&#20195;&#30721;&#21487;&#20197;&#36991;&#20813;&#22788;&#29702;&#24322;&#24120;<tt class="exceptionname">java.rmi.RemoteException</tt>:</p><pre class="programlisting">public class AccountClientImpl {

    private AccountService service;
    
    public void setService(AccountService service) {
        this.service = service;
    }
    
    public void foo() {
        service.insertAccount(...);
    }
}</pre><p>&#35831;&#27880;&#24847;&#20320;&#20063;&#21487;&#20197;&#21435;&#25481;"portInterface"&#37096;&#20998;&#24182;&#25351;&#23450;&#19968;&#20010;&#26222;&#36890;&#19994;&#21153;&#25509;&#21475;&#20316;&#20026;"serviceInterface"&#12290;&#36825;&#26679;<tt class="classname">JaxRpcPortProxyFactoryBean</tt>&#23558;&#33258;&#21160;&#20999;&#25442;&#21040;JAX-RPC "&#21160;&#24577;&#35843;&#29992;&#25509;&#21475;", &#19981;&#20351;&#29992;&#22266;&#23450;&#31471;&#21475;&#23384;&#26681;&#26469;&#36827;&#34892;&#21160;&#24577;&#35843;&#29992;&#12290;&#36825;&#26679;&#20570;&#30340;&#22909;&#22788;&#26159;&#20320;&#29978;&#33267;&#19981;&#38656;&#35201;&#20351;&#29992;&#19968;&#20010;RMI&#30456;&#20851;&#30340;Java&#25509;&#21475;&#65288;&#27604;&#22914;&#22312;&#38750;Java&#30340;&#30446;&#26631;web&#26381;&#21153;&#20013;&#65289;&#65307;&#20320;&#21482;&#38656;&#35201;&#19968;&#20010;&#21305;&#37197;&#30340;&#19994;&#21153;&#25509;&#21475;&#12290;&#26597;&#30475;<tt class="classname">JaxRpcPortProxyFactoryBean</tt>&#30340;javadoc&#26469;&#20102;&#35299;&#36816;&#34892;&#26102;&#23454;&#34892;&#30340;&#32454;&#33410;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="remoting-web-services-jaxrpc-mapping-registration"></a>17.5.3.&nbsp;&#27880;&#20876;JAX-RPC Bean&#26144;&#23556;</h3></div></div><div></div></div><p>T&#20026;&#20102;&#20256;&#36882;&#31867;&#20284;<tt class="classname">Account</tt>&#31561;&#22797;&#26434;&#23545;&#35937;&#65292;&#25105;&#20204;&#24517;&#39035;&#22312;&#23458;&#25143;&#31471;&#27880;&#20876;bean&#26144;&#23556;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#22312;&#26381;&#21153;&#22120;&#31471;&#36890;&#24120;&#22312;<tt class="filename">'server-config.wsdd'</tt>&#20013;&#20351;&#29992;Axis&#36827;&#34892;bean&#26144;&#23556;&#27880;&#20876;&#12290;</p></td></tr></tbody></table></div><p>&#25105;&#20204;&#23558;&#20351;&#29992;Axis&#22312;&#23458;&#25143;&#31471;&#27880;&#20876;bean&#26144;&#23556;&#12290;&#20026;&#27492;&#65292;&#25105;&#20204;&#38656;&#35201;&#36890;&#36807;&#31243;&#24207;&#27880;&#20876;&#36825;&#20010;bean&#26144;&#23556;:</p><pre class="programlisting">public class AxisPortProxyFactoryBean extends JaxRpcPortProxyFactoryBean {

    protected void postProcessJaxRpcService(Service service) {
        TypeMappingRegistry registry = service.getTypeMappingRegistry();
        TypeMapping mapping = registry.createTypeMapping();
        registerBeanMapping(mapping, Account.class, "Account");
        registry.register("http://schemas.xmlsoap.org/soap/encoding/", mapping);
    }

    protected void registerBeanMapping(TypeMapping mapping, Class type, String name) {
        QName qName = new QName("http://localhost:8080/account/services/accountService", name);
        mapping.register(type, qName,
                new BeanSerializerFactory(type, qName),
                new BeanDeserializerFactory(type, qName));
    }
}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="remoting-web-services-jaxrpc-handler-registration"></a>17.5.4.&nbsp;&#27880;&#20876;&#33258;&#24049;&#30340;JAX-RPC &#22788;&#29702;&#22120;</h3></div></div><div></div></div><p>&#26412;&#33410;&#20013;&#65292;&#25105;&#20204;&#23558;&#27880;&#20876;&#33258;&#24049;&#30340;<tt class="interfacename">javax.rpc.xml.handler.Handler</tt> &#21040;Web&#26381;&#21153;&#20195;&#29702;&#65292;&#36825;&#26679;&#25105;&#20204;&#21487;&#20197;&#22312;SOAP&#28040;&#24687;&#34987;&#21457;&#36865;&#21069;&#25191;&#34892;&#23450;&#21046;&#30340;&#20195;&#30721;&#12290;<tt class="interfacename">Handler</tt>&#26159;&#19968;&#20010;&#22238;&#35843;&#25509;&#21475;&#12290;<tt class="filename">jaxrpc.jar</tt>&#20013;&#26377;&#20010;&#26041;&#20415;&#30340;&#22522;&#31867;<tt class="classname">javax.rpc.xml.handler.GenericHandler</tt>&#20379;&#25105;&#20204;&#32487;&#25215;&#20351;&#29992;&#65306;</p><pre class="programlisting">public class AccountHandler extends GenericHandler {

    public QName[] getHeaders() {
        return null;
    }

    public boolean handleRequest(MessageContext context) {
        SOAPMessageContext smc = (SOAPMessageContext) context;
        SOAPMessage msg = smc.getMessage();
        try {
            SOAPEnvelope envelope = msg.getSOAPPart().getEnvelope();
            SOAPHeader header = envelope.getHeader();
            ...
        }
        catch (SOAPException ex) {
            throw new JAXRPCException(ex);
        }
        return true;
    }
}</pre><p>&#25105;&#20204;&#29616;&#22312;&#35201;&#20570;&#30340;&#23601;&#26159;&#25226;AccountHandler&#27880;&#20876;&#21040;JAX-RPC&#26381;&#21153;&#65292;&#36825;&#26679;&#23427;&#21487;&#20197;&#22312;&#28040;&#24687;&#34987;&#21457;&#36865;&#21069;&#35843;&#29992; <tt class="methodname">handleRequest(..)</tt>&#12290;Spring&#30446;&#21069;&#23545;&#27880;&#20876;&#22788;&#29702;&#26041;&#27861;&#36824;&#19981;&#25552;&#20379;&#22768;&#26126;&#24335;&#25903;&#25345;&#65292;&#25152;&#20197;&#25105;&#20204;&#24517;&#39035;&#20351;&#29992;&#32534;&#31243;&#26041;&#24335;&#12290;&#20294;&#26159;Spring&#20013;&#36825;&#24456;&#23481;&#26131;&#23454;&#29616;&#65292;&#25105;&#20204;&#21482;&#38656;&#35206;&#20889;&#19987;&#38376;&#20026;&#27492;&#35774;&#35745;&#30340; <tt class="methodname">postProcessJaxRpcService(..)</tt> &#26041;&#27861;&#65306;</p><pre class="programlisting">public class AccountHandlerJaxRpcPortProxyFactoryBean extends JaxRpcPortProxyFactoryBean {

    protected void postProcessJaxRpcService(Service service) {
        QName port = new QName(this.getNamespaceUri(), this.getPortName());
        List list = service.getHandlerRegistry().getHandlerChain(port);
        list.add(new HandlerInfo(AccountHandler.class, null, null));
        logger.info("Registered JAX-RPC AccountHandler on port " + port);
    }
}</pre><p>&#26368;&#21518;&#65292;&#25105;&#20204;&#35201;&#35760;&#24471;&#26356;&#25913;Spring&#37197;&#32622;&#25991;&#20214;&#26469;&#20351;&#29992;&#25105;&#20204;&#30340;&#24037;&#21378;bean:</p><pre class="programlisting">&lt;bean id="accountWebService" class="example.AccountHandlerJaxRpcPortProxyFactoryBean"&gt;
    ...
&lt;/bean&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="remoting-web-services-jaxws-export-servlet"></a>17.5.5.&nbsp;&#20351;&#29992;JAX-WS&#26292;&#38706;&#22522;&#20110;servlet&#30340;web&#26381;&#21153;</h3></div></div><div></div></div><p>Spring&#20026;JAX-WS servlet&#31471;&#28857;&#23454;&#29616;&#25552;&#20379;&#20102;&#19968;&#20010;&#26041;&#20415;&#30340;&#22522;&#31867; - <tt class="classname">SpringBeanAutowiringSupport</tt>&#12290;&#35201;&#26292;&#38706;&#25105;&#20204;&#30340;<tt class="interfacename">AccountService</tt>&#25509;&#21475;&#65292;&#25105;&#20204;&#21487;&#20197;&#25193;&#23637;Spring&#30340;<tt class="classname">SpringBeanAutowiringSupport</tt>&#31867;&#24182;&#23454;&#29616;&#25105;&#20204;&#30340;&#19994;&#21153;&#36923;&#36753;&#65292;&#36890;&#24120;&#25226;&#35843;&#29992;&#20132;&#32473;&#19994;&#21153;&#23618;&#12290;&#25105;&#20204;&#23558;&#31616;&#21333;&#30340;&#20351;&#29992;Spring 2.5&#30340;<tt class="literal">@Autowired</tt>&#27880;&#35299;&#26469;&#22768;&#26126;&#20381;&#36182;&#20110;Spring&#31649;&#29702;&#30340;bean&#12290;</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">/**
 * JAX-WS compliant AccountService implementation that simply delegates
 * to the AccountService implementation in the root web application context.
 *
 * This wrapper class is necessary because JAX-WS requires working with dedicated
 * endpoint classes. If an existing service needs to be exported, a wrapper that
 * extends SpringBeanAutowiringSupport for simple Spring bean autowiring (through
 * the @Autowired annotation) is the simplest JAX-WS compliant way.
 *
 * This is the class registered with the server-side JAX-WS implementation.
 * In the case of a Java EE 5 server, this would simply be defined as a servlet
 * in web.xml, with the server detecting that this is a JAX-WS endpoint and reacting
 * accordingly. The servlet name usually needs to match the specified WS service name.
 *
 * The web service engine manages the lifecycle of instances of this class.
 * Spring bean references will just be wired in here.
 */</span></i>import org.springframework.web.context.support.SpringBeanAutowiringSupport;

@WebService(serviceName="AccountService")
public class AccountServiceEndpoint extends SpringBeanAutowiringSupport {

    @Autowired
    private AccountService biz;

    @WebMethod
    public void insertAccount(Account acc) {
       biz.insertAccount(acc);
    }

    @WebMethod
    public Account[] getAccounts(String name) {
       return biz.getAccounts(name);
    }
}</pre><p>&#20026;&#20102;&#33021;&#22815;&#35753;Spring&#19978;&#19979;&#25991;&#20351;&#29992;Spring&#35774;&#26045;&#65292;&#25105;&#20204;&#30340;<tt class="classname">AccountServletEndpoint</tt>&#31867;&#38656;&#35201;&#36816;&#34892;&#22312;&#21516;&#19968;&#20010;web&#24212;&#29992;&#20013;&#12290;&#22312;Java EE 5&#29615;&#22659;&#20013;&#36825;&#26159;&#40664;&#35748;&#30340;&#24773;&#20917;&#65292;&#23427;&#20351;&#29992;JAX-WS servlet&#31471;&#28857;&#23433;&#35013;&#26631;&#20934;&#22865;&#32422;&#12290;&#35814;&#24773;&#35831;&#21442;&#38405;Java EE 5 web&#26381;&#21153;&#25945;&#31243;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="remoting-web-services-jaxws-export-standalone"></a>17.5.6.&nbsp;&#20351;&#29992;JAX-WS&#26292;&#38706;&#21333;&#29420;web&#26381;&#21153;</h3></div></div><div></div></div><p>Sun JDK 1.6&#25552;&#20379;&#30340;&#20869;&#32622;JAX-WS provider &#20351;&#29992;&#20869;&#32622;&#30340;HTTP&#26381;&#21153;&#22120;&#26469;&#26292;&#38706;web&#26381;&#21153;&#12290;Spring&#30340;<tt class="classname">SimpleJaxWsServiceExporter</tt>&#31867;&#26816;&#27979;&#25152;&#26377;&#22312;Spring&#24212;&#29992;&#19978;&#19979;&#25991;&#20013;&#37197;&#32622;&#30340;l<tt class="literal">@WebService</tt> &#27880;&#35299;bean&#65292;&#28982;&#21518;&#36890;&#36807;&#40664;&#35748;&#30340;JAX-WS&#26381;&#21153;&#22120;&#65288;JDK 1.6 HTTP&#26381;&#21153;&#22120;&#65289;&#26469;&#26292;&#38706;&#23427;&#20204;&#12290;</p><p>&#22312;&#36825;&#31181;&#22330;&#26223;&#19979;&#65292;&#31471;&#28857;&#23454;&#20363;&#23558;&#34987;&#20316;&#20026;Spring bean&#26469;&#23450;&#20041;&#21644;&#31649;&#29702;&#12290;&#23427;&#20204;&#23558;&#20351;&#29992;JAX-WS&#26469;&#27880;&#20876;&#65292;&#20294;&#20854;&#29983;&#21629;&#21608;&#26399;&#23558;&#19968;&#30452;&#36319;&#38543;Spring&#24212;&#29992;&#19978;&#19979;&#25991;&#12290;&#36825;&#24847;&#21619;&#30528;Spring&#30340;&#26174;&#31034;&#20381;&#36182;&#27880;&#20837;&#21487;&#29992;&#20110;&#31471;&#28857;&#23454;&#20363;&#12290;&#24403;&#28982;&#36890;&#36807;<tt class="literal">@Autowired</tt>&#26469;&#36827;&#34892;&#27880;&#35299;&#39537;&#21160;&#30340;&#27880;&#20837;&#20063;&#21487;&#20197;&#27491;&#24120;&#24037;&#20316;&#12290;</p><pre class="programlisting">&lt;bean class="org.springframework.remoting.jaxws.SimpleJaxWsServiceExporter"&gt;
    &lt;property name="baseAddress" value="http://localhost:9999/"/&gt;
&lt;/bean&gt;

&lt;bean id="accountServiceEndpoint" class="example.AccountServiceEndpoint"&gt;
    ...
&lt;/bean&gt;

...</pre><p><tt class="classname">AccountServiceEndpoint</tt>&#31867;&#21487;&#33021;&#28304;&#33258;Spring&#30340; <tt class="classname">SpringBeanAutowiringSupport</tt>&#31867;&#65292;&#20063;&#21487;&#33021;&#19981;&#26159;&#12290;&#22240;&#20026;&#36825;&#37324;&#30340;&#31471;&#28857;&#26159;&#30001;Spring&#23436;&#20840;&#31649;&#29702;&#30340;bean&#12290;&#36825;&#24847;&#21619;&#30528;&#31471;&#28857;&#23454;&#29616;&#21487;&#33021;&#20687;&#19979;&#38754;&#36825;&#26679;&#27809;&#26377;&#20219;&#20309;&#29238;&#31867;&#23450;&#20041; - &#32780;&#19988;Spring&#30340;<tt class="literal">@Autowired</tt>&#37197;&#32622;&#27880;&#35299;&#20173;&#28982;&#33021;&#22815;&#20351;&#29992;&#65306;</p><pre class="programlisting">@WebService(serviceName="AccountService")
public class AccountServiceEndpoint {

    @Autowired
    private AccountService biz;

    @WebMethod
    public void insertAccount(Account acc) {
       biz.insertAccount(acc);
    }

    @WebMethod
    public Account[] getAccounts(String name) {
       return biz.getAccounts(name);
    }
}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="remoting-web-services-jaxws-export-ri"></a>17.5.7.&nbsp;&#20351;&#29992;Spring&#25903;&#25345;&#30340;JAX-WS RI&#26469;&#26292;&#38706;&#26381;&#21153;</h3></div></div><div></div></div><p>Sun
&#30340;JAX-WS RI&#34987;&#20316;&#20026;GlassFish&#39033;&#30446;&#30340;&#19968;&#37096;&#20998;&#26469;&#24320;&#21457;,&#23427;&#20351;&#29992;&#20102;Spring&#25903;&#25345;&#26469;&#20316;&#20026;JAX-WS
Commons&#39033;&#30446;&#30340;&#19968;&#37096;&#20998;&#12290;&#36825;&#20801;&#35768;&#25226;JAX-WS&#31471;&#28857;&#20316;&#20026;Spring&#31649;&#29702;&#30340;bean&#26469;&#23450;&#20041;&#12290;&#36825;&#19982;&#21069;&#38754;&#31456;&#33410;&#35752;&#35770;&#30340;&#21333;&#29420;&#27169;&#24335;&#31867;&#20284; -
&#20294;&#36825;&#27425;&#26159;&#22312;Servlet&#29615;&#22659;&#20013;&#12290;<span class="emphasis"><em>&#27880;&#24847;&#36825;&#22312;Java EE 5&#29615;&#22659;&#20013;&#26159;&#19981;&#21487;&#36801;&#31227;&#30340;&#65292;&#24314;&#35758;&#22312;&#27809;&#26377;EE&#30340;web&#24212;&#29992;&#29615;&#22659;&#22914;Tomcat&#20013;&#23884;&#20837;JAX-WS RI&#12290;</em></span></p><p>&#19982;&#26631;&#20934;&#30340;&#26292;&#38706;&#22522;&#20110;servlet&#30340;&#31471;&#28857;&#26041;&#24335;&#19981;&#21516;&#20043;&#22788;&#22312;&#20110;&#31471;&#28857;&#23454;&#20363;&#30340;&#29983;&#21629;&#21608;&#26399;&#23558;&#34987;Spring&#31649;&#29702;&#12290;&#36825;&#37324;&#22312;<tt class="literal">web.xml</tt>&#23558;&#21482;&#26377;&#19968;&#20010;JAX-WS servlet&#23450;&#20041;&#12290;&#22312;&#26631;&#20934;&#30340;Java EE 5&#39118;&#26684;&#20013;(&#22914;&#19978;&#25152;&#31034;)&#65292;&#20320;&#23558;&#23545;&#27599;&#20010;&#26381;&#21153;&#31471;&#28857;&#23450;&#20041;&#19968;&#20010;servlet&#65292;&#27599;&#20010;&#26381;&#21153;&#31471;&#28857;&#37117;&#20195;&#29702;&#21040;Spring bean (&#36890;&#36807;&#20351;&#29992;<tt class="literal">@Autowired</tt>&#65292;&#22914;&#19978;&#25152;&#31034;)&#12290;</p><p>&#20851;&#20110;&#23433;&#35013;&#21644;&#20351;&#29992;&#35814;&#24773;&#35831;&#26597;&#38405;<a href="https://jax-ws-commons.dev.java.net/spring/" target="_top">https://jax-ws-commons.dev.java.net/spring/</a>&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="remoting-web-services-jaxws-access"></a>17.5.8.&nbsp;&#20351;&#29992;JAX-WS&#35775;&#38382;web&#26381;&#21153;</h3></div></div><div></div></div><p>&#31867;&#20284;JAX-RPC&#25903;&#25345;&#65292;Spring&#25552;&#20379;&#20102;2&#20010;&#24037;&#21378;bean&#26469;&#21019;&#24314;JAX-WS web&#26381;&#21153;&#20195;&#29702;&#65292;&#23427;&#20204;&#26159;<tt class="classname">LocalJaxWsServiceFactoryBean</tt>&#21644;<tt class="classname">JaxWsPortProxyFactoryBean</tt>&#12290;&#21069;&#19968;&#20010;&#21482;&#33021;&#36820;&#22238;&#19968;&#20010;JAX-WS&#26381;&#21153;&#23545;&#35937;&#26469;&#35753;&#25105;&#20204;&#20351;&#29992;&#12290;&#21518;&#38754;&#30340;&#26159;&#21487;&#20197;&#36820;&#22238;&#25105;&#20204;&#19994;&#21153;&#26381;&#21153;&#25509;&#21475;&#30340;&#20195;&#29702;&#23454;&#29616;&#30340;&#23436;&#25972;&#29256;&#26412;&#12290;&#36825;&#20010;&#20363;&#23376;&#20013;&#25105;&#20204;&#20351;&#29992;&#21518;&#32773;&#26469;&#20026;<tt class="interfacename">AccountService</tt>&#31471;&#28857;&#20877;&#21019;&#24314;&#19968;&#20010;&#20195;&#29702;&#65306;</p><pre class="programlisting">&lt;bean id="accountWebService" class="org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean"&gt;
    &lt;property name="serviceInterface" value="example.AccountService"/&gt;
    &lt;property name="wsdlDocumentUrl" value="http://localhost:8080/account/services/accountService?WSDL"/&gt;
    &lt;property name="namespaceUri" value="http://localhost:8080/account/services/accountService"/&gt;
    &lt;property name="serviceName" value="AccountService"/&gt;
    &lt;property name="portName" value="AccountPort"/&gt;
&lt;/bean&gt;</pre><p><tt class="literal">serviceInterface</tt>&#26159;&#25105;&#20204;&#23458;&#25143;&#31471;&#23558;&#20351;&#29992;&#30340;&#36828;&#31243;&#19994;&#21153;&#25509;&#21475;&#12290;
      <tt class="literal">wsdlDocumentUrl</tt>&#26159;WSDL&#25991;&#20214;&#30340;URL. Spring&#38656;&#35201;&#29992;&#23427;&#20316;&#20026;&#21551;&#21160;&#28857;&#26469;&#21019;&#24314;JAX-RPC&#26381;&#21153;&#12290;
      <tt class="literal">namespaceUri</tt>&#23545;&#24212;.wsdl&#25991;&#20214;&#20013;&#30340;targetNamespace&#12290;
      <tt class="literal">serviceName</tt> &#23545;&#24212;.wsdl&#25991;&#20214;&#20013;&#30340;&#26381;&#21153;&#21517;&#12290;
      <tt class="literal">portName</tt> &#23545;&#24212;.wsdl&#25991;&#20214;&#20013;&#30340;&#31471;&#21475;&#21495;&#12290;
      </p><p>&#29616;&#22312;&#25105;&#20204;&#21487;&#20197;&#24456;&#26041;&#20415;&#30340;&#35775;&#38382;web&#26381;&#21153;&#65292;&#22240;&#20026;&#25105;&#20204;&#26377;&#19968;&#20010;&#21487;&#20197;&#23558;&#23427;&#26292;&#38706;&#20026;<tt class="literal">AccountService</tt>&#25509;&#21475;&#30340;bean&#24037;&#21378;&#12290;&#25105;&#20204;&#21487;&#20197;&#22312;Spring&#20013;&#36825;&#26679;&#20351;&#29992;&#65306;</p><pre class="programlisting">&lt;bean id="client" class="example.AccountClientImpl"&gt;
    ...
    &lt;property name="service" ref="accountWebService"/&gt;
&lt;/bean&gt;</pre><p>&#20174;&#23458;&#25143;&#31471;&#20195;&#30721;&#19978;&#25105;&#20204;&#21487;&#20197;&#25226;&#36825;&#20010;web&#26381;&#21153;&#24403;&#25104;&#19968;&#20010;&#26222;&#36890;&#30340;&#31867;&#36827;&#34892;&#35775;&#38382;&#65306;</p><pre class="programlisting">public class AccountClientImpl {

    private AccountService service;

    public void setService(AccountService service) {
        this.service = service;
    }

    public void foo() {
        service.insertAccount(...);
    }
}</pre><p><span class="emphasis"><em>&#27880;&#24847;:</em></span> &#19978;&#38754;&#34987;&#31245;&#24494;&#31616;&#21270;&#20102;&#65292;&#22240;&#20026;JAX-WS&#38656;&#35201;&#31471;&#28857;&#25509;&#21475;&#21450;&#23454;&#29616;&#31867;&#26469;&#20351;&#29992;<tt class="literal">@WebService</tt>, <tt class="literal">@SOAPBinding</tt>&#31561;&#27880;&#35299;&#12290; &#36825;&#24847;&#21619;&#30528;&#20320;&#19981;&#33021;&#31616;&#21333;&#30340;&#20351;&#29992;&#26222;&#36890;&#30340;Java&#25509;&#21475;&#21644;&#23454;&#29616;&#26469;&#20316;&#20026;JAX-WS&#31471;&#28857;&#65292;&#20320;&#38656;&#35201;&#39318;&#20808;&#23545;&#23427;&#20204;&#36827;&#34892;&#30456;&#24212;&#30340;&#27880;&#35299;&#12290;&#36825;&#20123;&#38656;&#27714;&#35814;&#24773;&#35831;&#26597;&#38405;JAX-WS&#25991;&#26723;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="remoting-web-services-xfire"></a>17.5.9.&nbsp;&#20351;&#29992;XFire&#26469;&#26292;&#38706;Web&#26381;&#21153;</h3></div></div><div></div></div><p>XFire&#26159;&#19968;&#20010;Codehaus&#25552;&#20379;&#30340;&#36731;&#37327;&#32423;SOAP&#24211;&#12290;&#26292;&#38706;XFire&#26159;&#36890;&#36807;XFire&#33258;&#24102;&#30340;context&#65292;&#36825;&#20010;context&#23558;&#21644;RemoteExporter&#39118;&#26684;&#30340;bean&#30456;&#32467;&#21512;&#65292;&#21518;&#32773;&#38656;&#35201;&#34987;&#21152;&#20837;&#21040;&#22312;&#20320;&#30340;<tt class="interfacename">WebApplicationContext</tt>&#20013;&#12290;&#23545;&#20110;&#25152;&#26377;&#35753;&#20320;&#26469;&#26292;&#38706;&#26381;&#21153;&#30340;&#26041;&#27861;&#65292;&#20320;&#38656;&#35201;&#21019;&#24314;&#19968;&#20010;<tt class="classname">DispatcherServlet</tt>&#31867;&#24182;&#26377;&#30456;&#24212;&#30340;<tt class="interfacename">WebApplicationContext</tt>&#26469;&#23553;&#35013;&#20320;&#23558;&#35201;&#26292;&#38706;&#30340;&#26381;&#21153;&#65306;</p><pre class="programlisting">&lt;servlet&gt;
    &lt;servlet-name&gt;xfire&lt;/servlet-name&gt;
    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;
&lt;/servlet&gt;</pre><p>&#20320;&#36824;&#24517;&#39035;&#38142;&#25509;XFire&#37197;&#32622;&#12290;&#36825;&#26159;&#36890;&#36807;&#22686;&#21152;&#19968;&#20010;context&#25991;&#20214;&#21040;&#30001;<tt class="classname">ContextLoaderListener</tt>&#65288;&#25110;&#32773;<tt class="classname">ContextLoaderServlet</tt>&#65289;&#21152;&#36733;&#30340; <tt class="literal">contextConfigLocations</tt> &#21442;&#25968;&#20013;&#12290;</p><pre class="programlisting">&lt;context-param&gt;
    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
    &lt;param-value&gt;classpath:org/codehaus/xfire/spring/xfire.xml&lt;/param-value&gt;
&lt;/context-param&gt;

&lt;listener&gt;
    &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;
&lt;/listener&gt;</pre><p>&#22312;&#20320;&#21152;&#20837;&#19968;&#20010;Servlet&#26144;&#23556;&#21518;&#65288;&#26144;&#23556;<tt class="literal">/*</tt>&#21040;&#19978;&#38754;&#23450;&#20041;&#30340;XFire Servlet&#65289;&#65292;&#20320;&#21482;&#38656;&#35201;&#22686;&#21152;&#19968;&#20010;&#39069;&#22806;&#30340;bean&#26469;&#20351;&#29992;XFire&#26292;&#38706;&#26381;&#21153;&#12290;&#20363;&#22914;&#65292;&#22312; <tt class="filename">'xfire-servlet.xml'</tt> &#20013;&#22686;&#21152;&#22914;&#19979;&#37197;&#32622;&#65306;</p><pre class="programlisting">&lt;beans&gt;

    &lt;bean name="/Echo" class="org.codehaus.xfire.spring.remoting.XFireExporter"&gt;
        &lt;property name="serviceInterface" value="org.codehaus.xfire.spring.Echo"/&gt;
        &lt;property name="serviceBean"&gt;
    	       &lt;bean class="org.codehaus.xfire.spring.EchoImpl"/&gt;
        &lt;/property&gt;
        <i class="lineannotation"><span class="lineannotation">&lt;!-- the XFire bean is defined in the <tt class="filename">xfire.xml</tt> file --&gt;</span></i>
        &lt;property name="xfire" ref="xfire"/&gt;
  &lt;/bean&gt;

&lt;/beans&gt;</pre><p>XFire&#22788;&#29702;&#20102;&#20854;&#20182;&#30340;&#20107;&#24773;&#12290;&#23427;&#26816;&#26597;&#20320;&#30340;&#26381;&#21153;&#25509;&#21475;&#24182;&#20135;&#29983;&#19968;&#20010;WSDL&#25991;&#20214;&#12290;&#36825;&#37324;&#30340;&#37096;&#20998;&#25991;&#26723;&#26469;&#33258;XFire&#32593;&#31449;&#65292;&#35201;&#20102;&#35299;&#26356;&#22810;&#26377;&#20851;XFire Spring&#30340;&#38598;&#25104;&#35831;&#35775;&#38382; <a href="http://docs.codehaus.org/display/XFIRE/Spring" target="_top">docs.codehaus.org/display/XFIRE/Spring</a>&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="remoting-jms"></a>17.6.&nbsp;JMS</h2></div></div><div></div></div><p>&#20351;&#29992;JMS&#26469;&#20316;&#20026;&#24213;&#23618;&#30340;&#36890;&#20449;&#21327;&#35758;&#36879;&#26126;&#26292;&#38706;&#26381;&#21153;&#20063;&#26159;&#21487;&#33021;&#30340;&#12290;Spring&#26694;&#26550;&#20013;&#23545;JMS&#30340;&#36828;&#31243;&#25903;&#25345;&#20063;&#24456;&#22522;&#30784; - &#23427;&#22312;<span class="emphasis"><em>&#21516;&#19968;&#32447;&#31243;</em></span>&#21644;<span class="emphasis"><em>&#21516;&#19968;&#20010;&#38750;&#20107;&#21153;</em></span> <tt class="interfacename">Session</tt>&#19978;&#21457;&#36865;&#21644;&#25509;&#25910;&#65292;&#36825;&#20123;&#21534;&#21520;&#37327;&#23558;&#38750;&#24120;&#20381;&#36182;&#20110;&#23454;&#29616;&#12290;</p><p>The following interface is used on both the server and the client side.</p><p>&#19979;&#38754;&#30340;&#25509;&#21475;&#21487;&#21516;&#26102;&#29992;&#22312;&#26381;&#21153;&#31471;&#21644;&#23458;&#25143;&#31471;&#12290;</p><pre class="programlisting">package com.foo;

public interface CheckingAccountService {

    public void cancelAccount(Long accountId);
}</pre><p>&#23545;&#20110;&#19978;&#38754;&#25509;&#21475;&#30340;&#20351;&#29992;&#22312;&#26381;&#21153;&#30340;&#31471;&#31616;&#21333;&#23454;&#29616;&#22914;&#19979;&#12290;</p><pre class="programlisting">package com.foo;

public class SimpleCheckingAccountService implements CheckingAccountService {

    public void cancelAccount(Long accountId) {
        System.out.println("Cancelling account [" + accountId + "]");
    }
}</pre><p>&#36825;&#20010;&#21253;&#21547;JMS&#35774;&#26045;&#30340;bean&#30340;&#37197;&#32622;&#25991;&#20214;&#21487;&#21516;&#26102;&#29992;&#22312;&#23458;&#25143;&#31471;&#21644;&#26381;&#21153;&#31471;&#12290;</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"&gt;

    &lt;bean id="connectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory"&gt;
        &lt;property name="brokerURL" value="tcp://ep-t43:61616"/&gt;
    &lt;/bean&gt;

    &lt;bean id="queue" class="org.apache.activemq.command.ActiveMQQueue"&gt;
        &lt;constructor-arg value="mmm"/&gt;
    &lt;/bean&gt;

&lt;/beans&gt;</pre><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="remoting-jms-server"></a>17.6.1.&nbsp;&#26381;&#21153;&#31471;&#37197;&#32622;</h3></div></div><div></div></div><p>&#22312;&#26381;&#21153;&#31471;&#20320;&#21482;&#38656;&#35201;&#20351;&#29992;<tt class="classname">JmsInvokerServiceExporter</tt>&#26469;&#26292;&#38706;&#26381;&#21153;&#23545;&#35937;&#12290;</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.springframework.org/schema/beans
         http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"&gt;

    &lt;bean id="checkingAccountService"
          class="org.springframework.jms.remoting.JmsInvokerServiceExporter"&gt;
        &lt;property name="serviceInterface" value="com.foo.CheckingAccountService"/&gt;
        &lt;property name="service"&gt;
            &lt;bean class="com.foo.SimpleCheckingAccountService"/&gt;
        &lt;/property&gt;
   &lt;/bean&gt;

   &lt;bean class="org.springframework.jms.listener.SimpleMessageListenerContainer"&gt;
       &lt;property name="connectionFactory" ref="connectionFactory"/&gt;
       &lt;property name="destination" ref="queue"/&gt;
       &lt;property name="concurrentConsumers" value="3"/&gt;
       &lt;property name="messageListener" ref="checkingAccountService"/&gt;
   &lt;/bean&gt;

&lt;/beans&gt;</pre><pre class="programlisting">package com.foo;

import org.springframework.context.support.ClassPathXmlApplicationContext;

public class Server {

    public static void main(String[] args) throws Exception {
        new ClassPathXmlApplicationContext(new String[]{"com/foo/server.xml", "com/foo/jms.xml"});
    }
}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="remoting-jms-client"></a>17.6.2.&nbsp;&#23458;&#25143;&#31471;&#37197;&#32622;</h3></div></div><div></div></div><p>&#23458;&#25143;&#31471;&#20165;&#20165;&#38656;&#35201;&#21019;&#24314;&#19968;&#20010;&#23458;&#25143;&#31471;&#20195;&#29702;&#26469;&#23454;&#29616;&#19978;&#38754;&#30340;&#25509;&#21475;(<tt class="interfacename">CheckingAccountService</tt>)&#12290;&#26681;&#25454;&#21518;&#38754;&#30340;bean&#23450;&#20041;&#21019;&#24314;&#30340;&#32467;&#26524;&#23545;&#35937;&#21487;&#20197;&#34987;&#27880;&#20837;&#21040;&#20854;&#23427;&#23458;&#25143;&#31471;&#23545;&#35937;&#20013;&#65292;&#32780;&#36825;&#20010;&#20195;&#29702;&#20250;&#36127;&#36131;&#36890;&#36807;JMS&#23558;&#35843;&#29992;&#36716;&#21457;&#21040;&#26381;&#21153;&#31471;&#12290;</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"&gt;

    &lt;bean id="checkingAccountService"
          class="org.springframework.jms.remoting.JmsInvokerProxyFactoryBean"&gt;
        &lt;property name="serviceInterface" value="com.foo.CheckingAccountService"/&gt;
        &lt;property name="connectionFactory" ref="connectionFactory"/&gt;
        &lt;property name="queue" ref="queue"/&gt;
    &lt;/bean&gt;

&lt;/beans&gt;</pre><pre class="programlisting">package com.foo;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class Client {

    public static void main(String[] args) throws Exception {
        ApplicationContext ctx = new ClassPathXmlApplicationContext(
                new String[] {"com/foo/client.xml", "com/foo/jms.xml"});
        CheckingAccountService service = (CheckingAccountService) ctx.getBean("checkingAccountService");
        service.cancelAccount(new Long(10));
    }
}</pre></div><p>&#20320;&#21487;&#33021;&#20063;&#24076;&#26395;&#30740;&#31350;<a href="http://lingo.codehaus.org/" target="_top">Lingo</a> &#39033;&#30446;&#25552;&#20379;&#30340;&#25903;&#25345;&#65292;&#23427;(&#24341;&#29992;&#21040;&#20027;&#39029;) &#8220;<span class="quote"><span class="emphasis"><em>... &#26159;&#19968;&#20010;&#22522;&#20110;&#36731;&#37327;&#32423;POJO&#30340;&#36828;&#31243;&#26680;&#28040;&#24687;&#20195;&#30721;&#24211;&#65292;&#23427;&#20351;&#29992;&#24182;&#25193;&#23637;&#20102;Spring&#26694;&#26550;&#30340;&#36828;&#31243;&#20195;&#30721;&#24211;&#20197;&#25903;&#25345;JMS&#12290;</em></span></span>&#8221;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="remoting-autodection-remote-interfaces"></a>17.7.&nbsp;&#23545;&#36828;&#31243;&#25509;&#21475;&#19981;&#25552;&#20379;&#33258;&#21160;&#25506;&#27979;&#23454;&#29616;</h2></div></div><div></div></div><p>&#23545;&#36828;&#31243;&#25509;&#21475;&#19981;&#23454;&#29616;&#33258;&#21160;&#25506;&#27979;&#30340;&#20027;&#35201;&#21407;&#22240;&#26159;&#38450;&#27490;&#20135;&#29983;&#22826;&#22810;&#30340;&#36828;&#31243;&#35843;&#29992;&#12290;&#30446;&#26631;&#23545;&#35937;&#26377;&#21487;&#33021;&#23454;&#29616;&#30340;&#26159;&#31867;&#20284;<tt class="interfacename">InitializingBean</tt>&#25110;&#32773;<tt class="interfacename">DisposableBean</tt>&#36825;&#26679;&#30340;&#20869;&#37096;&#22238;&#35843;&#25509;&#21475;&#65292;&#32780;&#36825;&#20123;&#26159;&#19981;&#24076;&#26395;&#26292;&#38706;&#32473;&#35843;&#29992;&#32773;&#30340;&#12290;</p><p>&#25552;&#20379;&#19968;&#20010;&#25152;&#26377;&#25509;&#21475;&#37117;&#34987;&#30446;&#26631;&#23454;&#29616;&#30340;&#20195;&#29702;&#36890;&#24120;&#21644;&#26412;&#22320;&#24773;&#20917;&#26080;&#20851;&#12290;&#20294;&#26159;&#24403;&#26292;&#38706;&#19968;&#20010;&#36828;&#31243;&#26381;&#21153;&#26102;&#65292;&#20320;&#24212;&#35813;&#21482;&#26292;&#38706;&#29305;&#23450;&#30340;&#29992;&#20110;&#36828;&#31243;&#20351;&#29992;&#30340;&#26381;&#21153;&#25509;&#21475;&#12290;&#38500;&#20102;&#20869;&#37096;&#22238;&#35843;&#25509;&#21475;&#65292;&#30446;&#26631;&#26377;&#21487;&#33021;&#23454;&#29616;&#20102;&#22810;&#20010;&#19994;&#21153;&#25509;&#21475;&#65292;&#32780;&#24448;&#24448;&#21482;&#26377;&#19968;&#20010;&#26159;&#29992;&#20110;&#36828;&#31243;&#35843;&#29992;&#30340;&#12290;&#20986;&#20110;&#36825;&#20123;&#21407;&#22240;&#65292;&#25105;&#20204; <span class="emphasis"><em>&#35201;&#27714;</em></span> &#25351;&#23450;&#36825;&#26679;&#30340;&#26381;&#21153;&#25509;&#21475;&#12290;</p><p>&#36825;&#26159;&#22312;&#37197;&#32622;&#26041;&#20415;&#24615;&#21644;&#24847;&#22806;&#26292;&#38706;&#20869;&#37096;&#26041;&#27861;&#30340;&#21361;&#38505;&#24615;&#20043;&#38388;&#20316;&#30340;&#24179;&#34913;&#12290;&#24635;&#26159;&#25351;&#26126;&#26381;&#21153;&#25509;&#21475;&#24182;&#19981;&#35201;&#33457;&#22826;&#22823;&#20195;&#20215;&#65292;&#24182;&#21487;&#20197;&#35753;&#20320;&#25511;&#21046;&#38656;&#26292;&#38706;&#26041;&#27861;&#20174;&#32780;&#26356;&#21152;&#23433;&#20840;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="remoting-considerations"></a>17.8.&nbsp;&#22312;&#36873;&#25321;&#36825;&#20123;&#25216;&#26415;&#26102;&#30340;&#19968;&#20123;&#32771;&#34385;</h2></div></div><div></div></div><p>&#36825;&#37324;&#25552;&#21040;&#30340;&#27599;&#31181;&#25216;&#26415;&#37117;&#26377;&#23427;&#30340;&#32570;&#28857;&#12290;&#20320;&#22312;&#36873;&#25321;&#19968;&#31181;&#25216;&#26415;&#26102;&#65292;&#24212;&#35813;&#20180;&#32454;&#32771;&#34385;&#20320;&#30340;&#38656;&#35201;&#21644;&#25152;&#26292;&#38706;&#30340;&#26381;&#21153;&#21450;&#20320;&#22312;&#36828;&#31243;&#35775;&#38382;&#26102;&#20256;&#36865;&#30340;&#23545;&#35937;&#12290;</p><p>
&#24403;&#20351;&#29992;RMI&#26102;&#65292;&#36890;&#36807;HTTP&#21327;&#35758;&#35775;&#38382;&#23545;&#35937;&#26159;&#19981;&#21487;&#33021;&#30340;&#65292;&#38500;&#38750;&#20320;&#29992;HTTP&#21253;&#35065;RMI&#27969;&#12290;RMI&#26159;&#19968;&#31181;&#37325;&#37327;&#32423;&#21327;&#35758;&#65292;&#22240;&#20026;&#23427;&#25903;&#25345;&#25972;&#20010;&#23545;&#35937;&#30340;&#24207;&#21015;&#21270;&#65292;&#24403;&#35201;&#27714;&#32593;&#32476;
&#19978;&#20256;&#36755;&#22797;&#26434;&#25968;&#25454;&#32467;&#26500;&#26102;&#36825;&#26159;&#38750;&#24120;&#37325;&#35201;&#30340;&#12290;&#28982;&#32780;&#65292;RMI-JRMP&#21482;&#33021;&#32465;&#23450;&#21040;Java&#23458;&#25143;&#31471;&#65306;&#23427;&#26159;&#19968;&#31181;Java-to-Java&#30340;&#36828;&#31243;&#35775;&#38382;&#35299;&#20915;&#26041;&#26696;&#12290;</p><p>&#22914;
&#26524;&#20320;&#38656;&#35201;&#22522;&#20110;HTTP&#30340;&#36828;&#31243;&#35775;&#38382;&#32780;&#19988;&#36824;&#35201;&#27714;&#20351;&#29992;Java&#24207;&#21015;&#21270;&#65292;Spring&#30340;HTTP&#35843;&#29992;&#22120;&#26159;&#19968;&#20010;&#24456;&#22909;&#30340;&#36873;&#25321;&#12290;&#23427;&#21644;RMI&#35843;&#29992;&#22120;&#20351;&#29992;&#30456;&#21516;&#30340;&#22522;&#30784;&#35774;&#26045;&#65292;&#20165;
&#20165;&#20351;&#29992;HTTP&#20316;&#20026;&#20256;&#36755;&#26041;&#24335;&#12290;&#27880;&#24847;HTTP&#35843;&#29992;&#22120;&#19981;&#20165;&#21482;&#33021;&#29992;&#22312;Java-to-Java&#30340;&#36828;&#31243;&#35775;&#38382;&#65292;&#32780;&#19988;&#22312;&#23458;&#25143;&#31471;&#21644;&#26381;&#21153;&#22120;&#31471;&#37117;&#24517;&#39035;&#20351;&#29992;
Spring&#12290;&#65288;Spring&#20026;&#38750;RMI&#25509;&#21475;&#25552;&#20379;&#30340;RMI&#35843;&#29992;&#22120;&#20063;&#35201;&#27714;&#23458;&#25143;&#31471;&#21644;&#26381;&#21153;&#22120;&#31471;&#37117;&#20351;&#29992;Spring&#65289;</p><p>&#22312;&#20351;&#29992;&#26381;&#21153;&#38598;&#32676;&#21644;&#38656;&#35201;JMS&#20195;&#29702;&#65288;JMS broker&#65289;&#26469;&#22788;&#29702;&#36127;&#36733;&#22343;&#34913;&#21450;&#21457;&#29616;&#21644;&#33258;&#21160;-&#22833;&#36133;&#24674;&#22797;&#26381;&#21153;&#26102;JMS&#26159;&#24456;&#26377;&#29992;&#30340;&#12290;&#32570;&#30465;&#24773;&#20917;&#19979;&#65292;&#22312;&#20351;&#29992;JMS&#36828;&#31243;&#26381;&#21153;&#26102;&#20351;&#29992;Java&#24207;&#21015;&#21270;&#65292;&#20294;&#26159;JMS&#25552;&#20379;&#32773;&#20063;&#21487;&#20197;&#20351;&#29992;&#19981;&#21516;&#30340;&#26426;&#21046;&#20363;&#22914;XStream&#26469;&#35753;&#26381;&#21153;&#22120;&#29992;&#20854;&#20182;&#25216;&#26415;&#12290;</p><p>&#26368;&#21518;&#20294;&#19981;&#20165;&#38480;&#20110;&#27492;&#65292;&#30456;&#23545;&#20110;RMI&#65292;EJB&#26377;&#19968;&#20010;&#20248;&#28857;&#26159;&#23427;&#25903;&#25345;&#26631;&#20934;&#30340;&#22522;&#20110;&#35282;&#33394;&#30340;&#35748;&#35777;&#21644;&#25480;&#26435;&#65292;&#20197;&#21450;&#36828;&#31243;&#20107;&#21153;&#20256;&#36882;&#12290;&#29992;RMI&#35843;&#29992;&#22120;&#25110;HTTP&#35843;&#29992;&#22120;&#26469;&#25903;&#25345;&#23433;&#20840;&#19978;&#19979;&#25991;&#30340;&#20256;&#36882;&#26159;&#21487;&#33021;&#30340;&#65292;&#34429;&#28982;&#36825;&#19981;&#30001;&#26680;&#24515;Spring&#25552;&#20379;&#65306;Spring&#25552;&#20379;&#20102;&#21512;&#36866;&#30340;&#38057;&#23376;&#26469;&#25554;&#20837;&#31532;&#19977;&#26041;&#25110;&#23450;&#21046;&#30340;&#35299;&#20915;&#26041;&#26696;&#12290;</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="ejb"></a>Chapter&nbsp;18.&nbsp;Enterprise Java Beans (EJB) &#38598;&#25104;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="ejb-introduction"></a>18.1.&nbsp;&#31616;&#20171;</h2></div></div><div></div></div><p>&#20570;&#20026;&#19968;&#20010;&#36731;&#37327;&#32423;&#30340;&#23481;&#22120;&#65292;Spring&#24120;&#34987;&#35748;&#20026;&#26159;EJB&#30340;&#26367;&#20195;&#21697;&#12290;&#25105;&#20204;&#20063;&#30456;&#20449;&#65292;&#23545;&#20110;&#24456;&#22810;&#65288;&#29978;&#33267;&#26159;&#32477;&#22823;&#22810;&#25968;&#65289;&#24212;&#29992;&#21644;&#24773;&#20917;&#65292;&#37319;&#29992;Spring&#20316;&#20026;&#23481;&#22120;&#65292;&#24182;&#20511;&#21161;&#23427;&#23545;&#20107;&#21153;&#12289;ORM&#21644;JDBC&#35775;&#38382;&#31561;&#30340;&#25903;&#25345;&#65292;&#26159;&#19968;&#31181;&#27604;&#37319;&#29992;EJB&#21450;EJB&#23481;&#22120;&#20197;&#23454;&#29616;&#21516;&#26679;&#30340;&#21151;&#33021;&#26356;&#22909;&#30340;&#36873;&#25321;&#12290;</p><p>&#28982;
&#32780;&#65292;&#38656;&#35201;&#29305;&#21035;&#27880;&#24847;&#30340;&#26159;&#65292;&#20351;&#29992;&#20102;Spring&#24182;&#19981;&#26159;&#35828;&#25105;&#20204;&#23601;&#19981;&#33021;&#29992;EJB&#20102;&#12290;&#23454;&#38469;&#19978;&#65292;Spring&#20351;&#24471;&#35775;&#38382;&#21644;&#23454;&#29616;EJB&#21450;&#20854;&#21151;&#33021;&#26356;&#21152;&#26041;&#20415;&#12290;&#21478;&#22806;&#65292;&#22914;&#26524;&#36890;&#36807;
Spring&#26469;&#35775;&#38382;EJB&#32452;&#20214;&#26381;&#21153;&#65292;&#20197;&#21518;&#23601;&#21487;&#20197;&#22312;&#26412;&#22320;EJB&#32452;&#20214;&#65292;&#36828;&#31243;EJB&#32452;&#20214;&#65292;&#25110;&#32773;&#26159;POJO(&#31616;&#21333;Java&#23545;&#35937;)&#36825;&#20123;&#21464;&#20307;&#20043;&#38388;&#36879;&#26126;&#22320;&#20999;&#25442;&#23454;&#29616;&#26041;&#24335;&#65292;
&#32780;&#19981;&#38656;&#35201;&#25913;&#21464;&#23458;&#25143;&#31471;&#30340;&#20195;&#30721;&#12290;</p><p>&#26412;&#31456;&#65292;&#25105;&#20204;&#26469;&#30475;&#30475;Spring&#26159;&#22914;&#20309;&#24110;&#21161;&#25105;&#20204;&#35775;&#38382;&#21644;&#23454;&#29616;EJB&#32452;&#20214;&#30340;&#12290;Spring&#22312;&#35775;&#38382;&#26080;&#29366;&#24577;Session Bean(SLSBs)&#30340;&#26102;&#20505;&#29305;&#21035;&#26377;&#29992;&#65292;&#29616;&#22312;&#25105;&#20204;&#23601;&#30001;&#27492;&#24320;&#22987;&#35752;&#35770;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="ejb-access"></a>18.2.&nbsp;&#35775;&#38382;EJB</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="ejb-access-concepts"></a>18.2.1.&nbsp;&#27010;&#24565;</h3></div></div><div></div></div><p>&#35201;
&#35843;&#29992;&#19968;&#20010;&#26412;&#22320;&#25110;&#32773;&#36828;&#31243;&#26080;&#29366;&#24577;session bean&#19978;&#30340;&#26041;&#27861;&#65292;&#23458;&#25143;&#31471;&#20195;&#30721;&#24517;&#39035;&#36827;&#34892;JNDI&#26597;&#25214;&#65292;&#20197;&#33719;&#21462;(&#26412;&#22320;&#25110;&#36828;&#31243;&#30340;)EJB
Home&#23545;&#35937;&#65292;&#28982;&#21518;&#35843;&#29992;&#35813;&#23545;&#35937;&#30340;"create"&#26041;&#27861;&#65292;&#25165;&#33021;&#24471;&#21040;&#23454;&#38469;&#30340;(&#26412;&#22320;&#25110;&#36828;&#31243;&#30340;)EJB&#23545;&#35937;&#12290;&#28982;&#21518;&#25165;&#33021;&#35843;&#29992;&#19968;&#20010;&#25110;&#32773;&#22810;&#20010;EJB&#32452;&#20214;&#30340;&#26041;&#27861;&#12290;</p><p>&#20026;&#20102;&#36991;&#20813;&#37325;&#22797;&#30340;&#24213;&#23618;&#20195;&#30721;&#65292;&#24456;&#22810;EJB&#24212;&#29992;&#20351;&#29992;&#20102;&#26381;&#21153;&#23450;&#20301;&#22120;(Service Locator)&#21644;&#19994;&#21153;&#22996;&#25176;(Bussiness Delegate)&#27169;&#24335;&#65292;&#36825;&#26679;&#27604;&#22312;&#23458;&#25143;&#31471;&#20195;&#30721;&#20013;&#21040;&#22788;&#37117;&#36827;&#34892;JNDI&#26597;&#25214;&#35201;&#22909;&#20123;&#65292;&#19981;&#36807;&#23427;&#20204;&#30340;&#24120;&#35265;&#23454;&#29616;&#37117;&#26377;&#20005;&#37325;&#30340;&#32570;&#38519;&#12290;&#20363;&#22914;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#36890;&#24120;&#22914;&#26524;&#20195;&#30721;&#36890;&#36807;&#26381;&#21153;&#23450;&#20301;&#22120;&#25110;&#19994;&#21153;&#20195;&#29702;&#21333;&#20214;&#26469;&#20351;&#29992;EJB&#65292;&#21017;&#24456;&#38590;&#23545;&#20854;&#36827;&#34892;&#27979;&#35797;&#12290;</p></li><li><p>&#22914;&#26524;&#21482;&#20351;&#29992;&#20102;&#26381;&#21153;&#23450;&#20301;&#22120;&#27169;&#24335;&#32780;&#19981;&#20351;&#29992;&#19994;&#21153;&#22996;&#25176;&#27169;&#24335;&#65292;&#24212;&#29992;&#31243;&#24207;&#20195;&#30721;&#20173;&#28982;&#38656;&#35201;&#35843;&#29992;EJB Home&#32452;&#20214;&#30340;create&#26041;&#27861;&#65292;&#24182;&#19988;&#35201;&#22788;&#29702;&#30001;&#27492;&#20135;&#29983;&#30340;&#24322;&#24120;&#12290;&#36825;&#26679;&#20195;&#30721;&#20381;&#28982;&#23384;&#22312;&#21644;EJB API&#30340;&#32806;&#21512;&#24182;&#24863;&#26579;&#20102;EJB&#32534;&#31243;&#27169;&#22411;&#30340;&#22797;&#26434;&#24615;&#12290;</p></li><li><p>&#23454;&#29616;&#19994;&#21153;&#22996;&#25176;&#27169;&#24335;&#36890;&#24120;&#20250;&#23548;&#33268;&#22823;&#37327;&#30340;&#37325;&#22797;&#20195;&#30721;&#65292;&#22240;&#20026;&#23545;&#20110;EJB&#32452;&#20214;&#30340;&#21516;&#19968;&#20010;&#26041;&#27861;&#65292;&#25105;&#20204;&#19981;&#24471;&#19981;&#32534;&#20889;&#24456;&#22810;&#26041;&#27861;&#21435;&#35843;&#29992;&#23427;&#12290;</p></li></ul></div><p>Spring&#30340;&#35299;&#20915;&#26041;&#24335;&#26159;&#20801;&#35768;&#29992;&#25143;&#21019;&#24314;&#24182;&#20351;&#29992;&#20195;&#30721;&#37327;&#24456;&#23569;&#30340;&#19994;&#21153;&#22996;&#25176;&#20195;&#29702;&#23545;&#35937;&#65292;&#36890;&#24120;&#22312;Spring&#30340;&#23481;&#22120;&#37324;&#37197;&#32622;&#12290;&#32780;&#19981;&#20877;&#38656;&#35201;&#32534;&#20889;&#39069;&#22806;&#30340;&#26381;&#21153;&#23450;&#20301;&#22120;&#25110;JNDI&#26597;&#25214;&#30340;&#20195;&#30721;&#65292;&#20197;&#21450;&#32534;&#30721;&#30340;&#19994;&#21153;&#22996;&#25176;&#23545;&#35937;&#37324;&#38754;&#30340;&#20887;&#20313;&#26041;&#27861;&#65292;&#38500;&#38750;&#23427;&#20204;&#21487;&#20197;&#24102;&#26469;&#23454;&#36136;&#24615;&#30340;&#22909;&#22788;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="ejb-access-local"></a>18.2.2.&nbsp;&#35775;&#38382;&#26412;&#22320;&#30340;&#26080;&#29366;&#24577;Session Bean(SLSB)</h3></div></div><div></div></div><p>&#20551;
&#35774;web&#25511;&#21046;&#22120;&#38656;&#35201;&#20351;&#29992;&#26412;&#22320;EJB&#32452;&#20214;&#12290;&#25105;&#20204;&#23558;&#36981;&#24490;&#26368;&#20339;&#23454;&#36341;&#32463;&#39564;&#65292;&#20351;&#29992;EJB&#30340;&#19994;&#21153;&#26041;&#27861;&#25509;&#21475;(Business Methods
Interface)&#27169;&#24335;&#65292;&#36825;&#26679;&#65292;&#36825;&#20010;EJB&#32452;&#20214;&#30340;&#26412;&#22320;&#25509;&#21475;&#23558;&#32487;&#25215;&#19968;&#20010;&#19981;&#21463;EJB&#35268;&#33539;&#32422;&#26463;&#30340;&#19994;&#21153;&#26041;&#27861;&#25509;&#21475;&#12290;&#35753;&#25105;&#20204;&#25226;&#36825;&#20010;&#19994;&#21153;&#26041;&#27861;&#25509;&#21475;&#31216;&#20026;
MyComponent&#12290;</p><pre class="programlisting">public interface MyComponent {
    ...
}</pre><p>&#20351;
&#29992;&#19994;&#21153;&#26041;&#27861;&#25509;&#21475;&#27169;&#24335;&#30340;&#19968;&#20010;&#20027;&#35201;&#21407;&#22240;&#26159;&#20026;&#20102;&#20445;&#35777;&#26412;&#22320;&#25509;&#21475;&#21644;bean&#30340;&#23454;&#29616;&#31867;&#20043;&#38388;&#30340;&#26041;&#27861;&#31614;&#21517;&#33258;&#21160;&#21516;&#27493;&#12290;&#21478;&#22806;&#19968;&#20010;&#21407;&#22240;&#26159;&#23427;&#20351;&#24471;&#25105;&#20204;&#26356;&#23481;&#26131;&#25913;&#29992;&#22522;&#20110;POJO(&#31616;&#21333;
Java&#23545;&#35937;)&#30340;&#26381;&#21153;&#23454;&#29616;&#26041;&#24335;&#65292;&#21482;&#35201;&#36825;&#26679;&#30340;&#25913;&#21464;&#26159;&#26377;&#24847;&#20041;&#30340;&#12290;&#24403;&#28982;&#65292;&#25105;&#20204;&#20063;&#38656;&#35201;&#23454;&#29616;&#26412;&#22320;Home&#25509;&#21475;&#65292;&#24182;&#25552;&#20379;&#19968;&#20010;Bean&#23454;&#29616;&#31867;&#65292;&#29992;&#23427;&#26469;&#23454;&#29616;&#25509;&#21475;<tt class="classname">SessionBean</tt>&#21644;&#19994;&#21153;&#26041;&#27861;&#25509;&#21475;<tt class="classname">MyComponent</tt>&#12290;&#29616;&#22312;&#20026;&#20102;&#25226;Web&#23618;&#30340;&#25511;&#21046;&#22120;&#21644;EJB&#30340;&#23454;&#29616;&#38142;&#25509;&#36215;&#26469;&#65292;&#25105;&#20204;&#21807;&#19968;&#35201;&#20889;&#30340;Java&#20195;&#30721;&#23601;&#26159;&#22312;&#25511;&#21046;&#22120;&#19978;&#21457;&#24067;&#19968;&#20010;&#31867;&#22411;&#20026;<tt class="classname">MyComponent</tt>&#30340;setter&#26041;&#27861;&#12290;&#36825;&#26679;&#23601;&#21487;&#20197;&#25226;&#36825;&#20010;&#24341;&#29992;&#20445;&#23384;&#22312;&#25511;&#21046;&#22120;&#30340;&#19968;&#20010;&#23454;&#20363;&#21464;&#37327;&#20013;&#12290;</p><pre class="programlisting">private MyComponent myComponent;

public void setMyComponent(MyComponent myComponent) {
    this.myComponent = myComponent;
}</pre><p>&#28982;&#21518;&#25105;&#20204;&#21487;&#20197;&#22312;&#25511;&#21046;&#22120;&#30340;&#20219;&#24847;&#19994;&#21153;&#26041;&#27861;&#37324;&#38754;&#20351;&#29992;&#36825;&#20010;&#23454;&#20363;&#21464;&#37327;&#12290;&#20551;&#35774;&#25105;&#20204;&#29616;&#22312;&#20174;Spring&#23481;&#22120;&#33719;&#24471;&#35813;&#25511;&#21046;&#22120;&#23545;&#35937;&#65292;&#25105;&#20204;&#23601;&#21487;&#20197;(&#22312;&#21516;&#19968;&#20010;&#19978;&#19979;&#25991;&#20013;)&#37197;&#32622;&#19968;&#20010;<tt class="literal">LocalStatelessSessionProxyFactoryBean</tt>&#30340;&#23454;&#20363;&#65292;&#20316;&#20026;EJB&#32452;&#20214;&#30340;&#20195;&#29702;&#23545;&#35937;&#12290;&#36825;&#20010;&#20195;&#29702;&#23545;&#35937;&#30340;&#37197;&#32622;&#65292;&#20197;&#21450;&#25511;&#21046;&#22120;&#23646;&#24615;<tt class="literal">myComponent</tt>&#30340;&#35774;&#32622;&#26159;&#20351;&#29992;&#19968;&#20010;&#37197;&#32622;&#39033;&#23436;&#25104;&#30340;&#65292;&#22914;&#19979;&#25152;&#31034;&#65306;</p><pre class="programlisting">&lt;bean id="myComponent"
      class="org.springframework.ejb.access.LocalStatelessSessionProxyFactoryBean"&gt;
  &lt;property name="jndiName" value="myJndiComponent"/&gt;
  &lt;property name="businessInterface" value="com.mycom.MyComponent"/&gt;
&lt;/bean&gt;

&lt;bean id="myController" class="com.mycom.myController"&gt;
  &lt;property name="myComponent" ref="myComponent"/&gt;
&lt;/bean&gt;</pre><p>&#36825;&#20123;&#30475;&#20284;&#31616;&#21333;&#30340;&#20195;&#30721;&#32972;&#21518;&#26377;&#24456;&#22810;&#22797;&#26434;&#30340;&#22788;&#29702;&#65292;&#21463;&#30410;&#20110;Spring&#30340;AOP&#26694;&#26550;&#65292;&#20320;&#29978;&#33267;&#19981;&#24517;&#30693;&#36947;AOP&#27010;&#24565;&#65292;&#23601;&#21487;&#20197;&#20139;&#29992;&#23427;&#30340;&#25104;&#26524;&#12290;Bean <tt class="literal">myComponent</tt>&#30340;&#23450;&#20041;&#21019;&#24314;&#20102;&#19968;&#20010;EJB&#32452;&#20214;&#30340;&#20195;&#29702;&#23545;&#35937;&#65292;&#23427;&#23454;&#29616;&#20102;&#19994;&#21153;&#26041;&#27861;&#25509;&#21475;&#12290;&#36825;&#20010;EJB&#32452;&#20214;&#30340;&#26412;&#22320;Home&#23545;&#35937;&#22312;&#21551;&#21160;&#30340;&#26102;&#20505;&#23601;&#34987;&#25918;&#21040;&#20102;&#32531;&#23384;&#20013;&#65292;&#25152;&#20197;&#21482;&#38656;&#35201;&#25191;&#34892;&#19968;&#27425;JNDI&#26597;&#25214;&#12290;&#27599;&#24403;EJB&#32452;&#20214;&#34987;&#35843;&#29992;&#30340;&#26102;&#20505;&#65292;&#36825;&#20010;&#20195;&#29702;&#23545;&#35937;&#23601;&#35843;&#29992;&#26412;&#22320;EJB&#32452;&#20214;&#30340;<tt class="literal">classname</tt>&#26041;&#27861;&#65292;&#24182;&#35843;&#29992;EJB&#32452;&#20214;&#19978;&#30456;&#24212;&#30340;&#19994;&#21153;&#26041;&#27861;&#12290;</p><p>
				The <tt class="literal">myController</tt> bean definition sets the
				<tt class="literal">myComponent</tt> property of the controller class to the
				EJB proxy.
			</p><p>&#22312;Bean <tt class="literal">myController</tt>&#30340;&#23450;&#20041;&#20013;&#65292;&#25511;&#21046;&#22120;&#31867;&#30340;&#23646;&#24615;<tt class="literal">myComponent</tt>&#30340;&#20540;&#34987;&#35774;&#32622;&#20026;&#19978;&#36848;&#30340;EJB&#20195;&#29702;&#23545;&#35937;&#12290;</p><p>
      	&#21478;&#19968;&#31181;&#36873;&#25321;&#65288;&#22312;&#36825;&#26679;&#30340;&#20195;&#29702;&#23450;&#20041;&#24456;&#22810;&#26102;&#65292;&#26356;&#21487;&#21462;&#65289;&#26159;&#20351;&#29992;&#22312;Spring&#30340;"jee"&#21629;&#21517;&#31354;&#38388;&#19979;&#30340;<tt class="literal">local-slsb</tt>&#37197;&#32622;&#20803;&#32032;
      </p><pre class="programlisting">&lt;jee:local-slsb id="myComponent" jndi-name="myJndiComponent"
      business-interface="com.mycom.MyComponent"/&gt;

&lt;bean id="myController" class="com.mycom.myController"&gt;
  &lt;property name="myComponent" ref="myComponent"/&gt;
&lt;/bean&gt;</pre><p>&#36825;&#31181;EJB&#32452;&#20214;&#35775;&#38382;&#26426;&#21046;&#22823;&#22823;&#31616;&#21270;&#20102;&#24212;&#29992;&#31243;&#24207;&#20195;&#30721;&#65306;Web&#23618;(&#25110;&#20854;&#20182;EJB&#23458;&#25143;&#31471;)&#30340;&#20195;&#30721;&#19981;&#20877;&#20381;&#36182;&#20110;EJB&#32452;&#20214;&#30340;&#20351;&#29992;&#12290;&#22914;&#26524;&#25105;&#20204;&#24819;&#25226;&#36825;&#20010;EJB&#30340;&#24341;&#29992;&#26367;&#25442;&#20026;&#19968;&#20010;POJO&#65292;&#25110;&#32773;&#26159;&#27169;&#25311;&#23545;&#35937;&#25110;&#20854;&#20182;&#27979;&#35797;&#26729;&#26550;&#65292;&#25105;&#20204;&#21482;&#38656;&#35201;&#31616;&#21333;&#22320;&#20462;&#25913;Bean <tt class="literal">myComponent</tt>&#30340;&#23450;&#20041;&#32780;&#19981;&#38656;&#20462;&#25913;&#20219;&#20309;Java&#20195;&#30721;&#65292;&#27492;&#22806;&#65292;&#25105;&#20204;&#20063;&#19981;&#24517;&#20877;&#22312;&#24212;&#29992;&#31243;&#24207;&#20013;&#32534;&#20889;&#20219;&#20309;JNDI&#26597;&#25214;&#25110;&#20854;&#23427;EJB&#30456;&#20851;&#30340;&#20195;&#30721;&#12290;</p><p>&#22312;&#23454;&#38469;&#24212;&#29992;&#20013;&#30340;&#35780;&#27979;&#21644;&#32463;&#39564;&#34920;&#26126;&#65292;&#36825;&#31181;&#26041;&#27861;&#65288;&#20351;&#29992;&#21453;&#23556;&#26469;&#35843;&#29992;&#30446;&#26631;EJB&#32452;&#20214;&#65289;&#30340;&#24615;&#33021;&#24320;&#38144;&#24456;&#23567;&#65292;&#19968;&#33324;&#20351;&#29992;&#20013;&#20960;&#20046;&#35273;&#23519;&#19981;&#20986;&#12290;&#34429;&#28982;&#22914;&#27492;&#65292;&#20173;&#35831;&#29282;&#35760;&#19981;&#35201;&#35843;&#29992;&#32454;&#31890;&#24230;EJB&#32452;&#20214;&#65292;&#22240;&#20026;&#24212;&#29992;&#26381;&#21153;&#22120;&#20013;EJB&#30340;&#22522;&#30784;&#26694;&#26550;&#27605;&#31455;&#20250;&#24102;&#26469;&#24615;&#33021;&#25439;&#22833;&#12290;</p><p>&#20851;&#20110;JNDI&#26597;&#25214;&#26377;&#19968;&#28857;&#38656;&#35201;&#29305;&#21035;&#27880;&#24847;&#12290;&#22312;Bean&#23481;&#22120;&#20013;&#65292;&#36825;&#20010;&#31867;&#36890;&#24120;&#26368;&#22909;&#29992;&#20316;&#21333;&#20214;(&#27809;&#29702;&#30001;&#20351;&#20043;&#25104;&#20026;&#21407;&#22411;)&#12290;&#19981;&#36807;&#65292;&#22914;&#26524;&#36825;&#20010;Bean&#23481;&#22120;&#20250;&#39044;&#20808;&#23454;&#20363;&#21270;&#21333;&#20214;(XML <tt class="classname">ApplicationContext</tt>&#30340;
&#20960;&#31181;&#21464;&#20307;&#23601;&#20250;&#36825;&#26679;)&#65292;&#24182;&#19988;&#23427;&#22312;EJB&#23481;&#22120;&#21152;&#36733;&#30446;&#26631;EJB&#21069;&#34987;&#21152;&#36733;&#65292;&#25105;&#20204;&#23601;&#20250;&#36935;&#21040;&#38382;&#39064;&#12290;&#22240;&#20026;JNDI&#26597;&#25214;&#20250;&#22312;&#35813;&#31867;&#30340;init&#26041;&#27861;&#20013;&#34987;&#25191;&#34892;&#28982;&#21518;&#32531;&#23384;&#32467;&#26524;&#65292;&#20294;&#26159;
&#27492;&#26102;EJB&#36824;&#27809;&#26377;&#34987;&#32465;&#23450;&#21040;&#30446;&#26631;&#20301;&#32622;&#12290;&#35299;&#20915;&#26041;&#26696;&#26159;&#19981;&#35201;&#39044;&#20808;&#23454;&#20363;&#21270;&#36825;&#20010;&#24037;&#21378;&#23545;&#35937;&#65292;&#32780;&#35753;&#23427;&#22312;&#31532;&#19968;&#27425;&#34987;&#29992;&#21040;&#30340;&#26102;&#20505;&#20877;&#21019;&#24314;&#12290;&#22312;XML&#23481;&#22120;&#20013;&#65292;&#36825;&#26159;&#36890;&#36807;&#23646;&#24615;<tt class="literal">lazy-init</tt>&#26469;&#25511;&#21046;&#30340;&#12290;</p><p>&#23613;&#31649;&#22823;&#37096;&#20998;Spring&#30340;&#29992;&#25143;&#19981;&#20250;&#23545;&#36825;&#20123;&#24863;&#20852;&#36259;&#65292;&#20294;&#37027;&#20123;&#23545;EJB&#36827;&#34892;AOP&#32534;&#31243;&#24037;&#20316;&#30340;&#29992;&#25143;&#38656;&#35201;&#30475;<tt class="classname">LocalSlsbInvokerInterceptor</tt>&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="ejb-access-remote"></a>18.2.3.&nbsp;&#35775;&#38382;&#36828;&#31243;SLSB</h3></div></div><div></div></div><p>&#22522;&#26412;&#19978;&#35775;&#38382;&#36828;&#31243;EJB&#19982;&#35775;&#38382;&#26412;&#22320;EJB&#24046;&#21035;&#19981;&#22823;&#65292;&#21482;&#26159;&#21069;&#32773;&#20351;&#29992;&#30340;&#26159;<tt class="classname">SimpleRemoteStatelessSessionProxyFactoryBean</tt>&#25110;&#32773;<tt class="literal">jee:remote-slsb</tt>&#12290;&#24403;&#28982;&#65292;&#26080;&#35770;&#26159;&#21542;&#20351;&#29992;Spring&#65292;&#36828;&#31243;&#35843;&#29992;&#30340;&#35821;&#20041;&#37117;&#30456;&#21516;&#65307;&#23545;&#20110;&#20351;&#29992;&#22330;&#26223;&#21644;&#38169;&#35823;&#22788;&#29702;&#26469;&#35828;&#65292;&#35843;&#29992;&#21478;&#19968;&#21488;&#35745;&#31639;&#26426;&#19978;&#30340;&#34394;&#25311;&#26426;&#20013;&#23545;&#35937;&#30340;&#26041;&#27861;&#21644;&#26412;&#22320;&#35843;&#29992;&#20250;&#26377;&#25152;&#19981;&#21516;&#12290;</p><p>&#30456;&#27604;&#19981;&#20351;&#29992;Spring&#26041;&#24335;&#30340;EJB&#23458;&#25143;&#31471;&#30456;&#27604;&#65292;Spring&#30340;EJB&#23458;&#25143;&#31471;&#26377;&#22810;&#20010;&#22909;&#22788;&#12290;&#36890;&#24120;&#22914;&#26524;&#35201;&#24819;&#33021;&#38543;&#24847;&#30340;&#22312;&#26412;&#22320;&#21644;&#36828;&#31243;EJB&#35843;&#29992;&#20043;&#38388;&#20999;&#25442;EJB&#23458;&#25143;&#31471;&#20195;&#30721;&#65292;&#26159;&#20250;&#20135;&#29983;&#38382;&#39064;&#30340;&#12290;&#36825;&#26159;&#22240;&#20026;&#36828;&#31243;&#25509;&#21475;&#30340;&#26041;&#27861;&#38656;&#35201;&#22768;&#26126;&#20182;&#20204;&#25243;&#20986;&#30340;<tt class="classname">RemoteException</tt>&#26041;
&#27861;
&#65292;&#28982;&#21518;&#23458;&#25143;&#31471;&#20195;&#30721;&#24517;&#39035;&#22788;&#29702;&#36825;&#31181;&#24322;&#24120;&#65292;&#20294;&#26159;&#26412;&#22320;&#25509;&#21475;&#30340;&#26041;&#27861;&#21364;&#19981;&#38656;&#35201;&#36825;&#26679;&#12290;&#22914;&#26524;&#35201;&#25226;&#38024;&#23545;&#26412;&#22320;EJB&#30340;&#20195;&#30721;&#25913;&#20026;&#35775;&#38382;&#36828;&#31243;EJB&#65292;&#23601;&#38656;&#35201;&#20462;&#25913;&#23458;&#25143;&#31471;&#20195;&#30721;&#65292;&#22686;&#21152;&#22788;&#29702;
&#36828;&#31243;&#24322;&#24120;&#30340;&#20195;&#30721;&#65292;&#21453;&#20043;&#35201;&#20040;&#20445;&#30041;&#36825;&#20123;&#29992;&#19981;&#19978;&#30340;&#36828;&#31243;&#24322;&#24120;&#22788;&#29702;&#20195;&#30721;&#35201;&#20040;&#23601;&#38656;&#35201;&#36827;&#34892;&#20462;&#25913;&#20197;&#21435;&#38500;&#36825;&#20123;&#24322;&#24120;&#22788;&#29702;&#20195;&#30721;&#12290;&#20351;&#29992;Spring&#30340;&#36828;&#31243;EJB&#20195;&#29702;&#65292;&#25105;&#20204;&#23601;&#19981;&#20877;&#38656;
&#35201;&#22312;&#19994;&#21153;&#26041;&#27861;&#25509;&#21475;&#21644;EJB&#30340;&#23454;&#29616;&#20195;&#30721;&#20013;&#22768;&#26126;&#35201;&#25243;&#20986;&#30340;<tt class="classname">RemoteException</tt>&#65292;&#32780;&#26159;&#23450;&#20041;&#19968;&#20010;&#30456;&#20284;&#30340;&#36828;&#31243;&#25509;&#21475;&#65292;&#21807;&#19968;&#19981;&#21516;&#23601;&#26159;&#23427;&#25243;&#20986;&#30340;&#26159;<tt class="classname">RemoteException</tt>&#65292; &#28982;&#21518;&#20132;&#32473;&#20195;&#29702;&#23545;&#35937;&#21435;&#21160;&#24577;&#30340;&#21327;&#35843;&#36825;&#20004;&#20010;&#25509;&#21475;&#12290;&#20063;&#23601;&#26159;&#35828;&#65292;&#23458;&#25143;&#31471;&#20195;&#30721;&#19981;&#20877;&#38656;&#35201;&#19982;
<tt class="classname">RemoteException</tt>&#36825;&#20010;checked exception&#25171;&#20132;&#36947;&#65292;&#23454;&#38469;&#19978;&#22312;EJB&#35843;&#29992;&#20013;&#34987;&#25243;&#20986;&#30340;<tt class="classname">RemoteException</tt>&#37117;&#23558;&#34987;&#20197;unchecked exception <tt class="classname">RemoteAccessException</tt>&#30340;&#26041;&#24335;&#37325;&#26032;&#25243;&#20986;&#65292;&#23427;&#26159;<tt class="classname">RuntimeException</tt>&#30340;&#19968;&#20010;&#23376;&#31867;&#12290;&#36825;&#26679;&#30446;&#26631;&#26381;&#21153;&#23601;&#21487;&#20197;&#22312;&#26412;&#22320;EJB&#25110;&#36828;&#31243;EJB(&#29978;&#33267;POJO)&#20043;&#38388;&#38543;&#24847;&#22320;&#20999;&#25442;&#65292;&#23458;&#25143;&#31471;&#19981;&#38656;&#35201;&#20851;&#24515;&#29978;&#33267;&#26681;&#26412;&#19981;&#20250;&#35273;&#23519;&#21040;&#36825;&#31181;&#20999;&#25442;&#12290;&#24403;&#28982;&#65292;&#36825;&#20123;&#37117;&#26159;&#21487;&#36873;&#30340;&#65292;&#27809;&#26377;&#20160;&#20040;&#38459;&#27490;&#20320;&#22312;&#20320;&#30340;&#19994;&#21153;&#25509;&#21475;&#20013;&#22768;&#26126;<tt class="classname">RemoteExceptions</tt>&#24322;&#24120;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="ejb-access-ejb2-ejb3"></a>18.2.4.&nbsp;Accessing EJB 2.x SLSBs versus EJB 3 SLSBs</h3></div></div><div></div></div><p>
         &#36890;&#36807;Spring&#21487;&#20197;&#36879;&#26126;&#30340;&#35775;&#38382;EJB2.X&#21644;EJB3&#30340; Session bean&#12290;Spring&#30340;EJB&#35775;&#38382;&#22120;&#21253;&#21547;<tt class="literal">jee:local-slsb</tt>&#21644;<tt class="literal">jee:remote-slsb</tt>&#65292;&#21487;&#22312;&#36816;&#34892;&#26102;&#26080;&#32541;&#36830;&#25509;&#23454;&#38469;&#32452;&#20214;&#12290;
         &#22914;&#26524;&#26159;EJB 2.x&#24418;&#24335;&#30340;&#65292;&#36825;&#20123;&#35775;&#38382;&#22120;&#20250;&#35843;&#29992;home&#25509;&#21475;&#65292;&#22914;&#26524;&#26159;EJB3&#24418;&#24335;&#30340;&#24182;&#19988;&#27809;&#26377;&#21487;&#29992;&#30340;home&#25509;&#21475;&#65292;&#23601;&#20250;&#30452;&#25509;&#35843;&#29992;&#32452;&#20214;&#12290;
      </p><p>
        &#27880;&#24847;:&#21363;&#20351;&#26159;EJB3 session bean&#65292;&#20320;&#20063;&#23436;&#20840;&#21487;&#20197;&#20351;&#29992;<tt class="classname">JndiObjectFactoryBean</tt> / <tt class="literal">jee:jndi-lookup</tt>
        &#22240;&#20026;&#24456;&#22810;&#21487;&#29992;&#30340;&#32452;&#20214;&#24341;&#29992;&#24456;&#22810;&#26159;&#26292;&#38706;&#20026;JNDI&#26597;&#25214;&#30340;&#12290;&#26174;&#24335;&#30340;&#23450;&#20041;<tt class="literal">jee:local-slsb</tt>
        / <tt class="literal">jee:remote-slsb</tt>&#26597;&#25214;&#25552;&#20379;&#20102;&#19968;&#33268;&#24615;&#21644;&#26356;&#28165;&#26970;&#30340;EJB&#35775;&#38382;&#37197;&#32622;&#12290;
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="ejb-implementation"></a>18.3.&nbsp;&#20351;&#29992;Spring&#25552;&#20379;&#30340;&#36741;&#21161;&#31867;&#23454;&#29616;EJB&#32452;&#20214;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="ejb-implementation-ejb2"></a>18.3.1.&nbsp;EJB 2.x base classes</h3></div></div><div></div></div><p>Spring&#20063;&#25552;&#20379;&#20102;&#19968;&#20123;&#36741;&#21161;&#31867;&#26469;&#20026;EJB&#32452;&#20214;&#30340;&#23454;&#29616;&#25552;&#20379;&#20415;&#21033;&#12290;&#23427;&#20204;&#26159;&#20026;&#20102;&#20513;&#23548;&#19968;&#20123;&#22909;&#30340;&#23454;&#36341;&#32463;&#39564;&#65292;&#27604;&#22914;&#25226;&#19994;&#21153;&#36923;&#36753;&#25918;&#22312;&#22312;EJB&#23618;&#20043;&#21518;&#30340;POJO&#20013;&#23454;&#29616;&#65292;&#21482;&#25226;&#20107;&#21153;&#21010;&#20998;&#21644;&#36828;&#31243;&#35843;&#29992;&#36825;&#20123;&#32844;&#36131;&#30041;&#32473;EJB&#12290;</p><p>&#35201;&#23454;&#29616;&#19968;&#20010;&#26080;&#29366;&#24577;&#25110;&#26377;&#29366;&#24577;&#30340;Session Bean&#65292;&#25110;&#28040;&#24687;&#39537;&#21160;Bean&#65292;&#20320;&#21482;&#38656;&#35201;&#20174;<tt class="classname">AbstractStatelessSessionBean</tt>&#12289;<tt class="classname">AbstractStatefulSessionBean</tt>&#21644;<tt class="classname">AbstractMessageDrivenBean</tt>/<tt class="classname">AbstractJmsMessageDrivenBean</tt>&#20998;&#21035;&#32487;&#25215;&#20320;&#30340;&#23454;&#29616;&#31867;&#12290;</p><p>&#32771;&#34385;&#36825;&#20010;&#26080;&#29366;&#24577;Session bean&#30340;&#20363;&#23376;&#65306;&#23454;&#38469;&#19978;&#25105;&#20204;&#25226;&#26080;&#29366;&#24577;Session Bean&#30340;&#23454;&#29616;&#22996;&#25176;&#32473;&#19968;&#20010;&#26222;&#36890;&#30340;Java&#26381;&#21153;&#23545;&#35937;&#12290;&#19994;&#21153;&#25509;&#21475;&#30340;&#23450;&#20041;&#22914;&#19979;&#65306;</p><pre class="programlisting">public interface MyComponent {
    public void myMethod(...);
    ...
}</pre><p>&#36825;&#26159;&#31616;&#21333;Java&#23545;&#35937;&#30340;&#23454;&#29616;&#65306;</p><pre class="programlisting">public class MyComponentImpl implements MyComponent {
    public String myMethod(...) {
        ...
    }
    ...
}</pre><p>&#26368;&#21518;&#26159;&#26080;&#29366;&#24577;Session Bean&#33258;&#36523;&#65306;</p><pre class="programlisting">public class MyFacadeEJB extends AbstractStatelessSessionBean
        implements MyFacadeLocal {

    private MyComponent myComp;

    /**
     * Obtain our POJO service object from the BeanFactory/ApplicationContext
     * @see org.springframework.ejb.support.AbstractStatelessSessionBean#onEjbCreate()
     */
    protected void onEjbCreate() throws CreateException {
        myComp = (MyComponent) getBeanFactory().getBean(
            ServicesConstants.CONTEXT_MYCOMP_ID);
    }

    // for business method, delegate to POJO service impl.
    public String myFacadeMethod(...) {
        return myComp.myMethod(...);
    }
    ...
}</pre><p>&#32570;&#30465;&#24773;&#20917;&#19979;&#65292;Spring EJB&#25903;&#25345;&#31867;&#30340;&#22522;&#31867;&#22312;&#20854;&#29983;&#21629;&#21608;&#26399;&#20013;&#23558;&#21019;&#24314;&#24182;&#21152;&#36733;&#19968;&#20010;Spring IoC&#23481;&#22120;&#20379;EJB&#20351;&#29992;(&#27604;&#22914;&#20687;&#21069;&#38754;&#33719;&#24471;POJO&#26381;&#21153;&#23545;&#35937;&#30340;&#20195;&#30721;)&#12290;&#21152;&#36733;&#30340;&#24037;&#20316;&#26159;&#36890;&#36807;&#19968;&#20010;&#31574;&#30053;&#23545;&#35937;&#23436;&#25104;&#30340;&#65292;&#23427;&#26159;<tt class="classname">BeanFactoryLocator</tt>&#30340;&#23376;&#31867;&#12290;
&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#23454;&#38469;&#20351;&#29992;&#30340;<tt class="classname">BeanFactoryLocator</tt>&#30340;&#23454;&#29616;&#31867;&#26159;<tt class="classname">ContextJndiBeanFactoryLocator</tt>&#65292;&#23427;&#26681;&#25454;&#19968;&#20010;&#34987;&#25351;&#23450;&#20026;JNDI&#29615;&#22659;&#21464;&#37327;&#30340;&#36164;&#28304;&#20301;&#32622;&#26469;&#21019;&#24314;&#19968;&#20010;ApplicationContext&#23545;&#35937;(&#23545;&#20110;EJB&#31867;&#65292;&#36335;&#24452;&#26159;
<tt class="literal">java:comp/env/ejb/BeanFactoryPath</tt>)&#12290;&#22914;&#26524;&#38656;&#35201;&#25913;&#21464;BeanFactory&#25110;ApplicationContext&#30340;&#36733;&#20837;&#31574;&#30053;&#65292;&#25105;&#20204;&#21487;&#20197;&#22312;
<tt class="literal">setSessionContext()</tt>&#26041;&#27861;&#35843;&#29992;&#25110;&#22312;&#20855;&#20307;EJB&#23376;&#31867;&#30340;&#26500;&#36896;&#20989;&#25968;&#20013;&#35843;&#29992;<tt class="literal">setBeanFactoryLocator()</tt>&#26041;&#27861;&#26469;&#35206;&#30422;&#40664;&#35748;&#20351;&#29992;&#30340;
<tt class="classname">BeanFactoryLocator</tt>&#23454;&#29616;&#31867;&#12290;&#20855;&#20307;&#32454;&#33410;&#35831;&#21442;&#32771;JavaDoc&#12290;
		</p><p>&#22914;JavaDoc&#20013;&#25152;&#36848;&#65292;&#26377;&#29366;&#24577;Session Bean&#22312;&#20854;&#29983;&#21629;&#21608;&#26399;&#20013;&#23558;&#20250;&#34987;&#38045;&#21270;&#24182;&#37325;&#26032;&#28608;&#27963;&#65292;&#30001;&#20110;(&#19968;&#33324;&#24773;&#20917;&#19979;)&#20351;&#29992;&#20102;&#19968;&#20010;&#19981;&#21487;&#20018;&#34892;&#21270;&#30340;&#23481;&#22120;&#23454;&#20363;&#65292;&#19981;&#21487;&#20197;&#34987;EJB&#23481;&#22120;&#20445;&#23384;&#65292;
&#25152;&#20197;&#36824;&#38656;&#35201;&#25163;&#21160;&#22312;<tt class="literal">ejbPassivate</tt>&#21644;<tt class="literal">ejbActivate</tt>
&#36825;&#20004;&#20010;&#26041;&#27861;&#20013;&#20998;&#21035;&#35843;&#29992;<tt class="literal">unloadBeanFactory()</tt>&#21644;<tt class="literal">loadBeanFactory</tt>&#65292;
&#25165;&#33021;&#22312;&#38045;&#21270;&#25110;&#28608;&#27963;&#30340;&#26102;&#20505;&#21368;&#36733;&#25110;&#36733;&#20837;&#12290;</p><p>&#26377;&#20123;&#24773;&#20917;&#19979;&#65292;&#35201;&#36733;&#20837;ApplicationContext&#20197;&#20351;&#29992;EJB&#32452;&#20214;&#65292;<tt class="classname">ContextJndiBeanFactoryLocator</tt>&#30340;&#40664;&#35748;&#23454;&#29616;&#22522;&#26412;&#19978;&#36275;&#22815;&#20102;&#65292;
&#19981;&#36807;&#65292;&#24403;<tt class="classname">ApplicationContext</tt>&#38656;&#35201;&#36733;&#20837;&#22810;&#20010;bean&#65292;&#25110;&#36825;&#20123;bean&#21021;&#22987;&#21270;&#25152;&#38656;&#30340;&#26102;&#38388;&#25110;&#20869;&#23384;
&#24456;&#22810;&#30340;&#26102;&#20505;(&#20363;&#22914;Hibernate&#30340;<tt class="classname">SessionFactory</tt>&#30340;&#21021;&#22987;&#21270;)&#65292;&#23601;&#26377;&#21487;&#33021;&#20986;&#38382;&#39064;&#65292;&#22240;&#20026;
&#27599;&#20010;EJB&#32452;&#20214;&#37117;&#26377;&#33258;&#24049;&#30340;&#21103;&#26412;&#12290;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#29992;&#25143;&#20250;&#24819;&#37325;&#36733;<tt class="classname">ContextJndiBeanFactoryLocator</tt>&#30340;&#40664;&#35748;&#23454;&#29616;&#65292;&#24182;&#20351;&#29992;&#20854;&#23427;
<tt class="classname">BeanFactoryLocator</tt>&#30340;&#21464;&#20307;&#65292;&#20363;&#22914;<tt class="classname">ContextSingletonBeanFactoryLocator</tt>
&#65292;&#20182;&#20204;&#21487;&#20197;&#36733;&#20837;&#24182;&#22312;&#22810;&#20010;EJB&#25110;&#32773;&#20854;&#23458;&#25143;&#31471;&#38388;&#20849;&#20139;&#19968;&#20010;&#23481;&#22120;&#12290;&#36825;&#26679;&#20570;&#30456;&#24403;&#31616;&#21333;&#65292;&#21482;&#38656;&#35201;&#32473;EJB&#28155;&#21152;&#31867;&#20284;&#20110;&#22914;&#19979;&#30340;&#20195;&#30721;&#65306;</p><pre class="programlisting">   /**
    * Override default BeanFactoryLocator implementation
    * @see javax.ejb.SessionBean#setSessionContext(javax.ejb.SessionContext)
    */
   public void setSessionContext(SessionContext sessionContext) {
       super.setSessionContext(sessionContext);
       setBeanFactoryLocator(ContextSingletonBeanFactoryLocator.getInstance());
       setBeanFactoryLocatorKey(ServicesConstants.PRIMARY_CONTEXT_ID);
   }</pre><p>&#28982;&#21518;&#38656;&#35201;&#21019;&#24314;&#19968;&#20010;&#21517;&#20026;<tt class="literal">beanRefContext.xml</tt>&#30340;bean&#23450;&#20041;&#25991;&#20214;&#12290;&#36825;&#20010;&#25991;&#20214;&#23450;&#20041;&#20102;EJB&#20013;&#25152;&#26377;&#21487;&#33021;&#29992;&#21040;&#30340;bean&#24037;&#21378;(&#36890;&#24120;&#20197;&#24212;&#29992;&#19978;&#19979;&#25991;&#30340;&#24418;&#24335;)&#12290;&#35768;&#22810;&#24773;&#20917;&#19979;&#65292;&#36825;&#20010;&#25991;&#20214;&#21482;&#21253;&#25324;&#19968;&#20010;bean&#30340;&#23450;&#20041;&#65292;&#22914;&#19979;&#25152;&#31034;(&#25991;&#20214;<tt class="literal">businessApplicationContext.xml</tt>&#21253;&#25324;&#20102;&#25152;&#26377;&#19994;&#21153;&#26381;&#21153;POJO&#30340;bean&#23450;&#20041;)&#65306;</p><pre class="programlisting">&lt;beans&gt;
    &lt;bean id="businessBeanFactory" class="org.springframework.context.support.ClassPathXmlApplicationContext"&gt;
        &lt;constructor-arg value="businessApplicationContext.xml" /&gt;
    &lt;/bean&gt;
&lt;/beans&gt;</pre><p>&#19978;&#20363;&#20013;&#65292;&#24120;&#37327;<tt class="literal">ServicesConstants.PRIMARY_CONTEXT_ID</tt>&#23450;&#20041;&#22914;&#19979;&#65306; </p><pre class="programlisting">public static final String ServicesConstants.PRIMARY_CONTEXT_ID = "businessBeanFactory";</pre><p><tt class="classname">BeanFactoryLocator</tt>&#21644;&#31867;<tt class="classname">ContextSingletonBeanFactoryLocator</tt>&#30340;&#26356;&#22810;&#20351;&#29992;&#20449;&#24687;&#35831;&#20998;&#21035;&#26597;&#30475;&#20182;&#20204;&#21508;&#33258;&#30340;Javadoc&#25991;&#26723;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="ejb-implementation-ejb3"></a>18.3.2.&nbsp;EJB 3 &#27880;&#20837;&#25318;&#25130;</h3></div></div><div></div></div><p>
         &#23545;EJB3 Session bean&#21644;Message-Driven Bean&#26469;&#35828;, Spring&#22312;EJB&#32452;&#20214;&#31867;
        <tt class="classname">org.springframework.ejb.interceptor.SpringBeanAutowiringInterceptor</tt>&#20013;&#25552;&#20379;&#20102;&#23454;&#29992;&#30340;&#25318;&#25130;&#22120;&#26469;&#35299;&#26512;Spring2.5&#30340;&#27880;&#35299;<tt class="literal">@Autowired</tt>&#12290;
         &#36825;&#20010;&#25318;&#25130;&#22120;&#30340;&#20351;&#29992;&#26377;&#20004;&#31181;&#26041;&#24335;&#65292;&#21487;&#20197;&#22312;EJB&#32452;&#20214;&#31867;&#37324;&#20351;&#29992;<font color="red">&lt;code&gt;@Interceptors&lt;/code&gt;</font>&#27880;&#35299;&#65292;&#20063;&#21487;&#20197;&#22312;EJB&#37096;&#32626;&#25551;&#36848;&#25991;&#20214;&#20013;&#20351;&#29992;XML&#20803;&#32032;<tt class="literal">interceptor-binding</tt>&#12290;
      </p><pre class="programlisting">@Stateless
@Interceptors(SpringBeanAutowiringInterceptor.class)
public class MyFacadeEJB implements MyFacadeLocal {

    // automatically injected with a matching Spring bean
    @Autowired
    private MyComponent myComp;

    // for business method, delegate to POJO service impl.
    public String myFacadeMethod(...) {
        return myComp.myMethod(...);
    }
    ...
}</pre><p>
        <tt class="classname">SpringBeanAutowiringInterceptor</tt> &#40664;&#35748;&#24773;&#20917;&#19979;&#26159;&#20174;<tt class="classname">ContextSingletonBeanFactoryLocator</tt>&#33719;&#24471;&#30446;&#26631;bean&#30340;&#65292;&#21518;&#32773;&#23450;&#20041;&#22312;<tt class="literal">beanRefContext.xml</tt>&#25991;&#20214;&#20013;&#12290;&#36890;&#24120;&#24773;&#20917;&#19979;&#65292;&#26368;&#22909;&#20351;&#29992;&#21333;&#29420;&#30340;&#19978;&#19979;&#25991;&#23450;&#20041;&#65292;&#24182;&#19988;&#26681;&#25454;&#31867;&#22411;&#32780;&#19981;&#26159;&#21517;&#31216;&#26469;&#33719;&#24471;&#12290;&#28982;&#32780;&#65292;&#22914;&#26524;&#20320;&#38656;&#35201;&#22312;&#22810;&#20010;&#19978;&#19979;&#25991;&#23450;&#20041;&#20013;&#20999;&#25442;&#65292;&#37027;&#20040;&#23601;&#38656;&#35201;&#19968;&#20010;&#29305;&#23450;&#30340;&#23450;&#20301;&#38190;&#12290;&#36825;&#20010;&#23450;&#20301;&#38190;&#65288;&#20363;&#22914;&#23450;&#20041;&#22312;<tt class="literal">beanRefContext.xml</tt>&#20013;&#30340;&#19978;&#19979;&#25991;&#21517;&#31216;&#65289;&#21487;&#20197;&#36890;&#36807;&#20197;&#19979;&#20004;&#31181;&#26041;&#24335;&#26469;&#26126;&#30830;&#30340;&#25351;&#23450;&#12290;&#19968;&#31181;&#26041;&#24335;&#26159;&#22312;&#23450;&#21046;&#30340;<tt class="classname">SpringBeanAutowiringInterceptor</tt>&#23376;&#31867;&#20013;&#37325;&#20889;<tt class="literal">getBeanFactoryLocatorKey</tt>&#26041;&#27861;&#12290;
      </p><p>
        &#21478;&#19968;&#31181;&#26041;&#24335;&#26159;&#37325;&#20889;<tt class="classname">SpringBeanAutowiringInterceptor</tt>&#30340;
        <tt class="literal">getBeanFactory</tt> &#26041;&#27861;&#65292;&#20363;&#22914;&#20174;&#23450;&#21046;&#25903;&#25345;&#31867;&#20013;&#33719;&#24471;&#19968;&#20010;&#20849;&#20139;&#30340;<tt class="interfacename">ApplicationContext</tt>&#12290;
      </p></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="jms"></a>Chapter&nbsp;19.&nbsp;JMS (Java Message Service)</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="jms-introduction"></a>19.1.&nbsp;&#31616;&#20171;</h2></div></div><div></div></div><p>Spring&#25552;&#20379;&#20102;&#19968;&#20010;&#29992;&#20110;&#31616;&#21270;JMS API&#20351;&#29992;&#30340;&#25277;&#35937;&#26694;&#26550;&#65292;&#24182;&#19988;&#23545;&#29992;&#25143;&#23631;&#34109;&#20102;JMS API&#20013;1.0.2&#21644;1.1&#29256;&#26412;&#30340;&#24046;&#24322;&#12290;</p><p>JMS&#30340;&#21151;&#33021;&#22823;&#33268;&#19978;&#20998;&#20026;&#20004;&#22359;&#65292;&#21483;&#20570;&#28040;&#24687;&#21046;&#36896;&#21644;&#28040;&#24687;&#28040;&#32791;&#12290;<tt class="classname">JmsTemplate</tt> &#29992;&#20110;&#21046;&#36896;&#28040;&#24687;&#21644;&#21516;&#27493;&#28040;&#24687;&#25509;&#25910;&#12290;&#21644;Java EE&#30340;&#20107;&#20214;&#39537;&#21160;Bean&#39118;&#26684;&#31867;&#20284;&#65292;&#23545;&#20110;&#24322;&#27493;&#25509;&#25910;&#28040;&#24687;&#65292;Spring&#25552;&#20379;&#20102;&#19968;&#20123;&#28040;&#24687;&#20390;&#21548;&#23481;&#22120;&#26469;&#21019;&#24314;&#28040;&#24687;&#39537;&#21160;&#30340;POJO&#65288;MDP&#65289;&#12290; 
	</p><div class="sidebar"><p class="title"><b>&#28040;&#24687;&#22495;&#30340;&#32479;&#19968;</b></p><p>JMS&#35268;&#33539;&#26377;&#20004;&#20010;&#20027;&#35201;&#30340;&#29256;&#26412;&#65292;1.0.2&#21644;1.1&#12290;</p><p>JMS1.0.2
&#23450;&#20041;&#20102;&#20004;&#31181;&#28040;&#24687;&#22495;&#65292;&#28857;&#23545;&#28857;&#65288;&#38431;&#21015;&#65289;&#21644;&#21457;&#24067;/&#35746;&#38405;&#65288;&#20027;&#39064;&#65289;&#12290;JMS
1.0.2&#30340;API&#20026;&#27599;&#20010;&#28040;&#24687;&#22495;&#25552;&#20379;&#20102;&#19968;&#20010;&#24179;&#34892;&#30340;&#31867;&#23618;&#27425;&#32467;&#26500;&#12290;&#23548;&#33268;&#23458;&#25143;&#31471;&#24212;&#29992;&#21482;&#33021;&#20351;&#29992;&#29305;&#23450;&#28040;&#24687;&#22495;&#30340;JMS API&#12290;JMS
1.1&#24341;&#36827;&#20102;&#32479;&#19968;&#28040;&#24687;&#22495;&#30340;&#27010;&#24565;&#20351;&#36825;&#20004;&#31181;&#28040;&#24687;&#22495;&#20043;&#38388;&#21151;&#33021;&#21644;&#23458;&#25143;&#31471;API&#30340;&#24046;&#21035;&#23613;&#21487;&#33021;&#23567;&#12290;&#20030;&#20010;&#24050;&#28040;&#38500;&#30340;&#21151;&#33021;&#24046;&#24322;&#30340;&#20363;&#23376;&#65292;&#22914;&#26524;&#20320;&#20351;&#29992;&#30340;&#26159;JMS
1.1&#30340;&#28040;&#24687;&#20379;&#24212;&#32773;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;&#21516;&#19968;&#20010; <tt class="literal">Session</tt> &#20107;&#21153;&#24615;&#22320;&#22312;&#19968;&#20010;&#22495;&#28040;&#32791;&#20102;&#19968;&#20010;&#28040;&#24687;&#21518;&#24182;&#19988;&#22312;&#21478;&#19968;&#20010;&#22495;&#20013;&#20135;&#29983;&#19968;&#20010;&#28040;&#24687;&#12290; 
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>JMS
1.1&#30340;&#35268;&#33539;&#21457;&#24067;&#20110;2002&#24180;4&#26376;&#65292;&#24182;&#19988;&#22312;2003&#24180;11&#26376;&#25104;&#20026;J2EE
1.4&#30340;&#19968;&#20010;&#32452;&#25104;&#37096;&#20998;&#65292;&#32467;&#26524;&#65292;&#29616;&#22312;&#22522;&#20110;J2EE1.3&#30340;&#24212;&#29992;&#26381;&#21153;&#22120;&#36824;&#22312;&#22823;&#37327;&#20351;&#29992;&#65288;&#20363;&#22914;BEA WebLogic 8.1&#21644;IBM WebSphere
5.1)&#65289;&#65292;&#23427;&#20204;&#21482;&#25903;&#25345;JMS 1.0.2&#30340;&#35268;&#33539;&#12290; </p></td></tr></tbody></table></div></div><p><tt class="literal">org.springframework.jms.core</tt> &#21253;&#25552;&#20379;&#20351;&#29992;JMS&#30340;&#26680;&#24515;&#21151;&#33021;&#12290;
    &#23601;&#35937;&#20026;JDBC&#25552;&#20379;&#30340; <tt class="literal">JdbcTemplate</tt>
&#19968;&#26679;&#65292;&#23427;&#25552;&#20379;&#20102;JMS&#27169;&#26495;&#31867;&#26469;&#22788;&#29702;&#36164;&#28304;&#30340;&#21019;&#24314;&#21644;&#37322;&#25918;&#20197;&#31616;&#21270;JMS&#30340;&#20351;&#29992;&#12290;Spring&#27169;&#26495;&#31867;&#30340;&#20844;&#20849;&#35774;&#35745;&#21407;&#21017;&#23601;&#26159;&#36890;&#36807;&#25552;&#20379;&#21161;&#25163;&#26041;&#27861;&#21435;&#25191;&#34892;&#20844;&#20849;&#30340;&#25805;&#20316;&#65292;&#24182;&#23558;&#23454;
&#38469;&#30340;&#22788;&#29702;&#20219;&#21153;&#22996;&#27966;&#21040;&#29992;&#25143;&#23454;&#29616;&#30340;&#22238;&#35843;&#25509;&#21475;&#19978;&#65292;&#20174;&#32780;&#23436;&#25104;&#26356;&#22797;&#26434;&#30340;&#25805;&#20316;&#12290;JMS&#27169;&#26495;&#20063;&#36981;&#24490;&#36825;&#26679;&#30340;&#35774;&#35745;&#21407;&#21017;&#12290;&#36825;&#20123;&#31867;&#25552;&#20379;&#20247;&#22810;&#20415;&#21033;&#30340;&#26041;&#27861;&#26469;&#21457;&#36865;&#28040;&#24687;&#12289;&#21516;&#27493;&#25509;&#25910;&#28040;&#24687;&#12289;
&#20351;&#29992;&#25143;&#21487;&#20197;&#25509;&#35302;&#21040;JMS session&#21644;&#28040;&#24687;&#20135;&#29983;&#32773;&#12290; </p><p><tt class="literal">org.springframework.jms.support</tt>
&#21253;&#25552;&#20379;JMSException&#30340;&#36716;&#25442;&#21151;&#33021;&#12290;&#23427;&#23558;&#21463;&#25511;&#30340;
JMSException&#24322;&#24120;&#23618;&#27425;&#36716;&#25442;&#21040;&#19968;&#20010;&#23545;&#24212;&#30340;&#38750;&#21463;&#25511;&#24322;&#24120;&#23618;&#27425;&#12290;&#20219;&#20309;&#21463;&#25511;javax.jms.JMSException&#24322;&#24120;&#30340;&#23376;&#31867;&#37117;&#34987;&#21253;&#35013;&#22312;&#38750;&#21463;&#25511;
UncategorizedJmsException&#24322;&#24120;&#37324;&#12290; </p><p><tt class="literal">org.springframework.jms.support.converter</tt> &#21253;&#25552;&#20379;&#19968;&#20010; <tt class="interfacename">MessageConverter</tt> &#29992;&#26469;&#25277;&#35937;Java&#23545;&#35937;&#21644;JMS&#28040;&#24687;&#20043;&#38388;&#30340;&#36716;&#25442;&#25805;&#20316;&#12290;
    </p><p>
         <tt class="literal">org.springframework.jms.support.destination</tt> &#21253;&#20026;&#31649;&#29702;JMS&#30446;&#30340;&#22320;&#25552;&#20379;&#22810;&#31181;&#31574;&#30053;&#65292;&#20363;&#22914;&#20026;&#23384;&#20648;&#22312;JNDI&#20013;&#30340;&#30446;&#30340;&#22320;&#25552;&#20379;&#19968;&#20010;&#26381;&#21153;&#23450;&#20301;&#22120;&#12290; 
    </p><p>&#26368;&#21518;&#65292;<tt class="literal">org.springframework.jms.connection</tt> &#21253;&#25552;&#20379;&#19968;&#20010;&#36866;&#21512;&#22312;&#29420;&#31435;&#24212;&#29992;&#20013;&#20351;&#29992;&#30340;
<tt class="classname">ConnectionFactory</tt> &#30340;&#23454;&#29616;&#12290;&#23427;&#36824;&#20026;JMS&#25552;&#20379;&#20102;&#19968;&#20010;Spring&#30340; <tt class="literal">PlatformTransactionManager</tt> &#30340;&#23454;&#29616;&#65288;&#29616;&#22312;&#21483;&#20570; <tt class="classname">JmsTransactionManager</tt>&#65289;&#12290;
&#36825;&#26679;&#21487;&#20197;&#25226;JMS&#20316;&#20026;&#19968;&#20010;&#20107;&#21153;&#36164;&#28304;&#26080;&#32541;&#22320;&#38598;&#25104;&#21040;Spring&#30340;&#20107;&#21153;&#31649;&#29702;&#26426;&#21046;&#20013;&#21435;&#12290; 
  </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="jms-using"></a>19.2.&nbsp;&#20351;&#29992;Spring JMS</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e31311"></a>19.2.1.&nbsp;<tt class="classname">JmsTemplate</tt></h3></div></div><div></div></div><p><tt class="classname">JmsTemplate</tt> &#31867;&#26377;&#20004;&#20010;&#23454;&#29616;&#26041;&#24335;&#12290;<tt class="classname">JmsTemplate</tt> &#31867;&#20351;&#29992;JMS 1.1&#30340;API&#65292;
&#32780;&#23376;&#31867; <tt class="classname">JmsTemplate102</tt> &#20351;&#29992;&#20102;JMS 1.0.2&#30340;API&#12290; 
        </p><p>&#20351;&#29992; <tt class="classname">JmsTemplate</tt> &#30340;&#20195;&#30721;&#21482;&#38656;&#35201;&#23454;&#29616;&#35268;&#33539;&#20013;&#23450;&#20041;&#30340;&#22238;&#35843;&#25509;&#21475;&#12290;
<tt class="classname">MessageCreator</tt> &#22238;&#35843;&#25509;&#21475;&#36890;&#36807;JmsTemplate&#20013;&#35843;&#29992;&#20195;&#30721;&#25552;&#20379;&#30340;Session&#26469;&#21019;&#24314;&#19968;&#26465;&#28040;&#24687;&#12290;
&#28982;&#32780;&#65292;&#20026;&#20102;&#20801;&#35768;&#26356;&#22797;&#26434;&#30340;JMS API&#24212;&#29992;&#65292;&#22238;&#35843;&#25509;&#21475; <tt class="classname">SessionCallback</tt> &#20026;&#29992;&#25143;&#25552;&#20379;JMS session&#65292;&#24182;&#19988;&#22238;&#35843;&#25509;&#21475; <tt class="classname">ProducerCallback</tt> &#23558;Session&#21644;MessageProducer&#23545;&#26174;&#38706;&#32473;&#29992;&#25143;&#12290; 
         </p><p>JMS API&#26377;&#20004;&#31181;&#21457;&#36865;&#26041;&#27861;&#65292;&#19968;&#31181;&#37319;&#29992;&#21457;&#36865;&#27169;&#24335;&#12289;&#20248;&#20808;&#32423;&#21644;&#23384;&#27963;&#26102;&#38388;&#20316;&#20026;&#26381;&#21153;&#36136;&#37327;&#65288;QOS&#65289;&#21442;&#25968;&#65292;&#21478;&#19968;&#31181;&#20351;&#29992;&#26080;&#38656;QOS&#21442;&#25968;&#30340;&#32570;&#30465;&#20540;&#26041;&#27861;&#12290;&#30001;&#20110;&#22312; <tt class="classname">JmsTemplate</tt> &#20013;&#26377;&#35768;&#22810;&#31181;&#21457;&#36865;&#26041;&#27861;&#65292;QOS&#21442;&#25968;&#36890;&#36807;bean&#30340;&#23646;&#24615;&#26041;&#24335;&#36827;&#34892;&#35774;&#32622;&#65292;&#20174;&#32780;&#36991;&#20813;&#22312;&#22810;&#31181;&#21457;&#36865;&#26041;&#27861;&#20013;&#37325;&#22797;&#12290;&#21516;&#26679;&#65292;&#20351;&#29992; <tt class="classname">setReceiveTimeout</tt> &#23646;&#24615;&#20540;&#26469;&#35774;&#32622;&#21516;&#27493;&#25509;&#25910;&#35843;&#29992;&#30340;&#36229;&#26102;&#20540;&#12290; 
            </p><p>&#26576;&#20123;JMS&#20379;&#24212;&#32773;&#20801;&#35768;&#36890;&#36807;ConnectionFactory&#30340;&#37197;&#32622;&#26469;&#35774;&#32622;&#32570;&#30465;&#30340;QOS&#20540;&#12290;&#36825;&#26679;&#22312;&#35843;&#29992; <tt class="classname">MessageProducer</tt> &#30340;&#21457;&#36865;&#26041;&#27861; <tt class="methodname">send(Destination destination, Message message)</tt> &#26102;&#20250;&#20351;&#29992;&#37027;&#20123;&#19981;&#21516;&#30340;QOS&#32570;&#30465;&#20540;&#65292;&#32780;&#19981;&#26159;JMS&#35268;&#33539;&#20013;&#23450;&#20041;&#30340;&#20540;&#12290;&#25152;&#20197;&#65292;&#20026;&#20102;&#25552;&#20379;&#23545;QOS&#20540;&#30340;&#19968;&#33268;&#31649;&#29702;&#65292;<tt class="classname">JmsTemplate</tt>&#24517;&#39035;&#36890;&#36807;&#35774;&#32622;&#24067;&#23572;&#20540;&#23646;&#24615; <span class="property">isExplicitQosEnabled</span> &#20026;true&#65292;&#20351;&#23427;&#33021;&#22815;&#20351;&#29992;&#33258;&#24049;&#30340;QOS&#20540;&#12290;
            </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p><tt class="classname">JmsTemplate</tt> &#31867;&#30340;&#23454;&#20363; <span class="emphasis"><em>&#19968;&#32463;&#37197;&#32622;&#20415;&#26159;&#32447;&#31243;&#23433;&#20840;</em></span> &#30340;&#12290;
				&#36825;&#24456;&#37325;&#35201;&#65292;&#22240;&#20026;&#36825;&#24847;&#21619;&#30528;&#20320;&#21487;&#20197;&#37197;&#32622;&#19968;&#20010; <tt class="classname">JmsTemplate</tt> &#30340;&#21333;&#20363;&#65292;&#28982;&#21518;&#25226;&#36825;&#20010; <span class="emphasis"><em>&#20849;&#20139;&#30340;</em></span> &#24341;&#29992;&#23433;&#20840;&#30340;&#27880;&#20837;&#22810;&#20010;&#21327;&#20316;&#30340;&#23545;&#35937;&#20013;&#12290;
				&#35201;&#28165;&#26970;&#19968;&#28857;&#65292;<tt class="classname">JmsTemplate</tt> &#26159;&#26377;&#29366;&#24577;&#30340;&#65292;&#22240;&#20026;&#23427;&#32500;&#25252;&#20102; <tt class="interfacename">ConnectionFactory</tt> &#30340;&#24341;&#29992;&#65292;&#20294;&#36825;&#20010;&#29366;&#24577;&#26102;&#19981;&#26159;&#20250;&#35805;&#29366;&#24577;&#12290;
				</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jms-connections"></a>19.2.2.&nbsp;&#36830;&#25509;&#24037;&#21378;</h3></div></div><div></div></div><p><tt class="classname">JmsTemplate</tt> &#38656;&#35201;&#19968;&#20010;&#23545; <tt class="classname">ConnectionFactory</tt> &#30340;&#24341;&#29992;&#12290;<tt class="classname">ConnectionFactory</tt> &#26159;JMS&#35268;&#33539;&#30340;&#19968;&#37096;&#20998;&#65292;&#24182;&#19988;&#26159;&#20351;&#29992;JMS&#30340;&#20837;&#21475;&#12290;&#23458;&#25143;&#31471;&#24212;&#29992;&#36890;&#24120;&#29992;&#23427;&#20316;&#24037;&#21378;&#37197;&#21512;JMS&#25552;&#20379;&#32773;&#21435;&#21019;&#24314;&#36830;&#25509;&#65292;&#24182;&#23553;&#35013;&#35768;&#22810;&#21644;&#20379;&#24212;&#21830;&#30456;&#20851;&#30340;&#37197;&#32622;&#21442;&#25968;&#65292;&#20363;&#22914;SSL&#30340;&#37197;&#32622;&#36873;&#39033;&#12290; 
      </p><p>&#24403;&#22312;EJB&#37324;&#20351;&#29992;JMS&#26102;&#65292;&#20379;&#24212;&#21830;&#20250;&#25552;&#20379;JMS&#25509;&#21475;&#30340;&#23454;&#29616;&#65292;&#36825;&#26679;&#20204;&#21487;&#20197;&#21442;&#19982;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;&#24182;&#25552;&#20379;&#36830;&#25509;&#27744;&#21644;&#20250;&#35805;&#27744;&#12290;
	  &#20026;&#20102;&#20351;&#29992;&#36825;&#20010;JMS&#23454;&#29616;&#65292;Java EE&#23481;&#22120;&#36890;&#24120;&#35201;&#27714;&#20320;&#22312;EJB&#25110;servlet&#37096;&#32626;&#25551;&#36848;&#31526;&#20013;&#22768;&#26126;&#19968;&#20010;JMS&#36830;&#25509;&#24037;&#21378;&#20570;&#20026; <span class="property">resource-ref</span>&#12290;
	  &#20026;&#30830;&#20445;&#21487;&#20197;&#22312;EJB&#20869;&#20351;&#29992; <tt class="classname">JmsTemplate</tt> &#30340;&#36825;&#20123;&#29305;&#24615;&#65292;&#23458;&#25143;&#24212;&#29992;&#24212;&#24403;&#30830;&#20445;&#23427;&#24341;&#29992;&#20102;&#34987;&#31649;&#29702;&#30340;ConnectionFactory&#23454;&#29616;&#12290; 
      </p><p>Spring&#25552;&#20379;&#20102;&#19968;&#20010; <tt class="classname">ConnectionFactory</tt> &#25509;&#21475;&#30340;&#23454;&#29616;&#65292;<tt class="classname">SingleConnectionFactory</tt>&#65292;&#23427;&#23558;&#22312;&#25152;&#26377;&#30340; <tt class="methodname">createConnection</tt> &#35843;&#29992;&#20013;&#36820;&#22238;&#19968;&#20010;&#30456;&#21516;&#30340; <tt class="classname">Connection</tt>&#65292;&#24182;&#24573;&#30053;&#25152;&#26377;&#23545; <tt class="methodname">close</tt>&#30340;&#35843;&#29992;&#12290;&#36825;&#22312;&#27979;&#35797;&#21644;&#29420;&#31435;&#29615;&#22659;&#20013;&#30456;&#24403;&#26377;&#29992;&#65292;&#22240;&#20026;&#22810;&#20010; <tt class="classname">JmsTemplate</tt> &#35843;&#29992;&#21487;&#20197;&#20351;&#29992;&#21516;&#19968;&#20010;&#36830;&#25509;&#20197;&#36328;&#36234;&#22810;&#20010;&#20107;&#21153;&#12290;<tt class="classname">SingleConnectionFactory</tt> &#36890;&#24120;&#24341;&#29992;&#19968;&#20010;&#26469;&#33258;JNDI&#30340;&#26631;&#20934; <tt class="classname">ConnectionFactory</tt>&#12290; 
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jms-destinations"></a>19.2.3.&nbsp;&#30446;&#30340;&#22320;&#31649;&#29702;</h3></div></div><div></div></div><p>&#21644;&#36830;&#25509;&#24037;&#21378;&#19968;&#26679;&#65292;&#30446;&#30340;&#22320;&#26159;&#21487;&#20197;&#22312;JNDI&#20013;&#23384;&#20648;&#21644;&#33719;&#21462;&#30340;JMS&#31649;&#29702;&#30340;&#23545;&#35937;&#12290;&#37197;&#32622;&#19968;&#20010;Spring&#24212;&#29992;&#19978;&#19979;&#25991;&#26102;&#65292;&#21487;&#20197;&#20351;&#29992;JNDI&#24037;&#21378;&#31867; <tt class="classname">JndiObjectFactoryBean</tt> &#25226;&#23545;&#20320;&#23545;&#35937;&#30340;&#24341;&#29992;&#20381;&#36182;&#27880;&#20837;&#21040;JMS&#30446;&#30340;&#22320;&#20013;&#12290;&#28982;&#32780;&#65292;&#22914;&#26524;&#22312;&#24212;&#29992;&#20013;&#26377;&#22823;&#37327;&#30340;&#30446;&#30340;&#22320;&#65292;&#25110;&#32773;JMS&#20379;&#24212;&#21830;&#25552;&#20379;&#20102;&#29305;&#26377;&#30340;&#39640;&#32423;&#30446;&#30340;&#22320;&#31649;&#29702;&#29305;&#24615;&#65292;&#36825;&#20010;&#31574;&#30053;&#24120;&#24120;&#26174;&#24471;&#24456;&#40635;&#28902;&#12290;&#21019;&#24314;&#21160;&#24577;&#30446;&#30340;&#22320;&#25110;&#25903;&#25345;&#30446;&#30340;&#22320;&#30340;&#21629;&#21517;&#31354;&#38388;&#23618;&#27425;&#23601;&#26159;&#36825;&#31181;&#39640;&#32423;&#30446;&#30340;&#22320;&#31649;&#29702;&#30340;&#20363;&#23376;&#12290;<tt class="classname">JmsTemplate</tt> &#23558;&#30446;&#30340;&#22320;&#21517;&#31216;&#21040;JMS&#30446;&#30340;&#22320;&#23545;&#35937;&#30340;&#35299;&#26512;&#22996;&#27966;&#32473; <tt class="classname">DestinationResolver</tt> &#25509;&#21475;&#30340;&#19968;&#20010;&#23454;&#29616;&#12290;<tt class="classname">JndiDestinationResolver</tt> &#26159; <tt class="classname">JmsTemplate</tt> &#20351;&#29992;&#30340;&#40664;&#35748;&#23454;&#29616;&#65292;&#24182;&#19988;&#25552;&#20379;&#21160;&#24577;&#30446;&#30340;&#22320;&#35299;&#26512;&#12290;&#21516;&#26102; <tt class="classname">JndiDestinationResolver</tt> &#20316;&#20026;JNDI&#20013;&#30340;&#30446;&#30340;&#22320;&#26381;&#21153;&#23450;&#20301;&#22120;&#65292;&#36824;&#21487;&#36873;&#25321;&#22238;&#36864;&#21435;&#20351;&#29992; <tt class="classname">DynamicDestinationResolver</tt> &#20013;&#30340;&#34892;&#20026;&#12290; 
       </p><p>&#32463;
&#24120;&#35265;&#21040;&#19968;&#20010;JMS&#24212;&#29992;&#20013;&#20351;&#29992;&#30340;&#30446;&#30340;&#22320;&#22312;&#36816;&#34892;&#26102;&#25165;&#30693;&#36947;&#65292;&#22240;&#27492;&#65292;&#24403;&#37096;&#32626;&#19968;&#20010;&#24212;&#29992;&#26102;&#65292;&#23427;&#19981;&#33021;&#29992;&#21487;&#31649;&#29702;&#30340;&#26041;&#24335;&#21019;&#24314;&#12290;&#36825;&#26159;&#32463;&#24120;&#21457;&#29983;&#30340;&#65292;&#22240;&#20026;&#22312;&#20114;&#30456;&#20316;&#29992;&#30340;&#31995;&#32479;&#32452;&#20214;&#38388;&#26377;
&#20123;&#20849;&#20139;&#24212;&#29992;&#36923;&#36753;&#20250;&#22312;&#36816;&#34892;&#30340;&#26102;&#20505;&#25353;&#29031;&#20849;&#21516;&#30340;&#21629;&#21517;&#35268;&#33539;&#21019;&#24314;&#28040;&#24687;&#30446;&#30340;&#22320;&#12290;&#34429;&#28982;&#21160;&#24577;&#21019;&#24314;&#30446;&#30340;&#22320;&#19981;&#26159;JMS&#35268;&#33539;&#30340;&#19968;&#37096;&#20998;&#65292;&#20294;&#26159;&#22823;&#22810;&#25968;&#20379;&#24212;&#21830;&#24050;&#32463;&#25552;&#20379;&#20102;&#36825;&#20010;&#21151;&#33021;&#12290;
&#29992;&#25143;&#20026;&#21160;&#24577;&#21019;&#24314;&#30340;&#30446;&#30340;&#22320;&#23450;&#20041;&#21644;&#20020;&#26102;&#30446;&#30340;&#22320;&#19981;&#21516;&#30340;&#21517;&#23383;&#65292;&#24182;&#19988;&#36890;&#24120;&#19981;&#34987;&#27880;&#20876;&#21040;JNDI&#20013;&#12290;&#19981;&#21516;&#20379;&#24212;&#21830;&#21019;&#24314;&#21160;&#24577;&#28040;&#24687;&#30446;&#30340;&#22320;&#25152;&#20351;&#29992;&#30340;API&#24046;&#24322;&#24456;&#22823;&#65292;&#22240;&#20026;&#21644;&#30446;&#30340;&#22320;
&#30456;&#20851;&#30340;&#23646;&#24615;&#26159;&#20379;&#24212;&#21830;&#29305;&#26377;&#30340;&#12290;&#28982;&#32780;&#65292;&#26377;&#26102;&#30001;&#20379;&#24212;&#21830;&#20250;&#20316;&#20986;&#19968;&#20010;&#31616;&#21333;&#30340;&#23454;&#29616;&#36873;&#25321;-&#24573;&#30053;JMS&#35268;&#33539;&#20013;&#30340;&#35686;&#21578;&#65292;&#20351;&#29992; <tt class="classname">TopicSession</tt> &#30340;&#26041;&#27861; <tt class="methodname">createTopic(String topicName)</tt> &#25110;&#32773; <tt class="classname">QueueSession</tt> &#30340;&#26041;&#27861; <tt class="methodname">createQueue(String queueName)</tt> &#26469;&#21019;&#24314;&#19968;&#20010;&#24102;&#40664;&#35748;&#20540;&#23646;&#24615;&#30340;&#26032;&#30446;&#30340;&#22320;&#12290;&#20381;&#36182;&#20110;&#20379;&#24212;&#21830;&#30340;&#23454;&#29616;&#65292;<tt class="classname">DynamicDestinationResolver</tt> &#20063;&#21487;&#33021;&#21019;&#24314;&#19968;&#20010;&#29289;&#29702;&#19978;&#30340;&#30446;&#30340;&#22320;&#65292;&#32780;&#19981;&#20877;&#20165;&#20165;&#26159;&#19968;&#20010;&#35299;&#26512;&#12290;
       </p><p>&#24067;&#23572;&#23646;&#24615; <span class="property">pubSubDomain</span> &#29992;&#26469;&#37197;&#32622; <tt class="classname">JmsTemplate</tt> &#20351;&#29992;&#20160;&#20040;&#26679;&#30340;JMS&#22495;&#12290;&#36825;&#20010;&#23646;&#24615;&#30340;&#40664;&#35748;&#20540;&#26159;false&#65292;&#20351;&#29992;&#28857;&#21040;&#28857;&#30340;&#22495;&#65292;&#20063;&#23601;&#26159;&#38431;&#21015;&#12290;&#22312;1.0.2&#30340;&#23454;&#29616;&#20013;&#65292;&#36825;&#20010;&#23646;&#24615;&#20540;&#29992;&#26469;&#20915;&#23450; <tt class="classname">JmsTemplate</tt> &#23558;&#28040;&#24687;&#21457;&#36865;&#21040;&#19968;&#20010; <tt class="interfacename">Queue</tt> &#36824;&#26159;&#19968;&#20010; <tt class="interfacename">Topic</tt>&#12290;&#36825;&#20010;&#26631;&#24535;&#22312;1.1&#30340;&#23454;&#29616;&#20013;&#23545;&#21457;&#36865;&#25805;&#20316;&#27809;&#26377;&#24433;&#21709;&#12290;&#28982;&#32780;&#65292;&#22312;&#36825;&#20004;&#20010;JMS&#29256;&#26412;&#20013;&#65292;&#36825;&#20010;&#23646;&#24615;&#20915;&#23450;&#20102;&#36890;&#36807;&#25509;&#21475; <tt class="interfacename">DestinationResolver</tt> &#30340;&#23454;&#29616;&#26469;&#20915;&#23450;&#22914;&#20309;&#35299;&#26512;&#21160;&#24577;&#28040;&#24687;&#30446;&#30340;&#22320;&#12290; 
      	</p><p>&#20320;&#36824;&#21487;&#20197;&#36890;&#36807;&#23646;&#24615; <span class="property">defaultDestination</span> &#37197;&#32622;&#19968;&#20010;&#24102;&#26377;&#40664;&#35748;&#30446;&#30340;&#22320;&#30340; <tt class="classname">JmsTemplate</tt>&#12290;&#19981;&#25351;&#26126;&#30446;&#30340;&#22320;&#30340;&#21457;&#36865;&#21644;&#25509;&#21463;&#25805;&#20316;&#23558;&#20351;&#29992;&#35813;&#40664;&#35748;&#30446;&#30340;&#22320;&#12290; 
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jms-mdp"></a>19.2.4.&nbsp;&#28040;&#24687;&#20390;&#21548;&#23481;&#22120;</h3></div></div><div></div></div><p>&#22312;EJB&#19990;&#30028;&#37324;&#65292;JMS&#28040;&#24687;&#26368;&#24120;&#29992;&#30340;&#21151;&#33021;&#20043;&#19968;&#26159;&#29992;&#20110;&#23454;&#29616;&#28040;&#24687;&#39537;&#21160;Bean&#65288;MDB&#65289;&#12290;Spring&#25552;&#20379;&#20102;&#19968;&#20010;&#26041;&#27861;&#26469;&#21019;&#24314;&#28040;&#24687;&#39537;&#21160;&#30340;POJO&#65288;MDP&#65289;&#65292;&#24182;&#19988;&#19981;&#20250;&#25226;&#29992;&#25143;&#32465;&#23450;&#22312;&#26576;&#20010;EJB&#23481;&#22120;&#19978;&#12290;&#65288;&#20851;&#20110;Spring&#30340;MDP&#25903;&#25345;&#30340;&#32454;&#33410;&#35831;&#21442;&#32771;&#26631;&#39064;&#20026; <a href="#jms-asynchronousMessageReception" title="19.4.2.&nbsp;&#24322;&#27493;&#25509;&#25910; - &#28040;&#24687;&#39537;&#21160;&#30340;POJO">Section&nbsp;19.4.2, &#8220;&#24322;&#27493;&#25509;&#25910; - &#28040;&#24687;&#39537;&#21160;&#30340;POJO&#8221;</a> &#30340;&#31456;&#33410;&#12290;&#65289;
		</p><p>&#36890;
&#24120;&#29992;&#28040;&#24687;&#30417;&#21548;&#22120;&#23481;&#22120;&#20174;JMS&#28040;&#24687;&#38431;&#21015;&#25509;&#25910;&#28040;&#24687;&#24182;&#39537;&#21160;&#34987;&#27880;&#23556;&#36827;&#26469;&#30340;MDP&#12290;&#28040;&#24687;&#30417;&#21548;&#22120;&#23481;&#22120;&#36127;&#36131;&#28040;&#24687;&#25509;&#25910;&#30340;&#22810;&#32447;&#31243;&#22788;&#29702;&#24182;&#20998;&#21457;&#21040;&#21508;MDP&#20013;&#12290;&#19968;&#20010;&#28040;&#24687;&#20390;&#21548;&#23481;&#22120;&#26159;
MDP&#21644;&#28040;&#24687;&#25552;&#20379;&#32773;&#20043;&#38388;&#30340;&#19968;&#20010;&#20013;&#20171;&#65292;&#29992;&#26469;&#22788;&#29702;&#28040;&#24687;&#25509;&#25910;&#30340;&#27880;&#20876;&#65292;&#20107;&#21153;&#31649;&#29702;&#30340;&#21442;&#19982;&#65292;&#36164;&#28304;&#33719;&#21462;&#21644;&#37322;&#25918;&#65292;&#24322;&#24120;&#36716;&#25442;&#31561;&#31561;&#12290;&#36825;&#20351;&#24471;&#24212;&#29992;&#24320;&#21457;&#20154;&#21592;&#21487;&#20197;&#19987;&#27880;&#20110;&#24320;&#21457;&#21644;&#25509;&#25910;&#28040;
&#24687;&#65288;&#21487;&#33021;&#30340;&#21709;&#24212;&#65289;&#30456;&#20851;&#30340;&#65288;&#22797;&#26434;&#65289;&#19994;&#21153;&#36923;&#36753;&#65292;&#25226;&#21644;JMS&#22522;&#30784;&#26694;&#26550;&#26377;&#20851;&#30340;&#26679;&#26495;&#21270;&#30340;&#37096;&#20998;&#22996;&#25176;&#32473;&#26694;&#26550;&#22788;&#29702;&#12290; </p><p>Spring&#25552;&#20379;&#20102;&#19977;&#31181; <tt class="classname">AbstractMessageListenerContainer</tt> &#30340;&#23376;&#31867;&#65292;&#27599;&#31181;&#21508;&#26377;&#20854;&#29305;&#28857;&#12290;
		</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="jms-mdp-simple"></a>19.2.4.1.&nbsp;<tt class="classname">SimpleMessageListenerContainer</tt></h4></div></div><div></div></div><p>&#36825;&#20010;&#28040;&#24687;&#20390;&#21548;&#23481;&#22120;&#26159;&#19977;&#31181;&#20013;&#26368;&#31616;&#21333;&#30340;&#12290;&#23427;&#22312;&#21551;&#21160;&#26102;&#21019;&#24314;&#22266;&#23450;&#25968;&#37327;&#30340;JMS session&#24182;&#22312;&#23481;&#22120;&#30340;&#25972;&#20010;&#29983;&#21629;&#21608;&#26399;&#20013;&#20351;&#29992;&#23427;&#20204;&#12290;&#36825;&#20010;&#31867;&#19981;&#33021;&#21160;&#24577;&#30340;&#36866;&#24212;&#36816;&#34892;&#26102;&#30340;&#35201;&#27714;&#25110;&#21442;&#19982;&#28040;&#24687;&#25509;&#25910;&#30340;&#20107;&#21153;&#22788;&#29702;&#12290;&#28982;&#32780;&#23427;&#23545;JMS&#25552;&#20379;&#32773;&#30340;&#35201;&#27714;&#20063;&#26368;&#20302;&#12290;&#23427;&#21482;&#38656;&#35201;&#31616;&#21333;&#30340;JMS API&#12290;
			</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="jms-mdp-default"></a>19.2.4.2.&nbsp;<tt class="classname">DefaultMessageListenerContainer</tt></h4></div></div><div></div></div><p>&#36825;&#20010;&#28040;&#24687;&#20390;&#21548;&#22120;&#20351;&#29992;&#30340;&#26368;&#22810;&#12290;&#21644; <tt class="classname">SimpleMessageListenerContainer</tt> &#30456;&#21453;&#65292;&#36825;&#20010;&#23376;&#31867;&#21487;&#20197;&#21160;&#24577;&#36866;&#24212;&#36816;&#34892;&#26102;&#20399;&#30340;&#35201;&#27714;&#65292;&#20063;&#21487;&#20197;&#21442;&#19982;&#20107;&#21153;&#31649;&#29702;&#12290;&#27599;&#20010;&#25910;&#21040;&#30340;&#28040;&#24687;&#37117;&#27880;&#20876;&#21040;&#19968;&#20010;XA&#20107;&#21153;&#20013;&#65288;&#22914;&#26524;&#20351;&#29992; <tt class="classname">JtaTransactionManager</tt> &#37197;&#32622;&#36807;&#65289;&#65292;&#36825;&#26679;&#23601;&#21487;&#20197;&#21033;&#29992;XA&#20107;&#21153;&#35821;&#20041;&#30340;&#20248;&#21183;&#20102;&#12290;&#36825;&#20010;&#31867;&#22312;&#23545;JMS&#25552;&#20379;&#32773;&#30340;&#20302;&#35201;&#27714;&#21644;&#25552;&#20379;&#21253;&#25324;&#20107;&#21153;&#21442;&#20110;&#31561;&#30340;&#24378;&#22823;&#21151;&#33021;&#19978;&#21462;&#24471;&#20102;&#24456;&#22909;&#30340;&#24179;&#34913;&#12290;
				</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="jms-mdp-server-session"></a>19.2.4.3.&nbsp;<tt class="classname">ServerSessionMessageListenerContainer</tt></h4></div></div><div></div></div><p>&#36825;&#20010;&#30417;&#21548;&#22120;&#23481;&#22120;&#21033;&#29992;JMS ServerSessionPool SPI&#21160;&#24577;&#31649;&#29702;JMS Session&#12290;
			     &#20351;&#29992;&#32773;&#21508;&#31181;&#28040;&#24687;&#30417;&#21548;&#22120;&#21487;&#20197;&#33719;&#24471;&#36816;&#34892;&#26102;&#21160;&#24577;&#35843;&#20248;&#21151;&#33021;&#65292;&#20294;&#26159;&#36825;&#20063;&#35201;&#27714;JMS&#25552;&#20379;&#32773;&#25903;&#25345;ServerSessionPool SPI&#12290;&#22914;&#26524;&#19981;&#38656;&#35201;&#36816;&#34892;&#26102;&#24615;&#33021;&#35843;&#25972;&#65292;&#35831;&#20351;&#29992; <tt class="classname">DefaultMessageListenerContainer</tt> &#25110; <tt class="classname">SimpleMessageListenerContainer</tt>&#12290;
			     </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jms-tx"></a>19.2.5.&nbsp;&#20107;&#21153;&#31649;&#29702;</h3></div></div><div></div></div><p>Spring&#25552;&#20379;&#20102; <tt class="classname">JmsTransactionManager</tt> &#20026;&#21333;&#20010;JMS <tt class="classname">ConnectionFactory</tt> &#31649;&#29702;&#20107;&#21153;&#12290;&#36825;&#23558;&#20801;&#35768;JMS&#24212;&#29992;&#21033;&#29992; <a href="#transaction" title="Chapter&nbsp;9.&nbsp;&#20107;&#21153;&#31649;&#29702;">Chapter&nbsp;9, <i>&#20107;&#21153;&#31649;&#29702;</i></a> &#20013;&#25551;&#36848;&#30340;Spring&#30340;&#20107;&#21153;&#31649;&#29702;&#21151;&#33021;&#12290;<tt class="classname">JmsTransactionManager</tt> &#32465;&#23450; <tt class="classname">ConnectionFactory</tt> &#30340;&#19968;&#20010;Connection/Session&#23545;&#21040;&#32447;&#31243;&#19978;&#65292;&#26469;&#25552;&#20379;&#26412;&#22320;&#36164;&#28304;&#20107;&#21153;&#12290;<tt class="classname">JmsTemplate</tt> &#33258;&#21160;&#26816;&#27979;&#21040;&#36825;&#20123;&#20107;&#21153;&#24615;&#36164;&#28304;&#20174;&#32780;&#23545;&#23427;&#20204;&#36827;&#34892;&#25805;&#20316;&#12290;
            </p><p>&#22312;Java EE&#29615;&#22659;&#20013;&#65292;<tt class="classname">SingleConnectionFactory</tt>&#23558;&#25226;Connection&#21644;Session&#25918;&#21040;&#32531;&#20914;&#27744;&#20013;&#65292;&#22240;&#27492;&#36825;&#20123;&#36164;&#28304;&#22312;&#20107;&#21153;&#20013;&#24471;&#21040;&#20102;&#26377;&#25928;&#30340;&#22797;&#29992;&#12290;&#22312;&#29420;&#31435;&#29615;&#22659;&#20013;&#20351;&#29992;Spring&#30340; <tt class="classname">SingleConnectionFactory</tt> &#20250;&#23384;&#22312;&#20849;&#20139;&#30340;JMS <tt class="classname">Connection</tt>&#65292;&#20294;&#27599;&#20010;&#20107;&#21153;&#26377;&#33258;&#24049;&#29420;&#31435;&#30340; <tt class="classname">Session</tt>&#12290;&#21478;&#22806;&#21487;&#20197;&#32771;&#34385;&#20351;&#29992;&#20379;&#24212;&#21830;&#29305;&#23450;&#30340;&#27744;&#36866;&#37197;&#22120;,&#65292;&#22914;ActiveMQ&#30340; <tt class="classname">PooledConnectionFactory</tt> &#31867;&#12290;
           </p><p><tt class="classname">JmsTemplate</tt> &#20063;&#21487;&#20197;&#21644; <tt class="classname">JtaTransactionManager</tt> &#20197;&#21450;&#20855;&#26377;XA&#33021;&#21147;&#30340;JMS <tt class="classname">ConnectionFactory</tt>&#19968;&#36215;&#20351;&#29992;&#26469;&#25552;&#20379;&#20998;&#24067;&#24335;&#20107;&#21153;&#12290;&#35760;&#20303;&#36825;&#38656;&#35201;&#20351;&#29992;JTA&#20107;&#21153;&#31649;&#29702;&#22120;&#25110;&#21512;&#36866;&#30340;&#21487;&#37197;&#32622;&#30340;XA ConnectionFactory&#65281;&#65288;&#21442;&#32771;&#20320;&#25152;&#20351;&#29992;&#30340;J2EE&#26381;&#21153;&#22120;/JMS&#20379;&#24212;&#21830;&#30340;&#25991;&#26723;&#12290;&#65289;
            </p><p>&#24403;&#20351;&#29992;JMS API&#20174;&#19968;&#20010; <tt class="classname">Connection</tt> &#20013;&#21019;&#24314; <tt class="classname">Session</tt> &#26102;&#65292;&#22312;&#21463;&#31649;&#29702;&#30340;&#21644;&#38750;&#21463;&#31649;&#29702;&#30340;&#20107;&#21153;&#29615;&#22659;&#19979;&#37325;&#29992;&#20195;&#30721;&#20250;&#21487;&#33021;&#20250;&#35753;&#20154;&#36855;&#24785;&#12290;&#36825;&#26159;&#22240;&#20026;JMS API&#21482;&#26377;&#19968;&#20010;&#24037;&#21378;&#26041;&#27861;&#26469;&#21019;&#24314; <tt class="classname">Session</tt> &#65292;&#24182;&#19988;&#23427;&#38656;&#35201;&#29992;&#20110;&#20107;&#21153;&#21644;&#27169;&#24335;&#30830;&#35748;&#30340;&#20540;&#12290;&#22312;&#21463;&#31649;&#29702;&#30340;&#29615;&#22659;&#19979;&#65292;&#30001;&#20107;&#21153;&#32467;&#26500;&#29615;&#22659;&#36127;&#36131;&#35774;&#32622;&#36825;&#20123;&#20540;&#65292;&#36825;&#26679;&#22312;&#20379;&#24212;&#21830;&#21253;&#35013;&#30340;JMS&#36830;&#25509;&#20013;&#21487;&#20197;&#24573;&#30053;&#36825;&#20123;&#20540;&#12290;&#24403;&#22312;&#19968;&#20010;&#38750;&#31649;&#29702;&#24615;&#30340;&#29615;&#22659;&#20013;&#20351;&#29992; <tt class="classname">JmsTemplate</tt> &#26102;&#65292;&#20320;&#21487;&#20197;&#36890;&#36807;&#20351;&#29992;&#23646;&#24615; <tt class="classname">SessionTransacted</tt> &#21644; <tt class="classname">SessionAcknowledgeMode</tt> &#26469;&#25351;&#23450;&#36825;&#20123;&#20540;&#12290;&#24403; <tt class="classname">JmsTemplate</tt> &#37197;&#21512; <tt class="classname">PlatformTransactionManager</tt> &#20351;&#29992;&#26102;&#65292;&#27169;&#26495;&#23558;&#19968;&#30452;&#34987;&#36171;&#20104;&#19968;&#20010;&#20107;&#21153;&#24615;JMS&#30340; <tt class="classname">Session</tt>&#12290; 
			</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="jms-sending"></a>19.3.&nbsp;&#21457;&#36865;&#28040;&#24687;</h2></div></div><div></div></div><p><tt class="classname">JmsTemplate</tt> &#21253;&#21547;&#35768;&#22810;&#26041;&#20415;&#30340;&#26041;&#27861;&#26469;&#21457;&#36865;&#28040;&#24687;&#12290;&#26377;&#20123;&#21457;&#36865;&#26041;&#27861;&#21487;&#20197;&#20351;&#29992; <tt class="classname">javax.jms.Destination</tt> &#23545;&#35937;&#25351;&#23450;&#30446;&#30340;&#22320;&#65292;&#20063;&#21487;&#20197;&#20351;&#29992;&#23383;&#31526;&#20018;&#22312;JNDI&#20013;&#26597;&#25214;&#30446;&#30340;&#22320;&#12290;&#27809;&#26377;&#30446;&#30340;&#22320;&#21442;&#25968;&#30340;&#21457;&#36865;&#26041;&#27861;&#20351;&#29992;&#40664;&#35748;&#30340;&#30446;&#30340;&#22320;&#12290;&#36825;&#37324;&#26377;&#20010;&#20363;&#23376;&#20351;&#29992;1.0.2&#29256;&#30340;JMS&#23454;&#29616;&#21457;&#36865;&#28040;&#24687;&#21040;&#19968;&#20010;&#38431;&#21015;&#12290; 
      </p><pre class="programlisting">import javax.jms.ConnectionFactory;
import javax.jms.JMSException;
import javax.jms.Message;
import javax.jms.Queue;
import javax.jms.Session;

import org.springframework.jms.core.MessageCreator;
import org.springframework.jms.core.JmsTemplate;
import org.springframework.jms.core.JmsTemplate102;

public class JmsQueueSender {

    private JmsTemplate jmsTemplate;
    private Queue queue;

    public void setConnectionFactory(ConnectionFactory cf) {
        this.jmsTemplate = new JmsTemplate102(cf, false);
    }

    public void setQueue(Queue queue) {
        this.queue = queue;
    }

    public void simpleSend() {
        this.jmsTemplate.send(this.queue, new MessageCreator() {
            public Message createMessage(Session session) throws JMSException {
              return session.createTextMessage("hello queue world");
            }
        });
    }
}</pre><p>&#36825;&#20010;&#20363;&#23376;&#20351;&#29992; <tt class="classname">MessageCreator</tt> &#22238;&#35843;&#25509;&#21475;&#20174;&#25552;&#20379;&#30340; <tt class="classname">Session</tt> &#23545;&#35937;&#20013;&#21019;&#24314;&#19968;&#20010;&#25991;&#26412;&#28040;&#24687;&#65292;&#24182;&#19988;&#36890;&#36807;&#19968;&#20010; <tt class="classname">ConnectionFactory</tt> &#30340;&#24341;&#29992;&#21644;&#25351;&#23450;&#28040;&#24687;&#22495;&#30340;&#24067;&#23572;&#20540;&#26469;&#21019;&#24314; <tt class="classname">JmsTemplate</tt>&#12290;&#25552;&#20379;&#20102;&#19968;&#20010;&#26080;&#21442;&#25968;&#30340;&#26500;&#36896;&#22120;&#21644; <span class="property">connectionFactory</span> / <span class="property">queue</span> Bean&#23646;&#24615;&#24182;&#21487;&#29992;&#20110;&#21019;&#24314;&#23454;&#20363;&#65288;&#20351;&#29992;&#19968;&#20010;BeanFactory&#25110;&#32773;&#26222;&#36890;Java&#20195;&#30721;&#65289;&#12290;&#25110;&#32773;&#32771;&#34385;&#20174;Spring&#30340;&#22522;&#31867; <tt class="classname">JmsGatewaySupport</tt>&#65292;&#23427;&#23545;JMS&#37197;&#32622;&#20855;&#26377;&#20869;&#32622;&#30340;Bean&#23646;&#24615;&#65292;&#32487;&#25215;&#19968;&#20010;&#31867;&#12290;
      </p><p>&#24403;&#22312;&#24212;&#29992;&#19978;&#19979;&#25991;&#20013;&#37197;&#32622;JMS 1.0.2&#26102;&#65292;&#37325;&#35201;&#30340;&#26159;&#35760;&#24471;&#35774;&#23450;&#24067;&#23572;&#23646;&#24615; <span class="property">pubSubDomain</span> &#30340;&#20540;&#20197;&#25351;&#26126;&#20320;&#26159;&#35201;&#21457;&#36865;&#21040;&#38431;&#21015;&#36824;&#26159;&#20027;&#39064;&#12290;</p><p>&#26041;&#27861; <tt class="methodname">send(String destinationName, MessageCreator creator)</tt> &#35753;&#20320;&#21033;&#29992;&#30446;&#30340;&#22320;&#30340;&#23383;&#31526;&#20018;&#21517;&#23383;&#21457;&#36865;&#28040;&#24687;&#12290;&#22914;&#26524;&#36825;&#20010;&#21517;&#23383;&#22312;JNDI&#20013;&#27880;&#20876;&#65292;&#20320;&#24212;&#24403;&#23558;&#27169;&#26495;&#20013;&#30340; <span class="property">destinationResolver</span> &#23646;&#24615;&#35774;&#32622;&#20026; <tt class="classname">JndiDestinationResolver</tt> &#30340;&#19968;&#20010;&#23454;&#20363;&#12290;</p><p>&#22914;&#26524;&#20320;&#21019;&#24314; <tt class="classname">JmsTemplate</tt> &#24182;&#25351;&#23450;&#19968;&#20010;&#40664;&#35748;&#30340;&#30446;&#30340;&#22320;&#65292;<tt class="methodname">send(MessageCreator c)</tt> &#21457;&#36865;&#28040;&#24687;&#21040;&#36825;&#20010;&#30446;&#30340;&#22320;&#12290; 
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jms-msg-conversion"></a>19.3.1.&nbsp;&#20351;&#29992;&#28040;&#24687;&#36716;&#25442;&#22120;</h3></div></div><div></div></div><p>&#20026;&#20415;&#20110;&#21457;&#36865;&#39046;&#22495;&#27169;&#22411;&#23545;&#35937;&#65292;<tt class="classname">JmsTemplate</tt> &#26377;&#22810;&#31181;&#20197;&#19968;&#20010;Java&#23545;&#35937;&#20026;&#21442;&#25968;&#24182;&#20570;&#20026;&#28040;&#24687;&#25968;&#25454;&#20869;&#23481;&#30340;&#21457;&#36865;&#26041;&#27861;&#12290;<tt class="classname">JmsTemplate</tt> &#37324;&#21487;&#37325;&#36733;&#30340;&#26041;&#27861; <tt class="methodname">convertAndSend</tt> &#21644; <tt class="methodname">receiveAndConvert</tt> &#23558;&#36716;&#25442;&#30340;&#36807;&#31243;&#22996;&#25176;&#32473;&#25509;&#21475; <tt class="literal">MessageConverter</tt> &#30340;&#19968;&#20010;&#23454;&#20363;&#12290;&#36825;&#20010;&#25509;&#21475;&#23450;&#20041;&#20102;&#19968;&#20010;&#31616;&#21333;&#30340;&#21512;&#32422;&#29992;&#26469;&#22312;Java&#23545;&#35937;&#21644;JMS&#28040;&#24687;&#38388;&#36827;&#34892;&#36716;&#25442;&#12290;&#32570;&#30465;&#30340;&#23454;&#29616; <tt class="classname">SimpleMessageConverter</tt> &#25903;&#25345; <tt class="classname">String</tt> &#21644; <tt class="classname">TextMessage</tt>&#65292;<tt class="classname">byte[]</tt> &#21644; <tt class="classname">BytesMesssage</tt>&#65292;&#20197;&#21450; <tt class="classname">java.util.Map</tt> &#21644; <tt class="classname">MapMessage</tt> &#20043;&#38388;&#30340;&#36716;&#25442;&#12290;&#20351;&#29992;&#36716;&#25442;&#22120;&#65292;&#21487;&#20197;&#20351;&#20320;&#21644;&#20320;&#30340;&#24212;&#29992;&#20851;&#27880;&#20110;&#36890;&#36807;JMS&#25509;&#25910;&#21644;&#21457;&#36865;&#30340;&#19994;&#21153;&#23545;&#35937;&#32780;&#19981;&#29992;&#25805;&#24515;&#23427;&#26159;&#20855;&#20307;&#22914;&#20309;&#34920;&#36798;&#25104;JMS&#28040;&#24687;&#30340;&#12290;
  		</p><p>&#30446;&#21069;&#30340;&#27801;&#31665;&#27169;&#22411;&#21253;&#25324;&#19968;&#20010; <tt class="classname">MapMessageConverter</tt>&#65292;&#23427;&#20351;&#29992;&#21453;&#23556;&#36716;&#25442;JavaBean&#21644; <tt class="classname">MapMessage</tt>&#12290;&#20854;&#20182;&#27969;&#34892;&#21487;&#36873;&#30340;&#23454;&#29616;&#26041;&#24335;&#21253;&#25324;&#20351;&#29992;&#24050;&#23384;&#22312;&#30340;XML&#32534;&#32452;&#30340;&#21253;&#65292;&#20363;&#22914;JAXB&#12289;Castor&#12289;XMLBeans&#25110;XStream&#30340;&#36716;&#25442;&#22120;&#26469;&#21019;&#24314;&#19968;&#20010;&#34920;&#31034;&#23545;&#35937;&#30340; <tt class="interfacename">TextMessage</tt>&#12290;
      </p><p>&#20026;&#26041;&#20415;&#37027;&#20123;&#19981;&#33021;&#20197;&#36890;&#29992;&#26041;&#24335;&#23553;&#35013;&#22312;&#36716;&#25442;&#31867;&#37324;&#30340;&#28040;&#24687;&#23646;&#24615;&#65292;&#28040;&#24687;&#22836;&#21644;&#28040;&#24687;&#20307;&#30340;&#35774;&#32622;&#65292;&#36890;&#36807; <tt class="interfacename">MessagePostProcessor</tt> &#25509;&#21475;&#20320;&#21487;&#20197;&#22312;&#28040;&#24687;&#34987;&#36716;&#25442;&#21518;&#24182;&#19988;&#22312;&#21457;&#36865;&#21069;&#35775;&#38382;&#35813;&#28040;&#24687;&#12290;&#19979;&#20363;&#23637;&#31034;&#20102;&#22914;&#20309;&#22312; <tt class="interfacename">java.util.Map</tt> &#24050;&#32463;&#36716;&#25442;&#25104;&#19968;&#20010;&#28040;&#24687;&#21518;&#26356;&#25913;&#28040;&#24687;&#22836;&#21644;&#23646;&#24615;&#12290;
      </p><pre class="programlisting">public void sendWithConversion() {
    Map map = new HashMap();
    map.put("Name", "Mark");
    map.put("Age", new Integer(47));
    jmsTemplate.convertAndSend("testQueue", map, new MessagePostProcessor() {
        public Message postProcessMessage(Message message) throws JMSException {
            message.setIntProperty("AccountID", 1234);
            message.setJMSCorrelationID("123-00001");
            return message;
        }
    });
}</pre><p>&#36825;&#23558;&#20135;&#29983;&#19968;&#20010;&#22914;&#19979;&#30340;&#28040;&#24687;&#26684;&#24335;:</p><pre class="programlisting">MapMessage={
    Header={
        ... standard headers ...
        CorrelationID={123-00001}
    }
    Properties={
        AccountID={Integer:1234}
    }
    Fields={
        Name={String:Mark}
        Age={Integer:47}
    } 
}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jms-callbacks"></a>19.3.2.&nbsp;<tt class="interfacename">SessionCallback</tt> &#21644; <tt class="interfacename">ProducerCallback</tt></h3></div></div><div></div></div><p>&#34429;&#28982;send&#25805;&#20316;&#36866;&#29992;&#20110;&#35768;&#22810;&#24120;&#35265;&#30340;&#20351;&#29992;&#22330;&#26223;&#65292;&#20294;&#26159;&#26377;&#26102;&#20320;&#38656;&#35201;&#22312;&#19968;&#20010;JMS <tt class="interfacename">Session</tt> &#25110;&#32773; <tt class="interfacename">MessageProducer</tt> &#19978;&#25191;&#34892;&#22810;&#20010;&#25805;&#20316;&#12290;&#25509;&#21475; <tt class="interfacename">SessionCallback</tt> &#21644; <tt class="interfacename">ProducerCallback</tt> &#20998;&#21035;&#25552;&#20379;&#20102;JMS <tt class="interfacename">Session</tt> &#21644; <tt class="interfacename">Session</tt> / <tt class="interfacename">MessageProducer</tt> &#23545;&#12290;<tt class="classname">JmsTemplate</tt> &#19978;&#30340; <tt class="methodname">execute()</tt> &#26041;&#27861;&#25191;&#34892;&#36825;&#20123;&#22238;&#35843;&#26041;&#27861;&#12290;
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="jms-receiving"></a>19.4.&nbsp;&#25509;&#25910;&#28040;&#24687;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jms-receiving-sync"></a>19.4.1.&nbsp;&#21516;&#27493;&#25509;&#25910;</h3></div></div><div></div></div><p>&#34429;&#28982;JMS&#19968;&#33324;&#37117;&#21644;&#24322;&#27493;&#22788;&#29702;&#30456;&#20851;&#65292;&#20294;&#23427;&#20063;&#21487;&#20197;&#21516;&#27493;&#30340;&#26041;&#24335;&#20351;&#29992;&#28040;&#24687;&#12290;&#21487;&#37325;&#36733;&#30340; <tt class="methodname">receive(..)</tt> &#26041;&#27861;&#25552;&#20379;&#20102;&#36825;&#31181;&#21151;&#33021;&#12290;&#22312;&#21516;&#27493;&#25509;&#25910;&#20013;&#65292;&#25509;&#25910;&#32447;&#31243;&#34987;&#38459;&#22622;&#30452;&#33267;&#33719;&#24471;&#19968;&#20010;&#28040;&#24687;&#65292;&#26377;&#21487;&#33021;&#20986;&#29616;&#32447;&#31243;&#34987;&#26080;&#38480;&#38459;&#22622;&#30340;&#21361;&#38505;&#24773;&#20917;&#12290;&#23646;&#24615; <span class="property">receiveTimeout</span> &#25351;&#23450;&#20102;&#25509;&#25910;&#22120;&#21487;&#31561;&#24453;&#28040;&#24687;&#30340;&#24310;&#26102;&#26102;&#38388;&#12290;
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jms-asynchronousMessageReception"></a>19.4.2.&nbsp;&#24322;&#27493;&#25509;&#25910; - &#28040;&#24687;&#39537;&#21160;&#30340;POJO</h3></div></div><div></div></div><p>&#31867;&#20284;&#20110;EJB&#19990;&#30028;&#37324;&#27969;&#34892;&#30340;&#28040;&#24687;&#39537;&#21160;Bean&#65288;MDB&#65289;&#65292;&#28040;&#24687;&#39537;&#21160;POJO&#65288;MDP&#65289;&#20316;&#20026;JMS&#28040;&#24687;&#30340;&#25509;&#25910;&#22120;&#12290;MDP&#30340;&#19968;&#20010;&#32422;&#26463;&#65288;&#20294;&#20063;&#35831;&#30475;&#19979;&#38754;&#30340;&#26377;&#20851; <tt class="interfacename">javax.jms.MessageListener</tt> &#31867;&#30340;&#35752;&#35770;&#65289;&#26159;&#23427;&#24517;&#39035;&#23454;&#29616; <tt class="interfacename">javax.jms.MessageListener</tt> &#25509;&#21475;&#12290;&#21478;&#22806;&#24403;&#20320;&#30340;POJO&#23558;&#20197;&#22810;&#32447;&#31243;&#30340;&#26041;&#24335;&#25509;&#25910;&#28040;&#24687;&#26102;&#24517;&#39035;&#30830;&#20445;&#20320;&#30340;&#20195;&#30721;&#26159;&#32447;&#31243;-&#23433;&#20840;&#30340;&#12290;
  		</p><p>&#20197;&#19979;&#26159;MDP&#30340;&#19968;&#20010;&#31616;&#21333;&#23454;&#29616;:</p><pre class="programlisting">import javax.jms.JMSException;
import javax.jms.Message;
import javax.jms.MessageListener;
import javax.jms.TextMessage;

public class ExampleListener implements MessageListener {

    public void onMessage(Message message) {
        if (message instanceof TextMessage) {
            try {
                System.out.println(((TextMessage) message).getText());
            }
            catch (JMSException ex) {
                throw new RuntimeException(ex);
            }
        }
        else {
            throw new IllegalArgumentException("Message must be of type TextMessage");
        }
    }
}</pre><p>&#19968;&#26086;&#20320;&#23454;&#29616;&#20102; <tt class="interfacename">MessageListener</tt> &#21518;&#23601;&#21487;&#20197;&#21019;&#24314;&#19968;&#20010;&#28040;&#24687;&#20390;&#21548;&#23481;&#22120;&#12290;
</p><p>&#35831;&#30475;&#19979;&#38754;&#20363;&#23376;&#26159;&#22914;&#20309;&#23450;&#20041;&#21644;&#37197;&#32622;&#19968;&#20010;&#38543;Sping&#21457;&#34892;&#30340;&#28040;&#24687;&#20390;&#21548;&#23481;&#22120;&#30340;&#65288;&#36825;&#20010;&#20363;&#23376;&#29992; <tt class="classname">DefaultMessageListenerContainer</tt>&#65289;
</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">&lt;!-- this is the Message Driven POJO (MDP) --&gt;</span></i>
&lt;bean id="messageListener" class="jmsexample.ExampleListener" /&gt;

<i class="lineannotation"><span class="lineannotation">&lt;!-- and this is the message listener container --&gt;</span></i>
&lt;bean id="jmsContainer" class="org.springframework.jms.listener.DefaultMessageListenerContainer"&gt;
    &lt;property name="connectionFactory" ref="connectionFactory"/&gt;
    &lt;property name="destination" ref="destination"/&gt;
    <span class="bold"><b>&lt;property name="messageListener" ref="messageListener" /&gt;</b></span>
&lt;/bean&gt;</pre><p>&#20851;&#20110;&#21508;&#20010;&#28040;&#24687;&#20390;&#21548;&#23481;&#22120;&#23454;&#29616;&#30340;&#29305;&#33394;&#35831;&#21442;&#38405;&#30456;&#20851;&#30340;Spring Javadoc&#25991;&#26723;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jms-receiving-async-session-aware-message-listener"></a>19.4.3.&nbsp;<tt class="interfacename">SessionAwareMessageListener</tt>&#25509;&#21475;</h3></div></div><div></div></div><p><tt class="interfacename">SessionAwareMessageListener</tt> &#25509;&#21475;&#26159;&#19968;&#20010;Spring&#19987;&#38376;&#29992;&#26469;&#25552;&#20379;&#31867;&#20284;&#20110;JMS <tt class="interfacename">MessageListener</tt> &#30340;&#25509;&#21475;&#65292;&#20063;&#25552;&#20379;&#20102;&#20174;&#25509;&#25910; <tt class="interfacename">Message</tt> &#26469;&#35775;&#38382;JMS <tt class="interfacename">Session</tt> &#30340;&#28040;&#24687;&#22788;&#29702;&#26041;&#27861;&#12290;
</p><pre class="programlisting">package org.springframework.jms.listener;

public interface SessionAwareMessageListener {

    void onMessage(Message message, Session session) <span class="bold"><b>throws JMSException</b></span>;
}</pre><p>&#22914;&#26524;&#20320;&#24076;&#26395;&#20320;&#30340;MDP&#21487;&#20197;&#21709;&#24212;&#25152;&#26377;&#25509;&#25910;&#21040;&#30340;&#28040;&#24687;&#65288;&#20351;&#29992; <tt class="literal">onMessage(Message, Session)</tt> &#26041;&#27861;&#25552;&#20379;&#30340; <tt class="interfacename">Session</tt>&#65289;&#37027;&#20040;&#20320;&#21487;&#20197;&#36873;&#25321;&#35753;&#20320;&#30340;MDP&#23454;&#29616;&#36825;&#20010;&#25509;&#21475;&#65288;&#20248;&#20808;&#20110;&#26631;&#20934;&#30340;JMS <tt class="interfacename">MessageListener</tt> &#25509;&#21475;)&#12290;&#25152;&#26377;&#38543;Spring&#21457;&#34892;&#30340;&#25903;&#25345;MDP&#30340;&#28040;&#24687;&#20390;&#21548;&#23481;&#22120;&#37117;&#25903;&#25345; <tt class="interfacename">MessageListener</tt> &#25110; <tt class="interfacename">SessionAwareMessageListener</tt> &#25509;&#21475;&#30340;&#23454;&#29616;&#12290;&#35201;&#27880;&#24847;&#30340;&#26159;&#23454;&#29616;&#20102; <tt class="interfacename">SessionAwareMessageListener</tt> &#25509;&#21475;&#30340;&#31867;&#36890;&#36807;&#25509;&#21475;&#21644;Spring&#26377;&#20102;&#32806;&#21512;&#12290;&#26159;&#21542;&#36873;&#25321;&#20351;&#29992;&#23427;&#23436;&#20840;&#21462;&#20915;&#20110;&#24320;&#21457;&#32773;&#25110;&#26550;&#26500;&#24072;&#12290;
        </p><p>&#35831;&#27880;&#24847; <tt class="interfacename">SessionAwareMessageListener</tt> &#25509;&#21475;&#30340; <tt class="literal">'onMessage(..)'</tt> &#26041;&#27861;&#20250;&#25243;&#20986; <tt class="classname">JMSException</tt>&#24322;&#24120;&#12290;&#21644;&#26631;&#20934;JMS <tt class="interfacename">MessageListener</tt> &#25509;&#21475;&#30456;&#21453;&#65292;&#24403;&#20351;&#29992; <tt class="interfacename">SessionAwareMessageListener</tt> &#25509;&#21475;&#26102;&#65292;&#23458;&#25143;&#31471;&#20195;&#30721;&#36127;&#36131;&#22788;&#29702;&#20219;&#20309;&#25243;&#20986;&#30340;&#24322;&#24120;&#12290;
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jms-receiving-async-message-listener-adapter"></a>19.4.4.&nbsp;<tt class="classname">MessageListenerAdapter</tt></h3></div></div><div></div></div><p><tt class="classname">MessageListenerAdapter</tt> &#31867;&#26159;Spring&#30340;&#24322;&#27493;&#25903;&#25345;&#28040;&#24687;&#31867;&#20013;&#30340;&#19981;&#21464;&#31867;&#65288;final class&#65289;&#65306;&#31616;&#32780;&#35328;&#20043;&#65292;&#23427;&#20801;&#35768;&#20320;&#20960;&#20046;&#23558; <span class="emphasis"><em>&#20219;&#24847;</em></span> &#19968;&#20010;&#31867;&#20570;&#20026;MDP&#26174;&#38706;&#20986;&#26469;&#65288;&#24403;&#28982;&#26377;&#26576;&#20123;&#38480;&#21046;&#65289;&#12290;
  	    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#22914;&#26524;&#20320;&#20351;&#29992;JMS 1.0.2 API&#65292;&#20320;&#23558;&#20351;&#29992;&#21644; <tt class="classname">MessageListenerAdapter</tt> &#19968;&#26679;&#21151;&#33021;&#30340;&#31867; <tt class="classname">MessageListenerAdapter102</tt>&#12290;
  	        </p></td></tr></tbody></table></div><p>&#32771;&#34385;&#22914;&#19979;&#25509;&#21475;&#23450;&#20041;&#12290;&#27880;&#24847;&#34429;&#28982;&#36825;&#20010;&#25509;&#21475;&#26082;&#19981;&#26159;&#20174; <tt class="interfacename">MessageListener</tt> &#20063;&#19981;&#26159;&#20174; <tt class="interfacename">SessionAwareMessageListener</tt> &#32487;&#25215;&#26469;&#24471;&#65292;&#20294;&#36890;&#36807; <tt class="classname">MessageListenerAdapter</tt> &#31867;&#20381;&#28982;&#21487;&#20197;&#24403;&#20316;&#19968;&#20010;MDP&#26469;&#20351;&#29992;&#12290;&#21516;&#26102;&#20063;&#35831;&#27880;&#24847;&#21508;&#31181;&#28040;&#24687;&#22788;&#29702;&#26041;&#27861;&#26159;&#22914;&#20309;&#26681;&#25454;&#20182;&#20204;&#21487;&#20197;&#25509;&#25910;&#24182;&#22788;&#29702;&#28040;&#24687;&#30340;&#20869;&#23481;&#26469;&#36827;&#34892;&#24378;&#31867;&#22411;&#21305;&#37197;&#30340;&#12290;
        </p><pre class="programlisting">public interface MessageDelegate {

    void handleMessage(String message);

    void handleMessage(Map message);

    void handleMessage(byte[] message);

    void handleMessage(Serializable message);
}</pre><pre class="programlisting">public class DefaultMessageDelegate implements MessageDelegate {
    <i class="lineannotation"><span class="lineannotation">// implementation elided for clarity...</span></i>
}</pre><p>&#29305;&#21035;&#35831;&#27880;&#24847;&#65292;&#19978;&#38754;&#30340; <tt class="interfacename">MessageDelegate</tt> &#25509;&#21475;&#65288;&#19978;&#25991;&#20013; <tt class="classname">DefaultMessageDelegate</tt> &#31867;&#65289;&#30340;&#23454;&#29616;&#23436;&#20840; <span class="emphasis"><em>&#19981;</em></span> &#20381;&#36182;&#20110;JMS&#12290;&#23427;&#26159;&#19968;&#20010;&#30495;&#27491;&#30340;POJO&#65292;&#25105;&#20204;&#21487;&#20197;&#36890;&#36807;&#22914;&#19979;&#37197;&#32622;&#25226;&#23427;&#35774;&#32622;&#25104;MDP&#12290;
        </p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">&lt;!-- this is the Message Driven POJO (MDP) --&gt;</span></i>
<span class="bold"><b>&lt;bean id="messageListener" class="org.springframework.jms.listener.adapter.MessageListenerAdapter"&gt;
    &lt;constructor-arg&gt;
        &lt;bean class="jmsexample.DefaultMessageDelegate"/&gt;
    &lt;/constructor-arg&gt;
&lt;/bean&gt;</b></span>

<i class="lineannotation"><span class="lineannotation">&lt;!-- and this is the message listener container... --&gt;</span></i>
&lt;bean id="jmsContainer" class="org.springframework.jms.listener.DefaultMessageListenerContainer"&gt;
    &lt;property name="connectionFactory" ref="connectionFactory"/&gt;
    &lt;property name="destination" ref="destination"/&gt;
    <span class="bold"><b>&lt;property name="messageListener" ref="messageListener" /&gt;</b></span>
&lt;/bean&gt;</pre><p>&#19979;&#38754;&#26159;&#21478;&#22806;&#19968;&#20010;&#21482;&#33021;&#22788;&#29702;&#25509;&#25910;JMS <tt class="interfacename">TextMessage</tt> &#28040;&#24687;&#30340;MDP&#31034;&#20363;&#12290;&#27880;&#24847;&#28040;&#24687;&#22788;&#29702;&#26041;&#27861;&#26159;&#22914;&#20309;&#23454;&#38469;&#35843;&#29992; <tt class="literal">'receive'</tt> &#65288;&#22312; <tt class="classname">MessageListenerAdapter</tt> &#20013;&#40664;&#35748;&#30340;&#28040;&#24687;&#22788;&#29702;&#26041;&#27861;&#30340;&#21517;&#23383;&#26159; <tt class="literal">'handleMessage'</tt>&#65289;&#30340;&#65292;&#20294;&#26159;&#23427;&#26159;&#21487;&#37197;&#32622;&#30340;&#65288;&#20320;&#19979;&#38754;&#23601;&#23558;&#30475;&#21040;&#65289;&#12290;&#27880;&#24847; <tt class="literal">'receive(..)'</tt> &#26041;&#27861;&#26159;&#22914;&#20309;&#20351;&#29992;&#24378;&#21046;&#31867;&#22411;&#26469;&#21482;&#25509;&#25910;&#21644;&#22788;&#29702;JMS <tt class="interfacename">TextMessage</tt>&#28040;&#24687;&#30340;&#12290;
        </p><pre class="programlisting">public interface TextMessageDelegate {

    void receive(TextMessage message);
}</pre><pre class="programlisting">public class DefaultTextMessageDelegate implements TextMessageDelegate {
    <i class="lineannotation"><span class="lineannotation">// implementation elided for clarity...</span></i>
}</pre><p>&#36741;&#21161;&#30340; <tt class="classname">MessageListenerAdapter</tt> &#31867;&#37197;&#32622;&#25991;&#20214;&#31867;&#20284;&#22914;&#19979;&#65306;
        </p><pre class="programlisting">&lt;bean id="messageListener" class="org.springframework.jms.listener.adapter.MessageListenerAdapter"&gt;
    &lt;constructor-arg&gt;
        &lt;bean class="jmsexample.DefaultTextMessageDelegate"/&gt;
    &lt;/constructor-arg&gt;
    &lt;property name="defaultListenerMethod" value="receive"/&gt;
    <i class="lineannotation"><span class="lineannotation">&lt;!-- we <span class="bold"><b>don't</b></span> want automatic message context extraction --&gt;</span></i>
    &lt;property name="messageConverter"&gt;
        &lt;null/&gt;
    &lt;/property&gt;
&lt;/bean&gt;</pre><p>&#35831;&#27880;&#24847;&#65292;&#22914;&#26524;&#19978;&#38754;&#30340; <tt class="literal">'messageListener'</tt> &#25910;&#21040;&#19968;&#20010;&#19981;&#26159; <tt class="interfacename">TextMessage</tt> &#31867;&#22411;&#30340;JMS <tt class="interfacename">Message</tt>&#65292;&#23558;&#20250;&#20135;&#29983;&#19968;&#20010; <tt class="classname">IllegalStateException</tt> &#24322;&#24120;&#65288;&#38543;&#20043;&#20135;&#29983;&#30340;&#20854;&#20182;&#24322;&#24120;&#21482;&#34987;&#25429;&#33719;&#32780;&#19981;&#22788;&#29702;&#65289;&#12290;
        </p><p><tt class="classname">MessageListenerAdapter</tt> &#36824;&#26377;&#19968;&#20010;&#21151;&#33021;&#23601;&#26159;&#22914;&#26524;&#22788;&#29702;&#26041;&#27861;&#36820;&#22238;&#19968;&#20010;&#38750;&#31354;&#20540;&#65292;&#23427;&#23558;&#33258;&#21160;&#36820;&#22238;&#19968;&#20010;&#21709;&#24212; <tt class="interfacename">&#28040;&#24687;</tt>&#12290;
        </p><p>&#35831;&#30475;&#19979;&#38754;&#30340;&#25509;&#21475;&#21450;&#20854;&#23454;&#29616;&#65306;</p><pre class="programlisting">public interface ResponsiveTextMessageDelegate {

    <i class="lineannotation"><span class="lineannotation"><span class="bold"><b>// notice the return type...</b></span></span></i>
    String receive(TextMessage message);
}</pre><pre class="programlisting">public class DefaultResponsiveTextMessageDelegate implements ResponsiveTextMessageDelegate {
    <i class="lineannotation"><span class="lineannotation">// implementation elided for clarity...</span></i>
}</pre><p>&#22914;&#26524;&#19978;&#38754;&#30340; <tt class="classname">DefaultResponsiveTextMessageDelegate</tt> &#21644; <tt class="classname">MessageListenerAdapter</tt> &#32852;&#21512;&#20351;&#29992;&#65292;&#37027;&#20040;&#20219;&#24847;&#20174;&#25191;&#34892; <tt class="literal">'receive(..)'</tt> &#26041;&#27861;&#36820;&#22238;&#30340;&#38750;&#31354;&#20540;&#37117;&#23558;&#65288;&#32570;&#30465;&#24773;&#20917;&#19979;&#65289;&#36716;&#25442;&#25104;&#19968;&#20010; <tt class="interfacename">TextMessage</tt>&#12290;&#36825;&#20010;&#36820;&#22238;&#30340; <tt class="interfacename">TextMessage</tt> &#23558;&#34987;&#21457;&#36865;&#21040;&#21407;&#26469;&#30340; <tt class="interfacename">Message</tt> &#20013;JMS Reply-To&#23646;&#24615;&#23450;&#20041;&#30340; <tt class="interfacename">&#30446;&#30340;&#22320;</tt>&#65288;&#22914;&#26524;&#23384;&#22312;&#65289;&#65292;&#25110;&#32773;&#26159; <tt class="classname">MessageListenerAdapter</tt> &#35774;&#32622;&#65288;&#22914;&#26524;&#37197;&#32622;&#20102;&#65289;&#30340;&#32570;&#30465; <tt class="interfacename">&#30446;&#30340;&#22320;</tt>&#65307;&#22914;&#26524;&#27809;&#26377;&#23450;&#20041; <tt class="interfacename">&#30446;&#30340;&#22320;</tt>&#65292;&#37027;&#20040;&#23558;&#20135;&#29983;&#19968;&#20010; <tt class="classname">InvalidDestinationException</tt> &#24322;&#24120;&#65288;&#27492;&#24322;&#24120;&#23558;&#19981;&#20250;&#21482;&#34987;&#25429;&#33719;&#32780;&#19981;&#22788;&#29702;&#65292;&#23427; <span class="emphasis"><em>&#23558;</em></span>&#27839;&#30528;&#35843;&#29992;&#22534;&#26632;&#19978;&#20256;&#65289;&#12290;
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jms-tx-participation"></a>19.4.5.&nbsp;&#20107;&#21153;&#20013;&#30340;&#28040;&#24687;&#22788;&#29702;</h3></div></div><div></div></div><p>&#22312;&#28040;&#24687;&#30417;&#21548;&#22120;&#30340;&#35843;&#29992;&#20013;&#20351;&#29992;&#20107;&#21153;&#21482;&#38656;&#35201;&#37325;&#26032;&#37197;&#32622;&#30417;&#21548;&#22120;&#23481;&#22120;</p><p>&#36890;&#36807;&#30417;&#21548;&#22120;&#23481;&#22120;&#23450;&#20041;&#20013;&#30340; <tt class="literal">sessionTransacted</tt> &#26631;&#35760;&#21487;&#20197;&#36731;&#26494;&#30340;&#28608;&#27963;&#26412;&#22320;&#36164;&#28304;&#20107;&#21153;&#12290;&#27599;&#27425;&#28040;&#24687;&#30417;&#21548;&#22120;&#30340;&#35843;&#29992;&#37117;&#22312;&#28608;&#27963;&#30340;JMS&#20107;&#21153;&#20013;&#25191;&#34892;&#65292;&#25191;&#34892;&#22833;&#36133;&#26102;&#65292;&#28040;&#24687;&#25509;&#25910;&#23558;&#21457;&#29983;&#22238;&#28378;&#12290;&#36825;&#20010;&#26412;&#22320;&#20107;&#21153;&#36824;&#23558;&#21253;&#21547;&#21709;&#24212;&#20449;&#24687;&#30340;&#21457;&#36865;&#65288;&#36890;&#36807; <tt class="interfacename">SessionAwareMessageListener</tt>&#65289;&#65292;&#20294;&#20854;&#23427;&#36164;&#28304;&#30340;&#25805;&#20316;&#65288;&#20363;&#22914;&#35775;&#38382;&#25968;&#25454;&#24211;&#65289;&#26159;&#29420;&#31435;&#30340;&#12290;&#32463;&#24120;&#20250;&#21457;&#29983;&#31867;&#20284;&#20110;&#25968;&#25454;&#24211;&#22788;&#29702;&#24050;&#25552;&#20132;&#20294;&#28040;&#24687;&#22788;&#29702;&#25552;&#20132;&#22833;&#36133;&#30340;&#24773;&#20917;&#65292;&#22240;&#27492;&#38656;&#35201;&#22312;&#30417;&#21548;&#22120;&#30340;&#23454;&#29616;&#20013;&#36827;&#34892;&#37325;&#22797;&#28040;&#24687;&#30340;&#26816;&#27979;&#12290;
		</p><pre class="programlisting">&lt;bean id="jmsContainer" class="org.springframework.jms.listener.DefaultMessageListenerContainer"&gt;
    &lt;property name="connectionFactory" ref="connectionFactory"/&gt;
    &lt;property name="destination" ref="destination"/&gt;
    &lt;property name="messageListener" ref="messageListener"/&gt;
    <span class="bold"><b>&lt;property name="sessionTransacted" value="true"/&gt;</b></span>
&lt;/bean&gt;</pre><p>&#24403;&#21442;&#19982;&#22806;&#37096;&#31649;&#29702;&#30340;&#20107;&#21153;&#26102;&#65292;&#20320;&#38656;&#35201;&#20351;&#29992;&#25903;&#25345;&#22806;&#26469;&#20107;&#21153;&#30340;&#30417;&#21548;&#22120;&#23481;&#22120;&#65306;&#36890;&#24120;&#26159; <tt class="classname">DefaultMessageListenerContainer</tt> &#26469;&#37197;&#32622;&#20107;&#21153;&#31649;&#29702;&#22120;&#12290;
			</p><p>&#21442;&#19982;XA&#20107;&#21153;&#26102;&#65292;&#28040;&#24687;&#30417;&#21548;&#22120;&#23481;&#22120;&#38656;&#35201;&#37197;&#32622; <tt class="classname">JtaTransactionManager</tt>&#65288;&#40664;
&#35748;&#20250;&#22996;&#25176;&#32473;J2EE&#26381;&#21153;&#22120;&#20107;&#21153;&#23376;&#31995;&#32479;&#65289;&#12290;&#27880;&#24847;&#20197;&#19979;JMS
ConnectionFactory&#38656;&#35201;&#20855;&#26377;XA&#33021;&#21147;&#24182;&#27880;&#20876;JTA&#20107;&#21153;&#21327;&#35843;&#22120;&#65281;&#65288;&#21442;&#32771;&#20320;&#25152;&#20351;&#29992;&#30340;J2EE&#26381;&#21153;&#22120;&#20013;JNDI&#36164;&#28304;&#30340;&#37197;&#32622;&#12290;&#65289;&#36825;&#26679;&#65292;&#28040;&#24687;&#25509;&#25910;&#23601;
&#20687;&#25968;&#25454;&#24211;&#35775;&#38382;&#19968;&#26679;&#20316;&#20026;&#21516;&#19968;&#20010;&#20107;&#21153;&#30340;&#19968;&#37096;&#20998;&#65288;&#20855;&#26377;&#32479;&#19968;&#25552;&#20132;&#30340;&#35821;&#20041;&#65292;&#20165;&#20165;&#22686;&#21152;&#20102;XA&#20107;&#21153;&#26085;&#24535;&#30340;&#39069;&#22806;&#24320;&#38144;&#65289;&#12290; </p><pre class="programlisting">&lt;bean id="transactionManager" class="org.springframework.transaction.jta.JtaTransactionManager"/&gt;
</pre><p>&#28982;&#21518;&#20320;&#21482;&#38656;&#35201;&#25226;&#23427;&#28155;&#21152;&#21040;&#26089;&#20808;&#37197;&#32622;&#22909;&#30340;&#23481;&#22120;&#20013;&#12290;&#36825;&#20010;&#23481;&#22120;&#23558;&#22788;&#29702;&#21097;&#19979;&#30340;&#20107;&#24773;&#12290;</p><pre class="programlisting">&lt;bean id="jmsContainer" class="org.springframework.jms.listener.DefaultMessageListenerContainer"&gt;
    &lt;property name="connectionFactory" ref="connectionFactory"/&gt;
    &lt;property name="destination" ref="destination"/&gt;
    &lt;property name="messageListener" ref="messageListener"/&gt;
    <span class="bold"><b>&lt;property name="transactionManager" ref="transactionManager"/&gt;</b></span>
&lt;/bean&gt;</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="jms-jca-message-endpoint-manager"></a>19.5.&nbsp;JCA&#28040;&#24687;&#31471;&#28857;&#30340;&#25903;&#25345;</h2></div></div><div></div></div><p>&#20174;Spring2.5&#29256;&#26412;&#24320;&#22987;&#65292;Spring&#20063;&#25552;&#20379;&#20102;&#22522;&#20110;JCA <tt class="interfacename">MessageListener</tt> &#23481;&#22120;&#30340;&#25903;&#25345;&#12290;
     <tt class="classname">JmsMessageEndpointManager</tt> &#23558;&#26681;&#25454;&#20379;&#24212;&#32773; <tt class="interfacename">ResourceAdapter</tt> &#30340;&#31867;&#21517;&#33258;&#21160;&#22320;&#20915;&#23450; <tt class="interfacename">ActivationSpec</tt> &#31867;&#21517;&#12290;&#22240;&#27492;&#65292;&#36890;&#24120;&#23427;&#21482;&#25552;&#20379;&#22914;&#19979;&#20363;&#25152;&#31034;&#30340;Spring&#30340;&#36890;&#29992; <tt class="classname">JmsActivationSpecConfig</tt> &#12290;
    </p><pre class="programlisting">&lt;bean class="org.springframework.jms.listener.endpoint.JmsMessageEndpointManager"&gt;
    &lt;property name="resourceAdapter" ref="resourceAdapter"/&gt;
    &lt;property name="jmsActivationSpecConfig"&gt;
        &lt;bean class="org.springframework.jms.listener.endpoint.JmsActivationSpecConfig"&gt;
            &lt;property name="destinationName" value="myQueue"/&gt;
        &lt;/bean&gt;
    &lt;/property&gt;
    &lt;property name="messageListener" ref="myMessageListener"/&gt;
&lt;/bean&gt;</pre><p>&#20351;&#29992;Spring&#30340; <tt class="classname">ResourceAdapterFactoryBean</tt>&#65292;
    &#30446;&#26631; <tt class="interfacename">ResourceAdapter</tt> &#21487;&#20197;&#20687;&#19979;&#20363;&#25551;&#36848;&#30340;&#37027;&#26679;&#26412;&#22320;&#37197;&#32622;&#12290;
    &#22312;&#19968;&#20123;&#29615;&#22659;&#37324;&#65288;&#22914;WebLogic&#65289;&#20063;&#21487;&#20197;&#36890;&#36807;JNDI&#26597;&#25214;&#26469;&#23436;&#25104;&#12290;
    </p><pre class="programlisting">&lt;bean id="resourceAdapter" class="org.springframework.jca.support.ResourceAdapterFactoryBean"&gt;
    &lt;property name="resourceAdapter"&gt;
        &lt;bean class="org.apache.activemq.ra.ActiveMQResourceAdapter"&gt;
            &lt;property name="serverUrl" value="tcp://localhost:61616"/&gt;
        &lt;/bean&gt;
    &lt;/property&gt;
    &lt;property name="workManager"&gt;
        &lt;bean class="org.springframework.jca.work.SimpleTaskWorkManager"/&gt;
    &lt;/property&gt;
&lt;/bean&gt;</pre><p>&#35831;&#21442;&#32771; <tt class="classname">JmsMessageEndpointManager</tt>&#12289;<tt class="classname">JmsActivationSpecConfig</tt> &#21644; <tt class="classname">ResourceAdapterFactoryBean</tt> &#37096;&#20998;&#30340;JavaDoc&#65292;&#20197;&#33719;&#24471;&#26356;&#35814;&#32454;&#30340;&#20449;&#24687;&#12290;
    </p><p>Spring&#20063;&#25552;&#20379;&#20102;&#24182;&#19981;&#19982;JMS&#32465;&#23450;&#30340;&#36890;&#29992;JCA&#28040;&#24687;&#31471;&#28857;&#31649;&#29702;&#22120;&#65306;
    <tt class="classname">org.springframework.jca.endpoint.GenericMessageEndpointManager</tt>&#12290;
    &#23427;&#20801;&#35768;&#20351;&#29992;&#20219;&#20309;&#31867;&#22411;&#30340;&#28040;&#24687;&#30417;&#21548;&#22120;&#65288;&#20363;&#22914;CCI MessageListener&#65289;&#21644;&#20219;&#20309;&#25552;&#20379;&#32773;&#29305;&#23450;&#30340;ActivationSpec&#23545;&#35937;&#12290;&#20174;&#25152;&#28041;&#21450;&#30340;JCA&#25552;&#20379;&#32773;&#30340;&#25991;&#26723;&#21487;&#20197;&#25214;&#21040;&#36825;&#20010;&#36830;&#25509;&#22120;&#30340;&#23454;&#38469;&#33021;&#21147;&#65292;&#20174; <tt class="classname">GenericMessageEndpointManager</tt> &#30340;JavaDoc&#20013;&#21487;&#20197;&#25214;&#21040;Spring&#29305;&#26377;&#30340;&#37197;&#32622;&#32454;&#33410;&#12290;
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#22522;
&#20110;JCA&#30340;&#28040;&#24687;&#31471;&#28857;&#31649;&#29702;&#22120;&#19982;EJB 2.1&#30340;Message-Driven Beans&#24456;&#30456;&#20284;&#65292;&#23427;&#20351;&#29992;&#20102;&#30456;&#21516;&#30340;&#36164;&#28304;&#25552;&#20379;&#32773;&#32422;&#23450;&#12290;&#20687;EJB 2.1
MDB&#19968;&#26679;&#65292;&#20219;&#20309;&#34987;JCA&#25552;&#20379;&#32773;&#25903;&#25345;&#30340;&#28040;&#24687;&#30417;&#21548;&#22120;&#25509;&#21475;&#37117;&#21487;&#20197;&#22312;Spring
Context&#20013;&#20351;&#29992;&#12290;&#23613;&#31649;&#22914;&#27492;&#65292;Spring&#20173;&#20026;JMS&#25552;&#20379;&#20102;&#26174;&#24335;&#30340;&#8220;&#26041;&#20415;&#30340;&#8221;&#25903;&#25345;&#65292;&#24456;&#26174;&#28982;&#26159;&#22240;&#20026;JMS&#26159;JCA&#31471;&#28857;&#31649;&#29702;&#32422;&#23450;&#20013;&#26368;&#36890;&#29992;&#30340;&#31471;&#28857;API&#12290;
</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="jms-namespace"></a>19.6.&nbsp;JMS&#21629;&#21517;&#31354;&#38388;&#25903;&#25345;</h2></div></div><div></div></div><p>Spring 2.5&#24341;&#20837;&#20102;XML&#21629;&#21517;&#31354;&#38388;&#20197;&#31616;&#21270;JMS&#30340;&#37197;&#32622;&#12290;&#20351;&#29992;JMS&#21629;&#21517;&#31354;&#38388;&#20803;&#32032;&#26102;&#65292;&#38656;&#35201;&#24341;&#29992;&#22914;&#19979;&#30340;JMS Schema&#65306;
	</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       <span class="bold"><b>xmlns:jms="http://www.springframework.org/schema/jms"</b></span>
       xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
<span class="bold"><b>http://www.springframework.org/schema/jms http://www.springframework.org/schema/jms/spring-jms-2.5.xsd"</b></span>&gt;

<i class="lineannotation"><span class="lineannotation">&lt;!-- <tt class="literal">&lt;bean/&gt;</tt> definitions here --&gt;</span></i>

&lt;/beans&gt;</pre><p>&#36825;&#20010;&#21629;&#21517;&#31354;&#38388;&#30001;&#20004;&#32423;&#20803;&#32032;&#32452;&#25104;&#65306;<tt class="literal">&lt;listener-container/&gt;</tt> &#21644; <tt class="literal">&lt;jca-listener-container/&gt;</tt>&#65292;&#23427;&#20204;&#37117;&#21487;&#20197;&#21253;&#21547;&#19968;&#20010;&#25110;&#36825;&#20010;&#22810;&#20010; <tt class="literal">&lt;listener/&gt;</tt> &#23376;&#20803;&#32032;&#12290;&#19979;&#38754;&#26159;&#19968;&#20010;&#22522;&#26412;&#37197;&#32622;&#30340;&#31034;&#20363;&#65292;&#21253;&#21547;&#20004;&#20010;&#30417;&#21548;&#22120;&#12290;</p><pre class="programlisting">&lt;jms:listener-container&gt;

    &lt;jms:listener destination="queue.orders" ref="orderService" method="placeOrder"/&gt;

    &lt;jms:listener destination="queue.confirmations" ref="confirmationLogger" method="log"/&gt;

&lt;/jms:listener-container&gt;</pre><p>&#19978;&#38754;&#30340;&#20363;&#23376;&#31561;&#21516;&#20110;&#22312; <a href="#jms-receiving-async-message-listener-adapter" title="19.4.4.&nbsp;MessageListenerAdapter">Section&nbsp;19.4.4, &#8220;MessageListenerAdapter&#8221;</a> &#30340;&#31034;&#20363;&#20013;&#65292;&#23450;&#20041;&#20004;&#20010;&#19981;&#21516;&#30340;&#30417;&#21548;&#22120;&#23481;&#22120;&#21644;&#20004;&#20010;&#19981;&#21516;&#30340; <tt class="classname">MessageListenerAdapter</tt> &#12290;&#38500;&#20102;&#19978;&#38754;&#30340;&#23646;&#24615;&#22806;&#65292;<tt class="literal">listener</tt> &#20803;&#32032;&#36824;&#20855;&#26377;&#20960;&#20010;&#21487;&#36873;&#30340;&#23646;&#24615;&#12290;&#19979;&#38754;&#30340;&#34920;&#26684;&#21015;&#20986;&#20102;&#25152;&#26377;&#30340;&#23646;&#24615;&#65306;
   </p><div class="table"><a name="jms-namespace-listener-tbl"></a><p class="title"><b>Table&nbsp;19.1.&nbsp;JMS <tt class="literal">listener</tt> &#20803;&#32032;&#30340;&#23646;&#24615;</b></p><table summary="JMS listener &#20803;&#32032;&#30340;&#23646;&#24615;" border="1"><colgroup><col><col></colgroup><thead><tr><th>&#23646;&#24615;</th><th>&#25551;&#36848;</th></tr></thead><tbody><tr><td>id</td><td><p>&#30417;&#21548;&#22120;&#23481;&#22120;&#30340;Bean&#21517;&#31216;&#12290;&#22914;&#26524;&#27809;&#26377;&#25351;&#23450;&#65292;&#23558;&#33258;&#21160;&#29983;&#25104;&#19968;&#20010;Bean&#21517;&#31216;&#12290;</p></td></tr><tr><td>destination <span class="bold"><b>&#65288;&#24517;&#39035;&#65289;</b></span></td><td><p>&#30417;&#21548;&#22120;&#30446;&#30340;&#22320;&#30340;&#21517;&#31216;&#65292;&#30001; <tt class="interfacename">DestinationResolver</tt> &#30340;&#31574;&#30053;&#20915;&#23450;&#12290;</p></td></tr><tr><td>ref <span class="bold"><b>&#65288;&#24517;&#39035;&#65289;</b></span></td><td><p>&#22788;&#29702;&#23545;&#35937;&#30340;Bean&#21517;&#31216;</p></td></tr><tr><td>method</td><td><p>&#22788;&#29702;&#22120;&#20013;&#34987;&#35843;&#29992;&#30340;&#26041;&#27861;&#21517;&#12290;&#22914;&#26524; <tt class="literal">ref</tt> &#25351;&#21521;
                        <tt class="interfacename">MessageListener</tt> &#25110;&#32773; Spring
                        <tt class="interfacename">SessionAwareMessageListener</tt>&#65292;&#21017;&#36825;&#20010;&#23646;&#24615;&#21487;&#20197;&#34987;&#24573;&#30053;&#12290;
                        </p></td></tr><tr><td>response-destination</td><td><p>&#40664;&#35748;&#30340;&#21709;&#24212;&#30446;&#30340;&#22320;&#26159;&#21457;&#36865;&#21709;&#24212;&#28040;&#24687;&#25269;&#36798;&#30340;&#30446;&#30340;&#22320;&#12290; &#36825;&#29992;&#20110;&#35831;&#27714;&#28040;&#24687;&#27809;&#26377;&#21253;&#21547;"JMSReplyTo"&#22495;&#30340;&#24773;&#20917;&#12290;&#21709;&#24212;&#30446;&#30340;&#22320;&#31867;&#22411;&#34987;&#30417;&#21548;&#22120;&#23481;&#22120;&#30340;"destination-type"&#23646;&#24615;&#20915;&#23450;&#12290;&#35760;&#20303;&#65306;&#36825;&#20165;&#20165;&#36866;&#29992;&#20110;&#26377;&#36820;&#22238;&#20540;&#30340;&#30417;&#21548;&#22120;&#26041;&#27861;&#65292;&#22240;&#20026;&#27599;&#20010;&#32467;&#26524;&#23545;&#35937;&#37117;&#20250;&#34987;&#36716;&#21270;&#25104;&#21709;&#24212;&#28040;&#24687;&#12290;
                        </p></td></tr><tr><td>subscription</td><td><p>&#25345;&#20037;&#35746;&#38405;&#30340;&#21517;&#31216;&#65292;&#22914;&#26524;&#38656;&#35201;&#30340;&#35805;&#12290;</p></td></tr><tr><td>selector</td><td><p>&#30417;&#21548;&#22120;&#30340;&#19968;&#20010;&#21487;&#36873;&#30340;&#28040;&#24687;&#36873;&#25321;&#22120;&#12290;</p></td></tr></tbody></table></div><p><tt class="literal">&lt;listener-container/&gt;</tt>&#20803;&#32032;&#20063;&#26377;&#20960;&#20010;&#21487;&#36873;&#30340;&#23646;&#24615;&#12290;
    &#36825;&#20123;&#23646;&#24615;&#20801;&#35768;&#20687; &#22522;&#26412;&#30340; JMS&#35774;&#32622;&#21644;&#36164;&#28304;&#24341;&#29992;&#19968;&#26679;&#26469;&#23450;&#20041;&#19981;&#21516;&#30340;&#31574;&#30053; &#65288;&#20363;&#22914;
    <span class="property">taskExecutor</span> &#21644; <span class="property">destinationResolver</span>&#65289;&#12290;
    &#20351;&#29992;&#36825;&#20123;&#23646;&#24615;&#65292;&#21487;&#20197;&#23450;&#20041;&#24456;&#24191;&#27867;&#30340;&#23450;&#21046;&#30417;&#21548;&#22120;&#23481;&#22120;&#65292;&#21516;&#26102;&#20173;&#20139;&#26377;&#21629;&#21517;&#31354;&#38388;&#30340;&#20415;&#21033;&#12290;</p><pre class="programlisting">&lt;jms:listener-container connection-factory="myConnectionFactory"
                        task-executor="myTaskExecutor"
                        destination-resolver="myDestinationResolver"
                        transaction-manager="myTransactionManager"
                        concurrency="10"&gt;

    &lt;jms:listener destination="queue.orders" ref="orderService" method="placeOrder"/&gt;

    &lt;jms:listener destination="queue.confirmations" ref="confirmationLogger" method="log"/&gt;

&lt;/jms:listener-container&gt;</pre><p>&#19979;&#38754;&#30340;&#34920;&#26684;&#25551;&#36848;&#20102;&#25152;&#26377;&#21487;&#29992;&#30340;&#23646;&#24615;&#12290;&#21442;&#32771; <tt class="classname">AbstractMessageListenerContainer</tt> &#31867;&#21644;&#20855;&#20307;&#23376;&#31867;&#30340;Javadoc&#26469;&#20102;&#35299;&#27599;&#20010;&#23646;&#24615;&#30340;&#32454;&#33410;&#12290;&#36825;&#37096;&#20998;&#30340;Javadoc&#20063;&#25552;&#39640;&#37027;&#20010;&#20102;&#20107;&#21153;&#36873;&#25321;&#21644;&#28040;&#24687;&#20256;&#36755;&#22330;&#26223;&#30340;&#35752;&#35770;&#12290;</p><div class="table"><a name="jms-namespace-listener-container-tbl"></a><p class="title"><b>Table&nbsp;19.2.&nbsp;JMS <tt class="literal">&lt;listener-container/&gt;</tt> &#20803;&#32032;&#30340;&#23646;&#24615;</b></p><table summary="JMS &lt;listener-container/&gt; &#20803;&#32032;&#30340;&#23646;&#24615;" border="1"><colgroup><col><col></colgroup><thead><tr><th>&#23646;&#24615;</th><th>&#25551;&#36848;</th></tr></thead><tbody><tr><td>container-type</td><td><p>&#30417;&#21548;&#22120;&#23481;&#22120;&#30340;&#31867;&#22411;&#12290;&#21487;&#29992;&#30340;&#36873;&#39033;&#26159;&#65306; 
                        <tt class="literal">default</tt>&#12289;<tt class="literal">simple</tt>&#12289;<tt class="literal">default102</tt> &#25110;&#32773; <tt class="literal">simple102</tt>
                        &#65288;&#40664;&#35748;&#20540;&#26159; <tt class="literal">'default'</tt>&#65289;&#12290;</p></td></tr><tr><td>connection-factory</td><td><p>JMS <tt class="interfacename">ConnectionFactory</tt> Bean&#30340;&#24341;&#29992;&#65288;&#40664;&#35748;&#30340;Bean&#21517;&#31216;&#26159; <tt class="literal">'connectionFactory'</tt>&#65289;&#12290;</p></td></tr><tr><td>task-executor</td><td><p>JMS&#30417;&#21548;&#22120;&#35843;&#29992;&#32773;Spring <tt class="interfacename">TaskExecutor</tt>
                      &#30340;&#24341;&#29992;&#12290;</p></td></tr><tr><td>destination-resolver</td><td><p><tt class="interfacename">DestinationResolver</tt> &#31574;&#30053;&#30340;&#24341;&#29992;&#65292;&#29992;&#20197;&#35299;&#26512;JMS <tt class="interfacename">Destinations</tt>&#12290;
                        </p></td></tr><tr><td>message-converter</td><td><p><tt class="interfacename">MessageConverter</tt>
                        &#31574;&#30053;&#30340;&#24341;&#29992;&#65292;&#29992;&#20197;&#36716;&#25442;JMS Messages &#25104;&#30417;&#21548;&#22120;&#26041;&#27861;&#30340;&#21442;&#25968;&#12290;&#40664;&#35748;&#20540;&#26159; <tt class="classname">SimpleMessageConverter</tt>&#12290;</p></td></tr><tr><td>destination-type</td><td><p>&#30417;&#21548;&#22120;&#30340;JMS&#30446;&#30340;&#22320;&#31867;&#22411;&#12290;&#21487;&#29992;&#30340;&#36873;&#39033;&#21253;&#21547;&#65306;
                        <tt class="literal">queue</tt>&#12289;<tt class="literal">topic</tt> &#25110;&#32773; <tt class="literal">durableTopic</tt> &#65288;&#40664;&#35748;&#20540;&#26159; <tt class="literal">'queue'</tt>&#65289;&#12290;</p></td></tr><tr><td>client-id</td><td><p>&#36825;&#20010;&#30417;&#21548;&#22120;&#23481;&#22120;&#22312;JMS&#23458;&#25143;&#31471;&#30340;id&#12290;</p></td></tr><tr><td>acknowledge</td><td><p>&#26412;&#22320;JMS&#24212;&#31572;&#27169;&#24335;&#12290;&#21487;&#29992;&#30340;&#36873;&#39033;&#21253;&#21547;&#65306;
                        <tt class="literal">auto</tt>&#12289;<tt class="literal">client</tt>&#12289;<tt class="literal">dups-ok</tt> &#25110;&#32773; <tt class="literal">transacted</tt>
                        &#65288;&#40664;&#35748;&#20540;&#26159; <tt class="literal">'auto'</tt>&#65289;&#12290;
                        <tt class="literal">'transacted'</tt> &#30340;&#20540;&#21487;&#28608;&#27963;&#26412;&#22320;&#20107;&#21153;&#24615; <tt class="interfacename">Session</tt>&#12290;
                        &#20063;&#21487;&#20197;&#36890;&#36807;&#25351;&#23450;&#19979;&#38754;&#20171;&#32461;&#30340; <tt class="literal">transaction-manager</tt> &#23646;&#24615;&#12290;</p></td></tr><tr><td>transaction-manager</td><td><p>Spring <tt class="interfacename">PlatformTransactionManager</tt> &#30340;&#24341;&#29992;&#12290;</p></td></tr><tr><td>concurrency</td><td><p>&#27599;&#20010;&#30417;&#21548;&#22120;&#21487;&#28608;&#27963;&#30340;Session&#26368;&#22823;&#24182;&#21457;&#25968;&#12290;</p></td></tr><tr><td>prefetch</td><td><p>&#21152;&#36733;&#36827;&#27599;&#20010;Session&#30340;&#26368;&#22823;&#28040;&#24687;&#25968;&#12290;&#35760;&#20303;&#22686;&#21152;&#36825;&#20010;&#20540;&#20250;&#36896;&#25104;&#24182;&#21457;&#31354;&#38386;&#12290;</p></td></tr></tbody></table></div><p>&#20351;&#29992;&#8220;jms&#8221; Schema&#25903;&#25345;&#26469;&#37197;&#32622;&#22522;&#20110;JCA&#30340;&#30417;&#21548;&#22120;&#23481;&#22120;&#24456;&#30456;&#20284;&#12290;</p><pre class="programlisting">&lt;jms:jca-listener-container resource-adapter="myResourceAdapter"
                            destination-resolver="myDestinationResolver"
                            transaction-manager="myTransactionManager"
                            concurrency="10"&gt;

    &lt;jms:listener destination="queue.orders" ref="myMessageListener"/&gt;

&lt;/jms:jca-listener-container&gt;</pre><p>JCA&#21487;&#29992;&#30340;&#37197;&#32622;&#36873;&#39033;&#25551;&#36848;&#22914;&#19979;&#34920;&#65306;</p><div class="table"><a name="jms-namespace-jca-listener-container-tbl"></a><p class="title"><b>Table&nbsp;19.3.&nbsp;JMS <tt class="literal">&lt;jca-listener-container/&gt;</tt> &#20803;&#32032;&#30340;&#23646;&#24615;</b></p><table summary="JMS &lt;jca-listener-container/&gt; &#20803;&#32032;&#30340;&#23646;&#24615;" border="1"><colgroup><col><col></colgroup><thead><tr><th>&#23646;&#24615;</th><th>&#25551;&#36848;</th></tr></thead><tbody><tr><td>resource-adapter</td><td><p>JCA <tt class="interfacename">ResourceAdapter</tt> Bean &#30340;&#19968;&#20010;&#24341;&#29992;&#65288;&#40664;&#35748;&#30340;Bean&#21517;&#31216;&#26159;<tt class="literal">'resourceAdapter'</tt>&#65289;&#12290;</p></td></tr><tr><td>activation-spec-factory</td><td><p><tt class="interfacename">JmsActivationSpecFactory</tt> &#30340;&#19968;&#20010;&#24341;&#29992;&#12290;
                        &#40664;&#35748;&#33258;&#21160;&#26816;&#27979;JMS&#25552;&#20379;&#32773;&#21644;&#23427;&#30340; <tt class="interfacename">ActivationSpec</tt> &#31867;
                        &#65288;&#21442;&#32771; <tt class="classname">DefaultJmsActivationSpecFactory</tt>&#65289;</p></td></tr><tr><td>destination-resolver</td><td><p><tt class="interfacename">DestinationResolver</tt> &#31574;&#30053;&#30340;&#24341;&#29992;&#65292;&#29992;&#20197;&#35299;&#26512;JMS <tt class="interfacename">Destinations</tt>&#12290;
                        </p></td></tr><tr><td>message-converter</td><td><p><tt class="interfacename">MessageConverter</tt> &#31574;&#30053;&#30340;&#24341;&#29992;&#65292;&#29992;&#20197;&#36716;&#25442;JMS Messages &#25104;&#30417;&#21548;&#22120;&#26041;&#27861;&#21442;&#25968;&#12290;
                        &#40664;&#35748;&#20540;&#26159; <tt class="classname">SimpleMessageConverter</tt>&#12290;
                        </p></td></tr><tr><td>destination-type</td><td><p>&#30417;&#21548;&#22120;&#30340;JMS&#30446;&#30340;&#22320;&#31867;&#22411;&#12290;&#21487;&#29992;&#30340;&#36873;&#39033;&#21253;&#21547; <tt class="literal">queue</tt>&#12289;<tt class="literal">topic</tt> &#25110;&#32773; <tt class="literal">durableTopic</tt>
                        &#40664;&#35748;&#26159; <tt class="literal">'queue'</tt>&#65289;&#12290;</p></td></tr><tr><td>client-id</td><td><p>&#36825;&#20010;&#30417;&#21548;&#22120;&#23481;&#22120;&#22312;JMS&#23458;&#25143;&#31471;&#30340;id&#12290;</p></td></tr><tr><td>acknowledge</td><td><p>&#26412;&#22320;JMS&#24212;&#31572;&#27169;&#24335;&#12290;&#21487;&#29992;&#30340;&#36873;&#39033;&#21253;&#21547;&#65306;<tt class="literal">auto</tt>&#12289;<tt class="literal">client</tt>&#12289;<tt class="literal">dups-ok</tt> &#25110;&#32773; <tt class="literal">transacted</tt>
                        &#65288;&#40664;&#35748;&#20540;&#26159; <tt class="literal">'auto'</tt>&#65289;&#12290;
                          <tt class="literal">'transacted'</tt> &#30340;&#20540;&#21487;&#28608;&#27963;&#26412;&#22320;&#20107;&#21153;&#24615; <tt class="interfacename">Session</tt>&#12290;
                          &#20063;&#21487;&#20197;&#36890;&#36807;&#25351;&#23450;&#19979;&#38754;&#20171;&#32461;&#30340; <tt class="literal">transaction-manager</tt> &#23646;&#24615;</p></td></tr><tr><td>transaction-manager</td><td><p>Spring <tt class="classname">JtaTransactionManager</tt>
                        &#25110;&#32773; <tt class="interfacename">javax.transaction.TransactionManager</tt> &#30340;&#24341;&#29992;&#65292;&#29992;&#20197;&#20026;&#20256;&#36827;&#30340;&#28040;&#24687;&#24212;&#29992;XA&#20107;&#21153;&#12290;
                        &#22914;&#26524;&#27809;&#26377;&#25351;&#23450;&#65292;&#23558;&#20351;&#29992;&#26412;&#22320;&#24212;&#31572;&#27169;&#22411;&#65288;&#21442;&#35265;&#8220;acknowledge&#8221;&#23646;&#24615;&#65289;&#12290;
                        </p></td></tr><tr><td>concurrency</td><td><p>&#27599;&#20010;&#30417;&#21548;&#22120;&#21487;&#28608;&#27963;&#30340;Session&#26368;&#22823;&#24182;&#21457;&#25968;&#12290;</p></td></tr><tr><td>prefetch</td><td><p>&#21152;&#36733;&#36827;&#27599;&#20010;Session&#30340;&#26368;&#22823;&#28040;&#24687;&#25968;&#12290;&#35760;&#20303;&#22686;&#21152;&#36825;&#20010;&#20540;&#20250;&#36896;&#25104;&#24182;&#21457;&#31354;&#38386;&#12290;</p></td></tr></tbody></table></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="jmx"></a>Chapter&nbsp;20.&nbsp;JMX</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="jmx-introduction"></a>20.1.&nbsp;&#20171;&#32461;</h2></div></div><div></div></div><p>Spring&#30340;JMX&#25903;&#25345;&#25552;&#20379;&#20102;&#19968;&#20123;&#29305;&#24615;&#65292;&#35753;&#20320;&#33021;&#22815;&#23481;&#26131;&#22320;&#65292;&#36879;&#26126;&#22320;&#23558;Spring&#24212;&#29992;&#31243;&#24207;&#38598;&#25104;&#21040;JMX&#22522;&#30784;&#35774;&#26045;&#20013;&#21435;&#12290;
    </p><div class="sidebar"><p class="title"><b>&#20160;&#20040;&#26159;JMX&#65311;</b></p><p>
      &#36825;&#31456;&#26082;&#19981;&#26159;&#20171;&#32461;JMX&#30340;&#65292;&#20063;&#19981;&#35797;&#22270;&#35299;&#37322;&#20351;&#29992;JMX&#30340;&#21160;&#26426;&#65288;&#25110;&#32773;JMX&#36825;&#19977;&#20010;&#23383;&#27597;&#23454;&#38469;&#20195;&#34920;&#30528;&#20160;&#20040;&#65289;&#12290;&#22914;&#26524;&#20320;&#26159;JMX&#30340;&#26032;&#25163;&#65292;&#35831;&#21442;&#32771;&#26412;&#31456;&#32467;&#26463;&#37096;&#20998;&#26631;&#39064;&#20026; <a href="#jmx-resources" title="20.8.&nbsp;&#26356;&#22810;&#36164;&#28304;">Section&nbsp;20.8, &#8220;&#26356;&#22810;&#36164;&#28304;&#8221;</a> &#30340;&#27573;&#33853;&#12290;
      </p></div><p>&#30830;&#20999;&#30340;&#35828;&#65292;Spring&#30340;JMX&#25903;&#25345;&#25552;&#20379;&#20102;&#22235;&#31181;&#26680;&#24515;&#29305;&#24615;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#23558; <span class="emphasis"><em>&#20219;&#24847;</em></span> Spring Bean&#33258;&#21160;&#27880;&#20876;&#20026;JMX MBean</p></li><li><p>&#28789;&#27963;&#25805;&#32437;Bean&#31649;&#29702;&#25509;&#21475;&#30340;&#26426;&#21046;</p></li><li><p>&#36890;&#36807;&#36828;&#31243;JSR-160&#36830;&#25509;&#22120;&#23545;MBean&#30340;&#22768;&#26126;&#24335;&#26292;&#38706;</p></li><li><p>&#23545;&#26412;&#22320;&#21644;&#36828;&#31243;MBean&#36164;&#28304;&#30340;&#31616;&#21333;&#20195;&#29702;</p></li></ul></div><p>&#35774;&#35745;&#36825;&#20123;&#29305;&#24615;&#26159;&#20026;&#20102;&#20351;&#20320;&#30340;&#24212;&#29992;&#32452;&#20214;&#19981;&#24517;&#32806;&#21512;&#21040;Spring&#25110;JMX&#25509;&#21475;&#25110;&#31867;&#30340;&#24773;&#20917;&#19979;&#37117;&#21487;&#20197;&#24037;&#20316;&#12290;
    &#30830;&#23454;&#65292;&#35201;&#21033;&#29992;Spring&#30340;JMX&#29305;&#24615;&#65292;&#20320;&#30340;&#22823;&#37096;&#20998;&#24212;&#29992;&#31867;&#37117;&#26080;&#39035;&#30693;&#26195;Spring&#25110;JMX&#30340;&#23384;&#22312;&#12290;
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="jmx-exporting"></a>20.2.&nbsp;&#23558;Bean&#26292;&#38706;&#20026;JMX</h2></div></div><div></div></div><p>Spring&#30340;JMX&#26694;&#26550;&#30340;&#26680;&#24515;&#31867;&#26159; <tt class="classname">MBeanExporter</tt>&#12290;&#36825;&#20010;&#31867;&#36127;&#36131;&#33719;&#21462;Spring Bean&#65292;
    &#28982;&#21518;&#23558;&#20854;&#27880;&#20876;&#21040;&#19968;&#20010;JMX <tt class="interfacename">MBeanServer</tt> &#19978;&#12290;&#20363;&#22914;&#65292;&#20180;&#32454;&#30475;&#30475;&#20197;&#19979;&#36825;&#20960;&#20010;&#31867;&#65306;</p><pre class="programlisting">package org.springframework.jmx;

public class JmxTestBean implements IJmxTestBean {

    private String name;
    private int age;
    private boolean isSuperman;

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }
    
    public void setName(String name) {
        this.name = name;
    }

    public String getName() {
        return name;
    }

    public int add(int x, int y) {
        return x + y;
    }

    public void dontExposeMe() {
        throw new RuntimeException();
    }
}</pre><p>&#35201;&#23558;&#19968;&#20010;Bean&#20013;&#30340;&#23646;&#24615;&#21644;&#26041;&#27861;&#26292;&#38706;&#25104;&#20026;&#19968;&#20010;JMX MBean&#20013;&#30340;&#23646;&#24615;&#21644;&#25805;&#20316;&#65292;&#20320;&#21482;&#35201;&#22312;&#37197;&#32622;&#25991;&#20214;&#20013;&#31616;&#21333;&#30340;&#37197;&#32622; <tt class="classname">MBeanExporter</tt> &#19968;&#20010;&#23454;&#20363;&#65292;&#24182;&#19988;&#25353;&#29031;&#22914;&#19979;&#26041;&#27861;&#23558;&#36825;&#20010;Bean&#20256;&#20837;&#65306;
    </p><pre class="programlisting">&lt;beans&gt;
  <i class="lineannotation"><span class="lineannotation">
  &lt;!-- &#22914;&#26524;&#35201;&#26292;&#38706;&#65292;&#36825;&#20010;Bean&#19968;&#23450; <span class="bold"><b>&#19981;</b></span> &#21487;&#20197;&#24310;&#36831;&#21021;&#22987;&#21270;&#12290;--&gt;
  </span></i>
  
  &lt;bean id="exporter" class="org.springframework.jmx.export.MBeanExporter"
   <span class="bold"><b>lazy-init="false"</b></span>&gt;
    &lt;property name="beans"&gt;
      &lt;map&gt;
        &lt;entry key="bean:name=testBean1" value-ref="testBean"/&gt;
      &lt;/map&gt;
    &lt;/property&gt;
  &lt;/bean&gt;

  &lt;bean id="testBean" class="org.springframework.jmx.JmxTestBean"&gt;
    &lt;property name="name" value="TEST"/&gt;
    &lt;property name="age" value="100"/&gt;
  &lt;/bean&gt;

&lt;/beans&gt;</pre><p>&#19978;&#36848;&#37197;&#32622;&#29255;&#27573;&#20013;&#65292;&#20851;&#31995;&#26368;&#22823;&#30340;&#26159; <tt class="literal">exporter</tt> Bean&#12290;<tt class="literal">beans</tt> &#23646;&#24615;&#20351;&#24471;
    <tt class="classname">MBeanExporter</tt> &#30693;&#36947;&#35201;&#23558;&#21738;&#20010;Bean&#36755;&#20986;&#21040;JMX&#30340; <tt class="interfacename">MBeanServer</tt> &#19978;&#21435;&#12290;
    &#32570;&#30465;&#37197;&#32622;&#20013;&#65292;<tt class="literal">beans</tt> &#37324;&#30340; <tt class="interfacename">Map</tt> &#20013;&#30340;&#26465;&#30446;&#30340;key&#34987;&#29992;&#20316;&#30456;&#24212;&#26465;&#30446;&#20540;&#25152;&#24341;&#29992;&#30340;Bean&#30340; <tt class="classname">ObjectName</tt>&#12290;
    &#21487;&#20197;&#25353;&#29031; <a href="#jmx-naming" title="20.4.&nbsp;&#25511;&#21046;Bean&#30340;ObjectName">Section&nbsp;20.4, &#8220;&#25511;&#21046;Bean&#30340;ObjectName&#8221;</a> &#25551;&#36848;&#30340;&#37027;&#26679;&#25913;&#21464;&#36825;&#31181;&#34892;&#20026;&#12290;
    </p><p>
    &#22312;&#36825;&#20010;&#37197;&#32622;&#37324;&#65292;<tt class="literal">testBean</tt> &#23601;&#20197; <tt class="literal">bean:name=testBean1</tt> &#36825;&#20010; <tt class="classname">ObjectName</tt> &#26292;&#38706;&#25104;&#20102;&#19968;&#20010;MBean&#12290;
    &#40664;&#35748;&#24773;&#20917;&#19979;&#65292;Bean&#20013;&#25152;&#26377; <span class="emphasis"><em>public</em></span> &#30340;&#23646;&#24615;&#34987;&#26292;&#38706;&#20026;&#23646;&#24615;&#65292;&#25152;&#26377;&#30340; <span class="emphasis"><em>public</em></span> &#26041;&#27861;&#65288;&#38500;&#20102;&#37027;&#20123;&#20174; <tt class="classname">Object</tt> &#31867;&#32487;&#25215;&#36807;&#26469;&#30340;&#20043;&#22806;&#65289;&#37117;&#34987;&#26292;&#38706;&#20026;&#25805;&#20316;&#12290;
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jmx-exporting-mbeanserver"></a>20.2.1.&nbsp;&#21019;&#24314;<tt class="interfacename">MBeanServer</tt></h3></div></div><div></div></div><p>
		&#19978;&#36848;&#37197;&#32622;&#26159;&#20551;&#35774;&#20102;&#24212;&#29992;&#31243;&#24207;&#36816;&#34892;&#22312;&#36825;&#26679;&#30340;&#29615;&#22659;&#20013;&#65292;&#19968;&#20010;&#26377;&#19988;&#20165;&#26377;&#19968;&#20010;&#22312;&#36816;&#20316;&#20013;&#30340; <tt class="interfacename">MBeanServer</tt> &#30340;&#29615;&#22659;&#12290;
		&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;Spring&#23558;&#35797;&#22270;&#23450;&#20301;&#35813; <tt class="interfacename">MBeanServer</tt>&#65292;&#20043;&#21518;&#23558;&#20320;&#30340;Bean&#65288;&#22914;&#26524;&#26377;&#30340;&#35805;&#65289;&#27880;&#20876;&#21040;&#35813;&#26381;&#21153;&#22120;&#19978;&#12290;
		&#22312;&#33258;&#24102; <tt class="interfacename">MBeanServer</tt> &#30340;&#23481;&#22120;&#65288;&#20363;&#22914;Tomcat&#25110;&#32773;IBM WebSphere&#65289;&#20013;&#65292;&#36825;&#31181;&#34892;&#20026;&#26159;&#24456;&#26377;&#29992;&#30340;&#12290;
		</p><p>
      &#28982;&#32780;&#65292;&#22312;&#19968;&#20010;&#23396;&#31435;&#30340;&#29615;&#22659;&#65292;&#25110;&#32773;&#19981;&#25552;&#20379; <tt class="interfacename">MBeanServer</tt> &#30340;&#23481;&#22120;&#20013;&#65292;&#36825;&#31181;&#26041;&#27861;&#27627;&#26080;&#29992;&#27494;&#20043;&#22320;&#12290;
      &#35201;&#22788;&#29702;&#36825;&#31867;&#38382;&#39064;&#65292;&#20320;&#24212;&#35813;&#21019;&#24314;&#19968;&#20010; <tt class="interfacename">MBeanServer</tt> &#23454;&#20363;&#65292;&#20063;&#23601;&#26159;&#22768;&#26126;&#24335;&#22320;&#23558; <tt class="classname">org.springframework.jmx.support.MBeanServerFactoryBean</tt> &#23454;&#20363;&#28155;&#21152;&#21040;&#20320;&#30340;&#37197;&#32622;&#37324;&#12290;
      &#36890;&#36807;&#35774;&#32622; <tt class="classname">MBeanExporter</tt> &#30340; <tt class="literal">server</tt> &#23646;&#24615;&#30340;&#20540;&#65292;
      &#20320;&#20063;&#21487;&#20197;&#30830;&#20445; <tt class="classname">MBeanExporter</tt> &#20351;&#29992;&#20102; <tt class="classname">MBeanServerFactoryBean</tt> &#36820;&#22238;&#30340;&#29305;&#23450;&#30340; <tt class="interfacename">MBeanServer</tt>&#12290;
      &#20363;&#22914;&#65306;
      </p><pre class="programlisting">&lt;beans&gt;

  &lt;bean id="mbeanServer" class="org.springframework.jmx.support.MBeanServerFactoryBean"/&gt;

  
  <i class="lineannotation"><span class="lineannotation">&lt;!--
    &#35201;&#35302;&#21457;&#36755;&#20986;&#65292;&#24517;&#39035;&#39044;&#20808;&#23454;&#20363;&#21270;&#36825;&#20010;Bean&#65292;&#19968;&#23450; <span class="bold"><b>&#19981;</b></span> &#21487;&#20197;&#26631;&#24535;&#20026;&#24310;&#36831;&#21021;&#22987;&#21270;&#12290;
  --&gt;
  </span></i>
  
  
  &lt;bean id="exporter" class="org.springframework.jmx.export.MBeanExporter"&gt;
    &lt;property name="beans"&gt;
      &lt;map&gt;
        &lt;entry key="bean:name=testBean1" value-ref="testBean"/&gt;
      &lt;/map&gt;
    &lt;/property&gt;
    &lt;property name="server" ref="mbeanServer"/&gt;
  &lt;/bean&gt;

  &lt;bean id="testBean" class="org.springframework.jmx.JmxTestBean"&gt;
    &lt;property name="name" value="TEST"/&gt;
    &lt;property name="age" value="100"/&gt;
  &lt;/bean&gt;

&lt;/beans&gt;</pre><p>
      &#36825;&#37324;&#26377;&#19968;&#20010;&#30001; <tt class="classname">MBeanServerFactoryBean</tt> &#21019;&#24314;&#30340; <tt class="interfacename">MBeanServer</tt> &#23454;&#20363;&#65292;&#23427;&#36890;&#36807;&#23646;&#24615;server&#25552;&#20379;&#32473;&#20102; <tt class="classname">MBeanExporter</tt>&#12290;
      &#24403;&#20320;&#25552;&#20379;&#20102;&#20320;&#33258;&#24049;&#30340; <tt class="interfacename">MBeanServer</tt> &#23454;&#20363;&#21518;&#65292;<tt class="classname">MBeanExporter</tt> &#23558;&#20351;&#29992;&#35813;&#23454;&#20363;&#65292;&#19988;&#19981;&#20877;&#26597;&#25214;&#19968;&#20010;&#36816;&#34892;&#20013;&#30340; <tt class="interfacename">MBeanServer</tt>&#12290;&#20026;&#20102;&#20351;&#20043;&#27491;&#30830;&#24037;&#20316;&#65292;&#24403;&#28982;&#20102;&#65292;&#20320;&#24517;&#39035;&#30830;&#20445;&#20320;&#30340;&#31867;&#36335;&#24452;&#19978;&#23384;&#22312;&#19968;&#20010;JMX&#23454;&#29616;&#12290;
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jmx-mbean-server"></a>20.2.2.&nbsp;&#37325;&#29992;&#21407;&#26377;&#30340;<tt class="interfacename">MBeanServer</tt></h3></div></div><div></div></div><p>
      &#22914;&#26524;&#19981;&#25351;&#23450;&#20219;&#20309;&#26381;&#21153;&#22120;&#65292;<tt class="classname">MBeanExporter</tt> &#23558;&#33258;&#21160;&#26816;&#27979;&#19968;&#20010;&#36816;&#34892;&#20013;&#30340; <tt class="interfacename">MBeanServer</tt>&#12290;
      &#36825;&#22312;&#21482;&#26377;&#19968;&#20010; <tt class="interfacename">MBeanServer</tt> &#30340;&#24773;&#20917;&#19979;&#21487;&#20197;&#22863;&#25928;&#65292;&#24403;&#23384;&#22312;&#22810;&#20010; <tt class="interfacename">MBeanServer</tt>&#30340;&#26102;&#20505;&#65292;
      <tt class="classname">MBeanExporter</tt> &#21487;&#33021;&#20250;&#36873;&#38169;&#26381;&#21153;&#22120;&#12290;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#24212;&#35813;&#20351;&#29992; <tt class="interfacename">MBeanServer</tt> &#30340; <tt class="literal">agentId</tt>&#26469;&#25351;&#23450;&#31350;&#31455;&#20351;&#29992;&#21738;&#20010;&#26381;&#21153;&#22120;&#12290;
      </p><pre class="programlisting">&lt;beans&gt;
   &lt;bean id="mbeanServer" class="org.springframework.jmx.support.MBeanServerFactoryBean"&gt;
     
     <i class="lineannotation"><span class="lineannotation">&lt;!-- &#35828;&#26126;&#39318;&#20808;&#35201;&#26597;&#25214;&#19968;&#20010;&#26381;&#21153;&#22120; --&gt;</span></i>
     
     &lt;property name="locateExistingServerIfPossible" value="true"/&gt;
     <i class="lineannotation"><span class="lineannotation">
     &lt;!-- &#26681;&#25454;&#32473;&#23450;&#30340;agentId&#26597;&#25214;&#23545;&#24212;&#30340; <tt class="interfacename">MBeanServer</tt> &#23454;&#20363; --&gt;
     </span></i>
     &lt;property name="agentId" value="<span class="emphasis"><em>&lt;MBeanServer instance agentId&gt;</em></span>"/&gt;
   &lt;/bean&gt;
   
   &lt;bean id="exporter" class="org.springframework.jmx.export.MBeanExporter"&gt;
     &lt;property name="server" ref="mbeanServer"/&gt;
   ...
   &lt;/bean&gt;
&lt;/beans&gt;</pre><p>
      &#22312;&#26576;&#20123;&#24179;&#21488;&#20013;&#65292;<tt class="interfacename">MBeanServer</tt> &#26377;&#19968;&#20010;&#21160;&#24577;&#65288;&#25110;&#32773;&#26410;&#30693;&#65289;&#30340;&#35201;&#36890;&#36807;lookup&#26041;&#27861;&#33719;&#21462;&#30340; <tt class="literal">agentId</tt>&#12290;
      &#36825;&#26102;&#23601;&#24212;&#35813;&#29992; <a href="#beans-factory-class-static-factory-method" title="3.2.3.2.2.&nbsp;&#20351;&#29992;&#38745;&#24577;&#24037;&#21378;&#26041;&#27861;&#23454;&#20363;&#21270;">factory-method</a>&#12290;
      </p><pre class="programlisting">&lt;beans&gt;
   &lt;bean id="exporter" class="org.springframework.jmx.export.MBeanExporter"&gt;
     &lt;property name="server"&gt;
       
       
       <i class="lineannotation"><span class="lineannotation">
       &lt;!-- &#33258;&#23450;&#20041;<tt class="literal">MBeanServerLocator</tt> --&gt;
         </span></i>
         
         
       &lt;bean class="platform.package.MBeanServerLocator" factory-method="locateMBeanServer"/&gt;
     &lt;/property&gt;
     
     <i class="lineannotation"><span class="lineannotation">&lt;!-- &#20854;&#20182;Bean --&gt;</span></i>
     
   &lt;/bean&gt;
&lt;/beans&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jmx-exporting-lazy"></a>20.2.3.&nbsp;&#24310;&#36831;&#21021;&#22987;&#21270;&#30340;MBean</h3></div></div><div></div></div><p>
      &#22914;&#26524;&#20320;&#22312; <tt class="classname">MBeanExporter</tt> &#19978;&#37197;&#32622;&#20102;&#19968;&#20010;Bean&#65292;&#32780;&#36825;&#20010; <tt class="classname">MBeanExporter</tt> &#21448;&#37197;&#32622;&#20102;&#24310;&#36831;&#21021;&#22987;&#21270;&#65292;&#37027;&#20040; <tt class="classname">MBeanExporter</tt> &#36981;&#24490;&#36825;&#31181;&#22865;&#32422;&#65292;&#36991;&#20813;&#21021;&#22987;&#21270;&#36825;&#20010;Bean&#12290;&#30456;&#21453;&#65292;&#23427;&#20250;&#22312; <tt class="interfacename">MBeanServer</tt> &#19978;&#27880;&#20876;&#19968;&#20010;&#20195;&#29702;&#65292;&#25512;&#24310;&#20174;&#23481;&#22120;&#33719;&#21462;&#36825;&#20010;Bean&#30340;&#26102;&#21051;&#65292;&#30452;&#21040;&#22312;&#20195;&#29702;&#31471;&#21457;&#29983;&#23545;&#23427;&#30340;&#31532;&#19968;&#27425;&#35843;&#29992;&#12290;
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jmx-exporting-auto"></a>20.2.4.&nbsp;MBean&#30340;&#33258;&#21160;&#27880;&#20876;</h3></div></div><div></div></div><p>
      &#35201;&#36890;&#36807; <tt class="classname">MBeanExporter</tt> &#36755;&#20986;&#30340;&#20219;&#24847;&#30340;Bean&#65292;&#24182;&#24050;&#26159;&#26377;&#25928;&#30340;MBean&#65292;&#23558;&#20250;&#34987;&#27880;&#20876;&#21040; <tt class="interfacename">MBeanServer</tt>&#19978;&#21435;&#65292;&#32780;&#26080;&#39035;Spring&#30340;&#24178;&#39044;&#12290;
      &#36890;&#36807;&#35774;&#32622;&#23646;&#24615; <tt class="literal">autodetect</tt> &#30340;&#20540;&#20026;true&#65292;<tt class="classname">MBeanExporter</tt> &#23558;&#20250;&#33258;&#21160;&#25506;&#27979;MBean&#65292;&#22914;&#19979;&#65306;
      </p><pre class="programlisting">&lt;bean id="exporter" class="org.springframework.jmx.export.MBeanExporter"&gt;
  &lt;property name="autodetect" value="true"/&gt;
&lt;/bean&gt;

&lt;bean name="spring:mbean=true" class="org.springframework.jmx.export.TestDynamicMBean"/&gt;</pre><p>
      &#36825;&#37324;&#65292;&#21517;&#20026; <tt class="literal">spring:mbean=true</tt> &#30340;Bean&#23601;&#24050;&#32463;&#26159;&#19968;&#20010;&#26377;&#25928;&#30340;JMX MBean&#20102;&#12290;&#23427;&#23558;&#20250;&#34987;Spring&#33258;&#21160;&#27880;&#20876;&#12290;
      &#32570;&#30465;&#24773;&#20917;&#19979;&#65292;&#37027;&#20123;&#20570;&#33258;&#21160;JMX&#27880;&#20876;&#30340;Bean&#30340; <tt class="classname">ObjectName</tt> &#23601;&#26159;&#23427;&#30340;Bean&#21517;&#31216;&#12290;
      &#26631;&#39064;&#20026; <a href="#jmx-naming" title="20.4.&nbsp;&#25511;&#21046;Bean&#30340;ObjectName">Section&nbsp;20.4, &#8220;&#25511;&#21046;Bean&#30340;ObjectName&#8221;</a> &#30340;&#31456;&#33410;&#37324;&#35814;&#32454;&#30340;&#25551;&#36848;&#20102;&#22914;&#20309;&#35206;&#30422;&#65288;overridden&#65289;&#36825;&#31181;&#34892;&#20026;&#12290;
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jmx-exporting-registration-behavior"></a>20.2.5.&nbsp;&#25511;&#21046;&#27880;&#20876;&#34892;&#20026;</h3></div></div><div></div></div><p>
      &#32771;&#34385;&#36825;&#26679;&#30340;&#22330;&#26223;&#65292;&#19968;&#20010;Spring <tt class="classname">MBeanExporter</tt> &#35797;&#22270;&#29992; <tt class="classname">ObjectName</tt> <tt class="literal">'bean:name=testBean1'</tt> &#21521; <tt class="interfacename">MBeanServer</tt> &#27880;&#20876;&#19968;&#20010;MBean&#12290;
      &#22914;&#26524;&#24050;&#32463;&#23384;&#22312;&#19968;&#20010;&#21516;&#26679; <tt class="classname">ObjectName</tt> &#30340; <tt class="classname">MBean</tt> &#23454;&#20363;&#65292;&#32570;&#30465;&#34892;&#20026;&#26159;&#22833;&#36133;&#65288;&#24182;&#19988;&#25243;&#20986;&#19968;&#20010; <tt class="exceptionname">InstanceAlreadyExistsException</tt>&#65289;&#12290; 
      </p><p>
      <tt class="classname">MBean</tt> &#26102;&#21457;&#29983;&#21738;&#31181;&#34892;&#20026;&#12290;
      Spring&#30340;JMX&#25903;&#25345;&#25552;&#20379;&#19977;&#31181;&#19981;&#21516;&#30340;&#27880;&#20876;&#34892;&#20026;&#65292;&#20197;&#27492;&#26469;&#25511;&#21046;&#27880;&#20876;&#36827;&#31243;&#21457;&#29616;&#19968;&#20010; <tt class="classname">MBean</tt> &#24050;&#32463;&#29992;&#21516;&#26679;&#30340; <tt class="classname">ObjectName</tt> &#27880;&#20876;&#30340;&#24773;&#20917;&#12290;&#19979;&#38754;&#30340;&#34920;&#26684;&#24635;&#32467;&#20102;&#36825;&#20123;&#27880;&#20876;&#34892;&#20026;&#65306;
      </p><div class="table"><a name="jmx-registration-behaviors"></a><p class="title"><b>Table&nbsp;20.1.&nbsp;&#27880;&#20876;&#34892;&#20026;</b></p><table summary="&#27880;&#20876;&#34892;&#20026;" border="1"><colgroup><col align="left"><col></colgroup><thead><tr><th align="center">&#27880;&#20876;&#34892;&#20026;</th><th align="center">&#35828;&#26126;</th></tr></thead><tbody><tr><td align="left"><p><tt class="literal">REGISTRATION_FAIL_ON_EXISTING</tt></p></td><td><p>
                &#36825;&#26159;&#32570;&#30465;&#30340;&#27880;&#20876;&#34892;&#20026;&#12290;&#22914;&#26524;&#19968;&#20010; <tt class="classname">MBean</tt> &#23454;&#20363;&#24050;&#32463;&#29992;&#21516;&#26679;&#30340; <tt class="classname">ObjectName</tt> &#27880;&#20876;&#20102;&#65292;Spring&#23558;&#19981;&#20250;&#20877;&#27425;&#27880;&#20876;&#19968;&#20010; <tt class="classname">MBean</tt> &#23454;&#20363;&#65292;&#24182;&#19988;&#20250;&#25243;&#20986;&#19968;&#20010; <tt class="exceptionname">InstanceAlreadyExistsException</tt> &#24322;&#24120;&#65292;&#36825;&#19981;&#20250;&#24433;&#21709;&#21040;&#21407;&#26377;&#30340; <tt class="classname">MBean</tt>&#23454;&#20363;&#12290;
                </p></td></tr><tr><td align="left"><p><tt class="literal">REGISTRATION_IGNORE_EXISTING</tt></p></td><td><p>
                &#22914;&#26524;&#19968;&#20010; <tt class="classname">MBean</tt> &#23454;&#20363;&#24050;&#32463;&#29992;&#21516;&#26679;&#30340; <tt class="classname">ObjectName</tt> &#27880;&#20876;&#20102;&#65292;&#27491;&#22312;&#27880;&#20876;&#30340; <tt class="classname">MBean</tt> &#23454;&#20363;&#23558;&#19981;&#20250;&#34987;&#27880;&#20876;&#12290;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#21407;&#26377;&#30340; <tt class="classname">MBean</tt> &#23454;&#20363;&#19981;&#20250;&#21463;&#21040;&#24433;&#21709;&#65292;&#20063;&#19981;&#20250;&#25243;&#20986;&#24322;&#24120;&#12290;
                </p></td></tr><tr><td align="left"><p><tt class="literal">REGISTRATION_REPLACE_EXISTING</tt></p></td><td><p>&#22914;&#26524;&#19968;&#20010; <tt class="classname">MBean</tt> &#23454;&#20363;&#24050;&#32463;&#29992;&#21516;&#26679;&#30340; <tt class="classname">ObjectName</tt> &#27880;&#20876;&#20102;&#65292;&#21407;&#26377; <tt class="classname">MBean</tt> &#30340;&#27880;&#20876;&#20851;&#31995;&#23558;&#20250;&#34987;&#35299;&#38500;&#65292;&#26032;&#30340; <tt class="classname">MBean</tt> &#20250;&#20197;&#21516;&#26679;&#30340; <tt class="classname">ObjectName</tt> &#27880;&#20876;&#65288;&#26032;&#30340; <tt class="classname">MBean</tt> &#23454;&#38469;&#19978;&#21462;&#20195;&#20102;&#21407;&#22987;&#30340;&#23454;&#20363;&#65289;&#12290;
                </p></td></tr></tbody></table></div><p>
      <tt class="classname">MBeanRegistrationSupport</tt> &#31867;&#20197;&#24120;&#37327;&#30340;&#26041;&#24335;&#23450;&#20041;&#20102;&#19978;&#36848;&#36825;&#20123;&#20540;&#65288;<tt class="classname">MBeanExporter</tt> &#32487;&#25215;&#20102;&#36825;&#20010;&#29238;&#31867;&#65289;&#12290;&#22914;&#26524;&#20320;&#21521;&#25913;&#21464;&#32570;&#30465;&#30340;&#27880;&#20876;&#34892;&#20026;&#65292;&#20320;&#21482;&#38656;&#35201;&#23558; <tt class="classname">MBeanExporter</tt> &#30340;&#23646;&#24615; <tt class="literal">registrationBehaviorName</tt> &#30340;&#20540;&#35774;&#32622;&#20026;&#19978;&#36848;&#36825;&#20123;&#20540;&#20043;&#19968;&#12290;
      </p><p>
      &#20197;&#19979;&#20363;&#23376;&#38416;&#26126;&#20102;&#22914;&#20309;&#23558;&#32570;&#30465;&#27880;&#20876;&#34892;&#20026;&#25913;&#21464;&#20026; <tt class="literal">REGISTRATION_REPLACE_EXISTING</tt>&#12290;
      </p><pre class="programlisting">&lt;beans&gt;

    &lt;bean id="exporter" class="org.springframework.jmx.export.MBeanExporter"&gt;
        &lt;property name="beans"&gt;
            &lt;map&gt;
                &lt;entry key="bean:name=testBean1" value-ref="testBean"/&gt;
            &lt;/map&gt;
        &lt;/property&gt;
        &lt;property name="registrationBehaviorName" value="REGISTRATION_REPLACE_EXISTING"/&gt;
    &lt;/bean&gt;

    &lt;bean id="testBean" class="org.springframework.jmx.JmxTestBean"&gt;
        &lt;property name="name" value="TEST"/&gt;
        &lt;property name="age" value="100"/&gt;
    &lt;/bean&gt;

&lt;/beans&gt;</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="jmx-interface"></a>20.3.&nbsp;&#25511;&#21046;Bean&#30340;&#31649;&#29702;&#25509;&#21475;</h2></div></div><div></div></div><p>
    &#22312;&#21069;&#38754;&#30340;&#20363;&#23376;&#37324;&#65292;&#23545;&#20110;&#20320;&#30340;Bean&#65292;&#20320;&#20960;&#20046;&#27809;&#26377;&#20160;&#20040;&#25511;&#21046;&#26435;&#12290;&#27599;&#20010;&#36755;&#20986;Bean&#30340;&#25152;&#26377;&#30340; <span class="emphasis"><em>public</em></span> &#23646;&#24615;&#21644;&#26041;&#27861;&#37117;&#34987;&#26292;&#38706;&#25104;&#20102;&#30456;&#24212;&#30340;JMX&#30340;&#23646;&#24615;&#21644;&#25805;&#20316;&#12290;&#35201;&#23545;Bean&#30340;&#30830;&#20999;&#21738;&#20010;&#23646;&#24615;&#21644;&#26041;&#27861;&#26292;&#38706;&#25104;JMX&#30340;&#23646;&#24615;&#21644;&#25805;&#20316;&#23454;&#26045;&#32454;&#31890;&#24230;&#30340;&#25511;&#21046;&#65292;Spring JMX&#25552;&#20379;&#20102;&#19968;&#22871;&#20840;&#38754;&#30340;&#20197;&#21450;&#21487;&#25193;&#23637;&#30340;&#26426;&#21046;&#26469;&#25511;&#21046;bean&#30340;&#31649;&#29702;&#25509;&#21475;&#12290;
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jmx-interface-assembler"></a>20.3.1.&nbsp;<tt class="interfacename">MBeanInfoAssembler</tt>&#25509;&#21475;</h3></div></div><div></div></div><p>
      <tt class="classname">MBeanExporter</tt> &#22312;&#21518;&#21488;&#22996;&#25176;&#32473;&#20102;&#36127;&#36131;&#23450;&#20041;bean&#31649;&#29702;&#25509;&#21475;&#30340;
      <tt class="classname">org.springframework.jmx.export.assembler.MBeanInfoAssembler</tt>
      &#30340;&#19968;&#20010;&#23454;&#29616;&#26469;&#31649;&#29702;&#26292;&#38706;Bean&#30340;&#20449;&#24687;&#12290;&#32570;&#30465;&#23454;&#29616;&#26159; <tt class="classname">org.springframework.jmx.export.assembler.SimpleReflectiveMBeanInfoAssembler</tt>&#65292;&#23427;&#20165;&#23450;&#20041;&#20102;&#19968;&#20010;&#26292;&#38706;&#25152;&#26377;public&#23646;&#24615;&#65292;public&#26041;&#27861;&#30340;&#31649;&#29702;&#25509;&#21475;&#65288;&#20687;&#20320;&#22312;&#21069;&#38754;&#20363;&#23376;&#30475;&#21040;&#30340;&#37027;&#26679;&#65289;&#12290;
      Spring&#36824;&#25552;&#20379;&#20102;&#20004;&#20010; <tt class="interfacename">MBeanInfoAssembler</tt> &#25509;&#21475;&#30340;&#23454;&#29616;&#65292;
      &#20351;&#20320;&#21487;&#20197;&#20351;&#29992;&#28304;&#30721;&#32423;&#20803;&#25968;&#25454;&#25110;&#32773;&#20854;&#20182;&#20219;&#24847;&#25509;&#21475;&#26469;&#25511;&#21046;&#31649;&#29702;&#25509;&#21475;&#30340;&#20135;&#29983;&#12290;
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jmx-interface-metadata"></a>20.3.2.&nbsp;&#20351;&#29992;&#28304;&#30721;&#32423;&#20803;&#25968;&#25454;</h3></div></div><div></div></div><p>
      &#20351;&#29992; <tt class="classname">MetadataMBeanInfoAssembler</tt>&#65292;&#20320;&#33021;&#22815;&#29992;&#28304;&#30721;&#32423;&#20803;&#25968;&#25454;&#32473;&#20320;&#30340;Bean&#23450;&#20041;&#31649;&#29702;&#25509;&#21475;&#12290;
      <tt class="classname">org.springframework.jmx.export.metadata.JmxAttributeSource</tt> &#23553;&#35013;&#20102;&#20803;&#25968;&#25454;&#30340;&#35835;&#21462;&#12290;
      Sprin&#30340;JMX&#25903;&#25345;&#25552;&#20379;&#20102;&#36825;&#20010;&#25509;&#21475;&#30340;&#20004;&#20010;&#29616;&#25104;&#30340;&#23454;&#29616;&#12290;&#23545;&#24212;Commons Attributes&#26159; <tt class="classname">org.springframework.jmx.export.metadata.AttributesJmxAttributeSource</tt>&#65292;
      &#32780;&#23545;&#24212;&#20110;JDK 5.0&#27880;&#35299;&#30340;&#26159; <tt class="classname">org.springframework.jmx.export.annotation.AnnotationJmxAttributeSource</tt>&#12290;
      &#20026;&#20102;&#20351; <tt class="classname">MetadataMBeanInfoAssembler</tt> &#27491;&#30830;&#36816;&#20316;&#65292;&#65288;&#30001;&#20110;&#27809;&#26377;&#32570;&#30465;&#30340;&#37197;&#32622;&#23454;&#20363;&#65289;&#12290;
      &#25105;&#20204;&#24517;&#39035;&#32473;&#23427;&#37197;&#32622;&#19968;&#20010; <tt class="classname">JmxAttributeSource</tt> &#25509;&#21475;&#30340;&#23454;&#20363;&#12290;&#19979;&#38754;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#23558;&#37319;&#21462;Commons Attributes&#30340;&#26041;&#27861;&#12290;
      </p><p>
      &#35201;&#26631;&#35782;&#19968;&#20010;Bean&#36755;&#20986;&#21040;JMX&#65292;&#20320;&#24212;&#35813;&#29992; <tt class="classname">ManagedResource</tt> &#23646;&#24615;&#27880;&#35299;&#37027;&#20010;Bean&#30340;&#31867;&#12290;
      &#20351;&#29992;Commons Attributes&#20803;&#25968;&#25454;&#30340;&#36825;&#31181;&#26041;&#27861;&#30340;&#24773;&#20917;&#19979;&#65292;&#25105;&#20204;&#21487;&#20197;&#22312; <tt class="literal">org.springframework.jmx.metadata</tt> &#21253;&#37324;&#25214;&#21040;&#23427;&#12290;
      &#27599;&#20010;&#20320;&#24819;&#35201;&#26292;&#38706;&#20026;&#25805;&#20316;&#30340;&#26041;&#27861;&#65292;&#27599;&#20010;&#20320;&#24819;&#35201;&#26292;&#38706;&#30340;&#23646;&#24615;&#65292;&#20320;&#37117;&#35201;&#23558;&#29992; <tt class="classname">ManagedOperation</tt> &#23646;&#24615;&#26631;&#35782;&#23427;&#12290;
      &#24403;&#26631;&#35782;&#23646;&#24615;&#30340;&#26102;&#65292;&#20026;&#20102;&#20135;&#29983;&#21482;&#20889;&#25110;&#32773;&#21482;&#35835;&#30340;&#23646;&#24615;&#65292;&#20320;&#21487;&#20197;&#24573;&#30053;&#27880;&#35299;&#23545;&#24212;&#30340;getter&#25110;&#32773;setter&#26041;&#27861;&#12290;
      </p><p>
      &#19979;&#38754;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#29992;Commons Attributes&#20803;&#25968;&#25454;&#26631;&#35782;&#20102;&#22312;&#21069;&#38754;&#20363;&#23376;&#30475;&#21040;&#30340; <tt class="classname">JmxTestBean</tt> &#31867;&#12290;
      </p><pre class="programlisting">package org.springframework.jmx;

/**
 * @@org.springframework.jmx.export.metadata.ManagedResource
 *  (description="My Managed Bean", objectName="spring:bean=test",
 *  log=true, logFile="jmx.log", currencyTimeLimit=15, persistPolicy="OnUpdate",
 *  persistPeriod=200, persistLocation="foo", persistName="bar")
 */
public class JmxTestBean implements IJmxTestBean {

  private String name;

  private int age;


  /**
   * @@org.springframework.jmx.export.metadata.ManagedAttribute
   *   (description="The Age Attribute", currencyTimeLimit=15)
   */
  public int getAge() {
    return age;
  }

  public void setAge(int age) {
    this.age = age;
  }

  /**
   * @@org.springframework.jmx.export.metadata.ManagedAttribute
   *  (description="The Name Attribute",  currencyTimeLimit=20,
   *   defaultValue="bar", persistPolicy="OnUpdate")
   */
  public void setName(String name) {
    this.name = name;
  }

  /**
   * @@org.springframework.jmx.export.metadata.ManagedAttribute
   *   (defaultValue="foo", persistPeriod=300)
   */
  public String getName() {
    return name;
  }

  /**
   * @@org.springframework.jmx.export.metadata.ManagedOperation
   *  (description="Add Two Numbers Together")
   */
  public int add(int x, int y) {
    return x + y;
  }

  public void dontExposeMe() {
    throw new RuntimeException();
  }
}</pre><p>
      &#20320;&#30475;&#21040; <tt class="classname">JmxTestBean</tt> &#34987; <tt class="classname">ManagedResource</tt> &#23646;&#24615;&#26631;&#35782;&#20102;&#65292;&#19988; <tt class="classname">ManagedResource</tt> &#21448;&#37197;&#32622;&#20102;&#19968;&#22534;&#30340;&#23646;&#24615;&#12290;
      &#36825;&#20123;&#23646;&#24615;&#29992;&#26469;&#37197;&#32622;&#30001; <tt class="classname">MBeanExporter</tt> &#26159;&#20135;&#29983;&#30340;MBean&#30340;&#26041;&#26041;&#38754;&#38754;&#12290;
      <a href="#jmx-interface-metadata-types" title="20.3.4.&nbsp;&#28304;&#20195;&#30721;&#32423;&#30340;&#20803;&#25968;&#25454;&#31867;&#22411;">Section&nbsp;20.3.4, &#8220;&#28304;&#20195;&#30721;&#32423;&#30340;&#20803;&#25968;&#25454;&#31867;&#22411;&#8221;</a> &#31456;&#33410;&#20013;&#23558;&#20250;&#23545;&#36825;&#20123;&#23646;&#24615;&#35814;&#32454;&#35762;&#35299;&#12290;
      
      </p><p>
      &#20320;&#26159;&#19981;&#26159;&#20063;&#21457;&#29616;&#20102; <tt class="literal">age</tt> &#21644; <tt class="literal">name</tt> &#23646;&#24615;&#37117;&#34987; <tt class="classname">ManagedAttribute</tt> &#27880;&#35299;&#20102;&#21602;&#65292;&#20294;&#26159;&#23545;&#20110; <tt class="literal">age</tt> &#23646;&#24615;&#65292;&#20165;&#20165;getter&#32473;&#26631;&#35782;&#20102;&#12290;&#36825;&#20351;&#24471;&#31649;&#29702;&#25509;&#21475;&#20063;&#23558;&#36825;&#20123;&#23646;&#24615;&#21253;&#21547;&#36827;&#21435;&#65292;&#21482;&#26159; <tt class="literal">age</tt> &#23646;&#24615;&#23558;&#26159;&#21482;&#35835;&#30340;&#12290;
      
      </p><p>
      &#26368;&#21518;&#65292;&#20320;&#20063;&#27880;&#24847;&#21040; <tt class="literal">add(int, int)</tt> &#34987; <tt class="classname">ManagedOperation</tt> &#26631;&#35782;&#20102;&#65292;<tt class="literal">dontExposeMe()</tt> &#21364;&#27809;&#26377;&#12290;
      &#36825;&#20351;&#24471;&#20351;&#29992; <tt class="classname">MetadataMBeanInfoAssembler</tt> &#26102;&#65292;&#31649;&#29702;&#25509;&#21475;&#20165;&#21253;&#21547;<tt class="literal">add(int, int)</tt> &#26041;&#27861;&#12290;
      
      </p><p>
      &#19979;&#38754;&#20195;&#30721;&#26174;&#31034;&#20102;&#22914;&#20309;&#20351;&#29992; <tt class="classname">MetadataMBeanInfoAssembler</tt> &#26469;&#37197;&#32622; <tt class="classname">MBeanExporter</tt>&#12290;
      </p><pre class="programlisting">&lt;beans&gt;

  &lt;bean id="exporter" class="org.springframework.jmx.export.MBeanExporter"&gt;
    &lt;property name="beans"&gt;
      &lt;map&gt;
        &lt;entry key="bean:name=testBean1" value-ref="testBean"/&gt;
      &lt;/map&gt;
    &lt;/property&gt;
    &lt;property name="assembler" ref="assembler"/&gt;
  &lt;/bean&gt;

  &lt;bean id="testBean" class="org.springframework.jmx.JmxTestBean"&gt;
    &lt;property name="name" value="TEST"/&gt;
    &lt;property name="age" value="100"/&gt;
  &lt;/bean&gt;

  &lt;bean id="attributeSource"
        class="org.springframework.jmx.export.metadata.AttributesJmxAttributeSource"&gt;
    &lt;property name="attributes"&gt;
      &lt;bean class="org.springframework.metadata.commons.CommonsAttributes"/&gt;
    &lt;/property&gt;
  &lt;/bean&gt;

  &lt;bean id="assembler" class="org.springframework.jmx.export.assembler.MetadataMBeanInfoAssembler"&gt;
    &lt;property name="attributeSource" ref="attributeSource"/&gt;
  &lt;/bean&gt;

&lt;/beans&gt;</pre><p>
      &#36825;&#37324;&#20320;&#30475;&#21040;&#20102; <tt class="classname">MetadataMBeanInfoAssembler</tt> Bean&#34987;&#37197;&#32622;&#20102;&#19968;&#20010; <tt class="classname">AttributesJmxAttributeSource</tt> &#31867;&#30340;&#23454;&#20363;&#65292;&#24182;&#19988;&#36890;&#36807;assembler&#23646;&#24615;&#23558;&#20043;&#27880;&#20837;&#21040; <tt class="classname">MBeanExporter</tt> &#24403;&#20013;&#12290;&#20026;&#36890;&#36807;Spring&#26292;&#38706;&#30340;MBean&#24471;&#21040;&#20803;&#25968;&#25454;&#39537;&#21160;&#30340;&#31649;&#29702;&#25509;&#21475;&#30340;&#22909;&#22788;&#65292;&#35201;&#20570;&#30340;&#20107;&#24773;&#23601;&#26159;&#36825;&#20040;&#22810;&#20102;&#12290;
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jmx-interface-annotations"></a>20.3.3.&nbsp;&#20351;&#29992;JDK 5.0&#30340;&#27880;&#35299;</h3></div></div><div></div></div><p>
      &#20026;&#20102;&#28608;&#27963;JDK 5.0&#30340;&#27880;&#35299;&#65292;&#29992;&#23427;&#26469;&#31649;&#29702;&#25509;&#21475;&#23450;&#20041;&#65292;Spring&#25552;&#20379;&#20102;&#19968;&#22871;&#30456;&#24403;&#20110;Commons Attribute&#27880;&#35299;&#21644;&#19968;&#20010;&#31574;&#30053;&#25509;&#21475; <tt class="interfacename">JmxAttributeSource</tt> &#30340;&#23454;&#29616;&#31867; <tt class="classname">AnnotationsJmxAttributeSource</tt>&#65292;&#36825;&#20010;&#31867;&#21487;&#20197;&#35753; <tt class="interfacename">MBeanInfoAssembler</tt> &#35835;&#21462;&#36825;&#20123;&#27880;&#35299;&#12290; 
      </p><p>
      &#19979;&#20363;&#29992;JDK 5.0&#27880;&#35299;&#31867;&#22411;&#23450;&#20041;&#20102;&#19968;&#20010;&#31649;&#29702;&#25509;&#21475;Bean&#65306;
      </p><pre class="programlisting">package org.springframework.jmx;

import org.springframework.jmx.export.annotation.ManagedResource;
import org.springframework.jmx.export.annotation.ManagedOperation;
import org.springframework.jmx.export.annotation.ManagedAttribute;

@ManagedResource(objectName="bean:name=testBean4", description="My Managed Bean", log=true,
    logFile="jmx.log", currencyTimeLimit=15, persistPolicy="OnUpdate", persistPeriod=200,
    persistLocation="foo", persistName="bar")
public class AnnotationTestBean implements IJmxTestBean {

  private String name;
  private int age;

  @ManagedAttribute(description="The Age Attribute", currencyTimeLimit=15)
  public int getAge() {
    return age;
  }

  public void setAge(int age) {
    this.age = age;
  }

  @ManagedAttribute(description="The Name Attribute",
      currencyTimeLimit=20,
      defaultValue="bar",
      persistPolicy="OnUpdate")
  public void setName(String name) {
    this.name = name;
  }

  @ManagedAttribute(defaultValue="foo", persistPeriod=300)
  public String getName() {
    return name;
  }

  @ManagedOperation(description="Add two numbers")
  @ManagedOperationParameters({
    @ManagedOperationParameter(name = "x", description = "The first number"),
    @ManagedOperationParameter(name = "y", description = "The second number")})
  public int add(int x, int y) {
    return x + y;
  }

  public void dontExposeMe() {
    throw new RuntimeException();
  }
}</pre><p>
      &#30475;&#21040;&#20102;&#21543;&#65292;&#38500;&#20102;&#20803;&#25968;&#25454;&#23450;&#20041;&#30340;&#22522;&#26412;&#35821;&#27861;&#22806;&#65292;&#25913;&#21160;&#24456;&#23567;&#12290;&#36825;&#31181;&#26041;&#27861;&#22312;&#21551;&#21160;&#26102;&#30456;&#23545;&#24930;&#20123;&#65292;
      &#22240;&#20026;JDK 5.0&#30340;&#27880;&#35299;&#35201;&#36716;&#25442;&#20026;Commons Attributes&#20351;&#29992;&#30340;&#31867;&#12290;&#23613;&#31649;&#22914;&#27492;&#65292;&#36825;&#20063;&#21482;&#26159;
      &#19968;&#27425;&#24615;&#30340;&#24320;&#38144;&#65292;JDK 5.0&#27880;&#35299;&#32473;&#20102;&#32534;&#35793;&#26102;&#26816;&#26597;&#30340;&#39069;&#22806;&#22909;&#22788;&#12290;
      </p><pre class="programlisting">&lt;beans&gt;
    &lt;bean id="exporter" class="org.springframework.jmx.export.MBeanExporter"&gt;
        &lt;property name="assembler" ref="assembler"/&gt;
        &lt;property name="namingStrategy" ref="namingStrategy"/&gt;
        &lt;property name="autodetect" value="true"/&gt;
    &lt;/bean&gt;

    &lt;bean id="jmxAttributeSource"
          class="org.springframework.jmx.export.annotation.AnnotationJmxAttributeSource"/&gt;

    <i class="lineannotation"><span class="lineannotation">
    &lt;!-- &#36825;&#20250;&#20351;&#29992;&#27880;&#35299;&#20803;&#25968;&#25454;&#21019;&#24314;&#31649;&#29702;&#25509;&#21475; --&gt;</span></i>
    &lt;bean id="assembler"
          class="org.springframework.jmx.export.assembler.MetadataMBeanInfoAssembler"&gt;
        &lt;property name="attributeSource" ref="jmxAttributeSource"/&gt;
    &lt;/bean&gt;

    <i class="lineannotation"><span class="lineannotation">
    
    &lt;!-- &#20174;&#27880;&#35299;&#20013;&#24471;&#21040;<tt class="classname">ObjectName</tt>  --&gt;</span></i>
    &lt;bean id="namingStrategy"
          class="org.springframework.jmx.export.naming.MetadataNamingStrategy"&gt;
        &lt;property name="attributeSource" ref="jmxAttributeSource"/&gt;
    &lt;/bean&gt;

    &lt;bean id="testBean" class="org.springframework.jmx.AnnotationTestBean"&gt;
        &lt;property name="name" value="TEST"/&gt;
        &lt;property name="age" value="100"/&gt;
    &lt;/bean&gt;
&lt;/beans&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jmx-interface-metadata-types"></a>20.3.4.&nbsp;&#28304;&#20195;&#30721;&#32423;&#30340;&#20803;&#25968;&#25454;&#31867;&#22411;</h3></div></div><div></div></div><p>Spring JMX&#20013;&#65292;&#21487;&#29992;&#20351;&#29992;&#20197;&#19979;&#28304;&#20195;&#30721;&#32423;&#30340;&#20803;&#25968;&#25454;&#31867;&#22411;&#65306;</p><div class="table"><a name="jmx-metadata-types"></a><p class="title"><b>Table&nbsp;20.2.&nbsp;&#28304;&#20195;&#30721;&#32423;&#30340;&#20803;&#25968;&#25454;&#31867;&#22411;</b></p><table summary="&#28304;&#20195;&#30721;&#32423;&#30340;&#20803;&#25968;&#25454;&#31867;&#22411;" border="1"><colgroup><col align="left"><col><col><col></colgroup><thead><tr><th align="center">&#29992;&#36884;</th><th align="center">Commons Attributes&#23646;&#24615;</th><th align="center">JDK 5.0&#27880;&#35299;</th><th align="center">&#23646;&#24615;/&#27880;&#35299;&#31867;&#22411;</th></tr></thead><tbody><tr><td align="left">&#23558;&#31867;&#30340;&#25152;&#26377;&#23454;&#20363;&#26631;&#35782;&#20026;JMX&#21463;&#25511;&#36164;&#28304;</td><td><tt class="classname">ManagedResource</tt></td><td><tt class="literal">@ManagedResource</tt></td><td>Class &#31867;</td></tr><tr><td align="left">&#23558;&#26041;&#27861;&#26631;&#35782;&#20026;JMX&#25805;&#20316;</td><td><tt class="classname">ManagedOperation</tt></td><td><tt class="literal">@ManagedOperation</tt></td><td>Method&#26041;&#27861;</td></tr><tr><td align="left">&#23558;getter&#25110;&#32773;setter&#26631;&#35782;&#20026;&#37096;&#20998;JMX&#23646;&#24615;</td><td><tt class="classname">ManagedAttribute</tt></td><td><tt class="classname">@ManagedAttribute</tt></td><td>Method (only getters and setters) &#26041;&#27861;&#65288;&#20165;getters&#21644;setters&#65289;</td></tr><tr><td align="left">&#23450;&#20041;&#25805;&#20316;&#21442;&#25968;&#35828;&#26126;</td><td><tt class="classname">ManagedOperationParameter</tt></td><td><tt class="classname">@ManagedOperationParameter</tt> &#21644; <tt class="classname">@ManagedOperationParameters</tt></td><td>Method &#26041;&#27861;</td></tr></tbody></table></div><p>&#28304;&#20195;&#30721;&#32423;&#30340;&#20803;&#25968;&#25454;&#31867;&#22411;&#21487;&#20197;&#20351;&#29992;&#20197;&#19979;&#37197;&#32622;&#21442;&#25968;&#65306;</p><div class="table"><a name="jmx-metadata-parameters"></a><p class="title"><b>Table&nbsp;20.3.&nbsp;&#28304;&#20195;&#30721;&#32423;&#30340;&#20803;&#25968;&#25454;&#21442;&#25968;</b></p><table summary="&#28304;&#20195;&#30721;&#32423;&#30340;&#20803;&#25968;&#25454;&#21442;&#25968;" border="1"><colgroup><col align="left"><col><col></colgroup><thead><tr><th align="center">&#21442;&#25968;</th><th align="center">&#25551;&#36848;</th><th align="center">&#24212;&#29992;&#20110;</th></tr></thead><tbody><tr><td align="left"><tt class="classname">ObjectName</tt></td><td><tt class="classname">MetadataNamingStrategy</tt> &#29992;&#20854;&#26469;&#20915;&#23450;&#19968;&#20010;&#21463;&#25511;&#36164;&#28304;&#30340; <tt class="classname">ObjectName</tt></td><td><tt class="classname">ManagedResource</tt></td></tr><tr><td align="left"><tt class="literal">&#35828;&#26126;</tt></td><td>&#35774;&#32622;&#36164;&#28304;&#65292;&#23646;&#24615;&#65292;&#25805;&#20316;&#30340;&#35828;&#26126;</td><td><tt class="classname">ManagedResource</tt>&#12289;
                <tt class="classname">ManagedAttribute</tt>&#12289;
                <tt class="classname">ManagedOperation</tt>&#12289;
                <tt class="classname">ManagedOperationParameter</tt></td></tr><tr><td align="left"><tt class="literal">currencyTimeLimit</tt></td><td>&#35774;&#32622; <tt class="literal">currencyTimeLimit</tt> &#25551;&#36848;&#31526;&#23383;&#27573;&#30340;&#20540; <tt class="literal">currencyTimeLimit</tt></td><td><tt class="classname">ManagedResource</tt>&#12289;<tt class="classname">ManagedAttribute</tt></td></tr><tr><td align="left"><tt class="literal">defaultValue</tt></td><td>&#35774;&#32622; <tt class="literal">defaultValue</tt> &#25551;&#36848;&#31526;&#23383;&#27573;&#30340;&#20540;</td><td><tt class="classname">ManagedAttribute</tt></td></tr><tr><td align="left"><tt class="literal">log</tt></td><td>&#35774;&#32622; <tt class="literal">log</tt> &#25551;&#36848;&#31526;&#23383;&#27573;&#30340;&#20540;</td><td><tt class="classname">ManagedResource</tt></td></tr><tr><td align="left"><tt class="literal">logFile</tt></td><td>&#35774;&#32622; <tt class="literal">logFile</tt> &#25551;&#36848;&#31526;&#23383;&#27573;&#30340;&#20540;</td><td><tt class="classname">ManagedResource</tt></td></tr><tr><td align="left"><tt class="literal">persistPolicy</tt></td><td>&#35774;&#32622; <tt class="literal">persistPolicy</tt> &#25551;&#36848;&#31526;&#23383;&#27573;&#30340;&#20540;</td><td><tt class="classname">ManagedResource</tt></td></tr><tr><td align="left"><tt class="literal">persistPeriod</tt></td><td>&#35774;&#32622; <tt class="literal">persistPeriod</tt> &#25551;&#36848;&#31526;&#23383;&#27573;&#30340;&#20540;</td><td><tt class="classname">ManagedResource</tt></td></tr><tr><td align="left"><tt class="literal">persistLocation</tt></td><td>&#35774;&#32622; <tt class="literal">persistLocation</tt> &#25551;&#36848;&#31526;&#23383;&#27573;&#30340;&#20540;</td><td><tt class="classname">ManagedResource</tt></td></tr><tr><td align="left"><tt class="literal">persistName</tt></td><td>&#35774;&#32622; <tt class="literal">persistName</tt> &#25551;&#36848;&#31526;&#23383;&#27573;&#30340;&#20540;</td><td><tt class="classname">ManagedResource</tt></td></tr><tr><td align="left"><tt class="literal">name</tt></td><td>&#35774;&#32622;&#25805;&#20316;&#21442;&#25968;&#30340;&#26174;&#31034;&#21517;&#31216;</td><td><tt class="literal">ManagedOperationParameter</tt></td></tr><tr><td align="left"><tt class="literal">index</tt></td><td>&#35774;&#32622;&#25805;&#20316;&#21442;&#25968;&#30340;&#32034;&#24341;</td><td><tt class="literal">ManagedOperationParameter</tt></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jmx-interface-autodetect"></a>20.3.5.&nbsp;<tt class="classname">AutodetectCapableMBeanInfoAssembler</tt>&#25509;&#21475;</h3></div></div><div></div></div><p>
      &#20026;&#20102;&#36827;&#19968;&#27493;&#31616;&#21270;&#37197;&#32622;&#65292;Spring&#24341;&#20837;&#20102; <tt class="classname">AutodetectCapableMBeanInfoAssembler</tt> &#25509;&#21475;&#65292;
      &#23427;&#25193;&#23637;&#20102; <tt class="interfacename">MBeanInfoAssembler</tt> &#25509;&#21475;&#65292;&#22686;&#21152;&#20102;&#33258;&#21160;&#25506;&#27979;MBean&#36164;&#28304;&#30340;&#25903;&#25345;&#12290;
      &#22914;&#26524;&#20320;&#29992;&#19968;&#20010; <tt class="classname">AutodetectCapableMBeanInfoAssembler</tt> &#23454;&#20363;&#37197;&#32622;&#20102; <tt class="classname">MBeanExporter</tt>&#65292;&#37027;&#20040;&#23427;&#23601;&#21487;&#20197;&#23545;&#35201;&#26292;&#38706;&#32473;JMX&#30340;&#25152;&#26377;Bean&#30340;&#36827;&#34892;&#34920;&#20915;&#12290;
      </p><p>
      <tt class="classname">AutodetectCapableMBeanInfo</tt> &#29616;&#25104;&#30340;&#21807;&#19968;&#23454;&#29616;&#26159; <tt class="classname">MetadataMBeanInfoAssembler</tt>&#65292;&#23427;&#8220;&#34920;&#20915;&#8221;&#23558;&#25152;&#26377;&#26631;&#35782;&#20102; <tt class="classname">ManagedResource</tt> &#23646;&#24615;&#30340;Bean&#21253;&#21547;&#22312;&#20869;&#12290;
      &#36825;&#31181;&#24773;&#20917;&#30340;&#32570;&#30465;&#26041;&#27861;&#26159;&#29992;bean&#30340;&#21517;&#31216;&#20316;&#20026; <tt class="classname">ObjectName</tt>&#65292;&#36825;&#26679;&#65292;&#25105;&#20204;&#23601;&#24471;&#21040;&#20102;&#36825;&#26679;&#19968;&#20221;&#37197;&#32622;&#65306;
      </p><pre class="programlisting">&lt;beans&gt;

  &lt;bean id="exporter" class="org.springframework.jmx.export.MBeanExporter"&gt;
    
    
    <i class="lineannotation"><span class="lineannotation">&lt;!-- &#36825;&#37324;&#65292;&#27880;&#24847;&#24590;&#26679;&#25165;&#19981;&#26174;&#31034;&#37197;&#32622; <tt class="literal">'beans'</tt> --&gt;</span></i>
    &lt;property name="autodetect" value="true"/&gt;
    &lt;property name="assembler" ref="assembler"/&gt;
  &lt;/bean&gt;

  &lt;bean id="testBean" class="org.springframework.jmx.JmxTestBean"&gt;
    &lt;property name="name" value="TEST"/&gt;
    &lt;property name="age" value="100"/&gt;
  &lt;/bean&gt;

  <i class="lineannotation"><span class="lineannotation">&lt;!-- &#65288;&#23545;&#20110;Commons Attributes-based metadata&#65289; --&gt;</span></i>
  &lt;bean id="attributeSource"
        class="org.springframework.jmx.export.metadata.AttributesJmxAttributeSource"&gt;
    &lt;property name="attributes"&gt;
      &lt;bean class="org.springframework.metadata.commons.CommonsAttributes"/&gt;
    &lt;/property&gt;
  &lt;/bean&gt;
  
  <i class="lineannotation"><span class="lineannotation">&lt;!-- &#65288;&#23545;&#20110;&#22522;&#20110;&#27880;&#35299;&#30340;JDK5+&#20803;&#25968;&#25454;&#65289; --&gt;</span></i><span class="emphasis"><em>
  &lt;!--
  &lt;bean id="attributeSource"
        class="org.springframework.jmx.export.annotation.AnnotationJmxAttributeSource"/&gt;
  --&gt;</em></span>

  &lt;bean id="assembler" class="org.springframework.jmx.export.assembler.MetadataMBeanInfoAssembler"&gt;
    &lt;property name="attributeSource" ref="attributeSource"/&gt;
  &lt;/bean&gt;

&lt;/beans&gt;</pre><p>
      &#27880;&#24847;&#65292;&#22312;&#36825;&#20221;&#37197;&#32622;&#20013;&#65292;<tt class="classname">MBeanExporter</tt> &#27809;&#26377;&#37197;&#32622;&#20219;&#20309;Bean&#65292;
      &#28982;&#32780;&#65292;&#30001;&#20110; <tt class="classname">JmxTestBean</tt> &#29992; <tt class="classname">ManagedResource</tt> &#23646;&#24615;&#20570;&#20102;&#26631;&#35782;&#65292;
      <tt class="classname">MetadataMBeanInfoAssembler</tt> &#25506;&#27979;&#21040;&#19988;&#34920;&#20915;&#23558;&#35201;&#21253;&#21547;&#23427;&#65292;&#22240;&#27492;&#23427;&#20173;&#20250;&#34987;&#27880;&#20876;&#12290;
      &#36825;&#31181;&#26041;&#27861;&#30340;&#21807;&#19968;&#38382;&#39064;&#26159;&#65292;&#29616;&#22312;&#30340; <tt class="classname">JmxTestBean</tt> &#26377;&#20102;&#19994;&#21153;&#21547;&#20041;&#12290;
      &#36825;&#20010;&#38382;&#39064;&#21487;&#20197;&#36890;&#36807; <a href="#jmx-naming" title="20.4.&nbsp;&#25511;&#21046;Bean&#30340;ObjectName">Section&nbsp;20.4, &#8220;&#25511;&#21046;Bean&#30340;ObjectName&#8221;</a> &#23450;&#20041;&#37027;&#26679;&#25913;&#21464; <tt class="classname">ObjectName</tt> &#21019;&#24314;&#30340;&#40664;&#35748;&#34892;&#20026;&#26469;&#35299;&#20915;&#12290;
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jmx-interface-java"></a>20.3.6.&nbsp;&#29992;Java&#25509;&#21475;&#23450;&#20041;&#31649;&#29702;&#25509;&#21475;</h3></div></div><div></div></div><p>
      &#38500;&#20102; <tt class="classname">MetadataMBeanInfoAssembler</tt>&#65292;Spring&#36824;&#21253;&#21547;&#20102; <tt class="classname">InterfaceBasedMBeanInfoAssembler</tt>&#65292;&#23427;&#21487;&#20197;&#26681;&#25454;&#19968;&#32452;&#25509;&#21475;&#23450;&#20041;&#30340;&#26041;&#27861;&#38480;&#23450;&#35201;&#26292;&#38706;&#30340;&#26041;&#27861;&#21644;&#23646;&#24615;&#12290;
      </p><p>
      &#34429;&#28982;&#20351;&#29992;&#25509;&#21475;&#21644;&#31616;&#21333;&#30340;&#21629;&#21517;&#35268;&#21017;&#26159;&#26292;&#38706;MBean&#30340;&#26631;&#20934;&#26041;&#24335;&#65292;&#20294;&#26159; <tt class="classname">InterfaceBasedMBeanInfoAssembler</tt> &#25193;&#23637;&#36825;&#20010;&#21151;&#33021;&#65292;&#21435;&#38500;&#20102;&#21629;&#21517;&#32422;&#23450;&#65292;&#20351;&#24471;&#20320;&#19981;&#20294;&#21487;&#20197;&#20351;&#29992;&#22810;&#20010;&#25509;&#21475;&#65292;&#36824;&#21487;&#20197;&#30465;&#21435;&#23454;&#29616;MBean&#25509;&#21475;&#30340;&#38656;&#27714;&#12290;
      </p><p>
      &#35797;&#24819;&#19968;&#19979;&#36825;&#20010;&#25509;&#21475;&#65292;&#29992;&#23427;&#23450;&#20041;&#20102;&#20043;&#21069;&#30475;&#21040;&#30340; <tt class="classname">JmxTestBean</tt> &#30340;&#31649;&#29702;&#25509;&#21475;&#12290;
      </p><pre class="programlisting">public interface IJmxTestBean {

  public int add(int x, int y);

  public long myOperation();

  public int getAge();

  public void setAge(int age);

  public void setName(String name);

  public String getName();
}</pre><p>
      &#36825;&#20010;&#25509;&#21475;&#23450;&#20041;&#20102;&#19968;&#20123;&#26041;&#27861;&#21644;&#23646;&#24615;&#65292;&#23427;&#20204;&#23558;&#34987;&#26292;&#38706;&#25104;JMX MBean&#25805;&#20316;&#21644;&#23646;&#24615;&#12290;&#19979;&#38754;&#20195;&#30721;&#26174;&#31034;&#20102;&#22914;&#20309;&#37197;&#32622;Spring JMX&#26469;&#20351;&#29992;&#36825;&#20010;&#25509;&#21475;&#20316;&#20026;&#31649;&#29702;&#25509;&#21475;&#30340;&#23450;&#20041;&#12290;
      </p><pre class="programlisting">&lt;beans&gt;

  &lt;bean id="exporter" class="org.springframework.jmx.export.MBeanExporter"&gt;
    &lt;property name="beans"&gt;
      &lt;map&gt;
        &lt;entry key="bean:name=testBean5" value-ref="testBean"/&gt;
      &lt;/map&gt;
    &lt;/property&gt;
    &lt;property name="assembler"&gt;
      &lt;bean class="org.springframework.jmx.export.assembler.InterfaceBasedMBeanInfoAssembler"&gt;
        &lt;property name="managedInterfaces"&gt;
          &lt;value&gt;org.springframework.jmx.IJmxTestBean&lt;/value&gt;
        &lt;/property&gt;
      &lt;/bean&gt;
    &lt;/property&gt;
  &lt;/bean&gt;

  &lt;bean id="testBean" class="org.springframework.jmx.JmxTestBean"&gt;
    &lt;property name="name" value="TEST"/&gt;
    &lt;property name="age" value="100"/&gt;
  &lt;/bean&gt;

&lt;/beans&gt;</pre><p>
      &#20320;&#21487;&#20197;&#30475;&#21040;&#65292;&#24403;&#20026;&#20219;&#24847;Bean&#26500;&#24314;&#31649;&#29702;&#25509;&#21475;&#26102;&#65292;<tt class="classname">InterfaceBasedMBeanInfoAssembler</tt> &#37197;&#32622;&#20102;&#20351;&#29992; <tt class="interfacename">IJmxTestBean</tt> &#25509;&#21475;&#12290;
      &#30001; <tt class="classname">InterfaceBasedMBeanInfoAssembler</tt> &#22788;&#29702;&#30340;bean&#19981;&#38656;&#35201;&#23454;&#29616;&#29992;&#26469;&#20135;&#29983;JMX&#31649;&#29702;&#25509;&#21475;&#30340;&#25509;&#21475;&#65292;&#26126;&#30333;&#36825;&#19968;&#28857;&#24456;&#24456;&#37325;&#35201;&#12290;
      </p><p>
      &#22312;&#19978;&#38754;&#20363;&#23376;&#20013;&#65292;<tt class="interfacename">IJmxTestBean</tt> &#34987;&#29992;&#26469;&#26500;&#24314;&#25152;&#26377;bean&#30340;&#31649;&#29702;&#25509;&#21475;&#12290;
      &#24456;&#22810;&#24773;&#20917;&#19979;&#65292;&#22312;&#20320;&#24819;&#23545;&#19981;&#21516;&#30340;Bean&#20351;&#29992;&#19981;&#21516;&#25509;&#21475;&#26102;&#23601;&#19981;&#24819;&#36825;&#26679;&#20102;&#12290;
      &#36825;&#26102;&#65292;&#20320;&#21487;&#20197;&#32473; <tt class="classname">InterfaceBasedMBeanInfoAssembler</tt> &#36890;&#36807; <tt class="literal">interfaceMappings</tt> &#23646;&#24615;&#20256;&#36882;&#19968;&#20010; <tt class="classname">Properties</tt>&#23454;&#20363;&#12290;&#27599;&#20010;&#26465;&#30446;&#30340;&#38190;&#20540;&#26159;Bean&#30340;&#21517;&#23383;&#65292;&#26465;&#30446;&#30340;&#20540;&#19968;&#20010;&#20197;&#36887;&#21495;(;)&#38548;&#24320;&#65292;&#20351;&#29992;&#20110;&#35813;Bean&#30340;&#30340;&#25509;&#21475;&#21517;&#31216;&#21015;&#34920;&#12290;
      </p><p>
      &#22914;&#26524;&#27809;&#26377;&#36890;&#36807; <tt class="literal">managedInterfaces</tt> &#21644; <tt class="literal">interfaceMappings</tt> &#23646;&#24615;&#25351;&#23450;&#31649;&#29702;&#25509;&#21475;&#65292;<tt class="classname">InterfaceBasedMBeanInfoAssembler</tt> &#23558;&#36890;&#36807;&#21453;&#23556;&#65292;&#20351;&#29992;&#35813;Bean&#23454;&#29616;&#30340;&#25152;&#26377;&#25509;&#21475;&#26469;&#20135;&#29983;&#31649;&#29702;&#25509;&#21475;&#12290;
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jmx-interface-methodnames"></a>20.3.7.&nbsp;&#20351;&#29992;<tt class="classname">MethodNameBasedMBeanInfoAssembler</tt></h3></div></div><div></div></div><p>
      <tt class="classname">MethodNameBasedMBeanInfoAssembler</tt> &#20801;&#35768;&#20320;&#25351;&#23450;&#35201;&#26292;&#38706;&#25104;JMX&#23646;&#24615;&#21644;&#25805;&#20316;&#30340;&#26041;&#27861;&#21517;&#31216;&#21015;&#34920;&#12290;&#20197;&#19979;&#20195;&#30721;&#26174;&#31034;&#20102;&#19968;&#27573;&#37197;&#32622;&#26679;&#20363;&#65306;
      </p><pre class="programlisting">&lt;bean id="exporter" class="org.springframework.jmx.export.MBeanExporter"&gt;
    &lt;property name="beans"&gt;
      &lt;map&gt;
        &lt;entry key="bean:name=testBean5" value-ref="testBean"/&gt;
      &lt;/map&gt;
    &lt;/property&gt;
    &lt;property name="assembler"&gt;
      &lt;bean class="org.springframework.jmx.export.assembler.MethodNameBasedMBeanInfoAssembler"&gt;
        &lt;property name="managedMethods"&gt;
          &lt;value&gt;add,myOperation,getName,setName,getAge&lt;/value&gt;
        &lt;/property&gt;
      &lt;/bean&gt;
    &lt;/property&gt;
&lt;/bean&gt;</pre><p>
      &#20320;&#21487;&#20197;&#30475;&#21040; <tt class="literal">add</tt> &#21644; <tt class="literal">myOperation</tt> &#26041;&#27861;&#23558;&#34987;&#26292;&#38706;&#25104;JMX&#25805;&#20316;&#65292;<tt class="literal">getName()</tt>&#65292;<tt class="literal">setName(String)</tt> &#21644; <tt class="literal">getAge()</tt> &#23558;&#34987;&#26292;&#38706;&#25104;&#23545;&#24212;&#30340;JMX&#23646;&#24615;&#12290;&#20197;&#19978;&#20195;&#30721;&#20351;&#29992;&#19982;&#37027;&#20123;&#26292;&#38706;&#21040;JMX&#30340;Bean&#12290;
      &#35201;&#25511;&#21046;&#22522;&#20110;&#19968;&#20010;&#19968;&#20010;Bean&#30340;&#26041;&#27861;&#26292;&#38706;&#65292;&#23601;&#35201;&#20351;&#29992; <tt class="classname">MethodNameMBeanInfoAssembler</tt> &#30340; <tt class="literal">methodMappings</tt> &#23646;&#24615;&#26469;&#23558;Bean&#21517;&#23383;&#26144;&#23556;&#21040;&#26041;&#27861;&#21517;&#31216;&#21015;&#34920;&#19978;&#20102;&#12290;
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="jmx-naming"></a>20.4.&nbsp;&#25511;&#21046;Bean&#30340;<tt class="classname">ObjectName</tt></h2></div></div><div></div></div><p>
    &#23545;&#20110;&#27599;&#20010;Bean&#30340;&#27880;&#20876;&#65292;<tt class="classname">MBeanExporter</tt> &#22312;&#21518;&#21488;&#22996;&#27966;&#32473;&#20102; <tt class="classname">ObjectNamingStrategy</tt> &#30340;&#19968;&#20010;&#23454;&#29616;&#26469;&#33719;&#21462; <tt class="classname">ObjectName</tt>&#12290;
    &#32570;&#30465;&#23454;&#29616;&#26159; <tt class="classname">KeyNamingStrategy</tt>&#65292;&#23427;&#23558;&#40664;&#35748;&#20351;&#29992; <tt class="literal">beans</tt> &#19978; <tt class="interfacename">Map</tt> &#30340;&#38190;&#20540;&#20316;&#20026; <tt class="classname">ObjectName</tt>&#12290;
    &#27492;&#22806;&#65292;<tt class="classname">KeyNamingStrategy</tt> &#21487;&#20197;&#23558;&#35813;&#38190;&#20540;&#19982; <tt class="classname">Properties</tt> &#25991;&#20214;&#20013;&#30340;&#19968;&#20010;&#26465;&#30446;&#23545;&#24212;&#65292;&#20197;&#27492;&#35299;&#26512; <tt class="classname">ObjectName</tt>&#12290;
    &#38500;&#20102; <tt class="classname">KeyNamingStrategy</tt> &#20043;&#22806;&#65292;Spring&#36824;&#25552;&#20379;&#20102;&#21478;&#22806;&#20004;&#20010; <tt class="classname">ObjectNamingStrategy</tt> &#30340;&#23454;&#29616;&#65306;
    &#22522;&#20110;bean&#30340;JVM&#26631;&#35782;&#26500;&#24314; <tt class="classname">ObjectName</tt> &#30340; <tt class="classname">IdentityNamingStrategy</tt>&#65307;
    &#21033;&#29992;&#28304;&#20195;&#30721;&#32423;&#20803;&#25968;&#25454;&#33719;&#21462; <tt class="classname">ObjectName</tt> &#30340; <tt class="classname">MetadataNamingStrategy</tt>&#12290;
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jmx-naming-properties"></a>20.4.1.&nbsp;&#20174;<tt class="classname">Properties</tt>&#35835;&#21462;<tt class="classname">Properties</tt></h3></div></div><div></div></div><p>
      &#20320;&#21487;&#20197;&#37197;&#32622;&#20320;&#33258;&#24049;&#30340; <tt class="classname">KeyNamingStrategy</tt> &#23454;&#20363;&#65292;&#37197;&#32622;&#23427;&#20174;&#19968;&#20010; <tt class="classname">Properties</tt> &#23454;&#20363;&#35835;&#21462; <tt class="classname">ObjectName</tt>&#65292;&#32780;&#19981;&#26159;&#29992;Bean&#30340;&#38190;&#20540;&#12290;
      <tt class="classname">KeyNamingStrategy</tt> &#39318;&#20808;&#20250;&#29992;bean&#30340;&#38190;&#20540;&#35797;&#22270;&#20174; <tt class="classname">Properties</tt> &#20013;&#23450;&#20301;&#19968;&#20010;&#26465;&#30446;&#12290;
      &#20551;&#33509;&#27809;&#26377;&#25214;&#19981;&#21040;&#23545;&#24212;&#30340;&#26465;&#30446;&#65292;&#25110;&#32773; <tt class="classname">Properties</tt> &#23454;&#20363;&#20026; <tt class="literal">null</tt>&#65292;&#26368;&#21518;&#25165;&#20351;&#29992;Bean&#30340;&#38190;&#20540;&#20316;&#20026; <tt class="classname">ObjectName</tt>&#12290;
      </p><p>
      &#20197;&#19979;&#20195;&#30721;&#26174;&#31034;&#20102;&#20851;&#20110;<tt class="classname">KeyNamingStrategy</tt>&#30340;&#19968;&#20221;&#37197;&#32622;&#26679;&#20363;&#65306;
      </p><pre class="programlisting">&lt;beans&gt;

  &lt;bean id="exporter" class="org.springframework.jmx.export.MBeanExporter"&gt;
    &lt;property name="beans"&gt;
      &lt;map&gt;
        &lt;entry key="testBean" value-ref="testBean"/&gt;
      &lt;/map&gt;
    &lt;/property&gt;
    &lt;property name="namingStrategy" ref="namingStrategy"/&gt;
  &lt;/bean&gt;

  &lt;bean id="testBean" class="org.springframework.jmx.JmxTestBean"&gt;
    &lt;property name="name" value="TEST"/&gt;
    &lt;property name="age" value="100"/&gt;
  &lt;/bean&gt;

  &lt;bean id="namingStrategy" class="org.springframework.jmx.export.naming.KeyNamingStrategy"&gt;
    &lt;property name="mappings"&gt;
      &lt;props&gt;
        &lt;prop key="testBean"&gt;bean:name=testBean1&lt;/prop&gt;
      &lt;/props&gt;
    &lt;/property&gt;
    &lt;property name="mappingLocations"&gt;
      &lt;value&gt;names1.properties,names2.properties&lt;/value&gt;
    &lt;/property&gt;
  &lt;/bean

&lt;/beans&gt;</pre><p>
      &#36825;&#20010; <tt class="classname">KeyNamingStrategy</tt> &#23454;&#20363;&#37197;&#32622;&#20102;&#19968;&#20010; <tt class="classname">Properties</tt> &#23454;&#20363;&#65292;&#32780;&#36825;&#20010; <tt class="classname">Properties</tt> &#23454;&#20363;&#30001;mapping&#23646;&#24615;&#21644;mappingLocations&#23646;&#24615;&#25152;&#25351;&#23450;&#30340;&#36335;&#24452;&#23450;&#20301;&#21040;&#30340; <tt class="classname">Properties</tt> &#25991;&#20214;&#21512;&#25104;&#12290;
      &#22312;&#36825;&#20010;&#37197;&#32622;&#37324;&#65292;&#30001;&#20110; <tt class="classname">Properties</tt> &#23454;&#20363;&#26377;&#20010;&#38190;&#20540;&#23545;&#24212;&#35813;Bean&#30340;&#38190;&#20540;&#65292;&#22240;&#27492; <tt class="literal">testBean</tt> &#30340; <tt class="classname">ObjectName</tt> &#23558;&#34987;&#25351;&#23450;&#20026; <tt class="literal">bean:name=testBean1</tt>&#12290;
      </p><p>
      &#20551;&#33509;&#27809;&#26377;&#20219;&#20309;&#26465;&#30446;&#21487;&#20197;&#20174; <tt class="classname">Properties</tt> &#23454;&#20363;&#25214;&#21040;&#65292;Bean&#30340;&#38190;&#20540;&#23558;&#20250;&#20316;&#20026; <tt class="classname">ObjectName</tt>&#12290;
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jmx-naming-metadata"></a>20.4.2.&nbsp;&#20351;&#29992;<tt class="classname">MetadataNamingStrategy</tt></h3></div></div><div></div></div><p>
      <tt class="classname">MetadataNamingStrategy</tt> &#29992;&#27599;&#20010;Bean&#19978; <tt class="classname">ManagedResource</tt> &#23646;&#24615;&#30340; <tt class="literal">objectName</tt> &#23646;&#24615;&#26469;&#26500;&#24314; <tt class="literal">objectName</tt>&#12290;
      &#20197;&#19979;&#20195;&#30721;&#23637;&#31034;&#20102;&#23545;&#20110; <tt class="classname">MetadataNamingStrategy</tt> &#30340;&#37197;&#32622;&#65306;
      </p><pre class="programlisting">&lt;beans&gt;

  &lt;bean id="exporter" class="org.springframework.jmx.export.MBeanExporter"&gt;
    &lt;property name="beans"&gt;
      &lt;map&gt;
        &lt;entry key="testBean" value-ref="testBean"/&gt;
      &lt;/map&gt;
    &lt;/property&gt;
    &lt;property name="namingStrategy" ref="namingStrategy"/&gt;
  &lt;/bean&gt;

  &lt;bean id="testBean" class="org.springframework.jmx.JmxTestBean"&gt;
    &lt;property name="name" value="TEST"/&gt;
    &lt;property name="age" value="100"/&gt;
  &lt;/bean&gt;

  &lt;bean id="namingStrategy" class="org.springframework.jmx.export.naming.MetadataNamingStrategy"&gt;
    &lt;property name="attributeSource" ref="attributeSource"/&gt;
  &lt;/bean&gt;

  &lt;bean id="attributeSource"
      class="org.springframework.jmx.export.metadata.AttributesJmxAttributeSource"/&gt;

&lt;/beans&gt;</pre><p>
      &#20551;&#33509;&#27809;&#26377; <tt class="literal">objectName</tt> &#22312; <tt class="classname">ManagedResource</tt>&#37324;&#25552;&#20379;&#65292;&#37027;&#20040;&#19968;&#20010; <tt class="classname">ObjectName</tt> &#23558;&#20197;&#20197;&#19979;&#26684;&#24335;&#21019;&#24314;&#65306; 
      <span class="emphasis"><em>[fully-qualified-package-name]:type=[short-classname],name=[bean-name]</em></span>&#12290;
      &#20363;&#22914;&#65292;&#23545;&#20110;&#20197;&#19979;&#30340;Bean&#65292;&#20135;&#29983;&#30340; <tt class="classname">ObjectName</tt> &#23558;&#26159; <span class="emphasis"><em>com.foo:type=MyClass,name=myBean</em></span>&#12290;
      </p><pre class="programlisting">&lt;bean id="myBean" class="com.foo.MyClass"/&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jmx-context-mbeanexport"></a>20.4.3.&nbsp;<tt class="literal">&lt;context:mbean-export/&gt;</tt>&#20803;&#32032;</h3></div></div><div></div></div><p>
      &#22914;&#26524;&#20320;&#33267;&#23569;&#22312;&#20351;&#29992;Java 5&#65292;&#37027;&#20040;&#23601;&#21487;&#20197;&#20351;&#29992;&#19968;&#20010;&#26041;&#20415;&#30340; <tt class="classname">MBeanExporter</tt> &#23376;&#31867;&#65292; <tt class="classname">AnnotationMBeanExporter</tt>&#12290;
      &#24403;&#23450;&#20041;&#19968;&#20010;&#36825;&#20010;&#23376;&#31867;&#30340;&#23454;&#20363;&#26102;&#65292;&#30001;&#20110;&#20182;&#23558;&#22987;&#32456;&#20351;&#29992;&#22522;&#20110;&#27880;&#35299;&#30340;&#26631;&#20934;Java&#20803;&#25968;&#25454;&#65288;&#33258;&#21160;&#25506;&#27979;&#20063;&#23558;&#22987;&#32456;&#34987;&#28608;&#27963;&#65289;&#65292;<tt class="literal">namingStrategy</tt> &#21644; <tt class="literal">attributeSource</tt> &#30340;&#37197;&#32622;&#20063;&#19981;&#20877;&#38656;&#35201;&#20102;&#12290;
      </p><pre class="programlisting">&lt;context:mbean-export/&gt;</pre><p>
      &#24517;&#35201;&#26102;&#65292;&#20320;&#21487;&#20197;&#25552;&#20379;&#26576;&#20010;MBean&#26381;&#21153;&#22120;&#30340;&#24341;&#29992;&#65292;&#21516;&#26102; <tt class="literal">defaultDomain</tt> &#23646;&#24615;
      &#65288;<tt class="classname">AnnotationMBeanExporter</tt>&#30340;&#19968;&#20010;&#23646;&#24615;&#65289;&#25509;&#21463;&#20135;&#29983;&#30340;MBean
      <tt class="classname">ObjectNames</tt>&#22495;&#21517;&#30340;&#26367;&#20195;&#20540;&#12290;
      &#36825;&#34987;&#29992;&#20110;&#26367;&#20195;&#21069;&#38754;&#31456;&#33410; <a href="#jmx-naming-metadata" title="20.4.2.&nbsp;&#20351;&#29992;MetadataNamingStrategy"><tt class="classname">MetadataNamingStrategy</tt></a> &#25552;&#21450;&#30340;&#23436;&#25972;&#38480;&#23450;&#21253;&#21517;&#12290;
      </p><pre class="programlisting">&lt;context:mbean-export server="myMBeanServer" default-domain="myDomain"/&gt;</pre>.

    </div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="jmx-jsr160"></a>20.5.&nbsp;JSR-160&#36830;&#25509;&#22120;</h2></div></div><div></div></div><p>
    &#23545;&#20110;&#36828;&#31243;&#35775;&#38382;&#65292;Spring JMX&#27169;&#22359;&#22312; <tt class="literal">org.springframework.jmx.support</tt> &#21253;&#20869;&#25552;&#20379;&#20102;&#20004;&#20010; <tt class="classname">FactoryBean</tt> &#23454;&#29616;&#65292;&#29992;&#26469;&#26500;&#24314;&#26381;&#21153;&#22120;&#31471;&#21644;&#23458;&#25143;&#31471;&#30340;&#36830;&#25509;&#22120;&#12290;    
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jmx-jsr160-server"></a>20.5.1.&nbsp;&#26381;&#21153;&#22120;&#31471;&#36830;&#25509;&#22120;</h3></div></div><div></div></div><p>
      &#20351;Spring JMX&#26500;&#24314;&#65292;&#21551;&#21160;&#21644;&#26292;&#38706;&#19968;&#20010;JSR-160 <tt class="classname">JMXConnectorServer</tt>&#65292;&#35201;&#20351;&#29992;&#20197;&#19979;&#37197;&#32622;&#65306;
      </p><pre class="programlisting">&lt;bean id="serverConnector" class="org.springframework.jmx.support.ConnectorServerFactoryBean"/&gt;</pre><p>
      <tt class="literal">ConnectorServerFactoryBean</tt> &#40664;&#35748;&#21019;&#24314;&#19968;&#20010; <tt class="classname">JMXConnectorServer</tt>&#65292;
      &#24182;&#23558;&#20854;&#32465;&#23450;&#21040; <tt class="literal">"service:jmx:jmxmp://localhost:9875"</tt>&#12290;
      &#22240;&#27492;&#35813; <tt class="literal">serverConnector</tt> Bean&#22312;&#26412;&#26426;9875&#31471;&#21475;&#36890;&#36807;JMXMP&#21327;&#35758;&#23558;&#26412;&#22320; <tt class="interfacename">MBeanServer</tt> &#26292;&#38706;&#32473;&#23458;&#25143;&#12290;
      &#35201;&#30041;&#24847;JSR160&#35268;&#33539;&#24050;&#23558;JMXMP&#21327;&#35758;&#26631;&#35760;&#20026;&#21487;&#36873;&#30340;&#65292;&#22914;&#20170;&#65292;&#20027;&#27969;&#30340;&#24320;&#28304;JMX&#23454;&#29616;MX4J&#21644;J2SE 5.0&#25552;&#20379;&#30340;&#23454;&#29616;&#37117;&#24050;&#19981;&#25903;&#25345;JMXMP&#20102;&#12290;
      </p><p>
      &#35201;&#25351;&#23450;&#20854;&#20182;URL&#21644;&#35201;&#29992; <tt class="interfacename">MBeanServer</tt> &#27880;&#20876; <tt class="classname">JMXConnectorServer</tt>&#65292;
      &#35201;&#20351;&#29992;&#30456;&#24212;&#30340; <tt class="literal">serviceUrl</tt> &#21644; <tt class="classname">ObjectName</tt> &#23646;&#24615;&#65306;
      </p><pre class="programlisting">&lt;bean id="serverConnector"
      class="org.springframework.jmx.support.ConnectorServerFactoryBean"&gt;
  &lt;property name="objectName" value="connector:name=rmi"/&gt;
  &lt;property name="serviceUrl" 
            value="service:jmx:rmi://localhost/jndi/rmi://localhost:1099/myconnector"/&gt;
&lt;/bean&gt;</pre><p>
      &#22914;&#26524;&#35774;&#32622;&#20102; <tt class="classname">ObjectName</tt>&#65292;Spring&#23558;&#33258;&#21160;&#25226;&#36830;&#25509;&#22120;&#29992;&#35813; <tt class="classname">ObjectName</tt> &#27880;&#20876;&#21040; <tt class="interfacename">MBeanServer</tt> &#19978;&#12290;
      &#20197;&#19979;&#20363;&#23376;&#23637;&#31034;&#20102;&#24403;&#21019;&#24314;&#19968;&#20010;JMX&#36830;&#25509;&#22120;&#26102;&#65292;&#20320;&#21487;&#20197;&#20256;&#32473; <tt class="classname">ConnectorServerFactoryBean</tt> &#30340;&#25152;&#26377;&#21442;&#25968;&#65306;
      </p><pre class="programlisting">&lt;bean id="serverConnector"
      class="org.springframework.jmx.support.ConnectorServerFactoryBean"&gt;
  &lt;property name="objectName" value="connector:name=iiop"/&gt;
  &lt;property name="serviceUrl" 
               value="service:jmx:iiop://localhost/jndi/iiop://localhost:900/myconnector"/&gt;
  &lt;property name="threaded" value="true"/&gt;
  &lt;property name="daemon" value="true"/&gt;
  &lt;property name="environment"&gt;
    &lt;map&gt;
      &lt;entry key="someKey" value="someValue"/&gt;
    &lt;/map&gt;
  &lt;/property&gt;
&lt;/bean&gt;</pre><p>
      &#35201;&#27880;&#24847;&#30340;&#26159;&#65292;&#24403;&#20351;&#29992;&#19968;&#20010;&#22522;&#20110;RMI&#30340;&#36830;&#25509;&#22120;&#65292;&#20320;&#35201;&#20808;&#21551;&#21160;&#26597;&#25214;&#26381;&#21153;&#65288;tnameserv&#25110;&#32773;rmiregistry&#65289;&#65292;&#20197;&#20415;&#23436;&#25104;&#21629;&#21517;&#27880;&#20876;&#12290;
      &#22914;&#26524;&#20320;&#22312;&#20351;&#29992;Spring&#23558;&#36828;&#31243;&#26381;&#21153;&#36890;&#36807;RMI&#36755;&#20986;&#65292;&#37027;&#20040;Spring&#24050;&#32463;&#26500;&#24314;&#20102;&#19968;&#20010;RMI&#27880;&#20876;&#26381;&#21153;&#12290;&#22914;&#26524;&#27809;&#26377;&#20351;&#29992;Spring&#65292;&#36890;&#36807;&#20351;&#29992;&#20197;&#19979;&#37197;&#32622;&#29255;&#27573;&#65292;&#20320;&#20063;&#21487;&#20197;&#24456;&#23481;&#26131;&#22320;&#21551;&#21160;&#19968;&#20010;&#27880;&#20876;&#26381;&#21153;&#12290;
      </p><pre class="programlisting">&lt;bean id="registry" class="org.springframework.remoting.rmi.RmiRegistryFactoryBean"&gt;
  &lt;property name="port" value="1099"/&gt;
&lt;/bean&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jmx-jsr160-client"></a>20.5.2.&nbsp;&#23458;&#25143;&#31471;&#36830;&#25509;&#22120;</h3></div></div><div></div></div><p>
      &#35201;&#26500;&#24314;&#19968;&#20010; <tt class="classname">MBeanServerConnection</tt> &#21040;&#19968;&#20010;&#36828;&#31243;&#30340;JSR-160 <tt class="interfacename">MBeanServer</tt>&#65292;
      &#20351;&#29992;&#20197;&#19979;&#25152;&#31034;&#30340; <tt class="classname">MBeanServerConnectionFactoryBean</tt>&#12290;
      </p><pre class="programlisting">&lt;bean id="clientConnector" class="org.springframework.jmx.support.MBeanServerConnectionFactoryBean"&gt;
  &lt;property name="serviceUrl" value="service:jmx:rmi://localhost:9875"/&gt;
&lt;/bean&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jmx-jsr160-protocols"></a>20.5.3.&nbsp;&#22522;&#20110;Burlap/Hessian/SOAP&#30340;JMX</h3></div></div><div></div></div><p>
      JSR-160&#36816;&#34892;&#25193;&#23637;&#23458;&#25143;&#31471;&#19982;&#26381;&#21153;&#22120;&#31471;&#20132;&#27969;&#30340;&#26041;&#24335;&#12290;&#19978;&#38754;&#30340;&#20363;&#23376;&#37117;&#20351;&#29992;&#20102;&#24378;&#21046;&#30340;&#22522;&#20110;RMI&#30340;&#23454;&#29616;&#65292;&#36825;&#26159;JSR-160&#35268;&#33539;&#65288;IIOP&#21644;JRMP&#65289;&#21644;&#65288;&#21487;&#36873;&#30340;JMXMP&#65289;&#35201;&#27714;&#30340;&#12290;
      &#36890;&#36807;&#20351;&#29992;&#20854;&#20182;&#25552;&#20379;&#21830;&#30340;&#25110;&#32773;&#20854;&#20182;&#30340;JMX&#23454;&#29616;&#65288;&#20363;&#22914; <a href="http://mx4j.sourceforge.net/" target="_top">MX4J</a>&#65289;&#65292;&#20320;&#23601;&#21487;&#20197;&#20139;&#21463;&#20854;&#20182;&#21327;&#35758;&#65292;
      &#22914;SOAP&#65292;Hessian&#65292;&#22522;&#20110;HTTP&#25110;SSL&#30340;Burlap&#65292;&#25110;&#32773;&#20854;&#20182;&#21327;&#35758;&#65306;
      </p><pre class="programlisting">&lt;bean id="serverConnector" class="org.springframework.jmx.support.ConnectorServerFactoryBean"&gt;
  &lt;property name="objectName" value="connector:name=burlap"/&gt;
  &lt;property name="serviceUrl" value="service:jmx:burlap://localhost:9874"/&gt;
&lt;/bean&gt;</pre><p>
      &#19978;&#36848;&#20363;&#23376;&#20013;&#65292;&#20351;&#29992;&#20102;MX4J 3.0.0&#65292;&#26356;&#22810;&#30340;&#20449;&#24687;&#35831;&#26597;&#30475;MX4J&#23448;&#26041;&#25991;&#26723;&#12290;
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="jmx-proxy"></a>20.6.&nbsp;&#36890;&#36807;&#20195;&#29702;&#35775;&#38382;MBean</h2></div></div><div></div></div><p>
    Spring JMX&#20801;&#35768;&#20320;&#21019;&#24314;&#20195;&#29702;&#65292;&#23558;&#35843;&#29992;&#37325;&#26032;&#36335;&#30001;&#21040;&#26412;&#22320;&#25110;&#32773;&#36828;&#31243; <tt class="interfacename">MBeanServer</tt> &#19978;&#27880;&#20876;&#30340;MBean&#12290;
    &#36825;&#20123;&#20195;&#29702;&#25552;&#20379;&#20102;&#19968;&#20010;&#26631;&#20934;Java&#25509;&#21475;&#65292;&#20320;&#21487;&#20197;&#36890;&#36807;&#23427;&#19982;MBean&#20132;&#20114;&#12290;&#20197;&#19979;&#20195;&#30721;&#23637;&#31034;&#20102;&#22914;&#20309;&#20026;&#26412;&#22320; <tt class="interfacename">MBeanServer</tt> &#37197;&#32622;&#19968;&#20010;MBean&#20195;&#29702;&#65306;
    </p><pre class="programlisting">&lt;bean id="proxy" class="org.springframework.jmx.access.MBeanProxyFactoryBean"&gt;
    &lt;property name="objectName" value="bean:name=testBean"/&gt;
    &lt;property name="proxyInterface" value="org.springframework.jmx.IJmxTestBean"/&gt;
&lt;/bean&gt;</pre><p>
    &#20320;&#21487;&#20197;&#30475;&#21040;&#24050;&#32463;&#20026;&#20197; <tt class="classname">ObjectName</tt>:<tt class="literal">bean:name=testBean</tt> &#27880;&#20876;&#30340;MBean&#21019;&#24314;&#20102;&#19968;&#20010;&#20195;&#29702;&#65292;
    &#35813;&#20195;&#29702;&#23454;&#29616;&#30340;&#25152;&#26377;&#25509;&#21475;&#37117;&#30001; <tt class="literal">proxyInterfaces</tt> &#21644;&#26144;&#23556;&#35268;&#21017;&#25484;&#25511;&#12290;
    &#20063;&#23601;&#26159;&#23558;&#36825;&#20123;&#25509;&#21475;&#19978;&#26041;&#27861;&#65292;&#23646;&#24615;&#26144;&#23556;&#20026;MBean&#19978;&#25805;&#20316;&#19982;&#23646;&#24615;&#30340;&#35268;&#21017;&#65292;&#23427;&#20204;&#19982; <tt class="classname">InterfaceBasedMBeanInfoAssembler</tt> &#20351;&#29992;&#30340;&#26159;&#21516;&#19968;&#22871;&#35268;&#21017;&#12290;
    </p><p>
    <tt class="classname">MBeanProxyFactoryBean</tt> &#33021;&#21019;&#24314;&#19968;&#20010;&#20219;&#20309;MBean&#30340;&#20195;&#29702;&#65292;&#21487;&#20197;&#36890;&#36807; <tt class="classname">MBeanServerConnection</tt> &#26469;&#35775;&#38382;&#12290;
    &#40664;&#35748;&#23558;&#23450;&#20301;&#65292;&#20351;&#29992;&#26412;&#22320;&#30340; <tt class="interfacename">MBeanServer</tt>&#12290;&#20294;&#26159;&#65292;&#20026;&#20102;&#36866;&#24212;&#25351;&#21521;&#36828;&#31243;MBean&#30340;&#20195;&#29702;&#65292;&#20320;&#21487;&#20197;&#37325;&#36733;&#36825;&#31181;&#34892;&#20026;&#65292;&#25552;&#20379;&#19968;&#20010;&#25351;&#21521;&#36828;&#31243; <tt class="interfacename">MBeanServer</tt> &#30340; <tt class="classname">MBeanServerConnection</tt>&#12290;
    </p><pre class="programlisting">&lt;bean id="clientConnector"
      class="org.springframework.jmx.support.MBeanServerConnectionFactoryBean"&gt;
  &lt;property name="serviceUrl" value="service:jmx:rmi://remotehost:9875"/&gt;
&lt;/bean&gt;

&lt;bean id="proxy" class="org.springframework.jmx.access.MBeanProxyFactoryBean"&gt;
  &lt;property name="objectName" value="bean:name=testBean"/&gt;
  &lt;property name="proxyInterface" value="org.springframework.jmx.IJmxTestBean"/&gt;
  &lt;property name="server" ref="clientConnector"/&gt;
&lt;/bean&gt;</pre><p>
    &#20320;&#21487;&#20197;&#30475;&#21040;&#25105;&#20204;&#29992; <tt class="classname">MBeanServerConnectionFactoryBean</tt> &#26500;&#24314;&#20102;&#19968;&#20010; <tt class="classname">MBeanServerConnection</tt> &#25351;&#21521;&#19968;&#20010;&#36828;&#31243;&#20027;&#26426;&#12290;
    &#36825;&#20010; <tt class="classname">MBeanServerConnection</tt> &#20043;&#21518;&#36890;&#36807; <tt class="literal">server</tt> &#23646;&#24615;&#20256;&#32473;&#20102; <tt class="classname">MBeanProxyFactoryBean</tt>&#12290;
    &#21019;&#24314;&#30340;&#36825;&#20010;&#20195;&#29702;&#23558;&#36890;&#36807; <tt class="classname">MBeanServerConnection</tt> &#25226;&#25152;&#26377;&#35843;&#29992;&#36716;&#21457;&#32473; <tt class="interfacename">MBeanServer</tt>&#12290;
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="jmx-notifications"></a>20.7.&nbsp;&#36890;&#30693;</h2></div></div><div></div></div><p>
    Spring&#25552;&#20379;&#30340;JMX&#23545;JMX&#36890;&#30693;&#21253;&#21547;&#20102;&#20840;&#38754;&#30340;&#25903;&#25345;&#12290;
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jmx-notifications-listeners"></a>20.7.1.&nbsp;&#20026;&#36890;&#30693;&#27880;&#20876;&#30417;&#21548;&#22120;</h3></div></div><div></div></div><p>
      Spring&#30340;JMX&#25903;&#25345;&#20351;&#24471;&#29992;&#20219;&#24847;&#25968;&#37327;MBean&#27880;&#20876;&#20219;&#24847;&#25968;&#37327;&#30340; <tt class="classname">NotificationListeners</tt> &#30417;&#21548;&#22120;&#65288;&#21253;&#25324;&#30001;Spring&#30340; <tt class="classname">MBeanExporter</tt> &#36755;&#20986;&#21644;&#20854;&#20182;&#26426;&#21046;&#27880;&#20876;&#30340;MBean&#65289;&#37117;&#38750;&#24120;&#23481;&#26131;&#12290;
	  &#36890;&#36807;&#20363;&#23376;&#65292;&#32771;&#34385;&#24403;&#30446;&#26631;MBean&#21457;&#29983;&#20102;&#21464;&#21270;&#37117;&#24819;&#24471;&#21040;&#36890;&#30693;&#65288;&#36890;&#36807; <tt class="classname">Notification</tt>&#65289;&#30340;&#22330;&#26223;&#12290;
	  </p><pre class="programlisting">package com.example;

import javax.management.AttributeChangeNotification;
import javax.management.Notification;
import javax.management.NotificationFilter;
import javax.management.NotificationListener;

public class ConsoleLoggingNotificationListener
               implements NotificationListener, NotificationFilter {

    public void handleNotification(Notification notification, Object handback) {
        System.out.println(notification);
        System.out.println(handback);
    }

    public boolean isNotificationEnabled(Notification notification) {
        return AttributeChangeNotification.class.isAssignableFrom(notification.getClass());
    }
}</pre><pre class="programlisting">&lt;beans&gt;

  &lt;bean id="exporter" class="org.springframework.jmx.export.MBeanExporter"&gt;
    &lt;property name="beans"&gt;
      &lt;map&gt;
        &lt;entry key="bean:name=testBean1" value-ref="testBean"/&gt;
      &lt;/map&gt;
    &lt;/property&gt;
    &lt;property name="notificationListenerMappings"&gt;
      &lt;map&gt;
        &lt;entry key="bean:name=testBean1"&gt;
          &lt;bean class="com.example.ConsoleLoggingNotificationListener"/&gt;
        &lt;/entry&gt;
      &lt;/map&gt;
    &lt;/property&gt;
  &lt;/bean&gt;

  &lt;bean id="testBean" class="org.springframework.jmx.JmxTestBean"&gt;
    &lt;property name="name" value="TEST"/&gt;
    &lt;property name="age" value="100"/&gt;
  &lt;/bean&gt;

&lt;/beans&gt;</pre><p>
		&#19978;&#36848;&#37197;&#32622;&#23601;&#32490;&#21518;&#65292;&#27599;&#24403;&#30446;&#26631;MBean&#65288;<tt class="literal">bean:name=testBean1</tt>&#65289;&#24191;&#25773;&#19968;&#20010;JMX <tt class="classname">Notification</tt> &#26102;&#65292;
		&#36890;&#36807; <tt class="literal">notificationListenerMappings</tt> &#23646;&#24615;&#27880;&#20876;&#30340; <tt class="classname">ConsoleLoggingNotificationListener</tt> &#37117;&#33021;&#24471;&#21040;&#36890;&#30693;&#12290;
		<tt class="classname">ConsoleLoggingNotificationListener</tt> &#23601;&#21487;&#20197;&#37319;&#21462;&#20219;&#20309;&#23427;&#35748;&#20026;&#21512;&#36866;&#30340;&#34892;&#20026;&#26469;&#21709;&#24212; <tt class="classname">Notification</tt>&#12290;
		</p><p>
		&#20320;&#20063;&#21487;&#20197;&#30452;&#25509;&#20351;&#29992;Bean&#21517;&#20316;&#20026;&#36755;&#20986;&#30340;Bean&#21644;&#30417;&#21548;&#22120;&#30452;&#25509;&#30340;&#38142;&#25509;&#12290;
		</p><pre class="programlisting">&lt;beans&gt;

  &lt;bean id="exporter" class="org.springframework.jmx.export.MBeanExporter"&gt;
    &lt;property name="beans"&gt;
      &lt;map&gt;
        &lt;entry key="bean:name=testBean1" value-ref="testBean"/&gt;
      &lt;/map&gt;
    &lt;/property&gt;
    &lt;property name="notificationListenerMappings"&gt;
      &lt;map&gt;
        &lt;entry key="<span class="bold"><b>testBean</b></span>"&gt;
          &lt;bean class="com.example.ConsoleLoggingNotificationListener"/&gt;
        &lt;/entry&gt;
      &lt;/map&gt;
    &lt;/property&gt;
  &lt;/bean&gt;

  &lt;bean id="<span class="bold"><b>testBean</b></span>" class="org.springframework.jmx.JmxTestBean"&gt;
    &lt;property name="name" value="TEST"/&gt;
    &lt;property name="age" value="100"/&gt;
  &lt;/bean&gt;

&lt;/beans&gt;</pre><p>
		&#22914;&#26524;&#26377;&#20154;&#24819;&#20026;&#25152;&#26377;&#36890;&#36807; <tt class="classname">MBeanExporter</tt> &#36755;&#20986;&#30340;Bean&#27880;&#20876;&#21333;&#20010; <tt class="classname">NotificationListener</tt>&#23454;&#20363;&#65292;&#21487;&#20197;&#20351;&#29992;&#36890;&#37197;&#31526;'*'&#65288;&#27809;&#26377;&#24341;&#21495;&#65289;&#20316;&#20026; <tt class="literal">notificationListenerMappings</tt> &#23646;&#24615;&#26144;&#23556;&#20013;&#19968;&#20010;&#23454;&#20307;&#30340;&#38190;&#20540;&#65307;&#22914;&#19979;&#65306;
		
		</p><pre class="programlisting">&lt;property name="notificationListenerMappings"&gt;
  &lt;map&gt;
    &lt;entry key="*"&gt;
      &lt;bean class="com.example.ConsoleLoggingNotificationListener"/&gt;
    &lt;/entry&gt;
  &lt;/map&gt;
&lt;/property&gt;</pre><p>
      &#22914;&#26524;&#24819;&#20570;&#30456;&#21453;&#30340;&#20107;&#24773;&#65288;&#20063;&#23601;&#26159;&#65292;&#20026;&#19968;&#20010;MBean&#27880;&#20876;&#22810;&#20010;&#19981;&#21516;&#30340;&#30417;&#21548;&#22120;&#65289;&#65292;&#37027;&#20040;&#20182;&#23601;&#35201;&#20351;&#29992; <tt class="literal">notificationListeners</tt> &#21015;&#34920;&#23646;&#24615;&#26469;&#26367;&#20195;&#65288;&#20248;&#20808;&#20110; <tt class="literal">notificationListenerMappings</tt> &#23646;&#24615;&#65289;&#12290;
      &#36825;&#26102;&#23601;&#35201;&#37197;&#32622;&#22810;&#20010; <tt class="classname">NotificationListenerBean</tt> &#23454;&#20363;&#65292;&#32780;&#19981;&#20165;&#20165;&#26159;&#19968;&#20010;&#20102;&#8230;&#8230;
      &#19968;&#20010; <tt class="classname">NotificationListenerBean</tt> &#19981;&#20294;&#23553;&#35013;&#20102;&#19968;&#20010;&#25110;&#32773;&#22810;&#20010; <tt class="classname">NotificationListener</tt> &#21644;&#24050;&#27880;&#20876;&#21040;&#19968;&#20010; <tt class="interfacename">MBeanServer</tt> &#30340; <tt class="classname">ObjectName</tt>&#65292;&#23427;&#20063;&#23553;&#35013;&#20102;&#35768;&#22810;&#20854;&#20182;&#23646;&#24615;&#65292;&#20363;&#22914;&#19968;&#20010; <tt class="classname">NotificationFilter</tt> &#21644;&#19968;&#20010;&#21487;&#20197;&#29992;&#20110;JMX&#39640;&#32423;&#36890;&#30693;&#22330;&#26223;&#30340;&#22238;&#20256;&#23545;&#35937;&#12290;
      </p><p>
      &#24403;&#20351;&#29992;&#22810;&#20010; <tt class="classname">NotificationListenerBean</tt> &#23454;&#20363;&#26102;&#65292;&#36825;&#20010;&#37197;&#32622;&#19982;&#21069;&#38754;&#23637;&#31034;&#30340;&#24182;&#27809;&#26377;&#22826;&#22823;&#30340;&#19981;&#21516;&#12290;
      </p><pre class="programlisting">&lt;beans&gt;

  &lt;bean id="exporter" class="org.springframework.jmx.export.MBeanExporter"&gt;
    &lt;property name="beans"&gt;
      &lt;map&gt;
        &lt;entry key="bean:name=testBean1" value-ref="testBean"/&gt;
      &lt;/map&gt;
    &lt;/property&gt;
    &lt;property name="notificationListeners"&gt;
        &lt;list&gt;
            &lt;bean class="org.springframework.jmx.export.NotificationListenerBean"&gt;
                &lt;constructor-arg&gt;
                    &lt;bean class="com.example.ConsoleLoggingNotificationListener"/&gt;
                &lt;/constructor-arg&gt;
                &lt;property name="mappedObjectNames"&gt;
                    &lt;list&gt;
                        &lt;value&gt;bean:name=testBean1&lt;/value&gt;
                    &lt;/list&gt;
                &lt;/property&gt;
            &lt;/bean&gt;
        &lt;/list&gt;
    &lt;/property&gt;
  &lt;/bean&gt;

  &lt;bean id="testBean" class="org.springframework.jmx.JmxTestBean"&gt;
    &lt;property name="name" value="TEST"/&gt;
    &lt;property name="age" value="100"/&gt;
  &lt;/bean&gt;

&lt;/beans&gt;</pre><p>
      &#19978;&#38754;&#20363;&#23376;&#31561;&#21516;&#19982;&#31532;&#19968;&#20010;&#36890;&#30693;&#31034;&#20363;&#12290;&#20551;&#35774;&#27599;&#27425; <tt class="classname">Notification</tt> &#21457;&#29983;&#26102;&#65292;&#25105;&#20204;&#24819;&#24471;&#21040;&#19968;&#20010;&#22238;&#20256;&#23545;&#35937;&#65292;
      &#19988;&#24819;&#36890;&#36807;&#25552;&#20379;&#19968;&#20010; <tt class="classname">NotificationFilter</tt> &#36807;&#28388;&#20986;&#26080;&#20851;&#30340; <tt class="classname">Notifications</tt>&#12290;
      &#33267;&#20110;&#20160;&#20040;&#26159;&#19968;&#20010;&#22238;&#20256;&#23545;&#35937;&#65292;<tt class="classname">NotificationFilter</tt> &#21040;&#24213;&#21448;&#26159;&#20160;&#20040;&#30340;&#20840;&#38754;&#30340;&#25506;&#35752;&#65292;&#35831;&#21442;&#32771;JMX&#35268;&#33539;&#65288;1.2&#65289;<tt class="literal">'The JMX Notification Model'</tt> &#31456;&#33410;&#12290;
      </p><pre class="programlisting">&lt;beans&gt;

  &lt;bean id="exporter" class="org.springframework.jmx.export.MBeanExporter"&gt;
    &lt;property name="beans"&gt;
      &lt;map&gt;
        &lt;entry key="bean:name=testBean1" value-ref="testBean1"/&gt;
        &lt;entry key="bean:name=testBean2" value-ref="testBean2"/&gt;
      &lt;/map&gt;
    &lt;/property&gt;
    &lt;property name="notificationListeners"&gt;
        &lt;list&gt;
            &lt;bean class="org.springframework.jmx.export.NotificationListenerBean"&gt;
                &lt;constructor-arg ref="customerNotificationListener"/&gt;
                &lt;property name="mappedObjectNames"&gt;
                    &lt;list&gt;
                        <i class="lineannotation"><span class="lineannotation">&lt;!-- handles notifications from two distinct MBeans --&gt;</span></i>
                        &lt;value&gt;bean:name=testBean1&lt;/value&gt;
                        &lt;value&gt;bean:name=testBean2&lt;/value&gt;
                    &lt;/list&gt;
                &lt;/property&gt;
                &lt;property name="handback"&gt;
                    &lt;bean class="java.lang.String"&gt;
                        &lt;constructor-arg value="This could be anything..."/&gt;
                    &lt;/bean&gt;
                &lt;/property&gt;
                &lt;property name="notificationFilter" ref="customerNotificationListener"/&gt;
            &lt;/bean&gt;
        &lt;/list&gt;
    &lt;/property&gt;
  &lt;/bean&gt;
  
  <i class="lineannotation"><span class="lineannotation">
  &lt;!-- &#23454;&#29616;&#20102;<tt class="interfacename">NotificationListener</tt> &#21644; <tt class="interfacename">NotificationFilter</tt>&#25509;&#21475; --&gt;
  </span></i>
  &lt;bean id="customerNotificationListener" class="com.example.ConsoleLoggingNotificationListener"/&gt;

  &lt;bean id="testBean1" class="org.springframework.jmx.JmxTestBean"&gt;
    &lt;property name="name" value="TEST"/&gt;
    &lt;property name="age" value="100"/&gt;
  &lt;/bean&gt;

  &lt;bean id="testBean2" class="org.springframework.jmx.JmxTestBean"&gt;
    &lt;property name="name" value="ANOTHER TEST"/&gt;
    &lt;property name="age" value="200"/&gt;
  &lt;/bean&gt;

&lt;/beans&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="jmx-notifications-publishing"></a>20.7.2.&nbsp;&#21457;&#24067;&#36890;&#30693;</h3></div></div><div></div></div><p>
      Spring&#19981;&#20294;&#25552;&#20379;&#20102;&#27880;&#20876;&#25509;&#25910;&#36890;&#30693;&#30340;&#25903;&#25345;&#65292;&#20063;&#25552;&#20379;&#20102;&#23545;&#21457;&#24067;&#36890;&#30693;&#30340;&#25903;&#25345;&#12290;
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>
        &#35201;&#27880;&#24847;&#30340;&#26159;&#65292;&#26412;&#31456;&#33410;&#20165;&#20165;&#19982;&#36890;&#36807; <tt class="classname">MBeanExporter</tt> &#26292;&#38706;&#30340;&#65292;&#34987;Spring&#31649;&#29702;&#30340;Bean&#30456;&#20851;&#12290;
        &#20219;&#20309;&#29616;&#23384;&#30340;&#65292;&#29992;&#25143;&#23450;&#20041;&#30340;MBean&#24212;&#24403;&#20351;&#29992;&#26631;&#20934;JMX API&#26469;&#20570;&#36890;&#30693;&#21457;&#24067;&#12290;
        </p></td></tr></tbody></table></div><p>
      Spring&#30340;JMX&#36890;&#30693;&#21457;&#24067;&#25903;&#25345;&#20013;&#30340;&#20851;&#38190;&#25509;&#21475;&#26159; <tt class="classname">NotificationPublisher</tt>&#65288;&#23450;&#20041;&#20110; <tt class="literal">org.springframework.jmx.export.notification</tt> &#21253;&#20013;&#65289;&#12290;
      &#20219;&#24847;&#35201;&#36890;&#36807; <tt class="classname">MBeanExporter</tt> &#23454;&#20363;&#36755;&#20986;&#20026;MBean&#30340;Bean&#37117;&#21487;&#20197;&#23454;&#29616;
      <tt class="classname">NotificationPublisherAware</tt> &#25509;&#21475;&#26469;&#33719;&#24471;&#23545; <tt class="classname">NotificationPublisher</tt> &#23454;&#20363;&#30340;&#35775;&#38382;&#12290;
      <tt class="classname">NotificationPublisherAware</tt> &#20165;&#20165;&#25552;&#20379;&#36890;&#36807;&#19968;&#20010;&#31616;&#21333;&#30340;setter&#26041;&#27861;&#32473;&#23454;&#29616;&#20102;&#36825;&#20010;&#25509;&#21475;&#30340;Bean&#27880;&#20837;&#19968;&#20010;
      <tt class="classname">NotificationPublisher</tt> &#23454;&#20363;&#65292;&#37027;&#20123;Bean&#23601;&#22240;&#27492;&#21487;&#20197;&#21457;&#24067; <tt class="classname">Notification</tt> &#20102;&#12290;
      </p><p>
      &#23601;&#22914; <tt class="classname">NotificationPublisher</tt> &#31867;&#30340;Javadoc&#25551;&#36848;&#30340;&#19968;&#26679;&#65292;&#36890;&#36807; <tt class="classname">NotificationPublisher</tt> &#26426;&#21046;&#21457;&#24067;&#20107;&#20214;&#30340;&#21463;&#25511;Bean&#26159; <span class="emphasis"><em>&#19981;</em></span> &#38656;&#35201;&#23545;&#20219;&#20309;&#36890;&#30693;&#30340;&#30417;&#21548;&#22120;&#25110;&#32773;&#20854;&#20182;&#35832;&#22914;&#27492;&#31867;&#30340;&#30417;&#21548;&#22120;&#30340;&#29366;&#24577;&#31649;&#29702;&#36127;&#36131;&#30340;&#12290;Spring&#30340;JMX&#25903;&#25345;&#23558;&#22788;&#29702;&#19982;JMX&#26550;&#26500;&#30456;&#20851;&#30340;&#25152;&#26377;&#38382;&#39064;&#12290;
      &#20316;&#20026;&#19968;&#20010;&#24212;&#29992;&#31243;&#24207;&#24320;&#21457;&#32773;&#65292;&#20182;&#25152;&#38656;&#35201;&#20570;&#30340;&#21482;&#26159;&#23454;&#29616; <tt class="classname">NotificationPublisherAware</tt> &#25509;&#21475;&#65292;&#28982;&#21518;&#21033;&#29992;&#27880;&#20837;&#30340; <tt class="classname">NotificationPublisher</tt> &#23454;&#20363;&#21457;&#24067;&#20107;&#20214;&#12290;&#35201;&#27880;&#24847;&#65292;&#21463;&#25511;Bean&#27880;&#20876;&#21040;&#19968;&#20010; <tt class="interfacename">MBeanServer</tt> &#21518;&#65292;<tt class="classname">NotificationPublisher</tt> &#25165;&#34987;&#35774;&#32622;&#12290;
      </p><p>
      &#20351;&#29992; <tt class="classname">NotificationPublisher</tt> &#23454;&#20363;&#30340;&#26041;&#27861;&#24456;&#30452;&#35266;&#65292;&#20154;&#20204;&#21482;&#35201;&#26500;&#24314;&#19968;&#20010; <tt class="classname">Notification</tt> &#23454;&#20363;&#65288;&#25110;&#32773;&#19968;&#20010;&#21512;&#36866;&#30340; <tt class="classname">Notification</tt> &#23376;&#31867;&#30340;&#23454;&#20363;&#65289;&#65292;&#25509;&#30528;&#22635;&#20805;&#19982;&#23558;&#35201;&#21457;&#24067;&#30340;&#20107;&#20214;&#30456;&#20851;&#30340;&#25968;&#25454;&#21040;&#36890;&#30693;&#37324;&#65292;&#28982;&#21518;&#20256;&#20837; <tt class="classname">Notification</tt>&#65292;&#35843;&#29992;<tt class="classname">NotificationPublisher</tt>&#23454;&#20363;&#30340;&#26041;&#27861; <tt class="methodname">sendNotification(Notification)</tt> &#23601;&#21487;&#20197;&#20102;&#12290;
      </p><p>
      &#35753;&#25105;&#20204;&#26469;&#30475;&#19968;&#20010;&#31616;&#21333;&#30340;&#20363;&#23376;&#65292;&#22312;&#36825;&#20010;&#22330;&#26223;&#37324;&#65292;&#36755;&#20986; <tt class="classname">JmxTestBean</tt> &#23454;&#20363;&#22312;&#27599;&#27425; <tt class="literal">add(int, int)</tt> &#25805;&#20316;&#35843;&#29992;&#26102;&#37117;&#20250;&#21457;&#24067; <tt class="classname">NotificationEvent</tt>&#12290;
      </p><pre class="programlisting">package org.springframework.jmx;
			
import org.springframework.jmx.export.notification.NotificationPublisherAware;
import org.springframework.jmx.export.notification.NotificationPublisher;
import javax.management.Notification;

public class JmxTestBean implements IJmxTestBean, NotificationPublisherAware {

    private String name;
    private int age;
    private boolean isSuperman;
    private NotificationPublisher publisher;

    <i class="lineannotation"><span class="lineannotation">// &#28165;&#26224;&#36215;&#35265;&#65292;&#24573;&#30053;&#20102;&#20854;&#20182;getter&#21644;setter</span></i>

    public int add(int x, int y) {
        int answer = x + y;
        this.publisher.sendNotification(new Notification("add", this, 0));
        return answer;
    }

    public void dontExposeMe() {
        throw new RuntimeException();
    }
    
    public void setNotificationPublisher(NotificationPublisher notificationPublisher) {
        this.publisher = notificationPublisher;
    }
}</pre><p><tt class="classname">NotificationPublisher</tt> &#25509;&#21475;&#21644;&#19968;&#22871;&#20351;&#20043;&#36816;&#20316;&#30340;&#26426;&#21046;&#26159;Spring JMX&#25903;&#25345;&#30340;&#20248;&#33391;&#29305;&#24615;&#20043;&#19968;&#12290;
	  &#23427;&#24102;&#26469;&#30340;&#20195;&#20215;&#30830;&#23454;&#26159;&#20351;&#20320;&#30340;&#31867;&#19982;Spring&#65292;JMX&#32039;&#32806;&#21512;&#20102;&#65307;&#19982;&#20197;&#24448;&#19968;&#26679;&#65292;&#25105;&#20204;&#30340;&#24314;&#35758;&#20063;&#26159;&#24456;&#23454;&#38469;&#30340;&#8230;&#8230;&#22914;&#26524;&#20320;&#38656;&#35201; <tt class="classname">NotificationPublisher</tt> &#25552;&#20379;&#30340;&#21151;&#33021;&#65292;&#24182;&#19988;&#25509;&#21463;&#19982;Spring&#65292;JMX&#30340;&#32039;&#32806;&#21512;&#65292;&#37027;&#20040;&#23601;&#34892;&#21160;&#21543;&#12290;
	  </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="jmx-resources"></a>20.8.&nbsp;&#26356;&#22810;&#36164;&#28304;</h2></div></div><div></div></div><p>&#26412;&#31456;&#33410;&#21253;&#21547;&#20102;&#26356;&#22810;&#20851;&#20110;JMX&#30340;&#36164;&#28304;&#30340;&#38142;&#25509;&#12290;</p><div class="itemizedlist"><ul type="disc"><li><p>
        Sun&#30340;<a href="http://java.sun.com/products/JavaManagement/" target="_top">JMX&#20027;&#39029;</a>
        </p></li><li><p>
        <a href="http://jcp.org/aboutJava/communityprocess/final/jsr003/index3.html" target="_top">JMX&#35268;&#33539;</a>&#65288;JSR-000003&#65289;
        </p></li><li><p>
        <a href="http://jcp.org/aboutJava/communityprocess/final/jsr160/index.html" target="_top">JMX&#36828;&#31243;&#25509;&#21475;&#35268;&#33539;</a>&#65288;JSR-000160&#65289;
        </p></li><li><p>
        <a href="http://mx4j.sourceforge.net/" target="_top">MX4J &#20027;&#39029;</a>&#65288;&#19968;&#20010;JMX&#35268;&#33539;&#30340;&#24320;&#28304;&#23454;&#29616;&#65289;
        </p></li><li><p><a href="http://java.sun.com/developer/technicalArticles/J2SE/jmx.html" target="_top">Getting Started with JMX</a> - Sun&#30340;&#19968;&#31687;&#20837;&#38376;&#25991;&#31456;.</p></li></ul></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="cci"></a>Chapter&nbsp;21.&nbsp;JCA CCI</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="cci-introduction"></a>21.1.&nbsp;&#31616;&#20171;</h2></div></div><div></div></div><p>J2EE&#25552;&#20379;JCA&#65288;Java Connector Architecture&#65289;&#35268;&#33539;&#26469;&#26631;&#20934;&#21270;&#23545;EIS&#65288;Enterprise Information System&#65289;&#30340;&#35775;&#38382;&#12290;&#36825;&#20010;&#35268;&#33539;&#34987;&#20998;&#20026;&#20960;&#20010;&#19981;&#21516;&#30340;&#37096;&#20998;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>SPI&#65288;Service provider interfaces&#65289;&#26159;&#36830;&#25509;&#22120;&#25552;&#20379;&#32773;&#65288;connector provider&#65289;&#24517;&#39035;&#23454;&#29616;&#30340;&#25509;&#21475;&#12290;
	&#36825;&#20123;&#25509;&#21475;&#32452;&#25104;&#20102;&#19968;&#20010;&#33021;&#34987;&#37096;&#32626;&#22312;J2EE&#24212;&#29992;&#26381;&#21153;&#22120;&#19978;&#30340;&#36164;&#28304;&#36866;&#37197;&#22120;&#65288;resource adapter&#65289;&#12290;
	&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#30001;&#26381;&#21153;&#22120;&#26469;&#31649;&#29702;&#36830;&#25509;&#27744;&#65288;connection pooling&#65289;&#12289;&#20107;&#21153;&#21644;&#23433;&#20840;&#65288;&#25176;&#31649;&#27169;&#24335;&#65288;managed mode&#65289;&#65289;&#12290;
	&#24212;&#29992;&#26381;&#21153;&#22120;&#36824;&#36127;&#36131;&#31649;&#29702;&#23458;&#25143;&#31471;&#24212;&#29992;&#31243;&#24207;&#20043;&#22806;&#25152;&#25317;&#26377;&#30340;&#37197;&#32622;&#12290;&#36830;&#25509;&#22120;&#65288;connector&#65289;&#21516;&#26679;&#33021;&#22312;&#33073;&#31163;&#24212;&#29992;&#26381;&#21153;&#22120;&#30340;&#24773;&#20917;&#19979;&#20351;&#29992;&#65307;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#24212;&#29992;&#31243;&#24207;&#24517;&#39035;&#30452;&#25509;&#23545;&#23427;&#36827;&#34892;&#37197;&#32622;&#65288;&#38750;&#25176;&#31649;&#27169;&#24335;&#65288;non-managed mode&#65289;&#65289;&#12290;
	</p></li><li><p> CCI &#65288;Common Client Interface&#65289;&#26159;&#24212;&#29992;&#31243;&#24207;&#29992;&#26469;&#19982;&#36830;&#25509;&#22120;&#20132;&#20114;&#24182;&#19982;EIS&#36890;&#20449;&#30340;&#25509;&#21475;&#12290;&#21516;&#26679;&#36824;&#20026;&#26412;&#22320;&#20107;&#21153;&#21010;&#30028;&#25552;&#20379;&#20102;API&#12290;</p></li></ul></div><p>Spring&#23545;CCI&#30340;&#25903;&#25345;&#65292;&#30446;&#30340;&#26159;&#20026;&#20102;&#25552;&#20379;&#20197;&#20856;&#22411;&#30340;Spring&#26041;&#24335;&#26469;&#35775;&#38382;CCI&#36830;&#25509;&#22120;&#30340;&#31867;&#65292;&#24182;&#26377;&#25928;&#22320;&#20351;&#29992;Spring&#30340;&#36890;&#29992;&#36164;&#28304;&#21644;&#20107;&#21153;&#31649;&#29702;&#24037;&#20855;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#36830;&#25509;&#22120;&#30340;&#23458;&#25143;&#31471;&#19981;&#24517;&#24635;&#26159;&#20351;&#29992;CCI&#12290; &#26576;&#20123;&#36830;&#25509;&#22120;&#26292;&#38706;&#23427;&#20204;&#33258;&#24049;&#30340;API&#65292;&#21482;&#25552;&#20379;JCA&#36164;&#28304;&#36866;&#37197;&#22120;&#65288;resource adapter&#65289;
    &#20197;&#20351;&#29992;J2EE&#23481;&#22120;&#30340;&#26576;&#20123;&#31995;&#32479;&#22865;&#32422;&#65288;system contracts&#65289;&#65288;&#36830;&#25509;&#27744;&#65288;connection pooling&#65289;&#65292;&#20840;&#23616;&#20107;&#21153;&#65288;global transactions&#65289;&#65292;&#23433;&#20840;&#65288;security&#65289;&#65289;&#12290;
    Spring&#24182;&#27809;&#26377;&#20026;&#36825;&#31867;&#36830;&#25509;&#22120;&#29305;&#26377;&#65288;connector-specific&#65289;&#30340;API&#25552;&#20379;&#29305;&#27530;&#30340;&#25903;&#25345;&#12290;</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="cci-config"></a>21.2.&nbsp;&#37197;&#32622;CCI</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cci-config-connector"></a>21.2.1.&nbsp;&#36830;&#25509;&#22120;&#37197;&#32622;</h3></div></div><div></div></div><p>&#20351;&#29992;JCA CCI&#30340;&#22522;&#30784;&#36164;&#28304;&#26159; <tt class="interfacename">ConnectionFactory</tt> &#25509;&#21475;&#12290;
   &#25152;&#29992;&#30340;&#36830;&#25509;&#22120;&#24517;&#39035;&#25552;&#20379;&#36825;&#20010;&#25509;&#21475;&#30340;&#19968;&#20010;&#23454;&#29616;&#12290;</p><p>
   &#20026;&#20102;&#20351;&#29992;&#36830;&#25509;&#22120;&#65292;&#21487;&#20197;&#25226;&#23427;&#37096;&#32626;&#21040;&#20320;&#30340;&#24212;&#29992;&#26381;&#21153;&#22120;&#19978;&#65292;&#24182;&#20174;&#26381;&#21153;&#22120;&#30340;JNDI&#29615;&#22659;&#65288;&#25176;&#31649;&#27169;&#24335;&#65289;&#21462;&#22238; <tt class="interfacename">ConnectionFactory</tt>&#12290;
   &#36830;&#25509;&#22120;&#24517;&#39035;&#25171;&#21253;&#20026;&#19968;&#20010;RAR&#25991;&#20214;&#65288;resource adapte archive&#65289;&#24182;&#21253;&#21547;&#19968;&#20010;&#37096;&#32626;&#25551;&#36848;&#31526;&#25991;&#20214; <tt class="filename">ra.xml</tt> &#12290;
   &#37096;&#32626;&#26102;&#38656;&#35201;&#25351;&#23450;&#36164;&#28304;&#30340;&#23454;&#38469;&#21517;&#23383;&#12290;&#22914;&#26524;&#24819;&#36890;&#36807;Spring&#35775;&#38382;&#23427;&#65292;&#21482;&#35201;&#31616;&#21333;&#22320;&#20351;&#29992;Spring&#30340; <tt class="classname">JndiObjectFactoryBean</tt> &#26469;&#36890;&#36807;JNDI&#21517;&#23383;&#33719;&#21462;&#24037;&#21378;&#12290;</p><p>
   &#20351;&#29992;&#36830;&#25509;&#22120;&#30340;&#21478;&#19968;&#31181;&#26041;&#27861;&#26159;&#25226;&#23427;&#23884;&#20837;&#21040;&#24212;&#29992;&#31243;&#24207;&#20013;&#65288;&#38750;&#25176;&#31649;&#27169;&#24335;&#65288;non-managed mode&#65289;&#65289;&#65292;&#32780;&#19981;&#29992;&#22312;&#24212;&#29992;&#26381;&#21153;&#22120;&#20013;&#37096;&#32626;&#24182;&#37197;&#32622;&#23427;&#12290;
   Spring&#25552;&#20379;&#20102;&#36890;&#36807;&#24050;&#25552;&#20379;&#30340; <tt class="literal">FactoryBean</tt>&#65288;<tt class="classname">LocalConnectionFactoryBean</tt>)&#65289;&#26469;&#23558;&#36830;&#25509;&#22120;&#37197;&#32622;&#25104;&#19968;&#20010;bean&#30340;&#21487;&#33021;&#12290;
   &#22312;&#36825;&#31181;&#26041;&#24335;&#20013;&#65292;&#21482;&#38656;&#35201;&#25226;&#36830;&#25509;&#22120;&#31867;&#24211;&#25918;&#21040;classpath&#30446;&#24405;&#19979;&#65288;&#19981;&#38656;&#35201;RAR&#25991;&#20214;&#21644; <tt class="filename">ra.xml</tt> &#25551;&#36848;&#31526;&#65289;&#12290;
   &#22914;&#26524;&#26377;&#24517;&#35201;&#30340;&#35805;&#65292;&#24517;&#39035;&#20174;&#36830;&#25509;&#22120;&#30340;RAR&#25991;&#20214;&#35299;&#21387;&#24471;&#21040;&#37027;&#20010;&#31867;&#24211;&#12290;</p><p>
   &#19968;&#26086;&#35775;&#38382; <tt class="interfacename">ConnectionFactory</tt> &#23454;&#20363;&#65292;
   &#23601;&#21487;&#20197;&#23558;&#23427;&#27880;&#20837;&#21040;&#32452;&#20214;&#12290;&#36825;&#20123;&#32452;&#20214;&#26082;&#21487;&#20197;&#29992;&#31616;&#21333;&#30340;CCI API&#32534;&#30721;&#65292;&#20063;&#21487;&#20197;&#21033;&#29992;Spring&#25903;&#25345;CCI&#35775;&#38382;&#30340;&#31867;&#65288;&#27604;&#22914;&#65292;<tt class="classname">CciTemplate</tt>&#65289;&#12290;
   </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>
		&#24403;&#22312;&#38750;&#25176;&#31649;&#27169;&#24335;&#65288;non-managed mode&#65289;&#19979;&#20351;&#29992;&#36830;&#25509;&#22120;&#26102;&#65292;&#23558;&#26080;&#27861;&#20351;&#29992;&#20840;&#23616;&#20107;&#21153;&#65292;
		&#22240;&#20026;&#35813;&#36164;&#28304;&#20174;&#19981;&#20250;&#34987;&#21152;&#20837;&#25110;&#21024;&#38500;&#21040;&#24403;&#21069;&#32447;&#31243;&#30340;&#24403;&#21069;&#20840;&#23616;&#20107;&#21153;&#20013;&#12290;&#35813;&#36164;&#28304;&#26681;&#26412;&#19981;&#30693;&#36947;&#20219;&#20309;&#21487;&#33021;&#27491;&#22312;&#36816;&#34892;&#30340;&#20840;&#23616;&#30340;J2EE&#20107;&#21153;&#12290;
		</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cci-config-connectionfactory"></a>21.2.2.&nbsp;&#22312;Spring&#20013;&#37197;&#32622;<tt class="interfacename">ConnectionFactory</tt></h3></div></div><div></div></div><p>
   &#20026;&#20102;&#21019;&#24314;&#21040; EIS &#30340;&#36830;&#25509;&#65292;&#22914;&#26524;&#22788;&#20110;&#25176;&#31649;&#27169;&#24335;&#65288;managed mode&#65289;&#65292;&#20320;&#38656;&#35201;&#20174;&#24212;&#29992;&#26381;&#21153;&#22120;&#33719;&#21462;&#19968;&#20010; <tt class="interfacename">ConnectionFactory</tt> &#65292;
   &#25110;&#32773;&#24403;&#20320;&#22312;&#38750;&#25176;&#31649;&#27169;&#24335;&#65288;non-managed mode&#65289;&#26102;&#30452;&#25509;&#20174;Spring&#21435;&#33719;&#21462;&#12290;</p><p>&#22312;&#25176;&#31649;&#27169;&#24335;&#65288;managed mode&#65289;&#19979;&#65292;&#20320;&#21487;&#20197;&#20174;JNDI&#35775;&#38382; <tt class="interfacename">ConnectionFactory</tt>&#65292;
   &#23427;&#30340;&#23646;&#24615;&#23558;&#34987;&#37197;&#32622;&#22312;&#24212;&#29992;&#26381;&#21153;&#22120;&#20013;&#12290;</p><pre class="programlisting">&lt;bean id="eciConnectionFactory" class="org.springframework.jndi.JndiObjectFactoryBean"&gt;
 &lt;property name="jndiName" value="eis/cicseci"/&gt;
&lt;/bean&gt;</pre><p>
	 &#22312;&#38750;&#25176;&#31649;&#27169;&#24335;&#65288;non-managed mode&#65289;&#19979;&#65292;&#20320;&#24517;&#39035;&#22312;Spring&#37197;&#32622;&#20013;&#23558;&#20320;&#35201;&#29992;&#30340; <tt class="interfacename">ConnectionFactory</tt> &#37197;&#32622;&#20026;&#19968;&#20010;JavaBean&#12290;
	<tt class="classname">LocalConnectionFactoryBean</tt> &#31867;&#25552;&#20379;&#36825;&#31181;&#37197;&#32622;&#39118;&#26684;&#65292;&#25226; <tt class="classname">ManagedConnectionFactory</tt> &#20256;&#20837;&#21040;&#20320;&#30340;&#36830;&#25509;&#22120;&#30340;&#23454;&#29616;&#20013;&#65292;
	&#26292;&#38706;&#24212;&#29992;&#32423;&#30340;CCI <tt class="interfacename">ConnectionFactory</tt>&#12290;
	 </p><pre class="programlisting">&lt;bean id="eciManagedConnectionFactory" class="com.ibm.connector2.cics.ECIManagedConnectionFactory"&gt;
 &lt;property name="serverName" value="TXSERIES"/&gt;
 &lt;property name="connectionURL" value="tcp://localhost/"/&gt;
 &lt;property name="portNumber" value="2006"/&gt;
&lt;/bean&gt;

&lt;bean id="eciConnectionFactory" class="org.springframework.jca.support.LocalConnectionFactoryBean"&gt;
 &lt;property name="managedConnectionFactory" ref="eciManagedConnectionFactory"/&gt;
&lt;/bean&gt;</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>
	&#20320;&#19981;&#33021;&#30452;&#25509;&#23454;&#20363;&#21270;&#19968;&#20010;&#25351;&#23450;&#30340; <tt class="interfacename">ConnectionFactory</tt> &#25509;&#21475;&#12290;
	&#20320;&#38656;&#35201;&#20026;&#36830;&#25509;&#22120;&#23454;&#29616;&#30456;&#24212;&#30340; <tt class="classname">ManagedConnectionFactory</tt> &#25509;&#21475;&#65292;&#36825;&#20010;&#25509;&#21475;&#26159;JCA SPI&#35268;&#33539;&#30340;&#19968;&#37096;&#20998;&#12290;
	</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cci-config-cci-connections"></a>21.2.3.&nbsp;&#37197;&#32622;CCI&#36830;&#25509;</h3></div></div><div></div></div><p>
   JCA CCI&#20801;&#35768;&#24320;&#21457;&#32773;&#20351;&#29992;&#33258;&#24049;&#30340;&#36830;&#25509;&#22120;&#30340; <tt class="interfacename">ConnectionSpec</tt> &#25509;&#21475;&#23454;&#29616;&#26469;&#37197;&#32622;&#21040; EIS &#30340;&#36830;&#25509;&#12290;
   &#20026;&#20102;&#37197;&#32622;&#35813;&#36830;&#25509;&#30340;&#23646;&#24615;&#65292;&#38656;&#35201;&#29992;&#19968;&#20010;&#25351;&#23450;&#30340; <tt class="classname">ConnectionSpecConnectionFactoryAdapter</tt> &#36866;&#37197;&#22120;&#26469;&#23553;&#35013;&#30446;&#26631;&#36830;&#25509;&#24037;&#21378;&#12290;
   &#22240;&#27492;&#65292;&#29305;&#23450;&#30340; <tt class="interfacename">ConnectionSpec</tt> &#25509;&#21475;&#21487;&#20197;&#29992; <tt class="literal">connectionSpec</tt> &#23646;&#24615;&#26469;&#37197;&#32622;&#65288;&#20316;&#20026;&#19968;&#20010;&#20869;&#37096;bean&#65289;&#12290;
  </p><p>&#36825;&#20010;&#23646;&#24615;&#19981;&#26159;&#24517;&#38656;&#30340;&#65292;&#22240;&#20026;CCI <tt class="interfacename">ConnectionFactory</tt> &#25509;&#21475;&#23450;&#20041;&#20102;&#20004;&#20010;&#19981;&#21516;&#30340;&#26041;&#27861;&#26469;&#33719;&#21462; CCI &#36830;&#25509;&#12290;
   <tt class="interfacename">ConnectionSpec</tt> &#30340;&#19968;&#20123;&#23646;&#24615;&#24120;&#24120;&#21487;&#20197;&#34987;&#37197;&#32622;&#22312;&#24212;&#29992;&#26381;&#21153;&#22120;&#20013;&#65288;&#25176;&#31649;&#27169;&#24335;&#65288;managed mode&#65289;&#65289;
   &#25110;&#30456;&#20851;&#30340;&#26412;&#22320; <tt class="classname">ManagedConnectionFactory</tt> &#23454;&#29616;&#12290;
  </p><pre class="programlisting">public interface ConnectionFactory implements Serializable, Referenceable {
 ...
 Connection getConnection() throws ResourceException;
 Connection getConnection(ConnectionSpec connectionSpec) throws ResourceException;
 ...
}</pre><p>
   Spring&#25552;&#20379;&#20102; <tt class="classname">ConnectionSpecConnectionFactoryAdapter</tt> &#36866;&#37197;&#22120;&#65292;
	 &#20801;&#35768;&#20320;&#25351;&#23450;&#19968;&#20010; <tt class="interfacename">ConnectionSpec</tt> &#25509;&#21475;&#30340;&#23454;&#20363;, &#20379;&#32473;&#23450;&#24037;&#21378;&#30340;&#25152;&#26377;&#25805;&#20316;&#20351;&#29992;&#12290;
   &#22914;&#26524;&#25351;&#23450;&#20102;&#36866;&#37197;&#22120;&#30340; <tt class="literal">connectionSpec</tt> &#23646;&#24615;&#65292;&#36866;&#37197;&#22120;&#23601;&#20351;&#29992;&#27809;&#26377;&#21442;&#25968;&#30340; <tt class="literal">getConnection</tt> &#21464;&#37327;&#65292;
   &#32780;&#19981;&#26159;&#26377; <tt class="interfacename">ConnectionSpec</tt> &#21442;&#25968;&#30340;&#21464;&#37327;&#12290;</p><pre class="programlisting">&lt;bean id="managedConnectionFactory"
  class="com.sun.connector.cciblackbox.CciLocalTxManagedConnectionFactory"&gt;
 &lt;property name="connectionURL" value="jdbc:hsqldb:hsql://localhost:9001"/&gt;
 &lt;property name="driverName" value="org.hsqldb.jdbcDriver"/&gt;
&lt;/bean&gt;

&lt;bean id="targetConnectionFactory"
  class="org.springframework.jca.support.LocalConnectionFactoryBean"&gt;
 &lt;property name="managedConnectionFactory" ref="managedConnectionFactory"/&gt;
&lt;/bean&gt;

&lt;bean id="connectionFactory"
  class="org.springframework.jca.cci.connection.ConnectionSpecConnectionFactoryAdapter"&gt;
 &lt;property name="targetConnectionFactory" ref="targetConnectionFactory"/&gt;
 &lt;property name="connectionSpec"&gt;
  &lt;bean class="com.sun.connector.cciblackbox.CciConnectionSpec"&gt;
   &lt;property name="user" value="sa"/&gt;
   &lt;property name="password" value=""/&gt;
  &lt;/bean&gt;
 &lt;/property&gt;
&lt;/bean&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cci-config-single-connection"></a>21.2.4.&nbsp;&#20351;&#29992;&#19968;&#20010; CCI &#21333;&#36830;&#25509;</h3></div></div><div></div></div><p>
   &#22914;&#26524;&#24819;&#20351;&#29992;&#19968;&#20010; CCI &#21333;&#36830;&#25509;&#65292;Spring&#25552;&#20379;&#19968;&#20010;&#39069;&#22806;&#30340; <tt class="interfacename">ConnectionFactory</tt> &#36866;&#37197;&#22120;&#26469;&#31649;&#29702;&#23427;&#12290;
   <tt class="classname">SingleConnectionFactory</tt> &#36866;&#37197;&#22120;&#31867;&#23558;&#24310;&#36831;&#25171;&#24320;&#19968;&#20010;&#21333;&#29420;&#30340;&#36830;&#25509;&#24182;&#22312;&#24212;&#29992;&#31243;&#24207;&#38144;&#27585;&#36825;&#20010;bean&#30340;&#26102;&#20505;&#20851;&#38381;&#23427;&#12290;
   &#36825;&#20010;&#31867;&#23558;&#26292;&#38706;&#20986;&#29305;&#27530; <tt class="interfacename">Connection</tt> &#30340;&#30456;&#24212;&#20195;&#29702;&#65292;&#24182;&#20849;&#20139;&#21516;&#19968;&#20010;&#24213;&#23618;&#30340;&#29289;&#29702;&#36830;&#25509;&#12290;
   </p><pre class="programlisting">&lt;bean id="eciManagedConnectionFactory"
  class="com.ibm.connector2.cics.ECIManagedConnectionFactory"&gt;
 &lt;property name="serverName" value="TEST"/&gt;
 &lt;property name="connectionURL" value="tcp://localhost/"/&gt;
 &lt;property name="portNumber" value="2006"/&gt;
&lt;/bean&gt;

&lt;bean id="targetEciConnectionFactory"
  class="org.springframework.jca.support.LocalConnectionFactoryBean"&gt;
 &lt;property name="managedConnectionFactory" ref="eciManagedConnectionFactory"/&gt;
&lt;/bean&gt;

&lt;bean id="eciConnectionFactory"
  class="org.springframework.jca.cci.connection.SingleConnectionFactory"&gt;
 &lt;property name="targetConnectionFactory" ref="targetEciConnectionFactory"/&gt;
&lt;/bean&gt;</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#36825;&#20010; <tt class="interfacename">ConnectionFactory</tt> &#36866;&#37197;&#22120;&#19981;&#33021;&#30452;&#25509;&#29992; <tt class="interfacename">ConnectionSpec</tt> &#37197;&#32622;&#12290;
	&#22914;&#26524;&#38656;&#35201;&#29305;&#23450; <tt class="interfacename">ConnectionSpec</tt> &#30340;&#21333;&#19968;&#36830;&#25509;&#65292;&#37027;&#20040;&#21487;&#20197;&#29992; <tt class="classname">SingleConnectionFactory</tt> &#19982;&#20043;&#36890;&#20449;&#30340;&#20013;&#38388; <tt class="classname">ConnectionSpecConnectionFactoryAdapter</tt> &#36866;&#37197;&#22120;&#12290;
    </p></td></tr></tbody></table></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="cci-using"></a>21.3.&nbsp;&#20351;&#29992;Spring&#30340; CCI&#35775;&#38382;&#25903;&#25345;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cci-record-creator"></a>21.3.1.&nbsp;&#35760;&#24405;&#36716;&#25442;</h3></div></div><div></div></div><p>
   &#23545;JCA CCI&#25903;&#25345;&#30340;&#19968;&#20010;&#30446;&#26631;&#26159;&#25552;&#20379;&#26041;&#20415;&#30340;&#26426;&#21046;&#26469;&#25805;&#20316;CCI&#35760;&#24405;&#12290;
   &#24320;&#21457;&#20154;&#21592;&#21487;&#20197;&#36890;&#36807;&#20351;&#29992;Spring&#30340; <tt class="classname">CciTemplate</tt> &#26469;&#25351;&#23450;&#21019;&#24314;&#35760;&#24405;&#24182;&#20174;&#35760;&#24405;&#20013;&#25552;&#21462;&#25968;&#25454;&#30340;&#31574;&#30053;&#12290;
   &#22914;&#26524;&#20320;&#19981;&#24819;&#22312;&#24212;&#29992;&#31243;&#24207;&#20013;&#30452;&#25509;&#25805;&#20316;&#35760;&#24405;&#65292;&#21487;&#20197;&#20351;&#29992;&#19979;&#38754;&#30340;&#25509;&#21475;&#26469;&#37197;&#32622;&#29992;&#20110;&#36755;&#20837;&#36755;&#20986;&#35760;&#24405;&#30340;&#31574;&#30053;&#12290;
   </p><p>
    &#20026;&#20102;&#21019;&#24314;&#19968;&#20010;&#36755;&#20837; <tt class="interfacename">Record</tt>&#65292;&#24320;&#21457;&#20154;&#21592;&#21487;&#20197;&#20351;&#29992; <tt class="interfacename">RecordCreator</tt> &#25509;&#21475;&#30340;&#19968;&#20010;&#29305;&#23450;&#23454;&#29616;&#12290;
   </p><pre class="programlisting">public interface RecordCreator {

 Record createRecord(RecordFactory recordFactory) throws ResourceException, DataAccessException;
}</pre><p>
   &#27491;&#22914;&#20320;&#25152;&#30475;&#21040;&#30340;&#19968;&#26679;&#65292; <tt class="literal">createRecord(..)</tt> &#26041;&#27861;&#25509;&#25910;&#19968;&#20010; <tt class="interfacename">RecordFactory</tt> &#23454;&#20363;&#20316;&#20026;&#21442;&#25968;&#65292;
   &#35813;&#21442;&#25968;&#23545;&#24212;&#20110;&#25152;&#20351;&#29992;&#30340; <tt class="interfacename">ConnectionFactory</tt> &#30340; <tt class="interfacename">RecordFactory</tt> &#25509;&#21475;&#12290;
   &#23427;&#33021;&#34987;&#29992;&#20110;&#21019;&#24314; <tt class="interfacename">IndexedRecord</tt> &#25110;&#32773; <tt class="interfacename">MappedRecord</tt> &#30340;&#23454;&#20363;&#12290;
   &#19979;&#38754;&#30340;&#20363;&#23376;&#23637;&#31034;&#20102;&#22914;&#20309;&#20351;&#29992; <tt class="interfacename">RecordFactory</tt> &#25509;&#21475;&#21644;&#32034;&#24341;&#65288;indexed&#65289;/&#26144;&#23556;&#65288;mapped&#65289;&#35760;&#24405;&#12290;
   </p><pre class="programlisting">public class MyRecordCreator implements RecordCreator {

 public Record createRecord(RecordFactory recordFactory) throws ResourceException {
  IndexedRecord input = recordFactory.createIndexedRecord("input");
  input.add(new Integer(id));
  return input;
 }
}</pre><p>
   &#19968;&#20010;&#36755;&#20986; <tt class="interfacename">Record</tt> &#25509;&#21475;&#33021;&#34987;&#29992;&#20110;&#20174;EIS&#25910;&#22238;&#25968;&#25454;&#12290;
   &#22240;&#27492;&#65292;&#19968;&#20010; <tt class="interfacename">RecordExtractor</tt> &#25509;&#21475;&#30340;&#29305;&#23450;&#23454;&#29616;&#21487;&#20197;&#34987;&#20256;&#32473;Spring&#30340; <tt class="classname">CciTemplate</tt> &#65292;
   &#29992;&#26469;&#20174;&#36755;&#20986; <tt class="interfacename">Record</tt> &#25509;&#21475;&#20013;&#25552;&#21462;&#25968;&#25454;&#12290;
   </p><pre class="programlisting">public interface RecordExtractor {

 Object extractData(Record record) throws ResourceException, SQLException, DataAccessException;
}</pre><p>&#19979;&#38754;&#30340;&#20363;&#23376;&#23637;&#31034;&#20102;&#22914;&#20309;&#20351;&#29992; <tt class="interfacename">RecordExtractor</tt> &#25509;&#21475;&#12290;</p><pre class="programlisting">public class MyRecordExtractor implements RecordExtractor {

 public Object extractData(Record record) throws ResourceException {
  CommAreaRecord commAreaRecord = (CommAreaRecord) record;
  String str = new String(commAreaRecord.toByteArray());
  String field1 = string.substring(0,6);
  String field2 = string.substring(6,1);
  return new OutputObject(Long.parseLong(field1), field2);
 }
}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cci-using-template"></a>21.3.2.&nbsp;<tt class="classname">CciTemplate</tt>&#31867;</h3></div></div><div></div></div><p>
   <tt class="classname">CciTemplate</tt> &#31867;&#26159; CCI &#26680;&#24515;&#25903;&#25345;&#21253;&#65288;<tt class="literal">org.springframework.jca.cci.core</tt>&#65289;&#20013;&#20027;&#35201;&#30340;&#31867;&#12290;
   &#23427;&#31616;&#21270;&#20102;CCI&#30340;&#20351;&#29992;&#65292;&#22240;&#20026;&#23427;&#20250;&#22788;&#29702;&#36164;&#28304;&#30340;&#21019;&#24314;&#21644;&#37322;&#25918;&#12290;&#36825;&#26377;&#21161;&#20110;&#36991;&#20813;&#24120;&#35265;&#30340;&#38169;&#35823;&#65292;&#27604;&#22914;&#24635;&#26159;&#24536;&#35760;&#20851;&#38381;&#36830;&#25509;&#12290;
   &#23427;&#20851;&#27880;&#36830;&#25509;&#21644;&#20132;&#20114;&#23545;&#35937;&#30340;&#29983;&#21629;&#21608;&#26399;&#65292;&#20174;&#32780;&#20351;&#24212;&#29992;&#31243;&#24207;&#30340;&#20195;&#30721;&#21487;&#20197;&#19987;&#27880;&#20110;&#22788;&#29702;&#20174;&#24212;&#29992;&#31243;&#24207;&#25968;&#25454;&#20013;&#29983;&#25104;&#36755;&#20837;&#35760;&#24405;&#21644;&#20174;&#36755;&#20986;&#35760;&#24405;&#20013;&#25552;&#21462;&#24212;&#29992;&#31243;&#24207;&#25968;&#25454;&#12290;</p><p>JCA CCI&#35268;&#33539;&#23450;&#20041;&#20102;&#20004;&#20010;&#19981;&#21516;&#30340;&#26041;&#27861;&#26469;&#22312;EIS&#19978;&#35843;&#29992;&#25805;&#20316;&#12290;CCI <tt class="interfacename">Interaction</tt> &#25509;&#21475;&#25552;&#20379;&#20004;&#20010; <tt class="literal">execute</tt> &#26041;&#27861;&#30340;&#31614;&#21517;&#65306;</p><pre class="programlisting">public interface javax.resource.cci.Interaction {
 ...
 boolean execute(InteractionSpec spec, Record input, Record output) throws ResourceException;

 Record execute(InteractionSpec spec, Record input) throws ResourceException;
 ...
}</pre><p>&#20381;&#36182;&#20110;&#27169;&#26495;&#26041;&#27861;&#30340;&#35843;&#29992;&#65292;<tt class="classname">CciTemplate</tt> &#31867;&#21487;&#20197;&#30693;&#36947; interaction&#19978;&#30340;&#21738;&#20010; <tt class="literal">execute</tt> &#26041;&#27861;&#34987;&#35843;&#29992;&#12290;
   &#22312;&#20219;&#20309;&#24773;&#20917;&#19979;&#65292;&#37117;&#24517;&#39035;&#26377;&#19968;&#20010;&#27491;&#30830;&#21021;&#22987;&#21270;&#36807;&#30340; <tt class="interfacename">InteractionSpec</tt> &#23454;&#20363;&#12290;</p><p><tt class="literal">CciTemplate.execute(..)</tt>&#21487;&#20197;&#20197;&#19979;&#21015;&#20004;&#31181;&#26041;&#24335;&#20351;&#29992;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#22312;&#25552;&#20379;&#30452;&#25509;&#30340; <tt class="interfacename">Record</tt> &#21442;&#25968;&#30340;&#24773;&#20917;&#19979;&#65292;&#21482;&#38656;&#35201;&#20256;&#36882;&#36755;&#20837;&#35760;&#24405;&#32473; CCI &#65292;
	 &#32780;&#36820;&#22238;&#30340;&#23545;&#35937;&#23601;&#26159;&#23545;&#24212;&#30340; CCI &#36755;&#20986;&#35760;&#24405;&#12290;</p></li><li><p>
     &#22312;&#25552;&#20379;&#20351;&#29992;&#35760;&#24405;&#26144;&#23556;&#30340;&#24212;&#29992;&#23545;&#35937;&#30340;&#24773;&#20917;&#19979;&#65292;&#20320;&#38656;&#35201;&#25552;&#20379;&#30456;&#24212;&#30340; <tt class="interfacename">RecordCreator</tt> &#21644; <tt class="interfacename">RecordExtractor</tt> &#23454;&#20363;&#12290;</p></li></ul></div><p>&#31532;&#19968;&#31181;&#26041;&#27861;&#23558;&#20351;&#29992;&#19979;&#38754;&#30340;&#27169;&#26495;&#26041;&#27861;&#12290;&#36825;&#20123;&#27169;&#26495;&#26041;&#27861;&#23558;&#30452;&#25509;&#23545;&#24212;&#21040; <tt class="interfacename">Interaction</tt> &#25509;&#21475;&#12290;</p><pre class="programlisting">public class CciTemplate implements CciOperations {

 public Record execute(InteractionSpec spec, Record inputRecord)
   throws DataAccessException { ... }

 public void execute(InteractionSpec spec, Record inputRecord, Record outputRecord)
   throws DataAccessException { ... }

}</pre><p>&#31532;&#20108;&#31181;&#26041;&#27861;&#38656;&#35201;&#25105;&#20204;&#20197;&#21442;&#25968;&#30340;&#26041;&#24335;&#25351;&#23450;&#21019;&#24314;&#35760;&#24405;&#21644;&#35760;&#24405;&#25552;&#21462;&#30340;&#31574;&#30053;&#12290;
	   &#20351;&#29992;&#21069;&#38754;&#35760;&#24405;&#36716;&#21270;&#19968;&#33410;&#20013;&#25551;&#36848;&#30340;&#25509;&#21475;&#12290;&#23545;&#24212;&#30340; <tt class="classname">CciTemplate</tt> &#26041;&#27861;&#22914;&#19979;&#65306;</p><pre class="programlisting">public class CciTemplate implements CciOperations {

 public Record execute(InteractionSpec spec, RecordCreator inputCreator)
   throws DataAccessException { ... }

 public Object execute(InteractionSpec spec, Record inputRecord, RecordExtractor outputExtractor)
   throws DataAccessException { ... }

 public Object execute(InteractionSpec spec, RecordCreator creator, RecordExtractor extractor)
   throws DataAccessException { ... }

}</pre><p>
   &#38500;&#38750;&#22312;&#27169;&#26495;&#19978;&#35774;&#32622; <tt class="literal">outputRecordCreator</tt> &#23646;&#24615;&#65288;&#21442;&#35265;&#19979;&#19968;&#37096;&#20998;&#65289;&#65292;
   &#19981;&#28982;&#27599;&#20010;&#26041;&#27861;&#37117;&#23558;&#35843;&#29992;CCI <tt class="interfacename">Interaction</tt> &#20013;&#30456;&#24212;&#30340;&#21547;&#26377;&#20004;&#20010;&#21442;&#25968;&#65306;
   <tt class="interfacename">InteractionSpec</tt> &#21644;&#36755;&#20837; <tt class="interfacename">Record</tt>&#30340; <tt class="literal">execute</tt> &#26041;&#27861;&#65292;
   &#24182;&#25509;&#25910;&#19968;&#20010;&#36755;&#20986; <tt class="interfacename">Record</tt> &#20316;&#20026;&#36820;&#22238;&#20540;&#12290;</p><p>&#36890;&#36807; <tt class="literal">createIndexRecord(..)</tt> &#21644; <tt class="literal">createMappedRecord(..)</tt> &#26041;&#27861;&#65292;
   <tt class="classname">CciTemplate</tt> &#22312; <tt class="interfacename">RecordCreator</tt> &#23454;&#29616;&#31867;&#22806;&#37096;&#20063;&#25552;&#20379;&#20102;&#21019;&#24314;
   <tt class="literal">IndexRecord</tt> &#21644; <tt class="literal">MappedRecord</tt>&#12290;
   &#36824;&#21487;&#20197;&#29992;&#26469;&#22312;DAO&#23454;&#29616;&#20869;&#21019;&#24314;&#35760;&#24405;&#23454;&#20363;&#24182;&#20256;&#20837;&#21040;&#30456;&#24212;&#30340; <tt class="literal">CciTemplate.execute(..)</tt> &#26041;&#27861;&#12290;</p><pre class="programlisting">public class CciTemplate implements CciOperations {

 public IndexedRecord createIndexedRecord(String name) throws DataAccessException { ... }

 public MappedRecord createMappedRecord(String name) throws DataAccessException { ... }

}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cci-using-dao"></a>21.3.3.&nbsp;DAO&#25903;&#25345;</h3></div></div><div></div></div><p>
   Spring&#30340; CCI &#25903;&#25345;&#20026; DAO &#25552;&#20379;&#20102;&#19968;&#20010;&#25277;&#35937;&#31867;&#65292;&#25903;&#25345; <tt class="interfacename">ConnectionFactory</tt>
   &#25110; <tt class="classname">CciTemplate</tt> &#23454;&#20363;&#30340;&#27880;&#20837;&#12290;&#36825;&#20010;&#31867;&#30340;&#21517;&#23383;&#26159; <tt class="classname">CciDaoSupport</tt>&#65306;
   &#23427;&#25552;&#20379;&#20102;&#31616;&#21333;&#30340; <tt class="literal">setConnectionFactory</tt> &#21644; <tt class="literal">setCciTemplate</tt> &#26041;&#27861;&#12290;
   &#22312;&#20869;&#37096;&#65292;&#35813;&#31867;&#23558;&#20026;&#20256;&#20837;&#30340; <tt class="interfacename">ConnectionFactory</tt> &#21019;&#24314;&#19968;&#20010; <tt class="classname">CciTemplate</tt> &#23454;&#20363;&#65292;
   &#24182;&#25226;&#23427;&#26292;&#38706;&#32473;&#23376;&#31867;&#20013;&#20855;&#20307;&#30340;&#25968;&#25454;&#35775;&#38382;&#23454;&#29616;&#20351;&#29992;&#12290;</p><pre class="programlisting">public abstract class CciDaoSupport {

 public void setConnectionFactory(ConnectionFactory connectionFactory) { ... }
 public ConnectionFactory getConnectionFactory() { ... }

 public void setCciTemplate(CciTemplate cciTemplate) { ... }
 public CciTemplate getCciTemplate() { ... }

}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="automatic-output-generation"></a>21.3.4.&nbsp;&#33258;&#21160;&#36755;&#20986;&#35760;&#24405;&#29983;&#25104;</h3></div></div><div></div></div><p>
   &#22914;&#26524;&#25152;&#29992;&#30340;&#36830;&#25509;&#22120;&#21482;&#25903;&#25345;&#20197;&#36755;&#20837;&#36755;&#20986;&#35760;&#24405;&#20316;&#20026;&#21442;&#25968;&#30340; <tt class="literal">Interaction.execute(..)</tt> &#26041;&#27861;
   &#65288;&#23601;&#26159;&#35828;&#65292;&#23427;&#35201;&#27714;&#20256;&#20837;&#26399;&#26395;&#30340;&#36755;&#20986;&#35760;&#24405;&#32780;&#19981;&#26159;&#36820;&#22238;&#36866;&#24403;&#30340;&#36755;&#20986;&#35760;&#24405;&#65289;&#65292;
   &#20320;&#21487;&#20197;&#35774;&#23450; <tt class="classname">CciTemplate</tt> &#31867;&#30340; <tt class="literal">outputRecordCreator</tt> &#23646;&#24615;&#26469;&#33258;&#21160;&#29983;&#25104;&#19968;&#20010;&#36755;&#20986;&#35760;&#24405;&#65292;
   &#24403;&#25509;&#25910;&#21040;&#21709;&#24212;&#26102;JCA&#36830;&#25509;&#22120;&#65288;JCA connector&#65289;&#23558;&#22635;&#20805;&#35813;&#35760;&#24405;&#24182;&#36820;&#22238;&#32473;&#27169;&#26495;&#30340;&#35843;&#29992;&#32773;&#12290;
   </p><p>
   &#22240;&#20026;&#36825;&#20010;&#30446;&#30340;&#65292;&#36825;&#20010;&#23646;&#24615;&#21482;&#25345;&#26377; <tt class="interfacename">RecordCreator</tt> &#25509;&#21475;&#30340;&#19968;&#20010;&#23454;&#29616;&#12290;
   <tt class="interfacename">RecordCreator</tt> &#25509;&#21475;&#24050;&#32463;&#22312; <a href="#cci-record-creator" title="21.3.1.&nbsp;&#35760;&#24405;&#36716;&#25442;">Section&nbsp;21.3.1, &#8220;&#35760;&#24405;&#36716;&#25442;&#8221;</a> &#36827;&#34892;&#20102;&#35752;&#35770;&#12290;
	<tt class="literal">outputRecordCreator</tt> &#23646;&#24615;&#24517;&#39035;&#30452;&#25509;&#22312; <tt class="classname">CciTemplate</tt> &#20013;&#25351;&#23450;&#65292;&#21487;&#20197;&#22312;&#24212;&#29992;&#20195;&#30721;&#20013;&#20570;&#21040;&#36825;&#19968;&#28857;&#12290;</p><pre class="programlisting">cciTemplate.setOutputRecordCreator(new EciOutputRecordCreator());</pre><p>&#25110;&#32773;&#22914;&#26524; <tt class="classname">CciTemplate</tt> &#34987;&#37197;&#32622;&#20026;&#19968;&#20010;&#19987;&#38376;&#30340;bean&#23454;&#20363;&#65292;&#37027;&#20040;outputRecordCreator&#36824;&#21487;&#20197;&#22312;Spring&#25991;&#20214;&#20013;&#37197;&#32622;&#65288;&#25512;&#33616;&#30340;&#20570;&#27861;&#65289;&#65306;</p><pre class="programlisting">&lt;bean id="eciOutputRecordCreator" class="eci.EciOutputRecordCreator"/&gt;

&lt;bean id="cciTemplate" class="org.springframework.jca.cci.core.CciTemplate"&gt;
 &lt;property name="connectionFactory" ref="eciConnectionFactory"/&gt;
 &lt;property name="outputRecordCreator" ref="eciOutputRecordCreator"/&gt;
&lt;/bean&gt;</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#22240;&#20026; <tt class="classname">CciTemplate</tt> &#31867;&#26159;&#32447;&#31243;&#23433;&#20840;&#30340;&#65292;&#25152;&#20197;&#23427;&#36890;&#24120;&#34987;&#37197;&#32622;&#20026;&#19968;&#20010;&#20849;&#20139;&#23454;&#20363;&#12290;</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="template-summary"></a>21.3.5.&nbsp;&#24635;&#32467;</h3></div></div><div></div></div><p>&#19979;&#34920;&#24635;&#32467;&#20102; <tt class="classname">CciTemplate</tt> &#31867;&#21644;&#22312; CCI <tt class="interfacename">Interaction</tt>
   &#25509;&#21475;&#19978;&#35843;&#29992;&#30456;&#24212;&#26041;&#27861;&#30340;&#26426;&#21046;&#65306; </p><div class="table"><a name="cci-interaction-execute-methods"></a><p class="title"><b>Table&nbsp;21.1.&nbsp;Usage of <tt class="interfacename">Interaction</tt> execute methods</b></p><table summary="Usage of Interaction execute methods" border="1"><colgroup><col><col><col></colgroup><thead><tr><th align="center">CciTemplate method signature</th><th align="center">CciTemplate outputRecordCreator
        property</th><th align="center">execute method called on the CCI
        Interaction</th></tr></thead><tbody><tr><td align="center">Record execute(InteractionSpec,
        Record)</td><td align="center">not set</td><td align="center">Record execute(InteractionSpec,
        Record)</td></tr><tr><td align="center">Record execute(InteractionSpec,
        Record)</td><td align="center">set</td><td align="center">boolean execute(InteractionSpec, Record,
        Record)</td></tr><tr><td align="center">void execute(InteractionSpec, Record,
        Record)</td><td align="center">not set</td><td align="center">void execute(InteractionSpec, Record,
        Record)</td></tr><tr><td align="center">void execute(InteractionSpec, Record,
        Record)</td><td align="center">set</td><td align="center">void execute(InteractionSpec, Record,
        Record)</td></tr><tr><td align="center">Record execute(InteractionSpec,
        RecordCreator)</td><td align="center">not set</td><td align="center">Record execute(InteractionSpec,
        Record)</td></tr><tr><td align="center">Record execute(InteractionSpec,
        RecordCreator)</td><td align="center">set</td><td align="center">void execute(InteractionSpec, Record,
        Record)</td></tr><tr><td align="center">Record execute(InteractionSpec, Record,
        RecordExtractor)</td><td align="center">not set</td><td align="center">Record execute(InteractionSpec,
        Record)</td></tr><tr><td align="center">Record execute(InteractionSpec, Record,
        RecordExtractor)</td><td align="center">set</td><td align="center">void execute(InteractionSpec, Record,
        Record)</td></tr><tr><td align="center">Record execute(InteractionSpec,
        RecordCreator, RecordExtractor)</td><td align="center">not set</td><td align="center">Record execute(InteractionSpec,
        Record)</td></tr><tr><td align="center">Record execute(InteractionSpec,
        RecordCreator, RecordExtractor)</td><td align="center">set</td><td align="center">void execute(InteractionSpec, Record,
        Record)</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cci-straight"></a>21.3.6.&nbsp;&#30452;&#25509;&#20351;&#29992;&#19968;&#20010;CCI <tt class="interfacename">Connection</tt>&#25509;&#21475;&#21644;<tt class="interfacename">Interaction</tt>&#25509;&#21475;</h3></div></div><div></div></div><p>
	   &#31867;&#20284;&#20110; <tt class="classname">JdbcTemplate</tt> &#31867;&#21644; <tt class="classname">JmsTemplate</tt> &#31867;&#30340;&#25805;&#20316;&#26041;&#24335;&#65292;
	   <tt class="classname">CciTemplate</tt> &#31867;&#21516;&#26679;&#25552;&#20379;&#30452;&#25509;&#25805;&#20316;CCI &#36830;&#25509;&#21644;&#20132;&#20114;&#30340;&#21487;&#33021;&#24615;&#12290;
	   &#27604;&#22914;&#35828;&#22914;&#26524;&#20320;&#24819;&#23545;&#19968;&#20010;CCI&#36830;&#25509;&#25191;&#34892;&#22810;&#31181;&#25805;&#20316;&#65292;&#36825;&#23601;&#20250;&#24456;&#26377;&#29992;&#12290;
	</p><p>
 <tt class="interfacename">ConnectionCallback</tt> &#25509;&#21475;&#25552;&#20379;&#20197;CCI <tt class="interfacename">Connection</tt> &#20316;&#20026;&#21442;&#25968;&#65292;
 &#20026;&#20102;&#22312;&#23427;&#19978;&#38754;&#25191;&#34892;&#33258;&#23450;&#20041;&#21160;&#20316;&#65292;&#28155;&#21152;&#20102;&#21019;&#24314; <tt class="interfacename">Connection</tt> &#30340;CCI <tt class="interfacename">ConnectionFactory</tt>&#12290;
	&#21518;&#32773;&#22312;&#33719;&#21462;&#30456;&#20851; <tt class="interfacename">RecordFactory</tt> &#23454;&#20363;&#21644;&#21019;&#24314;indexed/mapped records&#26102;&#24456;&#26377;&#29992;&#12290;&#20363;&#22914;&#65306;</p><pre class="programlisting">public interface ConnectionCallback {

 Object doInConnection(Connection connection, ConnectionFactory connectionFactory)
   throws ResourceException, SQLException, DataAccessException;
}</pre><p>
	<tt class="interfacename">InteractionCallback</tt> &#25509;&#21475;&#25552;&#20379; CCI <tt class="interfacename">Interaction</tt> &#25509;&#21475;&#65292;
	&#20026;&#20102;&#22312;&#23427;&#19978;&#38754;&#25191;&#34892;&#33258;&#23450;&#20041;&#21160;&#20316;&#65292;&#35831;&#28155;&#21152;&#30456;&#24212;&#30340;CCI <tt class="interfacename">ConnectionFactory</tt>&#12290;</p><pre class="programlisting">public interface InteractionCallback {

 Object doInInteraction(Interaction interaction, ConnectionFactory connectionFactory)
   throws ResourceException, SQLException, DataAccessException;
}</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p><tt class="interfacename">InteractionSpec</tt> &#23545;&#35937;&#36824;&#21487;&#20197;&#22312;&#22810;&#20010;template&#35843;&#29992;&#20043;&#38388;&#34987;&#20849;&#20139;&#25110;&#32773;&#22312;&#27599;&#20010;&#22238;&#35843;&#26041;&#27861;&#20869;&#37325;&#26032;&#21019;&#24314;&#65292;
    &#36825;&#23436;&#20840;&#21462;&#20915;&#20110; DAO &#30340;&#23454;&#29616;&#12290;</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cci-template-example"></a>21.3.7.&nbsp;<tt class="classname">CciTemplate</tt> &#20351;&#29992;&#31034;&#20363;</h3></div></div><div></div></div><p>&#22312;&#26412;&#31456;&#33410;&#20013;&#65292;&#25105;&#20204;&#23558;&#23637;&#31034;&#22914;&#20309;&#20351;&#29992; <tt class="classname">CciTemplate</tt> &#21644;IBM CICS ECI&#36830;&#25509;&#22120;&#22312;ECI&#27169;&#24335;&#19979;&#35775;&#38382;&#19968;&#20010;CICS.</p><p>&#39318;&#20808;&#65292;&#24517;&#39035;&#22312;CCI <tt class="interfacename">InteractionSpec</tt> &#36827;&#34892;&#19968;&#20123;&#21021;&#22987;&#21270;&#20197;&#25351;&#23450;&#35775;&#38382;&#21738;&#20010;CICS&#31243;&#24207;&#20197;&#21450;&#22914;&#20309;&#36827;&#34892;&#20132;&#20114;&#12290;</p><pre class="programlisting">ECIInteractionSpec interactionSpec = new ECIInteractionSpec();
interactionSpec.setFunctionName("MYPROG");
interactionSpec.setInteractionVerb(ECIInteractionSpec.SYNC_SEND_RECEIVE);</pre><p>&#28982;&#21518;&#65292;&#31243;&#24207;&#36890;&#36807;Spring&#30340;&#27169;&#26495;&#20351;&#29992; CCI &#24182;&#22312;&#33258;&#23450;&#20041;&#23545;&#35937;&#21644; CCI  <tt class="literal">Records</tt> &#20043;&#38388;&#25351;&#23450;&#26144;&#23556;&#12290;</p><pre class="programlisting">public class MyDaoImpl extends CciDaoSupport implements MyDao {

 public OutputObject getData(InputObject input) {
  ECIInteractionSpec interactionSpec = ...;

  OutputObject output = (ObjectOutput) getCciTemplate().execute(interactionSpec,
    new RecordCreator() {
     public Record createRecord(RecordFactory recordFactory) throws ResourceException {
      return new CommAreaRecord(input.toString().getBytes());
     }
    },
    new RecordExtractor() {
     public Object extractData(Record record) throws ResourceException {
      CommAreaRecord commAreaRecord = (CommAreaRecord)record;
      String str = new String(commAreaRecord.toByteArray());
      String field1 = string.substring(0,6);
      String field2 = string.substring(6,1);
      return new OutputObject(Long.parseLong(field1), field2);
     }
    });

  return output;
 }
}</pre><p>&#27491;&#22914;&#20043;&#21069;&#35752;&#35770;&#30340;&#37027;&#26679;&#65292;callbacks &#21487;&#20197;&#34987;&#29992;&#26469;&#30452;&#25509;&#22312; CCI &#36830;&#25509;&#25110;&#20132;&#20114;&#19978;&#25805;&#20316;&#12290;</p><pre class="programlisting">public class MyDaoImpl extends CciDaoSupport implements MyDao {

 public OutputObject getData(InputObject input) {
  ObjectOutput output = (ObjectOutput) getCciTemplate().execute(
    new ConnectionCallback() {
     public Object doInConnection(Connection connection, ConnectionFactory factory)
       throws ResourceException {

      <i class="lineannotation"><span class="lineannotation">// do something...</span></i>
     }
    });
  }
  return output;
 }
}</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#24403;getCciTemplate().execute&#21442;&#25968;&#26159; <tt class="interfacename">ConnectionCallback</tt> &#26102;&#65292;
   &#25152;&#29992;&#30340; <tt class="interfacename">Connection</tt> &#23558;&#34987; <tt class="classname">CciTemplate</tt> &#31649;&#29702;&#21644;&#20851;&#38381;&#65292;
   &#20294;&#26159;&#20219;&#20309;&#22312;&#36830;&#25509;&#19978;&#24314;&#31435;&#30340;&#20132;&#20114;&#37117;&#24517;&#39035;&#34987;callback&#23454;&#29616;&#31867;&#25152;&#31649;&#29702;&#12290;</p></td></tr></tbody></table></div><p>
			&#23545;&#20110;&#19968;&#20010;&#26356;&#29305;&#27530;&#30340;callback&#65292;&#20320;&#21487;&#20197;&#23454;&#29616;&#19968;&#20010; <tt class="interfacename">InteractionCallback</tt> &#12290;
			&#36825;&#26679;&#20256;&#20837;&#30340; <tt class="interfacename">Interaction</tt> &#23558;&#20250;&#34987; <tt class="classname">CciTemplate</tt> &#31649;&#29702;&#21644;&#20851;&#38381;&#12290;
			</p><pre class="programlisting">public class MyDaoImpl extends CciDaoSupport implements MyDao {

 public String getData(String input) {
  ECIInteractionSpec interactionSpec = ...;

  String output = (String) getCciTemplate().execute(interactionSpec,
    new InteractionCallback() {
     public Object doInInteraction(Interaction interaction, ConnectionFactory factory)
       throws ResourceException {
      Record input = new CommAreaRecord(inputString.getBytes());
      Record output = new CommAreaRecord();
      interaction.execute(holder.getInteractionSpec(), input, output);
      return new String(output.toByteArray());
     }
    });

  return output;
 }
}</pre><p>&#22312;&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#38750;&#25176;&#31649;&#27169;&#24335;&#65288;non-managed&#65289;&#19979;&#23545;&#24212;&#30340;spring beans&#30340;&#37197;&#32622;&#20250;&#20687;&#19979;&#38754;&#36825;&#26679;&#65306;</p><pre class="programlisting">&lt;bean id="managedConnectionFactory" class="com.ibm.connector2.cics.ECIManagedConnectionFactory"&gt;
 &lt;property name="serverName" value="TXSERIES"/&gt;
 &lt;property name="connectionURL" value="local:"/&gt;
 &lt;property name="userName" value="CICSUSER"/&gt;
 &lt;property name="password" value="CICS"/&gt;
&lt;/bean&gt;

&lt;bean id="connectionFactory" class="org.springframework.jca.support.LocalConnectionFactoryBean"&gt;
 &lt;property name="managedConnectionFactory" ref="managedConnectionFactory"/&gt;
&lt;/bean&gt;

&lt;bean id="component" class="mypackage.MyDaoImpl"&gt;
 &lt;property name="connectionFactory" ref="connectionFactory"/&gt;
&lt;/bean&gt;</pre><p>&#22312;&#25176;&#31649;&#27169;&#24335;&#65288;managed mode&#65289;&#65288;&#20063;&#23601;&#26159;&#35828;&#65292;&#22312;&#19968;&#20010;J2EE&#29615;&#22659;&#65289;&#19979;&#65292;&#37197;&#32622;&#21487;&#33021;&#22914;&#19979;&#25152;&#31034;&#65306;</p><pre class="programlisting">&lt;bean id="connectionFactory" class="org.springframework.jndi.JndiObjectFactoryBean"&gt;
 &lt;property name="jndiName" value="eis/cicseci"/&gt;
&lt;/bean&gt;

&lt;bean id="component" class="MyDaoImpl"&gt;
 &lt;property name="connectionFactory" ref="connectionFactory"/&gt;
&lt;/bean&gt;</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="cci-object"></a>21.4.&nbsp;&#24314;&#27169;CCI&#35775;&#38382;&#20026;&#25805;&#20316;&#23545;&#35937;</h2></div></div><div></div></div><p>
  <tt class="literal">org.springframework.jca.cci.object</tt> &#21253;&#20013;&#21253;&#21547;&#30340;&#25903;&#25345;&#31867;&#20801;&#35768;&#20320;&#20197;&#21478;&#19968;&#31181;&#39118;&#26684;&#35775;&#38382;EIS&#65306;
  &#36890;&#36807;&#21487;&#37325;&#29992;&#30340;&#25805;&#20316;&#23545;&#35937;&#65292;&#31867;&#20284;&#20110;Spring&#30340;JDBC&#25805;&#20316;&#23545;&#35937;&#65288;&#21442;&#35265;JDBC&#19968;&#31456;&#65289;&#12290;
  &#23427;&#36890;&#24120;&#37117;&#23553;&#35013;&#20102; CCI &#30340;API&#65306;&#23558;&#24212;&#29992;&#32423;&#30340;&#36755;&#20837;&#23545;&#35937;&#20256;&#20837;&#21040;&#25805;&#20316;&#23545;&#35937;&#65292;
  &#20174;&#32780;&#23427;&#33021;&#21019;&#24314;&#36755;&#20837;record&#28982;&#21518;&#36716;&#25442;&#25509;&#25910;&#21040;&#30340;record&#25968;&#25454;&#21040;&#19968;&#20010;&#24212;&#29992;&#32423;&#36755;&#20986;&#23545;&#35937;&#24182;&#36820;&#22238;&#23427;&#12290;
  </p><p><span class="emphasis"><em>&#27880;&#24847;</em></span>: &#36825;&#31181;&#26041;&#27861;&#20869;&#22312;&#22320;&#22522;&#20110; <tt class="classname">CciTemplate</tt> &#31867;&#21644;
  <tt class="interfacename">RecordCreator</tt> / <tt class="interfacename">RecordExtractor</tt> &#25509;&#21475;&#65292;&#37325;&#29992;&#20102;Spring&#26680;&#24515;CCI&#25903;&#25345;&#30340;&#26426;&#21046;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cci-object-mapping-record"></a>21.4.1.&nbsp;<tt class="classname">MappingRecordOperation</tt></h3></div></div><div></div></div><p> <tt class="classname">MappingRecordOperation</tt> &#26412;&#36136;&#19978;&#19982; <tt class="classname">CciTemplate</tt> &#20570;&#30340;&#20107;&#24773;&#26159;&#19968;&#26679;&#30340;&#65292;
   &#20294;&#26159;&#23427;&#34920;&#36798;&#20102;&#19968;&#20010;&#26126;&#30830;&#30340;&#12289;&#39044;&#37197;&#32622;&#65288;pre-configured&#65289;&#30340;&#25805;&#20316;&#20316;&#20026;&#23545;&#35937;&#12290;&#23427;&#25552;&#20379;&#20102;&#20004;&#20010;&#27169;&#26495;&#26041;&#27861;&#26469;&#25351;&#26126;&#22914;&#20309;&#23558;&#19968;&#20010;&#36755;&#20837;&#23545;&#35937;&#36716;&#25442;&#20026;&#36755;&#20837;&#35760;&#24405;&#65292;
   &#20197;&#21450;&#22914;&#20309;&#23558;&#19968;&#20010;&#36755;&#20986;&#35760;&#24405;&#36716;&#25442;&#20026;&#36755;&#20986;&#23545;&#35937;&#65288;&#35760;&#24405;&#26144;&#23556;&#65289;&#65306;
		</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">createInputRecord(..)</tt> &#25351;&#23450;&#20102;&#22914;&#20309;&#23558;&#19968;&#20010;&#36755;&#20837;&#23545;&#35937;&#36716;&#25442;&#20026;&#36755;&#20837;<tt class="interfacename">Record</tt></p></li><li><p><tt class="literal">extractOutputData(..)</tt> &#25351;&#23450;&#20102;&#22914;&#20309;&#20174;&#36755;&#20986; <tt class="interfacename">Record</tt> &#20013;&#25552;&#21462;&#36755;&#20986;&#23545;&#35937;</p></li></ul></div><p>&#19979;&#38754;&#26159;&#36825;&#20123;&#26041;&#27861;&#30340;&#31614;&#21517;&#65306;</p><pre class="programlisting">public abstract class MappingRecordOperation extends EisOperation {
 ...
 protected abstract Record createInputRecord(RecordFactory recordFactory, Object inputObject)
   throws ResourceException, DataAccessException { ... }

 protected abstract Object extractOutputData(Record outputRecord)
   throws ResourceException, SQLException, DataAccessException { ... }
 ...
}</pre><p> &#27492;&#21518;&#65292;&#20026;&#20102;&#25191;&#34892;&#19968;&#20010; EIS &#25805;&#20316;&#65292;&#20320;&#38656;&#35201;&#20351;&#29992;&#19968;&#20010;&#21333;&#29420;&#30340;execute&#26041;&#27861;&#65292;&#20256;&#36882;&#19968;&#20010;&#24212;&#29992;&#32423;&#65288;application-level&#65289;
   &#36755;&#20837;&#23545;&#35937;&#65292;&#24182;&#25509;&#25910;&#19968;&#20010;&#24212;&#29992;&#32423;&#36755;&#20986;&#23545;&#35937;&#20316;&#20026;&#32467;&#26524;&#65306;
			</p><pre class="programlisting">public abstract class MappingRecordOperation extends EisOperation {
 ...
 public Object execute(Object inputObject) throws DataAccessException {
 ...
}</pre><p>
   &#27491;&#22914;&#20320;&#25152;&#30475;&#21040;&#30340;&#65292;&#19982; <tt class="classname">CciTemplate</tt> &#31867;&#30456;&#21453;&#65292;
   &#36825;&#20010;<tt class="literal">execute</tt>&#26041;&#27861;&#24182;&#27809;&#26377; <tt class="interfacename">InteractionSpec</tt> &#21442;&#25968;&#65292;
   &#28982;&#32780;&#65292;<tt class="interfacename">InteractionSpec</tt> &#23545;&#25805;&#20316;&#26159;&#20840;&#23616;&#30340;&#12290;
   &#19979;&#38754;&#30340;&#26500;&#36896;&#26041;&#27861;&#24517;&#39035;&#20351;&#29992;&#25351;&#23450;&#30340; <tt class="interfacename">InteractionSpec</tt> &#26469;&#21021;&#22987;&#21270;&#19968;&#20010;&#25805;&#20316;&#23545;&#35937;&#65306;
   </p><pre class="programlisting">InteractionSpec spec = ...;
MyMappingRecordOperation eisOperation = new MyMappingRecordOperation(getConnectionFactory(), spec);
...</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cci-object-mapping-comm-area"></a>21.4.2.&nbsp;<tt class="classname">MappingCommAreaOperation</tt></h3></div></div><div></div></div><p>
   &#19968;&#20123;&#36830;&#25509;&#22120;&#20351;&#29992;&#20102;&#22522;&#20110;COMMAREA&#30340;&#35760;&#24405;&#65292;&#35813;&#35760;&#24405;&#21253;&#21547;&#20102;&#21457;&#36865;&#32473;EIS&#30340;&#21442;&#25968;&#21644;&#36820;&#22238;&#25968;&#25454;&#30340;&#23383;&#33410;&#25968;&#32452;&#12290;
   Spring&#25552;&#20379;&#20102;&#19968;&#20010;&#19987;&#38376;&#30340;&#25805;&#20316;&#31867;&#29992;&#20110;&#30452;&#25509;&#25805;&#20316;COMMAREA&#32780;&#19981;&#26159;&#25805;&#20316;&#35760;&#24405;&#12290;
   <tt class="classname">MappingCommAreaOperation</tt> &#31867;&#25193;&#23637;&#20102; <tt class="classname">MappingRecordOperation</tt> &#31867;&#20197;&#25552;&#20379;&#36825;&#31181;&#19987;&#38376;&#30340;COMMAREA&#25903;&#25345;&#12290;
   &#23427;&#38544;&#21547;&#22320;&#20351;&#29992;&#20102; <tt class="classname">CommAreaRecord</tt>&#31867;&#20316;&#20026;&#36755;&#20837;&#21644;&#36755;&#20986;record&#31867;&#22411;&#65292;
   &#24182;&#25552;&#20379;&#20102;&#20004;&#20010;&#26032;&#30340;&#26041;&#27861;&#26469;&#36716;&#25442;&#36755;&#20837;&#23545;&#35937;&#21040;&#36755;&#20837;COMMAREA&#65292;&#20197;&#21450;&#36716;&#25442;&#36755;&#20986;COMMAREA&#21040;&#36755;&#20986;&#23545;&#35937;&#12290;
   </p><pre class="programlisting">public abstract class MappingCommAreaOperation extends MappingRecordOperation {
 ...
 protected abstract byte[] objectToBytes(Object inObject)
   throws IOException, DataAccessException;

 protected abstract Object bytesToObject(byte[] bytes)
   throws IOException, DataAccessException;
 ...
}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cci-automatic-record-gen"></a>21.4.3.&nbsp;&#33258;&#21160;&#29983;&#25104;&#36755;&#20986;&#35760;&#24405;</h3></div></div><div></div></div><p>
	&#30001;&#20110;&#27599;&#20010; <tt class="classname">MappingRecordOperation</tt> &#23376;&#31867;&#30340;&#20869;&#37096;&#37117;&#26159;&#22522;&#20110; <tt class="classname">CciTemplate</tt> &#30340;&#65292;&#25152;&#20197;
	&#29992; <tt class="classname">CciTemplate</tt> &#20197;&#30456;&#21516;&#30340;&#26041;&#24335;&#33258;&#21160;&#29983;&#25104;&#36755;&#20986;record&#37117;&#26159;&#26377;&#25928;&#30340;&#12290;
	&#27599;&#20010;&#25805;&#20316;&#23545;&#35937;&#25552;&#20379;&#19968;&#20010;&#30456;&#24212;&#30340; <tt class="literal">setOutputRecordCreator(..)</tt> &#26041;&#27861;&#12290;
	&#26356;&#22810;&#30340;&#20449;&#24687;&#65292;&#35831;&#21442;&#35265;&#21069;&#38754;&#30340;<a href="#automatic-output-generation" title="21.3.4.&nbsp;&#33258;&#21160;&#36755;&#20986;&#35760;&#24405;&#29983;&#25104;">Section&nbsp;21.3.4, &#8220;&#33258;&#21160;&#36755;&#20986;&#35760;&#24405;&#29983;&#25104;&#8221;</a>&#19968;&#33410;&#12290;
			</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cci-object-summary"></a>21.4.4.&nbsp;&#24635;&#32467;</h3></div></div><div></div></div><p>&#25805;&#20316;&#23545;&#35937;&#26041;&#27861;&#20351;&#29992;&#20102;&#36319; <tt class="classname">CciTemplate</tt> &#30456;&#21516;&#30340;&#26041;&#24335;&#26469;&#20351;&#29992;&#35760;&#24405;&#12290;</p><div class="table"><a name="cci-interaction-methods"></a><p class="title"><b>Table&nbsp;21.2.&nbsp;Usage of Interaction execute methods</b></p><table summary="Usage of Interaction execute methods" border="1"><colgroup><col><col><col></colgroup><thead><tr><th align="center"><tt class="classname">MappingRecordOperation</tt> method
        signature</th><th align="center"><tt class="classname">MappingRecordOperation</tt><tt class="literal">outputRecordCreator</tt> property</th><th align="center">execute method called on the CCI
        <tt class="interfacename">Interaction</tt></th></tr></thead><tbody><tr><td align="center">Object execute(Object)</td><td align="center">not set</td><td align="center">Record execute(InteractionSpec,
        Record)</td></tr><tr><td align="center">Object execute(Object)</td><td align="center">set</td><td align="center">boolean execute(InteractionSpec, Record,
        Record)</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cci-objects-mappring-record-example"></a>21.4.5.&nbsp;<tt class="classname">MappingRecordOperation</tt> &#20351;&#29992;&#31034;&#20363;</h3></div></div><div></div></div><p>
	   &#22312;&#26412;&#33410;&#20013;&#65292;&#23558;&#36890;&#36807;&#23637;&#31034;&#20351;&#29992; Blackbox CCI &#36830;&#25509;&#22120;&#35775;&#38382;&#19968;&#20010;&#25968;&#25454;&#24211;&#26469;&#35828;&#26126; <tt class="classname">MappingRecordOperation</tt> &#30340;&#29992;&#27861;&#12290;
   </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#35813;&#36830;&#25509;&#22120;&#30340;&#26368;&#21021;&#29256;&#26412;&#26159;&#30001;SUN&#25552;&#20379;&#30340;J2EE SDK&#65288;1.3&#29256;&#26412;&#65289;&#12290;</p></td></tr></tbody></table></div><p>
   &#39318;&#20808;&#65292;&#24517;&#39035;&#22312; CCI <tt class="interfacename">InteractionSpec</tt> &#20013;&#36827;&#34892;&#19968;&#20123;&#21021;&#22987;&#21270;&#21160;&#20316;&#26469;&#25351;&#23450;&#25191;&#34892;&#21738;&#20123;SQL&#35831;&#27714;&#12290;
	&#22312;&#36825;&#20010;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#30452;&#25509;&#23450;&#20041;&#20102;&#23558;&#35831;&#27714;&#21442;&#25968;&#36716;&#25442;&#20026;CCI record&#20197;&#21450;&#23558;CCI&#32467;&#26524;&#35760;&#24405;&#36716;&#25442;&#20026;&#19968;&#20010; <tt class="classname">Person</tt> &#31867;&#30340;&#23454;&#20363;&#30340;&#26041;&#27861;&#12290;
   </p><pre class="programlisting">public class PersonMappingOperation extends MappingRecordOperation {

 public PersonMappingOperation(ConnectionFactory connectionFactory) {
  setConnectionFactory(connectionFactory);
  CciInteractionSpec interactionSpec = new CciConnectionSpec();
  interactionSpec.setSql("select * from person where person_id=?");
  setInteractionSpec(interactionSpec);
 }

 protected Record createInputRecord(RecordFactory recordFactory, Object inputObject)
   throws ResourceException {
  Integer id = (Integer) inputObject;
  IndexedRecord input = recordFactory.createIndexedRecord("input");
  input.add(new Integer(id));
  return input;
 }

 protected Object extractOutputData(Record outputRecord)
   throws ResourceException, SQLException {
  ResultSet rs = (ResultSet) outputRecord;
  Person person = null;
  if (rs.next()) {
   Person person = new Person();
   person.setId(rs.getInt("person_id"));
   person.setLastName(rs.getString("person_last_name"));
   person.setFirstName(rs.getString("person_first_name"));
  }
  return person;
 }
}</pre><p>&#28982;&#21518;&#24212;&#29992;&#31243;&#24207;&#20250;&#20197;person&#26631;&#35782;&#31526;&#20316;&#20026;&#21442;&#25968;&#26469;&#24471;&#21040;&#25805;&#20316;&#23545;&#35937;&#12290;&#27880;&#24847;&#65306;&#25805;&#20316;&#23545;&#35937;&#21487;&#20197;&#34987;&#35774;&#20026;&#20849;&#20139;&#23454;&#20363;&#65292;&#22240;&#20026;&#23427;&#26159;&#32447;&#31243;&#23433;&#20840;&#30340;&#12290;
</p><pre class="programlisting">public class MyDaoImpl extends CciDaoSupport implements MyDao {

 public Person getPerson(int id) {
  PersonMappingOperation query = new PersonMappingOperation(getConnectionFactory());
  Person person = (Person) query.execute(new Integer(id));
  return person;
 }
}</pre><p>&#23545;&#24212;&#30340;Spring beans&#30340;&#37197;&#32622;&#30475;&#36215;&#26469;&#31867;&#20284;&#20110;&#19979;&#38754;&#38750;&#25176;&#31649;&#27169;&#24335;&#65288;non-managed mode&#65289;&#30340;&#37197;&#32622;&#65306;</p><pre class="programlisting">&lt;bean id="managedConnectionFactory"
  class="com.sun.connector.cciblackbox.CciLocalTxManagedConnectionFactory"&gt;
 &lt;property name="connectionURL" value="jdbc:hsqldb:hsql://localhost:9001"/&gt;
 &lt;property name="driverName" value="org.hsqldb.jdbcDriver"/&gt;
&lt;/bean&gt;

&lt;bean id="targetConnectionFactory"
  class="org.springframework.jca.support.LocalConnectionFactoryBean"&gt;
 &lt;property name="managedConnectionFactory" ref="managedConnectionFactory"/&gt;
&lt;/bean&gt;

&lt;bean id="connectionFactory"
  class="org.springframework.jca.cci.connection.ConnectionSpecConnectionFactoryAdapter"&gt;
 &lt;property name="targetConnectionFactory" ref="targetConnectionFactory"/&gt;
 &lt;property name="connectionSpec"&gt;
  &lt;bean class="com.sun.connector.cciblackbox.CciConnectionSpec"&gt;
   &lt;property name="user" value="sa"/&gt;
   &lt;property name="password" value=""/&gt;
  &lt;/bean&gt;
 &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id="component" class="MyDaoImpl"&gt;
 &lt;property name="connectionFactory" ref="connectionFactory"/&gt;
&lt;/bean&gt;</pre><p>&#22312;&#25176;&#31649;&#27169;&#24335;&#65288;managed mode&#65289;&#65288;&#20063;&#23601;&#26159;&#35828;&#65292;&#22312;&#19968;&#20010;J2EE&#29615;&#22659;&#20013;)&#65289;&#65292;&#37197;&#32622;&#21487;&#33021;&#30475;&#36215;&#26469;&#20687;&#36825;&#26679;&#65306;</p><pre class="programlisting">&lt;bean id="targetConnectionFactory" class="org.springframework.jndi.JndiObjectFactoryBean"&gt;
 &lt;property name="jndiName" value="eis/blackbox"/&gt;
&lt;/bean&gt;

&lt;bean id="connectionFactory"
  class="org.springframework.jca.cci.connection.ConnectionSpecConnectionFactoryAdapter"&gt;
 &lt;property name="targetConnectionFactory" ref="targetConnectionFactory"/&gt;
 &lt;property name="connectionSpec"&gt;
  &lt;bean class="com.sun.connector.cciblackbox.CciConnectionSpec"&gt;
   &lt;property name="user" value="sa"/&gt;
   &lt;property name="password" value=""/&gt;
  &lt;/bean&gt;
 &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id="component" class="MyDaoImpl"&gt;
 &lt;property name="connectionFactory" ref="connectionFactory"/&gt;
&lt;/bean&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cci-objects-mapping-comm-area-example"></a>21.4.6.&nbsp;<tt class="classname">MappingCommAreaOperation</tt> &#20351;&#29992;&#31034;&#20363;</h3></div></div><div></div></div><p>
   &#22312;&#26412;&#33410;&#20013;&#65292;&#23558;&#23637;&#31034; <tt class="classname">MappingCommAreaOperation</tt>&#31867;&#30340;&#29992;&#27861;&#65306;&#36890;&#36807;IBM ECI&#36830;&#25509;&#22120;&#20197;ECI&#30340;&#27169;&#24335;&#35775;&#38382;&#19968;&#20010;CICS&#12290;
   </p><p>
   	&#39318;&#20808;&#65292;CCI <tt class="interfacename">InteractionSpec</tt> &#38656;&#35201;&#36827;&#34892;&#21021;&#22987;&#21270;&#20197;&#25351;&#23450;&#37027;&#20010;CICS&#31243;&#24207;&#21435;&#35775;&#38382;&#23427;&#20197;&#21450;&#22914;&#20309;&#19982;&#23427;&#20132;&#20114;&#12290;
   </p><pre class="programlisting">public abstract class EciMappingOperation extends MappingCommAreaOperation {

 public EciMappingOperation(ConnectionFactory connectionFactory, String programName) {
  setConnectionFactory(connectionFactory);
  ECIInteractionSpec interactionSpec = new ECIInteractionSpec(),
  interactionSpec.setFunctionName(programName);
  interactionSpec.setInteractionVerb(ECIInteractionSpec.SYNC_SEND_RECEIVE);
  interactionSpec.setCommareaLength(30);
  setInteractionSpec(interactionSpec);
  setOutputRecordCreator(new EciOutputRecordCreator());
 }

 private static class EciOutputRecordCreator implements RecordCreator {
  public Record createRecord(RecordFactory recordFactory) throws ResourceException {
   return new CommAreaRecord();
  }
 }
}</pre><p>The abstract <tt class="classname">EciMappingOperation</tt> class can
   then be subclassed to specify mappings between custom objects and
			<tt class="literal">Records</tt>.</p><p> <tt class="classname">EciMappingOperation</tt> &#25277;&#35937;&#31867;&#21487;&#20197;&#34987;&#23376;&#31867;&#21270;&#20197;&#25351;&#23450;&#33258;&#23450;&#20041;&#23545;&#35937;&#21644; <tt class="literal">Records</tt> &#20043;&#38388;&#30340;&#26144;&#23556;&#12290;
</p><pre class="programlisting">public class MyDaoImpl extends CciDaoSupport implements MyDao {

 public OutputObject getData(Integer id) {
  EciMappingOperation query = new EciMappingOperation(getConnectionFactory(), "MYPROG") {
   protected abstract byte[] objectToBytes(Object inObject) throws IOException {
    Integer id = (Integer) inObject;
    return String.valueOf(id);
   }
   protected abstract Object bytesToObject(byte[] bytes) throws IOException;
    String str = new String(bytes);
    String field1 = str.substring(0,6);
    String field2 = str.substring(6,1);
    String field3 = str.substring(7,1);
    return new OutputObject(field1, field2, field3);
   }
  });

  return (OutputObject) query.execute(new Integer(id));
 }
}</pre><p>&#23545;&#24212;&#30340;Spring beans&#30340;&#37197;&#32622;&#30475;&#36215;&#26469;&#31867;&#20284;&#20110;&#19979;&#38754;&#38750;&#25176;&#31649;&#27169;&#24335;&#65288;non-managed mode&#65289;&#30340;&#37197;&#32622;&#65306;</p><pre class="programlisting">&lt;bean id="managedConnectionFactory" class="com.ibm.connector2.cics.ECIManagedConnectionFactory"&gt;
 &lt;property name="serverName" value="TXSERIES"/&gt;
 &lt;property name="connectionURL" value="local:"/&gt;
 &lt;property name="userName" value="CICSUSER"/&gt;
 &lt;property name="password" value="CICS"/&gt;
&lt;/bean&gt;

&lt;bean id="connectionFactory" class="org.springframework.jca.support.LocalConnectionFactoryBean"&gt;
 &lt;property name="managedConnectionFactory" ref="managedConnectionFactory"/&gt;
&lt;/bean&gt;

&lt;bean id="component" class="MyDaoImpl"&gt;
 &lt;property name="connectionFactory" ref="connectionFactory"/&gt;
&lt;/bean&gt;</pre><p>&#22312;&#25176;&#31649;&#27169;&#24335;&#65288;managed mode&#65289;&#65288;&#20063;&#23601;&#26159;&#35828;&#65292;&#22312;&#19968;&#20010;J2EE&#29615;&#22659;&#20013;&#65289;&#65292;&#37197;&#32622;&#21487;&#33021;&#30475;&#36215;&#26469;&#20687;&#36825;&#26679;&#65306;</p><pre class="programlisting">&lt;bean id="connectionFactory" class="org.springframework.jndi.JndiObjectFactoryBean"&gt;
 &lt;property name="jndiName" value="eis/cicseci"/&gt;
&lt;/bean&gt;

&lt;bean id="component" class="MyDaoImpl"&gt;
 &lt;property name="connectionFactory" ref="connectionFactory"/&gt;
&lt;/bean&gt;</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="cci-tx"></a>21.5.&nbsp;&#20107;&#21153;</h2></div></div><div></div></div><p>
  JCA&#20026;&#36164;&#28304;&#36866;&#37197;&#22120;&#65288;resource adapters&#65289;&#25351;&#23450;&#20102;&#20960;&#20010;&#32423;&#21035;&#30340;&#20107;&#21153;&#25903;&#25345;&#12290;
  &#20320;&#21487;&#20197;&#22312; <tt class="filename">ra.xml</tt> &#25991;&#20214;&#20013;&#25351;&#23450;&#20320;&#30340;&#36164;&#28304;&#36866;&#37197;&#22120;&#25903;&#25345;&#30340;&#20107;&#21153;&#31867;&#22411;&#12290;
  &#23427;&#26412;&#36136;&#19978;&#26377;&#19977;&#20010;&#36873;&#39033;&#65306;none(&#20363;&#22914;CICS EPI &#36830;&#25509;&#22120;)&#65292;&#26412;&#22320;&#20107;&#21153;&#65288;&#20363;&#22914;CICS ECI &#36830;&#25509;&#22120;&#65289;&#65292;&#20840;&#23616;&#20107;&#21153;&#65288;&#20363;&#22914;IMS &#36830;&#25509;&#22120;&#65289;&#12290;</p><pre class="programlisting">&lt;connector&gt;

 &lt;resourceadapter&gt;

  <i class="lineannotation"><span class="lineannotation">&lt;!-- &lt;transaction-support&gt;NoTransaction&lt;/transaction-support&gt; --&gt;</span></i>
  <i class="lineannotation"><span class="lineannotation">&lt;!-- &lt;transaction-support&gt;LocalTransaction&lt;/transaction-support&gt; --&gt;</span></i>
  &lt;transaction-support&gt;XATransaction&lt;/transaction-support&gt;

 &lt;resourceadapter&gt;

&lt;connector&gt;</pre><p>&#23545;&#20110;&#20840;&#23616;&#20107;&#21153;&#65292;&#21487;&#20197;&#20351;&#29992;Spring&#20013;&#24120;&#35265;&#30340;&#20107;&#21153;&#26426;&#21046;&#26469;&#21010;&#20998;&#20107;&#21153;&#65292;
  &#24182;&#20197; <tt class="classname">JtaTransactionManager</tt> &#20026;&#21518;&#31471;&#65288;&#22996;&#25176;&#32473;&#21518;&#38754;&#30340;J2EE&#20998;&#24067;&#24335;&#20107;&#21153;&#21327;&#35843;&#31243;&#24207;&#65289;&#12290;
</p><p>&#23545;&#20110;&#21333;&#29420;CCI <tt class="interfacename">ConnectionFactory</tt> &#19978;&#30340;&#26412;&#22320;&#20107;&#21153;&#65292;
  Spring&#20026;CCI&#25552;&#20379;&#20102;&#19968;&#20010;&#19987;&#38376;&#30340;&#20107;&#21153;&#31649;&#29702;&#31574;&#30053;&#65292;
	&#31867;&#20284;&#20110;JDBC&#20013;&#30340; <tt class="classname">DataSourceTransactionManager</tt>&#65292;
	CCI API&#23450;&#20041;&#20102;&#19968;&#20010;&#26412;&#22320;&#20107;&#21153;&#23545;&#35937;&#21644;&#30456;&#24212;&#30340;&#26412;&#22320;&#20107;&#21153;&#21010;&#20998;&#26041;&#27861;&#12290;
	Spring&#30340; <tt class="classname">CciLocalTransactionManager</tt> &#25191;&#34892;&#36825;&#26679;&#30340;&#26412;&#22320;CCI&#20107;&#21153;&#65292;
	&#23436;&#20840;&#20381;&#29031;Spring&#20013;&#24120;&#35265;&#30340; <tt class="interfacename">PlatformTransactionManager</tt> &#25277;&#35937;&#12290;</p><pre class="programlisting">&lt;bean id="eciConnectionFactory" class="org.springframework.jndi.JndiObjectFactoryBean"&gt;
 &lt;property name="jndiName" value="eis/cicseci"/&gt;
&lt;/bean&gt;

&lt;bean id="eciTransactionManager"
  class="org.springframework.jca.cci.connection.CciLocalTransactionManager"&gt;
 &lt;property name="connectionFactory" ref="eciConnectionFactory"/&gt;
&lt;/bean&gt;</pre><p>
			&#22768;&#26126;&#24335;&#25110;&#32534;&#31243;&#24335;&#30340;&#20107;&#21153;&#31574;&#30053;&#37117;&#33021;&#34987;&#29992;&#20110;&#20219;&#24847;&#30340;Spring&#20107;&#21153;&#21010;&#20998;&#21151;&#33021;&#12290;
			&#36825;&#26159;Spring&#36890;&#29992;&#30340; <tt class="interfacename">PlatformTransactionManager</tt> &#25277;&#35937;&#30340;&#32467;&#26524;&#65292;&#23427;&#35299;&#32806;&#20102;&#23454;&#38469;&#36816;&#34892;&#31574;&#30053;&#20013;&#30340;&#20107;&#21153;&#21010;&#20998;&#12290;
			&#20320;&#21487;&#20197;&#20445;&#25345;&#29616;&#22312;&#30340;&#20107;&#21153;&#21010;&#20998;&#65292;&#21482;&#38656;&#35201;&#22312; <tt class="classname">JtaTransactionManager</tt> &#21644; <tt class="classname">CciLocalTransactionManager</tt> &#20043;&#38388;&#36716;&#25442;&#21363;&#21487;&#12290;
		</p><p>&#26377;&#20851;Spring&#30340;&#20107;&#21153;&#26426;&#21046;&#65292;&#35831;&#21442;&#35265; <a href="#transaction" title="Chapter&nbsp;9.&nbsp;&#20107;&#21153;&#31649;&#29702;">Chapter&nbsp;9, <i>&#20107;&#21153;&#31649;&#29702;</i></a> &#19968;&#31456;&#12290;</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="mail"></a>Chapter&nbsp;22.&nbsp;Spring&#37038;&#20214;&#25277;&#35937;&#23618;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="mail-introduction"></a>22.1.&nbsp;&#31616;&#20171;</h2></div></div><div></div></div><div class="sidebar"><p class="title"><b>&#36164;&#28304;&#31867;&#24211;&#20381;&#36182;</b></p><p>&#19979;&#38754;&#25152;&#21015;&#20986;&#30340;jar&#25991;&#20214;&#24517;&#39035;&#21152;&#21040;&#20320;&#24212;&#29992;&#31243;&#24207;&#30340;classpath&#20013;&#65292;&#22240;&#20026;&#36825;&#20123;&#37117;&#26159;Spring Framework&#37038;&#20214;&#25277;&#35937;&#23618;&#25152;&#20381;&#36182;&#30340;&#24211;&#25991;&#20214;&#12290;</p><div class="itemizedlist"><ul type="disc"><li><p><a href="http://java.sun.com/products/javamail/" target="_top">JavaMail</a> <tt class="filename">mail.jar</tt>&#24211;</p></li><li><p><a href="http://java.sun.com/products/javabeans/jaf/downloads/index.html" target="_top">JAF</a> <tt class="filename">activation.jar</tt>&#24211;</p></li></ul></div><p>&#25152;&#26377;&#36825;&#20123;&#20381;&#36182;&#30340;&#24211;&#37117;&#21487;&#20197;&#22312;Spring Framework&#30340;Spring-with-dependencies&#30340;release&#21253;&#20013;&#33719;&#24471; (&#21516;&#26102;&#20063;&#21487;&#20197;&#22312;&#32593;&#19978;&#20813;&#36153;&#33719;&#24471;)&#12290;</p></div><p>Spring&#25552;&#20379;&#20102;&#19968;&#20010;&#21457;&#36865;&#30005;&#23376;&#37038;&#20214;&#30340;&#39640;&#32423;&#25277;&#35937;&#23618;&#65292;&#23427;&#21521;&#29992;&#25143;&#23631;&#34109;&#20102;&#24213;&#23618;&#37038;&#20214;&#31995;&#32479;&#30340;&#19968;&#20123;&#32454;&#33410;&#65292;&#21516;&#26102;&#20195;&#34920;&#23458;&#25143;&#31471;&#36127;&#36131;&#24213;&#23618;&#30340;&#36164;&#28304;&#22788;&#29702;&#12290;</p><p>Spring&#37038;&#20214;&#25277;&#35937;&#23618;&#30340;&#20027;&#35201;&#21253;&#20026;<tt class="literal">org.springframework.mail</tt>&#12290;&#23427;&#21253;&#25324;&#20102;&#21457;&#36865;&#30005;&#23376;&#37038;&#20214;&#30340;&#20027;&#35201;&#25509;&#21475;<tt class="interfacename">MailSender</tt>&#65292;&#21644;<span class="emphasis"><em>&#20540;&#23545;&#35937;</em></span><tt class="classname">SimpleMailMessage</tt>&#65292;&#23427;&#23553;&#35013;&#20102;&#31616;&#21333;&#37038;&#20214;&#30340;&#23646;&#24615;&#22914;<span class="emphasis"><em>from</em></span>, <span class="emphasis"><em>to</em></span>,<span class="emphasis"><em>cc</em></span>, <span class="emphasis"><em>subject</em></span>,<span class="emphasis"><em>text</em></span>&#12290;
	&#21253;&#37324;&#36824;&#21253;&#21547;&#19968;&#26869;&#20197;<tt class="classname">MailException</tt>&#20026;&#26681;&#30340;checked Exception&#32487;&#25215;&#26641;&#65292;&#23427;&#20204;&#25552;&#20379;&#20102;&#23545;&#24213;&#23618;&#37038;&#20214;&#31995;&#32479;&#24322;&#24120;&#30340;&#39640;&#32423;&#21035;&#25277;&#35937;&#12290; &#35201;&#33719;&#24471;&#20851;&#20110;&#37038;&#20214;&#24322;&#24120;&#23618;&#27425;&#30340;&#26356;&#20016;&#23500;&#30340;&#20449;&#24687;&#65292;&#35831;&#21442;&#32771;Javadocs&#12290;</p><p>&#20026;&#20102;&#20351;&#29992;<span class="emphasis"><em>JavaMail</em></span>&#20013;&#30340;&#19968;&#20123;&#29305;&#33394;, &#27604;&#22914;MIME&#31867;&#22411;&#30340;&#20449;&#20214;, Spring&#25552;&#20379;&#20102;<tt class="interfacename">MailSender</tt>&#30340;&#19968;&#20010;&#23376;&#25509;&#21475;,	&#21363;<tt class="classname">org.springframework.mail.javamail.JavaMailSender</tt>&#12290;
		Spring&#36824;&#25552;&#20379;&#20102;&#19968;&#20010;&#22238;&#35843;&#25509;&#21475;<tt class="interfacename">org.springframework.mail.javamail.MimeMessagePreparator</tt>, &#29992;&#20110;&#20934;&#22791;JavaMail&#30340;MIME&#20449;&#20214;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="mail-usage"></a>22.2.&nbsp;&#20351;&#29992;Spring&#37038;&#20214;&#25277;&#35937;</h2></div></div><div></div></div><p>&#20551;&#35774;&#26576;&#20010;&#19994;&#21153;&#25509;&#21475;&#21517;&#20026;<tt class="interfacename">OrderManager</tt>:</p><pre class="programlisting">public interface OrderManager {

    void placeOrder(Order order);
}</pre><p>&#25105;&#20204;&#21516;&#26102;&#20551;&#35774;&#26377;&#19968;&#20010;&#29992;&#20363;&#65306;&#38656;&#35201;&#29983;&#25104;&#24102;&#26377;&#35746;&#21333;&#21495;&#30340;email&#20449;&#20214;, &#24182;&#21521;&#23458;&#25143;&#21457;&#36865;&#35813;&#35746;&#21333;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mail-usage-simple"></a>22.2.1.&nbsp;<tt class="interfacename">MailSender</tt> &#21644; <tt class="classname">SimpleMailMessage</tt> &#30340;&#22522;&#26412;&#29992;&#27861;</h3></div></div><div></div></div><pre class="programlisting">import org.springframework.mail.MailException;
import org.springframework.mail.MailSender;
import org.springframework.mail.SimpleMailMessage;

public class SimpleOrderManager implements OrderManager {

    private MailSender mailSender;
    private SimpleMailMessage templateMessage;

    public void setMailSender(MailSender mailSender) {
        this.mailSender = mailSender;
    }

    public void setTemplateMessage(SimpleMailMessage templateMessage) {
        this.templateMessage = templateMessage;
    }

    public void placeOrder(Order order) {

        <i class="lineannotation"><span class="lineannotation">// Do the business calculations...</span></i>

        <i class="lineannotation"><span class="lineannotation">// Call the collaborators to persist the order...</span></i>

        <i class="lineannotation"><span class="lineannotation">// Create a thread safe "copy" of the template message and customize it</span></i>
        SimpleMailMessage msg = new SimpleMailMessage(this.templateMessage);
        msg.setTo(order.getCustomer().getEmailAddress());
        msg.setText(
            "Dear " + order.getCustomer().getFirstName()
                + order.getCustomer().getLastName()
                + ", thank you for placing order. Your order number is "
                + order.getOrderNumber());
        try{
            this.mailSender.send(msg);
        }
        catch(MailException ex) {
            <i class="lineannotation"><span class="lineannotation">// simply log it and go on...</span></i>
            System.err.println(ex.getMessage());            
        }
    }
}</pre><p>&#19978;&#38754;&#30340;&#20195;&#30721;&#30340;bean&#23450;&#20041;&#24212;&#35813;&#26159;&#36825;&#26679;&#30340;:</p><pre class="programlisting">&lt;bean id="mailSender" class="org.springframework.mail.javamail.JavaMailSenderImpl"&gt;
  &lt;property name="host" value="mail.mycompany.com"/&gt;
&lt;/bean&gt;

<i class="lineannotation"><span class="lineannotation">&lt;!-- this is a template message that we can pre-load with default state --&gt;</span></i>
&lt;bean id="templateMessage" class="org.springframework.mail.SimpleMailMessage"&gt;
  &lt;property name="from" value="customerservice@mycompany.com"/&gt;
  &lt;property name="subject" value="Your order"/&gt;
&lt;/bean&gt;

&lt;bean id="orderManager" class="com.mycompany.businessapp.support.SimpleOrderManager"&gt;
  &lt;property name="mailSender" ref="mailSender"/&gt;
  &lt;property name="templateMessage" ref="templateMessage"/&gt;
&lt;/bean&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mail-usage-mime"></a>22.2.2.&nbsp;&#20351;&#29992; <tt class="interfacename">JavaMailSender</tt> &#21644; <tt class="classname">MimeMessagePreparator</tt></h3></div></div><div></div></div><p>&#19979;&#38754;&#26159;<tt class="interfacename">OrderManager</tt>&#30340;&#21478;&#19968;&#31181;&#23454;&#29616;, &#20351;&#29992;&#20102;<tt class="interfacename">MimeMessagePreparator</tt>&#22238;&#35843;&#25509;&#21475;&#12290;
			 &#35831;&#27880;&#24847;&#22312;&#36825;&#20010;&#29992;&#20363;&#20013;&#65292;<tt class="literal">mailSender</tt>&#23646;&#24615;&#26159;<tt class="interfacename">JavaMailSender</tt>&#31867;&#22411;&#65292; &#25152;&#20197;&#25105;&#20204;&#21487;&#20197;&#20351;&#29992;JavaMail&#30340;<tt class="classname">MimeMessage</tt>&#31867;&#65306;</p><pre class="programlisting">import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;

import javax.mail.internet.MimeMessage;
import org.springframework.mail.MailException;
import org.springframework.mail.javamail.JavaMailSender;
import org.springframework.mail.javamail.MimeMessagePreparator;

public class SimpleOrderManager implements OrderManager {

    private JavaMailSender mailSender;
    
    public void setMailSender(JavaMailSender mailSender) {
        this.mailSender = mailSender;
    }

    public void placeOrder(final Order order) {

        <i class="lineannotation"><span class="lineannotation">// Do the business calculations...</span></i>

        <i class="lineannotation"><span class="lineannotation">// Call the collaborators to persist the order...</span></i>
        
        MimeMessagePreparator preparator = new MimeMessagePreparator() {
        
            public void prepare(MimeMessage mimeMessage) throws Exception {
        
                mimeMessage.setRecipient(Message.RecipientType.TO, 
                        new InternetAddress(order.getCustomer().getEmailAddress()));
                mimeMessage.setFrom(new InternetAddress("mail@mycompany.com"));
                mimeMessage.setText(
                    "Dear " + order.getCustomer().getFirstName() + " "
                        + order.getCustomer().getLastName()
                        + ", thank you for placing order. Your order number is "
                        + order.getOrderNumber());
            }
        };
        try {
            this.mailSender.send(preparator);
        }
        catch (MailException ex) {
            <i class="lineannotation"><span class="lineannotation">// simply log it and go on...</span></i>
            System.err.println(ex.getMessage());            
        }
    }
}</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#20197;&#19978;&#30340;&#37038;&#20214;&#20195;&#30721;&#26159;&#19968;&#20010;&#27178;&#20999;&#20851;&#27880;&#28857;&#65292;&#33021;&#34987;&#23436;&#32654;&#22320;&#37325;&#26500;&#20026;<a href="#aop" title="Chapter&nbsp;6.&nbsp;&#20351;&#29992;Spring&#36827;&#34892;&#38754;&#21521;&#20999;&#38754;&#32534;&#31243;&#65288;AOP&#65289;">&#33258;&#23450;&#20041;Spring AOP&#20999;&#38754;</a>&#30340;&#20505;&#36873;&#32773;&#65292;&#36825;&#26679;&#23427;&#23601;&#21487;&#20197;&#22312;&#30446;&#26631;&#23545;&#35937;<tt class="interfacename">OrderManager</tt>&#30340;&#19968;&#20123;&#21512;&#36866;&#30340;&#36830;&#25509;&#28857;&#65288;joinpoint&#65289;&#20013;&#34987;&#25191;&#34892;&#20102;&#12290;</p></td></tr></tbody></table></div><p>Spring Framework&#30340;&#37038;&#20214;&#25903;&#25345;&#30452;&#25509;&#25552;&#20379;&#20004;&#31181;<tt class="interfacename">MailSender</tt>&#30340;&#23454;&#29616;&#12290;&#26631;&#20934;&#30340;JavaMail&#23454;&#29616;&#21644;&#22522;&#20110;Jason Hunter&#32534;&#20889;&#30340;<tt class="classname">MailMessage</tt>&#31867;&#20043;&#19978;&#30340;&#23454;&#29616;&#65292;&#21518;&#32773;&#20301;&#20110;<a href="http://servlets.com/cos" target="_top"><tt class="literal">com.oreilly.servlet</tt>&#21253;</a>&#20013;&#12290;&#35831;&#26597;&#38405;&#30456;&#20851;Javadocs&#20197;&#33719;&#24471;&#36827;&#19968;&#27493;&#30340;&#36164;&#26009;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="mail-javamail-mime"></a>22.3.&nbsp;&#20351;&#29992;<tt class="classname">MimeMessageHelper</tt></h2></div></div><div></div></div><p>
  		<tt class="classname">org.springframework.mail.javamail.MimeMessageHelper</tt>&#26159;&#22788;&#29702;JavaMail&#37038;&#20214;&#26102;&#27604;&#36739;&#39034;&#25163;&#32452;&#20214;&#20043;&#19968;&#12290;&#23427;&#21487;&#20197;&#35753;&#20320;&#25670;&#33073;&#32321;&#22797;&#30340;JavaMail API&#12290;
  		&#36890;&#36807;&#20351;&#29992;<tt class="classname">MimeMessageHelper</tt>&#65292;&#21019;&#24314;&#19968;&#20010;<tt class="classname">MimeMessage</tt>&#23454;&#20363;&#23558;&#38750;&#24120;&#23481;&#26131;&#65306;
  	</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">// of course you would use DI in any real-world cases</span></i>
JavaMailSenderImpl sender = new JavaMailSenderImpl();
sender.setHost("mail.host.com");

MimeMessage message = sender.createMimeMessage();
MimeMessageHelper helper = new MimeMessageHelper(message);
helper.setTo("test@host.com");
helper.setText("Thank you for ordering!");

sender.send(message);</pre><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mail-javamail-mime-attachments"></a>22.3.1.&nbsp;&#21457;&#36865;&#38468;&#20214;&#21644;&#23884;&#20837;&#24335;&#36164;&#28304;(inline resources)</h3></div></div><div></div></div><p>Multipart email&#20801;&#35768;&#28155;&#21152;&#38468;&#20214;&#21644;&#20869;&#23884;&#36164;&#28304;(inline resources)&#12290;&#20869;&#23884;&#36164;&#28304;&#21487;&#33021;&#26159;&#20320;&#22312;&#20449;&#20214;&#20013;&#24076;&#26395;&#20351;&#29992;&#30340;&#22270;&#20687;&#25110;&#26679;&#24335;&#34920;&#65292;&#20294;&#26159;&#21448;&#19981;&#24819;&#25226;&#23427;&#20204;&#20316;&#20026;&#38468;&#20214;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mail-javamail-mime-attachments-attachment"></a>22.3.1.1.&nbsp;&#38468;&#20214;</h4></div></div><div></div></div><p>&#19979;&#38754;&#30340;&#20363;&#23376;&#23558;&#23637;&#31034;&#22914;&#20309;&#20351;&#29992;<tt class="classname">MimeMessageHelper</tt>&#26469;&#21457;&#36865;&#19968;&#23553;email&#65292;&#20351;&#29992;&#19968;&#20010;&#31616;&#21333;&#30340;JPEG&#22270;&#29255;&#20316;&#20026;&#38468;&#20214;&#65306;</p><pre class="programlisting">JavaMailSenderImpl sender = new JavaMailSenderImpl();
sender.setHost("mail.host.com");

MimeMessage message = sender.createMimeMessage();

<i class="lineannotation"><span class="lineannotation">// use the true flag to indicate you need a multipart message</span></i>
MimeMessageHelper helper = new MimeMessageHelper(message, true);
helper.setTo("test@host.com");

helper.setText("Check out this image!");

<i class="lineannotation"><span class="lineannotation">// let's attach the infamous windows Sample file (this time copied to c:/)</span></i>
FileSystemResource file = new FileSystemResource(new File("c:/Sample.jpg"));
helper.addAttachment("CoolImage.jpg", file);

sender.send(message);</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mail-javamail-mime-attachments-inline"></a>22.3.1.2.&nbsp;&#20869;&#23884;&#36164;&#28304;</h4></div></div><div></div></div><p>&#19979;&#38754;&#30340;&#20363;&#23376;&#23558;&#23637;&#31034;&#22914;&#20309;&#20351;&#29992;<tt class="classname">MimeMessageHelper</tt>&#26469;&#21457;&#36865;&#19968;&#23553;&#21547;&#26377;&#20869;&#23884;&#36164;&#28304;&#30340;email&#65306;</p><pre class="programlisting">JavaMailSenderImpl sender = new JavaMailSenderImpl();
sender.setHost("mail.host.com");

MimeMessage message = sender.createMimeMessage();

<i class="lineannotation"><span class="lineannotation">// use the true flag to indicate you need a multipart message</span></i>
MimeMessageHelper helper = new MimeMessageHelper(message, true);
helper.setTo("test@host.com");

<i class="lineannotation"><span class="lineannotation">// use the true flag to indicate the text included is HTML</span></i>
helper.setText("&lt;html&gt;&lt;body&gt;&lt;img src='cid:identifier1234'&gt;&lt;/body&gt;&lt;/html&gt;", true);

<i class="lineannotation"><span class="lineannotation">// let's include the infamous windows Sample file (this time copied to c:/)</span></i>
FileSystemResource res = new FileSystemResource(new File("c:/Sample.jpg"));
helper.addInline("identifier1234", res);

sender.send(message);</pre><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Warning" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Warning]" src="warning.png"></td><th align="left">Warning</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#22914;&#20320;&#25152;&#35265;&#65292;&#23884;&#20837;&#24335;&#36164;&#28304;&#20351;&#29992;<tt class="literal">Content-ID</tt>(&#19978;&#20363;&#20013;&#26159;<tt class="literal">identifier1234</tt>)&#26469;&#25554;&#20837;&#21040;mime&#20449;&#20214;&#20013;&#21435;&#12290;&#20320;&#21152;&#20837;&#25991;&#26412;&#21644;&#36164;&#28304;&#30340;&#39034;&#24207;&#26159;<span class="bold"><b>&#38750;&#24120;</b></span>&#37325;&#35201;&#30340;&#12290;&#39318;&#20808;&#65292;&#20320;&#21152;&#20837;&#25991;&#26412;&#65292;&#38543;&#21518;&#26159;&#36164;&#28304;&#12290;&#22914;&#26524;&#39034;&#24207;&#24324;&#21453;&#20102;&#65292;&#23427;&#23558;&#26080;&#27861;&#27491;&#24120;&#36816;&#20316;&#65281;</p></td></tr></tbody></table></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mail-templates"></a>22.3.2.&nbsp;&#20351;&#29992;&#27169;&#26495;&#26469;&#21019;&#24314;&#37038;&#20214;&#20869;&#23481;</h3></div></div><div></div></div><p>&#22312;&#20043;&#21069;&#30340;&#20195;&#30721;&#31034;&#20363;&#20013;&#65292;&#25152;&#26377;&#37038;&#20214;&#30340;&#20869;&#23481;&#37117;&#26159;&#26174;&#24335;&#23450;&#20041;&#30340;&#65292;&#24182;&#36890;&#36807;&#35843;&#29992;<tt class="methodname">message.setText(..)</tt>&#26469;&#35774;&#32622;&#37038;&#20214;&#20869;&#23481;&#12290; 
			&#36825;&#31181;&#20570;&#27861;&#38024;&#23545;&#31616;&#21333;&#30340;&#24773;&#20917;&#25110;&#22312;&#19978;&#36848;&#30340;&#20363;&#23376;&#20013;&#27809;&#20160;&#20040;&#38382;&#39064;&#65292;&#22240;&#20026;&#22312;&#36825;&#37324;&#21482;&#26159;&#20026;&#20102;&#21521;&#20320;&#23637;&#31034;&#22522;&#30784;API&#12290;</p><p>&#32780;&#22312;&#20320;&#33258;&#24049;&#30340;&#20225;&#19994;&#32423;&#24212;&#29992;&#31243;&#24207;&#20013;, &#22522;&#20110;&#22914;&#19979;&#30340;&#21407;&#22240;&#65292;&#20320;&#19981;&#20250;&#20197;&#19978;&#36848;&#26041;&#24335;&#21019;&#24314;&#20320;&#30340;&#37038;&#20214;&#20869;&#23481;&#65306;</p><p>
				</p><div class="itemizedlist"><ul type="disc"><li><p>&#20351;&#29992;Java&#20195;&#30721;&#26469;&#21019;&#24314;&#22522;&#20110;HTML&#30340;&#37038;&#20214;&#20869;&#23481;&#19981;&#20165;&#23481;&#26131;&#29359;&#38169;&#65292;&#21516;&#26102;&#20063;&#26159;&#19968;&#20214;&#21333;&#35843;&#20047;&#21619;&#30340;&#20107;&#24773;</p></li><li><p>&#36825;&#26679;&#20570;&#65292;&#20320;&#23558;&#26080;&#27861;&#23558;&#26174;&#31034;&#36923;&#36753;&#21644;&#19994;&#21153;&#36923;&#36753;&#24456;&#26126;&#30830;&#30340;&#21306;&#20998;&#24320;</p></li><li><p>&#19968;&#26086;&#38656;&#35201;&#20462;&#25913;&#37038;&#20214;&#20869;&#23481;&#30340;&#26174;&#24335;&#26684;&#24335;&#21644;&#20869;&#23481;&#65292;&#20320;&#38656;&#35201;&#37325;&#26032;&#32534;&#20889;Java&#20195;&#30721;&#65292;&#37325;&#26032;&#32534;&#35793;&#65292;&#37325;&#26032;&#37096;&#32626;&#8230;&#8230;</p></li></ul></div><p>
			</p><p>&#19968;&#33324;&#26469;&#35828;&#35299;&#20915;&#36825;&#20123;&#38382;&#39064;&#30340;&#20856;&#22411;&#30340;&#26041;&#24335;&#26159;&#20351;&#29992;FreeMarker&#25110;&#32773;Velocity&#36825;&#26679;&#30340;&#27169;&#26495;&#35821;&#35328;&#26469;&#23450;&#20041;&#37038;&#20214;&#20869;&#23481;&#30340;&#26174;&#24335;&#32467;&#26500;&#12290;
			&#36825;&#26679;&#65292;&#20320;&#30340;&#20219;&#21153;&#23601;&#26159;&#22312;&#20320;&#30340;&#20195;&#30721;&#20013;&#65292;&#21482;&#35201;&#21019;&#24314;&#22312;&#37038;&#20214;&#27169;&#26495;&#20013;&#38656;&#35201;&#23637;&#31034;&#30340;&#25968;&#25454;&#65292;&#24182;&#21457;&#36865;&#37038;&#20214;&#21363;&#21487;&#12290;&#36890;&#36807;&#20351;&#29992;Spring&#23545;FreeMarker&#21644;Velocity&#30340;&#25903;&#25345;&#31867;&#65292;
			&#20320;&#30340;&#37038;&#20214;&#20869;&#23481;&#23558;&#21464;&#24471;&#31616;&#21333;&#65292;&#36825;&#21516;&#26102;&#20063;&#26159;&#19968;&#20010;&#26368;&#20339;&#23454;&#36341;&#12290;&#19979;&#38754;&#26159;&#19968;&#20010;&#20351;&#29992;Velocity&#26469;&#21019;&#24314;&#37038;&#20214;&#20869;&#23481;&#30340;&#20363;&#23376;&#65306;
			</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mail-templates-example"></a>22.3.2.1.&nbsp;&#19968;&#20010;&#22522;&#20110;Velocity&#30340;&#31034;&#20363;</h4></div></div><div></div></div><p>&#20351;&#29992;<a href="http://velocity.apache.org/" target="_top">Velocity</a>&#26469;&#21019;&#24314;&#20320;&#30340;&#37038;&#20214;&#27169;&#26495;&#65292;&#20320;&#38656;&#35201;&#25226;Velocity&#21152;&#20837;&#21040;classpath&#20013;&#12290;
				&#21516;&#26102;&#35201;&#26681;&#25454;&#24212;&#29992;&#30340;&#38656;&#35201;&#20026;&#37038;&#20214;&#20869;&#23481;&#21019;&#24314;&#19968;&#20010;&#25110;&#32773;&#22810;&#20010;Velocity&#27169;&#26495;&#12290;&#19979;&#38754;&#30340;Velocity&#27169;&#26495;&#26159;&#36825;&#20010;&#20363;&#23376;&#20013;&#25152;&#20351;&#29992;&#30340;&#22522;&#20110;HTML&#30340;&#27169;&#26495;&#12290;
				&#36825;&#21482;&#26159;&#19968;&#20010;&#26222;&#36890;&#30340;&#25991;&#26412;&#65292;&#20320;&#21487;&#20197;&#36890;&#36807;&#21508;&#31181;&#20854;&#20182;&#30340;&#32534;&#36753;&#22120;&#26469;&#32534;&#36753;&#35813;&#25991;&#26412;&#65292;&#32780;&#26080;&#38656;&#20102;&#35299;Java&#26041;&#38754;&#30340;&#30693;&#35782;&#12290;</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation"># in the <tt class="literal">com/foo/package</tt></span></i>
&lt;html&gt;
&lt;body&gt;
&lt;h3&gt;Hi ${user.userName}, welcome to the Chipping Sodbury On-the-Hill message boards!&lt;/h3&gt;

&lt;div&gt;
   Your email address is &lt;a href="mailto:${user.emailAddress}"&gt;${user.emailAddress}&lt;/a&gt;.
&lt;/div&gt;
&lt;/body&gt;

&lt;/html&gt;</pre><p>&#19979;&#38754;&#25552;&#20379;&#20102;&#19968;&#20123;&#31616;&#21333;&#30340;&#20195;&#30721;&#19982;Spring XML&#37197;&#32622;&#65292;&#23427;&#20204;&#20351;&#29992;&#20102;&#19978;&#36848;Velocity&#27169;&#26495;&#26469;&#21019;&#24314;&#37038;&#20214;&#20869;&#23481;&#24182;&#21457;&#36865;&#37038;&#20214;&#12290;</p><pre class="programlisting">package com.foo;

import org.apache.velocity.app.VelocityEngine;
import org.springframework.mail.javamail.JavaMailSender;
import org.springframework.mail.javamail.MimeMessageHelper;
import org.springframework.mail.javamail.MimeMessagePreparator;
import org.springframework.ui.velocity.VelocityEngineUtils;

import javax.mail.internet.MimeMessage;
import java.util.HashMap;
import java.util.Map;

public class SimpleRegistrationService implements RegistrationService {

   private JavaMailSender mailSender;
   private VelocityEngine velocityEngine;

   public void setMailSender(JavaMailSender mailSender) {
      this.mailSender = mailSender;
   }

   public void setVelocityEngine(VelocityEngine velocityEngine) {
      this.velocityEngine = velocityEngine;
   }

   public void register(User user) {

      <i class="lineannotation"><span class="lineannotation">// Do the registration logic...</span></i>

      sendConfirmationEmail(user);
   }

   private void sendConfirmationEmail(final User user) {
      MimeMessagePreparator preparator = new MimeMessagePreparator() {
         public void prepare(MimeMessage mimeMessage) throws Exception {
            MimeMessageHelper message = new MimeMessageHelper(mimeMessage);
            message.setTo(user.getEmailAddress());
            message.setFrom("webmaster@csonth.gov.uk"); <i class="lineannotation"><span class="lineannotation">// could be parameterized...</span></i>
            Map model = new HashMap();
            model.put("user", user);
            String text = VelocityEngineUtils.mergeTemplateIntoString(
               velocityEngine, "com/dns/registration-confirmation.vm", model);
            message.setText(text, true);
         }
      };
      this.mailSender.send(preparator);
   }
}</pre><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
   http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"&gt;

   &lt;bean id="mailSender" class="org.springframework.mail.javamail.JavaMailSenderImpl"&gt;
      &lt;property name="host" value="mail.csonth.gov.uk"/&gt;
   &lt;/bean&gt;

   &lt;bean id="registrationService" class="com.foo.SimpleRegistrationService"&gt;
      &lt;property name="mailSender" ref="mailSender"/&gt;
      &lt;property name="velocityEngine" ref="velocityEngine"/&gt;
   &lt;/bean&gt;
   
   &lt;bean id="velocityEngine" class="org.springframework.ui.velocity.VelocityEngineFactoryBean"&gt;
      &lt;property name="velocityProperties"&gt;
         &lt;value&gt;
            resource.loader=class
            class.resource.loader.class=org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader
         &lt;/value&gt;
      &lt;/property&gt;
   &lt;/bean&gt;

&lt;/beans&gt;</pre></div></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="scheduling"></a>Chapter&nbsp;23.&nbsp;Spring&#20013;&#30340;&#23450;&#26102;&#35843;&#24230;(Scheduling)&#21644;&#32447;&#31243;&#27744;(Thread Pooling)</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="scheduling-introduction"></a>23.1.&nbsp;&#31616;&#20171;</h2></div></div><div></div></div><p>
  			Spring&#21253;&#21547;&#20102;&#23545;&#23450;&#26102;&#35843;&#24230;&#26381;&#21153;&#30340;&#20869;&#32622;&#25903;&#25345;&#31867;&#12290;&#24403;&#21069;&#65292;Spring&#25903;&#25345;&#20174;JDK1.3&#24320;&#22987;&#20869;&#32622;&#30340;<tt class="classname">Timer</tt>&#31867;&#21644;Quartz Scheduler(<a href="http://www.opensymphony.com/quartz/" target="_top">http://www.opensymphony.com/quartz/</a>)&#12290;&#20108;&#32773;&#37117;&#21487;&#20197;&#36890;&#36807;<tt class="interfacename">FactoryBean</tt>&#65292;&#20998;&#21035;&#25351;&#21521;<tt class="classname">Timer</tt>&#25110;<tt class="classname">Trigger</tt>&#23454;&#20363;&#30340;&#24341;&#29992;&#36827;&#34892;&#37197;&#32622;&#12290;&#26356;&#36827;&#19968;&#27493;&#65292;&#26377;&#20010;&#23545;Quartz Scheduler&#21644;<tt class="classname">Timer</tt>&#37117;&#26377;&#25928;&#30340;&#24037;&#20855;&#31867;&#21487;&#20197;&#35753;&#20320;&#35843;&#29992;&#26576;&#20010;&#30446;&#26631;&#23545;&#35937;&#30340;&#26041;&#27861;&#65288;&#31867;&#20284;&#36890;&#24120;&#30340;<tt class="classname">MethodInvokingFactoryBean</tt>&#25805;&#20316;&#65289;&#12290;Spring &#36824;&#21253;&#21547;&#26377;&#29992;&#20110;&#32447;&#31243;&#27744;&#35843;&#24230;&#30340;&#31867;&#65292;&#23427;&#38024;&#23545;Java 1.3,1.4,5&#21644;JEE&#29615;&#22659;&#30340;&#24046;&#24322;&#37117;&#36827;&#34892;&#20102;&#25277;&#35937;&#12290;
 		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="scheduling-quartz"></a>23.2.&nbsp;&#20351;&#29992;OpenSymphony Quartz &#35843;&#24230;&#22120;</h2></div></div><div></div></div><p>
		Quartz&#20351;&#29992;<tt class="classname">Trigger</tt>, <tt class="classname">Job</tt>&#20197;&#21450;<tt class="classname">JobDetail</tt>&#31561;&#23545;&#35937;&#26469;&#36827;&#34892;&#21508;&#31181;&#31867;&#22411;&#30340;&#20219;&#21153;&#35843;&#24230;&#12290;&#20851;&#20110;Quartz&#30340;&#22522;&#26412;&#27010;&#24565;&#65292;&#35831;&#21442;&#38405;<a href="http://www.opensymphony.com/quartz" target="_top">http://www.opensymphony.com/quartz</a>&#12290;&#20026;&#20102;&#35753;&#22522;&#20110;Spring&#30340;&#24212;&#29992;&#31243;&#24207;&#26041;&#20415;&#20351;&#29992;&#65292;Spring&#25552;&#20379;&#20102;&#19968;&#20123;&#31867;&#26469;&#31616;&#21270;uartz&#30340;&#29992;&#27861;&#12290;
  	</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="scheduling-quartz-jobdetail"></a>23.2.1.&nbsp;&#20351;&#29992;JobDetailBean</h3></div></div><div></div></div><p>
  				<tt class="classname">JobDetail</tt> &#23545;&#35937;&#20445;&#23384;&#36816;&#34892;&#19968;&#20010;&#20219;&#21153;&#25152;&#38656;&#30340;&#20840;&#37096;&#20449;&#24687;&#12290;Spring&#25552;&#20379;&#19968;&#20010;&#21483;&#20316;<tt class="classname">JobDetailBean</tt>&#30340;&#31867;&#35753;<tt class="classname">JobDetail</tt>&#33021;&#23545;&#19968;&#20123;&#26377;&#24847;&#20041;&#30340;&#21021;&#22987;&#20540;&#36827;&#34892;&#21021;&#22987;&#21270;&#12290;&#35753;&#25105;&#20204;&#26469;&#30475;&#20010;&#20363;&#23376;&#65306;
  		</p><pre class="programlisting">&lt;bean name="exampleJob" class="org.springframework.scheduling.quartz.JobDetailBean"&gt;
  &lt;property name="jobClass" value="example.ExampleJob" /&gt;
  &lt;property name="jobDataAsMap"&gt;
    &lt;map&gt;
      &lt;entry key="timeout" value="5" /&gt;
    &lt;/map&gt;
  &lt;/property&gt;
&lt;/bean&gt;</pre><p>
			Job detail bean&#25317;&#26377;&#25152;&#26377;&#36816;&#34892;job(<tt class="classname">ExampleJob</tt>)&#30340;&#24517;&#35201;&#20449;&#24687;&#12290;
			&#21487;&#20197;&#36890;&#36807;job&#30340;data map&#26469;&#21046;&#23450;timeout&#12290;Job&#30340;data map&#21487;&#20197;&#36890;&#36807;<tt class="classname">JobExecutionContext</tt>&#65288;&#22312;&#36816;&#34892;&#26102;&#21051;&#20256;&#36882;&#32473;&#20320;)&#26469;&#24471;&#21040;&#65292;&#20294;&#26159;<tt class="classname">JobDetailBean</tt>&#21516;&#26102;&#25226;&#20174;job&#30340;data map&#20013;&#24471;&#21040;&#30340;&#23646;&#24615;&#26144;&#23556;&#21040;&#23454;&#38469;job&#20013;&#30340;&#23646;&#24615;&#20013;&#21435;&#12290; 
			&#25152;&#20197;&#65292;&#22914;&#26524;ExampleJob&#20013;&#21253;&#21547;&#19968;&#20010;&#21517;&#20026;<tt class="literal">timeout</tt>&#30340;&#23646;&#24615;&#65292;<tt class="classname">JobDetailBean</tt>&#23558;&#33258;&#21160;&#20026;&#23427;&#36171;&#20540;&#65306; 
			</p><pre class="programlisting">package example;

public class ExampleJob extends QuartzJobBean {

  private int timeout;
  
  /**
   * Setter called after the ExampleJob is instantiated
   * with the value from the JobDetailBean (5)
   */ 
  public void setTimeout(int timeout) {
    this.timeout = timeout;
  }
  
  protected void executeInternal(JobExecutionContext ctx) throws JobExecutionException {
      <i class="lineannotation"><span class="lineannotation">// do the actual work</span></i>
  }
}</pre><p>&#24403;&#28982;&#65292;&#20320;&#21516;&#26679;&#21487;&#20197;&#23545;Job detail bean&#20013;&#25152;&#26377;&#20854;&#20182;&#30340;&#39069;&#22806;&#37197;&#32622;&#36827;&#34892;&#35774;&#32622;&#12290;</p><p>
			<span class="emphasis"><em>&#27880;&#24847;&#65306;&#20351;&#29992;<tt class="literal">name</tt>&#21644;<tt class="literal">group</tt>&#23646;&#24615;,&#20320;&#21487;&#20197;&#20998;&#21035;&#20462;&#25913;job&#22312;&#21738;&#19968;&#20010;&#32452;&#19979;&#36816;&#34892;&#21644;&#20351;&#29992;&#20160;&#20040;&#21517;&#31216;&#12290; &#40664;&#35748;&#24773;&#20917;&#19979;&#65292;job&#30340;&#21517;&#31216;&#31561;&#20110;job detail bean&#30340;&#21517;&#31216;&#65288;&#22312;&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#20026;<tt class="literal">exampleJob</tt>&#65289;&#12290;</em></span>
			</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="scheduling-quartz-method-invoking-job"></a>23.2.2.&nbsp;&#20351;&#29992; <tt class="classname">MethodInvokingJobDetailFactoryBean</tt></h3></div></div><div></div></div><p>
				&#36890;&#24120;&#24773;&#20917;&#19979;,&#20320;&#21482;&#38656;&#35201;&#35843;&#29992;&#29305;&#23450;&#23545;&#35937;&#19978;&#30340;&#19968;&#20010;&#26041;&#27861;&#21363;&#21487;&#23454;&#29616;&#20219;&#21153;&#35843;&#24230;&#12290;&#20320;&#21487;&#20197;&#20351;&#29992;<tt class="classname">MethodInvokingJobDetailFactoryBean</tt>&#20934;&#30830;&#30340;&#20570;&#21040;&#36825;&#19968;&#28857;: 
			</p><pre class="programlisting">&lt;bean id="jobDetail" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean"&gt;
  &lt;property name="targetObject" ref="exampleBusinessObject" /&gt;
  &lt;property name="targetMethod" value="doIt" /&gt;
&lt;/bean&gt;</pre><p>
				&#19978;&#38754;&#20363;&#23376;&#23558;&#35843;&#29992;<tt class="literal">exampleBusinessObject</tt>&#20013;&#30340;<tt class="literal">doIt</tt>&#26041;&#27861;&#65288;&#22914;&#19979;&#65289;&#65306; 
			</p><pre class="programlisting">public class ExampleBusinessObject {
  
  <i class="lineannotation"><span class="lineannotation">// properties and collaborators</span></i>
  
  public void doIt() {
    <i class="lineannotation"><span class="lineannotation">// do the actual work</span></i>
  }
}</pre><pre class="programlisting">&lt;bean id="exampleBusinessObject" class="examples.ExampleBusinessObject"/&gt;</pre><p>	
			&#20351;&#29992;<tt class="literal">MethodInvokingJobDetailFactoryBean</tt>&#20320;&#19981;&#38656;&#35201;&#21019;&#24314;&#21482;&#26377;&#19968;&#34892;&#20195;&#30721;&#19988;&#21482;&#35843;&#29992;&#19968;&#20010;&#26041;&#27861;&#30340;job, &#20320;&#21482;&#38656;&#35201;&#21019;&#24314;&#30495;&#23454;&#30340;&#19994;&#21153;&#23545;&#35937;&#26469;&#21253;&#35013;&#20855;&#20307;&#30340;&#32454;&#33410;&#30340;&#23545;&#35937;&#12290;
			</p><p>
			&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;Quartz Jobs&#26159;&#26080;&#29366;&#24577;&#30340;&#65292;&#21487;&#33021;&#23548;&#33268;jobs&#20043;&#38388;&#20114;&#30456;&#30340;&#24433;&#21709;&#12290;&#22914;&#26524;&#20320;&#20026;&#30456;&#21516;&#30340;<tt class="classname">JobDetail</tt>&#25351;&#23450;&#20004;&#20010;Trigger,
			&#24456;&#21487;&#33021;&#24403;&#31532;&#19968;&#20010;job&#23436;&#25104;&#20043;&#21069;&#65292;&#31532;&#20108;&#20010;job&#23601;&#24320;&#22987;&#20102;&#12290;&#22914;&#26524;<tt class="classname">JobDetail</tt>&#23545;&#35937;&#23454;&#29616;&#20102;<tt class="interfacename">Stateful</tt>&#25509;&#21475;&#65292;&#23601;&#19981;&#20250;&#21457;&#29983;&#36825;&#26679;&#30340;&#20107;&#24773;&#12290;
			&#31532;&#20108;&#20010;job&#23558;&#19981;&#20250;&#22312;&#31532;&#19968;&#20010;job&#23436;&#25104;&#20043;&#21069;&#24320;&#22987;&#12290;&#20026;&#20102;&#20351;&#24471;jobs&#19981;&#24182;&#21457;&#36816;&#34892;,&#35774;&#32622;<tt class="classname">MethodInvokingJobDetailFactoryBean</tt>&#20013;&#30340;<tt class="literal">concurrent</tt>&#26631;&#35760;&#20026;<tt class="literal">false</tt>&#12290;
			</p><pre class="programlisting">&lt;bean id="jobDetail" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean"&gt;
  &lt;property name="targetObject" ref="exampleBusinessObject" /&gt;
  &lt;property name="targetMethod" value="doIt" /&gt;
  &lt;property name="concurrent" value="false" /&gt;
&lt;/bean&gt;</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>
					&#27880;&#24847;&#65306;&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;jobs&#22312;&#24182;&#34892;&#30340;&#26041;&#24335;&#19979;&#36816;&#34892;&#12290;
				</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="scheduling-quartz-cron"></a>23.2.3.&nbsp;&#20351;&#29992;triggers&#21644;<tt class="classname">SchedulerFactoryBean</tt>&#26469;&#21253;&#35013;&#20219;&#21153;</h3></div></div><div></div></div><p>
			&#25105;&#20204;&#24050;&#32463;&#21019;&#24314;&#20102;job details,jobs&#12290;&#25105;&#20204;&#21516;&#26102;&#22238;&#39038;&#20102;&#20801;&#35768;&#20320;&#35843;&#29992;&#29305;&#23450;&#23545;&#35937;&#19978;&#26576;&#19968;&#20010;&#26041;&#27861;&#30340;&#20415;&#25463;&#30340;bean&#12290;
			&#24403;&#28982;&#25105;&#20204;&#20173;&#38656;&#35201;&#35843;&#24230;&#36825;&#20123;jobs&#12290;&#36825;&#38656;&#35201;&#20351;&#29992;triggers&#21644;<tt class="classname">SchedulerFactoryBean</tt>&#26469;&#23436;&#25104;&#12290;
			Quartz&#33258;&#24102;&#19968;&#20123;&#21487;&#20379;&#20351;&#29992;&#30340;triggers&#12290;Spring&#25552;&#20379;&#20004;&#20010;&#23376;&#31867;triggers&#65292;&#20998;&#21035;&#20026;<tt class="classname">CronTriggerBean</tt>&#21644;<tt class="classname">SimpleTriggerBean</tt>&#12290;
		</p><p>
			Triggers&#20063;&#38656;&#35201;&#34987;&#35843;&#24230;&#12290;Spring&#25552;&#20379;<tt class="classname">SchedulerFactoryBean</tt>&#26469;&#26292;&#38706;&#19968;&#20123;&#23646;&#24615;&#26469;&#35774;&#32622;triggers&#12290;<tt class="classname">SchedulerFactoryBean</tt>&#36127;&#36131;&#35843;&#24230;&#37027;&#20123;&#23454;&#38469;&#30340;triggers&#12290;
		</p><p>
			&#26469;&#30475;&#20960;&#20010;&#20363;&#23376;&#65306;
			</p><pre class="programlisting">&lt;bean id="simpleTrigger" class="org.springframework.scheduling.quartz.SimpleTriggerBean"&gt;
    &lt;!-- see the example of method invoking job above --&gt;
    &lt;property name="jobDetail" ref="jobDetail" /&gt;
    &lt;!-- 10 seconds --&gt;
    &lt;property name="startDelay" value="10000" /&gt;
    &lt;!-- repeat every 50 seconds --&gt;
    &lt;property name="repeatInterval" value="50000" /&gt;
&lt;/bean&gt;

&lt;bean id="cronTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean"&gt;
    &lt;property name="jobDetail" ref="exampleJob" /&gt;
    &lt;!-- run every morning at 6 AM --&gt;
    &lt;property name="cronExpression" value="0 0 6 * * ?" /&gt;
&lt;/bean&gt;</pre><p>
			&#29616;&#22312;&#25105;&#20204;&#21019;&#24314;&#20102;&#20004;&#20010;triggers&#65292;&#20854;&#20013;&#19968;&#20010;&#24320;&#22987;&#24310;&#36831;10&#31186;&#20197;&#21518;&#27599;50&#31186;&#36816;&#34892;&#19968;&#27425;&#65292;&#21478;&#19968;&#20010;&#27599;&#22825;&#26089;&#19978;6&#28857;&#38047;&#36816;&#34892;&#12290;
			&#25105;&#20204;&#38656;&#35201;&#21019;&#24314;&#19968;&#20010;<tt class="classname">SchedulerFactoryBean</tt>&#26469;&#26368;&#32456;&#23454;&#29616;&#19978;&#36848;&#30340;&#19968;&#20999;&#65306;
			</p><pre class="programlisting">&lt;bean class="org.springframework.scheduling.quartz.SchedulerFactoryBean"&gt;
    &lt;property name="triggers"&gt;
        &lt;list&gt;
            &lt;ref bean="cronTrigger" /&gt;
            &lt;ref bean="simpleTrigger" /&gt;
        &lt;/list&gt;
    &lt;/property&gt;
&lt;/bean&gt;</pre><p>
				&#26356;&#22810;&#30340;&#23646;&#24615;&#20320;&#21487;&#20197;&#36890;&#36807;<tt class="classname">SchedulerFactoryBean</tt>&#26469;&#35774;&#32622;&#65292;&#20363;&#22914;job details&#20351;&#29992;&#30340;Calendars, &#29992;&#26469;&#35746;&#21046;Quartz&#30340;&#19968;&#20123;&#23646;&#24615;&#20197;&#21450;&#20854;&#23427;&#30456;&#20851;&#20449;&#24687;&#12290;
			&#20320;&#21487;&#20197;&#26597;&#38405;&#30456;&#24212;&#30340;JavaDOC(<a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/scheduling/quartz/SchedulerFactoryBean.html" target="_top">http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/scheduling/quartz/SchedulerFactoryBean.html</a>)&#26469;&#20102;&#35299;&#36827;&#19968;&#27493;&#30340;&#20449;&#24687;&#12290;
			</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="scheduling-jdk-timer"></a>23.3.&nbsp;&#20351;&#29992;JDK Timer&#25903;&#25345;&#31867;</h2></div></div><div></div></div><p>
		&#21478;&#22806;&#19968;&#20010;&#35843;&#24230;&#20219;&#21153;&#30340;&#36884;&#24452;&#26159;&#20351;&#29992;JDK Timer&#23545;&#35937;&#12290;&#20320;&#21487;&#20197;&#21019;&#24314;&#23450;&#21046;&#30340;timer&#25110;&#32773;&#35843;&#29992;&#26576;&#20123;&#26041;&#27861;&#30340;timer&#12290;&#21253;&#35013;timers&#30340;&#24037;&#20316;&#30001;<tt class="classname">TimerFactoryBean</tt>&#23436;&#25104;&#12290;
	</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="scheduling-jdk-timer-creating"></a>23.3.1.&nbsp;&#21019;&#24314;&#23450;&#21046;&#30340;timers</h3></div></div><div></div></div><p>
			&#20320;&#21487;&#20197;&#20351;&#29992;<tt class="literal">TimerTask</tt>&#21019;&#24314;&#23450;&#21046;&#30340;timer tasks&#65292;&#31867;&#20284;&#20110;Quartz&#20013;&#30340;jobs:
			</p><pre class="programlisting">public class CheckEmailAddresses extends TimerTask {

  private List emailAddresses;
  
  public void setEmailAddresses(List emailAddresses) {
    this.emailAddresses = emailAddresses;
  }
  
  public void run() {
    <i class="lineannotation"><span class="lineannotation">// iterate over all email addresses and archive them</span></i>
  }
}</pre><p>
				&#21253;&#35013;&#23427;&#24456;&#31616;&#21333;:
			</p><pre class="programlisting">&lt;bean id="checkEmail" class="examples.CheckEmailAddress"&gt;
    &lt;property name="emailAddresses"&gt;
        &lt;list&gt;
            &lt;value&gt;test@springframework.org&lt;/value&gt;
            &lt;value&gt;foo@bar.com&lt;/value&gt;
            &lt;value&gt;john@doe.net&lt;/value&gt;
        &lt;/list&gt;
    &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id="scheduledTask" class="org.springframework.scheduling.timer.ScheduledTimerTask"&gt;
    <i class="lineannotation"><span class="lineannotation">&lt;!-- wait 10 seconds before starting repeated execution --&gt;</span></i>
    &lt;property name="delay" value="10000" /&gt;
    <i class="lineannotation"><span class="lineannotation">&lt;!-- run every 50 seconds --&gt;</span></i>
    &lt;property name="period" value="50000" /&gt;
    &lt;property name="timerTask" ref="checkEmail" /&gt;
&lt;/bean&gt;</pre><p>
				<span class="emphasis"><em>
				&#27880;&#24847;&#33509;&#35201;&#35753;&#20219;&#21153;&#21482;&#36816;&#34892;&#19968;&#27425;&#65292;&#20320;&#21487;&#20197;&#25226;<tt class="literal">period</tt>&#23646;&#24615;&#35774;&#32622;&#20026;0&#65288;&#25110;&#32773;&#36127;&#20540;&#65289;&#12290;
				</em></span>
			</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="scheduling-jdk-timer-method-invoking-task"></a>23.3.2.&nbsp;&#20351;&#29992; <tt class="classname">MethodInvokingTimerTaskFactoryBean</tt>&#31867;</h3></div></div><div></div></div><p>
				&#21644;&#23545;Quartz&#30340;&#25903;&#25345;&#31867;&#20284;&#65292;&#23545;<tt class="classname">Timer</tt>&#30340;&#25903;&#25345;&#20063;&#21253;&#21547;&#19968;&#20010;&#32452;&#20214;&#65292;&#21487;&#20197;&#35753;&#20320;&#21608;&#26399;&#24615;&#30340;&#35843;&#29992;&#26576;&#20010;&#26041;&#27861;:
			</p><pre class="programlisting">&lt;bean id="doIt" class="org.springframework.scheduling.timer.MethodInvokingTimerTaskFactoryBean"&gt;
    &lt;property name="targetObject" ref="exampleBusinessObject" /&gt;
    &lt;property name="targetMethod" value="doIt" /&gt;
&lt;/bean&gt;</pre><p>
				&#20197;&#19978;&#30340;&#20363;&#23376;&#20250;&#35843;&#29992;<tt class="literal">exampleBusinessObject</tt>&#23545;&#35937;&#30340;<tt class="literal">doIt</tt>&#26041;&#27861;&#12290;(&#35265;&#19979;):
			</p><pre class="programlisting">public class BusinessObject {
  
  <i class="lineannotation"><span class="lineannotation">// properties and collaborators</span></i>
  
  public void doIt() {
    <i class="lineannotation"><span class="lineannotation">// do the actual work</span></i>
  }
}</pre><p>
				&#23558;&#19978;&#20363;&#20013;<tt class="classname">ScheduledTimerTask</tt>&#30340;<tt class="literal">timerTask</tt>&#24341;&#29992;&#20462;&#25913;&#20026;<tt class="literal">doIt</tt>&#65292;bean&#23558;&#20250;&#29992;&#19968;&#20010;&#22266;&#23450;&#30340;&#21608;&#26399;&#26469;&#35843;&#29992;<tt class="literal">doIt</tt>&#26041;&#27861;&#12290;
			</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="scheduling-jdk-timer-factory-bean"></a>23.3.3.&nbsp;&#26368;&#21518;&#65306;&#20351;&#29992;<tt class="classname">TimerFactoryBean</tt>&#26469;&#35774;&#32622;&#20219;&#21153;</h3></div></div><div></div></div><p>
				<tt class="classname">TimerFactoryBean</tt>&#31867;&#21644;Quartz&#30340;<tt class="classname">SchedulerFactoryBean</tt>&#31867;&#26377;&#20123;&#31867;&#20284;&#65292;&#23427;&#20204;&#26159;&#20026;&#21516;&#26679;&#30340;&#30446;&#30340;&#32780;&#35774;&#35745;&#30340;&#65306;&#35774;&#32622;&#30830;&#20999;&#30340;&#20219;&#21153;&#35745;&#21010;&#12290;<tt class="classname">TimerFactoryBean</tt>&#23545;&#19968;&#20010;Timer&#36827;&#34892;&#37197;&#32622;&#65292;&#35774;&#32622;&#20854;&#24341;&#29992;&#30340;&#20219;&#21153;&#30340;&#21608;&#26399;&#12290;&#20320;&#21487;&#20197;&#25351;&#23450;&#26159;&#21542;&#20351;&#29992;&#32972;&#26223;&#32447;&#31243;&#12290;
			</p><pre class="programlisting">&lt;bean id="timerFactory" class="org.springframework.scheduling.timer.TimerFactoryBean"&gt;
    &lt;property name="scheduledTimerTasks"&gt;
        &lt;list&gt;
            <i class="lineannotation"><span class="lineannotation">&lt;!-- see the example above --&gt;</span></i>
            &lt;ref bean="scheduledTask" /&gt;
        &lt;/list&gt;
    &lt;/property&gt;
&lt;/bean&gt;</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="scheduling-task-executor"></a>23.4.&nbsp;Spring<tt class="interfacename">TaskExecutor</tt>&#25277;&#35937;</h2></div></div><div></div></div><p>
			Spring 2.0 &#20026;&#25191;&#34892;&#22120;(Executor)&#22788;&#29702;&#24341;&#20837;&#20102;&#19968;&#20010;&#26032;&#30340;&#25277;&#35937;&#23618;&#12290;Executor&#26159;Java 5&#30340;&#21517;&#35789;&#65292;&#29992;&#26469;&#34920;&#31034;&#32447;&#31243;&#27744;&#30340;&#27010;&#24565;&#12290;
			&#20043;&#25152;&#20197;&#29992;&#36825;&#20010;&#22855;&#24618;&#30340;&#21517;&#35789;&#65292;&#26159;&#22240;&#20026;&#23454;&#38469;&#19978;&#19981;&#33021;&#20445;&#35777;&#24213;&#23618;&#23454;&#29616;&#30340;&#30830;&#26159;&#19968;&#20010;&#27744;&#12290;&#23454;&#38469;&#19978;&#65292;&#24456;&#22810;&#24773;&#20917;&#19979;&#65292;executor&#21482;&#26159;&#21333;&#32447;&#31243;&#12290;
			Spring&#30340;&#25277;&#35937;&#23618;&#24110;&#21161;&#20320;&#25226;&#32447;&#31243;&#27744;&#24341;&#20837;&#21040;Java 1.3&#21644;1.4&#29615;&#22659;&#20013;&#65292;&#21516;&#26102;&#38544;&#34255;&#20102; 1.3, 1.4, 5, &#21644; Java EE&#29615;&#22659;&#20013;&#32447;&#31243;&#27744;&#23454;&#29616;&#30340;&#24046;&#24322;&#12290;
		</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="scheduling-task-executor-interface"></a>23.4.1.&nbsp;<tt class="interfacename">TaskExecutor</tt>&#25509;&#21475;</h3></div></div><div></div></div><p>
				Spring&#30340;<tt class="interfacename">TaskExecutor</tt>&#25509;&#21475;&#31561;&#21516;&#20110;<tt class="classname">java.util.concurrent.Executor</tt>&#25509;&#21475;&#12290;
				&#23454;&#38469;&#19978;&#65292;&#23427;&#23384;&#22312;&#30340;&#20027;&#35201;&#21407;&#22240;&#26159;&#20026;&#20102;&#22312;&#20351;&#29992;&#32447;&#31243;&#27744;&#30340;&#26102;&#20505;&#65292;&#23558;&#23545;Java 5&#30340;&#20381;&#36182;&#25277;&#35937;&#20986;&#26469;&#12290;
				&#36825;&#20010;&#25509;&#21475;&#21482;&#26377;&#19968;&#20010;&#26041;&#27861;<tt class="classname">execute(Runnable task)</tt>&#65292;&#23427;&#26681;&#25454;&#32447;&#31243;&#27744;&#30340;&#35821;&#20041;&#21644;&#37197;&#32622;&#65292;&#26469;&#25509;&#21463;&#19968;&#20010;&#25191;&#34892;&#20219;&#21153;&#12290;
		</p><p>
				&#26368;&#21021;&#21019;&#24314;<tt class="interfacename">TaskExecutor</tt>&#26159;&#20026;&#20102;&#22312;&#38656;&#35201;&#26102;&#32473;&#20854;&#20182;Spring&#32452;&#20214;&#25552;&#20379;&#19968;&#20010;&#32447;&#31243;&#27744;&#30340;&#25277;&#35937;&#12290;
				&#20363;&#22914;<tt class="classname">ApplicationEventMulticaster</tt>&#32452;&#20214;&#12289;JMS&#30340; <tt class="classname">AbstractMessageListenerContainer</tt>&#21644;&#23545;Quartz&#30340;&#25972;&#21512;&#37117;&#20351;&#29992;&#20102;<tt class="interfacename">TaskExecutor</tt>&#25277;&#35937;&#26469;&#25552;&#20379;&#32447;&#31243;&#27744;&#12290;
				&#24403;&#28982;&#65292;&#22914;&#26524;&#20320;&#30340;bean&#38656;&#35201;&#32447;&#31243;&#27744;&#34892;&#20026;&#65292;&#20320;&#20063;&#21487;&#20197;&#20351;&#29992;&#36825;&#20010;&#25277;&#35937;&#23618;&#12290;
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="scheduling-task-executor-types"></a>23.4.2.&nbsp;<tt class="interfacename">TaskExecutor</tt>&#31867;&#22411;</h3></div></div><div></div></div><p>
				&#22312;Spring&#21457;&#34892;&#21253;&#20013;&#39044;&#23450;&#20041;&#20102;&#19968;&#20123;<tt class="interfacename">TaskExecutor</tt>&#23454;&#29616;&#12290;&#26377;&#20102;&#23427;&#20204;&#65292;&#20320;&#29978;&#33267;&#19981;&#38656;&#35201;&#20877;&#33258;&#34892;&#23454;&#29616;&#20102;&#12290;
			</p><div class="itemizedlist"><ul type="disc"><li><p>
						<tt class="classname">SimpleAsyncTaskExecutor</tt>
&#31867;
					</p><p>
					&#36825;&#20010;&#23454;&#29616;&#19981;&#37325;&#29992;&#20219;&#20309;&#32447;&#31243;&#65292;&#25110;&#32773;&#35828;&#23427;&#27599;&#27425;&#35843;&#29992;&#37117;&#21551;&#21160;&#19968;&#20010;&#26032;&#32447;&#31243;&#12290;&#20294;&#26159;&#65292;&#23427;&#36824;&#26159;&#25903;&#25345;&#23545;&#24182;&#21457;&#24635;&#25968;&#35774;&#38480;&#65292;&#24403;&#36229;&#36807;&#32447;&#31243;&#24182;&#21457;&#24635;&#25968;&#38480;&#21046;&#26102;&#65292;&#38459;&#22622;&#26032;&#30340;&#35843;&#29992;&#65292;&#30452;&#21040;&#26377;&#20301;&#32622;&#34987;&#37322;&#25918;&#12290;&#22914;&#26524;&#20320;&#38656;&#35201;&#30495;&#27491;&#30340;&#27744;&#65292;&#35831;&#32487;&#32493;&#24448;&#19979;&#30475;&#12290;
					</p></li><li><p><a name="syncTaskExecutor"></a>
						<tt class="classname">SyncTaskExecutor</tt>&#31867;
					</p><p>
						&#36825;&#20010;&#23454;&#29616;&#19981;&#20250;&#24322;&#27493;&#25191;&#34892;&#12290;&#30456;&#21453;&#65292;&#27599;&#27425;&#35843;&#29992;&#37117;&#22312;&#21457;&#36215;&#35843;&#29992;&#30340;&#32447;&#31243;&#20013;&#25191;&#34892;&#12290;&#23427;&#30340;&#20027;&#35201;&#29992;&#22788;&#26159;&#22312;&#19981;&#38656;&#35201;&#22810;&#32447;&#31243;&#30340;&#26102;&#20505;&#65292;&#27604;&#22914;&#31616;&#21333;&#30340;test case&#12290;
					</p></li><li><p><a name="concurrentTaskExecutor"></a>
						<tt class="classname">ConcurrentTaskExecutor</tt>
&#31867;
					</p><p>
					&#36825;&#20010;&#23454;&#29616;&#26159;&#23545;Java 5 <tt class="classname">java.util.concurrent.Executor</tt>&#31867;&#30340;&#21253;&#35013;&#12290;&#26377;&#21478;&#19968;&#20010;&#22791;&#36873;, <tt class="classname">ThreadPoolTaskExecutor</tt>&#31867;&#65292;&#23427;&#26292;&#38706;&#20102;<tt class="classname">Executor</tt>&#30340;&#37197;&#32622;&#21442;&#25968;&#20316;&#20026;bean&#23646;&#24615;&#12290;&#24456;&#23569;&#38656;&#35201;&#20351;&#29992;<tt class="classname">ConcurrentTaskExecutor</tt>, &#20294;&#26159;&#22914;&#26524;<a href="#threadPoolTaskExecutor"><tt class="classname">ThreadPoolTaskExecutor</tt></a>&#19981;&#25975;&#25152;&#38656;&#65292;<tt class="classname">ConcurrentTaskExecutor</tt>&#26159;&#21478;&#22806;&#19968;&#20010;&#22791;&#36873;&#12290;
					</p></li><li><p><a name="simpleThreadPoolTaskExecutor"></a>
						<tt class="classname">SimpleThreadPoolTaskExecutor</tt>
&#31867;
					</p><p>
						&#36825;&#20010;&#23454;&#29616;&#23454;&#38469;&#19978;&#26159;Quartz&#30340;<tt class="classname">SimpleThreadPool</tt>&#31867;&#30340;&#23376;&#31867;&#65292;&#23427;&#20250;&#30417;&#21548;Spring&#30340;&#29983;&#21629;&#21608;&#26399;&#22238;&#35843;&#12290;&#24403;&#20320;&#26377;&#32447;&#31243;&#27744;&#65292;&#38656;&#35201;&#22312;Quartz&#21644;&#38750;Quartz&#32452;&#20214;&#20013;&#20849;&#29992;&#26102;&#65292;&#36825;&#26159;&#23427;&#30340;&#20856;&#22411;&#29992;&#22788;&#12290;
					</p></li><li><p><a name="threadPoolTaskExecutor"></a>
						<tt class="classname">ThreadPoolTaskExecutor</tt>
&#31867;
					</p><div class="sidebar"><p>
							&#23427;&#19981;&#25903;&#25345;&#20219;&#20309;&#23545;<tt class="classname">java.util.concurrent</tt>&#21253;&#30340;&#26367;&#25442;&#25110;&#32773;&#19979;&#34892;&#31227;&#26893;&#12290;Doug Lea&#21644;Dawid Kurzyniec&#23545;<tt class="classname">java.util.concurrent</tt>&#30340;&#23454;&#29616;&#37117;&#37319;&#29992;&#20102;&#19981;&#21516;&#30340;&#21253;&#32467;&#26500;&#65292;&#23548;&#33268;&#23427;&#20204;&#26080;&#27861;&#27491;&#30830;&#36816;&#34892;&#12290;
						</p></div><p>
					&#36825;&#20010;&#23454;&#29616;&#21482;&#33021;&#22312;Java 5&#29615;&#22659;&#20013;&#20351;&#29992;&#65292;&#20294;&#26159;&#21364;&#26159;&#36825;&#20010;&#29615;&#22659;&#20013;&#26368;&#24120;&#29992;&#30340;&#12290;&#23427;&#26292;&#38706;&#30340;bean properties&#21487;&#20197;&#29992;&#26469;&#37197;&#32622;&#19968;&#20010;<tt class="classname">java.util.concurrent.ThreadPoolExecutor</tt>&#65292;&#25226;&#23427;&#21253;&#35013;&#21040;&#19968;&#20010;<tt class="interfacename">TaskExecutor</tt>&#20013;&#12290;&#22914;&#26524;&#20320;&#38656;&#35201;&#26356;&#21152;&#20808;&#36827;&#30340;&#31867;&#65292;&#27604;&#22914;<tt class="classname">ScheduledThreadPoolExecutor</tt>,&#25105;&#20204;&#24314;&#35758;&#20320;&#20351;&#29992;<a href="#concurrentTaskExecutor"><tt class="classname">ConcurrentTaskExecutor</tt></a>&#26469;&#26367;&#20195;&#12290;
                    </p></li><li><p>
						<tt class="classname">TimerTaskExecutor</tt>&#31867;
					</p><p>
						&#36825;&#20010;&#23454;&#29616;&#20351;&#29992;&#19968;&#20010;<tt class="classname">TimerTask</tt>&#20316;&#20026;&#20854;&#32972;&#21518;&#30340;&#23454;&#29616;&#12290;&#23427;&#21644;<a href="#syncTaskExecutor"><tt class="classname">SyncTaskExecutor</tt></a>&#30340;&#19981;&#21516;&#22312;&#20110;&#65292;&#26041;&#27861;&#35843;&#29992;&#26159;&#22312;&#19968;&#20010;&#29420;&#31435;&#30340;&#32447;&#31243;&#20013;&#36827;&#34892;&#30340;&#65292;&#34429;&#28982;&#22312;&#37027;&#20010;&#32447;&#31243;&#20013;&#26159;&#21516;&#27493;&#30340;&#12290;
					</p></li><li><p>
						<tt class="classname">WorkManagerTaskExecutor</tt>&#31867;
					</p><div class="sidebar"><p>
							CommonJ &#26159;BEA&#21644;IBM&#32852;&#21512;&#24320;&#21457;&#30340;&#19968;&#22871;&#35268;&#33539;&#12290;&#36825;&#20123;&#35268;&#33539;&#24182;&#38750;Java EE&#30340;&#26631;&#20934;&#65292;&#20294;&#23427;&#26159;BEA&#21644;IBM&#30340;&#24212;&#29992;&#26381;&#21153;&#22120;&#23454;&#29616;&#30340;&#20849;&#21516;&#26631;&#20934;
						</p></div><p>
					&#36825;&#20010;&#23454;&#29616;&#20351;&#29992;&#20102;CommonJ WorkManager&#20316;&#20026;&#20854;&#24213;&#23618;&#23454;&#29616;&#65292;&#26159;&#22312;Spring context&#20013;&#37197;&#32622;CommonJ WorkManager&#24212;&#29992;&#30340;&#26368;&#37325;&#35201;&#30340;&#31867;&#12290;&#21644;<a href="#simpleThreadPoolTaskExecutor"><tt class="classname">SimpleThreadPoolTaskExecutor</tt></a>&#31867;&#20284;&#65292;&#36825;&#20010;&#31867;&#23454;&#29616;&#20102;WorkManager&#25509;&#21475;&#65292;&#22240;&#27492;&#21487;&#20197;&#30452;&#25509;&#20316;&#20026;WorkManager&#20351;&#29992;&#12290;
					</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="scheduling-task-executor-usage"></a>23.4.3.&nbsp;&#20351;&#29992;<tt class="interfacename">TaskExecutor</tt></h3></div></div><div></div></div><p>
				Spring&#30340;<tt class="interfacename">TaskExecutor</tt>&#23454;&#29616;&#20316;&#20026;&#19968;&#20010;&#31616;&#21333;&#30340;JavaBeans&#20351;&#29992;&#12290;&#22312;&#19979;&#38754;&#30340;&#31034;&#20363;&#20013;&#65292;&#25105;&#20204;&#23450;&#20041;&#19968;&#20010;bean,&#20351;&#29992; <tt class="classname">ThreadPoolTaskExecutor</tt>&#26469;&#24322;&#27493;&#25171;&#21360;&#20986;&#19968;&#31995;&#21015;&#23383;&#31526;&#20018;&#12290;
			</p><pre class="programlisting">import org.springframework.core.task.TaskExecutor;

public class TaskExecutorExample {

  private class MessagePrinterTask implements Runnable {

    private String message;

    public MessagePrinterTask(String message) {
      this.message = message;
    }

    public void run() {
      System.out.println(message);
    }

  }

  private TaskExecutor taskExecutor;

  public TaskExecutorExample(TaskExecutor taskExecutor) {
    this.taskExecutor = taskExecutor;
  }

  public void printMessages() {
    for(int i = 0; i &lt; 25; i++) {
      taskExecutor.execute(new MessagePrinterTask("Message" + i));
    }
  }
}</pre><p>
				&#21487;&#20197;&#30475;&#21040;&#65292;&#26080;&#38656;&#20320;&#33258;&#24049;&#20174;&#27744;&#20013;&#33719;&#21462;&#19968;&#20010;&#32447;&#31243;&#26469;&#25191;&#34892;&#65292;&#20320;&#25226;&#33258;&#24049;&#30340;<tt class="classname">Runnable</tt>&#31867;&#21152;&#20837;&#21040;&#38431;&#21015;&#20013;&#21435;&#65292;<tt class="interfacename">TaskExecutor</tt>&#20351;&#29992;&#23427;&#33258;&#24049;&#30340;&#20869;&#32622;&#35268;&#21017;&#26469;&#20915;&#23450;&#20309;&#26102;&#24212;&#35813;&#25191;&#34892;&#20219;&#21153;&#12290;
			</p><p>
				&#20026;&#20102;&#37197;&#32622;<tt class="interfacename">TaskExecutor</tt>&#20351;&#29992;&#30340;&#35268;&#21017;&#65292;&#26292;&#38706;&#20102;&#31616;&#21333;&#30340;bean properties&#12290;
			</p><pre class="programlisting">&lt;bean id="taskExecutor" class="org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor"&gt;
  &lt;property name="corePoolSize" value="5" /&gt;
  &lt;property name="maxPoolSize" value="10" /&gt;
  &lt;property name="queueCapacity" value="25" /&gt;
&lt;/bean&gt;

&lt;bean id="taskExecutorExample" class="TaskExecutorExample"&gt;
  &lt;constructor-arg ref="taskExecutor" /&gt;
&lt;/bean&gt;</pre></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="dynamic-language"></a>Chapter&nbsp;24.&nbsp;&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="dynamic-language-introduction"></a>24.1.&nbsp;&#20171;&#32461;</h2></div></div><div></div></div><div class="sidebar"><p class="title"><b>&#20026;&#20160;&#20040;&#21482;&#25903;&#25345;&#36825;&#20123;&#21160;&#24577;&#35821;&#35328;&#65311;</b></p><p>
                &#36873;&#25321;&#25903;&#25345;&#36825;&#20123;&#35821;&#35328;&#30340;&#29702;&#30001;&#22914;&#19979;&#65306;
				a&#65289;&#36825;&#20123;&#35821;&#35328;&#22312;Java&#20225;&#19994;&#31038;&#21306;&#20855;&#26377;&#30456;&#24403;&#30340;&#24433;&#21709;&#21147;&#65307;
				b&#65289;&#22312;Spring 2.0&#30340;&#24320;&#21457;&#21608;&#26399;&#20869;&#27809;&#26377;&#25910;&#21040;&#35201;&#27714;&#25903;&#25345;&#20854;&#20182;&#35821;&#35328;&#30340;&#30003;&#35831;&#65307;
				c&#65289;Spring&#24320;&#21457;&#32773;&#23545;&#23427;&#20204;&#26368;&#20026;&#29087;&#24713;&#12290;
            </p><p>
				&#24403;&#28982;&#36825;&#24182;&#19981;&#26159;&#35828;&#23545;&#20110;&#20854;&#20182;&#35821;&#35328;&#23601;&#19981;&#20877;&#25552;&#20379;&#25903;&#25345;&#20102;&#12290;&#22914;&#26524;&#20320;&#24076;&#26395;&#22312;&#26032;&#30340;&#29256;&#26412;&#20013;&#25903;&#25345;&#20320;&#38047;&#29233;&#30340;&#21160;&#24577;&#35821;&#35328;&#65292;&#37027;&#20040;&#35831;&#22312;Spring&#30340;<a href="http://opensource.atlassian.com/projects/spring/secure/Dashboard.jspa" target="_top">JIRA</a>&#39029;&#38754;&#25552;&#20986;&#30003;&#35831;&#65288;&#25110;&#32773;&#33258;&#24049;&#23454;&#29616;&#65289;&#12290;
            </p></div><p>Spring 2.0&#24320;&#22987;&#24191;&#27867;&#25903;&#25345;&#22312;Spring&#20013;&#20351;&#29992;&#21160;&#24577;&#35821;&#35328;&#65288;&#22914;JRuby&#65289;&#23450;&#20041;&#30340;&#31867;&#21644;&#23545;&#35937;&#12290;Spring&#23545;&#21160;&#24577;&#35821;&#35328;&#30340;&#25903;&#25345;&#20027;&#35201;&#26377;&#65306;&#20801;&#35768;&#20320;&#20351;&#29992;&#25152;&#25903;&#25345;&#30340;&#21160;&#24577;&#35821;&#35328;&#32534;&#20889;&#20219;&#24847;&#25968;&#30446;&#30340;&#31867;&#65292;Spring&#23481;&#22120;&#33021;&#22815;&#23436;&#20840;&#36879;&#26126;&#30340;&#23454;&#20363;&#21270;&#65292;&#37197;&#32622;&#65292;&#20381;&#36182;&#27880;&#20837;&#20854;&#26368;&#32456;&#23545;&#35937;&#12290;</p><p>&#30446;&#21069;&#25903;&#25345;&#30340;&#21160;&#24577;&#35821;&#35328;&#21015;&#34920;&#22914;&#19979;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>JRuby</p></li><li><p>Groovy</p></li><li><p>BeanShell</p></li></ul></div><p>
			&#22312;<a href="#dynamic-language-scenarios" title="24.4.&nbsp;&#22330;&#26223;">Section&nbsp;24.4, &#8220;&#22330;&#26223;&#8221;</a>&#19968;&#33410;&#25551;&#36848;&#20102;&#19968;&#20123;&#21487;&#36816;&#34892;&#30340;&#31034;&#20363;&#65292;&#36890;&#36807;&#36825;&#20123;&#31034;&#20363;&#20320;&#21487;&#20197;&#20307;&#39564;&#21040;Spring&#23545;&#21160;&#24577;&#35821;&#35328;&#30340;&#25903;&#25345;&#12290;
        </p><p>
			&#27880;&#24847;<span class="emphasis"><em>&#21482;&#26377;</em></span>&#22312;Spring2.0&#21450;&#20197;&#19978;&#29256;&#26412;&#25165;&#21487;&#33719;&#24471;&#26412;&#31456;&#25152;&#25351;&#30340;&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;&#12290;&#30446;&#21069;Spring&#22242;&#38431;&#36824;<span class="emphasis"><em>&#27809;&#26377;</em></span>&#35745;&#21010;&#35201;&#22312;&#20197;&#21069;&#30340;&#29256;&#26412;&#65288;&#22914;1.2.x&#65289;&#20013;&#25552;&#20379;&#23545;&#21160;&#24577;&#35821;&#35328;&#30340;&#25903;&#25345;&#12290;
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="dynamic-language-a-first-example"></a>24.2.&nbsp;&#31532;&#19968;&#20010;&#31034;&#20363;</h2></div></div><div></div></div><p>
&#26412;&#31456;&#30340;&#22823;&#37096;&#20998;&#20869;&#23481;&#30340;&#20851;&#27880;&#28857;&#37117;&#22312;&#25551;&#36848;Spring&#23545;&#21160;&#24577;&#35821;&#35328;&#30340;&#25903;&#25345;&#30340;&#32454;&#33410;&#19978;&#12290;&#22312;&#28145;&#20837;&#21040;&#36825;&#20123;&#32454;&#33410;&#20043;&#21069;&#65292;&#39318;&#20808;&#35753;&#25105;&#20204;&#30475;&#19968;&#20010;&#20351;&#29992;&#21160;&#24577;&#35821;&#35328;&#23450;&#20041;&#30340;bean&#30340;&#24555;&#36895;&#19978;&#25163;
&#30340;&#20363;&#23376;&#12290;&#31532;&#19968;&#20010;bean&#20351;&#29992;&#30340;&#21160;&#24577;&#35821;&#35328;&#26159;Groovy&#65288;&#36825;&#20010;&#20363;&#23376;&#26469;&#33258;Spring&#30340;&#27979;&#35797;&#22871;&#20214;&#65292;&#22914;&#26524;&#20320;&#25171;&#31639;&#30475;&#30475;&#23545;&#20854;&#20182;&#35821;&#35328;&#30340;&#25903;&#25345;&#30340;&#30456;&#21516;&#30340;&#20363;&#23376;&#65292;&#35831;&#38405;&#35835;&#30456;&#24212;&#30340;
&#28304;&#30721;&#65289;&#12290; </p><p>
			&#19979;&#38754;&#26159;Groovy bean&#35201;&#23454;&#29616;&#30340;<tt class="interfacename">Messenger</tt>&#25509;&#21475;&#12290;&#27880;&#24847;&#35813;&#25509;&#21475;&#26159;&#20351;&#29992;&#32431;Java&#23450;&#20041;&#30340;&#12290;&#20381;&#36182;&#30340;&#23545;&#35937;&#26159;&#36890;&#36807;<tt class="interfacename">Messenger</tt>&#25509;&#21475;&#30340;&#24341;&#29992;&#27880;&#20837;&#30340;&#65292;&#24182;&#19981;&#30693;&#36947;&#20854;&#23454;&#29616;&#26159;Groovy&#33050;&#26412;&#12290;
        </p><pre class="programlisting">package org.springframework.scripting;

public interface Messenger {

    String getMessage();
}</pre><p>
			&#19979;&#38754;&#26159;&#20381;&#36182;&#20110;<tt class="interfacename">Messenger</tt>&#25509;&#21475;&#30340;&#31867;&#30340;&#23450;&#20041;&#12290;
        </p><pre class="programlisting">package org.springframework.scripting;

public class DefaultBookingService implements BookingService {

    private Messenger messenger;

    public void setMessenger(Messenger messenger) {
        this.messenger = messenger;
    }

    public void processBooking() {
        // use the injected Messenger object...
    }
}</pre><p>&#19979;&#38754;&#26159;&#20351;&#29992;Groovy&#23454;&#29616;&#30340;<tt class="interfacename">Messenger</tt>&#25509;&#21475;&#12290;</p><pre class="programlisting">// from the file 'Messenger.groovy'
package org.springframework.scripting.groovy;

// import the Messenger interface (written in Java) that is to be implemented
import org.springframework.scripting.Messenger

// define the implementation in Groovy
class GroovyMessenger implements Messenger {

    String message
}</pre><p>
		    &#26368;&#21518;&#65292;&#36825;&#37324;&#30340;bean&#23450;&#20041;&#23558;Groovy&#23450;&#20041;&#30340;<tt class="interfacename">Messenger</tt>&#23454;&#29616;&#27880;&#20837;&#21040;<tt class="classname">DefaultBookingService</tt>&#31867;&#30340;&#23454;&#20363;&#20013;&#12290;
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>
		        &#35201;&#20351;&#29992;&#29992;&#25143;&#23450;&#21046;&#30340;&#21160;&#24577;&#35821;&#35328;&#26631;&#31614;&#26469;&#23450;&#20041; dynamic-language-backed bean&#65292;&#38656;&#35201;&#22312;Spring XML&#37197;&#32622;&#25991;&#20214;&#30340;&#22836;&#37096;&#28155;&#21152;&#30456;&#24212;&#30340;XML Schema&#12290;&#21516;&#26679;&#38656;&#35201;Spring&#30340;<tt class="interfacename">ApplicationContext</tt>&#23454;&#29616;&#20316;&#20026;IoC&#23481;&#22120;&#12290;Spring&#25903;&#25345;&#22312;&#31616;&#21333;&#30340;<tt class="interfacename">BeanFactory</tt>&#23454;&#29616;&#19979;&#20351;&#29992;dynamic-language-backed bean&#65292;&#20294;&#26159;&#20320;&#38656;&#35201;&#31649;&#29702;Spring&#20869;&#37096;&#30340;&#31181;&#31181;&#32454;&#33410;&#12290;
            </p><p>&#20851;&#20110;XML Schema&#30340;&#37197;&#32622;&#65292;&#35814;&#24773;&#35831;&#30475;<a href="#xsd-config" title="Appendix&nbsp;A.&nbsp;XML Schema-based configuration">Appendix&nbsp;A, <i>XML Schema-based configuration</i></a>&#12290;</p></td></tr></tbody></table></div><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:lang="http://www.springframework.org/schema/lang"
       xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang-2.5.xsd"&gt;

    <i class="lineannotation"><span class="lineannotation">&lt;!-- this is the bean definition for the Groovy-backed <tt class="interfacename">Messenger</tt> implementation --&gt;</span></i>
    &lt;lang:groovy id="messenger" script-source="classpath:Messenger.groovy"&gt;
        &lt;lang:property name="message" value="I Can Do The Frug" /&gt;
    &lt;/lang:groovy&gt;

    <i class="lineannotation"><span class="lineannotation">&lt;!-- an otherwise normal bean that will be injected by the Groovy-backed <tt class="interfacename">Messenger</tt> --&gt;</span></i>
    &lt;bean id="bookingService" class="x.y.DefaultBookingService"&gt;
        &lt;property name="messenger" ref="messenger" /&gt;
    &lt;/bean&gt;

&lt;/beans&gt;</pre><p>
            &#29616;&#22312;&#21487;&#20197;&#35937;&#20197;&#21069;&#19968;&#26679;&#20351;&#29992;<tt class="literal">bookingService</tt> bean &#65288;<tt class="classname">DefaultBookingService</tt>&#65289;&#30340;&#31169;&#26377;&#25104;&#21592;&#21464;&#37327; <tt class="literal">messenger</tt>&#65292;&#22240;&#20026;&#34987;&#27880;&#20837;&#30340;<tt class="interfacename">Messenger</tt>&#23454;&#20363;&#30830;&#23454;<span class="emphasis"><em>&#26159;</em></span>&#19968;&#20010;&#30495;&#27491;&#30340;<tt class="interfacename">Messenger</tt>&#23454;&#20363;&#12290;&#36825;&#37324;&#20063;&#27809;&#26377;&#20160;&#20040;&#29305;&#21035;&#30340;&#22320;&#26041;&#65292;&#23601;&#26159;&#31616;&#21333;&#30340;Java&#21644;Groovy&#12290;
        </p><p>
			&#20294;&#24895;&#20320;&#33021;&#22815;&#26080;&#38656;&#22810;&#21152;&#35828;&#26126;&#23601;&#30475;&#26126;&#30333;&#20197;&#19978;&#30340;XML&#29255;&#27573;&#65292;&#32780;&#19981;&#29992;&#22826;&#25285;&#24515;&#23427;&#26159;&#21542;&#24688;&#24403;&#25110;&#32773;&#26159;&#21542;&#27491;&#30830;&#12290;&#35831;&#32487;&#32493;&#38405;&#35835;&#26356;&#28145;&#23618;&#27425;&#30340;&#32454;&#33410;&#20197;&#20102;&#35299;&#20197;&#19978;&#37197;&#32622;&#30340;&#21407;&#22240;&#12290;
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="dynamic-language-beans"></a>24.3.&nbsp;&#23450;&#20041;&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;&#30340;bean</h2></div></div><div></div></div><p>
			&#36825;&#19968;&#33410;&#25551;&#36848;&#20102;&#22914;&#20309;&#38024;&#23545;Spring&#25152;&#25903;&#25345;&#30340;&#21160;&#24577;&#35821;&#35328;&#23450;&#20041;&#21463;Spring&#25152;&#31649;&#29702;&#30340;bean&#12290;
        </p><p>
			&#35831;&#27880;&#24847;&#26412;&#31456;&#19981;&#20250;&#35299;&#37322;&#36825;&#20123;&#25903;&#25345;&#30340;&#21160;&#24577;&#35821;&#35328;&#30340;&#35821;&#27861;&#21644;&#29992;&#27861;&#12290;&#20363;&#22914;&#65292;&#22914;&#26524;&#20320;&#24819;&#22312;&#20320;&#30340;&#26576;&#20010;&#24212;&#29992;&#20013;&#20351;&#29992;Groovy&#26469;&#32534;&#20889;&#31867;&#65292;&#25105;&#20204;&#20551;&#35774;&#20320;&#24050;&#32463;&#20102;&#35299;Groovy&#36825;&#38376;&#35821;&#35328;&#12290;&#22914;&#26524;&#20320;&#38656;&#35201;&#20102;&#35299;&#21644;&#21160;&#24577;&#35821;&#35328;&#26412;&#36523;&#26377;&#20851;&#30340;&#26356;&#22810;&#32454;&#33410;&#65292;&#35831;&#21442;&#32771;&#26412;&#31456;&#26411;&#23614;<a href="#dynamic-language-resources" title="24.6.&nbsp;&#26356;&#22810;&#30340;&#36164;&#28304;">Section&nbsp;24.6, &#8220;&#26356;&#22810;&#30340;&#36164;&#28304;&#8221;</a>&#19968;&#33410;&#12290;
        </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="dynamic-language-beans-concepts"></a>24.3.1.&nbsp;&#20844;&#20849;&#27010;&#24565;</h3></div></div><div></div></div><p>&#20351;&#29992;dynamic-language-backed bean&#35201;&#32463;&#36807;&#20197;&#19979;&#27493;&#39588;&#65306;</p><div class="orderedlist"><ol type="1"><li><p>&#32534;&#20889;&#38024;&#23545;&#21160;&#24577;&#35821;&#35328;&#28304;&#30721;&#30340;&#27979;&#35797;&#20195;&#30721;&#65288;&#36825;&#26159;&#29702;&#25152;&#24212;&#24403;&#30340;&#20107;&#24773;&#65289;</p></li><li><p><span class="emphasis"><em>&#28982;&#21518;</em></span>&#32534;&#20889;&#21160;&#24577;&#35821;&#35328;&#28304;&#30721; :)</p></li><li><p>
						&#22312;XML&#37197;&#32622;&#25991;&#20214;&#20013;&#20351;&#29992;&#30456;&#24212;&#30340;<tt class="literal">&lt;lang:language/&gt;</tt>&#20803;
&#32032;&#23450;&#20041;dynamic-language-backed bean&#12290;&#24403;&#28982;&#20320;&#20063;&#21487;&#20197;&#20351;&#29992;Spring
API&#65292;&#20197;&#32534;&#31243;&#30340;&#26041;&#24335;&#26469;&#23450;&#20041;---&#26412;&#31456;&#24182;&#19981;&#20250;&#28041;&#21450;&#21040;&#36825;&#31181;&#39640;&#32423;&#30340;&#37197;&#32622;&#26041;&#24335;&#65292;&#20320;&#21487;&#20197;&#30452;&#25509;&#38405;&#35835;&#28304;&#30721;&#26469;&#33719;&#24471;&#30456;&#24212;&#30340;&#25351;&#31034;&#65289;&#12290;&#27880;&#24847;&#36825;&#26159;&#19968;&#20010;&#36845;&#20195;&#30340;&#27493;&#39588;&#12290;&#27599;&#19968;&#20010;&#21160;&#24577;&#35821;&#35328;
&#30340;&#28304;&#25991;&#20214;&#33267;&#23569;&#23545;&#24212;&#19968;&#20010;bean&#23450;&#20041;&#65288;&#21516;&#19968;&#20010;&#21160;&#24577;&#35821;&#35328;&#30340;&#28304;&#25991;&#20214;&#24403;&#28982;&#21487;&#20197;&#22312;&#22810;&#20010;bean&#23450;&#20041;&#20013;&#24341;&#29992;&#65289;&#12290; </p></li></ol></div><p>
				&#21069;&#38754;&#20004;&#27493;&#65288;&#27979;&#35797;&#24182;&#32534;&#20889;&#21160;&#24577;&#35821;&#35328;&#28304;&#25991;&#20214;&#65289;&#36229;&#20986;&#20102;&#26412;&#31456;&#30340;&#33539;&#30068;&#12290;&#35831;&#21442;&#32771;&#20320;&#25152;&#36873;&#21160;&#24577;&#35821;&#35328;&#30456;&#20851;&#30340;&#35821;&#35328;&#35268;&#33539;&#25110;&#32773;&#21442;&#32771;&#25163;&#20876;&#65292;&#24182;&#32487;&#32493;&#24320;&#21457;&#20320;&#30340;&#21160;&#24577;&#35821;&#35328;&#30340;&#28304;&#25991;&#20214;&#12290;&#19981;&#36807;&#20320;&#24212;&#35813;&#39318;&#20808;&#38405;&#35835;&#26412;&#31456;&#30340;&#21097;&#19979;&#37096;&#20998;&#65292;&#22240;&#20026;Spring&#65288;&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;&#65289;&#23545;&#21160;&#24577;&#35821;&#35328;&#28304;&#25991;&#20214;&#30340;&#20869;&#23481;&#26377;&#19968;&#20123;&#65288;&#23567;&#23567;&#30340;&#65289;&#35201;&#27714;&#12290;
			</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="dynamic-language-beans-concepts-xml-language-element"></a>24.3.1.1.&nbsp;<tt class="literal">&lt;lang:language/&gt;</tt> &#20803;&#32032;</h4></div></div><div></div></div><div class="sidebar"><p class="title"><b>XML Schema</b></p><p>
						&#26412;&#31456;&#30340;&#25152;&#26377;&#37197;&#32622;&#26696;&#20363;&#20805;&#20998;&#21033;&#29992;&#20102;Spring 2.0&#20013;&#26032;&#22686;&#30340;&#23545;XML Schema&#30340;&#25903;&#25345;&#12290;
					</p><p>
					&#24403;&#28982;&#20320;&#21487;&#20197;&#32487;&#32493;&#22362;&#25345;&#22312;Spring XML&#37197;&#32622;&#25991;&#20214;&#20013;&#20351;&#29992;&#32769;&#24335;&#30340;&#22522;&#20110;DTD&#30340;&#39564;&#35777;&#26041;&#24335;&#65292;&#32780;&#19981;&#37319;&#29992;XML Schema&#65292;&#20294;&#26159;&#36825;&#26679;&#20320;&#23601;&#20250;&#22833;&#21435;<tt class="literal">&lt;lang:language/&gt;</tt>&#20803;&#32032;&#25552;&#20379;&#30340;&#20415;&#21033;&#12290;&#20363;&#22914;&#65292;Spring&#27979;&#35797;&#22871;&#20214;&#20013;&#26377;&#19968;&#20123;&#20363;&#23376;&#26159;&#38024;&#23545;&#26087;&#39118;&#26684;&#30340;&#37197;&#32622;&#65292;&#36825;&#20123;&#20363;&#23376;&#24182;&#19981;&#38656;&#35201;&#22522;&#20110;XML Schema&#30340;&#39564;&#35777;&#65288;&#38750;&#24120;&#35814;&#32454;&#29978;&#33267;&#20887;&#38271;&#65292;&#32780;&#19988;&#24182;&#27809;&#26377;&#38544;&#34255;&#20219;&#20309;Spring&#30340;&#24213;&#23618;&#23454;&#29616;&#65289;&#12290;</p></div><p>
&#26368;&#21518;&#19968;&#27493;&#21253;&#25324;&#22914;&#20309;&#23450;&#20041;dynamic-language-backed
bean&#23450;&#20041;&#65292;&#27599;&#19968;&#20010;&#35201;&#37197;&#32622;&#30340;bean&#23545;&#24212;&#19968;&#20010;&#23450;&#20041;&#65288;&#36825;&#21644;&#26222;&#36890;&#30340;Javabean&#37197;&#32622;&#27809;&#26377;&#20160;&#20040;&#21306;&#21035;&#65289;&#12290;&#20294;&#26159;&#65292;&#23545;&#20110;&#23481;&#22120;&#20013;&#27599;&#19968;&#20010;&#38656;&#35201;&#23454;&#20363;&#21270;&#21644;&#37197;&#32622;&#30340;&#31867;&#65292;&#26222;&#36890;
&#30340;Javabean&#37197;&#32622;&#38656;&#35201;&#25351;&#23450;&#20840;&#38480;&#23450;&#21517;&#65292;&#23545;&#20110;dynamic language-backed bean&#21017;&#20351;&#29992;<tt class="literal">&lt;lang:language/&gt;</tt>&#20803;&#32032;&#21462;&#32780;&#20195;&#20043;&#12290;
				</p><p>&#27599;&#19968;&#31181;&#25903;&#25345;&#30340;&#35821;&#35328;&#37117;&#26377;&#23545;&#24212;&#30340;<tt class="literal">&lt;lang:language/&gt;</tt>&#20803;&#32032;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">&lt;lang:jruby/&gt;</tt>&#65288;JRuby&#65289;</p></li><li><p><tt class="literal">&lt;lang:groovy/&gt;</tt>&#65288;Groovy&#65289;</p></li><li><p><tt class="literal">&lt;lang:bsh/&gt;</tt>&#65288;BeanShell&#65289;</p></li></ul></div><p>
					&#23545;&#20110;&#37197;&#32622;&#20013;&#21487;&#29992;&#30340;&#30830;&#20999;&#30340;&#23646;&#24615;&#21644;&#23376;&#20803;&#32032;&#21462;&#20915;&#20110;&#20855;&#20307;&#23450;&#20041;bean&#30340;&#35821;&#35328;&#65288;&#21518;&#38754;&#21644;&#29305;&#23450;&#35821;&#35328;&#26377;&#20851;&#30340;&#31456;&#33410;&#20250;&#25581;&#31034;&#20840;&#37096;&#20869;&#24149;&#65289;&#12290;
				</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="dynamic-language-refreshable-beans"></a>24.3.1.2.&nbsp;Refreshable bean</h4></div></div><div></div></div><p>
					Spring&#23545;&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;&#20013;&#26368;&#24341;&#20154;&#27880;&#30446;&#30340;&#20215;&#20540;&#22312;&#20110;&#22686;&#21152;&#20102;&#23545;<i class="firstterm"> 'refreshable bean' </i>&#29305;&#24449;&#30340;&#25903;&#25345;&#12290;
				</p><p>
refreshable bean&#26159;&#19968;&#31181;&#21482;&#26377;&#23569;&#37327;&#37197;&#32622;&#30340;dynamic-language-backed
bean&#12290;dynamic-language-backed bean
&#21487;&#20197;&#30417;&#25511;&#24213;&#23618;&#28304;&#25991;&#20214;&#30340;&#21464;&#21270;&#65292;&#19968;&#26086;&#28304;&#25991;&#20214;&#21457;&#29983;&#25913;&#21464;&#23601;&#21487;&#20197;&#33258;&#21160;&#37325;&#26032;&#21152;&#36733;&#65288;&#20363;&#22914;&#24320;&#21457;&#32773;&#32534;&#36753;&#25991;&#20214;&#24182;&#20445;&#23384;&#20462;&#25913;&#65289;&#12290; </p><p>
&#36825;&#26679;&#23601;&#20801;&#35768;&#24320;&#21457;&#32773;&#22312;&#24212;&#29992;&#31243;&#24207;&#20013;&#37096;&#32626;&#20219;&#24847;&#25968;&#37327;&#30340;&#21160;&#24577;&#35821;&#35328;&#28304;&#25991;&#20214;&#65292;&#24182;&#36890;&#36807;&#37197;&#32622;Spring&#23481;&#22120;&#26469;&#21019;&#24314;&#21160;&#24577;&#35821;&#35328;&#28304;&#25991;&#20214;&#25152;&#25903;&#25345;&#30340;bean&#65288;&#20351;&#29992;&#26412;&#31456;&#25152;&#25551;&#36848;&#30340;&#26426;
&#21046;&#65289;&#12290;&#20197;&#21518;&#22914;&#26524;&#38656;&#27714;&#21457;&#29983;&#25913;&#21464;&#65292;&#25110;&#32773;&#19968;&#20123;&#22806;&#37096;&#22240;&#32032;&#36215;&#20102;&#20316;&#29992;&#65292;&#36825;&#26679;&#23601;&#21487;&#20197;&#31616;&#21333;&#30340;&#32534;&#36753;&#21160;&#24577;&#35821;&#35328;&#28304;&#25991;&#20214;&#65292;&#32780;&#36825;&#20123;&#25991;&#20214;&#20013;&#30340;&#21464;&#21270;&#20250;&#21453;&#23556;&#20026;bean&#30340;&#21464;&#21270;&#12290;&#32780;&#36825;&#20123;&#24037;&#20316;&#19981;
&#38656;&#35201;&#20851;&#38381;&#27491;&#22312;&#36816;&#34892;&#30340;&#24212;&#29992;&#65288;&#25110;&#32773;&#37325;&#26032;&#37096;&#32626;web&#24212;&#29992;&#65289;&#12290;dynamic-language-backed
bean&#33021;&#22815;&#33258;&#25105;&#20462;&#27491;&#65292;&#20174;&#24050;&#25913;&#21464;&#30340;&#21160;&#24577;&#35821;&#35328;&#28304;&#25991;&#20214;&#20013;&#25552;&#21462;&#26032;&#30340;&#29366;&#24577;&#21644;&#36923;&#36753;&#12290; </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>&#27880;&#24847;&#65292;&#35813;&#29305;&#24449;&#40664;&#35748;&#20540;&#20026;<span class="emphasis"><em>off&#65288;&#20851;&#38381;&#65289;</em></span>&#12290;</p></td></tr></tbody></table></div><p>
					&#19979;&#38754;&#35753;&#25105;&#20204;&#30475;&#19968;&#20010;&#20363;&#23376;&#65292;&#20307;&#39564;&#19968;&#19979;&#20351;&#29992;refreshable bean&#26159;&#22810;&#20040;&#23481;&#26131;&#30340;&#20107;&#24773;&#12290;&#39318;&#20808;&#35201;&#21551;&#29992;refreshable bean&#29305;&#24449;&#65292;&#21482;&#38656;&#35201;&#22312;bean&#23450;&#20041;&#30340; <tt class="literal">&lt;lang:language/&gt;</tt>&#20803;&#32032;&#20013;&#25351;&#23450;<span class="emphasis"><em>&#19968;&#20010;</em></span>&#38468;&#21152;&#23646;&#24615;&#12290;&#20551;&#35774;&#25105;&#20204;&#32487;&#32493;&#20351;&#29992;&#21069;&#25991;&#20013;&#30340; <a href="#dynamic-language-a-first-example" title="24.2.&nbsp;&#31532;&#19968;&#20010;&#31034;&#20363;">&#20363;&#23376;</a>&#65292;&#37027;&#20040;&#21482;&#38656;&#35201;&#22312;Spring&#30340;XML&#37197;&#32622;&#25991;&#20214;&#20013;&#36827;&#34892;&#22914;&#19979;&#20462;&#25913;&#20197;&#21551;&#29992;refreshable bean&#65306;
				</p><pre class="programlisting">&lt;beans&gt;

    <i class="lineannotation"><span class="lineannotation">&lt;!-- this bean is now 'refreshable' due to the presence of the 'refresh-check-delay' attribute --&gt;</span></i>
    &lt;lang:groovy id="messenger"
          refresh-check-delay="5000" <i class="lineannotation"><span class="lineannotation">&lt;!-- switches refreshing on with 5 seconds between checks --&gt;</span></i>
          script-source="classpath:Messenger.groovy"&gt;
        &lt;lang:property name="message" value="I Can Do The Frug" /&gt;
    &lt;/lang:groovy&gt;

    &lt;bean id="bookingService" class="x.y.DefaultBookingService"&gt;
        &lt;property name="messenger" ref="messenger" /&gt;
    &lt;/bean&gt;

&lt;/beans&gt;</pre><p>
					&#36825;&#23601;&#26159;&#25152;&#26377;&#20320;&#38656;&#35201;&#20570;&#30340;&#20107;&#24773;&#12290; <tt class="literal">'messenger'</tt> bean&#23450;&#20041;&#20013;&#30340;<tt class="literal">'refresh-check-delay'</tt>&#23646;&#24615;&#25351;&#23450;&#20102;&#21047;&#26032;bean&#30340;&#26102;&#38388;&#38388;&#38548;&#65292;&#22312;&#36825;&#20010;&#26102;&#38388;&#27573;&#20869;&#30340;&#24213;&#23618;&#21160;&#24577;&#35821;&#35328;&#28304;&#25991;&#20214;&#30340;&#20219;&#20309;&#21464;&#21270;&#37117;&#20250;&#21047;&#26032;&#21040;&#23545;&#24212;&#30340;bean&#19978;&#12290;&#36890;&#36807;&#32473;&#35813;&#23646;&#24615;&#36171;&#19968;&#20010;&#36127;&#20540;&#21363;&#21487;&#20851;&#38381;&#35813;&#21047;&#26032;&#34892;&#20026;&#12290;&#27880;&#24847;&#22312;&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#35813;&#21047;&#26032;&#34892;&#20026;&#26159;&#20851;&#38381;&#30340;&#12290;&#22914;&#26524;&#20320;&#19981;&#38656;&#35201;&#35813;&#21047;&#26032;&#34892;&#20026;&#65292;&#26368;&#31616;&#21333;&#30340;&#21150;&#27861;&#23601;&#26159;&#19981;&#35201;&#23450;&#20041;&#35813;&#23646;&#24615;&#12290;
                </p><p>&#36816;&#34892;&#20197;&#19979;&#24212;&#29992;&#31243;&#24207;&#21487;&#20197;&#20307;&#39564;refreshable&#29305;&#24449;&#65306;&#35831;&#25191;&#34892;&#25509;&#19979;&#26469;&#36825;&#27573;&#20195;&#30721;&#20013;&#30340;<span class="emphasis"><em>'jumping-through-hoops-to-pause-the-execution'</em></span>&#23567;&#25226;&#25103;&#12290;<tt class="literal">System.in.read()</tt>&#30340;&#20316;&#29992;&#26159;&#26242;&#20572;&#31243;&#24207;&#30340;&#25191;&#34892;&#65292;&#36825;&#20010;&#26102;&#20505;&#21435;&#20462;&#25913;&#24213;&#23618;&#30340;&#21160;&#24577;&#35821;&#35328;&#28304;&#25991;&#20214;&#65292;&#28982;&#21518;&#31243;&#24207;&#24674;&#22797;&#25191;&#34892;&#30340;&#26102;&#20505;&#35302;&#21457;dynamic-language-backed bean&#30340;&#21047;&#26032;&#12290;</p><pre class="programlisting">import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import org.springframework.scripting.Messenger;

public final class Boot {

    public static void main(final String[] args) throws Exception {

        ApplicationContext ctx = new ClassPathXmlApplicationContext("beans.xml");
        Messenger messenger = (Messenger) ctx.getBean("messenger");
        System.out.println(messenger.getMessage());
        // pause execution while I go off and make changes to the source file...
        System.in.read();
        System.out.println(messenger.getMessage());
    }
}</pre><p>&#20551;&#35774;&#23545;&#20110;&#36825;&#20010;&#20363;&#23376;&#65292;&#25152;&#26377;&#35843;&#29992;<tt class="interfacename">Messenger</tt>&#23454;&#29616;&#20013;<tt class="literal">getMessage()</tt>&#26041;&#27861;&#30340;&#22320;&#26041;&#37117;&#34987;&#20462;&#25913;&#65306;&#27604;&#22914;&#23558;message&#29992;&#24341;&#21495;&#25324;&#36215;&#26469;&#12290;&#19979;&#38754;&#26159;&#25105;&#22312;&#31243;&#24207;&#25191;&#34892;&#26242;&#20572;&#30340;&#26102;&#20505;&#23545;<tt class="filename">Messenger.groovy</tt>&#28304;&#25991;&#20214;&#25152;&#20570;&#30340;&#20462;&#25913;&#65306;</p><pre class="programlisting">package org.springframework.scripting

class GroovyMessenger implements Messenger {

    private String message = "Bingo"

    public String getMessage() {
        // change the implementation to surround the message in quotes
        return "'" + this.message + "'"
    }

    public void setMessage(String message) {
        this.message = message
    }
}</pre><p>
					&#22312;&#36825;&#27573;&#31243;&#24207;&#25191;&#34892;&#30340;&#26102;&#20505;&#65292;&#22312;&#36755;&#20837;&#26242;&#20572;&#20043;&#21069;&#30340;&#36755;&#20986;&#26159;<tt class="computeroutput">I Can Do The Frug</tt>&#12290;&#22312;&#20462;&#25913;&#24182;&#20445;&#23384;&#20102;&#28304;&#25991;&#20214;&#20043;&#21518;&#65292;&#31243;&#24207;&#24674;&#22797;&#25191;&#34892;&#65292;&#20877;&#27425;&#35843;&#29992;dynamic-language-backed <tt class="interfacename">Messenger</tt>&#30340;<tt class="literal">getMessage()</tt>&#26041;&#27861;&#30340;&#32467;&#26524;&#20026;<tt class="computeroutput">'I Can Do The Frug'</tt> &#65288;&#27880;&#24847;&#26032;&#22686;&#30340;&#24341;&#21495;&#65289;&#12290;
				</p><p>
					&#26377;&#19968;&#28857;&#24456;&#37325;&#35201;&#65292;&#22914;&#26524;&#19978;&#36848;&#23545;&#33050;&#26412;&#30340;&#20462;&#25913;&#21457;&#29983;&#22312;<tt class="literal">'refresh-check-delay'</tt>&#20540;
&#30340;&#26102;&#38388;&#33539;&#22260;&#20869;&#24182;&#19981;&#20250;&#35302;&#21457;&#21047;&#26032;&#21160;&#20316;&#12290;&#21516;&#26679;&#37325;&#35201;&#30340;&#26159;&#65292;&#20462;&#25913;&#33050;&#26412;&#24182;&#19981;&#20250;&#39532;&#19978;&#36215;&#20316;&#29992;&#65292;&#32780;&#26159;&#35201;&#21040;&#35813;&#21160;&#24577;&#35821;&#35328;&#23454;&#29616;&#30340;bean&#30340;&#30456;&#24212;&#30340;&#26041;&#27861;&#34987;&#35843;&#29992;&#26102;&#25165;&#26377;&#25928;&#12290;&#21482;&#26377;&#21160;&#24577;&#35821;&#35328;
&#23454;&#29616;&#30340;bean&#30340;&#26041;&#27861;&#34987;&#35843;&#29992;&#30340;&#26102;&#20505;&#25165;&#20250;&#26816;&#26597;&#24213;&#23618;&#28304;&#25991;&#20214;&#26159;&#21542;&#20462;&#25913;&#20102;&#12290;&#21047;&#26032;&#33050;&#26412;&#20135;&#29983;&#30340;&#20219;&#20309;&#24322;&#24120;&#65288;&#20363;&#22914;&#21457;&#29983;&#32534;&#35793;&#38169;&#35823;&#65292;&#25110;&#32773;&#33050;&#26412;&#25991;&#20214;&#34987;&#21024;&#38500;&#20102;&#65289;&#37117;&#20250;&#22312;&#35843;&#29992;&#30340;&#20195;&#30721;&#20013;
&#25243;&#20986;&#19968;&#20010;<span class="emphasis"><em>&#33268;&#21629;</em></span>&#24322;&#24120;&#12290;
				</p><p>
					&#21069;&#38754;&#25551;&#36848;&#30340;refreshable bean&#30340;&#34892;&#20026;&#24182;<span class="emphasis"><em>&#19981;</em></span>&#20250;&#20316;&#29992;&#20110;&#20351;&#29992;<tt class="literal">&lt;lang:inline-script/&gt;</tt>&#20803;&#32032;&#23450;&#20041;&#30340;&#21160;&#24577;&#35821;&#35328;&#28304;&#25991;&#20214;&#65288;&#35831;&#21442;&#32771;<a href="#dynamic-language-beans-inline" title="24.3.1.3.&nbsp;&#20869;&#32622;&#21160;&#24577;&#35821;&#35328;&#28304;&#25991;&#20214;">Section&nbsp;24.3.1.3, &#8220;&#20869;&#32622;&#21160;&#24577;&#35821;&#35328;&#28304;&#25991;&#20214;&#8221;</a>&#36825;&#19968;&#33410;&#65289;&#12290;&#32780;&#19988;&#23427;<span class="emphasis"><em>&#21482;</em></span>&#20316;&#29992;&#20110;&#37027;&#20123;&#21487;&#20197;&#26816;&#27979;&#21040;&#24213;&#23618;&#28304;&#25991;&#20214;&#21457;&#29983;&#25913;&#21464;&#30340;bean&#12290;&#20363;&#22914;&#65292;&#26816;&#26597;&#25991;&#20214;&#31995;&#32479;&#20013;&#30340;&#21160;&#24577;&#35821;&#35328;&#28304;&#25991;&#20214;&#30340;&#26368;&#21518;&#20462;&#25913;&#26085;&#26399;&#12290;
				</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="dynamic-language-beans-inline"></a>24.3.1.3.&nbsp;&#20869;&#32622;&#21160;&#24577;&#35821;&#35328;&#28304;&#25991;&#20214;</h4></div></div><div></div></div><p>
					Spring&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;&#36824;&#25552;&#20379;&#20102;&#30452;&#25509;&#22312;bean&#23450;&#20041;&#20013;&#30452;&#25509;&#23884;&#20837;&#21160;&#24577;&#35821;&#35328;&#28304;&#30721;&#30340;&#21151;&#33021;&#12290;&#36890;&#36807;<tt class="literal">&lt;lang:inline-script/&gt;</tt>&#20803;&#32032;&#65292;&#21487;&#20197;&#22312;Spring&#30340;&#37197;&#32622;&#25991;&#20214;&#20013;&#30452;&#25509;&#23450;&#20041;&#21160;&#24577;&#35821;&#35328;&#28304;&#25991;&#20214;&#12290;&#19979;&#38754;&#30340;&#20363;&#23376;&#25110;&#35768;&#21487;&#20197;&#23558;&#23884;&#20837;&#33050;&#26412;&#29305;&#24449;&#34920;&#36798;&#30340;&#26356;&#28165;&#26970;&#65306;
		        </p><pre class="programlisting">&lt;lang:groovy id="messenger"&gt;
    &lt;lang:inline-script&gt;
package org.springframework.scripting.groovy;

import org.springframework.scripting.Messenger

class GroovyMessenger implements Messenger {

    String message
}
    &lt;/lang:inline-script&gt;
    &lt;lang:property name="message" value="I Can Do The Frug" /&gt;
&lt;/lang:groovy&gt;</pre><p>
					&#30452;&#25509;&#22312;Spring&#30340;&#37197;&#32622;&#25991;&#20214;&#20013;&#23450;&#20041;&#21160;&#24577;&#35821;&#35328;&#28304;&#30721;&#30340;&#26159;&#21542;&#26159;&#26368;&#20339;&#23454;&#36341;&#36825;&#20010;&#38382;&#39064;&#20808;&#25918;&#22312;&#19968;&#36793;&#65292;<tt class="literal">&lt;lang:inline-script/&gt;</tt>&#20803;&#32032;&#22312;&#26576;&#20123;&#22330;&#26223;&#19979;&#36824;&#26159;&#30456;&#24403;&#26377;&#29992;&#30340;&#12290;&#20363;&#22914;&#65292;&#32473;Spring MVC&#30340;<tt class="interfacename">Controller</tt>&#24555;&#36895;&#28155;&#21152;&#19968;&#20010;Spring <tt class="interfacename">Validator</tt>&#23454;&#29616;&#12290;&#22914;&#26524;&#37319;&#29992;&#20869;&#32622;&#28304;&#30721;&#30340;&#26041;&#24335;&#21482;&#38656;&#35201;&#29255;&#21051;&#26102;&#38388;&#23601;&#21487;&#20197;&#25630;&#23450;&#65288;&#35831;&#21442;&#35265;<a href="#dynamic-language-scenarios-validators" title="24.4.2.&nbsp;Validator&#30340;&#33050;&#26412;&#21270;">Section&nbsp;24.4.2, &#8220;Validator&#30340;&#33050;&#26412;&#21270;&#8221;</a>&#36825;&#19968;&#33410;&#30340;&#31034;&#20363;&#65289;&#12290;
				</p><p>
					&#19979;&#38754;&#36825;&#20010;&#20363;&#23376;&#26159;&#19968;&#20010;&#22522;&#20110;JRuby&#30340;bean&#65292;&#36825;&#20010;&#20363;&#23376;&#30452;&#25509;&#22312;Spring&#30340;XML&#37197;&#32622;&#25991;&#20214;&#20013;&#23450;&#20041;&#20102;&#28304;&#30721;&#65292;&#24182;&#20351;&#29992;&#20102;<tt class="literal">inline:</tt> &#31526;&#21495;&#12290;&#65288;&#27880;&#24847;&#20854;&#20013;&#20351;&#29992; &amp;lt;&#31526;&#21495;&#26469;&#34920;&#31034;<tt class="literal">'&lt;'</tt>&#23383;&#31526;&#12290;&#36825;&#20010;&#20363;&#23376;&#20013;&#22914;&#26524;&#22312;&#20869;&#32622;&#28304;&#30721;&#21608;&#22260;&#23450;&#20041;&#19968;&#20010;<tt class="literal">&lt;![CDATA[]]&gt;</tt>&#23601;&#26356;&#22909;&#20102;&#12290;&#65289;
				</p><pre class="programlisting">&lt;lang:jruby id="messenger" script-interfaces="org.springframework.scripting.Messenger"&gt;
    &lt;lang:inline-script&gt;
require 'java'

include_class 'org.springframework.scripting.Messenger'

class RubyMessenger &amp;lt; Messenger

 def setMessage(message)
  @@message = message
 end

 def getMessage
  @@message
 end
 
end
    &lt;/lang:inline-script&gt;
    &lt;lang:property name="message" value="Hello World!" /&gt;
&lt;/lang:jruby&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="dynamic-language-beans-ctor-injection"></a>24.3.1.4.&nbsp;&#29702;&#35299;dynamic-language-backed bean&#19978;&#19979;&#25991;&#20013;&#30340;&#26500;&#36896;&#22120;&#27880;&#20837;</h4></div></div><div></div></div><p>
					&#20851;&#20110;Spring&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;&#26377;&#19968;&#20010;&#35201;&#28857;&#24517;&#39035;&#24341;&#36215;&#27880;&#24847;&#65306;&#30446;&#21069;&#23545;dynamic-language-backed bean&#36824;&#19981;&#21487;&#33021;&#25552;&#20379;&#26500;&#36896;&#22120;&#21442;&#25968;&#30340;&#25903;&#25345;&#65288;&#20063;&#23601;&#26159;&#35828;&#23545;&#20110;dynamic-language-backed bean&#30340;&#26500;&#36896;&#22120;&#27880;&#20837;&#26080;&#25928;&#65289;&#12290;
					&#21482;&#26159;&#20026;&#20102;&#23558;&#26500;&#36896;&#22120;&#21644;&#23646;&#24615;&#30340;&#29305;&#27530;&#22788;&#29702;100&#65285;&#35828;&#28165;&#26970;&#65292;&#19979;&#38754;&#28151;&#21512;&#20102;&#20195;&#30721;&#21644;&#37197;&#32622;&#30340;&#20363;&#23376;&#26159;&#26080;&#27861;&#36816;&#20316;&#30340;&#12290;
				</p><pre class="programlisting">// from the file 'Messenger.groovy'
package org.springframework.scripting.groovy;

import org.springframework.scripting.Messenger

class GroovyMessenger implements Messenger {

    GroovyMessenger() {}

    // this constructor is not available for Constructor Injection
    GroovyMessenger(String message) {
        this.message = message;
    }

    String message

    String anotherMessage
}</pre><pre class="programlisting">&lt;lang:groovy id="badMessenger"
    script-source="classpath:Messenger.groovy"&gt;

    <i class="lineannotation"><span class="lineannotation">&lt;!-- this next constructor argument will *not* be injected into the <tt class="classname">GroovyMessenger</tt> --&gt;</span></i>
    <i class="lineannotation"><span class="lineannotation">&lt;!--     in fact, this isn't even allowed according to the schema --&gt;</span></i>
    &lt;constructor-arg value="<i class="lineannotation"><span class="lineannotation"><span class="bold"><b>This will *not* work</b></span></span></i>" /&gt;
    
    <i class="lineannotation"><span class="lineannotation">&lt;!-- <span class="bold"><b>only</b></span> property values are injected into the dynamic-language-backed object --&gt;</span></i>
    &lt;lang:property name="anotherMessage" value="Passed straight through to the dynamic-language-backed object" /&gt;

&lt;/lang&gt;</pre><p>
				&#23454;&#38469;&#19978;&#36825;&#31181;&#23616;&#38480;&#24615;&#24182;&#27809;&#26377;&#34920;&#29616;&#30340;&#37027;&#20040;&#26126;&#26174;&#65292;&#22240;&#20026;setter&#27880;&#20837;&#30340;&#26041;&#24335;&#26159;&#24320;&#21457;&#20154;&#21592;&#26356;&#38738;&#30544;&#30340;&#26041;&#24335;&#65288;&#33267;&#20110;&#21738;&#31181;&#27880;&#20837;&#26041;&#24335;&#26356;&#22909;&#65292;&#36825;&#20010;&#35805;&#39064;&#25105;&#20204;&#36824;&#26159;&#30041;&#21040;&#20197;&#21518;&#20877;&#35752;&#35770;&#21543;&#65289;&#12290;
				</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="dynamic-language-beans-jruby"></a>24.3.2.&nbsp;JRuby beans</h3></div></div><div></div></div><div class="sidebar"><p class="title"><b>JRuby&#30340;&#20381;&#36182;&#24211;</b></p><p>
					Spring&#25903;&#25345;&#30340;JRuby&#33050;&#26412;&#38656;&#35201;&#22312;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#30340;classpath&#20013;&#28155;&#21152;&#20197;&#19979;&#24211;&#25991;&#20214;&#12290;Spring&#22312;&#23545;JRuby&#33050;&#26412;&#30340;&#25903;&#25345;&#30340;&#24320;&#21457;&#36807;&#31243;&#20013;&#27491;&#22909;&#36873;&#25321;&#20102;&#20381;&#36182;&#24211;&#30340;&#26576;&#20010;&#29305;&#23450;&#29256;&#26412;&#65292;&#20320;&#21487;&#20197;&#36873;&#25321;&#29256;&#26412;&#30456;&#23545;&#25110;&#26087;&#25110;&#26032;&#30340;&#20381;&#36182;&#24211;&#65289;&#12290;
			    </p><div class="itemizedlist"><ul type="disc"><li><p><tt class="filename">jruby.jar</tt></p></li><li><p><tt class="filename">cglib-nodep-2.1_3.jar</tt></p></li></ul></div></div><p>&#26469;&#33258;JRuby&#23448;&#26041;&#32593;&#39029;...</p>&#8220;<span class="quote">
				<span class="emphasis"><em>JRuby&#26159;Ruby&#35821;&#35328;&#30340;&#32431;Java&#23454;&#29616;&#12290;
				</em></span>
			</span>&#8221;<p>
Spring&#19968;&#30452;&#20197;&#26469;&#30340;&#23815;&#23578;&#30340;&#21746;&#23398;&#26159;&#25552;&#20379;&#36873;&#25321;&#24615;&#65292;&#22240;&#27492;Spring&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;&#29305;&#24449;&#20063;&#25903;&#25345;&#20351;&#29992;JRuby&#35821;&#35328;&#23450;&#20041;&#30340;bean&#12290;JRuby&#35821;&#35328;&#24403;&#28982;&#22522;&#20110;
Ruby&#35821;&#35328;&#65292;&#25903;&#25345;&#20869;&#32622;&#27491;&#21017;&#34920;&#36798;&#24335;&#65292;&#22359;&#65288;&#38381;&#21253;&#65289;&#65292;&#20197;&#21450;&#20854;&#20182;&#24456;&#22810;&#29305;&#24449;&#65292;&#36825;&#20123;&#29305;&#24449;&#23545;&#20110;&#26576;&#20123;&#22495;&#38382;&#39064;&#25552;&#20379;&#20102;&#35299;&#20915;&#26041;&#26696;&#65292;&#21487;&#20197;&#35753;&#24320;&#21457;&#21464;&#30340;&#26356;&#23481;&#26131;&#12290; </p><p>
				Spring&#23545;JRuby&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;&#30340;&#26377;&#36259;&#30340;&#22320;&#26041;&#22312;&#20110;&#65306;&#23545;&#20110;<tt class="literal">&lt;lang:ruby&gt;</tt>&#20803;&#32032;<tt class="literal">'script-interfaces'</tt>&#23646;&#24615;&#25351;&#23450;&#30340;&#25509;&#21475;&#65292;Spring&#20026;&#23427;&#20204;&#21019;&#24314;&#20102;JDK&#21160;&#24577;&#20195;&#29702;&#23454;&#29616;&#65288;&#36825;&#20063;&#26159;&#20320;&#20351;&#29992;JRuby&#23454;&#29616;&#30340;bean,&#24517;&#39035;&#20026;&#35813;&#23646;&#24615;&#25351;&#23450;&#33267;&#23569;&#19968;&#20010;&#25509;&#21475;&#24182;&#32534;&#31243;&#23454;&#29616;&#30340;&#21407;&#22240;&#65289;&#12290;
			</p><p>
				&#39318;&#20808;&#25105;&#20204;&#30475;&#19968;&#20010;&#20351;&#29992;&#22522;&#20110;JRuby&#30340;bean&#30340;&#21487;&#24037;&#20316;&#30340;&#23436;&#25972;&#31034;&#20363;&#12290;&#19979;&#38754;&#26159;&#20351;&#29992;JRuby&#23454;&#29616;&#30340;<tt class="interfacename">Messenger</tt>&#25509;&#21475;&#65288;&#26412;&#31456;&#20043;&#21069;&#23450;&#20041;&#36807;&#20102;&#65292;&#20026;&#20102;&#26041;&#20415;&#20320;&#38405;&#35835;&#65292;&#19979;&#38754;&#37325;&#22797;&#23450;&#20041;&#35813;&#25509;&#21475;&#65289;&#12290;
			</p><pre class="programlisting">package org.springframework.scripting;

public interface Messenger {

    String getMessage();
}</pre><pre class="programlisting">require 'java'

class RubyMessenger
    include org.springframework.scripting.Messenger

    def setMessage(message)
        @@message = message
    end

    def getMessage
        @@message
    end
end

# this last line is not essential (but see below)
RubyMessenger.new</pre><p>
				&#19979;&#38754;&#26159;Spring&#30340;XML&#37197;&#32622;&#65292;&#20854;&#20869;&#23481;&#23450;&#20041;&#20102;<tt class="classname">RubyMessenger</tt>(JRuby bean)&#30340;&#23454;&#20363;&#12290;
			</p><pre class="programlisting">&lt;lang:jruby id="messageService"
            script-interfaces="org.springframework.scripting.Messenger"
            script-source="classpath:RubyMessenger.rb"&gt;
    
    &lt;lang:property name="message" value="Hello World!" /&gt;

&lt;/lang:jruby&gt;</pre><p>
				&#27880;&#24847;JRuby&#28304;&#30721;&#30340;&#26368;&#21518;&#19968;&#34892;&#65288;<tt class="literal">'RubyMessenger.new'</tt>&#65289;&#12290;
&#22312;Spring&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;&#30340;&#19978;&#19979;&#25991;&#20043;&#19979;&#20351;&#29992;JRuby&#30340;&#26102;&#20505;&#65292;&#25105;&#20204;&#40723;&#21169;&#20320;&#23454;&#20363;&#21270;&#24182;&#36820;&#22238;&#19968;&#20010;JRuby&#31867;&#30340;&#23454;&#20363;&#12290;&#22914;&#26524;&#20320;&#25171;&#31639;&#23558;&#20854;&#20316;&#20026;&#20320;&#30340;JRuby&#28304;&#30721;&#30340;
&#25191;&#34892;&#32467;&#26524;&#65292;&#24182;&#23558;&#20854;&#20316;&#20026;dynamic-language-backed
bean&#65292;&#21482;&#38656;&#35201;&#31616;&#21333;&#30340;&#23454;&#20363;&#21270;&#20320;&#30340;JRuby&#31867;&#23601;&#21487;&#20197;&#36798;&#21040;&#36825;&#26679;&#30340;&#25928;&#26524;&#65292;&#22914;&#19979;&#38754;&#28304;&#25991;&#20214;&#30340;&#26368;&#21518;&#19968;&#34892;&#65306; </p><pre class="programlisting">require 'java'

include_class 'org.springframework.scripting.Messenger'

# class definition same as above...

# instantiate and return a new instance of the RubyMessenger class
RubyMessenger.new</pre><p>
&#22914;&#26524;&#20320;&#24536;&#35760;&#20102;&#36825;&#28857;&#65292;&#24182;&#19981;&#20195;&#34920;&#20197;&#21069;&#25152;&#26377;&#30340;&#21162;&#21147;&#30333;&#36153;&#20102;&#65292;&#19981;&#36807;Spring&#20250;&#20197;&#21453;&#23556;&#30340;&#26041;&#24335;&#25195;&#25551;&#20320;&#30340;JRuby&#30340;&#31867;&#22411;&#34920;&#31034;&#65292;&#24182;&#25214;&#20986;&#19968;&#20010;&#31867;&#65292;&#28982;&#21518;&#36827;&#34892;&#23454;&#20363;&#21270;&#12290;&#36825;&#20010;&#36807;
&#31243;&#30340;&#36895;&#24230;&#26159;&#30456;&#24403;&#24555;&#30340;&#65292;&#21487;&#33021;&#20320;&#27704;&#36828;&#37117;&#19981;&#20250;&#24863;&#35273;&#21040;&#24310;&#36831;&#65292;&#20294;&#26159;&#21482;&#38656;&#35201;&#35937;&#21069;&#38754;&#30340;&#20363;&#23376;&#37027;&#26679;&#22312;&#20320;&#30340;JRuby&#30340;&#33050;&#26412;&#26368;&#21518;&#28155;&#21152;&#19968;&#34892;&#23601;&#21487;&#20197;&#36991;&#20813;&#36825;&#26679;&#30340;&#20107;&#24773;&#65292;&#20309;&#20048;&#32780;&#19981;&#20026;&#21602;&#65311;
&#22914;&#26524;&#19981;&#25552;&#20379;&#36825;&#19968;&#34892;&#65292;&#25110;&#32773;&#22914;&#26524;Spring&#22312;&#20320;&#30340;JRuby&#33050;&#26412;&#20013;&#26080;&#27861;&#25214;&#21040;&#21487;&#20197;&#23454;&#20363;&#21270;&#30340;&#31867;&#65292;JRuby&#30340;&#35299;&#37322;&#22120;&#25191;&#34892;&#28304;&#30721;&#32467;&#26463;&#21518;&#20250;&#31435;&#21051;&#25243;&#20986;<tt class="classname">ScriptCompilationException</tt>&#24322;
&#24120;&#12290;&#19979;&#38754;&#30340;&#20195;&#30721;&#20013;&#21487;&#20197;&#31435;&#21051;&#21457;&#29616;&#19968;&#20123;&#20851;&#38190;&#30340;&#25991;&#26412;&#20449;&#24687;&#65292;&#36825;&#20123;&#25991;&#26412;&#20449;&#24687;&#26631;&#35782;&#20102;&#23548;&#33268;&#24322;&#24120;&#30340;&#26681;&#26412;&#21407;&#22240;&#65288;&#22914;&#26524;Spring&#23481;&#22120;&#22312;&#21019;&#24314;&#30340;
dynamic-language-backed bean&#30340;&#26102;&#20505;&#25243;&#20986;&#20197;&#19979;&#24322;&#24120;,
&#22312;&#30456;&#24212;&#30340;&#24322;&#24120;&#22534;&#26632;&#20013;&#20250;&#21253;&#25324;&#20197;&#19979;&#25991;&#26412;&#20449;&#24687;&#65292;&#24076;&#26395;&#36825;&#20123;&#20449;&#24687;&#33021;&#22815;&#24110;&#21161;&#20320;&#26356;&#23481;&#26131;&#23450;&#20301;&#24182;&#30699;&#27491;&#38382;&#39064;&#65289;: </p><tt class="computeroutput">org.springframework.scripting.ScriptCompilationException: Compilation of JRuby script returned ''</tt><p>
&#20026;&#20102;&#36991;&#20813;&#36825;&#31181;&#38169;&#35823;&#65292;&#23558;&#20320;&#25171;&#31639;&#29992;&#20316;JRuby-dynamic-language-backed
bean(&#22914;&#21069;&#25991;&#25152;&#31034;)&#30340;&#31867;&#36827;&#34892;&#23454;&#20363;&#21270;&#65292;&#24182;&#23558;&#20854;&#36820;&#22238;&#12290;&#35831;&#27880;&#24847;&#22312;JRuby&#33050;&#26412;&#20013;&#23454;&#38469;&#19978;&#21487;&#20197;&#23450;&#20041;&#20219;&#24847;&#25968;&#30446;&#30340;&#31867;&#21644;&#23545;&#35937;&#65292;&#37325;&#35201;&#30340;&#26159;&#25972;&#20010;&#28304;&#25991;&#20214;&#24212;&#35813;&#36820;&#22238;&#19968;&#20010;&#23545;&#35937;
(&#29992;&#20110;Spring&#30340;&#37197;&#32622;)&#12290; </p><p>
				<a href="#dynamic-language-scenarios" title="24.4.&nbsp;&#22330;&#26223;">Section&nbsp;24.4, &#8220;&#22330;&#26223;&#8221;</a> &#36825;&#19968;&#33410;&#25552;&#20379;&#20102;&#19968;&#20123;&#22330;&#26223;&#65292;&#22312;&#36825;&#20123;&#22330;&#26223;&#19979;&#20063;&#35768;&#20320;&#20250;&#25171;&#31639;&#37319;&#29992;&#22522;&#20110;JRuby&#30340;bean.
			</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="dynamic-language-beans-groovy"></a>24.3.3.&nbsp;Groovy beans</h3></div></div><div></div></div><div class="sidebar"><p class="title"><b>Groovy&#20381;&#36182;&#24211;</b></p><p>
					Spring&#25903;&#25345;&#30340;Groovy&#33050;&#26412;&#38656;&#35201;&#22312;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#30340;classpath&#20013;&#28155;&#21152;&#20197;&#19979;jar&#21253;&#12290;
			    </p><div class="itemizedlist"><ul type="disc"><li><p><tt class="filename">groovy-1.0.jar</tt></p></li><li><p><tt class="filename">asm-2.2.2.jar</tt></p></li><li><p><tt class="filename">antlr-2.7.6.jar</tt></p></li></ul></div></div><p>&#26469;&#33258;Groovy&#23448;&#26041;&#32593;&#39029;...</p>&#8220;<span class="quote">
				<span class="emphasis"><em>Groovy&#26159;&#19968;&#38376;&#38024;&#23545;Java 2&#24179;&#21488;&#30340;&#25935;&#25463;&#30340;&#21160;&#24577;&#35821;&#35328;&#65292;Python&#12289;Ruby&#12289;Smalltalk&#36825;&#31867;&#35821;&#35328;&#20013;&#19981;&#23569;&#21463;&#20154;&#21916;&#29233;&#30340;&#29305;&#24449;&#37117;&#34987;&#22218;&#25324;&#20854;&#20013;&#65292;&#24182;&#20197;Java&#39118;&#26684;&#30340;&#35821;&#27861;&#23637;&#29616;&#32473;Java&#24320;&#21457;&#32773;&#12290;
				</em></span>
			</span>&#8221;<p>
				&#22914;&#26524;&#20320;&#26159;&#20197;&#20174;&#19978;&#21040;&#19979;&#30340;&#26041;&#24335;&#19968;&#30452;&#35835;&#21040;&#36825;&#19968;&#31456;&#65292;&#20320;&#24212;&#35813;&#24050;&#32463;&#30475;&#21040;&#20102;&#19968;&#20010;Groovy-dynamic-language-backed bean&#30340;<a href="#dynamic-language-a-first-example" title="24.2.&nbsp;&#31532;&#19968;&#20010;&#31034;&#20363;">&#31034;&#20363;</a>&#12290;&#25509;&#19979;&#26469;&#25105;&#20204;&#26469;&#30475;&#21478;&#22806;&#19968;&#20010;&#20363;&#23376;(&#36824;&#26159;&#36873;&#33258;Spring&#30340;&#27979;&#35797;&#22871;&#20214;)&#12290;
			</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>Groovy&#38656;&#35201;1.4&#20197;&#19978;&#30340;JDK&#12290;</p></td></tr></tbody></table></div><pre class="programlisting">package org.springframework.scripting;

public interface Calculator {

    int add(int x, int y);
}</pre><p>
				&#19979;&#38754;&#26159;&#20351;&#29992;Groovy&#23454;&#29616;&#30340;<tt class="interfacename">Calculator</tt>&#25509;&#21475;&#12290;
            </p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">// from the file 'calculator.groovy'</span></i>
package org.springframework.scripting.groovy

class GroovyCalculator implements Calculator {

    int add(int x, int y) {
        x + y
    }
}</pre><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">&lt;-- from the file 'beans.xml' --&gt;</span></i>
&lt;beans&gt;
    &lt;lang:groovy id="calculator" script-source="classpath:calculator.groovy"/&gt;
&lt;/beans&gt;</pre><p>
				&#26368;&#21518;&#26159;&#19968;&#20010;&#23567;&#24212;&#29992;&#31243;&#24207;&#65292;&#29992;&#20110;&#27979;&#35797;&#19978;&#38754;&#30340;&#37197;&#32622;&#12290;
			</p><pre class="programlisting">package org.springframework.scripting;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class Main {

    public static void Main(String[] args) {
        ApplicationContext ctx = new ClassPathXmlApplicationContext("beans.xml");
        Calculator calc = (Calculator) ctx.getBean("calculator");
        System.out.println(calc.add(2, 8));
    }
}</pre><p>
				&#36816;&#34892;&#19978;&#38754;&#30340;&#31243;&#24207;&#26368;&#32456;&#36755;&#20986;&#32467;&#26524;&#65288;&#27627;&#26080;&#30097;&#38382;&#65289;&#20026;<tt class="computeroutput">10</tt>&#12290;&#65288;&#20196;&#20154;&#28608;&#21160;&#30340;&#20363;&#23376;&#65292;&#26159;&#21543;&#65311;&#35760;&#20303;&#25105;&#20204;&#30340;&#30446;&#30340;&#26159;&#20026;&#20102;&#38416;&#36848;&#27010;&#24565;&#12290;&#26356;&#22797;&#26434;&#30340;&#20363;&#23376;&#35831;&#21442;&#32771;&#21160;&#24577;&#35821;&#35328;&#30340;&#31034;&#20363;&#39033;&#30446;&#65292;&#25110;&#32773;&#21442;&#32771;&#26412;&#31456;&#26368;&#21518;&#21015;&#20986;&#30340;<a href="#dynamic-language-scenarios" title="24.4.&nbsp;&#22330;&#26223;">Section&nbsp;24.4, &#8220;&#22330;&#26223;&#8221;</a>&#65289;&#12290;
			</p><p>
				&#26377;&#19968;&#28857;&#24456;&#37325;&#35201;,&#37027;&#23601;&#26159;&#20320;<span class="emphasis"><em>&#19981;&#35201;</em></span> &#22312;&#19968;&#20010;Groovy&#28304;&#25991;&#20214;&#20013;&#23450;&#20041;&#20004;&#20010;&#20197;&#19978;&#30340;class&#12290;&#34429;&#28982;Groovy&#20801;&#35768;&#36825;&#26679;&#20570;&#65292;&#20294;&#26159;&#26159;&#19968;&#20010;&#24456;&#19981;&#22909;&#30340;&#23454;&#36341;&#65292;&#20026;&#20102;&#20445;&#25345;&#19968;&#33268;&#24615;&#65292;&#20320;&#24212;&#35813;&#23562;&#37325;&#26631;&#20934;&#30340;Java&#35268;&#33539;&#65288;&#33267;&#23569;&#20316;&#32773;&#26159;&#36825;&#26679;&#35748;&#20026;&#30340;&#65289;&#65306;&#19968;&#20010;&#28304;&#25991;&#20214;&#21482;&#23450;&#20041;&#19968;&#20010;(public)&#31867;&#12290;
			</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="dynamic-language-beans-groovy-customizer"></a>24.3.3.1.&nbsp;&#36890;&#36807;&#22238;&#35843;&#23450;&#21046;Groovy&#23545;&#35937;</h4></div></div><div></div></div><p>
					<tt class="interfacename">GroovyObjectCustomizer</tt>&#25509;&#21475;&#23454;&#38469;&#19978;&#26159;&#19968;&#20010;&#22238;&#35843;&#65292;
          &#23427;&#20801;&#35768;&#20320;&#23558;&#38468;&#23646;&#30340;&#21019;&#24314;&#36923;&#36753;&#28155;&#21152;&#21040;&#21019;&#24314;Groovy bean&#30340;&#36807;&#31243;&#20013;&#12290;
          &#20363;&#22914;&#65292;&#35813;&#25509;&#21475;&#30340;&#23454;&#29616;&#33021;&#22815;&#35843;&#29992;&#20219;&#20309;&#38656;&#35201;&#30340;&#21021;&#22987;&#21270;&#26041;&#27861;&#65292;
          &#25110;&#32773;&#35774;&#32622;&#19968;&#20123;&#32570;&#30465;&#30340;&#23646;&#24615;&#20540;&#65292;&#25110;&#32773;&#25351;&#23450;&#33258;&#23450;&#20041;&#30340;<tt class="classname">MetaClass</tt>&#12290;
				</p><pre class="programlisting">public interface GroovyObjectCustomizer {

   void customize(GroovyObject goo);
}</pre><p>
				  Spring&#26694;&#26550;&#23558;&#20250;&#21021;&#22987;&#21270;Groovy bean&#31034;&#20363;&#65292;&#28982;&#21518;&#23558;&#24050;&#32463;&#21019;&#24314;&#30340;<tt class="interfacename">GroovyObject</tt>
				  &#23545;&#35937;&#20256;&#21040;&#21040;&#25351;&#23450;&#30340;<tt class="interfacename">GroovyObjectCustomizer</tt>&#25509;&#21475;&#12290;
				  &#36890;&#36807;<tt class="interfacename">GroovyObject</tt>&#20320;&#21487;&#20197;&#20570;&#20219;&#24847;&#24819;&#20570;&#30340;&#20107;&#24773;&#12290;&#22823;&#37096;&#20998;
				  &#20154;&#20063;&#35768;&#37117;&#24819;&#36890;&#36807;&#35813;&#22238;&#35843;&#20256;&#20837;&#19968;&#20010;&#23450;&#21046;&#30340;<tt class="classname">MetaClass</tt>&#65292;&#19979;&#38754;&#20320;&#23558;&#30475;&#21040;&#19968;&#20010;&#36825;&#26679;&#30340;&#20363;&#23376;&#12290;
				</p><pre class="programlisting">public final class SimpleMethodTracingCustomizer implements GroovyObjectCustomizer {

   public void customize(GroovyObject goo) {
      DelegatingMetaClass metaClass = new DelegatingMetaClass(goo.getMetaClass()) {

         public Object invokeMethod(Object object, String methodName, Object[] arguments) {
            System.out.println("Invoking '" + methodName + "'.");
            return super.invokeMethod(object, methodName, arguments);
         }
      };
      metaClass.initialize();
      goo.setMetaClass(metaClass);
   }
}</pre><p>
				&#23436;&#25972;&#35752;&#35770;Groovy&#30340;&#20803;&#32534;&#31243;&#24050;&#32463;&#36229;&#20986;&#20102;&#26412;&#21442;&#32771;&#25163;&#20876;&#30340;&#33539;&#30068;&#12290;&#24314;&#35758;&#30452;&#25509;&#26597;&#38405;Groovy&#21442;&#32771;&#25163;&#20876;&#30340;&#26377;&#20851;&#31456;&#33410;&#65292;
				&#25110;&#32773;&#36890;&#36807;&#22312;&#32447;&#26597;&#35810;&#65306;&#30446;&#21069;&#26377;&#22823;&#37327;&#30340;&#20851;&#20110;&#36825;&#26041;&#38754;&#30340;&#25991;&#31456;&#12290;
				&#22914;&#26524;&#20320;&#20351;&#29992;Spring 2.0&#30340;&#21629;&#21517;&#31354;&#38388;&#25903;&#25345;&#21151;&#33021;&#65292;&#20351;&#29992;<tt class="interfacename">GroovyObjectCustomizer</tt>&#23558;&#20250;&#21464;&#24471;&#38750;&#24120;&#31616;&#21333;&#12290;
				</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">&lt;!-- define the <tt class="interfacename">GroovyObjectCustomizer</tt> just like any other bean --&gt;</span></i>
&lt;bean id="tracingCustomizer" class="example.SimpleMethodTracingCustomizer" /&gt;

   <i class="lineannotation"><span class="lineannotation">&lt;!-- ... and plug it into the desired Groovy bean via the '<tt class="literal">customizer-ref</tt>' attribute --&gt;</span></i>
   &lt;lang:groovy id="calculator"
      script-source="classpath:org/springframework/scripting/groovy/Calculator.groovy"
      customizer-ref="tracingCustomizer" /&gt;</pre><p>
				&#22914;&#26524;&#20320;&#27809;&#26377;&#20351;&#29992;Spring 2.0&#30340;&#21629;&#21517;&#31354;&#38388;&#25903;&#25345;&#65292;&#20320;&#20173;&#28982;&#21487;&#20197;&#20351;&#29992;<tt class="interfacename">GroovyObjectCustomizer</tt>&#30340;&#21151;&#33021;&#12290;
				</p><pre class="programlisting">&lt;bean id="calculator" class="org.springframework.scripting.groovy.GroovyScriptFactory"&gt;
      &lt;constructor-arg value="classpath:org/springframework/scripting/groovy/Calculator.groovy"/&gt;
      <i class="lineannotation"><span class="lineannotation">&lt;!-- define the <tt class="interfacename">GroovyObjectCustomizer</tt> (as an inner bean) --&gt;</span></i>
      &lt;constructor-arg&gt;
         &lt;bean id="tracingCustomizer" class="example.SimpleMethodTracingCustomizer" /&gt;
      &lt;/constructor-arg&gt;
&lt;/bean&gt;

&lt;bean class="org.springframework.scripting.support.ScriptFactoryPostProcessor"/&gt;</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="dynamic-language-beans-bsh"></a>24.3.4.&nbsp;BeanShell beans</h3></div></div><div></div></div><div class="sidebar"><p class="title"><b>BeanShell&#20381;&#36182;&#24211;</b></p><p>
					Spring&#25903;&#25345;&#30340;BeanShell&#33050;&#26412;&#38656;&#35201;&#22312;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#30340;classpath&#20013;&#28155;&#21152;&#20197;&#19979;&#24211;&#25991;&#20214;&#12290;
			    </p><div class="itemizedlist"><ul type="disc"><li><p><tt class="filename">bsh-2.0b4.jar</tt></p></li><li><p><tt class="filename">cglib-nodep-2.1_3.jar</tt></p></li></ul></div><p>
                &#25152;&#26377;&#36825;&#20123;&#24211;&#25991;&#20214;&#37117;&#21487;&#20197;&#22312;Spring-with-dependecies&#21457;&#24067;&#21253;&#20013;&#33719;&#21462;&#65288;&#24403;&#28982;&#36825;&#20123;&#22312;&#32593;&#19978;&#20063;&#21487;&#20197;&#20813;&#36153;&#33719;&#24471;&#65289;&#12290;
                </p></div><p>&#26469;&#33258;BeanShell&#23448;&#26041;&#32593;&#39029;...</p>&#8220;<span class="quote">
				<span class="emphasis"><em>BeanShell&#26159;&#19968;&#20010;&#29992;Java&#23454;&#29616;&#30340;&#23567;&#22411;&#20813;&#36153;&#23884;&#20837;&#24335;Java&#28304;&#30721;&#35299;&#37322;&#22120;&#65292;&#25903;&#25345;&#21160;&#24577;&#35821;&#35328;&#29305;&#24449;&#12290;BeanShell&#21160;&#24577;&#25191;&#34892;&#26631;&#20934;&#30340;Java&#35821;&#27861;&#65292;&#24182;&#36827;&#34892;&#20102;&#25193;&#23637;&#65292;&#24102;&#26469;&#19968;&#20123;&#24120;&#35265;&#30340;&#33050;&#26412;&#30340;&#20415;&#21033;&#65292;&#22914;&#22312;Perl&#21644;JavaScript&#20013;&#30340;&#23485;&#26494;&#31867;&#22411;&#12289;&#21629;&#20196;&#12289;&#26041;&#27861;&#38381;&#21253;&#31561;&#31561;&#12290;</em></span>
			</span>&#8221;<p>
				&#21644;Groovy&#30456;&#27604;&#65292;&#22522;&#20110;BeanShell&#30340;bean&#23450;&#20041;&#38656;&#35201;&#30340;&#37197;&#32622;&#35201;&#22810;&#19968;&#20123;&#12290;Spring&#23545;BeanShell&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;&#30340;&#26377;&#36259;&#30340;&#22320;&#26041;&#22312;&#20110;&#65306;&#23545;&#20110;<tt class="literal">&lt;lang:bsh&gt;</tt>&#20803;&#32032;&#30340;<tt class="literal">'script-interfaces'</tt>&#23646;&#24615;&#25351;&#23450;&#30340;&#25509;&#21475;&#65292;Spring&#20026;&#23427;&#20204;&#21019;&#24314;&#20102;JDK&#21160;&#24577;&#20195;&#29702;&#23454;&#29616;&#65288;&#36825;&#20063;&#26159;&#20320;&#20351;&#29992;BeanShell&#23454;&#29616;&#30340;bean&#65292;<span class="emphasis"><em>&#24517;&#39035;</em></span>&#20026;&#35813;&#23646;&#24615;&#25351;&#23450;&#33267;&#23569;&#19968;&#20010;&#25509;&#21475;&#24182;&#32534;&#31243;&#23454;&#29616;&#30340;&#21407;&#22240;&#65289;&#12290;&#36825;&#24847;&#21619;&#30528;&#25152;&#26377;&#35843;&#29992; BeanShell-backed&#23545;&#35937;&#30340;&#26041;&#27861;&#65292;&#37117;&#35201;&#36890;&#36807;JDK&#21160;&#24577;&#20195;&#29702;&#35843;&#29992;&#26426;&#21046;&#12290;
			</p><p>
				&#39318;&#20808;&#25105;&#20204;&#30475;&#19968;&#20010;&#20351;&#29992;&#22522;&#20110;BeanShell&#30340;bean&#30340;&#21487;&#24037;&#20316;&#30340;&#23436;&#25972;&#31034;&#20363;&#12290;&#23427;&#23454;&#29616;&#20102;&#26412;&#31456;&#20043;&#21069;&#23450;&#20041;&#30340;<tt class="interfacename">Messenger</tt>&#25509;&#21475;&#65288;&#20026;&#20102;&#26041;&#20415;&#38405;&#35835;&#65292;&#19979;&#38754;&#37325;&#22797;&#23450;&#20041;&#35813;&#25509;&#21475;&#65289;&#12290;
			</p><pre class="programlisting">package org.springframework.scripting;

public interface Messenger {

    String getMessage();
}</pre><p>Here is the BeanShell 'implementation' (the term is used loosely here) of the
	        <tt class="interfacename">Messenger</tt> interface.</p><p>&#19979;&#38754;&#26159;BeanShell&#30340;&#23454;&#29616;&#30340;<tt class="interfacename">Messenger</tt> &#25509;&#21475;&#12290;</p><pre class="programlisting">String message;

String getMessage() {
    return message;
}

void setMessage(String aMessage) {
    message = aMessage;
}</pre><p>
				&#19979;&#38754;&#30340;Spring XML&#23450;&#20041;&#20102;&#19978;&#36848;&#8220;&#31867;&#8221;&#30340;&#19968;&#20010;&#8220;&#23454;&#20363;&#8221;&#65288;&#36825;&#37324;&#23545;&#26415;&#35821;&#30340;&#20351;&#29992;&#38750;&#24120;&#30340;&#38543;&#24847;&#65289;&#12290;
			</p><pre class="programlisting">&lt;lang:bsh id="messageService" script-source="classpath:BshMessenger.bsh"
    script-interfaces="org.springframework.scripting.Messenger"&gt;

    &lt;lang:property name="message" value="Hello World!" /&gt;
&lt;/lang:bsh&gt;</pre><p>
				<a href="#dynamic-language-scenarios" title="24.4.&nbsp;&#22330;&#26223;">Section&nbsp;24.4, &#8220;&#22330;&#26223;&#8221;</a>&#19968;&#33410;&#20013;&#25552;&#20379;&#20102;&#19968;&#20123;&#22330;&#26223;&#65292;&#22312;&#36825;&#26679;&#30340;&#22330;&#26223;&#19979;&#20320;&#20063;&#35768;&#25171;&#31639;&#37319;&#29992;&#22522;&#20110;BeanShell&#30340;bean&#12290;
			</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="dynamic-language-scenarios"></a>24.4.&nbsp;&#22330;&#26223;</h2></div></div><div></div></div><p>
			&#22312;&#26576;&#20123;&#21487;&#33021;&#30340;&#22330;&#26223;&#19979;&#65292;&#20351;&#29992;&#33050;&#26412;&#35821;&#35328;&#23450;&#20041;&#21463;Spring&#31649;&#29702;&#30340;bean&#26159;&#26377;&#22909;&#22788;&#30340;&#65292;&#24403;&#28982;&#36825;&#26679;&#30340;&#22330;&#26223;&#26159;&#21508;&#24335;&#21508;&#26679;&#30340;&#12290;
			&#36825;&#19968;&#33410;&#25551;&#36848;&#20102;&#20004;&#20010;&#33021;&#20351;&#29992;Spring&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;&#29305;&#24615;&#30340;&#29992;&#20363;&#12290;
        </p><p>
			&#35831;&#27880;&#24847;Spring&#30340;&#21457;&#24067;&#21253;&#20013;&#21253;&#25324;&#20102;&#19968;&#20010;&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;&#30340;&#31034;&#20363;&#39033;&#30446;(&#31034;&#20363;&#39033;&#30446;&#21482;&#26159;&#19968;&#20010;&#23567;&#39033;&#30446;&#65292;&#20165;&#29992;&#20110;&#28436;&#31034;Spring&#26694;&#26550;&#30340;&#26576;&#20123;&#29305;&#23450;&#30340;&#29305;&#24449;)&#12290;
        </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="dynamic-language-scenarios-controllers"></a>24.4.1.&nbsp;Spring MVC&#25511;&#21046;&#22120;&#30340;&#33050;&#26412;&#21270;</h3></div></div><div></div></div><p>
&#26377;&#19968;&#32452;&#31867;&#21487;&#20197;&#20351;&#29992;dynamic-language-backed bean&#24182;&#20174;&#20013;&#33719;&#30410;&#65292;&#37027;&#23601;&#26159;Spring MVC&#25511;&#21046;&#22120;&#12290;&#22312;&#32431;Spring
MVC&#24212;&#29992;&#20013;&#65292;&#36143;&#31359;&#25972;&#20010;web&#24212;&#29992;&#30340;&#23548;&#33322;&#27969;&#31243;&#65292;&#30456;&#24403;&#22823;&#30340;&#37096;&#20998;&#37117;&#23553;&#35013;&#22312;Spring
MVC&#25511;&#21046;&#22120;&#30340;&#20195;&#30721;&#20013;&#12290;&#22240;&#20026;web&#24212;&#29992;&#30340;&#23548;&#33322;&#27969;&#31243;&#21644;&#20854;&#20182;&#34920;&#31034;&#23618;&#36923;&#36753;&#38656;&#35201;&#33021;&#22815;&#31215;&#26497;&#21709;&#24212;&#19994;&#21153;&#38656;&#27714;&#30340;&#21464;&#21270;&#21644;&#38382;&#39064;&#65292;&#36890;&#36807;&#32534;&#36753;&#19968;&#20010;&#25110;&#22810;&#20010;&#21160;&#24577;&#35821;&#35328;&#28304;&#25991;&#20214;&#20063;&#35768;&#21487;&#20197;&#26356;&#23481;
&#26131;&#21709;&#24212;&#36825;&#26679;&#37027;&#26679;&#30340;&#21464;&#21270;&#65292;&#32780;&#19988;&#36890;&#36807;&#36825;&#31181;&#26041;&#24335;&#65292;&#19968;&#20010;&#22788;&#20110;&#36816;&#34892;&#29366;&#24577;&#30340;&#24212;&#29992;&#21487;&#20197;&#31435;&#21363;&#21453;&#26144;&#20986;&#25152;&#20570;&#30340;&#25913;&#21160;&#12290; </p><p>
				&#20687;Spring&#36825;&#26679;&#30001;&#39033;&#30446;&#25903;&#25345;&#30340;&#36731;&#37327;&#32423;&#26550;&#26500;&#27169;&#22411;&#20013;&#65292;&#20320;&#30340;&#30446;&#26631;&#26159;&#25317;&#26377;&#19968;&#20010;&#30495;&#27491;<span class="emphasis"><em>&#30246;&#23567;</em></span>
&#30340;&#34920;&#31034;&#23618;&#65292;&#32780;&#24212;&#29992;&#30340;&#25152;&#26377;&#19994;&#21153;&#36923;&#36753;&#37117;&#22312;&#21253;&#35013;&#22312;&#39046;&#22495;&#23618;&#21644;&#26381;&#21153;&#23618;&#30340;&#31867;&#20013;&#65292;&#23558;Spring MVC&#25511;&#21046;&#22120;&#20316;&#20026;dynamic-language-backed
bean&#26469;&#36827;&#34892;&#24320;&#21457;&#65292;&#21487;&#20197;&#31616;&#21333;&#30340;&#32534;&#36753;&#20445;&#23384;&#25991;&#26412;&#25991;&#20214;&#23601;&#21487;&#20197;&#20462;&#25913;&#34920;&#31034;&#23618;&#36923;&#36753;&#65292;&#36825;&#20123;&#21160;&#24577;&#35821;&#35328;&#28304;&#25991;&#20214;&#30340;&#20219;&#20309;&#21464;&#21270;&#37117;&#21487;&#20197;(&#21462;&#20915;&#20110;&#37197;&#32622;)&#33258;&#21160;&#30340;&#21453;&#23556;&#20026;bean(&#24213;&#23618;&#20026;
&#21160;&#24577;&#35821;&#35328;&#28304;&#25991;&#20214;)&#30340;&#21464;&#21270;&#12290; </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>
					&#35831;&#27880;&#24847;&#20026;&#20102;&#33258;&#21160;&#8220;&#33719;&#21462;&#8221;dynamic-language-backed bean&#30340;&#21508;&#31181;&#21464;&#21270;&#65292;&#20320;&#24517;&#39035;&#21551;&#29992;'refreshable beans' &#21151;&#33021;&#12290;
					&#20851;&#20110;&#35813;&#29305;&#24449;&#30340;&#35814;&#32454;&#24773;&#20917;&#35831;&#21442;&#32771;<a href="#dynamic-language-refreshable-beans" title="24.3.1.2.&nbsp;Refreshable bean">Section&nbsp;24.3.1.2, &#8220;Refreshable bean&#8221;</a>&#19968;&#33410;&#12290;
				</p></td></tr></tbody></table></div><p>
				&#19979;&#38754;&#30340;&#31034;&#20363;&#26159;&#20351;&#29992;Groovy&#21160;&#24577;&#35821;&#35328;&#23454;&#29616;&#30340;<tt class="interfacename">org.springframework.web.servlet.mvc.Controller</tt>&#12290;&#36825;&#20010;&#20363;&#23376;&#36873;&#33258;Spring&#21457;&#24067;&#21253;&#20013;&#25552;&#20379;&#30340;&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;&#31034;&#20363;&#39033;&#30446;&#12290;&#20851;&#20110;&#35813;&#39033;&#30446;&#30340;&#35814;&#24773;&#35831;&#21442;&#32771;Spring&#21457;&#24067;&#21253;&#20013;&#30340;<tt class="filename">'samples/showcases/dynamvc/'</tt>&#30446;&#24405;&#12290;
			</p><pre class="programlisting">// from the file '/WEB-INF/groovy/FortuneController.groovy'
package org.springframework.showcase.fortune.web

import org.springframework.showcase.fortune.service.FortuneService
import org.springframework.showcase.fortune.domain.Fortune
import org.springframework.web.servlet.ModelAndView
import org.springframework.web.servlet.mvc.Controller

import javax.servlet.http.HttpServletRequest
import javax.servlet.http.HttpServletResponse

class FortuneController implements Controller {

    @Property FortuneService fortuneService

    ModelAndView handleRequest(
            HttpServletRequest request, HttpServletResponse httpServletResponse) {

        return new ModelAndView("tell", "fortune", this.fortuneService.tellFortune())
    }
}</pre><pre class="programlisting">&lt;lang:groovy id="fortune"
             refresh-check-delay="3000"
             script-source="/WEB-INF/groovy/FortuneController.groovy"&gt;
    &lt;lang:property name="fortuneService" ref="fortuneService"/&gt;
&lt;/lang:groovy&gt;
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="dynamic-language-scenarios-validators"></a>24.4.2.&nbsp;Validator&#30340;&#33050;&#26412;&#21270;</h3></div></div><div></div></div><p>
				&#22312;&#20351;&#29992;Spring&#36827;&#34892;&#24212;&#29992;&#31243;&#24207;&#24320;&#21457;&#26102;&#65292;&#26657;&#39564;&#21487;&#33021;&#20250;&#26159;&#21478;&#19968;&#20010;&#21487;&#20197;&#20174;dynamic-language-backed bean&#25552;&#20379;&#30340;&#28789;&#27963;&#24615;&#20013;&#33719;&#30410;&#30340;&#26041;&#38754;&#12290;
				&#30456;&#23545;&#20110;Java&#35821;&#35328;&#65292;&#20351;&#29992;&#26494;&#25955;&#31867;&#22411;&#30340;&#21160;&#24577;&#35821;&#35328;&#65288;&#21487;&#33021;&#36824;&#25903;&#25345;&#20869;&#32622;&#30340;&#27491;&#21017;&#34920;&#36798;&#24335;&#65289;<span class="emphasis"><em>&#20063;&#35768;</em></span>&#21487;&#20197;&#26356;&#23481;&#26131;&#22320;&#34920;&#31034;&#22797;&#26434;&#30340;&#26657;&#39564;&#36923;&#36753;&#12290;
			</p><p>
				&#20351;&#29992;dynamic-language-backed bean&#20316;&#20026;&#26657;&#39564;&#22120;&#65292;&#21487;&#20197;&#24456;&#23481;&#26131;&#30340;&#25913;&#21464;&#26657;&#39564;&#36923;&#36753;&#65292;&#21482;&#35201;&#32534;&#36753;&#31616;&#21333;&#30340;&#25991;&#26412;&#25991;&#20214;&#21363;&#21487;&#65307;
				&#20219;&#20309;&#27492;&#31867;&#20462;&#25913;&#20250;(&#26681;&#25454;&#37197;&#32622;)&#33258;&#21160;&#21453;&#24212;&#21040;&#27491;&#22312;&#36816;&#34892;&#30340;&#24212;&#29992;&#31243;&#24207;&#20013;&#65292;&#32780;&#26080;&#38656;&#37325;&#21551;&#24212;&#29992;&#31243;&#24207;&#12290;
			</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>
					&#35831;&#27880;&#24847;&#20026;&#20102;&#33258;&#21160;&#8220;&#33719;&#21462;&#8221;dynamic-language-backed bean&#30340;&#21508;&#31181;&#21464;&#21270;&#65292;&#20320;&#24517;&#39035;&#21551;&#29992; 'refreshable beans' &#21151;&#33021;&#12290;&#20851;&#20110;&#35813;&#29305;&#24449;&#30340;&#35814;&#32454;&#24773;&#20917;&#35831;&#21442;&#32771;<a href="#dynamic-language-refreshable-beans" title="24.3.1.2.&nbsp;Refreshable bean">Section&nbsp;24.3.1.2, &#8220;Refreshable bean&#8221;</a>&#19968;&#33410;&#12290;
				</p></td></tr></tbody></table></div><p>
				&#19979;&#38754;&#30340;&#31034;&#20363;&#26159;&#20351;&#29992;Groovy&#21160;&#24577;&#35821;&#35328;&#23454;&#29616;&#30340;<tt class="interfacename">org.springframework.validation.Validator</tt>&#12290;&#65288;&#20851;&#20110;<tt class="interfacename">Validator</tt>&#25509;&#21475;&#30340;&#35752;&#35770;&#35831;&#21442;&#32771;<a href="#validator" title="5.2.&nbsp;&#20351;&#29992;Spring&#30340;Validator&#25509;&#21475;&#36827;&#34892;&#26657;&#39564;">Section&nbsp;5.2, &#8220;&#20351;&#29992;Spring&#30340;Validator&#25509;&#21475;&#36827;&#34892;&#26657;&#39564;&#8221;</a> &#19968;&#33410;&#65289;
			</p><pre class="programlisting">import org.springframework.validation.Validator
import org.springframework.validation.Errors
import org.springframework.beans.TestBean

class TestBeanValidator implements Validator {

    boolean supports(Class clazz) {
        return TestBean.class.isAssignableFrom(clazz)
    }
    
    void validate(Object bean, Errors errors) {
        if(bean.name?.trim()?.size() &gt; 0) {
            return
        }
        errors.reject("whitespace", "Cannot be composed wholly of whitespace.")
    }
}</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="dynamic-language-final-notes"></a>24.5.&nbsp;Bits and bobs</h2></div><div><h2 class="title" style="clear: both;"><a name="dynamic-language-final-notes"></a>24.5.&nbsp;Bits and bobs</h2></div></div><div></div></div><p>
		&#26368;&#21518;&#36825;&#19968;&#31456;&#25552;&#20379;&#20102;&#19968;&#20123;&#21644;&#21160;&#24577;&#35821;&#35328;&#26377;&#20851;&#30340;&#23567;&#30693;&#35782;&#28857;&#12290;
		</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="dynamic-language-final-notes-aop"></a>24.5.1.&nbsp;AOP - &#36890;&#30693;&#33050;&#26412;&#21270;bean</h3></div></div><div></div></div><p>
			&#20351;&#29992;Spring AOP&#26694;&#26550;&#23545;&#33050;&#26412;&#21270;bean&#36827;&#34892;&#36890;&#30693;&#24050;&#32463;&#25104;&#20026;&#21487;&#33021;&#12290;Spring AOP&#26694;&#26550;&#23454;&#38469;&#19978;&#19981;&#20851;&#24515;&#38656;&#35201;&#34987;
			&#36890;&#30693;&#30340;bean&#26159;&#21542;&#26159;&#33050;&#26412;&#21270;bean&#65292;&#22240;&#27492;&#20320;&#25152;&#20351;&#29992;&#30340;&#20840;&#37096;AOP&#29992;&#20363;&#21644;&#21151;&#33021;&#23545;&#33050;&#26412;&#21270;bean&#37117;&#26377;&#25928;&#12290;
			&#21807;&#19968;&#38656;&#35201;&#27880;&#24847;&#30340;&#26159;&#65292;&#36890;&#30693;&#33050;&#26412;&#21270;bean&#30340;&#26102;&#20505;&#65292;&#20320;&#19981;&#33021;&#20351;&#29992;&#22522;&#20110;&#31867;&#30340;&#20195;&#29702;&#65292;
			&#32780;&#21482;&#33021;&#20351;&#29992;<a href="#aop-proxying" title="6.6.&nbsp;&#20195;&#29702;&#26426;&#21046;">&#22522;&#20110;&#25509;&#21475;&#30340;&#20195;&#29702;</a>&#12290;
			</p><p>
			&#24403;&#28982;&#19981;&#29992;&#23616;&#38480;&#20110;&#22312;&#36890;&#30693;&#33050;&#26412;&#21270;bean&#26041;&#38754;&#65292;&#20320;&#20063;&#21487;&#20197;&#20351;&#29992;&#25903;&#25345;&#30340;&#21160;&#24577;&#35821;&#35328;&#23454;&#29616;&#20999;&#38754;&#65292;
			&#24182;&#20351;&#29992;&#35813;&#20999;&#38754;&#36890;&#30693;&#20854;&#20182;&#30340;Spring bean&#12290;&#36825;&#26679;&#25165;&#26159;&#30495;&#27491;&#30340;&#21033;&#29992;&#20102;&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;&#30340;&#20248;&#21183;&#12290;
			</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="dynamic-language-final-notes-scopes"></a>24.5.2.&nbsp;&#20316;&#29992;&#22495;</h3></div></div><div></div></div><p>
			&#22312;&#19981;&#26159;&#39532;&#19978;&#36215;&#25928;&#30340;&#24773;&#20917;&#20013;&#65292;&#33050;&#26412;&#21270;bean&#24403;&#28982;&#20063;&#33021;&#21644;&#20854;&#20182;bean&#19968;&#26679;&#23450;&#20041;&#20316;&#29992;&#22495;&#12290;
      <tt class="literal">&lt;lang:language/&gt;</tt>&#20803;&#32032;&#30340;<tt class="literal">scope</tt>&#23646;&#24615;&#21487;&#20197;&#24110;&#21161;&#20320;&#25511;&#21046;&#24213;&#23618;&#30340;&#33050;&#26412;&#21270;bean&#30340;&#20316;&#29992;&#22495;&#65292;
      &#36825;&#26679;&#36825;&#20123;&#33050;&#26412;&#21270;bean&#23601;&#21644;&#26222;&#36890;&#30340;bean&#27809;&#26377;&#21306;&#21035;&#20102;&#12290;&#65288;scope&#30340;&#40664;&#35748;&#20540;&#20219;&#28982;&#26159;<a href="#beans-factory-scopes-singleton" title="3.4.1.&nbsp;Singleton&#20316;&#29992;&#22495;">singleton</a>&#65292;
      &#21644;&#26222;&#36890;bean&#27809;&#26377;&#21306;&#21035;&#12290;&#65289;
			</p><p>
				&#19979;&#38754;&#30340;&#31034;&#20363;&#20351;&#29992;<tt class="literal">scope</tt>&#23646;&#24615;&#23558;Groovy bean&#23450;&#20041;&#20026;<a href="#beans-factory-scopes-prototype" title="3.4.2.&nbsp;Prototype&#20316;&#29992;&#22495;">prototype</a>&#12290;
			</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:lang="http://www.springframework.org/schema/lang"
       xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang-2.5.xsd"&gt;

    &lt;lang:groovy id="messenger" script-source="classpath:Messenger.groovy" <i class="lineannotation"><span class="lineannotation"><span class="bold"><b>scope="prototype"</b></span></span></i>&gt;
        &lt;lang:property name="message" value="I Can Do The RoboCop" /&gt;
    &lt;/lang:groovy&gt;

    &lt;bean id="bookingService" class="x.y.DefaultBookingService"&gt;
        &lt;property name="messenger" ref="messenger" /&gt;
    &lt;/bean&gt;

&lt;/beans&gt;</pre><p>
			<a href="#beans" title="Chapter&nbsp;3.&nbsp;IoC(&#25511;&#21046;&#21453;&#36716;)&#23481;&#22120;">Chapter&nbsp;3, <i>IoC(&#25511;&#21046;&#21453;&#36716;)&#23481;&#22120;</i></a>&#20013;&#30340;<a href="#beans-factory-scopes" title="3.4.&nbsp;Bean&#30340;&#20316;&#29992;&#22495;">Section&nbsp;3.4, &#8220;Bean&#30340;&#20316;&#29992;&#22495;&#8221;</a>&#31456;&#33410;&#35814;&#32454;&#35752;&#35770;&#20102;Spring&#26694;&#26550;&#25903;&#25345;&#30340;&#20316;&#29992;&#22495;&#12290;
			</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="dynamic-language-resources"></a>24.6.&nbsp;&#26356;&#22810;&#30340;&#36164;&#28304;</h2></div></div><div></div></div><p>&#19979;&#38754;&#30340;&#38142;&#25509;&#32473;&#20986;&#20102;&#21644;&#26412;&#31456;&#25152;&#25551;&#36848;&#30340;&#21508;&#31181;&#21160;&#24577;&#35821;&#35328;&#26377;&#20851;&#30340;&#21487;&#36827;&#19968;&#27493;&#21442;&#32771;&#30340;&#36164;&#28304;&#12290;</p><div class="itemizedlist"><ul type="disc"><li><p><a href="http://jruby.sourceforge.net/" target="_top">JRuby</a> &#20027;&#39029;</p></li><li><p><a href="http://groovy.codehaus.org/" target="_top">Groovy</a> &#20027;&#39029;</p></li><li><p><a href="http://www.beanshell.org/" target="_top">BeanShell</a> &#20027;&#39029;</p></li></ul></div><p>
			Spring&#31038;&#21306;&#20013;&#19968;&#20123;&#27963;&#36291;&#20998;&#23376;&#24050;&#32463;&#28155;&#21152;&#20102;&#25968;&#37327;&#21487;&#35266;&#30340;&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;&#65292;&#21253;&#25324;&#26412;&#31456;&#28041;&#21450;&#21040;&#30340;&#20197;&#21450;&#20854;&#23427;&#30340;&#21160;&#24577;&#35821;&#35328;&#12290;&#27492;&#26102;&#27492;&#21051;&#31532;&#19977;&#26041;&#30340;&#36129;&#29486;&#20063;&#35768;&#24050;&#32463;&#28155;&#21152;&#21040;Spring&#20027;&#21457;&#24067;&#25152;&#25903;&#25345;&#30340;&#30340;&#35821;&#35328;&#21015;&#34920;&#20013;&#65292;&#19981;&#22952;&#30475;&#30475;&#26159;&#21542;&#33021;&#22312;<a href="https://springmodules.dev.java.net/" target="_top">Spring Modules project</a>&#25214;&#21040;&#20320;&#38047;&#29233;&#30340;&#33050;&#26412;&#35821;&#35328;&#12290;
		    </p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="metadata"></a>Chapter&nbsp;25.&nbsp;&#27880;&#35299;&#21644;&#28304;&#20195;&#30721;&#32423;&#30340;&#20803;&#25968;&#25454;&#25903;&#25345;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="metadata-introduction"></a>25.1.&nbsp;&#31616;&#20171;</h2></div></div><div></div></div><p>&#28304;&#20195;&#30721;&#32423;&#30340;&#20803;&#25968;&#25454;&#36890;&#24120;&#26159;&#23545;&#31867;&#25110;&#26041;&#27861;&#36825;&#26679;&#30340;&#31243;&#24207;&#20803;&#32032;&#30340;<span class="emphasis"><em>&#23646;&#24615;</em></span>&#25110;<span class="emphasis"><em>&#27880;&#35299;</em></span>&#30340;&#34917;&#20805;&#12290; </p><p>&#20030;&#20363;&#26469;&#35828;&#65292;&#25105;&#20204;&#21487;&#20197;&#35937;&#19979;&#38754;&#36825;&#26679;&#32473;&#19968;&#20010;&#31867;&#28155;&#21152;&#20803;&#25968;&#25454;&#65306;</p><pre class="programlisting">/**
 * Normal comments here
 * @@org.springframework.transaction.interceptor.DefaultTransactionAttribute()
 */
public class PetStoreImpl implements PetStoreFacade, OrderService {</pre><p>&#25105;&#20204;&#20063;&#21487;&#20197;&#20687;&#19979;&#38754;&#36825;&#26679;&#20026;&#19968;&#20010;&#26041;&#27861;&#28155;&#21152;&#20803;&#25968;&#25454;&#65306;</p><pre class="programlisting">/**
 * Normal comments here
 * @@org.springframework.transaction.interceptor.RuleBasedTransactionAttribute()
 * @@org.springframework.transaction.interceptor.RollbackRuleAttribute(Exception.class)
 * @@org.springframework.transaction.interceptor.NoRollbackRuleAttribute("ServletException")
 */
public void echoException(Exception ex) throws Exception {
    ....
}</pre><p>&#36825;&#20004;&#20010;&#20363;&#23376;&#37117;&#20351;&#29992;&#20102;Jakarta Commons Attributes&#30340;&#35821;&#27861;&#12290;</p><p>
			&#28304;&#20195;&#30721;&#32423;&#30340;&#20803;&#25968;&#25454;&#38543;&#30528;XDoclet(&#22312;Java&#19990;&#30028;&#20013;)&#21644;Microsoft&#30340;.NET&#24179;&#21488;&#30340;&#21457;&#24067;&#34987;&#24341;&#20837;&#20027;&#27969;&#65292;
			&#21518;&#32773;&#20351;&#29992;&#20102;&#28304;&#20195;&#30721;&#32423;&#30340;&#23646;&#24615;&#26469;&#25511;&#21046;&#20107;&#21153;&#12289;&#32531;&#20914;&#27744;(pooling)&#21644;&#19968;&#20123;&#20854;&#20182;&#30340;&#34892;&#20026;&#12290; 
		</p><p>J2EE&#31038;&#21306;&#24050;&#32463;&#35748;&#35782;&#21040;&#20102;&#36825;&#31181;&#26041;&#27861;&#30340;&#20215;&#20540;&#12290;&#20030;&#20363;&#26469;&#35828;&#65292;&#36319;EJB&#20013;&#19987;&#29992;&#30340;&#20256;&#32479;XML&#37096;&#32626;&#25551;&#36848;&#25991;&#20214;&#27604;&#36215;&#26469;&#23427;&#35201;&#31616;&#21333;&#24456;&#22810;&#12290;
		&#19982;&#20154;&#20204;&#20048;&#24847;&#20570;&#30340;&#25226;&#19968;&#20123;&#19996;&#35199;&#20174;&#31243;&#24207;&#28304;&#20195;&#30721;&#20013;&#25552;&#21462;&#20986;&#26469;&#30340;&#20570;&#27861;&#30456;&#21453;&#65292;&#19968;&#20123;&#37325;&#35201;&#30340;&#20225;&#19994;&#32423;&#35774;&#32622; - &#29305;&#21035;&#26159;&#20107;&#21153;&#29305;&#24615; - &#24212;&#35813;&#23646;&#20110;&#31243;&#24207;&#20195;&#30721;&#12290;
		&#24182;&#19981;&#20687;EJB&#35268;&#33539;&#20013;&#35774;&#24819;&#30340;&#37027;&#26679;&#65292;&#35843;&#25972;&#19968;&#20010;&#26041;&#27861;&#30340;&#20107;&#21153;&#29305;&#24615;&#22522;&#26412;&#27809;&#26377;&#20160;&#20040;&#24847;&#20041;(&#23613;&#31649;&#20687;&#20107;&#21153;&#36229;&#26102;&#36825;&#26679;&#30340;&#21442;&#25968;&#21487;&#33021;&#25913;&#21464;)&#12290; </p><p>&#34429;&#28982;&#20803;&#25968;&#25454;&#23646;&#24615;&#20027;&#35201;&#29992;&#20110;&#26694;&#26550;&#30340;&#22522;&#30784;&#35774;&#26045;&#20013;&#65292;&#26469;&#25551;&#36848;&#24212;&#29992;&#31243;&#24207;&#30340;&#31867;&#25152;&#38656;&#35201;&#30340;&#26381;&#21153;&#65292;&#20294;&#26159;&#23427;&#20063;&#21487;&#20197;&#22312;&#36816;&#34892;&#26102;&#34987;&#26597;&#35810;&#12290;
			&#36825;&#26159;&#23427;&#19982;XDoclet&#36825;&#26679;&#30340;&#35299;&#20915;&#26041;&#26696;&#30340;&#20851;&#38190;&#21306;&#21035;&#65292;XDoclet&#20027;&#35201;&#25226;&#20803;&#25968;&#25454;&#20316;&#20026;&#29983;&#25104;&#20195;&#30721;&#30340;&#19968;&#31181;&#26041;&#24335;&#65292;&#27604;&#22914;&#29983;&#25104;EJB&#31867;&#12290; </p><p>&#19979;&#38754;&#26377;&#20960;&#31181;&#35299;&#20915;&#26041;&#26696;&#65292;&#21253;&#25324;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><b>&#26631;&#20934;Java&#27880;&#35299;</b></span>&#65306;&#26631;&#20934;Java&#20803;&#25968;&#25454;&#23454;&#29616;(&#20316;&#20026;JSR-175&#26631;&#20934;&#34987;&#24320;&#21457;&#24182;&#21487;&#22312; Java 5&#20013;&#25214;&#21040;)&#12290;
				Spring&#24050;&#32463;&#22312;&#20107;&#21153;&#21010;&#20998;&#12289;JMX&#21644;&#20999;&#38754;(&#20934;&#30830;&#22320;&#35828;&#23427;&#20204;&#26159;AspectJ&#30340;&#27880;&#35299;)&#20013;&#25903;&#25345;Java 5&#27880;&#35299;&#12290; &#19981;&#36807;&#65292;
				&#26082;&#28982;Spring&#20063;&#25903;&#25345;Java 1.4&#65292;&#25105;&#20204;&#20173;&#38656;&#35201;&#19968;&#20010;JVM&#19981;&#21516;&#29256;&#26412;&#38388;&#30340;&#35299;&#20915;&#26041;&#26696;&#12290;Spring&#20803;&#25968;&#25454;&#25903;&#25345;&#23601;&#25552;&#20379;&#20102;&#36825;&#26679;&#19968;&#20010;&#26041;&#26696;&#12290;</p></li><li><p><span class="bold"><b>XDoclet</b></span>&#65306;&#25104;&#29087;&#30340;&#35299;&#20915;&#26041;&#26696;&#65292;&#20027;&#35201;&#29992;&#20110;&#20195;&#30721;&#29983;&#25104;&#12290;</p></li><li><p>&#22312;&#22810;&#31181;&#19981;&#21516;&#30340;&#38024;&#23545;Java 1.4&#30340;<span class="bold"><b>&#24320;&#28304;&#23646;&#24615;&#23454;&#29616;</b></span>&#20013;&#65292;Commons Attributes&#30475;&#36215;&#26469;&#26159;&#26368;&#23436;&#25972;&#30340;&#23454;&#29616;&#12290;
				&#25152;&#26377;&#30340;&#36825;&#20123;&#23454;&#29616;&#37117;&#38656;&#35201;&#19968;&#20010;&#29305;&#23450;&#30340;&#21069;&#32622;&#32534;&#35793;&#25110;&#21518;&#32622;&#32534;&#35793;&#30340;&#27493;&#39588;&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="metadata-spring"></a>25.2.&nbsp;Spring&#30340;&#20803;&#25968;&#25454;&#25903;&#25345;</h2></div></div><div></div></div><p>&#20026;&#20102;&#19982;Spring&#25552;&#20379;&#30340;&#20854;&#20182;&#37325;&#35201;&#27010;&#24565;&#30340;&#25277;&#35937;&#30456;&#19968;&#33268;&#65292;Spring&#20026;&#20803;&#25968;&#25454;&#23454;&#29616;&#25552;&#20379;&#20102;&#19968;&#20010;&#38376;&#38754;(facade)&#65292;
		&#23427;&#26159;&#20197;<tt class="interfacename">org.springframework.metadata.Attributes</tt>&#25509;&#21475;&#30340;&#24418;&#24335;&#26469;&#23454;&#29616;&#12290;
		&#36825;&#20010;&#38376;&#38754;&#22240;&#20197;&#19979;&#20960;&#20010;&#21407;&#22240;&#32780;&#26174;&#24471;&#24456;&#26377;&#20215;&#20540;&#65306; </p><div class="itemizedlist"><ul type="disc"><li><p>&#23613;&#31649;Java 5&#25552;&#20379;&#20102;&#35821;&#35328;&#32423;&#30340;&#20803;&#25968;&#25454;&#25903;&#25345;&#65292;&#20294;&#25552;&#20379;&#36825;&#26679;&#19968;&#20010;&#25277;&#35937;&#20173;&#20855;&#20215;&#20540;&#65306; </p><div class="itemizedlist"><ul type="circle"><li><p>Java 5&#30340;&#20803;&#25968;&#25454;&#26159;&#38745;&#24577;&#30340;&#12290;&#23427;&#26159;&#22312;&#32534;&#35793;&#26102;&#19982;&#19968;&#20010;&#31867;&#20851;&#32852;&#65292;&#32780;&#19988;&#22312;&#37096;&#32626;&#29615;&#22659;&#19979;&#26159;&#19981;&#21487;&#25913;&#21464;&#30340;
							(&#27880;&#35299;&#30340;&#29366;&#24577;&#21487;&#20197;&#36890;&#36807;&#21453;&#23556;&#22312;&#36816;&#34892;&#26102;&#25913;&#21464;&#65292;&#20294;&#36825;&#24182;&#19981;&#26159;&#19968;&#20010;&#24456;&#22909;&#30340;&#23454;&#36341;)&#12290; &#36825;&#37324;&#20250;&#38656;&#35201;&#22810;&#23618;&#27425;&#30340;&#20803;&#25968;&#25454;&#65292;
							&#20197;&#25903;&#25345;&#22312;&#37096;&#32626;&#26102;&#37325;&#36733;&#26576;&#20123;&#23646;&#24615;&#30340;&#20540; - &#20030;&#20363;&#26469;&#35828;&#65292;&#22312;&#19968;&#20010;XML&#25991;&#20214;&#20013;&#23450;&#20041;&#29992;&#20110;&#35206;&#30422;&#30340;&#23646;&#24615;&#12290; 
						</p></li><li><p>Java 5&#30340;&#20803;&#25968;&#25454;&#26159;&#36890;&#36807;Java&#21453;&#23556;API&#36820;&#22238;&#30340;&#12290;&#36825;&#20351;&#24471;&#22312;&#27979;&#35797;&#26102;&#26080;&#27861;&#27169;&#25311;&#20803;&#25968;&#25454;&#12290; Spring&#25552;&#20379;&#20102;&#19968;&#20010;&#31616;&#21333;&#30340;&#25509;&#21475;&#26469;&#20801;&#35768;&#36825;&#31181;&#27169;&#25311;&#12290;</p></li><li><p>
							&#22312;&#26410;&#26469;&#33267;&#23569;&#20004;&#24180;&#20869;&#20173;&#26377;&#22312;1.3&#21644;1.4&#24212;&#29992;&#31243;&#24207;&#20013;&#25903;&#25345;&#20803;&#25968;&#25454;&#30340;&#38656;&#35201;&#12290;Spring&#30528;&#30524;&#20110;&#25552;&#20379;<span class="emphasis"><em>&#29616;&#22312;</em></span>&#21487;&#20197;&#24037;&#20316;&#30340;&#35299;&#20915;&#26041;&#26696;&#65307;
							&#22312;&#36825;&#20010;&#37325;&#35201;&#39046;&#22495;&#20013;&#24378;&#36843;&#20351;&#29992;Java 5&#24182;&#19981;&#26159;&#19968;&#20010;&#26126;&#26234;&#20043;&#20030;&#12290; 
						</p></li></ul></div></li><li><p>&#24403;&#21069;&#30340;&#20803;&#25968;&#25454;API&#65292;&#20363;&#22914;Commons Attributes(&#22312;Spring 1.0-1.2&#20013;&#20351;&#29992;)&#24456;&#38590;&#27979;&#35797;&#12290;Spring&#25552;&#20379;&#20102;&#19968;&#20010;&#31616;&#21333;&#30340;&#26131;&#20110;&#27169;&#25311;&#30340;&#20803;&#25968;&#25454;&#25509;&#21475;&#12290; </p></li></ul></div><p>Spring&#30340;<tt class="interfacename">Attributes</tt>&#25509;&#21475;&#26159;&#36825;&#20010;&#26679;&#23376;&#30340;&#65306; </p><pre class="programlisting">public interface Attributes {

    Collection getAttributes(Class targetClass);

    Collection getAttributes(Class targetClass, Class filter);

    Collection getAttributes(Method targetMethod);

    Collection getAttributes(Method targetMethod, Class filter);

    Collection getAttributes(Field targetField);

    Collection getAttributes(Field targetField, Class filter);
}</pre><p>&#36825;&#26159;&#20010;&#26497;&#20854;&#26222;&#36890;&#30340;&#25509;&#21475;&#12290;JSR-175&#25552;&#20379;&#20102;&#27604;&#36825;&#26356;&#22810;&#30340;&#21151;&#33021;&#65292;&#27604;&#22914;&#23450;&#20041;&#22312;&#26041;&#27861;&#21442;&#25968;&#19978;&#30340;&#23646;&#24615;&#12290;</p><p>&#35201;&#27880;&#24847;&#21040;&#35813;&#25509;&#21475;&#20687;.NET&#19968;&#26679;&#25552;&#20379;&#20102;<tt class="classname">Object</tt>&#23646;&#24615;&#12290;&#36825;&#20351;&#24471;&#23427;&#21306;&#21035;&#20110;&#19968;&#20123;&#20165;&#25552;&#20379;<tt class="classname">String</tt>&#23646;&#24615;&#30340;&#20803;&#25968;&#25454;&#23646;&#24615;&#31995;&#32479;&#65292;
		&#27604;&#22914;Nanning Aspects&#12290;&#25903;&#25345;<tt class="classname">Object</tt>&#23646;&#24615;&#26377;&#19968;&#20010;&#26174;&#33879;&#30340;&#20248;&#28857;&#12290;&#23427;&#20351;&#23646;&#24615;&#33021;&#21442;&#19982;&#21040;&#31867;&#23618;&#27425;&#20013;&#65292;
		&#36824;&#21487;&#20197;&#20351;&#23646;&#24615;&#33021;&#22815;&#28789;&#27963;&#30340;&#26681;&#25454;&#23427;&#20204;&#30340;&#37197;&#32622;&#21442;&#25968;&#36215;&#20316;&#29992;&#12290; </p><p>&#23545;&#20110;&#22823;&#22810;&#25968;&#23646;&#24615;&#25552;&#20379;&#32773;&#26469;&#35828;&#65292;&#23646;&#24615;&#31867;&#30340;&#37197;&#32622;&#26159;&#36890;&#36807;&#26500;&#36896;&#26041;&#27861;&#21442;&#25968;&#25110;JavaBean&#30340;&#23646;&#24615;&#23436;&#25104;&#30340;&#12290;Commons Attributes&#21516;&#26102;&#25903;&#25345;&#36825;&#20004;&#31181;&#26041;&#24335;&#12290; </p><p>&#21516;&#25152;&#26377;&#30340;Spring&#25277;&#35937;API&#19968;&#26679;&#65292;<tt class="interfacename">Attributes</tt>&#26159;&#19968;&#20010;&#25509;&#21475;&#12290;&#36825;&#20351;&#24471;&#22312;&#21333;&#20803;&#27979;&#35797;&#20013;&#27169;&#25311;&#23646;&#24615;&#30340;&#23454;&#29616;&#21464;&#24471;&#23481;&#26131;&#36215;&#26469;&#12290; </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="metadata-annotations"></a>25.3.&nbsp;&#27880;&#35299;</h2></div></div><div></div></div><p>Spring&#26377;&#24456;&#22810;&#33258;&#23450;&#20041;&#30340;Java 5+&#27880;&#35299;&#12290; </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="metadata-annotations-required"></a>25.3.1.&nbsp;@<tt class="interfacename">Required</tt></h3></div></div><div></div></div><p><tt class="literal">org.springframework.beans.factory.annotation</tt>&#21253;
					&#20013;&#30340;@<tt class="interfacename">Required</tt>&#27880;&#35299;&#33021;&#29992;&#26469;<span class="emphasis"><em>&#26631;&#35760;</em></span>
					&#23646;&#24615;&#65292;&#23558;&#20854;&#26631;&#31034;&#20026;<span class="emphasis"><em>'&#38656;&#35201;&#35774;&#32622;'</em></span>(&#20363;&#22914;&#65292;&#19968;&#20010;&#31867;&#20013;&#30340;&#34987;&#27880;&#35299;&#30340;(setter)
					&#26041;&#27861;&#24517;&#39035;&#37197;&#32622;&#19968;&#20010;&#29992;&#26469;&#20381;&#36182;&#27880;&#20837;&#30340;&#20540;)&#65292;&#21542;&#21017;&#23481;&#22120;&#20250;&#22312;&#36816;&#34892;&#26102;&#25243;&#20986;&#19968;&#20010;<tt class="classname">Exception</tt>&#12290; </p><p>&#28436;&#31034;&#36825;&#20010;&#27880;&#35299;&#29992;&#27861;&#30340;&#26368;&#22909;&#21150;&#27861;&#26159;&#32473;&#20986;&#20687;&#19979;&#38754;&#36825;&#26679;&#30340;&#33539;&#20363;&#65306; </p><pre class="programlisting">public class SimpleMovieLister {

    <i class="lineannotation"><span class="lineannotation">// the <tt class="classname">SimpleMovieLister</tt> has a dependency on the <tt class="interfacename">MovieFinder</tt></span></i>
    private MovieFinder movieFinder;

    <i class="lineannotation"><span class="lineannotation">// a setter method so that the Spring container can 'inject' a <tt class="interfacename">MovieFinder</tt></span></i>
    @Required
    public void setMovieFinder(MovieFinder movieFinder) {
        this.movieFinder = movieFinder;
    }
    
    <i class="lineannotation"><span class="lineannotation">// business logic that actually 'uses' the injected <tt class="interfacename">MovieFinder</tt> is omitted...</span></i>
}</pre><p>&#24076;&#26395;&#19978;&#38754;&#30340;&#31867;&#23450;&#20041;&#30475;&#36215;&#26469;&#36824;&#31639;&#31616;&#21333;&#12290;&#20320;&#24517;&#39035;&#20026;&#25152;&#26377;<tt class="classname">SimpleMovieLister</tt>&#31867;&#30340;<tt class="interfacename">BeanDefinitions</tt>
			&#25552;&#20379;&#19968;&#20010;&#20540;&#12290; </p><p>&#35753;&#25105;&#20204;&#30475;&#19968;&#20010;<span class="bold"><b>&#19981;</b></span>&#33021;&#36890;&#36807;&#39564;&#35777;&#30340;XML&#37197;&#32622;&#33539;&#20363;&#12290; </p><pre class="programlisting">&lt;bean id="movieLister" class="x.y.SimpleMovieLister"&gt;
    <i class="lineannotation"><span class="lineannotation">&lt;!-- whoops, no MovieFinder is set (and this property is @<tt class="interfacename">Required</tt>) --&gt;</span></i>
&lt;/bean&gt;</pre><p>&#36816;&#34892;&#26102;Spring&#23481;&#22120;&#20250;&#29983;&#25104;&#19979;&#38754;&#30340;&#28040;&#24687;(&#36861;&#36394;&#22534;&#26632;&#30340;&#21097;&#19979;&#37096;&#20998;&#34987;&#21024;&#38500;&#20102;)&#12290; </p><pre class="programlisting">Exception in thread "main" java.lang.IllegalArgumentException:
    Property 'movieFinder' is required for bean 'movieLister'.</pre><p>&#26368;&#21518;&#36824;&#38656;&#35201;&#19968;&#28857;(&#23567;&#30340;)Spring&#37197;&#32622;&#26469;<span class="emphasis"><em>'&#24320;&#21551;'</em></span>&#36825;&#20010;&#34892;&#20026;&#12290;
			&#31616;&#21333;&#27880;&#35299;&#31867;&#30340;<span class="emphasis"><em>'setter'</em></span>&#23646;&#24615;&#19981;&#36275;&#20197;&#23454;&#29616;&#36825;&#20010;&#34892;&#20026;&#12290;
			&#20320;&#36824;&#38656;&#35201;&#19968;&#20010;&#20102;&#35299;@<tt class="interfacename">Required</tt>&#27880;&#35299;&#24182;&#33021;&#36866;&#24403;&#22320;&#22788;&#29702;&#23427;&#30340;&#32452;&#20214;&#12290; </p><p>&#36825;&#20010;&#32452;&#20214;&#23601;&#26159;<tt class="classname">RequiredAnnotationBeanPostProcessor</tt>&#31867;&#12290;
					&#36825;&#26159;&#19968;&#20010;&#30001;&#29305;&#27530;&#30340;<tt class="interfacename">BeanPostProcessor</tt>&#23454;&#29616;&#65292;
					&#33021;&#24863;&#30693;@<tt class="interfacename">Required</tt>&#24182;&#25552;&#20379;<span class="emphasis"><em>'&#35201;&#27714;&#23646;&#24615;&#26410;&#34987;&#35774;&#32622;&#26102;&#25552;&#31034;'</em></span>&#30340;&#36923;&#36753;&#12290;
					&#23427;<span class="emphasis"><em>&#24456;</em></span>&#23481;&#26131;&#37197;&#32622;&#65307;&#21482;&#35201;&#31616;&#21333;&#22320;&#25226;&#19979;&#21015;bean&#23450;&#20041;&#25918;&#20837;&#20320;&#30340;Spring XML&#37197;&#32622;&#20013;&#12290; 
			</p><pre class="programlisting">&lt;bean class="org.springframework.beans.factory.annotation.RequiredAnnotationBeanPostProcessor"/&gt;</pre><p>&#26368;&#21518;&#65292;&#20320;&#36824;&#33021;&#37197;&#32622;&#19968;&#20010;<tt class="classname">RequiredAnnotationBeanPostProcessor</tt>&#31867;&#30340;&#23454;&#20363;&#26469;&#26597;&#25214;
			<span class="emphasis"><em>&#20854;&#20182;</em></span><tt class="interfacename">Annotation</tt>&#31867;&#22411;&#12290;
			&#22914;&#26524;&#20320;&#26377;&#33258;&#24049;&#30340;@<tt class="interfacename">Required</tt>&#39118;&#26684;&#30340;&#27880;&#35299;&#36825;&#20250;&#26159;&#20214;&#24456;&#26834;&#30340;&#20107;&#12290;
			&#31616;&#21333;&#22320;&#25226;&#23427;&#25554;&#20837;&#19968;&#20010;<tt class="classname">RequiredAnnotationBeanPostProcessor</tt>&#30340;&#23450;&#20041;&#20013;&#23601;&#21487;&#20197;&#20102;&#12290; </p><p>&#30475;&#20010;&#20363;&#23376;&#65292;&#35753;&#25105;&#20204;&#20551;&#35774;&#20320;(&#25110;&#20320;&#30340;&#32452;&#32455;/&#22242;&#38431;)&#24050;&#32463;&#23450;&#20041;&#20102;&#19968;&#20010;&#21483;&#20570;@<tt class="interfacename">Mandatory</tt>&#30340;&#23646;&#24615;&#12290;
			&#20320;&#33021;&#29992;&#22914;&#19979;&#26041;&#27861;&#35753;&#19968;&#20010;<tt class="classname">RequiredAnnotationBeanPostProcessor</tt>&#23454;&#20363;&#24863;&#30693;@<tt class="interfacename">Mandatory</tt>&#65306; </p><pre class="programlisting">&lt;bean class="org.springframework.beans.factory.annotation.RequiredAnnotationBeanPostProcessor"&gt;
    &lt;property name="requiredAnnotationType" value="your.company.package.Mandatory"/&gt;
&lt;/bean&gt;</pre><p>&#36825;&#26159;@<tt class="interfacename">Mandatory</tt>&#27880;&#35299;&#30340;&#28304;&#20195;&#30721;&#12290;
			&#35831;&#30830;&#20445;&#20320;&#30340;&#33258;&#23450;&#20041;&#27880;&#35299;&#31867;&#22411;&#26412;&#36523;&#38024;&#23545;&#30446;&#26631;(target)&#21644;&#36816;&#34892;&#26102;&#20445;&#25345;&#31574;&#30053;(runtime retention policy)&#20351;&#29992;&#20102;&#21512;&#36866;&#30340;&#27880;&#35299;&#12290;</p><pre class="programlisting">package your.company.package;

import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface Mandatory {
}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="metadata-annotations-other"></a>25.3.2.&nbsp;Spring&#20013;&#30340;&#20854;&#23427;@Annotations</h3></div></div><div></div></div><p>&#27880;&#35299;&#20063;&#34987;&#29992;&#20110;Spring&#20013;&#30340;&#20854;&#20182;&#22320;&#26041;&#12290;&#37027;&#20123;&#27880;&#35299;&#22312;&#23427;&#20204;&#21508;&#33258;&#30340;&#31456;&#33410;&#25110;&#19982;&#23427;&#20204;&#30456;&#20851;&#30340;&#31456;&#33410;&#20013;&#20104;&#20197;&#35828;&#26126;&#12290; </p><div class="itemizedlist"><ul type="disc"><li><p>
						<a href="#transaction-declarative-annotations" title="9.5.6.&nbsp;&#20351;&#29992; @Transactional">Section&nbsp;9.5.6, &#8220;&#20351;&#29992; @Transactional&#8221;</a>
					</p></li><li><p>
						<a href="#aop-atconfigurable" title="6.8.1.&nbsp;&#22312;Spring&#20013;&#20351;&#29992;AspectJ&#36827;&#34892;domain object&#30340;&#20381;&#36182;&#27880;&#20837;">Section&nbsp;6.8.1, &#8220;&#22312;Spring&#20013;&#20351;&#29992;AspectJ&#36827;&#34892;domain object&#30340;&#20381;&#36182;&#27880;&#20837;&#8221;</a>
					</p></li><li><p>
						<a href="#aop-ataspectj" title="6.2.&nbsp;@AspectJ&#25903;&#25345;">Section&nbsp;6.2, &#8220;@AspectJ&#25903;&#25345;&#8221;</a>
					</p></li><li><p>
						<a href="#beans-annotation-config" title="3.11.&nbsp;&#22522;&#20110;&#27880;&#35299;&#65288;Annotation-based&#65289;&#30340;&#37197;&#32622;">Section&nbsp;3.11, &#8220;&#22522;&#20110;&#27880;&#35299;&#65288;Annotation-based&#65289;&#30340;&#37197;&#32622;&#8221;</a>
					</p></li><li><p>
						<a href="#beans-classpath-scanning" title="3.12.&nbsp;&#23545;&#21463;&#31649;&#32452;&#20214;&#30340;Classpath&#25195;&#25551;">Section&nbsp;3.12, &#8220;&#23545;&#21463;&#31649;&#32452;&#20214;&#30340;Classpath&#25195;&#25551;&#8221;</a>
					</p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="metadata-commons"></a>25.4.&nbsp;Jakarta Commons Attributes&#38598;&#25104;</h2></div></div><div></div></div><p>
			&#34429;&#28982;&#20026;&#20854;&#20182;&#20803;&#25968;&#25454;&#25552;&#20379;&#32773;&#25552;&#20379;<tt class="interfacename">org.springframework.metadata.Attributes</tt>
			&#25509;&#21475;&#30340;&#23454;&#29616;&#24456;&#31616;&#21333;&#65292;&#20294;&#26159;&#30446;&#21069;Spring&#21482;&#25903;&#25345;Jakarta Commons Attributes&#12290;
		</p><p>
			<span class="bold"><b>Commons Attributes 2.2</b></span>(<a href="http://jakarta.apache.org/commons/attributes/" target="_top">http://jakarta.apache.org/commons/attributes/</a>)&#26159;&#19968;&#20010;&#21151;&#33021;&#24456;&#24378;&#30340;&#20803;&#25968;&#25454;&#23646;&#24615;&#35299;&#20915;&#26041;&#26696;&#12290;
			&#23427;&#25903;&#25345;&#36890;&#36807;&#26500;&#36896;&#26041;&#27861;&#21442;&#25968;&#21644;JavaBean&#23646;&#24615;&#26469;&#37197;&#32622;&#23646;&#24615;&#65292;&#36825;&#20026;&#23646;&#24615;&#23450;&#20041;&#25552;&#20379;&#20102;&#26356;&#22909;&#30340;&#33258;&#35828;&#26126;&#25991;&#26723;&#12290;
			(&#23545;JavaBean&#23646;&#24615;&#30340;&#25903;&#25345;&#26159;&#22312;Spring&#23567;&#32452;&#30340;&#35201;&#27714;&#19979;&#28155;&#21152;&#30340;&#12290;) 
		</p><p>&#25105;&#20204;&#24050;&#32463;&#30475;&#21040;&#20102;&#20004;&#20010;Commons Attributes&#30340;&#23646;&#24615;&#23450;&#20041;&#30340;&#20363;&#23376;&#12290;&#35753;&#25105;&#20204;&#22823;&#20307;&#19978;&#35299;&#37322;&#19968;&#19979;&#65306; </p><div class="itemizedlist"><ul type="disc"><li><p>
					<span class="emphasis"><em>&#23646;&#24615;&#31867;&#30340;&#21517;&#31216;</em></span>&#12290;&#36825;&#21487;&#33021;&#26159;&#19968;&#20010;&#20840;&#38480;&#23450;&#21517;&#31216;(fully qualified name, FQN)&#65292;
					&#23601;&#20687;&#19978;&#38754;&#30340;&#37027;&#26679;&#12290;&#22914;&#26524;&#30456;&#20851;&#30340;&#23646;&#24615;&#31867;&#24050;&#32463;&#34987;&#23548;&#20837;&#65292;&#23601;&#19981;&#38656;&#35201;FQN&#20102;&#12290;&#20320;&#20063;&#21487;&#20197;&#22312;&#23646;&#24615;&#32534;&#35793;&#22120;&#30340;&#35774;&#32622;&#20013;&#25351;&#23450;&#23646;&#24615;&#30340;&#21253;&#21517;&#12290; 
				</p></li><li><p>
					<span class="emphasis"><em>&#20219;&#20309;&#24517;&#39035;&#30340;&#21442;&#25968;&#21270;&#12290;</em></span>&#21487;&#20197;&#36890;&#36807;&#26500;&#36896;&#26041;&#27861;&#21442;&#25968;&#25110;&#32773;JavaBean&#23646;&#24615;&#23436;&#25104;&#12290; 
				</p></li></ul></div><p>Bean&#30340;&#23646;&#24615;&#21487;&#20197;&#26159;&#36825;&#26679;&#30340;&#65306;</p><pre class="programlisting">/**
 * @@MyAttribute(myBooleanJavaBeanProperty=true)
 */</pre><p>&#21487;&#20197;&#25226;&#26500;&#36896;&#26041;&#27861;&#21442;&#25968;&#21644;JavaBean&#23646;&#24615;&#32467;&#21512;&#22312;&#19968;&#36215;(&#23601;&#20687;&#22312;Spring IoC&#20013;&#19968;&#26679;)&#12290; </p><p>&#30001;&#20110;Common Attributes&#27809;&#26377;&#20687;Java 1.5&#20013;&#30340;&#23646;&#24615;&#37027;&#26679;&#21644;Java&#35821;&#35328;&#26412;&#36523;&#32467;&#21512;&#36215;&#26469;&#65292;
		&#22240;&#27492;&#38656;&#35201;&#36816;&#34892;&#19968;&#20010;&#29305;&#23450;&#30340;<span class="emphasis"><em>&#23646;&#24615;&#32534;&#35793;</em></span>&#27493;&#39588;&#20316;&#20026;&#25972;&#20010;&#26500;&#24314;&#36807;&#31243;&#30340;&#19968;&#37096;&#20998;&#12290; </p><p>&#20026;&#20102;&#22312;&#25972;&#20010;&#26500;&#24314;&#36807;&#31243;&#20013;&#36816;&#34892;Commmons Attributes&#65292;&#20320;&#38656;&#35201;&#20570;&#20197;&#19979;&#30340;&#20107;&#24773;&#65306; </p><p>1. &#22797;&#21046;&#19968;&#20123;&#24517;&#35201;&#30340;jar&#21253;&#21040;<tt class="literal">$ANT_HOME/lib</tt>&#12290;&#26377;&#22235;&#20010;&#24517;&#39035;&#30340;jar&#21253;&#65292;&#23427;&#20204;&#21253;&#21547;&#22312;Spring&#30340;&#21457;&#34892;&#21253;&#37324;&#65306; </p><div class="itemizedlist"><ul type="disc"><li><p>Commons Attributes&#32534;&#35793;&#22120;jar&#21644;API jar</p></li><li><p>XDoclet&#20013;&#30340;xJavadoc.jar</p></li><li><p>Jakarta Commons&#20013;&#30340;commons-collections.jar</p></li></ul></div><p>2. &#25226;Commons Attributes&#30340;ant&#20219;&#21153;&#23548;&#20837;&#21040;&#20320;&#30340;&#39033;&#30446;&#26500;&#24314;&#33050;&#26412;&#20013;&#21435;&#65292;&#20687;&#19979;&#38754;&#36825;&#26679;&#65306; </p><pre class="programlisting">&lt;taskdef resource="org/apache/commons/attributes/anttasks.properties"/&gt;</pre><p>3. &#25509;&#19979;&#26469;&#65292;&#23450;&#20041;&#19968;&#20010;&#23646;&#24615;&#32534;&#35793;&#20219;&#21153;&#65292;&#23427;&#23558;&#20351;&#29992;Commons Attributes&#30340;attribute-compiler&#20219;&#21153;&#26469;&#8220;&#32534;&#35793;&#8221;&#28304;&#20195;&#30721;&#20013;&#30340;&#23646;&#24615;&#12290;
		&#36825;&#20010;&#36807;&#31243;&#23558;&#29983;&#25104;&#39069;&#22806;&#30340;&#20195;&#30721;&#33267;<tt class="literal">destdir</tt>&#23646;&#24615;&#25351;&#23450;&#30340;&#20301;&#32622;&#12290;&#22312;&#36825;&#37324;&#25105;&#20204;&#20351;&#29992;&#20102;&#19968;&#20010;&#20020;&#26102;&#30446;&#24405;&#26469;&#20445;&#23384;&#29983;&#25104;&#30340;&#25991;&#20214;&#65306;</p><pre class="programlisting">&lt;target name="compileAttributes"&gt;

  &lt;attribute-compiler destdir="${commons.attributes.tempdir}"&gt;
    &lt;fileset dir="${src.dir}" includes="**/*.java"/&gt;
  &lt;/attribute-compiler&gt;

&lt;/target&gt;</pre><p>&#36816;&#34892;javac&#21629;&#20196;&#32534;&#35793;&#28304;&#20195;&#30721;&#30340;&#32534;&#35793;&#30446;&#26631;&#20219;&#21153;&#24212;&#35813;&#20381;&#36182;&#20110;&#23646;&#24615;&#32534;&#35793;&#20219;&#21153;&#65292;&#36824;&#38656;&#35201;&#32534;&#35793;&#23646;&#24615;&#26102;&#29983;&#25104;&#33267;&#30446;&#26631;&#20020;&#26102;&#30446;&#24405;&#30340;&#28304;&#20195;&#30721;&#12290;
		&#22914;&#26524;&#22312;&#23646;&#24615;&#23450;&#20041;&#20013;&#26377;&#35821;&#27861;&#38169;&#35823;&#65292;&#36890;&#24120;&#37117;&#20250;&#34987;&#23646;&#24615;&#32534;&#35793;&#22120;&#25429;&#33719;&#21040;&#12290;&#20294;&#26159;&#65292;&#22914;&#26524;&#23646;&#24615;&#23450;&#20041;&#22312;&#35821;&#27861;&#19978;&#20284;&#26159;&#32780;&#38750;&#65292;&#21364;&#20351;&#29992;&#20102;&#19968;&#20123;&#38750;&#27861;&#30340;&#31867;&#22411;&#25110;&#31867;&#21517;&#65292;
		&#29983;&#25104;&#23646;&#24615;&#31867;&#30340;&#32534;&#35793;&#21487;&#33021;&#20250;&#22833;&#36133;&#12290;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#20320;&#21487;&#20197;&#30475;&#30475;&#25152;&#29983;&#25104;&#30340;&#31867;&#26469;&#30830;&#23450;&#38169;&#35823;&#30340;&#21407;&#22240;&#12290; </p><i><span class="remark">Commons Attributes&#20063;&#25552;&#20379;&#23545;Maven&#30340;&#25903;&#25345;&#12290;&#35831;&#21442;&#32771;Commons Attributes&#30340;&#25991;&#26723;&#24471;&#21040;&#36827;&#19968;&#27493;&#30340;&#20449;&#24687;&#12290; </span></i><p>&#34429;&#28982;&#23646;&#24615;&#32534;&#35793;&#30340;&#36807;&#31243;&#21487;&#33021;&#30475;&#36215;&#26469;&#22797;&#26434;&#65292;&#23454;&#38469;&#19978;&#23427;&#26159;&#19968;&#27425;&#24615;&#30340;&#33457;&#38144;&#12290;&#19968;&#26086;&#34987;&#21019;&#24314;&#21518;&#65292;&#23646;&#24615;&#30340;&#32534;&#35793;&#26159;&#36882;&#22686;&#24335;&#30340;&#65292;&#25152;&#20197;&#36890;&#24120;&#23427;&#19981;&#20250;&#26126;&#26174;&#20943;&#24930;&#25972;&#20010;&#26500;&#24314;&#36807;&#31243;&#12290;
			&#19968;&#26086;&#32534;&#35793;&#36807;&#31243;&#24314;&#31435;&#36215;&#26469;&#21518;&#65292;&#20320;&#21487;&#33021;&#20250;&#21457;&#29616;&#26412;&#31456;&#20013;&#25551;&#36848;&#30340;&#23646;&#24615;&#30340;&#20351;&#29992;&#23558;&#33410;&#30465;&#22312;&#20854;&#20182;&#26041;&#38754;&#30340;&#26102;&#38388;&#12290; 
		</p><p>&#22914;&#26524;&#38656;&#35201;&#23646;&#24615;&#32034;&#24341;&#25903;&#25345;(&#30446;&#21069;&#21482;&#22312;Spring&#30340;&#20197;&#23646;&#24615;&#20026;&#30446;&#26631;&#30340;web&#25511;&#21046;&#22120;&#20013;&#38656;&#35201;&#65292;&#19979;&#38754;&#20250;&#35752;&#35770;&#21040;)&#65292;&#20320;&#38656;&#35201;&#22312;&#21253;&#21547;&#32534;&#35793;&#21518;&#30340;&#31867;&#30340;jar&#25991;&#20214;&#19978;&#25191;&#34892;&#19968;&#20010;&#39069;&#22806;&#30340;&#27493;&#39588;&#12290;
			&#22312;&#36825;&#27493;&#21487;&#36873;&#30340;&#27493;&#39588;&#20013;&#65292;Commons Attributes&#23558;&#20026;&#20320;&#22312;&#28304;&#20195;&#30721;&#20013;&#23450;&#20041;&#30340;&#25152;&#26377;&#23646;&#24615;&#21019;&#24314;&#19968;&#20010;&#32034;&#24341;&#65292;&#20197;&#20415;&#22312;&#36816;&#34892;&#26102;&#36827;&#34892;&#26377;&#25928;&#30340;&#26597;&#25214;&#12290; &#35813;&#27493;&#39588;&#22914;&#19979;&#65306; 
		</p><pre class="programlisting">&lt;attribute-indexer jarFile="myCompiledSources.jar"&gt;
    
  &lt;classpath refid="master-classpath"/&gt;

&lt;/attribute-indexer&gt;</pre><i><span class="remark">&#21487;&#20197;&#21040;Spring jPetStore&#20363;&#31243;&#19979;&#30340;<tt class="literal">/attributes</tt>&#30446;&#24405;&#19979;&#23519;&#30475;&#23427;&#30340;&#26500;&#24314;&#36807;&#31243;&#12290;
		&#20320;&#21487;&#20197;&#20351;&#29992;&#23427;&#37324;&#38754;&#30340;&#26500;&#24314;&#33050;&#26412;&#65292;&#24182;&#20462;&#25913;&#35813;&#33050;&#26412;&#20197;&#36866;&#24212;&#20320;&#33258;&#24049;&#30340;&#39033;&#30446;&#12290; </span></i><p>&#22914;&#26524;&#20320;&#30340;&#21333;&#20803;&#27979;&#35797;&#20381;&#36182;&#20110;&#23646;&#24615;&#65292;&#23613;&#37327;&#20351;&#23427;&#20381;&#36182;&#20110;Spring Attributes&#25277;&#35937;&#65292;&#32780;&#19981;&#26159;Commons Attributes&#12290;&#21407;&#22240;&#26377;&#20004;&#28857;&#65292;
		&#20854;&#19968;&#26159;&#20026;&#20102;&#26356;&#22909;&#30340;&#31227;&#26893;&#24615; - &#20030;&#20363;&#26469;&#35828;&#65292;&#20320;&#30340;&#27979;&#35797;&#29992;&#20363;&#23558;&#26469;&#20173;&#21487;&#20197;&#24037;&#20316;&#22914;&#26524;&#20320;&#36716;&#25442;&#33267;Java 1.5&#30340;&#23646;&#24615; - &#23427;&#31616;&#21270;&#20102;&#27979;&#35797;&#12290;
		&#20854;&#27425;&#65292;Commons Attributes&#26159;&#38745;&#24577;&#30340;API&#65292;&#32780;Spring&#25552;&#20379;&#30340;&#26159;&#19968;&#20010;&#23481;&#26131;&#27169;&#25311;&#30340;&#20803;&#25968;&#25454;&#25509;&#21475;&#12290; </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="metadata-uses"></a>25.5.&nbsp;&#20803;&#25968;&#25454;&#21644;Spring AOP&#33258;&#21160;&#20195;&#29702;</h2></div></div><div></div></div><p>&#20803;&#25968;&#25454;&#23646;&#24615;&#26368;&#26377;&#29992;&#30340;&#23601;&#26159;&#19982;Spring AOP&#32852;&#21512;&#20351;&#29992;&#12290;&#36825;&#25552;&#20379;&#20102;&#19968;&#20010;&#31867;&#20284;.NET&#30340;&#32534;&#31243;&#27169;&#22411;&#65306;&#22768;&#26126;&#24335;&#26381;&#21153;&#20250;&#33258;&#21160;&#25552;&#20379;&#32473;&#22768;&#26126;&#20102;&#20803;&#25968;&#25454;&#30340;&#23646;&#24615;&#12290;
			&#36825;&#20123;&#20803;&#25968;&#25454;&#23646;&#24615;&#21487;&#20197;&#34987;&#26694;&#26550;&#25903;&#25345;&#65292;&#27604;&#22914;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;&#65292;&#21516;&#26102;&#20063;&#33021;&#23450;&#21046;&#12290; </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="metadata-fundamentals"></a>25.5.1.&nbsp;&#22522;&#26412;&#21407;&#29702;</h3></div></div><div></div></div><p>&#22522;&#20110;Spring AOP&#30340;&#33258;&#21160;&#20195;&#29702;&#21151;&#33021;&#65292;&#37197;&#32622;&#21487;&#33021;&#22914;&#19979;&#25152;&#31034;&#65306; </p><pre class="programlisting">&lt;bean class="org.springframework.aop.framework.autoproxy.DefaultAdvisorAutoProxyCreator"/&gt;

&lt;bean class="org.springframework.transaction.interceptor.TransactionAttributeSourceAdvisor"&gt;
  &lt;property name="transactionInterceptor" ref="txInterceptor" /&gt;
&lt;/bean&gt;

&lt;bean id="txInterceptor" class="org.springframework.transaction.interceptor.TransactionInterceptor"&gt;
  &lt;property name="transactionManager" ref="transactionManager" /&gt;
  &lt;property name="transactionAttributeSource"&gt;
    &lt;bean class="org.springframework.transaction.interceptor.AttributesTransactionAttributeSource"&gt;
      &lt;property name="attributes" ref="attributes" /&gt;
    &lt;/bean&gt;
  &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id="attributes" class="org.springframework.metadata.commons.CommonsAttributes" /&gt;</pre><p>&#36825;&#37324;&#30340;&#22522;&#26412;&#21407;&#29702;&#19982;AOP&#31456;&#33410;&#20851;&#20110;&#33258;&#21160;&#20195;&#29702;&#30340;&#35752;&#35770;&#31867;&#20284;&#12290; </p><p>&#26368;&#37325;&#35201;&#30340;bean&#23450;&#20041;&#26159;&#33258;&#21160;&#20195;&#29702;&#30340;creator&#21644;advisor&#12290;&#27880;&#24847;&#23454;&#38469;&#30340;bean&#21517;&#31216;&#24182;&#19981;&#37325;&#35201;&#65292;&#37325;&#35201;&#30340;&#26159;&#23427;&#20204;&#30340;&#31867;&#12290; </p><p>
				<tt class="classname">org.springframework.aop.framework.autoproxy.DefaultAdvisorAutoProxyCreator</tt>
				&#30340;bean&#23450;&#20041;&#20250;&#26681;&#25454;&#21305;&#37197;advisor&#23454;&#29616;&#26469;&#33258;&#21160;&#36890;&#30693;("auto-proxy")&#24403;&#21069;&#24037;&#21378;&#20013;&#30340;&#25152;&#26377;bean&#23454;&#20363;&#12290;
				&#36825;&#20010;&#31867;&#23545;&#23646;&#24615;&#19968;&#26080;&#25152;&#30693;&#65292;&#21482;&#26159;&#20381;&#36182;&#20110;advisor&#21305;&#37197;&#30340;&#20999;&#20837;&#28857;&#65292;&#32780;&#20999;&#20837;&#28857;&#20102;&#35299;&#36825;&#20123;&#23646;&#24615;&#12290; </p><p>&#22240;&#27492;&#25105;&#20204;&#21482;&#38656;&#35201;&#19968;&#20010;&#33021;&#25552;&#20379;&#22522;&#20110;&#23646;&#24615;&#30340;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;&#30340;AOP advisor&#12290; </p><p>&#36825;&#26679;&#36824;&#33021;&#28155;&#21152;&#33258;&#23450;&#20041;&#30340;advisor&#23454;&#29616;&#65292;&#23427;&#20204;&#33021;&#34987;&#33258;&#21160;&#36816;&#31639;&#24182;&#24212;&#29992;&#12290;
			(&#22914;&#26524;&#26377;&#24517;&#35201;&#65292;&#20320;&#20063;&#21487;&#20197;&#20351;&#29992;&#36825;&#26679;&#30340;advisor&#65292;&#23427;&#30340;&#20999;&#20837;&#28857;&#36824;&#33021;&#21305;&#37197;&#37027;&#20123;&#30456;&#21516;&#33258;&#21160;&#20195;&#29702;&#37197;&#32622;&#20013;&#38500;&#23646;&#24615;&#20197;&#22806;&#30340;&#26465;&#20214;&#12290;)</p><p>&#26368;&#21518;&#65292;<tt class="literal">&#23646;&#24615;</tt>bean&#26159;Commons Attributes&#20013;&#30340;Attributes&#30340;&#23454;&#29616;&#12290;
			&#25226;&#23427;&#26367;&#25442;&#20026;&#20854;&#23427;&#30340;<tt class="interfacename">org.springframework.metadata.Attributes</tt>&#25509;&#21475;&#23454;&#29616;&#65292;&#23601;&#21487;&#20197;&#20174;&#21478;&#22806;&#30340;&#28304;&#33719;&#24471;&#23646;&#24615;&#20102;&#12290;
			</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="metadata-tx"></a>25.5.2.&nbsp;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;</h3></div></div><div></div></div><p>&#28304;&#30721;&#32423;&#23646;&#24615;&#30340;&#24120;&#35265;&#24212;&#29992;&#23601;&#26159;&#25552;&#20379;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;&#12290;&#19968;&#26086;&#26377;&#20102;&#21069;&#38754;&#30340;bean&#23450;&#20041;&#65292;&#20320;&#23601;&#21487;&#20197;&#23450;&#20041;&#20219;&#24847;&#22810;&#30340;&#38656;&#35201;&#22768;&#26126;&#24335;&#20107;&#21153;&#30340;&#24212;&#29992;&#31243;&#24207;&#23545;&#35937;&#12290;
				&#21482;&#26377;&#23450;&#20041;&#20102;&#20107;&#21153;&#23646;&#24615;&#30340;&#31867;&#25110;&#32773;&#26041;&#27861;&#20250;&#34987;&#36171;&#20104;&#20107;&#21153;&#36890;&#30693;&#12290;&#20320;&#21807;&#19968;&#35201;&#20570;&#30340;&#23601;&#26159;&#23450;&#20041;&#38656;&#35201;&#30340;&#20107;&#21153;&#23646;&#24615;&#12290; </p><p>&#35831;&#27880;&#24847;&#20320;&#21487;&#20197;&#22312;&#31867;&#25110;&#26041;&#27861;&#32423;&#21035;&#25351;&#23450;&#20107;&#21153;&#23646;&#24615;&#12290;&#22914;&#26524;&#25351;&#23450;&#20102;&#31867;&#32423;&#21035;&#30340;&#23646;&#24615;&#65292;&#23427;&#23558;&#20250;&#34987;&#25152;&#26377;&#26041;&#27861;&#8220;&#32487;&#25215;&#8221;&#12290;
			&#26041;&#27861;&#32423;&#23646;&#24615;&#21017;&#20250;&#25972;&#20307;&#35206;&#30422;&#20219;&#24847;&#30340;&#31867;&#32423;&#21035;&#23646;&#24615;&#12290; </p></div></div></div></div><div class="part" lang="en"><div class="titlepage"><div><div><h1 class="title"><a name="spring-samples"></a>&#31034;&#20363;&#31243;&#24207;</h1></div></div><div></div></div><div class="partintro" lang="en"><div><div></div><div></div></div><p>
				&#21442;&#32771;&#25163;&#20876;&#30340;&#26368;&#21518;&#19968;&#37096;&#20998;&#65292;&#28085;&#30422;&#20102;Spring &#24320;&#21457;&#26694;&#26550;&#21457;&#34892;&#21253;&#20013;&#38468;&#24102;&#30340;&#31034;&#20363;&#31243;&#24207;&#12290;
			</p></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="showcases"></a>Chapter&nbsp;26.&nbsp;&#28436;&#31034;&#26696;&#20363;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="showcases-introduction"></a>26.1.&nbsp;&#20171;&#32461;</h2></div></div><div></div></div><p>
			Spring Framework&#21457;&#34892;&#21253;&#20013;&#36824;&#24102;&#26377;&#20960;&#20010;&#25152;&#35859;&#30340;<span class="emphasis"><em>&#26696;&#20363;</em></span>&#12290;&#27599;&#20010;&#26696;&#20363;&#37117;&#25552;&#20379;&#20102;&#21487;&#36816;&#34892;&#30340;&#33539;&#20363;&#65292;
			&#27599;&#27425;&#28436;&#31034;&#26576;&#19968;&#20010;Spring 2.0&#30340;&#26032;&#29305;&#24615;&#12290;&#36825;&#20040;&#20570;&#30340;&#30446;&#30340;&#26159;&#35753;&#20320;&#21487;&#20197;&#20351;&#29992;&#20854;&#20013;&#30340;&#20195;&#30721;&#26469;&#36827;&#34892;&#20307;&#39564;&#65292;
			&#32780;&#26080;&#38656;&#33258;&#24049;&#21160;&#25163;&#21019;&#24314;&#35797;&#29992;Spring 2.0&#26032;&#29305;&#24615;&#30340;&#23567;&#39033;&#30446;&#12290;&#36825;&#20123;&#28436;&#31034;&#26696;&#20363;&#30340;&#33539;&#22260;&#26159;&#26377;&#38480;&#30340;&#65307;&#22495;&#27169;&#22411;&#65288;&#22914;&#26524;&#26377;&#30340;&#35805;&#65289;&#21487;&#33021;&#21482;&#26377;&#19968;&#25110;&#20004;&#20010;&#31867;&#65292;
			&#19968;&#33324;&#20225;&#19994;&#32771;&#34385;&#30340;&#35832;&#22914;&#23433;&#20840;&#12289;&#38169;&#35823;&#26816;&#26597;&#21644;&#20107;&#21153;&#23436;&#25972;&#24615;&#20043;&#31867;&#30340;&#19996;&#35199;&#37117;&#34987;&#24573;&#30053;&#20102;&#12290;
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="showcases-dynamvc"></a>26.2.&nbsp;&#20351;&#29992;&#21160;&#24577;&#35821;&#35328;&#23454;&#29616;&#30340;Spring MVC&#25511;&#21046;&#22120;</h2></div></div><div></div></div><p>
		&#36825;&#20010;&#23567;&#24212;&#29992;&#26696;&#20363;&#20351;&#29992;Spring 2.0&#24341;&#20837;&#30340;&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;&#26469;&#23454;&#29616;Spring MVC&#25511;&#21046;&#22120;&#12290;
	</p><p>
		&#36825;&#20010;Web&#24212;&#29992;&#31243;&#24207;<span class="emphasis"><em>&#24456;</em></span>&#31616;&#21333;&#65292;&#22240;&#20026;&#20854;&#30446;&#30340;&#21482;&#26159;&#25226;&#22522;&#26412;&#30340;&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;&#36816;&#29992;&#20110;Spring MVC&#20013;&#65292;&#27809;&#21035;&#30340;&#19996;&#35199;&#20102;&#12290;
	</p><p>
		&#24212;&#29992;&#31243;&#24207;&#20013;&#26377;&#19968;&#20010;Groovy&#25991;&#20214;&#12290;&#21517;&#23383;&#26159;'FortuneController.groovy'&#65292;&#25918;&#22312;'war/WEB-INF/groovy'&#25991;&#20214;&#22841;&#20013;&#12290;
		'war/WEB-INF/fortune-servlet.xml'&#36825;&#20010;Spring MVC&#37197;&#32622;&#25991;&#20214;&#30340; 'fortune' bean&#20250;&#24341;&#29992;&#35813;Groovy&#33050;&#26412;&#25991;&#20214;&#12290;
	</p><p>
&#36890;&#36807;&lt;lang:groovy/&gt;&#20803;&#32032;&#30340;'refresh-check-delay'&#23646;&#24615;&#65292;'fortune'
bean&#34987;&#35774;&#32622;&#20026;refreshable
bean&#12290;&#65288;&#26657;&#23545;&#26102;&#27880;&#24847;&#21435;&#25481;&#26412;&#25324;&#21495;&#65292;&#21160;&#24577;&#35821;&#35328;&#31456;&#33410;&#20013;refreshable&#26410;&#32763;&#35793;&#65292;&#25925;&#27492;&#22788;&#23545;&#35813;&#21477;&#20570;&#20102;&#30456;&#24212;&#35843;&#25972;&#12290;&#65289;
&#35813;&#23646;&#24615;&#35774;&#32622;&#20026;'3000'&#20063;&#23601;&#26159;&#35828;&#23545;'FortuneController.groovy'&#20250;&#22312;3&#31186;&#38047;&#24310;&#26102;&#21518;&#29983;&#25928;&#12290; </p><p>
		&#22914;&#26524;&#26159;&#25226;&#24212;&#29992;&#31243;&#24207;&#37096;&#32626;&#21040;Tomcat&#65288;&#25171;&#20010;&#27604;&#26041;&#65289;&#65292;&#37027;&#20320;&#21487;&#20197;&#36827;&#20837;'/WEB-INF/groovy'&#25991;&#20214;&#22841;&#65292;&#30452;&#25509;&#32534;&#36753;'FortuneController.groovy'&#25991;&#20214;&#12290;
		&#20219;&#20309;&#25913;&#21464;&#37117;&#20250;&#33258;&#21160;&#29983;&#25928;&#65292;'fortune' bean&#23558;&#34987;&#37325;&#26032;&#37197;&#32622;&#8230;&#8230;&#23436;&#20840;&#26080;&#38656;&#20572;&#27490;&#12289;&#37325;&#26032;&#37096;&#32626;&#24182;&#37325;&#21551;&#24212;&#29992;&#31243;&#24207;&#12290;&#20146;&#33258;&#23581;&#35797;&#19968;&#19979;&#21543;&#8230;&#8230;
		&#27627;&#26080;&#30097;&#38382;'FortuneController.groovy'&#25991;&#20214;&#37324;&#24182;&#27809;&#26377;&#20160;&#20040;&#24456;&#22797;&#26434;&#30340;&#36923;&#36753;&#65288;&#36825;&#26159;&#20214;&#22909;&#20107;&#65292;&#22240;&#20026;Spring MVC&#20013;&#30340;&#25511;&#21046;&#22120;&#26412;&#26469;&#23601;&#35813;&#23613;&#21487;&#33021;&#22320;&#31616;&#21333;&#19968;&#20123;&#65289;&#12290;
	</p><p>
		&#20320;&#21487;&#20197;&#35797;&#30528;&#36820;&#22238;&#19968;&#20010;&#40664;&#35748;&#30340;Fortune&#32780;&#19981;&#26159;&#23558;&#23427;&#20195;&#29702;&#32473;&#27880;&#20837;&#30340;FortuneService&#65292;&#25110;&#32773;&#20063;&#21487;&#20197;&#36820;&#22238;&#19968;&#20010;&#19981;&#21516;&#30340;&#36923;&#36753;&#35270;&#22270;&#21517;&#65292;
		&#22914;&#26524;&#24819;&#26356;&#36827;&#19968;&#27493;&#30340;&#35805;&#65292;&#36824;&#21487;&#20197;&#33258;&#24049;&#21019;&#24314;&#19968;&#20010;&#23454;&#29616;&#20102;FortuneService&#25509;&#21475;&#30340;Groovy&#23454;&#29616;&#65292;&#24182;&#23558;&#23427;&#25554;&#20837;Web&#24212;&#29992;&#31243;&#24207;&#20013;&#12290;
		&#20063;&#35768;&#20320;&#33258;&#23450;&#20041;&#30340;Groovy FortuneService&#21487;&#20197;&#35775;&#38382;Web&#26381;&#21153;&#26469;&#33719;&#24471;&#26576;&#20123;Fortune&#65292;&#20134;&#25110;&#32773;&#24212;&#29992;&#19968;&#20123;&#19981;&#21516;&#30340;&#38543;&#26426;&#36923;&#36753;&#26469;&#36820;&#22238;Fortune&#65292;&#38543;&#20415;&#24590;&#20040;&#26679;&#37117;&#34892;&#12290;
		&#20851;&#38190;&#26159;&#22312;&#20570;&#36825;&#20123;&#21464;&#26356;&#26102;&#26080;&#38656;&#37325;&#26032;&#37096;&#32626;&#24212;&#29992;&#31243;&#24207;&#12290;&#36825;&#22312;&#20570;&#24555;&#36895;&#21407;&#22411;&#24320;&#21457;&#26102;&#31616;&#30452;&#22826;&#26834;&#20102;&#12290;
	</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="showcases-dynamvc-build"></a>26.2.1.&nbsp;&#26500;&#24314;&#19982;&#37096;&#32626;</h3></div></div><div></div></div><p>
			<span class="emphasis"><em>samples/showcases/dynamvc</em></span>&#30446;&#24405;&#21253;&#21547;&#20102;web-app&#30340;&#28304;&#20195;&#30721;&#12290;&#37096;&#32626;&#26102;&#38656;&#35201;&#29992;Apache Ant&#36827;&#34892;&#26500;&#24314;&#12290;
			&#21807;&#19968;&#30340;&#35201;&#27714;&#26159;JDK &gt;=1.4&#65288;Groovy&#35201;&#27714;JDK&#33267;&#23569;&#35201;&#26159;1.4&#30340;&#65289;Ant &gt;=1.5&#12290;
		</p><p>
			&#22312;&#35813;&#30446;&#24405;&#20013;&#36816;&#34892;&#8220;build.bat&#8221;&#65292;&#24102;&#19978;&#26576;&#20010;&#30446;&#26631;&#65288;&#20363;&#22914;"build.bat build","build.bat warfile"&#65289;&#12290;
			&#35831;&#27880;&#24847;&#65292;&#29992;&#36825;&#31181;&#26041;&#24335;&#21551;&#21160;Ant&#20320;&#38656;&#35201;&#22312;classpath&#20013;&#23384;&#22312;&#19968;&#20010;XML&#35299;&#26512;&#22120;&#65288;&#20363;&#22914;&#25918;&#22312;"%JAVA_HOME%/jre/lib/ext"&#20013;&#65307;&#21253;&#21547;&#22312;JDK 1.4&#20013;&#65289;&#12290;
			&#21487;&#20197;&#29992;&#8220;warfile.bat&#8221;&#26469;&#29983;&#25104;WAR&#25991;&#20214;&#12290;WAR&#25991;&#20214;&#20250;&#34987;&#24314;&#22312;"dist"&#30446;&#24405;&#20013;&#12290;
		</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="showcases-java5-dao"></a>26.3.&nbsp;&#20351;&#29992;<tt class="classname">SimpleJdbcTemplate</tt>&#21644;<tt class="interfacename">@Repository</tt>&#23454;&#29616;DAO</h2></div></div><div></div></div><p>
		&#36825;&#20010;&#23567;&#26696;&#20363;&#36890;&#36807;Spring&#20013;&#30340;&#19968;&#20123;Java5&#29305;&#24615;&#65292;&#20351;&#29992;Hibernate&#21644;JDBC&#23454;&#29616;&#20102;DAO&#12290;&#36825;&#20010;&#39033;&#30446;<span class="emphasis"><em>&#38750;&#24120;</em></span>&#31616;&#21333;&#65292;
		&#22240;&#20026;&#20854;&#30446;&#30340;&#21482;&#26159;&#28436;&#31034;<tt class="classname">SimpleJdbcTemplate</tt>&#21644;<tt class="interfacename">@Repository</tt>&#27880;&#35299;&#30340;&#22522;&#26412;&#29992;&#27861;&#21450;&#20960;&#20010;&#20854;&#20182;DAO&#30456;&#20851;&#30340;&#29305;&#24615;&#65292;
		&#27809;&#20854;&#20182;&#20869;&#23481;&#20102;&#12290;
	</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="showcases-java5-dao-the-domain"></a>26.3.1.&nbsp;&#22495;&#23545;&#35937;</h3></div></div><div></div></div><p>
			&#33539;&#20363;&#20013;&#30340;&#22495;&#23545;&#35937;&#26159;&#36710;&#30340;&#37096;&#20214;&#12290;&#26377;&#20004;&#20010;&#31867;&#65306;<tt class="classname">Part</tt>&#21644;<tt class="classname">CarModel</tt>&#12290;
			&#20351;&#29992;<tt class="interfacename">CarPartsInventory</tt>&#21487;&#20197;&#26597;&#35810;&#37096;&#20214;&#65292;&#26356;&#26032;&#26576;&#20123;&#37096;&#20214;&#30340;&#24211;&#23384;&#20197;&#21450;&#28155;&#21152;&#26032;&#37096;&#20214;&#12290;
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="showcases-java5-dao-the-daos"></a>26.3.2.&nbsp;Data Access Object</h3></div></div><div></div></div><p>
			&#26377;3&#20010;&#22522;&#20110;<tt class="interfacename">CarPartsInventory</tt>&#25509;&#21475;&#30340;DAO&#23454;&#29616;&#65292;&#37319;&#29992;&#20102;&#19981;&#21516;&#30340;&#39118;&#26684;&#12290; 
			&#20004;&#20010;&#20351;&#29992;Hibernate&#65292;&#21478;&#19968;&#20010;&#29992;JDBC&#12290;<tt class="classname">JdbcCarPartsInventoryImpl</tt>&#29992;&#20102;JDBC&#21644;<tt class="classname">SimpleJdbcTemplate</tt>&#12290;
			&#22914;&#26524;&#20180;&#32454;&#30475;&#36825;&#20010;DAO&#65292;&#20320;&#23558;&#21457;&#29616;<tt class="classname">SimpleJdbcTemplate</tt>&#20351;&#29992;&#30340;Java5&#29305;&#24615;&#22823;&#22823;&#31616;&#21270;&#20102;&#20320;&#30340;DAO&#20195;&#30721;&#12290;
		</p><p>
			<tt class="classname">TemplateHibernateCarPartsInventoryImpl</tt>&#20351;&#29992;<tt class="classname">HibernateTemplate</tt>&#26469;&#26597;&#35810;Part&#24182;&#26356;&#26032;&#24211;&#23384;&#12290;
			&#22914;&#26524;&#20320;&#24050;&#32463;&#20064;&#24815;&#20102;&#20351;&#29992;Spring&#21644;Hibernate&#36827;&#34892;&#24320;&#21457;&#65292;&#37027;&#36825;&#37324;&#23601;&#27809;&#26377;&#20160;&#20040;&#29305;&#21035;&#30340;&#19996;&#35199;&#20102;&#12290;
			<tt class="literal">PlainHibernateCarPartsInventoryImpl</tt>&#24182;&#27809;&#26377;&#20351;&#29992;<tt class="classname">HibernateTemplate</tt>&#12290;
			&#23427;&#29992;&#20102;Hibernate3 API&#26597;&#35810;&#20250;&#35805;&#21644;&#25968;&#25454;&#24211;&#26469;&#33719;&#21462;&#37096;&#20214;&#12290;&#24403;&#28982;&#65292;Hibernate3 API&#24182;&#19981;&#20250;&#25243;&#20986;Spring <tt class="exceptionname">DataAccessExceptions</tt>&#65292;
			&#36825;&#20063;&#26159;&#26368;&#21021;&#20351;&#29992;<tt class="classname">HibernateTemplate</tt>&#30340;&#21407;&#22240;&#20043;&#19968;&#12290;Spring 2.0&#28155;&#21152;&#20102;&#19968;&#20010;&#27880;&#35299;&#65292;&#35753;&#20320;&#20173;&#26087;&#21487;&#20197;&#33719;&#24471;&#30456;&#21516;&#30340;&#34892;&#20026;&#12290;
			<tt class="interfacename">@Repository</tt>&#27880;&#35299;&#65288;&#22914;&#26524;&#20180;&#32454;&#30475;<tt class="classname">PlainHibernateCarPartsInventoryImpl</tt>&#65292;&#20320;&#20250;&#21457;&#29616;&#19978;&#38754;&#26377;&#36825;&#20010;&#27880;&#35299;&#65289;
			&#20250;&#32467;&#21512;<tt class="classname">PersistenceExceptionTranslatorPostProcessor</tt>
			&#33258;&#21160;&#23558;Hibernate&#24322;&#24120;&#36716;&#25442;&#20026;Spring <tt class="classname">DataAccessExceptions</tt>&#12290;
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="showcases-java5-dao-build"></a>26.3.3.&nbsp;&#26500;&#24314;</h3></div></div><div></div></div><p>
			<span class="emphasis"><em>samples/showcases/java5-dao</em></span>&#30446;&#24405;&#21253;&#21547;&#20102;&#39033;&#30446;&#30340;&#28304;&#20195;&#30721;&#12290;
			&#39033;&#30446;&#21482;&#21253;&#21547;&#21333;&#20803;&#27979;&#35797;&#65292;&#20320;&#21487;&#20197;&#33073;&#31163;&#28304;&#20195;&#30721;&#26469;&#30475;&#36825;&#20123;&#21333;&#20803;&#27979;&#35797;&#12290;&#35201;&#26500;&#24314;&#24182;&#36816;&#34892;&#36825;&#20123;&#21333;&#20803;&#27979;&#35797;&#65292;&#38656;&#35201;&#20351;&#29992;Apache Ant
			&#65288;&#25110;&#22312;&#20320;&#21916;&#27426;&#30340;IDE&#20013;&#36816;&#34892;&#33539;&#20363;&#65289;&#12290;&#22312;Java5 VM&#20013;&#36816;&#34892;<tt class="literal">ant tests</tt>&#65288;&#39033;&#30446;&#20013;&#20351;&#29992;&#20102;&#27880;&#35299;&#21644;&#27867;&#22411;&#65289;&#12290;
		</p></div></div></div></div><div class="appendix" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="xsd-config"></a>Appendix&nbsp;A.&nbsp;XML Schema-based configuration</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="xsd-config-introduction"></a>A.1.&nbsp;Introduction</h2></div></div><div></div></div><p>This appendix details the XML Schema-based configuration introduced in Spring 2.0.</p><div class="sidebar"><p class="title"><b>DTD support?</b></p><p>Authoring Spring configuration files using the older DTD style
            is still fully supported.</p><p>Nothing will break if you forego the use of the new XML Schema-based
            approach to authoring Spring XML configuration files. All that you lose
            out on is the opportunity to have more succinct and clearer configuration.
            Regardless of whether the XML configuration is DTD- or Schema-based, in the end
            it all boils down to the same object model in the container (namely one or
            more <tt class="interfacename">BeanDefinition</tt> instances).</p></div><p>The central motivation for moving to XML Schema based configuration files was
        to make Spring XML configuration easier. The <span class="emphasis"><em>'classic'</em></span>
        <tt class="literal">&lt;bean/&gt;</tt>-based approach is good, but its generic-nature comes
        with a price in terms of configuration overhead.</p><p>From the Spring IoC containers point-of-view, <span class="emphasis"><em>everything</em></span>
        is a bean. That's great news for the Spring IoC container, because if everything is
        a bean then everything can be treated in the exact same fashion. The same, however,
        is not true from a developer's point-of-view. The objects defined in a Spring
        XML configuration file are not all generic, vanilla beans. Usually, each bean requires
        some degree of specific configuration.</p><p>Spring 2.0's new XML Schema-based configuration addresses this issue.
        The <tt class="literal">&lt;bean/&gt;</tt> element is still present, and if you
        wanted to, you could continue to write the <span class="emphasis"><em>exact same</em></span>
        style of Spring XML configuration using only <tt class="literal">&lt;bean/&gt;</tt>
        elements. The new XML Schema-based configuration does, however, make
        Spring XML configuration files substantially clearer to read. In addition, it allows
        you to express the intent of a bean definition.</p><p>The key thing to remember is that the new custom tags work best for infrastructure
        or integration beans: for example, AOP, collections, transactions, integration with
        3rd-party frameworks such as Mule, etc., while the existing bean tags are best suited to
        application-specific beans, such as DAOs, service layer objects, validators, etc.</p><p>The examples included below will hopefully convince you that the inclusion
        of XML Schema support in Spring 2.0 was a good idea. The reception in the community
        has been encouraging; also, please note the fact that this new configuration mechanism
        is totally customisable and extensible. This means you can write your own domain-specific
        configuration tags that would better represent your application's domain; the process
        involved in doing so is covered in the appendix entitled <a href="#extensible-xml" title="Appendix&nbsp;B.&nbsp;Extensible XML authoring">Appendix&nbsp;B, <i>Extensible XML authoring</i></a>.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="xsd-config-body"></a>A.2.&nbsp;XML Schema-based configuration</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="xsd-config-body-referencing"></a>A.2.1.&nbsp;Referencing the schemas</h3></div></div><div></div></div><p>To switch over from the DTD-style to the new XML Schema-style, you need
            to make the following change.</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN 2.0//EN"
    "http://www.springframework.org/dtd/spring-beans-2.0.dtd"&gt;

&lt;beans&gt;

<i class="lineannotation"><span class="lineannotation">&lt;!-- <tt class="literal">&lt;bean/&gt;</tt> definitions here --&gt;</span></i>

&lt;/beans&gt;</pre><p>The equivalent file in the XML Schema-style would be...</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"&gt;

<i class="lineannotation"><span class="lineannotation">&lt;!-- <tt class="literal">&lt;bean/&gt;</tt> definitions here --&gt;</span></i>

&lt;/beans&gt;</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>The <tt class="literal">'xsi:schemaLocation'</tt> fragment is not actually required,
                but can be included to reference a local copy of a schema (which can be useful
                during development).</p></td></tr></tbody></table></div><p>The above Spring XML configuration fragment is boilerplate that you can copy and paste
            (!) and then plug <tt class="literal">&lt;bean/&gt;</tt> definitions into like you have always
            done. However, the entire point of switching over is to
            take advantage of the new Spring 2.0 XML tags since they make configuration easier. The
            section entitled <a href="#xsd-config-body-schemas-util" title="A.2.2.&nbsp;The util schema">Section&nbsp;A.2.2, &#8220;The util schema&#8221;</a> demonstrates how you can
            start immediately by using some of the more common utility tags.</p></div><p>The rest of this chapter is devoted to showing examples of the new Spring XML Schema
        based configuration, with at least one example for every new tag. The format follows
        a before and after style, with a <span class="emphasis"><em>before</em></span> snippet of XML showing
        the old (but still 100% legal and supported) style, followed immediately
        by an <span class="emphasis"><em>after</em></span> example showing the equivalent in the new XML Schema-based
        style.</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="xsd-config-body-schemas-util"></a>A.2.2.&nbsp;The <tt class="literal">util</tt> schema</h3></div></div><div></div></div><p>First up is coverage of the <tt class="literal">util</tt> tags. As the name
            implies, the <tt class="literal">util</tt> tags deal with common, <span class="emphasis"><em>utility</em></span>
            configuration issues, such as configuring collections, referencing constants,
            and suchlike.</p><p>To use the tags in the <tt class="literal">util</tt> schema, you need to have
            the following preamble at the top of your Spring XML configuration file;
            the emboldened text in the snippet below references the correct schema so that
            the tags in the <tt class="literal">util</tt> namespace are available to you.</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       <span class="bold"><b>xmlns:util="http://www.springframework.org/schema/util"</b></span>
       xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
<span class="bold"><b>http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.5.xsd"</b></span>&gt;

<i class="lineannotation"><span class="lineannotation">&lt;!-- <tt class="literal">&lt;bean/&gt;</tt> definitions here --&gt;</span></i>

&lt;/beans&gt;</pre><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="xsd-config-body-schemas-util-constant"></a>A.2.2.1.&nbsp;<tt class="literal">&lt;util:constant/&gt;</tt></h4></div></div><div></div></div><p>Before...</p><pre class="programlisting">&lt;bean id="..." class="..."&gt;
  &lt;property name="isolation"&gt;
    &lt;bean id="java.sql.Connection.TRANSACTION_SERIALIZABLE"
    class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean" /&gt;
  &lt;/property&gt;
&lt;/bean&gt;</pre><p>The above configuration uses a Spring <tt class="interfacename">FactoryBean</tt>
                implementation, the <tt class="classname">FieldRetrievingFactoryBean</tt>, to
                set the value of the <tt class="literal">'isolation'</tt> property on a bean
                to the value of the <tt class="literal">'java.sql.Connection.TRANSACTION_SERIALIZABLE'</tt>
                constant. This is all well and good, but it is a tad verbose and (unneccessarily)
                exposes Spring's internal plumbing to the end user.
                </p><p>The following XML Schema-based version is more concise
                and clearly expresses the developer's intent (<span class="emphasis"><em>'inject this constant
                value'</em></span>), and it just reads better.
                </p><pre class="programlisting">&lt;bean id="..." class="..."&gt;
  &lt;property name="isolation"&gt;
    &lt;util:constant static-field="java.sql.Connection.TRANSACTION_SERIALIZABLE"/&gt;
  &lt;/property&gt;
&lt;/bean&gt;</pre><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="xsd-config-body-schemas-util-frfb"></a>A.2.2.1.1.&nbsp;Setting a bean property or constructor arg from a field value</h5></div></div><div></div></div><p>
			            <a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/beans/factory/config/FieldRetrievingFactoryBean.html" target="_top"><tt class="classname">FieldRetrievingFactoryBean</tt></a>
			            is a <tt class="interfacename">FactoryBean</tt> which retrieves a
			            <tt class="literal">static</tt> or non-static field value. It is typically
			            used for retrieving <tt class="literal">public</tt> <tt class="literal">static</tt>
			            <tt class="literal">final</tt> constants, which may then be used to set a
			            property value or constructor arg for another bean.
		            </p><p>
			            Find below an example which shows how a <tt class="literal">static</tt> field is exposed, by
			            using the <a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/beans/factory/config/FieldRetrievingFactoryBean.html#setStaticField%28java.lang.String%29" target="_top"><tt class="literal">staticField</tt></a>
			            property:
		            </p><pre class="programlisting">&lt;bean id="myField"
        class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean"&gt;
  &lt;property name="staticField" value="java.sql.Connection.TRANSACTION_SERIALIZABLE"/&gt;
&lt;/bean&gt;</pre><p>There is also a convenience usage form where the <tt class="literal">static</tt>
                    field is specified as the bean name:</p><pre class="programlisting">&lt;bean id="java.sql.Connection.TRANSACTION_SERIALIZABLE"
    class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean"/&gt;</pre><p>
			            This does mean that there is no longer any choice in what the bean id is (so
			            any other bean that refers to it will also have to use this longer name),
			            but this form is very concise to define, and very convenient to use as an
			            inner bean since the id doesn't have to be specified for the bean
			            reference:
		            </p><pre class="programlisting">&lt;bean id="..." class="..."&gt;
  &lt;property name="isolation"&gt;
    &lt;bean id="java.sql.Connection.TRANSACTION_SERIALIZABLE"
          class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean" /&gt;
  &lt;/property&gt;
&lt;/bean&gt;</pre><p>
			            It is also possible to access a non-static (instance) field of another bean,
			            as described in the API documentation for the 
			            <a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/beans/factory/config/FieldRetrievingFactoryBean.html" target="_top"><tt class="classname">FieldRetrievingFactoryBean</tt></a>
			            class.
		            </p><p>
			            Injecting enum values into beans as either property or constructor arguments is very
			            easy to do in Spring, in that you don't actually have to <span class="emphasis"><em>do</em></span>
			            anything or know anything about the Spring internals (or even about classes such
			            as the <tt class="classname">FieldRetrievingFactoryBean</tt>). Let's look at an example
			            to see how easy injecting an enum value is; consider this JDK 5 enum:
		            </p><pre class="programlisting">package javax.persistence;
     
public enum PersistenceContextType {

    TRANSACTION,
    EXTENDED

}</pre><p>Now consider a setter of type <tt class="classname">PersistenceContextType</tt>:</p><pre class="programlisting">package example;

public class Client {

    private PersistenceContextType persistenceContextType;

    public void setPersistenceContextType(PersistenceContextType type) { 
        this.persistenceContextType = type;
    }
}</pre><p>.. and the corresponding bean definition:</p><pre class="programlisting">&lt;bean class="example.Client"&gt;
    &lt;property name="persistenceContextType" value="TRANSACTION" /&gt;
&lt;/bean&gt;</pre><p>
			            This works for classic type-safe emulated enums (on JDK 1.4 and JDK 1.3) as well;
			            Spring will automatically attempt to match the string property value to a constant
			            on the enum class.
		            </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="xsd-config-body-schemas-util-property-path"></a>A.2.2.2.&nbsp;<tt class="literal">&lt;util:property-path/&gt;</tt></h4></div></div><div></div></div><p>Before...</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">&lt;!-- target bean to be referenced by name --&gt;</span></i>
&lt;bean id="testBean" class="org.springframework.beans.TestBean" scope="prototype"&gt;
  &lt;property name="age" value="10"/&gt;
  &lt;property name="spouse"&gt;
    &lt;bean class="org.springframework.beans.TestBean"&gt;
      &lt;property name="age" value="11"/&gt;
    &lt;/bean&gt;
  &lt;/property&gt;
&lt;/bean&gt;

<i class="lineannotation"><span class="lineannotation">&lt;!-- will result in 10, which is the value of property 'age' of bean 'testBean' --&gt;</span></i>
&lt;bean id="testBean.age" class="org.springframework.beans.factory.config.PropertyPathFactoryBean"/&gt;</pre><p>The above configuration uses a Spring <tt class="interfacename">FactoryBean</tt>
                implementation, the <tt class="classname">PropertyPathFactoryBean</tt>, to
                create a bean (of type <tt class="classname">int</tt>) called
                <tt class="literal">'testBean.age'</tt> that has a value equal to the <tt class="literal">'age'</tt>
                property of the <tt class="literal">'testBean'</tt> bean.
                </p><p>After...</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">&lt;!-- target bean to be referenced by name --&gt;</span></i>
&lt;bean id="testBean" class="org.springframework.beans.TestBean" scope="prototype"&gt;
  &lt;property name="age" value="10"/&gt;
  &lt;property name="spouse"&gt;
    &lt;bean class="org.springframework.beans.TestBean"&gt;
      &lt;property name="age" value="11"/&gt;
    &lt;/bean&gt;
  &lt;/property&gt;
&lt;/bean&gt;

<i class="lineannotation"><span class="lineannotation">&lt;!-- will result in 10, which is the value of property 'age' of bean 'testBean' --&gt;</span></i>
&lt;util:property-path id="name" path="testBean.age"/&gt;</pre><p>The value of the <tt class="literal">'path'</tt> attribute of the
                <tt class="literal">&lt;property-path/&gt;</tt> tag follows the form <tt class="literal">'beanName.beanProperty'</tt>.</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="xsd-config-body-schemas-util-property-path-dependency"></a>A.2.2.2.1.&nbsp;Using <tt class="literal">&lt;util:property-path/&gt;</tt> to set a bean property or constructor-argument</h5></div></div><div></div></div><p><tt class="classname">PropertyPathFactoryBean</tt> is a
			        <tt class="interfacename">FactoryBean</tt> that evaluates a property path on a given
			        target object. The target object can be specified directly or via a bean
			        name. This value may then be used in another bean definition as a property
			        value or constructor argument.</p><p>Here's an example where a path is used against another bean, by name:</p><pre class="programlisting">// target bean to be referenced by name
&lt;bean id="person" class="org.springframework.beans.TestBean" scope="prototype"&gt;
  &lt;property name="age" value="10"/&gt;
  &lt;property name="spouse"&gt;
    &lt;bean class="org.springframework.beans.TestBean"&gt;
      &lt;property name="age" value="11"/&gt;
    &lt;/bean&gt;
  &lt;/property&gt;
&lt;/bean&gt;

<i class="lineannotation"><span class="lineannotation">// will result in 11, which is the value of property 'spouse.age' of bean 'person'</span></i>
&lt;bean id="theAge"
    class="org.springframework.beans.factory.config.PropertyPathFactoryBean"&gt;
  &lt;property name="targetBeanName" value="person"/&gt;
  &lt;property name="propertyPath" value="spouse.age"/&gt;
&lt;/bean&gt;</pre><p>In this example, a path is evaluated against an inner bean:</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">&lt;!-- will result in 12, which is the value of property 'age' of the inner bean --&gt;</span></i>
&lt;bean id="theAge"
    class="org.springframework.beans.factory.config.PropertyPathFactoryBean"&gt;
  &lt;property name="targetObject"&gt;
    &lt;bean class="org.springframework.beans.TestBean"&gt;
      &lt;property name="age" value="12"/&gt;
    &lt;/bean&gt;
  &lt;/property&gt;
  &lt;property name="propertyPath" value="age"/&gt;
&lt;/bean&gt;</pre><p>There is also a shortcut form, where the bean name is the property path.</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">&lt;!-- will result in 10, which is the value of property 'age' of bean 'person' --&gt;</span></i>
&lt;bean id="person.age"
    class="org.springframework.beans.factory.config.PropertyPathFactoryBean"/&gt;</pre><p>This form does mean that there is no choice in the name of the bean.
		            Any reference to it will also have to use the same id, which is the path.
		            Of course, if used as an inner bean, there is no need to refer to it at
		            all:</p><pre class="programlisting">&lt;bean id="..." class="..."&gt;
  &lt;property name="age"&gt;
    &lt;bean id="person.age"
        class="org.springframework.beans.factory.config.PropertyPathFactoryBean"/&gt;
  &lt;/property&gt;
&lt;/bean&gt;</pre><p>The result type may be specifically set in the actual definition.
			        This is not necessary for most use cases, but can be of use for some.
			        Please see the Javadocs for more info on this feature.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="xsd-config-body-schemas-util-properties"></a>A.2.2.3.&nbsp;<tt class="literal">&lt;util:properties/&gt;</tt></h4></div></div><div></div></div><p>Before...</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">&lt;!-- creates a <tt class="classname">java.util.Properties</tt> instance with values loaded from the supplied location --&gt;</span></i>
&lt;bean id="jdbcConfiguration" class="org.springframework.beans.factory.config.PropertiesFactoryBean"&gt;
  &lt;property name="location" value="classpath:com/foo/jdbc-production.properties"/&gt;
&lt;/bean&gt;</pre><p>The above configuration uses a Spring <tt class="interfacename">FactoryBean</tt>
                implementation, the <tt class="classname">PropertiesFactoryBean</tt>, to
                instantiate a <tt class="classname">java.util.Properties</tt> instance with values loaded from
                the supplied <a href="#resources" title="Chapter&nbsp;4.&nbsp;&#36164;&#28304;"><tt class="interfacename">Resource</tt></a> location).
                </p><p>After...</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">&lt;!-- creates a <tt class="classname">java.util.Properties</tt> instance with values loaded from the supplied location --&gt;</span></i>
&lt;util:properties id="jdbcConfiguration" location="classpath:com/foo/jdbc-production.properties"/&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="xsd-config-body-schemas-util-list"></a>A.2.2.4.&nbsp;<tt class="literal">&lt;util:list/&gt;</tt></h4></div></div><div></div></div><p>Before...</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">&lt;!-- creates a <tt class="classname">java.util.List</tt> instance with values loaded from the supplied <tt class="literal">'sourceList'</tt> --&gt;</span></i>
&lt;bean id="emails" class="org.springframework.beans.factory.config.ListFactoryBean"&gt;
  &lt;property name="sourceList"&gt;
      &lt;list&gt;
        &lt;value&gt;pechorin@hero.org&lt;/value&gt;
        &lt;value&gt;raskolnikov@slums.org&lt;/value&gt;
        &lt;value&gt;stavrogin@gov.org&lt;/value&gt;
        &lt;value&gt;porfiry@gov.org&lt;/value&gt;
      &lt;/list&gt;
  &lt;/property&gt;
&lt;/bean&gt;</pre><p>The above configuration uses a Spring <tt class="interfacename">FactoryBean</tt>
                implementation, the <tt class="classname">ListFactoryBean</tt>, to
                create a <tt class="classname">java.util.List</tt> instance initialized
                with values taken from the supplied <tt class="literal">'sourceList'</tt>.
                </p><p>After...</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">&lt;!-- creates a <tt class="classname">java.util.List</tt> instance with values loaded from the supplied <tt class="literal">'sourceList'</tt> --&gt;</span></i>
&lt;util:list id="emails"&gt;
    &lt;value&gt;pechorin@hero.org&lt;/value&gt;
    &lt;value&gt;raskolnikov@slums.org&lt;/value&gt;
    &lt;value&gt;stavrogin@gov.org&lt;/value&gt;
    &lt;value&gt;porfiry@gov.org&lt;/value&gt;
&lt;/util:list&gt;</pre><p>You can also explicitly control the exact type of <tt class="interfacename">List</tt>
                that will be instantiated and populated via the use of the <tt class="literal">'list-class'</tt>
                attribute on the <tt class="literal">&lt;util:list/&gt;</tt> element. For example, if we
                really need a <tt class="classname">java.util.LinkedList</tt> to be instantiated, we could
                use the following configuration:</p><pre class="programlisting">&lt;util:list id="emails" list-class="java.util.LinkedList"&gt;
    &lt;value&gt;jackshaftoe@vagabond.org&lt;/value&gt;
    &lt;value&gt;eliza@thinkingmanscrumpet.org&lt;/value&gt;
    &lt;value&gt;vanhoek@pirate.org&lt;/value&gt;
    &lt;value&gt;d'Arcachon@nemesis.org&lt;/value&gt;
&lt;/util:list&gt;</pre><p>If no <tt class="literal">'list-class'</tt> attribute is supplied, a
                <tt class="interfacename">List</tt> implementation will be chosen by the container.</p><p>Finally, you can also control the merging behavior using the
                <tt class="literal">'merge'</tt> attribute of the <tt class="literal">&lt;util:list/&gt;</tt>
                element; collection merging is described in more detail in the section entitled
                <a href="#beans-collection-elements-merging" title="3.3.2.4.1.&nbsp;&#38598;&#21512;&#30340;&#21512;&#24182;">Section&nbsp;3.3.2.4.1, &#8220;&#38598;&#21512;&#30340;&#21512;&#24182;&#8221;</a>.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="xsd-config-body-schemas-util-map"></a>A.2.2.5.&nbsp;<tt class="literal">&lt;util:map/&gt;</tt></h4></div></div><div></div></div><p>Before...</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">&lt;!-- creates a <tt class="classname">java.util.Map</tt> instance with values loaded from the supplied <tt class="literal">'sourceMap'</tt> --&gt;</span></i>
&lt;bean id="emails" class="org.springframework.beans.factory.config.MapFactoryBean"&gt;
  &lt;property name="sourceMap"&gt;
      &lt;map&gt;
        &lt;entry key="pechorin" value="pechorin@hero.org"/&gt;
        &lt;entry key="raskolnikov" value="raskolnikov@slums.org"/&gt;
        &lt;entry key="stavrogin" value="stavrogin@gov.org"/&gt;
        &lt;entry key="porfiry" value="porfiry@gov.org"/&gt;
      &lt;/map&gt;
  &lt;/property&gt;
&lt;/bean&gt;</pre><p>The above configuration uses a Spring <tt class="interfacename">FactoryBean</tt>
                implementation, the <tt class="classname">MapFactoryBean</tt>, to
                create a <tt class="classname">java.util.Map</tt> instance initialized
                with key-value pairs taken from the supplied <tt class="literal">'sourceMap'</tt>.
                </p><p>After...</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">&lt;!-- creates a <tt class="classname">java.util.Map</tt> instance with values loaded from the supplied <tt class="literal">'sourceMap'</tt> --&gt;</span></i>
&lt;util:map id="emails"&gt;
    &lt;entry key="pechorin" value="pechorin@hero.org"/&gt;
    &lt;entry key="raskolnikov" value="raskolnikov@slums.org"/&gt;
    &lt;entry key="stavrogin" value="stavrogin@gov.org"/&gt;
    &lt;entry key="porfiry" value="porfiry@gov.org"/&gt;
&lt;/util:map&gt;</pre><p>You can also explicitly control the exact type of <tt class="interfacename">Map</tt>
                that will be instantiated and populated via the use of the <tt class="literal">'map-class'</tt>
                attribute on the <tt class="literal">&lt;util:map/&gt;</tt> element. For example, if we
                really need a <tt class="classname">java.util.TreeMap</tt> to be instantiated, we could
                use the following configuration:</p><pre class="programlisting">&lt;util:map id="emails" map-class="java.util.TreeMap"&gt;
    &lt;entry key="pechorin" value="pechorin@hero.org"/&gt;
    &lt;entry key="raskolnikov" value="raskolnikov@slums.org"/&gt;
    &lt;entry key="stavrogin" value="stavrogin@gov.org"/&gt;
    &lt;entry key="porfiry" value="porfiry@gov.org"/&gt;
&lt;/util:map&gt;</pre><p>If no <tt class="literal">'map-class'</tt> attribute is supplied, a
                <tt class="interfacename">Map</tt> implementation will be chosen by the container.</p><p>Finally, you can also control the merging behavior using the
                <tt class="literal">'merge'</tt> attribute of the <tt class="literal">&lt;util:map/&gt;</tt>
                element; collection merging is described in more detail in the section entitled
                <a href="#beans-collection-elements-merging" title="3.3.2.4.1.&nbsp;&#38598;&#21512;&#30340;&#21512;&#24182;">Section&nbsp;3.3.2.4.1, &#8220;&#38598;&#21512;&#30340;&#21512;&#24182;&#8221;</a>.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="xsd-config-body-schemas-util-set"></a>A.2.2.6.&nbsp;<tt class="literal">&lt;util:set/&gt;</tt></h4></div></div><div></div></div><p>Before...</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">&lt;!-- creates a <tt class="classname">java.util.Set</tt> instance with values loaded from the supplied <tt class="literal">'sourceSet'</tt> --&gt;</span></i>
&lt;bean id="emails" class="org.springframework.beans.factory.config.SetFactoryBean"&gt;
  &lt;property name="sourceSet"&gt;
      &lt;set&gt;
        &lt;value&gt;pechorin@hero.org&lt;/value&gt;
        &lt;value&gt;raskolnikov@slums.org&lt;/value&gt;
        &lt;value&gt;stavrogin@gov.org&lt;/value&gt;
        &lt;value&gt;porfiry@gov.org&lt;/value&gt;
      &lt;/set&gt;
  &lt;/property&gt;
&lt;/bean&gt;</pre><p>The above configuration uses a Spring <tt class="interfacename">FactoryBean</tt>
                implementation, the <tt class="classname">SetFactoryBean</tt>, to
                create a <tt class="classname">java.util.Set</tt> instance initialized
                with values taken from the supplied <tt class="literal">'sourceSet'</tt>.
                </p><p>After...</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">&lt;!-- creates a <tt class="classname">java.util.Set</tt> instance with values loaded from the supplied <tt class="literal">'sourceSet'</tt> --&gt;</span></i>
&lt;util:set id="emails"&gt;
    &lt;value&gt;pechorin@hero.org&lt;/value&gt;
    &lt;value&gt;raskolnikov@slums.org&lt;/value&gt;
    &lt;value&gt;stavrogin@gov.org&lt;/value&gt;
    &lt;value&gt;porfiry@gov.org&lt;/value&gt;
&lt;/util:set&gt;</pre><p>You can also explicitly control the exact type of <tt class="interfacename">Set</tt>
                that will be instantiated and populated via the use of the <tt class="literal">'set-class'</tt>
                attribute on the <tt class="literal">&lt;util:set/&gt;</tt> element. For example, if we
                really need a <tt class="classname">java.util.TreeSet</tt> to be instantiated, we could
                use the following configuration:</p><pre class="programlisting">&lt;util:set id="emails" set-class="java.util.TreeSet"&gt;
    &lt;value&gt;pechorin@hero.org&lt;/value&gt;
    &lt;value&gt;raskolnikov@slums.org&lt;/value&gt;
    &lt;value&gt;stavrogin@gov.org&lt;/value&gt;
    &lt;value&gt;porfiry@gov.org&lt;/value&gt;
&lt;/util:set&gt;</pre><p>If no <tt class="literal">'set-class'</tt> attribute is supplied, a
                <tt class="interfacename">Set</tt> implementation will be chosen by the container.</p><p>Finally, you can also control the merging behavior using the
                <tt class="literal">'merge'</tt> attribute of the <tt class="literal">&lt;util:set/&gt;</tt>
                element; collection merging is described in more detail in the section entitled
                <a href="#beans-collection-elements-merging" title="3.3.2.4.1.&nbsp;&#38598;&#21512;&#30340;&#21512;&#24182;">Section&nbsp;3.3.2.4.1, &#8220;&#38598;&#21512;&#30340;&#21512;&#24182;&#8221;</a>.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="xsd-config-body-schemas-jee"></a>A.2.3.&nbsp;The <tt class="literal">jee</tt> schema</h3></div></div><div></div></div><p>The <tt class="literal">jee</tt> tags deal with JEE (Java Enterprise Edition)-related
            configuration issues, such as looking up a JNDI object and defining EJB references.</p><p>To use the tags in the <tt class="literal">jee</tt> schema, you need to have
            the following preamble at the top of your Spring XML configuration file;
            the emboldened text in the following snippet references the correct schema so that
            the tags in the <tt class="literal">jee</tt> namespace are available to you.</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       <span class="bold"><b>xmlns:jee="http://www.springframework.org/schema/jee"</b></span>
       xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
<span class="bold"><b>http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-2.5.xsd"</b></span>&gt;

<i class="lineannotation"><span class="lineannotation">&lt;!-- <tt class="literal">&lt;bean/&gt;</tt> definitions here --&gt;</span></i>

&lt;/beans&gt;</pre><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="xsd-config-body-schemas-jee-jndi-lookup"></a>A.2.3.1.&nbsp;<tt class="literal">&lt;jee:jndi-lookup/&gt;</tt> (simple)</h4></div></div><div></div></div><p>Before...</p><pre class="programlisting">&lt;bean id="<span class="bold"><b>dataSource</b></span>" class="org.springframework.jndi.JndiObjectFactoryBean"&gt;
    &lt;property name="jndiName" value="jdbc/MyDataSource"/&gt;
&lt;/bean&gt;

&lt;bean id="userDao" class="com.foo.JdbcUserDao"&gt;
    <i class="lineannotation"><span class="lineannotation">&lt;!-- Spring will do the cast automatically (as usual) --&gt;</span></i>
    &lt;property name="dataSource" ref="<span class="bold"><b>dataSource</b></span>"/&gt;
&lt;/bean&gt;</pre><p>After...</p><pre class="programlisting">&lt;jee:jndi-lookup id="<span class="bold"><b>dataSource</b></span>" jndi-name="jdbc/MyDataSource"/&gt;

&lt;bean id="userDao" class="com.foo.JdbcUserDao"&gt;
    <i class="lineannotation"><span class="lineannotation">&lt;!-- Spring will do the cast automatically (as usual) --&gt;</span></i>
    &lt;property name="dataSource" ref="<span class="bold"><b>dataSource</b></span>"/&gt;
&lt;/bean&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="xsd-config-body-schemas-jee-jndi-lookup-environment-single"></a>A.2.3.2.&nbsp;<tt class="literal">&lt;jee:jndi-lookup/&gt;</tt> (with single JNDI environment setting)</h4></div></div><div></div></div><p>Before...</p><pre class="programlisting">&lt;bean id="simple" class="org.springframework.jndi.JndiObjectFactoryBean"&gt;
    &lt;property name="jndiName" value="jdbc/MyDataSource"/&gt;
    &lt;property name="jndiEnvironment"&gt;
        &lt;props&gt;
            &lt;prop key="foo"&gt;bar&lt;/prop&gt;
        &lt;/props&gt;
    &lt;/property&gt;
&lt;/bean&gt;</pre><p>After...</p><pre class="programlisting">&lt;jee:jndi-lookup id="simple" jndi-name="jdbc/MyDataSource"&gt;
    &lt;jee:environment&gt;foo=bar&lt;/jee:environment&gt;
&lt;/jee:jndi-lookup&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="xsd-config-body-schemas-jee-jndi-lookup-evironment-multiple"></a>A.2.3.3.&nbsp;<tt class="literal">&lt;jee:jndi-lookup/&gt;</tt> (with multiple JNDI environment settings)</h4></div></div><div></div></div><p>Before...</p><pre class="programlisting">&lt;bean id="simple" class="org.springframework.jndi.JndiObjectFactoryBean"&gt;
    &lt;property name="jndiName" value="jdbc/MyDataSource"/&gt;
    &lt;property name="jndiEnvironment"&gt;
        &lt;props&gt;
            &lt;prop key="foo"&gt;bar&lt;/prop&gt;
            &lt;prop key="ping"&gt;pong&lt;/prop&gt;
        &lt;/props&gt;
    &lt;/property&gt;
&lt;/bean&gt;</pre><p>After...</p><pre class="programlisting">&lt;jee:jndi-lookup id="simple" jndi-name="jdbc/MyDataSource"&gt;
    <i class="lineannotation"><span class="lineannotation">&lt;!-- newline-separated, key-value pairs for the environment (standard <tt class="classname">Properties</tt> format) --&gt;</span></i>
    &lt;jee:environment&gt;
        foo=bar
        ping=pong
    &lt;/jee:environment&gt;
&lt;/jee:jndi-lookup&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="xsd-config-body-schemas-jee-jndi-lookup-complex"></a>A.2.3.4.&nbsp;<tt class="literal">&lt;jee:jndi-lookup/&gt;</tt> (complex)</h4></div></div><div></div></div><p>Before...</p><pre class="programlisting">&lt;bean id="simple" class="org.springframework.jndi.JndiObjectFactoryBean"&gt;
    &lt;property name="jndiName" value="jdbc/MyDataSource"/&gt;
    &lt;property name="cache" value="true"/&gt;
    &lt;property name="resourceRef" value="true"/&gt;
    &lt;property name="lookupOnStartup" value="false"/&gt;
    &lt;property name="expectedType" value="com.myapp.DefaultFoo"/&gt;
    &lt;property name="proxyInterface" value="com.myapp.Foo"/&gt;
&lt;/bean&gt;</pre><p>After...</p><pre class="programlisting">&lt;jee:jndi-lookup id="simple"
             jndi-name="jdbc/MyDataSource"
             cache="true"
             resource-ref="true"
             lookup-on-startup="false"
             expected-type="com.myapp.DefaultFoo"
             proxy-interface="com.myapp.Foo"/&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="xsd-config-body-schemas-jee-local-slsb"></a>A.2.3.5.&nbsp;<tt class="literal">&lt;jee:local-slsb/&gt;</tt> (simple)</h4></div></div><div></div></div><p>The <tt class="literal">&lt;jee:local-slsb/&gt;</tt> tag configures a
                reference to an EJB Stateless SessionBean.</p><p>Before...</p><pre class="programlisting">&lt;bean id="simple"
      class="org.springframework.ejb.access.LocalStatelessSessionProxyFactoryBean"&gt;
  &lt;property name="jndiName" value="ejb/RentalServiceBean"/&gt;
  &lt;property name="businessInterface" value="com.foo.service.RentalService"/&gt;
&lt;/bean&gt;</pre><p>After...</p><pre class="programlisting">&lt;jee:local-slsb id="simpleSlsb" jndi-name="ejb/RentalServiceBean"
    business-interface="com.foo.service.RentalService"/&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="xsd-config-body-schemas-jee-local-slsb-complex"></a>A.2.3.6.&nbsp;<tt class="literal">&lt;jee:local-slsb/&gt;</tt> (complex)</h4></div></div><div></div></div><pre class="programlisting">&lt;bean id="complexLocalEjb"
      class="org.springframework.ejb.access.LocalStatelessSessionProxyFactoryBean"&gt;
  &lt;property name="jndiName" value="ejb/RentalServiceBean"/&gt;
  &lt;property name="businessInterface" value="com.foo.service.RentalService"/&gt;
  &lt;property name="cacheHome" value="true"/&gt;
  &lt;property name="lookupHomeOnStartup" value="true"/&gt;
  &lt;property name="resourceRef" value="true"/&gt;
&lt;/bean&gt;</pre><p>After...</p><pre class="programlisting">&lt;jee:local-slsb id="complexLocalEjb"
    jndi-name="ejb/RentalServiceBean"
    business-interface="com.foo.service.RentalService"
    cache-home="true"
    lookup-home-on-startup="true"
    resource-ref="true"&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="xsd-config-body-schemas-jee-remote-slsb"></a>A.2.3.7.&nbsp;<tt class="literal">&lt;jee:remote-slsb/&gt;</tt></h4></div></div><div></div></div><p>The <tt class="literal">&lt;jee:remote-slsb/&gt;</tt> tag configures a
                reference to a <tt class="literal">remote</tt> EJB Stateless SessionBean.</p><p>Before...</p><pre class="programlisting">&lt;bean id="complexRemoteEjb"
      class="org.springframework.ejb.access.SimpleRemoteStatelessSessionProxyFactoryBean"&gt;
  &lt;property name="jndiName" value="ejb/MyRemoteBean"/&gt;
  &lt;property name="businessInterface" value="com.foo.service.RentalService"/&gt;
  &lt;property name="cacheHome" value="true"/&gt;
  &lt;property name="lookupHomeOnStartup" value="true"/&gt;
  &lt;property name="resourceRef" value="true"/&gt;
  &lt;property name="homeInterface" value="com.foo.service.RentalService"/&gt;
  &lt;property name="refreshHomeOnConnectFailure" value="true"/&gt;
&lt;/bean&gt;</pre><p>After...</p><pre class="programlisting">&lt;jee:remote-slsb id="complexRemoteEjb"
    jndi-name="ejb/MyRemoteBean"
    business-interface="com.foo.service.RentalService"
    cache-home="true"
    lookup-home-on-startup="true"
    resource-ref="true"
    home-interface="com.foo.service.RentalService"
    refresh-home-on-connect-failure="true"&gt;</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="xsd-config-body-schemas-lang"></a>A.2.4.&nbsp;The <tt class="literal">lang</tt> schema</h3></div></div><div></div></div><p>The <tt class="literal">lang</tt> tags deal with exposing objects that have been
            written in a dynamic language such as JRuby or Groovy as beans in the Spring
            container.</p><p>These tags (and the dynamic language support) are comprehensively covered
            in the chapter entitled <a href="#dynamic-language" title="Chapter&nbsp;24.&nbsp;&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;">Chapter&nbsp;24, <i>&#21160;&#24577;&#35821;&#35328;&#25903;&#25345;</i></a>. Please do consult that
            chapter for full details on this support and the <tt class="literal">lang</tt> tags
            themselves.</p><p>In the interest of completeness, to use the tags in the <tt class="literal">lang</tt>
            schema, you need to have the following preamble at the top of your Spring XML
            configuration file; the emboldened text in the following snippet references the
            correct schema so that the tags in the <tt class="literal">lang</tt> namespace are
            available to you.</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       <span class="bold"><b>xmlns:lang="http://www.springframework.org/schema/lang"</b></span>
       xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
<span class="bold"><b>http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang-2.5.xsd"</b></span>&gt;

<i class="lineannotation"><span class="lineannotation">&lt;!-- <tt class="literal">&lt;bean/&gt;</tt> definitions here --&gt;</span></i>

&lt;/beans&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="xsd-config-body-schemas-jms"></a>A.2.5.&nbsp;The <tt class="literal">jms</tt> schema</h3></div></div><div></div></div><p>The <tt class="literal">jms</tt> tags deal with configuring JMS-related
			beans such as Spring's <a href="#jms-mdp" title="19.2.4.&nbsp;&#28040;&#24687;&#20390;&#21548;&#23481;&#22120;">MessageListenerContainers</a>.
            These tags are detailed in the section of the <a href="#jms" title="Chapter&nbsp;19.&nbsp;JMS (Java Message Service)">JMS chapter</a>
			entitled <a href="#jms-namespace" title="19.6.&nbsp;JMS&#21629;&#21517;&#31354;&#38388;&#25903;&#25345;">Section&nbsp;19.6, &#8220;JMS&#21629;&#21517;&#31354;&#38388;&#25903;&#25345;&#8221;</a>. Please do consult that
            chapter for full details on this support and the <tt class="literal">jms</tt> tags
            themselves.</p><p>In the interest of completeness, to use the tags in the <tt class="literal">jms</tt>
            schema, you need to have the following preamble at the top of your Spring XML
            configuration file; the emboldened text in the following snippet references the
            correct schema so that the tags in the <tt class="literal">jms</tt> namespace are
            available to you.</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       <span class="bold"><b>xmlns:jms="http://www.springframework.org/schema/jms"</b></span>
       xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
<span class="bold"><b>http://www.springframework.org/schema/jms http://www.springframework.org/schema/jms/spring-jms-2.5.xsd"</b></span>&gt;

<i class="lineannotation"><span class="lineannotation">&lt;!-- <tt class="literal">&lt;bean/&gt;</tt> definitions here --&gt;</span></i>

&lt;/beans&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="xsd-config-body-schemas-tx"></a>A.2.6.&nbsp;The <tt class="literal">tx</tt> (transaction) schema</h3></div></div><div></div></div><p>The <tt class="literal">tx</tt> tags deal with configuring all of those
            beans in Spring's comprehensive support for transactions. These tags are
            covered in the chapter entitled <a href="#transaction" title="Chapter&nbsp;9.&nbsp;&#20107;&#21153;&#31649;&#29702;">Chapter&nbsp;9, <i>&#20107;&#21153;&#31649;&#29702;</i></a>.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Tip" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Tip]" src="tip.png"></td><th align="left">Tip</th></tr><tr><td colspan="2" valign="top" align="left"><p>You are strongly encouraged to look at the
                <tt class="filename">'spring-tx-2.5.xsd'</tt> file that ships with the Spring
                distribution. This file is (of course), the XML Schema for Spring's
                transaction configuration, and covers all of the various tags in the
                <tt class="literal">tx</tt> namespace, including attribute defaults and
                suchlike. This file is documented inline, and thus the information is
                not repeated here in the interests of adhering to the DRY (Don't Repeat
                Yourself) principle.</p></td></tr></tbody></table></div><p>In the interest of completeness, to use the tags in the <tt class="literal">tx</tt>
            schema, you need to have the following preamble at the top of your Spring XML
            configuration file; the emboldened text in the following snippet references the
            correct schema so that the tags in the <tt class="literal">tx</tt> namespace are
            available to you.</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	   xmlns:aop="http://www.springframework.org/schema/aop"
	   <span class="bold"><b>xmlns:tx="http://www.springframework.org/schema/tx"</b></span>
	   xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
<span class="bold"><b>http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd</b></span>
http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd"&gt;

<i class="lineannotation"><span class="lineannotation">&lt;!-- <tt class="literal">&lt;bean/&gt;</tt> definitions here --&gt;</span></i>

&lt;/beans&gt;</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>Often when using the tags in the <tt class="literal">tx</tt> namespace you will also be using
                the tags from the <tt class="literal">aop</tt> namespace (since the declarative transaction support in Spring is implemented using
                AOP). The above XML snippet contains the relevant lines needed to reference the <tt class="literal">aop</tt> schema
                so that the tags in the <tt class="literal">aop</tt> namespace are available to you.</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="xsd-config-body-schemas-aop"></a>A.2.7.&nbsp;The <tt class="literal">aop</tt> schema</h3></div></div><div></div></div><p>The <tt class="literal">aop</tt> tags deal with configuring all things
            AOP in Spring: this includes Spring's own proxy-based AOP framework and Spring's
            integration with the AspectJ AOP framework. These tags are
            comprehensively covered in the chapter entitled <a href="#aop" title="Chapter&nbsp;6.&nbsp;&#20351;&#29992;Spring&#36827;&#34892;&#38754;&#21521;&#20999;&#38754;&#32534;&#31243;&#65288;AOP&#65289;">Chapter&nbsp;6, <i>&#20351;&#29992;Spring&#36827;&#34892;&#38754;&#21521;&#20999;&#38754;&#32534;&#31243;&#65288;AOP&#65289;</i></a>.</p><p>In the interest of completeness, to use the tags in the <tt class="literal">aop</tt>
            schema, you need to have the following preamble at the top of your Spring XML
            configuration file; the emboldened text in the following snippet references the
            correct schema so that the tags in the <tt class="literal">aop</tt> namespace are
            available to you.</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	   <span class="bold"><b>xmlns:aop="http://www.springframework.org/schema/aop"</b></span>
	   xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
<span class="bold"><b>http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd"</b></span>&gt;

<i class="lineannotation"><span class="lineannotation">&lt;!-- <tt class="literal">&lt;bean/&gt;</tt> definitions here --&gt;</span></i>

&lt;/beans&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="xsd-config-body-schemas-context"></a>A.2.8.&nbsp;The <tt class="literal">context</tt> schema</h3></div></div><div></div></div><p>The <tt class="literal">context</tt> tags deal with <tt class="interfacename">ApplicationContext</tt>
			configuration that relates to plumbing - that is, not usually beans that are important to an end-user
			but rather beans that do a lot of grunt work in Spring, such as <tt class="interfacename">BeanfactoryPostProcessors</tt>.
            The following snippet references the correct schema so that the tags in the <tt class="literal">context</tt>
			namespace are available to you.</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	   <span class="bold"><b>xmlns:context="http://www.springframework.org/schema/context"</b></span>
	   xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
<span class="bold"><b>http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd"</b></span>&gt;

<i class="lineannotation"><span class="lineannotation">&lt;!-- <tt class="literal">&lt;bean/&gt;</tt> definitions here --&gt;</span></i>

&lt;/beans&gt;</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>The <tt class="literal">context</tt> schema was only introduced in Spring 2.5.</p></td></tr></tbody></table></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="xsd-config-body-schemas-context-pphc"></a>A.2.8.1.&nbsp;<tt class="literal">&lt;property-placeholder/&gt;</tt></h4></div></div><div></div></div><p>This element activates the replacement of <tt class="literal">${...}</tt> placeholders, resolved
				against the specified properties file (as a <a href="#resources" title="Chapter&nbsp;4.&nbsp;&#36164;&#28304;">Spring resource location</a>).
				This element is a convenience mechanism that sets up a
				<a href="#beans-factory-placeholderconfigurer" title="3.7.2.1.&nbsp;PropertyPlaceholderConfigurer&#31034;&#20363;"><tt class="classname">PropertyPlaceholderConfigurer</tt></a>
				for you; if you need more control over the <tt class="classname">PropertyPlaceholderConfigurer</tt>, just
				define one yourself explicitly.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="xsd-config-body-schemas-context-ac"></a>A.2.8.2.&nbsp;<tt class="literal">&lt;annotation-config/&gt;</tt></h4></div></div><div></div></div><p>Activates the Spring infrastructure for various annotations to be detected in bean classes:
				Spring's <a href="#metadata-annotations-required" title="25.3.1.&nbsp;@Required"><tt class="interfacename">@Required</tt></a>
				and <a href="#beans-annotation-config" title="3.11.&nbsp;&#22522;&#20110;&#27880;&#35299;&#65288;Annotation-based&#65289;&#30340;&#37197;&#32622;"><tt class="interfacename">@Autowired</tt></a>, as well as
				JSR 250's <tt class="interfacename">@PostConstruct</tt>, <tt class="interfacename">@PreDestroy</tt> and
				<tt class="interfacename">@Resource</tt> (if available), and JPA's
				<tt class="interfacename">@PersistenceContext</tt> and <tt class="interfacename">@PersistenceUnit</tt>
				(if available). Alternatively, you can choose to activate the individual
				<tt class="interfacename">BeanPostProcessors</tt> for those annotations explictly.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>This element does <span class="emphasis"><em>not</em></span> activate processing of Spring's
					<a href="#transaction-declarative-annotations" title="9.5.6.&nbsp;&#20351;&#29992; @Transactional"><tt class="interfacename">@Transactional</tt></a>
					annotation. Use the
					<a href="#tx-decl-explained" title="9.5.1.&nbsp;&#29702;&#35299;Spring&#30340;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;&#23454;&#29616;"><tt class="literal">&lt;tx:annotation-driven/&gt;</tt></a> element
					for that purpose.</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="xsd-config-body-schemas-context-component-scan"></a>A.2.8.3.&nbsp;<tt class="literal">&lt;component-scan/&gt;</tt></h4></div></div><div></div></div><p>This element is detailed in the section entitled <a href="#beans-annotation-config" title="3.11.&nbsp;&#22522;&#20110;&#27880;&#35299;&#65288;Annotation-based&#65289;&#30340;&#37197;&#32622;">Section&nbsp;3.11, &#8220;&#22522;&#20110;&#27880;&#35299;&#65288;Annotation-based&#65289;&#30340;&#37197;&#32622;&#8221;</a>.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="xsd-config-body-schemas-context-ltw"></a>A.2.8.4.&nbsp;<tt class="literal">&lt;load-time-weaver/&gt;</tt></h4></div></div><div></div></div><p>This element is detailed in the section entitled <a href="#aop-aj-ltw" title="6.8.4.&nbsp;&#22312;Spring&#24212;&#29992;&#20013;&#20351;&#29992;AspectJ&#21152;&#36733;&#26102;&#32455;&#20837;&#65288;LTW&#65289;">Section&nbsp;6.8.4, &#8220;&#22312;Spring&#24212;&#29992;&#20013;&#20351;&#29992;AspectJ&#21152;&#36733;&#26102;&#32455;&#20837;&#65288;LTW&#65289;&#8221;</a>.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="xsd-config-body-schemas-context-sc"></a>A.2.8.5.&nbsp;<tt class="literal">&lt;spring-configured/&gt;</tt></h4></div></div><div></div></div><p>This element is detailed in the section entitled <a href="#aop-atconfigurable" title="6.8.1.&nbsp;&#22312;Spring&#20013;&#20351;&#29992;AspectJ&#36827;&#34892;domain object&#30340;&#20381;&#36182;&#27880;&#20837;">Section&nbsp;6.8.1, &#8220;&#22312;Spring&#20013;&#20351;&#29992;AspectJ&#36827;&#34892;domain object&#30340;&#20381;&#36182;&#27880;&#20837;&#8221;</a>.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="xsd-config-body-schemas-context-mbe"></a>A.2.8.6.&nbsp;<tt class="literal">&lt;mbean-export/&gt;</tt></h4></div></div><div></div></div><p>This element is detailed in the section entitled <a href="#jmx-context-mbeanexport" title="20.4.3.&nbsp;&lt;context:mbean-export/&gt;&#20803;&#32032;">Section&nbsp;20.4.3, &#8220;&lt;context:mbean-export/&gt;&#20803;&#32032;&#8221;</a>.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="xsd-config-body-schemas-tool"></a>A.2.9.&nbsp;The <tt class="literal">tool</tt> schema</h3></div></div><div></div></div><p>The <tt class="literal">tool</tt> tags are for use when you want to add
            tooling-specific metadata to your custom configuration elements. This metadata
            can then be consumed by tools that are aware of this metadata, and the tools can
            then do pretty much whatever they want with it (validation, etc.).</p><p>The <tt class="literal">tool</tt> tags are not documented in this release of
            Spring as they are currently undergoing review. If you are a third party tool
            vendor and you would like to contribute to this review process, then do mail
            the Spring mailing list. The currently supported <tt class="literal">tool</tt>
            tags can be found in the file <tt class="literal">'spring-tool-2.5.xsd'</tt> in the
            <tt class="literal">'src/org/springframework/beans/factory/xml'</tt> directory of the
            Spring source distribution.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="xsd-config-body-schemas-beans"></a>A.2.10.&nbsp;The <tt class="literal">beans</tt> schema</h3></div></div><div></div></div><p>Last but not least we have the tags in the <tt class="literal">beans</tt> schema.
            These are the same tags that have been in Spring since the very dawn of the framework.
            Examples of the various tags in the <tt class="literal">beans</tt> schema are not shown here
            because they are quite comprehensively covered in the section entitled <a href="#beans-factory-properties-detailed" title="3.3.2.&nbsp;&#20381;&#36182;&#37197;&#32622;&#35814;&#35299;">Section&nbsp;3.3.2, &#8220;&#20381;&#36182;&#37197;&#32622;&#35814;&#35299;&#8221;</a>
            (and indeed in that entire <a href="#beans" title="Chapter&nbsp;3.&nbsp;IoC(&#25511;&#21046;&#21453;&#36716;)&#23481;&#22120;">chapter</a>).</p><p>One thing that is new to the beans tags themselves in Spring 2.0 is the idea
            of arbitrary bean metadata. In Spring 2.0 it is now possible to add zero or more
            key / value pairs to <tt class="literal">&lt;bean/&gt;</tt> XML definitions. What, if
            anything, is done with this extra metadata is totally up to your own custom logic (and
            so is typically only of use if you are writing your own custom tags as described in
            the appendix entitled <a href="#extensible-xml" title="Appendix&nbsp;B.&nbsp;Extensible XML authoring">Appendix&nbsp;B, <i>Extensible XML authoring</i></a>).</p><p>Find below an example of the <tt class="literal">&lt;meta/&gt;</tt> tag in the context
            of a surrounding <tt class="literal">&lt;bean/&gt;</tt> (please note that without any logic
            to interpret it the metadata is effectively useless as-is).</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"&gt;

    &lt;bean id="foo" class="x.y.Foo"&gt;
        <span class="bold"><b>&lt;meta key="cacheName" value="foo"/&gt;</b></span>
        &lt;property name="name" value="Rick"/&gt;
    &lt;/bean&gt;

&lt;/beans&gt;</pre><p>In the case of the above example, you would assume that there is some
            logic that will consume the bean definition and set up some caching infrastructure
            using the supplied metadata.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="xsd-config-setup"></a>A.3.&nbsp;Setting up your IDE</h2></div></div><div></div></div><p>This final section documents the steps involved in setting up a number of
        popular Java IDEs to effect the easier editing of Spring's XML Schema-based
        configuration files. If your favourite Java IDE or editor is not included in the
		list of documented IDEs, then please do
        <a href="http://opensource.atlassian.com/projects/spring/secure/Dashboard.jspa" target="_top">raise an issue</a>
        and an example with your favorite IDE/editor <span class="emphasis"><em>may</em></span> be included
		in the next release.</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="xsd-config-setup-eclipse"></a>A.3.1.&nbsp;Setting up Eclipse</h3></div></div><div></div></div><div class="procedure"><p>The following steps illustrate setting up
            <a href="http://www.eclipse.org/" target="_top">Eclipse</a> to be XSD-aware. 
            The assumption in the following steps is that you already have an Eclipse
            project open (either a brand new project or an already existing one).</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>The following steps were created using Eclipse <span class="bold"><b>3.2</b></span>.
                The setup will probably be the same (or similar) on an earlier or later
                version of Eclipse.</p></td></tr></tbody></table></div><ol type="1"><li><p class="title"><b>Step One</b></p><p>Create a new XML file. You can name this file whatever you want. In the
                example below, the file is named <tt class="literal">'context.xml'</tt>.
                Copy and paste the following text into the file so that it matches the screenshot.</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.5.xsd"&gt;

&lt;/beans&gt;</pre><p>
			        </p><div class="mediaobject" align="center"><img src="eclipse-setup-1.png" align="middle"></div><p>
		        </p></li><li><p class="title"><b>Step Two</b></p><p>As can be seen in the above screenshot (unless you have a customised
                version of Eclipse with the correct plugins) the XML file will be treated
                as plain text. There is no XML editing support out of the box in Eclipse,
                and as such there is not even any syntax highlighting of elements and attributes.
                To address this, you will have to install an XML editor plugin for Eclipse...</p><div class="table"><a name="xsd-config-setup-eclipse-plugins"></a><p class="title"><b>Table&nbsp;A.1.&nbsp;Eclipse XML editors</b></p><table summary="Eclipse XML editors" border="1"><colgroup><col align="left"><col></colgroup><thead><tr><th align="center">XML Editor</th><th align="center">Link</th></tr></thead><tbody><tr><td align="left"><p>The Eclipse Web Tools Platform (WTP)</p></td><td><a href="http://www.eclipse.org/webtools/" target="_top">http://www.eclipse.org/webtools/</a></td></tr><tr><td align="left"><p>A list of Eclipse XML plugins</p></td><td><a href="http://eclipse-plugins.2y.net/eclipse/plugins.jsp?category=XML" target="_top">http://eclipse-plugins.2y.net/eclipse/plugins.jsp?category=XML</a></td></tr></tbody></table></div><div class="sidebar"><p class="title"><b>Contributing documentation...</b></p><p>Patches showing how to configure an Eclipse XML editor are
                    welcomed. Any such contributions are best submitted as patches via
                    the Spring Framework
                    <a href="http://opensource.atlassian.com/projects/spring/secure/Dashboard.jspa" target="_top">JIRA Issue Tracker</a>
                    and <span class="emphasis"><em>may</em></span> be featured in the next release.</p></div><p>Unfortunately, precisely because there is no standard XML editor for Eclipse,
                there are (bar the one below) no further steps showing you how to configure XML
                Schema support in Eclipse... each XML editor plugin would require its very own
                dedicated section, and this is <span class="emphasis"><em>Spring</em></span> reference documentation,
                not Eclipse XML editor documentation. You will have to read the documentation that
                comes with your XML editor plugin (good luck there) and figure it out for yourself.</p></li><li><p class="title"><b>Spring IDE</b></p><p>There is a dedicated Spring Framework plugin for Eclipse called
				<a href="http://springide.org/blog/" target="_top">Spring IDE</a> and it is pretty darn cool. (There's a
				considered and non-biased opinion for you!) This plugin makes using Spring even easier, and it has more
				than just support for the core Spring Framework... Spring WebFlow is supported too. Details of how to
				install Spring IDE can be found on the
				<a href="http://springide.org/project/wiki/SpringideInstall" target="_top">Spring IDE installation page</a>.</p><p>
			        </p><div class="mediaobject" align="center"><img src="eclipse-setup-3.png" align="middle"></div><p>
		        </p></li><li><p class="title"><b>Web Tools Platform (WTP) for Eclipse</b></p><p>If you are using the Web Tools Platform (WTP) for Eclipse, you don't need to
                do anything other than open a Spring XML configuration file using the WTP platform's
                XML editor. As can be seen in the screenshot below, you immediately get some slick
                IDE-level support for autocompleting tags and suchlike.</p><p>
			        </p><div class="mediaobject" align="center"><img src="eclipse-setup-2.png" align="middle"></div><p>
		        </p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="xsd-config-setup-idea"></a>A.3.2.&nbsp;Setting up IntelliJ IDEA</h3></div></div><div></div></div><div class="procedure"><p>The following steps illustrate setting up the
            <a href="http://www.jetbrains.com/idea/" target="_top">IntelliJ IDEA</a> IDE to be XSD-aware.
            The assumption in the following steps is that you already have an IDEA project
            open (either a brand new project or an already existing one).</p><p>Repeat as required for setting up IDEA to reference the other Spring XSD files.</p><ol type="1"><li><p class="title"><b>Step One</b></p><p>Create a new XML file (you can name this file whatever you want). In the
                example below, the file is named <tt class="literal">'context.xml'</tt>. Copy and paste
                the following text into the file so that it matches the screenshot.</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
       http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.5.xsd"&gt;

&lt;/beans&gt;</pre><p>
			        </p><div class="mediaobject" align="center"><img src="idea-setup-1.png" align="middle"></div><p>
		        </p></li><li><p class="title"><b>Step Two</b></p><p>As can be seen in the above screenshot, the XML file has a number
                of nasty red contextual error markers. To rectify this, IDEA has to be
                made aware of the location of the referenced XSD namespace(s).</p><p>To do this, simply position the cursor over the squiggly red
                area (see the screenshot below); then press the <b class="keycap">Alt</b>-<b class="keycap">Enter</b> keystroke combination, and press the <b class="keycap">Enter</b> key again when the popup becomes active to fetch the external
                 resource.</p><p>
			        </p><div class="mediaobject" align="center"><img src="idea-setup-6.png" align="middle"></div><p>
		        </p></li><li><p class="title"><b>Step Three</b></p><p>If the external resource could not be fetched (maybe no active Internet
                connection is available), you can manually configure the resource to
                reference a local copy of the XSD file. Simply open up the <tt class="literal">'Settings'</tt> dialog
                (using the <b class="keycap">Ctrl</b>-<b class="keycap">A</b>-<b class="keycap">S</b> keystroke combination or via the <tt class="literal">'File|Settings'</tt> menu),
                 and click on the <tt class="literal">'Resources'</tt> button.</p><p>
			        </p><div class="mediaobject" align="center"><img src="idea-setup-2.png" align="middle"></div><p>
		        </p></li><li><p class="title"><b>Step Four</b></p><p>As can be seen in the following screenshot, this will bring up a dialog
                that allows you to add an explicit reference to a local copy of the
                <tt class="literal">util</tt> schema file. (You can find all of the various Spring
                XSD files in the <tt class="literal">'src'</tt> directory of the Spring distribution.)</p><p>
			        </p><div class="mediaobject" align="center"><img src="idea-setup-3.png" align="middle"></div><p>
		        </p></li><li><p class="title"><b>Step Five</b></p><p>Clicking the <tt class="literal">'Add'</tt> button will bring up another dialog
                that allows you to explicitly to associate a namespace URI with the path to the
                relevant XSD file. As can be seen in the following screenshot, the
                <tt class="literal">'http://www.springframework.org/schema/util'</tt> namespace
                is being associated with the file resource
                <tt class="literal">'C:\bench\spring\src\org\springframework\beans\factory\xml\spring-util-2.5.xsd'</tt>.</p><p>
			        </p><div class="mediaobject" align="center"><img src="idea-setup-4.png" align="middle"></div><p>
		        </p></li><li><p class="title"><b>Step Six</b></p><p>Exiting out of the nested dialogs by clicking the <tt class="literal">'OK'</tt> button
                will then bring back the main editing window, and as can be seen in the
                following screenshot, the contextual error markers have disappeared; typing
                the <tt class="literal">'&lt;'</tt> character into the editing window now also
                brings up a handy dropdown box that contains all of the imported tags from
                the <tt class="literal">util</tt> namespace.</p><p>
			        </p><div class="mediaobject" align="center"><img src="idea-setup-5.png" align="middle"></div><p>
		        </p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="xsd-config-integration"></a>A.3.3.&nbsp;Integration issues</h3></div></div><div></div></div><p>This final section details integration issues that may arise when you switch over
            to using the above XSD-style for Spring 2.0 configuration.</p><p>This section is quite small at the moment (and hopefully it will stay that way).
            It has been included in the Spring documentation as a convenience to Spring users
            so that if you encounter an issue when switching over to the XSD-style in some
            specific environment you can refer to this section for the authoritative answer.</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="xsd-config-integration-resin"></a>A.3.3.1.&nbsp;XML parsing errors in the Resin v.3 application server</h4></div></div><div></div></div><p>If you are using the XSD-style for Spring 2.0 XML configuration
                and deploying to v.3 of Caucho's Resin application server, you will need
                to set some configuration options prior to startup so that an XSD-aware
                parser is available to Spring.</p><p>Please do read this resource,
                <a href="http://www.caucho.com/resin-3.0/xml/jaxp.xtp#xerces" target="_top">http://www.caucho.com/resin-3.0/xml/jaxp.xtp#xerces</a>,
                for further details.</p></div></div></div></div><div class="appendix" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="extensible-xml"></a>Appendix&nbsp;B.&nbsp;Extensible XML authoring</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="extensible-xml-introduction"></a>B.1.&nbsp;Introduction</h2></div></div><div></div></div><p>Since version 2.0, Spring has featured a mechanism for schema-based extensions
        to the basic Spring XML format for defining and configuring beans. This section is
        devoted to detailing how you would go about writing your own custom XML bean definition
        parsers and integrating such parsers into the Spring IoC container.</p><p>To facilitate the authoring of configuration files using a schema-aware XML editor,
    	Spring's extensible XML configuration mechanism is based on XML Schema. If you are
    	not familiar with Spring's current XML configuration extensions that come with the
    	standard Spring distribution, please first read the appendix entitled
    	<a href="#xsd-config" title="Appendix&nbsp;A.&nbsp;XML Schema-based configuration">Appendix&nbsp;A, <i>XML Schema-based configuration</i></a>.</p><p>Creating new XML configuration extensions can be done by following these (relatively)
    	simple steps:</p><p>
    	    </p><div class="orderedlist"><ol type="1"><li><p><a href="#extensible-xml-schema" title="B.2.&nbsp;Authoring the schema">Authoring</a> an XML schema to describe your custom element(s).</p></li><li><p><a href="#extensible-xml-namespacehandler" title="B.3.&nbsp;Coding a NamespaceHandler">Coding</a> a custom <tt class="interfacename">NamespaceHandler</tt>
                    implementation (this is an easy step, don't worry).</p></li><li><p><a href="#extensible-xml-parser" title="B.4.&nbsp;Coding a BeanDefinitionParser">Coding</a> one or more <tt class="interfacename">BeanDefinitionParser</tt>
                    implementations (this is where the real work is done).</p></li><li><p><a href="#extensible-xml-registration" title="B.5.&nbsp;Registering the handler and the schema">Registering</a> the above artifacts with Spring (this too is an easy step).</p></li></ol></div><p>
    	</p><p>What follows is a description of each of these steps. For the example, we will create
    	an XML extension (a custom XML element) that allows us to configure objects of the type
    	<tt class="classname">SimpleDateFormat</tt> (from the <tt class="literal">java.text</tt> package)
    	in an easy manner. When we are done, we will be able to define bean definitions of type
    	<tt class="classname">SimpleDateFormat</tt> like this:</p><pre class="programlisting">&lt;myns:dateformat id="dateFormat" 
    pattern="yyyy-MM-dd HH:mm"
    lenient="true"/&gt;
</pre><p><span class="emphasis"><em>(Don't worry about the fact that this example is very simple; much more
        detailed examples follow afterwards. The intent in this first simple example is to walk
        you through the basic steps involved.)</em></span></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="extensible-xml-schema"></a>B.2.&nbsp;Authoring the schema</h2></div></div><div></div></div><p>Creating an XML configuration extension for use with Spring's IoC container
    	starts with authoring an XML Schema to describe the extension. What follows
    	is the schema we'll use to configure <tt class="classname">SimpleDateFormat</tt>
    	objects.</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation">&lt;!-- myns.xsd (inside package org/springframework/samples/xml) --&gt;</span></i>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xsd:schema xmlns="http://www.mycompany.com/schema/myns"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:beans="http://www.springframework.org/schema/beans"
    targetNamespace="http://www.mycompany.com/schema/myns"
    elementFormDefault="qualified"
    attributeFormDefault="unqualified"&gt;

   &lt;xsd:import namespace="http://www.springframework.org/schema/beans"/&gt;

   &lt;xsd:element name="dateformat"&gt;
      &lt;xsd:complexType&gt;
         &lt;xsd:complexContent&gt;
            <span class="bold"><b>&lt;xsd:extension base="beans:identifiedType"&gt;</b></span>
               &lt;xsd:attribute name="lenient" type="xsd:boolean"/&gt;
               &lt;xsd:attribute name="pattern" type="xsd:string" use="required"/&gt;
            &lt;/xsd:extension&gt;
         &lt;/xsd:complexContent&gt;
      &lt;/xsd:complexType&gt;
   &lt;/xsd:element&gt;

&lt;/xsd:schema&gt;</pre><p>(The emphasized line contains an extension base for all tags that
    	will be identifiable (meaning they have an <tt class="literal">id</tt> attribute
    	that will be used as the bean identifier in the container). We are able to use this
    	attribute because we imported the Spring-provided <tt class="literal">'beans'</tt>
    	namespace.)</p><p>The above schema will be used to configure <tt class="classname">SimpleDateFormat</tt>
		objects, directly in an XML application context file using the
		<tt class="literal">&lt;myns:dateformat/&gt;</tt> element.</p><pre class="programlisting">&lt;myns:dateformat id="dateFormat" 
    pattern="yyyy-MM-dd HH:mm"
    lenient="true"/&gt;
</pre><p>Note that after we've created the infrastructure classes, the above snippet of XML
		will essentially be exactly the same as the following XML snippet. In other words,
		we're just creating a bean in the container, identified by the name
		<tt class="literal">'dateFormat'</tt> of type <tt class="classname">SimpleDateFormat</tt>, with a
		couple of properties set.</p><pre class="programlisting">&lt;bean id="dateFormat" class="java.text.SimpleDateFormat"&gt;
    &lt;constructor-arg value="yyyy-HH-dd HH:mm"/&gt;
    &lt;property name="lenient" value="true"/&gt;
&lt;/bean&gt;</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table summary="Note" border="0"><tbody><tr><td rowspan="2" valign="top" width="25" align="center"><img alt="[Note]" src="note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" valign="top" align="left"><p>The schema-based approach to creating configuration format allows for
			tight integration with an IDE that has a schema-aware XML editor. Using a properly
			authored schema, you can use autocompletion to have a user choose between several
			configuration options defined in the enumeration.</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="extensible-xml-namespacehandler"></a>B.3.&nbsp;Coding a <tt class="interfacename">NamespaceHandler</tt></h2></div></div><div></div></div><p>In addition to the schema, we need a <tt class="interfacename">NamespaceHandler</tt>
		that will parse all elements of this specific namespace Spring encounters
		while parsing configuration files. The <tt class="interfacename">NamespaceHandler</tt>
		should in our case take care of the parsing of the <tt class="literal">myns:dateformat</tt>
		element.</p><p>The <tt class="interfacename">NamespaceHandler</tt> interface is pretty simple in that 
		it features just three methods:</p><div class="itemizedlist"><ul compact="compact" type="disc"><li><p><tt class="methodname">init()</tt> - allows for initialization of
				the <tt class="interfacename">NamespaceHandler</tt> and will be called by Spring
				before the handler is used</p></li><li><p><tt class="methodname">BeanDefinition parse(Element, ParserContext)</tt> - 
				called when Spring encounters a top-level element (not nested inside a bean definition
				or a different namespace). This method can register bean definitions itself and/or
				return a bean definition.</p></li><li><p><tt class="methodname">BeanDefinitionHolder decorate(Node, BeanDefinitionHolder, ParserContext)</tt> -
				called when Spring encounters an attribute or nested element of a different namespace.
				The decoration of one or more bean definitions is used for example with the
				<a href="#beans-factory-scopes" title="3.4.&nbsp;Bean&#30340;&#20316;&#29992;&#22495;">out-of-the-box	scopes Spring 2.0 supports</a>.
				We'll start by highlighting a simple example, without using decoration, after which
				we will	show decoration in a somewhat more advanced example.</p></li></ul></div><p>Although it is perfectly possible to code your own
		<tt class="interfacename">NamespaceHandler</tt> for the entire namespace
		(and hence provide code that parses each and every element in the namespace),
		it is often the case that each top-level XML element in a Spring XML
		configuration file results in a single bean definition (as in our
		case, where a single <tt class="literal">&lt;myns:dateformat/&gt;</tt> element
		results in a single <tt class="classname">SimpleDateFormat</tt> bean definition).
		Spring features a number of convenience classes that support this scenario.
		In this example, we'll make use the <tt class="classname">NamespaceHandlerSupport</tt> class:</p><pre class="programlisting">package org.springframework.samples.xml;

import org.springframework.beans.factory.xml.NamespaceHandlerSupport;

public class MyNamespaceHandler extends NamespaceHandlerSupport {
    
    public void init() {<span class="bold"><b>
        registerBeanDefinitionParser("dateformat", new SimpleDateFormatBeanDefinitionParser());        
    </b></span>}
}</pre><p>The observant reader will notice that there isn't actually a whole lot of
        parsing logic in this class. Indeed... the <tt class="classname">NamespaceHandlerSupport</tt>
        class has a built in notion of delegation. It supports the registration of any number
        of <tt class="interfacename">BeanDefinitionParser</tt> instances, to which it will delegate
        to when it needs to parse an element in it's namespace. This clean separation of concerns
        allows a <tt class="interfacename">NamespaceHandler</tt> to handle the orchestration
        of the parsing of <span class="emphasis"><em>all</em></span> of the custom elements in it's namespace,
        while delegating to <tt class="literal">BeanDefinitionParsers</tt> to do the grunt work of the
        XML parsing; this means that each <tt class="interfacename">BeanDefinitionParser</tt> will
        contain just the logic for parsing a single custom element, as we can see in the next step</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="extensible-xml-parser"></a>B.4.&nbsp;Coding a <tt class="interfacename">BeanDefinitionParser</tt></h2></div></div><div></div></div><p>A <tt class="interfacename">BeanDefinitionParser</tt> will be used if the
		<tt class="interfacename">NamespaceHandler</tt> encounters an XML element of the type
		that has been mapped to the specific bean definition parser (which is <tt class="literal">'dateformat'</tt>
		in this case). In other words, the <tt class="interfacename">BeanDefinitionParser</tt> is
		responsible for parsing <span class="emphasis"><em>one</em></span> distinct top-level XML element defined in the
		schema. In the parser, we'll have access to the XML element (and thus it's subelements too)
		so that we can parse our custom XML content, as can be seen in the following example:</p><pre class="programlisting">package org.springframework.samples.xml;

import org.springframework.beans.factory.support.BeanDefinitionBuilder;
import org.springframework.beans.factory.xml.AbstractSingleBeanDefinitionParser;
import org.springframework.util.StringUtils;
import org.w3c.dom.Element;

import java.text.SimpleDateFormat;

public class SimpleDateFormatBeanDefinitionParser extends AbstractSingleBeanDefinitionParser { <a name="extensible-xml-parser-simpledateformat-co-1"></a><img src="1.png" alt="1" border="0">

   protected Class getBeanClass(Element element) {
      return SimpleDateFormat.class; <a name="extensible-xml-parser-simpledateformat-co-2"></a><img src="2.png" alt="2" border="0">
   }

   protected void doParse(Element element, BeanDefinitionBuilder bean) {
      <i class="lineannotation"><span class="lineannotation">// this will never be null since the schema explicitly requires that a value be supplied</span></i>
      String pattern = element.getAttribute("pattern");
      bean.addConstructorArg(pattern);

      <i class="lineannotation"><span class="lineannotation">// this however is an optional property</span></i>
      String lenient = element.getAttribute("lenient");
      if (StringUtils.hasText(lenient)) {
         bean.addPropertyValue("lenient", Boolean.valueOf(lenient));
      }
   }
}</pre><div class="calloutlist"><table summary="Callout list" border="0"><tbody><tr><td valign="top" width="5%" align="left"><a href="#extensible-xml-parser-simpledateformat-co-1"><img src="1.png" alt="1" border="0"></a> </td><td valign="top" align="left"><p>We use the Spring-provided <tt class="classname">AbstractSingleBeanDefinitionParser</tt>
			    to handle a lot of the basic grunt work of creating a <span class="emphasis"><em>single</em></span>
			    <tt class="interfacename">BeanDefinition</tt>.</p></td></tr><tr><td valign="top" width="5%" align="left"><a href="#extensible-xml-parser-simpledateformat-co-2"><img src="2.png" alt="2" border="0"></a> </td><td valign="top" align="left"><p>We supply the <tt class="classname">AbstractSingleBeanDefinitionParser</tt> superclass
			    with the type that our single <tt class="interfacename">BeanDefinition</tt> will represent.</p></td></tr></tbody></table></div><p>In this simple case, this is all that we need to do. The creation of our single
		<tt class="interfacename">BeanDefinition</tt> is handled by the <tt class="classname">AbstractSingleBeanDefinitionParser</tt>
		superclass, as is the extraction and setting of the bean definition's unique identifier.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="extensible-xml-registration"></a>B.5.&nbsp;Registering the handler and the schema</h2></div></div><div></div></div><p>The coding is finished! All that remains to be done is to somehow make the Spring XML
		parsing infrastructure aware of our custom element; we do this by registering our custom
		<tt class="interfacename">namespaceHandler</tt> and custom XSD file in two special purpose
		properties files. These properties files are both placed in a
		<tt class="filename">'META-INF'</tt> directory in your application, and can, for
		example, be distributed alongside your binary classes in a JAR file. The Spring XML parsing
		infrastructurewill automatically pick up your new extension by consuming these special
		properties files, the formats of which are detailed below.</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="extensible-xml-registration-spring-handlers"></a>B.5.1.&nbsp;<tt class="filename">'META-INF/spring.handlers'</tt></h3></div></div><div></div></div><p>The properties file called <tt class="filename">'spring.handlers'</tt> contains a mapping
			of XML Schema URIs to namespace handler classes. So for our example, we need to write the
			following:</p><pre class="programlisting">http\://www.mycompany.com/schema/myns=org.springframework.samples.xml.MyNamespaceHandler</pre><p><span class="emphasis"><em>(The <tt class="literal">':'</tt> character is a valid delimiter in the Java properties format,
			and so the <tt class="literal">':'</tt> character in the URI needs to be escaped with a backslash.)</em></span></p><p>The first part (the key) of the key-value pair is the URI associated with your custom namespace
			extension, and needs to <span class="emphasis"><em>match exactly</em></span> the value of the
			<tt class="literal">'targetNamespace'</tt> attribute as specified in your custom XSD schema.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="extensible-xml-registration-spring-schemas"></a>B.5.2.&nbsp;<tt class="filename">'META-INF/spring.schemas'</tt></h3></div></div><div></div></div><p>The properties file called <tt class="filename">'spring.schemas'</tt> contains a mapping
			of XML Schema locations (referred to along with the schema declaration in XML files
			that use the schema as part of the <tt class="literal">'xsi:schemaLocation'</tt> attribute)
			to <span class="emphasis"><em>classpath</em></span> resources. This file is needed to prevent Spring from
			absolutely having to use a default <tt class="interfacename">EntityResolver</tt> that requires
			Internet access to retrieve the schema file. If you specify the mapping in this properties file,
			Spring will search for the schema on the classpath (in this case <tt class="literal">'myns.xsd'</tt>
			in the <tt class="literal">'org.springframework.samples.xml'</tt> package):</p><pre class="programlisting">http\://www.mycompany.com/schema/myns/myns.xsd=org/springframework/samples/xml/myns.xsd</pre><p>The upshot of this is that you are encouraged to deploy your XSD file(s) right alongside
			the <tt class="interfacename">NamespaceHandler</tt> and <tt class="interfacename">BeanDefinitionParser</tt>
			classes on the classpath.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="extensible-xml-using"></a>B.6.&nbsp;Using a custom extension in your Spring XML configuration</h2></div></div><div></div></div><p>Using a custom extension that you yourself have implemented is no different from
		using one of the 'custom' extensions that Spring provides straight out of the box. Find below
		an example of using the custom <tt class="literal">&lt;dateformat/&gt;</tt> element developed in the
		previous steps in a Spring XML configuration file.</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:myns="http://www.mycompany.com/schema/myns"
      xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
http://www.mycompany.com/schema/myns http://www.mycompany.com/schema/myns/myns.xsd"&gt;

   <i class="lineannotation"><span class="lineannotation">&lt;!-- as a top-level bean --&gt;</span></i>
   &lt;myns:dateformat id="defaultDateFormat" pattern="yyyy-MM-dd HH:mm" lenient="true"/&gt;

   &lt;bean id="jobDetailTemplate" abstract="true"&gt;
      &lt;property name="dateFormat"&gt;
         <i class="lineannotation"><span class="lineannotation">&lt;!-- as an inner bean --&gt;</span></i>
         &lt;myns:dateformat pattern="HH:mm MM-dd-yyyy"/&gt;
      &lt;/property&gt;
   &lt;/bean&gt;

&lt;/beans&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="extensible-xml-meat"></a>B.7.&nbsp;Meatier examples</h2></div></div><div></div></div><p>Find below some much meatier examples of custom XML extensions.</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="extensible-xml-custom-nested"></a>B.7.1.&nbsp;Nesting custom tags within custom tags</h3></div></div><div></div></div><p>This example illustrates how you might go about writing the various artifacts
		    required to satisfy a target of the following configuration:</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:foo="http://www.foo.com/schema/component"
      xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
http://www.foo.com/schema/component http://www.foo.com/schema/component/component.xsd"&gt;

   <i class="lineannotation"><span class="lineannotation">&lt;foo:component id="bionic-family" name="Bionic-1"&gt;
      &lt;foo:component name="Sport-1"/&gt;
      &lt;foo:component name="Rock-1"/&gt;
   &lt;/foo:component&gt;</span></i>

&lt;/beans&gt;</pre><p>The above configuration actually nests custom extensions within each other. The class
            that is actually configured by the above <tt class="literal">&lt;foo:component/&gt;</tt>
            element is the <tt class="classname">Component</tt> class (shown directly below). Notice
            how the <tt class="classname">Component</tt> class does <span class="emphasis"><em>not</em></span> expose
            a setter method for the <tt class="literal">'components'</tt> property; this makes it hard
            (or rather impossible) to configure a bean definition for the <tt class="classname">Component</tt>
            class using setter injection.</p><pre class="programlisting">package com.foo;

import java.util.ArrayList;
import java.util.List;

public class Component {

   private String name;
   private List components = new ArrayList();

   <i class="lineannotation"><span class="lineannotation">// mmm, there is no setter method for the <tt class="literal">'components'</tt></span></i>
   public void addComponent(Component component) {
      this.components.add(component);
   }

   public List getComponents() {
      return components;
   }

   public String getName() {
      return name;
   }

   public void setName(String name) {
      this.name = name;
   }
}</pre><p>The typical solution to this issue is to create a custom <tt class="interfacename">FactoryBean</tt>
            that exposes a setter property for the <tt class="literal">'components'</tt> property.</p><pre class="programlisting">package com.foo;

import org.springframework.beans.factory.FactoryBean;

import java.util.Iterator;
import java.util.List;

public class ComponentFactoryBean implements FactoryBean {

   private Component parent;
   private List children;

   public void setParent(Component parent) {
      this.parent = parent;
   }

   public void setChildren(List children) {
      this.children = children;
   }

   public Object getObject() throws Exception {
      if (this.children != null &amp;&amp; this.children.size() &gt; 0) {
         for (Iterator it = children.iterator(); it.hasNext();) {
            Component childComponent = (Component) it.next();
            this.parent.addComponent(childComponent);
         }
      }
      return this.parent;
   }

   public Class getObjectType() {
      return Component.class;
   }

   public boolean isSingleton() {
      return true;
   }
}</pre><p>This is all very well, and does work nicely, but exposes a lot of Spring plumbing to the
            end user. What we are going to do is write a custom extension that hides away all of this
            Spring plumbing. If we stick to <a href="#extensible-xml-introduction" title="B.1.&nbsp;Introduction">the steps described
            previously</a>, we'll start off by creating the XSD schema to define the structure of
            our custom tag.</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?&gt;

&lt;xsd:schema xmlns="http://www.foo.com/schema/component"
         xmlns:xsd="http://www.w3.org/2001/XMLSchema"
         targetNamespace="http://www.foo.com/schema/component"
         elementFormDefault="qualified"
         attributeFormDefault="unqualified"&gt;

   &lt;xsd:element name="component"&gt;
      &lt;xsd:complexType&gt;
         &lt;xsd:choice minOccurs="0" maxOccurs="unbounded"&gt;
            &lt;xsd:element ref="component"/&gt;
         &lt;/xsd:choice&gt;
         &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
         &lt;xsd:attribute name="name" use="required" type="xsd:string"/&gt;
      &lt;/xsd:complexType&gt;
   &lt;/xsd:element&gt;

&lt;/xsd:schema&gt;
</pre><p>We'll then create a custom <tt class="interfacename">NamespaceHandler</tt>.</p><pre class="programlisting">package com.foo;

import org.springframework.beans.factory.xml.NamespaceHandlerSupport;

public class ComponentNamespaceHandler extends NamespaceHandlerSupport {

   public void init() {
      registerBeanDefinitionParser("component", new ComponentBeanDefinitionParser());
   }
}</pre><p>Next up is the custom <tt class="interfacename">BeanDefinitionParser</tt>. Remember
            that what we are creating is a <tt class="interfacename">BeanDefinition</tt> describing
            a <tt class="classname">ComponentFactoryBean</tt>.</p><pre class="programlisting">package com.foo;

import org.springframework.beans.factory.support.AbstractBeanDefinition;
import org.springframework.beans.factory.support.BeanDefinitionBuilder;
import org.springframework.beans.factory.support.ManagedList;
import org.springframework.beans.factory.xml.AbstractBeanDefinitionParser;
import org.springframework.beans.factory.xml.ParserContext;
import org.springframework.util.xml.DomUtils;
import org.w3c.dom.Element;

import java.util.List;

public class ComponentBeanDefinitionParser extends AbstractBeanDefinitionParser {

   protected AbstractBeanDefinition parseInternal(Element element, ParserContext parserContext) {
      BeanDefinitionBuilder factory = BeanDefinitionBuilder.rootBeanDefinition(ComponentFactoryBean.class);
      BeanDefinitionBuilder parent = parseComponent(element);
      factory.addPropertyValue("parent", parent.getBeanDefinition());

      List childElements = DomUtils.getChildElementsByTagName(element, "component");
      if (childElements != null &amp;&amp; childElements.size() &gt; 0) {
         parseChildComponents(childElements, factory);
      }
      return factory.getBeanDefinition();
   }

   private static BeanDefinitionBuilder parseComponent(Element element) {
      BeanDefinitionBuilder component = BeanDefinitionBuilder.rootBeanDefinition(Component.class);
      component.addPropertyValue("name", element.getAttribute("name"));
      return component;
   }

   private static void parseChildComponents(List childElements, BeanDefinitionBuilder factory) {
      ManagedList children = new ManagedList(childElements.size());
      for (int i = 0; i &lt; childElements.size(); ++i) {
         Element childElement = (Element) childElements.get(i);
         BeanDefinitionBuilder child = parseComponent(childElement);
         children.add(child.getBeanDefinition());
      }
      factory.addPropertyValue("children", children);
   }
}</pre><p>Lastly, the various artifacts need to be registered with the Spring XML infrastructure.</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation"># in <tt class="filename">'META-INF/spring.handlers'</tt></span></i>
http\://www.foo.com/schema/component=com.foo.ComponentNamespaceHandler</pre><pre class="programlisting"><i class="lineannotation"><span class="lineannotation"># in <tt class="filename">'META-INF/spring.schemas'</tt></span></i>
http\://www.foo.com/schema/component/component.xsd=com/foo/component.xsd</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="extensible-xml-custom-just-attributes"></a>B.7.2.&nbsp;Custom attributes on 'normal' elements</h3></div></div><div></div></div><p>Writing your own custom parser and the associated artifacts isn't hard, but sometimes it
		    is not the right thing to do. Consider the scenario where you need to add metadata to already
		    existing bean definitions. In this case you certainly don't want to have to go off and write
		    your own entire custom extension; rather you just want to add an additional attribute
		    to the existing bean definition element.</p><p>By way of another example, let's say that the service class that you are defining a bean
		    definition for a service object that will (unknown to it) be accessing a clustered
		    <a href="http://jcp.org/en/jsr/detail?id=107" target="_top">JCache</a>, and you want to ensure that
		    the named JCache instance is eagerly started within the surrounding cluster:</p><pre class="programlisting">&lt;bean id="checkingAccountService" class="com.foo.DefaultCheckingAccountService"
      <i class="lineannotation"><span class="lineannotation"><span class="bold"><b>jcache:cache-name="checking.account"&gt;</b></span></span></i>
   <i class="lineannotation"><span class="lineannotation">&lt;!-- other dependencies here... --&gt;</span></i>
&lt;/bean&gt;</pre><p>What we are going to do here is create another <tt class="interfacename">BeanDefinition</tt>
            when the <tt class="literal">'jcache:cache-name'</tt> attribute is parsed; this
            <tt class="interfacename">BeanDefinition</tt> will then initialize the named JCache
            for us. We will also modify the existing <tt class="interfacename">BeanDefinition</tt> for the
            <tt class="literal">'checkingAccountService'</tt> so that it will have a dependency on this
            new JCache-initializing <tt class="interfacename">BeanDefinition</tt>.</p><pre class="programlisting">package com.foo;

public class JCacheInitializer {

   private String name;

   public JCacheInitializer(String name) {
      this.name = name;
   }

   public void initialize() {
      <i class="lineannotation"><span class="lineannotation">// lots of JCache API calls to initialize the named cache...</span></i>
   }
}</pre><p>Now onto the custom extension. Firstly, the authoring of the XSD schema describing the
            custom attribute (quite easy in this case).</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?&gt;

&lt;xsd:schema xmlns="http://www.foo.com/schema/jcache"
            xmlns:xsd="http://www.w3.org/2001/XMLSchema"
            targetNamespace="http://www.foo.com/schema/jcache"
            elementFormDefault="qualified"&gt;

   &lt;xsd:attribute name="cache-name" type="xsd:string"/&gt;

&lt;/xsd:schema&gt;
</pre><p>Next, the associated <tt class="interfacename">NamespaceHandler</tt>.</p><pre class="programlisting">package com.foo;

import org.springframework.beans.factory.xml.NamespaceHandlerSupport;

public class JCacheNamespaceHandler extends NamespaceHandlerSupport {

   public void init() {
      super.registerBeanDefinitionDecoratorForAttribute("cache-name",
            new JCacheInitializingBeanDefinitionDecorator());
   }
}
</pre><p>Next, the parser. Note that in this case, because we are going to be parsing an XML
            attribute, we write a <tt class="interfacename">BeanDefinitionDecorator</tt> rather than a
            <tt class="interfacename">BeanDefinitionParser</tt>.</p><pre class="programlisting">package com.foo;

import org.springframework.beans.factory.config.BeanDefinitionHolder;
import org.springframework.beans.factory.support.AbstractBeanDefinition;
import org.springframework.beans.factory.support.BeanDefinitionBuilder;
import org.springframework.beans.factory.xml.BeanDefinitionDecorator;
import org.springframework.beans.factory.xml.ParserContext;
import org.w3c.dom.Attr;
import org.w3c.dom.Node;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public class JCacheInitializingBeanDefinitionDecorator implements BeanDefinitionDecorator {
   
   private static final String[] EMPTY_STRING_ARRAY = new String[0];

   public BeanDefinitionHolder decorate(
         Node source, BeanDefinitionHolder holder, ParserContext ctx) {
      String initializerBeanName = registerJCacheInitializer(source, ctx);
      createDependencyOnJCacheInitializer(holder, initializerBeanName);
      return holder;
   }

   private void createDependencyOnJCacheInitializer(BeanDefinitionHolder holder, String initializerBeanName) {
      AbstractBeanDefinition definition = ((AbstractBeanDefinition) holder.getBeanDefinition());
      String[] dependsOn = definition.getDependsOn();
      if (dependsOn == null) {
         dependsOn = new String[]{initializerBeanName};
      } else {
         List dependencies = new ArrayList(Arrays.asList(dependsOn));
         dependencies.add(initializerBeanName);
         dependsOn = (String[]) dependencies.toArray(EMPTY_STRING_ARRAY);
      }
      definition.setDependsOn(dependsOn);
   }

   private String registerJCacheInitializer(Node source, ParserContext ctx) {
      String cacheName = ((Attr) source).getValue();
      String beanName = cacheName + "-initializer";
      if (!ctx.getRegistry().containsBeanDefinition(beanName)) {
         BeanDefinitionBuilder initializer = BeanDefinitionBuilder.rootBeanDefinition(JCacheInitializer.class);
         initializer.addConstructorArg(cacheName);
         ctx.getRegistry().registerBeanDefinition(beanName, initializer.getBeanDefinition());
      }
      return beanName;
   }
}
</pre><p>Lastly, the various artifacts need to be registered with the Spring XML infrastructure.</p><pre class="programlisting"><i class="lineannotation"><span class="lineannotation"># in <tt class="filename">'META-INF/spring.handlers'</tt></span></i>
http\://www.foo.com/schema/jcache=com.foo.JCacheNamespaceHandler</pre><pre class="programlisting"><i class="lineannotation"><span class="lineannotation"># in <tt class="filename">'META-INF/spring.schemas'</tt></span></i>
http\://www.foo.com/schema/jcache/jcache.xsd=com/foo/jcache.xsd</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="extensible-xml-resources"></a>B.8.&nbsp;Further Resources</h2></div></div><div></div></div><p>Find below links to further resources concerning XML Schema and the extensible XML support
		described in this chapter.</p><div class="itemizedlist"><ul type="disc"><li><p>The <a href="http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/" target="_top">XML Schema Part 1: Structures Second Edition</a></p></li><li><p>The <a href="http://www.w3.org/TR/2004/REC-xmlschema-2-20041028/" target="_top">XML Schema Part 2: Datatypes Second Edition</a></p></li></ul></div></div></div><div class="appendix" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="springbeansdtd"></a>Appendix&nbsp;C.&nbsp;<tt class="literal">spring-beans-2.0.dtd</tt></h2></div></div><div></div></div><pre class="programlisting">&lt;!--
	Spring XML Beans DTD, version 2.0
	Authors: Rod Johnson, Juergen Hoeller, Alef Arendsen, Colin Sampaleanu, Rob Harrop

	This defines a simple and consistent way of creating a namespace
	of JavaBeans objects, managed by a Spring BeanFactory, read by
	XmlBeanDefinitionReader (with DefaultBeanDefinitionDocumentReader).

	This document type is used by most Spring functionality, including
	web application contexts, which are based on bean factories.

	Each "bean" element in this document defines a JavaBean.
	Typically the bean class is specified, along with JavaBean properties
	and/or constructor arguments.

	A bean instance can be a "singleton" (shared instance) or a "prototype"
	(independent instance). Further scopes can be provided by extended
	bean factories, for example in a web environment.

	References among beans are supported, that is, setting a JavaBean property
	or a constructor argument to refer to another bean in the same factory
	(or an ancestor factory).

	As alternative to bean references, "inner bean definitions" can be used.
	Singleton flags of such inner bean definitions are effectively ignored:
	Inner beans are typically anonymous prototypes.

	There is also support for lists, sets, maps, and java.util.Properties
	as bean property types or constructor argument types.

	For simple purposes, this DTD is sufficient. As of Spring 2.0,
	XSD-based bean definitions are supported as more powerful alternative.

	XML documents that conform to this DTD should declare the following doctype:

	&lt;!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN 2.0//EN"
		"http://www.springframework.org/dtd/spring-beans-2.0.dtd"&gt;
--&gt;


&lt;!--
	The document root. A document can contain bean definitions only,
	imports only, or a mixture of both (typically with imports first).
--&gt;
&lt;!ELEMENT beans (
	description?,
	(import | alias | bean)*
)&gt;

&lt;!--
	Default values for all bean definitions. Can be overridden at
	the "bean" level. See those attribute definitions for details.
--&gt;
&lt;!ATTLIST beans default-lazy-init (true | false) "false"&gt;
&lt;!ATTLIST beans default-autowire (no | byName | byType | constructor | autodetect) "no"&gt;
&lt;!ATTLIST beans default-dependency-check (none | objects | simple | all) "none"&gt;
&lt;!ATTLIST beans default-init-method CDATA #IMPLIED&gt;
&lt;!ATTLIST beans default-destroy-method CDATA #IMPLIED&gt;
&lt;!ATTLIST beans default-merge (true | false) "false"&gt;

&lt;!--
	Element containing informative text describing the purpose of the enclosing
	element. Always optional.
	Used primarily for user documentation of XML bean definition documents.
--&gt;
&lt;!ELEMENT description (#PCDATA)&gt;


&lt;!--
	Specifies an XML bean definition resource to import.
--&gt;
&lt;!ELEMENT import EMPTY&gt;

&lt;!--
	The relative resource location of the XML bean definition file to import,
	for example "myImport.xml" or "includes/myImport.xml" or "../myImport.xml".
--&gt;
&lt;!ATTLIST import resource CDATA #REQUIRED&gt;


&lt;!--
	Defines an alias for a bean, which can reside in a different definition file.
--&gt;
&lt;!ELEMENT alias EMPTY&gt;

&lt;!--
	The name of the bean to define an alias for.
--&gt;
&lt;!ATTLIST alias name CDATA #REQUIRED&gt;

&lt;!--
	The alias name to define for the bean.
--&gt;
&lt;!ATTLIST alias alias CDATA #REQUIRED&gt;

&lt;!--
  Allows for arbitrary metadata to be attached to a bean definition.
--&gt;
&lt;!ELEMENT meta EMPTY&gt;

&lt;!--
  Specifies the key name of the metadata parameter being defined.
--&gt;
&lt;!ATTLIST meta key CDATA #REQUIRED&gt;

&lt;!--
  Specifies the value of the metadata parameter being defined as a String.
--&gt;
&lt;!ATTLIST meta value CDATA #REQUIRED&gt;

&lt;!--
	Defines a single (usually named) bean.

	A bean definition may contain nested tags for constructor arguments,
	property values, lookup methods, and replaced methods. Mixing constructor
	injection and setter injection on the same bean is explicitly supported.
--&gt;
&lt;!ELEMENT bean (
	description?,
	(meta | constructor-arg | property | lookup-method | replaced-method)*
)&gt;

&lt;!--
	Beans can be identified by an id, to enable reference checking.

	There are constraints on a valid XML id: if you want to reference your bean
	in Java code using a name that's illegal as an XML id, use the optional
	"name" attribute. If neither is given, the bean class name is used as id
	(with an appended counter like "#2" if there is already a bean with that name).
--&gt;
&lt;!ATTLIST bean id ID #IMPLIED&gt;

&lt;!--
	Optional. Can be used to create one or more aliases illegal in an id.
	Multiple aliases can be separated by any number of spaces, commas, or
	semi-colons (or indeed any mixture of the three).
--&gt;
&lt;!ATTLIST bean name CDATA #IMPLIED&gt;

&lt;!--
	Each bean definition must specify the fully qualified name of the class,
	except if it pure serves as parent for child bean definitions.
--&gt;
&lt;!ATTLIST bean class CDATA #IMPLIED&gt;

&lt;!--
	Optionally specify a parent bean definition.

	Will use the bean class of the parent if none specified, but can
	also override it. In the latter case, the child bean class must be
	compatible with the parent, i.e. accept the parent's property values
	and constructor argument values, if any.

	A child bean definition will inherit constructor argument values,
	property values and method overrides from the parent, with the option
	to add new values. If init method, destroy method, factory bean and/or factory
	method are specified, they will override the corresponding parent settings.

	The remaining settings will always be taken from the child definition:
	depends on, autowire mode, dependency check, scope, lazy init.
--&gt;
&lt;!ATTLIST bean parent CDATA #IMPLIED&gt;

&lt;!--
	The scope of this bean: typically "singleton" (one shared instance,
	which will be returned by all calls to getBean() with the id),
	or "prototype" (independent instance resulting from each call to
	getBean(). Default is "singleton".

	Singletons are most commonly used, and are ideal for multi-threaded
	service objects. Further scopes, such as "request" or "session",
	might be supported by extended bean factories (for example, in a
	web environment).

	Note: This attribute will not be inherited by child bean definitions.
	Hence, it needs to be specified per concrete bean definition.

	Inner bean definitions inherit the singleton status of their containing
	bean definition, unless explicitly specified: The inner bean will be a
	singleton if the containing bean is a singleton, and a prototype if
	the containing bean has any other scope.
--&gt;
&lt;!ATTLIST bean scope CDATA #IMPLIED&gt;

&lt;!--
	Is this bean "abstract", i.e. not meant to be instantiated itself but
	rather just serving as parent for concrete child bean definitions.
	Default is "false". Specify "true" to tell the bean factory to not try to
	instantiate that particular bean in any case.

	Note: This attribute will not be inherited by child bean definitions.
	Hence, it needs to be specified per abstract bean definition.
--&gt;
&lt;!ATTLIST bean abstract (true | false) #IMPLIED&gt;

&lt;!--
	If this bean should be lazily initialized.
	If false, it will get instantiated on startup by bean factories
	that perform eager initialization of singletons.

	Note: This attribute will not be inherited by child bean definitions.
	Hence, it needs to be specified per concrete bean definition.
--&gt;
&lt;!ATTLIST bean lazy-init (true | false | default) "default"&gt;

&lt;!--
  Indicates whether or not this bean should be considered when looking
  for candidates to satisfy another beans autowiring requirements.
--&gt;
&lt;!ATTLIST bean autowire-candidate (true | false) #IMPLIED&gt;

&lt;!--
	Optional attribute controlling whether to "autowire" bean properties.
	This is an automagical process in which bean references don't need to be coded
	explicitly in the XML bean definition file, but Spring works out dependencies.

	There are 5 modes:

	1. "no"
	The traditional Spring default. No automagical wiring. Bean references
	must be defined in the XML file via the &lt;ref&gt; element. We recommend this
	in most cases as it makes documentation more explicit.

	2. "byName"
	Autowiring by property name. If a bean of class Cat exposes a dog property,
	Spring will try to set this to the value of the bean "dog" in the current factory.
	If there is no matching bean by name, nothing special happens;
	use dependency-check="objects" to raise an error in that case.

	3. "byType"
	Autowiring if there is exactly one bean of the property type in the bean factory.
	If there is more than one, a fatal error is raised, and you can't use byType
	autowiring for that bean. If there is none, nothing special happens;
	use dependency-check="objects" to raise an error in that case.

	4. "constructor"
	Analogous to "byType" for constructor arguments. If there isn't exactly one bean
	of the constructor argument type in the bean factory, a fatal error is raised.

	5. "autodetect"
	Chooses "constructor" or "byType" through introspection of the bean class.
	If a default constructor is found, "byType" gets applied.

	The latter two are similar to PicoContainer and make bean factories simple to
	configure for small namespaces, but doesn't work as well as standard Spring
	behaviour for bigger applications.

	Note that explicit dependencies, i.e. "property" and "constructor-arg" elements,
	always override autowiring. Autowire behavior can be combined with dependency
	checking, which will be performed after all autowiring has been completed.

	Note: This attribute will not be inherited by child bean definitions.
	Hence, it needs to be specified per concrete bean definition.
--&gt;
&lt;!ATTLIST bean autowire (no | byName | byType | constructor | autodetect | default) "default"&gt;

&lt;!--
	Optional attribute controlling whether to check whether all this
	beans dependencies, expressed in its properties, are satisfied.
	Default is no dependency checking.

	"simple" type dependency checking includes primitives and String;
	"objects" includes collaborators (other beans in the factory);
	"all" includes both types of dependency checking.

	Note: This attribute will not be inherited by child bean definitions.
	Hence, it needs to be specified per concrete bean definition.
--&gt;
&lt;!ATTLIST bean dependency-check (none | objects | simple | all | default) "default"&gt;

&lt;!--
	The names of the beans that this bean depends on being initialized.
	The bean factory will guarantee that these beans get initialized before.

	Note that dependencies are normally expressed through bean properties or
	constructor arguments. This property should just be necessary for other kinds
	of dependencies like statics (*ugh*) or database preparation on startup.

	Note: This attribute will not be inherited by child bean definitions.
	Hence, it needs to be specified per concrete bean definition.
--&gt;
&lt;!ATTLIST bean depends-on CDATA #IMPLIED&gt;

&lt;!--
	Optional attribute for the name of the custom initialization method
	to invoke after setting bean properties. The method must have no arguments,
	but may throw any exception.
--&gt;
&lt;!ATTLIST bean init-method CDATA #IMPLIED&gt;

&lt;!--
	Optional attribute for the name of the custom destroy method to invoke
	on bean factory shutdown. The method must have no arguments,
	but may throw any exception.

	Note: Only invoked on beans whose lifecycle is under full control
	of the factory - which is always the case for singletons, but not
	guaranteed for any other scope.
--&gt;
&lt;!ATTLIST bean destroy-method CDATA #IMPLIED&gt;

&lt;!--
	Optional attribute specifying the name of a factory method to use to
	create this object. Use constructor-arg elements to specify arguments
	to the factory method, if it takes arguments. Autowiring does not apply
	to factory methods.

	If the "class" attribute is present, the factory method will be a static
	method on the class specified by the "class" attribute on this bean
	definition. Often this will be the same class as that of the constructed
	object - for example, when the factory method is used as an alternative
	to a constructor. However, it may be on a different class. In that case,
	the created object will *not* be of the class specified in the "class"
	attribute. This is analogous to FactoryBean behavior.

	If the "factory-bean" attribute is present, the "class" attribute is not
	used, and the factory method will be an instance method on the object
	returned from a getBean call with the specified bean name. The factory
	bean may be defined as a singleton or a prototype.

	The factory method can have any number of arguments. Autowiring is not
	supported. Use indexed constructor-arg elements in conjunction with the
	factory-method attribute.

	Setter Injection can be used in conjunction with a factory method.
	Method Injection cannot, as the factory method returns an instance,
	which will be used when the container creates the bean.
--&gt;
&lt;!ATTLIST bean factory-method CDATA #IMPLIED&gt;

&lt;!--
	Alternative to class attribute for factory-method usage.
	If this is specified, no class attribute should be used.
	This should be set to the name of a bean in the current or
	ancestor factories that contains the relevant factory method.
	This allows the factory itself to be configured using Dependency
	Injection, and an instance (rather than static) method to be used.
--&gt;
&lt;!ATTLIST bean factory-bean CDATA #IMPLIED&gt;

&lt;!--
	Bean definitions can specify zero or more constructor arguments.
	This is an alternative to "autowire constructor".
	Arguments correspond to either a specific index of the constructor argument
	list or are supposed to be matched generically by type.

	Note: A single generic argument value will just be used once, rather than
	potentially matched multiple times (as of Spring 1.1).

	constructor-arg elements are also used in conjunction with the factory-method
	element to construct beans using static or instance factory methods.
--&gt;
&lt;!ELEMENT constructor-arg (
	description?,
	(bean | ref | idref | value | null | list | set | map | props)?
)&gt;

&lt;!--
	The constructor-arg tag can have an optional index attribute,
	to specify the exact index in the constructor argument list. Only needed
	to avoid ambiguities, e.g. in case of 2 arguments of the same type.
--&gt;
&lt;!ATTLIST constructor-arg index CDATA #IMPLIED&gt;

&lt;!--
	The constructor-arg tag can have an optional type attribute,
	to specify the exact type of the constructor argument. Only needed
	to avoid ambiguities, e.g. in case of 2 single argument constructors
	that can both be converted from a String.
--&gt;
&lt;!ATTLIST constructor-arg type CDATA #IMPLIED&gt;

&lt;!--
  A short-cut alternative to a child element "ref bean=".
--&gt;
&lt;!ATTLIST constructor-arg ref CDATA #IMPLIED&gt;

&lt;!--
  A short-cut alternative to a child element "value".
--&gt;
&lt;!ATTLIST constructor-arg value CDATA #IMPLIED&gt;


&lt;!--
	Bean definitions can have zero or more properties.
	Property elements correspond to JavaBean setter methods exposed
	by the bean classes. Spring supports primitives, references to other
	beans in the same or related factories, lists, maps and properties.
--&gt;
&lt;!ELEMENT property (
	description?, meta*,
	(bean | ref | idref | value | null | list | set | map | props)?
)&gt;

&lt;!--
	The property name attribute is the name of the JavaBean property.
	This follows JavaBean conventions: a name of "age" would correspond
	to setAge()/optional getAge() methods.
--&gt;
&lt;!ATTLIST property name CDATA #REQUIRED&gt;

&lt;!--
  A short-cut alternative to a child element "ref bean=".
--&gt;
&lt;!ATTLIST property ref CDATA #IMPLIED&gt;

&lt;!--
  A short-cut alternative to a child element "value".
--&gt;
&lt;!ATTLIST property value CDATA #IMPLIED&gt;


&lt;!--
	A lookup method causes the IoC container to override the given method and return
	the bean with the name given in the bean attribute. This is a form of Method Injection.
	It's particularly useful as an alternative to implementing the BeanFactoryAware
	interface, in order to be able to make getBean() calls for non-singleton instances
	at runtime. In this case, Method Injection is a less invasive alternative.
--&gt;
&lt;!ELEMENT lookup-method EMPTY&gt;

&lt;!--
	Name of a lookup method. This method should take no arguments.
--&gt;
&lt;!ATTLIST lookup-method name CDATA #IMPLIED&gt;

&lt;!--
	Name of the bean in the current or ancestor factories that the lookup method
	should resolve to. Often this bean will be a prototype, in which case the
	lookup method will return a distinct instance on every invocation. This
	is useful for single-threaded objects.
--&gt;
&lt;!ATTLIST lookup-method bean CDATA #IMPLIED&gt;


&lt;!--
	Similar to the lookup method mechanism, the replaced-method element is used to control
	IoC container method overriding: Method Injection. This mechanism allows the overriding
	of a method with arbitrary code.
--&gt;
&lt;!ELEMENT replaced-method (
	(arg-type)*
)&gt;

&lt;!--
	Name of the method whose implementation should be replaced by the IoC container.
	If this method is not overloaded, there's no need to use arg-type subelements.
	If this method is overloaded, arg-type subelements must be used for all
	override definitions for the method.
--&gt;
&lt;!ATTLIST replaced-method name CDATA #IMPLIED&gt;

&lt;!--
	Bean name of an implementation of the MethodReplacer interface in the current
	or ancestor factories. This may be a singleton or prototype bean. If it's
	a prototype, a new instance will be used for each method replacement.
	Singleton usage is the norm.
--&gt;
&lt;!ATTLIST replaced-method replacer CDATA #IMPLIED&gt;

&lt;!--
	Subelement of replaced-method identifying an argument for a replaced method
	in the event of method overloading.
--&gt;
&lt;!ELEMENT arg-type (#PCDATA)&gt;

&lt;!--
	Specification of the type of an overloaded method argument as a String.
	For convenience, this may be a substring of the FQN. E.g. all the
	following would match "java.lang.String":
	- java.lang.String
	- String
	- Str

	As the number of arguments will be checked also, this convenience can often
	be used to save typing.
--&gt;
&lt;!ATTLIST arg-type match CDATA #IMPLIED&gt;


&lt;!--
	Defines a reference to another bean in this factory or an external
	factory (parent or included factory).
--&gt;
&lt;!ELEMENT ref EMPTY&gt;

&lt;!--
	References must specify a name of the target bean.
	The "bean" attribute can reference any name from any bean in the context,
	to be checked at runtime.
	Local references, using the "local" attribute, have to use bean ids;
	they can be checked by this DTD, thus should be preferred for references
	within the same bean factory XML file.
--&gt;
&lt;!ATTLIST ref bean CDATA #IMPLIED&gt;
&lt;!ATTLIST ref local IDREF #IMPLIED&gt;
&lt;!ATTLIST ref parent CDATA #IMPLIED&gt;


&lt;!--
	Defines a string property value, which must also be the id of another
	bean in this factory or an external factory (parent or included factory).
	While a regular 'value' element could instead be used for the same effect,
	using idref in this case allows validation of local bean ids by the XML
	parser, and name completion by supporting tools.
--&gt;
&lt;!ELEMENT idref EMPTY&gt;

&lt;!--
	ID refs must specify a name of the target bean.
	The "bean" attribute can reference any name from any bean in the context,
	potentially to be checked at runtime by bean factory implementations.
	Local references, using the "local" attribute, have to use bean ids;
	they can be checked by this DTD, thus should be preferred for references
	within the same bean factory XML file.
--&gt;
&lt;!ATTLIST idref bean CDATA #IMPLIED&gt;
&lt;!ATTLIST idref local IDREF #IMPLIED&gt;


&lt;!--
	Contains a string representation of a property value.
	The property may be a string, or may be converted to the required
	type using the JavaBeans PropertyEditor machinery. This makes it
	possible for application developers to write custom PropertyEditor
	implementations that can convert strings to arbitrary target objects.

	Note that this is recommended for simple objects only.
	Configure more complex objects by populating JavaBean
	properties with references to other beans.
--&gt;
&lt;!ELEMENT value (#PCDATA)&gt;

&lt;!--
	The value tag can have an optional type attribute, to specify the
	exact type that the value should be converted to. Only needed
	if the type of the target property or constructor argument is
	too generic: for example, in case of a collection element.
--&gt;
&lt;!ATTLIST value type CDATA #IMPLIED&gt;

&lt;!--
	Denotes a Java null value. Necessary because an empty "value" tag
	will resolve to an empty String, which will not be resolved to a
	null value unless a special PropertyEditor does so.
--&gt;
&lt;!ELEMENT null (#PCDATA)&gt;


&lt;!--
	A list can contain multiple inner bean, ref, collection, or value elements.
	Java lists are untyped, pending generics support in Java 1.5,
	although references will be strongly typed.
	A list can also map to an array type. The necessary conversion
	is automatically performed by the BeanFactory.
--&gt;
&lt;!ELEMENT list (
	(bean | ref | idref | value | null | list | set | map | props)*
)&gt;

&lt;!--
	Enable/disable merging for collections when using parent/child beans.
--&gt;
&lt;!ATTLIST list merge (true | false | default) "default"&gt;

&lt;!--
	Specify the default Java type for nested values.
--&gt;
&lt;!ATTLIST list value-type CDATA #IMPLIED&gt;


&lt;!--
	A set can contain multiple inner bean, ref, collection, or value elements.
	Java sets are untyped, pending generics support in Java 1.5,
	although references will be strongly typed.
--&gt;
&lt;!ELEMENT set (
	(bean | ref | idref | value | null | list | set | map | props)*
)&gt;

&lt;!--
	Enable/disable merging for collections when using parent/child beans.
--&gt;
&lt;!ATTLIST set merge (true | false | default) "default"&gt;

&lt;!--
	Specify the default Java type for nested values.
--&gt;
&lt;!ATTLIST set value-type CDATA #IMPLIED&gt;


&lt;!--
	A Spring map is a mapping from a string key to object.
	Maps may be empty.
--&gt;
&lt;!ELEMENT map (
	(entry)*
)&gt;

&lt;!--
	Enable/disable merging for collections when using parent/child beans.
--&gt;
&lt;!ATTLIST map merge (true | false | default) "default"&gt;

&lt;!--
	Specify the default Java type for nested entry keys.
--&gt;
&lt;!ATTLIST map key-type CDATA #IMPLIED&gt;

&lt;!--
	Specify the default Java type for nested entry values.
--&gt;
&lt;!ATTLIST map value-type CDATA #IMPLIED&gt;

&lt;!--
	A map entry can be an inner bean, ref, value, or collection.
	The key of the entry is given by the "key" attribute or child element.
--&gt;
&lt;!ELEMENT entry (
  key?,
	(bean | ref | idref | value | null | list | set | map | props)?
)&gt;

&lt;!--
	Each map element must specify its key as attribute or as child element.
	A key attribute is always a String value.
--&gt;
&lt;!ATTLIST entry key CDATA #IMPLIED&gt;

&lt;!--
  A short-cut alternative to a "key" element with a "ref bean=" child element.
--&gt;
&lt;!ATTLIST entry key-ref CDATA #IMPLIED&gt;

&lt;!--
  A short-cut alternative to a child element "value".
--&gt;
&lt;!ATTLIST entry value CDATA #IMPLIED&gt;

&lt;!--
  A short-cut alternative to a child element "ref bean=".
--&gt;
&lt;!ATTLIST entry value-ref CDATA #IMPLIED&gt;

&lt;!--
	A key element can contain an inner bean, ref, value, or collection.
--&gt;
&lt;!ELEMENT key (
	(bean | ref | idref | value | null | list | set | map | props)
)&gt;


&lt;!--
	Props elements differ from map elements in that values must be strings.
	Props may be empty.
--&gt;
&lt;!ELEMENT props (
	(prop)*
)&gt;

&lt;!--
	Enable/disable merging for collections when using parent/child beans.
--&gt;
&lt;!ATTLIST props merge (true | false | default) "default"&gt;

&lt;!--
	Element content is the string value of the property.
	Note that whitespace is trimmed off to avoid unwanted whitespace
	caused by typical XML formatting.
--&gt;
&lt;!ELEMENT prop (#PCDATA)&gt;

&lt;!--
	Each property element must specify its key.
--&gt;
&lt;!ATTLIST prop key CDATA #REQUIRED&gt;</pre></div><div class="appendix" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="spring.tld"></a>Appendix&nbsp;D.&nbsp;spring.tld</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="spring.tld-intro"></a>D.1.&nbsp;Introduction</h2></div></div><div></div></div></div><p>One of the view technologies you can use with the Spring Framework
			    is Java Server Pages (JSPs). To help you implement views using Java Server Pages
			    the Spring Framework provides you with some tags for evaluating errors, setting
			    themes and outputting internationalized messages.</p><p>Please note that the various tags generated by this form tag library
                are compliant with the <a href="http://www.w3.org/TR/xhtml1/" target="_top">XHTML-1.0-Strict specification</a> and attendant <a href="http://www.w3.org/TR/xhtml1/dtds.html#a_dtd_XHTML-1.0-Strict" target="_top">DTD</a>.</p><p>This appendix describes the <tt class="literal">spring.tld</tt> tag library.</p><div class="itemizedlist"><ul type="disc"><li><a href="#spring.tld.bind" title="D.2.&nbsp;The bind tag">Section&nbsp;D.2, &#8220;The bind tag&#8221;</a></li><li><a href="#spring.tld.escapeBody" title="D.3.&nbsp;The escapeBody tag">Section&nbsp;D.3, &#8220;The escapeBody tag&#8221;</a></li><li><a href="#spring.tld.hasBindErrors" title="D.4.&nbsp;The hasBindErrors tag">Section&nbsp;D.4, &#8220;The hasBindErrors tag&#8221;</a></li><li><a href="#spring.tld.htmlEscape" title="D.5.&nbsp;The htmlEscape tag">Section&nbsp;D.5, &#8220;The htmlEscape tag&#8221;</a></li><li><a href="#spring.tld.message" title="D.6.&nbsp;The message tag">Section&nbsp;D.6, &#8220;The message tag&#8221;</a></li><li><a href="#spring.tld.nestedPath" title="D.7.&nbsp;The nestedPath tag">Section&nbsp;D.7, &#8220;The nestedPath tag&#8221;</a></li><li><a href="#spring.tld.theme" title="D.8.&nbsp;The theme tag">Section&nbsp;D.8, &#8220;The theme tag&#8221;</a></li><li><a href="#spring.tld.transform" title="D.9.&nbsp;The transform tag">Section&nbsp;D.9, &#8220;The transform tag&#8221;</a></li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="spring.tld.bind"></a>D.2.&nbsp;The <tt class="literal">bind</tt> tag</h2></div></div><div></div></div><p>
			Provides BindStatus object for the given bind path.
			The HTML escaping flag participates in a page-wide or application-wide setting
			(i.e. by HtmlEscapeTag or a "defaultHtmlEscape" context-param in web.xml).
		</p><div class="table"><a name="spring.tld.bind.table"></a><p class="title"><b>Table&nbsp;D.1.&nbsp;Attributes</b></p><table summary="Attributes" border="1"><colgroup><col align="center"><col align="center"><col align="center"></colgroup><thead><tr><th align="center">Attribute</th><th align="center">Required?</th><th align="center">Runtime Expression?</th><th align="left">Description</th></tr></thead><tbody><tr><td align="center"><p>htmlEscape</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Set HTML escaping for this tag, as boolean value. Overrides
			the default HTML escaping setting for the current page.</p></td></tr><tr><td align="center"><p>ignoreNestedPath</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Set whether to ignore a nested path, if any. Default is to not ignore.</p></td></tr><tr><td align="center"><p>path</p></td><td align="center"><p>true</p></td><td align="center"><p>true</p></td><td align="left"><p>The path to the bean or bean property to bind status
			information for. For instance account.name, company.address.zipCode
			or just employee. The status object will exported to the page scope,
			specifically for this bean or bean property</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="spring.tld.escapeBody"></a>D.3.&nbsp;The <tt class="literal">escapeBody</tt> tag</h2></div></div><div></div></div><p>
			Escapes its enclosed body content, applying HTML escaping and/or JavaScript escaping.
			The HTML escaping flag participates in a page-wide or application-wide setting
			(i.e. by HtmlEscapeTag or a "defaultHtmlEscape" context-param in web.xml).
		</p><div class="table"><a name="spring.tld.escapeBody.table"></a><p class="title"><b>Table&nbsp;D.2.&nbsp;Attributes</b></p><table summary="Attributes" border="1"><colgroup><col align="center"><col align="center"><col align="center"></colgroup><thead><tr><th align="center">Attribute</th><th align="center">Required?</th><th align="center">Runtime Expression?</th><th align="left">Description</th></tr></thead><tbody><tr><td align="center"><p>htmlEscape</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Set HTML escaping for this tag, as boolean value. Overrides the
			default HTML escaping setting for the current page.</p></td></tr><tr><td align="center"><p>javaScriptEscape</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Set JavaScript escaping for this tag, as boolean value.
			Default is false.</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="spring.tld.hasBindErrors"></a>D.4.&nbsp;The <tt class="literal">hasBindErrors</tt> tag</h2></div></div><div></div></div><p>
			Provides Errors instance in case of bind errors.
			The HTML escaping flag participates in a page-wide or application-wide setting
			(i.e. by HtmlEscapeTag or a "defaultHtmlEscape" context-param in web.xml).
		</p><div class="table"><a name="spring.tld.hasBindErrors.table"></a><p class="title"><b>Table&nbsp;D.3.&nbsp;Attributes</b></p><table summary="Attributes" border="1"><colgroup><col align="center"><col align="center"><col align="center"></colgroup><thead><tr><th align="center">Attribute</th><th align="center">Required?</th><th align="center">Runtime Expression?</th><th align="left">Description</th></tr></thead><tbody><tr><td align="center"><p>htmlEscape</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Set HTML escaping for this tag, as boolean value.
			Overrides the default HTML escaping setting for the current page.</p></td></tr><tr><td align="center"><p>name</p></td><td align="center"><p>true</p></td><td align="center"><p>true</p></td><td align="left"><p>The name of the bean in the request, that needs to be
			inspected for errors. If errors are available for this bean, they
			will be bound under the 'errors' key.</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="spring.tld.htmlEscape"></a>D.5.&nbsp;The <tt class="literal">htmlEscape</tt> tag</h2></div></div><div></div></div><p>
			Sets default HTML escape value for the current page.
			Overrides a "defaultHtmlEscape" context-param in web.xml, if any.
		</p><div class="table"><a name="spring.tld.htmlEscape.table"></a><p class="title"><b>Table&nbsp;D.4.&nbsp;Attributes</b></p><table summary="Attributes" border="1"><colgroup><col align="center"><col align="center"><col align="center"></colgroup><thead><tr><th align="center">Attribute</th><th align="center">Required?</th><th align="center">Runtime Expression?</th><th align="left">Description</th></tr></thead><tbody><tr><td align="center"><p>defaultHtmlEscape</p></td><td align="center"><p>true</p></td><td align="center"><p>true</p></td><td align="left"><p>Set the default value for HTML escaping, to be put
				into the current PageContext.</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="spring.tld.message"></a>D.6.&nbsp;The <tt class="literal">message</tt> tag</h2></div></div><div></div></div><p>
			Retrieves the message with the given code, or text if code isn't resolvable.
			The HTML escaping flag participates in a page-wide or application-wide setting
			(i.e. by HtmlEscapeTag or a "defaultHtmlEscape" context-param in web.xml).
		</p><div class="table"><a name="spring.tld.message.table"></a><p class="title"><b>Table&nbsp;D.5.&nbsp;Attributes</b></p><table summary="Attributes" border="1"><colgroup><col align="center"><col align="center"><col align="center"></colgroup><thead><tr><th align="center">Attribute</th><th align="center">Required?</th><th align="center">Runtime Expression?</th><th align="left">Description</th></tr></thead><tbody><tr><td align="center"><p>arguments</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Set optional message arguments for this tag, as a
			(comma-)delimited String (each String argument can contain JSP EL),
			an Object array (used as argument array), or a single Object (used
			as single argument).</p></td></tr><tr><td align="center"><p>argumentSeparator</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>The separator character to be used for splitting the
			arguments string value; defaults to a 'comma' (',').</p></td></tr><tr><td align="center"><p>code</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>The code (key) to use when looking up the message.
			If code is not provided, the text attribute will be used.</p></td></tr><tr><td align="center"><p>htmlEscape</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Set HTML escaping for this tag, as boolean value.
			Overrides the default HTML escaping setting for the current page.</p></td></tr><tr><td align="center"><p>javaScriptEscape</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Set JavaScript escaping for this tag, as boolean value. Default is false.</p></td></tr><tr><td align="center"><p>message</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>A MessageSourceResolvable argument (direct or through JSP EL).
				Fits nicely when used in conjunction with Spring's own validation error
				classes which all implement the MessageSourceResolvable interface. For
				example, this allows you to iterate over all of the errors in a form,
				passing each error (using a runtime expression) as the value of this
				'message' attribute, thus effecting the easy display of such error
				messages.</p></td></tr><tr><td align="center"><p>scope</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>The scope to use when exporting the result to a variable.
			This attribute is only used when var is also set. Possible values are
			page, request, session and application.</p></td></tr><tr><td align="center"><p>text</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Default text to output when a message for the given code
			could not be found. If both text and code are not set, the tag will
			output null.</p></td></tr><tr><td align="center"><p>var</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>The string to use when binding the result to the page,
			request, session or application scope. If not specified, the result
			gets outputted to the writer (i.e. typically directly to the JSP).</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="spring.tld.nestedPath"></a>D.7.&nbsp;The <tt class="literal">nestedPath</tt> tag</h2></div></div><div></div></div><p>
			Sets a nested path to be used by the bind tag's path.
		</p><div class="table"><a name="spring.tld.nestedPath.table"></a><p class="title"><b>Table&nbsp;D.6.&nbsp;Attributes</b></p><table summary="Attributes" border="1"><colgroup><col align="center"><col align="center"><col align="center"></colgroup><thead><tr><th align="center">Attribute</th><th align="center">Required?</th><th align="center">Runtime Expression?</th><th align="left">Description</th></tr></thead><tbody><tr><td align="center"><p>path</p></td><td align="center"><p>true</p></td><td align="center"><p>true</p></td><td align="left"><p>Set the path that this tag should apply. E.g. 'customer'
			to allow bind paths like 'address.street' rather than
			'customer.address.street'.</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="spring.tld.theme"></a>D.8.&nbsp;The <tt class="literal">theme</tt> tag</h2></div></div><div></div></div><p>
			Retrieves the theme message with the given code, or text if code isn't resolvable.
			The HTML escaping flag participates in a page-wide or application-wide setting
			(i.e. by HtmlEscapeTag or a "defaultHtmlEscape" context-param in web.xml).
		</p><div class="table"><a name="spring.tld.theme.table"></a><p class="title"><b>Table&nbsp;D.7.&nbsp;Attributes</b></p><table summary="Attributes" border="1"><colgroup><col align="center"><col align="center"><col align="center"></colgroup><thead><tr><th align="center">Attribute</th><th align="center">Required?</th><th align="center">Runtime Expression?</th><th align="left">Description</th></tr></thead><tbody><tr><td align="center"><p>arguments</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Set optional message arguments for this tag, as a
			(comma-)delimited String (each String argument can contain JSP EL),
			an Object array (used as argument array), or a single Object (used
			as single argument).</p></td></tr><tr><td align="center"><p>argumentSeparator</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>The separator character to be used for splitting the
			arguments string value; defaults to a 'comma' (',').</p></td></tr><tr><td align="center"><p>code</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>The code (key) to use when looking up the message.
			If code is not provided, the text attribute will be used.</p></td></tr><tr><td align="center"><p>htmlEscape</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Set HTML escaping for this tag, as boolean value.
			Overrides the default HTML escaping setting for the current page.</p></td></tr><tr><td align="center"><p>javaScriptEscape</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Set JavaScript escaping for this tag, as boolean value. Default is false.</p></td></tr><tr><td align="center"><p>message</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>A MessageSourceResolvable argument (direct or through JSP EL).</p></td></tr><tr><td align="center"><p>scope</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>The scope to use when exporting the result to a variable.
			This attribute is only used when var is also set. Possible values are
			page, request, session and application.</p></td></tr><tr><td align="center"><p>text</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Default text to output when a message for the given code
			could not be found. If both text and code are not set, the tag will
			output null.</p></td></tr><tr><td align="center"><p>var</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>The string to use when binding the result to the page,
			request, session or application scope. If not specified, the result
			gets outputted to the writer (i.e. typically directly to the JSP).</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="spring.tld.transform"></a>D.9.&nbsp;The <tt class="literal">transform</tt> tag</h2></div></div><div></div></div><p>
			Provides transformation of variables to Strings, using an appropriate
			custom PropertyEditor from BindTag (can only be used inside BindTag).
			The HTML escaping flag participates in a page-wide or application-wide setting
			(i.e. by HtmlEscapeTag or a 'defaultHtmlEscape' context-param in web.xml).
		</p><div class="table"><a name="spring.tld.transform.table"></a><p class="title"><b>Table&nbsp;D.8.&nbsp;Attributes</b></p><table summary="Attributes" border="1"><colgroup><col align="center"><col align="center"><col align="center"></colgroup><thead><tr><th align="center">Attribute</th><th align="center">Required?</th><th align="center">Runtime Expression?</th><th align="left">Description</th></tr></thead><tbody><tr><td align="center"><p>htmlEscape</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Set HTML escaping for this tag, as boolean value. Overrides
			the default HTML escaping setting for the current page.</p></td></tr><tr><td align="center"><p>scope</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>The scope to use when exported the result to a variable.
			This attribute is only used when var is also set. Possible values are
			page, request, session and application.</p></td></tr><tr><td align="center"><p>value</p></td><td align="center"><p>true</p></td><td align="center"><p>true</p></td><td align="left"><p>The value to transform. This is the actual object you want
			to have transformed (for instance a Date). Using the PropertyEditor that
			is currently in use by the 'spring:bind' tag.</p></td></tr><tr><td align="center"><p>var</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>The string to use when binding the result to the page,
			request, session or application scope. If not specified, the result gets
			outputted to the writer (i.e. typically directly to the JSP).</p></td></tr></tbody></table></div></div></div><div class="appendix" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="spring-form.tld"></a>Appendix&nbsp;E.&nbsp;spring-form.tld</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="spring-form.tld-intro"></a>E.1.&nbsp;Introduction</h2></div></div><div></div></div></div><p>One of the view technologies you can use with the Spring Framework
			    is Java Server Pages (JSPs). To help you implement views using Java Server Pages
			    the Spring Framework provides you with some tags for evaluating errors, setting
			    themes and outputting internationalized messages.</p><p>Please note that the various tags generated by this form tag library
                are compliant with the <a href="http://www.w3.org/TR/xhtml1/" target="_top">XHTML-1.0-Strict specification</a> and attendant <a href="http://www.w3.org/TR/xhtml1/dtds.html#a_dtd_XHTML-1.0-Strict" target="_top">DTD</a>.</p><p>This appendix describes the <tt class="literal">spring-form.tld</tt> tag library.</p><div class="itemizedlist"><ul type="disc"><li><a href="#spring-form.tld.checkbox" title="E.2.&nbsp;The checkbox tag">Section&nbsp;E.2, &#8220;The checkbox tag&#8221;</a></li><li><a href="#spring-form.tld.checkboxes" title="E.3.&nbsp;The checkboxes tag">Section&nbsp;E.3, &#8220;The checkboxes tag&#8221;</a></li><li><a href="#spring-form.tld.errors" title="E.4.&nbsp;The errors tag">Section&nbsp;E.4, &#8220;The errors tag&#8221;</a></li><li><a href="#spring-form.tld.form" title="E.5.&nbsp;The form tag">Section&nbsp;E.5, &#8220;The form tag&#8221;</a></li><li><a href="#spring-form.tld.hidden" title="E.6.&nbsp;The hidden tag">Section&nbsp;E.6, &#8220;The hidden tag&#8221;</a></li><li><a href="#spring-form.tld.input" title="E.7.&nbsp;The input tag">Section&nbsp;E.7, &#8220;The input tag&#8221;</a></li><li><a href="#spring-form.tld.label" title="E.8.&nbsp;The label tag">Section&nbsp;E.8, &#8220;The label tag&#8221;</a></li><li><a href="#spring-form.tld.option" title="E.9.&nbsp;The option tag">Section&nbsp;E.9, &#8220;The option tag&#8221;</a></li><li><a href="#spring-form.tld.options" title="E.10.&nbsp;The options tag">Section&nbsp;E.10, &#8220;The options tag&#8221;</a></li><li><a href="#spring-form.tld.password" title="E.11.&nbsp;The password tag">Section&nbsp;E.11, &#8220;The password tag&#8221;</a></li><li><a href="#spring-form.tld.radiobutton" title="E.12.&nbsp;The radiobutton tag">Section&nbsp;E.12, &#8220;The radiobutton tag&#8221;</a></li><li><a href="#spring-form.tld.radiobuttons" title="E.13.&nbsp;The radiobuttons tag">Section&nbsp;E.13, &#8220;The radiobuttons tag&#8221;</a></li><li><a href="#spring-form.tld.select" title="E.14.&nbsp;The select tag">Section&nbsp;E.14, &#8220;The select tag&#8221;</a></li><li><a href="#spring-form.tld.textarea" title="E.15.&nbsp;The textarea tag">Section&nbsp;E.15, &#8220;The textarea tag&#8221;</a></li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="spring-form.tld.checkbox"></a>E.2.&nbsp;The <tt class="literal">checkbox</tt> tag</h2></div></div><div></div></div><p>Renders an HTML 'input' tag with type 'checkbox'.</p><div class="table"><a name="spring-form.tld.checkbox.table"></a><p class="title"><b>Table&nbsp;E.1.&nbsp;Attributes</b></p><table summary="Attributes" border="1"><colgroup><col align="center"><col align="center"><col align="center"></colgroup><thead><tr><th align="center">Attribute</th><th align="center">Required?</th><th align="center">Runtime Expression?</th><th align="left">Description</th></tr></thead><tbody><tr><td align="center"><p>accesskey</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>cssClass</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "class" - HTML Optional Attribute</p></td></tr><tr><td align="center"><p>cssErrorClass</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "class" - HTML Optional Attribute. Used when the bound field has errors.</p></td></tr><tr><td align="center"><p>cssStyle</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "style" - HTML Optional Attribute</p></td></tr><tr><td align="center"><p>dir</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>disabled</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Optional Attribute. Setting the value of this attribute to 'true' (without the quotes) will disable the HTML element.</p></td></tr><tr><td align="center"><p>htmlEscape</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Enable/disable HTML escaping of rendered values.</p></td></tr><tr><td align="center"><p>id</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>label</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Value to be displayed as part of the tag</p></td></tr><tr><td align="center"><p>lang</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>onblur</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onchange</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onclick</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>ondblclick</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onfocus</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeydown</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeypress</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeyup</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmousedown</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmousemove</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseout</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseover</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseup</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>path</p></td><td align="center"><p>true</p></td><td align="center"><p>true</p></td><td align="left"><p>Path to property for data binding</p></td></tr><tr><td align="center"><p>tabindex</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>title</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>value</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Optional Attribute</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="spring-form.tld.checkboxes"></a>E.3.&nbsp;The <tt class="literal">checkboxes</tt> tag</h2></div></div><div></div></div><p>Renders multiple HTML 'input' tags with type 'checkbox'.</p><div class="table"><a name="spring-form.tld.checkboxes.table"></a><p class="title"><b>Table&nbsp;E.2.&nbsp;Attributes</b></p><table summary="Attributes" border="1"><colgroup><col align="center"><col align="center"><col align="center"></colgroup><thead><tr><th align="center">Attribute</th><th align="center">Required?</th><th align="center">Runtime Expression?</th><th align="left">Description</th></tr></thead><tbody><tr><td align="center"><p>accesskey</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>cssClass</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "class" - HTML Optional Attribute</p></td></tr><tr><td align="center"><p>cssErrorClass</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "class" - HTML Optional Attribute. Used when the bound field has errors.</p></td></tr><tr><td align="center"><p>cssStyle</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "style" - HTML Optional Attribute</p></td></tr><tr><td align="center"><p>delimiter</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Delimiter to use between each 'input' tag with type 'checkbox'. There is no delimiter by default.</p></td></tr><tr><td align="center"><p>dir</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>disabled</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Optional Attribute. Setting the value of this attribute to 'true' (without the quotes) will disable the HTML element.</p></td></tr><tr><td align="center"><p>element</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Specifies the HTML element that is used to enclose each 'input' tag with type 'checkbox'.  Defaults to 'span'.</p></td></tr><tr><td align="center"><p>htmlEscape</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Enable/disable HTML escaping of rendered values.</p></td></tr><tr><td align="center"><p>id</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>itemLabel</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Value to be displayed as part of the 'input' tags with type 'checkbox'</p></td></tr><tr><td align="center"><p>items</p></td><td align="center"><p>true</p></td><td align="center"><p>true</p></td><td align="left"><p>The Collection, Map or array of objects used to generate the 'input' tags with type 'checkbox'</p></td></tr><tr><td align="center"><p>itemValue</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Name of the property mapped to 'value' attribute of the 'input' tags with type 'checkbox'</p></td></tr><tr><td align="center"><p>lang</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>onblur</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onchange</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onclick</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>ondblclick</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onfocus</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeydown</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeypress</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeyup</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmousedown</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmousemove</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseout</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseover</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseup</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>path</p></td><td align="center"><p>true</p></td><td align="center"><p>true</p></td><td align="left"><p>Path to property for data binding</p></td></tr><tr><td align="center"><p>tabindex</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>title</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="spring-form.tld.errors"></a>E.4.&nbsp;The <tt class="literal">errors</tt> tag</h2></div></div><div></div></div><p>Renders field errors in an HTML 'span' tag.</p><div class="table"><a name="spring-form.tld.errors.table"></a><p class="title"><b>Table&nbsp;E.3.&nbsp;Attributes</b></p><table summary="Attributes" border="1"><colgroup><col align="center"><col align="center"><col align="center"></colgroup><thead><tr><th align="center">Attribute</th><th align="center">Required?</th><th align="center">Runtime Expression?</th><th align="left">Description</th></tr></thead><tbody><tr><td align="center"><p>cssClass</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "class" - HTML Optional Attribute</p></td></tr><tr><td align="center"><p>cssStyle</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "style" - HTML Optional Attribute</p></td></tr><tr><td align="center"><p>delimiter</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Delimiter for displaying multiple error messages. Defaults to the br tag.</p></td></tr><tr><td align="center"><p>dir</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>element</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Specifies the HTML element that is used to render the enclosing errors.</p></td></tr><tr><td align="center"><p>htmlEscape</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Enable/disable HTML escaping of rendered values.</p></td></tr><tr><td align="center"><p>id</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>lang</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>onclick</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>ondblclick</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeydown</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeypress</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeyup</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmousedown</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmousemove</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseout</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseover</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseup</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>path</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Path to errors object for data binding</p></td></tr><tr><td align="center"><p>tabindex</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>title</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="spring-form.tld.form"></a>E.5.&nbsp;The <tt class="literal">form</tt> tag</h2></div></div><div></div></div><p>Renders an HTML 'form' tag and exposes a binding path to inner tags for binding.</p><div class="table"><a name="spring-form.tld.form.table"></a><p class="title"><b>Table&nbsp;E.4.&nbsp;Attributes</b></p><table summary="Attributes" border="1"><colgroup><col align="center"><col align="center"><col align="center"></colgroup><thead><tr><th align="center">Attribute</th><th align="center">Required?</th><th align="center">Runtime Expression?</th><th align="left">Description</th></tr></thead><tbody><tr><td align="center"><p>acceptCharset</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Specifies
the list of character encodings for input data that is accepted by the
server processing this form. The value is a space- and/or
comma-delimited list of charset values. The client must interpret this
list as an exclusive-or list, i.e., the server is able to accept any
single character encoding per entity received.</p></td></tr><tr><td align="center"><p>action</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Required Attribute</p></td></tr><tr><td align="center"><p>commandName</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Name of the model attribute under which the form object is exposed.
				Defaults to 'command'.</p></td></tr><tr><td align="center"><p>cssClass</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "class" - HTML Optional Attribute</p></td></tr><tr><td align="center"><p>cssStyle</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "style" - HTML Optional Attribute</p></td></tr><tr><td align="center"><p>dir</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>enctype</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Optional Attribute</p></td></tr><tr><td align="center"><p>htmlEscape</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Enable/disable HTML escaping of rendered values.</p></td></tr><tr><td align="center"><p>id</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>lang</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>method</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Optional Attribute</p></td></tr><tr><td align="center"><p>modelAttribute</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Name of the model attribute under which the form object is exposed.
				Defaults to 'command'.</p></td></tr><tr><td align="center"><p>name</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute - added for backwards compatibility cases</p></td></tr><tr><td align="center"><p>onclick</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>ondblclick</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeydown</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeypress</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeyup</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmousedown</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmousemove</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseout</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseover</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseup</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onreset</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onsubmit</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>title</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="spring-form.tld.hidden"></a>E.6.&nbsp;The <tt class="literal">hidden</tt> tag</h2></div></div><div></div></div><p>Renders an HTML 'input' tag with type 'hidden' using the bound value.</p><div class="table"><a name="spring-form.tld.hidden.table"></a><p class="title"><b>Table&nbsp;E.5.&nbsp;Attributes</b></p><table summary="Attributes" border="1"><colgroup><col align="center"><col align="center"><col align="center"></colgroup><thead><tr><th align="center">Attribute</th><th align="center">Required?</th><th align="center">Runtime Expression?</th><th align="left">Description</th></tr></thead><tbody><tr><td align="center"><p>htmlEscape</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Enable/disable HTML escaping of rendered values.</p></td></tr><tr><td align="center"><p>id</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>path</p></td><td align="center"><p>true</p></td><td align="center"><p>true</p></td><td align="left"><p>Path to property for data binding</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="spring-form.tld.input"></a>E.7.&nbsp;The <tt class="literal">input</tt> tag</h2></div></div><div></div></div><p>Renders an HTML 'input' tag with type 'text' using the bound value.</p><div class="table"><a name="spring-form.tld.input.table"></a><p class="title"><b>Table&nbsp;E.6.&nbsp;Attributes</b></p><table summary="Attributes" border="1"><colgroup><col align="center"><col align="center"><col align="center"></colgroup><thead><tr><th align="center">Attribute</th><th align="center">Required?</th><th align="center">Runtime Expression?</th><th align="left">Description</th></tr></thead><tbody><tr><td align="center"><p>accesskey</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>alt</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Optional Attribute</p></td></tr><tr><td align="center"><p>autocomplete</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Common Optional Attribute</p></td></tr><tr><td align="center"><p>cssClass</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "class" - HTML Optional Attribute</p></td></tr><tr><td align="center"><p>cssErrorClass</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "class" - HTML Optional Attribute. Used when the bound field has errors.</p></td></tr><tr><td align="center"><p>cssStyle</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "style" - HTML Optional Attribute</p></td></tr><tr><td align="center"><p>dir</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>disabled</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Optional Attribute. Setting the value of this attribute to 'true' (without the quotes) will disable the HTML element.</p></td></tr><tr><td align="center"><p>htmlEscape</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Enable/disable HTML escaping of rendered values.</p></td></tr><tr><td align="center"><p>id</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>lang</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>maxlength</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Optional Attribute</p></td></tr><tr><td align="center"><p>onblur</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onchange</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onclick</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>ondblclick</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onfocus</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeydown</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeypress</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeyup</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmousedown</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmousemove</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseout</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseover</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseup</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onselect</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>path</p></td><td align="center"><p>true</p></td><td align="center"><p>true</p></td><td align="left"><p>Path to property for data binding</p></td></tr><tr><td align="center"><p>readonly</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Optional Attribute. Setting the value of this attribute to 'true' (without the quotes) will make the HTML element readonly.</p></td></tr><tr><td align="center"><p>size</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Optional Attribute</p></td></tr><tr><td align="center"><p>tabindex</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>title</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="spring-form.tld.label"></a>E.8.&nbsp;The <tt class="literal">label</tt> tag</h2></div></div><div></div></div><p>Renders a form field label in an HTML 'label' tag.</p><div class="table"><a name="spring-form.tld.label.table"></a><p class="title"><b>Table&nbsp;E.7.&nbsp;Attributes</b></p><table summary="Attributes" border="1"><colgroup><col align="center"><col align="center"><col align="center"></colgroup><thead><tr><th align="center">Attribute</th><th align="center">Required?</th><th align="center">Runtime Expression?</th><th align="left">Description</th></tr></thead><tbody><tr><td align="center"><p>cssClass</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "class" - HTML Optional Attribute.</p></td></tr><tr><td align="center"><p>cssErrorClass</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "class" - HTML Optional Attribute. Used only when errors are present.</p></td></tr><tr><td align="center"><p>cssStyle</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "style" - HTML Optional Attribute</p></td></tr><tr><td align="center"><p>dir</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>for</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>htmlEscape</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Enable/disable HTML escaping of rendered values.</p></td></tr><tr><td align="center"><p>id</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>lang</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>onclick</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>ondblclick</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeydown</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeypress</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeyup</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmousedown</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmousemove</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseout</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseover</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseup</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>path</p></td><td align="center"><p>true</p></td><td align="center"><p>true</p></td><td align="left"><p>Path to errors object for data binding</p></td></tr><tr><td align="center"><p>tabindex</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>title</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="spring-form.tld.option"></a>E.9.&nbsp;The <tt class="literal">option</tt> tag</h2></div></div><div></div></div><p>Renders a single HTML 'option'. Sets 'selected' as appropriate based on bound value.</p><div class="table"><a name="spring-form.tld.option.table"></a><p class="title"><b>Table&nbsp;E.8.&nbsp;Attributes</b></p><table summary="Attributes" border="1"><colgroup><col align="center"><col align="center"><col align="center"></colgroup><thead><tr><th align="center">Attribute</th><th align="center">Required?</th><th align="center">Runtime Expression?</th><th align="left">Description</th></tr></thead><tbody><tr><td align="center"><p>cssClass</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "class" - HTML Optional Attribute</p></td></tr><tr><td align="center"><p>cssErrorClass</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "class" - HTML Optional Attribute. Used when the bound field has errors.</p></td></tr><tr><td align="center"><p>cssStyle</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "style" - HTML Optional Attribute</p></td></tr><tr><td align="center"><p>dir</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>disabled</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Optional Attribute. Setting the value of this attribute to 'true' (without the quotes) will disable the HTML element.</p></td></tr><tr><td align="center"><p>htmlEscape</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Enable/disable HTML escaping of rendered values.</p></td></tr><tr><td align="center"><p>label</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Optional Attribute</p></td></tr><tr><td align="center"><p>lang</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>onclick</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>ondblclick</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeydown</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeypress</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeyup</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmousedown</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmousemove</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseout</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseover</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseup</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>tabindex</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>title</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>value</p></td><td align="center"><p>true</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Optional Attribute</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="spring-form.tld.options"></a>E.10.&nbsp;The <tt class="literal">options</tt> tag</h2></div></div><div></div></div><p>Renders a list of HTML 'option' tags. Sets 'selected' as appropriate based on bound
			value.</p><div class="table"><a name="spring-form.tld.options.table"></a><p class="title"><b>Table&nbsp;E.9.&nbsp;Attributes</b></p><table summary="Attributes" border="1"><colgroup><col align="center"><col align="center"><col align="center"></colgroup><thead><tr><th align="center">Attribute</th><th align="center">Required?</th><th align="center">Runtime Expression?</th><th align="left">Description</th></tr></thead><tbody><tr><td align="center"><p>cssClass</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "class" - HTML Optional Attribute</p></td></tr><tr><td align="center"><p>cssErrorClass</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "class" - HTML Optional Attribute. Used when the bound field has errors.</p></td></tr><tr><td align="center"><p>cssStyle</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "style" - HTML Optional Attribute</p></td></tr><tr><td align="center"><p>dir</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>disabled</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Optional Attribute. Setting the value of this attribute to 'true' (without the quotes) will disable the HTML element.</p></td></tr><tr><td align="center"><p>htmlEscape</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Enable/disable HTML escaping of rendered values.</p></td></tr><tr><td align="center"><p>itemLabel</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Name of the property mapped to the inner text of the 'option' tag</p></td></tr><tr><td align="center"><p>items</p></td><td align="center"><p>true</p></td><td align="center"><p>true</p></td><td align="left"><p>The Collection, Map or array of objects used to generate the inner 'option' tags</p></td></tr><tr><td align="center"><p>itemValue</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Name of the property mapped to 'value' attribute of the 'option' tag</p></td></tr><tr><td align="center"><p>lang</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>onclick</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>ondblclick</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeydown</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeypress</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeyup</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmousedown</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmousemove</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseout</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseover</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseup</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>tabindex</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>title</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="spring-form.tld.password"></a>E.11.&nbsp;The <tt class="literal">password</tt> tag</h2></div></div><div></div></div><p>Renders an HTML 'input' tag with type 'password' using the bound value.</p><div class="table"><a name="spring-form.tld.password.table"></a><p class="title"><b>Table&nbsp;E.10.&nbsp;Attributes</b></p><table summary="Attributes" border="1"><colgroup><col align="center"><col align="center"><col align="center"></colgroup><thead><tr><th align="center">Attribute</th><th align="center">Required?</th><th align="center">Runtime Expression?</th><th align="left">Description</th></tr></thead><tbody><tr><td align="center"><p>accesskey</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>alt</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Optional Attribute</p></td></tr><tr><td align="center"><p>autocomplete</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Common Optional Attribute</p></td></tr><tr><td align="center"><p>cssClass</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "class" - HTML Optional Attribute</p></td></tr><tr><td align="center"><p>cssErrorClass</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "class" - HTML Optional Attribute. Used when the bound field has errors.</p></td></tr><tr><td align="center"><p>cssStyle</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "style" - HTML Optional Attribute</p></td></tr><tr><td align="center"><p>dir</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>disabled</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Optional Attribute. Setting the value of this attribute to 'true' (without the quotes) will disable the HTML element.</p></td></tr><tr><td align="center"><p>htmlEscape</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Enable/disable HTML escaping of rendered values.</p></td></tr><tr><td align="center"><p>id</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>lang</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>maxlength</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Optional Attribute</p></td></tr><tr><td align="center"><p>onblur</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onchange</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onclick</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>ondblclick</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onfocus</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeydown</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeypress</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeyup</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmousedown</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmousemove</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseout</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseover</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseup</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onselect</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>path</p></td><td align="center"><p>true</p></td><td align="center"><p>true</p></td><td align="left"><p>Path to property for data binding</p></td></tr><tr><td align="center"><p>readonly</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Optional Attribute. Setting the value of this attribute to 'true' (without the quotes) will make the HTML element readonly.</p></td></tr><tr><td align="center"><p>showPassword</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Is the password value to be shown? Defaults to false.</p></td></tr><tr><td align="center"><p>size</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Optional Attribute</p></td></tr><tr><td align="center"><p>tabindex</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>title</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="spring-form.tld.radiobutton"></a>E.12.&nbsp;The <tt class="literal">radiobutton</tt> tag</h2></div></div><div></div></div><p>Renders an HTML 'input' tag with type 'radio'.</p><div class="table"><a name="spring-form.tld.radiobutton.table"></a><p class="title"><b>Table&nbsp;E.11.&nbsp;Attributes</b></p><table summary="Attributes" border="1"><colgroup><col align="center"><col align="center"><col align="center"></colgroup><thead><tr><th align="center">Attribute</th><th align="center">Required?</th><th align="center">Runtime Expression?</th><th align="left">Description</th></tr></thead><tbody><tr><td align="center"><p>accesskey</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>cssClass</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "class" - HTML Optional Attribute</p></td></tr><tr><td align="center"><p>cssErrorClass</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "class" - HTML Optional Attribute. Used when the bound field has errors.</p></td></tr><tr><td align="center"><p>cssStyle</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "style" - HTML Optional Attribute</p></td></tr><tr><td align="center"><p>dir</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>disabled</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Optional Attribute. Setting the value of this attribute to 'true' (without the quotes) will disable the HTML element.</p></td></tr><tr><td align="center"><p>htmlEscape</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Enable/disable HTML escaping of rendered values.</p></td></tr><tr><td align="center"><p>id</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>label</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Value to be displayed as part of the tag</p></td></tr><tr><td align="center"><p>lang</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>onblur</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onchange</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onclick</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>ondblclick</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onfocus</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeydown</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeypress</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeyup</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmousedown</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmousemove</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseout</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseover</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseup</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>path</p></td><td align="center"><p>true</p></td><td align="center"><p>true</p></td><td align="left"><p>Path to property for data binding</p></td></tr><tr><td align="center"><p>tabindex</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>title</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>value</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Optional Attribute</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="spring-form.tld.radiobuttons"></a>E.13.&nbsp;The <tt class="literal">radiobuttons</tt> tag</h2></div></div><div></div></div><p>Renders multiple HTML 'input' tags with type 'radio'.</p><div class="table"><a name="spring-form.tld.radiobuttons.table"></a><p class="title"><b>Table&nbsp;E.12.&nbsp;Attributes</b></p><table summary="Attributes" border="1"><colgroup><col align="center"><col align="center"><col align="center"></colgroup><thead><tr><th align="center">Attribute</th><th align="center">Required?</th><th align="center">Runtime Expression?</th><th align="left">Description</th></tr></thead><tbody><tr><td align="center"><p>accesskey</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>cssClass</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "class" - HTML Optional Attribute</p></td></tr><tr><td align="center"><p>cssErrorClass</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "class" - HTML Optional Attribute. Used when the bound field has errors.</p></td></tr><tr><td align="center"><p>cssStyle</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "style" - HTML Optional Attribute</p></td></tr><tr><td align="center"><p>delimiter</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Delimiter to use between each 'input' tag with type 'radio'. There is no delimiter by default.</p></td></tr><tr><td align="center"><p>dir</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>disabled</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Optional Attribute. Setting the value of this attribute to 'true' (without the quotes) will disable the HTML element.</p></td></tr><tr><td align="center"><p>element</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Specifies the HTML element that is used to enclose each 'input' tag with type 'radio'.  Defaults to 'span'.</p></td></tr><tr><td align="center"><p>htmlEscape</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Enable/disable HTML escaping of rendered values.</p></td></tr><tr><td align="center"><p>id</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>itemLabel</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Value to be displayed as part of the 'input' tags with type 'radio'</p></td></tr><tr><td align="center"><p>items</p></td><td align="center"><p>true</p></td><td align="center"><p>true</p></td><td align="left"><p>The Collection, Map or array of objects used to generate the 'input' tags with type 'radio'</p></td></tr><tr><td align="center"><p>itemValue</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Name of the property mapped to 'value' attribute of the 'input' tags with type 'radio'</p></td></tr><tr><td align="center"><p>lang</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>onblur</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onchange</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onclick</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>ondblclick</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onfocus</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeydown</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeypress</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeyup</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmousedown</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmousemove</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseout</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseover</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseup</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>path</p></td><td align="center"><p>true</p></td><td align="center"><p>true</p></td><td align="left"><p>Path to property for data binding</p></td></tr><tr><td align="center"><p>tabindex</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>title</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="spring-form.tld.select"></a>E.14.&nbsp;The <tt class="literal">select</tt> tag</h2></div></div><div></div></div><p>Renders an HTML 'select' element. Supports databinding to the selected option.</p><div class="table"><a name="spring-form.tld.select.table"></a><p class="title"><b>Table&nbsp;E.13.&nbsp;Attributes</b></p><table summary="Attributes" border="1"><colgroup><col align="center"><col align="center"><col align="center"></colgroup><thead><tr><th align="center">Attribute</th><th align="center">Required?</th><th align="center">Runtime Expression?</th><th align="left">Description</th></tr></thead><tbody><tr><td align="center"><p>accesskey</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>cssClass</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "class" - HTML Optional Attribute</p></td></tr><tr><td align="center"><p>cssErrorClass</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "class" - HTML Optional Attribute. Used when the bound field has errors.</p></td></tr><tr><td align="center"><p>cssStyle</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "style" - HTML Optional Attribute</p></td></tr><tr><td align="center"><p>dir</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>disabled</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Optional Attribute. Setting the value of this attribute to 'true' (without the quotes) will disable the HTML element.</p></td></tr><tr><td align="center"><p>htmlEscape</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Enable/disable HTML escaping of rendered values.</p></td></tr><tr><td align="center"><p>id</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>itemLabel</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Name of the property mapped to the inner text of the 'option' tag</p></td></tr><tr><td align="center"><p>items</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>The Collection, Map or array of objects used to generate the inner 'option' tags</p></td></tr><tr><td align="center"><p>itemValue</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Name of the property mapped to 'value' attribute of the 'option' tag</p></td></tr><tr><td align="center"><p>lang</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>multiple</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Optional Attribute</p></td></tr><tr><td align="center"><p>onblur</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onchange</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onclick</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>ondblclick</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onfocus</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeydown</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeypress</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeyup</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmousedown</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmousemove</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseout</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseover</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseup</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>path</p></td><td align="center"><p>true</p></td><td align="center"><p>true</p></td><td align="left"><p>Path to property for data binding</p></td></tr><tr><td align="center"><p>size</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Optional Attribute</p></td></tr><tr><td align="center"><p>tabindex</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>title</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="spring-form.tld.textarea"></a>E.15.&nbsp;The <tt class="literal">textarea</tt> tag</h2></div></div><div></div></div><p>Renders an HTML 'textarea'.</p><div class="table"><a name="spring-form.tld.textarea.table"></a><p class="title"><b>Table&nbsp;E.14.&nbsp;Attributes</b></p><table summary="Attributes" border="1"><colgroup><col align="center"><col align="center"><col align="center"></colgroup><thead><tr><th align="center">Attribute</th><th align="center">Required?</th><th align="center">Runtime Expression?</th><th align="left">Description</th></tr></thead><tbody><tr><td align="center"><p>accesskey</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>cols</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Required Attribute</p></td></tr><tr><td align="center"><p>cssClass</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "class" - HTML Optional Attribute</p></td></tr><tr><td align="center"><p>cssErrorClass</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "class" - HTML Optional Attribute. Used when the bound field has errors.</p></td></tr><tr><td align="center"><p>cssStyle</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Equivalent to "style" - HTML Optional Attribute</p></td></tr><tr><td align="center"><p>dir</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>disabled</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Optional Attribute. Setting the value of this attribute to 'true' (without the quotes) will disable the HTML element.</p></td></tr><tr><td align="center"><p>htmlEscape</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>Enable/disable HTML escaping of rendered values.</p></td></tr><tr><td align="center"><p>id</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>lang</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>onblur</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onchange</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onclick</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>ondblclick</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onfocus</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeydown</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeypress</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onkeyup</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmousedown</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmousemove</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseout</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseover</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onmouseup</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>onselect</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Event Attribute</p></td></tr><tr><td align="center"><p>path</p></td><td align="center"><p>true</p></td><td align="center"><p>true</p></td><td align="left"><p>Path to property for data binding</p></td></tr><tr><td align="center"><p>readonly</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Optional Attribute. Setting the value of this attribute to 'true' (without the quotes) will make the HTML element readonly.</p></td></tr><tr><td align="center"><p>rows</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Required Attribute</p></td></tr><tr><td align="center"><p>tabindex</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr><tr><td align="center"><p>title</p></td><td align="center"><p>false</p></td><td align="center"><p>true</p></td><td align="left"><p>HTML Standard Attribute</p></td></tr></tbody></table></div></div></div><div class="appendix" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="translator"></a>Appendix&nbsp;F.&nbsp;Spring 2.5&#24320;&#21457;&#25163;&#20876;&#20013;&#25991;&#21270;&#39033;&#30446;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="d0e44906"></a>F.1.&nbsp;&#22768;&#26126;</h2></div></div><div></div></div><p>Spring&#20013;&#25991;&#21442;&#32771;&#25163;&#20876;&#24471;&#21040;Spring Framework&#24320;&#21457;&#22242;&#38431;&#30340;&#30452;&#25509;&#25480;&#26435;&#21644;&#22823;&#21147;&#30340;&#25903;&#25345;&#65292;&#20854;&#30446;&#30340;&#26159;&#22312;&#20013;&#25991;&#19990;&#30028;&#25512;&#24191;&#20248;&#31168;&#30340;&#24320;&#28304;&#25216;&#26415;&#12290;&#26412;&#27425;&#32763;&#35793;&#27963;&#21160;&#30001;&#28385;&#27743;&#32418;&#24320;&#25918;&#25216;&#26415;&#30740;&#31350;&#32452;&#32455;(<a href="http://www.redsaga.com/" target="_top">http://www.redsaga.com</a>)&#21644;Spring&#20013;&#25991;&#35770;&#22363;(<a href="http://spring.jactiongroup.net/" target="_top">http://spring.jactiongroup.net</a>)
&#20849;&#21516;&#21457;&#36215;&#12289;&#32452;&#32455;&#12290;&#25105;&#20204;&#22312;&#27492;&#37073;&#37325;&#23459;&#24067;&#65292;&#26412;&#27425;&#32763;&#35793;&#36981;&#24490;&#21407;Spring Framework&#30340;&#25480;&#26435;&#21327;&#35758;&#65292;&#21363;Apache
2.0&#21327;&#35758;&#12290;&#22312;&#23436;&#25972;&#20445;&#30041;&#20840;&#37096;&#25991;&#26412;(&#21253;&#25324;&#26412;&#29256;&#26435;&#39029;)&#65292;&#24182;&#19988;&#19981;&#36829;&#21453;Apache
2.0&#21327;&#35758;&#30340;&#21069;&#25552;&#19979;&#65292;&#20801;&#35768;&#21644;&#40723;&#21169;&#20219;&#20309;&#20154;&#36827;&#34892;&#20840;&#25991;&#36716;&#36733;&#21450;&#25512;&#24191;&#65292;&#25152;&#26377;&#21442;&#19982;&#20154;&#21592;&#25918;&#24323;&#38500;&#32626;&#21517;&#26435;&#22806;&#30340;&#19968;&#20999;&#26435;&#21033;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="d0e44917"></a>F.2.&nbsp;&#33268;&#35874;</h2></div></div><div></div></div><p>&#22914;
&#27492;&#24222;&#22823;&#30340;&#39033;&#30446;&#19981;&#26159;&#19968;&#20004;&#20010;&#32452;&#32455;&#21487;&#20197;&#29420;&#31435;&#23436;&#25104;&#30340;&#65292;&#23601;&#20687;Spring&#26412;&#36523;&#19968;&#26679;&#65292;&#28085;&#30422;&#20102;Java&#25216;&#26415;&#30340;&#26041;&#26041;&#38754;&#38754;&#12290;&#22240;&#20026;&#26377;&#20102;&#22823;&#23478;&#30340;&#20851;&#24515;&#21644;&#25903;&#25345;&#25165;&#20351;&#27492;&#27425;&#39033;&#30446;&#33021;&#22815;&#39034;&#21033;&#23436;
&#25104;&#12290;&#26377;&#29702;&#30001;&#30456;&#20449;&#65292;&#20013;&#25991;&#24320;&#28304;&#19990;&#30028;&#24517;&#23558;&#22312;&#19981;&#20037;&#30340;&#23558;&#26469;&#23637;&#29616;&#20986;&#26356;&#24191;&#38420;&#30340;&#21457;&#23637;&#31354;&#38388;&#65292;&#24076;&#26395;&#22823;&#23478;&#37117;&#33021;&#20026;&#25512;&#21160;&#20013;&#22269;&#36719;&#20214;&#21457;&#23637;&#22857;&#29486;&#20986;&#33258;&#24049;&#30340;&#19968;&#20221;&#21147;&#37327;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="d0e44922"></a>F.3.&nbsp;&#21442;&#19982;&#20154;&#21592;</h2></div></div><div></div></div><p>&#19979;&#34920;&#21015;&#20986;&#30340;&#26159;&#25152;&#26377;&#21442;&#21152;&#26412;&#27425;&#32763;&#35793;&#39033;&#30446;&#30340;&#20154;&#21592;&#21517;&#21333;&#65292;&#25353;&#29031;&#25253;&#21517;&#26102;&#38388;&#20808;&#21518;&#39034;&#24207;&#25490;&#21015;&#12290;&#20854;&#20013;DigitalSonic&#20026;&#39033;&#30446;&#36127;&#36131;&#20154;&#12290;Denis&#22240;&#36523;&#20307;&#21407;&#22240;&#20013;&#36884;&#36864;&#20986;&#65292;&#21516;&#26679;&#23545;&#20182;&#34920;&#31034;&#24863;&#35874;&#12290;</p><div class="table"><a name="d0e44927"></a><p class="title"><b>Table&nbsp;F.1.&nbsp;&#21442;&#19982;&#20154;&#21592;&#21015;&#34920;</b></p><table summary="&#21442;&#19982;&#20154;&#21592;&#21015;&#34920;" width="100%" border="1"><colgroup><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"></colgroup><thead><tr><th align="center">&#32593;&#21517;</th><th align="center">&#22995;&#21517;</th><th align="center">&nbsp;</th><th align="center">&#32593;&#21517;</th><th align="center">&#22995;&#21517;</th></tr></thead><tbody><tr><td align="center">Yanger</td><td align="center">&#26472;&#25096;</td><td align="center">&nbsp;</td><td align="center">Caoxg</td><td align="center">&#26361;&#26195;&#38050;</td></tr><tr><td align="center">DigitalSonic</td><td align="center">&#19969;&#38634;&#20016;</td><td align="center">&nbsp;</td><td align="center">Marco Chen</td><td align="center">&#38472;&#37030;&#23439;</td></tr><tr><td align="center">downpour</td><td align="center">&#38470;&#33311;</td><td align="center">&nbsp;</td><td align="center">joyheros</td><td align="center">&#37011;&#36229;</td></tr><tr><td align="center">jzk</td><td align="center">&#33931;&#33275;&#24698;</td><td align="center">&nbsp;</td><td align="center">whimet</td><td align="center">&#26446;&#24422;&#36745;</td></tr><tr><td align="center">melthaw</td><td align="center">&#24352;&#36784;&#38634;</td><td align="center">&nbsp;</td><td align="center">crazycy</td><td align="center">&#23828;&#27589;</td></tr><tr><td align="center">pesome</td><td align="center">&#24352;&#20426;</td><td align="center">&nbsp;</td><td align="center">zhanglong</td><td align="center">&#24352;&#40857;</td></tr><tr><td align="center">ginge</td><td align="center">&#26893;&#26230;&#26230;</td><td align="center">&nbsp;</td><td align="center">Kxllen</td><td align="center">&#24464;&#22372;</td></tr><tr><td align="center">Jin</td><td align="center">&#37329;&#26143;&#26143;</td><td align="center">&nbsp;</td><td align="center">Java&#31528;&#29399;</td><td align="center">&#38518;&#27426;&#33150;</td></tr><tr><td align="center">Joo</td><td align="center">&#26647;&#30922;</td><td align="center">&nbsp;</td><td align="center">YuLimin</td><td align="center">&#20446;&#40654;&#25935;</td></tr><tr><td align="center">Echo</td><td align="center">&#26472;&#26149;&#33457;</td><td align="center">&nbsp;</td><td align="center">yeshucheng</td><td align="center">&#19975;&#22269;&#36745;</td></tr><tr><td align="center">&#21326;&#20180;</td><td align="center">&#24352;&#38745;&#21326;</td><td align="center">&nbsp;</td><td align="center">Denis</td><td align="center">&#29579;&#23493;&#38050;</td></tr><tr><td align="center">hanson2010</td><td align="center">&#32993;&#28023;&#29983;</td><td align="center">&nbsp;</td><td align="center">88250</td><td align="center">&#19969;&#20142;</td></tr><tr><td align="center">max</td><td align="center">&#23385;&#28009;</td><td align="center">&nbsp;</td><td align="center">&nbsp;</td><td align="center">&nbsp;</td></tr></tbody></table></div><p>
		&#20855;&#20307;&#20219;&#21153;&#20998;&#37197;&#24773;&#20917;&#35814;&#35265;<a href="http://wiki.redsaga.com/confluence/pages/viewpage.action?pageId=2644" target="_top">&#24037;&#20316;&#23433;&#25490;&#21450;&#36827;&#24230;&#27010;&#20917;(Spring 2.5)</a>&#12290;
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="d0e45081"></a>F.4.&nbsp;&#39033;&#30446;&#21382;&#31243;</h2></div></div><div></div></div><p><span class="bold"><b>2008&#24180;03&#26376;05&#26085;</b></span></p><p>3&#26376;1&#26085;&#65292;&#25105;&#20204;&#36825;&#27425;2.5&#30340;&#32763;&#35793;&#39033;&#30446;&#27491;&#24335;&#21551;&#21160;&#65292;&#22240;&#20026;&#21021;&#27493;&#23450;&#20026;&#20026;&#20869;&#37096;&#39033;&#30446;&#65292;&#25152;&#20197;&#27809;&#26377;&#22312;&#21508;&#22823;&#35770;&#22363;&#19978;&#22823;&#21147;&#23459;&#20256;&#65292;&#21482;&#26159;&#22312;&#37038;&#20214;&#21015;&#34920;&#20013;&#21457;&#20102;&#23553;&#37038;&#20214;&#12290;&#39033;&#30446;&#36827;&#24230;&#27719;&#24635;&#30340;&#26085;&#26399;&#23450;&#22312;&#20102;&#27599;&#21608;&#30340;&#21608;&#19977;&#21644;&#21608;&#20845;&#65292;&#20170;&#22825;&#27491;&#22909;&#26159;&#31532;&#19968;&#27425;&#27719;&#24635;&#65292;&#24688;&#24039;&#36214;&#19978;&#20102;&#23398;&#38647;&#38155;&#26085;&#65292;&#25105;&#24819;&#25105;&#20204;&#30340;&#39033;&#30446;&#20063;&#24212;&#35813;&#31639;&#26159;&#23398;&#38647;&#38155;&#20102;&#21543;&#65292;&#21621;&#21621;&#12290;</p><p>&#25130;&#33267;&#20170;&#22825;&#20026;&#27490;&#19968;&#20849;&#26377;9&#20154;&#21442;&#21152;&#65292;&#21478;&#22806;&#20170;&#22825;&#19979;&#21320;&#36824;&#25910;&#21040;&#20102;&#20004;&#23553;&#26469;&#33258;&#32452;&#22806;&#30340;&#25253;&#21517;&#37038;&#20214;&#65292;&#25105;&#24050;&#22238;&#22797;&#12290;&#24635;&#20849;45&#20010;&#20219;&#21153;&#26465;&#65292;&#24050;&#34987;&#39046;&#21462;21&#20010;&#65292;&#36824;&#26410;&#26377;&#20154;&#22635;&#20889;&#36827;&#24230;&#24773;&#20917;&#65292;&#20272;&#35745;&#22823;&#23478;&#36824;&#26410;&#24320;&#22987;&#24037;&#20316;&#21543;&#12290;</p><p>&#24076;&#26395;&#26377;&#26356;&#22810;&#30340;&#21516;&#23398;&#33021;&#22815;&#21442;&#21152;&#21040;&#36825;&#27425;&#30340;&#39033;&#30446;&#20013;&#65292;&#31215;&#26497;&#25253;&#21517;&#65292;&#20105;&#21462;&#33021;&#26089;&#26085;&#39640;&#36136;&#37327;&#22320;&#23436;&#25104;&#25152;&#26377;&#30340;&#24037;&#20316;&#65292;&#35753;&#26356;&#22810;&#20154;&#33021;&#20139;&#21463;&#21040;&#25105;&#20204;&#30340;&#21171;&#21160;&#25104;&#26524;&#65374;</p><p><span class="bold"><b>2008&#24180;03&#26376;08&#26085;</b></span></p><p>&#19979;&#21322;&#21608;&#36215;&#25105;&#20204;&#24320;&#22987;&#25509;&#21463;&#25253;&#21517;&#65292;&#35753;&#25105;&#22987;&#26009;&#26410;&#21450;&#30340;&#26159;&#25253;&#21517;&#30340;&#37038;&#20214;&#23601;&#20687;&#38634;&#33457;&#19968;&#26679;&#39128;&#26469;&#65292;&#20063;&#35768;&#26159;Spring&#30340;&#22823;&#37327;&#24212;&#29992;&#20351;&#20154;&#20204;&#24320;&#22987;&#20851;&#27880;Spring&#65292;&#26356;&#37325;&#35201;&#30340;&#26159;&#26377;&#36234;&#26469;&#36234;&#22810;&#30340;&#20154;&#24076;&#26395;&#33021;&#20026;&#24320;&#28304;&#31038;&#21306;&#20570;&#20986;&#19968;&#20123;&#36129;&#29486;&#65292;&#36825;&#26159;&#20214;&#20540;&#24471;&#39640;&#20852;&#30340;&#20107;&#24773;&#12290;</p><p>&#20808;&#27426;&#36814;&#19968;&#19979;&#20004;&#20301;&#26032;&#36827;&#25104;&#21592;zhanglong&#21644;ginge&#65292;&#30446;&#21069;&#24050;&#26377;24&#20010;&#20219;&#21153;&#26465;&#24050;&#34987;&#35748;&#39046;&#65292;&#36825;&#21608;&#30340;&#20027;&#35201;&#24037;&#20316;&#26159;&#25509;&#21463;&#22823;&#23478;&#30340;&#25253;&#21517;&#65292;&#35748;&#39046;&#20219;&#21153;&#65292;&#20174;&#19979;&#21608;&#36215;&#24076;&#26395;&#22823;&#23478;&#33021;&#24320;&#22987;&#27491;&#24335;&#22320;&#32763;&#35793;&#65292;&#24182;&#21450;&#26102;&#22312;&#21608;&#19977;&#26202;&#22635;&#20889;&#33258;&#24049;&#30340;&#36827;&#24230;&#12290;</p><p>&#22312;
&#24320;&#22987;&#21069;&#35831;&#35775;&#38382;http://wiki.redsaga.com/confluence/pages
/viewpage.action?pageId=2679&#65292;&#25105;&#20889;&#20102;&#19968;&#20123;&#27880;&#24847;&#20107;&#39033;&#12290;&#36825;&#27425;&#26159;&#38024;&#23545;&#21407;2.0&#29256;&#26412;&#25991;&#26723;&#30340;&#20462;&#35746;&#65292;&#25152;&#20197;&#24076;&#26395;&#22823;&#23478;&#33021;&#23613;&#21487;&#33021;&#22320;&#21033;&#29992;&#29616;&#26377;&#30340;
&#36164;&#28304;&#65292;&#38500;&#20102;&#25913;&#21160;&#36739;&#22823;&#30340;&#37096;&#20998;&#21644;&#26032;&#22686;&#20869;&#23481;&#22806;&#65292;&#23613;&#37327;&#19981;&#35201;&#20174;&#38646;&#24320;&#22987;&#32763;&#35793;&#12290;</p><p><span class="bold"><b>2008&#24180;03&#26376;12&#26085;</b></span></p><p>&#36825;&#21608;&#21152;&#20837;&#20102;&#19981;&#23569;&#26032;&#25104;&#21592;&#65292;&#39318;&#20808;&#35753;&#25105;&#20204;&#29992;&#25484;&#22768;&#27426;&#36814;Kxllen&#12289;Jin&#12289;Java&#31528;&#29399;&#21644;Joo&#65292;&#36824;&#26377;&#19968;&#20123;&#25253;&#21517;&#32773;&#23578;&#26410;&#22238;&#22797;&#35797;&#35793;&#20869;&#23481;&#65292;&#30456;&#20449;&#25105;&#20204;&#30340;&#38431;&#20237;&#36824;&#20250;&#19981;&#26029;&#22766;&#22823;&#30340;&#12290;</p><p>&#25130;&#33267;&#30446;&#21069;&#20026;&#27490;&#65292;45&#20010;&#20219;&#21153;&#26465;&#20013;&#30340;38&#20010;&#24050;&#34987;&#35748;&#39046;&#65292;&#24076;&#26395;&#21516;&#23398;&#20204;&#21450;&#26102;&#26356;&#26032;&#36827;&#24230;&#65292;&#24076;&#26395;&#21608;&#20845;&#30340;&#20219;&#21153;&#36827;&#24230;&#27719;&#24635;&#21069;&#21508;&#20301;&#33021;&#21578;&#30693;&#21508;&#33258;&#30340;&#36827;&#24230;&#12290;</p><p>&#21478;&#22806;&#65292;&#20877;&#27425;&#37325;&#30003;&#65292;&#35831;&#22823;&#23478;&#20180;&#32454;&#38405;&#35835;&#20219;&#21153;&#20998;&#37197;&#34920;&#26684;&#19979;&#30340;&#35828;&#26126;&#20197;&#21450;&#26412;&#27425;&#39033;&#30446;&#30340;&#27880;&#24847;&#20107;&#39033;&#65292;&#26368;&#36817;&#25105;&#38500;&#20102;&#22788;&#29702;&#25253;&#21517;&#30456;&#20851;&#20107;&#23452;&#23601;&#26159;&#22312;&#32500;&#25252;&#20219;&#21153;&#20998;&#37197;&#30340;&#34920;&#26684;&#12290;</p><p><span class="bold"><b>2008&#24180;03&#26376;15&#26085;</b></span></p><p>&#25353;&#29031;&#24815;&#20363;&#65292;&#35753;&#22823;&#23478;&#20808;&#26469;&#27426;&#36814;&#19968;&#19979;&#26032;&#25104;&#21592;&#65292;YuLimin&#12289;Echo&#12289;yeshucheng&#21644;&#21326;&#20180;&#65292;&#21496;&#20196;&#30340;&#21152;&#30431;&#35753;&#25105;&#20204;&#30340;&#25112;&#26007;&#21147;&#22823;&#22823;&#21152;&#24378;&#12290;</p><p>&#25130;&#27490;&#33267;&#20170;&#26085;&#65292;&#24050;&#26377;40&#20010;&#20219;&#21153;&#26465;&#34987;&#35748;&#39046;&#65292;crazycy&#30340;&#31532;18&#31456;&#36716;&#30001;yeshucheng&#36127;&#36131;&#12290;&#20004;&#21608;&#36807;&#21435;&#20102;&#65292;&#22823;&#23478;&#20284;&#20046;&#36824;&#26410;&#36827;&#20837;&#29366;&#24577;&#65292;&#36825;&#27425;&#26377;&#28857;&#24930;&#28909;&#21734;&#65374;</p><p><span class="bold"><b>2008&#24180;03&#26376;19&#26085;</b></span></p><p>&#26412;&#21608;&#22823;&#37096;&#20998;&#35748;&#39046;&#30340;&#31456;&#33410;&#37117;&#24320;&#22987;&#20102;&#32763;&#35793;&#24037;&#20316;&#65292;&#20174;&#36827;&#24230;&#34920;&#19978;&#21487;&#20197;&#30475;&#21040;&#22823;&#23478;&#30340;&#24037;&#20316;&#36824;&#26159;&#39047;&#26377;&#25104;&#25928;&#30340;&#65292;&#24050;&#26377;5&#20010;&#20219;&#21153;&#26465;&#23436;&#25104;&#65292;11&#20010;&#22788;&#20110;&#36827;&#34892;&#20013;&#65292;&#21478;&#22806;&#37096;&#20998;&#20219;&#21153;&#26465;&#24050;&#32463;&#35810;&#38382;&#36807;&#36827;&#24230;&#65292;&#22522;&#26412;&#37117;&#22312;&#36827;&#34892;&#20013;&#12290;</p><p>&#24076;&#26395;&#22823;&#23478;&#33021;&#22815;&#21450;&#26102;&#26356;&#26032;&#36827;&#24230;&#65292;&#26356;&#26032;&#26102;&#35831;&#27880;&#24847;&#26684;&#24335;&#65292;&#26041;&#20415;&#27719;&#24635;&#65307;&#21478;&#22806;&#65292;&#23545;&#20110;&#32763;&#35793;&#23436;&#27605;&#30340;xml&#25991;&#20214;&#35831;&#22312;&#26412;&#22320;&#25191;&#34892;&#26500;&#24314;&#36890;&#36807;&#21518;&#25552;&#20132;&#33267;cvs&#12290;</p><p><span class="bold"><b>2008&#24180;03&#26376;22&#26085;</b></span></p><p>&#36825;&#20960;&#22825;&#21152;&#20837;&#20102;&#19968;&#21517;&#26032;&#25104;&#21592;Denis&#65292;&#22823;&#23478;&#40723;&#25484;&#27426;&#36814;&#19968;&#19979;&#65374;&#20004;&#20250;&#32467;&#26463;&#20102;&#65292;&#20063;&#35768;&#22823;&#23478;&#37117;&#21435;&#23398;&#20064;&#22823;&#20250;&#31934;&#31070;&#20102;&#65292;&#25152;&#20197;&#24536;&#35760;&#20102;&#25552;&#20132;&#21508;&#33258;&#30340;&#36827;&#24230;&#65292;&#21621;&#21621;&#12290;&#25130;&#33267;&#20170;&#26202;11&#28857;&#65292;8&#20010;&#20219;&#21153;&#26465;&#24050;&#32463;&#23436;&#25104;&#65292;&#36824;&#26377;4&#20010;&#20219;&#21153;&#26465;&#26410;&#34987;&#35748;&#39046;&#65292;&#24773;&#20917;&#36824;&#31639;&#19981;&#38169;&#65292;&#24076;&#26395;&#33021;&#22312;&#19979;&#21608;&#23436;&#25104;&#22823;&#22810;&#25968;&#30340;&#32763;&#35793;&#20219;&#21153;&#65374;</p><p><span class="bold"><b>2008&#24180;03&#26376;26&#26085;</b></span></p><p>&#30446;
&#21069;&#20026;&#27490;45&#20010;&#20219;&#21153;&#26465;&#24050;&#23436;&#25104;15&#20010;&#65292;11&#20010;&#22788;&#20110;&#36827;&#34892;&#20013;&#65292;&#30475;&#26679;&#23376;&#32763;&#35793;&#30340;&#21608;&#26399;&#21487;&#33021;&#20250;&#26377;&#25152;&#24310;&#38271;&#65292;&#24076;&#26395;&#20960;&#20301;&#22810;&#26085;&#26410;&#28014;&#20986;&#27700;&#38754;&#30340;&#21516;&#23398;&#33021;&#22312;&#28508;&#27700;&#30340;&#38388;&#38553;&#38706;&#20010;&#33080;&#65292;&#20197;&#20415;&#25105;&#33021;&#20102;&#35299;
&#32763;&#35793;&#30340;&#24773;&#20917;&#12290;&#27492;&#22806;&#65292;&#20877;&#27425;&#24378;&#35843;&#19968;&#19979;&#65292;&#24076;&#26395;&#22823;&#23478;&#37117;&#33021;&#23558;&#32763;&#35793;&#30340;&#36136;&#37327;&#25918;&#22312;&#31532;&#19968;&#20301;&#65292;&#22312;&#20445;&#35777;&#36136;&#37327;&#30340;&#21069;&#25552;&#19979;&#26089;&#26085;&#23436;&#25104;&#20219;&#21153;&#65292;&#23558;&#27599;&#19968;&#20221;&#20316;&#21697;&#37117;&#25171;&#36896;&#25104;&#32463;&#20856;&#65374;</p><p><span class="bold"><b>2008&#24180;03&#26376;29&#26085;</b></span></p><p>&#36825;&#21608;&#21448;&#26377;3&#21517;&#26032;&#25104;&#21592;&#21152;&#20837;&#65292;&#20998;&#21035;&#26159;hanson2010&#12289;88250&#21644;max&#65292;&#25105;&#20204;&#30340;&#38431;&#20237;&#21448;&#22766;&#22823;&#20102;&#65292;&#30446;&#21069;&#20849;&#26377;25&#21517;&#25104;&#21592;&#65374;&#25152;&#26377;&#30340;&#32763;&#35793;&#20219;&#21153;&#24050;&#20840;&#37096;&#39046;&#21462;&#65292;&#22914;&#26080;&#24847;&#22806;&#65292;&#24076;&#26395;&#19979;&#21608;&#33021;&#23436;&#25104;&#22823;&#22810;&#25968;&#31456;&#33410;&#30340;&#32763;&#35793;&#65292;&#36827;&#20837;&#19968;&#23457;&#38454;&#27573;&#12290;</p><p><span class="bold"><b>2008&#24180;04&#26376;02&#26085;</b></span></p><p>&#26152;
&#22825;&#26159;&#24858;&#20154;&#33410;&#65292;Rod
Johnson&#21644;&#25105;&#20204;&#22823;&#23478;&#24320;&#20102;&#20010;&#29609;&#31505;----SpringSource&#23459;&#24067;&#34987;&#24494;&#36719;&#25910;&#36141;&#65292;InfoQ&#19978;&#36824;&#24456;&#20687;&#22238;&#20107;&#30340;&#25253;&#36947;&#20102;&#65292;&#25226;&#24456;&#22810;&#20154;&#37117;&#39575;&#20102;&#19968;&#25226;&#8230;&#8230;&#36825;&#21608;&#23545;&#19968;
&#20123;&#20219;&#21153;&#30340;&#36827;&#23637;&#20570;&#20102;&#19979;&#20102;&#35299;&#65292;&#25152;&#26377;&#31456;&#33410;&#22343;&#24050;&#22312;&#32763;&#35793;&#20013;&#65292;&#20854;&#20013;21&#20010;&#24050;&#23436;&#25104;&#65292;12&#20010;&#32763;&#35793;&#36807;&#21322;&#65292;&#20854;&#20182;&#24212;&#35813;&#37117;&#33021;&#22312;&#26412;&#21608;&#26411;&#23436;&#25104;&#65292;&#19979;&#21608;&#23558;&#27491;&#24335;&#21551;&#21160;&#19968;&#23457;&#30340;&#24037;&#20316;&#65292;&#24076;&#26395;&#22823;&#23478;&#20173;&#33021;
&#32487;&#32493;&#20197;&#26497;&#39640;&#30340;&#28909;&#24773;&#25237;&#36523;&#20854;&#20013;&#65374;</p><p><span class="bold"><b>2008&#24180;04&#26376;05&#26085;</b></span></p><p>&#19979;
&#21608;&#24320;&#22987;&#25105;&#20204;&#30340;&#24037;&#20316;&#23558;&#36827;&#20837;&#19968;&#23457;&#30340;&#27969;&#31243;&#65292;&#22240;&#20026;&#36825;&#27425;&#30340;&#32763;&#35793;&#20027;&#35201;&#26159;&#23545;2.0&#30340;&#20462;&#35746;&#65292;&#25152;&#20197;&#19968;&#23457;&#30340;&#24037;&#20316;&#20027;&#35201;&#26159;&#23545;&#26377;&#21464;&#26356;&#30340;&#22320;&#26041;&#36827;&#34892;&#26657;&#23545;&#65292;&#20108;&#23457;&#20027;&#35201;&#36890;&#35835;&#35793;&#25991;&#65292;&#24182;&#21435;&#38500;XML
&#20013;&#30340;&#21407;&#25991;&#20449;&#24687;&#12290;&#36824;&#26377;&#19968;&#20123;&#31456;&#33410;&#30340;&#32763;&#35793;&#24037;&#20316;&#27809;&#26377;&#32467;&#26463;&#65292;&#30446;&#21069;&#24050;&#26377;26&#20010;&#20219;&#21153;&#23436;&#25104;&#65292;12&#20010;&#20219;&#21153;&#23436;&#25104;&#36807;&#21322;&#65292;&#35831;&#25152;&#26377;&#39046;&#21462;&#20102;&#32763;&#35793;&#20219;&#21153;&#30340;&#21516;&#23398;&#33021;&#22312;&#19979;&#21608;&#23436;&#25104;&#25163;&#22836;&#30340;&#24037;&#20316;&#12290;</p><p><span class="bold"><b>2008&#24180;04&#26376;12&#26085;</b></span></p><p>&#36825;&#21608;Wiki&#22312;&#21608;&#19977;&#20986;&#29616;&#20102;&#28857;&#38382;&#39064;&#23548;&#33268;&#19968;&#27573;&#26102;&#38388;&#26080;&#27861;&#35775;&#38382;&#65292;&#32473;&#22823;&#23478;&#24102;&#26469;&#20102;&#20123;&#19981;&#20415;&#65292;&#22909;&#22312;&#29616;&#22312;&#19968;&#20999;&#37117;&#24674;&#22797;&#27491;&#24120;&#21862;&#65374;&#36825;&#21608;&#21333;&#29420;&#32852;&#31995;&#20102;&#19968;&#20123;&#25163;&#22836;&#36824;&#26377;&#32763;&#35793;&#20219;&#21153;&#30340;&#21516;&#23398;&#65292;&#20840;&#37096;&#34920;&#31034;&#33021;&#22312;&#36825;&#21608;&#23436;&#25104;&#65292;&#24076;&#26395;&#33021;&#22815;&#19968;&#20999;&#39034;&#21033;&#12290;</p><p>&#25105;&#20204;&#30340;&#19968;&#23457;&#24050;&#32463;&#24320;&#22987;&#20102;&#65292;&#24076;&#26395;&#22823;&#23478;&#33021;&#22815;&#20808;&#39046;&#21462;&#24050;&#23436;&#25104;&#32763;&#35793;&#30340;&#37096;&#20998;&#36827;&#34892;&#19968;&#23457;&#65292;&#20105;&#21462;&#26089;&#26085;&#23436;&#25104;&#25152;&#26377;&#30340;&#20219;&#21153;&#12290;</p><p><span class="bold"><b>2008&#24180;04&#26376;19&#26085;</b></span></p><p>&#19968;&#23457;&#30340;&#20219;&#21153;&#24050;&#32463;&#24320;&#22987;&#38470;&#32493;&#34987;&#39046;&#21462;&#20102;&#65292;&#32780;&#32763;&#35793;&#30340;&#20219;&#21153;&#20063;&#22522;&#26412;&#20840;&#37096;&#23436;&#25104;&#20102;&#65292;&#35874;&#35874;&#22823;&#23478;&#36825;&#27573;&#26102;&#38388;&#30340;&#21162;&#21147;&#65292;&#24076;&#26395;&#33021;&#26089;&#26085;&#23436;&#25104;&#25152;&#26377;&#30340;&#26657;&#23545;&#24037;&#20316;~</p><p>Denis&#21516;&#23398;&#21069;&#38453;&#23376;&#29983;&#30149;&#36824;&#19981;&#24536;&#25163;&#22836;&#30340;&#20219;&#21153;&#65292;&#22823;&#23478;&#31069;&#20182;&#26089;&#26085;&#24247;&#22797;&#12290;</p><p><span class="bold"><b>2008&#24180;04&#26376;26&#26085;</b></span></p><p>&#36825;
&#21608;&#65292;&#38500;&#20102;Denis&#30340;&#23567;&#20219;&#21153;&#22806;&#65292;&#20854;&#20182;&#30340;&#32763;&#35793;&#22343;&#20197;&#23436;&#25104;&#65292;&#26657;&#23545;&#20219;&#21153;&#30340;&#39046;&#21462;&#24037;&#20316;&#20063;&#22312;&#39034;&#21033;&#36827;&#34892;&#12290;&#21478;&#22806;&#65292;&#21644;&#19968;&#20123;&#21516;&#23398;&#35752;&#35770;&#20102;&#19968;&#19979;&#65292;&#37492;&#20110;&#36825;&#27425;&#30340;&#24037;&#20316;&#22823;&#37096;&#20998;&#22522;&#20110;&#21407;&#20808;2.0
&#30340;&#32763;&#35793;&#20043;&#19978;&#65292;&#20915;&#23450;&#21512;&#24182;&#19968;&#23457;&#21644;&#20108;&#23457;&#65292;&#21363;&#21482;&#36827;&#34892;&#19968;&#27425;&#26657;&#23545;&#65292;&#25152;&#20197;&#35831;&#26657;&#23545;&#30340;&#21516;&#23398;&#22312;&#26657;&#23545;&#23436;&#25104;&#21518;&#65292;&#21435;&#38500;&#21407;&#25991;&#65292;&#22312;&#26816;&#26597;&#32763;&#35793;&#27491;&#30830;&#24615;&#30340;&#21516;&#26102;&#30041;&#24515;&#19968;&#19979;&#35821;&#21477;&#30340;&#36890;&#39034;&#24615;&#65292;&#26412;&#22320;&#32534;&#35793;&#36890;
&#36807;&#21518;&#25552;&#20132;CVS&#12290;</p><p><span class="bold"><b>2008&#24180;05&#26376;03&#26085;</b></span></p><p>&#20116;&#19968;&#30340;&#23567;&#38271;&#20551;&#36807;&#24471;&#36824;&#30495;&#26159;&#24555;&#21568;&#65292;&#19968;&#30504;&#30524;&#21151;&#22827;&#23601;&#32467;&#26463;&#20102;&#65292;&#26126;&#22825;&#22823;&#23478;&#21448;&#24471;&#19978;&#29677;&#20102;&#12290;&#12290;&#12290;&#21407;&#35745;&#21010;&#20013;&#25105;&#20204;&#30340;&#39033;&#30446;&#24212;&#35813;&#26159;&#22312;4&#26376;&#24213;&#32467;&#26463;&#65292;5&#26376;&#21021;&#21457;&#24067;&#30340;&#65292;&#20294;&#29616;&#22312;&#30475;&#26469;&#20284;&#20046;&#24471;&#35201;&#24310;&#26399;&#20102;&#65292;&#25130;&#33267;&#30446;&#21069;&#20026;&#27490;&#65292;&#20849;16&#20010;&#20219;&#21153;&#24050;&#32463;&#23436;&#25104;&#65292;15&#20010;&#20219;&#21153;&#27491;&#22312;&#26657;&#23545;&#20013;&#65292;&#21097;&#19979;15&#20010;&#23578;&#26410;&#39046;&#21462;&#65292;&#22823;&#23478;&#37117;&#35201;&#21152;&#27833;&#21679;&#65281;</p><p>&#21478;&#22806;&#65292;&#21457;&#29616;&#19968;&#20123;&#21516;&#23398;&#22312;&#23436;&#25104;&#20102;&#32763;&#35793;&#21518;&#27809;&#26377;&#21450;&#26102;&#23558;&#25991;&#20214;&#25552;&#20132;&#33267;CVS&#20013;&#65292;&#30446;&#21069;&#26377;&#20960;&#20010;&#31456;&#33410;&#20173;&#28982;&#26159;&#21407;&#25991;&#65292;&#35831;&#22823;&#23478;&#33021;&#22815;&#27880;&#24847;&#21450;&#26102;&#25552;&#20132;&#12290;</p><p><span class="bold"><b>2008&#24180;05&#26376;10&#26085;</b></span></p><p>&#25105;&#20204;&#26368;&#21518;&#21152;&#20837;2.5&#32763;&#35793;&#22242;&#38431;&#30340;max&#21516;&#23398;&#19968;&#20154;&#23436;&#25104;&#20102;12&#20010;&#20219;&#21153;&#26465;&#30340;&#26657;&#23545;&#65292;&#22823;&#23478;&#25484;&#22768;&#21709;&#36215;&#26469;&#65281;</p><p>&#30446;&#21069;&#26657;&#23545;&#24037;&#20316;&#24050;&#23436;&#25104;&#20102;30&#20010;&#20219;&#21153;&#26465;&#65292;6&#20010;&#36827;&#34892;&#20013;&#65292;&#36824;&#26377;10&#20010;&#26410;&#35748;&#39046;&#65292;&#22823;&#23478;&#23601;&#19968;&#21475;&#27668;&#25226;&#23427;&#20204;&#37117;&#35299;&#20915;&#21543;&#65292;&#25105;&#22909;&#20687;&#30475;&#21040;&#32988;&#21033;&#30340;&#26329;&#20809;&#20102;&#65292;&#21621;&#21621;&#12290;</p><p><span class="bold"><b>2008&#24180;05&#26376;17&#26085;</b></span></p><p>&#35753;&#25105;&#20204;&#20026;&#22235;&#24029;&#28798;&#21306;&#30340;&#20154;&#20204;&#36865;&#19978;&#25105;&#20204;&#30340;&#31069;&#31119;&#65292;&#21521;&#22859;&#25112;&#22312;&#25937;&#28798;&#21069;&#32447;&#30340;&#20154;&#20204;&#33268;&#25964;&#65281;&#65281;&#65281;</p><p><span class="bold"><b>2008&#24180;05&#26376;25&#26085;</b></span></p><p>&#25105;&#20204;&#21097;&#20313;&#30340;&#30340;&#20960;&#20010;&#31456;&#33410;&#37117;&#24050;&#22788;&#22312;&#20914;&#21050;&#38454;&#27573;&#65292;&#19979;&#21608;&#23601;&#26159;&#20116;&#26376;&#30340;&#26368;&#21518;&#19968;&#21608;&#65292;&#22823;&#23478;&#20105;&#21462;&#33021;&#22312;&#20845;&#26376;&#23436;&#25104;&#25152;&#26377;&#30340;&#26657;&#23545;&#21457;&#24067;&#26368;&#32456;&#25991;&#26723;&#12290;</p><p><span class="bold"><b>2008&#24180;06&#26376;01&#26085;</b></span></p><p>&#20170;&#22825;&#26159;&#20799;&#31461;&#33410;&#65292;&#31069;&#25152;&#26377;&#30340;&#23567;&#26379;&#21451;&#20197;&#21450;&#31461;&#24515;&#26410;&#27887;&#30340;&#22823;&#26379;&#21451;&#20204;&#33410;&#26085;&#24555;&#20048;&#21704;&#65374;&#65374;</p><p>&#20986;&#29616;&#20102;&#28857;&#23567;&#24847;&#22806;&#65292;zhanglong&#36127;&#36131;&#30340;&#19977;&#20010;&#31456;&#33410;&#30001;&#20110;&#20043;&#21069;&#24536;&#20102;&#25552;&#20132;&#65292;&#32780;&#20182;&#20986;&#24046;&#30340;&#26102;&#38388;&#21448;&#19968;&#20877;&#21152;&#38271;&#65292;&#27809;&#21150;&#27861;&#25552;&#20132;&#65292;&#25152;&#20197;&#36825;&#21608;&#24320;&#22987;&#37325;&#26032;&#32763;&#35793;&#12290;&#12290;&#12290;&#30495;&#26159;&#20010;&#19981;&#24184;&#30340;&#28040;&#24687;&#12290;&#19981;&#36807;&#25105;&#20204;&#36824;&#26159;&#20105;&#21462;&#20845;&#26376;&#32467;&#26463;&#25152;&#26377;&#24037;&#20316;&#65292;&#22823;&#23478;&#35201;&#22909;&#22909;&#21152;&#27833;&#20102;&#21734;&#65281;&#65281;</p><p><span class="bold"><b>2008&#24180;06&#26376;08&#26085;</b></span></p><p>&#31471;&#21320;&#33410;&#21040;&#20102;&#65292;&#22823;&#23478;&#33410;&#26085;&#24555;&#20048;&#65292;&#35760;&#24471;&#35201;&#21507;&#31933;&#23376;&#21734;&#65374;&#65374;</p><p><span class="bold"><b>2008&#24180;06&#26376;15&#26085;</b></span></p><p>&#26412;&#21608;&#31532;3&#31456;&#30340;&#26657;&#23545;&#24037;&#20316;&#20840;&#37096;&#23436;&#25104;&#20102;&#65292;&#37325;&#26032;&#32763;&#35793;&#30340;&#31532;4&#31456;&#21644;&#31532;5&#31456;&#20063;&#24050;&#32763;&#35793;&#23436;&#27605;&#65292;&#19979;&#21608;&#24320;&#22987;&#26657;&#23545;&#12290;&#20026;&#20102;&#20445;&#35777;&#33021;&#22312;6&#26376;&#24213;&#23436;&#25104;&#65292;&#29616;&#23558;&#31532;8&#31456;&#19968;&#20998;&#20026;&#20108;&#65292;&#30001;zhanglong&#19982;pesome&#36827;&#34892;&#32763;&#35793;&#12290;&#35753;&#25105;&#20204;&#20026;&#25152;&#26377;&#20173;&#22859;&#26007;&#22312;&#25112;&#32447;&#19978;&#30340;&#21516;&#23398;&#40723;&#25484;&#21543;&#65374;</p><p><span class="bold"><b>2008&#24180;06&#26376;22&#26085;</b></span></p><p>&#31163;&#35745;&#21010;&#21457;&#24067;&#30340;&#26085;&#23376;&#36234;&#26469;&#36234;&#36817;&#20102;&#65292;&#22909;&#22312;&#19968;&#20999;&#36824;&#31639;&#39034;&#21033;&#65292;&#26412;&#21608;&#23436;&#25104;&#20102;&#31532;4&#31456;&#21644;&#31532;5&#31456;&#30340;&#26657;&#23545;&#65292;&#31532;8&#31456;&#20173;&#22312;&#32763;&#35793;&#20013;&#12290;&#30001;&#20110;&#24847;&#22806;&#23548;&#33268;&#39033;&#30446;&#24310;&#26399;&#23454;&#23646;&#26080;&#22856;&#65292;&#20294;&#21516;&#23398;&#20204;&#37117;&#24456;&#21162;&#21147;&#65292;&#24076;&#26395;&#33021;&#22815;&#22312;&#26376;&#24213;&#23436;&#25104;&#25152;&#26377;&#30340;&#20219;&#21153;&#65292;&#21516;&#26102;&#20570;&#22909;&#21457;&#24067;&#30340;&#20934;&#22791;&#30340;&#12290;</p><p><span class="bold"><b>2008&#24180;06&#26376;30&#26085;</b></span></p><p>&#26126;&#22825;&#65292;Spring Framework 2.5&#24320;&#21457;&#21442;&#32771;&#25163;&#20876;&#20013;&#25991;&#29256;&#32456;&#20110;&#35201;&#27491;&#24335;&#21457;&#24067;&#20102;&#65292;&#32463;&#36807;&#20102;&#23558;&#36817;4&#20010;&#26376;&#30340;&#19981;&#25032;&#21162;&#21147;&#65292;&#22823;&#23478;&#36763;&#33510;&#20102;&#65281;&#24863;&#35874;&#25152;&#26377;&#21442;&#19982;&#32763;&#35793;&#19982;&#26657;&#23545;&#30340;&#21516;&#23398;&#65292;&#24403;&#28982;&#36824;&#35201;&#35874;&#35874;&#25152;&#26377;&#20851;&#24515;&#21644;&#25903;&#25345;&#26412;&#27425;&#39033;&#30446;&#30340;&#20154;&#20204;&#65292;&#35874;&#35874;&#22823;&#23478;&#65374;</p></div></div></div></body></html>
