<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
      <title>3.6.&nbsp;更多 Bash 选项</title>
      <link rel="stylesheet" href="docbook.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.69.1">
      <meta name="keywords" content="Linux, Scripts, linux, Bash, guide, Guide, Exercises, exercises, bash, scripting, Scripting, awk, sed, variables, functions, loops, conditionals">
      <link rel="start" href="index.html" title="Bash新手指南">
      <link rel="up" href="ch03.html" title="第&nbsp;3&nbsp;章&nbsp;Bash环境">
      <link rel="prev" href="ch03s05.html" title="3.5.&nbsp;别名">
      <link rel="next" href="ch03s07.html" title="3.7.&nbsp;总结">
   </head>
   <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
      <div class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center">3.6.&nbsp;更多 Bash 选项</th>
            </tr>
            <tr>
               <td width="20%" align="left"><a accesskey="p" href="ch03s05.html">上一页</a>&nbsp;
               </td>
               <th width="60%" align="center">第&nbsp;3&nbsp;章&nbsp;Bash环境</th>
               <td width="20%" align="right">&nbsp;<a accesskey="n" href="ch03s07.html">下一页</a></td>
            </tr>
         </table>
         <hr>
      </div>
      <div class="sect1" lang="zh-cn">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title" style="clear: both"><a name="sect_03_06"></a>3.6.&nbsp;更多 Bash 选项
                  </h2>
               </div>
            </div>
         </div>
         <div class="sect2" lang="zh-cn">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title"><a name="sect_03_06_01"></a>3.6.1.&nbsp;显示选项
                     </h3>
                  </div>
               </div>
            </div>
            <p>我们已经讨论了一些对调试脚本很有用处的Bash选项。本节，我们将更深入地了解Bash的选项。</p>
            <p>使用 <code class="option">-o</code> 选项来 <span><strong class="command">set</strong></span> 显示所有的shell选项：
            </p><pre class="screen">
<code class="prompt">willy:~&gt;</code> <span><strong class="command">set <code class="option">-o</code></strong></span>
allexport		off
braceexpand		on
emacs			on
errexit			off
hashall			on
histexpand		on
history			on
ignoreeof		off
interactive-comments	on
keyword			off
monitor			on
noclobber		off
noexec			off
noglob			off
nolog			off
notify			off
nounset			off
onecmd			off
physical		off
posix			off
privileged		off
verbose			off
vi			off
xtrace			off
</pre><p>See the Bash Info pages, section <span class="guimenu">Shell Built-in Commands</span> → <span class="guimenuitem">The Set Built-in</span> for a description of each option.  A lot of options have one-character shorthands: the <code class="option">xtrace</code> option, for instance, is equal to specifying <span><strong class="command">set <code class="option">-x</code></strong></span>.
            </p>
         </div>
         <div class="sect2" lang="zh-cn">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title"><a name="sect_03_06_02"></a>3.6.2.&nbsp;改变选项
                     </h3>
                  </div>
               </div>
            </div>
            <p>Shell options can either be set different from the default upon calling the shell, or be set during shell operation.  They
               may also be included in the shell resource configuration files.
            </p>
            <p>The following command executes a script in POSIX-compatible mode:</p><pre class="screen">
<code class="prompt">willy:~/scripts&gt;</code> <span><strong class="command">bash <code class="option">--posix</code> <code class="filename">script.sh</code></strong></span>
</pre><p>需要临时改变当前的环境，或者需要在脚本中使用，我们不如使用 <span><strong class="command">set</strong></span>。使用 <span class="emphasis"><em>-</em></span> (dash)来开启一个选项 <span class="emphasis"><em>+</em></span> 来关闭：
            </p><pre class="screen">
<code class="prompt">willy:~/test&gt;</code> <span><strong class="command">set <code class="option">-o</code> <em class="parameter"><code>noclobber</code></em></strong></span>

<code class="prompt">willy:~/test&gt;</code> <span><strong class="command">touch <code class="filename">test</code></strong></span>

<code class="prompt">willy:~/test&gt;</code> <span><strong class="command">date &gt; <code class="filename">test</code></strong></span>
bash: test: cannot overwrite existing file

<code class="prompt">willy:~/test&gt;</code> <span><strong class="command">set <code class="option">+o</code> <em class="parameter"><code>noclobber</code></em></strong></span>

<code class="prompt">willy:~/test&gt;</code> <span><strong class="command">date &gt; <code class="filename">test</code></strong></span>
</pre><p>以上的例子证明了 <code class="option">noclobber</code> 选项， which prevents existing files from being overwritten by redirection operations.  The same goes for one-character options,
               for instance <code class="option">-u</code>, which will treat unset variables as an error when set, and exits a non-interactive shell upon
               encountering such errors:
            </p><pre class="screen">
<code class="prompt">willy:~&gt;</code> <span><strong class="command">echo <code class="varname">$VAR</code></strong></span>


<code class="prompt">willy:~&gt;</code> <span><strong class="command">set <code class="option">-u</code></strong></span>

<code class="prompt">willy:~&gt;</code> <span><strong class="command">echo <code class="varname">$VAR</code></strong></span>
bash: VAR: unbound variable
</pre><p>This option is also useful for detecting incorrect content assignment to variables: the same error will also occur, for instance,
               when assigning a character string to a variable that was declared explicitly as one holding only integer values.
            </p>
            <p>One last example follows, demonstrating the <code class="option">noglob</code> option, which prevents special characters from being expanded:
            </p><pre class="screen">
<code class="prompt">willy:~/testdir&gt;</code> <span><strong class="command">set <code class="option">-o</code> <em class="parameter"><code>noglob</code></em></strong></span>

<code class="prompt">willy:~/testdir&gt;</code> <span><strong class="command">touch <code class="filename">*</code></strong></span>

<code class="prompt">willy:~/testdir&gt;</code> <span><strong class="command">ls <code class="option">-l</code> <code class="filename">*</code></strong></span>
-rw-rw-r--    1 willy    willy		0 Feb 27 13:37 *
</pre></div>
      </div>
      <div class="navfooter">
         <hr>
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left"><a accesskey="p" href="ch03s05.html">上一页</a>&nbsp;
               </td>
               <td width="20%" align="center"><a accesskey="u" href="ch03.html">上一级</a></td>
               <td width="40%" align="right">&nbsp;<a accesskey="n" href="ch03s07.html">下一页</a></td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top">3.5.&nbsp;别名&nbsp;</td>
               <td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td>
               <td width="40%" align="right" valign="top">&nbsp;3.7.&nbsp;总结</td>
            </tr>
         </table>
      </div>
   </body>
</html>